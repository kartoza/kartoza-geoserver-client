var u3=t=>{throw TypeError(t)};var Gj=(t,e,n)=>e.has(t)||u3("Cannot "+n);var Be=(t,e,n)=>(Gj(t,e,"read from private field"),n?n.call(t):e.get(t)),On=(t,e,n)=>e.has(t)?u3("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),cn=(t,e,n,r)=>(Gj(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ar=(t,e,n)=>(Gj(t,e,"access private method"),n);var Lw=(t,e,n,r)=>({set _(i){cn(t,e,i,n)},get _(){return Be(t,e,r)}});function BJ(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p9={exports:{}},dC={},m9={exports:{}},gr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_=Symbol.for("react.element"),$J=Symbol.for("react.portal"),NJ=Symbol.for("react.fragment"),VJ=Symbol.for("react.strict_mode"),WJ=Symbol.for("react.profiler"),UJ=Symbol.for("react.provider"),qJ=Symbol.for("react.context"),QJ=Symbol.for("react.forward_ref"),HJ=Symbol.for("react.suspense"),GJ=Symbol.for("react.memo"),XJ=Symbol.for("react.lazy"),h3=Symbol.iterator;function KJ(t){return t===null||typeof t!="object"?null:(t=h3&&t[h3]||t["@@iterator"],typeof t=="function"?t:null)}var g9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y9=Object.assign,x9={};function tx(t,e,n){this.props=t,this.context=e,this.refs=x9,this.updater=n||g9}tx.prototype.isReactComponent={};tx.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};tx.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function v9(){}v9.prototype=tx.prototype;function BI(t,e,n){this.props=t,this.context=e,this.refs=x9,this.updater=n||g9}var $I=BI.prototype=new v9;$I.constructor=BI;y9($I,tx.prototype);$I.isPureReactComponent=!0;var d3=Array.isArray,b9=Object.prototype.hasOwnProperty,NI={current:null},_9={key:!0,ref:!0,__self:!0,__source:!0};function w9(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)b9.call(e,r)&&!_9.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var h=Array(a),p=0;p<a;p++)h[p]=arguments[p+2];i.children=h}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:e_,type:t,key:s,ref:o,props:i,_owner:NI.current}}function ZJ(t,e){return{$$typeof:e_,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function VI(t){return typeof t=="object"&&t!==null&&t.$$typeof===e_}function YJ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var f3=/\/+/g;function Xj(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YJ(""+t.key):e.toString(36)}function GS(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case e_:case $J:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Xj(o,0):r,d3(i)?(n="",t!=null&&(n=t.replace(f3,"$&/")+"/"),GS(i,e,n,"",function(p){return p})):i!=null&&(VI(i)&&(i=ZJ(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(f3,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",d3(t))for(var a=0;a<t.length;a++){s=t[a];var h=r+Xj(s,a);o+=GS(s,e,n,h,i)}else if(h=KJ(t),typeof h=="function")for(t=h.call(t),a=0;!(s=t.next()).done;)s=s.value,h=r+Xj(s,a++),o+=GS(s,e,n,h,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fw(t,e,n){if(t==null)return t;var r=[],i=0;return GS(t,r,"","",function(s){return e.call(n,s,i++)}),r}function JJ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ca={current:null},XS={transition:null},eee={ReactCurrentDispatcher:ca,ReactCurrentBatchConfig:XS,ReactCurrentOwner:NI};function S9(){throw Error("act(...) is not supported in production builds of React.")}gr.Children={map:Fw,forEach:function(t,e,n){Fw(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fw(t,function(){e++}),e},toArray:function(t){return Fw(t,function(e){return e})||[]},only:function(t){if(!VI(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};gr.Component=tx;gr.Fragment=NJ;gr.Profiler=WJ;gr.PureComponent=BI;gr.StrictMode=VJ;gr.Suspense=HJ;gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eee;gr.act=S9;gr.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=y9({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=NI.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(h in e)b9.call(e,h)&&!_9.hasOwnProperty(h)&&(r[h]=e[h]===void 0&&a!==void 0?a[h]:e[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){a=Array(h);for(var p=0;p<h;p++)a[p]=arguments[p+2];r.children=a}return{$$typeof:e_,type:t.type,key:i,ref:s,props:r,_owner:o}};gr.createContext=function(t){return t={$$typeof:qJ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:UJ,_context:t},t.Consumer=t};gr.createElement=w9;gr.createFactory=function(t){var e=w9.bind(null,t);return e.type=t,e};gr.createRef=function(){return{current:null}};gr.forwardRef=function(t){return{$$typeof:QJ,render:t}};gr.isValidElement=VI;gr.lazy=function(t){return{$$typeof:XJ,_payload:{_status:-1,_result:t},_init:JJ}};gr.memo=function(t,e){return{$$typeof:GJ,type:t,compare:e===void 0?null:e}};gr.startTransition=function(t){var e=XS.transition;XS.transition={};try{t()}finally{XS.transition=e}};gr.unstable_act=S9;gr.useCallback=function(t,e){return ca.current.useCallback(t,e)};gr.useContext=function(t){return ca.current.useContext(t)};gr.useDebugValue=function(){};gr.useDeferredValue=function(t){return ca.current.useDeferredValue(t)};gr.useEffect=function(t,e){return ca.current.useEffect(t,e)};gr.useId=function(){return ca.current.useId()};gr.useImperativeHandle=function(t,e,n){return ca.current.useImperativeHandle(t,e,n)};gr.useInsertionEffect=function(t,e){return ca.current.useInsertionEffect(t,e)};gr.useLayoutEffect=function(t,e){return ca.current.useLayoutEffect(t,e)};gr.useMemo=function(t,e){return ca.current.useMemo(t,e)};gr.useReducer=function(t,e,n){return ca.current.useReducer(t,e,n)};gr.useRef=function(t){return ca.current.useRef(t)};gr.useState=function(t){return ca.current.useState(t)};gr.useSyncExternalStore=function(t,e,n){return ca.current.useSyncExternalStore(t,e,n)};gr.useTransition=function(){return ca.current.useTransition()};gr.version="18.3.1";m9.exports=gr;var L=m9.exports;const Gi=Zm(L),p3=BJ({__proto__:null,default:Gi},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tee=L,nee=Symbol.for("react.element"),ree=Symbol.for("react.fragment"),iee=Object.prototype.hasOwnProperty,see=tee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oee={key:!0,ref:!0,__self:!0,__source:!0};function k9(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)iee.call(e,r)&&!oee.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:nee,type:t,key:s,ref:o,props:i,_owner:see.current}}dC.Fragment=ree;dC.jsx=k9;dC.jsxs=k9;p9.exports=dC;var u=p9.exports,wA={},C9={exports:{}},Tl={},T9={exports:{}},j9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Ie,Qe){var se=Ie.length;Ie.push(Qe);e:for(;0<se;){var Re=se-1>>>1,Oe=Ie[Re];if(0<i(Oe,Qe))Ie[Re]=Qe,Ie[se]=Oe,se=Re;else break e}}function n(Ie){return Ie.length===0?null:Ie[0]}function r(Ie){if(Ie.length===0)return null;var Qe=Ie[0],se=Ie.pop();if(se!==Qe){Ie[0]=se;e:for(var Re=0,Oe=Ie.length,oe=Oe>>>1;Re<oe;){var nt=2*(Re+1)-1,Ne=Ie[nt],tt=nt+1,Ye=Ie[tt];if(0>i(Ne,se))tt<Oe&&0>i(Ye,Ne)?(Ie[Re]=Ye,Ie[tt]=se,Re=tt):(Ie[Re]=Ne,Ie[nt]=se,Re=nt);else if(tt<Oe&&0>i(Ye,se))Ie[Re]=Ye,Ie[tt]=se,Re=tt;else break e}}return Qe}function i(Ie,Qe){var se=Ie.sortIndex-Qe.sortIndex;return se!==0?se:Ie.id-Qe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var h=[],p=[],g=1,y=null,b=3,S=!1,P=!1,O=!1,D=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(Ie){for(var Qe=n(p);Qe!==null;){if(Qe.callback===null)r(p);else if(Qe.startTime<=Ie)r(p),Qe.sortIndex=Qe.expirationTime,e(h,Qe);else break;Qe=n(p)}}function N(Ie){if(O=!1,R(Ie),!P)if(n(h)!==null)P=!0,Fe(Q);else{var Qe=n(p);Qe!==null&&we(N,Qe.startTime-Ie)}}function Q(Ie,Qe){P=!1,O&&(O=!1,z(K),K=-1),S=!0;var se=b;try{for(R(Qe),y=n(h);y!==null&&(!(y.expirationTime>Qe)||Ie&&!ae());){var Re=y.callback;if(typeof Re=="function"){y.callback=null,b=y.priorityLevel;var Oe=Re(y.expirationTime<=Qe);Qe=t.unstable_now(),typeof Oe=="function"?y.callback=Oe:y===n(h)&&r(h),R(Qe)}else r(h);y=n(h)}if(y!==null)var oe=!0;else{var nt=n(p);nt!==null&&we(N,nt.startTime-Qe),oe=!1}return oe}finally{y=null,b=se,S=!1}}var q=!1,X=null,K=-1,ne=5,J=-1;function ae(){return!(t.unstable_now()-J<ne)}function Ee(){if(X!==null){var Ie=t.unstable_now();J=Ie;var Qe=!0;try{Qe=X(!0,Ie)}finally{Qe?Ce():(q=!1,X=null)}}else q=!1}var Ce;if(typeof F=="function")Ce=function(){F(Ee)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,We=$e.port2;$e.port1.onmessage=Ee,Ce=function(){We.postMessage(null)}}else Ce=function(){D(Ee,0)};function Fe(Ie){X=Ie,q||(q=!0,Ce())}function we(Ie,Qe){K=D(function(){Ie(t.unstable_now())},Qe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ie){Ie.callback=null},t.unstable_continueExecution=function(){P||S||(P=!0,Fe(Q))},t.unstable_forceFrameRate=function(Ie){0>Ie||125<Ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<Ie?Math.floor(1e3/Ie):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(Ie){switch(b){case 1:case 2:case 3:var Qe=3;break;default:Qe=b}var se=b;b=Qe;try{return Ie()}finally{b=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ie,Qe){switch(Ie){case 1:case 2:case 3:case 4:case 5:break;default:Ie=3}var se=b;b=Ie;try{return Qe()}finally{b=se}},t.unstable_scheduleCallback=function(Ie,Qe,se){var Re=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Re+se:Re):se=Re,Ie){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=se+Oe,Ie={id:g++,callback:Qe,priorityLevel:Ie,startTime:se,expirationTime:Oe,sortIndex:-1},se>Re?(Ie.sortIndex=se,e(p,Ie),n(h)===null&&Ie===n(p)&&(O?(z(K),K=-1):O=!0,we(N,se-Re))):(Ie.sortIndex=Oe,e(h,Ie),P||S||(P=!0,Fe(Q))),Ie},t.unstable_shouldYield=ae,t.unstable_wrapCallback=function(Ie){var Qe=b;return function(){var se=b;b=Qe;try{return Ie.apply(this,arguments)}finally{b=se}}}})(j9);T9.exports=j9;var aee=T9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lee=L,_l=aee;function Rt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var P9=new Set,qb={};function Ym(t,e){_0(t,e),_0(t+"Capture",e)}function _0(t,e){for(qb[t]=e,t=0;t<e.length;t++)P9.add(e[t])}var Nh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),SA=Object.prototype.hasOwnProperty,cee=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m3={},g3={};function uee(t){return SA.call(g3,t)?!0:SA.call(m3,t)?!1:cee.test(t)?g3[t]=!0:(m3[t]=!0,!1)}function hee(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dee(t,e,n,r){if(e===null||typeof e>"u"||hee(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ua(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var vo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vo[t]=new ua(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vo[e]=new ua(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vo[t]=new ua(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vo[t]=new ua(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vo[t]=new ua(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vo[t]=new ua(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vo[t]=new ua(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vo[t]=new ua(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vo[t]=new ua(t,5,!1,t.toLowerCase(),null,!1,!1)});var WI=/[\-:]([a-z])/g;function UI(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(WI,UI);vo[e]=new ua(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(WI,UI);vo[e]=new ua(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(WI,UI);vo[e]=new ua(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vo[t]=new ua(t,1,!1,t.toLowerCase(),null,!1,!1)});vo.xlinkHref=new ua("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vo[t]=new ua(t,1,!1,t.toLowerCase(),null,!0,!0)});function qI(t,e,n,r){var i=vo.hasOwnProperty(e)?vo[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dee(e,n,i,r)&&(n=null),r||i===null?uee(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yh=lee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bw=Symbol.for("react.element"),dy=Symbol.for("react.portal"),fy=Symbol.for("react.fragment"),QI=Symbol.for("react.strict_mode"),kA=Symbol.for("react.profiler"),O9=Symbol.for("react.provider"),A9=Symbol.for("react.context"),HI=Symbol.for("react.forward_ref"),CA=Symbol.for("react.suspense"),TA=Symbol.for("react.suspense_list"),GI=Symbol.for("react.memo"),Nd=Symbol.for("react.lazy"),E9=Symbol.for("react.offscreen"),y3=Symbol.iterator;function vv(t){return t===null||typeof t!="object"?null:(t=y3&&t[y3]||t["@@iterator"],typeof t=="function"?t:null)}var Li=Object.assign,Kj;function qv(t){if(Kj===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kj=e&&e[1]||""}return`
`+Kj+t}var Zj=!1;function Yj(t,e){if(!t||Zj)return"";Zj=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var h=`
`+i[o].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=o&&0<=a);break}}}finally{Zj=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qv(t):""}function fee(t){switch(t.tag){case 5:return qv(t.type);case 16:return qv("Lazy");case 13:return qv("Suspense");case 19:return qv("SuspenseList");case 0:case 2:case 15:return t=Yj(t.type,!1),t;case 11:return t=Yj(t.type.render,!1),t;case 1:return t=Yj(t.type,!0),t;default:return""}}function jA(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fy:return"Fragment";case dy:return"Portal";case kA:return"Profiler";case QI:return"StrictMode";case CA:return"Suspense";case TA:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case A9:return(t.displayName||"Context")+".Consumer";case O9:return(t._context.displayName||"Context")+".Provider";case HI:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case GI:return e=t.displayName||null,e!==null?e:jA(t.type)||"Memo";case Nd:e=t._payload,t=t._init;try{return jA(t(e))}catch{}}return null}function pee(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jA(e);case 8:return e===QI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Af(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function z9(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mee(t){var e=z9(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $w(t){t._valueTracker||(t._valueTracker=mee(t))}function I9(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=z9(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Uk(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function PA(t,e){var n=e.checked;return Li({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function x3(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Af(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function M9(t,e){e=e.checked,e!=null&&qI(t,"checked",e,!1)}function OA(t,e){M9(t,e);var n=Af(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?AA(t,e.type,n):e.hasOwnProperty("defaultValue")&&AA(t,e.type,Af(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function v3(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function AA(t,e,n){(e!=="number"||Uk(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qv=Array.isArray;function Fy(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Af(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function EA(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Rt(91));return Li({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function b3(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Rt(92));if(Qv(n)){if(1<n.length)throw Error(Rt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Af(n)}}function R9(t,e){var n=Af(e.value),r=Af(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _3(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function D9(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zA(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?D9(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nw,L9=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nw=Nw||document.createElement("div"),Nw.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nw.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qb(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gee=["Webkit","ms","Moz","O"];Object.keys(hb).forEach(function(t){gee.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hb[e]=hb[t]})});function F9(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hb.hasOwnProperty(t)&&hb[t]?(""+e).trim():e+"px"}function B9(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=F9(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var yee=Li({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function IA(t,e){if(e){if(yee[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Rt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Rt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Rt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Rt(62))}}function MA(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RA=null;function XI(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var DA=null,By=null,$y=null;function w3(t){if(t=r_(t)){if(typeof DA!="function")throw Error(Rt(280));var e=t.stateNode;e&&(e=yC(e),DA(t.stateNode,t.type,e))}}function $9(t){By?$y?$y.push(t):$y=[t]:By=t}function N9(){if(By){var t=By,e=$y;if($y=By=null,w3(t),e)for(t=0;t<e.length;t++)w3(e[t])}}function V9(t,e){return t(e)}function W9(){}var Jj=!1;function U9(t,e,n){if(Jj)return t(e,n);Jj=!0;try{return V9(t,e,n)}finally{Jj=!1,(By!==null||$y!==null)&&(W9(),N9())}}function Hb(t,e){var n=t.stateNode;if(n===null)return null;var r=yC(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Rt(231,e,typeof n));return n}var LA=!1;if(Nh)try{var bv={};Object.defineProperty(bv,"passive",{get:function(){LA=!0}}),window.addEventListener("test",bv,bv),window.removeEventListener("test",bv,bv)}catch{LA=!1}function xee(t,e,n,r,i,s,o,a,h){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(g){this.onError(g)}}var db=!1,qk=null,Qk=!1,FA=null,vee={onError:function(t){db=!0,qk=t}};function bee(t,e,n,r,i,s,o,a,h){db=!1,qk=null,xee.apply(vee,arguments)}function _ee(t,e,n,r,i,s,o,a,h){if(bee.apply(this,arguments),db){if(db){var p=qk;db=!1,qk=null}else throw Error(Rt(198));Qk||(Qk=!0,FA=p)}}function Jm(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function q9(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function S3(t){if(Jm(t)!==t)throw Error(Rt(188))}function wee(t){var e=t.alternate;if(!e){if(e=Jm(t),e===null)throw Error(Rt(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return S3(i),t;if(s===r)return S3(i),e;s=s.sibling}throw Error(Rt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Rt(189))}}if(n.alternate!==r)throw Error(Rt(190))}if(n.tag!==3)throw Error(Rt(188));return n.stateNode.current===n?t:e}function Q9(t){return t=wee(t),t!==null?H9(t):null}function H9(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=H9(t);if(e!==null)return e;t=t.sibling}return null}var G9=_l.unstable_scheduleCallback,k3=_l.unstable_cancelCallback,See=_l.unstable_shouldYield,kee=_l.unstable_requestPaint,Xi=_l.unstable_now,Cee=_l.unstable_getCurrentPriorityLevel,KI=_l.unstable_ImmediatePriority,X9=_l.unstable_UserBlockingPriority,Hk=_l.unstable_NormalPriority,Tee=_l.unstable_LowPriority,K9=_l.unstable_IdlePriority,fC=null,Fu=null;function jee(t){if(Fu&&typeof Fu.onCommitFiberRoot=="function")try{Fu.onCommitFiberRoot(fC,t,void 0,(t.current.flags&128)===128)}catch{}}var Bc=Math.clz32?Math.clz32:Aee,Pee=Math.log,Oee=Math.LN2;function Aee(t){return t>>>=0,t===0?32:31-(Pee(t)/Oee|0)|0}var Vw=64,Ww=4194304;function Hv(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gk(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Hv(a):(s&=o,s!==0&&(r=Hv(s)))}else o=n&~i,o!==0?r=Hv(o):s!==0&&(r=Hv(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Bc(e),i=1<<n,r|=t[n],e&=~i;return r}function Eee(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zee(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Bc(s),a=1<<o,h=i[o];h===-1?(!(a&n)||a&r)&&(i[o]=Eee(a,e)):h<=e&&(t.expiredLanes|=a),s&=~a}}function BA(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Z9(){var t=Vw;return Vw<<=1,!(Vw&4194240)&&(Vw=64),t}function eP(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function t_(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bc(e),t[e]=n}function Iee(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Bc(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ZI(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Bc(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Zr=0;function Y9(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var J9,YI,eV,tV,nV,$A=!1,Uw=[],pf=null,mf=null,gf=null,Gb=new Map,Xb=new Map,Hd=[],Mee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C3(t,e){switch(t){case"focusin":case"focusout":pf=null;break;case"dragenter":case"dragleave":mf=null;break;case"mouseover":case"mouseout":gf=null;break;case"pointerover":case"pointerout":Gb.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xb.delete(e.pointerId)}}function _v(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=r_(e),e!==null&&YI(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ree(t,e,n,r,i){switch(e){case"focusin":return pf=_v(pf,t,e,n,r,i),!0;case"dragenter":return mf=_v(mf,t,e,n,r,i),!0;case"mouseover":return gf=_v(gf,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Gb.set(s,_v(Gb.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Xb.set(s,_v(Xb.get(s)||null,t,e,n,r,i)),!0}return!1}function rV(t){var e=Kp(t.target);if(e!==null){var n=Jm(e);if(n!==null){if(e=n.tag,e===13){if(e=q9(n),e!==null){t.blockedOn=e,nV(t.priority,function(){eV(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function KS(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=NA(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);RA=r,n.target.dispatchEvent(r),RA=null}else return e=r_(n),e!==null&&YI(e),t.blockedOn=n,!1;e.shift()}return!0}function T3(t,e,n){KS(t)&&n.delete(e)}function Dee(){$A=!1,pf!==null&&KS(pf)&&(pf=null),mf!==null&&KS(mf)&&(mf=null),gf!==null&&KS(gf)&&(gf=null),Gb.forEach(T3),Xb.forEach(T3)}function wv(t,e){t.blockedOn===e&&(t.blockedOn=null,$A||($A=!0,_l.unstable_scheduleCallback(_l.unstable_NormalPriority,Dee)))}function Kb(t){function e(i){return wv(i,t)}if(0<Uw.length){wv(Uw[0],t);for(var n=1;n<Uw.length;n++){var r=Uw[n];r.blockedOn===t&&(r.blockedOn=null)}}for(pf!==null&&wv(pf,t),mf!==null&&wv(mf,t),gf!==null&&wv(gf,t),Gb.forEach(e),Xb.forEach(e),n=0;n<Hd.length;n++)r=Hd[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hd.length&&(n=Hd[0],n.blockedOn===null);)rV(n),n.blockedOn===null&&Hd.shift()}var Ny=Yh.ReactCurrentBatchConfig,Xk=!0;function Lee(t,e,n,r){var i=Zr,s=Ny.transition;Ny.transition=null;try{Zr=1,JI(t,e,n,r)}finally{Zr=i,Ny.transition=s}}function Fee(t,e,n,r){var i=Zr,s=Ny.transition;Ny.transition=null;try{Zr=4,JI(t,e,n,r)}finally{Zr=i,Ny.transition=s}}function JI(t,e,n,r){if(Xk){var i=NA(t,e,n,r);if(i===null)uP(t,e,r,Kk,n),C3(t,r);else if(Ree(i,t,e,n,r))r.stopPropagation();else if(C3(t,r),e&4&&-1<Mee.indexOf(t)){for(;i!==null;){var s=r_(i);if(s!==null&&J9(s),s=NA(t,e,n,r),s===null&&uP(t,e,r,Kk,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else uP(t,e,r,null,n)}}var Kk=null;function NA(t,e,n,r){if(Kk=null,t=XI(r),t=Kp(t),t!==null)if(e=Jm(t),e===null)t=null;else if(n=e.tag,n===13){if(t=q9(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Kk=t,null}function iV(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cee()){case KI:return 1;case X9:return 4;case Hk:case Tee:return 16;case K9:return 536870912;default:return 16}default:return 16}}var hf=null,eM=null,ZS=null;function sV(){if(ZS)return ZS;var t,e=eM,n=e.length,r,i="value"in hf?hf.value:hf.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ZS=i.slice(t,1<r?1-r:void 0)}function YS(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qw(){return!0}function j3(){return!1}function jl(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?qw:j3,this.isPropagationStopped=j3,this}return Li(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qw)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qw)},persist:function(){},isPersistent:qw}),e}var nx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tM=jl(nx),n_=Li({},nx,{view:0,detail:0}),Bee=jl(n_),tP,nP,Sv,pC=Li({},n_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nM,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sv&&(Sv&&t.type==="mousemove"?(tP=t.screenX-Sv.screenX,nP=t.screenY-Sv.screenY):nP=tP=0,Sv=t),tP)},movementY:function(t){return"movementY"in t?t.movementY:nP}}),P3=jl(pC),$ee=Li({},pC,{dataTransfer:0}),Nee=jl($ee),Vee=Li({},n_,{relatedTarget:0}),rP=jl(Vee),Wee=Li({},nx,{animationName:0,elapsedTime:0,pseudoElement:0}),Uee=jl(Wee),qee=Li({},nx,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Qee=jl(qee),Hee=Li({},nx,{data:0}),O3=jl(Hee),Gee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zee(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Kee[t])?!!e[t]:!1}function nM(){return Zee}var Yee=Li({},n_,{key:function(t){if(t.key){var e=Gee[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=YS(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xee[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nM,charCode:function(t){return t.type==="keypress"?YS(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?YS(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Jee=jl(Yee),ete=Li({},pC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A3=jl(ete),tte=Li({},n_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nM}),nte=jl(tte),rte=Li({},nx,{propertyName:0,elapsedTime:0,pseudoElement:0}),ite=jl(rte),ste=Li({},pC,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ote=jl(ste),ate=[9,13,27,32],rM=Nh&&"CompositionEvent"in window,fb=null;Nh&&"documentMode"in document&&(fb=document.documentMode);var lte=Nh&&"TextEvent"in window&&!fb,oV=Nh&&(!rM||fb&&8<fb&&11>=fb),E3=" ",z3=!1;function aV(t,e){switch(t){case"keyup":return ate.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lV(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var py=!1;function cte(t,e){switch(t){case"compositionend":return lV(e);case"keypress":return e.which!==32?null:(z3=!0,E3);case"textInput":return t=e.data,t===E3&&z3?null:t;default:return null}}function ute(t,e){if(py)return t==="compositionend"||!rM&&aV(t,e)?(t=sV(),ZS=eM=hf=null,py=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oV&&e.locale!=="ko"?null:e.data;default:return null}}var hte={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I3(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hte[t.type]:e==="textarea"}function cV(t,e,n,r){$9(r),e=Zk(e,"onChange"),0<e.length&&(n=new tM("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var pb=null,Zb=null;function dte(t){bV(t,0)}function mC(t){var e=yy(t);if(I9(e))return t}function fte(t,e){if(t==="change")return e}var uV=!1;if(Nh){var iP;if(Nh){var sP="oninput"in document;if(!sP){var M3=document.createElement("div");M3.setAttribute("oninput","return;"),sP=typeof M3.oninput=="function"}iP=sP}else iP=!1;uV=iP&&(!document.documentMode||9<document.documentMode)}function R3(){pb&&(pb.detachEvent("onpropertychange",hV),Zb=pb=null)}function hV(t){if(t.propertyName==="value"&&mC(Zb)){var e=[];cV(e,Zb,t,XI(t)),U9(dte,e)}}function pte(t,e,n){t==="focusin"?(R3(),pb=e,Zb=n,pb.attachEvent("onpropertychange",hV)):t==="focusout"&&R3()}function mte(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mC(Zb)}function gte(t,e){if(t==="click")return mC(e)}function yte(t,e){if(t==="input"||t==="change")return mC(e)}function xte(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Uc=typeof Object.is=="function"?Object.is:xte;function Yb(t,e){if(Uc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!SA.call(e,i)||!Uc(t[i],e[i]))return!1}return!0}function D3(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function L3(t,e){var n=D3(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=D3(n)}}function dV(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dV(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fV(){for(var t=window,e=Uk();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Uk(t.document)}return e}function iM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vte(t){var e=fV(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dV(n.ownerDocument.documentElement,n)){if(r!==null&&iM(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=L3(n,s);var o=L3(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bte=Nh&&"documentMode"in document&&11>=document.documentMode,my=null,VA=null,mb=null,WA=!1;function F3(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;WA||my==null||my!==Uk(r)||(r=my,"selectionStart"in r&&iM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),mb&&Yb(mb,r)||(mb=r,r=Zk(VA,"onSelect"),0<r.length&&(e=new tM("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=my)))}function Qw(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gy={animationend:Qw("Animation","AnimationEnd"),animationiteration:Qw("Animation","AnimationIteration"),animationstart:Qw("Animation","AnimationStart"),transitionend:Qw("Transition","TransitionEnd")},oP={},pV={};Nh&&(pV=document.createElement("div").style,"AnimationEvent"in window||(delete gy.animationend.animation,delete gy.animationiteration.animation,delete gy.animationstart.animation),"TransitionEvent"in window||delete gy.transitionend.transition);function gC(t){if(oP[t])return oP[t];if(!gy[t])return t;var e=gy[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in pV)return oP[t]=e[n];return t}var mV=gC("animationend"),gV=gC("animationiteration"),yV=gC("animationstart"),xV=gC("transitionend"),vV=new Map,B3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kf(t,e){vV.set(t,e),Ym(e,[t])}for(var aP=0;aP<B3.length;aP++){var lP=B3[aP],_te=lP.toLowerCase(),wte=lP[0].toUpperCase()+lP.slice(1);Kf(_te,"on"+wte)}Kf(mV,"onAnimationEnd");Kf(gV,"onAnimationIteration");Kf(yV,"onAnimationStart");Kf("dblclick","onDoubleClick");Kf("focusin","onFocus");Kf("focusout","onBlur");Kf(xV,"onTransitionEnd");_0("onMouseEnter",["mouseout","mouseover"]);_0("onMouseLeave",["mouseout","mouseover"]);_0("onPointerEnter",["pointerout","pointerover"]);_0("onPointerLeave",["pointerout","pointerover"]);Ym("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ym("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ym("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ym("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ym("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ym("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ste=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gv));function $3(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,_ee(r,e,void 0,t),t.currentTarget=null}function bV(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],h=a.instance,p=a.currentTarget;if(a=a.listener,h!==s&&i.isPropagationStopped())break e;$3(i,a,p),s=h}else for(o=0;o<r.length;o++){if(a=r[o],h=a.instance,p=a.currentTarget,a=a.listener,h!==s&&i.isPropagationStopped())break e;$3(i,a,p),s=h}}}if(Qk)throw t=FA,Qk=!1,FA=null,t}function vi(t,e){var n=e[GA];n===void 0&&(n=e[GA]=new Set);var r=t+"__bubble";n.has(r)||(_V(e,t,2,!1),n.add(r))}function cP(t,e,n){var r=0;e&&(r|=4),_V(n,t,r,e)}var Hw="_reactListening"+Math.random().toString(36).slice(2);function Jb(t){if(!t[Hw]){t[Hw]=!0,P9.forEach(function(n){n!=="selectionchange"&&(Ste.has(n)||cP(n,!1,t),cP(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hw]||(e[Hw]=!0,cP("selectionchange",!1,e))}}function _V(t,e,n,r){switch(iV(e)){case 1:var i=Lee;break;case 4:i=Fee;break;default:i=JI}n=i.bind(null,e,n,t),i=void 0,!LA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function uP(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var h=o.tag;if((h===3||h===4)&&(h=o.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Kp(a),o===null)return;if(h=o.tag,h===5||h===6){r=s=o;continue e}a=a.parentNode}}r=r.return}U9(function(){var p=s,g=XI(n),y=[];e:{var b=vV.get(t);if(b!==void 0){var S=tM,P=t;switch(t){case"keypress":if(YS(n)===0)break e;case"keydown":case"keyup":S=Jee;break;case"focusin":P="focus",S=rP;break;case"focusout":P="blur",S=rP;break;case"beforeblur":case"afterblur":S=rP;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=P3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Nee;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=nte;break;case mV:case gV:case yV:S=Uee;break;case xV:S=ite;break;case"scroll":S=Bee;break;case"wheel":S=ote;break;case"copy":case"cut":case"paste":S=Qee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=A3}var O=(e&4)!==0,D=!O&&t==="scroll",z=O?b!==null?b+"Capture":null:b;O=[];for(var F=p,R;F!==null;){R=F;var N=R.stateNode;if(R.tag===5&&N!==null&&(R=N,z!==null&&(N=Hb(F,z),N!=null&&O.push(e1(F,N,R)))),D)break;F=F.return}0<O.length&&(b=new S(b,P,null,n,g),y.push({event:b,listeners:O}))}}if(!(e&7)){e:{if(b=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",b&&n!==RA&&(P=n.relatedTarget||n.fromElement)&&(Kp(P)||P[Vh]))break e;if((S||b)&&(b=g.window===g?g:(b=g.ownerDocument)?b.defaultView||b.parentWindow:window,S?(P=n.relatedTarget||n.toElement,S=p,P=P?Kp(P):null,P!==null&&(D=Jm(P),P!==D||P.tag!==5&&P.tag!==6)&&(P=null)):(S=null,P=p),S!==P)){if(O=P3,N="onMouseLeave",z="onMouseEnter",F="mouse",(t==="pointerout"||t==="pointerover")&&(O=A3,N="onPointerLeave",z="onPointerEnter",F="pointer"),D=S==null?b:yy(S),R=P==null?b:yy(P),b=new O(N,F+"leave",S,n,g),b.target=D,b.relatedTarget=R,N=null,Kp(g)===p&&(O=new O(z,F+"enter",P,n,g),O.target=R,O.relatedTarget=D,N=O),D=N,S&&P)t:{for(O=S,z=P,F=0,R=O;R;R=Yg(R))F++;for(R=0,N=z;N;N=Yg(N))R++;for(;0<F-R;)O=Yg(O),F--;for(;0<R-F;)z=Yg(z),R--;for(;F--;){if(O===z||z!==null&&O===z.alternate)break t;O=Yg(O),z=Yg(z)}O=null}else O=null;S!==null&&N3(y,b,S,O,!1),P!==null&&D!==null&&N3(y,D,P,O,!0)}}e:{if(b=p?yy(p):window,S=b.nodeName&&b.nodeName.toLowerCase(),S==="select"||S==="input"&&b.type==="file")var Q=fte;else if(I3(b))if(uV)Q=yte;else{Q=mte;var q=pte}else(S=b.nodeName)&&S.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(Q=gte);if(Q&&(Q=Q(t,p))){cV(y,Q,n,g);break e}q&&q(t,b,p),t==="focusout"&&(q=b._wrapperState)&&q.controlled&&b.type==="number"&&AA(b,"number",b.value)}switch(q=p?yy(p):window,t){case"focusin":(I3(q)||q.contentEditable==="true")&&(my=q,VA=p,mb=null);break;case"focusout":mb=VA=my=null;break;case"mousedown":WA=!0;break;case"contextmenu":case"mouseup":case"dragend":WA=!1,F3(y,n,g);break;case"selectionchange":if(bte)break;case"keydown":case"keyup":F3(y,n,g)}var X;if(rM)e:{switch(t){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else py?aV(t,n)&&(K="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(K="onCompositionStart");K&&(oV&&n.locale!=="ko"&&(py||K!=="onCompositionStart"?K==="onCompositionEnd"&&py&&(X=sV()):(hf=g,eM="value"in hf?hf.value:hf.textContent,py=!0)),q=Zk(p,K),0<q.length&&(K=new O3(K,t,null,n,g),y.push({event:K,listeners:q}),X?K.data=X:(X=lV(n),X!==null&&(K.data=X)))),(X=lte?cte(t,n):ute(t,n))&&(p=Zk(p,"onBeforeInput"),0<p.length&&(g=new O3("onBeforeInput","beforeinput",null,n,g),y.push({event:g,listeners:p}),g.data=X))}bV(y,e)})}function e1(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zk(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Hb(t,n),s!=null&&r.unshift(e1(t,s,i)),s=Hb(t,e),s!=null&&r.push(e1(t,s,i))),t=t.return}return r}function Yg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function N3(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,h=a.alternate,p=a.stateNode;if(h!==null&&h===r)break;a.tag===5&&p!==null&&(a=p,i?(h=Hb(n,s),h!=null&&o.unshift(e1(n,h,a))):i||(h=Hb(n,s),h!=null&&o.push(e1(n,h,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kte=/\r\n?/g,Cte=/\u0000|\uFFFD/g;function V3(t){return(typeof t=="string"?t:""+t).replace(kte,`
`).replace(Cte,"")}function Gw(t,e,n){if(e=V3(e),V3(t)!==e&&n)throw Error(Rt(425))}function Yk(){}var UA=null,qA=null;function QA(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var HA=typeof setTimeout=="function"?setTimeout:void 0,Tte=typeof clearTimeout=="function"?clearTimeout:void 0,W3=typeof Promise=="function"?Promise:void 0,jte=typeof queueMicrotask=="function"?queueMicrotask:typeof W3<"u"?function(t){return W3.resolve(null).then(t).catch(Pte)}:HA;function Pte(t){setTimeout(function(){throw t})}function hP(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Kb(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Kb(e)}function yf(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function U3(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var rx=Math.random().toString(36).slice(2),ju="__reactFiber$"+rx,t1="__reactProps$"+rx,Vh="__reactContainer$"+rx,GA="__reactEvents$"+rx,Ote="__reactListeners$"+rx,Ate="__reactHandles$"+rx;function Kp(t){var e=t[ju];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vh]||n[ju]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=U3(t);t!==null;){if(n=t[ju])return n;t=U3(t)}return e}t=n,n=t.parentNode}return null}function r_(t){return t=t[ju]||t[Vh],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yy(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Rt(33))}function yC(t){return t[t1]||null}var XA=[],xy=-1;function Zf(t){return{current:t}}function _i(t){0>xy||(t.current=XA[xy],XA[xy]=null,xy--)}function fi(t,e){xy++,XA[xy]=t.current,t.current=e}var Ef={},Lo=Zf(Ef),Ba=Zf(!1),zm=Ef;function w0(t,e){var n=t.type.contextTypes;if(!n)return Ef;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function $a(t){return t=t.childContextTypes,t!=null}function Jk(){_i(Ba),_i(Lo)}function q3(t,e,n){if(Lo.current!==Ef)throw Error(Rt(168));fi(Lo,e),fi(Ba,n)}function wV(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Rt(108,pee(t)||"Unknown",i));return Li({},n,r)}function e2(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ef,zm=Lo.current,fi(Lo,t),fi(Ba,Ba.current),!0}function Q3(t,e,n){var r=t.stateNode;if(!r)throw Error(Rt(169));n?(t=wV(t,e,zm),r.__reactInternalMemoizedMergedChildContext=t,_i(Ba),_i(Lo),fi(Lo,t)):_i(Ba),fi(Ba,n)}var bh=null,xC=!1,dP=!1;function SV(t){bh===null?bh=[t]:bh.push(t)}function Ete(t){xC=!0,SV(t)}function Yf(){if(!dP&&bh!==null){dP=!0;var t=0,e=Zr;try{var n=bh;for(Zr=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bh=null,xC=!1}catch(i){throw bh!==null&&(bh=bh.slice(t+1)),G9(KI,Yf),i}finally{Zr=e,dP=!1}}return null}var vy=[],by=0,t2=null,n2=0,ql=[],Ql=0,Im=null,Eh=1,zh="";function Bp(t,e){vy[by++]=n2,vy[by++]=t2,t2=t,n2=e}function kV(t,e,n){ql[Ql++]=Eh,ql[Ql++]=zh,ql[Ql++]=Im,Im=t;var r=Eh;t=zh;var i=32-Bc(r)-1;r&=~(1<<i),n+=1;var s=32-Bc(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Eh=1<<32-Bc(e)+i|n<<i|r,zh=s+t}else Eh=1<<s|n<<i|r,zh=t}function sM(t){t.return!==null&&(Bp(t,1),kV(t,1,0))}function oM(t){for(;t===t2;)t2=vy[--by],vy[by]=null,n2=vy[--by],vy[by]=null;for(;t===Im;)Im=ql[--Ql],ql[Ql]=null,zh=ql[--Ql],ql[Ql]=null,Eh=ql[--Ql],ql[Ql]=null}var yl=null,fl=null,ji=!1,Ic=null;function CV(t,e){var n=tc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function H3(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yl=t,fl=yf(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yl=t,fl=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Im!==null?{id:Eh,overflow:zh}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tc(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yl=t,fl=null,!0):!1;default:return!1}}function KA(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ZA(t){if(ji){var e=fl;if(e){var n=e;if(!H3(t,e)){if(KA(t))throw Error(Rt(418));e=yf(n.nextSibling);var r=yl;e&&H3(t,e)?CV(r,n):(t.flags=t.flags&-4097|2,ji=!1,yl=t)}}else{if(KA(t))throw Error(Rt(418));t.flags=t.flags&-4097|2,ji=!1,yl=t}}}function G3(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yl=t}function Xw(t){if(t!==yl)return!1;if(!ji)return G3(t),ji=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!QA(t.type,t.memoizedProps)),e&&(e=fl)){if(KA(t))throw TV(),Error(Rt(418));for(;e;)CV(t,e),e=yf(e.nextSibling)}if(G3(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Rt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fl=yf(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fl=null}}else fl=yl?yf(t.stateNode.nextSibling):null;return!0}function TV(){for(var t=fl;t;)t=yf(t.nextSibling)}function S0(){fl=yl=null,ji=!1}function aM(t){Ic===null?Ic=[t]:Ic.push(t)}var zte=Yh.ReactCurrentBatchConfig;function kv(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Rt(309));var r=n.stateNode}if(!r)throw Error(Rt(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Rt(284));if(!n._owner)throw Error(Rt(290,t))}return t}function Kw(t,e){throw t=Object.prototype.toString.call(e),Error(Rt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function X3(t){var e=t._init;return e(t._payload)}function jV(t){function e(z,F){if(t){var R=z.deletions;R===null?(z.deletions=[F],z.flags|=16):R.push(F)}}function n(z,F){if(!t)return null;for(;F!==null;)e(z,F),F=F.sibling;return null}function r(z,F){for(z=new Map;F!==null;)F.key!==null?z.set(F.key,F):z.set(F.index,F),F=F.sibling;return z}function i(z,F){return z=_f(z,F),z.index=0,z.sibling=null,z}function s(z,F,R){return z.index=R,t?(R=z.alternate,R!==null?(R=R.index,R<F?(z.flags|=2,F):R):(z.flags|=2,F)):(z.flags|=1048576,F)}function o(z){return t&&z.alternate===null&&(z.flags|=2),z}function a(z,F,R,N){return F===null||F.tag!==6?(F=vP(R,z.mode,N),F.return=z,F):(F=i(F,R),F.return=z,F)}function h(z,F,R,N){var Q=R.type;return Q===fy?g(z,F,R.props.children,N,R.key):F!==null&&(F.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Nd&&X3(Q)===F.type)?(N=i(F,R.props),N.ref=kv(z,F,R),N.return=z,N):(N=sk(R.type,R.key,R.props,null,z.mode,N),N.ref=kv(z,F,R),N.return=z,N)}function p(z,F,R,N){return F===null||F.tag!==4||F.stateNode.containerInfo!==R.containerInfo||F.stateNode.implementation!==R.implementation?(F=bP(R,z.mode,N),F.return=z,F):(F=i(F,R.children||[]),F.return=z,F)}function g(z,F,R,N,Q){return F===null||F.tag!==7?(F=gm(R,z.mode,N,Q),F.return=z,F):(F=i(F,R),F.return=z,F)}function y(z,F,R){if(typeof F=="string"&&F!==""||typeof F=="number")return F=vP(""+F,z.mode,R),F.return=z,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Bw:return R=sk(F.type,F.key,F.props,null,z.mode,R),R.ref=kv(z,null,F),R.return=z,R;case dy:return F=bP(F,z.mode,R),F.return=z,F;case Nd:var N=F._init;return y(z,N(F._payload),R)}if(Qv(F)||vv(F))return F=gm(F,z.mode,R,null),F.return=z,F;Kw(z,F)}return null}function b(z,F,R,N){var Q=F!==null?F.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return Q!==null?null:a(z,F,""+R,N);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Bw:return R.key===Q?h(z,F,R,N):null;case dy:return R.key===Q?p(z,F,R,N):null;case Nd:return Q=R._init,b(z,F,Q(R._payload),N)}if(Qv(R)||vv(R))return Q!==null?null:g(z,F,R,N,null);Kw(z,R)}return null}function S(z,F,R,N,Q){if(typeof N=="string"&&N!==""||typeof N=="number")return z=z.get(R)||null,a(F,z,""+N,Q);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Bw:return z=z.get(N.key===null?R:N.key)||null,h(F,z,N,Q);case dy:return z=z.get(N.key===null?R:N.key)||null,p(F,z,N,Q);case Nd:var q=N._init;return S(z,F,R,q(N._payload),Q)}if(Qv(N)||vv(N))return z=z.get(R)||null,g(F,z,N,Q,null);Kw(F,N)}return null}function P(z,F,R,N){for(var Q=null,q=null,X=F,K=F=0,ne=null;X!==null&&K<R.length;K++){X.index>K?(ne=X,X=null):ne=X.sibling;var J=b(z,X,R[K],N);if(J===null){X===null&&(X=ne);break}t&&X&&J.alternate===null&&e(z,X),F=s(J,F,K),q===null?Q=J:q.sibling=J,q=J,X=ne}if(K===R.length)return n(z,X),ji&&Bp(z,K),Q;if(X===null){for(;K<R.length;K++)X=y(z,R[K],N),X!==null&&(F=s(X,F,K),q===null?Q=X:q.sibling=X,q=X);return ji&&Bp(z,K),Q}for(X=r(z,X);K<R.length;K++)ne=S(X,z,K,R[K],N),ne!==null&&(t&&ne.alternate!==null&&X.delete(ne.key===null?K:ne.key),F=s(ne,F,K),q===null?Q=ne:q.sibling=ne,q=ne);return t&&X.forEach(function(ae){return e(z,ae)}),ji&&Bp(z,K),Q}function O(z,F,R,N){var Q=vv(R);if(typeof Q!="function")throw Error(Rt(150));if(R=Q.call(R),R==null)throw Error(Rt(151));for(var q=Q=null,X=F,K=F=0,ne=null,J=R.next();X!==null&&!J.done;K++,J=R.next()){X.index>K?(ne=X,X=null):ne=X.sibling;var ae=b(z,X,J.value,N);if(ae===null){X===null&&(X=ne);break}t&&X&&ae.alternate===null&&e(z,X),F=s(ae,F,K),q===null?Q=ae:q.sibling=ae,q=ae,X=ne}if(J.done)return n(z,X),ji&&Bp(z,K),Q;if(X===null){for(;!J.done;K++,J=R.next())J=y(z,J.value,N),J!==null&&(F=s(J,F,K),q===null?Q=J:q.sibling=J,q=J);return ji&&Bp(z,K),Q}for(X=r(z,X);!J.done;K++,J=R.next())J=S(X,z,K,J.value,N),J!==null&&(t&&J.alternate!==null&&X.delete(J.key===null?K:J.key),F=s(J,F,K),q===null?Q=J:q.sibling=J,q=J);return t&&X.forEach(function(Ee){return e(z,Ee)}),ji&&Bp(z,K),Q}function D(z,F,R,N){if(typeof R=="object"&&R!==null&&R.type===fy&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Bw:e:{for(var Q=R.key,q=F;q!==null;){if(q.key===Q){if(Q=R.type,Q===fy){if(q.tag===7){n(z,q.sibling),F=i(q,R.props.children),F.return=z,z=F;break e}}else if(q.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Nd&&X3(Q)===q.type){n(z,q.sibling),F=i(q,R.props),F.ref=kv(z,q,R),F.return=z,z=F;break e}n(z,q);break}else e(z,q);q=q.sibling}R.type===fy?(F=gm(R.props.children,z.mode,N,R.key),F.return=z,z=F):(N=sk(R.type,R.key,R.props,null,z.mode,N),N.ref=kv(z,F,R),N.return=z,z=N)}return o(z);case dy:e:{for(q=R.key;F!==null;){if(F.key===q)if(F.tag===4&&F.stateNode.containerInfo===R.containerInfo&&F.stateNode.implementation===R.implementation){n(z,F.sibling),F=i(F,R.children||[]),F.return=z,z=F;break e}else{n(z,F);break}else e(z,F);F=F.sibling}F=bP(R,z.mode,N),F.return=z,z=F}return o(z);case Nd:return q=R._init,D(z,F,q(R._payload),N)}if(Qv(R))return P(z,F,R,N);if(vv(R))return O(z,F,R,N);Kw(z,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,F!==null&&F.tag===6?(n(z,F.sibling),F=i(F,R),F.return=z,z=F):(n(z,F),F=vP(R,z.mode,N),F.return=z,z=F),o(z)):n(z,F)}return D}var k0=jV(!0),PV=jV(!1),r2=Zf(null),i2=null,_y=null,lM=null;function cM(){lM=_y=i2=null}function uM(t){var e=r2.current;_i(r2),t._currentValue=e}function YA(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Vy(t,e){i2=t,lM=_y=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ma=!0),t.firstContext=null)}function cc(t){var e=t._currentValue;if(lM!==t)if(t={context:t,memoizedValue:e,next:null},_y===null){if(i2===null)throw Error(Rt(308));_y=t,i2.dependencies={lanes:0,firstContext:t}}else _y=_y.next=t;return e}var Zp=null;function hM(t){Zp===null?Zp=[t]:Zp.push(t)}function OV(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,hM(e)):(n.next=i.next,i.next=n),e.interleaved=n,Wh(t,r)}function Wh(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vd=!1;function dM(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AV(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dh(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xf(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,zr&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Wh(t,n)}return i=r.interleaved,i===null?(e.next=e,hM(r)):(e.next=i.next,i.next=e),r.interleaved=e,Wh(t,n)}function JS(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ZI(t,n)}}function K3(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function s2(t,e,n,r){var i=t.updateQueue;Vd=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var h=a,p=h.next;h.next=null,o===null?s=p:o.next=p,o=h;var g=t.alternate;g!==null&&(g=g.updateQueue,a=g.lastBaseUpdate,a!==o&&(a===null?g.firstBaseUpdate=p:a.next=p,g.lastBaseUpdate=h))}if(s!==null){var y=i.baseState;o=0,g=p=h=null,a=s;do{var b=a.lane,S=a.eventTime;if((r&b)===b){g!==null&&(g=g.next={eventTime:S,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var P=t,O=a;switch(b=e,S=n,O.tag){case 1:if(P=O.payload,typeof P=="function"){y=P.call(S,y,b);break e}y=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=O.payload,b=typeof P=="function"?P.call(S,y,b):P,b==null)break e;y=Li({},y,b);break e;case 2:Vd=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,b=i.effects,b===null?i.effects=[a]:b.push(a))}else S={eventTime:S,lane:b,tag:a.tag,payload:a.payload,callback:a.callback,next:null},g===null?(p=g=S,h=y):g=g.next=S,o|=b;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;b=a,a=b.next,b.next=null,i.lastBaseUpdate=b,i.shared.pending=null}}while(!0);if(g===null&&(h=y),i.baseState=h,i.firstBaseUpdate=p,i.lastBaseUpdate=g,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Rm|=o,t.lanes=o,t.memoizedState=y}}function Z3(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Rt(191,i));i.call(r)}}}var i_={},Bu=Zf(i_),n1=Zf(i_),r1=Zf(i_);function Yp(t){if(t===i_)throw Error(Rt(174));return t}function fM(t,e){switch(fi(r1,e),fi(n1,t),fi(Bu,i_),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zA(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zA(e,t)}_i(Bu),fi(Bu,e)}function C0(){_i(Bu),_i(n1),_i(r1)}function EV(t){Yp(r1.current);var e=Yp(Bu.current),n=zA(e,t.type);e!==n&&(fi(n1,t),fi(Bu,n))}function pM(t){n1.current===t&&(_i(Bu),_i(n1))}var Ii=Zf(0);function o2(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fP=[];function mM(){for(var t=0;t<fP.length;t++)fP[t]._workInProgressVersionPrimary=null;fP.length=0}var ek=Yh.ReactCurrentDispatcher,pP=Yh.ReactCurrentBatchConfig,Mm=0,Di=null,Cs=null,Xs=null,a2=!1,gb=!1,i1=0,Ite=0;function Oo(){throw Error(Rt(321))}function gM(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Uc(t[n],e[n]))return!1;return!0}function yM(t,e,n,r,i,s){if(Mm=s,Di=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ek.current=t===null||t.memoizedState===null?Lte:Fte,t=n(r,i),gb){s=0;do{if(gb=!1,i1=0,25<=s)throw Error(Rt(301));s+=1,Xs=Cs=null,e.updateQueue=null,ek.current=Bte,t=n(r,i)}while(gb)}if(ek.current=l2,e=Cs!==null&&Cs.next!==null,Mm=0,Xs=Cs=Di=null,a2=!1,e)throw Error(Rt(300));return t}function xM(){var t=i1!==0;return i1=0,t}function vu(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xs===null?Di.memoizedState=Xs=t:Xs=Xs.next=t,Xs}function uc(){if(Cs===null){var t=Di.alternate;t=t!==null?t.memoizedState:null}else t=Cs.next;var e=Xs===null?Di.memoizedState:Xs.next;if(e!==null)Xs=e,Cs=t;else{if(t===null)throw Error(Rt(310));Cs=t,t={memoizedState:Cs.memoizedState,baseState:Cs.baseState,baseQueue:Cs.baseQueue,queue:Cs.queue,next:null},Xs===null?Di.memoizedState=Xs=t:Xs=Xs.next=t}return Xs}function s1(t,e){return typeof e=="function"?e(t):e}function mP(t){var e=uc(),n=e.queue;if(n===null)throw Error(Rt(311));n.lastRenderedReducer=t;var r=Cs,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,h=null,p=s;do{var g=p.lane;if((Mm&g)===g)h!==null&&(h=h.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var y={lane:g,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};h===null?(a=h=y,o=r):h=h.next=y,Di.lanes|=g,Rm|=g}p=p.next}while(p!==null&&p!==s);h===null?o=r:h.next=a,Uc(r,e.memoizedState)||(Ma=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=h,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Di.lanes|=s,Rm|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gP(t){var e=uc(),n=e.queue;if(n===null)throw Error(Rt(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Uc(s,e.memoizedState)||(Ma=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function zV(){}function IV(t,e){var n=Di,r=uc(),i=e(),s=!Uc(r.memoizedState,i);if(s&&(r.memoizedState=i,Ma=!0),r=r.queue,vM(DV.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Xs!==null&&Xs.memoizedState.tag&1){if(n.flags|=2048,o1(9,RV.bind(null,n,r,i,e),void 0,null),Ys===null)throw Error(Rt(349));Mm&30||MV(n,e,i)}return i}function MV(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Di.updateQueue,e===null?(e={lastEffect:null,stores:null},Di.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function RV(t,e,n,r){e.value=n,e.getSnapshot=r,LV(e)&&FV(t)}function DV(t,e,n){return n(function(){LV(e)&&FV(t)})}function LV(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Uc(t,n)}catch{return!0}}function FV(t){var e=Wh(t,1);e!==null&&$c(e,t,1,-1)}function Y3(t){var e=vu();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s1,lastRenderedState:t},e.queue=t,t=t.dispatch=Dte.bind(null,Di,t),[e.memoizedState,t]}function o1(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Di.updateQueue,e===null?(e={lastEffect:null,stores:null},Di.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function BV(){return uc().memoizedState}function tk(t,e,n,r){var i=vu();Di.flags|=t,i.memoizedState=o1(1|e,n,void 0,r===void 0?null:r)}function vC(t,e,n,r){var i=uc();r=r===void 0?null:r;var s=void 0;if(Cs!==null){var o=Cs.memoizedState;if(s=o.destroy,r!==null&&gM(r,o.deps)){i.memoizedState=o1(e,n,s,r);return}}Di.flags|=t,i.memoizedState=o1(1|e,n,s,r)}function J3(t,e){return tk(8390656,8,t,e)}function vM(t,e){return vC(2048,8,t,e)}function $V(t,e){return vC(4,2,t,e)}function NV(t,e){return vC(4,4,t,e)}function VV(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WV(t,e,n){return n=n!=null?n.concat([t]):null,vC(4,4,VV.bind(null,e,t),n)}function bM(){}function UV(t,e){var n=uc();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gM(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qV(t,e){var n=uc();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gM(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function QV(t,e,n){return Mm&21?(Uc(n,e)||(n=Z9(),Di.lanes|=n,Rm|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ma=!0),t.memoizedState=n)}function Mte(t,e){var n=Zr;Zr=n!==0&&4>n?n:4,t(!0);var r=pP.transition;pP.transition={};try{t(!1),e()}finally{Zr=n,pP.transition=r}}function HV(){return uc().memoizedState}function Rte(t,e,n){var r=bf(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},GV(t))XV(e,n);else if(n=OV(t,e,n,r),n!==null){var i=oa();$c(n,t,r,i),KV(n,e,r)}}function Dte(t,e,n){var r=bf(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(GV(t))XV(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Uc(a,o)){var h=e.interleaved;h===null?(i.next=i,hM(e)):(i.next=h.next,h.next=i),e.interleaved=i;return}}catch{}finally{}n=OV(t,e,i,r),n!==null&&(i=oa(),$c(n,t,r,i),KV(n,e,r))}}function GV(t){var e=t.alternate;return t===Di||e!==null&&e===Di}function XV(t,e){gb=a2=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function KV(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ZI(t,n)}}var l2={readContext:cc,useCallback:Oo,useContext:Oo,useEffect:Oo,useImperativeHandle:Oo,useInsertionEffect:Oo,useLayoutEffect:Oo,useMemo:Oo,useReducer:Oo,useRef:Oo,useState:Oo,useDebugValue:Oo,useDeferredValue:Oo,useTransition:Oo,useMutableSource:Oo,useSyncExternalStore:Oo,useId:Oo,unstable_isNewReconciler:!1},Lte={readContext:cc,useCallback:function(t,e){return vu().memoizedState=[t,e===void 0?null:e],t},useContext:cc,useEffect:J3,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,tk(4194308,4,VV.bind(null,e,t),n)},useLayoutEffect:function(t,e){return tk(4194308,4,t,e)},useInsertionEffect:function(t,e){return tk(4,2,t,e)},useMemo:function(t,e){var n=vu();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vu();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Rte.bind(null,Di,t),[r.memoizedState,t]},useRef:function(t){var e=vu();return t={current:t},e.memoizedState=t},useState:Y3,useDebugValue:bM,useDeferredValue:function(t){return vu().memoizedState=t},useTransition:function(){var t=Y3(!1),e=t[0];return t=Mte.bind(null,t[1]),vu().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Di,i=vu();if(ji){if(n===void 0)throw Error(Rt(407));n=n()}else{if(n=e(),Ys===null)throw Error(Rt(349));Mm&30||MV(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,J3(DV.bind(null,r,s,t),[t]),r.flags|=2048,o1(9,RV.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=vu(),e=Ys.identifierPrefix;if(ji){var n=zh,r=Eh;n=(r&~(1<<32-Bc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=i1++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ite++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Fte={readContext:cc,useCallback:UV,useContext:cc,useEffect:vM,useImperativeHandle:WV,useInsertionEffect:$V,useLayoutEffect:NV,useMemo:qV,useReducer:mP,useRef:BV,useState:function(){return mP(s1)},useDebugValue:bM,useDeferredValue:function(t){var e=uc();return QV(e,Cs.memoizedState,t)},useTransition:function(){var t=mP(s1)[0],e=uc().memoizedState;return[t,e]},useMutableSource:zV,useSyncExternalStore:IV,useId:HV,unstable_isNewReconciler:!1},Bte={readContext:cc,useCallback:UV,useContext:cc,useEffect:vM,useImperativeHandle:WV,useInsertionEffect:$V,useLayoutEffect:NV,useMemo:qV,useReducer:gP,useRef:BV,useState:function(){return gP(s1)},useDebugValue:bM,useDeferredValue:function(t){var e=uc();return Cs===null?e.memoizedState=t:QV(e,Cs.memoizedState,t)},useTransition:function(){var t=gP(s1)[0],e=uc().memoizedState;return[t,e]},useMutableSource:zV,useSyncExternalStore:IV,useId:HV,unstable_isNewReconciler:!1};function Oc(t,e){if(t&&t.defaultProps){e=Li({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function JA(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Li({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bC={isMounted:function(t){return(t=t._reactInternals)?Jm(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=oa(),i=bf(t),s=Dh(r,i);s.payload=e,n!=null&&(s.callback=n),e=xf(t,s,i),e!==null&&($c(e,t,i,r),JS(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=oa(),i=bf(t),s=Dh(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=xf(t,s,i),e!==null&&($c(e,t,i,r),JS(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=oa(),r=bf(t),i=Dh(n,r);i.tag=2,e!=null&&(i.callback=e),e=xf(t,i,r),e!==null&&($c(e,t,r,n),JS(e,t,r))}};function e4(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Yb(n,r)||!Yb(i,s):!0}function ZV(t,e,n){var r=!1,i=Ef,s=e.contextType;return typeof s=="object"&&s!==null?s=cc(s):(i=$a(e)?zm:Lo.current,r=e.contextTypes,s=(r=r!=null)?w0(t,i):Ef),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bC,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function t4(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bC.enqueueReplaceState(e,e.state,null)}function eE(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},dM(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=cc(s):(s=$a(e)?zm:Lo.current,i.context=w0(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(JA(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&bC.enqueueReplaceState(i,i.state,null),s2(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function T0(t,e){try{var n="",r=e;do n+=fee(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function yP(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var $te=typeof WeakMap=="function"?WeakMap:Map;function YV(t,e,n){n=Dh(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){u2||(u2=!0,hE=r),tE(t,e)},n}function JV(t,e,n){n=Dh(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){tE(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){tE(t,e),typeof r!="function"&&(vf===null?vf=new Set([this]):vf.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function n4(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new $te;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=ene.bind(null,t,e,n),e.then(t,t))}function r4(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function i4(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dh(-1,1),e.tag=2,xf(n,e,1))),n.lanes|=1),t)}var Nte=Yh.ReactCurrentOwner,Ma=!1;function Jo(t,e,n,r){e.child=t===null?PV(e,null,n,r):k0(e,t.child,n,r)}function s4(t,e,n,r,i){n=n.render;var s=e.ref;return Vy(e,i),r=yM(t,e,n,r,s,i),n=xM(),t!==null&&!Ma?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Uh(t,e,i)):(ji&&n&&sM(e),e.flags|=1,Jo(t,e,r,i),e.child)}function o4(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!PM(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,eW(t,e,s,r,i)):(t=sk(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Yb,n(o,r)&&t.ref===e.ref)return Uh(t,e,i)}return e.flags|=1,t=_f(s,r),t.ref=e.ref,t.return=e,e.child=t}function eW(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Yb(s,r)&&t.ref===e.ref)if(Ma=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ma=!0);else return e.lanes=t.lanes,Uh(t,e,i)}return nE(t,e,n,r,i)}function tW(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fi(Sy,ul),ul|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fi(Sy,ul),ul|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,fi(Sy,ul),ul|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,fi(Sy,ul),ul|=r;return Jo(t,e,i,n),e.child}function nW(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nE(t,e,n,r,i){var s=$a(n)?zm:Lo.current;return s=w0(e,s),Vy(e,i),n=yM(t,e,n,r,s,i),r=xM(),t!==null&&!Ma?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Uh(t,e,i)):(ji&&r&&sM(e),e.flags|=1,Jo(t,e,n,i),e.child)}function a4(t,e,n,r,i){if($a(n)){var s=!0;e2(e)}else s=!1;if(Vy(e,i),e.stateNode===null)nk(t,e),ZV(e,n,r),eE(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var h=o.context,p=n.contextType;typeof p=="object"&&p!==null?p=cc(p):(p=$a(n)?zm:Lo.current,p=w0(e,p));var g=n.getDerivedStateFromProps,y=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function";y||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||h!==p)&&t4(e,o,r,p),Vd=!1;var b=e.memoizedState;o.state=b,s2(e,r,o,i),h=e.memoizedState,a!==r||b!==h||Ba.current||Vd?(typeof g=="function"&&(JA(e,n,g,r),h=e.memoizedState),(a=Vd||e4(e,n,a,r,b,h,p))?(y||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),o.props=r,o.state=h,o.context=p,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,AV(t,e),a=e.memoizedProps,p=e.type===e.elementType?a:Oc(e.type,a),o.props=p,y=e.pendingProps,b=o.context,h=n.contextType,typeof h=="object"&&h!==null?h=cc(h):(h=$a(n)?zm:Lo.current,h=w0(e,h));var S=n.getDerivedStateFromProps;(g=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==y||b!==h)&&t4(e,o,r,h),Vd=!1,b=e.memoizedState,o.state=b,s2(e,r,o,i);var P=e.memoizedState;a!==y||b!==P||Ba.current||Vd?(typeof S=="function"&&(JA(e,n,S,r),P=e.memoizedState),(p=Vd||e4(e,n,p,r,b,P,h)||!1)?(g||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,h),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,h)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&b===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&b===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=h,r=p):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&b===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&b===t.memoizedState||(e.flags|=1024),r=!1)}return rE(t,e,n,r,s,i)}function rE(t,e,n,r,i,s){nW(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Q3(e,n,!1),Uh(t,e,s);r=e.stateNode,Nte.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=k0(e,t.child,null,s),e.child=k0(e,null,a,s)):Jo(t,e,a,s),e.memoizedState=r.state,i&&Q3(e,n,!0),e.child}function rW(t){var e=t.stateNode;e.pendingContext?q3(t,e.pendingContext,e.pendingContext!==e.context):e.context&&q3(t,e.context,!1),fM(t,e.containerInfo)}function l4(t,e,n,r,i){return S0(),aM(i),e.flags|=256,Jo(t,e,n,r),e.child}var iE={dehydrated:null,treeContext:null,retryLane:0};function sE(t){return{baseLanes:t,cachePool:null,transitions:null}}function iW(t,e,n){var r=e.pendingProps,i=Ii.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),fi(Ii,i&1),t===null)return ZA(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=SC(o,r,0,null),t=gm(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=sE(n),e.memoizedState=iE,t):_M(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Vte(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var h={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=h,e.deletions=null):(r=_f(i,h),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=_f(a,s):(s=gm(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?sE(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=iE,r}return s=t.child,t=s.sibling,r=_f(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _M(t,e){return e=SC({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zw(t,e,n,r){return r!==null&&aM(r),k0(e,t.child,null,n),t=_M(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Vte(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=yP(Error(Rt(422))),Zw(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=SC({mode:"visible",children:r.children},i,0,null),s=gm(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&k0(e,t.child,null,o),e.child.memoizedState=sE(o),e.memoizedState=iE,s);if(!(e.mode&1))return Zw(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Rt(419)),r=yP(s,r,void 0),Zw(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ma||a){if(r=Ys,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Wh(t,i),$c(r,t,i,-1))}return jM(),r=yP(Error(Rt(421))),Zw(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=tne.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,fl=yf(i.nextSibling),yl=e,ji=!0,Ic=null,t!==null&&(ql[Ql++]=Eh,ql[Ql++]=zh,ql[Ql++]=Im,Eh=t.id,zh=t.overflow,Im=e),e=_M(e,r.children),e.flags|=4096,e)}function c4(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),YA(t.return,e,n)}function xP(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function sW(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Jo(t,e,r.children,n),r=Ii.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&c4(t,n,e);else if(t.tag===19)c4(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(fi(Ii,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&o2(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),xP(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&o2(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}xP(e,!0,n,null,s);break;case"together":xP(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nk(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Uh(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rm|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Rt(153));if(e.child!==null){for(t=e.child,n=_f(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_f(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Wte(t,e,n){switch(e.tag){case 3:rW(e),S0();break;case 5:EV(e);break;case 1:$a(e.type)&&e2(e);break;case 4:fM(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;fi(r2,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(fi(Ii,Ii.current&1),e.flags|=128,null):n&e.child.childLanes?iW(t,e,n):(fi(Ii,Ii.current&1),t=Uh(t,e,n),t!==null?t.sibling:null);fi(Ii,Ii.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return sW(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Ii,Ii.current),r)break;return null;case 22:case 23:return e.lanes=0,tW(t,e,n)}return Uh(t,e,n)}var oW,oE,aW,lW;oW=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};oE=function(){};aW=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Yp(Bu.current);var s=null;switch(n){case"input":i=PA(t,i),r=PA(t,r),s=[];break;case"select":i=Li({},i,{value:void 0}),r=Li({},r,{value:void 0}),s=[];break;case"textarea":i=EA(t,i),r=EA(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yk)}IA(n,r);var o;n=null;for(p in i)if(!r.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var a=i[p];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(qb.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in r){var h=r[p];if(a=i!=null?i[p]:void 0,r.hasOwnProperty(p)&&h!==a&&(h!=null||a!=null))if(p==="style")if(a){for(o in a)!a.hasOwnProperty(o)||h&&h.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in h)h.hasOwnProperty(o)&&a[o]!==h[o]&&(n||(n={}),n[o]=h[o])}else n||(s||(s=[]),s.push(p,n)),n=h;else p==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,a=a?a.__html:void 0,h!=null&&a!==h&&(s=s||[]).push(p,h)):p==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(p,""+h):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(qb.hasOwnProperty(p)?(h!=null&&p==="onScroll"&&vi("scroll",t),s||a===h||(s=[])):(s=s||[]).push(p,h))}n&&(s=s||[]).push("style",n);var p=s;(e.updateQueue=p)&&(e.flags|=4)}};lW=function(t,e,n,r){n!==r&&(e.flags|=4)};function Cv(t,e){if(!ji)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ao(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ute(t,e,n){var r=e.pendingProps;switch(oM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ao(e),null;case 1:return $a(e.type)&&Jk(),Ao(e),null;case 3:return r=e.stateNode,C0(),_i(Ba),_i(Lo),mM(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xw(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ic!==null&&(pE(Ic),Ic=null))),oE(t,e),Ao(e),null;case 5:pM(e);var i=Yp(r1.current);if(n=e.type,t!==null&&e.stateNode!=null)aW(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Rt(166));return Ao(e),null}if(t=Yp(Bu.current),Xw(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ju]=e,r[t1]=s,t=(e.mode&1)!==0,n){case"dialog":vi("cancel",r),vi("close",r);break;case"iframe":case"object":case"embed":vi("load",r);break;case"video":case"audio":for(i=0;i<Gv.length;i++)vi(Gv[i],r);break;case"source":vi("error",r);break;case"img":case"image":case"link":vi("error",r),vi("load",r);break;case"details":vi("toggle",r);break;case"input":x3(r,s),vi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},vi("invalid",r);break;case"textarea":b3(r,s),vi("invalid",r)}IA(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Gw(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Gw(r.textContent,a,t),i=["children",""+a]):qb.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&vi("scroll",r)}switch(n){case"input":$w(r),v3(r,s,!0);break;case"textarea":$w(r),_3(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Yk)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=D9(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ju]=e,t[t1]=r,oW(t,e,!1,!1),e.stateNode=t;e:{switch(o=MA(n,r),n){case"dialog":vi("cancel",t),vi("close",t),i=r;break;case"iframe":case"object":case"embed":vi("load",t),i=r;break;case"video":case"audio":for(i=0;i<Gv.length;i++)vi(Gv[i],t);i=r;break;case"source":vi("error",t),i=r;break;case"img":case"image":case"link":vi("error",t),vi("load",t),i=r;break;case"details":vi("toggle",t),i=r;break;case"input":x3(t,r),i=PA(t,r),vi("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Li({},r,{value:void 0}),vi("invalid",t);break;case"textarea":b3(t,r),i=EA(t,r),vi("invalid",t);break;default:i=r}IA(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var h=a[s];s==="style"?B9(t,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&L9(t,h)):s==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Qb(t,h):typeof h=="number"&&Qb(t,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(qb.hasOwnProperty(s)?h!=null&&s==="onScroll"&&vi("scroll",t):h!=null&&qI(t,s,h,o))}switch(n){case"input":$w(t),v3(t,r,!1);break;case"textarea":$w(t),_3(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Af(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Fy(t,!!r.multiple,s,!1):r.defaultValue!=null&&Fy(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Yk)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ao(e),null;case 6:if(t&&e.stateNode!=null)lW(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Rt(166));if(n=Yp(r1.current),Yp(Bu.current),Xw(e)){if(r=e.stateNode,n=e.memoizedProps,r[ju]=e,(s=r.nodeValue!==n)&&(t=yl,t!==null))switch(t.tag){case 3:Gw(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gw(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ju]=e,e.stateNode=r}return Ao(e),null;case 13:if(_i(Ii),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ji&&fl!==null&&e.mode&1&&!(e.flags&128))TV(),S0(),e.flags|=98560,s=!1;else if(s=Xw(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Rt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Rt(317));s[ju]=e}else S0(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ao(e),s=!1}else Ic!==null&&(pE(Ic),Ic=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ii.current&1?Ps===0&&(Ps=3):jM())),e.updateQueue!==null&&(e.flags|=4),Ao(e),null);case 4:return C0(),oE(t,e),t===null&&Jb(e.stateNode.containerInfo),Ao(e),null;case 10:return uM(e.type._context),Ao(e),null;case 17:return $a(e.type)&&Jk(),Ao(e),null;case 19:if(_i(Ii),s=e.memoizedState,s===null)return Ao(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Cv(s,!1);else{if(Ps!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=o2(t),o!==null){for(e.flags|=128,Cv(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return fi(Ii,Ii.current&1|2),e.child}t=t.sibling}s.tail!==null&&Xi()>j0&&(e.flags|=128,r=!0,Cv(s,!1),e.lanes=4194304)}else{if(!r)if(t=o2(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Cv(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ji)return Ao(e),null}else 2*Xi()-s.renderingStartTime>j0&&n!==1073741824&&(e.flags|=128,r=!0,Cv(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Xi(),e.sibling=null,n=Ii.current,fi(Ii,r?n&1|2:n&1),e):(Ao(e),null);case 22:case 23:return TM(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ul&1073741824&&(Ao(e),e.subtreeFlags&6&&(e.flags|=8192)):Ao(e),null;case 24:return null;case 25:return null}throw Error(Rt(156,e.tag))}function qte(t,e){switch(oM(e),e.tag){case 1:return $a(e.type)&&Jk(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return C0(),_i(Ba),_i(Lo),mM(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pM(e),null;case 13:if(_i(Ii),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Rt(340));S0()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _i(Ii),null;case 4:return C0(),null;case 10:return uM(e.type._context),null;case 22:case 23:return TM(),null;case 24:return null;default:return null}}var Yw=!1,Ro=!1,Qte=typeof WeakSet=="function"?WeakSet:Set,bn=null;function wy(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vi(t,e,r)}else n.current=null}function aE(t,e,n){try{n()}catch(r){Vi(t,e,r)}}var u4=!1;function Hte(t,e){if(UA=Xk,t=fV(),iM(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,h=-1,p=0,g=0,y=t,b=null;t:for(;;){for(var S;y!==n||i!==0&&y.nodeType!==3||(a=o+i),y!==s||r!==0&&y.nodeType!==3||(h=o+r),y.nodeType===3&&(o+=y.nodeValue.length),(S=y.firstChild)!==null;)b=y,y=S;for(;;){if(y===t)break t;if(b===n&&++p===i&&(a=o),b===s&&++g===r&&(h=o),(S=y.nextSibling)!==null)break;y=b,b=y.parentNode}y=S}n=a===-1||h===-1?null:{start:a,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(qA={focusedElem:t,selectionRange:n},Xk=!1,bn=e;bn!==null;)if(e=bn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,bn=t;else for(;bn!==null;){e=bn;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var O=P.memoizedProps,D=P.memoizedState,z=e.stateNode,F=z.getSnapshotBeforeUpdate(e.elementType===e.type?O:Oc(e.type,O),D);z.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Rt(163))}}catch(N){Vi(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,bn=t;break}bn=e.return}return P=u4,u4=!1,P}function yb(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&aE(e,n,s)}i=i.next}while(i!==r)}}function _C(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function lE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cW(t){var e=t.alternate;e!==null&&(t.alternate=null,cW(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ju],delete e[t1],delete e[GA],delete e[Ote],delete e[Ate])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uW(t){return t.tag===5||t.tag===3||t.tag===4}function h4(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uW(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yk));else if(r!==4&&(t=t.child,t!==null))for(cE(t,e,n),t=t.sibling;t!==null;)cE(t,e,n),t=t.sibling}function uE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(uE(t,e,n),t=t.sibling;t!==null;)uE(t,e,n),t=t.sibling}var oo=null,zc=!1;function Md(t,e,n){for(n=n.child;n!==null;)hW(t,e,n),n=n.sibling}function hW(t,e,n){if(Fu&&typeof Fu.onCommitFiberUnmount=="function")try{Fu.onCommitFiberUnmount(fC,n)}catch{}switch(n.tag){case 5:Ro||wy(n,e);case 6:var r=oo,i=zc;oo=null,Md(t,e,n),oo=r,zc=i,oo!==null&&(zc?(t=oo,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):oo.removeChild(n.stateNode));break;case 18:oo!==null&&(zc?(t=oo,n=n.stateNode,t.nodeType===8?hP(t.parentNode,n):t.nodeType===1&&hP(t,n),Kb(t)):hP(oo,n.stateNode));break;case 4:r=oo,i=zc,oo=n.stateNode.containerInfo,zc=!0,Md(t,e,n),oo=r,zc=i;break;case 0:case 11:case 14:case 15:if(!Ro&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&aE(n,e,o),i=i.next}while(i!==r)}Md(t,e,n);break;case 1:if(!Ro&&(wy(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Vi(n,e,a)}Md(t,e,n);break;case 21:Md(t,e,n);break;case 22:n.mode&1?(Ro=(r=Ro)||n.memoizedState!==null,Md(t,e,n),Ro=r):Md(t,e,n);break;default:Md(t,e,n)}}function d4(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Qte),e.forEach(function(r){var i=nne.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Tc(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:oo=a.stateNode,zc=!1;break e;case 3:oo=a.stateNode.containerInfo,zc=!0;break e;case 4:oo=a.stateNode.containerInfo,zc=!0;break e}a=a.return}if(oo===null)throw Error(Rt(160));hW(s,o,i),oo=null,zc=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(p){Vi(i,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dW(e,t),e=e.sibling}function dW(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tc(e,t),hu(t),r&4){try{yb(3,t,t.return),_C(3,t)}catch(O){Vi(t,t.return,O)}try{yb(5,t,t.return)}catch(O){Vi(t,t.return,O)}}break;case 1:Tc(e,t),hu(t),r&512&&n!==null&&wy(n,n.return);break;case 5:if(Tc(e,t),hu(t),r&512&&n!==null&&wy(n,n.return),t.flags&32){var i=t.stateNode;try{Qb(i,"")}catch(O){Vi(t,t.return,O)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&M9(i,s),MA(a,o);var p=MA(a,s);for(o=0;o<h.length;o+=2){var g=h[o],y=h[o+1];g==="style"?B9(i,y):g==="dangerouslySetInnerHTML"?L9(i,y):g==="children"?Qb(i,y):qI(i,g,y,p)}switch(a){case"input":OA(i,s);break;case"textarea":R9(i,s);break;case"select":var b=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var S=s.value;S!=null?Fy(i,!!s.multiple,S,!1):b!==!!s.multiple&&(s.defaultValue!=null?Fy(i,!!s.multiple,s.defaultValue,!0):Fy(i,!!s.multiple,s.multiple?[]:"",!1))}i[t1]=s}catch(O){Vi(t,t.return,O)}}break;case 6:if(Tc(e,t),hu(t),r&4){if(t.stateNode===null)throw Error(Rt(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(O){Vi(t,t.return,O)}}break;case 3:if(Tc(e,t),hu(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Kb(e.containerInfo)}catch(O){Vi(t,t.return,O)}break;case 4:Tc(e,t),hu(t);break;case 13:Tc(e,t),hu(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(kM=Xi())),r&4&&d4(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(Ro=(p=Ro)||g,Tc(e,t),Ro=p):Tc(e,t),hu(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!g&&t.mode&1)for(bn=t,g=t.child;g!==null;){for(y=bn=g;bn!==null;){switch(b=bn,S=b.child,b.tag){case 0:case 11:case 14:case 15:yb(4,b,b.return);break;case 1:wy(b,b.return);var P=b.stateNode;if(typeof P.componentWillUnmount=="function"){r=b,n=b.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(O){Vi(r,n,O)}}break;case 5:wy(b,b.return);break;case 22:if(b.memoizedState!==null){p4(y);continue}}S!==null?(S.return=b,bn=S):p4(y)}g=g.sibling}e:for(g=null,y=t;;){if(y.tag===5){if(g===null){g=y;try{i=y.stateNode,p?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=y.stateNode,h=y.memoizedProps.style,o=h!=null&&h.hasOwnProperty("display")?h.display:null,a.style.display=F9("display",o))}catch(O){Vi(t,t.return,O)}}}else if(y.tag===6){if(g===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(O){Vi(t,t.return,O)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;g===y&&(g=null),y=y.return}g===y&&(g=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Tc(e,t),hu(t),r&4&&d4(t);break;case 21:break;default:Tc(e,t),hu(t)}}function hu(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(uW(n)){var r=n;break e}n=n.return}throw Error(Rt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Qb(i,""),r.flags&=-33);var s=h4(t);uE(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=h4(t);cE(t,a,o);break;default:throw Error(Rt(161))}}catch(h){Vi(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Gte(t,e,n){bn=t,fW(t)}function fW(t,e,n){for(var r=(t.mode&1)!==0;bn!==null;){var i=bn,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Yw;if(!o){var a=i.alternate,h=a!==null&&a.memoizedState!==null||Ro;a=Yw;var p=Ro;if(Yw=o,(Ro=h)&&!p)for(bn=i;bn!==null;)o=bn,h=o.child,o.tag===22&&o.memoizedState!==null?m4(i):h!==null?(h.return=o,bn=h):m4(i);for(;s!==null;)bn=s,fW(s),s=s.sibling;bn=i,Yw=a,Ro=p}f4(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,bn=s):f4(t)}}function f4(t){for(;bn!==null;){var e=bn;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ro||_C(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ro)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Oc(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Z3(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Z3(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var g=p.memoizedState;if(g!==null){var y=g.dehydrated;y!==null&&Kb(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Rt(163))}Ro||e.flags&512&&lE(e)}catch(b){Vi(e,e.return,b)}}if(e===t){bn=null;break}if(n=e.sibling,n!==null){n.return=e.return,bn=n;break}bn=e.return}}function p4(t){for(;bn!==null;){var e=bn;if(e===t){bn=null;break}var n=e.sibling;if(n!==null){n.return=e.return,bn=n;break}bn=e.return}}function m4(t){for(;bn!==null;){var e=bn;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_C(4,e)}catch(h){Vi(e,n,h)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(h){Vi(e,i,h)}}var s=e.return;try{lE(e)}catch(h){Vi(e,s,h)}break;case 5:var o=e.return;try{lE(e)}catch(h){Vi(e,o,h)}}}catch(h){Vi(e,e.return,h)}if(e===t){bn=null;break}var a=e.sibling;if(a!==null){a.return=e.return,bn=a;break}bn=e.return}}var Xte=Math.ceil,c2=Yh.ReactCurrentDispatcher,wM=Yh.ReactCurrentOwner,oc=Yh.ReactCurrentBatchConfig,zr=0,Ys=null,hs=null,po=0,ul=0,Sy=Zf(0),Ps=0,a1=null,Rm=0,wC=0,SM=0,xb=null,Pa=null,kM=0,j0=1/0,vh=null,u2=!1,hE=null,vf=null,Jw=!1,df=null,h2=0,vb=0,dE=null,rk=-1,ik=0;function oa(){return zr&6?Xi():rk!==-1?rk:rk=Xi()}function bf(t){return t.mode&1?zr&2&&po!==0?po&-po:zte.transition!==null?(ik===0&&(ik=Z9()),ik):(t=Zr,t!==0||(t=window.event,t=t===void 0?16:iV(t.type)),t):1}function $c(t,e,n,r){if(50<vb)throw vb=0,dE=null,Error(Rt(185));t_(t,n,r),(!(zr&2)||t!==Ys)&&(t===Ys&&(!(zr&2)&&(wC|=n),Ps===4&&Gd(t,po)),Na(t,r),n===1&&zr===0&&!(e.mode&1)&&(j0=Xi()+500,xC&&Yf()))}function Na(t,e){var n=t.callbackNode;zee(t,e);var r=Gk(t,t===Ys?po:0);if(r===0)n!==null&&k3(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&k3(n),e===1)t.tag===0?Ete(g4.bind(null,t)):SV(g4.bind(null,t)),jte(function(){!(zr&6)&&Yf()}),n=null;else{switch(Y9(r)){case 1:n=KI;break;case 4:n=X9;break;case 16:n=Hk;break;case 536870912:n=K9;break;default:n=Hk}n=_W(n,pW.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pW(t,e){if(rk=-1,ik=0,zr&6)throw Error(Rt(327));var n=t.callbackNode;if(Wy()&&t.callbackNode!==n)return null;var r=Gk(t,t===Ys?po:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=d2(t,r);else{e=r;var i=zr;zr|=2;var s=gW();(Ys!==t||po!==e)&&(vh=null,j0=Xi()+500,mm(t,e));do try{Yte();break}catch(a){mW(t,a)}while(!0);cM(),c2.current=s,zr=i,hs!==null?e=0:(Ys=null,po=0,e=Ps)}if(e!==0){if(e===2&&(i=BA(t),i!==0&&(r=i,e=fE(t,i))),e===1)throw n=a1,mm(t,0),Gd(t,r),Na(t,Xi()),n;if(e===6)Gd(t,r);else{if(i=t.current.alternate,!(r&30)&&!Kte(i)&&(e=d2(t,r),e===2&&(s=BA(t),s!==0&&(r=s,e=fE(t,s))),e===1))throw n=a1,mm(t,0),Gd(t,r),Na(t,Xi()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Rt(345));case 2:$p(t,Pa,vh);break;case 3:if(Gd(t,r),(r&130023424)===r&&(e=kM+500-Xi(),10<e)){if(Gk(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){oa(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=HA($p.bind(null,t,Pa,vh),e);break}$p(t,Pa,vh);break;case 4:if(Gd(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Bc(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Xi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Xte(r/1960))-r,10<r){t.timeoutHandle=HA($p.bind(null,t,Pa,vh),r);break}$p(t,Pa,vh);break;case 5:$p(t,Pa,vh);break;default:throw Error(Rt(329))}}}return Na(t,Xi()),t.callbackNode===n?pW.bind(null,t):null}function fE(t,e){var n=xb;return t.current.memoizedState.isDehydrated&&(mm(t,e).flags|=256),t=d2(t,e),t!==2&&(e=Pa,Pa=n,e!==null&&pE(e)),t}function pE(t){Pa===null?Pa=t:Pa.push.apply(Pa,t)}function Kte(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Uc(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gd(t,e){for(e&=~SM,e&=~wC,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bc(e),r=1<<n;t[n]=-1,e&=~r}}function g4(t){if(zr&6)throw Error(Rt(327));Wy();var e=Gk(t,0);if(!(e&1))return Na(t,Xi()),null;var n=d2(t,e);if(t.tag!==0&&n===2){var r=BA(t);r!==0&&(e=r,n=fE(t,r))}if(n===1)throw n=a1,mm(t,0),Gd(t,e),Na(t,Xi()),n;if(n===6)throw Error(Rt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$p(t,Pa,vh),Na(t,Xi()),null}function CM(t,e){var n=zr;zr|=1;try{return t(e)}finally{zr=n,zr===0&&(j0=Xi()+500,xC&&Yf())}}function Dm(t){df!==null&&df.tag===0&&!(zr&6)&&Wy();var e=zr;zr|=1;var n=oc.transition,r=Zr;try{if(oc.transition=null,Zr=1,t)return t()}finally{Zr=r,oc.transition=n,zr=e,!(zr&6)&&Yf()}}function TM(){ul=Sy.current,_i(Sy)}function mm(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Tte(n)),hs!==null)for(n=hs.return;n!==null;){var r=n;switch(oM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jk();break;case 3:C0(),_i(Ba),_i(Lo),mM();break;case 5:pM(r);break;case 4:C0();break;case 13:_i(Ii);break;case 19:_i(Ii);break;case 10:uM(r.type._context);break;case 22:case 23:TM()}n=n.return}if(Ys=t,hs=t=_f(t.current,null),po=ul=e,Ps=0,a1=null,SM=wC=Rm=0,Pa=xb=null,Zp!==null){for(e=0;e<Zp.length;e++)if(n=Zp[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Zp=null}return t}function mW(t,e){do{var n=hs;try{if(cM(),ek.current=l2,a2){for(var r=Di.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}a2=!1}if(Mm=0,Xs=Cs=Di=null,gb=!1,i1=0,wM.current=null,n===null||n.return===null){Ps=1,a1=e,hs=null;break}e:{var s=t,o=n.return,a=n,h=e;if(e=po,a.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var p=h,g=a,y=g.tag;if(!(g.mode&1)&&(y===0||y===11||y===15)){var b=g.alternate;b?(g.updateQueue=b.updateQueue,g.memoizedState=b.memoizedState,g.lanes=b.lanes):(g.updateQueue=null,g.memoizedState=null)}var S=r4(o);if(S!==null){S.flags&=-257,i4(S,o,a,s,e),S.mode&1&&n4(s,p,e),e=S,h=p;var P=e.updateQueue;if(P===null){var O=new Set;O.add(h),e.updateQueue=O}else P.add(h);break e}else{if(!(e&1)){n4(s,p,e),jM();break e}h=Error(Rt(426))}}else if(ji&&a.mode&1){var D=r4(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),i4(D,o,a,s,e),aM(T0(h,a));break e}}s=h=T0(h,a),Ps!==4&&(Ps=2),xb===null?xb=[s]:xb.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var z=YV(s,h,e);K3(s,z);break e;case 1:a=h;var F=s.type,R=s.stateNode;if(!(s.flags&128)&&(typeof F.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(vf===null||!vf.has(R)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=JV(s,a,e);K3(s,N);break e}}s=s.return}while(s!==null)}xW(n)}catch(Q){e=Q,hs===n&&n!==null&&(hs=n=n.return);continue}break}while(!0)}function gW(){var t=c2.current;return c2.current=l2,t===null?l2:t}function jM(){(Ps===0||Ps===3||Ps===2)&&(Ps=4),Ys===null||!(Rm&268435455)&&!(wC&268435455)||Gd(Ys,po)}function d2(t,e){var n=zr;zr|=2;var r=gW();(Ys!==t||po!==e)&&(vh=null,mm(t,e));do try{Zte();break}catch(i){mW(t,i)}while(!0);if(cM(),zr=n,c2.current=r,hs!==null)throw Error(Rt(261));return Ys=null,po=0,Ps}function Zte(){for(;hs!==null;)yW(hs)}function Yte(){for(;hs!==null&&!See();)yW(hs)}function yW(t){var e=bW(t.alternate,t,ul);t.memoizedProps=t.pendingProps,e===null?xW(t):hs=e,wM.current=null}function xW(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qte(n,e),n!==null){n.flags&=32767,hs=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ps=6,hs=null;return}}else if(n=Ute(n,e,ul),n!==null){hs=n;return}if(e=e.sibling,e!==null){hs=e;return}hs=e=t}while(e!==null);Ps===0&&(Ps=5)}function $p(t,e,n){var r=Zr,i=oc.transition;try{oc.transition=null,Zr=1,Jte(t,e,n,r)}finally{oc.transition=i,Zr=r}return null}function Jte(t,e,n,r){do Wy();while(df!==null);if(zr&6)throw Error(Rt(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Rt(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Iee(t,s),t===Ys&&(hs=Ys=null,po=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jw||(Jw=!0,_W(Hk,function(){return Wy(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=oc.transition,oc.transition=null;var o=Zr;Zr=1;var a=zr;zr|=4,wM.current=null,Hte(t,n),dW(n,t),vte(qA),Xk=!!UA,qA=UA=null,t.current=n,Gte(n),kee(),zr=a,Zr=o,oc.transition=s}else t.current=n;if(Jw&&(Jw=!1,df=t,h2=i),s=t.pendingLanes,s===0&&(vf=null),jee(n.stateNode),Na(t,Xi()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(u2)throw u2=!1,t=hE,hE=null,t;return h2&1&&t.tag!==0&&Wy(),s=t.pendingLanes,s&1?t===dE?vb++:(vb=0,dE=t):vb=0,Yf(),null}function Wy(){if(df!==null){var t=Y9(h2),e=oc.transition,n=Zr;try{if(oc.transition=null,Zr=16>t?16:t,df===null)var r=!1;else{if(t=df,df=null,h2=0,zr&6)throw Error(Rt(331));var i=zr;for(zr|=4,bn=t.current;bn!==null;){var s=bn,o=s.child;if(bn.flags&16){var a=s.deletions;if(a!==null){for(var h=0;h<a.length;h++){var p=a[h];for(bn=p;bn!==null;){var g=bn;switch(g.tag){case 0:case 11:case 15:yb(8,g,s)}var y=g.child;if(y!==null)y.return=g,bn=y;else for(;bn!==null;){g=bn;var b=g.sibling,S=g.return;if(cW(g),g===p){bn=null;break}if(b!==null){b.return=S,bn=b;break}bn=S}}}var P=s.alternate;if(P!==null){var O=P.child;if(O!==null){P.child=null;do{var D=O.sibling;O.sibling=null,O=D}while(O!==null)}}bn=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,bn=o;else e:for(;bn!==null;){if(s=bn,s.flags&2048)switch(s.tag){case 0:case 11:case 15:yb(9,s,s.return)}var z=s.sibling;if(z!==null){z.return=s.return,bn=z;break e}bn=s.return}}var F=t.current;for(bn=F;bn!==null;){o=bn;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,bn=R;else e:for(o=F;bn!==null;){if(a=bn,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_C(9,a)}}catch(Q){Vi(a,a.return,Q)}if(a===o){bn=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,bn=N;break e}bn=a.return}}if(zr=i,Yf(),Fu&&typeof Fu.onPostCommitFiberRoot=="function")try{Fu.onPostCommitFiberRoot(fC,t)}catch{}r=!0}return r}finally{Zr=n,oc.transition=e}}return!1}function y4(t,e,n){e=T0(n,e),e=YV(t,e,1),t=xf(t,e,1),e=oa(),t!==null&&(t_(t,1,e),Na(t,e))}function Vi(t,e,n){if(t.tag===3)y4(t,t,n);else for(;e!==null;){if(e.tag===3){y4(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vf===null||!vf.has(r))){t=T0(n,t),t=JV(e,t,1),e=xf(e,t,1),t=oa(),e!==null&&(t_(e,1,t),Na(e,t));break}}e=e.return}}function ene(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=oa(),t.pingedLanes|=t.suspendedLanes&n,Ys===t&&(po&n)===n&&(Ps===4||Ps===3&&(po&130023424)===po&&500>Xi()-kM?mm(t,0):SM|=n),Na(t,e)}function vW(t,e){e===0&&(t.mode&1?(e=Ww,Ww<<=1,!(Ww&130023424)&&(Ww=4194304)):e=1);var n=oa();t=Wh(t,e),t!==null&&(t_(t,e,n),Na(t,n))}function tne(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vW(t,n)}function nne(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Rt(314))}r!==null&&r.delete(e),vW(t,n)}var bW;bW=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ba.current)Ma=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ma=!1,Wte(t,e,n);Ma=!!(t.flags&131072)}else Ma=!1,ji&&e.flags&1048576&&kV(e,n2,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;nk(t,e),t=e.pendingProps;var i=w0(e,Lo.current);Vy(e,n),i=yM(null,e,r,t,i,n);var s=xM();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$a(r)?(s=!0,e2(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,dM(e),i.updater=bC,e.stateNode=i,i._reactInternals=e,eE(e,r,t,n),e=rE(null,e,r,!0,s,n)):(e.tag=0,ji&&s&&sM(e),Jo(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(nk(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=ine(r),t=Oc(r,t),i){case 0:e=nE(null,e,r,t,n);break e;case 1:e=a4(null,e,r,t,n);break e;case 11:e=s4(null,e,r,t,n);break e;case 14:e=o4(null,e,r,Oc(r.type,t),n);break e}throw Error(Rt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Oc(r,i),nE(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Oc(r,i),a4(t,e,r,i,n);case 3:e:{if(rW(e),t===null)throw Error(Rt(387));r=e.pendingProps,s=e.memoizedState,i=s.element,AV(t,e),s2(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=T0(Error(Rt(423)),e),e=l4(t,e,r,n,i);break e}else if(r!==i){i=T0(Error(Rt(424)),e),e=l4(t,e,r,n,i);break e}else for(fl=yf(e.stateNode.containerInfo.firstChild),yl=e,ji=!0,Ic=null,n=PV(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(S0(),r===i){e=Uh(t,e,n);break e}Jo(t,e,r,n)}e=e.child}return e;case 5:return EV(e),t===null&&ZA(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,QA(r,i)?o=null:s!==null&&QA(r,s)&&(e.flags|=32),nW(t,e),Jo(t,e,o,n),e.child;case 6:return t===null&&ZA(e),null;case 13:return iW(t,e,n);case 4:return fM(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=k0(e,null,r,n):Jo(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Oc(r,i),s4(t,e,r,i,n);case 7:return Jo(t,e,e.pendingProps,n),e.child;case 8:return Jo(t,e,e.pendingProps.children,n),e.child;case 12:return Jo(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,fi(r2,r._currentValue),r._currentValue=o,s!==null)if(Uc(s.value,o)){if(s.children===i.children&&!Ba.current){e=Uh(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var h=a.firstContext;h!==null;){if(h.context===r){if(s.tag===1){h=Dh(-1,n&-n),h.tag=2;var p=s.updateQueue;if(p!==null){p=p.shared;var g=p.pending;g===null?h.next=h:(h.next=g.next,g.next=h),p.pending=h}}s.lanes|=n,h=s.alternate,h!==null&&(h.lanes|=n),YA(s.return,n,e),a.lanes|=n;break}h=h.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Rt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),YA(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jo(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Vy(e,n),i=cc(i),r=r(i),e.flags|=1,Jo(t,e,r,n),e.child;case 14:return r=e.type,i=Oc(r,e.pendingProps),i=Oc(r.type,i),o4(t,e,r,i,n);case 15:return eW(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Oc(r,i),nk(t,e),e.tag=1,$a(r)?(t=!0,e2(e)):t=!1,Vy(e,n),ZV(e,r,i),eE(e,r,i,n),rE(null,e,r,!0,t,n);case 19:return sW(t,e,n);case 22:return tW(t,e,n)}throw Error(Rt(156,e.tag))};function _W(t,e){return G9(t,e)}function rne(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tc(t,e,n,r){return new rne(t,e,n,r)}function PM(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ine(t){if(typeof t=="function")return PM(t)?1:0;if(t!=null){if(t=t.$$typeof,t===HI)return 11;if(t===GI)return 14}return 2}function _f(t,e){var n=t.alternate;return n===null?(n=tc(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function sk(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")PM(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fy:return gm(n.children,i,s,e);case QI:o=8,i|=8;break;case kA:return t=tc(12,n,e,i|2),t.elementType=kA,t.lanes=s,t;case CA:return t=tc(13,n,e,i),t.elementType=CA,t.lanes=s,t;case TA:return t=tc(19,n,e,i),t.elementType=TA,t.lanes=s,t;case E9:return SC(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case O9:o=10;break e;case A9:o=9;break e;case HI:o=11;break e;case GI:o=14;break e;case Nd:o=16,r=null;break e}throw Error(Rt(130,t==null?t:typeof t,""))}return e=tc(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function gm(t,e,n,r){return t=tc(7,t,r,e),t.lanes=n,t}function SC(t,e,n,r){return t=tc(22,t,r,e),t.elementType=E9,t.lanes=n,t.stateNode={isHidden:!1},t}function vP(t,e,n){return t=tc(6,t,null,e),t.lanes=n,t}function bP(t,e,n){return e=tc(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sne(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eP(0),this.expirationTimes=eP(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eP(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function OM(t,e,n,r,i,s,o,a,h){return t=new sne(t,e,n,a,h),e===1?(e=1,s===!0&&(e|=8)):e=0,s=tc(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dM(s),t}function one(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dy,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function wW(t){if(!t)return Ef;t=t._reactInternals;e:{if(Jm(t)!==t||t.tag!==1)throw Error(Rt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($a(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Rt(171))}if(t.tag===1){var n=t.type;if($a(n))return wV(t,n,e)}return e}function SW(t,e,n,r,i,s,o,a,h){return t=OM(n,r,!0,t,i,s,o,a,h),t.context=wW(null),n=t.current,r=oa(),i=bf(n),s=Dh(r,i),s.callback=e??null,xf(n,s,i),t.current.lanes=i,t_(t,i,r),Na(t,r),t}function kC(t,e,n,r){var i=e.current,s=oa(),o=bf(i);return n=wW(n),e.context===null?e.context=n:e.pendingContext=n,e=Dh(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xf(i,e,o),t!==null&&($c(t,i,o,s),JS(t,i,o)),o}function f2(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function x4(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function AM(t,e){x4(t,e),(t=t.alternate)&&x4(t,e)}function ane(){return null}var kW=typeof reportError=="function"?reportError:function(t){console.error(t)};function EM(t){this._internalRoot=t}CC.prototype.render=EM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Rt(409));kC(t,e,null,null)};CC.prototype.unmount=EM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dm(function(){kC(null,t,null,null)}),e[Vh]=null}};function CC(t){this._internalRoot=t}CC.prototype.unstable_scheduleHydration=function(t){if(t){var e=tV();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hd.length&&e!==0&&e<Hd[n].priority;n++);Hd.splice(n,0,t),n===0&&rV(t)}};function zM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function TC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function v4(){}function lne(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var p=f2(o);s.call(p)}}var o=SW(e,r,t,0,null,!1,!1,"",v4);return t._reactRootContainer=o,t[Vh]=o.current,Jb(t.nodeType===8?t.parentNode:t),Dm(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var p=f2(h);a.call(p)}}var h=OM(t,0,!1,null,null,!1,!1,"",v4);return t._reactRootContainer=h,t[Vh]=h.current,Jb(t.nodeType===8?t.parentNode:t),Dm(function(){kC(e,h,n,r)}),h}function jC(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var h=f2(o);a.call(h)}}kC(e,o,t,i)}else o=lne(n,e,t,i,r);return f2(o)}J9=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hv(e.pendingLanes);n!==0&&(ZI(e,n|1),Na(e,Xi()),!(zr&6)&&(j0=Xi()+500,Yf()))}break;case 13:Dm(function(){var r=Wh(t,1);if(r!==null){var i=oa();$c(r,t,1,i)}}),AM(t,1)}};YI=function(t){if(t.tag===13){var e=Wh(t,134217728);if(e!==null){var n=oa();$c(e,t,134217728,n)}AM(t,134217728)}};eV=function(t){if(t.tag===13){var e=bf(t),n=Wh(t,e);if(n!==null){var r=oa();$c(n,t,e,r)}AM(t,e)}};tV=function(){return Zr};nV=function(t,e){var n=Zr;try{return Zr=t,e()}finally{Zr=n}};DA=function(t,e,n){switch(e){case"input":if(OA(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=yC(r);if(!i)throw Error(Rt(90));I9(r),OA(r,i)}}}break;case"textarea":R9(t,n);break;case"select":e=n.value,e!=null&&Fy(t,!!n.multiple,e,!1)}};V9=CM;W9=Dm;var cne={usingClientEntryPoint:!1,Events:[r_,yy,yC,$9,N9,CM]},Tv={findFiberByHostInstance:Kp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},une={bundleType:Tv.bundleType,version:Tv.version,rendererPackageName:Tv.rendererPackageName,rendererConfig:Tv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yh.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Q9(t),t===null?null:t.stateNode},findFiberByHostInstance:Tv.findFiberByHostInstance||ane,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eS.isDisabled&&eS.supportsFiber)try{fC=eS.inject(une),Fu=eS}catch{}}Tl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cne;Tl.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zM(e))throw Error(Rt(200));return one(t,e,null,n)};Tl.createRoot=function(t,e){if(!zM(t))throw Error(Rt(299));var n=!1,r="",i=kW;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=OM(t,1,!1,null,null,n,!1,r,i),t[Vh]=e.current,Jb(t.nodeType===8?t.parentNode:t),new EM(e)};Tl.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Rt(188)):(t=Object.keys(t).join(","),Error(Rt(268,t)));return t=Q9(e),t=t===null?null:t.stateNode,t};Tl.flushSync=function(t){return Dm(t)};Tl.hydrate=function(t,e,n){if(!TC(e))throw Error(Rt(200));return jC(null,t,e,!0,n)};Tl.hydrateRoot=function(t,e,n){if(!zM(t))throw Error(Rt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=kW;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=SW(e,null,t,1,n??null,i,!1,s,o),t[Vh]=e.current,Jb(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new CC(e)};Tl.render=function(t,e,n){if(!TC(e))throw Error(Rt(200));return jC(null,t,e,!1,n)};Tl.unmountComponentAtNode=function(t){if(!TC(t))throw Error(Rt(40));return t._reactRootContainer?(Dm(function(){jC(null,null,t,!1,function(){t._reactRootContainer=null,t[Vh]=null})}),!0):!1};Tl.unstable_batchedUpdates=CM;Tl.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!TC(n))throw Error(Rt(200));if(t==null||t._reactInternals===void 0)throw Error(Rt(38));return jC(t,e,n,!1,r)};Tl.version="18.3.1-next-f1338f8080-20240426";function CW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CW)}catch(t){console.error(t)}}CW(),C9.exports=Tl;var IM=C9.exports,b4=IM;wA.createRoot=b4.createRoot,wA.hydrateRoot=b4.hydrateRoot;function hne(t,e,n,r){return t.addEventListener(e,n,r),()=>{t.removeEventListener(e,n,r)}}function PC(t){return t!=null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}function dne(){return!!(globalThis!=null&&globalThis.document)}function TW(t){return t.parentElement&&TW(t.parentElement)?!0:t.hidden}function fne(t){const e=t.getAttribute("contenteditable");return e!=="false"&&e!=null}function pne(t){return!!t.getAttribute("disabled")||!!t.getAttribute("aria-disabled")}function mne(t){var e;return((e=jW(t))==null?void 0:e.defaultView)??window}function jW(t){return PC(t)?t.ownerDocument:document}function gne(t){return t.view??window}function yne(t){return jW(t).activeElement}function xne(t){const e=gne(t);return typeof e.PointerEvent<"u"&&t instanceof e.PointerEvent?t.pointerType==="mouse":t instanceof e.MouseEvent}function PW(t){return!!t.touches}function vne(t){return PW(t)&&t.touches.length>1}function bne(t,e="page"){const n=t.touches[0]||t.changedTouches[0];return{x:n[`${e}X`],y:n[`${e}Y`]}}function _ne(t,e="page"){return{x:t[`${e}X`],y:t[`${e}Y`]}}function OW(t,e="page"){return PW(t)?bne(t,e):_ne(t,e)}function wne(t){return e=>{const n=xne(e);(!n||n&&e.button===0)&&t(e)}}function Sne(t,e=!1){function n(i){t(i,{point:OW(i)})}return e?wne(n):n}function ok(t,e,n,r){return hne(t,e,Sne(n,e==="pointerdown"),r)}function kne(t,...e){if(t==null)throw new TypeError("Cannot convert undefined or null to object");const n={...t};for(const r of e)if(r!=null)for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(i in n&&delete n[i],n[i]=r[i]);return n}const Pn=t=>t?"":void 0,ac=t=>t?!0:void 0;function mE(t){return Array.isArray(t)}function mo(t){const e=typeof t;return t!=null&&(e==="object"||e==="function")&&!mE(t)}function Cne(t){const e=t==null?0:t.length;return e?t[e-1]:void 0}function Tne(t){const e=parseFloat(t.toString()),n=t.toString().replace(String(e),"");return{unitless:!n,value:e,unit:n}}function gE(t){if(t==null)return t;const{unitless:e}=Tne(t);return e||typeof t=="number"?`${t}px`:t}const AW=(t,e)=>parseInt(t[1],10)>parseInt(e[1],10)?1:-1,MM=t=>Object.fromEntries(Object.entries(t).sort(AW));function _4(t){const e=MM(t);return Object.assign(Object.values(e),e)}function jne(t){const e=Object.keys(MM(t));return new Set(e)}function w4(t){if(!t)return t;t=gE(t)??t;const e=-.02;return typeof t=="number"?`${t+e}`:t.replace(/(\d+\.?\d*)/u,n=>`${parseFloat(n)+e}`)}function Xv(t,e){const n=["@media screen"];return t&&n.push("and",`(min-width: ${gE(t)})`),e&&n.push("and",`(max-width: ${gE(e)})`),n.join(" ")}function Pne(t){if(!t)return null;t.base=t.base??"0px";const e=_4(t),n=Object.entries(t).sort(AW).map(([s,o],a,h)=>{let[,p]=h[a+1]??[];return p=parseFloat(p)>0?w4(p):void 0,{_minW:w4(o),breakpoint:s,minW:o,maxW:p,maxWQuery:Xv(null,p),minWQuery:Xv(o),minMaxQuery:Xv(o,p)}}),r=jne(t),i=Array.from(r.values());return{keys:r,normalized:e,isResponsive(s){const o=Object.keys(s);return o.length>0&&o.every(a=>r.has(a))},asObject:MM(t),asArray:_4(t),details:n,get(s){return n.find(o=>o.breakpoint===s)},media:[null,...e.map(s=>Xv(s)).slice(1)],toArrayValue(s){if(!mo(s))throw new Error("toArrayValue: value must be an object");const o=i.map(a=>s[a]??null);for(;Cne(o)===null;)o.pop();return o},toObjectValue(s){if(!Array.isArray(s))throw new Error("toObjectValue: value must be an array");return s.reduce((o,a,h)=>{const p=i[h];return p!=null&&a!=null&&(o[p]=a),o},{})}}}function RM(...t){return function(...n){t.forEach(r=>r==null?void 0:r(...n))}}function An(...t){return function(n){t.some(r=>(r==null||r(n),n==null?void 0:n.defaultPrevented))}}function OC(t){return L.Children.toArray(t).filter(e=>L.isValidElement(e))}function AC(t){const e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function One(t,e){return`${t} returned \`undefined\`. Seems you forgot to wrap component within ${e}`}function Or(t={}){const{name:e,strict:n=!0,hookName:r="useContext",providerName:i="Provider",errorMessage:s,defaultValue:o}=t,a=L.createContext(o);a.displayName=e;function h(){var g;const p=L.useContext(a);if(!p&&n){const y=new Error(s??One(r,i));throw y.name="ContextError",(g=Error.captureStackTrace)==null||g.call(Error,y,h),y}return p}return[a.Provider,h,a]}const ln=(...t)=>t.filter(Boolean).join(" "),EW=t=>t.hasAttribute("tabindex"),Ane=t=>EW(t)&&t.tabIndex===-1;function zW(t){if(!PC(t)||TW(t)||pne(t))return!1;const{localName:e}=t;if(["input","select","textarea","button"].indexOf(e)>=0)return!0;const r={a:()=>t.hasAttribute("href"),audio:()=>t.hasAttribute("controls"),video:()=>t.hasAttribute("controls")};return e in r?r[e]():fne(t)?!0:EW(t)}function Ene(t){return t?PC(t)&&zW(t)&&!Ane(t):!1}const zne=["input:not(:disabled):not([disabled])","select:not(:disabled):not([disabled])","textarea:not(:disabled):not([disabled])","embed","iframe","object","a[href]","area[href]","button:not(:disabled):not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"],Ine=zne.join(),Mne=t=>t.offsetWidth>0&&t.offsetHeight>0;function Rne(t){const e=Array.from(t.querySelectorAll(Ine));return e.unshift(t),e.filter(n=>zW(n)&&Mne(n))}function Dne(t,e,n,r){const i=typeof e=="string"?e.split("."):[e];for(r=0;r<i.length&&t;r+=1)t=t[i[r]];return t===void 0?n:t}const Lne=t=>{const e=new WeakMap;return(r,i,s,o)=>{if(typeof r>"u")return t(r,i,s);e.has(r)||e.set(r,new Map);const a=e.get(r);if(a.has(i))return a.get(i);const h=t(r,i,s,o);return a.set(i,h),h}},IW=Lne(Dne),Fne=t=>t.default||t;function MW(t){const{wasSelected:e,enabled:n,isSelected:r,mode:i="unmount"}=t;return!!(!n||r||i==="keepMounted"&&e)}function Bne(t){const e=parseFloat(t);return typeof e!="number"||Number.isNaN(e)?0:e}function DM(t,e){let n=Bne(t);const r=10**(e??10);return n=Math.round(n*r)/r,e?n.toFixed(e):n.toString()}function yE(t){if(!Number.isFinite(t))return 0;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n+=1;return n}function S4(t,e,n){return(t-e)*100/(n-e)}function $ne(t,e,n){return(n-e)*t+e}function k4(t,e,n){const r=Math.round((t-e)/n)*n+e,i=yE(n);return DM(r,i)}function ak(t,e,n){return t==null?t:(n<e&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(t,e),n))}function s_(t,e=[]){const n=Object.assign({},t);for(const r of e)r in n&&delete n[r];return n}function RW(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function LM(t,e){return Array.isArray(t)?t.map(n=>n===null?null:e(n)):mo(t)?Object.keys(t).reduce((n,r)=>(n[r]=e(t[r]),n),{}):t!=null?e(t):null}const Nne=t=>typeof t=="function";function pl(t,...e){return Nne(t)?t(...e):t}function Vne(t){const e=t.ownerDocument.defaultView||window,{overflow:n,overflowX:r,overflowY:i}=e.getComputedStyle(t);return/auto|scroll|overlay|hidden/.test(n+i+r)}function Wne(t){return t.localName==="html"?t:t.assignedSlot||t.parentElement||t.ownerDocument.documentElement}function DW(t){return["html","body","#document"].includes(t.localName)?t.ownerDocument.body:PC(t)&&Vne(t)?t:DW(Wne(t))}function LW(t,e){const n={},r={};for(const[i,s]of Object.entries(t))e.includes(i)?n[i]=s:r[i]=s;return[n,r]}function Une(t,...e){const n=Object.getOwnPropertyDescriptors(t),r=Object.keys(n),i=o=>{const a={};for(let h=0;h<o.length;h++){const p=o[h];n[p]&&(Object.defineProperty(a,p,n[p]),delete n[p])}return a},s=o=>i(Array.isArray(o)?o:r.filter(o));return e.map(s).concat(i(r))}function C4(t,e,n={}){const{stop:r,getKey:i}=n;function s(o,a=[]){if(mo(o)||Array.isArray(o)){const h={};for(const[p,g]of Object.entries(o)){const y=(i==null?void 0:i(p))??p,b=[...a,y];if(r!=null&&r(o,b))return e(o,a);h[y]=s(g,b)}return h}return e(o,a)}return s(t)}const o_=t=>{const{condition:e,message:n}=t};var p2={exports:{}};p2.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",h="[object Array]",p="[object AsyncFunction]",g="[object Boolean]",y="[object Date]",b="[object Error]",S="[object Function]",P="[object GeneratorFunction]",O="[object Map]",D="[object Number]",z="[object Null]",F="[object Object]",R="[object Proxy]",N="[object RegExp]",Q="[object Set]",q="[object String]",X="[object Undefined]",K="[object WeakMap]",ne="[object ArrayBuffer]",J="[object DataView]",ae="[object Float32Array]",Ee="[object Float64Array]",Ce="[object Int8Array]",$e="[object Int16Array]",We="[object Int32Array]",Fe="[object Uint8Array]",we="[object Uint8ClampedArray]",Ie="[object Uint16Array]",Qe="[object Uint32Array]",se=/[\\^$.*+?()[\]{}|]/g,Re=/^\[object .+?Constructor\]$/,Oe=/^(?:0|[1-9]\d*)$/,oe={};oe[ae]=oe[Ee]=oe[Ce]=oe[$e]=oe[We]=oe[Fe]=oe[we]=oe[Ie]=oe[Qe]=!0,oe[a]=oe[h]=oe[ne]=oe[g]=oe[J]=oe[y]=oe[b]=oe[S]=oe[O]=oe[D]=oe[F]=oe[N]=oe[Q]=oe[q]=oe[K]=!1;var nt=typeof Ah=="object"&&Ah&&Ah.Object===Object&&Ah,Ne=typeof self=="object"&&self&&self.Object===Object&&self,tt=nt||Ne||Function("return this")(),Ye=e&&!e.nodeType&&e,_t=Ye&&!0&&t&&!t.nodeType&&t,At=_t&&_t.exports===Ye,Ot=At&&nt.process,bt=function(){try{var ve=_t&&_t.require&&_t.require("util").types;return ve||Ot&&Ot.binding&&Ot.binding("util")}catch{}}(),rt=bt&&bt.isTypedArray;function tn(ve,He,lt){switch(lt.length){case 0:return ve.call(He);case 1:return ve.call(He,lt[0]);case 2:return ve.call(He,lt[0],lt[1]);case 3:return ve.call(He,lt[0],lt[1],lt[2])}return ve.apply(He,lt)}function kt(ve,He){for(var lt=-1,on=Array(ve);++lt<ve;)on[lt]=He(lt);return on}function it(ve){return function(He){return ve(He)}}function ze(ve,He){return ve==null?void 0:ve[He]}function ut(ve,He){return function(lt){return ve(He(lt))}}var qt=Array.prototype,Ct=Function.prototype,$t=Object.prototype,Yn=tt["__core-js_shared__"],br=Ct.toString,ur=$t.hasOwnProperty,Ar=function(){var ve=/[^.]+$/.exec(Yn&&Yn.keys&&Yn.keys.IE_PROTO||"");return ve?"Symbol(src)_1."+ve:""}(),_r=$t.toString,ct=br.call(Object),Tt=RegExp("^"+br.call(ur).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Me=At?tt.Buffer:void 0,Xt=tt.Symbol,pt=tt.Uint8Array;Me&&Me.allocUnsafe;var zt=ut(Object.getPrototypeOf,Object),ir=Object.create,yt=$t.propertyIsEnumerable,_n=qt.splice,Kt=Xt?Xt.toStringTag:void 0,tr=function(){try{var ve=tu(Object,"defineProperty");return ve({},"",{}),ve}catch{}}(),qr=Me?Me.isBuffer:void 0,sn=Math.max,Wi=Date.now,Rs=tu(tt,"Map"),Ui=tu(Object,"create"),vs=function(){function ve(){}return function(He){if(!zl(He))return{};if(ir)return ir(He);ve.prototype=He;var lt=new ve;return ve.prototype=void 0,lt}}();function xe(ve){var He=-1,lt=ve==null?0:ve.length;for(this.clear();++He<lt;){var on=ve[He];this.set(on[0],on[1])}}function U(){this.__data__=Ui?Ui(null):{},this.size=0}function G(ve){var He=this.has(ve)&&delete this.__data__[ve];return this.size-=He?1:0,He}function re(ve){var He=this.__data__;if(Ui){var lt=He[ve];return lt===r?void 0:lt}return ur.call(He,ve)?He[ve]:void 0}function pe(ve){var He=this.__data__;return Ui?He[ve]!==void 0:ur.call(He,ve)}function Se(ve,He){var lt=this.__data__;return this.size+=this.has(ve)?0:1,lt[ve]=Ui&&He===void 0?r:He,this}xe.prototype.clear=U,xe.prototype.delete=G,xe.prototype.get=re,xe.prototype.has=pe,xe.prototype.set=Se;function Pe(ve){var He=-1,lt=ve==null?0:ve.length;for(this.clear();++He<lt;){var on=ve[He];this.set(on[0],on[1])}}function qe(){this.__data__=[],this.size=0}function ke(ve){var He=this.__data__,lt=Ka(He,ve);if(lt<0)return!1;var on=He.length-1;return lt==on?He.pop():_n.call(He,lt,1),--this.size,!0}function st(ve){var He=this.__data__,lt=Ka(He,ve);return lt<0?void 0:He[lt][1]}function ft(ve){return Ka(this.__data__,ve)>-1}function _e(ve,He){var lt=this.__data__,on=Ka(lt,ve);return on<0?(++this.size,lt.push([ve,He])):lt[on][1]=He,this}Pe.prototype.clear=qe,Pe.prototype.delete=ke,Pe.prototype.get=st,Pe.prototype.has=ft,Pe.prototype.set=_e;function ht(ve){var He=-1,lt=ve==null?0:ve.length;for(this.clear();++He<lt;){var on=ve[He];this.set(on[0],on[1])}}function Wt(){this.size=0,this.__data__={hash:new xe,map:new(Rs||Pe),string:new xe}}function dn(ve){var He=td(this,ve).delete(ve);return this.size-=He?1:0,He}function Xn(ve){return td(this,ve).get(ve)}function Nn(ve){return td(this,ve).has(ve)}function cr(ve,He){var lt=td(this,ve),on=lt.size;return lt.set(ve,He),this.size+=lt.size==on?0:1,this}ht.prototype.clear=Wt,ht.prototype.delete=dn,ht.prototype.get=Xn,ht.prototype.has=Nn,ht.prototype.set=cr;function Un(ve){var He=this.__data__=new Pe(ve);this.size=He.size}function wi(){this.__data__=new Pe,this.size=0}function oi(ve){var He=this.__data__,lt=He.delete(ve);return this.size=He.size,lt}function qn(ve){return this.__data__.get(ve)}function Tr(ve){return this.__data__.has(ve)}function Gr(ve,He){var lt=this.__data__;if(lt instanceof Pe){var on=lt.__data__;if(!Rs||on.length<n-1)return on.push([ve,He]),this.size=++lt.size,this;lt=this.__data__=new ht(on)}return lt.set(ve,He),this.size=lt.size,this}Un.prototype.clear=wi,Un.prototype.delete=oi,Un.prototype.get=qn,Un.prototype.has=Tr,Un.prototype.set=Gr;function Fi(ve,He){var lt=bc(ve),on=!lt&&Za(ve),dr=!lt&&!on&&th(ve),Er=!lt&&!on&&!dr&&cp(ve),jr=lt||on||dr||Er,Jn=jr?kt(ve.length,String):[],Tn=Jn.length;for(var Bs in ve)jr&&(Bs=="length"||dr&&(Bs=="offset"||Bs=="parent")||Er&&(Bs=="buffer"||Bs=="byteLength"||Bs=="byteOffset")||hr(Bs,Tn))||Jn.push(Bs);return Jn}function Ei(ve,He,lt){(lt!==void 0&&!sd(ve[He],lt)||lt===void 0&&!(He in ve))&&yr(ve,He,lt)}function bs(ve,He,lt){var on=ve[He];(!(ur.call(ve,He)&&sd(on,lt))||lt===void 0&&!(He in ve))&&yr(ve,He,lt)}function Ka(ve,He){for(var lt=ve.length;lt--;)if(sd(ve[lt][0],He))return lt;return-1}function yr(ve,He,lt){He=="__proto__"&&tr?tr(ve,He,{configurable:!0,enumerable:!0,value:lt,writable:!0}):ve[He]=lt}var sp=Uo();function Jc(ve){return ve==null?ve===void 0?X:z:Kt&&Kt in Object(ve)?vc(ve):eh(ve)}function Ds(ve){return fa(ve)&&Jc(ve)==a}function eo(ve){if(!zl(ve)||nu(ve))return!1;var He=ru(ve)?Tt:Re;return He.test(lg(ve))}function yx(ve){return fa(ve)&&nh(ve.length)&&!!oe[Jc(ve)]}function wo(ve){if(!zl(ve))return rd(ve);var He=nd(ve),lt=[];for(var on in ve)on=="constructor"&&(He||!ur.call(ve,on))||lt.push(on);return lt}function Ls(ve,He,lt,on,dr){ve!==He&&sp(He,function(Er,jr){if(dr||(dr=new Un),zl(Er))eu(ve,He,jr,lt,Ls,on,dr);else{var Jn=on?on(El(ve,jr),Er,jr+"",ve,He,dr):void 0;Jn===void 0&&(Jn=Er),Ei(ve,jr,Jn)}},ug)}function eu(ve,He,lt,on,dr,Er,jr){var Jn=El(ve,lt),Tn=El(He,lt),Bs=jr.get(Tn);if(Bs){Ei(ve,lt,Bs);return}var to=Er?Er(Jn,Tn,lt+"",ve,He,jr):void 0,pa=to===void 0;if(pa){var hp=bc(Tn),od=!hp&&th(Tn),dg=!hp&&!od&&cp(Tn);to=Tn,hp||od||dg?bc(Jn)?to=Jn:Fs(Jn)?to=ed(Jn):od?(pa=!1,to=Ju(Tn)):dg?(pa=!1,to=yi(Tn)):to=[]:vx(Tn)||Za(Tn)?(to=Jn,Za(Jn)?to=cg(Jn):(!zl(Jn)||ru(Jn))&&(to=Al(Tn))):pa=!1}pa&&(jr.set(Tn,to),dr(to,Tn,on,Er,jr),jr.delete(Tn)),Ei(ve,lt,to)}function xc(ve,He){return ag(id(ve,He,iu),ve+"")}var Si=tr?function(ve,He){return tr(ve,"toString",{configurable:!0,enumerable:!1,value:hg(He),writable:!0})}:iu;function Ju(ve,He){return ve.slice()}function Vo(ve){var He=new ve.constructor(ve.byteLength);return new pt(He).set(new pt(ve)),He}function yi(ve,He){var lt=Vo(ve.buffer);return new ve.constructor(lt,ve.byteOffset,ve.length)}function ed(ve,He){var lt=-1,on=ve.length;for(He||(He=Array(on));++lt<on;)He[lt]=ve[lt];return He}function Wo(ve,He,lt,on){var dr=!lt;lt||(lt={});for(var Er=-1,jr=He.length;++Er<jr;){var Jn=He[Er],Tn=void 0;Tn===void 0&&(Tn=ve[Jn]),dr?yr(lt,Jn,Tn):bs(lt,Jn,Tn)}return lt}function op(ve){return xc(function(He,lt){var on=-1,dr=lt.length,Er=dr>1?lt[dr-1]:void 0,jr=dr>2?lt[2]:void 0;for(Er=ve.length>3&&typeof Er=="function"?(dr--,Er):void 0,jr&&ap(lt[0],lt[1],jr)&&(Er=dr<3?void 0:Er,dr=1),He=Object(He);++on<dr;){var Jn=lt[on];Jn&&ve(He,Jn,on,Er)}return He})}function Uo(ve){return function(He,lt,on){for(var dr=-1,Er=Object(He),jr=on(He),Jn=jr.length;Jn--;){var Tn=jr[++dr];if(lt(Er[Tn],Tn,Er)===!1)break}return He}}function td(ve,He){var lt=ve.__data__;return lp(He)?lt[typeof He=="string"?"string":"hash"]:lt.map}function tu(ve,He){var lt=ze(ve,He);return eo(lt)?lt:void 0}function vc(ve){var He=ur.call(ve,Kt),lt=ve[Kt];try{ve[Kt]=void 0;var on=!0}catch{}var dr=_r.call(ve);return on&&(He?ve[Kt]=lt:delete ve[Kt]),dr}function Al(ve){return typeof ve.constructor=="function"&&!nd(ve)?vs(zt(ve)):{}}function hr(ve,He){var lt=typeof ve;return He=He??o,!!He&&(lt=="number"||lt!="symbol"&&Oe.test(ve))&&ve>-1&&ve%1==0&&ve<He}function ap(ve,He,lt){if(!zl(lt))return!1;var on=typeof He;return(on=="number"?is(lt)&&hr(He,lt.length):on=="string"&&He in lt)?sd(lt[He],ve):!1}function lp(ve){var He=typeof ve;return He=="string"||He=="number"||He=="symbol"||He=="boolean"?ve!=="__proto__":ve===null}function nu(ve){return!!Ar&&Ar in ve}function nd(ve){var He=ve&&ve.constructor,lt=typeof He=="function"&&He.prototype||$t;return ve===lt}function rd(ve){var He=[];if(ve!=null)for(var lt in Object(ve))He.push(lt);return He}function eh(ve){return _r.call(ve)}function id(ve,He,lt){return He=sn(He===void 0?ve.length-1:He,0),function(){for(var on=arguments,dr=-1,Er=sn(on.length-He,0),jr=Array(Er);++dr<Er;)jr[dr]=on[He+dr];dr=-1;for(var Jn=Array(He+1);++dr<He;)Jn[dr]=on[dr];return Jn[He]=lt(jr),tn(ve,this,Jn)}}function El(ve,He){if(!(He==="constructor"&&typeof ve[He]=="function")&&He!="__proto__")return ve[He]}var ag=xx(Si);function xx(ve){var He=0,lt=0;return function(){var on=Wi(),dr=s-(on-lt);if(lt=on,dr>0){if(++He>=i)return arguments[0]}else He=0;return ve.apply(void 0,arguments)}}function lg(ve){if(ve!=null){try{return br.call(ve)}catch{}try{return ve+""}catch{}}return""}function sd(ve,He){return ve===He||ve!==ve&&He!==He}var Za=Ds(function(){return arguments}())?Ds:function(ve){return fa(ve)&&ur.call(ve,"callee")&&!yt.call(ve,"callee")},bc=Array.isArray;function is(ve){return ve!=null&&nh(ve.length)&&!ru(ve)}function Fs(ve){return fa(ve)&&is(ve)}var th=qr||up;function ru(ve){if(!zl(ve))return!1;var He=Jc(ve);return He==S||He==P||He==p||He==R}function nh(ve){return typeof ve=="number"&&ve>-1&&ve%1==0&&ve<=o}function zl(ve){var He=typeof ve;return ve!=null&&(He=="object"||He=="function")}function fa(ve){return ve!=null&&typeof ve=="object"}function vx(ve){if(!fa(ve)||Jc(ve)!=F)return!1;var He=zt(ve);if(He===null)return!0;var lt=ur.call(He,"constructor")&&He.constructor;return typeof lt=="function"&&lt instanceof lt&&br.call(lt)==ct}var cp=rt?it(rt):yx;function cg(ve){return Wo(ve,ug(ve))}function ug(ve){return is(ve)?Fi(ve):wo(ve)}var bx=op(function(ve,He,lt,on){Ls(ve,He,lt,on)});function hg(ve){return function(){return ve}}function iu(ve){return ve}function up(){return!1}t.exports=bx})(p2,p2.exports);var qne=p2.exports;const nc=Zm(qne);function Ki(t,e=[]){const n=L.useRef(t);return L.useEffect(()=>{n.current=t}),L.useCallback((...r)=>{var i;return(i=n.current)==null?void 0:i.call(n,...r)},e)}function bb(t,e,n,r){const i=Ki(n);return L.useEffect(()=>{const s=typeof t=="function"?t():t??document;if(!(!n||!s))return s.addEventListener(e,i,r),()=>{s.removeEventListener(e,i,r)}},[e,t,r,i,n]),()=>{const s=typeof t=="function"?t():t??document;s==null||s.removeEventListener(e,i,r)}}function Qne(t){const{isOpen:e,ref:n}=t,[r,i]=L.useState(e),[s,o]=L.useState(!1);return L.useEffect(()=>{s||(i(e),o(!0))},[e,s,r]),bb(()=>n.current,"animationend",()=>{i(e)}),{present:!(e?!1:!r),onComplete(){var g;const h=mne(n.current),p=new h.CustomEvent("animationend",{bubbles:!0});(g=n.current)==null||g.dispatchEvent(p)}}}function FM(t){const{value:e,defaultValue:n,onChange:r,shouldUpdate:i=(b,S)=>b!==S}=t,s=Ki(r),o=Ki(i),[a,h]=L.useState(n),p=e!==void 0,g=p?e:a,y=Ki(b=>{const P=typeof b=="function"?b(g):b;o(g,P)&&(p||h(P),s(P))},[p,s,g,o]);return[g,y]}function Hne(t={}){const{onChange:e,precision:n,defaultValue:r,value:i,step:s=1,min:o=Number.MIN_SAFE_INTEGER,max:a=Number.MAX_SAFE_INTEGER,keepWithinRange:h=!0}=t,p=Ki(e),[g,y]=L.useState(()=>r==null?"":_P(r,s,n)??""),b=typeof i<"u",S=b?i:g,P=FW(Fd(S),s),O=n??P,D=L.useCallback(J=>{J!==S&&(b||y(J.toString()),p==null||p(J.toString(),Fd(J)))},[p,b,S]),z=L.useCallback(J=>{let ae=J;return h&&(ae=ak(ae,o,a)),DM(ae,O)},[O,h,a,o]),F=L.useCallback((J=s)=>{let ae;S===""?ae=Fd(J):ae=Fd(S)+J,ae=z(ae),D(ae)},[z,s,D,S]),R=L.useCallback((J=s)=>{let ae;S===""?ae=Fd(-J):ae=Fd(S)-J,ae=z(ae),D(ae)},[z,s,D,S]),N=L.useCallback(()=>{let J;r==null?J="":J=_P(r,s,n)??o,D(J)},[r,n,s,D,o]),Q=L.useCallback(J=>{const ae=_P(J,s,O)??o;D(ae)},[O,s,D,o]),q=Fd(S);return{isOutOfRange:q>a||q<o,isAtMax:q===a,isAtMin:q===o,precision:O,value:S,valueAsNumber:q,update:D,reset:N,increment:F,decrement:R,clamp:z,cast:Q,setValue:y}}function Fd(t){return parseFloat(t.toString().replace(/[^\w.-]+/g,""))}function FW(t,e){return Math.max(yE(e),yE(t))}function _P(t,e,n){const r=Fd(t);if(Number.isNaN(r))return;const i=FW(r,e);return DM(r,n??i)}function Lm(t={}){const{onClose:e,onOpen:n,isOpen:r,id:i}=t,s=Ki(n),o=Ki(e),[a,h]=L.useState(t.defaultIsOpen||!1),p=r!==void 0?r:a,g=r!==void 0,y=L.useId(),b=i??`disclosure-${y}`,S=L.useCallback(()=>{g||h(!1),o==null||o()},[g,o]),P=L.useCallback(()=>{g||h(!0),s==null||s()},[g,s]),O=L.useCallback(()=>{p?S():P()},[p,P,S]);function D(F={}){return{...F,"aria-expanded":p,"aria-controls":b,onClick(R){var N;(N=F.onClick)==null||N.call(F,R),O()}}}function z(F={}){return{...F,hidden:!p,id:b}}return{isOpen:p,onOpen:P,onClose:S,onToggle:O,isControlled:g,getButtonProps:D,getDisclosureProps:z}}const wf=globalThis!=null&&globalThis.document?L.useLayoutEffect:L.useEffect,zf=(t,e)=>{const n=L.useRef(!1),r=L.useRef(!1);L.useEffect(()=>{if(n.current&&r.current)return t();r.current=!0},e),L.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[])};function Gne(t){const e=t.current;if(!e)return!1;const n=yne(e);return!n||e.contains(n)?!1:!!Ene(n)}function Xne(t,e){const{visible:n,focusRef:r}=e,i=!n;zf(()=>{if(!i||Gne(t))return;const s=(r==null?void 0:r.current)||t.current;let o;if(s)return o=requestAnimationFrame(()=>{s.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(o)}},[i,t,r])}function Kne(t,e){const n=L.useId();return L.useMemo(()=>t||[e,n].filter(Boolean).join("-"),[t,e,n])}function Zne(t,...e){const n=Kne(t);return L.useMemo(()=>e.map(r=>`${r}-${n}`),[n,e])}function Yne(t,e){const n=Ki(t);L.useEffect(()=>{let r=null;const i=()=>n();return e!==null&&(r=window.setInterval(i,e)),()=>{r&&window.clearInterval(r)}},[e,n])}function BW(t){const e=L.useRef(null);return e.current=t,e}function Jne(t,e){if(t!=null){if(typeof t=="function"){t(e);return}try{t.current=e}catch{throw new Error(`Cannot assign value '${e}' to ref '${t}'`)}}}function Ai(...t){return e=>{t.forEach(n=>{Jne(n,e)})}}function ere(...t){return L.useMemo(()=>Ai(...t),t)}function tre(t){const{ref:e,handler:n,enabled:r=!0}=t,i=Ki(n),o=L.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;L.useEffect(()=>{if(!r)return;const a=y=>{wP(y,e)&&(o.isPointerDown=!0)},h=y=>{if(o.ignoreEmulatedMouseEvents){o.ignoreEmulatedMouseEvents=!1;return}o.isPointerDown&&n&&wP(y,e)&&(o.isPointerDown=!1,i(y))},p=y=>{o.ignoreEmulatedMouseEvents=!0,n&&o.isPointerDown&&wP(y,e)&&(o.isPointerDown=!1,i(y))},g=$W(e.current);return g.addEventListener("mousedown",a,!0),g.addEventListener("mouseup",h,!0),g.addEventListener("touchstart",a,!0),g.addEventListener("touchend",p,!0),()=>{g.removeEventListener("mousedown",a,!0),g.removeEventListener("mouseup",h,!0),g.removeEventListener("touchstart",a,!0),g.removeEventListener("touchend",p,!0)}},[n,e,i,o,r])}function wP(t,e){var r,i;const n=((r=t.composedPath)==null?void 0:r.call(t)[0])??t.target;return n&&!$W(n).contains(n)?!1:!((i=e.current)!=null&&i.contains(n))}function $W(t){return(t==null?void 0:t.ownerDocument)??document}function nre(t,e){const n=Ki(t);L.useEffect(()=>{if(e==null)return;let r=null;return r=window.setTimeout(()=>{n()},e),()=>{r&&window.clearTimeout(r)}},[e,n])}const NW=1/60*1e3,rre=typeof performance<"u"?()=>performance.now():()=>Date.now(),VW=typeof window<"u"?t=>window.requestAnimationFrame(t):t=>setTimeout(()=>t(rre()),NW);function ire(t){let e=[],n=[],r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(h,p=!1,g=!1)=>{const y=g&&i,b=y?e:n;return p&&o.add(h),b.indexOf(h)===-1&&(b.push(h),y&&i&&(r=e.length)),h},cancel:h=>{const p=n.indexOf(h);p!==-1&&n.splice(p,1),o.delete(h)},process:h=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let p=0;p<r;p++){const g=e[p];g(h),o.has(g)&&(a.schedule(g),t())}i=!1,s&&(s=!1,a.process(h))}};return a}const sre=40;let xE=!0,l1=!1,vE=!1;const Uy={delta:0,timestamp:0},a_=["read","update","preRender","render","postRender"],EC=a_.reduce((t,e)=>(t[e]=ire(()=>l1=!0),t),{}),ore=a_.reduce((t,e)=>{const n=EC[e];return t[e]=(r,i=!1,s=!1)=>(l1||cre(),n.schedule(r,i,s)),t},{}),are=a_.reduce((t,e)=>(t[e]=EC[e].cancel,t),{});a_.reduce((t,e)=>(t[e]=()=>EC[e].process(Uy),t),{});const lre=t=>EC[t].process(Uy),WW=t=>{l1=!1,Uy.delta=xE?NW:Math.max(Math.min(t-Uy.timestamp,sre),1),Uy.timestamp=t,vE=!0,a_.forEach(lre),vE=!1,l1&&(xE=!1,VW(WW))},cre=()=>{l1=!0,xE=!0,vE||VW(WW)},T4=()=>Uy;var ure=Object.defineProperty,hre=(t,e,n)=>e in t?ure(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jc=(t,e,n)=>(hre(t,typeof e!="symbol"?e+"":e,n),n);class dre{constructor(e,n,r){if(jc(this,"history",[]),jc(this,"startEvent",null),jc(this,"lastEvent",null),jc(this,"lastEventInfo",null),jc(this,"handlers",{}),jc(this,"removeListeners",()=>{}),jc(this,"threshold",3),jc(this,"win"),jc(this,"updatePoint",()=>{if(!(this.lastEvent&&this.lastEventInfo))return;const a=SP(this.lastEventInfo,this.history),h=this.startEvent!==null,p=gre(a.offset,{x:0,y:0})>=this.threshold;if(!h&&!p)return;const{timestamp:g}=T4();this.history.push({...a.point,timestamp:g});const{onStart:y,onMove:b}=this.handlers;h||(y==null||y(this.lastEvent,a),this.startEvent=this.lastEvent),b==null||b(this.lastEvent,a)}),jc(this,"onPointerMove",(a,h)=>{this.lastEvent=a,this.lastEventInfo=h,ore.update(this.updatePoint,!0)}),jc(this,"onPointerUp",(a,h)=>{const p=SP(h,this.history),{onEnd:g,onSessionEnd:y}=this.handlers;y==null||y(a,p),this.end(),!(!g||!this.startEvent)&&(g==null||g(a,p))}),this.win=e.view??window,vne(e))return;this.handlers=n,r&&(this.threshold=r),e.stopPropagation(),e.preventDefault();const i={point:OW(e)},{timestamp:s}=T4();this.history=[{...i.point,timestamp:s}];const{onSessionStart:o}=n;o==null||o(e,SP(i,this.history)),this.removeListeners=mre(ok(this.win,"pointermove",this.onPointerMove),ok(this.win,"pointerup",this.onPointerUp),ok(this.win,"pointercancel",this.onPointerUp))}updateHandlers(e){this.handlers=e}end(){var e;(e=this.removeListeners)==null||e.call(this),are.update(this.updatePoint)}}function j4(t,e){return{x:t.x-e.x,y:t.y-e.y}}function SP(t,e){return{point:t.point,delta:j4(t.point,e[e.length-1]),offset:j4(t.point,e[0]),velocity:pre(e,.1)}}const fre=t=>t*1e3;function pre(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=t[t.length-1];for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>fre(e)));)n--;if(!r)return{x:0,y:0};const s=(i.timestamp-r.timestamp)/1e3;if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function mre(...t){return e=>t.reduce((n,r)=>r(n),e)}function kP(t,e){return Math.abs(t-e)}function P4(t){return"x"in t&&"y"in t}function gre(t,e){if(typeof t=="number"&&typeof e=="number")return kP(t,e);if(P4(t)&&P4(e)){const n=kP(t.x,e.x),r=kP(t.y,e.y);return Math.sqrt(n**2+r**2)}return 0}function yre(t,e){const{onPan:n,onPanStart:r,onPanEnd:i,onPanSessionStart:s,onPanSessionEnd:o,threshold:a}=e,h=!!(n||r||i||s||o),p=L.useRef(null),g=BW({onSessionStart:s,onSessionEnd:o,onStart:r,onMove:n,onEnd(y,b){p.current=null,i==null||i(y,b)}});L.useEffect(()=>{var y;(y=p.current)==null||y.updateHandlers(g.current)}),L.useEffect(()=>{const y=t.current;if(!y||!h)return;function b(S){p.current=new dre(S,g.current,a)}return ok(y,"pointerdown",b)},[t,h,g,a]),L.useEffect(()=>()=>{var y;(y=p.current)==null||y.end(),p.current=null},[])}const Ss={open:(t,e)=>`${t}[data-open], ${t}[open], ${t}[data-state=open] ${e}`,closed:(t,e)=>`${t}[data-closed], ${t}[data-state=closed] ${e}`,hover:(t,e)=>`${t}:hover ${e}, ${t}[data-hover] ${e}`,focus:(t,e)=>`${t}:focus ${e}, ${t}[data-focus] ${e}`,focusVisible:(t,e)=>`${t}:focus-visible ${e}`,focusWithin:(t,e)=>`${t}:focus-within ${e}`,active:(t,e)=>`${t}:active ${e}, ${t}[data-active] ${e}`,disabled:(t,e)=>`${t}:disabled ${e}, ${t}[data-disabled] ${e}`,invalid:(t,e)=>`${t}:invalid ${e}, ${t}[data-invalid] ${e}`,checked:(t,e)=>`${t}:checked ${e}, ${t}[data-checked] ${e}`,placeholderShown:(t,e)=>`${t}:placeholder-shown ${e}`},du=t=>UW(e=>t(e,"&"),"[role=group]","[data-group]",".group"),gh=t=>UW(e=>t(e,"~ &"),"[data-peer]",".peer"),UW=(t,...e)=>e.map(t).join(", "),qy={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within, &[data-focus-within]",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty, &[data-empty]",_expanded:"&[aria-expanded=true], &[data-expanded], &[data-state=expanded]",_checked:"&[aria-checked=true], &[data-checked], &[data-state=checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate], &[data-state=indeterminate]",_groupOpen:du(Ss.open),_groupClosed:du(Ss.closed),_groupHover:du(Ss.hover),_peerHover:gh(Ss.hover),_groupFocus:du(Ss.focus),_peerFocus:gh(Ss.focus),_groupFocusVisible:du(Ss.focusVisible),_peerFocusVisible:gh(Ss.focusVisible),_groupActive:du(Ss.active),_peerActive:gh(Ss.active),_groupDisabled:du(Ss.disabled),_peerDisabled:gh(Ss.disabled),_groupInvalid:du(Ss.invalid),_peerInvalid:gh(Ss.invalid),_groupChecked:du(Ss.checked),_peerChecked:gh(Ss.checked),_groupFocusWithin:du(Ss.focusWithin),_peerFocusWithin:gh(Ss.focusWithin),_peerPlaceholderShown:gh(Ss.placeholderShown),_placeholder:"&::placeholder, &[data-placeholder]",_placeholderShown:"&:placeholder-shown, &[data-placeholder-shown]",_fullScreen:"&:fullscreen, &[data-fullscreen]",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]",_open:"&[data-open], &[open], &[data-state=open]",_closed:"&[data-closed], &[data-state=closed]",_complete:"&[data-complete]",_incomplete:"&[data-incomplete]",_current:"&[data-current]"},qW=Object.keys(qy),xre=t=>/!(important)?$/.test(t),O4=t=>typeof t=="string"?t.replace(/!(important)?$/,"").trim():t,vre=(t,e)=>n=>{const r=String(e),i=xre(r),s=O4(r),o=t?`${t}.${s}`:s;let a=mo(n.__cssMap)&&o in n.__cssMap?n.__cssMap[o].varRef:e;return a=O4(a),i?`${a} !important`:a};function BM(t){const{scale:e,transform:n,compose:r}=t;return(s,o)=>{const a=vre(e,s)(o);let h=(n==null?void 0:n(a,o))??a;return r&&(h=r(h,o)),h}}const tS=(...t)=>e=>t.reduce((n,r)=>r(n),e);function Fl(t,e){return n=>{const r={property:n,scale:t};return r.transform=BM({scale:t,transform:e}),r}}const bre=({rtl:t,ltr:e})=>n=>n.direction==="rtl"?t:e;function _re(t){const{property:e,scale:n,transform:r}=t;return{scale:n,property:bre(e),transform:n?BM({scale:n,compose:r}):r}}const QW=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function wre(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...QW].join(" ")}function Sre(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...QW].join(" ")}const kre={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},Cre={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function Tre(t){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":t,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}const jre={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},bE={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},Pre=new Set(Object.values(bE)),_E=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),Ore=t=>t.trim();function Are(t,e){if(t==null||_E.has(t))return t;if(!(wE(t)||_E.has(t)))return`url('${t}')`;const i=/(^[a-z-A-Z]+)\((.*)\)/g.exec(t),s=i==null?void 0:i[1],o=i==null?void 0:i[2];if(!s||!o)return t;const a=s.includes("-gradient")?s:`${s}-gradient`,[h,...p]=o.split(",").map(Ore).filter(Boolean);if((p==null?void 0:p.length)===0)return t;const g=h in bE?bE[h]:h;p.unshift(g);const y=p.map(b=>{if(Pre.has(b))return b;const S=b.indexOf(" "),[P,O]=S!==-1?[b.substr(0,S),b.substr(S+1)]:[b],D=wE(O)?O:O&&O.split(" "),z=`colors.${P}`,F=z in e.__cssMap?e.__cssMap[z].varRef:P;return D?[F,...Array.isArray(D)?D:[D]].join(" "):F});return`${a}(${y.join(", ")})`}const wE=t=>typeof t=="string"&&t.includes("(")&&t.includes(")"),Ere=(t,e)=>Are(t,e??{});function zre(t){return/^var\(--.+\)$/.test(t)}const Ire=t=>{const e=parseFloat(t.toString()),n=t.toString().replace(String(e),"");return{unitless:!n,value:e,unit:n}},fu=t=>e=>`${t}(${e})`,Sr={filter(t){return t!=="auto"?t:kre},backdropFilter(t){return t!=="auto"?t:Cre},ring(t){return Tre(Sr.px(t))},bgClip(t){return t==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:t}},transform(t){return t==="auto"?wre():t==="auto-gpu"?Sre():t},vh(t){return t==="$100vh"?"var(--chakra-vh)":t},px(t){if(t==null)return t;const{unitless:e}=Ire(t);return e||typeof t=="number"?`${t}px`:t},fraction(t){return typeof t!="number"||t>1?t:`${t*100}%`},float(t,e){const n={left:"right",right:"left"};return e.direction==="rtl"?n[t]:t},degree(t){if(zre(t)||t==null)return t;const e=typeof t=="string"&&!t.endsWith("deg");return typeof t=="number"||e?`${t}deg`:t},gradient:Ere,blur:fu("blur"),opacity:fu("opacity"),brightness:fu("brightness"),contrast:fu("contrast"),dropShadow:fu("drop-shadow"),grayscale:fu("grayscale"),hueRotate:t=>fu("hue-rotate")(Sr.degree(t)),invert:fu("invert"),saturate:fu("saturate"),sepia:fu("sepia"),bgImage(t){return t==null||wE(t)||_E.has(t)?t:`url(${t})`},outline(t){const e=String(t)==="0"||String(t)==="none";return t!==null&&e?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:t}},flexDirection(t){const{space:e,divide:n}=jre[t]??{},r={flexDirection:t};return e&&(r[e]=1),n&&(r[n]=1),r}},Ke={borderWidths:Fl("borderWidths"),borderStyles:Fl("borderStyles"),colors:Fl("colors"),borders:Fl("borders"),gradients:Fl("gradients",Sr.gradient),radii:Fl("radii",Sr.px),space:Fl("space",tS(Sr.vh,Sr.px)),spaceT:Fl("space",tS(Sr.vh,Sr.px)),degreeT(t){return{property:t,transform:Sr.degree}},prop(t,e,n){return{property:t,scale:e,...e&&{transform:BM({scale:e,transform:n})}}},propT(t,e){return{property:t,transform:e}},sizes:Fl("sizes",tS(Sr.vh,Sr.px)),sizesT:Fl("sizes",tS(Sr.vh,Sr.fraction)),shadows:Fl("shadows"),logical:_re,blur:Fl("blur",Sr.blur)},lk={background:Ke.colors("background"),backgroundColor:Ke.colors("backgroundColor"),backgroundImage:Ke.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:Sr.bgClip},bgSize:Ke.prop("backgroundSize"),bgPosition:Ke.prop("backgroundPosition"),bg:Ke.colors("background"),bgColor:Ke.colors("backgroundColor"),bgPos:Ke.prop("backgroundPosition"),bgRepeat:Ke.prop("backgroundRepeat"),bgAttachment:Ke.prop("backgroundAttachment"),bgGradient:Ke.gradients("backgroundImage"),bgClip:{transform:Sr.bgClip}};Object.assign(lk,{bgImage:lk.backgroundImage,bgImg:lk.backgroundImage});const Fr={border:Ke.borders("border"),borderWidth:Ke.borderWidths("borderWidth"),borderStyle:Ke.borderStyles("borderStyle"),borderColor:Ke.colors("borderColor"),borderRadius:Ke.radii("borderRadius"),borderTop:Ke.borders("borderTop"),borderBlockStart:Ke.borders("borderBlockStart"),borderTopLeftRadius:Ke.radii("borderTopLeftRadius"),borderStartStartRadius:Ke.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:Ke.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:Ke.radii("borderTopRightRadius"),borderStartEndRadius:Ke.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:Ke.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:Ke.borders("borderRight"),borderInlineEnd:Ke.borders("borderInlineEnd"),borderBottom:Ke.borders("borderBottom"),borderBlockEnd:Ke.borders("borderBlockEnd"),borderBottomLeftRadius:Ke.radii("borderBottomLeftRadius"),borderBottomRightRadius:Ke.radii("borderBottomRightRadius"),borderLeft:Ke.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:Ke.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:Ke.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:Ke.borders(["borderLeft","borderRight"]),borderInline:Ke.borders("borderInline"),borderY:Ke.borders(["borderTop","borderBottom"]),borderBlock:Ke.borders("borderBlock"),borderTopWidth:Ke.borderWidths("borderTopWidth"),borderBlockStartWidth:Ke.borderWidths("borderBlockStartWidth"),borderTopColor:Ke.colors("borderTopColor"),borderBlockStartColor:Ke.colors("borderBlockStartColor"),borderTopStyle:Ke.borderStyles("borderTopStyle"),borderBlockStartStyle:Ke.borderStyles("borderBlockStartStyle"),borderBottomWidth:Ke.borderWidths("borderBottomWidth"),borderBlockEndWidth:Ke.borderWidths("borderBlockEndWidth"),borderBottomColor:Ke.colors("borderBottomColor"),borderBlockEndColor:Ke.colors("borderBlockEndColor"),borderBottomStyle:Ke.borderStyles("borderBottomStyle"),borderBlockEndStyle:Ke.borderStyles("borderBlockEndStyle"),borderLeftWidth:Ke.borderWidths("borderLeftWidth"),borderInlineStartWidth:Ke.borderWidths("borderInlineStartWidth"),borderLeftColor:Ke.colors("borderLeftColor"),borderInlineStartColor:Ke.colors("borderInlineStartColor"),borderLeftStyle:Ke.borderStyles("borderLeftStyle"),borderInlineStartStyle:Ke.borderStyles("borderInlineStartStyle"),borderRightWidth:Ke.borderWidths("borderRightWidth"),borderInlineEndWidth:Ke.borderWidths("borderInlineEndWidth"),borderRightColor:Ke.colors("borderRightColor"),borderInlineEndColor:Ke.colors("borderInlineEndColor"),borderRightStyle:Ke.borderStyles("borderRightStyle"),borderInlineEndStyle:Ke.borderStyles("borderInlineEndStyle"),borderTopRadius:Ke.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:Ke.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:Ke.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:Ke.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(Fr,{rounded:Fr.borderRadius,roundedTop:Fr.borderTopRadius,roundedTopLeft:Fr.borderTopLeftRadius,roundedTopRight:Fr.borderTopRightRadius,roundedTopStart:Fr.borderStartStartRadius,roundedTopEnd:Fr.borderStartEndRadius,roundedBottom:Fr.borderBottomRadius,roundedBottomLeft:Fr.borderBottomLeftRadius,roundedBottomRight:Fr.borderBottomRightRadius,roundedBottomStart:Fr.borderEndStartRadius,roundedBottomEnd:Fr.borderEndEndRadius,roundedLeft:Fr.borderLeftRadius,roundedRight:Fr.borderRightRadius,roundedStart:Fr.borderInlineStartRadius,roundedEnd:Fr.borderInlineEndRadius,borderStart:Fr.borderInlineStart,borderEnd:Fr.borderInlineEnd,borderTopStartRadius:Fr.borderStartStartRadius,borderTopEndRadius:Fr.borderStartEndRadius,borderBottomStartRadius:Fr.borderEndStartRadius,borderBottomEndRadius:Fr.borderEndEndRadius,borderStartRadius:Fr.borderInlineStartRadius,borderEndRadius:Fr.borderInlineEndRadius,borderStartWidth:Fr.borderInlineStartWidth,borderEndWidth:Fr.borderInlineEndWidth,borderStartColor:Fr.borderInlineStartColor,borderEndColor:Fr.borderInlineEndColor,borderStartStyle:Fr.borderInlineStartStyle,borderEndStyle:Fr.borderInlineEndStyle});const Mre={color:Ke.colors("color"),textColor:Ke.colors("color"),fill:Ke.colors("fill"),stroke:Ke.colors("stroke"),accentColor:Ke.colors("accentColor"),textFillColor:Ke.colors("textFillColor")},m2={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:Sr.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:Ke.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:Ke.space("gap"),rowGap:Ke.space("rowGap"),columnGap:Ke.space("columnGap")};Object.assign(m2,{flexDir:m2.flexDirection});const $l={width:Ke.sizesT("width"),inlineSize:Ke.sizesT("inlineSize"),height:Ke.sizes("height"),blockSize:Ke.sizes("blockSize"),boxSize:Ke.sizes(["width","height"]),minWidth:Ke.sizes("minWidth"),minInlineSize:Ke.sizes("minInlineSize"),minHeight:Ke.sizes("minHeight"),minBlockSize:Ke.sizes("minBlockSize"),maxWidth:Ke.sizes("maxWidth"),maxInlineSize:Ke.sizes("maxInlineSize"),maxHeight:Ke.sizes("maxHeight"),maxBlockSize:Ke.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(t,e)=>{var i,s;return{[`@media screen and (min-width: ${((s=(i=e.__breakpoints)==null?void 0:i.get(t))==null?void 0:s.minW)??t})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(t,e)=>{var i,s;return{[`@media screen and (max-width: ${((s=(i=e.__breakpoints)==null?void 0:i.get(t))==null?void 0:s._minW)??t})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:Ke.propT("float",Sr.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign($l,{w:$l.width,h:$l.height,minW:$l.minWidth,maxW:$l.maxWidth,minH:$l.minHeight,maxH:$l.maxHeight,overscroll:$l.overscrollBehavior,overscrollX:$l.overscrollBehaviorX,overscrollY:$l.overscrollBehaviorY});const Rre={filter:{transform:Sr.filter},blur:Ke.blur("--chakra-blur"),brightness:Ke.propT("--chakra-brightness",Sr.brightness),contrast:Ke.propT("--chakra-contrast",Sr.contrast),hueRotate:Ke.propT("--chakra-hue-rotate",Sr.hueRotate),invert:Ke.propT("--chakra-invert",Sr.invert),saturate:Ke.propT("--chakra-saturate",Sr.saturate),dropShadow:Ke.propT("--chakra-drop-shadow",Sr.dropShadow),backdropFilter:{transform:Sr.backdropFilter},backdropBlur:Ke.blur("--chakra-backdrop-blur"),backdropBrightness:Ke.propT("--chakra-backdrop-brightness",Sr.brightness),backdropContrast:Ke.propT("--chakra-backdrop-contrast",Sr.contrast),backdropHueRotate:Ke.propT("--chakra-backdrop-hue-rotate",Sr.hueRotate),backdropInvert:Ke.propT("--chakra-backdrop-invert",Sr.invert),backdropSaturate:Ke.propT("--chakra-backdrop-saturate",Sr.saturate)},Dre={ring:{transform:Sr.ring},ringColor:Ke.colors("--chakra-ring-color"),ringOffset:Ke.prop("--chakra-ring-offset-width"),ringOffsetColor:Ke.colors("--chakra-ring-offset-color"),ringInset:Ke.prop("--chakra-ring-inset")},Lre={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:Sr.outline},outlineOffset:!0,outlineColor:Ke.colors("outlineColor")},HW={gridGap:Ke.space("gridGap"),gridColumnGap:Ke.space("gridColumnGap"),gridRowGap:Ke.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0};function Fre(t,e,n,r){const i=typeof e=="string"?e.split("."):[e];for(r=0;r<i.length&&t;r+=1)t=t[i[r]];return t===void 0?n:t}const Bre=t=>{const e=new WeakMap;return(r,i,s,o)=>{if(typeof r>"u")return t(r,i,s);e.has(r)||e.set(r,new Map);const a=e.get(r);if(a.has(i))return a.get(i);const h=t(r,i,s,o);return a.set(i,h),h}},$re=Bre(Fre),Nre={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Vre={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},CP=(t,e,n)=>{const r={},i=$re(t,e,{});for(const s in i)s in n&&n[s]!=null||(r[s]=i[s]);return r},Wre={srOnly:{transform(t){return t===!0?Nre:t==="focusable"?Vre:{}}},layerStyle:{processResult:!0,transform:(t,e,n)=>CP(e,`layerStyles.${t}`,n)},textStyle:{processResult:!0,transform:(t,e,n)=>CP(e,`textStyles.${t}`,n)},apply:{processResult:!0,transform:(t,e,n)=>CP(e,t,n)}},_b={position:!0,pos:Ke.prop("position"),zIndex:Ke.prop("zIndex","zIndices"),inset:Ke.spaceT("inset"),insetX:Ke.spaceT(["left","right"]),insetInline:Ke.spaceT("insetInline"),insetY:Ke.spaceT(["top","bottom"]),insetBlock:Ke.spaceT("insetBlock"),top:Ke.spaceT("top"),insetBlockStart:Ke.spaceT("insetBlockStart"),bottom:Ke.spaceT("bottom"),insetBlockEnd:Ke.spaceT("insetBlockEnd"),left:Ke.spaceT("left"),insetInlineStart:Ke.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:Ke.spaceT("right"),insetInlineEnd:Ke.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(_b,{insetStart:_b.insetInlineStart,insetEnd:_b.insetInlineEnd});const SE={boxShadow:Ke.shadows("boxShadow"),mixBlendMode:!0,blendMode:Ke.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:Ke.prop("backgroundBlendMode"),opacity:!0};Object.assign(SE,{shadow:SE.boxShadow});const bi={margin:Ke.spaceT("margin"),marginTop:Ke.spaceT("marginTop"),marginBlockStart:Ke.spaceT("marginBlockStart"),marginRight:Ke.spaceT("marginRight"),marginInlineEnd:Ke.spaceT("marginInlineEnd"),marginBottom:Ke.spaceT("marginBottom"),marginBlockEnd:Ke.spaceT("marginBlockEnd"),marginLeft:Ke.spaceT("marginLeft"),marginInlineStart:Ke.spaceT("marginInlineStart"),marginX:Ke.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:Ke.spaceT("marginInline"),marginY:Ke.spaceT(["marginTop","marginBottom"]),marginBlock:Ke.spaceT("marginBlock"),padding:Ke.space("padding"),paddingTop:Ke.space("paddingTop"),paddingBlockStart:Ke.space("paddingBlockStart"),paddingRight:Ke.space("paddingRight"),paddingBottom:Ke.space("paddingBottom"),paddingBlockEnd:Ke.space("paddingBlockEnd"),paddingLeft:Ke.space("paddingLeft"),paddingInlineStart:Ke.space("paddingInlineStart"),paddingInlineEnd:Ke.space("paddingInlineEnd"),paddingX:Ke.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:Ke.space("paddingInline"),paddingY:Ke.space(["paddingTop","paddingBottom"]),paddingBlock:Ke.space("paddingBlock")};Object.assign(bi,{m:bi.margin,mt:bi.marginTop,mr:bi.marginRight,me:bi.marginInlineEnd,marginEnd:bi.marginInlineEnd,mb:bi.marginBottom,ml:bi.marginLeft,ms:bi.marginInlineStart,marginStart:bi.marginInlineStart,mx:bi.marginX,my:bi.marginY,p:bi.padding,pt:bi.paddingTop,py:bi.paddingY,px:bi.paddingX,pb:bi.paddingBottom,pl:bi.paddingLeft,ps:bi.paddingInlineStart,paddingStart:bi.paddingInlineStart,pr:bi.paddingRight,pe:bi.paddingInlineEnd,paddingEnd:bi.paddingInlineEnd});const Ure={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:Ke.spaceT("scrollMargin"),scrollMarginTop:Ke.spaceT("scrollMarginTop"),scrollMarginBottom:Ke.spaceT("scrollMarginBottom"),scrollMarginLeft:Ke.spaceT("scrollMarginLeft"),scrollMarginRight:Ke.spaceT("scrollMarginRight"),scrollMarginX:Ke.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:Ke.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:Ke.spaceT("scrollPadding"),scrollPaddingTop:Ke.spaceT("scrollPaddingTop"),scrollPaddingBottom:Ke.spaceT("scrollPaddingBottom"),scrollPaddingLeft:Ke.spaceT("scrollPaddingLeft"),scrollPaddingRight:Ke.spaceT("scrollPaddingRight"),scrollPaddingX:Ke.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:Ke.spaceT(["scrollPaddingTop","scrollPaddingBottom"])},qre={fontFamily:Ke.prop("fontFamily","fonts"),fontSize:Ke.prop("fontSize","fontSizes",Sr.px),fontWeight:Ke.prop("fontWeight","fontWeights"),lineHeight:Ke.prop("lineHeight","lineHeights"),letterSpacing:Ke.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(t){if(t===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},Qre={textDecorationColor:Ke.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:Ke.shadows("textShadow")},Hre={clipPath:!0,transform:Ke.propT("transform",Sr.transform),transformOrigin:!0,translateX:Ke.spaceT("--chakra-translate-x"),translateY:Ke.spaceT("--chakra-translate-y"),skewX:Ke.degreeT("--chakra-skew-x"),skewY:Ke.degreeT("--chakra-skew-y"),scaleX:Ke.prop("--chakra-scale-x"),scaleY:Ke.prop("--chakra-scale-y"),scale:Ke.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:Ke.degreeT("--chakra-rotate")},Gre={listStyleType:!0,listStylePosition:!0,listStylePos:Ke.prop("listStylePosition"),listStyleImage:!0,listStyleImg:Ke.prop("listStyleImage")},Xre={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:Ke.prop("transitionDuration","transition.duration"),transitionProperty:Ke.prop("transitionProperty","transition.property"),transitionTimingFunction:Ke.prop("transitionTimingFunction","transition.easing")},$M=nc({},lk,Fr,Mre,m2,$l,Rre,Dre,Lre,HW,Wre,_b,SE,bi,Ure,qre,Qre,Hre,Gre,Xre),Kre=Object.assign({},bi,$l,m2,HW,_b),GW=Object.keys(Kre),Zre=[...Object.keys($M),...qW],Yre={...$M,...qy},Jre=t=>t in Yre,eie=t=>e=>{if(!e.__breakpoints)return t;const{isResponsive:n,toArrayValue:r,media:i}=e.__breakpoints,s={};for(const o in t){let a=pl(t[o],e);if(a==null)continue;if(a=mo(a)&&n(a)?r(a):a,!Array.isArray(a)){s[o]=a;continue}const h=a.slice(0,i.length).length;for(let p=0;p<h;p+=1){const g=i==null?void 0:i[p];if(!g){s[o]=a[p];continue}s[g]=s[g]||{},a[p]!=null&&(s[g][o]=a[p])}}return s};function tie(t){const e=[];let n="",r=!1;for(let i=0;i<t.length;i++){const s=t[i];s==="("?(r=!0,n+=s):s===")"?(r=!1,n+=s):s===","&&!r?(e.push(n),n=""):n+=s}return n=n.trim(),n&&e.push(n),e}function nie(t){return/^var\(--.+\)$/.test(t)}const rie=(t,e)=>t.startsWith("--")&&typeof e=="string"&&!nie(e),iie=(t,e)=>{if(e==null)return e;const n=o=>{var a,h;return(h=(a=t.__cssMap)==null?void 0:a[o])==null?void 0:h.varRef},r=o=>n(o)??o,[i,s]=tie(e);return e=n(i)??r(s)??r(e),e};function sie(t){const{configs:e={},pseudos:n={},theme:r}=t,i=(s,o=!1)=>{var g;const a=pl(s,r),h=eie(a)(r);let p={};for(let y in h){const b=h[y];let S=pl(b,r);y in n&&(y=n[y]),rie(y,S)&&(S=iie(r,S));let P=e[y];if(P===!0&&(P={property:y}),mo(S)){p[y]=p[y]??{},p[y]=nc({},p[y],i(S,!0));continue}let O=((g=P==null?void 0:P.transform)==null?void 0:g.call(P,S,r,a))??S;O=P!=null&&P.processResult?i(O,!0):O;const D=pl(P==null?void 0:P.property,r);if(!o&&(P!=null&&P.static)){const z=pl(P.static,r);p=nc({},p,z)}if(D&&Array.isArray(D)){for(const z of D)p[z]=O;continue}if(D){D==="&"&&mo(O)?p=nc({},p,O):p[D]=O;continue}if(mo(O)){p=nc({},p,O);continue}p[y]=O}return p};return i}const XW=t=>e=>sie({theme:e,pseudos:qy,configs:$M})(t);function gi(t){return{definePartsStyle(e){return e},defineMultiStyleConfig(e){return{parts:t,...e}}}}function oie(t,e,n){var r,i;return((i=(r=t.__cssMap)==null?void 0:r[`${e}.${n}`])==null?void 0:i.varRef)??n}function aie(t,e){if(Array.isArray(t))return t;if(mo(t))return e(t);if(t!=null)return[t]}function lie(t,e){for(let n=e+1;n<t.length;n++)if(t[n]!=null)return n;return-1}function cie(t){const e=t.__breakpoints;return function(r,i,s,o){var b,S;if(!e)return;const a={},h=aie(s,e.toArrayValue);if(!h)return a;const p=h.length,g=p===1,y=!!r.parts;for(let P=0;P<p;P++){const O=e.details[P],D=e.details[lie(h,P)],z=Xv(O.minW,D==null?void 0:D._minW),F=pl((b=r[i])==null?void 0:b[h[P]],o);if(F){if(y){(S=r.parts)==null||S.forEach(R=>{nc(a,{[R]:g?F[R]:{[z]:F[R]}})});continue}if(!y){g?nc(a,F):a[z]=F;continue}a[z]=F}}return a}}function uie(t){return e=>{const{variant:n,size:r,theme:i}=e,s=cie(i);return nc({},pl(t.baseStyle??{},e),s(t,"sizes",r,e),s(t,"variants",n,e))}}function Mr(t){return s_(t,["styleConfig","size","variant","colorScheme"])}function KW(t){return mo(t)&&t.reference?t.reference:String(t)}const zC=(t,...e)=>e.map(KW).join(` ${t} `).replace(/calc/g,""),A4=(...t)=>`calc(${zC("+",...t)})`,E4=(...t)=>`calc(${zC("-",...t)})`,kE=(...t)=>`calc(${zC("*",...t)})`,z4=(...t)=>`calc(${zC("/",...t)})`,I4=t=>{const e=KW(t);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:kE(e,-1)},Th=Object.assign(t=>({add:(...e)=>Th(A4(t,...e)),subtract:(...e)=>Th(E4(t,...e)),multiply:(...e)=>Th(kE(t,...e)),divide:(...e)=>Th(z4(t,...e)),negate:()=>Th(I4(t)),toString:()=>t.toString()}),{add:A4,subtract:E4,multiply:kE,divide:z4,negate:I4});function hie(t,e="-"){return t.replace(/\s+/g,e)}function die(t){const e=hie(t.toString());return pie(fie(e))}function fie(t){return t.includes("\\.")?t:!Number.isInteger(parseFloat(t.toString()))?t.replace(".","\\."):t}function pie(t){return t.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function mie(t,e=""){return[e,t].filter(Boolean).join("-")}function gie(t,e){return`var(${t}${e?`, ${e}`:""})`}function yie(t,e=""){return die(`--${mie(t,e)}`)}function $n(t,e,n){const r=yie(t,n);return{variable:r,reference:gie(r,e)}}function xie(t,e){const n={};for(const r of e){if(Array.isArray(r)){const[i,s]=r;n[i]=$n(`${t}-${i}`,s);continue}n[r]=$n(`${t}-${r}`)}return n}const vie=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function bie(t){return RW(t,vie)}function _ie(t){return t.semanticTokens}function wie(t){const{__cssMap:e,__cssVars:n,__breakpoints:r,...i}=t;return i}function Sie(t){const e=bie(t),n=_ie(t),r=s=>qW.includes(s)||s==="default",i={};return C4(e,(s,o)=>{s!=null&&(i[o.join(".")]={isSemantic:!1,value:s})}),C4(n,(s,o)=>{s!=null&&(i[o.join(".")]={isSemantic:!0,value:s})},{stop:s=>Object.keys(s).every(r)}),i}function M4(t,e){return $n(String(t).replace(/\./g,"-"),void 0,e)}function kie(t){var o;const e=Sie(t),n=(o=t.config)==null?void 0:o.cssVarPrefix;let r={};const i={};function s(a,h){const g=[String(a).split(".")[0],h].join(".");if(!e[g])return h;const{reference:b}=M4(g,n);return b}for(const[a,h]of Object.entries(e)){const{isSemantic:p,value:g}=h,{variable:y,reference:b}=M4(a,n);if(!p){if(a.startsWith("space")){const P=a.split("."),[O,...D]=P,z=`${O}.-${D.join(".")}`,F=Th.negate(g),R=Th.negate(b);i[z]={value:F,var:y,varRef:R}}r[y]=g,i[a]={value:g,var:y,varRef:b};continue}const S=mo(g)?g:{default:g};r=nc(r,Object.entries(S).reduce((P,[O,D])=>{if(!D)return P;const z=s(a,`${D}`);if(O==="default")return P[y]=z,P;const F=(qy==null?void 0:qy[O])??O;return P[F]={[y]:z},P},{})),i[a]={value:b,var:y,varRef:b}}return{cssVars:r,cssMap:i}}function Cie(t){const e=wie(t),{cssMap:n,cssVars:r}=kie(e);return Object.assign(e,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...r},__cssMap:n,__breakpoints:Pne(e.breakpoints)}),e}function Ur(t,e={}){let n=!1;function r(){if(!n){n=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function i(...g){r();for(const y of g)e[y]=h(y);return Ur(t,e)}function s(...g){for(const y of g)y in e||(e[y]=h(y));return Ur(t,e)}function o(){return Object.fromEntries(Object.entries(e).map(([y,b])=>[y,b.selector]))}function a(){return Object.fromEntries(Object.entries(e).map(([y,b])=>[y,b.className]))}function h(g){const S=`chakra-${(["container","root"].includes(g??"")?[t]:[t,g]).filter(Boolean).join("__")}`;return{className:S,selector:`.${S}`,toString:()=>g}}return{parts:i,toPart:h,extend:s,selectors:o,classnames:a,get keys(){return Object.keys(e)},__type:{}}}const Tie=Ur("accordion").parts("root","container","button","panel","icon"),jie=Ur("alert").parts("title","description","container","icon","spinner"),Pie=Ur("avatar").parts("label","badge","container","excessLabel","group"),Oie=Ur("breadcrumb").parts("link","item","container","separator");Ur("button").parts();const Aie=Ur("checkbox").parts("control","icon","container","label");Ur("progress").parts("track","filledTrack","label");const Eie=Ur("drawer").parts("overlay","dialogContainer","dialog","header","closeButton","body","footer"),zie=Ur("editable").parts("preview","input","textarea"),Iie=Ur("form").parts("container","requiredIndicator","helperText"),Mie=Ur("formError").parts("text","icon"),Rie=Ur("input").parts("addon","field","element","group"),Die=Ur("list").parts("container","item","icon"),Lie=Ur("menu").parts("button","list","item","groupTitle","icon","command","divider"),Fie=Ur("modal").parts("overlay","dialogContainer","dialog","header","closeButton","body","footer"),Bie=Ur("numberinput").parts("root","field","stepperGroup","stepper");Ur("pininput").parts("field");const $ie=Ur("popover").parts("content","header","body","footer","popper","arrow","closeButton"),Nie=Ur("progress").parts("label","filledTrack","track"),Vie=Ur("radio").parts("container","control","label"),Wie=Ur("select").parts("field","icon"),Uie=Ur("slider").parts("container","track","thumb","filledTrack","mark"),qie=Ur("stat").parts("container","label","helpText","number","icon"),Qie=Ur("switch").parts("container","track","thumb","label"),Hie=Ur("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),Gie=Ur("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),Xie=Ur("tag").parts("container","label","closeButton"),Kie=Ur("card").parts("container","header","body","footer");Ur("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");const{definePartsStyle:Zie,defineMultiStyleConfig:Yie}=gi(Tie.keys),Jie={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},ese={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},tse={pt:"2",px:"4",pb:"5"},nse={fontSize:"1.25em"},rse=Zie({container:Jie,button:ese,panel:tse,icon:nse}),ise=Yie({baseStyle:rse});function Jp(t,e,n){return Math.min(Math.max(t,n),e)}class sse extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}}var Kv=sse;function NM(t){if(typeof t!="string")throw new Kv(t);if(t.trim().toLowerCase()==="transparent")return[0,0,0,0];let e=t.trim();e=fse.test(t)?lse(t):t;const n=cse.exec(e);if(n){const o=Array.from(n).slice(1);return[...o.slice(0,3).map(a=>parseInt(c1(a,2),16)),parseInt(c1(o[3]||"f",2),16)/255]}const r=use.exec(e);if(r){const o=Array.from(r).slice(1);return[...o.slice(0,3).map(a=>parseInt(a,16)),parseInt(o[3]||"ff",16)/255]}const i=hse.exec(e);if(i){const o=Array.from(i).slice(1);return[...o.slice(0,3).map(a=>parseInt(a,10)),parseFloat(o[3]||"1")]}const s=dse.exec(e);if(s){const[o,a,h,p]=Array.from(s).slice(1).map(parseFloat);if(Jp(0,100,a)!==a)throw new Kv(t);if(Jp(0,100,h)!==h)throw new Kv(t);return[...pse(o,a,h),Number.isNaN(p)?1:p]}throw new Kv(t)}function ose(t){let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return(e>>>0)%2341}const R4=t=>parseInt(t.replace(/_/g,""),36),ase="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((t,e)=>{const n=R4(e.substring(0,3)),r=R4(e.substring(3)).toString(16);let i="";for(let s=0;s<6-r.length;s++)i+="0";return t[n]=`${i}${r}`,t},{});function lse(t){const e=t.toLowerCase().trim(),n=ase[ose(e)];if(!n)throw new Kv(t);return`#${n}`}const c1=(t,e)=>Array.from(Array(e)).map(()=>t).join(""),cse=new RegExp(`^#${c1("([a-f0-9])",3)}([a-f0-9])?$`,"i"),use=new RegExp(`^#${c1("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),hse=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${c1(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),dse=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,fse=/^[a-z]+$/i,D4=t=>Math.round(t*255),pse=(t,e,n)=>{let r=n/100;if(e===0)return[r,r,r].map(D4);const i=(t%360+360)%360/60,s=(1-Math.abs(2*r-1))*(e/100),o=s*(1-Math.abs(i%2-1));let a=0,h=0,p=0;i>=0&&i<1?(a=s,h=o):i>=1&&i<2?(a=o,h=s):i>=2&&i<3?(h=s,p=o):i>=3&&i<4?(h=o,p=s):i>=4&&i<5?(a=o,p=s):i>=5&&i<6&&(a=s,p=o);const g=r-s/2,y=a+g,b=h+g,S=p+g;return[y,b,S].map(D4)};function mse(t,e,n,r){return`rgba(${Jp(0,255,t).toFixed()}, ${Jp(0,255,e).toFixed()}, ${Jp(0,255,n).toFixed()}, ${parseFloat(Jp(0,1,r).toFixed(3))})`}function gse(t,e){const[n,r,i,s]=NM(t);return mse(n,r,i,s-e)}function yse(t){const[e,n,r,i]=NM(t);let s=o=>{const a=Jp(0,255,o).toString(16);return a.length===1?`0${a}`:a};return`#${s(e)}${s(n)}${s(r)}${i<1?s(Math.round(i*255)):""}`}const xse=t=>Object.keys(t).length===0;function vse(t,e,n,r,i){for(e=e.split?e.split("."):e,r=0;r<e.length;r++)t=t?t[e[r]]:i;return t===i?n:t}const sa=(t,e,n)=>{const r=vse(t,`colors.${e}`,e);try{return yse(r),r}catch{return"#000000"}},bse=t=>{const[e,n,r]=NM(t);return(e*299+n*587+r*114)/1e3},_se=t=>e=>{const n=sa(e,t);return bse(n)<128?"dark":"light"},wse=t=>e=>_se(t)(e)==="dark",P0=(t,e)=>n=>{const r=sa(n,t);return gse(r,1-e)};function L4(t="1rem",e="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${e} 25%,
    transparent 25%,
    transparent 50%,
    ${e} 50%,
    ${e} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${t} ${t}`}}const Sse=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function kse(t){const e=Sse();return!t||xse(t)?e:t.string&&t.colors?Tse(t.string,t.colors):t.string&&!t.colors?Cse(t.string):t.colors&&!t.string?jse(t.colors):e}function Cse(t){let e=0;if(t.length===0)return e.toString();for(let r=0;r<t.length;r+=1)e=t.charCodeAt(r)+((e<<5)-e),e=e&e;let n="#";for(let r=0;r<3;r+=1){const i=e>>r*8&255;n+=`00${i.toString(16)}`.substr(-2)}return n}function Tse(t,e){let n=0;if(t.length===0)return e[0];for(let r=0;r<t.length;r+=1)n=t.charCodeAt(r)+((n<<5)-n),n=n&n;return n=(n%e.length+e.length)%e.length,e[n]}function jse(t){return t[Math.floor(Math.random()*t.length)]}function Fn(t,e){return n=>n.colorMode==="dark"?e:t}function VM(t){const{orientation:e,vertical:n,horizontal:r}=t;return e?e==="vertical"?n:r:{}}function ZW(t){return mo(t)&&t.reference?t.reference:String(t)}const IC=(t,...e)=>e.map(ZW).join(` ${t} `).replace(/calc/g,""),F4=(...t)=>`calc(${IC("+",...t)})`,B4=(...t)=>`calc(${IC("-",...t)})`,CE=(...t)=>`calc(${IC("*",...t)})`,$4=(...t)=>`calc(${IC("/",...t)})`,N4=t=>{const e=ZW(t);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:CE(e,-1)},jh=Object.assign(t=>({add:(...e)=>jh(F4(t,...e)),subtract:(...e)=>jh(B4(t,...e)),multiply:(...e)=>jh(CE(t,...e)),divide:(...e)=>jh($4(t,...e)),negate:()=>jh(N4(t)),toString:()=>t.toString()}),{add:F4,subtract:B4,multiply:CE,divide:$4,negate:N4});function Pse(t){return!Number.isInteger(parseFloat(t.toString()))}function Ose(t,e="-"){return t.replace(/\s+/g,e)}function YW(t){const e=Ose(t.toString());return e.includes("\\.")?t:Pse(t)?e.replace(".","\\."):t}function Ase(t,e=""){return[e,YW(t)].filter(Boolean).join("-")}function Ese(t,e){return`var(${YW(t)}${e?`, ${e}`:""})`}function zse(t,e=""){return`--${Ase(t,e)}`}function Ms(t,e){const n=zse(t,e==null?void 0:e.prefix);return{variable:n,reference:Ese(n,Ise(e==null?void 0:e.fallback))}}function Ise(t){return t==null?void 0:t.reference}const{definePartsStyle:l_,defineMultiStyleConfig:Mse}=gi(jie.keys),xl=$n("alert-fg"),qh=$n("alert-bg"),Rse=l_({container:{bg:qh.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:xl.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:xl.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function WM(t){const{theme:e,colorScheme:n}=t,r=P0(`${n}.200`,.16)(e);return{light:`colors.${n}.100`,dark:r}}const Dse=l_(t=>{const{colorScheme:e}=t,n=WM(t);return{container:{[xl.variable]:`colors.${e}.600`,[qh.variable]:n.light,_dark:{[xl.variable]:`colors.${e}.200`,[qh.variable]:n.dark}}}}),Lse=l_(t=>{const{colorScheme:e}=t,n=WM(t);return{container:{[xl.variable]:`colors.${e}.600`,[qh.variable]:n.light,_dark:{[xl.variable]:`colors.${e}.200`,[qh.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:xl.reference}}}),Fse=l_(t=>{const{colorScheme:e}=t,n=WM(t);return{container:{[xl.variable]:`colors.${e}.600`,[qh.variable]:n.light,_dark:{[xl.variable]:`colors.${e}.200`,[qh.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:xl.reference}}}),Bse=l_(t=>{const{colorScheme:e}=t;return{container:{[xl.variable]:"colors.white",[qh.variable]:`colors.${e}.600`,_dark:{[xl.variable]:"colors.gray.900",[qh.variable]:`colors.${e}.200`},color:xl.reference}}}),$se={subtle:Dse,"left-accent":Lse,"top-accent":Fse,solid:Bse},Nse=Mse({baseStyle:Rse,variants:$se,defaultProps:{variant:"subtle",colorScheme:"blue"}}),JW={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},Vse={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},Wse={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},e7={...JW,...Vse,container:Wse},Use=t=>typeof t=="function";function aa(t,...e){return Use(t)?t(...e):t}const{definePartsStyle:t7,defineMultiStyleConfig:qse}=gi(Pie.keys),Qy=$n("avatar-border-color"),wb=$n("avatar-bg"),u1=$n("avatar-font-size"),O0=$n("avatar-size"),Qse={borderRadius:"full",border:"0.2em solid",borderColor:Qy.reference,[Qy.variable]:"white",_dark:{[Qy.variable]:"colors.gray.800"}},Hse={bg:wb.reference,fontSize:u1.reference,width:O0.reference,height:O0.reference,lineHeight:"1",[wb.variable]:"colors.gray.200",_dark:{[wb.variable]:"colors.whiteAlpha.400"}},Gse=t=>{const{name:e,theme:n}=t,r=e?kse({string:e}):"colors.gray.400",i=wse(r)(n);let s="white";return i||(s="gray.800"),{bg:wb.reference,fontSize:u1.reference,color:s,borderColor:Qy.reference,verticalAlign:"top",width:O0.reference,height:O0.reference,"&:not([data-loaded])":{[wb.variable]:r},[Qy.variable]:"colors.white",_dark:{[Qy.variable]:"colors.gray.800"}}},Xse={fontSize:u1.reference,lineHeight:"1"},Kse=t7(t=>({badge:aa(Qse,t),excessLabel:aa(Hse,t),container:aa(Gse,t),label:Xse}));function Rd(t){const e=t!=="100%"?e7[t]:void 0;return t7({container:{[O0.variable]:e??t,[u1.variable]:`calc(${e??t} / 2.5)`},excessLabel:{[O0.variable]:e??t,[u1.variable]:`calc(${e??t} / 2.5)`}})}const Zse={"2xs":Rd(4),xs:Rd(6),sm:Rd(8),md:Rd(12),lg:Rd(16),xl:Rd(24),"2xl":Rd(32),full:Rd("100%")},Yse=qse({baseStyle:Kse,sizes:Zse,defaultProps:{size:"md"}}),Yi=xie("badge",["bg","color","shadow"]),Jse={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:Yi.bg.reference,color:Yi.color.reference,boxShadow:Yi.shadow.reference},eoe=t=>{const{colorScheme:e,theme:n}=t,r=P0(`${e}.500`,.6)(n);return{[Yi.bg.variable]:`colors.${e}.500`,[Yi.color.variable]:"colors.white",_dark:{[Yi.bg.variable]:r,[Yi.color.variable]:"colors.whiteAlpha.800"}}},toe=t=>{const{colorScheme:e,theme:n}=t,r=P0(`${e}.200`,.16)(n);return{[Yi.bg.variable]:`colors.${e}.100`,[Yi.color.variable]:`colors.${e}.800`,_dark:{[Yi.bg.variable]:r,[Yi.color.variable]:`colors.${e}.200`}}},noe=t=>{const{colorScheme:e,theme:n}=t,r=P0(`${e}.200`,.8)(n);return{[Yi.color.variable]:`colors.${e}.500`,_dark:{[Yi.color.variable]:r},[Yi.shadow.variable]:`inset 0 0 0px 1px ${Yi.color.reference}`}},roe={solid:eoe,subtle:toe,outline:noe},Sb={baseStyle:Jse,variants:roe,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:ioe,definePartsStyle:soe}=gi(Oie.keys),TP=$n("breadcrumb-link-decor"),ooe={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:TP.reference,[TP.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[TP.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},aoe=soe({link:ooe}),loe=ioe({baseStyle:aoe}),coe={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},n7=t=>{const{colorScheme:e,theme:n}=t;if(e==="gray")return{color:Fn("gray.800","whiteAlpha.900")(t),_hover:{bg:Fn("gray.100","whiteAlpha.200")(t)},_active:{bg:Fn("gray.200","whiteAlpha.300")(t)}};const r=P0(`${e}.200`,.12)(n),i=P0(`${e}.200`,.24)(n);return{color:Fn(`${e}.600`,`${e}.200`)(t),bg:"transparent",_hover:{bg:Fn(`${e}.50`,r)(t)},_active:{bg:Fn(`${e}.100`,i)(t)}}},uoe=t=>{const{colorScheme:e}=t,n=Fn("gray.200","whiteAlpha.300")(t);return{border:"1px solid",borderColor:e==="gray"?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...aa(n7,t)}},hoe={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},doe=t=>{const{colorScheme:e}=t;if(e==="gray"){const a=Fn("gray.100","whiteAlpha.200")(t);return{bg:a,color:Fn("gray.800","whiteAlpha.900")(t),_hover:{bg:Fn("gray.200","whiteAlpha.300")(t),_disabled:{bg:a}},_active:{bg:Fn("gray.300","whiteAlpha.400")(t)}}}const{bg:n=`${e}.500`,color:r="white",hoverBg:i=`${e}.600`,activeBg:s=`${e}.700`}=hoe[e]??{},o=Fn(n,`${e}.200`)(t);return{bg:o,color:Fn(r,"gray.800")(t),_hover:{bg:Fn(i,`${e}.300`)(t),_disabled:{bg:o}},_active:{bg:Fn(s,`${e}.400`)(t)}}},foe=t=>{const{colorScheme:e}=t;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:Fn(`${e}.500`,`${e}.200`)(t),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:Fn(`${e}.700`,`${e}.500`)(t)}}},poe={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},moe={ghost:n7,outline:uoe,solid:doe,link:foe,unstyled:poe},goe={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},yoe={baseStyle:coe,variants:moe,sizes:goe,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:ym,defineMultiStyleConfig:xoe}=gi(Kie.keys),g2=$n("card-bg"),Lh=$n("card-padding"),r7=$n("card-shadow"),ck=$n("card-radius"),i7=$n("card-border-width","0"),s7=$n("card-border-color"),voe=ym({container:{[g2.variable]:"colors.chakra-body-bg",backgroundColor:g2.reference,boxShadow:r7.reference,borderRadius:ck.reference,color:"chakra-body-text",borderWidth:i7.reference,borderColor:s7.reference},body:{padding:Lh.reference,flex:"1 1 0%"},header:{padding:Lh.reference},footer:{padding:Lh.reference}}),boe={sm:ym({container:{[ck.variable]:"radii.base",[Lh.variable]:"space.3"}}),md:ym({container:{[ck.variable]:"radii.md",[Lh.variable]:"space.5"}}),lg:ym({container:{[ck.variable]:"radii.xl",[Lh.variable]:"space.7"}})},_oe={elevated:ym({container:{[r7.variable]:"shadows.base",_dark:{[g2.variable]:"colors.gray.700"}}}),outline:ym({container:{[i7.variable]:"1px",[s7.variable]:"colors.chakra-border-color"}}),filled:ym({container:{[g2.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[Lh.variable]:0},header:{[Lh.variable]:0},footer:{[Lh.variable]:0}}},woe=xoe({baseStyle:voe,variants:_oe,sizes:boe,defaultProps:{variant:"elevated",size:"md"}}),{definePartsStyle:uk,defineMultiStyleConfig:Soe}=gi(Aie.keys),kb=$n("checkbox-size"),koe=t=>{const{colorScheme:e}=t;return{w:kb.reference,h:kb.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:Fn(`${e}.500`,`${e}.200`)(t),borderColor:Fn(`${e}.500`,`${e}.200`)(t),color:Fn("white","gray.900")(t),_hover:{bg:Fn(`${e}.600`,`${e}.300`)(t),borderColor:Fn(`${e}.600`,`${e}.300`)(t)},_disabled:{borderColor:Fn("gray.200","transparent")(t),bg:Fn("gray.200","whiteAlpha.300")(t),color:Fn("gray.500","whiteAlpha.500")(t)}},_indeterminate:{bg:Fn(`${e}.500`,`${e}.200`)(t),borderColor:Fn(`${e}.500`,`${e}.200`)(t),color:Fn("white","gray.900")(t)},_disabled:{bg:Fn("gray.100","whiteAlpha.100")(t),borderColor:Fn("gray.100","transparent")(t)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:Fn("red.500","red.300")(t)}}},Coe={_disabled:{cursor:"not-allowed"}},Toe={userSelect:"none",_disabled:{opacity:.4}},joe={transitionProperty:"transform",transitionDuration:"normal"},Poe=uk(t=>({icon:joe,container:Coe,control:aa(koe,t),label:Toe})),Ooe={sm:uk({control:{[kb.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:uk({control:{[kb.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:uk({control:{[kb.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},Wd=Soe({baseStyle:Poe,sizes:Ooe,defaultProps:{size:"md",colorScheme:"blue"}}),Cb=Ms("close-button-size"),jv=Ms("close-button-bg"),Aoe={w:[Cb.reference],h:[Cb.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[jv.variable]:"colors.blackAlpha.100",_dark:{[jv.variable]:"colors.whiteAlpha.100"}},_active:{[jv.variable]:"colors.blackAlpha.200",_dark:{[jv.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:jv.reference},Eoe={lg:{[Cb.variable]:"sizes.10",fontSize:"md"},md:{[Cb.variable]:"sizes.8",fontSize:"xs"},sm:{[Cb.variable]:"sizes.6",fontSize:"2xs"}},zoe={baseStyle:Aoe,sizes:Eoe,defaultProps:{size:"md"}},{variants:Ioe,defaultProps:Moe}=Sb,Roe={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:Yi.bg.reference,color:Yi.color.reference,boxShadow:Yi.shadow.reference},Doe={baseStyle:Roe,variants:Ioe,defaultProps:Moe},Loe={w:"100%",mx:"auto",maxW:"prose",px:"4"},Foe={baseStyle:Loe},Boe={opacity:.6,borderColor:"inherit"},$oe={borderStyle:"solid"},Noe={borderStyle:"dashed"},Voe={solid:$oe,dashed:Noe},Woe={baseStyle:Boe,variants:Voe,defaultProps:{variant:"solid"}},{definePartsStyle:TE,defineMultiStyleConfig:Uoe}=gi(Eie.keys),jP=$n("drawer-bg"),PP=$n("drawer-box-shadow");function Jg(t){return TE(t==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:t}})}const qoe={bg:"blackAlpha.600",zIndex:"modal"},Qoe={display:"flex",zIndex:"modal",justifyContent:"center"},Hoe=t=>{const{isFullHeight:e}=t;return{...e&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[jP.variable]:"colors.white",[PP.variable]:"shadows.lg",_dark:{[jP.variable]:"colors.gray.700",[PP.variable]:"shadows.dark-lg"},bg:jP.reference,boxShadow:PP.reference}},Goe={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},Xoe={position:"absolute",top:"2",insetEnd:"3"},Koe={px:"6",py:"2",flex:"1",overflow:"auto"},Zoe={px:"6",py:"4"},Yoe=TE(t=>({overlay:qoe,dialogContainer:Qoe,dialog:aa(Hoe,t),header:Goe,closeButton:Xoe,body:Koe,footer:Zoe})),Joe={xs:Jg("xs"),sm:Jg("md"),md:Jg("lg"),lg:Jg("2xl"),xl:Jg("4xl"),full:Jg("full")},eae=Uoe({baseStyle:Yoe,sizes:Joe,defaultProps:{size:"xs"}}),{definePartsStyle:tae,defineMultiStyleConfig:nae}=gi(zie.keys),rae={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},iae={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},sae={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},oae=tae({preview:rae,input:iae,textarea:sae}),aae=nae({baseStyle:oae}),{definePartsStyle:lae,defineMultiStyleConfig:cae}=gi(Iie.keys),Hy=$n("form-control-color"),uae={marginStart:"1",[Hy.variable]:"colors.red.500",_dark:{[Hy.variable]:"colors.red.300"},color:Hy.reference},hae={mt:"2",[Hy.variable]:"colors.gray.600",_dark:{[Hy.variable]:"colors.whiteAlpha.600"},color:Hy.reference,lineHeight:"normal",fontSize:"sm"},dae=lae({container:{width:"100%",position:"relative"},requiredIndicator:uae,helperText:hae}),fae=cae({baseStyle:dae}),{definePartsStyle:pae,defineMultiStyleConfig:mae}=gi(Mie.keys),Gy=$n("form-error-color"),gae={[Gy.variable]:"colors.red.500",_dark:{[Gy.variable]:"colors.red.300"},color:Gy.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},yae={marginEnd:"0.5em",[Gy.variable]:"colors.red.500",_dark:{[Gy.variable]:"colors.red.300"},color:Gy.reference},xae=pae({text:gae,icon:yae}),vae=mae({baseStyle:xae}),bae={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},_ae={baseStyle:bae},wae={fontFamily:"heading",fontWeight:"bold"},Sae={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},kae={baseStyle:wae,sizes:Sae,defaultProps:{size:"xl"}},{definePartsStyle:Ih,defineMultiStyleConfig:Cae}=gi(Rie.keys),ky=$n("input-height"),Cy=$n("input-font-size"),Ty=$n("input-padding"),jy=$n("input-border-radius"),Tae=Ih({addon:{height:ky.reference,fontSize:Cy.reference,px:Ty.reference,borderRadius:jy.reference},field:{width:"100%",height:ky.reference,fontSize:Cy.reference,px:Ty.reference,borderRadius:jy.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),Dd={lg:{[Cy.variable]:"fontSizes.lg",[Ty.variable]:"space.4",[jy.variable]:"radii.md",[ky.variable]:"sizes.12"},md:{[Cy.variable]:"fontSizes.md",[Ty.variable]:"space.4",[jy.variable]:"radii.md",[ky.variable]:"sizes.10"},sm:{[Cy.variable]:"fontSizes.sm",[Ty.variable]:"space.3",[jy.variable]:"radii.sm",[ky.variable]:"sizes.8"},xs:{[Cy.variable]:"fontSizes.xs",[Ty.variable]:"space.2",[jy.variable]:"radii.sm",[ky.variable]:"sizes.6"}},jae={lg:Ih({field:Dd.lg,group:Dd.lg}),md:Ih({field:Dd.md,group:Dd.md}),sm:Ih({field:Dd.sm,group:Dd.sm}),xs:Ih({field:Dd.xs,group:Dd.xs})};function UM(t){const{focusBorderColor:e,errorBorderColor:n}=t;return{focusBorderColor:e||Fn("blue.500","blue.300")(t),errorBorderColor:n||Fn("red.500","red.300")(t)}}const Pae=Ih(t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:r}=UM(t);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:Fn("gray.300","whiteAlpha.400")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:sa(e,r),boxShadow:`0 0 0 1px ${sa(e,r)}`},_focusVisible:{zIndex:1,borderColor:sa(e,n),boxShadow:`0 0 0 1px ${sa(e,n)}`}},addon:{border:"1px solid",borderColor:Fn("inherit","whiteAlpha.50")(t),bg:Fn("gray.100","whiteAlpha.300")(t)}}}),Oae=Ih(t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:r}=UM(t);return{field:{border:"2px solid",borderColor:"transparent",bg:Fn("gray.100","whiteAlpha.50")(t),_hover:{bg:Fn("gray.200","whiteAlpha.100")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:sa(e,r)},_focusVisible:{bg:"transparent",borderColor:sa(e,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:Fn("gray.100","whiteAlpha.50")(t)}}}),Aae=Ih(t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:r}=UM(t);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:sa(e,r),boxShadow:`0px 1px 0px 0px ${sa(e,r)}`},_focusVisible:{borderColor:sa(e,n),boxShadow:`0px 1px 0px 0px ${sa(e,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),Eae=Ih({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),zae={outline:Pae,filled:Oae,flushed:Aae,unstyled:Eae},Wr=Cae({baseStyle:Tae,sizes:jae,variants:zae,defaultProps:{size:"md",variant:"outline"}}),OP=$n("kbd-bg"),Iae={[OP.variable]:"colors.gray.100",_dark:{[OP.variable]:"colors.whiteAlpha.100"},bg:OP.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},Mae={baseStyle:Iae},Rae={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},Dae={baseStyle:Rae},{defineMultiStyleConfig:Lae,definePartsStyle:Fae}=gi(Die.keys),Bae={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},$ae=Fae({icon:Bae}),Nae=Lae({baseStyle:$ae}),{defineMultiStyleConfig:Vae,definePartsStyle:Wae}=gi(Lie.keys),_u=$n("menu-bg"),AP=$n("menu-shadow"),Uae={[_u.variable]:"#fff",[AP.variable]:"shadows.sm",_dark:{[_u.variable]:"colors.gray.700",[AP.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:"dropdown",borderRadius:"md",borderWidth:"1px",bg:_u.reference,boxShadow:AP.reference},qae={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[_u.variable]:"colors.gray.100",_dark:{[_u.variable]:"colors.whiteAlpha.100"}},_active:{[_u.variable]:"colors.gray.200",_dark:{[_u.variable]:"colors.whiteAlpha.200"}},_expanded:{[_u.variable]:"colors.gray.100",_dark:{[_u.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:_u.reference},Qae={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},Hae={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},Gae={opacity:.6},Xae={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},Kae={transitionProperty:"common",transitionDuration:"normal"},Zae=Wae({button:Kae,list:Uae,item:qae,groupTitle:Qae,icon:Hae,command:Gae,divider:Xae}),Yae=Vae({baseStyle:Zae}),{defineMultiStyleConfig:Jae,definePartsStyle:jE}=gi(Fie.keys),EP=$n("modal-bg"),zP=$n("modal-shadow"),ele={bg:"blackAlpha.600",zIndex:"modal"},tle=t=>{const{isCentered:e,scrollBehavior:n}=t;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:e?"center":"flex-start",overflow:n==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},nle=t=>{const{isCentered:e,scrollBehavior:n}=t;return{borderRadius:"md",color:"inherit",my:e?"auto":"16",mx:e?"auto":void 0,zIndex:"modal",maxH:n==="inside"?"calc(100% - 7.5rem)":void 0,[EP.variable]:"colors.white",[zP.variable]:"shadows.lg",_dark:{[EP.variable]:"colors.gray.700",[zP.variable]:"shadows.dark-lg"},bg:EP.reference,boxShadow:zP.reference}},rle={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},ile={position:"absolute",top:"2",insetEnd:"3"},sle=t=>{const{scrollBehavior:e}=t;return{px:"6",py:"2",flex:"1",overflow:e==="inside"?"auto":void 0}},ole={px:"6",py:"4"},ale=jE(t=>({overlay:ele,dialogContainer:aa(tle,t),dialog:aa(nle,t),header:rle,closeButton:ile,body:aa(sle,t),footer:ole}));function Pc(t){return jE(t==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:t}})}const lle={xs:Pc("xs"),sm:Pc("sm"),md:Pc("md"),lg:Pc("lg"),xl:Pc("xl"),"2xl":Pc("2xl"),"3xl":Pc("3xl"),"4xl":Pc("4xl"),"5xl":Pc("5xl"),"6xl":Pc("6xl"),full:Pc("full")},cle=Jae({baseStyle:ale,sizes:lle,defaultProps:{size:"md"}}),o7={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},{defineMultiStyleConfig:ule,definePartsStyle:a7}=gi(Bie.keys),qM=Ms("number-input-stepper-width"),l7=Ms("number-input-input-padding"),hle=jh(qM).add("0.5rem").toString(),IP=Ms("number-input-bg"),MP=Ms("number-input-color"),RP=Ms("number-input-border-color"),dle={[qM.variable]:"sizes.6",[l7.variable]:hle},fle=t=>{var e;return((e=aa(Wr.baseStyle,t))==null?void 0:e.field)??{}},ple={width:qM.reference},mle={borderStart:"1px solid",borderStartColor:RP.reference,color:MP.reference,bg:IP.reference,[MP.variable]:"colors.chakra-body-text",[RP.variable]:"colors.chakra-border-color",_dark:{[MP.variable]:"colors.whiteAlpha.800",[RP.variable]:"colors.whiteAlpha.300"},_active:{[IP.variable]:"colors.gray.200",_dark:{[IP.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},gle=a7(t=>({root:dle,field:aa(fle,t)??{},stepperGroup:ple,stepper:mle}));function nS(t){var s,o;const e=(s=Wr.sizes)==null?void 0:s[t],n={lg:"md",md:"md",sm:"sm",xs:"sm"},r=((o=e.field)==null?void 0:o.fontSize)??"md",i=o7.fontSizes[r];return a7({field:{...e.field,paddingInlineEnd:l7.reference,verticalAlign:"top"},stepper:{fontSize:jh(i).multiply(.75).toString(),_first:{borderTopEndRadius:n[t]},_last:{borderBottomEndRadius:n[t],mt:"-1px",borderTopWidth:1}}})}const yle={xs:nS("xs"),sm:nS("sm"),md:nS("md"),lg:nS("lg")},xle=ule({baseStyle:gle,sizes:yle,variants:Wr.variants,defaultProps:Wr.defaultProps});var $8;const vle={...($8=Wr.baseStyle)==null?void 0:$8.field,textAlign:"center"},ble={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}};var N8;const _le={outline:t=>{var e,n;return((n=aa((e=Wr.variants)==null?void 0:e.outline,t))==null?void 0:n.field)??{}},flushed:t=>{var e,n;return((n=aa((e=Wr.variants)==null?void 0:e.flushed,t))==null?void 0:n.field)??{}},filled:t=>{var e,n;return((n=aa((e=Wr.variants)==null?void 0:e.filled,t))==null?void 0:n.field)??{}},unstyled:((N8=Wr.variants)==null?void 0:N8.unstyled.field)??{}},wle={baseStyle:vle,sizes:ble,variants:_le,defaultProps:Wr.defaultProps},{defineMultiStyleConfig:Sle,definePartsStyle:kle}=gi($ie.keys),rS=Ms("popper-bg"),Cle=Ms("popper-arrow-bg"),V4=Ms("popper-arrow-shadow-color"),Tle={zIndex:"popover"},jle={[rS.variable]:"colors.white",bg:rS.reference,[Cle.variable]:rS.reference,[V4.variable]:"colors.gray.200",_dark:{[rS.variable]:"colors.gray.700",[V4.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},Ple={px:3,py:2,borderBottomWidth:"1px"},Ole={px:3,py:2},Ale={px:3,py:2,borderTopWidth:"1px"},Ele={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},zle=kle({popper:Tle,content:jle,header:Ple,body:Ole,footer:Ale,closeButton:Ele}),Ile=Sle({baseStyle:zle}),{defineMultiStyleConfig:Mle,definePartsStyle:Zv}=gi(Nie.keys),Rle=t=>{const{colorScheme:e,theme:n,isIndeterminate:r,hasStripe:i}=t,s=Fn(L4(),L4("1rem","rgba(0,0,0,0.1)"))(t),o=Fn(`${e}.500`,`${e}.200`)(t),a=`linear-gradient(
    to right,
    transparent 0%,
    ${sa(n,o)} 50%,
    transparent 100%
  )`;return{...!r&&i&&s,...r?{bgImage:a}:{bgColor:o}}},Dle={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},Lle=t=>({bg:Fn("gray.100","whiteAlpha.300")(t)}),Fle=t=>({transitionProperty:"common",transitionDuration:"slow",...Rle(t)}),Ble=Zv(t=>({label:Dle,filledTrack:Fle(t),track:Lle(t)})),$le={xs:Zv({track:{h:"1"}}),sm:Zv({track:{h:"2"}}),md:Zv({track:{h:"3"}}),lg:Zv({track:{h:"4"}})},Nle=Mle({sizes:$le,baseStyle:Ble,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Vle,definePartsStyle:hk}=gi(Vie.keys),Wle=t=>{var n;const e=(n=aa(Wd.baseStyle,t))==null?void 0:n.control;return{...e,borderRadius:"full",_checked:{...e==null?void 0:e._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},Ule=hk(t=>{var e,n;return{label:(e=Wd.baseStyle)==null?void 0:e.call(Wd,t).label,container:(n=Wd.baseStyle)==null?void 0:n.call(Wd,t).container,control:Wle(t)}}),qle={md:hk({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:hk({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:hk({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},Qle=Vle({baseStyle:Ule,sizes:qle,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Hle,definePartsStyle:Gle}=gi(Wie.keys),iS=$n("select-bg");var V8;const Xle={...(V8=Wr.baseStyle)==null?void 0:V8.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:iS.reference,[iS.variable]:"colors.white",_dark:{[iS.variable]:"colors.gray.700"},"> option, > optgroup":{bg:iS.reference}},Kle={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},Zle=Gle({field:Xle,icon:Kle}),sS={paddingInlineEnd:"8"};var W8,U8,q8,Q8,H8,G8,X8,K8;const Yle={lg:{...(W8=Wr.sizes)==null?void 0:W8.lg,field:{...(U8=Wr.sizes)==null?void 0:U8.lg.field,...sS}},md:{...(q8=Wr.sizes)==null?void 0:q8.md,field:{...(Q8=Wr.sizes)==null?void 0:Q8.md.field,...sS}},sm:{...(H8=Wr.sizes)==null?void 0:H8.sm,field:{...(G8=Wr.sizes)==null?void 0:G8.sm.field,...sS}},xs:{...(X8=Wr.sizes)==null?void 0:X8.xs,field:{...(K8=Wr.sizes)==null?void 0:K8.xs.field,...sS},icon:{insetEnd:"1"}}},Jle=Hle({baseStyle:Zle,sizes:Yle,variants:Wr.variants,defaultProps:Wr.defaultProps}),DP=$n("skeleton-start-color"),LP=$n("skeleton-end-color"),ece={[DP.variable]:"colors.gray.100",[LP.variable]:"colors.gray.400",_dark:{[DP.variable]:"colors.gray.800",[LP.variable]:"colors.gray.600"},background:DP.reference,borderColor:LP.reference,opacity:.7,borderRadius:"sm"},tce={baseStyle:ece},FP=$n("skip-link-bg"),nce={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[FP.variable]:"colors.white",_dark:{[FP.variable]:"colors.gray.700"},bg:FP.reference}},rce={baseStyle:nce},{defineMultiStyleConfig:ice,definePartsStyle:MC}=gi(Uie.keys),Fm=$n("slider-thumb-size"),h1=$n("slider-track-size"),Xd=$n("slider-bg"),sce=t=>{const{orientation:e}=t;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...VM({orientation:e,vertical:{h:"100%",px:Th(Fm.reference).divide(2).toString()},horizontal:{w:"100%",py:Th(Fm.reference).divide(2).toString()}})}},oce=t=>({...VM({orientation:t.orientation,horizontal:{h:h1.reference},vertical:{w:h1.reference}}),overflow:"hidden",borderRadius:"sm",[Xd.variable]:"colors.gray.200",_dark:{[Xd.variable]:"colors.whiteAlpha.200"},_disabled:{[Xd.variable]:"colors.gray.300",_dark:{[Xd.variable]:"colors.whiteAlpha.300"}},bg:Xd.reference}),ace=t=>{const{orientation:e}=t;return{...VM({orientation:e,vertical:{left:"50%"},horizontal:{top:"50%"}}),w:Fm.reference,h:Fm.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_active:{"--slider-thumb-scale":"1.15"},_disabled:{bg:"gray.300"}}},lce=t=>{const{colorScheme:e}=t;return{width:"inherit",height:"inherit",[Xd.variable]:`colors.${e}.500`,_dark:{[Xd.variable]:`colors.${e}.200`},bg:Xd.reference}},cce=MC(t=>({container:sce(t),track:oce(t),thumb:ace(t),filledTrack:lce(t)})),uce=MC({container:{[Fm.variable]:"sizes.4",[h1.variable]:"sizes.1"}}),hce=MC({container:{[Fm.variable]:"sizes.3.5",[h1.variable]:"sizes.1"}}),dce=MC({container:{[Fm.variable]:"sizes.2.5",[h1.variable]:"sizes.0.5"}}),fce={lg:uce,md:hce,sm:dce},pce=ice({baseStyle:cce,sizes:fce,defaultProps:{size:"md",colorScheme:"blue"}}),Qp=Ms("spinner-size"),mce={width:[Qp.reference],height:[Qp.reference]},gce={xs:{[Qp.variable]:"sizes.3"},sm:{[Qp.variable]:"sizes.4"},md:{[Qp.variable]:"sizes.6"},lg:{[Qp.variable]:"sizes.8"},xl:{[Qp.variable]:"sizes.12"}},yce={baseStyle:mce,sizes:gce,defaultProps:{size:"md"}},{defineMultiStyleConfig:xce,definePartsStyle:c7}=gi(qie.keys),vce={fontWeight:"medium"},bce={opacity:.8,marginBottom:"2"},_ce={verticalAlign:"baseline",fontWeight:"semibold"},wce={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},Sce=c7({container:{},label:vce,helpText:bce,number:_ce,icon:wce}),kce={md:c7({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},Cce=xce({baseStyle:Sce,sizes:kce,defaultProps:{size:"md"}}),{defineMultiStyleConfig:Tce,definePartsStyle:Yv}=gi(["stepper","step","title","description","indicator","separator","icon","number"]),Ph=$n("stepper-indicator-size"),Py=$n("stepper-icon-size"),Oy=$n("stepper-title-font-size"),Jv=$n("stepper-description-font-size"),Pv=$n("stepper-accent-color"),jce=Yv(({colorScheme:t})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[Pv.variable]:`colors.${t}.500`,_dark:{[Pv.variable]:`colors.${t}.200`}},title:{fontSize:Oy.reference,fontWeight:"medium"},description:{fontSize:Jv.reference,color:"chakra-subtle-text"},number:{fontSize:Oy.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:Py.reference,height:Py.reference},indicator:{flexShrink:0,borderRadius:"full",width:Ph.reference,height:Ph.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:Pv.reference},"&[data-status=complete]":{bg:Pv.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:Pv.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${Ph.reference} - 8px)`,top:`calc(${Ph.reference} + 4px)`,insetStart:`calc(${Ph.reference} / 2 - 1px)`}}})),Pce=Tce({baseStyle:jce,sizes:{xs:Yv({stepper:{[Ph.variable]:"sizes.4",[Py.variable]:"sizes.3",[Oy.variable]:"fontSizes.xs",[Jv.variable]:"fontSizes.xs"}}),sm:Yv({stepper:{[Ph.variable]:"sizes.6",[Py.variable]:"sizes.4",[Oy.variable]:"fontSizes.sm",[Jv.variable]:"fontSizes.xs"}}),md:Yv({stepper:{[Ph.variable]:"sizes.8",[Py.variable]:"sizes.5",[Oy.variable]:"fontSizes.md",[Jv.variable]:"fontSizes.sm"}}),lg:Yv({stepper:{[Ph.variable]:"sizes.10",[Py.variable]:"sizes.6",[Oy.variable]:"fontSizes.lg",[Jv.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Oce,definePartsStyle:dk}=gi(Qie.keys),Tb=Ms("switch-track-width"),xm=Ms("switch-track-height"),BP=Ms("switch-track-diff"),Ace=jh.subtract(Tb,xm),PE=Ms("switch-thumb-x"),Ov=Ms("switch-bg"),Ece=t=>{const{colorScheme:e}=t;return{borderRadius:"full",p:"0.5",width:[Tb.reference],height:[xm.reference],transitionProperty:"common",transitionDuration:"fast",[Ov.variable]:"colors.gray.300",_dark:{[Ov.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[Ov.variable]:`colors.${e}.500`,_dark:{[Ov.variable]:`colors.${e}.200`}},bg:Ov.reference}},zce={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[xm.reference],height:[xm.reference],_checked:{transform:`translateX(${PE.reference})`}},Ice=dk(t=>({container:{[BP.variable]:Ace,[PE.variable]:BP.reference,_rtl:{[PE.variable]:jh(BP).negate().toString()}},track:Ece(t),thumb:zce})),Mce={sm:dk({container:{[Tb.variable]:"1.375rem",[xm.variable]:"sizes.3"}}),md:dk({container:{[Tb.variable]:"1.875rem",[xm.variable]:"sizes.4"}}),lg:dk({container:{[Tb.variable]:"2.875rem",[xm.variable]:"sizes.6"}})},Rce=Oce({baseStyle:Ice,sizes:Mce,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Dce,definePartsStyle:Xy}=gi(Hie.keys),Lce=Xy({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),y2={"&[data-is-numeric=true]":{textAlign:"end"}},Fce=Xy(t=>{const{colorScheme:e}=t;return{th:{color:Fn("gray.600","gray.400")(t),borderBottom:"1px",borderColor:Fn(`${e}.100`,`${e}.700`)(t),...y2},td:{borderBottom:"1px",borderColor:Fn(`${e}.100`,`${e}.700`)(t),...y2},caption:{color:Fn("gray.600","gray.100")(t)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),Bce=Xy(t=>{const{colorScheme:e}=t;return{th:{color:Fn("gray.600","gray.400")(t),borderBottom:"1px",borderColor:Fn(`${e}.100`,`${e}.700`)(t),...y2},td:{borderBottom:"1px",borderColor:Fn(`${e}.100`,`${e}.700`)(t),...y2},caption:{color:Fn("gray.600","gray.100")(t)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:Fn(`${e}.100`,`${e}.700`)(t)},td:{background:Fn(`${e}.100`,`${e}.700`)(t)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),$ce={simple:Fce,striped:Bce,unstyled:{}},Nce={sm:Xy({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:Xy({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:Xy({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},Vce=Dce({baseStyle:Lce,variants:$ce,sizes:Nce,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),Ea=$n("tabs-color"),Mc=$n("tabs-bg"),oS=$n("tabs-border-color"),{defineMultiStyleConfig:Wce,definePartsStyle:$u}=gi(Gie.keys),Uce=t=>{const{orientation:e}=t;return{display:e==="vertical"?"flex":"block"}},qce=t=>{const{isFitted:e}=t;return{flex:e?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},Qce=t=>{const{align:e="start",orientation:n}=t;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[e],flexDirection:n==="vertical"?"column":"row"}},Hce={p:4},Gce=$u(t=>({root:Uce(t),tab:qce(t),tablist:Qce(t),tabpanel:Hce})),Xce={sm:$u({tab:{py:1,px:4,fontSize:"sm"}}),md:$u({tab:{fontSize:"md",py:2,px:4}}),lg:$u({tab:{fontSize:"lg",py:3,px:4}})},Kce=$u(t=>{const{colorScheme:e,orientation:n}=t,r=n==="vertical",i=r?"borderStart":"borderBottom",s=r?"marginStart":"marginBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",[s]:"-2px",_selected:{[Ea.variable]:`colors.${e}.600`,_dark:{[Ea.variable]:`colors.${e}.300`},borderColor:"currentColor"},_active:{[Mc.variable]:"colors.gray.200",_dark:{[Mc.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:Ea.reference,bg:Mc.reference}}}),Zce=$u(t=>{const{colorScheme:e}=t;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[oS.variable]:"transparent",_selected:{[Ea.variable]:`colors.${e}.600`,[oS.variable]:"colors.white",_dark:{[Ea.variable]:`colors.${e}.300`,[oS.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:oS.reference},color:Ea.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),Yce=$u(t=>{const{colorScheme:e}=t;return{tab:{border:"1px solid",borderColor:"inherit",[Mc.variable]:"colors.gray.50",_dark:{[Mc.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[Mc.variable]:"colors.white",[Ea.variable]:`colors.${e}.600`,_dark:{[Mc.variable]:"colors.gray.800",[Ea.variable]:`colors.${e}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:Ea.reference,bg:Mc.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),Jce=$u(t=>{const{colorScheme:e,theme:n}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:sa(n,`${e}.700`),bg:sa(n,`${e}.100`)}}}}),eue=$u(t=>{const{colorScheme:e}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",[Ea.variable]:"colors.gray.600",_dark:{[Ea.variable]:"inherit"},_selected:{[Ea.variable]:"colors.white",[Mc.variable]:`colors.${e}.600`,_dark:{[Ea.variable]:"colors.gray.800",[Mc.variable]:`colors.${e}.300`}},color:Ea.reference,bg:Mc.reference}}}),tue=$u({}),nue={line:Kce,enclosed:Zce,"enclosed-colored":Yce,"soft-rounded":Jce,"solid-rounded":eue,unstyled:tue},rue=Wce({baseStyle:Gce,sizes:Xce,variants:nue,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),{defineMultiStyleConfig:iue,definePartsStyle:vm}=gi(Xie.keys),W4=$n("tag-bg"),U4=$n("tag-color"),$P=$n("tag-shadow"),fk=$n("tag-min-height"),pk=$n("tag-min-width"),mk=$n("tag-font-size"),gk=$n("tag-padding-inline"),sue={fontWeight:"medium",lineHeight:1.2,outline:0,[U4.variable]:Yi.color.reference,[W4.variable]:Yi.bg.reference,[$P.variable]:Yi.shadow.reference,color:U4.reference,bg:W4.reference,boxShadow:$P.reference,borderRadius:"md",minH:fk.reference,minW:pk.reference,fontSize:mk.reference,px:gk.reference,_focusVisible:{[$P.variable]:"shadows.outline"}},oue={lineHeight:1.2,overflow:"visible"},aue={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},lue=vm({container:sue,label:oue,closeButton:aue}),cue={sm:vm({container:{[fk.variable]:"sizes.5",[pk.variable]:"sizes.5",[mk.variable]:"fontSizes.xs",[gk.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:vm({container:{[fk.variable]:"sizes.6",[pk.variable]:"sizes.6",[mk.variable]:"fontSizes.sm",[gk.variable]:"space.2"}}),lg:vm({container:{[fk.variable]:"sizes.8",[pk.variable]:"sizes.8",[mk.variable]:"fontSizes.md",[gk.variable]:"space.3"}})},uue={subtle:vm(t=>{var e;return{container:(e=Sb.variants)==null?void 0:e.subtle(t)}}),solid:vm(t=>{var e;return{container:(e=Sb.variants)==null?void 0:e.solid(t)}}),outline:vm(t=>{var e;return{container:(e=Sb.variants)==null?void 0:e.outline(t)}})},hue=iue({variants:uue,baseStyle:lue,sizes:cue,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}});var Z8;const due={...(Z8=Wr.baseStyle)==null?void 0:Z8.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"};var Y8;const fue={outline:t=>{var e;return((e=Wr.variants)==null?void 0:e.outline(t).field)??{}},flushed:t=>{var e;return((e=Wr.variants)==null?void 0:e.flushed(t).field)??{}},filled:t=>{var e;return((e=Wr.variants)==null?void 0:e.filled(t).field)??{}},unstyled:((Y8=Wr.variants)==null?void 0:Y8.unstyled.field)??{}};var J8,e9,t9,n9;const pue={xs:((J8=Wr.sizes)==null?void 0:J8.xs.field)??{},sm:((e9=Wr.sizes)==null?void 0:e9.sm.field)??{},md:((t9=Wr.sizes)==null?void 0:t9.md.field)??{},lg:((n9=Wr.sizes)==null?void 0:n9.lg.field)??{}},mue={baseStyle:due,sizes:pue,variants:fue,defaultProps:{size:"md",variant:"outline"}},aS=Ms("tooltip-bg"),NP=Ms("tooltip-fg"),gue=Ms("popper-arrow-bg"),yue={bg:aS.reference,color:NP.reference,[aS.variable]:"colors.gray.700",[NP.variable]:"colors.whiteAlpha.900",_dark:{[aS.variable]:"colors.gray.300",[NP.variable]:"colors.gray.900"},[gue.variable]:aS.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},xue={baseStyle:yue},vue={Accordion:ise,Alert:Nse,Avatar:Yse,Badge:Sb,Breadcrumb:loe,Button:yoe,Checkbox:Wd,CloseButton:zoe,Code:Doe,Container:Foe,Divider:Woe,Drawer:eae,Editable:aae,Form:fae,FormError:vae,FormLabel:_ae,Heading:kae,Input:Wr,Kbd:Mae,Link:Dae,List:Nae,Menu:Yae,Modal:cle,NumberInput:xle,PinInput:wle,Popover:Ile,Progress:Nle,Radio:Qle,Select:Jle,Skeleton:tce,SkipLink:rce,Slider:pce,Spinner:yce,Stat:Cce,Switch:Rce,Table:Vce,Tabs:rue,Tag:hue,Textarea:mue,Tooltip:xue,Card:woe,Stepper:Pce},bue={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},_ue={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},wue={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"}},Sue={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},kue={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},Cue={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},Tue={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},jue={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},Pue={property:Cue,easing:Tue,duration:jue},Oue={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},Aue={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},Eue={breakpoints:_ue,zIndices:Oue,radii:Sue,blur:Aue,colors:wue,...o7,sizes:e7,shadows:kue,space:JW,borders:bue,transition:Pue},zue={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},Iue={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},Mue=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function Rue(t){return mo(t)?Mue.every(e=>Object.prototype.hasOwnProperty.call(t,e)):!1}const Due="ltr",Lue={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},u7={semanticTokens:zue,direction:Due,...Eue,components:vue,styles:Iue,config:Lue};function Fue(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Bue(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var $ue=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Bue(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Fue(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Eo="-ms-",x2="-moz-",Br="-webkit-",h7="comm",QM="rule",HM="decl",Nue="@import",d7="@keyframes",Vue="@layer",Wue=Math.abs,RC=String.fromCharCode,Uue=Object.assign;function que(t,e){return lo(t,0)^45?(((e<<2^lo(t,0))<<2^lo(t,1))<<2^lo(t,2))<<2^lo(t,3):0}function f7(t){return t.trim()}function Que(t,e){return(t=e.exec(t))?t[0]:t}function $r(t,e,n){return t.replace(e,n)}function OE(t,e){return t.indexOf(e)}function lo(t,e){return t.charCodeAt(e)|0}function d1(t,e,n){return t.slice(e,n)}function Cu(t){return t.length}function GM(t){return t.length}function lS(t,e){return e.push(t),t}function Hue(t,e){return t.map(e).join("")}var DC=1,A0=1,p7=0,qa=0,us=0,ix="";function LC(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:DC,column:A0,length:o,return:""}}function Av(t,e){return Uue(LC("",null,null,"",null,null,0),t,{length:-t.length},e)}function Gue(){return us}function Xue(){return us=qa>0?lo(ix,--qa):0,A0--,us===10&&(A0=1,DC--),us}function vl(){return us=qa<p7?lo(ix,qa++):0,A0++,us===10&&(A0=1,DC++),us}function Nu(){return lo(ix,qa)}function yk(){return qa}function c_(t,e){return d1(ix,t,e)}function f1(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function m7(t){return DC=A0=1,p7=Cu(ix=t),qa=0,[]}function g7(t){return ix="",t}function xk(t){return f7(c_(qa-1,AE(t===91?t+2:t===40?t+1:t)))}function Kue(t){for(;(us=Nu())&&us<33;)vl();return f1(t)>2||f1(us)>3?"":" "}function Zue(t,e){for(;--e&&vl()&&!(us<48||us>102||us>57&&us<65||us>70&&us<97););return c_(t,yk()+(e<6&&Nu()==32&&vl()==32))}function AE(t){for(;vl();)switch(us){case t:return qa;case 34:case 39:t!==34&&t!==39&&AE(us);break;case 40:t===41&&AE(t);break;case 92:vl();break}return qa}function Yue(t,e){for(;vl()&&t+us!==57;)if(t+us===84&&Nu()===47)break;return"/*"+c_(e,qa-1)+"*"+RC(t===47?t:vl())}function Jue(t){for(;!f1(Nu());)vl();return c_(t,qa)}function ehe(t){return g7(vk("",null,null,null,[""],t=m7(t),0,[0],t))}function vk(t,e,n,r,i,s,o,a,h){for(var p=0,g=0,y=o,b=0,S=0,P=0,O=1,D=1,z=1,F=0,R="",N=i,Q=s,q=r,X=R;D;)switch(P=F,F=vl()){case 40:if(P!=108&&lo(X,y-1)==58){OE(X+=$r(xk(F),"&","&\f"),"&\f")!=-1&&(z=-1);break}case 34:case 39:case 91:X+=xk(F);break;case 9:case 10:case 13:case 32:X+=Kue(P);break;case 92:X+=Zue(yk()-1,7);continue;case 47:switch(Nu()){case 42:case 47:lS(the(Yue(vl(),yk()),e,n),h);break;default:X+="/"}break;case 123*O:a[p++]=Cu(X)*z;case 125*O:case 59:case 0:switch(F){case 0:case 125:D=0;case 59+g:z==-1&&(X=$r(X,/\f/g,"")),S>0&&Cu(X)-y&&lS(S>32?Q4(X+";",r,n,y-1):Q4($r(X," ","")+";",r,n,y-2),h);break;case 59:X+=";";default:if(lS(q=q4(X,e,n,p,g,i,a,R,N=[],Q=[],y),s),F===123)if(g===0)vk(X,e,q,q,N,s,y,a,Q);else switch(b===99&&lo(X,3)===110?100:b){case 100:case 108:case 109:case 115:vk(t,q,q,r&&lS(q4(t,q,q,0,0,i,a,R,i,N=[],y),Q),i,Q,y,a,r?N:Q);break;default:vk(X,q,q,q,[""],Q,0,a,Q)}}p=g=S=0,O=z=1,R=X="",y=o;break;case 58:y=1+Cu(X),S=P;default:if(O<1){if(F==123)--O;else if(F==125&&O++==0&&Xue()==125)continue}switch(X+=RC(F),F*O){case 38:z=g>0?1:(X+="\f",-1);break;case 44:a[p++]=(Cu(X)-1)*z,z=1;break;case 64:Nu()===45&&(X+=xk(vl())),b=Nu(),g=y=Cu(R=X+=Jue(yk())),F++;break;case 45:P===45&&Cu(X)==2&&(O=0)}}return s}function q4(t,e,n,r,i,s,o,a,h,p,g){for(var y=i-1,b=i===0?s:[""],S=GM(b),P=0,O=0,D=0;P<r;++P)for(var z=0,F=d1(t,y+1,y=Wue(O=o[P])),R=t;z<S;++z)(R=f7(O>0?b[z]+" "+F:$r(F,/&\f/g,b[z])))&&(h[D++]=R);return LC(t,e,n,i===0?QM:a,h,p,g)}function the(t,e,n){return LC(t,e,n,h7,RC(Gue()),d1(t,2,-2),0)}function Q4(t,e,n,r){return LC(t,e,n,HM,d1(t,0,r),d1(t,r+1,-1),r)}function Ky(t,e){for(var n="",r=GM(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function nhe(t,e,n,r){switch(t.type){case Vue:if(t.children.length)break;case Nue:case HM:return t.return=t.return||t.value;case h7:return"";case d7:return t.return=t.value+"{"+Ky(t.children,r)+"}";case QM:t.value=t.props.join(",")}return Cu(n=Ky(t.children,r))?t.return=t.value+"{"+n+"}":""}function rhe(t){var e=GM(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function ihe(t){return function(e){e.root||(e=e.return)&&t(e)}}var H4=function(e){var n=new WeakMap;return function(r){if(n.has(r))return n.get(r);var i=e(r);return n.set(r,i),i}};function y7(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var she=function(e,n,r){for(var i=0,s=0;i=s,s=Nu(),i===38&&s===12&&(n[r]=1),!f1(s);)vl();return c_(e,qa)},ohe=function(e,n){var r=-1,i=44;do switch(f1(i)){case 0:i===38&&Nu()===12&&(n[r]=1),e[r]+=she(qa-1,n,r);break;case 2:e[r]+=xk(i);break;case 4:if(i===44){e[++r]=Nu()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=RC(i)}while(i=vl());return e},ahe=function(e,n){return g7(ohe(m7(e),n))},G4=new WeakMap,lhe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!G4.get(r))&&!i){G4.set(e,!0);for(var s=[],o=ahe(n,s),a=r.props,h=0,p=0;h<o.length;h++)for(var g=0;g<a.length;g++,p++)e.props[p]=s[h]?o[h].replace(/&\f/g,a[g]):a[g]+" "+o[h]}}},che=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function x7(t,e){switch(que(t,e)){case 5103:return Br+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Br+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Br+t+x2+t+Eo+t+t;case 6828:case 4268:return Br+t+Eo+t+t;case 6165:return Br+t+Eo+"flex-"+t+t;case 5187:return Br+t+$r(t,/(\w+).+(:[^]+)/,Br+"box-$1$2"+Eo+"flex-$1$2")+t;case 5443:return Br+t+Eo+"flex-item-"+$r(t,/flex-|-self/,"")+t;case 4675:return Br+t+Eo+"flex-line-pack"+$r(t,/align-content|flex-|-self/,"")+t;case 5548:return Br+t+Eo+$r(t,"shrink","negative")+t;case 5292:return Br+t+Eo+$r(t,"basis","preferred-size")+t;case 6060:return Br+"box-"+$r(t,"-grow","")+Br+t+Eo+$r(t,"grow","positive")+t;case 4554:return Br+$r(t,/([^-])(transform)/g,"$1"+Br+"$2")+t;case 6187:return $r($r($r(t,/(zoom-|grab)/,Br+"$1"),/(image-set)/,Br+"$1"),t,"")+t;case 5495:case 3959:return $r(t,/(image-set\([^]*)/,Br+"$1$`$1");case 4968:return $r($r(t,/(.+:)(flex-)?(.*)/,Br+"box-pack:$3"+Eo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Br+t+t;case 4095:case 3583:case 4068:case 2532:return $r(t,/(.+)-inline(.+)/,Br+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Cu(t)-1-e>6)switch(lo(t,e+1)){case 109:if(lo(t,e+4)!==45)break;case 102:return $r(t,/(.+:)(.+)-([^]+)/,"$1"+Br+"$2-$3$1"+x2+(lo(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~OE(t,"stretch")?x7($r(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(lo(t,e+1)!==115)break;case 6444:switch(lo(t,Cu(t)-3-(~OE(t,"!important")&&10))){case 107:return $r(t,":",":"+Br)+t;case 101:return $r(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Br+(lo(t,14)===45?"inline-":"")+"box$3$1"+Br+"$2$3$1"+Eo+"$2box$3")+t}break;case 5936:switch(lo(t,e+11)){case 114:return Br+t+Eo+$r(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Br+t+Eo+$r(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Br+t+Eo+$r(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Br+t+Eo+t+t}return t}var uhe=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case HM:e.return=x7(e.value,e.length);break;case d7:return Ky([Av(e,{value:$r(e.value,"@","@"+Br)})],i);case QM:if(e.length)return Hue(e.props,function(s){switch(Que(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ky([Av(e,{props:[$r(s,/:(read-\w+)/,":"+x2+"$1")]})],i);case"::placeholder":return Ky([Av(e,{props:[$r(s,/:(plac\w+)/,":"+Br+"input-$1")]}),Av(e,{props:[$r(s,/:(plac\w+)/,":"+x2+"$1")]}),Av(e,{props:[$r(s,/:(plac\w+)/,Eo+"input-$1")]})],i)}return""})}},hhe=[uhe],dhe=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(O){var D=O.getAttribute("data-emotion");D.indexOf(" ")!==-1&&(document.head.appendChild(O),O.setAttribute("data-s",""))})}var i=e.stylisPlugins||hhe,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(O){for(var D=O.getAttribute("data-emotion").split(" "),z=1;z<D.length;z++)s[D[z]]=!0;a.push(O)});var h,p=[lhe,che];{var g,y=[nhe,ihe(function(O){g.insert(O)})],b=rhe(p.concat(i,y)),S=function(D){return Ky(ehe(D),b)};h=function(D,z,F,R){g=F,S(D?D+"{"+z.styles+"}":z.styles),R&&(P.inserted[z.name]=!0)}}var P={key:n,sheet:new $ue({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:h};return P.sheet.hydrate(a),P};function If(){return If=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},If.apply(null,arguments)}var v7={exports:{}},Jr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Js=typeof Symbol=="function"&&Symbol.for,XM=Js?Symbol.for("react.element"):60103,KM=Js?Symbol.for("react.portal"):60106,FC=Js?Symbol.for("react.fragment"):60107,BC=Js?Symbol.for("react.strict_mode"):60108,$C=Js?Symbol.for("react.profiler"):60114,NC=Js?Symbol.for("react.provider"):60109,VC=Js?Symbol.for("react.context"):60110,ZM=Js?Symbol.for("react.async_mode"):60111,WC=Js?Symbol.for("react.concurrent_mode"):60111,UC=Js?Symbol.for("react.forward_ref"):60112,qC=Js?Symbol.for("react.suspense"):60113,fhe=Js?Symbol.for("react.suspense_list"):60120,QC=Js?Symbol.for("react.memo"):60115,HC=Js?Symbol.for("react.lazy"):60116,phe=Js?Symbol.for("react.block"):60121,mhe=Js?Symbol.for("react.fundamental"):60117,ghe=Js?Symbol.for("react.responder"):60118,yhe=Js?Symbol.for("react.scope"):60119;function Pl(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case XM:switch(t=t.type,t){case ZM:case WC:case FC:case $C:case BC:case qC:return t;default:switch(t=t&&t.$$typeof,t){case VC:case UC:case HC:case QC:case NC:return t;default:return e}}case KM:return e}}}function b7(t){return Pl(t)===WC}Jr.AsyncMode=ZM;Jr.ConcurrentMode=WC;Jr.ContextConsumer=VC;Jr.ContextProvider=NC;Jr.Element=XM;Jr.ForwardRef=UC;Jr.Fragment=FC;Jr.Lazy=HC;Jr.Memo=QC;Jr.Portal=KM;Jr.Profiler=$C;Jr.StrictMode=BC;Jr.Suspense=qC;Jr.isAsyncMode=function(t){return b7(t)||Pl(t)===ZM};Jr.isConcurrentMode=b7;Jr.isContextConsumer=function(t){return Pl(t)===VC};Jr.isContextProvider=function(t){return Pl(t)===NC};Jr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===XM};Jr.isForwardRef=function(t){return Pl(t)===UC};Jr.isFragment=function(t){return Pl(t)===FC};Jr.isLazy=function(t){return Pl(t)===HC};Jr.isMemo=function(t){return Pl(t)===QC};Jr.isPortal=function(t){return Pl(t)===KM};Jr.isProfiler=function(t){return Pl(t)===$C};Jr.isStrictMode=function(t){return Pl(t)===BC};Jr.isSuspense=function(t){return Pl(t)===qC};Jr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===FC||t===WC||t===$C||t===BC||t===qC||t===fhe||typeof t=="object"&&t!==null&&(t.$$typeof===HC||t.$$typeof===QC||t.$$typeof===NC||t.$$typeof===VC||t.$$typeof===UC||t.$$typeof===mhe||t.$$typeof===ghe||t.$$typeof===yhe||t.$$typeof===phe)};Jr.typeOf=Pl;v7.exports=Jr;var xhe=v7.exports,_7=xhe,vhe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},bhe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},w7={};w7[_7.ForwardRef]=vhe;w7[_7.Memo]=bhe;var _he=!0;function S7(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var YM=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||_he===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},JM=function(e,n,r){YM(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function whe(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var She={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},khe=/[A-Z]|^ms/g,Che=/_EMO_([^_]+?)_([^]*?)_EMO_/g,k7=function(e){return e.charCodeAt(1)===45},X4=function(e){return e!=null&&typeof e!="boolean"},VP=y7(function(t){return k7(t)?t:t.replace(khe,"-$&").toLowerCase()}),K4=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Che,function(r,i,s){return Tu={name:i,styles:s,next:Tu},i})}return She[e]!==1&&!k7(e)&&typeof n=="number"&&n!==0?n+"px":n};function p1(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Tu={name:i.name,styles:i.styles,next:Tu},i.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)Tu={name:o.name,styles:o.styles,next:Tu},o=o.next;var a=s.styles+";";return a}return The(t,e,n)}case"function":{if(t!==void 0){var h=Tu,p=n(t);return Tu=h,p1(t,e,p)}break}}var g=n;if(e==null)return g;var y=e[g];return y!==void 0?y:g}function The(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=p1(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?r+=s+"{"+e[a]+"}":X4(a)&&(r+=VP(s)+":"+K4(s,a)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var h=0;h<o.length;h++)X4(o[h])&&(r+=VP(s)+":"+K4(s,o[h])+";");else{var p=p1(t,e,o);switch(s){case"animation":case"animationName":{r+=VP(s)+":"+p+";";break}default:r+=s+"{"+p+"}"}}}return r}var Z4=/label:\s*([^\s;{]+)\s*(;|$)/g,Tu;function GC(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Tu=void 0;var s=t[0];if(s==null||s.raw===void 0)r=!1,i+=p1(n,e,s);else{var o=s;i+=o[0]}for(var a=1;a<t.length;a++)if(i+=p1(n,e,t[a]),r){var h=s;i+=h[a]}Z4.lastIndex=0;for(var p="",g;(g=Z4.exec(i))!==null;)p+="-"+g[1];var y=whe(i)+p;return{name:y,styles:i,next:Tu}}var jhe=function(e){return e()},C7=p3.useInsertionEffect?p3.useInsertionEffect:!1,T7=C7||jhe,Y4=C7||L.useLayoutEffect,e5=L.createContext(typeof HTMLElement<"u"?dhe({key:"css"}):null);e5.Provider;var Phe=function(){return L.useContext(e5)},t5=function(e){return L.forwardRef(function(n,r){var i=L.useContext(e5);return e(n,i,r)})},E0=L.createContext({}),Ohe=function(e,n){if(typeof n=="function"){var r=n(e);return r}return If({},e,n)},Ahe=H4(function(t){return H4(function(e){return Ohe(t,e)})}),Ehe=function(e){var n=L.useContext(E0);return e.theme!==n&&(n=Ahe(n)(e.theme)),L.createElement(E0.Provider,{value:n},e.children)},n5={}.hasOwnProperty,EE="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",zhe=function(e,n){var r={};for(var i in n)n5.call(n,i)&&(r[i]=n[i]);return r[EE]=e,r},Ihe=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return YM(n,r,i),T7(function(){return JM(n,r,i)}),null},Mhe=t5(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[EE],s=[r],o="";typeof t.className=="string"?o=S7(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var a=GC(s,void 0,L.useContext(E0));o+=e.key+"-"+a.name;var h={};for(var p in t)n5.call(t,p)&&p!=="css"&&p!==EE&&(h[p]=t[p]);return h.className=o,n&&(h.ref=n),L.createElement(L.Fragment,null,L.createElement(Ihe,{cache:e,serialized:a,isStringTag:typeof i=="string"}),L.createElement(i,h))}),Rhe=Mhe,J4=function(e,n){var r=arguments;if(n==null||!n5.call(n,"css"))return L.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=Rhe,s[1]=zhe(e,n);for(var o=2;o<i;o++)s[o]=r[o];return L.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(J4||(J4={}));var XC=t5(function(t,e){var n=t.styles,r=GC([n],void 0,L.useContext(E0)),i=L.useRef();return Y4(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,h=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),h!==null&&(a=!0,h.setAttribute("data-emotion",s),o.hydrate([h])),i.current=[o,a],function(){o.flush()}},[e]),Y4(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&JM(e,r.next,!0),o.tags.length){var h=o.tags[o.tags.length-1].nextElementSibling;o.before=h,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function Nc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return GC(e)}function bo(){var t=Nc.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}const r5=L.createContext({});r5.displayName="ColorModeContext";function KC(){const t=L.useContext(r5);if(t===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return t}function Et(t,e){const{colorMode:n}=KC();return n==="dark"?e:t}const cS={light:"chakra-ui-light",dark:"chakra-ui-dark"};function Dhe(t={}){const{preventTransition:e=!0,nonce:n}=t,r={setDataset:i=>{const s=e?r.preventTransition():void 0;document.documentElement.dataset.theme=i,document.documentElement.style.colorScheme=i,s==null||s()},setClassName(i){document.body.classList.add(i?cS.dark:cS.light),document.body.classList.remove(i?cS.light:cS.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(i){return r.query().matches??i==="dark"?"dark":"light"},addListener(i){const s=r.query(),o=a=>{i(a.matches?"dark":"light")};return typeof s.addListener=="function"?s.addListener(o):s.addEventListener("change",o),()=>{typeof s.removeListener=="function"?s.removeListener(o):s.removeEventListener("change",o)}},preventTransition(){const i=document.createElement("style");return i.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),n!==void 0&&(i.nonce=n),document.head.appendChild(i),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(i)})})}}};return r}const Lhe="chakra-ui-color-mode";function Fhe(t){return{ssr:!1,type:"localStorage",get(e){if(!(globalThis!=null&&globalThis.document))return e;let n;try{n=localStorage.getItem(t)||e}catch{}return n||e},set(e){try{localStorage.setItem(t,e)}catch{}}}}const Bhe=Fhe(Lhe),eF=()=>{},$he=dne()?L.useLayoutEffect:L.useEffect;function tF(t,e){return t.type==="cookie"&&t.ssr?t.get(e):e}const j7=function(e){const{value:n,children:r,options:{useSystemColorMode:i,initialColorMode:s,disableTransitionOnChange:o}={},colorModeManager:a=Bhe}=e,h=Phe(),p=s==="dark"?"dark":"light",[g,y]=L.useState(()=>tF(a,p)),[b,S]=L.useState(()=>tF(a)),{getSystemTheme:P,setClassName:O,setDataset:D,addListener:z}=L.useMemo(()=>Dhe({preventTransition:o,nonce:h==null?void 0:h.nonce}),[o,h==null?void 0:h.nonce]),F=s==="system"&&!g?b:g,R=L.useCallback(q=>{const X=q==="system"?P():q;y(X),O(X==="dark"),D(X),a.set(X)},[a,P,O,D]);$he(()=>{s==="system"&&S(P())},[]),L.useEffect(()=>{const q=a.get();if(q){R(q);return}if(s==="system"){R("system");return}R(p)},[a,p,s,R]);const N=L.useCallback(()=>{R(F==="dark"?"light":"dark")},[F,R]);L.useEffect(()=>{if(i)return z(R)},[i,z,R]);const Q=L.useMemo(()=>({colorMode:n??F,toggleColorMode:n?eF:N,setColorMode:n?eF:R,forced:n!==void 0}),[F,N,R,n]);return u.jsx(r5.Provider,{value:Q,children:r})};j7.displayName="ColorModeProvider";const P7=String.raw,O7=P7`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,Nhe=()=>u.jsx(XC,{styles:O7}),Vhe=({scope:t=""})=>u.jsx(XC,{styles:P7`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${t} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${t} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${t} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${t} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${t} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${t} :where(b, strong) {
        font-weight: bold;
      }

      ${t} small {
        font-size: 80%;
      }

      ${t} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${t} sub {
        bottom: -0.25em;
      }

      ${t} sup {
        top: -0.5em;
      }

      ${t} img {
        border-style: none;
      }

      ${t} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${t} :where(button, input) {
        overflow: visible;
      }

      ${t} :where(button, select) {
        text-transform: none;
      }

      ${t} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${t} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${t} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${t} progress {
        vertical-align: baseline;
      }

      ${t} textarea {
        overflow: auto;
      }

      ${t} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${t} input[type="number"]::-webkit-inner-spin-button,
      ${t} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${t} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${t} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${t} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${t} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${t} details {
        display: block;
      }

      ${t} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${t} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${t} button {
        background: transparent;
        padding: 0;
      }

      ${t} fieldset {
        margin: 0;
        padding: 0;
      }

      ${t} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${t} textarea {
        resize: vertical;
      }

      ${t} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${t} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${t} table {
        border-collapse: collapse;
      }

      ${t} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${t} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${t} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${t} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${t} select::-ms-expand {
        display: none;
      }

      ${O7}
    `});function Whe(t){const{cssVarsRoot:e,theme:n,children:r}=t,i=L.useMemo(()=>Cie(n),[n]);return u.jsxs(Ehe,{theme:i,children:[u.jsx(Uhe,{root:e}),r]})}function Uhe({root:t=":host, :root"}){const e=[t,"[data-theme]"].join(",");return u.jsx(XC,{styles:n=>({[e]:n.__cssVars})})}Or({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function qhe(t){return Or({name:`${t}StylesContext`,errorMessage:`useStyles: "styles" is undefined. Seems you forgot to wrap the components in "<${t} />" `})}function Qhe(){const{colorMode:t}=KC();return u.jsx(XC,{styles:e=>{const n=IW(e,"styles.global"),r=pl(n,{theme:e,colorMode:t});return r?XW(r)(e):void 0}})}const[Hhe,Ghe]=Or({strict:!1,name:"PortalManagerContext"});function A7(t){const{children:e,zIndex:n}=t;return u.jsx(Hhe,{value:{zIndex:n},children:e})}A7.displayName="PortalManager";const E7=L.createContext({getDocument(){return document},getWindow(){return window}});E7.displayName="EnvironmentContext";function z7(t){const{children:e,environment:n,disabled:r}=t,i=L.useRef(null),s=L.useMemo(()=>n||{getDocument:()=>{var a;return((a=i.current)==null?void 0:a.ownerDocument)??document},getWindow:()=>{var a;return((a=i.current)==null?void 0:a.ownerDocument.defaultView)??window}},[n]),o=!r||!n;return u.jsxs(E7.Provider,{value:s,children:[e,o&&u.jsx("span",{id:"__chakra_env",hidden:!0,ref:i})]})}z7.displayName="EnvironmentProvider";const Xhe=t=>{const{children:e,colorModeManager:n,portalZIndex:r,resetScope:i,resetCSS:s=!0,theme:o={},environment:a,cssVarsRoot:h,disableEnvironment:p,disableGlobalStyle:g}=t,y=u.jsx(z7,{environment:a,disabled:p,children:e});return u.jsx(Whe,{theme:o,cssVarsRoot:h,children:u.jsxs(j7,{colorModeManager:n,options:o.config,children:[s?u.jsx(Vhe,{scope:i}):u.jsx(Nhe,{}),!g&&u.jsx(Qhe,{}),r?u.jsx(A7,{zIndex:r,children:y}):y]})})},I7=L.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),ZC=L.createContext({}),u_=L.createContext(null),YC=typeof document<"u",i5=YC?L.useLayoutEffect:L.useEffect,M7=L.createContext({strict:!1}),s5=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Khe="framerAppearId",R7="data-"+s5(Khe);function Zhe(t,e,n,r){const{visualElement:i}=L.useContext(ZC),s=L.useContext(M7),o=L.useContext(u_),a=L.useContext(I7).reducedMotion,h=L.useRef();r=r||s.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const p=h.current;L.useInsertionEffect(()=>{p&&p.update(n,o)});const g=L.useRef(!!(n[R7]&&!window.HandoffComplete));return i5(()=>{p&&(p.render(),g.current&&p.animationState&&p.animationState.animateChanges())}),L.useEffect(()=>{p&&(p.updateFeatures(),!g.current&&p.animationState&&p.animationState.animateChanges(),g.current&&(g.current=!1,window.HandoffComplete=!0))}),p}function Ay(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Yhe(t,e,n){return L.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ay(n)&&(n.current=r))},[e])}function m1(t){return typeof t=="string"||Array.isArray(t)}function JC(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const o5=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],a5=["initial",...o5];function eT(t){return JC(t.animate)||a5.some(e=>m1(t[e]))}function D7(t){return!!(eT(t)||t.variants)}function Jhe(t,e){if(eT(t)){const{initial:n,animate:r}=t;return{initial:n===!1||m1(n)?n:void 0,animate:m1(r)?r:void 0}}return t.inherit!==!1?e:{}}function ede(t){const{initial:e,animate:n}=Jhe(t,L.useContext(ZC));return L.useMemo(()=>({initial:e,animate:n}),[nF(e),nF(n)])}function nF(t){return Array.isArray(t)?t.join(" "):t}const rF={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},g1={};for(const t in rF)g1[t]={isEnabled:e=>rF[t].some(n=>!!e[n])};function tde(t){for(const e in t)g1[e]={...g1[e],...t[e]}}const l5=L.createContext({}),L7=L.createContext({}),nde=Symbol.for("motionComponentSymbol");function rde({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&tde(t);function s(a,h){let p;const g={...L.useContext(I7),...a,layoutId:ide(a)},{isStatic:y}=g,b=ede(a),S=r(a,y);if(!y&&YC){b.visualElement=Zhe(i,S,g,e);const P=L.useContext(L7),O=L.useContext(M7).strict;b.visualElement&&(p=b.visualElement.loadFeatures(g,O,t,P))}return L.createElement(ZC.Provider,{value:b},p&&b.visualElement?L.createElement(p,{visualElement:b.visualElement,...g}):null,n(i,a,Yhe(S,b.visualElement,h),S,y,b.visualElement))}const o=L.forwardRef(s);return o[nde]=i,o}function ide({layoutId:t}){const e=L.useContext(l5).id;return e&&t!==void 0?e+"-"+t:t}function sde(t){function e(r,i={}){return rde(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const ode=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function c5(t){return typeof t!="string"||t.includes("-")?!1:!!(ode.indexOf(t)>-1||/[A-Z]/.test(t))}const v2={};function ade(t){Object.assign(v2,t)}const h_=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],eg=new Set(h_);function F7(t,{layout:e,layoutId:n}){return eg.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!v2[t]||t==="opacity")}const Qa=t=>!!(t&&t.getVelocity),lde={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cde=h_.length;function ude(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<cde;o++){const a=h_[o];if(t[a]!==void 0){const h=lde[a]||a;s+=`${h}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const B7=t=>e=>typeof e=="string"&&e.startsWith(t),$7=B7("--"),zE=B7("var(--"),hde=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,dde=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Mf=(t,e,n)=>Math.min(Math.max(n,t),e),tg={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},jb={...tg,transform:t=>Mf(0,1,t)},uS={...tg,default:1},Pb=t=>Math.round(t*1e5)/1e5,tT=/(-)?([\d]*\.?[\d])+/g,N7=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,fde=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function d_(t){return typeof t=="string"}const f_=t=>({test:e=>d_(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Bd=f_("deg"),Vu=f_("%"),Wn=f_("px"),pde=f_("vh"),mde=f_("vw"),iF={...Vu,parse:t=>Vu.parse(t)/100,transform:t=>Vu.transform(t*100)},sF={...tg,transform:Math.round},V7={borderWidth:Wn,borderTopWidth:Wn,borderRightWidth:Wn,borderBottomWidth:Wn,borderLeftWidth:Wn,borderRadius:Wn,radius:Wn,borderTopLeftRadius:Wn,borderTopRightRadius:Wn,borderBottomRightRadius:Wn,borderBottomLeftRadius:Wn,width:Wn,maxWidth:Wn,height:Wn,maxHeight:Wn,size:Wn,top:Wn,right:Wn,bottom:Wn,left:Wn,padding:Wn,paddingTop:Wn,paddingRight:Wn,paddingBottom:Wn,paddingLeft:Wn,margin:Wn,marginTop:Wn,marginRight:Wn,marginBottom:Wn,marginLeft:Wn,rotate:Bd,rotateX:Bd,rotateY:Bd,rotateZ:Bd,scale:uS,scaleX:uS,scaleY:uS,scaleZ:uS,skew:Bd,skewX:Bd,skewY:Bd,distance:Wn,translateX:Wn,translateY:Wn,translateZ:Wn,x:Wn,y:Wn,z:Wn,perspective:Wn,transformPerspective:Wn,opacity:jb,originX:iF,originY:iF,originZ:Wn,zIndex:sF,fillOpacity:jb,strokeOpacity:jb,numOctaves:sF};function u5(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let h=!1,p=!1,g=!0;for(const y in e){const b=e[y];if($7(y)){s[y]=b;continue}const S=V7[y],P=dde(b,S);if(eg.has(y)){if(h=!0,o[y]=P,!g)continue;b!==(S.default||0)&&(g=!1)}else y.startsWith("origin")?(p=!0,a[y]=P):i[y]=P}if(e.transform||(h||r?i.transform=ude(t.transform,n,g,r):i.transform&&(i.transform="none")),p){const{originX:y="50%",originY:b="50%",originZ:S=0}=a;i.transformOrigin=`${y} ${b} ${S}`}}const h5=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function W7(t,e,n){for(const r in e)!Qa(e[r])&&!F7(r,n)&&(t[r]=e[r])}function gde({transformTemplate:t},e,n){return L.useMemo(()=>{const r=h5();return u5(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function yde(t,e,n){const r=t.style||{},i={};return W7(i,r,t),Object.assign(i,gde(t,e,n)),t.transformValues?t.transformValues(i):i}function xde(t,e,n){const r={},i=yde(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const vde=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function b2(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||vde.has(t)}let U7=t=>!b2(t);function bde(t){t&&(U7=e=>e.startsWith("on")?!b2(e):t(e))}try{bde(require("@emotion/is-prop-valid").default)}catch{}function _de(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(U7(i)||n===!0&&b2(i)||!e&&!b2(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function oF(t,e,n){return typeof t=="string"?t:Wn.transform(e+n*t)}function wde(t,e,n){const r=oF(e,t.x,t.width),i=oF(n,t.y,t.height);return`${r} ${i}`}const Sde={offset:"stroke-dashoffset",array:"stroke-dasharray"},kde={offset:"strokeDashoffset",array:"strokeDasharray"};function Cde(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Sde:kde;t[s.offset]=Wn.transform(-r);const o=Wn.transform(e),a=Wn.transform(n);t[s.array]=`${o} ${a}`}function d5(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:h=0,...p},g,y,b){if(u5(t,p,g,b),y){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:S,style:P,dimensions:O}=t;S.transform&&(O&&(P.transform=S.transform),delete S.transform),O&&(i!==void 0||s!==void 0||P.transform)&&(P.transformOrigin=wde(O,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(S.x=e),n!==void 0&&(S.y=n),r!==void 0&&(S.scale=r),o!==void 0&&Cde(S,o,a,h,!1)}const q7=()=>({...h5(),attrs:{}}),f5=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Tde(t,e,n,r){const i=L.useMemo(()=>{const s=q7();return d5(s,e,{enableHardwareAcceleration:!1},f5(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};W7(s,t.style,t),i.style={...s,...i.style}}return i}function jde(t=!1){return(n,r,i,{latestValues:s},o)=>{const h=(c5(n)?Tde:xde)(r,s,o,n),g={..._de(r,typeof n=="string",t),...h,ref:i},{children:y}=r,b=L.useMemo(()=>Qa(y)?y.get():y,[y]);return L.createElement(n,{...g,children:b})}}function Q7(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const H7=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function G7(t,e,n,r){Q7(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(H7.has(i)?i:s5(i),e.attrs[i])}function p5(t,e){const{style:n}=t,r={};for(const i in n)(Qa(n[i])||e.style&&Qa(e.style[i])||F7(i,t))&&(r[i]=n[i]);return r}function X7(t,e){const n=p5(t,e);for(const r in t)if(Qa(t[r])||Qa(e[r])){const i=h_.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function m5(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function K7(t){const e=L.useRef(null);return e.current===null&&(e.current=t()),e.current}const _2=t=>Array.isArray(t),Pde=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Ode=t=>_2(t)?t[t.length-1]||0:t;function bk(t){const e=Qa(t)?t.get():t;return Pde(e)?e.toValue():e}function Ade({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:Ede(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const Z7=t=>(e,n)=>{const r=L.useContext(ZC),i=L.useContext(u_),s=()=>Ade(t,e,r,i);return n?s():K7(s)};function Ede(t,e,n,r){const i={},s=r(t,{});for(const b in s)i[b]=bk(s[b]);let{initial:o,animate:a}=t;const h=eT(t),p=D7(t);e&&p&&!h&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let g=n?n.initial===!1:!1;g=g||o===!1;const y=g?a:o;return y&&typeof y!="boolean"&&!JC(y)&&(Array.isArray(y)?y:[y]).forEach(S=>{const P=m5(t,S);if(!P)return;const{transitionEnd:O,transition:D,...z}=P;for(const F in z){let R=z[F];if(Array.isArray(R)){const N=g?R.length-1:0;R=R[N]}R!==null&&(i[F]=R)}for(const F in O)i[F]=O[F]}),i}const Zi=t=>t;class aF{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function zde(t){let e=new aF,n=new aF,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(h,p=!1,g=!1)=>{const y=g&&i,b=y?e:n;return p&&o.add(h),b.add(h)&&y&&i&&(r=e.order.length),h},cancel:h=>{n.remove(h),o.delete(h)},process:h=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let p=0;p<r;p++){const g=e.order[p];g(h),o.has(g)&&(a.schedule(g),t())}i=!1,s&&(s=!1,a.process(h))}};return a}const hS=["prepare","read","update","preRender","render","postRender"],Ide=40;function Mde(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=hS.reduce((y,b)=>(y[b]=zde(()=>n=!0),y),{}),o=y=>s[y].process(i),a=()=>{const y=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,Ide),1),i.timestamp=y,i.isProcessing=!0,hS.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},h=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:hS.reduce((y,b)=>{const S=s[b];return y[b]=(P,O=!1,D=!1)=>(n||h(),S.schedule(P,O,D)),y},{}),cancel:y=>hS.forEach(b=>s[b].cancel(y)),state:i,steps:s}}const{schedule:pi,cancel:Qh,state:Io,steps:WP}=Mde(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zi,!0),Rde={useVisualState:Z7({scrapeMotionValuesFromProps:X7,createRenderState:q7,onMount:(t,e,{renderState:n,latestValues:r})=>{pi.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),pi.render(()=>{d5(n,r,{enableHardwareAcceleration:!1},f5(e.tagName),t.transformTemplate),G7(e,n)})}})},Dde={useVisualState:Z7({scrapeMotionValuesFromProps:p5,createRenderState:h5})};function Lde(t,{forwardMotionProps:e=!1},n,r){return{...c5(t)?Rde:Dde,preloadedFeatures:n,useRender:jde(e),createVisualElement:r,Component:t}}function Mh(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Y7=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function nT(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const Fde=t=>e=>Y7(e)&&t(e,nT(e));function Fh(t,e,n,r){return Mh(t,e,Fde(n),r)}const Bde=(t,e)=>n=>e(t(n)),Sf=(...t)=>t.reduce(Bde);function J7(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const lF=J7("dragHorizontal"),cF=J7("dragVertical");function eU(t){let e=!1;if(t==="y")e=cF();else if(t==="x")e=lF();else{const n=lF(),r=cF();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function tU(){const t=eU(!0);return t?(t(),!1):!0}class Jf{constructor(e){this.isMounted=!1,this.node=e}update(){}}function uF(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||tU())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&pi.update(()=>a[r](s,o))};return Fh(t.current,n,i,{passive:!t.getProps()[r]})}class $de extends Jf{mount(){this.unmount=Sf(uF(this.node,!0),uF(this.node,!1))}unmount(){}}class Nde extends Jf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Sf(Mh(this.node.current,"focus",()=>this.onFocus()),Mh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const nU=(t,e)=>e?t===e?!0:nU(t,e.parentElement):!1;function UP(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,nT(n))}class Vde extends Jf{constructor(){super(...arguments),this.removeStartListeners=Zi,this.removeEndListeners=Zi,this.removeAccessibleListeners=Zi,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Fh(window,"pointerup",(a,h)=>{if(!this.checkPressEnd())return;const{onTap:p,onTapCancel:g,globalTapTarget:y}=this.node.getProps();pi.update(()=>{!y&&!nU(this.node.current,a.target)?g&&g(a,h):p&&p(a,h)})},{passive:!(r.onTap||r.onPointerUp)}),o=Fh(window,"pointercancel",(a,h)=>this.cancelPress(a,h),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Sf(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||UP("up",(h,p)=>{const{onTap:g}=this.node.getProps();g&&pi.update(()=>g(h,p))})};this.removeEndListeners(),this.removeEndListeners=Mh(this.node.current,"keyup",o),UP("down",(a,h)=>{this.startPress(a,h)})},n=Mh(this.node.current,"keydown",e),r=()=>{this.isPressing&&UP("cancel",(s,o)=>this.cancelPress(s,o))},i=Mh(this.node.current,"blur",r);this.removeAccessibleListeners=Sf(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&pi.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!tU()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&pi.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Fh(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Mh(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Sf(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const IE=new WeakMap,qP=new WeakMap,Wde=t=>{const e=IE.get(t.target);e&&e(t)},Ude=t=>{t.forEach(Wde)};function qde({root:t,...e}){const n=t||document;qP.has(n)||qP.set(n,{});const r=qP.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Ude,{root:t,...e})),r[i]}function Qde(t,e,n){const r=qde(e);return IE.set(t,n),r.observe(t),()=>{IE.delete(t),r.unobserve(t)}}const Hde={some:0,all:1};class Gde extends Jf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Hde[i]},a=h=>{const{isIntersecting:p}=h;if(this.isInView===p||(this.isInView=p,s&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),b=p?g:y;b&&b(h)};return Qde(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Xde(e,n))&&this.startObserver()}unmount(){}}function Xde({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Kde={inView:{Feature:Gde},tap:{Feature:Vde},focus:{Feature:Nde},hover:{Feature:$de}};function rU(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Zde(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function Yde(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function rT(t,e,n){const r=t.getProps();return m5(r,e,n!==void 0?n:r.custom,Zde(t),Yde(t))}let g5=Zi;const bm=t=>t*1e3,Bh=t=>t/1e3,Jde={current:!1},iU=t=>Array.isArray(t)&&typeof t[0]=="number";function sU(t){return!!(!t||typeof t=="string"&&oU[t]||iU(t)||Array.isArray(t)&&t.every(sU))}const eb=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,oU={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:eb([0,.65,.55,1]),circOut:eb([.55,0,1,.45]),backIn:eb([.31,.01,.66,-.59]),backOut:eb([.33,1.53,.69,.99])};function aU(t){if(t)return iU(t)?eb(t):Array.isArray(t)?t.map(aU):oU[t]}function efe(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:h}={}){const p={[e]:n};h&&(p.offset=h);const g=aU(a);return Array.isArray(g)&&(p.easing=g),t.animate(p,{delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function tfe(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const lU=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,nfe=1e-7,rfe=12;function ife(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=lU(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>nfe&&++a<rfe);return o}function p_(t,e,n,r){if(t===e&&n===r)return Zi;const i=s=>ife(s,0,1,t,n);return s=>s===0||s===1?s:lU(i(s),e,r)}const sfe=p_(.42,0,1,1),ofe=p_(0,0,.58,1),cU=p_(.42,0,.58,1),afe=t=>Array.isArray(t)&&typeof t[0]!="number",uU=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,hU=t=>e=>1-t(1-e),y5=t=>1-Math.sin(Math.acos(t)),dU=hU(y5),lfe=uU(y5),fU=p_(.33,1.53,.69,.99),x5=hU(fU),cfe=uU(x5),ufe=t=>(t*=2)<1?.5*x5(t):.5*(2-Math.pow(2,-10*(t-1))),hfe={linear:Zi,easeIn:sfe,easeInOut:cU,easeOut:ofe,circIn:y5,circInOut:lfe,circOut:dU,backIn:x5,backInOut:cfe,backOut:fU,anticipate:ufe},hF=t=>{if(Array.isArray(t)){g5(t.length===4);const[e,n,r,i]=t;return p_(e,n,r,i)}else if(typeof t=="string")return hfe[t];return t},v5=(t,e)=>n=>!!(d_(n)&&fde.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),pU=(t,e,n)=>r=>{if(!d_(r))return r;const[i,s,o,a]=r.match(tT);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},dfe=t=>Mf(0,255,t),QP={...tg,transform:t=>Math.round(dfe(t))},em={test:v5("rgb","red"),parse:pU("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+QP.transform(t)+", "+QP.transform(e)+", "+QP.transform(n)+", "+Pb(jb.transform(r))+")"};function ffe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const ME={test:v5("#"),parse:ffe,transform:em.transform},Ey={test:v5("hsl","hue"),parse:pU("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Vu.transform(Pb(e))+", "+Vu.transform(Pb(n))+", "+Pb(jb.transform(r))+")"},Yo={test:t=>em.test(t)||ME.test(t)||Ey.test(t),parse:t=>em.test(t)?em.parse(t):Ey.test(t)?Ey.parse(t):ME.parse(t),transform:t=>d_(t)?t:t.hasOwnProperty("red")?em.transform(t):Ey.transform(t)},Ri=(t,e,n)=>-n*t+n*e+t;function HP(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function pfe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,h=2*n-a;i=HP(h,a,t+1/3),s=HP(h,a,t),o=HP(h,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const GP=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},mfe=[ME,em,Ey],gfe=t=>mfe.find(e=>e.test(t));function dF(t){const e=gfe(t);let n=e.parse(t);return e===Ey&&(n=pfe(n)),n}const mU=(t,e)=>{const n=dF(t),r=dF(e),i={...n};return s=>(i.red=GP(n.red,r.red,s),i.green=GP(n.green,r.green,s),i.blue=GP(n.blue,r.blue,s),i.alpha=Ri(n.alpha,r.alpha,s),em.transform(i))};function yfe(t){var e,n;return isNaN(t)&&d_(t)&&(((e=t.match(tT))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(N7))===null||n===void 0?void 0:n.length)||0)>0}const gU={regex:hde,countKey:"Vars",token:"${v}",parse:Zi},yU={regex:N7,countKey:"Colors",token:"${c}",parse:Yo.parse},xU={regex:tT,countKey:"Numbers",token:"${n}",parse:tg.parse};function XP(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function w2(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&XP(n,gU),XP(n,yU),XP(n,xU),n}function vU(t){return w2(t).values}function bU(t){const{values:e,numColors:n,numVars:r,tokenised:i}=w2(t),s=e.length;return o=>{let a=i;for(let h=0;h<s;h++)h<r?a=a.replace(gU.token,o[h]):h<r+n?a=a.replace(yU.token,Yo.transform(o[h])):a=a.replace(xU.token,Pb(o[h]));return a}}const xfe=t=>typeof t=="number"?0:t;function vfe(t){const e=vU(t);return bU(t)(e.map(xfe))}const Rf={test:yfe,parse:vU,createTransformer:bU,getAnimatableNone:vfe},_U=(t,e)=>n=>`${n>0?e:t}`;function wU(t,e){return typeof t=="number"?n=>Ri(t,e,n):Yo.test(t)?mU(t,e):t.startsWith("var(")?_U(t,e):kU(t,e)}const SU=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>wU(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},bfe=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=wU(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},kU=(t,e)=>{const n=Rf.createTransformer(e),r=w2(t),i=w2(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Sf(SU(r.values,i.values),n):_U(t,e)},y1=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},fF=(t,e)=>n=>Ri(t,e,n);function _fe(t){return typeof t=="number"?fF:typeof t=="string"?Yo.test(t)?mU:kU:Array.isArray(t)?SU:typeof t=="object"?bfe:fF}function wfe(t,e,n){const r=[],i=n||_fe(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const h=Array.isArray(e)?e[o]||Zi:e;a=Sf(h,a)}r.push(a)}return r}function CU(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(g5(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=wfe(e,r,i),a=o.length,h=p=>{let g=0;if(a>1)for(;g<t.length-2&&!(p<t[g+1]);g++);const y=y1(t[g],t[g+1],p);return o[g](y)};return n?p=>h(Mf(t[0],t[s-1],p)):h}function Sfe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=y1(0,e,r);t.push(Ri(n,1,i))}}function kfe(t){const e=[0];return Sfe(e,t.length-1),e}function Cfe(t,e){return t.map(n=>n*e)}function Tfe(t,e){return t.map(()=>e||cU).splice(0,t.length-1)}function S2({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=afe(r)?r.map(hF):hF(r),s={done:!1,value:e[0]},o=Cfe(n&&n.length===e.length?n:kfe(e),t),a=CU(o,e,{ease:Array.isArray(i)?i:Tfe(e,i)});return{calculatedDuration:t,next:h=>(s.value=a(h),s.done=h>=t,s)}}function TU(t,e){return e?t*(1e3/e):0}const jfe=5;function jU(t,e,n){const r=Math.max(e-jfe,0);return TU(n-t(r),e-r)}const KP=.001,Pfe=.01,Ofe=10,Afe=.05,Efe=1;function zfe({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=Mf(Afe,Efe,o),t=Mf(Pfe,Ofe,Bh(t)),o<1?(i=p=>{const g=p*o,y=g*t,b=g-n,S=RE(p,o),P=Math.exp(-y);return KP-b/S*P},s=p=>{const y=p*o*t,b=y*n+n,S=Math.pow(o,2)*Math.pow(p,2)*t,P=Math.exp(-y),O=RE(Math.pow(p,2),o);return(-i(p)+KP>0?-1:1)*((b-S)*P)/O}):(i=p=>{const g=Math.exp(-p*t),y=(p-n)*t+1;return-KP+g*y},s=p=>{const g=Math.exp(-p*t),y=(n-p)*(t*t);return g*y});const a=5/t,h=Mfe(i,s,a);if(t=bm(t),isNaN(h))return{stiffness:100,damping:10,duration:t};{const p=Math.pow(h,2)*r;return{stiffness:p,damping:o*2*Math.sqrt(r*p),duration:t}}}const Ife=12;function Mfe(t,e,n){let r=n;for(let i=1;i<Ife;i++)r=r-t(r)/e(r);return r}function RE(t,e){return t*Math.sqrt(1-e*e)}const Rfe=["duration","bounce"],Dfe=["stiffness","damping","mass"];function pF(t,e){return e.some(n=>t[n]!==void 0)}function Lfe(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!pF(t,Dfe)&&pF(t,Rfe)){const n=zfe(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function PU({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:h,mass:p,duration:g,velocity:y,isResolvedFromDuration:b}=Lfe({...r,velocity:-Bh(r.velocity||0)}),S=y||0,P=h/(2*Math.sqrt(a*p)),O=s-i,D=Bh(Math.sqrt(a/p)),z=Math.abs(O)<5;n||(n=z?.01:2),e||(e=z?.005:.5);let F;if(P<1){const R=RE(D,P);F=N=>{const Q=Math.exp(-P*D*N);return s-Q*((S+P*D*O)/R*Math.sin(R*N)+O*Math.cos(R*N))}}else if(P===1)F=R=>s-Math.exp(-D*R)*(O+(S+D*O)*R);else{const R=D*Math.sqrt(P*P-1);F=N=>{const Q=Math.exp(-P*D*N),q=Math.min(R*N,300);return s-Q*((S+P*D*O)*Math.sinh(q)+R*O*Math.cosh(q))/R}}return{calculatedDuration:b&&g||null,next:R=>{const N=F(R);if(b)o.done=R>=g;else{let Q=S;R!==0&&(P<1?Q=jU(F,R,N):Q=0);const q=Math.abs(Q)<=n,X=Math.abs(s-N)<=e;o.done=q&&X}return o.value=o.done?s:N,o}}}function mF({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:h,restDelta:p=.5,restSpeed:g}){const y=t[0],b={done:!1,value:y},S=K=>a!==void 0&&K<a||h!==void 0&&K>h,P=K=>a===void 0?h:h===void 0||Math.abs(a-K)<Math.abs(h-K)?a:h;let O=n*e;const D=y+O,z=o===void 0?D:o(D);z!==D&&(O=z-y);const F=K=>-O*Math.exp(-K/r),R=K=>z+F(K),N=K=>{const ne=F(K),J=R(K);b.done=Math.abs(ne)<=p,b.value=b.done?z:J};let Q,q;const X=K=>{S(b.value)&&(Q=K,q=PU({keyframes:[b.value,P(b.value)],velocity:jU(R,K,b.value),damping:i,stiffness:s,restDelta:p,restSpeed:g}))};return X(0),{calculatedDuration:null,next:K=>{let ne=!1;return!q&&Q===void 0&&(ne=!0,N(K),X(K)),Q!==void 0&&K>Q?q.next(K-Q):(!ne&&N(K),b)}}}const Ffe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>pi.update(e,!0),stop:()=>Qh(e),now:()=>Io.isProcessing?Io.timestamp:performance.now()}},gF=2e4;function yF(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<gF;)e+=n,r=t.next(e);return e>=gF?1/0:e}const Bfe={decay:mF,inertia:mF,tween:S2,keyframes:S2,spring:PU};function k2({autoplay:t=!0,delay:e=0,driver:n=Ffe,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:h,onStop:p,onComplete:g,onUpdate:y,...b}){let S=1,P=!1,O,D;const z=()=>{D=new Promise(Re=>{O=Re})};z();let F;const R=Bfe[i]||S2;let N;R!==S2&&typeof r[0]!="number"&&(N=CU([0,100],r,{clamp:!1}),r=[0,100]);const Q=R({...b,keyframes:r});let q;a==="mirror"&&(q=R({...b,keyframes:[...r].reverse(),velocity:-(b.velocity||0)}));let X="idle",K=null,ne=null,J=null;Q.calculatedDuration===null&&s&&(Q.calculatedDuration=yF(Q));const{calculatedDuration:ae}=Q;let Ee=1/0,Ce=1/0;ae!==null&&(Ee=ae+o,Ce=Ee*(s+1)-o);let $e=0;const We=Re=>{if(ne===null)return;S>0&&(ne=Math.min(ne,Re)),S<0&&(ne=Math.min(Re-Ce/S,ne)),K!==null?$e=K:$e=Math.round(Re-ne)*S;const Oe=$e-e*(S>=0?1:-1),oe=S>=0?Oe<0:Oe>Ce;$e=Math.max(Oe,0),X==="finished"&&K===null&&($e=Ce);let nt=$e,Ne=Q;if(s){const At=Math.min($e,Ce)/Ee;let Ot=Math.floor(At),bt=At%1;!bt&&At>=1&&(bt=1),bt===1&&Ot--,Ot=Math.min(Ot,s+1),!!(Ot%2)&&(a==="reverse"?(bt=1-bt,o&&(bt-=o/Ee)):a==="mirror"&&(Ne=q)),nt=Mf(0,1,bt)*Ee}const tt=oe?{done:!1,value:r[0]}:Ne.next(nt);N&&(tt.value=N(tt.value));let{done:Ye}=tt;!oe&&ae!==null&&(Ye=S>=0?$e>=Ce:$e<=0);const _t=K===null&&(X==="finished"||X==="running"&&Ye);return y&&y(tt.value),_t&&Ie(),tt},Fe=()=>{F&&F.stop(),F=void 0},we=()=>{X="idle",Fe(),O(),z(),ne=J=null},Ie=()=>{X="finished",g&&g(),Fe(),O()},Qe=()=>{if(P)return;F||(F=n(We));const Re=F.now();h&&h(),K!==null?ne=Re-K:(!ne||X==="finished")&&(ne=Re),X==="finished"&&z(),J=ne,K=null,X="running",F.start()};t&&Qe();const se={then(Re,Oe){return D.then(Re,Oe)},get time(){return Bh($e)},set time(Re){Re=bm(Re),$e=Re,K!==null||!F||S===0?K=Re:ne=F.now()-Re/S},get duration(){const Re=Q.calculatedDuration===null?yF(Q):Q.calculatedDuration;return Bh(Re)},get speed(){return S},set speed(Re){Re===S||!F||(S=Re,se.time=Bh($e))},get state(){return X},play:Qe,pause:()=>{X="paused",K=$e},stop:()=>{P=!0,X!=="idle"&&(X="idle",p&&p(),we())},cancel:()=>{J!==null&&We(J),we()},complete:()=>{X="finished"},sample:Re=>(ne=0,We(Re))};return se}function $fe(t){let e;return()=>(e===void 0&&(e=t()),e)}const Nfe=$fe(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Vfe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),dS=10,Wfe=2e4,Ufe=(t,e)=>e.type==="spring"||t==="backgroundColor"||!sU(e.ease);function qfe(t,e,{onUpdate:n,onComplete:r,...i}){if(!(Nfe()&&Vfe.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,h,p=!1;const g=()=>{h=new Promise(R=>{a=R})};g();let{keyframes:y,duration:b=300,ease:S,times:P}=i;if(Ufe(e,i)){const R=k2({...i,repeat:0,delay:0});let N={done:!1,value:y[0]};const Q=[];let q=0;for(;!N.done&&q<Wfe;)N=R.sample(q),Q.push(N.value),q+=dS;P=void 0,y=Q,b=q-dS,S="linear"}const O=efe(t.owner.current,e,y,{...i,duration:b,ease:S,times:P}),D=()=>{p=!1,O.cancel()},z=()=>{p=!0,pi.update(D),a(),g()};return O.onfinish=()=>{p||(t.set(tfe(y,i)),r&&r(),z())},{then(R,N){return h.then(R,N)},attachTimeline(R){return O.timeline=R,O.onfinish=null,Zi},get time(){return Bh(O.currentTime||0)},set time(R){O.currentTime=bm(R)},get speed(){return O.playbackRate},set speed(R){O.playbackRate=R},get duration(){return Bh(b)},play:()=>{o||(O.play(),Qh(D))},pause:()=>O.pause(),stop:()=>{if(o=!0,O.playState==="idle")return;const{currentTime:R}=O;if(R){const N=k2({...i,autoplay:!1});t.setWithVelocity(N.sample(R-dS).value,N.sample(R).value,dS)}z()},complete:()=>{p||O.finish()},cancel:z}}function Qfe({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Zi,pause:Zi,stop:Zi,then:s=>(s(),Promise.resolve()),cancel:Zi,complete:Zi});return e?k2({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const Hfe={type:"spring",stiffness:500,damping:25,restSpeed:10},Gfe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Xfe={type:"keyframes",duration:.8},Kfe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Zfe=(t,{keyframes:e})=>e.length>2?Xfe:eg.has(t)?t.startsWith("scale")?Gfe(e[1]):Hfe:Kfe,DE=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Rf.test(e)||e==="0")&&!e.startsWith("url(")),Yfe=new Set(["brightness","contrast","saturate","opacity"]);function Jfe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(tT)||[];if(!r)return t;const i=n.replace(r,"");let s=Yfe.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const epe=/([a-z-]*)\(.*?\)/g,LE={...Rf,getAnimatableNone:t=>{const e=t.match(epe);return e?e.map(Jfe).join(" "):t}},tpe={...V7,color:Yo,backgroundColor:Yo,outlineColor:Yo,fill:Yo,stroke:Yo,borderColor:Yo,borderTopColor:Yo,borderRightColor:Yo,borderBottomColor:Yo,borderLeftColor:Yo,filter:LE,WebkitFilter:LE},b5=t=>tpe[t];function OU(t,e){let n=b5(t);return n!==LE&&(n=Rf),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const AU=t=>/^0[^.\s]+$/.test(t);function npe(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||AU(t)}function rpe(t,e,n,r){const i=DE(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const h=[];for(let p=0;p<s.length;p++)s[p]===null&&(s[p]=p===0?o:s[p-1]),npe(s[p])&&h.push(p),typeof s[p]=="string"&&s[p]!=="none"&&s[p]!=="0"&&(a=s[p]);if(i&&h.length&&a)for(let p=0;p<h.length;p++){const g=h[p];s[g]=OU(e,a)}return s}function ipe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:h,elapsed:p,...g}){return!!Object.keys(g).length}function _5(t,e){return t[e]||t.default||t}const spe={skipAnimations:!1},w5=(t,e,n,r={})=>i=>{const s=_5(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-bm(o);const h=rpe(e,t,n,s),p=h[0],g=h[h.length-1],y=DE(t,p),b=DE(t,g);let S={keyframes:h,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:P=>{e.set(P),s.onUpdate&&s.onUpdate(P)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(ipe(s)||(S={...S,...Zfe(t,S)}),S.duration&&(S.duration=bm(S.duration)),S.repeatDelay&&(S.repeatDelay=bm(S.repeatDelay)),!y||!b||Jde.current||s.type===!1||spe.skipAnimations)return Qfe(S);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const P=qfe(e,t,S);if(P)return P}return k2(S)};function C2(t){return!!(Qa(t)&&t.add)}const EU=t=>/^\-?\d*\.?\d+$/.test(t);function S5(t,e){t.indexOf(e)===-1&&t.push(e)}function k5(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class C5{constructor(){this.subscriptions=[]}add(e){return S5(this.subscriptions,e),()=>k5(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ope=t=>!isNaN(parseFloat(t));class ape{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=Io;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,pi.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>pi.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=ope(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new C5);const r=this.events[e].add(n);return e==="change"?()=>{r(),pi.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?TU(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function z0(t,e){return new ape(t,e)}const zU=t=>e=>e.test(t),lpe={test:t=>t==="auto",parse:t=>t},IU=[tg,Wn,Vu,Bd,mde,pde,lpe],Ev=t=>IU.find(zU(t)),cpe=[...IU,Yo,Rf],upe=t=>cpe.find(zU(t));function hpe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,z0(n))}function dpe(t,e){const n=rT(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=Ode(s[o]);hpe(t,o,a)}}function fpe(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const h=s[a],p=e[h];let g=null;Array.isArray(p)&&(g=p[0]),g===null&&(g=(i=(r=n[h])!==null&&r!==void 0?r:t.readValue(h))!==null&&i!==void 0?i:e[h]),g!=null&&(typeof g=="string"&&(EU(g)||AU(g))?g=parseFloat(g):!upe(g)&&Rf.test(p)&&(g=OU(h,p)),t.addValue(h,z0(g,{owner:t})),n[h]===void 0&&(n[h]=g),g!==null&&t.setBaseTarget(h,g))}}function ppe(t,e){return e?(e[t]||e.default||e).from:void 0}function mpe(t,e,n){const r={};for(const i in t){const s=ppe(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function gpe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function ype(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function MU(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const h=t.getValue("willChange");r&&(s=r);const p=[],g=i&&t.animationState&&t.animationState.getState()[i];for(const y in a){const b=t.getValue(y),S=a[y];if(!b||S===void 0||g&&gpe(g,y))continue;const P={delay:n,elapsed:0,..._5(s||{},y)};if(window.HandoffAppearAnimations){const z=t.getProps()[R7];if(z){const F=window.HandoffAppearAnimations(z,y,b,pi);F!==null&&(P.elapsed=F,P.isHandoff=!0)}}let O=!P.isHandoff&&!ype(b,S);if(P.type==="spring"&&(b.getVelocity()||P.velocity)&&(O=!1),b.animation&&(O=!1),O)continue;b.start(w5(y,b,S,t.shouldReduceMotion&&eg.has(y)?{type:!1}:P));const D=b.animation;C2(h)&&(h.add(y),D.then(()=>h.remove(y))),p.push(D)}return o&&Promise.all(p).then(()=>{o&&dpe(t,o)}),p}function FE(t,e,n={}){const r=rT(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(MU(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:y}=i;return xpe(t,e,p+h,g,y,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[h,p]=a==="beforeChildren"?[s,o]:[o,s];return h().then(()=>p())}else return Promise.all([s(),o(n.delay)])}function xpe(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,h=i===1?(p=0)=>p*r:(p=0)=>a-p*r;return Array.from(t.variantChildren).sort(vpe).forEach((p,g)=>{p.notify("AnimationStart",e),o.push(FE(p,e,{...s,delay:n+h(g)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(o)}function vpe(t,e){return t.sortNodePosition(e)}function bpe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>FE(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=FE(t,e,n);else{const i=typeof e=="function"?rT(t,e,n.custom):e;r=Promise.all(MU(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const _pe=[...o5].reverse(),wpe=o5.length;function Spe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>bpe(t,n,r)))}function kpe(t){let e=Spe(t);const n=Tpe();let r=!0;const i=(h,p)=>{const g=rT(t,p);if(g){const{transition:y,transitionEnd:b,...S}=g;h={...h,...S,...b}}return h};function s(h){e=h(t)}function o(h,p){const g=t.getProps(),y=t.getVariantContext(!0)||{},b=[],S=new Set;let P={},O=1/0;for(let z=0;z<wpe;z++){const F=_pe[z],R=n[F],N=g[F]!==void 0?g[F]:y[F],Q=m1(N),q=F===p?R.isActive:null;q===!1&&(O=z);let X=N===y[F]&&N!==g[F]&&Q;if(X&&r&&t.manuallyAnimateOnMount&&(X=!1),R.protectedKeys={...P},!R.isActive&&q===null||!N&&!R.prevProp||JC(N)||typeof N=="boolean")continue;let ne=Cpe(R.prevProp,N)||F===p&&R.isActive&&!X&&Q||z>O&&Q,J=!1;const ae=Array.isArray(N)?N:[N];let Ee=ae.reduce(i,{});q===!1&&(Ee={});const{prevResolvedValues:Ce={}}=R,$e={...Ce,...Ee},We=Fe=>{ne=!0,S.has(Fe)&&(J=!0,S.delete(Fe)),R.needsAnimating[Fe]=!0};for(const Fe in $e){const we=Ee[Fe],Ie=Ce[Fe];if(P.hasOwnProperty(Fe))continue;let Qe=!1;_2(we)&&_2(Ie)?Qe=!rU(we,Ie):Qe=we!==Ie,Qe?we!==void 0?We(Fe):S.add(Fe):we!==void 0&&S.has(Fe)?We(Fe):R.protectedKeys[Fe]=!0}R.prevProp=N,R.prevResolvedValues=Ee,R.isActive&&(P={...P,...Ee}),r&&t.blockInitialAnimation&&(ne=!1),ne&&(!X||J)&&b.push(...ae.map(Fe=>({animation:Fe,options:{type:F,...h}})))}if(S.size){const z={};S.forEach(F=>{const R=t.getBaseTarget(F);R!==void 0&&(z[F]=R)}),b.push({animation:z})}let D=!!b.length;return r&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(D=!1),r=!1,D?e(b):Promise.resolve()}function a(h,p,g){var y;if(n[h].isActive===p)return Promise.resolve();(y=t.variantChildren)===null||y===void 0||y.forEach(S=>{var P;return(P=S.animationState)===null||P===void 0?void 0:P.setActive(h,p)}),n[h].isActive=p;const b=o(g,h);for(const S in n)n[S].protectedKeys={};return b}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function Cpe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!rU(e,t):!1}function Rp(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Tpe(){return{animate:Rp(!0),whileInView:Rp(),whileHover:Rp(),whileTap:Rp(),whileDrag:Rp(),whileFocus:Rp(),exit:Rp()}}class jpe extends Jf{constructor(e){super(e),e.animationState||(e.animationState=kpe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),JC(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Ppe=0;class Ope extends Jf{constructor(){super(...arguments),this.id=Ppe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Ape={animation:{Feature:jpe},exit:{Feature:Ope}},xF=(t,e)=>Math.abs(t-e);function Epe(t,e){const n=xF(t.x,e.x),r=xF(t.y,e.y);return Math.sqrt(n**2+r**2)}class RU{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=YP(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,S=Epe(y.offset,{x:0,y:0})>=3;if(!b&&!S)return;const{point:P}=y,{timestamp:O}=Io;this.history.push({...P,timestamp:O});const{onStart:D,onMove:z}=this.handlers;b||(D&&D(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,y)},this.handlePointerMove=(y,b)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=ZP(b,this.transformPagePoint),pi.update(this.updatePoint,!0)},this.handlePointerUp=(y,b)=>{this.end();const{onEnd:S,onSessionEnd:P,resumeAnimation:O}=this.handlers;if(this.dragSnapToOrigin&&O&&O(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=YP(y.type==="pointercancel"?this.lastMoveEventInfo:ZP(b,this.transformPagePoint),this.history);this.startEvent&&S&&S(y,D),P&&P(y,D)},!Y7(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=nT(e),a=ZP(o,this.transformPagePoint),{point:h}=a,{timestamp:p}=Io;this.history=[{...h,timestamp:p}];const{onSessionStart:g}=n;g&&g(e,YP(a,this.history)),this.removeListeners=Sf(Fh(this.contextWindow,"pointermove",this.handlePointerMove),Fh(this.contextWindow,"pointerup",this.handlePointerUp),Fh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Qh(this.updatePoint)}}function ZP(t,e){return e?{point:e(t.point)}:t}function vF(t,e){return{x:t.x-e.x,y:t.y-e.y}}function YP({point:t},e){return{point:t,delta:vF(t,DU(e)),offset:vF(t,zpe(e)),velocity:Ipe(e,.1)}}function zpe(t){return t[0]}function DU(t){return t[t.length-1]}function Ipe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=DU(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>bm(e)));)n--;if(!r)return{x:0,y:0};const s=Bh(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function wl(t){return t.max-t.min}function BE(t,e=0,n=.01){return Math.abs(t-e)<=n}function bF(t,e,n,r=.5){t.origin=r,t.originPoint=Ri(e.min,e.max,t.origin),t.scale=wl(n)/wl(e),(BE(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Ri(n.min,n.max,t.origin)-t.originPoint,(BE(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Ob(t,e,n,r){bF(t.x,e.x,n.x,r?r.originX:void 0),bF(t.y,e.y,n.y,r?r.originY:void 0)}function _F(t,e,n){t.min=n.min+e.min,t.max=t.min+wl(e)}function Mpe(t,e,n){_F(t.x,e.x,n.x),_F(t.y,e.y,n.y)}function wF(t,e,n){t.min=e.min-n.min,t.max=t.min+wl(e)}function Ab(t,e,n){wF(t.x,e.x,n.x),wF(t.y,e.y,n.y)}function Rpe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ri(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ri(n,t,r.max):Math.min(t,n)),t}function SF(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Dpe(t,{top:e,left:n,bottom:r,right:i}){return{x:SF(t.x,n,i),y:SF(t.y,e,r)}}function kF(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Lpe(t,e){return{x:kF(t.x,e.x),y:kF(t.y,e.y)}}function Fpe(t,e){let n=.5;const r=wl(t),i=wl(e);return i>r?n=y1(e.min,e.max-r,t.min):r>i&&(n=y1(t.min,t.max-i,e.min)),Mf(0,1,n)}function Bpe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const $E=.35;function $pe(t=$E){return t===!1?t=0:t===!0&&(t=$E),{x:CF(t,"left","right"),y:CF(t,"top","bottom")}}function CF(t,e,n){return{min:TF(t,e),max:TF(t,n)}}function TF(t,e){return typeof t=="number"?t:t[e]||0}const jF=()=>({translate:0,scale:1,origin:0,originPoint:0}),zy=()=>({x:jF(),y:jF()}),PF=()=>({min:0,max:0}),ls=()=>({x:PF(),y:PF()});function Nl(t){return[t("x"),t("y")]}function LU({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Npe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Vpe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function JP(t){return t===void 0||t===1}function NE({scale:t,scaleX:e,scaleY:n}){return!JP(t)||!JP(e)||!JP(n)}function Np(t){return NE(t)||FU(t)||t.z||t.rotate||t.rotateX||t.rotateY}function FU(t){return OF(t.x)||OF(t.y)}function OF(t){return t&&t!=="0%"}function T2(t,e,n){const r=t-n,i=e*r;return n+i}function AF(t,e,n,r,i){return i!==void 0&&(t=T2(t,i,r)),T2(t,n,r)+e}function VE(t,e=0,n=1,r,i){t.min=AF(t.min,e,n,r,i),t.max=AF(t.max,e,n,r,i)}function BU(t,{x:e,y:n}){VE(t.x,e.translate,e.scale,e.originPoint),VE(t.y,n.translate,n.scale,n.originPoint)}function Wpe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const h=s.instance;h&&h.style&&h.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Iy(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,BU(t,o)),r&&Np(s.latestValues)&&Iy(t,s.latestValues))}e.x=EF(e.x),e.y=EF(e.y)}function EF(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ud(t,e){t.min=t.min+e,t.max=t.max+e}function zF(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=Ri(t.min,t.max,s);VE(t,e[n],e[r],o,e.scale)}const Upe=["x","scaleX","originX"],qpe=["y","scaleY","originY"];function Iy(t,e){zF(t.x,e,Upe),zF(t.y,e,qpe)}function $U(t,e){return LU(Vpe(t.getBoundingClientRect(),e))}function Qpe(t,e,n){const r=$U(t,n),{scroll:i}=e;return i&&(Ud(r.x,i.offset.x),Ud(r.y,i.offset.y)),r}const NU=({current:t})=>t?t.ownerDocument.defaultView:null,Hpe=new WeakMap;class Gpe{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ls(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=g=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(nT(g,"page").point)},s=(g,y)=>{const{drag:b,dragPropagation:S,onDragStart:P}=this.getProps();if(b&&!S&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=eU(b),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Nl(D=>{let z=this.getAxisMotionValue(D).get()||0;if(Vu.test(z)){const{projection:F}=this.visualElement;if(F&&F.layout){const R=F.layout.layoutBox[D];R&&(z=wl(R)*(parseFloat(z)/100))}}this.originPoint[D]=z}),P&&pi.update(()=>P(g,y),!1,!0);const{animationState:O}=this.visualElement;O&&O.setActive("whileDrag",!0)},o=(g,y)=>{const{dragPropagation:b,dragDirectionLock:S,onDirectionLock:P,onDrag:O}=this.getProps();if(!b&&!this.openGlobalLock)return;const{offset:D}=y;if(S&&this.currentDirection===null){this.currentDirection=Xpe(D),this.currentDirection!==null&&P&&P(this.currentDirection);return}this.updateAxis("x",y.point,D),this.updateAxis("y",y.point,D),this.visualElement.render(),O&&O(g,y)},a=(g,y)=>this.stop(g,y),h=()=>Nl(g=>{var y;return this.getAnimationState(g)==="paused"&&((y=this.getAxisMotionValue(g).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new RU(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:NU(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&pi.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!fS(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Rpe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ay(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=Dpe(i.layoutBox,n):this.constraints=!1,this.elastic=$pe(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Nl(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=Bpe(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ay(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Qpe(r,i.root,this.visualElement.getTransformPagePoint());let o=Lpe(i.layout.layoutBox,s);if(n){const a=n(Npe(o));this.hasMutatedConstraints=!!a,a&&(o=LU(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),h=this.constraints||{},p=Nl(g=>{if(!fS(g,n,this.currentDirection))return;let y=h&&h[g]||{};o&&(y={min:0,max:0});const b=i?200:1e6,S=i?40:1e7,P={type:"inertia",velocity:r?e[g]:0,bounceStiffness:b,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...s,...y};return this.startAxisValueAnimation(g,P)});return Promise.all(p).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(w5(e,r,0,n))}stopAnimation(){Nl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Nl(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Nl(n=>{const{drag:r}=this.getProps();if(!fS(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Ri(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ay(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Nl(o=>{const a=this.getAxisMotionValue(o);if(a){const h=a.get();i[o]=Fpe({min:h,max:h},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Nl(o=>{if(!fS(o,e,null))return;const a=this.getAxisMotionValue(o),{min:h,max:p}=this.constraints[o];a.set(Ri(h,p,i[o]))})}addListeners(){if(!this.visualElement.current)return;Hpe.set(this.visualElement,this);const e=this.visualElement.current,n=Fh(e,"pointerdown",h=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(h)}),r=()=>{const{dragConstraints:h}=this.getProps();Ay(h)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Mh(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p})=>{this.isDragging&&p&&(Nl(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=h[g].translate,y.set(y.get()+h[g].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=$E,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function fS(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Xpe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Kpe extends Jf{constructor(e){super(e),this.removeGroupControls=Zi,this.removeListeners=Zi,this.controls=new Gpe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zi}unmount(){this.removeGroupControls(),this.removeListeners()}}const IF=t=>(e,n)=>{t&&pi.update(()=>t(e,n))};class Zpe extends Jf{constructor(){super(...arguments),this.removePointerDownListener=Zi}onPointerDown(e){this.session=new RU(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:NU(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:IF(e),onStart:IF(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&pi.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=Fh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function VU(){const t=L.useContext(u_);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=L.useId();return L.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}function Ype(){return Jpe(L.useContext(u_))}function Jpe(t){return t===null?!0:t.isPresent}const _k={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function MF(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const zv={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Wn.test(t))t=parseFloat(t);else return t;const n=MF(t,e.target.x),r=MF(t,e.target.y);return`${n}% ${r}%`}},eme={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Rf.parse(t);if(i.length>5)return r;const s=Rf.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,h=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=h;const p=Ri(a,h,.5);return typeof i[2+o]=="number"&&(i[2+o]/=p),typeof i[3+o]=="number"&&(i[3+o]/=p),s(i)}};class tme extends Gi.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;ade(nme),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),_k.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||pi.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function WU(t){const[e,n]=VU(),r=L.useContext(l5);return Gi.createElement(tme,{...t,layoutGroup:r,switchLayoutGroup:L.useContext(L7),isPresent:e,safeToRemove:n})}const nme={borderRadius:{...zv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zv,borderTopRightRadius:zv,borderBottomLeftRadius:zv,borderBottomRightRadius:zv,boxShadow:eme},UU=["TopLeft","TopRight","BottomLeft","BottomRight"],rme=UU.length,RF=t=>typeof t=="string"?parseFloat(t):t,DF=t=>typeof t=="number"||Wn.test(t);function ime(t,e,n,r,i,s){i?(t.opacity=Ri(0,n.opacity!==void 0?n.opacity:1,sme(r)),t.opacityExit=Ri(e.opacity!==void 0?e.opacity:1,0,ome(r))):s&&(t.opacity=Ri(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<rme;o++){const a=`border${UU[o]}Radius`;let h=LF(e,a),p=LF(n,a);if(h===void 0&&p===void 0)continue;h||(h=0),p||(p=0),h===0||p===0||DF(h)===DF(p)?(t[a]=Math.max(Ri(RF(h),RF(p),r),0),(Vu.test(p)||Vu.test(h))&&(t[a]+="%")):t[a]=p}(e.rotate||n.rotate)&&(t.rotate=Ri(e.rotate||0,n.rotate||0,r))}function LF(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const sme=qU(0,.5,dU),ome=qU(.5,.95,Zi);function qU(t,e,n){return r=>r<t?0:r>e?1:n(y1(t,e,r))}function FF(t,e){t.min=e.min,t.max=e.max}function Bl(t,e){FF(t.x,e.x),FF(t.y,e.y)}function BF(t,e,n,r,i){return t-=e,t=T2(t,1/n,r),i!==void 0&&(t=T2(t,1/i,r)),t}function ame(t,e=0,n=1,r=.5,i,s=t,o=t){if(Vu.test(e)&&(e=parseFloat(e),e=Ri(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ri(s.min,s.max,r);t===s&&(a-=e),t.min=BF(t.min,e,n,a,i),t.max=BF(t.max,e,n,a,i)}function $F(t,e,[n,r,i],s,o){ame(t,e[n],e[r],e[i],e.scale,s,o)}const lme=["x","scaleX","originX"],cme=["y","scaleY","originY"];function NF(t,e,n,r){$F(t.x,e,lme,n?n.x:void 0,r?r.x:void 0),$F(t.y,e,cme,n?n.y:void 0,r?r.y:void 0)}function VF(t){return t.translate===0&&t.scale===1}function QU(t){return VF(t.x)&&VF(t.y)}function ume(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function HU(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function WF(t){return wl(t.x)/wl(t.y)}class hme{constructor(){this.members=[]}add(e){S5(this.members,e),e.scheduleRender()}remove(e){if(k5(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function UF(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:h,rotateX:p,rotateY:g}=n;h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const dme=(t,e)=>t.depth-e.depth;class fme{constructor(){this.children=[],this.isDirty=!1}add(e){S5(this.children,e),this.isDirty=!0}remove(e){k5(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(dme),this.isDirty=!1,this.children.forEach(e)}}function pme(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Qh(r),t(s-e))};return pi.read(r,!0),()=>Qh(r)}function mme(t){window.MotionDebug&&window.MotionDebug.record(t)}function gme(t){return t instanceof SVGElement&&t.tagName!=="svg"}function yme(t,e,n){const r=Qa(t)?t:z0(t);return r.start(w5("",r,e,n)),r.animation}const qF=["","X","Y","Z"],xme={visibility:"hidden"},QF=1e3;let vme=0;const Vp={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function GU({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=vme++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Vp.totalNodes=Vp.resolvedTargetDeltas=Vp.recalculatedProjection=0,this.nodes.forEach(wme),this.nodes.forEach(jme),this.nodes.forEach(Pme),this.nodes.forEach(Sme),mme(Vp)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new fme)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new C5),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const h=this.eventHandlers.get(o);h&&h.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=gme(o),this.instance=o;const{layoutId:h,layout:p,visualElement:g}=this.options;if(g&&!g.current&&g.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(p||h)&&(this.isLayoutDirty=!0),t){let y;const b=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=pme(b,250),_k.hasAnimatedSinceResize&&(_k.hasAnimatedSinceResize=!1,this.nodes.forEach(GF))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||p)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:b,hasRelativeTargetChanged:S,layout:P})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const O=this.options.transition||g.getDefaultTransition()||Ime,{onLayoutAnimationStart:D,onLayoutAnimationComplete:z}=g.getProps(),F=!this.targetLayout||!HU(this.targetLayout,P)||S,R=!b&&S;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||R||b&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,R);const N={..._5(O,"layout"),onPlay:D,onComplete:z};(g.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else b||GF(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=P})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Qh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ome),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:a,layout:h}=this.options;if(a===void 0&&!h)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(HF);return}this.isUpdating||this.nodes.forEach(Cme),this.isUpdating=!1,this.nodes.forEach(Tme),this.nodes.forEach(bme),this.nodes.forEach(_me),this.clearAllSnapshots();const a=performance.now();Io.delta=Mf(0,1e3/60,a-Io.timestamp),Io.timestamp=a,Io.isProcessing=!0,WP.update.process(Io),WP.preRender.process(Io),WP.render.process(Io),Io.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(kme),this.sharedNodes.forEach(Ame)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,pi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){pi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ls(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!QU(this.projectionDelta),h=this.getTransformTemplate(),p=h?h(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;o&&(a||Np(this.latestValues)||g)&&(i(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let h=this.removeElementScroll(a);return o&&(h=this.removeTransform(h)),Mme(h),{animationId:this.root.animationId,measuredBox:a,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ls();const a=o.measureViewportBox(),{scroll:h}=this.root;return h&&(Ud(a.x,h.offset.x),Ud(a.y,h.offset.y)),a}removeElementScroll(o){const a=ls();Bl(a,o);for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:g,options:y}=p;if(p!==this.root&&g&&y.layoutScroll){if(g.isRoot){Bl(a,o);const{scroll:b}=this.root;b&&(Ud(a.x,-b.offset.x),Ud(a.y,-b.offset.y))}Ud(a.x,g.offset.x),Ud(a.y,g.offset.y)}}return a}applyTransform(o,a=!1){const h=ls();Bl(h,o);for(let p=0;p<this.path.length;p++){const g=this.path[p];!a&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Iy(h,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Np(g.latestValues)&&Iy(h,g.latestValues)}return Np(this.latestValues)&&Iy(h,this.latestValues),h}removeTransform(o){const a=ls();Bl(a,o);for(let h=0;h<this.path.length;h++){const p=this.path[h];if(!p.instance||!Np(p.latestValues))continue;NE(p.latestValues)&&p.updateSnapshot();const g=ls(),y=p.measurePageBox();Bl(g,y),NF(a,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return Np(this.latestValues)&&NF(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Io.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==h;if(!(o||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:y,layoutId:b}=this.options;if(!(!this.layout||!(y||b))){if(this.resolvedRelativeTargetAt=Io.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ls(),this.relativeTargetOrigin=ls(),Ab(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),Bl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ls(),this.targetWithTransforms=ls()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Mpe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bl(this.target,this.layout.layoutBox),BU(this.target,this.targetDelta)):Bl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ls(),this.relativeTargetOrigin=ls(),Ab(this.relativeTargetOrigin,this.target,S.target),Bl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vp.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||NE(this.parent.latestValues)||FU(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),h=!!this.resumingFrom||this!==a;let p=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(p=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===Io.timestamp&&(p=!1),p)return;const{layout:g,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||y))return;Bl(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,S=this.treeScale.y;Wpe(this.layoutCorrected,this.treeScale,this.path,h),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:P}=a;if(!P){this.projectionTransform&&(this.projectionDelta=zy(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=zy(),this.projectionDeltaWithTransform=zy());const O=this.projectionTransform;Ob(this.projectionDelta,this.layoutCorrected,P,this.latestValues),this.projectionTransform=UF(this.projectionDelta,this.treeScale),(this.projectionTransform!==O||this.treeScale.x!==b||this.treeScale.y!==S)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",P)),Vp.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const h=this.snapshot,p=h?h.latestValues:{},g={...this.latestValues},y=zy();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const b=ls(),S=h?h.source:void 0,P=this.layout?this.layout.source:void 0,O=S!==P,D=this.getStack(),z=!D||D.members.length<=1,F=!!(O&&!z&&this.options.crossfade===!0&&!this.path.some(zme));this.animationProgress=0;let R;this.mixTargetDelta=N=>{const Q=N/1e3;XF(y.x,o.x,Q),XF(y.y,o.y,Q),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ab(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Eme(this.relativeTarget,this.relativeTargetOrigin,b,Q),R&&ume(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=ls()),Bl(R,this.relativeTarget)),O&&(this.animationValues=g,ime(g,p,this.latestValues,Q,F,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Qh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pi.update(()=>{_k.hasAnimatedSinceResize=!0,this.currentAnimation=yme(0,QF,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(QF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:h,layout:p,latestValues:g}=o;if(!(!a||!h||!p)){if(this!==o&&this.layout&&p&&XU(this.options.animationType,this.layout.layoutBox,p.layoutBox)){h=this.target||ls();const y=wl(this.layout.layoutBox.x);h.x.min=o.target.x.min,h.x.max=h.x.min+y;const b=wl(this.layout.layoutBox.y);h.y.min=o.target.y.min,h.y.max=h.y.min+b}Bl(a,h),Iy(a,g),Ob(this.projectionDeltaWithTransform,this.layoutCorrected,a,g)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new hme),this.sharedNodes.get(o).add(a);const p=a.options.initialPromotionConfig;a.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:h}={}){const p=this.getStack();p&&p.promote(this,h),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:h}=o;if((h.rotate||h.rotateX||h.rotateY||h.rotateZ)&&(a=!0),!a)return;const p={};for(let g=0;g<qF.length;g++){const y="rotate"+qF[g];h[y]&&(p[y]=h[y],o.setStaticValue(y,0))}o.render();for(const g in p)o.setStaticValue(g,p[g]);o.scheduleRender()}getProjectionStyles(o){var a,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return xme;const p={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=bk(o==null?void 0:o.pointerEvents)||"",p.transform=g?g(this.latestValues,""):"none",p;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const O={};return this.options.layoutId&&(O.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,O.pointerEvents=bk(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Np(this.latestValues)&&(O.transform=g?g({},""):"none",this.hasProjected=!1),O}const b=y.animationValues||y.latestValues;this.applyTransformsToTarget(),p.transform=UF(this.projectionDeltaWithTransform,this.treeScale,b),g&&(p.transform=g(b,p.transform));const{x:S,y:P}=this.projectionDelta;p.transformOrigin=`${S.origin*100}% ${P.origin*100}% 0`,y.animationValues?p.opacity=y===this?(h=(a=b.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:b.opacityExit:p.opacity=y===this?b.opacity!==void 0?b.opacity:"":b.opacityExit!==void 0?b.opacityExit:0;for(const O in v2){if(b[O]===void 0)continue;const{correct:D,applyTo:z}=v2[O],F=p.transform==="none"?b[O]:D(b[O],y);if(z){const R=z.length;for(let N=0;N<R;N++)p[z[N]]=F}else p[O]=F}return this.options.layoutId&&(p.pointerEvents=y===this?bk(o==null?void 0:o.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(HF),this.root.sharedNodes.clear()}}}function bme(t){t.updateLayout()}function _me(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Nl(y=>{const b=o?n.measuredBox[y]:n.layoutBox[y],S=wl(b);b.min=r[y].min,b.max=b.min+S}):XU(s,n.layoutBox,r)&&Nl(y=>{const b=o?n.measuredBox[y]:n.layoutBox[y],S=wl(r[y]);b.max=b.min+S,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+S)});const a=zy();Ob(a,r,n.layoutBox);const h=zy();o?Ob(h,t.applyTransform(i,!0),n.measuredBox):Ob(h,r,n.layoutBox);const p=!QU(a);let g=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:b,layout:S}=y;if(b&&S){const P=ls();Ab(P,n.layoutBox,b.layoutBox);const O=ls();Ab(O,r,S.layoutBox),HU(P,O)||(g=!0),y.options.layoutRoot&&(t.relativeTarget=O,t.relativeTargetOrigin=P,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:h,layoutDelta:a,hasLayoutChanged:p,hasRelativeTargetChanged:g})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function wme(t){Vp.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Sme(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function kme(t){t.clearSnapshot()}function HF(t){t.clearMeasurements()}function Cme(t){t.isLayoutDirty=!1}function Tme(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function GF(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function jme(t){t.resolveTargetDelta()}function Pme(t){t.calcProjection()}function Ome(t){t.resetRotation()}function Ame(t){t.removeLeadSnapshot()}function XF(t,e,n){t.translate=Ri(e.translate,0,n),t.scale=Ri(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function KF(t,e,n,r){t.min=Ri(e.min,n.min,r),t.max=Ri(e.max,n.max,r)}function Eme(t,e,n,r){KF(t.x,e.x,n.x,r),KF(t.y,e.y,n.y,r)}function zme(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Ime={duration:.45,ease:[.4,0,.1,1]},ZF=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),YF=ZF("applewebkit/")&&!ZF("chrome/")?Math.round:Zi;function JF(t){t.min=YF(t.min),t.max=YF(t.max)}function Mme(t){JF(t.x),JF(t.y)}function XU(t,e,n){return t==="position"||t==="preserve-aspect"&&!BE(WF(e),WF(n),.2)}const Rme=GU({attachResizeListener:(t,e)=>Mh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),eO={current:void 0},KU=GU({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!eO.current){const t=new Rme({});t.mount(window),t.setOptions({layoutScroll:!0}),eO.current=t}return eO.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Dme={pan:{Feature:Zpe},drag:{Feature:Kpe,ProjectionNode:KU,MeasureLayout:WU}},Lme=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Fme(t){const e=Lme.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function WE(t,e,n=1){const[r,i]=Fme(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return EU(o)?parseFloat(o):o}else return zE(i)?WE(i,e,n+1):i}function Bme(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!zE(s))return;const o=WE(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!zE(s))continue;const o=WE(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const $me=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),ZU=t=>$me.has(t),Nme=t=>Object.keys(t).some(ZU),eB=t=>t===tg||t===Wn,tB=(t,e)=>parseFloat(t.split(", ")[e]),nB=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return tB(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?tB(s[1],t):0}},Vme=new Set(["x","y","z"]),Wme=h_.filter(t=>!Vme.has(t));function Ume(t){const e=[];return Wme.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const I0={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:nB(4,13),y:nB(5,14)};I0.translateX=I0.x;I0.translateY=I0.y;const qme=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(p=>{a[p]=I0[p](r,s)}),e.render();const h=e.measureViewportBox();return n.forEach(p=>{const g=e.getValue(p);g&&g.jump(a[p]),t[p]=I0[p](h,s)}),t},Qme=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(ZU);let s=[],o=!1;const a=[];if(i.forEach(h=>{const p=t.getValue(h);if(!t.hasValue(h))return;let g=n[h],y=Ev(g);const b=e[h];let S;if(_2(b)){const P=b.length,O=b[0]===null?1:0;g=b[O],y=Ev(g);for(let D=O;D<P&&b[D]!==null;D++)S?g5(Ev(b[D])===S):S=Ev(b[D])}else S=Ev(b);if(y!==S)if(eB(y)&&eB(S)){const P=p.get();typeof P=="string"&&p.set(parseFloat(P)),typeof b=="string"?e[h]=parseFloat(b):Array.isArray(b)&&S===Wn&&(e[h]=b.map(parseFloat))}else y!=null&&y.transform&&(S!=null&&S.transform)&&(g===0||b===0)?g===0?p.set(S.transform(g)):e[h]=y.transform(b):(o||(s=Ume(t),o=!0),a.push(h),r[h]=r[h]!==void 0?r[h]:e[h],p.jump(b))}),a.length){const h=a.indexOf("height")>=0?window.pageYOffset:null,p=qme(e,t,a);return s.length&&s.forEach(([g,y])=>{t.getValue(g).set(y)}),t.render(),YC&&h!==null&&window.scrollTo({top:h}),{target:p,transitionEnd:r}}else return{target:e,transitionEnd:r}};function Hme(t,e,n,r){return Nme(e)?Qme(t,e,n,r):{target:e,transitionEnd:r}}const Gme=(t,e,n,r)=>{const i=Bme(t,e,r);return e=i.target,r=i.transitionEnd,Hme(t,e,n,r)},UE={current:null},YU={current:!1};function Xme(){if(YU.current=!0,!!YC)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>UE.current=t.matches;t.addListener(e),e()}else UE.current=!1}function Kme(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(Qa(s))t.addValue(i,s),C2(r)&&r.add(i);else if(Qa(o))t.addValue(i,z0(s,{owner:t})),C2(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,z0(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const rB=new WeakMap,JU=Object.keys(g1),Zme=JU.length,iB=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Yme=a5.length;class Jme{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>pi.render(this.render,!1,!0);const{latestValues:a,renderState:h}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=eT(n),this.isVariantNode=D7(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(n,{});for(const y in g){const b=g[y];a[y]!==void 0&&Qa(b)&&(b.set(a[y],!1),C2(p)&&p.add(y))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,rB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),YU.current||Xme(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:UE.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){rB.delete(this.current),this.projection&&this.projection.unmount(),Qh(this.notifyUpdate),Qh(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=eg.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&pi.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let h=0;h<Zme;h++){const p=JU[h],{isEnabled:g,Feature:y,ProjectionNode:b,MeasureLayout:S}=g1[p];b&&(o=b),g(n)&&(!this.features[p]&&y&&(this.features[p]=new y(this)),S&&(a=S))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:h,layout:p,drag:g,dragConstraints:y,layoutScroll:b,layoutRoot:S}=n;this.projection.setOptions({layoutId:h,layout:p,alwaysMeasureLayout:!!g||y&&Ay(y),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof p=="string"?p:"both",initialPromotionConfig:s,layoutScroll:b,layoutRoot:S})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ls()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<iB.length;r++){const i=iB[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Kme(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<Yme;r++){const i=a5[r],s=this.props[i];(m1(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=z0(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=m5(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Qa(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new C5),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class eq extends Jme{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=mpe(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){fpe(this,r,o);const a=Gme(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function ege(t){return window.getComputedStyle(t)}class tge extends eq{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(eg.has(n)){const r=b5(n);return r&&r.default||0}else{const r=ege(e),i=($7(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return $U(e,n)}build(e,n,r,i){u5(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return p5(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Qa(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){Q7(e,n,r,i)}}class nge extends eq{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(eg.has(n)){const r=b5(n);return r&&r.default||0}return n=H7.has(n)?n:s5(n),e.getAttribute(n)}measureInstanceViewportBox(){return ls()}scrapeMotionValuesFromProps(e,n){return X7(e,n)}build(e,n,r,i){d5(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){G7(e,n,r,i)}mount(e){this.isSVGTag=f5(e.tagName),super.mount(e)}}const rge=(t,e)=>c5(t)?new nge(e,{enableHardwareAcceleration:!1}):new tge(e,{enableHardwareAcceleration:!0}),ige={layout:{ProjectionNode:KU,MeasureLayout:WU}},sge={...Ape,...Kde,...Dme,...ige},Nr=sde((t,e)=>Lde(t,e,sge,rge));function tq(){const t=L.useRef(!1);return i5(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function oge(){const t=tq(),[e,n]=L.useState(0),r=L.useCallback(()=>{t.current&&n(e+1)},[e]);return[L.useCallback(()=>pi.postRender(r),[r]),e]}class age extends L.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function lge({children:t,isPresent:e}){const n=L.useId(),r=L.useRef(null),i=L.useRef({width:0,height:0,top:0,left:0});return L.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:h}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const p=document.createElement("style");return document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),L.createElement(age,{isPresent:e,childRef:r,sizeRef:i},L.cloneElement(t,{ref:r}))}const tO=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=K7(cge),h=L.useId(),p=L.useMemo(()=>({id:h,initial:e,isPresent:n,custom:i,onExitComplete:g=>{a.set(g,!0);for(const y of a.values())if(!y)return;r&&r()},register:g=>(a.set(g,!1),()=>a.delete(g))}),s?void 0:[n]);return L.useMemo(()=>{a.forEach((g,y)=>a.set(y,!1))},[n]),L.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=L.createElement(lge,{isPresent:n},t)),L.createElement(u_.Provider,{value:p},t)};function cge(){return new Map}function uge(t){return L.useEffect(()=>()=>t(),[])}const Wp=t=>t.key||"";function hge(t,e){t.forEach(n=>{const r=Wp(n);e.set(r,n)})}function dge(t){const e=[];return L.Children.forEach(t,n=>{L.isValidElement(n)&&e.push(n)}),e}const Sl=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=L.useContext(l5).forceRender||oge()[0],h=tq(),p=dge(t);let g=p;const y=L.useRef(new Map).current,b=L.useRef(g),S=L.useRef(new Map).current,P=L.useRef(!0);if(i5(()=>{P.current=!1,hge(p,S),b.current=g}),uge(()=>{P.current=!0,S.clear(),y.clear()}),P.current)return L.createElement(L.Fragment,null,g.map(F=>L.createElement(tO,{key:Wp(F),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},F)));g=[...g];const O=b.current.map(Wp),D=p.map(Wp),z=O.length;for(let F=0;F<z;F++){const R=O[F];D.indexOf(R)===-1&&!y.has(R)&&y.set(R,void 0)}return o==="wait"&&y.size&&(g=[]),y.forEach((F,R)=>{if(D.indexOf(R)!==-1)return;const N=S.get(R);if(!N)return;const Q=O.indexOf(R);let q=F;if(!q){const X=()=>{y.delete(R);const K=Array.from(S.keys()).filter(ne=>!D.includes(ne));if(K.forEach(ne=>S.delete(ne)),b.current=p.filter(ne=>{const J=Wp(ne);return J===R||K.includes(J)}),!y.size){if(h.current===!1)return;a(),r&&r()}};q=L.createElement(tO,{key:Wp(N),isPresent:!1,onExitComplete:X,custom:e,presenceAffectsLayout:s,mode:o},N),y.set(R,q)}g.splice(Q,0,q)}),g=g.map(F=>{const R=F.key;return y.has(R)?F:L.createElement(tO,{key:Wp(F),isPresent:!0,presenceAffectsLayout:s,mode:o},F)}),L.createElement(L.Fragment,null,y.size?g:g.map(F=>L.cloneElement(F)))},fge=(t,e)=>t.find(n=>n.id===e);function sB(t,e){const n=nq(t,e),r=n?t[n].findIndex(i=>i.id===e):-1;return{position:n,index:r}}function nq(t,e){for(const[n,r]of Object.entries(t))if(fge(r,e))return n}function pge(t){const e=t.includes("right"),n=t.includes("left");let r="center";return e&&(r="flex-end"),n&&(r="flex-start"),{display:"flex",flexDirection:"column",alignItems:r}}function mge(t){const n=t==="top"||t==="bottom"?"0 auto":void 0,r=t.includes("top")?"env(safe-area-inset-top, 0px)":void 0,i=t.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,s=t.includes("left")?void 0:"env(safe-area-inset-right, 0px)",o=t.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:n,top:r,bottom:i,right:s,left:o}}var gge=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,yge=y7(function(t){return gge.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),xge=yge,vge=function(e){return e!=="theme"},oB=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?xge:vge},aB=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},bge=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return YM(n,r,i),T7(function(){return JM(n,r,i)}),null},_ge=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=aB(e,n,r),h=a||oB(i),p=!h("as");return function(){var g=arguments,y=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&y.push("label:"+s+";"),g[0]==null||g[0].raw===void 0)y.push.apply(y,g);else{var b=g[0];y.push(b[0]);for(var S=g.length,P=1;P<S;P++)y.push(g[P],b[P])}var O=t5(function(D,z,F){var R=p&&D.as||i,N="",Q=[],q=D;if(D.theme==null){q={};for(var X in D)q[X]=D[X];q.theme=L.useContext(E0)}typeof D.className=="string"?N=S7(z.registered,Q,D.className):D.className!=null&&(N=D.className+" ");var K=GC(y.concat(Q),z.registered,q);N+=z.key+"-"+K.name,o!==void 0&&(N+=" "+o);var ne=p&&a===void 0?oB(R):h,J={};for(var ae in D)p&&ae==="as"||ne(ae)&&(J[ae]=D[ae]);return J.className=N,F&&(J.ref=F),L.createElement(L.Fragment,null,L.createElement(bge,{cache:z,serialized:K,isStringTag:typeof R=="string"}),L.createElement(R,J))});return O.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",O.defaultProps=e.defaultProps,O.__emotion_real=O,O.__emotion_base=i,O.__emotion_styles=y,O.__emotion_forwardProp=a,Object.defineProperty(O,"toString",{value:function(){return"."+o}}),O.withComponent=function(D,z){var F=t(D,If({},n,z,{shouldForwardProp:aB(O,z,!0)}));return F.apply(void 0,y)},O}},wge=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],qE=_ge.bind(null);wge.forEach(function(t){qE[t]=qE(t)});const Sge=new Set([...Zre,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),kge=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function Cge(t){return(kge.has(t)||!Sge.has(t))&&t[0]!=="_"}const Tge=Fne(qE),jge=({baseStyle:t})=>e=>{const{theme:n,css:r,__css:i,sx:s,...o}=e,[a]=Une(o,Jre),h=pl(t,e),p=kne({},i,h,AC(a),s),g=XW(p)(e.theme);return r?[g,r]:g};function nO(t,e){const{baseStyle:n,...r}=e??{};r.shouldForwardProp||(r.shouldForwardProp=Cge);const i=jge({baseStyle:n}),s=Tge(t,r)(i);return L.forwardRef(function(h,p){const{children:g,...y}=h,{colorMode:b,forced:S}=KC(),P=S?b:void 0;return L.createElement(s,{ref:p,"data-theme":P,...y},g)})}function Pge(){const t=new Map;return new Proxy(nO,{apply(e,n,r){return nO(...r)},get(e,n){return t.has(n)||t.set(n,nO(n)),t.get(n)}})}const gt=Pge(),Oge={initial:t=>{const{position:e}=t,n=["top","bottom"].includes(e)?"y":"x";let r=["top-right","bottom-right"].includes(e)?1:-1;return e==="bottom"&&(r=1),{opacity:0,[n]:r*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},rq=L.memo(t=>{const{id:e,message:n,onCloseComplete:r,onRequestRemove:i,requestClose:s=!1,position:o="bottom",duration:a=5e3,containerStyle:h,motionVariants:p=Oge,toastSpacing:g="0.5rem"}=t,[y,b]=L.useState(a),S=Ype();zf(()=>{S||r==null||r()},[S]),zf(()=>{b(a)},[a]);const P=()=>b(null),O=()=>b(a),D=()=>{S&&i()};L.useEffect(()=>{S&&s&&i()},[S,s,i]),nre(D,y);const z=L.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:g,...h}),[h,g]),F=L.useMemo(()=>pge(o),[o]);return u.jsx(Nr.div,{layout:!0,className:"chakra-toast",variants:p,initial:"initial",animate:"animate",exit:"exit",onHoverStart:P,onHoverEnd:O,custom:{position:o},style:F,children:u.jsx(gt.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:z,children:pl(n,{id:e,onClose:D})})})});rq.displayName="ToastComponent";function Pt(t){return L.forwardRef(t)}var Age=typeof Element<"u",Ege=typeof Map=="function",zge=typeof Set=="function",Ige=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function wk(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,i;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!wk(t[r],e[r]))return!1;return!0}var s;if(Ege&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(s=t.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;for(s=t.entries();!(r=s.next()).done;)if(!wk(r.value[1],e.get(r.value[0])))return!1;return!0}if(zge&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(s=t.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(Ige&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;if(Age&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&t.$$typeof)&&!wk(t[i[r]],e[i[r]]))return!1;return!0}return t!==t&&e!==e}var Mge=function(e,n){try{return wk(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const Rge=Zm(Mge);function sx(){const t=L.useContext(E0);if(!t)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return t}function iq(){const t=KC(),e=sx();return{...t,theme:e}}function Dge(t,e,n){if(e==null)return e;const r=i=>{var s,o;return(o=(s=t.__cssMap)==null?void 0:s[i])==null?void 0:o.value};return r(e)??r(n)??n}function Lge(t,e,n){const r=Array.isArray(e)?e:[e],i=Array.isArray(n)?n:[n];return s=>{const o=i.filter(Boolean),a=r.map((h,p)=>{const g=`${t}.${h}`;return Dge(s,g,o[p]??h)});return Array.isArray(e)?a:a[0]}}function Fge(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!==void 0&&e!=="children"&&!L.isValidElement(n)))}function sq(t,e={}){const{styleConfig:n,...r}=e,{theme:i,colorMode:s}=iq(),o=t?IW(i,`components.${t}`):void 0,a=n||o,h=nc({theme:i,colorMode:s},(a==null?void 0:a.defaultProps)??{},Fge(r),(g,y)=>g?void 0:y),p=L.useRef({});if(a){const y=uie(a)(h);Rge(p.current,y)||(p.current=y)}return p.current}function Ga(t,e={}){return sq(t,e)}function xs(t,e={}){return sq(t,e)}const lB={path:u.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),u.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),u.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},Le=Pt((t,e)=>{const{as:n,viewBox:r,color:i="currentColor",focusable:s=!1,children:o,className:a,__css:h,...p}=t,g=ln("chakra-icon",a),y=Ga("Icon",t),b={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i,...h,...y},S={ref:e,focusable:s,className:g,__css:b},P=r??lB.viewBox;if(n&&typeof n!="string")return u.jsx(gt.svg,{as:n,...S,...p});const O=o??lB.path;return u.jsx(gt.svg,{verticalAlign:"middle",viewBox:P,...S,...p,children:O})});Le.displayName="Icon";function Bge(t){return u.jsx(Le,{viewBox:"0 0 24 24",...t,children:u.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function $ge(t){return u.jsx(Le,{viewBox:"0 0 24 24",...t,children:u.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function cB(t){return u.jsx(Le,{viewBox:"0 0 24 24",...t,children:u.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}const Nge=bo({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),Cr=Pt((t,e)=>{const n=Ga("Spinner",t),{label:r="Loading...",thickness:i="2px",speed:s="0.45s",emptyColor:o="transparent",className:a,...h}=Mr(t),p=ln("chakra-spinner",a),g={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:o,borderLeftColor:o,animation:`${Nge} ${s} linear infinite`,...n};return u.jsx(gt.div,{ref:e,__css:g,className:p,...h,children:r&&u.jsx(gt.span,{srOnly:!0,children:r})})});Cr.displayName="Spinner";const[Vge,T5]=Or({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[Wge,j5]=Or({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),oq={info:{icon:$ge,colorScheme:"blue"},warning:{icon:cB,colorScheme:"orange"},success:{icon:Bge,colorScheme:"green"},error:{icon:cB,colorScheme:"red"},loading:{icon:Cr,colorScheme:"blue"}};function Uge(t){return oq[t].colorScheme}function qge(t){return oq[t].icon}const go=Pt(function(e,n){const{status:r="info",addRole:i=!0,...s}=Mr(e),o=e.colorScheme??Uge(r),a=xs("Alert",{...e,colorScheme:o}),h={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...a.container};return u.jsx(Vge,{value:{status:r},children:u.jsx(Wge,{value:a,children:u.jsx(gt.div,{"data-status":r,role:i?"alert":void 0,ref:n,...s,className:ln("chakra-alert",e.className),__css:h})})})});go.displayName="Alert";function yo(t){const{status:e}=T5(),n=qge(e),r=j5(),i=e==="loading"?r.spinner:r.icon;return u.jsx(gt.span,{display:"inherit","data-status":e,...t,className:ln("chakra-alert__icon",t.className),__css:i,children:t.children||u.jsx(n,{h:"100%",w:"100%"})})}yo.displayName="AlertIcon";const m_=Pt(function(e,n){const r=j5(),{status:i}=T5();return u.jsx(gt.div,{ref:n,"data-status":i,...e,className:ln("chakra-alert__title",e.className),__css:r.title})});m_.displayName="AlertTitle";const M0=Pt(function(e,n){const{status:r}=T5(),i=j5(),s={display:"inline",...i.description};return u.jsx(gt.div,{ref:n,"data-status":r,...e,className:ln("chakra-alert__desc",e.className),__css:s})});M0.displayName="AlertDescription";function Qge(t){return u.jsx(Le,{focusable:"false","aria-hidden":!0,...t,children:u.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}const x1=Pt(function(e,n){const r=Ga("CloseButton",e),{children:i,isDisabled:s,__css:o,...a}=Mr(e),h={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return u.jsx(gt.button,{type:"button","aria-label":"Close",ref:n,disabled:s,__css:{...h,...r,...o},...a,children:i||u.jsx(Qge,{width:"1em",height:"1em"})})});x1.displayName="CloseButton";const Hge=t=>{const{status:e,variant:n="solid",id:r,title:i,isClosable:s,onClose:o,description:a,colorScheme:h,icon:p}=t,g=r?{root:`toast-${r}`,title:`toast-${r}-title`,description:`toast-${r}-description`}:void 0;return u.jsxs(go,{addRole:!1,status:e,variant:n,id:g==null?void 0:g.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:h,children:[u.jsx(yo,{children:p}),u.jsxs(gt.div,{flex:"1",maxWidth:"100%",children:[i&&u.jsx(m_,{id:g==null?void 0:g.title,children:i}),a&&u.jsx(M0,{id:g==null?void 0:g.description,display:"block",children:a})]}),s&&u.jsx(x1,{size:"sm",onClick:o,position:"absolute",insetEnd:1,top:1})]})};function aq(t={}){const{render:e,toastComponent:n=Hge}=t;return i=>typeof e=="function"?e({...i,...t}):u.jsx(n,{...i,...t})}const Gge={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},Pu=Xge(Gge);function Xge(t){let e=t;const n=new Set,r=i=>{e=i(e),n.forEach(s=>s())};return{getState:()=>e,subscribe:i=>(n.add(i),()=>{r(()=>t),n.delete(i)}),removeToast:(i,s)=>{r(o=>({...o,[s]:o[s].filter(a=>a.id!=i)}))},notify:(i,s)=>{const o=Kge(i,s),{position:a,id:h}=o;return r(p=>{const y=a.includes("top")?[o,...p[a]??[]]:[...p[a]??[],o];return{...p,[a]:y}}),h},update:(i,s)=>{i&&r(o=>{const a={...o},{position:h,index:p}=sB(a,i);return h&&p!==-1&&(a[h][p]={...a[h][p],...s,message:aq(s)}),a})},closeAll:({positions:i}={})=>{r(s=>(i??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((h,p)=>(h[p]=s[p].map(g=>({...g,requestClose:!0})),h),{...s}))},close:i=>{r(s=>{const o=nq(s,i);return o?{...s,[o]:s[o].map(a=>a.id==i?{...a,requestClose:!0}:a)}:s})},isActive:i=>!!sB(Pu.getState(),i).position}}let uB=0;function Kge(t,e={}){uB+=1;const n=e.id??uB,r=e.position??"bottom";return{id:n,message:t,position:r,duration:e.duration,onCloseComplete:e.onCloseComplete,onRequestRemove:()=>Pu.removeToast(String(n),r),status:e.status,requestClose:!1,containerStyle:e.containerStyle}}const[lq,Zge]=Or({strict:!1,name:"PortalContext"}),P5="chakra-portal",Yge=".chakra-portal",Jge=t=>u.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:t.zIndex,top:0,left:0,right:0},children:t.children}),eye=t=>{const{appendToParentPortal:e,children:n}=t,[r,i]=L.useState(null),s=L.useRef(null),[,o]=L.useState({});L.useEffect(()=>o({}),[]);const a=Zge(),h=Ghe();wf(()=>{if(!r)return;const g=r.ownerDocument,y=e?a??g.body:g.body;if(!y)return;s.current=g.createElement("div"),s.current.className=P5,y.appendChild(s.current),o({});const b=s.current;return()=>{y.contains(b)&&y.removeChild(b)}},[r]);const p=h!=null&&h.zIndex?u.jsx(Jge,{zIndex:h==null?void 0:h.zIndex,children:n}):n;return s.current?IM.createPortal(u.jsx(lq,{value:s.current,children:p}),s.current):u.jsx("span",{ref:g=>{g&&i(g)}})},tye=t=>{const{children:e,containerRef:n,appendToParentPortal:r}=t,i=n.current,s=i??(typeof window<"u"?document.body:void 0),o=L.useMemo(()=>{const h=i==null?void 0:i.ownerDocument.createElement("div");return h&&(h.className=P5),h},[i]),[,a]=L.useState({});return wf(()=>a({}),[]),wf(()=>{if(!(!o||!s))return s.appendChild(o),()=>{s.removeChild(o)}},[o,s]),s&&o?IM.createPortal(u.jsx(lq,{value:r?o:null,children:e}),o):null};function ox(t){const e={appendToParentPortal:!0,...t},{containerRef:n,...r}=e;return n?u.jsx(tye,{containerRef:n,...r}):u.jsx(eye,{...r})}ox.className=P5;ox.selector=Yge;ox.displayName="Portal";const[nye,rye]=Or({name:"ToastOptionsContext",strict:!1}),iye=t=>{const e=L.useSyncExternalStore(Pu.subscribe,Pu.getState,Pu.getState),{motionVariants:n,component:r=rq,portalProps:i,animatePresenceProps:s}=t,a=Object.keys(e).map(h=>{const p=e[h];return u.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${h}`,id:`chakra-toast-manager-${h}`,style:mge(h),children:u.jsx(Sl,{...s,initial:!1,children:p.map(g=>u.jsx(r,{motionVariants:n,...g},g.id))})},h)});return u.jsx(ox,{...i,children:a})},sye=t=>function({children:n,theme:r=t,toastOptions:i,...s}){return u.jsxs(Xhe,{theme:r,...s,children:[u.jsx(nye,{value:i==null?void 0:i.defaultOptions,children:n}),u.jsx(iye,{...i})]})},oye=sye(u7);function hB(t){return t.sort((e,n)=>{const r=e.compareDocumentPosition(n);if(r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}const aye=t=>typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE;function dB(t,e,n){let r=t+1;return n&&r>=e&&(r=0),r}function fB(t,e,n){let r=t-1;return n&&r<0&&(r=e),r}const rO=typeof window<"u"?L.useLayoutEffect:L.useEffect,pB=t=>t;var lye=Object.defineProperty,cye=(t,e,n)=>e in t?lye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$i=(t,e,n)=>(cye(t,typeof e!="symbol"?e+"":e,n),n);class uye{constructor(){$i(this,"descendants",new Map),$i(this,"register",e=>{if(e!=null)return aye(e)?this.registerNode(e):n=>{this.registerNode(n,e)}}),$i(this,"unregister",e=>{this.descendants.delete(e);const n=hB(Array.from(this.descendants.keys()));this.assignIndex(n)}),$i(this,"destroy",()=>{this.descendants.clear()}),$i(this,"assignIndex",e=>{this.descendants.forEach(n=>{const r=e.indexOf(n.node);n.index=r,n.node.dataset.index=n.index.toString()})}),$i(this,"count",()=>this.descendants.size),$i(this,"enabledCount",()=>this.enabledValues().length),$i(this,"values",()=>Array.from(this.descendants.values()).sort((n,r)=>n.index-r.index)),$i(this,"enabledValues",()=>this.values().filter(e=>!e.disabled)),$i(this,"item",e=>{if(this.count()!==0)return this.values()[e]}),$i(this,"enabledItem",e=>{if(this.enabledCount()!==0)return this.enabledValues()[e]}),$i(this,"first",()=>this.item(0)),$i(this,"firstEnabled",()=>this.enabledItem(0)),$i(this,"last",()=>this.item(this.descendants.size-1)),$i(this,"lastEnabled",()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)}),$i(this,"indexOf",e=>{var n;return e?((n=this.descendants.get(e))==null?void 0:n.index)??-1:-1}),$i(this,"enabledIndexOf",e=>e==null?-1:this.enabledValues().findIndex(n=>n.node.isSameNode(e))),$i(this,"next",(e,n=!0)=>{const r=dB(e,this.count(),n);return this.item(r)}),$i(this,"nextEnabled",(e,n=!0)=>{const r=this.item(e);if(!r)return;const i=this.enabledIndexOf(r.node),s=dB(i,this.enabledCount(),n);return this.enabledItem(s)}),$i(this,"prev",(e,n=!0)=>{const r=fB(e,this.count()-1,n);return this.item(r)}),$i(this,"prevEnabled",(e,n=!0)=>{const r=this.item(e);if(!r)return;const i=this.enabledIndexOf(r.node),s=fB(i,this.enabledCount()-1,n);return this.enabledItem(s)}),$i(this,"registerNode",(e,n)=>{if(!e||this.descendants.has(e))return;const r=Array.from(this.descendants.keys()).concat(e),i=hB(r);n!=null&&n.disabled&&(n.disabled=!!n.disabled);const s={node:e,index:-1,...n};this.descendants.set(e,s),this.assignIndex(i)})}}function O5(){const[t,e]=Or({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});return[t,e,()=>{const i=L.useRef(new uye);return rO(()=>()=>i.current.destroy()),i.current},i=>{const s=e(),[o,a]=L.useState(-1),h=L.useRef(null);rO(()=>()=>{h.current&&s.unregister(h.current)},[]),rO(()=>{if(!h.current)return;const g=Number(h.current.dataset.index);o!=g&&!Number.isNaN(g)&&a(g)});const p=pB(i?s.register(i):s.register);return{descendants:s,index:o,enabledIndex:s.enabledIndexOf(h.current),register:Ai(p,h)}}]}const[hye,iT]=Or({name:"AccordionStylesContext",hookName:"useAccordionStyles",providerName:"<Accordion />"}),[dye,A5]=Or({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItem />"}),[fye,$Fe,pye,mye]=O5();function gye(t){const{onChange:e,defaultIndex:n,index:r,allowMultiple:i,allowToggle:s,...o}=t;vye(t),bye(t);const a=pye(),[h,p]=L.useState(-1);L.useEffect(()=>()=>{p(-1)},[]);const[g,y]=FM({value:r,defaultValue(){return i?n??[]:n??-1},onChange:e});return{index:g,setIndex:y,htmlProps:o,getAccordionItemProps:S=>{let P=!1;return S!==null&&(P=Array.isArray(g)?g.includes(S):g===S),{isOpen:P,onChange:D=>{if(S!==null)if(i&&Array.isArray(g)){const z=D?g.concat(S):g.filter(F=>F!==S);y(z)}else D?y(S):s&&y(-1)}}},focusedIndex:h,setFocusedIndex:p,descendants:a}}const[yye,E5]=Or({name:"AccordionContext",hookName:"useAccordionContext",providerName:"Accordion"});function xye(t){const{isDisabled:e,isFocusable:n,id:r,...i}=t,{getAccordionItemProps:s,setFocusedIndex:o}=E5(),a=L.useRef(null),h=L.useId(),p=r??h,g=`accordion-button-${p}`,y=`accordion-panel-${p}`;_ye(t);const{register:b,index:S,descendants:P}=mye({disabled:e&&!n}),{isOpen:O,onChange:D}=s(S===-1?null:S);wye({isOpen:O,isDisabled:e});const z=()=>{D==null||D(!0)},F=()=>{D==null||D(!1)},R=L.useCallback(()=>{D==null||D(!O),o(S)},[S,o,O,D]),N=L.useCallback(K=>{const J={ArrowDown:()=>{const ae=P.nextEnabled(S);ae==null||ae.node.focus()},ArrowUp:()=>{const ae=P.prevEnabled(S);ae==null||ae.node.focus()},Home:()=>{const ae=P.firstEnabled();ae==null||ae.node.focus()},End:()=>{const ae=P.lastEnabled();ae==null||ae.node.focus()}}[K.key];J&&(K.preventDefault(),J(K))},[P,S]),Q=L.useCallback(()=>{o(S)},[o,S]),q=L.useCallback(function(ne={},J=null){return{...ne,type:"button",ref:Ai(b,a,J),id:g,disabled:!!e,"aria-expanded":!!O,"aria-controls":y,onClick:An(ne.onClick,R),onFocus:An(ne.onFocus,Q),onKeyDown:An(ne.onKeyDown,N)}},[g,e,O,R,Q,N,y,b]),X=L.useCallback(function(ne={},J=null){return{...ne,ref:J,role:"region",id:y,"aria-labelledby":g,hidden:!O}},[g,O,y]);return{isOpen:O,isDisabled:e,isFocusable:n,onOpen:z,onClose:F,getButtonProps:q,getPanelProps:X,htmlProps:i}}function vye(t){const e=t.index||t.defaultIndex,n=e!=null&&!Array.isArray(e)&&t.allowMultiple;o_({condition:!!n,message:`If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ${typeof e},`})}function bye(t){o_({condition:!!(t.allowMultiple&&t.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}function _ye(t){o_({condition:!!(t.isFocusable&&!t.isDisabled),message:`Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.
    `})}function wye(t){o_({condition:t.isOpen&&!!t.isDisabled,message:"Cannot open a disabled accordion item"})}const sT=Pt(function({children:e,reduceMotion:n,...r},i){const s=xs("Accordion",r),o=Mr(r),{htmlProps:a,descendants:h,...p}=gye(o),g=L.useMemo(()=>({...p,reduceMotion:!!n}),[p,n]);return u.jsx(fye,{value:h,children:u.jsx(yye,{value:g,children:u.jsx(hye,{value:s,children:u.jsx(gt.div,{ref:i,...a,className:ln("chakra-accordion",r.className),__css:s.root,children:e})})})})});sT.displayName="Accordion";const Kd=Pt(function(e,n){const{getButtonProps:r}=A5(),i=r(e,n),o={display:"flex",alignItems:"center",width:"100%",outline:0,...iT().button};return u.jsx(gt.button,{...i,className:ln("chakra-accordion__button",e.className),__css:o})});Kd.displayName="AccordionButton";function Zd(t){const{isOpen:e,isDisabled:n}=A5(),{reduceMotion:r}=E5(),i=ln("chakra-accordion__icon",t.className),s=iT(),o={opacity:n?.4:1,transform:e?"rotate(-180deg)":void 0,transition:r?void 0:"transform 0.2s",transformOrigin:"center",...s.icon};return u.jsx(Le,{viewBox:"0 0 24 24","aria-hidden":!0,className:i,__css:o,...t,children:u.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})}Zd.displayName="AccordionIcon";const Yd=Pt(function(e,n){const{children:r,className:i}=e,{htmlProps:s,...o}=xye(e),a=iT(),h={...a.container,overflowAnchor:"none"},p=L.useMemo(()=>o,[o]);return u.jsx(dye,{value:p,children:u.jsx(gt.div,{ref:n,...s,className:ln("chakra-accordion__item",i),__css:h,children:typeof r=="function"?r({isExpanded:!!o.isOpen,isDisabled:!!o.isDisabled}):r})})});Yd.displayName="AccordionItem";const tm={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},Iv={slideLeft:{position:{left:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"-100%",y:0}},slideRight:{position:{right:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"100%",y:0}},slideUp:{position:{top:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"-100%"}},slideDown:{position:{bottom:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"100%"}}};function QE(t){switch((t==null?void 0:t.direction)??"right"){case"right":return Iv.slideRight;case"left":return Iv.slideLeft;case"bottom":return Iv.slideDown;case"top":return Iv.slideUp;default:return Iv.slideRight}}const _m={enter:{duration:.2,ease:tm.easeOut},exit:{duration:.1,ease:tm.easeIn}},Vc={enter:(t,e)=>({...t,delay:typeof e=="number"?e:e==null?void 0:e.enter}),exit:(t,e)=>({...t,delay:typeof e=="number"?e:e==null?void 0:e.exit})},Sye=t=>t!=null&&parseInt(t.toString(),10)>0,mB={exit:{height:{duration:.2,ease:tm.ease},opacity:{duration:.3,ease:tm.ease}},enter:{height:{duration:.3,ease:tm.ease},opacity:{duration:.4,ease:tm.ease}}},kye={exit:({animateOpacity:t,startingHeight:e,transition:n,transitionEnd:r,delay:i})=>({...t&&{opacity:Sye(e)?1:0},height:e,transitionEnd:r==null?void 0:r.exit,transition:(n==null?void 0:n.exit)??Vc.exit(mB.exit,i)}),enter:({animateOpacity:t,endingHeight:e,transition:n,transitionEnd:r,delay:i})=>({...t&&{opacity:1},height:e,transitionEnd:r==null?void 0:r.enter,transition:(n==null?void 0:n.enter)??Vc.enter(mB.enter,i)})},qc=L.forwardRef((t,e)=>{const{in:n,unmountOnExit:r,animateOpacity:i=!0,startingHeight:s=0,endingHeight:o="auto",style:a,className:h,transition:p,transitionEnd:g,animatePresenceProps:y,...b}=t,[S,P]=L.useState(!1);L.useEffect(()=>{const R=setTimeout(()=>{P(!0)});return()=>clearTimeout(R)},[]),o_({condition:Number(s)>0&&!!r,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const O=parseFloat(s.toString())>0,D={startingHeight:s,endingHeight:o,animateOpacity:i,transition:S?p:{enter:{duration:0}},transitionEnd:{enter:g==null?void 0:g.enter,exit:r?g==null?void 0:g.exit:{...g==null?void 0:g.exit,display:O?"block":"none"}}},z=r?n:!0,F=n||r?"enter":"exit";return u.jsx(Sl,{...y,initial:!1,custom:D,children:z&&u.jsx(Nr.div,{ref:e,...b,className:ln("chakra-collapse",h),style:{overflow:"hidden",display:"block",...a},custom:D,variants:kye,initial:r?"exit":!1,animate:F,exit:"exit"})})});qc.displayName="Collapse";const Jd=Pt(function(e,n){const{className:r,motionProps:i,...s}=e,{reduceMotion:o}=E5(),{getPanelProps:a,isOpen:h}=A5(),p=a(s,n),g=ln("chakra-accordion__panel",r),y=iT();o||delete p.hidden;const b=u.jsx(gt.div,{...p,__css:y.panel,className:g});return o?b:u.jsx(qc,{in:h,...i,children:b})});Jd.displayName="AccordionPanel";function Cye(t){const{loading:e,src:n,srcSet:r,onLoad:i,onError:s,crossOrigin:o,sizes:a,ignoreFallback:h}=t,[p,g]=L.useState("pending");L.useEffect(()=>{g(n?"loading":"pending")},[n]);const y=L.useRef(null),b=L.useCallback(()=>{if(!n)return;S();const P=new Image;P.src=n,o&&(P.crossOrigin=o),r&&(P.srcset=r),a&&(P.sizes=a),e&&(P.loading=e),P.onload=O=>{S(),g("loaded"),i==null||i(O)},P.onerror=O=>{S(),g("failed"),s==null||s(O)},y.current=P},[n,o,r,a,i,s,e]),S=()=>{y.current&&(y.current.onload=null,y.current.onerror=null,y.current=null)};return wf(()=>{if(!h)return p==="loading"&&b(),()=>{S()}},[p,b,h]),h?"loaded":p}const Tye=(t,e)=>t!=="loaded"&&e==="beforeLoadOrError"||t==="failed"&&e==="onError",Lt=Pt(function(e,n){const r=Ga("Badge",e),{className:i,...s}=Mr(e);return u.jsx(gt.span,{ref:n,className:ln("chakra-badge",e.className),...s,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...r}})});Lt.displayName="Badge";const de=gt("div");de.displayName="Box";const[jye,Pye]=Or({strict:!1,name:"ButtonGroupContext"});function tb(t){const{children:e,className:n,...r}=t,i=L.isValidElement(e)?L.cloneElement(e,{"aria-hidden":!0,focusable:!1}):e,s=ln("chakra-button__icon",n);return u.jsx(gt.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...r,className:s,children:i})}tb.displayName="ButtonIcon";function HE(t){const{label:e,placement:n,spacing:r="0.5rem",children:i=u.jsx(Cr,{color:"currentColor",width:"1em",height:"1em"}),className:s,__css:o,...a}=t,h=ln("chakra-button__spinner",s),p=n==="start"?"marginEnd":"marginStart",g=L.useMemo(()=>({display:"flex",alignItems:"center",position:e?"relative":"absolute",[p]:e?r:0,fontSize:"1em",lineHeight:"normal",...o}),[o,e,p,r]);return u.jsx(gt.div,{className:h,...a,__css:g,children:i})}HE.displayName="ButtonSpinner";function Oye(t){const[e,n]=L.useState(!t);return{ref:L.useCallback(s=>{s&&n(s.tagName==="BUTTON")},[]),type:e?"button":void 0}}const vt=Pt((t,e)=>{const n=Pye(),r=Ga("Button",{...n,...t}),{isDisabled:i=n==null?void 0:n.isDisabled,isLoading:s,isActive:o,children:a,leftIcon:h,rightIcon:p,loadingText:g,iconSpacing:y="0.5rem",type:b,spinner:S,spinnerPlacement:P="start",className:O,as:D,shouldWrapChildren:z,...F}=Mr(t),R=L.useMemo(()=>{const X={...r==null?void 0:r._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...r,...!!n&&{_focus:X}}},[r,n]),{ref:N,type:Q}=Oye(D),q={rightIcon:p,leftIcon:h,iconSpacing:y,children:a,shouldWrapChildren:z};return u.jsxs(gt.button,{disabled:i||s,ref:ere(e,N),as:D,type:b??Q,"data-active":Pn(o),"data-loading":Pn(s),__css:R,className:ln("chakra-button",O),...F,children:[s&&P==="start"&&u.jsx(HE,{className:"chakra-button__spinner--start",label:g,placement:"start",spacing:y,children:S}),s?g||u.jsx(gt.span,{opacity:0,children:u.jsx(gB,{...q})}):u.jsx(gB,{...q}),s&&P==="end"&&u.jsx(HE,{className:"chakra-button__spinner--end",label:g,placement:"end",spacing:y,children:S})]})});vt.displayName="Button";function gB(t){const{leftIcon:e,rightIcon:n,children:r,iconSpacing:i,shouldWrapChildren:s}=t;return s?u.jsxs("span",{style:{display:"contents"},children:[e&&u.jsx(tb,{marginEnd:i,children:e}),r,n&&u.jsx(tb,{marginStart:i,children:n})]}):u.jsxs(u.Fragment,{children:[e&&u.jsx(tb,{marginEnd:i,children:e}),r,n&&u.jsx(tb,{marginStart:i,children:n})]})}const Aye={horizontal:{"> *:first-of-type:not(:last-of-type)":{borderEndRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0}},vertical:{"> *:first-of-type:not(:last-of-type)":{borderBottomRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderTopRadius:0}}},Eye={horizontal:t=>({"& > *:not(style) ~ *:not(style)":{marginStart:t}}),vertical:t=>({"& > *:not(style) ~ *:not(style)":{marginTop:t}})},oT=Pt(function(e,n){const{size:r,colorScheme:i,variant:s,className:o,spacing:a="0.5rem",isAttached:h,isDisabled:p,orientation:g="horizontal",...y}=e,b=ln("chakra-button__group",o),S=L.useMemo(()=>({size:r,colorScheme:i,variant:s,isDisabled:p}),[r,i,s,p]);let P={display:"inline-flex",...h?Aye[g]:Eye[g](a)};const O=g==="vertical";return u.jsx(jye,{value:S,children:u.jsx(gt.div,{ref:n,role:"group",__css:P,className:b,"data-attached":h?"":void 0,"data-orientation":g,flexDir:O?"column":void 0,...y})})});oT.displayName="ButtonGroup";const wn=Pt((t,e)=>{const{icon:n,children:r,isRound:i,"aria-label":s,...o}=t,a=n||r,h=L.isValidElement(a)?L.cloneElement(a,{"aria-hidden":!0,focusable:!1}):null;return u.jsx(vt,{px:"0",py:"0",borderRadius:i?"full":void 0,ref:e,"aria-label":s,...o,children:h})});wn.displayName="IconButton";const[zye,Iye]=qhe("Card"),Dn=Pt(function(e,n){const{className:r,children:i,direction:s="column",justify:o,align:a,...h}=Mr(e),p=xs("Card",e);return u.jsx(gt.div,{ref:n,className:ln("chakra-card",r),__css:{display:"flex",flexDirection:s,justifyContent:o,alignItems:a,position:"relative",minWidth:0,wordWrap:"break-word",...p.container},...h,children:u.jsx(zye,{value:p,children:i})})}),Vn=Pt(function(e,n){const{className:r,...i}=e,s=Iye();return u.jsx(gt.div,{ref:n,className:ln("chakra-card__body",r),__css:s.body,...i})}),Jl=gt("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});Jl.displayName="Center";const Mye={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};Pt(function(e,n){const{axis:r="both",...i}=e;return u.jsx(gt.div,{ref:n,__css:Mye[r],...i,position:"absolute"})});const[NFe,Rye]=Or({name:"CheckboxGroupContext",strict:!1});function Dye(t){return u.jsx(gt.svg,{width:"1.2em",viewBox:"0 0 12 10",style:{fill:"none",strokeWidth:2,stroke:"currentColor",strokeDasharray:16},...t,children:u.jsx("polyline",{points:"1.5 6 4.5 9 10.5 1"})})}function Lye(t){return u.jsx(gt.svg,{width:"1.2em",viewBox:"0 0 24 24",style:{stroke:"currentColor",strokeWidth:4},...t,children:u.jsx("line",{x1:"21",x2:"3",y1:"12",y2:"12"})})}function Fye(t){const{isIndeterminate:e,isChecked:n,...r}=t,i=e?Lye:Dye;return n||e?u.jsx(gt.div,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:u.jsx(i,{...r})}):null}var Bye=()=>typeof document<"u",yB=!1,g_=null,Bm=!1,GE=!1,XE=new Set;function z5(t,e){XE.forEach(n=>n(t,e))}var $ye=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function Nye(t){return!(t.metaKey||!$ye&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function xB(t){Bm=!0,Nye(t)&&(g_="keyboard",z5("keyboard",t))}function ey(t){if(g_="pointer",t.type==="mousedown"||t.type==="pointerdown"){Bm=!0;const e=t.composedPath?t.composedPath()[0]:t.target;let n=!1;try{n=e.matches(":focus-visible")}catch{}if(n)return;z5("pointer",t)}}function Vye(t){return t.mozInputSource===0&&t.isTrusted?!0:t.detail===0&&!t.pointerType}function Wye(t){Vye(t)&&(Bm=!0,g_="virtual")}function Uye(t){t.target===window||t.target===document||t.target instanceof Element&&t.target.hasAttribute("tabindex")||(!Bm&&!GE&&(g_="virtual",z5("virtual",t)),Bm=!1,GE=!1)}function qye(){Bm=!1,GE=!0}function vB(){return g_!=="pointer"}function Qye(){if(!Bye()||yB)return;const{focus:t}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...n){Bm=!0,t.apply(this,n)},document.addEventListener("keydown",xB,!0),document.addEventListener("keyup",xB,!0),document.addEventListener("click",Wye,!0),window.addEventListener("focus",Uye,!0),window.addEventListener("blur",qye,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",ey,!0),document.addEventListener("pointermove",ey,!0),document.addEventListener("pointerup",ey,!0)):(document.addEventListener("mousedown",ey,!0),document.addEventListener("mousemove",ey,!0),document.addEventListener("mouseup",ey,!0)),yB=!0}function cq(t){Qye(),t(vB());const e=()=>t(vB());return XE.add(e),()=>{XE.delete(e)}}const[Hye,uq]=Or({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[Gye,y_]=Or({strict:!1,name:"FormControlContext"});function Xye(t){const{id:e,isRequired:n,isInvalid:r,isDisabled:i,isReadOnly:s,...o}=t,a=L.useId(),h=e||`field-${a}`,p=`${h}-label`,g=`${h}-feedback`,y=`${h}-helptext`,[b,S]=L.useState(!1),[P,O]=L.useState(!1),[D,z]=L.useState(!1),F=L.useCallback((X={},K=null)=>({id:y,...X,ref:Ai(K,ne=>{ne&&O(!0)})}),[y]),R=L.useCallback((X={},K=null)=>({...X,ref:K,"data-focus":Pn(D),"data-disabled":Pn(i),"data-invalid":Pn(r),"data-readonly":Pn(s),id:X.id!==void 0?X.id:p,htmlFor:X.htmlFor!==void 0?X.htmlFor:h}),[h,i,D,r,s,p]),N=L.useCallback((X={},K=null)=>({id:g,...X,ref:Ai(K,ne=>{ne&&S(!0)}),"aria-live":"polite"}),[g]),Q=L.useCallback((X={},K=null)=>({...X,...o,ref:K,role:"group","data-focus":Pn(D),"data-disabled":Pn(i),"data-invalid":Pn(r),"data-readonly":Pn(s)}),[o,i,D,r,s]),q=L.useCallback((X={},K=null)=>({...X,ref:K,role:"presentation","aria-hidden":!0,children:X.children||"*"}),[]);return{isRequired:!!n,isInvalid:!!r,isReadOnly:!!s,isDisabled:!!i,isFocused:!!D,onFocus:()=>z(!0),onBlur:()=>z(!1),hasFeedbackText:b,setHasFeedbackText:S,hasHelpText:P,setHasHelpText:O,id:h,labelId:p,feedbackId:g,helpTextId:y,htmlProps:o,getHelpTextProps:F,getErrorMessageProps:N,getRootProps:Q,getLabelProps:R,getRequiredIndicatorProps:q}}const It=Pt(function(e,n){const r=xs("Form",e),i=Mr(e),{getRootProps:s,htmlProps:o,...a}=Xye(i),h=ln("chakra-form-control",e.className);return u.jsx(Gye,{value:a,children:u.jsx(Hye,{value:r,children:u.jsx(gt.div,{...s({},n),className:h,__css:r.container})})})});It.displayName="FormControl";const Kye=Pt(function(e,n){const r=y_(),i=uq(),s=ln("chakra-form__helper-text",e.className);return u.jsx(gt.div,{...r==null?void 0:r.getHelpTextProps(e,n),__css:i.helperText,className:s})});Kye.displayName="FormHelperText";function I5(t){const{isDisabled:e,isInvalid:n,isReadOnly:r,isRequired:i,...s}=M5(t);return{...s,disabled:e,readOnly:r,required:i,"aria-invalid":ac(n),"aria-required":ac(i),"aria-readonly":ac(r)}}function M5(t){const e=y_(),{id:n,disabled:r,readOnly:i,required:s,isRequired:o,isInvalid:a,isReadOnly:h,isDisabled:p,onFocus:g,onBlur:y,...b}=t,S=t["aria-describedby"]?[t["aria-describedby"]]:[];return e!=null&&e.hasFeedbackText&&(e!=null&&e.isInvalid)&&S.push(e.feedbackId),e!=null&&e.hasHelpText&&S.push(e.helpTextId),{...b,"aria-describedby":S.join(" ")||void 0,id:n??(e==null?void 0:e.id),isDisabled:r??p??(e==null?void 0:e.isDisabled),isReadOnly:i??h??(e==null?void 0:e.isReadOnly),isRequired:s??o??(e==null?void 0:e.isRequired),isInvalid:a??(e==null?void 0:e.isInvalid),onFocus:An(e==null?void 0:e.onFocus,g),onBlur:An(e==null?void 0:e.onBlur,y)}}const hq={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};function dq(t={}){const e=M5(t),{isDisabled:n,isReadOnly:r,isRequired:i,isInvalid:s,id:o,onBlur:a,onFocus:h,"aria-describedby":p}=e,{defaultChecked:g,isChecked:y,isFocusable:b,onChange:S,isIndeterminate:P,name:O,value:D,tabIndex:z=void 0,"aria-label":F,"aria-labelledby":R,"aria-invalid":N,...Q}=t,q=s_(Q,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),X=Ki(S),K=Ki(a),ne=Ki(h),[J,ae]=L.useState(!1),[Ee,Ce]=L.useState(!1),[$e,We]=L.useState(!1),Fe=L.useRef(!1);L.useEffect(()=>cq(kt=>{Fe.current=kt}),[]);const we=L.useRef(null),[Ie,Qe]=L.useState(!0),[se,Re]=L.useState(!!g),Oe=y!==void 0,oe=Oe?y:se,nt=L.useCallback(kt=>{if(r||n){kt.preventDefault();return}Oe||Re(oe?kt.currentTarget.checked:P?!0:kt.currentTarget.checked),X==null||X(kt)},[r,n,oe,Oe,P,X]);wf(()=>{we.current&&(we.current.indeterminate=!!P)},[P]),zf(()=>{n&&ae(!1)},[n,ae]),wf(()=>{const kt=we.current;if(!(kt!=null&&kt.form))return;const it=()=>{Re(!!g)};return kt.form.addEventListener("reset",it),()=>{var ze;return(ze=kt.form)==null?void 0:ze.removeEventListener("reset",it)}},[]);const Ne=n&&!b,tt=L.useCallback(kt=>{kt.key===" "&&We(!0)},[We]),Ye=L.useCallback(kt=>{kt.key===" "&&We(!1)},[We]);wf(()=>{if(!we.current)return;we.current.checked!==oe&&Re(we.current.checked)},[we.current]);const _t=L.useCallback((kt={},it=null)=>{const ze=ut=>{J&&ut.preventDefault(),We(!0)};return{...kt,ref:it,"data-active":Pn($e),"data-hover":Pn(Ee),"data-checked":Pn(oe),"data-focus":Pn(J),"data-focus-visible":Pn(J&&Fe.current),"data-indeterminate":Pn(P),"data-disabled":Pn(n),"data-invalid":Pn(s),"data-readonly":Pn(r),"aria-hidden":!0,onMouseDown:An(kt.onMouseDown,ze),onMouseUp:An(kt.onMouseUp,()=>We(!1)),onMouseEnter:An(kt.onMouseEnter,()=>Ce(!0)),onMouseLeave:An(kt.onMouseLeave,()=>Ce(!1))}},[$e,oe,n,J,Ee,P,s,r]),At=L.useCallback((kt={},it=null)=>({...kt,ref:it,"data-active":Pn($e),"data-hover":Pn(Ee),"data-checked":Pn(oe),"data-focus":Pn(J),"data-focus-visible":Pn(J&&Fe.current),"data-indeterminate":Pn(P),"data-disabled":Pn(n),"data-invalid":Pn(s),"data-readonly":Pn(r)}),[$e,oe,n,J,Ee,P,s,r]),Ot=L.useCallback((kt={},it=null)=>({...q,...kt,ref:Ai(it,ze=>{ze&&Qe(ze.tagName==="LABEL")}),onClick:An(kt.onClick,()=>{var ze;Ie||((ze=we.current)==null||ze.click(),requestAnimationFrame(()=>{var ut;(ut=we.current)==null||ut.focus({preventScroll:!0})}))}),"data-disabled":Pn(n),"data-checked":Pn(oe),"data-invalid":Pn(s)}),[q,n,oe,s,Ie]),bt=L.useCallback((kt={},it=null)=>({...kt,ref:Ai(we,it),type:"checkbox",name:O,value:D,id:o,tabIndex:z,onChange:An(kt.onChange,nt),onBlur:An(kt.onBlur,K,()=>ae(!1)),onFocus:An(kt.onFocus,ne,()=>ae(!0)),onKeyDown:An(kt.onKeyDown,tt),onKeyUp:An(kt.onKeyUp,Ye),required:i,checked:oe,disabled:Ne,readOnly:r,"aria-label":F,"aria-labelledby":R,"aria-invalid":N?!!N:s,"aria-describedby":p,"aria-disabled":n,"aria-checked":P?"mixed":oe,style:hq}),[O,D,o,z,nt,K,ne,tt,Ye,i,oe,Ne,r,F,R,N,s,p,n,P]),rt=L.useCallback((kt={},it=null)=>({...kt,ref:it,onMouseDown:An(kt.onMouseDown,Zye),"data-disabled":Pn(n),"data-checked":Pn(oe),"data-invalid":Pn(s)}),[oe,n,s]);return{state:{isInvalid:s,isFocused:J,isChecked:oe,isActive:$e,isHovered:Ee,isIndeterminate:P,isDisabled:n,isReadOnly:r,isRequired:i},getRootProps:Ot,getCheckboxProps:_t,getIndicatorProps:At,getInputProps:bt,getLabelProps:rt,htmlProps:q}}function Zye(t){t.preventDefault(),t.stopPropagation()}function Yye(t){const[e,n]=L.useState(t),[r,i]=L.useState(!1);return t!==e&&(i(!0),n(t)),r}const Jye={display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",userSelect:"none",flexShrink:0},e0e={cursor:"pointer",display:"inline-flex",alignItems:"center",verticalAlign:"top",position:"relative"},t0e=bo({from:{opacity:0,strokeDashoffset:16,transform:"scale(0.95)"},to:{opacity:1,strokeDashoffset:0,transform:"scale(1)"}}),n0e=bo({from:{opacity:0},to:{opacity:1}}),r0e=bo({from:{transform:"scaleX(0.65)"},to:{transform:"scaleX(1)"}}),dl=Pt(function(e,n){const r=Rye(),i={...r,...e},s=xs("Checkbox",i),o=Mr(e),{spacing:a="0.5rem",className:h,children:p,iconColor:g,iconSize:y,icon:b=u.jsx(Fye,{}),isChecked:S,isDisabled:P=r==null?void 0:r.isDisabled,onChange:O,inputProps:D,...z}=o;let F=S;r!=null&&r.value&&o.value&&(F=r.value.includes(o.value));let R=O;r!=null&&r.onChange&&o.value&&(R=RM(r.onChange,O));const{state:N,getInputProps:Q,getCheckboxProps:q,getLabelProps:X,getRootProps:K}=dq({...z,isDisabled:P,isChecked:F,onChange:R}),ne=Yye(N.isChecked),J=L.useMemo(()=>({animation:ne?N.isIndeterminate?`${n0e} 20ms linear, ${r0e} 200ms linear`:`${t0e} 200ms linear`:void 0,...s.icon,...AC({fontSize:y,color:g})}),[g,y,ne,N.isIndeterminate,s.icon]),ae=L.cloneElement(b,{__css:J,isIndeterminate:N.isIndeterminate,isChecked:N.isChecked});return u.jsxs(gt.label,{__css:{...e0e,...s.container},className:ln("chakra-checkbox",h),...K(),children:[u.jsx("input",{className:"chakra-checkbox__input",...Q(D,n)}),u.jsx(gt.span,{__css:{...Jye,...s.control},className:"chakra-checkbox__control",...q(),children:ae}),p&&u.jsx(gt.span,{className:"chakra-checkbox__label",...X(),__css:{marginStart:a,...s.label},children:p})]})});dl.displayName="Checkbox";const ec=Pt(function(e,n){const r=Ga("Code",e),{className:i,...s}=Mr(e);return u.jsx(gt.code,{ref:n,className:ln("chakra-code",e.className),...s,__css:{display:"inline-block",...r}})});ec.displayName="Code";const Hn=Pt(function(e,n){const{borderLeftWidth:r,borderBottomWidth:i,borderTopWidth:s,borderRightWidth:o,borderWidth:a,borderStyle:h,borderColor:p,...g}=Ga("Divider",e),{className:y,orientation:b="horizontal",__css:S,...P}=Mr(e),O={vertical:{borderLeftWidth:r||o||a||"1px",height:"100%"},horizontal:{borderBottomWidth:i||s||a||"1px",width:"100%"}};return u.jsx(gt.hr,{ref:n,"aria-orientation":b,...P,__css:{...g,border:"0",borderColor:p,borderStyle:h,...O[b],...S},className:ln("chakra-divider",y)})});Hn.displayName="Divider";function nb(t){return typeof t=="function"}function i0e(...t){return e=>t.reduce((n,r)=>r(n),e)}const s0e=t=>function(...n){let r=[...n],i=n[n.length-1];return Rue(i)&&r.length>1?r=r.slice(0,r.length-1):i=t,i0e(...r.map(s=>o=>nb(s)?s(o):a0e(o,s)))(i)},o0e=s0e(u7);function a0e(...t){return nc({},...t,fq)}function fq(t,e,n,r){if((nb(t)||nb(e))&&Object.prototype.hasOwnProperty.call(r,n))return(...i)=>{const s=nb(t)?t(...i):t,o=nb(e)?e(...i):e;return nc({},s,o,fq)};if(mo(t)&&mE(e)||mE(t)&&mo(e))return e}const Sn=Pt(function(e,n){const{direction:r,align:i,justify:s,wrap:o,basis:a,grow:h,shrink:p,...g}=e,y={display:"flex",flexDirection:r,alignItems:i,justifyContent:s,flexWrap:o,flexBasis:a,flexGrow:h,flexShrink:p};return u.jsx(gt.div,{ref:n,__css:y,...g})});Sn.displayName="Flex";function pq(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var KE="data-focus-lock",mq="data-focus-lock-disabled",l0e="data-no-focus-lock",c0e="data-autofocus-inside",u0e="data-no-autofocus";function iO(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function h0e(t,e){var n=L.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var d0e=typeof window<"u"?L.useLayoutEffect:L.useEffect,bB=new WeakMap;function gq(t,e){var n=h0e(null,function(r){return t.forEach(function(i){return iO(i,r)})});return d0e(function(){var r=bB.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||iO(a,null)}),s.forEach(function(a){i.has(a)||iO(a,o)})}bB.set(n,t)},[t]),n}var sO={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},Ou=function(){return Ou=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ou.apply(this,arguments)};function yq(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function f0e(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function xq(t){return t}function vq(t,e){e===void 0&&(e=xq);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var h=function(){var g=o;o=[],g.forEach(s)},p=function(){return Promise.resolve().then(h)};p(),n={push:function(g){o.push(g),p()},filter:function(g){return o=o.filter(g),n}}}};return i}function R5(t,e){return e===void 0&&(e=xq),vq(t,e)}function bq(t){t===void 0&&(t={});var e=vq(null);return e.options=Ou({async:!0,ssr:!1},t),e}var _q=function(t){var e=t.sideCar,n=yq(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return L.createElement(r,Ou({},n))};_q.isSideCarExport=!0;function p0e(t,e){return t.useMedium(e),_q}var wq=R5({},function(t){var e=t.target,n=t.currentTarget;return{target:e,currentTarget:n}}),Sq=R5(),m0e=R5(),g0e=bq({async:!0,ssr:typeof document<"u"}),y0e=L.createContext(void 0),x0e=[],D5=L.forwardRef(function(e,n){var r,i=L.useState(),s=i[0],o=i[1],a=L.useRef(),h=L.useRef(!1),p=L.useRef(null),g=L.useState({}),y=g[1],b=e.children,S=e.disabled,P=S===void 0?!1:S,O=e.noFocusGuards,D=O===void 0?!1:O,z=e.persistentFocus,F=z===void 0?!1:z,R=e.crossFrame,N=R===void 0?!0:R,Q=e.autoFocus,q=Q===void 0?!0:Q;e.allowTextSelection;var X=e.group,K=e.className,ne=e.whiteList,J=e.hasPositiveIndices,ae=e.shards,Ee=ae===void 0?x0e:ae,Ce=e.as,$e=Ce===void 0?"div":Ce,We=e.lockProps,Fe=We===void 0?{}:We,we=e.sideCar,Ie=e.returnFocus,Qe=Ie===void 0?!1:Ie,se=e.focusOptions,Re=e.onActivation,Oe=e.onDeactivation,oe=L.useState({}),nt=oe[0],Ne=L.useCallback(function(ze){var ut=ze.captureFocusRestore;if(!p.current){var qt,Ct=(qt=document)==null?void 0:qt.activeElement;p.current=Ct,Ct!==document.body&&(p.current=ut(Ct))}a.current&&Re&&Re(a.current),h.current=!0,y()},[Re]),tt=L.useCallback(function(){h.current=!1,Oe&&Oe(a.current),y()},[Oe]),Ye=L.useCallback(function(ze){var ut=p.current;if(ut){var qt=(typeof ut=="function"?ut():ut)||document.body,Ct=typeof Qe=="function"?Qe(qt):Qe;if(Ct){var $t=typeof Ct=="object"?Ct:void 0;p.current=null,ze?Promise.resolve().then(function(){return qt.focus($t)}):qt.focus($t)}}},[Qe]),_t=L.useCallback(function(ze){h.current&&wq.useMedium(ze)},[]),At=Sq.useMedium,Ot=L.useCallback(function(ze){a.current!==ze&&(a.current=ze,o(ze))},[]),bt=If((r={},r[mq]=P&&"disabled",r[KE]=X,r),Fe),rt=D!==!0,tn=rt&&D!=="tail",kt=gq([n,Ot]),it=L.useMemo(function(){return{observed:a,shards:Ee,enabled:!P,get active(){return h.current}}},[P,h,Ee,a]);return Gi.createElement(L.Fragment,null,rt&&[Gi.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:P?-1:0,style:sO}),J?Gi.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:P?-1:1,style:sO}):null],!P&&Gi.createElement(we,{id:nt,sideCar:g0e,observed:s,disabled:P,persistentFocus:F,crossFrame:N,autoFocus:q,whiteList:ne,shards:Ee,onActivation:Ne,onDeactivation:tt,returnFocus:Ye,focusOptions:se,noFocusGuards:D}),Gi.createElement($e,If({ref:kt},bt,{className:K,onBlur:At,onFocus:_t}),Gi.createElement(y0e.Provider,{value:it},b)),tn&&Gi.createElement("div",{"data-focus-guard":!0,tabIndex:P?-1:0,style:sO}))});D5.propTypes={};function ZE(t,e){return ZE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ZE(t,e)}function v0e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,ZE(t,e)}function v1(t){"@babel/helpers - typeof";return v1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v1(t)}function b0e(t,e){if(v1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(v1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _0e(t){var e=b0e(t,"string");return v1(e)=="symbol"?e:e+""}function w0e(t,e,n){return(e=_0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S0e(t,e){function n(r){return r.displayName||r.name||"Component"}return function(i){var s=[],o;function a(){o=t(s.map(function(p){return p.props})),e(o)}var h=function(p){v0e(g,p);function g(){return p.apply(this,arguments)||this}g.peek=function(){return o};var y=g.prototype;return y.componentDidMount=function(){s.push(this),a()},y.componentDidUpdate=function(){a()},y.componentWillUnmount=function(){var S=s.indexOf(this);s.splice(S,1),a()},y.render=function(){return Gi.createElement(i,this.props)},g}(L.PureComponent);return w0e(h,"displayName","SideEffect("+n(i)+")"),h}}var Gu=function(t){for(var e=Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e},$m=function(t){return Array.isArray(t)?t:[t]},kq=function(t){return Array.isArray(t)?t[0]:t},k0e=function(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(t,null);return!e||!e.getPropertyValue?!1:e.getPropertyValue("display")==="none"||e.getPropertyValue("visibility")==="hidden"},Cq=function(t){return t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode},Tq=function(t){return t===document||t&&t.nodeType===Node.DOCUMENT_NODE},C0e=function(t){return t.hasAttribute("inert")},T0e=function(t,e){return!t||Tq(t)||!k0e(t)&&!C0e(t)&&e(Cq(t))},jq=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=T0e(e,jq.bind(void 0,t));return t.set(e,r),r},j0e=function(t,e){return t&&!Tq(t)?A0e(t)?e(Cq(t)):!1:!0},Pq=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=j0e(e,Pq.bind(void 0,t));return t.set(e,r),r},Oq=function(t){return t.dataset},P0e=function(t){return t.tagName==="BUTTON"},Aq=function(t){return t.tagName==="INPUT"},Eq=function(t){return Aq(t)&&t.type==="radio"},O0e=function(t){return!((Aq(t)||P0e(t))&&(t.type==="hidden"||t.disabled))},A0e=function(t){var e=t.getAttribute(u0e);return![!0,"true",""].includes(e)},L5=function(t){var e;return!!(t&&(!((e=Oq(t))===null||e===void 0)&&e.focusGuard))},YE=function(t){return!L5(t)},E0e=function(t){return!!t},z0e=function(t,e){var n=Math.max(0,t.tabIndex),r=Math.max(0,e.tabIndex),i=n-r,s=t.index-e.index;if(i){if(!n)return 1;if(!r)return-1}return i||s},I0e=function(t){return t.tabIndex<0&&!t.hasAttribute("tabindex")?0:t.tabIndex},F5=function(t,e,n){return Gu(t).map(function(r,i){var s=I0e(r);return{node:r,index:i,tabIndex:n&&s===-1?(r.dataset||{}).focusGuard?0:-1:s}}).filter(function(r){return!e||r.tabIndex>=0}).sort(z0e)},M0e=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],B5=M0e.join(","),R0e="".concat(B5,", [data-focus-guard]"),zq=function(t,e){return Gu((t.shadowRoot||t).children).reduce(function(n,r){return n.concat(r.matches(e?R0e:B5)?[r]:[],zq(r))},[])},D0e=function(t,e){var n;return t instanceof HTMLIFrameElement&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?R0([t.contentDocument.body],e):[t]},R0=function(t,e){return t.reduce(function(n,r){var i,s=zq(r,e),o=(i=[]).concat.apply(i,s.map(function(a){return D0e(a,e)}));return n.concat(o,r.parentNode?Gu(r.parentNode.querySelectorAll(B5)).filter(function(a){return a===r}):[])},[])},L0e=function(t){var e=t.querySelectorAll("[".concat(c0e,"]"));return Gu(e).map(function(n){return R0([n])}).reduce(function(n,r){return n.concat(r)},[])},$5=function(t,e){return Gu(t).filter(function(n){return jq(e,n)}).filter(function(n){return O0e(n)})},_B=function(t,e){return e===void 0&&(e=new Map),Gu(t).filter(function(n){return Pq(e,n)})},N5=function(t,e,n){return F5($5(R0(t,n),e),!0,n)},b1=function(t,e){return F5($5(R0(t),e),!1)},F0e=function(t,e){return $5(L0e(t),e)},wm=function(t,e){return t.shadowRoot?wm(t.shadowRoot,e):Object.getPrototypeOf(t).contains!==void 0&&Object.getPrototypeOf(t).contains.call(t,e)?!0:Gu(t.children).some(function(n){var r;if(n instanceof HTMLIFrameElement){var i=(r=n.contentDocument)===null||r===void 0?void 0:r.body;return i?wm(i,e):!1}return wm(n,e)})},B0e=function(t){for(var e=new Set,n=t.length,r=0;r<n;r+=1)for(var i=r+1;i<n;i+=1){var s=t[r].compareDocumentPosition(t[i]);(s&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&e.add(i),(s&Node.DOCUMENT_POSITION_CONTAINS)>0&&e.add(r)}return t.filter(function(o,a){return!e.has(a)})},Iq=function(t){return t.parentNode?Iq(t.parentNode):t},V5=function(t){var e=$m(t);return e.filter(Boolean).reduce(function(n,r){var i=r.getAttribute(KE);return n.push.apply(n,i?B0e(Gu(Iq(r).querySelectorAll("[".concat(KE,'="').concat(i,'"]:not([').concat(mq,'="disabled"])')))):[r]),n},[])},$0e=function(t){try{return t()}catch{return}},_1=function(t){if(t===void 0&&(t=document),!(!t||!t.activeElement)){var e=t.activeElement;return e.shadowRoot?_1(e.shadowRoot):e instanceof HTMLIFrameElement&&$0e(function(){return e.contentWindow.document})?_1(e.contentWindow.document):e}},N0e=function(t,e){return t===e},V0e=function(t,e){return!!Gu(t.querySelectorAll("iframe")).some(function(n){return N0e(n,e)})},Mq=function(t,e){return e===void 0&&(e=_1(kq(t).ownerDocument)),!e||e.dataset&&e.dataset.focusGuard?!1:V5(t).some(function(n){return wm(n,e)||V0e(n,e)})},W0e=function(t){t===void 0&&(t=document);var e=_1(t);return e?Gu(t.querySelectorAll("[".concat(l0e,"]"))).some(function(n){return wm(n,e)}):!1},U0e=function(t,e){return e.filter(Eq).filter(function(n){return n.name===t.name}).filter(function(n){return n.checked})[0]||t},W5=function(t,e){return Eq(t)&&t.name?U0e(t,e):t},q0e=function(t){var e=new Set;return t.forEach(function(n){return e.add(W5(n,t))}),t.filter(function(n){return e.has(n)})},wB=function(t){return t[0]&&t.length>1?W5(t[0],t):t[0]},SB=function(t,e){return t.indexOf(W5(e,t))},JE="NEW_FOCUS",Q0e=function(t,e,n,r,i){var s=t.length,o=t[0],a=t[s-1],h=L5(r);if(!(r&&t.indexOf(r)>=0)){var p=r!==void 0?n.indexOf(r):-1,g=i?n.indexOf(i):p,y=i?t.indexOf(i):-1;if(p===-1)return y!==-1?y:JE;if(y===-1)return JE;var b=p-g,S=n.indexOf(o),P=n.indexOf(a),O=q0e(n),D=r!==void 0?O.indexOf(r):-1,z=i?O.indexOf(i):D,F=O.filter(function(K){return K.tabIndex>=0}),R=r!==void 0?F.indexOf(r):-1,N=i?F.indexOf(i):R,Q=R>=0&&N>=0?N-R:z-D;if(!b&&y>=0||e.length===0)return y;var q=SB(t,e[0]),X=SB(t,e[e.length-1]);if(p<=S&&h&&Math.abs(b)>1)return X;if(p>=P&&h&&Math.abs(b)>1)return q;if(b&&Math.abs(Q)>1)return y;if(p<=S)return X;if(p>P)return q;if(b)return Math.abs(b)>1?y:(s+y+b)%s}},H0e=function(t){return function(e){var n,r=(n=Oq(e))===null||n===void 0?void 0:n.autofocus;return e.autofocus||r!==void 0&&r!=="false"||t.indexOf(e)>=0}},kB=function(t,e,n){var r=t.map(function(s){var o=s.node;return o}),i=_B(r.filter(H0e(n)));return i&&i.length?wB(i):wB(_B(e))},ez=function(t,e){return e===void 0&&(e=[]),e.push(t),t.parentNode&&ez(t.parentNode.host||t.parentNode,e),e},oO=function(t,e){for(var n=ez(t),r=ez(e),i=0;i<n.length;i+=1){var s=n[i];if(r.indexOf(s)>=0)return s}return!1},Rq=function(t,e,n){var r=$m(t),i=$m(e),s=r[0],o=!1;return i.filter(Boolean).forEach(function(a){o=oO(o||a,a)||o,n.filter(Boolean).forEach(function(h){var p=oO(s,h);p&&(!o||wm(p,o)?o=p:o=oO(p,o))})}),o},CB=function(t,e){return t.reduce(function(n,r){return n.concat(F0e(r,e))},[])},G0e=function(t,e){var n=new Map;return e.forEach(function(r){return n.set(r.node,r)}),t.map(function(r){return n.get(r)}).filter(E0e)},X0e=function(t,e){var n=_1($m(t).length>0?document:kq(t).ownerDocument),r=V5(t).filter(YE),i=Rq(n||t,t,r),s=new Map,o=b1(r,s),a=o.filter(function(P){var O=P.node;return YE(O)});if(a[0]){var h=b1([i],s).map(function(P){var O=P.node;return O}),p=G0e(h,a),g=p.map(function(P){var O=P.node;return O}),y=p.filter(function(P){var O=P.tabIndex;return O>=0}).map(function(P){var O=P.node;return O}),b=Q0e(g,y,h,n,e);if(b===JE){var S=kB(o,y,CB(r,s))||kB(o,g,CB(r,s));if(S)return{node:S};console.warn("focus-lock: cannot find any node to move focus into");return}return b===void 0?b:p[b]}},K0e=function(t){var e=V5(t).filter(YE),n=Rq(t,t,e),r=F5(R0([n],!0),!0,!0),i=R0(e,!1);return r.map(function(s){var o=s.node,a=s.index;return{node:o,index:a,lockItem:i.indexOf(o)>=0,guard:L5(o)}})},U5=function(t,e){t&&("focus"in t&&t.focus(e),"contentWindow"in t&&t.contentWindow&&t.contentWindow.focus())},aO=0,lO=!1,Dq=function(t,e,n){n===void 0&&(n={});var r=X0e(t,e);if(!lO&&r){if(aO>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),lO=!0,setTimeout(function(){lO=!1},1);return}aO++,U5(r.node,n.focusOptions),aO--}};function Mv(t){if(!t)return null;if(typeof WeakRef>"u")return function(){return t||null};var e=t?new WeakRef(t):null;return function(){return(e==null?void 0:e.deref())||null}}var Z0e=function(t){if(!t)return null;for(var e=[],n=t;n&&n!==document.body;)e.push({current:Mv(n),parent:Mv(n.parentElement),left:Mv(n.previousElementSibling),right:Mv(n.nextElementSibling)}),n=n.parentElement;return{element:Mv(t),stack:e,ownerDocument:t.ownerDocument}},Y0e=function(t){var e,n,r,i,s;if(t)for(var o=t.stack,a=t.ownerDocument,h=new Map,p=0,g=o;p<g.length;p++){var y=g[p],b=(e=y.parent)===null||e===void 0?void 0:e.call(y);if(b&&a.contains(b)){for(var S=(n=y.left)===null||n===void 0?void 0:n.call(y),P=y.current(),O=b.contains(P)?P:void 0,D=(r=y.right)===null||r===void 0?void 0:r.call(y),z=N5([b],h),F=(s=(i=O??(S==null?void 0:S.nextElementSibling))!==null&&i!==void 0?i:D)!==null&&s!==void 0?s:S;F;){for(var R=0,N=z;R<N.length;R++){var Q=N[R];if(F!=null&&F.contains(Q.node))return Q.node}F=F.nextElementSibling}if(z.length)return z[0].node}}},Lq=function(t){var e=Z0e(t);return function(){return Y0e(e)}},J0e=function(t,e,n){if(!t||!e)return console.error("no element or scope given"),{};var r=$m(e);if(r.every(function(o){return!wm(o,t)}))return console.error("Active element is not contained in the scope"),{};var i=n?N5(r,new Map):b1(r,new Map),s=i.findIndex(function(o){var a=o.node;return a===t});if(s!==-1)return{prev:i[s-1],next:i[s+1],first:i[0],last:i[i.length-1]}},exe=function(t,e){var n=e?N5($m(t),new Map):b1($m(t),new Map);return{first:n[0],last:n[n.length-1]}},txe=function(t){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},t)},Fq=function(t,e,n){e===void 0&&(e={});var r=txe(e),i=J0e(t,r.scope,r.onlyTabbable);if(i){var s=n(i,r.cycle);s&&U5(s.node,r.focusOptions)}},nxe=function(t,e){e===void 0&&(e={}),Fq(t,e,function(n,r){var i=n.next,s=n.first;return i||r&&s})},rxe=function(t,e){e===void 0&&(e={}),Fq(t,e,function(n,r){var i=n.prev,s=n.last;return i||r&&s})},Bq=function(t,e,n){var r,i=exe(t,(r=e.onlyTabbable)!==null&&r!==void 0?r:!0),s=i[n];s&&U5(s.node,e.focusOptions)},ixe=function(t,e){e===void 0&&(e={}),Bq(t,e,"first")},sxe=function(t,e){e===void 0&&(e={}),Bq(t,e,"last")};function q5(t){setTimeout(t,1)}var oxe=function(e){return e&&"current"in e?e.current:e},$q=function(){return document&&document.activeElement===document.body},axe=function(){return $q()||W0e()},Zy=null,Sa=null,TB=function(){return null},Yy=null,w1=!1,Q5=!1,lxe=function(){return!0},cxe=function(e){return(Zy.whiteList||lxe)(e)},uxe=function(e,n){Yy={observerNode:e,portaledElement:n}},hxe=function(e){return Yy&&Yy.portaledElement===e};function jB(t,e,n,r){var i=null,s=t;do{var o=r[s];if(o.guard)o.node.dataset.focusAutoGuard&&(i=o);else if(o.lockItem){if(s!==t)return;i=null}else break}while((s+=n)!==e);i&&(i.node.tabIndex=0)}var dxe=function(e){return e?!!w1:w1==="meanwhile"},fxe=function t(e,n,r){return n&&(n.host===e&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&t(e,n.parentNode,r))},pxe=function(e,n){return n.some(function(r){return fxe(e,r,r)})},Nq=function(e){return b1(e,new Map)},mxe=function(e){return!Nq([e.parentNode]).some(function(n){return n.node===e})},j2=function(){var e=!1;if(Zy){var n=Zy,r=n.observed,i=n.persistentFocus,s=n.autoFocus,o=n.shards,a=n.crossFrame,h=n.focusOptions,p=n.noFocusGuards,g=r||Yy&&Yy.portaledElement;if($q()&&Sa&&Sa!==document.body&&(!document.body.contains(Sa)||mxe(Sa))){var y=TB();y&&y.focus()}var b=document&&document.activeElement;if(g){var S=[g].concat(o.map(oxe).filter(Boolean)),P=function(){if(!dxe(a)||!p||!Sa||Q5)return!1;var R=Nq(S),N=R.findIndex(function(Q){var q=Q.node;return q===Sa});return N===0||N===R.length-1};if((!b||cxe(b))&&(i||P()||!axe()||!Sa&&s)&&(g&&!(Mq(S)||b&&pxe(b,S)||hxe(b))&&(document&&!Sa&&b&&!s?(b.blur&&b.blur(),document.body.focus()):(e=Dq(S,Sa,{focusOptions:h}),Yy={})),Sa=document&&document.activeElement,Sa!==document.body&&(TB=Lq(Sa)),w1=!1),document&&b!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var O=document&&document.activeElement,D=K0e(S),z=D.map(function(F){var R=F.node;return R}).indexOf(O);z>-1&&(D.filter(function(F){var R=F.guard,N=F.node;return R&&N.dataset.focusAutoGuard}).forEach(function(F){var R=F.node;return R.removeAttribute("tabIndex")}),jB(z,D.length,1,D),jB(z,-1,-1,D))}}}return e},Vq=function(e){j2()&&e&&(e.stopPropagation(),e.preventDefault())},H5=function(){return q5(j2)},gxe=function(e){var n=e.target,r=e.currentTarget;r.contains(n)||uxe(r,n)},yxe=function(){return null},Wq=function(){Q5=!0},Uq=function(){Q5=!1,w1="just",q5(function(){w1="meanwhile"})},xxe=function(){document.addEventListener("focusin",Vq),document.addEventListener("focusout",H5),window.addEventListener("focus",Wq),window.addEventListener("blur",Uq)},vxe=function(){document.removeEventListener("focusin",Vq),document.removeEventListener("focusout",H5),window.removeEventListener("focus",Wq),window.removeEventListener("blur",Uq)};function bxe(t){return t.filter(function(e){var n=e.disabled;return!n})}var qq={moveFocusInside:Dq,focusInside:Mq,focusNextElement:nxe,focusPrevElement:rxe,focusFirstElement:ixe,focusLastElement:sxe,captureFocusRestore:Lq};function _xe(t){var e=t.slice(-1)[0];e&&!Zy&&xxe();var n=Zy,r=n&&e&&e.id===n.id;Zy=e,n&&!r&&(n.onDeactivation(),t.filter(function(i){var s=i.id;return s===n.id}).length||n.returnFocus(!e)),e?(Sa=null,(!r||n.observed!==e.observed)&&e.onActivation(qq),j2(),q5(j2)):(vxe(),Sa=null)}wq.assignSyncMedium(gxe);Sq.assignMedium(H5);m0e.assignMedium(function(t){return t(qq)});const wxe=S0e(bxe,_xe)(yxe);var tz=L.forwardRef(function(e,n){return Gi.createElement(D5,If({sideCar:wxe,ref:n},e))}),Qq=D5.propTypes||{};Qq.sideCar;pq(Qq,["sideCar"]);tz.propTypes={};const Sxe=tz.default??tz,Hq=t=>{const{initialFocusRef:e,finalFocusRef:n,contentRef:r,restoreFocus:i,children:s,isDisabled:o,autoFocus:a,persistentFocus:h,lockFocusAcrossFrames:p}=t,g=L.useCallback(()=>{e!=null&&e.current?e.current.focus():r!=null&&r.current&&Rne(r.current).length===0&&requestAnimationFrame(()=>{var P;(P=r.current)==null||P.focus()})},[e,r]),y=L.useCallback(()=>{var S;(S=n==null?void 0:n.current)==null||S.focus()},[n]),b=i&&!n;return u.jsx(Sxe,{crossFrame:p,persistentFocus:h,autoFocus:a,disabled:o,onActivation:g,onDeactivation:y,returnFocus:b,children:s})};Hq.displayName="FocusLock";const Mt=Pt(function(e,n){const r=Ga("FormLabel",e),i=Mr(e),{className:s,children:o,requiredIndicator:a=u.jsx(Gq,{}),optionalIndicator:h=null,...p}=i,g=y_(),y=(g==null?void 0:g.getLabelProps(p,n))??{ref:n,...p};return u.jsxs(gt.label,{...y,className:ln("chakra-form__label",i.className),__css:{display:"block",textAlign:"start",...r},children:[o,g!=null&&g.isRequired?a:h]})});Mt.displayName="FormLabel";const Gq=Pt(function(e,n){const r=y_(),i=uq();if(!(r!=null&&r.isRequired))return null;const s=ln("chakra-form__required-indicator",e.className);return u.jsx(gt.span,{...r==null?void 0:r.getRequiredIndicatorProps(e,n),__css:i.requiredIndicator,className:s})});Gq.displayName="RequiredIndicator";const Xq=Pt(function(e,n){const{templateAreas:r,gap:i,rowGap:s,columnGap:o,column:a,row:h,autoFlow:p,autoRows:g,templateRows:y,autoColumns:b,templateColumns:S,...P}=e,O={display:"grid",gridTemplateAreas:r,gridGap:i,gridRowGap:s,gridColumnGap:o,gridAutoColumns:b,gridColumn:a,gridRow:h,gridAutoFlow:p,gridAutoRows:g,gridTemplateRows:y,gridTemplateColumns:S};return u.jsx(gt.div,{ref:n,__css:O,...P})});Xq.displayName="Grid";const Gn=Pt(function(e,n){const{columns:r,spacingX:i,spacingY:s,spacing:o,minChildWidth:a,...h}=e,p=sx(),g=a?Cxe(a,p):Txe(r);return u.jsx(Xq,{ref:n,gap:o,columnGap:i,rowGap:s,templateColumns:g,...h})});Gn.displayName="SimpleGrid";function kxe(t){return typeof t=="number"?`${t}px`:t}function Cxe(t,e){return LM(t,n=>{const r=Lge("sizes",n,kxe(n))(e);return n===null?null:`repeat(auto-fit, minmax(${r}, 1fr))`})}function Txe(t){return LM(t,e=>e===null?null:`repeat(${e}, minmax(0, 1fr))`)}const nz=Pt(function(e,n){const{htmlWidth:r,htmlHeight:i,alt:s,...o}=e;return u.jsx("img",{width:r,height:i,ref:n,alt:s,...o})});nz.displayName="NativeImage";const Kq=Pt(function(e,n){const{fallbackSrc:r,fallback:i,src:s,srcSet:o,align:a,fit:h,loading:p,ignoreFallback:g,crossOrigin:y,fallbackStrategy:b="beforeLoadOrError",referrerPolicy:S,...P}=e,O=r!==void 0||i!==void 0,D=p!=null||g||!O,z=Cye({...e,crossOrigin:y,ignoreFallback:D}),F=Tye(z,b),R={ref:n,objectFit:h,objectPosition:a,...D?P:s_(P,["onError","onLoad"])};return F?i||u.jsx(gt.img,{as:nz,className:"chakra-image__placeholder",src:r,...R}):u.jsx(gt.img,{as:nz,src:s,srcSet:o,crossOrigin:y,loading:p,referrerPolicy:S,className:"chakra-image",...R})});Kq.displayName="Image";const Rn=Pt(function(e,n){const{htmlSize:r,...i}=e,s=xs("Input",i),o=Mr(i),a=I5(o),h=ln("chakra-input",e.className);return u.jsx(gt.input,{size:r,...a,__css:s.field,ref:n,className:h})});Rn.displayName="Input";Rn.id="Input";const[jxe,Pxe]=Or({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),Ta=Pt(function(e,n){const r=xs("Input",e),{children:i,className:s,...o}=Mr(e),a=ln("chakra-input__group",s),h={},p=OC(i),g=r.field;p.forEach(b=>{r&&(g&&b.type.id==="InputLeftElement"&&(h.paddingStart=g.height??g.h),g&&b.type.id==="InputRightElement"&&(h.paddingEnd=g.height??g.h),b.type.id==="InputRightAddon"&&(h.borderEndRadius=0),b.type.id==="InputLeftAddon"&&(h.borderStartRadius=0))});const y=p.map(b=>{var P,O;const S=AC({size:((P=b.props)==null?void 0:P.size)||e.size,variant:((O=b.props)==null?void 0:O.variant)||e.variant});return b.type.id!=="Input"?L.cloneElement(b,S):L.cloneElement(b,Object.assign(S,h,b.props))});return u.jsx(gt.div,{className:a,ref:n,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...r.group},"data-group":!0,...o,children:u.jsx(jxe,{value:r,children:y})})});Ta.displayName="InputGroup";const Oxe=gt("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),aT=Pt(function(e,n){const{placement:r="left",...i}=e,s=Pxe(),o=s.field,h={[r==="left"?"insetStart":"insetEnd"]:"0",width:(o==null?void 0:o.height)??(o==null?void 0:o.h),height:(o==null?void 0:o.height)??(o==null?void 0:o.h),fontSize:o==null?void 0:o.fontSize,...s.element};return u.jsx(Oxe,{ref:n,__css:h,...i})});aT.id="InputElement";aT.displayName="InputElement";const Wl=Pt(function(e,n){const{className:r,...i}=e,s=ln("chakra-input__left-element",r);return u.jsx(aT,{ref:n,placement:"left",className:s,...i})});Wl.id="InputLeftElement";Wl.displayName="InputLeftElement";const S1=Pt(function(e,n){const{className:r,...i}=e,s=ln("chakra-input__right-element",r);return u.jsx(aT,{ref:n,placement:"right",className:s,...i})});S1.id="InputRightElement";S1.displayName="InputRightElement";const ks=Pt(function(e,n){const r=Ga("Kbd",e),{className:i,...s}=Mr(e);return u.jsx(gt.kbd,{ref:n,className:ln("chakra-kbd",i),...s,__css:{fontFamily:"mono",...r}})});ks.displayName="Kbd";const Zq=Pt(function(e,n){const r=Ga("Link",e),{className:i,isExternal:s,...o}=Mr(e);return u.jsx(gt.a,{target:s?"_blank":void 0,rel:s?"noopener":void 0,ref:n,className:ln("chakra-link",i),...o,__css:r})});Zq.displayName="Link";const[Axe,Yq]=Or({name:"ListStylesContext",errorMessage:`useListStyles returned is 'undefined'. Seems you forgot to wrap the components in "<List />" `}),x_=Pt(function(e,n){const r=xs("List",e),{children:i,styleType:s="none",stylePosition:o,spacing:a,...h}=Mr(e),p=OC(i),y=a?{["& > *:not(style) ~ *:not(style)"]:{mt:a}}:{};return u.jsx(Axe,{value:r,children:u.jsx(gt.ul,{ref:n,listStyleType:s,listStylePosition:o,role:"list",__css:{...r.container,...y},...h,children:p})})});x_.displayName="List";const Exe=Pt((t,e)=>{const{as:n,...r}=t;return u.jsx(x_,{ref:e,as:"ol",styleType:"decimal",marginStart:"1em",...r})});Exe.displayName="OrderedList";const zxe=Pt(function(e,n){const{as:r,...i}=e;return u.jsx(x_,{ref:n,as:"ul",styleType:"initial",marginStart:"1em",...i})});zxe.displayName="UnorderedList";const G5=Pt(function(e,n){const r=Yq();return u.jsx(gt.li,{ref:n,...e,__css:r.item})});G5.displayName="ListItem";const X5=Pt(function(e,n){const r=Yq();return u.jsx(Le,{ref:n,role:"presentation",...e,__css:r.icon})});X5.displayName="ListIcon";function Ixe(t,e,n,r){if(e==null)return r;if(!r)return t.find(o=>n(o).toLowerCase().startsWith(e.toLowerCase()));const i=t.filter(s=>n(s).toLowerCase().startsWith(e.toLowerCase()));if(i.length>0){let s;return i.includes(r)?(s=i.indexOf(r)+1,s===i.length&&(s=0),i[s]):(s=t.indexOf(i[0]),t[s])}return r}function Mxe(t){const{key:e}=t;return e.length===1||e.length>1&&/[^a-zA-Z0-9]/.test(e)}function Rxe(t={}){const{timeout:e=300,preventDefault:n=()=>!0}=t,[r,i]=L.useState([]),s=L.useRef(void 0),o=()=>{s.current&&(clearTimeout(s.current),s.current=null)},a=()=>{o(),s.current=setTimeout(()=>{i([]),s.current=null},e)};L.useEffect(()=>o,[]);function h(p){return g=>{if(g.key==="Backspace"){const y=[...r];y.pop(),i(y);return}if(Mxe(g)){const y=r.concat(g.key);n(g)&&(g.preventDefault(),g.stopPropagation()),i(y),p(y.join("")),a()}}}return h}var Va="top",hc="bottom",dc="right",Wa="left",K5="auto",v_=[Va,hc,dc,Wa],D0="start",k1="end",Dxe="clippingParents",Jq="viewport",Rv="popper",Lxe="reference",PB=v_.reduce(function(t,e){return t.concat([e+"-"+D0,e+"-"+k1])},[]),eQ=[].concat(v_,[K5]).reduce(function(t,e){return t.concat([e,e+"-"+D0,e+"-"+k1])},[]),Fxe="beforeRead",Bxe="read",$xe="afterRead",Nxe="beforeMain",Vxe="main",Wxe="afterMain",Uxe="beforeWrite",qxe="write",Qxe="afterWrite",Hxe=[Fxe,Bxe,$xe,Nxe,Vxe,Wxe,Uxe,qxe,Qxe];function Hu(t){return t?(t.nodeName||"").toLowerCase():null}function kl(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Nm(t){var e=kl(t).Element;return t instanceof e||t instanceof Element}function lc(t){var e=kl(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Z5(t){if(typeof ShadowRoot>"u")return!1;var e=kl(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Gxe(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!lc(s)||!Hu(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function Xxe(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(h,p){return h[p]="",h},{});!lc(i)||!Hu(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(h){i.removeAttribute(h)}))})}}const Kxe={name:"applyStyles",enabled:!0,phase:"write",fn:Gxe,effect:Xxe,requires:["computeStyles"]};function Wu(t){return t.split("-")[0]}var Sm=Math.max,P2=Math.min,L0=Math.round;function rz(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function tQ(){return!/^((?!chrome|android).)*safari/i.test(rz())}function F0(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&lc(t)&&(i=t.offsetWidth>0&&L0(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&L0(r.height)/t.offsetHeight||1);var o=Nm(t)?kl(t):window,a=o.visualViewport,h=!tQ()&&n,p=(r.left+(h&&a?a.offsetLeft:0))/i,g=(r.top+(h&&a?a.offsetTop:0))/s,y=r.width/i,b=r.height/s;return{width:y,height:b,top:g,right:p+y,bottom:g+b,left:p,x:p,y:g}}function Y5(t){var e=F0(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function nQ(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Z5(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Hh(t){return kl(t).getComputedStyle(t)}function Zxe(t){return["table","td","th"].indexOf(Hu(t))>=0}function ep(t){return((Nm(t)?t.ownerDocument:t.document)||window.document).documentElement}function lT(t){return Hu(t)==="html"?t:t.assignedSlot||t.parentNode||(Z5(t)?t.host:null)||ep(t)}function OB(t){return!lc(t)||Hh(t).position==="fixed"?null:t.offsetParent}function Yxe(t){var e=/firefox/i.test(rz()),n=/Trident/i.test(rz());if(n&&lc(t)){var r=Hh(t);if(r.position==="fixed")return null}var i=lT(t);for(Z5(i)&&(i=i.host);lc(i)&&["html","body"].indexOf(Hu(i))<0;){var s=Hh(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function b_(t){for(var e=kl(t),n=OB(t);n&&Zxe(n)&&Hh(n).position==="static";)n=OB(n);return n&&(Hu(n)==="html"||Hu(n)==="body"&&Hh(n).position==="static")?e:n||Yxe(t)||e}function J5(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Eb(t,e,n){return Sm(t,P2(e,n))}function Jxe(t,e,n){var r=Eb(t,e,n);return r>n?n:r}function rQ(){return{top:0,right:0,bottom:0,left:0}}function iQ(t){return Object.assign({},rQ(),t)}function sQ(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var eve=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,iQ(typeof e!="number"?e:sQ(e,v_))};function tve(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Wu(n.placement),h=J5(a),p=[Wa,dc].indexOf(a)>=0,g=p?"height":"width";if(!(!s||!o)){var y=eve(i.padding,n),b=Y5(s),S=h==="y"?Va:Wa,P=h==="y"?hc:dc,O=n.rects.reference[g]+n.rects.reference[h]-o[h]-n.rects.popper[g],D=o[h]-n.rects.reference[h],z=b_(s),F=z?h==="y"?z.clientHeight||0:z.clientWidth||0:0,R=O/2-D/2,N=y[S],Q=F-b[g]-y[P],q=F/2-b[g]/2+R,X=Eb(N,q,Q),K=h;n.modifiersData[r]=(e={},e[K]=X,e.centerOffset=X-q,e)}}function nve(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||nQ(e.elements.popper,i)&&(e.elements.arrow=i))}const rve={name:"arrow",enabled:!0,phase:"main",fn:tve,effect:nve,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function B0(t){return t.split("-")[1]}var ive={top:"auto",right:"auto",bottom:"auto",left:"auto"};function sve(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:L0(n*i)/i||0,y:L0(r*i)/i||0}}function AB(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,h=t.gpuAcceleration,p=t.adaptive,g=t.roundOffsets,y=t.isFixed,b=o.x,S=b===void 0?0:b,P=o.y,O=P===void 0?0:P,D=typeof g=="function"?g({x:S,y:O}):{x:S,y:O};S=D.x,O=D.y;var z=o.hasOwnProperty("x"),F=o.hasOwnProperty("y"),R=Wa,N=Va,Q=window;if(p){var q=b_(n),X="clientHeight",K="clientWidth";if(q===kl(n)&&(q=ep(n),Hh(q).position!=="static"&&a==="absolute"&&(X="scrollHeight",K="scrollWidth")),q=q,i===Va||(i===Wa||i===dc)&&s===k1){N=hc;var ne=y&&q===Q&&Q.visualViewport?Q.visualViewport.height:q[X];O-=ne-r.height,O*=h?1:-1}if(i===Wa||(i===Va||i===hc)&&s===k1){R=dc;var J=y&&q===Q&&Q.visualViewport?Q.visualViewport.width:q[K];S-=J-r.width,S*=h?1:-1}}var ae=Object.assign({position:a},p&&ive),Ee=g===!0?sve({x:S,y:O},kl(n)):{x:S,y:O};if(S=Ee.x,O=Ee.y,h){var Ce;return Object.assign({},ae,(Ce={},Ce[N]=F?"0":"",Ce[R]=z?"0":"",Ce.transform=(Q.devicePixelRatio||1)<=1?"translate("+S+"px, "+O+"px)":"translate3d("+S+"px, "+O+"px, 0)",Ce))}return Object.assign({},ae,(e={},e[N]=F?O+"px":"",e[R]=z?S+"px":"",e.transform="",e))}function ove(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,h=a===void 0?!0:a,p={placement:Wu(e.placement),variation:B0(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,AB(Object.assign({},p,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,AB(Object.assign({},p,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const ave={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ove,data:{}};var pS={passive:!0};function lve(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,h=kl(e.elements.popper),p=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&p.forEach(function(g){g.addEventListener("scroll",n.update,pS)}),a&&h.addEventListener("resize",n.update,pS),function(){s&&p.forEach(function(g){g.removeEventListener("scroll",n.update,pS)}),a&&h.removeEventListener("resize",n.update,pS)}}const cve={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:lve,data:{}};var uve={left:"right",right:"left",bottom:"top",top:"bottom"};function Sk(t){return t.replace(/left|right|bottom|top/g,function(e){return uve[e]})}var hve={start:"end",end:"start"};function EB(t){return t.replace(/start|end/g,function(e){return hve[e]})}function eR(t){var e=kl(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function tR(t){return F0(ep(t)).left+eR(t).scrollLeft}function dve(t,e){var n=kl(t),r=ep(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,h=0;if(i){s=i.width,o=i.height;var p=tQ();(p||!p&&e==="fixed")&&(a=i.offsetLeft,h=i.offsetTop)}return{width:s,height:o,x:a+tR(t),y:h}}function fve(t){var e,n=ep(t),r=eR(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Sm(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Sm(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+tR(t),h=-r.scrollTop;return Hh(i||n).direction==="rtl"&&(a+=Sm(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:h}}function nR(t){var e=Hh(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function oQ(t){return["html","body","#document"].indexOf(Hu(t))>=0?t.ownerDocument.body:lc(t)&&nR(t)?t:oQ(lT(t))}function zb(t,e){var n;e===void 0&&(e=[]);var r=oQ(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=kl(r),o=i?[s].concat(s.visualViewport||[],nR(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(zb(lT(o)))}function iz(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function pve(t,e){var n=F0(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function zB(t,e,n){return e===Jq?iz(dve(t,n)):Nm(e)?pve(e,n):iz(fve(ep(t)))}function mve(t){var e=zb(lT(t)),n=["absolute","fixed"].indexOf(Hh(t).position)>=0,r=n&&lc(t)?b_(t):t;return Nm(r)?e.filter(function(i){return Nm(i)&&nQ(i,r)&&Hu(i)!=="body"}):[]}function gve(t,e,n,r){var i=e==="clippingParents"?mve(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(h,p){var g=zB(t,p,r);return h.top=Sm(g.top,h.top),h.right=P2(g.right,h.right),h.bottom=P2(g.bottom,h.bottom),h.left=Sm(g.left,h.left),h},zB(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function aQ(t){var e=t.reference,n=t.element,r=t.placement,i=r?Wu(r):null,s=r?B0(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,h;switch(i){case Va:h={x:o,y:e.y-n.height};break;case hc:h={x:o,y:e.y+e.height};break;case dc:h={x:e.x+e.width,y:a};break;case Wa:h={x:e.x-n.width,y:a};break;default:h={x:e.x,y:e.y}}var p=i?J5(i):null;if(p!=null){var g=p==="y"?"height":"width";switch(s){case D0:h[p]=h[p]-(e[g]/2-n[g]/2);break;case k1:h[p]=h[p]+(e[g]/2-n[g]/2);break}}return h}function C1(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,h=a===void 0?Dxe:a,p=n.rootBoundary,g=p===void 0?Jq:p,y=n.elementContext,b=y===void 0?Rv:y,S=n.altBoundary,P=S===void 0?!1:S,O=n.padding,D=O===void 0?0:O,z=iQ(typeof D!="number"?D:sQ(D,v_)),F=b===Rv?Lxe:Rv,R=t.rects.popper,N=t.elements[P?F:b],Q=gve(Nm(N)?N:N.contextElement||ep(t.elements.popper),h,g,o),q=F0(t.elements.reference),X=aQ({reference:q,element:R,placement:i}),K=iz(Object.assign({},R,X)),ne=b===Rv?K:q,J={top:Q.top-ne.top+z.top,bottom:ne.bottom-Q.bottom+z.bottom,left:Q.left-ne.left+z.left,right:ne.right-Q.right+z.right},ae=t.modifiersData.offset;if(b===Rv&&ae){var Ee=ae[i];Object.keys(J).forEach(function(Ce){var $e=[dc,hc].indexOf(Ce)>=0?1:-1,We=[Va,hc].indexOf(Ce)>=0?"y":"x";J[Ce]+=Ee[We]*$e})}return J}function yve(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,h=n.allowedAutoPlacements,p=h===void 0?eQ:h,g=B0(r),y=g?a?PB:PB.filter(function(P){return B0(P)===g}):v_,b=y.filter(function(P){return p.indexOf(P)>=0});b.length===0&&(b=y);var S=b.reduce(function(P,O){return P[O]=C1(t,{placement:O,boundary:i,rootBoundary:s,padding:o})[Wu(O)],P},{});return Object.keys(S).sort(function(P,O){return S[P]-S[O]})}function xve(t){if(Wu(t)===K5)return[];var e=Sk(t);return[EB(t),e,EB(e)]}function vve(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,h=n.fallbackPlacements,p=n.padding,g=n.boundary,y=n.rootBoundary,b=n.altBoundary,S=n.flipVariations,P=S===void 0?!0:S,O=n.allowedAutoPlacements,D=e.options.placement,z=Wu(D),F=z===D,R=h||(F||!P?[Sk(D)]:xve(D)),N=[D].concat(R).reduce(function(nt,Ne){return nt.concat(Wu(Ne)===K5?yve(e,{placement:Ne,boundary:g,rootBoundary:y,padding:p,flipVariations:P,allowedAutoPlacements:O}):Ne)},[]),Q=e.rects.reference,q=e.rects.popper,X=new Map,K=!0,ne=N[0],J=0;J<N.length;J++){var ae=N[J],Ee=Wu(ae),Ce=B0(ae)===D0,$e=[Va,hc].indexOf(Ee)>=0,We=$e?"width":"height",Fe=C1(e,{placement:ae,boundary:g,rootBoundary:y,altBoundary:b,padding:p}),we=$e?Ce?dc:Wa:Ce?hc:Va;Q[We]>q[We]&&(we=Sk(we));var Ie=Sk(we),Qe=[];if(s&&Qe.push(Fe[Ee]<=0),a&&Qe.push(Fe[we]<=0,Fe[Ie]<=0),Qe.every(function(nt){return nt})){ne=ae,K=!1;break}X.set(ae,Qe)}if(K)for(var se=P?3:1,Re=function(Ne){var tt=N.find(function(Ye){var _t=X.get(Ye);if(_t)return _t.slice(0,Ne).every(function(At){return At})});if(tt)return ne=tt,"break"},Oe=se;Oe>0;Oe--){var oe=Re(Oe);if(oe==="break")break}e.placement!==ne&&(e.modifiersData[r]._skip=!0,e.placement=ne,e.reset=!0)}}const bve={name:"flip",enabled:!0,phase:"main",fn:vve,requiresIfExists:["offset"],data:{_skip:!1}};function IB(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function MB(t){return[Va,dc,hc,Wa].some(function(e){return t[e]>=0})}function _ve(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=C1(e,{elementContext:"reference"}),a=C1(e,{altBoundary:!0}),h=IB(o,r),p=IB(a,i,s),g=MB(h),y=MB(p);e.modifiersData[n]={referenceClippingOffsets:h,popperEscapeOffsets:p,isReferenceHidden:g,hasPopperEscaped:y},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":g,"data-popper-escaped":y})}const wve={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:_ve};function Sve(t,e,n){var r=Wu(t),i=[Wa,Va].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Wa,dc].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function kve(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=eQ.reduce(function(g,y){return g[y]=Sve(y,e.rects,s),g},{}),a=o[e.placement],h=a.x,p=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=p),e.modifiersData[r]=o}const Cve={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:kve};function Tve(t){var e=t.state,n=t.name;e.modifiersData[n]=aQ({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const jve={name:"popperOffsets",enabled:!0,phase:"read",fn:Tve,data:{}};function Pve(t){return t==="x"?"y":"x"}function Ove(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,h=n.boundary,p=n.rootBoundary,g=n.altBoundary,y=n.padding,b=n.tether,S=b===void 0?!0:b,P=n.tetherOffset,O=P===void 0?0:P,D=C1(e,{boundary:h,rootBoundary:p,padding:y,altBoundary:g}),z=Wu(e.placement),F=B0(e.placement),R=!F,N=J5(z),Q=Pve(N),q=e.modifiersData.popperOffsets,X=e.rects.reference,K=e.rects.popper,ne=typeof O=="function"?O(Object.assign({},e.rects,{placement:e.placement})):O,J=typeof ne=="number"?{mainAxis:ne,altAxis:ne}:Object.assign({mainAxis:0,altAxis:0},ne),ae=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Ee={x:0,y:0};if(q){if(s){var Ce,$e=N==="y"?Va:Wa,We=N==="y"?hc:dc,Fe=N==="y"?"height":"width",we=q[N],Ie=we+D[$e],Qe=we-D[We],se=S?-K[Fe]/2:0,Re=F===D0?X[Fe]:K[Fe],Oe=F===D0?-K[Fe]:-X[Fe],oe=e.elements.arrow,nt=S&&oe?Y5(oe):{width:0,height:0},Ne=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:rQ(),tt=Ne[$e],Ye=Ne[We],_t=Eb(0,X[Fe],nt[Fe]),At=R?X[Fe]/2-se-_t-tt-J.mainAxis:Re-_t-tt-J.mainAxis,Ot=R?-X[Fe]/2+se+_t+Ye+J.mainAxis:Oe+_t+Ye+J.mainAxis,bt=e.elements.arrow&&b_(e.elements.arrow),rt=bt?N==="y"?bt.clientTop||0:bt.clientLeft||0:0,tn=(Ce=ae==null?void 0:ae[N])!=null?Ce:0,kt=we+At-tn-rt,it=we+Ot-tn,ze=Eb(S?P2(Ie,kt):Ie,we,S?Sm(Qe,it):Qe);q[N]=ze,Ee[N]=ze-we}if(a){var ut,qt=N==="x"?Va:Wa,Ct=N==="x"?hc:dc,$t=q[Q],Yn=Q==="y"?"height":"width",br=$t+D[qt],ur=$t-D[Ct],Ar=[Va,Wa].indexOf(z)!==-1,_r=(ut=ae==null?void 0:ae[Q])!=null?ut:0,ct=Ar?br:$t-X[Yn]-K[Yn]-_r+J.altAxis,Tt=Ar?$t+X[Yn]+K[Yn]-_r-J.altAxis:ur,Me=S&&Ar?Jxe(ct,$t,Tt):Eb(S?ct:br,$t,S?Tt:ur);q[Q]=Me,Ee[Q]=Me-$t}e.modifiersData[r]=Ee}}const Ave={name:"preventOverflow",enabled:!0,phase:"main",fn:Ove,requiresIfExists:["offset"]};function Eve(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function zve(t){return t===kl(t)||!lc(t)?eR(t):Eve(t)}function Ive(t){var e=t.getBoundingClientRect(),n=L0(e.width)/t.offsetWidth||1,r=L0(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Mve(t,e,n){n===void 0&&(n=!1);var r=lc(e),i=lc(e)&&Ive(e),s=ep(e),o=F0(t,i,n),a={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(r||!r&&!n)&&((Hu(e)!=="body"||nR(s))&&(a=zve(e)),lc(e)?(h=F0(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):s&&(h.x=tR(s))),{x:o.left+a.scrollLeft-h.x,y:o.top+a.scrollTop-h.y,width:o.width,height:o.height}}function Rve(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var h=e.get(a);h&&i(h)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function Dve(t){var e=Rve(t);return Hxe.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function Lve(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Fve(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var RB={placement:"bottom",modifiers:[],strategy:"absolute"};function DB(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Bve(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?RB:i;return function(a,h,p){p===void 0&&(p=s);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},RB,s),modifiersData:{},elements:{reference:a,popper:h},attributes:{},styles:{}},y=[],b=!1,S={state:g,setOptions:function(z){var F=typeof z=="function"?z(g.options):z;O(),g.options=Object.assign({},s,g.options,F),g.scrollParents={reference:Nm(a)?zb(a):a.contextElement?zb(a.contextElement):[],popper:zb(h)};var R=Dve(Fve([].concat(r,g.options.modifiers)));return g.orderedModifiers=R.filter(function(N){return N.enabled}),P(),S.update()},forceUpdate:function(){if(!b){var z=g.elements,F=z.reference,R=z.popper;if(DB(F,R)){g.rects={reference:Mve(F,b_(R),g.options.strategy==="fixed"),popper:Y5(R)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(J){return g.modifiersData[J.name]=Object.assign({},J.data)});for(var N=0;N<g.orderedModifiers.length;N++){if(g.reset===!0){g.reset=!1,N=-1;continue}var Q=g.orderedModifiers[N],q=Q.fn,X=Q.options,K=X===void 0?{}:X,ne=Q.name;typeof q=="function"&&(g=q({state:g,options:K,name:ne,instance:S})||g)}}}},update:Lve(function(){return new Promise(function(D){S.forceUpdate(),D(g)})}),destroy:function(){O(),b=!0}};if(!DB(a,h))return S;S.setOptions(p).then(function(D){!b&&p.onFirstUpdate&&p.onFirstUpdate(D)});function P(){g.orderedModifiers.forEach(function(D){var z=D.name,F=D.options,R=F===void 0?{}:F,N=D.effect;if(typeof N=="function"){var Q=N({state:g,name:z,instance:S,options:R}),q=function(){};y.push(Q||q)}})}function O(){y.forEach(function(D){return D()}),y=[]}return S}}var $ve=[cve,jve,ave,Kxe,Cve,bve,Ave,rve,wve],Nve=Bve({defaultModifiers:$ve});const ty=(t,e)=>({var:t,varRef:e?`var(${t}, ${e})`:`var(${t})`}),co={arrowShadowColor:ty("--popper-arrow-shadow-color"),arrowSize:ty("--popper-arrow-size","8px"),arrowSizeHalf:ty("--popper-arrow-size-half"),arrowBg:ty("--popper-arrow-bg"),transformOrigin:ty("--popper-transform-origin"),arrowOffset:ty("--popper-arrow-offset")};function Vve(t){if(t.includes("top"))return"1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("bottom"))return"-1px -1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("right"))return"-1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("left"))return"1px -1px 0px 0 var(--popper-arrow-shadow-color)"}const Wve={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},Uve=t=>Wve[t],LB={scroll:!0,resize:!0};function qve(t){let e;return typeof t=="object"?e={enabled:!0,options:{...LB,...t}}:e={enabled:t,options:LB},e}const Qve={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:t})=>{t.styles.popper.width=`${t.rects.reference.width}px`},effect:({state:t})=>()=>{const e=t.elements.reference;t.elements.popper.style.width=`${e.offsetWidth}px`}},Hve={name:"transformOrigin",enabled:!0,phase:"write",fn:({state:t})=>{FB(t)},effect:({state:t})=>()=>{FB(t)}},FB=t=>{t.elements.popper.style.setProperty(co.transformOrigin.var,Uve(t.placement))},Gve={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:({state:t})=>{Xve(t)}},Xve=t=>{var n;if(!t.placement)return;const e=Kve(t.placement);if((n=t.elements)!=null&&n.arrow&&e){Object.assign(t.elements.arrow.style,{[e.property]:e.value,width:co.arrowSize.varRef,height:co.arrowSize.varRef,zIndex:-1});const r={[co.arrowSizeHalf.var]:`calc(${co.arrowSize.varRef} / 2 - 1px)`,[co.arrowOffset.var]:`calc(${co.arrowSizeHalf.varRef} * -1)`};for(const i in r)t.elements.arrow.style.setProperty(i,r[i])}},Kve=t=>{if(t.startsWith("top"))return{property:"bottom",value:co.arrowOffset.varRef};if(t.startsWith("bottom"))return{property:"top",value:co.arrowOffset.varRef};if(t.startsWith("left"))return{property:"right",value:co.arrowOffset.varRef};if(t.startsWith("right"))return{property:"left",value:co.arrowOffset.varRef}},Zve={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:({state:t})=>{BB(t)},effect:({state:t})=>()=>{BB(t)}},BB=t=>{if(!t.elements.arrow)return;const e=t.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!e)return;const n=Vve(t.placement);n&&e.style.setProperty("--popper-arrow-default-shadow",n),Object.assign(e.style,{transform:"rotate(45deg)",background:co.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},Yve={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},Jve={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function ebe(t,e="ltr"){var r;const n=((r=Yve[t])==null?void 0:r[e])||t;return e==="ltr"?n:Jve[t]??n}function lQ(t={}){const{enabled:e=!0,modifiers:n,placement:r="bottom",strategy:i="absolute",arrowPadding:s=8,eventListeners:o=!0,offset:a,gutter:h=8,flip:p=!0,boundary:g="clippingParents",preventOverflow:y=!0,matchWidth:b,direction:S="ltr"}=t,P=L.useRef(null),O=L.useRef(null),D=L.useRef(null),z=ebe(r,S),F=L.useRef(()=>{}),R=L.useCallback(()=>{var J;!e||!P.current||!O.current||((J=F.current)==null||J.call(F),D.current=Nve(P.current,O.current,{placement:z,modifiers:[Zve,Gve,Hve,{...Qve,enabled:!!b},{name:"eventListeners",...qve(o)},{name:"arrow",options:{padding:s}},{name:"offset",options:{offset:a??[0,h]}},{name:"flip",enabled:!!p,options:{padding:8}},{name:"preventOverflow",enabled:!!y,options:{boundary:g}},...n??[]],strategy:i}),D.current.forceUpdate(),F.current=D.current.destroy)},[z,e,n,b,o,s,a,h,p,y,g,i]);L.useEffect(()=>()=>{var J;!P.current&&!O.current&&((J=D.current)==null||J.destroy(),D.current=null)},[]);const N=L.useCallback(J=>{P.current=J,R()},[R]),Q=L.useCallback((J={},ae=null)=>({...J,ref:Ai(N,ae)}),[N]),q=L.useCallback(J=>{O.current=J,R()},[R]),X=L.useCallback((J={},ae=null)=>({...J,ref:Ai(q,ae),style:{...J.style,position:i,minWidth:b?void 0:"max-content",inset:"0 auto auto 0"}}),[i,q,b]),K=L.useCallback((J={},ae=null)=>{const{size:Ee,shadowColor:Ce,bg:$e,style:We,...Fe}=J;return{...Fe,ref:ae,"data-popper-arrow":"",style:tbe(J)}},[]),ne=L.useCallback((J={},ae=null)=>({...J,ref:ae,"data-popper-arrow-inner":""}),[]);return{update(){var J;(J=D.current)==null||J.update()},forceUpdate(){var J;(J=D.current)==null||J.forceUpdate()},transformOrigin:co.transformOrigin.varRef,referenceRef:N,popperRef:q,getPopperProps:X,getArrowProps:K,getArrowInnerProps:ne,getReferenceProps:Q}}function tbe(t){const{size:e,shadowColor:n,bg:r,style:i}=t,s={...i,position:"absolute"};return e&&(s["--popper-arrow-size"]=e),n&&(s["--popper-arrow-shadow-color"]=n),r&&(s["--popper-arrow-bg"]=r),s}function nbe(){const t=L.useRef(new Map),e=t.current,n=L.useCallback((i,s,o,a)=>{t.current.set(o,{type:s,el:i,options:a}),i.addEventListener(s,o,a)},[]),r=L.useCallback((i,s,o,a)=>{i.removeEventListener(s,o,a),t.current.delete(o)},[]);return L.useEffect(()=>()=>{e.forEach((i,s)=>{r(i.el,i.type,s,i.options)})},[r,e]),{add:n,remove:r}}function cO(t){var i,s;const e=((s=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:s[0])??t.target,{tagName:n,isContentEditable:r}=e;return n!=="INPUT"&&n!=="TEXTAREA"&&r!==!0}function cQ(t={}){const{ref:e,isDisabled:n,isFocusable:r,clickOnEnter:i=!0,clickOnSpace:s=!0,onMouseDown:o,onMouseUp:a,onClick:h,onKeyDown:p,onKeyUp:g,tabIndex:y,onMouseOver:b,onMouseLeave:S,...P}=t,[O,D]=L.useState(!0),[z,F]=L.useState(!1),R=nbe(),N=we=>{we&&we.tagName!=="BUTTON"&&D(!1)},Q=O?y:y||0,q=n&&!r,X=L.useCallback(we=>{if(n){we.stopPropagation(),we.preventDefault();return}we.currentTarget.focus(),h==null||h(we)},[n,h]),K=L.useCallback(we=>{z&&cO(we)&&(we.preventDefault(),we.stopPropagation(),F(!1),R.remove(document,"keyup",K,!1))},[z,R]),ne=L.useCallback(we=>{if(p==null||p(we),n||we.defaultPrevented||we.metaKey||!cO(we.nativeEvent)||O)return;const Ie=i&&we.key==="Enter";s&&we.key===" "&&(we.preventDefault(),F(!0)),Ie&&(we.preventDefault(),we.currentTarget.click()),R.add(document,"keyup",K,!1)},[n,O,p,i,s,R,K]),J=L.useCallback(we=>{if(g==null||g(we),n||we.defaultPrevented||we.metaKey||!cO(we.nativeEvent)||O)return;s&&we.key===" "&&(we.preventDefault(),F(!1),we.currentTarget.click())},[s,O,n,g]),ae=L.useCallback(we=>{we.button===0&&(F(!1),R.remove(document,"mouseup",ae,!1))},[R]),Ee=L.useCallback(we=>{if(we.button!==0)return;if(n){we.stopPropagation(),we.preventDefault();return}O||F(!0),we.currentTarget.focus({preventScroll:!0}),R.add(document,"mouseup",ae,!1),o==null||o(we)},[n,O,o,R,ae]),Ce=L.useCallback(we=>{we.button===0&&(O||F(!1),a==null||a(we))},[a,O]),$e=L.useCallback(we=>{if(n){we.preventDefault();return}b==null||b(we)},[n,b]),We=L.useCallback(we=>{z&&(we.preventDefault(),F(!1)),S==null||S(we)},[z,S]),Fe=Ai(e,N);return O?{...P,ref:Fe,type:"button","aria-disabled":q?void 0:n,disabled:q,onClick:X,onMouseDown:o,onMouseUp:a,onKeyUp:g,onKeyDown:p,onMouseOver:b,onMouseLeave:S}:{...P,ref:Fe,role:"button","data-active":Pn(z),"aria-disabled":n?"true":void 0,tabIndex:q?void 0:Q,onClick:X,onMouseDown:Ee,onMouseUp:Ce,onKeyUp:J,onKeyDown:ne,onMouseOver:$e,onMouseLeave:We}}const[rbe,ibe,sbe,obe]=O5(),[abe,__]=Or({strict:!1,name:"MenuContext"});function uQ(t){return(t==null?void 0:t.ownerDocument)??document}function lbe(t){return uQ(t).activeElement===t}function cbe(t={}){const{id:e,closeOnSelect:n=!0,closeOnBlur:r=!0,initialFocusRef:i,autoSelect:s=!0,isLazy:o,isOpen:a,defaultIsOpen:h,onClose:p,onOpen:g,placement:y="bottom-start",lazyBehavior:b="unmount",direction:S,computePositionOnMount:P=!1,...O}=t,D=L.useRef(null),z=L.useRef(null),F=L.useRef(!0),R=sbe(),N=L.useCallback(()=>{requestAnimationFrame(()=>{var oe;(oe=D.current)==null||oe.focus({preventScroll:!1})})},[]),Q=L.useCallback(()=>{const oe=setTimeout(()=>{var nt,Ne;if(i)(nt=i.current)==null||nt.focus();else if(!R.count())(Ne=D.current)==null||Ne.focus({preventScroll:!1});else{const tt=R.firstEnabled();tt&&$e(tt.index)}});Qe.current.add(oe)},[R,i]),q=L.useCallback(()=>{const oe=setTimeout(()=>{var nt;if(!R.count())(nt=D.current)==null||nt.focus({preventScroll:!1});else{const Ne=R.lastEnabled();Ne&&$e(Ne.index)}});Qe.current.add(oe)},[R]),X=L.useCallback(()=>{g==null||g(),s?Q():N()},[s,Q,N,g]),{isOpen:K,onOpen:ne,onClose:J,onToggle:ae}=Lm({isOpen:a,defaultIsOpen:h,onClose:p,onOpen:X});tre({enabled:K&&r,ref:D,handler:oe=>{var Ne,tt,Ye;const nt=((tt=(Ne=oe.composedPath)==null?void 0:Ne.call(oe))==null?void 0:tt[0])??oe.target;(Ye=z.current)!=null&&Ye.contains(nt)||J()}});const Ee=lQ({...O,enabled:K||P,placement:y,direction:S}),[Ce,$e]=L.useState(-1);Xne(D,{focusRef:z,visible:K});const We=Qne({isOpen:K,ref:D}),[Fe,we]=Zne(e,"menu-button","menu-list"),Ie=L.useCallback(()=>{ne(),N()},[ne,N]),Qe=L.useRef(new Set([]));L.useEffect(()=>{const oe=Qe.current;return()=>{oe.forEach(nt=>clearTimeout(nt)),oe.clear()}},[]),zf(()=>{var oe;K||($e(-1),(oe=D.current)==null||oe.scrollTo(0,0))},[K]),zf(()=>{K&&Ce===-1&&N()},[Ce,K]),L.useEffect(()=>{var nt;if(!K)return;const oe=R.item(Ce);(nt=oe==null?void 0:oe.node)==null||nt.focus({preventScroll:!F.current})},[R,Ce,K]);const se=L.useCallback(()=>{ne(),Q()},[Q,ne]),Re=L.useCallback(()=>{F.current=!0,ne(),q()},[ne,q]),Oe=L.useCallback(()=>{var Ye,_t;const oe=uQ(D.current),nt=(Ye=D.current)==null?void 0:Ye.contains(oe.activeElement);if(!(K&&!nt))return;const tt=(_t=R.item(Ce))==null?void 0:_t.node;tt==null||tt.focus({preventScroll:!F.current})},[K,Ce,R]);return{openAndFocusMenu:Ie,openAndFocusFirstItem:se,openAndFocusLastItem:Re,onTransitionEnd:Oe,unstable__animationState:We,descendants:R,popper:Ee,buttonId:Fe,menuId:we,forceUpdate:Ee.forceUpdate,orientation:"vertical",isOpen:K,onToggle:ae,onOpen:ne,onClose:J,menuRef:D,buttonRef:z,focusedIndex:Ce,closeOnSelect:n,closeOnBlur:r,autoSelect:s,setFocusedIndex:$e,isLazy:o,lazyBehavior:b,initialFocusRef:i,scrollIntoViewRef:F}}function ube(t={},e=null){const n=__(),{onToggle:r,popper:i,openAndFocusFirstItem:s,openAndFocusLastItem:o,scrollIntoViewRef:a}=n,h=L.useCallback(p=>{const g=p.key,b={Enter:s,ArrowDown:s,ArrowUp:o}[g];b&&(a.current=!0,p.preventDefault(),p.stopPropagation(),b(p))},[s,o,a]);return{...t,ref:Ai(n.buttonRef,e,i.referenceRef),id:n.buttonId,"data-active":Pn(n.isOpen),"aria-expanded":n.isOpen,"aria-haspopup":"menu","aria-controls":n.menuId,onClick:An(t.onClick,r),onKeyDown:An(t.onKeyDown,h)}}function sz(t){var e;return pbe(t)&&!!((e=t==null?void 0:t.getAttribute("role"))!=null&&e.startsWith("menuitem"))}function hbe(t={},e=null){const n=__();if(!n)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:r,setFocusedIndex:i,menuRef:s,isOpen:o,onClose:a,menuId:h,isLazy:p,lazyBehavior:g,scrollIntoViewRef:y,unstable__animationState:b}=n,S=ibe(),P=Rxe({preventDefault:F=>F.key!==" "&&sz(F.target)}),O=L.useCallback(F=>{if(!F.currentTarget.contains(F.target))return;const R=F.key,Q={Tab:X=>X.preventDefault(),Escape:X=>{X.stopPropagation(),a()},ArrowDown:()=>{y.current=!0;const X=S.nextEnabled(r)??S.firstEnabled();X&&i(X.index)},ArrowUp:()=>{y.current=!0;const X=S.prevEnabled(r)??S.firstEnabled();X&&i(X.index)}}[R];if(Q){F.preventDefault(),Q(F);return}const q=P(X=>{const K=Ixe(S.values(),X,ne=>{var J;return((J=ne==null?void 0:ne.node)==null?void 0:J.textContent)??""},S.item(r));if(K){const ne=S.indexOf(K.node);i(ne)}});sz(F.target)&&q(F)},[S,r,P,a,i,y]),D=L.useRef(!1);o&&(D.current=!0);const z=MW({wasSelected:D.current,enabled:p,mode:g,isSelected:b.present});return{...t,ref:Ai(s,e),children:z?t.children:null,tabIndex:-1,role:"menu",id:h,style:{...t.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:An(t.onKeyDown,O)}}function dbe(t={}){const{popper:e,isOpen:n}=__();return e.getPopperProps({...t,style:{visibility:n?"visible":"hidden",...t.style}})}function fbe(t={},e=null){const{onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onClick:s,onFocus:o,isDisabled:a,isFocusable:h,closeOnSelect:p,type:g,...y}=t,b=__(),{setFocusedIndex:S,focusedIndex:P,closeOnSelect:O,onClose:D,menuId:z,scrollIntoViewRef:F}=b,R=L.useRef(null),N=`${z}-menuitem-${L.useId()}`,{index:Q,register:q}=obe({disabled:a&&!h}),X=L.useCallback($e=>{n==null||n($e),!a&&(F.current=!1,S(Q))},[S,Q,a,n,F]),K=L.useCallback($e=>{r==null||r($e),R.current&&!lbe(R.current)&&X($e)},[X,r]),ne=L.useCallback($e=>{i==null||i($e),!a&&S(-1)},[S,a,i]),J=L.useCallback($e=>{s==null||s($e),sz($e.currentTarget)&&(p??O)&&D()},[D,s,O,p]),ae=L.useCallback($e=>{o==null||o($e),S(Q)},[S,o,Q]),Ee=Q===P,Ce=cQ({onClick:J,onFocus:ae,onMouseEnter:X,onMouseMove:K,onMouseLeave:ne,ref:Ai(q,R,e),isDisabled:a,isFocusable:h});return{...y,...Ce,type:g??Ce.type,id:N,role:"menuitem",tabIndex:Ee?0:-1}}function pbe(t){if(!mbe(t))return!1;const e=t.ownerDocument.defaultView??window;return t instanceof e.HTMLElement}function mbe(t){return t!=null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}const[gbe,w_]=Or({name:"MenuStylesContext",errorMessage:`useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />" `}),Df=t=>{const{children:e}=t,n=xs("Menu",t),r=Mr(t),{direction:i}=sx(),{descendants:s,...o}=cbe({...r,direction:i}),a=L.useMemo(()=>o,[o]),{isOpen:h,onClose:p,forceUpdate:g}=a;return u.jsx(rbe,{value:s,children:u.jsx(abe,{value:a,children:u.jsx(gbe,{value:n,children:pl(e,{isOpen:h,onClose:p,forceUpdate:g})})})})};Df.displayName="Menu";const ybe=Pt((t,e)=>{const n=w_();return u.jsx(gt.button,{ref:e,...t,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...n.button}})}),Lf=Pt((t,e)=>{const{children:n,as:r,...i}=t,s=ube(i,e),o=r||ybe;return u.jsx(o,{...s,className:ln("chakra-menu__menu-button",t.className),children:u.jsx(gt.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:t.children})})});Lf.displayName="MenuButton";const hQ=Pt((t,e)=>{const n=w_();return u.jsx(gt.span,{ref:e,...t,__css:n.command,className:"chakra-menu__command"})});hQ.displayName="MenuCommand";const dQ=t=>{const{className:e,children:n,...r}=t,i=w_(),s=L.Children.only(n),o=L.isValidElement(s)?L.cloneElement(s,{focusable:"false","aria-hidden":!0,className:ln("chakra-menu__icon",s.props.className)}):null,a=ln("chakra-menu__icon-wrapper",e);return u.jsx(gt.span,{className:a,...r,__css:i.icon,children:o})};dQ.displayName="MenuIcon";const xbe=Pt((t,e)=>{const{type:n,...r}=t,i=w_(),s=r.as||n?n??void 0:"button",o=L.useMemo(()=>({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,...i.item}),[i.item]);return u.jsx(gt.button,{ref:e,type:s,...r,__css:o})}),ml=Pt((t,e)=>{const{icon:n,iconSpacing:r="0.75rem",command:i,commandSpacing:s="0.75rem",children:o,...a}=t,h=fbe(a,e),g=n||i?u.jsx("span",{style:{pointerEvents:"none",flex:1},children:o}):o;return u.jsxs(xbe,{...h,className:ln("chakra-menu__menuitem",h.className),children:[n&&u.jsx(dQ,{fontSize:"0.8em",marginEnd:r,children:n}),g,i&&u.jsx(hQ,{marginStart:s,children:i})]})});ml.displayName="MenuItem";const vbe={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},bbe=gt(Nr.div),Ff=Pt(function(e,n){var b;const{rootProps:r,motionProps:i,...s}=e,{isOpen:o,onTransitionEnd:a,unstable__animationState:h}=__(),p=hbe(s,n),g=dbe(r),y=w_();return u.jsx(gt.div,{...g,__css:{zIndex:e.zIndex??((b=y.list)==null?void 0:b.zIndex)},children:u.jsx(bbe,{variants:vbe,initial:!1,animate:o?"enter":"exit",__css:{outline:0,...y.list},...i,...p,className:ln("chakra-menu__menu-list",p.className),onUpdate:a,onAnimationComplete:RM(h.onComplete,p.onAnimationComplete)})})});Ff.displayName="MenuList";var _be=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ny=new WeakMap,mS=new WeakMap,gS={},uO=0,fQ=function(t){return t&&(t.host||fQ(t.parentNode))},wbe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=fQ(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Sbe=function(t,e,n,r){var i=wbe(e,Array.isArray(t)?t:[t]);gS[n]||(gS[n]=new WeakMap);var s=gS[n],o=[],a=new Set,h=new Set(i),p=function(y){!y||a.has(y)||(a.add(y),p(y.parentNode))};i.forEach(p);var g=function(y){!y||h.has(y)||Array.prototype.forEach.call(y.children,function(b){if(a.has(b))g(b);else try{var S=b.getAttribute(r),P=S!==null&&S!=="false",O=(ny.get(b)||0)+1,D=(s.get(b)||0)+1;ny.set(b,O),s.set(b,D),o.push(b),O===1&&P&&mS.set(b,!0),D===1&&b.setAttribute(n,"true"),P||b.setAttribute(r,"true")}catch(z){console.error("aria-hidden: cannot operate on ",b,z)}})};return g(e),a.clear(),uO++,function(){o.forEach(function(y){var b=ny.get(y)-1,S=s.get(y)-1;ny.set(y,b),s.set(y,S),b||(mS.has(y)||y.removeAttribute(r),mS.delete(y)),S||y.removeAttribute(n)}),uO--,uO||(ny=new WeakMap,ny=new WeakMap,mS=new WeakMap,gS={})}},kbe=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=_be(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),Sbe(r,i,n,"aria-hidden")):function(){return null}},Cbe=Object.defineProperty,Tbe=(t,e,n)=>e in t?Cbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jbe=(t,e,n)=>(Tbe(t,e+"",n),n);class Pbe{constructor(){jbe(this,"modals"),this.modals=new Set}add(e){return this.modals.add(e),this.modals.size}remove(e){this.modals.delete(e)}isTopModal(e){if(!e)return!1;const n=Array.from(this.modals)[this.modals.size-1];return e===n}}const oz=new Pbe;function pQ(t,e){const[n,r]=L.useState(0);return L.useEffect(()=>{const i=t.current;if(i){if(e){const s=oz.add(i);r(s)}return()=>{oz.remove(i),r(0)}}},[e,t]),n}function Obe(t){const{isOpen:e,onClose:n,id:r,closeOnOverlayClick:i=!0,closeOnEsc:s=!0,useInert:o=!0,onOverlayClick:a,onEsc:h}=t,p=L.useRef(null),g=L.useRef(null),[y,b,S]=Ebe(r,"chakra-modal","chakra-modal--header","chakra-modal--body");Abe(p,e&&o);const P=pQ(p,e),O=L.useRef(null),D=L.useCallback(ne=>{O.current=ne.target},[]),z=L.useCallback(ne=>{ne.key==="Escape"&&(ne.stopPropagation(),s&&(n==null||n()),h==null||h())},[s,n,h]),[F,R]=L.useState(!1),[N,Q]=L.useState(!1),q=L.useCallback((ne={},J=null)=>({role:"dialog",...ne,ref:Ai(J,p),id:y,tabIndex:-1,"aria-modal":!0,"aria-labelledby":F?b:void 0,"aria-describedby":N?S:void 0,onClick:An(ne.onClick,ae=>ae.stopPropagation())}),[S,N,y,b,F]),X=L.useCallback(ne=>{ne.stopPropagation(),O.current===ne.target&&oz.isTopModal(p.current)&&(i&&(n==null||n()),a==null||a())},[n,i,a]),K=L.useCallback((ne={},J=null)=>({...ne,ref:Ai(J,g),onClick:An(ne.onClick,X),onKeyDown:An(ne.onKeyDown,z),onMouseDown:An(ne.onMouseDown,D)}),[z,D,X]);return{isOpen:e,onClose:n,headerId:b,bodyId:S,setBodyMounted:Q,setHeaderMounted:R,dialogRef:p,overlayRef:g,getDialogProps:q,getDialogContainerProps:K,index:P}}function Abe(t,e){const n=t.current;L.useEffect(()=>{if(!(!t.current||!e))return kbe(t.current)},[e,t,n])}function Ebe(t,...e){const n=L.useId(),r=t||n;return L.useMemo(()=>e.map(i=>`${i}-${r}`),[r,e])}const[zbe,ng]=Or({name:"ModalStylesContext",errorMessage:`useModalStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Modal />" `}),[Ibe,Bf]=Or({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),es=t=>{const e={scrollBehavior:"outside",autoFocus:!0,trapFocus:!0,returnFocusOnClose:!0,blockScrollOnMount:!0,allowPinchZoom:!1,preserveScrollBarGap:!0,motionPreset:"scale",...t,lockFocusAcrossFrames:t.lockFocusAcrossFrames??!0},{portalProps:n,children:r,autoFocus:i,trapFocus:s,initialFocusRef:o,finalFocusRef:a,returnFocusOnClose:h,blockScrollOnMount:p,allowPinchZoom:g,preserveScrollBarGap:y,motionPreset:b,lockFocusAcrossFrames:S,animatePresenceProps:P,onCloseComplete:O}=e,D=xs("Modal",e),F={...Obe(e),autoFocus:i,trapFocus:s,initialFocusRef:o,finalFocusRef:a,returnFocusOnClose:h,blockScrollOnMount:p,allowPinchZoom:g,preserveScrollBarGap:y,motionPreset:b,lockFocusAcrossFrames:S};return u.jsx(Ibe,{value:F,children:u.jsx(zbe,{value:D,children:u.jsx(Sl,{...P,onExitComplete:O,children:F.isOpen&&u.jsx(ox,{...n,children:r})})})})};es.displayName="Modal";var kk="right-scroll-bar-position",Ck="width-before-scroll-bar",Mbe="with-scroll-bars-hidden",Rbe="--removed-body-scroll-bar-size",mQ=bq(),hO=function(){},cT=L.forwardRef(function(t,e){var n=L.useRef(null),r=L.useState({onScrollCapture:hO,onWheelCapture:hO,onTouchMoveCapture:hO}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,h=t.className,p=t.removeScrollBar,g=t.enabled,y=t.shards,b=t.sideCar,S=t.noRelative,P=t.noIsolation,O=t.inert,D=t.allowPinchZoom,z=t.as,F=z===void 0?"div":z,R=t.gapMode,N=yq(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Q=b,q=gq([n,e]),X=Ou(Ou({},N),i);return L.createElement(L.Fragment,null,g&&L.createElement(Q,{sideCar:mQ,removeScrollBar:p,shards:y,noRelative:S,noIsolation:P,inert:O,setCallbacks:s,allowPinchZoom:!!D,lockRef:n,gapMode:R}),o?L.cloneElement(L.Children.only(a),Ou(Ou({},X),{ref:q})):L.createElement(F,Ou({},X,{className:h,ref:q}),a))});cT.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};cT.classNames={fullWidth:Ck,zeroRight:kk};var Dbe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Lbe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Dbe();return e&&t.setAttribute("nonce",e),t}function Fbe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Bbe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var $be=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Lbe())&&(Fbe(e,n),Bbe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Nbe=function(){var t=$be();return function(e,n){L.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},gQ=function(){var t=Nbe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},Vbe={left:0,top:0,right:0,gap:0},dO=function(t){return parseInt(t||"",10)||0},Wbe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[dO(n),dO(r),dO(i)]},Ube=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Vbe;var e=Wbe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},qbe=gQ(),Jy="data-scroll-locked",Qbe=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Mbe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Jy,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(kk,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ck,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(kk," .").concat(kk,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ck," .").concat(Ck,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Jy,`] {
    `).concat(Rbe,": ").concat(a,`px;
  }
`)},$B=function(){var t=parseInt(document.body.getAttribute(Jy)||"0",10);return isFinite(t)?t:0},Hbe=function(){L.useEffect(function(){return document.body.setAttribute(Jy,($B()+1).toString()),function(){var t=$B()-1;t<=0?document.body.removeAttribute(Jy):document.body.setAttribute(Jy,t.toString())}},[])},Gbe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;Hbe();var s=L.useMemo(function(){return Ube(i)},[i]);return L.createElement(qbe,{styles:Qbe(s,!e,i,n?"":"!important")})},az=!1;if(typeof window<"u")try{var yS=Object.defineProperty({},"passive",{get:function(){return az=!0,!0}});window.addEventListener("test",yS,yS),window.removeEventListener("test",yS,yS)}catch{az=!1}var ry=az?{passive:!1}:!1,Xbe=function(t){return t.tagName==="TEXTAREA"},yQ=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Xbe(t)&&n[e]==="visible")},Kbe=function(t){return yQ(t,"overflowY")},Zbe=function(t){return yQ(t,"overflowX")},NB=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=xQ(t,r);if(i){var s=vQ(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Ybe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Jbe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},xQ=function(t,e){return t==="v"?Kbe(e):Zbe(e)},vQ=function(t,e){return t==="v"?Ybe(e):Jbe(e)},e1e=function(t,e){return t==="h"&&e==="rtl"?-1:1},t1e=function(t,e,n,r,i){var s=e1e(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,h=e.contains(a),p=!1,g=o>0,y=0,b=0;do{if(!a)break;var S=vQ(t,a),P=S[0],O=S[1],D=S[2],z=O-D-s*P;(P||z)&&xQ(t,a)&&(y+=z,b+=P);var F=a.parentNode;a=F&&F.nodeType===Node.DOCUMENT_FRAGMENT_NODE?F.host:F}while(!h&&a!==document.body||h&&(e.contains(a)||e===a));return(g&&Math.abs(y)<1||!g&&Math.abs(b)<1)&&(p=!0),p},xS=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},VB=function(t){return[t.deltaX,t.deltaY]},WB=function(t){return t&&"current"in t?t.current:t},n1e=function(t,e){return t[0]===e[0]&&t[1]===e[1]},r1e=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},i1e=0,iy=[];function s1e(t){var e=L.useRef([]),n=L.useRef([0,0]),r=L.useRef(),i=L.useState(i1e++)[0],s=L.useState(gQ)[0],o=L.useRef(t);L.useEffect(function(){o.current=t},[t]),L.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var O=f0e([t.lockRef.current],(t.shards||[]).map(WB),!0).filter(Boolean);return O.forEach(function(D){return D.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),O.forEach(function(D){return D.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=L.useCallback(function(O,D){if("touches"in O&&O.touches.length===2||O.type==="wheel"&&O.ctrlKey)return!o.current.allowPinchZoom;var z=xS(O),F=n.current,R="deltaX"in O?O.deltaX:F[0]-z[0],N="deltaY"in O?O.deltaY:F[1]-z[1],Q,q=O.target,X=Math.abs(R)>Math.abs(N)?"h":"v";if("touches"in O&&X==="h"&&q.type==="range")return!1;var K=window.getSelection(),ne=K&&K.anchorNode,J=ne?ne===q||ne.contains(q):!1;if(J)return!1;var ae=NB(X,q);if(!ae)return!0;if(ae?Q=X:(Q=X==="v"?"h":"v",ae=NB(X,q)),!ae)return!1;if(!r.current&&"changedTouches"in O&&(R||N)&&(r.current=Q),!Q)return!0;var Ee=r.current||Q;return t1e(Ee,D,O,Ee==="h"?R:N)},[]),h=L.useCallback(function(O){var D=O;if(!(!iy.length||iy[iy.length-1]!==s)){var z="deltaY"in D?VB(D):xS(D),F=e.current.filter(function(Q){return Q.name===D.type&&(Q.target===D.target||D.target===Q.shadowParent)&&n1e(Q.delta,z)})[0];if(F&&F.should){D.cancelable&&D.preventDefault();return}if(!F){var R=(o.current.shards||[]).map(WB).filter(Boolean).filter(function(Q){return Q.contains(D.target)}),N=R.length>0?a(D,R[0]):!o.current.noIsolation;N&&D.cancelable&&D.preventDefault()}}},[]),p=L.useCallback(function(O,D,z,F){var R={name:O,delta:D,target:z,should:F,shadowParent:o1e(z)};e.current.push(R),setTimeout(function(){e.current=e.current.filter(function(N){return N!==R})},1)},[]),g=L.useCallback(function(O){n.current=xS(O),r.current=void 0},[]),y=L.useCallback(function(O){p(O.type,VB(O),O.target,a(O,t.lockRef.current))},[]),b=L.useCallback(function(O){p(O.type,xS(O),O.target,a(O,t.lockRef.current))},[]);L.useEffect(function(){return iy.push(s),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:b}),document.addEventListener("wheel",h,ry),document.addEventListener("touchmove",h,ry),document.addEventListener("touchstart",g,ry),function(){iy=iy.filter(function(O){return O!==s}),document.removeEventListener("wheel",h,ry),document.removeEventListener("touchmove",h,ry),document.removeEventListener("touchstart",g,ry)}},[]);var S=t.removeScrollBar,P=t.inert;return L.createElement(L.Fragment,null,P?L.createElement(s,{styles:r1e(i)}):null,S?L.createElement(Gbe,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function o1e(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const a1e=p0e(mQ,s1e);var bQ=L.forwardRef(function(t,e){return L.createElement(cT,Ou({},t,{ref:e,sideCar:a1e}))});bQ.classNames=cT.classNames;function _Q(t){const{autoFocus:e,trapFocus:n,dialogRef:r,initialFocusRef:i,blockScrollOnMount:s,allowPinchZoom:o,finalFocusRef:a,returnFocusOnClose:h,preserveScrollBarGap:p,lockFocusAcrossFrames:g,isOpen:y}=Bf(),[b,S]=VU();L.useEffect(()=>{!b&&S&&setTimeout(S)},[b,S]);const P=pQ(r,y);return u.jsx(Hq,{autoFocus:e,isDisabled:!n,initialFocusRef:i,finalFocusRef:a,restoreFocus:h,contentRef:r,lockFocusAcrossFrames:g,children:u.jsx(bQ,{removeScrollBar:!p,allowPinchZoom:o,enabled:P===1&&s,forwardProps:!0,children:t.children})})}const l1e={initial:({offsetX:t,offsetY:e,transition:n,transitionEnd:r,delay:i})=>({opacity:0,x:t,y:e,transition:(n==null?void 0:n.exit)??Vc.exit(_m.exit,i),transitionEnd:r==null?void 0:r.exit}),enter:({transition:t,transitionEnd:e,delay:n})=>({opacity:1,x:0,y:0,transition:(t==null?void 0:t.enter)??Vc.enter(_m.enter,n),transitionEnd:e==null?void 0:e.enter}),exit:({offsetY:t,offsetX:e,transition:n,transitionEnd:r,reverse:i,delay:s})=>{const o={x:e,y:t};return{opacity:0,transition:(n==null?void 0:n.exit)??Vc.exit(_m.exit,s),...i?{...o,transitionEnd:r==null?void 0:r.exit}:{transitionEnd:{...o,...r==null?void 0:r.exit}}}}},rb={initial:"initial",animate:"enter",exit:"exit",variants:l1e},c1e=L.forwardRef(function(e,n){const{unmountOnExit:r,in:i,reverse:s=!0,className:o,offsetX:a=0,offsetY:h=8,transition:p,transitionEnd:g,delay:y,animatePresenceProps:b,...S}=e,P=r?i&&r:!0,O=i||r?"enter":"exit",D={offsetX:a,offsetY:h,reverse:s,transition:p,transitionEnd:g,delay:y};return u.jsx(Sl,{...b,custom:D,children:P&&u.jsx(Nr.div,{ref:n,className:ln("chakra-offset-slide",o),custom:D,...rb,animate:O,...S})})});c1e.displayName="SlideFade";const u1e={exit:({reverse:t,initialScale:e,transition:n,transitionEnd:r,delay:i})=>({opacity:0,...t?{scale:e,transitionEnd:r==null?void 0:r.exit}:{transitionEnd:{scale:e,...r==null?void 0:r.exit}},transition:(n==null?void 0:n.exit)??Vc.exit(_m.exit,i)}),enter:({transitionEnd:t,transition:e,delay:n})=>({opacity:1,scale:1,transition:(e==null?void 0:e.enter)??Vc.enter(_m.enter,n),transitionEnd:t==null?void 0:t.enter})},wQ={initial:"exit",animate:"enter",exit:"exit",variants:u1e},h1e=L.forwardRef(function(e,n){const{unmountOnExit:r,in:i,reverse:s=!0,initialScale:o=.95,className:a,transition:h,transitionEnd:p,delay:g,animatePresenceProps:y,...b}=e,S=r?i&&r:!0,P=i||r?"enter":"exit",O={initialScale:o,reverse:s,transition:h,transitionEnd:p,delay:g};return u.jsx(Sl,{...y,custom:O,children:S&&u.jsx(Nr.div,{ref:n,className:ln("chakra-offset-slide",a),...wQ,animate:P,custom:O,...b})})});h1e.displayName="ScaleFade";const d1e={slideInBottom:{...rb,custom:{offsetY:16,reverse:!0}},slideInRight:{...rb,custom:{offsetX:16,reverse:!0}},slideInTop:{...rb,custom:{offsetY:-16,reverse:!0}},slideInLeft:{...rb,custom:{offsetX:-16,reverse:!0}},scale:{...wQ,custom:{initialScale:.95,reverse:!0}},none:{}},f1e=gt(Nr.section),p1e=t=>d1e[t||"none"],SQ=L.forwardRef((t,e)=>{const{preset:n,motionProps:r=p1e(n),...i}=t;return u.jsx(f1e,{ref:e,...r,...i})});SQ.displayName="ModalTransition";const gs=Pt((t,e)=>{const{className:n,children:r,containerProps:i,motionProps:s,...o}=t,{getDialogProps:a,getDialogContainerProps:h}=Bf(),p=a(o,e),g=h(i),y=ln("chakra-modal__content",n),b=ng(),S={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...b.dialog},P={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...b.dialogContainer},{motionPreset:O}=Bf();return u.jsx(_Q,{children:u.jsx(gt.div,{...g,className:"chakra-modal__content-container",tabIndex:-1,__css:P,children:u.jsx(SQ,{preset:O,motionProps:s,className:y,...p,__css:S,children:r})})})});gs.displayName="ModalContent";const ys=Pt((t,e)=>{const{className:n,...r}=t,{bodyId:i,setBodyMounted:s}=Bf();L.useEffect(()=>(s(!0),()=>s(!1)),[s]);const o=ln("chakra-modal__body",n),a=ng();return u.jsx(gt.div,{ref:e,className:o,id:i,...r,__css:a.body})});ys.displayName="ModalBody";const Is=Pt((t,e)=>{const{onClick:n,className:r,...i}=t,{onClose:s}=Bf(),o=ln("chakra-modal__close-btn",r),a=ng();return u.jsx(x1,{ref:e,__css:a.closeButton,className:o,onClick:An(n,h=>{h.stopPropagation(),s()}),...i})});Is.displayName="ModalCloseButton";const Fo=Pt((t,e)=>{const{className:n,...r}=t,i=ln("chakra-modal__footer",n),s=ng(),o={display:"flex",alignItems:"center",justifyContent:"flex-end",...s.footer};return u.jsx(gt.footer,{ref:e,...r,__css:o,className:i})});Fo.displayName="ModalFooter";const ax=Pt((t,e)=>{const{className:n,...r}=t,{headerId:i,setHeaderMounted:s}=Bf();L.useEffect(()=>(s(!0),()=>s(!1)),[s]);const o=ln("chakra-modal__header",n),a=ng(),h={flex:0,...a.header};return u.jsx(gt.header,{ref:e,className:o,id:i,...r,__css:h})});ax.displayName="ModalHeader";const m1e={enter:({transition:t,transitionEnd:e,delay:n}={})=>({opacity:1,transition:(t==null?void 0:t.enter)??Vc.enter(_m.enter,n),transitionEnd:e==null?void 0:e.enter}),exit:({transition:t,transitionEnd:e,delay:n}={})=>({opacity:0,transition:(t==null?void 0:t.exit)??Vc.exit(_m.exit,n),transitionEnd:e==null?void 0:e.exit})},kQ={initial:"exit",animate:"enter",exit:"exit",variants:m1e},g1e=L.forwardRef(function(e,n){const{unmountOnExit:r,in:i,className:s,transition:o,transitionEnd:a,delay:h,animatePresenceProps:p,...g}=e,y=i||r?"enter":"exit",b=r?i&&r:!0,S={transition:o,transitionEnd:a,delay:h};return u.jsx(Sl,{...p,custom:S,children:b&&u.jsx(Nr.div,{ref:n,className:ln("chakra-fade",s),custom:S,...kQ,animate:y,...g})})});g1e.displayName="Fade";const y1e=gt(Nr.div),ts=Pt((t,e)=>{const{className:n,transition:r,motionProps:i,...s}=t,o=ln("chakra-modal__overlay",n),h={pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh",...ng().overlay},{motionPreset:p}=Bf(),y=i||(p==="none"?{}:kQ);return u.jsx(y1e,{...y,__css:h,ref:e,className:o,...s})});ts.displayName="ModalOverlay";const[x1e,v1e]=Or(),b1e={start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}};function _1e(t,e){var n;if(t)return((n=b1e[t])==null?void 0:n[e])??t}function w1e(t){var p;const{isOpen:e,onClose:n,placement:r="right",children:i,...s}=t,o=sx(),a=(p=o.components)==null?void 0:p.Drawer,h=_1e(r,o.direction);return u.jsx(x1e,{value:{placement:h},children:u.jsx(es,{isOpen:e,onClose:n,styleConfig:a,...s,children:i})})}const UB={exit:{duration:.15,ease:tm.easeInOut},enter:{type:"spring",damping:25,stiffness:180}},S1e={exit:({direction:t,transition:e,transitionEnd:n,delay:r})=>{const{exit:i}=QE({direction:t});return{...i,transition:(e==null?void 0:e.exit)??Vc.exit(UB.exit,r),transitionEnd:n==null?void 0:n.exit}},enter:({direction:t,transitionEnd:e,transition:n,delay:r})=>{const{enter:i}=QE({direction:t});return{...i,transition:(n==null?void 0:n.enter)??Vc.enter(UB.enter,r),transitionEnd:e==null?void 0:e.enter}}},CQ=L.forwardRef(function(e,n){const{direction:r="right",style:i,unmountOnExit:s,in:o,className:a,transition:h,transitionEnd:p,delay:g,motionProps:y,animatePresenceProps:b,...S}=e,P=QE({direction:r}),O=Object.assign({position:"fixed"},P.position,i),D=s?o&&s:!0,z=o||s?"enter":"exit",F={transitionEnd:p,transition:h,direction:r,delay:g};return u.jsx(Sl,{...b,custom:F,children:D&&u.jsx(Nr.div,{...S,ref:n,initial:"exit",className:ln("chakra-slide",a),animate:z,exit:"exit",custom:F,variants:S1e,style:O,...y})})});CQ.displayName="Slide";const k1e=gt(CQ),TQ=Pt((t,e)=>{const{className:n,children:r,motionProps:i,containerProps:s,...o}=t,{getDialogProps:a,getDialogContainerProps:h,isOpen:p}=Bf(),g=a(o,e),y=h(s),b=ln("chakra-modal__content",n),S=ng(),P={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...S.dialog},O={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...S.dialogContainer},{placement:D}=v1e();return u.jsx(_Q,{children:u.jsx(gt.div,{...y,className:"chakra-modal__content-container",__css:O,children:u.jsx(k1e,{motionProps:i,direction:D,in:p,className:b,...g,__css:P,children:r})})})});TQ.displayName="DrawerContent";const C1e=t=>u.jsx(Le,{viewBox:"0 0 24 24",...t,children:u.jsx("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"})}),T1e=t=>u.jsx(Le,{viewBox:"0 0 24 24",...t,children:u.jsx("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"})});function qB(t,e,n,r){L.useEffect(()=>{if(!t.current||!r)return;const i=t.current.ownerDocument.defaultView??window,s=Array.isArray(e)?e:[e],o=new i.MutationObserver(a=>{for(const h of a)h.type==="attributes"&&h.attributeName&&s.includes(h.attributeName)&&n(h)});return o.observe(t.current,{attributes:!0,attributeFilter:s}),()=>o.disconnect()})}const j1e=50,QB=300;function P1e(t,e){const[n,r]=L.useState(!1),[i,s]=L.useState(null),[o,a]=L.useState(!0),h=L.useRef(null),p=()=>clearTimeout(h.current);Yne(()=>{i==="increment"&&t(),i==="decrement"&&e()},n?j1e:null);const g=L.useCallback(()=>{o&&t(),h.current=setTimeout(()=>{a(!1),r(!0),s("increment")},QB)},[t,o]),y=L.useCallback(()=>{o&&e(),h.current=setTimeout(()=>{a(!1),r(!0),s("decrement")},QB)},[e,o]),b=L.useCallback(()=>{a(!0),r(!1),p()},[]);return L.useEffect(()=>()=>p(),[]),{up:g,down:y,stop:b,isSpinning:n}}const O1e=/^[Ee0-9+\-.]$/;function A1e(t){return O1e.test(t)}function E1e(t,e){if(t.key==null)return!0;const n=t.ctrlKey||t.altKey||t.metaKey;return!(t.key.length===1)||n?!0:e(t.key)}function z1e(t={}){const{focusInputOnChange:e=!0,clampValueOnBlur:n=!0,keepWithinRange:r=!0,min:i=Number.MIN_SAFE_INTEGER,max:s=Number.MAX_SAFE_INTEGER,step:o=1,isReadOnly:a,isDisabled:h,isRequired:p,isInvalid:g,pattern:y="[0-9]*(.[0-9]+)?",inputMode:b="decimal",allowMouseWheel:S,id:P,onChange:O,precision:D,name:z,"aria-describedby":F,"aria-label":R,"aria-labelledby":N,onFocus:Q,onBlur:q,onInvalid:X,getAriaValueText:K,isValidCharacter:ne,format:J,parse:ae,...Ee}=t,Ce=Ki(Q),$e=Ki(q),We=Ki(X),Fe=Ki(ne??A1e),we=Ki(K),Ie=Hne(t),{update:Qe,increment:se,decrement:Re}=Ie,[Oe,oe]=L.useState(!1),nt=!(a||h),Ne=L.useRef(null),tt=L.useRef(null),Ye=L.useRef(null),_t=L.useRef(null),At=L.useCallback(Me=>Me.split("").filter(Fe).join(""),[Fe]),Ot=L.useCallback(Me=>(ae==null?void 0:ae(Me))??Me,[ae]),bt=L.useCallback(Me=>((J==null?void 0:J(Me))??Me).toString(),[J]);zf(()=>{(Ie.valueAsNumber>s||Ie.valueAsNumber<i)&&(We==null||We("rangeOverflow",bt(Ie.value),Ie.valueAsNumber))},[Ie.valueAsNumber,Ie.value,bt,We]),wf(()=>{if(!Ne.current)return;if(Ne.current.value!=Ie.value){const Xt=Ot(Ne.current.value);Ie.setValue(At(Xt))}},[Ot,At]);const rt=L.useCallback((Me=o)=>{nt&&se(Me)},[se,nt,o]),tn=L.useCallback((Me=o)=>{nt&&Re(Me)},[Re,nt,o]),kt=P1e(rt,tn);qB(Ye,"disabled",kt.stop,kt.isSpinning),qB(_t,"disabled",kt.stop,kt.isSpinning);const it=L.useCallback(Me=>{if(Me.nativeEvent.isComposing)return;const pt=Ot(Me.currentTarget.value);Qe(At(pt)),tt.current={start:Me.currentTarget.selectionStart,end:Me.currentTarget.selectionEnd}},[Qe,At,Ot]),ze=L.useCallback(Me=>{var Xt;Ce==null||Ce(Me),tt.current&&(Me.currentTarget.selectionStart=tt.current.start??((Xt=Me.currentTarget.value)==null?void 0:Xt.length),Me.currentTarget.selectionEnd=tt.current.end??Me.currentTarget.selectionStart)},[Ce]),ut=L.useCallback(Me=>{if(Me.nativeEvent.isComposing)return;E1e(Me,Fe)||Me.preventDefault();const Xt=qt(Me)*o,pt=Me.key,ir={ArrowUp:()=>rt(Xt),ArrowDown:()=>tn(Xt),Home:()=>Qe(i),End:()=>Qe(s)}[pt];ir&&(Me.preventDefault(),ir(Me))},[Fe,o,rt,tn,Qe,i,s]),qt=Me=>{let Xt=1;return(Me.metaKey||Me.ctrlKey)&&(Xt=.1),Me.shiftKey&&(Xt=10),Xt},Ct=L.useMemo(()=>{const Me=we==null?void 0:we(Ie.value);if(Me!=null)return Me;const Xt=Ie.value.toString();return Xt||void 0},[Ie.value,we]),$t=L.useCallback(()=>{let Me=Ie.value;if(Ie.value==="")return;/^[eE]/.test(Ie.value.toString())?Ie.setValue(""):(Ie.valueAsNumber<i&&(Me=i),Ie.valueAsNumber>s&&(Me=s),Ie.cast(Me))},[Ie,s,i]),Yn=L.useCallback(()=>{oe(!1),n&&$t()},[n,oe,$t]),br=L.useCallback(()=>{e&&requestAnimationFrame(()=>{var Me;(Me=Ne.current)==null||Me.focus()})},[e]),ur=L.useCallback(Me=>{Me.preventDefault(),kt.up(),br()},[br,kt]),Ar=L.useCallback(Me=>{Me.preventDefault(),kt.down(),br()},[br,kt]);bb(()=>Ne.current,"wheel",Me=>{var yt;const pt=(((yt=Ne.current)==null?void 0:yt.ownerDocument)??document).activeElement===Ne.current;if(!S||!pt)return;Me.preventDefault();const zt=qt(Me)*o,ir=Math.sign(Me.deltaY);ir===-1?rt(zt):ir===1&&tn(zt)},{passive:!1});const _r=L.useCallback((Me={},Xt=null)=>{const pt=h||r&&Ie.isAtMax;return{...Me,ref:Ai(Xt,Ye),role:"button",tabIndex:-1,onPointerDown:An(Me.onPointerDown,zt=>{zt.button!==0||pt||ur(zt)}),onPointerLeave:An(Me.onPointerLeave,kt.stop),onPointerUp:An(Me.onPointerUp,kt.stop),disabled:pt,"aria-disabled":ac(pt)}},[Ie.isAtMax,r,ur,kt.stop,h]),ct=L.useCallback((Me={},Xt=null)=>{const pt=h||r&&Ie.isAtMin;return{...Me,ref:Ai(Xt,_t),role:"button",tabIndex:-1,onPointerDown:An(Me.onPointerDown,zt=>{zt.button!==0||pt||Ar(zt)}),onPointerLeave:An(Me.onPointerLeave,kt.stop),onPointerUp:An(Me.onPointerUp,kt.stop),disabled:pt,"aria-disabled":ac(pt)}},[Ie.isAtMin,r,Ar,kt.stop,h]),Tt=L.useCallback((Me={},Xt=null)=>({name:z,inputMode:b,type:"text",pattern:y,"aria-labelledby":N,"aria-label":R,"aria-describedby":F,id:P,disabled:h,role:"spinbutton",...Me,readOnly:Me.readOnly??a,"aria-readonly":Me.readOnly??a,"aria-required":Me.required??p,required:Me.required??p,ref:Ai(Ne,Xt),value:bt(Ie.value),"aria-valuemin":i,"aria-valuemax":s,"aria-valuenow":Number.isNaN(Ie.valueAsNumber)?void 0:Ie.valueAsNumber,"aria-invalid":ac(g??Ie.isOutOfRange),"aria-valuetext":Ct,autoComplete:"off",autoCorrect:"off",onChange:An(Me.onChange,it),onKeyDown:An(Me.onKeyDown,ut),onFocus:An(Me.onFocus,ze,()=>oe(!0)),onBlur:An(Me.onBlur,$e,Yn)}),[z,b,y,N,R,bt,F,P,h,p,a,g,Ie.value,Ie.valueAsNumber,Ie.isOutOfRange,i,s,Ct,it,ut,ze,$e,Yn]);return{value:bt(Ie.value),valueAsNumber:Ie.valueAsNumber,isFocused:Oe,isDisabled:h,isReadOnly:a,getIncrementButtonProps:_r,getDecrementButtonProps:ct,getInputProps:Tt,htmlProps:Ee}}const[I1e,uT]=Or({name:"NumberInputStylesContext",errorMessage:`useNumberInputStyles returned is 'undefined'. Seems you forgot to wrap the components in "<NumberInput />" `}),[M1e,rR]=Or({name:"NumberInputContext",errorMessage:"useNumberInputContext: `context` is undefined. Seems you forgot to wrap number-input's components within <NumberInput />"}),km=Pt(function(e,n){const r=xs("NumberInput",e),i=Mr(e),s=M5(i),{htmlProps:o,...a}=z1e(s),h=L.useMemo(()=>a,[a]);return u.jsx(M1e,{value:h,children:u.jsx(I1e,{value:r,children:u.jsx(gt.div,{...o,ref:n,className:ln("chakra-numberinput",e.className),__css:{position:"relative",zIndex:0,...r.root}})})})});km.displayName="NumberInput";const Cm=Pt(function(e,n){const r=uT();return u.jsx(gt.div,{"aria-hidden":!0,ref:n,...e,__css:{display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",height:"calc(100% - 2px)",zIndex:1,...r.stepperGroup}})});Cm.displayName="NumberInputStepper";const Tm=Pt(function(e,n){const{getInputProps:r}=rR(),i=r(e,n),s=uT();return u.jsx(gt.input,{...i,className:ln("chakra-numberinput__field",e.className),__css:{width:"100%",...s.field}})});Tm.displayName="NumberInputField";const jQ=gt("div",{baseStyle:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,transitionProperty:"common",transitionDuration:"normal",userSelect:"none",cursor:"pointer",lineHeight:"normal"}}),jm=Pt(function(e,n){const r=uT(),{getDecrementButtonProps:i}=rR(),s=i(e,n);return u.jsx(jQ,{...s,__css:r.stepper,children:e.children??u.jsx(C1e,{})})});jm.displayName="NumberDecrementStepper";const Pm=Pt(function(e,n){const{getIncrementButtonProps:r}=rR(),i=r(e,n),s=uT();return u.jsx(jQ,{...i,__css:s.stepper,children:e.children??u.jsx(T1e,{})})});Pm.displayName="NumberIncrementStepper";function R1e(t){var n;const e=L.version;return typeof e!="string"||e.startsWith("18.")?t==null?void 0:t.ref:(n=t==null?void 0:t.props)==null?void 0:n.ref}function D1e(t,e,n){return(t-e)*100/(n-e)}bo({"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260"}});bo({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}});const L1e=bo({"0%":{left:"-40%"},"100%":{left:"100%"}}),F1e=bo({from:{backgroundPosition:"1rem 0"},to:{backgroundPosition:"0 0"}});function B1e(t){const{value:e=0,min:n,max:r,valueText:i,getValueText:s,isIndeterminate:o,role:a="progressbar"}=t,h=D1e(e,n,r);return{bind:{"data-indeterminate":o?"":void 0,"aria-valuemax":r,"aria-valuemin":n,"aria-valuenow":o?void 0:e,"aria-valuetext":(()=>{if(e!=null)return typeof s=="function"?s(e,h):i})(),role:a},percent:h,value:e}}const[$1e,N1e]=Or({name:"ProgressStylesContext",errorMessage:`useProgressStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Progress />" `}),V1e=Pt((t,e)=>{const{min:n,max:r,value:i,isIndeterminate:s,role:o,...a}=t,h=B1e({value:i,min:n,max:r,isIndeterminate:s,role:o}),g={height:"100%",...N1e().filledTrack};return u.jsx(gt.div,{ref:e,style:{width:`${h.percent}%`,...a.style},...h.bind,...a,__css:g})}),tp=Pt((t,e)=>{var X;const{value:n,min:r=0,max:i=100,hasStripe:s,isAnimated:o,children:a,borderRadius:h,isIndeterminate:p,"aria-label":g,"aria-labelledby":y,"aria-valuetext":b,title:S,role:P,...O}=Mr(t),D=xs("Progress",t),z=h??((X=D.track)==null?void 0:X.borderRadius),F={animation:`${F1e} 1s linear infinite`},Q={...!p&&s&&o&&F,...p&&{position:"absolute",willChange:"left",minWidth:"50%",animation:`${L1e} 1s ease infinite normal none running`}},q={overflow:"hidden",position:"relative",...D.track};return u.jsx(gt.div,{ref:e,borderRadius:z,__css:q,...O,children:u.jsxs($1e,{value:D,children:[u.jsx(V1e,{"aria-label":g,"aria-labelledby":y,"aria-valuetext":b,min:r,max:i,value:n,isIndeterminate:p,css:Q,borderRadius:z,title:S,role:P}),a]})})});tp.displayName="Progress";function W1e(t){return t&&mo(t)&&mo(t.target)}function U1e(t={}){const{onChange:e,value:n,defaultValue:r,name:i,isDisabled:s,isFocusable:o,isNative:a,...h}=t,[p,g]=L.useState(r||""),y=typeof n<"u",b=y?n:p,S=L.useRef(null),P=L.useCallback(()=>{const Q=S.current;if(!Q)return;let q="input:not(:disabled):checked";const X=Q.querySelector(q);if(X){X.focus();return}q="input:not(:disabled)";const K=Q.querySelector(q);K==null||K.focus()},[]),D=`radio-${L.useId()}`,z=i||D,F=L.useCallback(Q=>{const q=W1e(Q)?Q.target.value:Q;y||g(q),e==null||e(String(q))},[e,y]),R=L.useCallback((Q={},q=null)=>({...Q,ref:Ai(q,S),role:"radiogroup"}),[]),N=L.useCallback((Q={},q=null)=>({...Q,ref:q,name:z,[a?"checked":"isChecked"]:b!=null?Q.value===b:void 0,onChange(K){F(K)},"data-radiogroup":!0}),[a,z,F,b]);return{getRootProps:R,getRadioProps:N,name:z,ref:S,focus:P,setValue:g,value:b,onChange:F,isDisabled:s,isFocusable:o,htmlProps:h}}const[q1e,PQ]=Or({name:"RadioGroupContext",strict:!1}),OQ=Pt((t,e)=>{const{colorScheme:n,size:r,variant:i,children:s,className:o,isDisabled:a,isFocusable:h,...p}=t,{value:g,onChange:y,getRootProps:b,name:S,htmlProps:P}=U1e(p),O=L.useMemo(()=>({name:S,size:r,onChange:y,colorScheme:n,value:g,variant:i,isDisabled:a,isFocusable:h}),[S,r,y,n,g,i,a,h]);return u.jsx(q1e,{value:O,children:u.jsx(gt.div,{...b(P,e),className:ln("chakra-radio-group",o),children:s})})});OQ.displayName="RadioGroup";function Q1e(t={}){const{defaultChecked:e,isChecked:n,isFocusable:r,isDisabled:i,isReadOnly:s,isRequired:o,onChange:a,isInvalid:h,name:p,value:g,id:y,"data-radiogroup":b,"aria-describedby":S,...P}=t,O=`radio-${L.useId()}`,D=y_(),F=!!PQ()||!!b;let N=!!D&&!F?D.id:O;N=y??N;const Q=i??(D==null?void 0:D.isDisabled),q=s??(D==null?void 0:D.isReadOnly),X=o??(D==null?void 0:D.isRequired),K=h??(D==null?void 0:D.isInvalid),[ne,J]=L.useState(!1),[ae,Ee]=L.useState(!1),[Ce,$e]=L.useState(!1),[We,Fe]=L.useState(!!e),we=typeof n<"u",Ie=we?n:We,Qe=L.useRef(!1);L.useEffect(()=>cq(Ot=>{Qe.current=Ot}),[]);const se=L.useCallback(Ot=>{if(q||Q){Ot.preventDefault();return}we||Fe(Ot.currentTarget.checked),a==null||a(Ot)},[we,Q,q,a]),Re=L.useCallback(Ot=>{Ot.key===" "&&$e(!0)},[$e]),Oe=L.useCallback(Ot=>{Ot.key===" "&&$e(!1)},[$e]),oe=L.useCallback((Ot={},bt=null)=>({...Ot,ref:bt,"data-active":Pn(Ce),"data-hover":Pn(ae),"data-disabled":Pn(Q),"data-invalid":Pn(K),"data-checked":Pn(Ie),"data-focus":Pn(ne),"data-focus-visible":Pn(ne&&Qe.current),"data-readonly":Pn(q),"aria-hidden":!0,onMouseDown:An(Ot.onMouseDown,()=>$e(!0)),onMouseUp:An(Ot.onMouseUp,()=>$e(!1)),onMouseEnter:An(Ot.onMouseEnter,()=>Ee(!0)),onMouseLeave:An(Ot.onMouseLeave,()=>Ee(!1))}),[Ce,ae,Q,K,Ie,ne,q]),{onFocus:nt,onBlur:Ne}=D??{},tt=L.useCallback((Ot={},bt=null)=>{const rt=Q&&!r;return{...Ot,id:N,ref:bt,type:"radio",name:p,value:g,onChange:An(Ot.onChange,se),onBlur:An(Ne,Ot.onBlur,()=>J(!1)),onFocus:An(nt,Ot.onFocus,()=>J(!0)),onKeyDown:An(Ot.onKeyDown,Re),onKeyUp:An(Ot.onKeyUp,Oe),checked:Ie,disabled:rt,readOnly:q,required:X,"aria-invalid":ac(K),"aria-disabled":ac(rt),"aria-required":ac(X),"data-readonly":Pn(q),"aria-describedby":S,style:hq}},[Q,r,N,p,g,se,Ne,nt,Re,Oe,Ie,q,X,K,S]);return{state:{isInvalid:K,isFocused:ne,isChecked:Ie,isActive:Ce,isHovered:ae,isDisabled:Q,isReadOnly:q,isRequired:X},getRadioProps:oe,getInputProps:tt,getLabelProps:(Ot={},bt=null)=>({...Ot,ref:bt,onMouseDown:An(Ot.onMouseDown,H1e),"data-disabled":Pn(Q),"data-checked":Pn(Ie),"data-invalid":Pn(K)}),getRootProps:(Ot,bt=null)=>({htmlFor:N,...Ot,ref:bt,"data-disabled":Pn(Q),"data-checked":Pn(Ie),"data-invalid":Pn(K)}),htmlProps:P}}function H1e(t){t.preventDefault(),t.stopPropagation()}const AQ=Pt((t,e)=>{const n=PQ(),{onChange:r,value:i}=t,s=xs("Radio",{...n,...t}),o=Mr(t),{spacing:a="0.5rem",children:h,isDisabled:p=n==null?void 0:n.isDisabled,isFocusable:g=n==null?void 0:n.isFocusable,inputProps:y,...b}=o;let S=t.isChecked;(n==null?void 0:n.value)!=null&&i!=null&&(S=n.value===i);let P=r;n!=null&&n.onChange&&i!=null&&(P=RM(n.onChange,r));const O=(t==null?void 0:t.name)??(n==null?void 0:n.name),{getInputProps:D,getRadioProps:z,getLabelProps:F,getRootProps:R,htmlProps:N}=Q1e({...b,isChecked:S,isFocusable:g,isDisabled:p,onChange:P,name:O}),[Q,q]=LW(N,GW),X=z(q),K=D(y,e),ne=F(),J=Object.assign({},Q,R()),ae={display:"inline-flex",alignItems:"center",verticalAlign:"top",cursor:"pointer",position:"relative",...s.container},Ee={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,...s.control},Ce={userSelect:"none",marginStart:a,...s.label};return u.jsxs(gt.label,{className:"chakra-radio",...J,__css:ae,children:[u.jsx("input",{className:"chakra-radio__input",...K}),u.jsx(gt.span,{className:"chakra-radio__control",...X,__css:Ee}),h&&u.jsx(gt.span,{className:"chakra-radio__label",...ne,__css:Ce,children:h})]})});AQ.displayName="Radio";const EQ=Pt(function(e,n){const{children:r,placeholder:i,className:s,...o}=e;return u.jsxs(gt.select,{...o,ref:n,className:ln("chakra-select",s),children:[i&&u.jsx("option",{value:"",children:i}),r]})});EQ.displayName="SelectField";const Vr=Pt((t,e)=>{var R;const n=xs("Select",t),{rootProps:r,placeholder:i,icon:s,color:o,height:a,h,minH:p,minHeight:g,iconColor:y,iconSize:b,...S}=Mr(t),[P,O]=LW(S,GW),D=I5(O),z={width:"100%",height:"fit-content",position:"relative",color:o},F={paddingEnd:"2rem",...n.field,_focus:{zIndex:"unset",...(R=n.field)==null?void 0:R._focus}};return u.jsxs(gt.div,{className:"chakra-select__wrapper",__css:z,...P,...r,children:[u.jsx(EQ,{ref:e,height:h??a,minH:p??g,placeholder:i,...D,__css:F,children:t.children}),u.jsx(zQ,{"data-disabled":Pn(D.disabled),...(y||o)&&{color:y||o},__css:n.icon,...b&&{fontSize:b},children:s})]})});Vr.displayName="Select";const G1e=t=>u.jsx("svg",{viewBox:"0 0 24 24",...t,children:u.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),X1e=gt("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),zQ=t=>{const{children:e=u.jsx(G1e,{}),...n}=t,r=L.cloneElement(e,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return u.jsx(X1e,{...n,className:"chakra-select__icon-wrapper",children:L.isValidElement(e)?r:null})};zQ.displayName="SelectIcon";function fO(t){const{orientation:e,vertical:n,horizontal:r}=t;return e==="vertical"?n:r}function K1e(t){const{orientation:e,thumbPercents:n,isReversed:r}=t,i=S=>({position:"absolute",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none",...fO({orientation:e,vertical:{bottom:`${n[S]}%`,transform:"translate(-50%, 50%) scale(var(--slider-thumb-scale, 1))"},horizontal:{left:`${n[S]}%`,transform:"translate(-50%, -50%) scale(var(--slider-thumb-scale, 1))"}})}),s={position:"relative",touchAction:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",userSelect:"none",outline:0},o={position:"absolute",...fO({orientation:e,vertical:{left:"50%",transform:"translateX(-50%)",height:"100%"},horizontal:{top:"50%",transform:"translateY(-50%)",width:"100%"}})},a=n.length===1,h=[0,r?100-n[0]:n[0]],p=a?h:n;let g=p[0];!a&&r&&(g=100-g);const y=Math.abs(p[p.length-1]-p[0]),b={...o,...fO({orientation:e,vertical:r?{height:`${y}%`,top:`${g}%`}:{height:`${y}%`,bottom:`${g}%`},horizontal:r?{width:`${y}%`,right:`${g}%`}:{width:`${y}%`,left:`${g}%`}})};return{trackStyle:o,innerTrackStyle:b,rootStyle:s,getThumbStyle:i}}function Z1e(t){const{isReversed:e,direction:n,orientation:r}=t;return n==="ltr"||r==="vertical"?e:!e}function Y1e(t){const{min:e=0,max:n=100,onChange:r,value:i,defaultValue:s,isReversed:o,direction:a="ltr",orientation:h="horizontal",id:p,isDisabled:g,isReadOnly:y,onChangeStart:b,onChangeEnd:S,step:P=1,getAriaValueText:O,"aria-valuetext":D,"aria-label":z,"aria-labelledby":F,name:R,focusThumbOnChange:N=!0,...Q}=t,q=Ki(b),X=Ki(S),K=Ki(O),ne=Z1e({isReversed:o,direction:a,orientation:h}),[J,ae]=FM({value:i,defaultValue:s??e_e(e,n),onChange:r}),[Ee,Ce]=L.useState(!1),[$e,We]=L.useState(!1),Fe=!(g||y),we=(n-e)/10,Ie=P||(n-e)/100,Qe=ak(J,e,n),se=n-Qe+e,Oe=S4(ne?se:Qe,e,n),oe=h==="vertical",nt=BW({min:e,max:n,step:P,isDisabled:g,value:Qe,isInteractive:Fe,isReversed:ne,isVertical:oe,eventSource:null,focusThumbOnChange:N,orientation:h}),Ne=L.useRef(null),tt=L.useRef(null),Ye=L.useRef(null),_t=L.useId(),At=p??_t,[Ot,bt]=[`slider-thumb-${At}`,`slider-track-${At}`],rt=L.useCallback(pt=>{var Wi;if(!Ne.current)return;const zt=nt.current;zt.eventSource="pointer";const ir=Ne.current.getBoundingClientRect(),{clientX:yt,clientY:_n}=((Wi=pt.touches)==null?void 0:Wi[0])??pt,Kt=oe?ir.bottom-_n:yt-ir.left,tr=oe?ir.height:ir.width;let qr=Kt/tr;ne&&(qr=1-qr);let sn=$ne(qr,zt.min,zt.max);return zt.step&&(sn=parseFloat(k4(sn,zt.min,zt.step))),sn=ak(sn,zt.min,zt.max),sn},[oe,ne,nt]),tn=L.useCallback(pt=>{const zt=nt.current;zt.isInteractive&&(pt=parseFloat(k4(pt,zt.min,Ie)),pt=ak(pt,zt.min,zt.max),ae(pt))},[Ie,ae,nt]),kt=L.useMemo(()=>({stepUp(pt=Ie){const zt=ne?Qe-pt:Qe+pt;tn(zt)},stepDown(pt=Ie){const zt=ne?Qe+pt:Qe-pt;tn(zt)},reset(){tn(s||0)},stepTo(pt){tn(pt)}}),[tn,ne,Qe,Ie,s]),it=L.useCallback(pt=>{const zt=nt.current,yt={ArrowRight:()=>kt.stepUp(),ArrowUp:()=>kt.stepUp(),ArrowLeft:()=>kt.stepDown(),ArrowDown:()=>kt.stepDown(),PageUp:()=>kt.stepUp(we),PageDown:()=>kt.stepDown(we),Home:()=>tn(zt.min),End:()=>tn(zt.max)}[pt.key];yt&&(pt.preventDefault(),pt.stopPropagation(),yt(pt),zt.eventSource="keyboard")},[kt,tn,we,nt]),ze=(K==null?void 0:K(Qe))??D,{getThumbStyle:ut,rootStyle:qt,trackStyle:Ct,innerTrackStyle:$t}=L.useMemo(()=>{const pt=nt.current;return K1e({isReversed:ne,orientation:pt.orientation,thumbPercents:[Oe]})},[ne,Oe,nt]),Yn=L.useCallback(()=>{nt.current.focusThumbOnChange&&setTimeout(()=>{var zt;return(zt=tt.current)==null?void 0:zt.focus()})},[nt]);zf(()=>{const pt=nt.current;Yn(),pt.eventSource==="keyboard"&&(X==null||X(pt.value))},[Qe,X]);function br(pt){const zt=rt(pt);zt!=null&&zt!==nt.current.value&&ae(zt)}yre(Ye,{onPanSessionStart(pt){const zt=nt.current;zt.isInteractive&&(Ce(!0),Yn(),br(pt),q==null||q(zt.value))},onPanSessionEnd(){const pt=nt.current;pt.isInteractive&&(Ce(!1),X==null||X(pt.value))},onPan(pt){nt.current.isInteractive&&br(pt)}});const ur=L.useCallback((pt={},zt=null)=>({...pt,...Q,ref:Ai(zt,Ye),tabIndex:-1,"aria-disabled":ac(g),"data-focused":Pn($e),style:{...pt.style,...qt}}),[Q,g,$e,qt]),Ar=L.useCallback((pt={},zt=null)=>({...pt,ref:Ai(zt,Ne),id:bt,"data-disabled":Pn(g),style:{...pt.style,...Ct}}),[g,bt,Ct]),_r=L.useCallback((pt={},zt=null)=>({...pt,ref:zt,style:{...pt.style,...$t}}),[$t]),ct=L.useCallback((pt={},zt=null)=>({...pt,ref:Ai(zt,tt),role:"slider",tabIndex:Fe?0:void 0,id:Ot,"data-active":Pn(Ee),"aria-valuetext":ze,"aria-valuemin":e,"aria-valuemax":n,"aria-valuenow":Qe,"aria-orientation":h,"aria-disabled":ac(g),"aria-readonly":ac(y),"aria-label":z,"aria-labelledby":z?void 0:F,style:{...pt.style,...ut(0)},onKeyDown:An(pt.onKeyDown,it),onFocus:An(pt.onFocus,()=>We(!0)),onBlur:An(pt.onBlur,()=>We(!1))}),[Fe,Ot,Ee,ze,e,n,Qe,h,g,y,z,F,ut,it]),Tt=L.useCallback((pt,zt=null)=>{const ir=!(pt.value<e||pt.value>n),yt=Qe>=pt.value,_n=S4(pt.value,e,n),Kt={position:"absolute",pointerEvents:"none",...J1e({orientation:h,vertical:{bottom:ne?`${100-_n}%`:`${_n}%`},horizontal:{left:ne?`${100-_n}%`:`${_n}%`}})};return{...pt,ref:zt,role:"presentation","aria-hidden":!0,"data-disabled":Pn(g),"data-invalid":Pn(!ir),"data-highlighted":Pn(yt),style:{...pt.style,...Kt}}},[g,ne,n,e,h,Qe]),Me=L.useCallback((pt={},zt=null)=>({...pt,ref:zt,type:"hidden",value:Qe,name:R}),[R,Qe]);return{state:{value:Qe,isFocused:$e,isDragging:Ee},actions:kt,getRootProps:ur,getTrackProps:Ar,getInnerTrackProps:_r,getThumbProps:ct,getMarkerProps:Tt,getInputProps:Me}}function J1e(t){const{orientation:e,vertical:n,horizontal:r}=t;return e==="vertical"?n:r}function e_e(t,e){return e<t?t:t+(e-t)/2}const[t_e,hT]=Or({name:"SliderContext",hookName:"useSliderContext",providerName:"<Slider />"}),[n_e,dT]=Or({name:"SliderStylesContext",hookName:"useSliderStyles",providerName:"<Slider />"}),Hl=Pt((t,e)=>{const n={...t,orientation:(t==null?void 0:t.orientation)??"horizontal"},r=xs("Slider",n),i=Mr(n),{direction:s}=sx();i.direction=s;const{getInputProps:o,getRootProps:a,...h}=Y1e(i),p=a(),g=o({},e);return u.jsx(t_e,{value:h,children:u.jsx(n_e,{value:r,children:u.jsxs(gt.div,{...p,className:ln("chakra-slider",n.className),__css:r.container,children:[n.children,u.jsx("input",{...g})]})})})});Hl.displayName="Slider";const Gl=Pt((t,e)=>{const{getThumbProps:n}=hT(),r=dT(),i=n(t,e);return u.jsx(gt.div,{...i,className:ln("chakra-slider__thumb",t.className),__css:r.thumb})});Gl.displayName="SliderThumb";const Xl=Pt((t,e)=>{const{getTrackProps:n}=hT(),r=dT(),i=n(t,e);return u.jsx(gt.div,{...i,className:ln("chakra-slider__track",t.className),__css:r.track})});Xl.displayName="SliderTrack";const Kl=Pt((t,e)=>{const{getInnerTrackProps:n}=hT(),r=dT(),i=n(t,e);return u.jsx(gt.div,{...i,className:ln("chakra-slider__filled-track",t.className),__css:r.filledTrack})});Kl.displayName="SliderFilledTrack";const r_e=Pt((t,e)=>{const{getMarkerProps:n}=hT(),r=dT(),i=n(t,e);return u.jsx(gt.div,{...i,className:ln("chakra-slider__marker",t.className),__css:r.mark})});r_e.displayName="SliderMark";const Bo=gt("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});Bo.displayName="Spacer";const IQ=t=>u.jsx(gt.div,{className:"chakra-stack__item",...t,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...t.__css}});IQ.displayName="StackItem";function i_e(t){const{spacing:e,direction:n}=t,r={column:{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":LM(n,i=>r[i])}}const S_=Pt((t,e)=>{const{isInline:n,direction:r,align:i,justify:s,spacing:o="0.5rem",wrap:a,children:h,divider:p,className:g,shouldWrapChildren:y,...b}=t,S=n?"row":r??"column",P=L.useMemo(()=>i_e({spacing:o,direction:S}),[o,S]),O=!!p,D=!y&&!O,z=L.useMemo(()=>{const R=OC(h);return D?R:R.map((N,Q)=>{const q=typeof N.key<"u"?N.key:Q,X=Q+1===R.length,ne=y?u.jsx(IQ,{children:N},q):N;if(!O)return ne;const J=L.cloneElement(p,{__css:P}),ae=X?null:J;return u.jsxs(L.Fragment,{children:[ne,ae]},q)})},[p,P,O,D,y,h]),F=ln("chakra-stack",g);return u.jsx(gt.div,{ref:e,display:"flex",alignItems:i,justifyContent:s,flexDirection:S,flexWrap:a,gap:O?void 0:o,className:F,...b,children:z})});S_.displayName="Stack";const me=Pt((t,e)=>u.jsx(S_,{align:"center",...t,direction:"row",ref:e}));me.displayName="HStack";const at=Pt((t,e)=>u.jsx(S_,{align:"center",...t,direction:"column",ref:e}));at.displayName="VStack";const[s_e,iR]=Or({name:"StatStylesContext",errorMessage:`useStatStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Stat />" `}),ds=Pt(function(e,n){const r=xs("Stat",e),i={position:"relative",flex:"1 1 0%",...r.container},{className:s,children:o,...a}=Mr(e);return u.jsx(s_e,{value:r,children:u.jsx(gt.div,{ref:n,...a,className:ln("chakra-stat",s),__css:i,children:u.jsx("dl",{children:o})})})});ds.displayName="Stat";const kf=Pt(function(e,n){const r=iR();return u.jsx(gt.dd,{ref:n,...e,className:ln("chakra-stat__help-text",e.className),__css:r.helpText})});kf.displayName="StatHelpText";const fs=Pt(function(e,n){const r=iR();return u.jsx(gt.dt,{ref:n,...e,className:ln("chakra-stat__label",e.className),__css:r.label})});fs.displayName="StatLabel";const ps=Pt(function(e,n){const r=iR();return u.jsx(gt.dd,{ref:n,...e,className:ln("chakra-stat__number",e.className),__css:{...r.number,fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"}})});ps.displayName="StatNumber";const ja=Pt(function(e,n){const r=xs("Switch",e),{spacing:i="0.5rem",children:s,...o}=Mr(e),{getIndicatorProps:a,getInputProps:h,getCheckboxProps:p,getRootProps:g,getLabelProps:y}=dq(o),b=L.useMemo(()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...r.container}),[r.container]),S=L.useMemo(()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...r.track}),[r.track]),P=L.useMemo(()=>({userSelect:"none",marginStart:i,...r.label}),[i,r.label]);return u.jsxs(gt.label,{...g(),className:ln("chakra-switch",e.className),__css:b,children:[u.jsx("input",{className:"chakra-switch__input",...h({},n)}),u.jsx(gt.span,{...p(),className:"chakra-switch__track",__css:S,children:u.jsx(gt.span,{__css:r.thumb,className:"chakra-switch__thumb",...a()})}),s&&u.jsx(gt.span,{className:"chakra-switch__label",...y(),__css:P,children:s})]})});ja.displayName="Switch";const[o_e,k_]=Or({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),rg=Pt((t,e)=>{const n=xs("Table",t),{className:r,layout:i,...s}=Mr(t);return u.jsx(o_e,{value:n,children:u.jsx(gt.table,{ref:e,__css:{tableLayout:i,...n.table},className:ln("chakra-table",r),...s})})});rg.displayName="Table";const lx=Pt((t,e)=>{const n=k_();return u.jsx(gt.tbody,{...t,ref:e,__css:n.tbody})}),Qi=Pt(({isNumeric:t,...e},n)=>{const r=k_();return u.jsx(gt.td,{...e,ref:n,__css:r.td,"data-is-numeric":t})}),Dc=Pt(({isNumeric:t,...e},n)=>{const r=k_();return u.jsx(gt.th,{...e,ref:n,__css:r.th,"data-is-numeric":t})}),C_=Pt((t,e)=>{const n=k_();return u.jsx(gt.thead,{...t,ref:e,__css:n.thead})}),za=Pt((t,e)=>{const n=k_();return u.jsx(gt.tr,{...t,ref:e,__css:n.tr})}),[a_e,l_e,c_e,u_e]=O5();function h_e(t){const{defaultIndex:e,onChange:n,index:r,isManual:i,isLazy:s,lazyBehavior:o="unmount",orientation:a="horizontal",direction:h="ltr",...p}=t,[g,y]=L.useState(e??0),[b,S]=FM({defaultValue:e??0,value:r,onChange:n});L.useEffect(()=>{r!=null&&y(r)},[r]);const P=c_e(),O=L.useId();return{id:`tabs-${t.id??O}`,selectedIndex:b,focusedIndex:g,setSelectedIndex:S,setFocusedIndex:y,isManual:i,isLazy:s,lazyBehavior:o,orientation:a,descendants:P,direction:h,htmlProps:p}}const[d_e,fT]=Or({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function f_e(t){const{focusedIndex:e,orientation:n,direction:r}=fT(),i=l_e(),s=L.useCallback(o=>{const a=()=>{var R;const F=i.nextEnabled(e);F&&((R=F.node)==null||R.focus())},h=()=>{var R;const F=i.prevEnabled(e);F&&((R=F.node)==null||R.focus())},p=()=>{var R;const F=i.firstEnabled();F&&((R=F.node)==null||R.focus())},g=()=>{var R;const F=i.lastEnabled();F&&((R=F.node)==null||R.focus())},y=n==="horizontal",b=n==="vertical",S=o.key,P=r==="ltr"?"ArrowLeft":"ArrowRight",O=r==="ltr"?"ArrowRight":"ArrowLeft",z={[P]:()=>y&&h(),[O]:()=>y&&a(),ArrowDown:()=>b&&a(),ArrowUp:()=>b&&h(),Home:p,End:g}[S];z&&(o.preventDefault(),z(o))},[i,e,n,r]);return{...t,role:"tablist","aria-orientation":n,onKeyDown:An(t.onKeyDown,s)}}function p_e(t){const{isDisabled:e=!1,isFocusable:n=!1,...r}=t,{setSelectedIndex:i,isManual:s,id:o,setFocusedIndex:a,selectedIndex:h}=fT(),{index:p,register:g}=u_e({disabled:e&&!n}),y=p===h,b=()=>{i(p)},S=()=>{a(p),!s&&!(e&&n)&&i(p)};return{...cQ({...r,ref:Ai(g,t.ref),isDisabled:e,isFocusable:n,onClick:An(t.onClick,b)}),id:MQ(o,p),role:"tab",tabIndex:y?0:-1,type:"button","aria-selected":y,"aria-controls":RQ(o,p),onFocus:e?void 0:An(t.onFocus,S)}}const[m_e,g_e]=Or({});function y_e(t){const e=fT(),{id:n,selectedIndex:r}=e,s=OC(t.children).map((o,a)=>L.createElement(m_e,{key:o.key??a,value:{isSelected:a===r,id:RQ(n,a),tabId:MQ(n,a),selectedIndex:r}},o));return{...t,children:s}}function x_e(t){const{children:e,...n}=t,{isLazy:r,lazyBehavior:i}=fT(),{isSelected:s,id:o,tabId:a}=g_e(),h=L.useRef(!1);s&&(h.current=!0);const p=MW({wasSelected:h.current,isSelected:s,enabled:r,mode:i});return{tabIndex:0,...n,children:p?e:null,role:"tabpanel","aria-labelledby":a,hidden:!s,id:o}}function MQ(t,e){return`${t}--tab-${e}`}function RQ(t,e){return`${t}--tabpanel-${e}`}const[v_e,pT]=Or({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),cx=Pt(function(e,n){const r=xs("Tabs",e),{children:i,className:s,...o}=Mr(e),{htmlProps:a,descendants:h,...p}=h_e(o),g=L.useMemo(()=>p,[p]),{isFitted:y,...b}=a,S={position:"relative",...r.root};return u.jsx(a_e,{value:h,children:u.jsx(d_e,{value:g,children:u.jsx(v_e,{value:r,children:u.jsx(gt.div,{className:ln("chakra-tabs",s),ref:n,...b,__css:S,children:i})})})})});cx.displayName="Tabs";const fo=Pt(function(e,n){const r=pT(),i=p_e({...e,ref:n}),s={outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...r.tab};return u.jsx(gt.button,{...i,className:ln("chakra-tabs__tab",e.className),__css:s})});fo.displayName="Tab";const ux=Pt(function(e,n){const r=f_e({...e,ref:n}),i=pT(),s={display:"flex",...i.tablist};return u.jsx(gt.div,{...r,className:ln("chakra-tabs__tablist",e.className),__css:s})});ux.displayName="TabList";const Ra=Pt(function(e,n){const r=x_e({...e,ref:n}),i=pT();return u.jsx(gt.div,{outline:"0",...r,className:ln("chakra-tabs__tab-panel",e.className),__css:i.tabpanel})});Ra.displayName="TabPanel";const T_=Pt(function(e,n){const r=y_e(e),i=pT();return u.jsx(gt.div,{...r,width:"100%",ref:n,className:ln("chakra-tabs__tab-panels",e.className),__css:i.tabpanels})});T_.displayName="TabPanels";const[b_e,DQ]=Or({name:"TagStylesContext",errorMessage:`useTagStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tag />" `}),Vm=Pt((t,e)=>{const n=xs("Tag",t),r=Mr(t),i={display:"inline-flex",verticalAlign:"top",alignItems:"center",maxWidth:"100%",...n.container};return u.jsx(b_e,{value:n,children:u.jsx(gt.span,{ref:e,...r,__css:i})})});Vm.displayName="Tag";const T1=Pt((t,e)=>{const n=DQ();return u.jsx(gt.span,{ref:e,noOfLines:1,...t,__css:n.label})});T1.displayName="TagLabel";const __e=Pt((t,e)=>u.jsx(Le,{ref:e,verticalAlign:"top",marginEnd:"0.5rem",...t}));__e.displayName="TagLeftIcon";const w_e=Pt((t,e)=>u.jsx(Le,{ref:e,verticalAlign:"top",marginStart:"0.5rem",...t}));w_e.displayName="TagRightIcon";const LQ=t=>u.jsx(Le,{verticalAlign:"inherit",viewBox:"0 0 512 512",...t,children:u.jsx("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})});LQ.displayName="TagCloseIcon";const FQ=Pt((t,e)=>{const{isDisabled:n,children:r,...i}=t,o={display:"flex",alignItems:"center",justifyContent:"center",outline:"0",...DQ().closeButton};return u.jsx(gt.button,{ref:e,"aria-label":"close",...i,type:"button",disabled:n,__css:o,children:r||u.jsx(LQ,{})})});FQ.displayName="TagCloseButton";const S_e=["h","minH","height","minHeight"],mT=Pt((t,e)=>{const n=Ga("Textarea",t),{className:r,rows:i,...s}=Mr(t),o=I5(s),a=i?s_(n,S_e):n;return u.jsx(gt.textarea,{ref:e,rows:i,...o,className:ln("chakra-textarea",r),__css:a})});mT.displayName="Textarea";function k_e(t,e){const n=t??"bottom",i={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[n];return(i==null?void 0:i[e])??n}function C_e(t,e){const n=i=>({...e,...i,position:k_e((i==null?void 0:i.position)??(e==null?void 0:e.position),t)}),r=i=>{const s=n(i),o=aq(s);return Pu.notify(o,s)};return r.update=(i,s)=>{Pu.update(i,n(s))},r.promise=(i,s)=>{const o=r({...s.loading,status:"loading",duration:null});i.then(a=>r.update(o,{status:"success",duration:5e3,...pl(s.success,a)})).catch(a=>r.update(o,{status:"error",duration:5e3,...pl(s.error,a)}))},r.closeAll=Pu.closeAll,r.close=Pu.close,r.isActive=Pu.isActive,r}function ha(t){const{theme:e}=iq(),n=rye();return L.useMemo(()=>C_e(e.direction,{...n,...t}),[t,e.direction,n])}const T_e={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}},lz=t=>{var e;return((e=t.current)==null?void 0:e.ownerDocument)||document},Tk=t=>{var e,n;return((n=(e=t.current)==null?void 0:e.ownerDocument)==null?void 0:n.defaultView)||window};function j_e(t={}){const{openDelay:e=0,closeDelay:n=0,closeOnClick:r=!0,closeOnMouseDown:i,closeOnScroll:s,closeOnPointerDown:o=i,closeOnEsc:a=!0,onOpen:h,onClose:p,placement:g,id:y,isOpen:b,defaultIsOpen:S,arrowSize:P=10,arrowShadowColor:O,arrowPadding:D,modifiers:z,isDisabled:F,gutter:R,offset:N,direction:Q,...q}=t,{isOpen:X,onOpen:K,onClose:ne}=Lm({isOpen:b,defaultIsOpen:S,onOpen:h,onClose:p}),{referenceRef:J,getPopperProps:ae,getArrowInnerProps:Ee,getArrowProps:Ce}=lQ({enabled:X,placement:g,arrowPadding:D,modifiers:z,gutter:R,offset:N,direction:Q}),$e=L.useId(),Fe=`tooltip-${y??$e}`,we=L.useRef(null),Ie=L.useRef(void 0),Qe=L.useCallback(()=>{Ie.current&&(clearTimeout(Ie.current),Ie.current=void 0)},[]),se=L.useRef(void 0),Re=L.useCallback(()=>{se.current&&(clearTimeout(se.current),se.current=void 0)},[]),Oe=L.useCallback(()=>{Re(),ne()},[ne,Re]),oe=P_e(we,Oe),nt=L.useCallback(()=>{if(!F&&!Ie.current){X&&oe();const rt=Tk(we);Ie.current=rt.setTimeout(K,e)}},[oe,F,X,K,e]),Ne=L.useCallback(()=>{Qe();const rt=Tk(we);se.current=rt.setTimeout(Oe,n)},[n,Oe,Qe]),tt=L.useCallback(()=>{X&&r&&Ne()},[r,Ne,X]),Ye=L.useCallback(()=>{X&&o&&Ne()},[o,Ne,X]),_t=L.useCallback(rt=>{X&&rt.key==="Escape"&&Ne()},[X,Ne]);bb(()=>lz(we),"keydown",a?_t:void 0),bb(()=>{if(!s)return null;const rt=we.current;if(!rt)return null;const tn=DW(rt);return tn.localName==="body"?Tk(we):tn},"scroll",()=>{X&&s&&Oe()},{passive:!0,capture:!0}),L.useEffect(()=>{F&&(Qe(),X&&ne())},[F,X,ne,Qe]),L.useEffect(()=>()=>{Qe(),Re()},[Qe,Re]),bb(()=>we.current,"pointerleave",Ne);const At=L.useCallback((rt={},tn=null)=>({...rt,ref:Ai(we,tn,J),onPointerEnter:An(rt.onPointerEnter,it=>{it.pointerType!=="touch"&&nt()}),onClick:An(rt.onClick,tt),onPointerDown:An(rt.onPointerDown,Ye),onFocus:An(rt.onFocus,nt),onBlur:An(rt.onBlur,Ne),"aria-describedby":X?Fe:void 0}),[nt,Ne,Ye,X,Fe,tt,J]),Ot=L.useCallback((rt={},tn=null)=>ae({...rt,style:{...rt.style,[co.arrowSize.var]:P?`${P}px`:void 0,[co.arrowShadowColor.var]:O}},tn),[ae,P,O]),bt=L.useCallback((rt={},tn=null)=>{const kt={...rt.style,position:"relative",transformOrigin:co.transformOrigin.varRef};return{ref:tn,...q,...rt,id:Fe,role:"tooltip",style:kt}},[q,Fe]);return{isOpen:X,show:nt,hide:Ne,getTriggerProps:At,getTooltipProps:bt,getTooltipPositionerProps:Ot,getArrowProps:Ce,getArrowInnerProps:Ee}}const pO="chakra-ui:close-tooltip";function P_e(t,e){return L.useEffect(()=>{const n=lz(t);return n.addEventListener(pO,e),()=>n.removeEventListener(pO,e)},[e,t]),()=>{const n=lz(t),r=Tk(t);n.dispatchEvent(new r.CustomEvent(pO))}}const O_e=gt(Nr.div),kn=Pt((t,e)=>{const n=Ga("Tooltip",t),r=Mr(t),i=sx(),{children:s,label:o,shouldWrapChildren:a,"aria-label":h,hasArrow:p,bg:g,portalProps:y,background:b,backgroundColor:S,bgColor:P,motionProps:O,animatePresenceProps:D,...z}=r,F=b??S??g??P;if(F){n.bg=F;const J=oie(i,"colors",F);n[co.arrowBg.var]=J}const R=j_e({...z,direction:i.direction}),N=!L.isValidElement(s)||a;let Q;if(N)Q=u.jsx(gt.span,{display:"inline-block",tabIndex:0,...R.getTriggerProps(),children:s});else{const J=L.Children.only(s);Q=L.cloneElement(J,R.getTriggerProps(J.props,R1e(J)))}const q=!!h,X=R.getTooltipProps({},e),K=q?s_(X,["role","id"]):X,ne=RW(X,["role","id"]);return o?u.jsxs(u.Fragment,{children:[Q,u.jsx(Sl,{...D,children:R.isOpen&&u.jsx(ox,{...y,children:u.jsx(gt.div,{...R.getTooltipPositionerProps(),__css:{zIndex:n.zIndex,pointerEvents:"none"},children:u.jsxs(O_e,{variants:T_e,initial:"exit",animate:"enter",exit:"exit",...O,...K,__css:n,children:[o,q&&u.jsx(gt.span,{srOnly:!0,...ne,children:h}),p&&u.jsx(gt.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper",children:u.jsx(gt.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:n.bg}})})]})})})})]}):u.jsx(u.Fragment,{children:s})});kn.displayName="Tooltip";const lr=Pt(function(e,n){const r=Ga("Heading",e),{className:i,...s}=Mr(e);return u.jsx(gt.h2,{ref:n,className:ln("chakra-heading",e.className),...s,__css:r})});lr.displayName="Heading";const te=Pt(function(e,n){const r=Ga("Text",e),{className:i,align:s,decoration:o,casing:a,...h}=Mr(e),p=AC({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return u.jsx(gt.p,{ref:n,className:ln("chakra-text",e.className),...p,...h,__css:r})});te.displayName="Text";const $0=Pt(function(e,n){const{spacing:r="0.5rem",spacingX:i,spacingY:s,children:o,justify:a,direction:h,align:p,className:g,shouldWrapChildren:y,...b}=e,S=L.useMemo(()=>y?L.Children.map(o,(P,O)=>u.jsx(Wm,{children:P},O)):o,[o,y]);return u.jsx(gt.div,{ref:n,className:ln("chakra-wrap",g),...b,children:u.jsx(gt.ul,{className:"chakra-wrap__list",__css:{display:"flex",flexWrap:"wrap",justifyContent:a,alignItems:p,flexDirection:h,listStyleType:"none",gap:r,columnGap:i,rowGap:s,padding:"0"},children:S})})});$0.displayName="Wrap";const Wm=Pt(function(e,n){const{className:r,...i}=e;return u.jsx(gt.li,{ref:n,__css:{display:"flex",alignItems:"flex-start"},className:ln("chakra-wrap__listitem",r),...i})});Wm.displayName="WrapItem";var hx=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},A_e={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},tf,FI,r9,E_e=(r9=class{constructor(){On(this,tf,A_e);On(this,FI,!1)}setTimeoutProvider(t){cn(this,tf,t)}setTimeout(t,e){return Be(this,tf).setTimeout(t,e)}clearTimeout(t){Be(this,tf).clearTimeout(t)}setInterval(t,e){return Be(this,tf).setInterval(t,e)}clearInterval(t){Be(this,tf).clearInterval(t)}},tf=new WeakMap,FI=new WeakMap,r9),nm=new E_e;function z_e(t){setTimeout(t,0)}var Um=typeof window>"u"||"Deno"in globalThis;function ea(){}function I_e(t,e){return typeof t=="function"?t(e):t}function cz(t){return typeof t=="number"&&t>=0&&t!==1/0}function BQ(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Cf(t,e){return typeof t=="function"?t(e):t}function Ul(t,e){return typeof t=="function"?t(e):t}function HB(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==sR(o,e.options))return!1}else if(!j1(e.queryKey,o))return!1}if(n!=="all"){const h=e.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function GB(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(qm(e.options.mutationKey)!==qm(s))return!1}else if(!j1(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function sR(t,e){return((e==null?void 0:e.queryKeyHashFn)||qm)(t)}function qm(t){return JSON.stringify(t,(e,n)=>uz(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function j1(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>j1(t[n],e[n])):!1}var M_e=Object.prototype.hasOwnProperty;function $Q(t,e,n=0){if(t===e)return t;if(n>500)return e;const r=XB(t)&&XB(e);if(!r&&!(uz(t)&&uz(e)))return e;const s=(r?t:Object.keys(t)).length,o=r?e:Object.keys(e),a=o.length,h=r?new Array(a):{};let p=0;for(let g=0;g<a;g++){const y=r?g:o[g],b=t[y],S=e[y];if(b===S){h[y]=b,(r?g<s:M_e.call(t,y))&&p++;continue}if(b===null||S===null||typeof b!="object"||typeof S!="object"){h[y]=S;continue}const P=$Q(b,S,n+1);h[y]=P,P===b&&p++}return s===a&&p===s?t:h}function O2(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function XB(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function uz(t){if(!KB(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!KB(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function KB(t){return Object.prototype.toString.call(t)==="[object Object]"}function R_e(t){return new Promise(e=>{nm.setTimeout(e,t)})}function hz(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?$Q(t,e):e}function D_e(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function L_e(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var oR=Symbol();function NQ(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===oR?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function aR(t,e){return typeof t=="function"?t(...e):!!t}function F_e(t,e,n){let r=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),r||(r=!0,i.aborted?n():i.addEventListener("abort",n,{once:!0})),i)}),t}var om,nf,c0,i9,B_e=(i9=class extends hx{constructor(){super();On(this,om);On(this,nf);On(this,c0);cn(this,c0,e=>{if(!Um&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Be(this,nf)||this.setEventListener(Be(this,c0))}onUnsubscribe(){var e;this.hasListeners()||((e=Be(this,nf))==null||e.call(this),cn(this,nf,void 0))}setEventListener(e){var n;cn(this,c0,e),(n=Be(this,nf))==null||n.call(this),cn(this,nf,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Be(this,om)!==e&&(cn(this,om,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Be(this,om)=="boolean"?Be(this,om):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},om=new WeakMap,nf=new WeakMap,c0=new WeakMap,i9),lR=new B_e;function dz(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var $_e=z_e;function N_e(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=$_e;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(h=>{n(h)})})})};return{batch:a=>{let h;e++;try{h=a()}finally{e--,e||o()}return h},batchCalls:a=>(...h)=>{s(()=>{a(...h)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var js=N_e(),u0,rf,h0,s9,V_e=(s9=class extends hx{constructor(){super();On(this,u0,!0);On(this,rf);On(this,h0);cn(this,h0,e=>{if(!Um&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Be(this,rf)||this.setEventListener(Be(this,h0))}onUnsubscribe(){var e;this.hasListeners()||((e=Be(this,rf))==null||e.call(this),cn(this,rf,void 0))}setEventListener(e){var n;cn(this,h0,e),(n=Be(this,rf))==null||n.call(this),cn(this,rf,e(this.setOnline.bind(this)))}setOnline(e){Be(this,u0)!==e&&(cn(this,u0,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Be(this,u0)}},u0=new WeakMap,rf=new WeakMap,h0=new WeakMap,s9),A2=new V_e;function W_e(t){return Math.min(1e3*2**t,3e4)}function VQ(t){return(t??"online")==="online"?A2.isOnline():!0}var fz=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function WQ(t){let e=!1,n=0,r;const i=dz(),s=()=>i.status!=="pending",o=O=>{var D;if(!s()){const z=new fz(O);b(z),(D=t.onCancel)==null||D.call(t,z)}},a=()=>{e=!0},h=()=>{e=!1},p=()=>lR.isFocused()&&(t.networkMode==="always"||A2.isOnline())&&t.canRun(),g=()=>VQ(t.networkMode)&&t.canRun(),y=O=>{s()||(r==null||r(),i.resolve(O))},b=O=>{s()||(r==null||r(),i.reject(O))},S=()=>new Promise(O=>{var D;r=z=>{(s()||p())&&O(z)},(D=t.onPause)==null||D.call(t)}).then(()=>{var O;r=void 0,s()||(O=t.onContinue)==null||O.call(t)}),P=()=>{if(s())return;let O;const D=n===0?t.initialPromise:void 0;try{O=D??t.fn()}catch(z){O=Promise.reject(z)}Promise.resolve(O).then(y).catch(z=>{var q;if(s())return;const F=t.retry??(Um?0:3),R=t.retryDelay??W_e,N=typeof R=="function"?R(n,z):R,Q=F===!0||typeof F=="number"&&n<F||typeof F=="function"&&F(n,z);if(e||!Q){b(z);return}n++,(q=t.onFail)==null||q.call(t,n,z),R_e(N).then(()=>p()?void 0:S()).then(()=>{e?b(z):P()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:h,canStart:g,start:()=>(g()?P():S().then(P),i)}}var am,o9,UQ=(o9=class{constructor(){On(this,am)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),cz(this.gcTime)&&cn(this,am,nm.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Um?1/0:5*60*1e3))}clearGcTimeout(){Be(this,am)&&(nm.clearTimeout(Be(this,am)),cn(this,am,void 0))}},am=new WeakMap,o9),lm,d0,Vl,cm,Gs,X1,um,Ac,xh,a9,U_e=(a9=class extends UQ{constructor(e){super();On(this,Ac);On(this,lm);On(this,d0);On(this,Vl);On(this,cm);On(this,Gs);On(this,X1);On(this,um);cn(this,um,!1),cn(this,X1,e.defaultOptions),this.setOptions(e.options),this.observers=[],cn(this,cm,e.client),cn(this,Vl,Be(this,cm).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,cn(this,lm,YB(this.options)),this.state=e.state??Be(this,lm),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Be(this,Gs))==null?void 0:e.promise}setOptions(e){if(this.options={...Be(this,X1),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=YB(this.options);n.data!==void 0&&(this.setState(ZB(n.data,n.dataUpdatedAt)),cn(this,lm,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Be(this,Vl).remove(this)}setData(e,n){const r=hz(this.state.data,e,this.options);return ar(this,Ac,xh).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){ar(this,Ac,xh).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=Be(this,Gs))==null?void 0:r.promise;return(i=Be(this,Gs))==null||i.cancel(e),n?n.then(ea).catch(ea):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Be(this,lm))}isActive(){return this.observers.some(e=>Ul(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===oR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Cf(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!BQ(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=Be(this,Gs))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=Be(this,Gs))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Be(this,Vl).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(Be(this,Gs)&&(Be(this,um)?Be(this,Gs).cancel({revert:!0}):Be(this,Gs).cancelRetry()),this.scheduleGc()),Be(this,Vl).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ar(this,Ac,xh).call(this,{type:"invalidate"})}async fetch(e,n){var h,p,g,y,b,S,P,O,D,z,F,R;if(this.state.fetchStatus!=="idle"&&((h=Be(this,Gs))==null?void 0:h.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Be(this,Gs))return Be(this,Gs).continueRetry(),Be(this,Gs).promise}if(e&&this.setOptions(e),!this.options.queryFn){const N=this.observers.find(Q=>Q.options.queryFn);N&&this.setOptions(N.options)}const r=new AbortController,i=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(cn(this,um,!0),r.signal)})},s=()=>{const N=NQ(this.options,n),q=(()=>{const X={client:Be(this,cm),queryKey:this.queryKey,meta:this.meta};return i(X),X})();return cn(this,um,!1),this.options.persister?this.options.persister(N,q,this):N(q)},a=(()=>{const N={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Be(this,cm),state:this.state,fetchFn:s};return i(N),N})();(p=this.options.behavior)==null||p.onFetch(a,this),cn(this,d0,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((g=a.fetchOptions)==null?void 0:g.meta))&&ar(this,Ac,xh).call(this,{type:"fetch",meta:(y=a.fetchOptions)==null?void 0:y.meta}),cn(this,Gs,WQ({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:N=>{N instanceof fz&&N.revert&&this.setState({...Be(this,d0),fetchStatus:"idle"}),r.abort()},onFail:(N,Q)=>{ar(this,Ac,xh).call(this,{type:"failed",failureCount:N,error:Q})},onPause:()=>{ar(this,Ac,xh).call(this,{type:"pause"})},onContinue:()=>{ar(this,Ac,xh).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const N=await Be(this,Gs).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(S=(b=Be(this,Vl).config).onSuccess)==null||S.call(b,N,this),(O=(P=Be(this,Vl).config).onSettled)==null||O.call(P,N,this.state.error,this),N}catch(N){if(N instanceof fz){if(N.silent)return Be(this,Gs).promise;if(N.revert){if(this.state.data===void 0)throw N;return this.state.data}}throw ar(this,Ac,xh).call(this,{type:"error",error:N}),(z=(D=Be(this,Vl).config).onError)==null||z.call(D,N,this),(R=(F=Be(this,Vl).config).onSettled)==null||R.call(F,this.state.data,N,this),N}finally{this.scheduleGc()}}},lm=new WeakMap,d0=new WeakMap,Vl=new WeakMap,cm=new WeakMap,Gs=new WeakMap,X1=new WeakMap,um=new WeakMap,Ac=new WeakSet,xh=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...qQ(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,...ZB(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return cn(this,d0,e.manual?i:void 0),i;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),js.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Be(this,Vl).notify({query:this,type:"updated",action:e})})},a9);function qQ(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:VQ(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function ZB(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function YB(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ka,wr,K1,Zo,hm,f0,wh,sf,Z1,p0,m0,dm,fm,of,g0,Hr,ib,pz,mz,gz,yz,xz,vz,bz,QQ,l9,q_e=(l9=class extends hx{constructor(e,n){super();On(this,Hr);On(this,ka);On(this,wr);On(this,K1);On(this,Zo);On(this,hm);On(this,f0);On(this,wh);On(this,sf);On(this,Z1);On(this,p0);On(this,m0);On(this,dm);On(this,fm);On(this,of);On(this,g0,new Set);this.options=n,cn(this,ka,e),cn(this,sf,null),cn(this,wh,dz()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Be(this,wr).addObserver(this),JB(Be(this,wr),this.options)?ar(this,Hr,ib).call(this):this.updateResult(),ar(this,Hr,yz).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return _z(Be(this,wr),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return _z(Be(this,wr),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ar(this,Hr,xz).call(this),ar(this,Hr,vz).call(this),Be(this,wr).removeObserver(this)}setOptions(e){const n=this.options,r=Be(this,wr);if(this.options=Be(this,ka).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ul(this.options.enabled,Be(this,wr))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ar(this,Hr,bz).call(this),Be(this,wr).setOptions(this.options),n._defaulted&&!O2(this.options,n)&&Be(this,ka).getQueryCache().notify({type:"observerOptionsUpdated",query:Be(this,wr),observer:this});const i=this.hasListeners();i&&e6(Be(this,wr),r,this.options,n)&&ar(this,Hr,ib).call(this),this.updateResult(),i&&(Be(this,wr)!==r||Ul(this.options.enabled,Be(this,wr))!==Ul(n.enabled,Be(this,wr))||Cf(this.options.staleTime,Be(this,wr))!==Cf(n.staleTime,Be(this,wr)))&&ar(this,Hr,pz).call(this);const s=ar(this,Hr,mz).call(this);i&&(Be(this,wr)!==r||Ul(this.options.enabled,Be(this,wr))!==Ul(n.enabled,Be(this,wr))||s!==Be(this,of))&&ar(this,Hr,gz).call(this,s)}getOptimisticResult(e){const n=Be(this,ka).getQueryCache().build(Be(this,ka),e),r=this.createResult(n,e);return H_e(this,r)&&(cn(this,Zo,r),cn(this,f0,this.options),cn(this,hm,Be(this,wr).state)),r}getCurrentResult(){return Be(this,Zo)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Be(this,wh).status==="pending"&&Be(this,wh).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){Be(this,g0).add(e)}getCurrentQuery(){return Be(this,wr)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=Be(this,ka).defaultQueryOptions(e),r=Be(this,ka).getQueryCache().build(Be(this,ka),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return ar(this,Hr,ib).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Be(this,Zo)))}createResult(e,n){var ne;const r=Be(this,wr),i=this.options,s=Be(this,Zo),o=Be(this,hm),a=Be(this,f0),p=e!==r?e.state:Be(this,K1),{state:g}=e;let y={...g},b=!1,S;if(n._optimisticResults){const J=this.hasListeners(),ae=!J&&JB(e,n),Ee=J&&e6(e,r,n,i);(ae||Ee)&&(y={...y,...qQ(g.data,e.options)}),n._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:P,errorUpdatedAt:O,status:D}=y;S=y.data;let z=!1;if(n.placeholderData!==void 0&&S===void 0&&D==="pending"){let J;s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(J=s.data,z=!0):J=typeof n.placeholderData=="function"?n.placeholderData((ne=Be(this,m0))==null?void 0:ne.state.data,Be(this,m0)):n.placeholderData,J!==void 0&&(D="success",S=hz(s==null?void 0:s.data,J,n),b=!0)}if(n.select&&S!==void 0&&!z)if(s&&S===(o==null?void 0:o.data)&&n.select===Be(this,Z1))S=Be(this,p0);else try{cn(this,Z1,n.select),S=n.select(S),S=hz(s==null?void 0:s.data,S,n),cn(this,p0,S),cn(this,sf,null)}catch(J){cn(this,sf,J)}Be(this,sf)&&(P=Be(this,sf),S=Be(this,p0),O=Date.now(),D="error");const F=y.fetchStatus==="fetching",R=D==="pending",N=D==="error",Q=R&&F,q=S!==void 0,K={status:D,fetchStatus:y.fetchStatus,isPending:R,isSuccess:D==="success",isError:N,isInitialLoading:Q,isLoading:Q,data:S,dataUpdatedAt:y.dataUpdatedAt,error:P,errorUpdatedAt:O,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>p.dataUpdateCount||y.errorUpdateCount>p.errorUpdateCount,isFetching:F,isRefetching:F&&!R,isLoadingError:N&&!q,isPaused:y.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:N&&q,isStale:cR(e,n),refetch:this.refetch,promise:Be(this,wh),isEnabled:Ul(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const J=K.data!==void 0,ae=K.status==="error"&&!J,Ee=We=>{ae?We.reject(K.error):J&&We.resolve(K.data)},Ce=()=>{const We=cn(this,wh,K.promise=dz());Ee(We)},$e=Be(this,wh);switch($e.status){case"pending":e.queryHash===r.queryHash&&Ee($e);break;case"fulfilled":(ae||K.data!==$e.value)&&Ce();break;case"rejected":(!ae||K.error!==$e.reason)&&Ce();break}}return K}updateResult(){const e=Be(this,Zo),n=this.createResult(Be(this,wr),this.options);if(cn(this,hm,Be(this,wr).state),cn(this,f0,this.options),Be(this,hm).data!==void 0&&cn(this,m0,Be(this,wr)),O2(n,e))return;cn(this,Zo,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!Be(this,g0).size)return!0;const o=new Set(s??Be(this,g0));return this.options.throwOnError&&o.add("error"),Object.keys(Be(this,Zo)).some(a=>{const h=a;return Be(this,Zo)[h]!==e[h]&&o.has(h)})};ar(this,Hr,QQ).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ar(this,Hr,yz).call(this)}},ka=new WeakMap,wr=new WeakMap,K1=new WeakMap,Zo=new WeakMap,hm=new WeakMap,f0=new WeakMap,wh=new WeakMap,sf=new WeakMap,Z1=new WeakMap,p0=new WeakMap,m0=new WeakMap,dm=new WeakMap,fm=new WeakMap,of=new WeakMap,g0=new WeakMap,Hr=new WeakSet,ib=function(e){ar(this,Hr,bz).call(this);let n=Be(this,wr).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(ea)),n},pz=function(){ar(this,Hr,xz).call(this);const e=Cf(this.options.staleTime,Be(this,wr));if(Um||Be(this,Zo).isStale||!cz(e))return;const r=BQ(Be(this,Zo).dataUpdatedAt,e)+1;cn(this,dm,nm.setTimeout(()=>{Be(this,Zo).isStale||this.updateResult()},r))},mz=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Be(this,wr)):this.options.refetchInterval)??!1},gz=function(e){ar(this,Hr,vz).call(this),cn(this,of,e),!(Um||Ul(this.options.enabled,Be(this,wr))===!1||!cz(Be(this,of))||Be(this,of)===0)&&cn(this,fm,nm.setInterval(()=>{(this.options.refetchIntervalInBackground||lR.isFocused())&&ar(this,Hr,ib).call(this)},Be(this,of)))},yz=function(){ar(this,Hr,pz).call(this),ar(this,Hr,gz).call(this,ar(this,Hr,mz).call(this))},xz=function(){Be(this,dm)&&(nm.clearTimeout(Be(this,dm)),cn(this,dm,void 0))},vz=function(){Be(this,fm)&&(nm.clearInterval(Be(this,fm)),cn(this,fm,void 0))},bz=function(){const e=Be(this,ka).getQueryCache().build(Be(this,ka),this.options);if(e===Be(this,wr))return;const n=Be(this,wr);cn(this,wr,e),cn(this,K1,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},QQ=function(e){js.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(Be(this,Zo))}),Be(this,ka).getQueryCache().notify({query:Be(this,wr),type:"observerResultsUpdated"})})},l9);function Q_e(t,e){return Ul(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function JB(t,e){return Q_e(t,e)||t.state.data!==void 0&&_z(t,e,e.refetchOnMount)}function _z(t,e,n){if(Ul(e.enabled,t)!==!1&&Cf(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&cR(t,e)}return!1}function e6(t,e,n,r){return(t!==e||Ul(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&cR(t,n)}function cR(t,e){return Ul(e.enabled,t)!==!1&&t.isStaleByTime(Cf(e.staleTime,t))}function H_e(t,e){return!O2(t.getCurrentResult(),e)}function t6(t){return{onFetch:(e,n)=>{var g,y,b,S,P;const r=e.options,i=(b=(y=(g=e.fetchOptions)==null?void 0:g.meta)==null?void 0:y.fetchMore)==null?void 0:b.direction,s=((S=e.state.data)==null?void 0:S.pages)||[],o=((P=e.state.data)==null?void 0:P.pageParams)||[];let a={pages:[],pageParams:[]},h=0;const p=async()=>{let O=!1;const D=R=>{F_e(R,()=>e.signal,()=>O=!0)},z=NQ(e.options,e.fetchOptions),F=async(R,N,Q)=>{if(O)return Promise.reject();if(N==null&&R.pages.length)return Promise.resolve(R);const X=(()=>{const ae={client:e.client,queryKey:e.queryKey,pageParam:N,direction:Q?"backward":"forward",meta:e.options.meta};return D(ae),ae})(),K=await z(X),{maxPages:ne}=e.options,J=Q?L_e:D_e;return{pages:J(R.pages,K,ne),pageParams:J(R.pageParams,N,ne)}};if(i&&s.length){const R=i==="backward",N=R?G_e:n6,Q={pages:s,pageParams:o},q=N(r,Q);a=await F(Q,q,R)}else{const R=t??s.length;do{const N=h===0?o[0]??r.initialPageParam:n6(r,a);if(h>0&&N==null)break;a=await F(a,N),h++}while(h<R)}return a};e.options.persister?e.fetchFn=()=>{var O,D;return(D=(O=e.options).persister)==null?void 0:D.call(O,p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=p}}}function n6(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function G_e(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Y1,wu,zo,pm,Su,$d,c9,X_e=(c9=class extends UQ{constructor(e){super();On(this,Su);On(this,Y1);On(this,wu);On(this,zo);On(this,pm);cn(this,Y1,e.client),this.mutationId=e.mutationId,cn(this,zo,e.mutationCache),cn(this,wu,[]),this.state=e.state||HQ(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Be(this,wu).includes(e)||(Be(this,wu).push(e),this.clearGcTimeout(),Be(this,zo).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){cn(this,wu,Be(this,wu).filter(n=>n!==e)),this.scheduleGc(),Be(this,zo).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Be(this,wu).length||(this.state.status==="pending"?this.scheduleGc():Be(this,zo).remove(this))}continue(){var e;return((e=Be(this,pm))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,h,p,g,y,b,S,P,O,D,z,F,R,N,Q,q,X;const n=()=>{ar(this,Su,$d).call(this,{type:"continue"})},r={client:Be(this,Y1),meta:this.options.meta,mutationKey:this.options.mutationKey};cn(this,pm,WQ({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(K,ne)=>{ar(this,Su,$d).call(this,{type:"failed",failureCount:K,error:ne})},onPause:()=>{ar(this,Su,$d).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Be(this,zo).canRun(this)}));const i=this.state.status==="pending",s=!Be(this,pm).canStart();try{if(i)n();else{ar(this,Su,$d).call(this,{type:"pending",variables:e,isPaused:s}),Be(this,zo).config.onMutate&&await Be(this,zo).config.onMutate(e,this,r);const ne=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e,r));ne!==this.state.context&&ar(this,Su,$d).call(this,{type:"pending",context:ne,variables:e,isPaused:s})}const K=await Be(this,pm).start();return await((p=(h=Be(this,zo).config).onSuccess)==null?void 0:p.call(h,K,e,this.state.context,this,r)),await((y=(g=this.options).onSuccess)==null?void 0:y.call(g,K,e,this.state.context,r)),await((S=(b=Be(this,zo).config).onSettled)==null?void 0:S.call(b,K,null,this.state.variables,this.state.context,this,r)),await((O=(P=this.options).onSettled)==null?void 0:O.call(P,K,null,e,this.state.context,r)),ar(this,Su,$d).call(this,{type:"success",data:K}),K}catch(K){try{await((z=(D=Be(this,zo).config).onError)==null?void 0:z.call(D,K,e,this.state.context,this,r))}catch(ne){Promise.reject(ne)}try{await((R=(F=this.options).onError)==null?void 0:R.call(F,K,e,this.state.context,r))}catch(ne){Promise.reject(ne)}try{await((Q=(N=Be(this,zo).config).onSettled)==null?void 0:Q.call(N,void 0,K,this.state.variables,this.state.context,this,r))}catch(ne){Promise.reject(ne)}try{await((X=(q=this.options).onSettled)==null?void 0:X.call(q,void 0,K,e,this.state.context,r))}catch(ne){Promise.reject(ne)}throw ar(this,Su,$d).call(this,{type:"error",error:K}),K}finally{Be(this,zo).runNext(this)}}},Y1=new WeakMap,wu=new WeakMap,zo=new WeakMap,pm=new WeakMap,Su=new WeakSet,$d=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),js.batch(()=>{Be(this,wu).forEach(r=>{r.onMutationUpdate(e)}),Be(this,zo).notify({mutation:this,type:"updated",action:e})})},c9);function HQ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Sh,Ec,J1,u9,K_e=(u9=class extends hx{constructor(e={}){super();On(this,Sh);On(this,Ec);On(this,J1);this.config=e,cn(this,Sh,new Set),cn(this,Ec,new Map),cn(this,J1,0)}build(e,n,r){const i=new X_e({client:e,mutationCache:this,mutationId:++Lw(this,J1)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){Be(this,Sh).add(e);const n=vS(e);if(typeof n=="string"){const r=Be(this,Ec).get(n);r?r.push(e):Be(this,Ec).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Be(this,Sh).delete(e)){const n=vS(e);if(typeof n=="string"){const r=Be(this,Ec).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&Be(this,Ec).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=vS(e);if(typeof n=="string"){const r=Be(this,Ec).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=vS(e);if(typeof n=="string"){const i=(r=Be(this,Ec).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){js.batch(()=>{Be(this,Sh).forEach(e=>{this.notify({type:"removed",mutation:e})}),Be(this,Sh).clear(),Be(this,Ec).clear()})}getAll(){return Array.from(Be(this,Sh))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>GB(n,r))}findAll(e={}){return this.getAll().filter(n=>GB(e,n))}notify(e){js.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return js.batch(()=>Promise.all(e.map(n=>n.continue().catch(ea))))}},Sh=new WeakMap,Ec=new WeakMap,J1=new WeakMap,u9);function vS(t){var e;return(e=t.options.scope)==null?void 0:e.id}var kh,af,Ca,Ch,$h,jk,wz,h9,Z_e=(h9=class extends hx{constructor(n,r){super();On(this,$h);On(this,kh);On(this,af);On(this,Ca);On(this,Ch);cn(this,kh,n),this.setOptions(r),this.bindMethods(),ar(this,$h,jk).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=Be(this,kh).defaultMutationOptions(n),O2(this.options,r)||Be(this,kh).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Be(this,Ca),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&qm(r.mutationKey)!==qm(this.options.mutationKey)?this.reset():((i=Be(this,Ca))==null?void 0:i.state.status)==="pending"&&Be(this,Ca).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Be(this,Ca))==null||n.removeObserver(this)}onMutationUpdate(n){ar(this,$h,jk).call(this),ar(this,$h,wz).call(this,n)}getCurrentResult(){return Be(this,af)}reset(){var n;(n=Be(this,Ca))==null||n.removeObserver(this),cn(this,Ca,void 0),ar(this,$h,jk).call(this),ar(this,$h,wz).call(this)}mutate(n,r){var i;return cn(this,Ch,r),(i=Be(this,Ca))==null||i.removeObserver(this),cn(this,Ca,Be(this,kh).getMutationCache().build(Be(this,kh),this.options)),Be(this,Ca).addObserver(this),Be(this,Ca).execute(n)}},kh=new WeakMap,af=new WeakMap,Ca=new WeakMap,Ch=new WeakMap,$h=new WeakSet,jk=function(){var r;const n=((r=Be(this,Ca))==null?void 0:r.state)??HQ();cn(this,af,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},wz=function(n){js.batch(()=>{var r,i,s,o,a,h,p,g;if(Be(this,Ch)&&this.hasListeners()){const y=Be(this,af).variables,b=Be(this,af).context,S={client:Be(this,kh),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(i=(r=Be(this,Ch)).onSuccess)==null||i.call(r,n.data,y,b,S)}catch(P){Promise.reject(P)}try{(o=(s=Be(this,Ch)).onSettled)==null||o.call(s,n.data,null,y,b,S)}catch(P){Promise.reject(P)}}else if((n==null?void 0:n.type)==="error"){try{(h=(a=Be(this,Ch)).onError)==null||h.call(a,n.error,y,b,S)}catch(P){Promise.reject(P)}try{(g=(p=Be(this,Ch)).onSettled)==null||g.call(p,void 0,n.error,y,b,S)}catch(P){Promise.reject(P)}}}this.listeners.forEach(y=>{y(Be(this,af))})})},h9),ku,d9,Y_e=(d9=class extends hx{constructor(e={}){super();On(this,ku);this.config=e,cn(this,ku,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??sR(i,n);let o=this.get(s);return o||(o=new U_e({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){Be(this,ku).has(e.queryHash)||(Be(this,ku).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Be(this,ku).get(e.queryHash);n&&(e.destroy(),n===e&&Be(this,ku).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){js.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Be(this,ku).get(e)}getAll(){return[...Be(this,ku).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>HB(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>HB(e,r)):n}notify(e){js.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){js.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){js.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ku=new WeakMap,d9),Ni,lf,cf,y0,x0,uf,v0,b0,f9,J_e=(f9=class{constructor(t={}){On(this,Ni);On(this,lf);On(this,cf);On(this,y0);On(this,x0);On(this,uf);On(this,v0);On(this,b0);cn(this,Ni,t.queryCache||new Y_e),cn(this,lf,t.mutationCache||new K_e),cn(this,cf,t.defaultOptions||{}),cn(this,y0,new Map),cn(this,x0,new Map),cn(this,uf,0)}mount(){Lw(this,uf)._++,Be(this,uf)===1&&(cn(this,v0,lR.subscribe(async t=>{t&&(await this.resumePausedMutations(),Be(this,Ni).onFocus())})),cn(this,b0,A2.subscribe(async t=>{t&&(await this.resumePausedMutations(),Be(this,Ni).onOnline())})))}unmount(){var t,e;Lw(this,uf)._--,Be(this,uf)===0&&((t=Be(this,v0))==null||t.call(this),cn(this,v0,void 0),(e=Be(this,b0))==null||e.call(this),cn(this,b0,void 0))}isFetching(t){return Be(this,Ni).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Be(this,lf).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Be(this,Ni).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Be(this,Ni).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Cf(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Be(this,Ni).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=Be(this,Ni).get(r.queryHash),s=i==null?void 0:i.state.data,o=I_e(e,s);if(o!==void 0)return Be(this,Ni).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return js.batch(()=>Be(this,Ni).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Be(this,Ni).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Be(this,Ni);js.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Be(this,Ni);return js.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=js.batch(()=>Be(this,Ni).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(ea).catch(ea)}invalidateQueries(t,e={}){return js.batch(()=>(Be(this,Ni).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=js.batch(()=>Be(this,Ni).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(ea)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(ea)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Be(this,Ni).build(this,e);return n.isStaleByTime(Cf(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ea).catch(ea)}fetchInfiniteQuery(t){return t.behavior=t6(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ea).catch(ea)}ensureInfiniteQueryData(t){return t.behavior=t6(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return A2.isOnline()?Be(this,lf).resumePausedMutations():Promise.resolve()}getQueryCache(){return Be(this,Ni)}getMutationCache(){return Be(this,lf)}getDefaultOptions(){return Be(this,cf)}setDefaultOptions(t){cn(this,cf,t)}setQueryDefaults(t,e){Be(this,y0).set(qm(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Be(this,y0).values()],n={};return e.forEach(r=>{j1(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Be(this,x0).set(qm(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Be(this,x0).values()],n={};return e.forEach(r=>{j1(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Be(this,cf).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=sR(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===oR&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Be(this,cf).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Be(this,Ni).clear(),Be(this,lf).clear()}},Ni=new WeakMap,lf=new WeakMap,cf=new WeakMap,y0=new WeakMap,x0=new WeakMap,uf=new WeakMap,v0=new WeakMap,b0=new WeakMap,f9),GQ=L.createContext(void 0),da=t=>{const e=L.useContext(GQ);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ewe=({client:t,children:e})=>(L.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),u.jsx(GQ.Provider,{value:t,children:e})),XQ=L.createContext(!1),twe=()=>L.useContext(XQ);XQ.Provider;function nwe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var rwe=L.createContext(nwe()),iwe=()=>L.useContext(rwe),swe=(t,e,n)=>{const r=n!=null&&n.state.error&&typeof t.throwOnError=="function"?aR(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||r)&&(e.isReset()||(t.retryOnMount=!1))},owe=t=>{L.useEffect(()=>{t.clearReset()},[t])},awe=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||aR(n,[t.error,r])),lwe=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},cwe=(t,e)=>t.isLoading&&t.isFetching&&!e,uwe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,r6=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function hwe(t,e,n){var b,S,P,O;const r=twe(),i=iwe(),s=da(),o=s.defaultQueryOptions(t);(S=(b=s.getDefaultOptions().queries)==null?void 0:b._experimental_beforeQuery)==null||S.call(b,o);const a=s.getQueryCache().get(o.queryHash);o._optimisticResults=r?"isRestoring":"optimistic",lwe(o),swe(o,i,a),owe(i);const h=!s.getQueryCache().get(o.queryHash),[p]=L.useState(()=>new e(s,o)),g=p.getOptimisticResult(o),y=!r&&t.subscribed!==!1;if(L.useSyncExternalStore(L.useCallback(D=>{const z=y?p.subscribe(js.batchCalls(D)):ea;return p.updateResult(),z},[p,y]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),L.useEffect(()=>{p.setOptions(o)},[o,p]),uwe(o,g))throw r6(o,p,i);if(awe({result:g,errorResetBoundary:i,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw g.error;if((O=(P=s.getDefaultOptions().queries)==null?void 0:P._experimental_afterQuery)==null||O.call(P,o,g),o.experimental_prefetchInRender&&!Um&&cwe(g,r)){const D=h?r6(o,p,i):a==null?void 0:a.promise;D==null||D.catch(ea).finally(()=>{p.updateResult()})}return o.notifyOnChangeProps?g:p.trackResult(g)}function er(t,e){return hwe(t,q_e)}function Au(t,e){const n=da(),[r]=L.useState(()=>new Z_e(n,t));L.useEffect(()=>{r.setOptions(t)},[r,t]);const i=L.useSyncExternalStore(L.useCallback(o=>r.subscribe(js.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=L.useCallback((o,a)=>{r.mutate(o,a).catch(ea)},[r]);if(i.error&&aR(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}var KQ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},i6=Gi.createContext&&Gi.createContext(KQ),dwe=["attr","size","title"];function fwe(t,e){if(t==null)return{};var n=pwe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pwe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function E2(){return E2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E2.apply(this,arguments)}function s6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function z2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s6(Object(n),!0).forEach(function(r){mwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mwe(t,e,n){return e=gwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gwe(t){var e=ywe(t,"string");return typeof e=="symbol"?e:e+""}function ywe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZQ(t){return t&&t.map((e,n)=>Gi.createElement(e.tag,z2({key:n},e.attr),ZQ(e.child)))}function un(t){return e=>Gi.createElement(xwe,E2({attr:z2({},t.attr)},e),ZQ(t.child))}function xwe(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=fwe(t,dwe),a=i||n.size||"1em",h;return n.className&&(h=n.className),t.className&&(h=(h?h+" ":"")+t.className),Gi.createElement("svg",E2({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:h,style:z2(z2({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Gi.createElement("title",null,s),t.children)};return i6!==void 0?Gi.createElement(i6.Consumer,null,n=>e(n)):e(KQ)}function j_(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(t)}function Tf(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function YQ(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"},child:[]},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(t)}function vwe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"polyline",attr:{points:"19 12 12 19 5 12"},child:[]}]})(t)}function bwe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function sb(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(t)}function _we(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(t)}function uR(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function o6(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(t)}function $f(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(t)}function hR(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function fc(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function wwe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(t)}function JQ(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(t)}function N0(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function Swe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]}]})(t)}function gT(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function kwe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"},child:[]}]})(t)}function Da(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 18 22 12 16 6"},child:[]},{tag:"polyline",attr:{points:"8 6 2 12 8 18"},child:[]}]})(t)}function dR(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"},child:[]}]})(t)}function Cwe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"},child:[]}]})(t)}function a6(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(t)}function Twe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"},child:[]},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"},child:[]},{tag:"line",attr:{x1:"9",y1:"1",x2:"9",y2:"4"},child:[]},{tag:"line",attr:{x1:"15",y1:"1",x2:"15",y2:"4"},child:[]},{tag:"line",attr:{x1:"9",y1:"20",x2:"9",y2:"23"},child:[]},{tag:"line",attr:{x1:"15",y1:"20",x2:"15",y2:"23"},child:[]},{tag:"line",attr:{x1:"20",y1:"9",x2:"23",y2:"9"},child:[]},{tag:"line",attr:{x1:"20",y1:"14",x2:"23",y2:"14"},child:[]},{tag:"line",attr:{x1:"1",y1:"9",x2:"4",y2:"9"},child:[]},{tag:"line",attr:{x1:"1",y1:"14",x2:"4",y2:"14"},child:[]}]})(t)}function Yr(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},child:[]}]})(t)}function Om(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(t)}function na(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"},child:[]}]})(t)}function jwe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function pc(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(t)}function Pwe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},child:[]},{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"},child:[]}]})(t)}function Nf(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(t)}function Pi(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function eH(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(t)}function tH(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"},child:[]},{tag:"polyline",attr:{points:"13 2 13 9 20 9"},child:[]}]})(t)}function Owe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function Uu(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"},child:[]}]})(t)}function Os(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(t)}function Vf(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function e0(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"12",x2:"2",y2:"12"},child:[]},{tag:"path",attr:{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"},child:[]},{tag:"line",attr:{x1:"6",y1:"16",x2:"6.01",y2:"16"},child:[]},{tag:"line",attr:{x1:"10",y1:"16",x2:"10.01",y2:"16"},child:[]}]})(t)}function fR(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(t)}function Awe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function Qc(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(t)}function P_(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(t)}function mi(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"},child:[]},{tag:"polyline",attr:{points:"2 17 12 22 22 17"},child:[]},{tag:"polyline",attr:{points:"2 12 12 17 22 12"},child:[]}]})(t)}function Ewe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},child:[]},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},child:[]}]})(t)}function zwe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}function I2(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function Hc(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"18"},child:[]},{tag:"line",attr:{x1:"16",y1:"6",x2:"16",y2:"22"},child:[]}]})(t)}function Iwe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"polyline",attr:{points:"9 21 3 21 3 15"},child:[]},{tag:"line",attr:{x1:"21",y1:"3",x2:"14",y2:"10"},child:[]},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"},child:[]}]})(t)}function nH(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function Mwe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function l6(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(t)}function pR(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"},child:[]}]})(t)}function Rwe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"16"},child:[]},{tag:"line",attr:{x1:"8",y1:"12",x2:"16",y2:"12"},child:[]}]})(t)}function As(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function Dwe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"1 4 1 10 7 10"},child:[]},{tag:"polyline",attr:{points:"23 20 23 14 17 14"},child:[]},{tag:"path",attr:{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"},child:[]}]})(t)}function Xc(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function Pk(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(t)}function V0(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function mc(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"8",rx:"2",ry:"2"},child:[]},{tag:"rect",attr:{x:"2",y:"14",width:"20",height:"8",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"6.01",y2:"6"},child:[]},{tag:"line",attr:{x1:"6",y1:"18",x2:"6.01",y2:"18"},child:[]}]})(t)}function O_(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function rH(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]}]})(t)}function Lwe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(t)}function Fwe(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"},child:[]}]})(t)}function Ks(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"},child:[]}]})(t)}function jf(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function Ib(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]},{tag:"line",attr:{x1:"12",y1:"12",x2:"12",y2:"21"},child:[]},{tag:"path",attr:{d:"M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"},child:[]},{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]}]})(t)}function Ol(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(t)}function c6(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function M2(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function yT(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(t)}function Wf(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}function qu(t){return un({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(t)}const Bwe={},u6=t=>{let e;const n=new Set,r=(g,y)=>{const b=typeof g=="function"?g(e):g;if(!Object.is(b,e)){const S=e;e=y??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(P=>P(e,S))}},i=()=>e,h={setState:r,getState:i,getInitialState:()=>p,subscribe:g=>(n.add(g),()=>n.delete(g)),destroy:()=>{(Bwe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=e=t(r,i,h);return h},$we=t=>t?u6(t):u6;var iH={exports:{}},sH={},oH={exports:{}},aH={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0=L;function Nwe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vwe=typeof Object.is=="function"?Object.is:Nwe,Wwe=W0.useState,Uwe=W0.useEffect,qwe=W0.useLayoutEffect,Qwe=W0.useDebugValue;function Hwe(t,e){var n=e(),r=Wwe({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return qwe(function(){i.value=n,i.getSnapshot=e,mO(i)&&s({inst:i})},[t,n,e]),Uwe(function(){return mO(i)&&s({inst:i}),t(function(){mO(i)&&s({inst:i})})},[t]),Qwe(n),n}function mO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vwe(t,n)}catch{return!0}}function Gwe(t,e){return e()}var Xwe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Gwe:Hwe;aH.useSyncExternalStore=W0.useSyncExternalStore!==void 0?W0.useSyncExternalStore:Xwe;oH.exports=aH;var Kwe=oH.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xT=L,Zwe=Kwe;function Ywe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jwe=typeof Object.is=="function"?Object.is:Ywe,eSe=Zwe.useSyncExternalStore,tSe=xT.useRef,nSe=xT.useEffect,rSe=xT.useMemo,iSe=xT.useDebugValue;sH.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=tSe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=rSe(function(){function h(S){if(!p){if(p=!0,g=S,S=r(S),i!==void 0&&o.hasValue){var P=o.value;if(i(P,S))return y=P}return y=S}if(P=y,Jwe(g,S))return P;var O=r(S);return i!==void 0&&i(P,O)?(g=S,P):(g=S,y=O)}var p=!1,g,y,b=n===void 0?null:n;return[function(){return h(e())},b===null?void 0:function(){return h(b())}]},[e,n,r,i]);var a=eSe(t,s[0],s[1]);return nSe(function(){o.hasValue=!0,o.value=a},[a]),iSe(a),a};iH.exports=sH;var sSe=iH.exports;const oSe=Zm(sSe),lH={},{useDebugValue:aSe}=Gi,{useSyncExternalStoreWithSelector:lSe}=oSe;let h6=!1;const cSe=t=>t;function uSe(t,e=cSe,n){(lH?"production":void 0)!=="production"&&n&&!h6&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),h6=!0);const r=lSe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return aSe(r),r}const d6=t=>{(lH?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?$we(t):t,n=(r,i)=>uSe(e,r,i);return Object.assign(n,e),n},mR=t=>t?d6(t):d6,hSe=()=>{try{const t=localStorage.getItem("cloudbench-settings");if(t)return JSON.parse(t)}catch{}return{showHiddenPGServices:!1,instanceName:"My Cloudbench"}},f6=t=>{try{localStorage.setItem("cloudbench-settings",JSON.stringify(t))}catch{}},St=mR(t=>({activeDialog:null,dialogData:null,activePreview:null,previewMode:"2d",statusMessage:"Ready",errorMessage:null,successMessage:null,isLoading:!1,sidebarWidth:420,settings:hSe(),openDialog:(e,n)=>{t({activeDialog:e,dialogData:n??null})},closeDialog:()=>{t({activeDialog:null,dialogData:null})},setPreview:e=>{t({activePreview:e})},setPreviewMode:e=>{t({previewMode:e})},setStatus:e=>{t({statusMessage:e})},setError:e=>{t({errorMessage:e}),e&&setTimeout(()=>{t(n=>n.errorMessage===e?{errorMessage:null}:n)},5e3)},setSuccess:e=>{t({successMessage:e}),e&&setTimeout(()=>{t(n=>n.successMessage===e?{successMessage:null}:n)},3e3)},setLoading:e=>{t({isLoading:e})},setSidebarWidth:e=>{t({sidebarWidth:Math.max(200,Math.min(600,e))})},clearMessages:()=>{t({errorMessage:null,successMessage:null})},setShowHiddenPGServices:e=>{t(n=>{const r={...n.settings,showHiddenPGServices:e};return f6(r),{settings:r}})},setInstanceName:e=>{t(n=>{const r={...n.settings,instanceName:e};return f6(r),{settings:r}})}})),Yt="/api";async function hn(t){if(!t.ok){const e=await t.json().catch(()=>({error:"Unknown error"}));throw new Error(e.error||`HTTP ${t.status}`)}if(t.status!==204)return t.json()}async function dSe(){const t=await fetch(`${Yt}/connections`);return hn(t)}async function fSe(t){const e=await fetch(`${Yt}/connections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return hn(e)}async function pSe(t,e){const n=await fetch(`${Yt}/connections/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return hn(n)}async function mSe(t){const e=await fetch(`${Yt}/connections/${t}`,{method:"DELETE"});return hn(e)}async function gSe(t){const e=await fetch(`${Yt}/connections/${t}/test`,{method:"POST"});return hn(e)}async function ySe(t){const e=await fetch(`${Yt}/connections/${t}/info`);return hn(e)}async function cH(t){const e=await fetch(`${Yt}/workspaces/${t}`);return hn(e)}async function uH(t,e){const n=await fetch(`${Yt}/workspaces/${t}/${e}`);return hn(n)}async function xSe(t,e){const n=await fetch(`${Yt}/workspaces/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return hn(n)}async function vSe(t,e,n){const r=await fetch(`${Yt}/workspaces/${t}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return hn(r)}async function bSe(t,e,n=!1){const i=await fetch(`${Yt}/workspaces/${t}/${e}${n?"?recurse=true":""}`,{method:"DELETE"});return hn(i)}async function gR(t,e){const n=await fetch(`${Yt}/datastores/${t}/${e}`);return hn(n)}async function hH(t,e,n){const r=await fetch(`${Yt}/datastores/${t}/${e}/${n}`);return hn(r)}async function _Se(t,e,n,r=!1){const s=await fetch(`${Yt}/datastores/${t}/${e}/${n}${r?"?recurse=true":""}`,{method:"DELETE"});return hn(s)}async function dH(t,e,n){const r=await fetch(`${Yt}/datastores/${t}/${e}/${n}/available`);return(await hn(r)).available||[]}async function fH(t,e,n,r){const i=await fetch(`${Yt}/datastores/${t}/${e}/${n}/publish`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({featureTypes:r})});return hn(i)}async function yR(t,e){const n=await fetch(`${Yt}/coveragestores/${t}/${e}`);return hn(n)}async function pH(t,e,n){const r=await fetch(`${Yt}/coveragestores/${t}/${e}/${n}`);return hn(r)}async function wSe(t,e,n,r=!1){const s=await fetch(`${Yt}/coveragestores/${t}/${e}/${n}${r?"?recurse=true":""}`,{method:"DELETE"});return hn(s)}async function A_(t,e){const n=await fetch(`${Yt}/layers/${t}/${e}`);return hn(n)}async function mH(t,e,n){const r=await fetch(`${Yt}/layers/${t}/${e}/${n}`);return hn(r)}async function SSe(t,e,n){const r=await fetch(`${Yt}/layers/${t}/${e}/${n}`,{method:"DELETE"});return hn(r)}async function kSe(t,e,n){const r=await fetch(`${Yt}/layermetadata/${t}/${e}/${n}`);return hn(r)}async function CSe(t,e,n){const r=await fetch(`${Yt}/layers/${t}/${e}/${n}/count`);return(await hn(r)).count}async function TSe(t,e,n,r){const i=await fetch(`${Yt}/layermetadata/${t}/${e}/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});return hn(i)}async function xR(t,e){const n=await fetch(`${Yt}/styles/${t}/${e}`);return hn(n)}async function jSe(t,e,n,r=!1){const s=await fetch(`${Yt}/styles/${t}/${e}/${n}${r?"?purge=true":""}`,{method:"DELETE"});return hn(s)}async function gH(t,e,n){const r=await fetch(`${Yt}/layerstyles/${t}/${e}/${n}`);return hn(r)}async function PSe(t,e,n,r,i){const s=await fetch(`${Yt}/layerstyles/${t}/${e}/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({defaultStyle:r,additionalStyles:i})});return hn(s)}async function yH(t,e,n){const r=await fetch(`${Yt}/styles/${t}/${e}/${n}`);return hn(r)}async function OSe(t,e,n,r,i="sld"){const s=await fetch(`${Yt}/styles/${t}/${e}/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:r,format:i})});return hn(s)}async function ASe(t,e,n,r,i="sld"){const s=await fetch(`${Yt}/styles/${t}/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,content:r,format:i})});return hn(s)}async function xH(t,e){const n=await fetch(`${Yt}/layergroups/${t}/${e}`);return hn(n)}async function ESe(t,e,n){const r=await fetch(`${Yt}/layergroups/${t}/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return hn(r)}async function vH(t,e,n){const r=await fetch(`${Yt}/layergroups/${t}/${e}/${n}`);return hn(r)}async function zSe(t,e,n,r){const i=await fetch(`${Yt}/layergroups/${t}/${e}/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});return hn(i)}async function ISe(t,e,n){const r=await fetch(`${Yt}/layergroups/${t}/${e}/${n}`,{method:"DELETE"});return hn(r)}async function MSe(t,e,n){const r=await fetch(`${Yt}/featuretypes/${t}/${e}/${n}`);return hn(r)}async function RSe(t,e,n,r){const i=await fetch(`${Yt}/featuretypes/${t}/${e}/${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r})});return hn(i)}async function DSe(t,e,n){const r=await fetch(`${Yt}/coverages/${t}/${e}/${n}`);return hn(r)}async function LSe(t,e,n,r){const i=new FormData;return i.append("file",n),new Promise((s,o)=>{const a=new XMLHttpRequest;a.upload.addEventListener("progress",h=>{if(h.lengthComputable&&r){const p=Math.round(h.loaded/h.total*100);r(p)}}),a.addEventListener("load",()=>{a.status>=200&&a.status<300?s(JSON.parse(a.responseText)):o(new Error(JSON.parse(a.responseText).error||"Upload failed"))}),a.addEventListener("error",()=>{o(new Error("Network error"))}),a.open("POST",`${Yt}/upload?connId=${encodeURIComponent(t)}&workspace=${encodeURIComponent(e)}`),a.send(i)})}async function Cl(t){const e=await fetch(`${Yt}/preview`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return hn(e)}async function FSe(t,e){const n=await fetch(`${Yt}/gwc/layers/${t}/${e}`);return hn(n)}async function BSe(t,e){const n=await fetch(`${Yt}/gwc/seed/${t}/${e}`);return hn(n)}async function $Se(t,e,n){const r=await fetch(`${Yt}/gwc/seed/${t}/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return hn(r)}async function NSe(t,e){const n=await fetch(`${Yt}/gwc/seed/${t}/${e}`,{method:"DELETE"});return hn(n)}async function VSe(t,e,n){const r=await fetch(`${Yt}/gwc/truncate/${t}/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n||{})});return hn(r)}async function WSe(t){const e=await fetch(`${Yt}/settings/${t}`);return hn(e)}async function USe(t,e){const n=await fetch(`${Yt}/settings/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return hn(n)}async function qSe(){const t=await fetch(`${Yt}/sync/configs`);return hn(t)}async function QSe(t){const e=await fetch(`${Yt}/sync/configs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return hn(e)}async function HSe(t){const e=await fetch(`${Yt}/sync/configs/${t}`,{method:"DELETE"});return hn(e)}async function GSe(t){const e=await fetch(`${Yt}/sync/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return hn(e)}async function XSe(){const t=await fetch(`${Yt}/sync/status`);return hn(t)}async function KSe(t){const e=await fetch(`${Yt}/sync/stop/${t}`,{method:"POST"});return hn(e)}async function ZSe(){const t=await fetch(`${Yt}/sync/stop`,{method:"POST"});return hn(t)}async function YSe(){const t=await fetch(`${Yt}/dashboard`);return hn(t)}function bH(t,e,n,r){let i=`${Yt}/download/${t}/${e}/${n}`;r&&(i+=`/${r}`),window.open(i,"_blank")}function JSe(t,e,n){const r=`${Yt}/download/${t}/shapefile/${e}/${n}`;window.open(r,"_blank")}function eke(t,e,n){const r=`${Yt}/download/${t}/geotiff/${e}/${n}`;window.open(r,"_blank")}function tke(t){const e=`${Yt}/download/logs/${t}`;window.open(e,"_blank")}async function nke(t,e){let n=`${Yt}/search?q=${encodeURIComponent(t)}`;const r=await fetch(n);return hn(r)}async function rke(){const t=await fetch(`${Yt}/search/suggestions`);return hn(t)}async function vR(){const t=await fetch(`${Yt}/pg/services`);return hn(t)}async function p6(t){const e=await fetch(`${Yt}/pg/services`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return hn(e)}async function ike(t){const e=await fetch(`${Yt}/pg/services/${encodeURIComponent(t)}`,{method:"DELETE"});return hn(e)}async function _H(t){const e=await fetch(`${Yt}/pg/services/${encodeURIComponent(t)}/test`,{method:"POST"});return hn(e)}async function wH(t){const e=await fetch(`${Yt}/pg/services/${encodeURIComponent(t)}/parse`,{method:"POST"});return hn(e)}async function ske(t,e){const n=await fetch(`${Yt}/pg/services/${encodeURIComponent(t)}/hide`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hidden:e})});return hn(n)}async function SH(t){const e=await fetch(`${Yt}/pg/services/${encodeURIComponent(t)}/stats`);return hn(e)}async function oke(t,e){const n=await fetch(`${Yt}/pg/services/${encodeURIComponent(t)}/schemastats?schema=${encodeURIComponent(e)}`);return hn(n)}async function ake(){const t=await fetch(`${Yt}/pg/ogr2ogr/status`);return hn(t)}async function lke(t,e){const n=new FormData;return n.append("file",t),new Promise((r,i)=>{const s=new XMLHttpRequest;s.upload.addEventListener("progress",o=>{if(o.lengthComputable&&e){const a=Math.round(o.loaded/o.total*100);e(a)}}),s.addEventListener("load",()=>{s.status>=200&&s.status<300?r(JSON.parse(s.responseText)):i(new Error(JSON.parse(s.responseText).error||"Upload failed"))}),s.addEventListener("error",()=>{i(new Error("Network error"))}),s.open("POST",`${Yt}/pg/import/upload`),s.send(n)})}async function cke(t){const e=await fetch(`${Yt}/pg/detect-layers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:t})});return hn(e)}async function uke(t){const e=await fetch(`${Yt}/pg/import`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return hn(e)}async function hke(t){const e=await fetch(`${Yt}/pg/import/raster`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return hn(e)}async function dke(t){const e=await fetch(`${Yt}/pg/import/${t}`);return hn(e)}async function kH(t,e,n=100){const r=await fetch(`${Yt}/query/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service_name:t,sql:e,max_rows:n})});return hn(r)}async function Ok(t,e,n,r=100,i=0){const s=`SELECT * FROM "${e}"."${n}" LIMIT ${r} OFFSET ${i}`;return kH(t,s,r)}async function fke(){const t=await fetch(`${Yt}/docs`);return hn(t)}const uo=mR(t=>({connections:[],pgServices:[],activeConnectionId:null,isLoading:!1,error:null,fetchConnections:async()=>{t({isLoading:!0,error:null});try{const e=await dSe(),n=e.find(r=>r.isActive);t({connections:e,activeConnectionId:(n==null?void 0:n.id)??null,isLoading:!1})}catch(e){t({error:e.message,isLoading:!1})}},addConnection:async e=>{t({isLoading:!0,error:null});try{const n=await fSe(e);return t(r=>({connections:[...r.connections,n],isLoading:!1})),n}catch(n){throw t({error:n.message,isLoading:!1}),n}},updateConnection:async(e,n)=>{t({isLoading:!0,error:null});try{const r=await pSe(e,n);t(i=>({connections:i.connections.map(s=>s.id===e?r:s),isLoading:!1}))}catch(r){throw t({error:r.message,isLoading:!1}),r}},removeConnection:async e=>{t({isLoading:!0,error:null});try{await mSe(e),t(n=>({connections:n.connections.filter(r=>r.id!==e),activeConnectionId:n.activeConnectionId===e?null:n.activeConnectionId,isLoading:!1}))}catch(n){throw t({error:n.message,isLoading:!1}),n}},setActiveConnection:e=>{t({activeConnectionId:e})},testConnection:async e=>{try{const n=await gSe(e);return{success:n.success,message:n.message}}catch(n){return{success:!1,message:n.message}}},clearError:()=>t({error:null}),refreshPGServices:async()=>{try{const e=await vR();t({pgServices:e})}catch(e){console.error("Failed to fetch PG services:",e)}}})),Ln=mR((t,e)=>({expandedNodes:new Set,selectedNode:null,toggleNode:n=>{t(r=>{const i=new Set(r.expandedNodes);return i.has(n)?i.delete(n):i.add(n),{expandedNodes:i}})},expandNode:n=>{t(r=>{const i=new Set(r.expandedNodes);return i.add(n),{expandedNodes:i}})},collapseNode:n=>{t(r=>{const i=new Set(r.expandedNodes);return i.delete(n),{expandedNodes:i}})},selectNode:n=>{t({selectedNode:n})},isExpanded:n=>e().expandedNodes.has(n),clearSelection:()=>{t({selectedNode:null})},reset:()=>{t({expandedNodes:new Set,selectedNode:null})}}));function np(t,e,n,r){const i=[t];return e&&i.push(e),n&&i.push(n),r&&i.push(r),i.join(":")}function pke({onSearchClick:t,onHelpClick:e}){const n=Et("gray.700","gray.800"),r=St(p=>p.openDialog),i=uo(p=>p.fetchConnections),s=Ln(p=>p.selectedNode),o=()=>{r("connection",{mode:"create"})},a=()=>{if(!s){St.getState().setError("Select a workspace or PostgreSQL service first");return}const p=s.type;if(p==="postgresql"||p==="pgservice"||p==="pgschema"||p==="pgtable"||p==="pgview"||p==="pgcolumn"){const g=s.serviceName,y=p==="pgschema"?s.schemaName:void 0;if(!g){St.getState().setError("Select a PostgreSQL service first");return}r("pgupload",{mode:"create",data:{serviceName:g,schemaName:y}});return}if(!s.workspace){St.getState().setError("Select a workspace first");return}r("upload",{mode:"create"})},h=()=>{i(),St.getState().setStatus("Refreshing...")};return u.jsx(de,{bg:n,px:4,py:2,children:u.jsxs(Sn,{align:"center",children:[u.jsx(Zq,{href:"https://kartoza.com",isExternal:!0,display:"flex",alignItems:"center",_hover:{opacity:.9},children:u.jsx(Kq,{src:"/kartoza-logo.svg",alt:"Kartoza",h:"32px",mr:3,filter:"brightness(0) invert(1)"})}),u.jsx(lr,{size:"md",color:"white",fontWeight:"bold",children:"Cloudbench"}),u.jsx(de,{mx:8,flex:"1",maxW:"400px",onClick:t,cursor:"pointer",children:u.jsxs(Ta,{size:"sm",children:[u.jsx(Wl,{pointerEvents:"none",children:u.jsx(V0,{color:"gray.400"})}),u.jsx(Rn,{placeholder:"Search...",bg:"whiteAlpha.100",border:"1px solid",borderColor:"whiteAlpha.200",color:"white",_placeholder:{color:"whiteAlpha.500"},_hover:{borderColor:"whiteAlpha.400",bg:"whiteAlpha.200"},borderRadius:"md",readOnly:!0,cursor:"pointer"}),u.jsxs(me,{position:"absolute",right:2,top:"50%",transform:"translateY(-50%)",spacing:1,children:[u.jsx(ks,{size:"xs",bg:"whiteAlpha.200",color:"whiteAlpha.700",borderColor:"whiteAlpha.300",children:""}),u.jsx(ks,{size:"xs",bg:"whiteAlpha.200",color:"whiteAlpha.700",borderColor:"whiteAlpha.300",children:"K"})]})]})}),u.jsx(Bo,{}),u.jsxs(Sn,{gap:2,children:[u.jsx(kn,{label:"Add Connection",placement:"bottom",children:u.jsx(wn,{"aria-label":"Add connection",icon:u.jsx(As,{}),variant:"ghost",color:"white",_hover:{bg:"kartoza.600"},onClick:o})}),u.jsx(kn,{label:(s==null?void 0:s.type)==="postgresql"||(s==null?void 0:s.type)==="pgservice"||(s==null?void 0:s.type)==="pgschema"||(s==null?void 0:s.type)==="pgtable"||(s==null?void 0:s.type)==="pgview"||(s==null?void 0:s.type)==="pgcolumn"?"Upload to PostgreSQL":"Upload to GeoServer",placement:"bottom",children:u.jsx(wn,{"aria-label":"Upload files",icon:u.jsx(Ol,{}),variant:"ghost",color:"white",_hover:{bg:"kartoza.600"},onClick:a})}),u.jsx(kn,{label:"Refresh",placement:"bottom",children:u.jsx(wn,{"aria-label":"Refresh",icon:u.jsx(Xc,{}),variant:"ghost",color:"white",_hover:{bg:"kartoza.600"},onClick:h})}),u.jsxs(Df,{children:[u.jsx(Lf,{as:wn,"aria-label":"Settings",icon:u.jsx(O_,{}),variant:"ghost",color:"white",_hover:{bg:"kartoza.600"}}),u.jsxs(Ff,{children:[u.jsx(ml,{icon:u.jsx(Dwe,{}),onClick:()=>r("sync",{mode:"create"}),children:"Sync Server(s)"}),u.jsx(ml,{icon:u.jsx(As,{}),onClick:()=>r("workspace",{mode:"create"}),children:"New Workspace"}),u.jsx(ml,{icon:u.jsx(As,{}),onClick:()=>r("datastore",{mode:"create"}),children:"New Data Store"}),u.jsx(ml,{icon:u.jsx(As,{}),onClick:()=>r("coveragestore",{mode:"create"}),children:"New Coverage Store"})]})]}),u.jsx(kn,{label:"Help (?)",placement:"bottom",children:u.jsx(wn,{"aria-label":"Help",icon:u.jsx(fR,{}),variant:"ghost",color:"white",_hover:{bg:"kartoza.600"},onClick:e})})]})]})})}function Gh(t){return un({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M23.5594 14.7228a.5269.5269 0 0 0-.0563-.1191c-.139-.2632-.4768-.3418-1.0074-.2321-1.6533.3411-2.2935.1312-2.5256-.0191 1.342-2.0482 2.445-4.522 3.0411-6.8297.2714-1.0507.7982-3.5237.1222-4.7316a1.5641 1.5641 0 0 0-.1509-.235C21.6931.9086 19.8007.0248 17.5099.0005c-1.4947-.0158-2.7705.3461-3.1161.4794a9.449 9.449 0 0 0-.5159-.0816 8.044 8.044 0 0 0-1.3114-.1278c-1.1822-.0184-2.2038.2642-3.0498.8406-.8573-.3211-4.7888-1.645-7.2219.0788C.9359 2.1526.3086 3.8733.4302 6.3043c.0409.818.5069 3.334 1.2423 5.7436.4598 1.5065.9387 2.7019 1.4334 3.582.553.9942 1.1259 1.5933 1.7143 1.7895.4474.1491 1.1327.1441 1.8581-.7279.8012-.9635 1.5903-1.8258 1.9446-2.2069.4351.2355.9064.3625 1.39.3772a.0569.0569 0 0 0 .0004.0041 11.0312 11.0312 0 0 0-.2472.3054c-.3389.4302-.4094.5197-1.5002.7443-.3102.064-1.1344.2339-1.1464.8115-.0025.1224.0329.2309.0919.3268.2269.4231.9216.6097 1.015.6331 1.3345.3335 2.5044.092 3.3714-.6787-.017 2.231.0775 4.4174.3454 5.0874.2212.5529.7618 1.9045 2.4692 1.9043.2505 0 .5263-.0291.8296-.0941 1.7819-.3821 2.5557-1.1696 2.855-2.9059.1503-.8707.4016-2.8753.5388-4.1012.0169-.0703.0357-.1207.057-.1362.0007-.0005.0697-.0471.4272.0307a.3673.3673 0 0 0 .0443.0068l.2539.0223.0149.001c.8468.0384 1.9114-.1426 2.5312-.4308.6438-.2988 1.8057-1.0323 1.5951-1.6698zM2.371 11.8765c-.7435-2.4358-1.1779-4.8851-1.2123-5.5719-.1086-2.1714.4171-3.6829 1.5623-4.4927 1.8367-1.2986 4.8398-.5408 6.108-.13-.0032.0032-.0066.0061-.0098.0094-2.0238 2.044-1.9758 5.536-1.9708 5.7495-.0002.0823.0066.1989.0162.3593.0348.5873.0996 1.6804-.0735 2.9184-.1609 1.1504.1937 2.2764.9728 3.0892.0806.0841.1648.1631.2518.2374-.3468.3714-1.1004 1.1926-1.9025 2.1576-.5677.6825-.9597.5517-1.0886.5087-.3919-.1307-.813-.5871-1.2381-1.3223-.4796-.839-.9635-2.0317-1.4155-3.5126zm6.0072 5.0871c-.1711-.0428-.3271-.1132-.4322-.1772.0889-.0394.2374-.0902.4833-.1409 1.2833-.2641 1.4815-.4506 1.9143-1.0002.0992-.126.2116-.2687.3673-.4426a.3549.3549 0 0 0 .0737-.1298c.1708-.1513.2724-.1099.4369-.0417.156.0646.3078.26.3695.4752.0291.1016.0619.2945-.0452.4444-.9043 1.2658-2.2216 1.2494-3.1676 1.0128zm2.094-3.988-.0525.141c-.133.3566-.2567.6881-.3334 1.003-.6674-.0021-1.3168-.2872-1.8105-.8024-.6279-.6551-.9131-1.5664-.7825-2.5004.1828-1.3079.1153-2.4468.079-3.0586-.005-.0857-.0095-.1607-.0122-.2199.2957-.2621 1.6659-.9962 2.6429-.7724.4459.1022.7176.4057.8305.928.5846 2.7038.0774 3.8307-.3302 4.7363-.084.1866-.1633.3629-.2311.5454zm7.3637 4.5725c-.0169.1768-.0358.376-.0618.5959l-.146.4383a.3547.3547 0 0 0-.0182.1077c-.0059.4747-.054.6489-.115.8693-.0634.2292-.1353.4891-.1794 1.0575-.11 1.4143-.8782 2.2267-2.4172 2.5565-1.5155.3251-1.7843-.4968-2.0212-1.2217a6.5824 6.5824 0 0 0-.0769-.2266c-.2154-.5858-.1911-1.4119-.1574-2.5551.0165-.5612-.0249-1.9013-.3302-2.6462.0044-.2932.0106-.5909.019-.8918a.3529.3529 0 0 0-.0153-.1126 1.4927 1.4927 0 0 0-.0439-.208c-.1226-.4283-.4213-.7866-.7797-.9351-.1424-.059-.4038-.1672-.7178-.0869.067-.276.1831-.5875.309-.9249l.0529-.142c.0595-.16.134-.3257.213-.5012.4265-.9476 1.0106-2.2453.3766-5.1772-.2374-1.0981-1.0304-1.6343-2.2324-1.5098-.7207.0746-1.3799.3654-1.7088.5321a5.6716 5.6716 0 0 0-.1958.1041c.0918-1.1064.4386-3.1741 1.7357-4.4823a4.0306 4.0306 0 0 1 .3033-.276.3532.3532 0 0 0 .1447-.0644c.7524-.5706 1.6945-.8506 2.802-.8325.4091.0067.8017.0339 1.1742.081 1.939.3544 3.2439 1.4468 4.0359 2.3827.8143.9623 1.2552 1.9315 1.4312 2.4543-1.3232-.1346-2.2234.1268-2.6797.779-.9926 1.4189.543 4.1729 1.2811 5.4964.1353.2426.2522.4522.2889.5413.2403.5825.5515.9713.7787 1.2552.0696.087.1372.1714.1885.245-.4008.1155-1.1208.3825-1.0552 1.717-.0123.1563-.0423.4469-.0834.8148-.0461.2077-.0702.4603-.0994.7662zm.8905-1.6211c-.0405-.8316.2691-.9185.5967-1.0105a2.8566 2.8566 0 0 0 .135-.0406 1.202 1.202 0 0 0 .1342.103c.5703.3765 1.5823.4213 3.0068.1344-.2016.1769-.5189.3994-.9533.6011-.4098.1903-1.0957.333-1.7473.3636-.7197.0336-1.0859-.0807-1.1721-.151zm.5695-9.2712c-.0059.3508-.0542.6692-.1054 1.0017-.055.3576-.112.7274-.1264 1.1762-.0142.4368.0404.8909.0932 1.3301.1066.887.216 1.8003-.2075 2.7014a3.5272 3.5272 0 0 1-.1876-.3856c-.0527-.1276-.1669-.3326-.3251-.6162-.6156-1.1041-2.0574-3.6896-1.3193-4.7446.3795-.5427 1.3408-.5661 2.1781-.463zm.2284 7.0137a12.3762 12.3762 0 0 0-.0853-.1074l-.0355-.0444c.7262-1.1995.5842-2.3862.4578-3.4385-.0519-.4318-.1009-.8396-.0885-1.2226.0129-.4061.0666-.7543.1185-1.0911.0639-.415.1288-.8443.1109-1.3505.0134-.0531.0188-.1158.0118-.1902-.0457-.4855-.5999-1.938-1.7294-3.253-.6076-.7073-1.4896-1.4972-2.6889-2.0395.5251-.1066 1.2328-.2035 2.0244-.1859 2.0515.0456 3.6746.8135 4.8242 2.2824a.908.908 0 0 1 .0667.1002c.7231 1.3556-.2762 6.2751-2.9867 10.5405zm-8.8166-6.1162c-.025.1794-.3089.4225-.6211.4225a.5821.5821 0 0 1-.0809-.0056c-.1873-.026-.3765-.144-.5059-.3156-.0458-.0605-.1203-.178-.1055-.2844.0055-.0401.0261-.0985.0925-.1488.1182-.0894.3518-.1226.6096-.0867.3163.0441.6426.1938.6113.4186zm7.9305-.4114c.0111.0792-.049.201-.1531.3102-.0683.0717-.212.1961-.4079.2232a.5456.5456 0 0 1-.075.0052c-.2935 0-.5414-.2344-.5607-.3717-.024-.1765.2641-.3106.5611-.352.297-.0414.6111.0088.6356.1851z"},child:[]}]})(t)}function CH(t){switch(t){case"cloudbench":return kwe;case"geoserver":return Os;case"postgresql":return Gh;case"connection":return mc;case"pgservice":return Yr;case"pgschema":return Uu;case"pgtable":return Ks;case"pgview":return Pi;case"pgcolumn":return dR;case"workspace":return Uu;case"datastores":case"datastore":return Yr;case"coveragestores":case"coveragestore":return Qc;case"layers":case"layer":return mi;case"styles":case"style":return na;case"layergroups":case"layergroup":return Vf;case"featuretype":return eH;case"coverage":return Hc;default:return Uu}}function TH(t){switch(t){case"cloudbench":return"kartoza.500";case"geoserver":return"blue.500";case"postgresql":return"blue.600";case"connection":return"kartoza.500";case"pgservice":return"blue.500";case"pgschema":return"cyan.500";case"pgtable":return"green.500";case"pgview":return"purple.500";case"pgcolumn":return"gray.500";case"workspace":return"accent.400";case"datastores":case"datastore":return"green.500";case"coveragestores":case"coveragestore":return"purple.500";case"layers":case"layer":return"blue.500";case"styles":case"style":return"pink.500";case"layergroups":case"layergroup":return"cyan.500";case"featuretype":return"teal.500";case"coverage":return"orange.500";default:return"gray.500"}}function mke(){const t=uo(n=>n.connections),e=uo(n=>n.fetchConnections);return L.useEffect(()=>{e()},[e]),u.jsx(de,{children:u.jsx(gke,{connections:t})})}function gke({connections:t}){const e="cloudbench-root",n=Ln(g=>g.isExpanded(e)),r=Ln(g=>g.toggleNode),i=Ln(g=>g.selectNode),s=Ln(g=>g.selectedNode),o=St(g=>g.settings.instanceName);L.useEffect(()=>{n||r(e)},[]);const a={id:e,name:o,type:"cloudbench"},h=(s==null?void 0:s.id)===e,p=()=>{i(a),r(e)};return u.jsxs(de,{children:[u.jsx(Kc,{node:a,isExpanded:n,isSelected:h,isLoading:!1,onClick:p,level:0}),n&&u.jsxs(de,{pl:4,children:[u.jsx(yke,{connections:t}),u.jsx(xke,{})]})]})}function yke({connections:t}){const e="geoserver-root",n=Ln(p=>p.isExpanded(e)),r=Ln(p=>p.toggleNode),i=Ln(p=>p.selectNode),s=Ln(p=>p.selectedNode);L.useEffect(()=>{n||r(e)},[]);const o={id:e,name:"GeoServer",type:"geoserver"},a=(s==null?void 0:s.id)===e,h=()=>{i(o),r(e)};return u.jsxs(de,{children:[u.jsx(Kc,{node:o,isExpanded:n,isSelected:a,isLoading:!1,onClick:h,level:1,count:t.length}),n&&u.jsx(de,{pl:4,children:t.length===0?u.jsx(de,{px:2,py:3,children:u.jsx(te,{color:"gray.500",fontSize:"sm",children:"No connections yet. Click + to add one."})}):t.map(p=>u.jsx(Ske,{connectionId:p.id,name:p.name,url:p.url},p.id))})]})}function xke(){const t="postgresql-root",e=Ln(b=>b.isExpanded(t)),n=Ln(b=>b.toggleNode),r=Ln(b=>b.selectNode),i=Ln(b=>b.selectedNode),s=St(b=>b.settings.showHiddenPGServices),{data:o,isLoading:a}=er({queryKey:["pgservices"],queryFn:()=>vR(),staleTime:3e4}),h=o==null?void 0:o.filter(b=>s||!b.hidden);L.useEffect(()=>{e||n(t)},[]);const p={id:t,name:"PostgreSQL",type:"postgresql"},g=(i==null?void 0:i.id)===t,y=()=>{r(p),n(t)};return u.jsxs(de,{children:[u.jsx(Kc,{node:p,isExpanded:e,isSelected:g,isLoading:a,onClick:y,level:1,count:h==null?void 0:h.length}),e&&u.jsx(de,{pl:4,children:!h||h.length===0?u.jsx(de,{px:2,py:3,children:u.jsx(te,{color:"gray.500",fontSize:"sm",children:"No PostgreSQL services. Click + to add one."})}):h.map(b=>u.jsx(vke,{service:b},b.name))})]})}function vke({service:t}){var N;const e=np("pgservice",t.name),n=Ln(Q=>Q.isExpanded(e)),r=Ln(Q=>Q.toggleNode),i=Ln(Q=>Q.selectNode),s=Ln(Q=>Q.selectedNode),o=St(Q=>Q.openDialog),a=ha(),h=da(),{data:p,isLoading:g}=er({queryKey:["pgschemas",t.name],queryFn:async()=>{const Q=await fetch(`/api/pg/services/${encodeURIComponent(t.name)}/schemas`);if(!Q.ok)throw new Error("Failed to fetch schemas");return Q.json()},enabled:n&&t.is_parsed,staleTime:6e4}),y={id:e,name:t.name,type:"pgservice",serviceName:t.name},b=(s==null?void 0:s.id)===e,S=()=>{i(y),r(e)},P=async Q=>{Q.stopPropagation();try{await wH(t.name),a({title:"Schema Parsed",description:`Successfully parsed schema for ${t.name}`,status:"success",duration:3e3}),h.invalidateQueries({queryKey:["pgservices"]}),h.invalidateQueries({queryKey:["pgschemas",t.name]})}catch(q){a({title:"Parse Failed",description:q.message,status:"error",duration:5e3})}},O=Q=>{Q.stopPropagation(),o("confirm",{mode:"delete",title:"Delete PostgreSQL Service",message:`Are you sure you want to remove "${t.name}" from pg_service.conf?`,data:{pgServiceName:t.name}})},D=Q=>{Q.stopPropagation(),o("query",{mode:"view",data:{serviceName:t.name}})},z=Q=>{Q.stopPropagation(),o("pgupload",{mode:"create",data:{serviceName:t.name}})},F=Q=>{Q.stopPropagation(),h.invalidateQueries({queryKey:["pgschemas",t.name]})},R=t.host?`${t.host}:${t.port||"5432"}/${t.dbname||""}`:"";return u.jsxs(de,{children:[u.jsx(Kc,{node:{...y,name:t.name},isExpanded:n,isSelected:b,isLoading:g,onClick:S,onDelete:O,onQuery:t.is_parsed?D:void 0,onUpload:z,onRefresh:t.is_parsed?F:void 0,level:2,count:(N=p==null?void 0:p.schemas)==null?void 0:N.length}),n&&!t.is_parsed&&u.jsxs(de,{pl:8,py:2,children:[u.jsx(vt,{size:"sm",colorScheme:"blue",variant:"outline",leftIcon:u.jsx(Yr,{size:14}),onClick:P,children:"Parse Schema"}),u.jsx(te,{fontSize:"xs",color:"gray.500",mt:1,children:R})]}),n&&t.is_parsed&&(p==null?void 0:p.schemas)&&u.jsx(de,{pl:4,children:p.schemas.map(Q=>u.jsx(bke,{serviceName:t.name,schema:Q},Q.name))})]})}function bke({serviceName:t,schema:e}){const n=np("pgschema",t,e.name),r=Ln(P=>P.isExpanded(n)),i=Ln(P=>P.toggleNode),s=Ln(P=>P.selectNode),o=Ln(P=>P.selectedNode),a=St(P=>P.openDialog),h=da(),p={id:n,name:e.name,type:"pgschema",serviceName:t,schemaName:e.name},g=(o==null?void 0:o.id)===n,y=()=>{s(p),i(n)},b=P=>{P.stopPropagation(),a("pgupload",{mode:"create",data:{serviceName:t,schemaName:e.name}})},S=P=>{P.stopPropagation(),h.invalidateQueries({queryKey:["pgschemas",t]})};return u.jsxs(de,{children:[u.jsx(Kc,{node:p,isExpanded:r,isSelected:g,isLoading:!1,onClick:y,onUpload:b,onRefresh:S,level:3,count:e.tables.length}),r&&u.jsx(de,{pl:4,children:e.tables.map(P=>u.jsx(_ke,{serviceName:t,schemaName:e.name,table:P},P.name))})]})}function _ke({serviceName:t,schemaName:e,table:n}){const r=n.is_view?"pgview":"pgtable",i=np(r,t,e,n.name),s=Ln(O=>O.isExpanded(i)),o=Ln(O=>O.toggleNode),a=Ln(O=>O.selectNode),h=Ln(O=>O.selectedNode),p=St(O=>O.openDialog),g={id:i,name:n.name,type:r,serviceName:t,schemaName:e,tableName:n.name},y=(h==null?void 0:h.id)===i,b=()=>{a(g),o(i)},S=O=>{O.stopPropagation(),p("dataviewer",{mode:"view",data:{serviceName:t,schemaName:e,tableName:n.name,isView:n.is_view}})},P=O=>{O.stopPropagation(),p("query",{mode:"view",data:{serviceName:t,schemaName:e,tableName:n.name,initialSQL:`SELECT * FROM "${e}"."${n.name}" LIMIT 100`}})};return u.jsxs(de,{children:[u.jsx(Kc,{node:g,isExpanded:s,isSelected:y,isLoading:!1,onClick:b,level:4,count:n.columns.length,onShowData:S,onQuery:P}),s&&u.jsx(de,{pl:4,children:n.columns.map(O=>u.jsx(wke,{serviceName:t,schemaName:e,tableName:n.name,column:O},O.name))})]})}function wke({serviceName:t,schemaName:e,tableName:n,column:r}){const i=np("pgcolumn",t,e,`${n}:${r.name}`),s=Ln(g=>g.selectNode),o=Ln(g=>g.selectedNode),a={id:i,name:`${r.name} (${r.type}${r.nullable?", nullable":""})`,type:"pgcolumn",serviceName:t,schemaName:e,tableName:n},h=(o==null?void 0:o.id)===i,p=()=>{s(a)};return u.jsx(Kc,{node:a,isExpanded:!1,isSelected:h,isLoading:!1,onClick:p,level:5,isLeaf:!0})}function Ske({connectionId:t,name:e,url:n}){const r=np("connection",t),i=Ln(z=>z.isExpanded(r)),s=Ln(z=>z.toggleNode),o=Ln(z=>z.selectNode),a=Ln(z=>z.selectedNode),h=St(z=>z.openDialog),{data:p,isLoading:g}=er({queryKey:["workspaces",t],queryFn:()=>cH(t),staleTime:3e4}),y={id:r,name:e,type:"connection",connectionId:t},b=(a==null?void 0:a.id)===r,S=()=>{o(y),s(r)},P=z=>{z.stopPropagation(),h("connection",{mode:"edit",data:{connectionId:t}})},O=z=>{z.stopPropagation(),h("confirm",{mode:"delete",title:"Delete Connection",message:`Are you sure you want to delete connection "${e}"?`,data:{connectionId:t}})},D=z=>{z.stopPropagation();const F=n.replace(/\/rest\/?$/,"/web");window.open(F,"_blank","noopener,noreferrer")};return u.jsxs(de,{children:[u.jsx(Kc,{node:y,isExpanded:i,isSelected:b,isLoading:g,onClick:S,onEdit:P,onDelete:O,onOpenAdmin:D,level:2,count:p==null?void 0:p.length}),i&&p&&u.jsx(de,{pl:4,children:p.map(z=>u.jsx(kke,{connectionId:t,workspace:z.name},z.name))})]})}function kke({connectionId:t,workspace:e}){const n=np("workspace",t,e),r=Ln(P=>P.isExpanded(n)),i=Ln(P=>P.toggleNode),s=Ln(P=>P.selectNode),o=Ln(P=>P.selectedNode),a=St(P=>P.openDialog),h={id:n,name:e,type:"workspace",connectionId:t,workspace:e},p=(o==null?void 0:o.id)===n,g=()=>{s(h),i(n)},y=P=>{P.stopPropagation(),a("workspace",{mode:"edit",data:{connectionId:t,workspace:e}})},b=P=>{P.stopPropagation(),a("confirm",{mode:"delete",title:"Delete Workspace",message:`Are you sure you want to delete workspace "${e}"?`,data:{connectionId:t,workspace:e}})},S=P=>{P.stopPropagation(),bH(t,"workspace",e)};return u.jsxs(de,{children:[u.jsx(Kc,{node:h,isExpanded:r,isSelected:p,isLoading:!1,onClick:g,onEdit:y,onDownloadConfig:S,onDelete:b,level:3}),r&&u.jsxs(de,{pl:4,children:[u.jsx(Dv,{connectionId:t,workspace:e,category:"datastores",label:"Data Stores"}),u.jsx(Dv,{connectionId:t,workspace:e,category:"coveragestores",label:"Coverage Stores"}),u.jsx(Dv,{connectionId:t,workspace:e,category:"layers",label:"Layers"}),u.jsx(Dv,{connectionId:t,workspace:e,category:"styles",label:"Styles"}),u.jsx(Dv,{connectionId:t,workspace:e,category:"layergroups",label:"Layer Groups"})]})]})}function Dv({connectionId:t,workspace:e,category:n,label:r}){const i=np(n,t,e),s=Ln(O=>O.isExpanded(i)),o=Ln(O=>O.toggleNode),a=Ln(O=>O.selectNode),h=Ln(O=>O.selectedNode),{data:p,isLoading:g}=er({queryKey:[n,t,e],queryFn:async()=>{switch(n){case"datastores":return gR(t,e);case"coveragestores":return yR(t,e);case"layers":return A_(t,e);case"styles":return xR(t,e);case"layergroups":return xH(t,e)}},staleTime:3e4}),y={id:i,name:r,type:n,connectionId:t,workspace:e},b=(h==null?void 0:h.id)===i,S=()=>{a(y),o(i)},P=()=>{switch(n){case"datastores":return"datastore";case"coveragestores":return"coveragestore";case"layers":return"layer";case"styles":return"style";case"layergroups":return"layergroup"}};return u.jsxs(de,{children:[u.jsx(Kc,{node:y,isExpanded:s,isSelected:b,isLoading:g,onClick:S,level:4,count:p==null?void 0:p.length}),s&&p&&u.jsx(de,{pl:4,children:p.map(O=>u.jsx(Cke,{connectionId:t,workspace:e,name:O.name,type:P(),storeType:n==="coveragestores"?"coveragestore":n==="datastores"?"datastore":void 0},O.name))})]})}function Cke({connectionId:t,workspace:e,name:n,type:r,storeType:i}){const s=np(r,t,e,n),o=Ln(Oe=>Oe.isExpanded(s)),a=Ln(Oe=>Oe.toggleNode),h=Ln(Oe=>Oe.selectNode),p=Ln(Oe=>Oe.selectedNode),g=St(Oe=>Oe.openDialog),y=St(Oe=>Oe.setPreview),b=St(Oe=>Oe.setPreviewMode),S=r==="datastore"||r==="coveragestore",{data:P,isLoading:O,error:D}=er({queryKey:["featuretypes",t,e,n],queryFn:()=>MSe(t,e,n),enabled:S&&r==="datastore"&&o,staleTime:3e4}),{data:z,isLoading:F,error:R}=er({queryKey:["coverages",t,e,n],queryFn:()=>DSe(t,e,n),enabled:S&&r==="coveragestore"&&o,staleTime:3e4}),{data:N,error:Q}=er({queryKey:["available-featuretypes",t,e,n],queryFn:()=>dH(t,e,n),enabled:S&&r==="datastore"&&o,staleTime:3e4}),q=(p==null?void 0:p.id)===s,{data:X}=er({queryKey:["feature-count",t,e,n],queryFn:()=>CSe(t,e,n),enabled:r==="layer"&&q,staleTime:5*60*1e3,gcTime:10*60*1e3,retry:!1});D&&console.error("Feature types error:",D),R&&console.error("Coverages error:",R),Q&&console.error("Available feature types error:",Q);const K={id:s,name:n,type:r,connectionId:t,workspace:e,storeName:r==="layer"?void 0:n,storeType:i},ne=O||F,J=()=>{h(K),S&&a(s)},ae=Oe=>{Oe.stopPropagation();const oe=i==="coveragestore"?"raster":"vector";Cl({connId:t,workspace:e,layerName:n,storeName:n,storeType:i,layerType:oe}).then(({url:nt})=>{y({url:nt,layerName:n,workspace:e,connectionId:t,storeName:n,storeType:i,layerType:oe})}).catch(nt=>{St.getState().setError(nt.message)})},Ee=Oe=>{Oe.stopPropagation();const oe=i==="coveragestore"?"raster":"vector";b("3d"),y({url:"",layerName:n,workspace:e,connectionId:t,storeName:n,storeType:i,layerType:oe,nodeType:r})},Ce=async Oe=>{var oe;if(Oe.stopPropagation(),r==="style")g("style",{mode:"edit",data:{connectionId:t,workspace:e,name:n}});else if(r==="layer")g("layer",{mode:"edit",data:{connectionId:t,workspace:e,layerName:n,storeType:i}});else if(r==="layergroup")try{const nt=await vH(t,e,n),Ne=((oe=nt.layers)==null?void 0:oe.map(tt=>{const Ye=tt.name.split(":");return Ye.length>1?Ye[1]:tt.name}))||[];g("layergroup",{mode:"edit",data:{connectionId:t,workspace:e,name:nt.name,title:nt.title||"",mode:nt.mode,layers:Ne}})}catch(nt){St.getState().setError(nt.message)}},$e=Oe=>{Oe.stopPropagation(),g("confirm",{mode:"delete",title:`Delete ${r}`,message:`Are you sure you want to delete "${n}"?`,data:{connectionId:t,workspace:e,name:n,type:r}})},We=Oe=>{Oe.stopPropagation();const nt={datastore:"datastore",coveragestore:"coveragestore",layer:"layer",style:"style",layergroup:"layergroup"}[r];nt&&bH(t,nt,e,n)},Fe=Oe=>{Oe.stopPropagation(),r==="layer"||i==="datastore"?JSe(t,e,n):i==="coveragestore"&&eke(t,e,n)},we=["datastore","coveragestore","layer","style","layergroup"].includes(r),Ie=r==="layer",Qe=i==="coveragestore"?"GeoTIFF":"Shapefile",se=r==="style"||r==="layer"||r==="layergroup",Re=r==="datastore"?((P==null?void 0:P.length)||0)+((N==null?void 0:N.length)||0):r==="coveragestore"?z==null?void 0:z.length:r==="layer"&&X!==void 0&&X>=0?X:void 0;return u.jsxs(de,{children:[u.jsx(Kc,{node:K,isExpanded:o,isSelected:q,isLoading:ne,onClick:J,onEdit:se?Ce:void 0,onPreview:r==="layer"||r==="datastore"||r==="coveragestore"?ae:void 0,onTerria:r==="layer"||r==="layergroup"?Ee:void 0,onDownloadConfig:we?We:void 0,onDownloadData:Ie?Fe:void 0,downloadDataLabel:Qe,onDelete:$e,level:5,isLeaf:!S,count:Re}),o&&r==="datastore"&&u.jsx(de,{pl:4,children:D?u.jsxs(te,{fontSize:"xs",color:"red.500",px:2,py:2,children:["Error loading datasets: ",D.message]}):u.jsx(Tke,{connectionId:t,workspace:e,storeName:n,featureTypes:P||[],availableFeatureTypes:N||[]})}),o&&r==="coveragestore"&&u.jsx(de,{pl:4,children:R?u.jsxs(te,{fontSize:"xs",color:"red.500",px:2,py:2,children:["Error loading coverages: ",R.message]}):u.jsx(jke,{connectionId:t,workspace:e,storeName:n,coverages:z||[]})})]})}function Tke({connectionId:t,workspace:e,storeName:n,featureTypes:r,availableFeatureTypes:i}){const s=ha(),o=da(),[a,h]=L.useState(new Set),[p,g]=L.useState(!1),y=St(R=>R.setPreview),b=R=>{const N=new Set(a);N.has(R)?N.delete(R):N.add(R),h(N)},S=()=>{h(new Set(i))},P=async()=>{if(a.size!==0){g(!0);try{const R=await fH(t,e,n,Array.from(a));R.published.length>0&&(s({title:"Layers Published",description:`Successfully published ${R.published.length} layer(s)`,status:"success",duration:3e3}),o.invalidateQueries({queryKey:["featuretypes",t,e,n]}),o.invalidateQueries({queryKey:["available-featuretypes",t,e,n]}),o.invalidateQueries({queryKey:["layers",t,e]}),h(new Set)),R.errors.length>0&&s({title:"Some layers failed to publish",description:R.errors.join(", "),status:"warning",duration:5e3})}catch(R){s({title:"Failed to publish layers",description:R instanceof Error?R.message:"Unknown error",status:"error",duration:5e3})}finally{g(!1)}}},O=async R=>{try{await RSe(t,e,n,R),s({title:"Layer Published",description:`Successfully published ${R}`,status:"success",duration:3e3}),o.invalidateQueries({queryKey:["featuretypes",t,e,n]}),o.invalidateQueries({queryKey:["available-featuretypes",t,e,n]}),o.invalidateQueries({queryKey:["layers",t,e]})}catch(N){s({title:"Failed to publish layer",description:N instanceof Error?N.message:"Unknown error",status:"error",duration:5e3})}},D=R=>{Cl({connId:t,workspace:e,layerName:R,storeName:n,storeType:"datastore",layerType:"vector"}).then(({url:N})=>{y({url:N,layerName:R,workspace:e,connectionId:t,storeName:n,storeType:"datastore",layerType:"vector"})}).catch(N=>{s({title:"Preview failed",description:N.message,status:"error",duration:3e3})})},z=Et("yellow.50","yellow.900"),F=Et("green.50","green.900");return u.jsxs(de,{children:[r.length>0&&u.jsxs(de,{mb:2,children:[u.jsxs(te,{fontSize:"xs",fontWeight:"600",color:"gray.500",px:2,py:1,children:["Published (",r.length,")"]}),r.map(R=>u.jsx(Sz,{name:R.name,isPublished:!0,bg:F,onPreview:()=>D(R.name)},R.name))]}),i.length>0&&u.jsxs(de,{children:[u.jsxs(Sn,{align:"center",justify:"space-between",px:2,py:1,children:[u.jsxs(te,{fontSize:"xs",fontWeight:"600",color:"gray.500",children:["Available to Publish (",i.length,")"]}),u.jsxs(Sn,{gap:1,children:[u.jsx(vt,{size:"xs",variant:"ghost",onClick:S,isDisabled:a.size===i.length,children:"Select All"}),a.size>0&&u.jsxs(vt,{size:"xs",colorScheme:"kartoza",leftIcon:u.jsx(Ol,{size:12}),onClick:P,isLoading:p,children:["Publish (",a.size,")"]})]})]}),i.map(R=>u.jsx(Sz,{name:R,isPublished:!1,bg:z,isSelected:a.has(R),onToggleSelect:()=>b(R),onPublish:()=>O(R)},R))]}),r.length===0&&i.length===0&&u.jsx(te,{fontSize:"xs",color:"gray.500",px:2,py:2,fontStyle:"italic",children:"No datasets in this store"})]})}function jke({connectionId:t,workspace:e,storeName:n,coverages:r}){const i=St(h=>h.setPreview),s=ha(),o=h=>{Cl({connId:t,workspace:e,layerName:h,storeName:n,storeType:"coveragestore",layerType:"raster"}).then(({url:p})=>{i({url:p,layerName:h,workspace:e,connectionId:t,storeName:n,storeType:"coveragestore",layerType:"raster"})}).catch(p=>{s({title:"Preview failed",description:p.message,status:"error",duration:3e3})})},a=Et("purple.50","purple.900");return u.jsxs(de,{children:[r.length>0&&u.jsxs(de,{children:[u.jsxs(te,{fontSize:"xs",fontWeight:"600",color:"gray.500",px:2,py:1,children:["Coverages (",r.length,")"]}),r.map(h=>u.jsx(Sz,{name:h.name,isPublished:!0,isCoverage:!0,bg:a,onPreview:()=>o(h.name)},h.name))]}),r.length===0&&u.jsx(te,{fontSize:"xs",color:"gray.500",px:2,py:2,fontStyle:"italic",children:"No coverages in this store"})]})}function Sz({name:t,isPublished:e,isCoverage:n=!1,bg:r,isSelected:i,onToggleSelect:s,onPublish:o,onPreview:a}){const h=Et("gray.100","gray.600"),p=n?"coverage":"featuretype",g=CH(p),y=TH(p);return u.jsxs(Sn,{align:"center",py:1.5,px:2,pl:6,bg:r,_hover:{bg:h},borderRadius:"md",mx:1,my:.5,role:"group",children:[!e&&s&&u.jsx(dl,{size:"sm",isChecked:i,onChange:s,mr:2,colorScheme:"kartoza"}),u.jsx(de,{p:1,borderRadius:"md",mr:2,children:u.jsx(Le,{as:g,boxSize:3.5,color:y})}),u.jsx(te,{flex:"1",fontSize:"sm",noOfLines:1,children:t}),e&&u.jsx(Lt,{colorScheme:"green",fontSize:"2xs",mr:2,children:"Published"}),u.jsxs(Sn,{gap:1,opacity:0,_groupHover:{opacity:1},transition:"opacity 0.15s",children:[a&&u.jsx(kn,{label:"Preview",fontSize:"xs",children:u.jsx(wn,{"aria-label":"Preview",icon:u.jsx(Pi,{size:12}),size:"xs",variant:"ghost",colorScheme:"kartoza",onClick:b=>{b.stopPropagation(),a()}})}),!e&&o&&u.jsx(kn,{label:"Publish as Layer",fontSize:"xs",children:u.jsx(wn,{"aria-label":"Publish",icon:u.jsx(As,{size:12}),size:"xs",variant:"ghost",colorScheme:"green",onClick:b=>{b.stopPropagation(),o()}})})]})]})}function Kc({node:t,isExpanded:e,isSelected:n,isLoading:r,onClick:i,onEdit:s,onDelete:o,onPreview:a,onTerria:h,onOpenAdmin:p,onQuery:g,onShowData:y,onUpload:b,onRefresh:S,onDownloadConfig:P,onDownloadData:O,downloadDataLabel:D,level:z,isLeaf:F,count:R}){const N=Et(n?"kartoza.50":"transparent",n?"kartoza.900":"transparent"),Q=Et("gray.50","gray.700"),q=Et("gray.800","gray.100"),X=Et("kartoza.700","kartoza.200"),K=Et("kartoza.500","kartoza.400"),ne=Et("gray.500","gray.400"),J=TH(t.type),ae=CH(t.type);return u.jsxs(Sn,{align:"center",py:2,px:2,pl:z*4+2,cursor:"pointer",bg:N,borderLeft:n?"3px solid":"3px solid transparent",borderLeftColor:n?K:"transparent",_hover:{bg:n?N:Q,"& .chevron-icon":{color:"kartoza.500"}},borderRadius:"md",transition:"all 0.15s ease",onClick:i,role:"group",mx:1,my:.5,children:[!F&&u.jsx(de,{w:4,mr:2,color:ne,className:"chevron-icon",transition:"color 0.15s",children:r?u.jsx(Cr,{size:"xs",color:"kartoza.500"}):e?u.jsx(fc,{size:14}):u.jsx(JQ,{size:14})}),F&&u.jsx(de,{w:4,mr:2}),u.jsx(de,{p:1.5,borderRadius:"md",bg:n?`${J.split(".")[0]}.100`:"transparent",mr:2,transition:"background 0.15s",_groupHover:{bg:`${J.split(".")[0]}.50`},children:u.jsx(Le,{as:ae,boxSize:4,color:J})}),u.jsx(te,{flex:"1",fontSize:"sm",color:n?X:q,fontWeight:n?"600":"normal",noOfLines:1,letterSpacing:n?"-0.01em":"normal",children:t.name}),R!==void 0&&R>=0&&u.jsx(Lt,{colorScheme:J.split(".")[0],variant:"subtle",fontSize:"xs",borderRadius:"full",px:2,mr:2,fontWeight:"600",children:R}),p&&u.jsx(kn,{label:"Open GeoServer Admin",fontSize:"xs",children:u.jsx(wn,{"aria-label":"Open Admin",icon:u.jsx(Pwe,{size:14}),size:"xs",variant:"ghost",colorScheme:"blue",onClick:p,_hover:{bg:"blue.50"},mr:1})}),u.jsxs(Sn,{gap:1,opacity:0,_groupHover:{opacity:1},transition:"opacity 0.15s",children:[(P||O)&&u.jsxs(Df,{isLazy:!0,placement:"bottom-end",children:[u.jsx(kn,{label:"Download",fontSize:"xs",children:u.jsx(Lf,{as:wn,"aria-label":"Download",icon:u.jsx(Om,{size:14}),size:"xs",variant:"ghost",colorScheme:"kartoza",onClick:Ee=>Ee.stopPropagation(),_hover:{bg:"kartoza.100"}})}),u.jsxs(Ff,{minW:"180px",fontSize:"sm",children:[P&&u.jsx(ml,{icon:u.jsx(eH,{}),onClick:P,children:"Download Config (JSON)"}),O&&u.jsxs(ml,{icon:u.jsx(Hc,{}),onClick:O,children:["Download ",D||"Data"]})]})]}),a&&u.jsx(kn,{label:"Preview",fontSize:"xs",children:u.jsx(wn,{"aria-label":"Preview",icon:u.jsx(Pi,{size:14}),size:"xs",variant:"ghost",colorScheme:"kartoza",onClick:a,_hover:{bg:"kartoza.100"}})}),S&&u.jsx(kn,{label:"Refresh",fontSize:"xs",children:u.jsx(wn,{"aria-label":"Refresh",icon:u.jsx(Xc,{size:14}),size:"xs",variant:"ghost",colorScheme:"cyan",onClick:S,_hover:{bg:"cyan.50"}})}),b&&u.jsx(kn,{label:"Import Data",fontSize:"xs",children:u.jsx(wn,{"aria-label":"Import Data",icon:u.jsx(Ol,{size:14}),size:"xs",variant:"ghost",colorScheme:"green",onClick:b,_hover:{bg:"green.50"}})}),y&&u.jsx(kn,{label:"View Data",fontSize:"xs",children:u.jsx(wn,{"aria-label":"View Data",icon:u.jsx(Ks,{size:14}),size:"xs",variant:"ghost",colorScheme:"blue",onClick:y,_hover:{bg:"blue.50"}})}),g&&u.jsx(kn,{label:"Query",fontSize:"xs",children:u.jsx(wn,{"aria-label":"Query",icon:u.jsx(Da,{size:14}),size:"xs",variant:"ghost",colorScheme:"purple",onClick:g,_hover:{bg:"purple.50"}})}),h&&u.jsx(kn,{label:"Open in Terria 3D",fontSize:"xs",children:u.jsx(wn,{"aria-label":"Open in Terria 3D",icon:u.jsx(Os,{size:14}),size:"xs",variant:"ghost",colorScheme:"teal",onClick:h,_hover:{bg:"teal.50"}})}),s&&u.jsx(kn,{label:"Edit",fontSize:"xs",children:u.jsx(wn,{"aria-label":"Edit",icon:u.jsx(jwe,{size:14}),size:"xs",variant:"ghost",colorScheme:"kartoza",onClick:s,_hover:{bg:"kartoza.100"}})}),o&&u.jsx(kn,{label:"Delete",fontSize:"xs",children:u.jsx(wn,{"aria-label":"Delete",icon:u.jsx(jf,{size:14}),size:"xs",variant:"ghost",colorScheme:"red",onClick:o,_hover:{bg:"red.50"}})})]})]})}function Pke(){return u.jsx(de,{h:"100%",children:u.jsx(de,{p:2,children:u.jsx(mke,{})})})}function Oke(){const t=Et("gray.100","gray.800"),e=Et("gray.200","gray.700"),n=St(g=>g.statusMessage),r=St(g=>g.errorMessage),i=St(g=>g.successMessage),s=St(g=>g.setError),o=St(g=>g.setSuccess),a=uo(g=>g.connections),h=uo(g=>g.activeConnectionId),p=a.find(g=>g.id===h);return u.jsxs(de,{children:[r&&u.jsxs(go,{status:"error",variant:"solid",children:[u.jsx(yo,{}),u.jsx(te,{flex:"1",children:r}),u.jsx(x1,{onClick:()=>s(null)})]}),i&&u.jsxs(go,{status:"success",variant:"solid",children:[u.jsx(yo,{}),u.jsx(te,{flex:"1",children:i}),u.jsx(x1,{onClick:()=>o(null)})]}),u.jsx(de,{bg:t,borderTop:"1px",borderColor:e,px:4,py:1,children:u.jsxs(Sn,{justify:"space-between",align:"center",children:[u.jsx(te,{fontSize:"sm",color:"gray.600",children:n}),u.jsxs(Sn,{gap:4,children:[u.jsxs(te,{fontSize:"sm",color:"gray.600",children:["Connections: ",a.length]}),p&&u.jsxs(te,{fontSize:"sm",color:"kartoza.500",fontWeight:"medium",children:["Active: ",p.name]})]})]})})]})}function Ake({children:t,onSearchClick:e,onHelpClick:n}){const r=St(S=>S.sidebarWidth),i=St(S=>S.setSidebarWidth),s=Et("gray.50","gray.900"),o=Et("gray.200","gray.700"),a=Et("gray.300","gray.600"),h=Et("kartoza.400","kartoza.500"),[p,g]=L.useState(!1),y=L.useRef(null),b=L.useCallback(S=>{S.preventDefault(),g(!0);const P=D=>{if(y.current){const z=y.current.getBoundingClientRect(),F=D.clientX-z.left;i(F)}},O=()=>{g(!1),document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",O),document.body.style.cursor="",document.body.style.userSelect=""};document.addEventListener("mousemove",P),document.addEventListener("mouseup",O),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[i]);return u.jsxs(Sn,{direction:"column",h:"100vh",bg:s,children:[u.jsx(pke,{onSearchClick:e,onHelpClick:n}),u.jsxs(Sn,{flex:"1",overflow:"hidden",ref:y,children:[u.jsx(de,{w:`${r}px`,borderRight:"1px",borderColor:o,overflow:"auto",flexShrink:0,position:"relative",children:u.jsx(Pke,{})}),u.jsx(de,{w:"6px",cursor:"col-resize",bg:p?h:"transparent",_hover:{bg:h},transition:"background 0.15s",flexShrink:0,position:"relative",onMouseDown:b,ml:"-3px",zIndex:10,children:u.jsx(de,{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",h:"40px",w:"4px",borderRadius:"full",bg:p?"white":a,opacity:p?1:0,_groupHover:{opacity:.8},transition:"opacity 0.15s",sx:{"[data-resize-handle]:hover &":{opacity:.8}}})}),u.jsx(de,{flex:"1",overflow:"auto",p:4,display:"flex",flexDirection:"column",children:t})]}),u.jsx(Oke,{})]})}var jH={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(t,e){(function(n,r){t.exports=r()})(Ah,function(){var n={},r={};function i(o,a,h){if(r[o]=h,o==="index"){var p="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",g={};return r.shared(g),r.index(n,g),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([p],{type:"text/javascript"}))),n}}i("shared",["exports"],function(o){function a(d,c,f,x){return new(f||(f=Promise))(function(w,T){function j($){try{I(x.next($))}catch(V){T(V)}}function A($){try{I(x.throw($))}catch(V){T(V)}}function I($){var V;$.done?w($.value):(V=$.value,V instanceof f?V:new f(function(H){H(V)})).then(j,A)}I((x=x.apply(d,c||[])).next())})}function h(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}typeof SuppressedError=="function"&&SuppressedError;var p=g;function g(d,c){this.x=d,this.y=c}g.prototype={clone:function(){return new g(this.x,this.y)},add:function(d){return this.clone()._add(d)},sub:function(d){return this.clone()._sub(d)},multByPoint:function(d){return this.clone()._multByPoint(d)},divByPoint:function(d){return this.clone()._divByPoint(d)},mult:function(d){return this.clone()._mult(d)},div:function(d){return this.clone()._div(d)},rotate:function(d){return this.clone()._rotate(d)},rotateAround:function(d,c){return this.clone()._rotateAround(d,c)},matMult:function(d){return this.clone()._matMult(d)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(d){return this.x===d.x&&this.y===d.y},dist:function(d){return Math.sqrt(this.distSqr(d))},distSqr:function(d){var c=d.x-this.x,f=d.y-this.y;return c*c+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(d){return Math.atan2(this.y-d.y,this.x-d.x)},angleWith:function(d){return this.angleWithSep(d.x,d.y)},angleWithSep:function(d,c){return Math.atan2(this.x*c-this.y*d,this.x*d+this.y*c)},_matMult:function(d){var c=d[2]*this.x+d[3]*this.y;return this.x=d[0]*this.x+d[1]*this.y,this.y=c,this},_add:function(d){return this.x+=d.x,this.y+=d.y,this},_sub:function(d){return this.x-=d.x,this.y-=d.y,this},_mult:function(d){return this.x*=d,this.y*=d,this},_div:function(d){return this.x/=d,this.y/=d,this},_multByPoint:function(d){return this.x*=d.x,this.y*=d.y,this},_divByPoint:function(d){return this.x/=d.x,this.y/=d.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var d=this.y;return this.y=this.x,this.x=-d,this},_rotate:function(d){var c=Math.cos(d),f=Math.sin(d),x=f*this.x+c*this.y;return this.x=c*this.x-f*this.y,this.y=x,this},_rotateAround:function(d,c){var f=Math.cos(d),x=Math.sin(d),w=c.y+x*(this.x-c.x)+f*(this.y-c.y);return this.x=c.x+f*(this.x-c.x)-x*(this.y-c.y),this.y=w,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},g.convert=function(d){return d instanceof g?d:Array.isArray(d)?new g(d[0],d[1]):d};var y=h(p),b=S;function S(d,c,f,x){this.cx=3*d,this.bx=3*(f-d)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(x-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=d,this.p1y=c,this.p2x=f,this.p2y=x}S.prototype={sampleCurveX:function(d){return((this.ax*d+this.bx)*d+this.cx)*d},sampleCurveY:function(d){return((this.ay*d+this.by)*d+this.cy)*d},sampleCurveDerivativeX:function(d){return(3*this.ax*d+2*this.bx)*d+this.cx},solveCurveX:function(d,c){if(c===void 0&&(c=1e-6),d<0)return 0;if(d>1)return 1;for(var f=d,x=0;x<8;x++){var w=this.sampleCurveX(f)-d;if(Math.abs(w)<c)return f;var T=this.sampleCurveDerivativeX(f);if(Math.abs(T)<1e-6)break;f-=w/T}var j=0,A=1;for(f=d,x=0;x<20&&(w=this.sampleCurveX(f),!(Math.abs(w-d)<c));x++)d>w?j=f:A=f,f=.5*(A-j)+j;return f},solve:function(d,c){return this.sampleCurveY(this.solveCurveX(d,c))}};var P=h(b);let O,D;function z(){return O==null&&(O=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),O}function F(){if(D==null&&(D=!1,z())){const c=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(c){for(let x=0;x<5*5;x++){const w=4*x;c.fillStyle=`rgb(${w},${w+1},${w+2})`,c.fillRect(x%5,Math.floor(x/5),1,1)}const f=c.getImageData(0,0,5,5).data;for(let x=0;x<5*5*4;x++)if(x%4!=3&&f[x]!==x){D=!0;break}}}return D||!1}function R(d,c,f,x){const w=new P(d,c,f,x);return T=>w.solve(T)}const N=R(.25,.1,.25,1);function Q(d,c,f){return Math.min(f,Math.max(c,d))}function q(d,c,f){const x=f-c,w=((d-c)%x+x)%x+c;return w===c?f:w}function X(d,...c){for(const f of c)for(const x in f)d[x]=f[x];return d}let K=1;function ne(d,c,f){const x={};for(const w in d)x[w]=c.call(this,d[w],w,d);return x}function J(d,c,f){const x={};for(const w in d)c.call(this,d[w],w,d)&&(x[w]=d[w]);return x}function ae(d){return Array.isArray(d)?d.map(ae):typeof d=="object"&&d?ne(d,ae):d}const Ee={};function Ce(d){Ee[d]||(typeof console<"u"&&console.warn(d),Ee[d]=!0)}function $e(d,c,f){return(f.y-d.y)*(c.x-d.x)>(c.y-d.y)*(f.x-d.x)}function We(d){return typeof WorkerGlobalScope<"u"&&d!==void 0&&d instanceof WorkerGlobalScope}let Fe=null;function we(d){return typeof ImageBitmap<"u"&&d instanceof ImageBitmap}const Ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Qe(d,c,f,x,w){return a(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const T=new VideoFrame(d,{timestamp:0});try{const j=T==null?void 0:T.format;if(!j||!j.startsWith("BGR")&&!j.startsWith("RGB"))throw new Error(`Unrecognized format ${j}`);const A=j.startsWith("BGR"),I=new Uint8ClampedArray(x*w*4);if(yield T.copyTo(I,function($,V,H,ee,ie){const ce=4*Math.max(-V,0),ue=(Math.max(0,H)-H)*ee*4+ce,ye=4*ee,Te=Math.max(0,V),Je=Math.max(0,H);return{rect:{x:Te,y:Je,width:Math.min($.width,V+ee)-Te,height:Math.min($.height,H+ie)-Je},layout:[{offset:ue,stride:ye}]}}(d,c,f,x,w)),A)for(let $=0;$<I.length;$+=4){const V=I[$];I[$]=I[$+2],I[$+2]=V}return I}finally{T.close()}})}let se,Re;const Oe="AbortError";function oe(){return new Error(Oe)}const nt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ne(d){return nt.REGISTERED_PROTOCOLS[d.substring(0,d.indexOf("://"))]}const tt="global-dispatcher";class Ye extends Error{constructor(c,f,x,w){super(`AJAXError: ${f} (${c}): ${x}`),this.status=c,this.statusText=f,this.url=x,this.body=w}}const _t=()=>We(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,At=function(d,c){if(/:\/\//.test(d.url)&&!/^https?:|^file:/.test(d.url)){const x=Ne(d.url);if(x)return x(d,c);if(We(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,targetMapId:tt},c)}if(!(/^file:/.test(f=d.url)||/^file:/.test(_t())&&!/^\w+:/.test(f))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(x,w){return a(this,void 0,void 0,function*(){const T=new Request(x.url,{method:x.method||"GET",body:x.body,credentials:x.credentials,headers:x.headers,cache:x.cache,referrer:_t(),signal:w.signal});x.type!=="json"||T.headers.has("Accept")||T.headers.set("Accept","application/json");const j=yield fetch(T);if(!j.ok){const $=yield j.blob();throw new Ye(j.status,j.statusText,x.url,$)}let A;A=x.type==="arrayBuffer"||x.type==="image"?j.arrayBuffer():x.type==="json"?j.json():j.text();const I=yield A;if(w.signal.aborted)throw oe();return{data:I,cacheControl:j.headers.get("Cache-Control"),expires:j.headers.get("Expires")}})}(d,c);if(We(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,mustQueue:!0,targetMapId:tt},c)}var f;return function(x,w){return new Promise((T,j)=>{var A;const I=new XMLHttpRequest;I.open(x.method||"GET",x.url,!0),x.type!=="arrayBuffer"&&x.type!=="image"||(I.responseType="arraybuffer");for(const $ in x.headers)I.setRequestHeader($,x.headers[$]);x.type==="json"&&(I.responseType="text",!((A=x.headers)===null||A===void 0)&&A.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=x.credentials==="include",I.onerror=()=>{j(new Error(I.statusText))},I.onload=()=>{if(!w.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let $=I.response;if(x.type==="json")try{$=JSON.parse(I.response)}catch(V){return void j(V)}T({data:$,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const $=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});j(new Ye(I.status,I.statusText,x.url,$))}},w.signal.addEventListener("abort",()=>{I.abort(),j(oe())}),I.send(x.body)})}(d,c)};function Ot(d){if(!d||d.indexOf("://")<=0||d.indexOf("data:image/")===0||d.indexOf("blob:")===0)return!0;const c=new URL(d),f=window.location;return c.protocol===f.protocol&&c.host===f.host}function bt(d,c,f){f[d]&&f[d].indexOf(c)!==-1||(f[d]=f[d]||[],f[d].push(c))}function rt(d,c,f){if(f&&f[d]){const x=f[d].indexOf(c);x!==-1&&f[d].splice(x,1)}}class tn{constructor(c,f={}){X(this,f),this.type=c}}class kt extends tn{constructor(c,f={}){super("error",X({error:c},f))}}class it{on(c,f){return this._listeners=this._listeners||{},bt(c,f,this._listeners),this}off(c,f){return rt(c,f,this._listeners),rt(c,f,this._oneTimeListeners),this}once(c,f){return f?(this._oneTimeListeners=this._oneTimeListeners||{},bt(c,f,this._oneTimeListeners),this):new Promise(x=>this.once(c,x))}fire(c,f){typeof c=="string"&&(c=new tn(c,f||{}));const x=c.type;if(this.listens(x)){c.target=this;const w=this._listeners&&this._listeners[x]?this._listeners[x].slice():[];for(const A of w)A.call(this,c);const T=this._oneTimeListeners&&this._oneTimeListeners[x]?this._oneTimeListeners[x].slice():[];for(const A of T)rt(x,A,this._oneTimeListeners),A.call(this,c);const j=this._eventedParent;j&&(X(c,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),j.fire(c))}else c instanceof kt&&console.error(c.error);return this}listens(c){return this._listeners&&this._listeners[c]&&this._listeners[c].length>0||this._oneTimeListeners&&this._oneTimeListeners[c]&&this._oneTimeListeners[c].length>0||this._eventedParent&&this._eventedParent.listens(c)}setEventedParent(c,f){return this._eventedParent=c,this._eventedParentData=f,this}}var ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ut=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function qt(d,c){const f={};for(const x in d)x!=="ref"&&(f[x]=d[x]);return ut.forEach(x=>{x in c&&(f[x]=c[x])}),f}function Ct(d,c){if(Array.isArray(d)){if(!Array.isArray(c)||d.length!==c.length)return!1;for(let f=0;f<d.length;f++)if(!Ct(d[f],c[f]))return!1;return!0}if(typeof d=="object"&&d!==null&&c!==null){if(typeof c!="object"||Object.keys(d).length!==Object.keys(c).length)return!1;for(const f in d)if(!Ct(d[f],c[f]))return!1;return!0}return d===c}function $t(d,c){d.push(c)}function Yn(d,c,f){$t(f,{command:"addSource",args:[d,c[d]]})}function br(d,c,f){$t(c,{command:"removeSource",args:[d]}),f[d]=!0}function ur(d,c,f,x){br(d,f,x),Yn(d,c,f)}function Ar(d,c,f){let x;for(x in d[f])if(Object.prototype.hasOwnProperty.call(d[f],x)&&x!=="data"&&!Ct(d[f][x],c[f][x]))return!1;for(x in c[f])if(Object.prototype.hasOwnProperty.call(c[f],x)&&x!=="data"&&!Ct(d[f][x],c[f][x]))return!1;return!0}function _r(d,c,f,x,w,T){d=d||{},c=c||{};for(const j in d)Object.prototype.hasOwnProperty.call(d,j)&&(Ct(d[j],c[j])||f.push({command:T,args:[x,j,c[j],w]}));for(const j in c)Object.prototype.hasOwnProperty.call(c,j)&&!Object.prototype.hasOwnProperty.call(d,j)&&(Ct(d[j],c[j])||f.push({command:T,args:[x,j,c[j],w]}))}function ct(d){return d.id}function Tt(d,c){return d[c.id]=c,d}class Me{constructor(c,f,x,w){this.message=(c?`${c}: `:"")+x,w&&(this.identifier=w),f!=null&&f.__line__&&(this.line=f.__line__)}}function Xt(d,...c){for(const f of c)for(const x in f)d[x]=f[x];return d}class pt extends Error{constructor(c,f){super(f),this.message=f,this.key=c}}class zt{constructor(c,f=[]){this.parent=c,this.bindings={};for(const[x,w]of f)this.bindings[x]=w}concat(c){return new zt(this,c)}get(c){if(this.bindings[c])return this.bindings[c];if(this.parent)return this.parent.get(c);throw new Error(`${c} not found in scope.`)}has(c){return!!this.bindings[c]||!!this.parent&&this.parent.has(c)}}const ir={kind:"null"},yt={kind:"number"},_n={kind:"string"},Kt={kind:"boolean"},tr={kind:"color"},qr={kind:"object"},sn={kind:"value"},Wi={kind:"collator"},Rs={kind:"formatted"},Ui={kind:"padding"},vs={kind:"resolvedImage"},xe={kind:"variableAnchorOffsetCollection"};function U(d,c){return{kind:"array",itemType:d,N:c}}function G(d){if(d.kind==="array"){const c=G(d.itemType);return typeof d.N=="number"?`array<${c}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${c}>`}return d.kind}const re=[ir,yt,_n,Kt,tr,Rs,qr,U(sn),Ui,vs,xe];function pe(d,c){if(c.kind==="error")return null;if(d.kind==="array"){if(c.kind==="array"&&(c.N===0&&c.itemType.kind==="value"||!pe(d.itemType,c.itemType))&&(typeof d.N!="number"||d.N===c.N))return null}else{if(d.kind===c.kind)return null;if(d.kind==="value"){for(const f of re)if(!pe(f,c))return null}}return`Expected ${G(d)} but found ${G(c)} instead.`}function Se(d,c){return c.some(f=>f.kind===d.kind)}function Pe(d,c){return c.some(f=>f==="null"?d===null:f==="array"?Array.isArray(d):f==="object"?d&&!Array.isArray(d)&&typeof d=="object":f===typeof d)}function qe(d,c){return d.kind==="array"&&c.kind==="array"?d.itemType.kind===c.itemType.kind&&typeof d.N=="number":d.kind===c.kind}const ke=.96422,st=.82521,ft=4/29,_e=6/29,ht=3*_e*_e,Wt=_e*_e*_e,dn=Math.PI/180,Xn=180/Math.PI;function Nn(d){return(d%=360)<0&&(d+=360),d}function cr([d,c,f,x]){let w,T;const j=wi((.2225045*(d=Un(d))+.7168786*(c=Un(c))+.0606169*(f=Un(f)))/1);d===c&&c===f?w=T=j:(w=wi((.4360747*d+.3850649*c+.1430804*f)/ke),T=wi((.0139322*d+.0971045*c+.7141733*f)/st));const A=116*j-16;return[A<0?0:A,500*(w-j),200*(j-T),x]}function Un(d){return d<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function wi(d){return d>Wt?Math.pow(d,1/3):d/ht+ft}function oi([d,c,f,x]){let w=(d+16)/116,T=isNaN(c)?w:w+c/500,j=isNaN(f)?w:w-f/200;return w=1*Tr(w),T=ke*Tr(T),j=st*Tr(j),[qn(3.1338561*T-1.6168667*w-.4906146*j),qn(-.9787684*T+1.9161415*w+.033454*j),qn(.0719453*T-.2289914*w+1.4052427*j),x]}function qn(d){return(d=d<=.00304?12.92*d:1.055*Math.pow(d,1/2.4)-.055)<0?0:d>1?1:d}function Tr(d){return d>_e?d*d*d:ht*(d-ft)}function Gr(d){return parseInt(d.padEnd(2,d),16)/255}function Fi(d,c){return Ei(c?d/100:d,0,1)}function Ei(d,c,f){return Math.min(Math.max(c,d),f)}function bs(d){return!d.some(Number.isNaN)}const Ka={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class yr{constructor(c,f,x,w=1,T=!0){this.r=c,this.g=f,this.b=x,this.a=w,T||(this.r*=w,this.g*=w,this.b*=w,w||this.overwriteGetter("rgb",[c,f,x,w]))}static parse(c){if(c instanceof yr)return c;if(typeof c!="string")return;const f=function(x){if((x=x.toLowerCase().trim())==="transparent")return[0,0,0,0];const w=Ka[x];if(w){const[j,A,I]=w;return[j/255,A/255,I/255,1]}if(x.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(x)){const j=x.length<6?1:2;let A=1;return[Gr(x.slice(A,A+=j)),Gr(x.slice(A,A+=j)),Gr(x.slice(A,A+=j)),Gr(x.slice(A,A+j)||"ff")]}if(x.startsWith("rgb")){const j=x.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(j){const[A,I,$,V,H,ee,ie,ce,ue,ye,Te,Je]=j,Ve=[V||" ",ie||" ",ye].join("");if(Ve==="  "||Ve==="  /"||Ve===",,"||Ve===",,,"){const Ze=[$,ee,ue].join(""),ot=Ze==="%%%"?100:Ze===""?255:0;if(ot){const wt=[Ei(+I/ot,0,1),Ei(+H/ot,0,1),Ei(+ce/ot,0,1),Te?Fi(+Te,Je):1];if(bs(wt))return wt}}return}}const T=x.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[j,A,I,$,V,H,ee,ie,ce]=T,ue=[I||" ",V||" ",ee].join("");if(ue==="  "||ue==="  /"||ue===",,"||ue===",,,"){const ye=[+A,Ei(+$,0,100),Ei(+H,0,100),ie?Fi(+ie,ce):1];if(bs(ye))return function([Te,Je,Ve,Ze]){function ot(wt){const Gt=(wt+Te/30)%12,Cn=Je*Math.min(Ve,1-Ve);return Ve-Cn*Math.max(-1,Math.min(Gt-3,9-Gt,1))}return Te=Nn(Te),Je/=100,Ve/=100,[ot(0),ot(8),ot(4),Ze]}(ye)}}}(c);return f?new yr(...f,!1):void 0}get rgb(){const{r:c,g:f,b:x,a:w}=this,T=w||1/0;return this.overwriteGetter("rgb",[c/T,f/T,x/T,w])}get hcl(){return this.overwriteGetter("hcl",function(c){const[f,x,w,T]=cr(c),j=Math.sqrt(x*x+w*w);return[Math.round(1e4*j)?Nn(Math.atan2(w,x)*Xn):NaN,j,f,T]}(this.rgb))}get lab(){return this.overwriteGetter("lab",cr(this.rgb))}overwriteGetter(c,f){return Object.defineProperty(this,c,{value:f}),f}toString(){const[c,f,x,w]=this.rgb;return`rgba(${[c,f,x].map(T=>Math.round(255*T)).join(",")},${w})`}}yr.black=new yr(0,0,0,1),yr.white=new yr(1,1,1,1),yr.transparent=new yr(0,0,0,0),yr.red=new yr(1,0,0,1);class sp{constructor(c,f,x){this.sensitivity=c?f?"variant":"case":f?"accent":"base",this.locale=x,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(c,f){return this.collator.compare(c,f)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Jc{constructor(c,f,x,w,T){this.text=c,this.image=f,this.scale=x,this.fontStack=w,this.textColor=T}}class Ds{constructor(c){this.sections=c}static fromString(c){return new Ds([new Jc(c,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(c=>c.text.length!==0||c.image&&c.image.name.length!==0)}static factory(c){return c instanceof Ds?c:Ds.fromString(c)}toString(){return this.sections.length===0?"":this.sections.map(c=>c.text).join("")}}class eo{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof eo)return c;if(typeof c=="number")return new eo([c,c,c,c]);if(Array.isArray(c)&&!(c.length<1||c.length>4)){for(const f of c)if(typeof f!="number")return;switch(c.length){case 1:c=[c[0],c[0],c[0],c[0]];break;case 2:c=[c[0],c[1],c[0],c[1]];break;case 3:c=[c[0],c[1],c[2],c[1]]}return new eo(c)}}toString(){return JSON.stringify(this.values)}}const yx=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class wo{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof wo)return c;if(Array.isArray(c)&&!(c.length<1)&&c.length%2==0){for(let f=0;f<c.length;f+=2){const x=c[f],w=c[f+1];if(typeof x!="string"||!yx.has(x)||!Array.isArray(w)||w.length!==2||typeof w[0]!="number"||typeof w[1]!="number")return}return new wo(c)}}toString(){return JSON.stringify(this.values)}}class Ls{constructor(c){this.name=c.name,this.available=c.available}toString(){return this.name}static fromString(c){return c?new Ls({name:c,available:!1}):null}}function eu(d,c,f,x){return typeof d=="number"&&d>=0&&d<=255&&typeof c=="number"&&c>=0&&c<=255&&typeof f=="number"&&f>=0&&f<=255?x===void 0||typeof x=="number"&&x>=0&&x<=1?null:`Invalid rgba value [${[d,c,f,x].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof x=="number"?[d,c,f,x]:[d,c,f]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function xc(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof yr||d instanceof sp||d instanceof Ds||d instanceof eo||d instanceof wo||d instanceof Ls)return!0;if(Array.isArray(d)){for(const c of d)if(!xc(c))return!1;return!0}if(typeof d=="object"){for(const c in d)if(!xc(d[c]))return!1;return!0}return!1}function Si(d){if(d===null)return ir;if(typeof d=="string")return _n;if(typeof d=="boolean")return Kt;if(typeof d=="number")return yt;if(d instanceof yr)return tr;if(d instanceof sp)return Wi;if(d instanceof Ds)return Rs;if(d instanceof eo)return Ui;if(d instanceof wo)return xe;if(d instanceof Ls)return vs;if(Array.isArray(d)){const c=d.length;let f;for(const x of d){const w=Si(x);if(f){if(f===w)continue;f=sn;break}f=w}return U(f||sn,c)}return qr}function Ju(d){const c=typeof d;return d===null?"":c==="string"||c==="number"||c==="boolean"?String(d):d instanceof yr||d instanceof Ds||d instanceof eo||d instanceof wo||d instanceof Ls?d.toString():JSON.stringify(d)}class Vo{constructor(c,f){this.type=c,this.value=f}static parse(c,f){if(c.length!==2)return f.error(`'literal' expression requires exactly one argument, but found ${c.length-1} instead.`);if(!xc(c[1]))return f.error("invalid value");const x=c[1];let w=Si(x);const T=f.expectedType;return w.kind!=="array"||w.N!==0||!T||T.kind!=="array"||typeof T.N=="number"&&T.N!==0||(w=T),new Vo(w,x)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class yi{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}}const ed={string:_n,number:yt,boolean:Kt,object:qr};class Wo{constructor(c,f){this.type=c,this.args=f}static parse(c,f){if(c.length<2)return f.error("Expected at least one argument.");let x,w=1;const T=c[0];if(T==="array"){let A,I;if(c.length>2){const $=c[1];if(typeof $!="string"||!($ in ed)||$==="object")return f.error('The item type argument of "array" must be one of string, number, boolean',1);A=ed[$],w++}else A=sn;if(c.length>3){if(c[2]!==null&&(typeof c[2]!="number"||c[2]<0||c[2]!==Math.floor(c[2])))return f.error('The length argument to "array" must be a positive integer literal',2);I=c[2],w++}x=U(A,I)}else{if(!ed[T])throw new Error(`Types doesn't contain name = ${T}`);x=ed[T]}const j=[];for(;w<c.length;w++){const A=f.parse(c[w],w,sn);if(!A)return null;j.push(A)}return new Wo(x,j)}evaluate(c){for(let f=0;f<this.args.length;f++){const x=this.args[f].evaluate(c);if(!pe(this.type,Si(x)))return x;if(f===this.args.length-1)throw new yi(`Expected value to be of type ${G(this.type)}, but found ${G(Si(x))} instead.`)}throw new Error}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const op={"to-boolean":Kt,"to-color":tr,"to-number":yt,"to-string":_n};class Uo{constructor(c,f){this.type=c,this.args=f}static parse(c,f){if(c.length<2)return f.error("Expected at least one argument.");const x=c[0];if(!op[x])throw new Error(`Can't parse ${x} as it is not part of the known types`);if((x==="to-boolean"||x==="to-string")&&c.length!==2)return f.error("Expected one argument.");const w=op[x],T=[];for(let j=1;j<c.length;j++){const A=f.parse(c[j],j,sn);if(!A)return null;T.push(A)}return new Uo(w,T)}evaluate(c){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(c);case"color":{let f,x;for(const w of this.args){if(f=w.evaluate(c),x=null,f instanceof yr)return f;if(typeof f=="string"){const T=c.parseColor(f);if(T)return T}else if(Array.isArray(f)&&(x=f.length<3||f.length>4?`Invalid rbga value ${JSON.stringify(f)}: expected an array containing either three or four numeric values.`:eu(f[0],f[1],f[2],f[3]),!x))return new yr(f[0]/255,f[1]/255,f[2]/255,f[3])}throw new yi(x||`Could not parse color from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"padding":{let f;for(const x of this.args){f=x.evaluate(c);const w=eo.parse(f);if(w)return w}throw new yi(`Could not parse padding from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"variableAnchorOffsetCollection":{let f;for(const x of this.args){f=x.evaluate(c);const w=wo.parse(f);if(w)return w}throw new yi(`Could not parse variableAnchorOffsetCollection from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"number":{let f=null;for(const x of this.args){if(f=x.evaluate(c),f===null)return 0;const w=Number(f);if(!isNaN(w))return w}throw new yi(`Could not convert ${JSON.stringify(f)} to number.`)}case"formatted":return Ds.fromString(Ju(this.args[0].evaluate(c)));case"resolvedImage":return Ls.fromString(Ju(this.args[0].evaluate(c)));default:return Ju(this.args[0].evaluate(c))}}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const td=["Unknown","Point","LineString","Polygon"];class tu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?td[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(c){let f=this._parseColorCache[c];return f||(f=this._parseColorCache[c]=yr.parse(c)),f}}class vc{constructor(c,f,x=[],w,T=new zt,j=[]){this.registry=c,this.path=x,this.key=x.map(A=>`[${A}]`).join(""),this.scope=T,this.errors=j,this.expectedType=w,this._isConstant=f}parse(c,f,x,w,T={}){return f?this.concat(f,x,w)._parse(c,T):this._parse(c,T)}_parse(c,f){function x(w,T,j){return j==="assert"?new Wo(T,[w]):j==="coerce"?new Uo(T,[w]):w}if(c!==null&&typeof c!="string"&&typeof c!="boolean"&&typeof c!="number"||(c=["literal",c]),Array.isArray(c)){if(c.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=c[0];if(typeof w!="string")return this.error(`Expression name must be a string, but found ${typeof w} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const T=this.registry[w];if(T){let j=T.parse(c,this);if(!j)return null;if(this.expectedType){const A=this.expectedType,I=j.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||I.kind!=="value")if(A.kind!=="color"&&A.kind!=="formatted"&&A.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string")if(A.kind!=="padding"||I.kind!=="value"&&I.kind!=="number"&&I.kind!=="array")if(A.kind!=="variableAnchorOffsetCollection"||I.kind!=="value"&&I.kind!=="array"){if(this.checkSubtype(A,I))return null}else j=x(j,A,f.typeAnnotation||"coerce");else j=x(j,A,f.typeAnnotation||"coerce");else j=x(j,A,f.typeAnnotation||"coerce");else j=x(j,A,f.typeAnnotation||"assert")}if(!(j instanceof Vo)&&j.type.kind!=="resolvedImage"&&this._isConstant(j)){const A=new tu;try{j=new Vo(j.type,j.evaluate(A))}catch(I){return this.error(I.message),null}}return j}return this.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(c===void 0?"'undefined' value invalid. Use null instead.":typeof c=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof c} instead.`)}concat(c,f,x){const w=typeof c=="number"?this.path.concat(c):this.path,T=x?this.scope.concat(x):this.scope;return new vc(this.registry,this._isConstant,w,f||null,T,this.errors)}error(c,...f){const x=`${this.key}${f.map(w=>`[${w}]`).join("")}`;this.errors.push(new pt(x,c))}checkSubtype(c,f){const x=pe(c,f);return x&&this.error(x),x}}class Al{constructor(c,f){this.type=f.type,this.bindings=[].concat(c),this.result=f}evaluate(c){return this.result.evaluate(c)}eachChild(c){for(const f of this.bindings)c(f[1]);c(this.result)}static parse(c,f){if(c.length<4)return f.error(`Expected at least 3 arguments, but found ${c.length-1} instead.`);const x=[];for(let T=1;T<c.length-1;T+=2){const j=c[T];if(typeof j!="string")return f.error(`Expected string, but found ${typeof j} instead.`,T);if(/[^a-zA-Z0-9_]/.test(j))return f.error("Variable names must contain only alphanumeric characters or '_'.",T);const A=f.parse(c[T+1],T+1);if(!A)return null;x.push([j,A])}const w=f.parse(c[c.length-1],c.length-1,f.expectedType,x);return w?new Al(x,w):null}outputDefined(){return this.result.outputDefined()}}class hr{constructor(c,f){this.type=f.type,this.name=c,this.boundExpression=f}static parse(c,f){if(c.length!==2||typeof c[1]!="string")return f.error("'var' expression requires exactly one string literal argument.");const x=c[1];return f.scope.has(x)?new hr(x,f.scope.get(x)):f.error(`Unknown variable "${x}". Make sure "${x}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(c){return this.boundExpression.evaluate(c)}eachChild(){}outputDefined(){return!1}}class ap{constructor(c,f,x){this.type=c,this.index=f,this.input=x}static parse(c,f){if(c.length!==3)return f.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const x=f.parse(c[1],1,yt),w=f.parse(c[2],2,U(f.expectedType||sn));return x&&w?new ap(w.type.itemType,x,w):null}evaluate(c){const f=this.index.evaluate(c),x=this.input.evaluate(c);if(f<0)throw new yi(`Array index out of bounds: ${f} < 0.`);if(f>=x.length)throw new yi(`Array index out of bounds: ${f} > ${x.length-1}.`);if(f!==Math.floor(f))throw new yi(`Array index must be an integer, but found ${f} instead.`);return x[f]}eachChild(c){c(this.index),c(this.input)}outputDefined(){return!1}}class lp{constructor(c,f){this.type=Kt,this.needle=c,this.haystack=f}static parse(c,f){if(c.length!==3)return f.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const x=f.parse(c[1],1,sn),w=f.parse(c[2],2,sn);return x&&w?Se(x.type,[Kt,_n,yt,ir,sn])?new lp(x,w):f.error(`Expected first argument to be of type boolean, string, number or null, but found ${G(x.type)} instead`):null}evaluate(c){const f=this.needle.evaluate(c),x=this.haystack.evaluate(c);if(!x)return!1;if(!Pe(f,["boolean","string","number","null"]))throw new yi(`Expected first argument to be of type boolean, string, number or null, but found ${G(Si(f))} instead.`);if(!Pe(x,["string","array"]))throw new yi(`Expected second argument to be of type array or string, but found ${G(Si(x))} instead.`);return x.indexOf(f)>=0}eachChild(c){c(this.needle),c(this.haystack)}outputDefined(){return!0}}class nu{constructor(c,f,x){this.type=yt,this.needle=c,this.haystack=f,this.fromIndex=x}static parse(c,f){if(c.length<=2||c.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const x=f.parse(c[1],1,sn),w=f.parse(c[2],2,sn);if(!x||!w)return null;if(!Se(x.type,[Kt,_n,yt,ir,sn]))return f.error(`Expected first argument to be of type boolean, string, number or null, but found ${G(x.type)} instead`);if(c.length===4){const T=f.parse(c[3],3,yt);return T?new nu(x,w,T):null}return new nu(x,w)}evaluate(c){const f=this.needle.evaluate(c),x=this.haystack.evaluate(c);if(!Pe(f,["boolean","string","number","null"]))throw new yi(`Expected first argument to be of type boolean, string, number or null, but found ${G(Si(f))} instead.`);let w;if(this.fromIndex&&(w=this.fromIndex.evaluate(c)),Pe(x,["string"])){const T=x.indexOf(f,w);return T===-1?-1:[...x.slice(0,T)].length}if(Pe(x,["array"]))return x.indexOf(f,w);throw new yi(`Expected second argument to be of type array or string, but found ${G(Si(x))} instead.`)}eachChild(c){c(this.needle),c(this.haystack),this.fromIndex&&c(this.fromIndex)}outputDefined(){return!1}}class nd{constructor(c,f,x,w,T,j){this.inputType=c,this.type=f,this.input=x,this.cases=w,this.outputs=T,this.otherwise=j}static parse(c,f){if(c.length<5)return f.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if(c.length%2!=1)return f.error("Expected an even number of arguments.");let x,w;f.expectedType&&f.expectedType.kind!=="value"&&(w=f.expectedType);const T={},j=[];for(let $=2;$<c.length-1;$+=2){let V=c[$];const H=c[$+1];Array.isArray(V)||(V=[V]);const ee=f.concat($);if(V.length===0)return ee.error("Expected at least one branch label.");for(const ce of V){if(typeof ce!="number"&&typeof ce!="string")return ee.error("Branch labels must be numbers or strings.");if(typeof ce=="number"&&Math.abs(ce)>Number.MAX_SAFE_INTEGER)return ee.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ce=="number"&&Math.floor(ce)!==ce)return ee.error("Numeric branch labels must be integer values.");if(x){if(ee.checkSubtype(x,Si(ce)))return null}else x=Si(ce);if(T[String(ce)]!==void 0)return ee.error("Branch labels must be unique.");T[String(ce)]=j.length}const ie=f.parse(H,$,w);if(!ie)return null;w=w||ie.type,j.push(ie)}const A=f.parse(c[1],1,sn);if(!A)return null;const I=f.parse(c[c.length-1],c.length-1,w);return I?A.type.kind!=="value"&&f.concat(1).checkSubtype(x,A.type)?null:new nd(x,w,A,T,j,I):null}evaluate(c){const f=this.input.evaluate(c);return(Si(f)===this.inputType&&this.outputs[this.cases[f]]||this.otherwise).evaluate(c)}eachChild(c){c(this.input),this.outputs.forEach(c),c(this.otherwise)}outputDefined(){return this.outputs.every(c=>c.outputDefined())&&this.otherwise.outputDefined()}}class rd{constructor(c,f,x){this.type=c,this.branches=f,this.otherwise=x}static parse(c,f){if(c.length<4)return f.error(`Expected at least 3 arguments, but found only ${c.length-1}.`);if(c.length%2!=0)return f.error("Expected an odd number of arguments.");let x;f.expectedType&&f.expectedType.kind!=="value"&&(x=f.expectedType);const w=[];for(let j=1;j<c.length-1;j+=2){const A=f.parse(c[j],j,Kt);if(!A)return null;const I=f.parse(c[j+1],j+1,x);if(!I)return null;w.push([A,I]),x=x||I.type}const T=f.parse(c[c.length-1],c.length-1,x);if(!T)return null;if(!x)throw new Error("Can't infer output type");return new rd(x,w,T)}evaluate(c){for(const[f,x]of this.branches)if(f.evaluate(c))return x.evaluate(c);return this.otherwise.evaluate(c)}eachChild(c){for(const[f,x]of this.branches)c(f),c(x);c(this.otherwise)}outputDefined(){return this.branches.every(([c,f])=>f.outputDefined())&&this.otherwise.outputDefined()}}class eh{constructor(c,f,x,w){this.type=c,this.input=f,this.beginIndex=x,this.endIndex=w}static parse(c,f){if(c.length<=2||c.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const x=f.parse(c[1],1,sn),w=f.parse(c[2],2,yt);if(!x||!w)return null;if(!Se(x.type,[U(sn),_n,sn]))return f.error(`Expected first argument to be of type array or string, but found ${G(x.type)} instead`);if(c.length===4){const T=f.parse(c[3],3,yt);return T?new eh(x.type,x,w,T):null}return new eh(x.type,x,w)}evaluate(c){const f=this.input.evaluate(c),x=this.beginIndex.evaluate(c);let w;if(this.endIndex&&(w=this.endIndex.evaluate(c)),Pe(f,["string"]))return[...f].slice(x,w).join("");if(Pe(f,["array"]))return f.slice(x,w);throw new yi(`Expected first argument to be of type array or string, but found ${G(Si(f))} instead.`)}eachChild(c){c(this.input),c(this.beginIndex),this.endIndex&&c(this.endIndex)}outputDefined(){return!1}}function id(d,c){const f=d.length-1;let x,w,T=0,j=f,A=0;for(;T<=j;)if(A=Math.floor((T+j)/2),x=d[A],w=d[A+1],x<=c){if(A===f||c<w)return A;T=A+1}else{if(!(x>c))throw new yi("Input is not a number.");j=A-1}return 0}class El{constructor(c,f,x){this.type=c,this.input=f,this.labels=[],this.outputs=[];for(const[w,T]of x)this.labels.push(w),this.outputs.push(T)}static parse(c,f){if(c.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return f.error("Expected an even number of arguments.");const x=f.parse(c[1],1,yt);if(!x)return null;const w=[];let T=null;f.expectedType&&f.expectedType.kind!=="value"&&(T=f.expectedType);for(let j=1;j<c.length;j+=2){const A=j===1?-1/0:c[j],I=c[j+1],$=j,V=j+1;if(typeof A!="number")return f.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(w.length&&w[w.length-1][0]>=A)return f.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',$);const H=f.parse(I,V,T);if(!H)return null;T=T||H.type,w.push([A,H])}return new El(T,x,w)}evaluate(c){const f=this.labels,x=this.outputs;if(f.length===1)return x[0].evaluate(c);const w=this.input.evaluate(c);if(w<=f[0])return x[0].evaluate(c);const T=f.length;return w>=f[T-1]?x[T-1].evaluate(c):x[id(f,w)].evaluate(c)}eachChild(c){c(this.input);for(const f of this.outputs)c(f)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function ag(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var xx=lg;function lg(d,c,f,x){this.cx=3*d,this.bx=3*(f-d)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(x-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=d,this.p1y=c,this.p2x=f,this.p2y=x}lg.prototype={sampleCurveX:function(d){return((this.ax*d+this.bx)*d+this.cx)*d},sampleCurveY:function(d){return((this.ay*d+this.by)*d+this.cy)*d},sampleCurveDerivativeX:function(d){return(3*this.ax*d+2*this.bx)*d+this.cx},solveCurveX:function(d,c){if(c===void 0&&(c=1e-6),d<0)return 0;if(d>1)return 1;for(var f=d,x=0;x<8;x++){var w=this.sampleCurveX(f)-d;if(Math.abs(w)<c)return f;var T=this.sampleCurveDerivativeX(f);if(Math.abs(T)<1e-6)break;f-=w/T}var j=0,A=1;for(f=d,x=0;x<20&&(w=this.sampleCurveX(f),!(Math.abs(w-d)<c));x++)d>w?j=f:A=f,f=.5*(A-j)+j;return f},solve:function(d,c){return this.sampleCurveY(this.solveCurveX(d,c))}};var sd=ag(xx);function Za(d,c,f){return d+f*(c-d)}function bc(d,c,f){return d.map((x,w)=>Za(x,c[w],f))}const is={number:Za,color:function(d,c,f,x="rgb"){switch(x){case"rgb":{const[w,T,j,A]=bc(d.rgb,c.rgb,f);return new yr(w,T,j,A,!1)}case"hcl":{const[w,T,j,A]=d.hcl,[I,$,V,H]=c.hcl;let ee,ie;if(isNaN(w)||isNaN(I))isNaN(w)?isNaN(I)?ee=NaN:(ee=I,j!==1&&j!==0||(ie=$)):(ee=w,V!==1&&V!==0||(ie=T));else{let Je=I-w;I>w&&Je>180?Je-=360:I<w&&w-I>180&&(Je+=360),ee=w+f*Je}const[ce,ue,ye,Te]=function([Je,Ve,Ze,ot]){return Je=isNaN(Je)?0:Je*dn,oi([Ze,Math.cos(Je)*Ve,Math.sin(Je)*Ve,ot])}([ee,ie??Za(T,$,f),Za(j,V,f),Za(A,H,f)]);return new yr(ce,ue,ye,Te,!1)}case"lab":{const[w,T,j,A]=oi(bc(d.lab,c.lab,f));return new yr(w,T,j,A,!1)}}},array:bc,padding:function(d,c,f){return new eo(bc(d.values,c.values,f))},variableAnchorOffsetCollection:function(d,c,f){const x=d.values,w=c.values;if(x.length!==w.length)throw new yi(`Cannot interpolate values of different length. from: ${d.toString()}, to: ${c.toString()}`);const T=[];for(let j=0;j<x.length;j+=2){if(x[j]!==w[j])throw new yi(`Cannot interpolate values containing mismatched anchors. from[${j}]: ${x[j]}, to[${j}]: ${w[j]}`);T.push(x[j]);const[A,I]=x[j+1],[$,V]=w[j+1];T.push([Za(A,$,f),Za(I,V,f)])}return new wo(T)}};class Fs{constructor(c,f,x,w,T){this.type=c,this.operator=f,this.interpolation=x,this.input=w,this.labels=[],this.outputs=[];for(const[j,A]of T)this.labels.push(j),this.outputs.push(A)}static interpolationFactor(c,f,x,w){let T=0;if(c.name==="exponential")T=th(f,c.base,x,w);else if(c.name==="linear")T=th(f,1,x,w);else if(c.name==="cubic-bezier"){const j=c.controlPoints;T=new sd(j[0],j[1],j[2],j[3]).solve(th(f,1,x,w))}return T}static parse(c,f){let[x,w,T,...j]=c;if(!Array.isArray(w)||w.length===0)return f.error("Expected an interpolation type expression.",1);if(w[0]==="linear")w={name:"linear"};else if(w[0]==="exponential"){const $=w[1];if(typeof $!="number")return f.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:$}}else{if(w[0]!=="cubic-bezier")return f.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const $=w.slice(1);if($.length!==4||$.some(V=>typeof V!="number"||V<0||V>1))return f.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:$}}}if(c.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return f.error("Expected an even number of arguments.");if(T=f.parse(T,2,yt),!T)return null;const A=[];let I=null;x==="interpolate-hcl"||x==="interpolate-lab"?I=tr:f.expectedType&&f.expectedType.kind!=="value"&&(I=f.expectedType);for(let $=0;$<j.length;$+=2){const V=j[$],H=j[$+1],ee=$+3,ie=$+4;if(typeof V!="number")return f.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ee);if(A.length&&A[A.length-1][0]>=V)return f.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ee);const ce=f.parse(H,ie,I);if(!ce)return null;I=I||ce.type,A.push([V,ce])}return qe(I,yt)||qe(I,tr)||qe(I,Ui)||qe(I,xe)||qe(I,U(yt))?new Fs(I,x,w,T,A):f.error(`Type ${G(I)} is not interpolatable.`)}evaluate(c){const f=this.labels,x=this.outputs;if(f.length===1)return x[0].evaluate(c);const w=this.input.evaluate(c);if(w<=f[0])return x[0].evaluate(c);const T=f.length;if(w>=f[T-1])return x[T-1].evaluate(c);const j=id(f,w),A=Fs.interpolationFactor(this.interpolation,w,f[j],f[j+1]),I=x[j].evaluate(c),$=x[j+1].evaluate(c);switch(this.operator){case"interpolate":return is[this.type.kind](I,$,A);case"interpolate-hcl":return is.color(I,$,A,"hcl");case"interpolate-lab":return is.color(I,$,A,"lab")}}eachChild(c){c(this.input);for(const f of this.outputs)c(f)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function th(d,c,f,x){const w=x-f,T=d-f;return w===0?0:c===1?T/w:(Math.pow(c,T)-1)/(Math.pow(c,w)-1)}class ru{constructor(c,f){this.type=c,this.args=f}static parse(c,f){if(c.length<2)return f.error("Expectected at least one argument.");let x=null;const w=f.expectedType;w&&w.kind!=="value"&&(x=w);const T=[];for(const A of c.slice(1)){const I=f.parse(A,1+T.length,x,void 0,{typeAnnotation:"omit"});if(!I)return null;x=x||I.type,T.push(I)}if(!x)throw new Error("No output type");const j=w&&T.some(A=>pe(w,A.type));return new ru(j?sn:x,T)}evaluate(c){let f,x=null,w=0;for(const T of this.args)if(w++,x=T.evaluate(c),x&&x instanceof Ls&&!x.available&&(f||(f=x.name),x=null,w===this.args.length&&(x=f)),x!==null)break;return x}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}function nh(d,c){return d==="=="||d==="!="?c.kind==="boolean"||c.kind==="string"||c.kind==="number"||c.kind==="null"||c.kind==="value":c.kind==="string"||c.kind==="number"||c.kind==="value"}function zl(d,c,f,x){return x.compare(c,f)===0}function fa(d,c,f){const x=d!=="=="&&d!=="!=";return class PH{constructor(T,j,A){this.type=Kt,this.lhs=T,this.rhs=j,this.collator=A,this.hasUntypedArgument=T.type.kind==="value"||j.type.kind==="value"}static parse(T,j){if(T.length!==3&&T.length!==4)return j.error("Expected two or three arguments.");const A=T[0];let I=j.parse(T[1],1,sn);if(!I)return null;if(!nh(A,I.type))return j.concat(1).error(`"${A}" comparisons are not supported for type '${G(I.type)}'.`);let $=j.parse(T[2],2,sn);if(!$)return null;if(!nh(A,$.type))return j.concat(2).error(`"${A}" comparisons are not supported for type '${G($.type)}'.`);if(I.type.kind!==$.type.kind&&I.type.kind!=="value"&&$.type.kind!=="value")return j.error(`Cannot compare types '${G(I.type)}' and '${G($.type)}'.`);x&&(I.type.kind==="value"&&$.type.kind!=="value"?I=new Wo($.type,[I]):I.type.kind!=="value"&&$.type.kind==="value"&&($=new Wo(I.type,[$])));let V=null;if(T.length===4){if(I.type.kind!=="string"&&$.type.kind!=="string"&&I.type.kind!=="value"&&$.type.kind!=="value")return j.error("Cannot use collator to compare non-string types.");if(V=j.parse(T[3],3,Wi),!V)return null}return new PH(I,$,V)}evaluate(T){const j=this.lhs.evaluate(T),A=this.rhs.evaluate(T);if(x&&this.hasUntypedArgument){const I=Si(j),$=Si(A);if(I.kind!==$.kind||I.kind!=="string"&&I.kind!=="number")throw new yi(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${I.kind}, ${$.kind}) instead.`)}if(this.collator&&!x&&this.hasUntypedArgument){const I=Si(j),$=Si(A);if(I.kind!=="string"||$.kind!=="string")return c(T,j,A)}return this.collator?f(T,j,A,this.collator.evaluate(T)):c(T,j,A)}eachChild(T){T(this.lhs),T(this.rhs),this.collator&&T(this.collator)}outputDefined(){return!0}}}const vx=fa("==",function(d,c,f){return c===f},zl),cp=fa("!=",function(d,c,f){return c!==f},function(d,c,f,x){return!zl(0,c,f,x)}),cg=fa("<",function(d,c,f){return c<f},function(d,c,f,x){return x.compare(c,f)<0}),ug=fa(">",function(d,c,f){return c>f},function(d,c,f,x){return x.compare(c,f)>0}),bx=fa("<=",function(d,c,f){return c<=f},function(d,c,f,x){return x.compare(c,f)<=0}),hg=fa(">=",function(d,c,f){return c>=f},function(d,c,f,x){return x.compare(c,f)>=0});class iu{constructor(c,f,x){this.type=Wi,this.locale=x,this.caseSensitive=c,this.diacriticSensitive=f}static parse(c,f){if(c.length!==2)return f.error("Expected one argument.");const x=c[1];if(typeof x!="object"||Array.isArray(x))return f.error("Collator options argument must be an object.");const w=f.parse(x["case-sensitive"]!==void 0&&x["case-sensitive"],1,Kt);if(!w)return null;const T=f.parse(x["diacritic-sensitive"]!==void 0&&x["diacritic-sensitive"],1,Kt);if(!T)return null;let j=null;return x.locale&&(j=f.parse(x.locale,1,_n),!j)?null:new iu(w,T,j)}evaluate(c){return new sp(this.caseSensitive.evaluate(c),this.diacriticSensitive.evaluate(c),this.locale?this.locale.evaluate(c):null)}eachChild(c){c(this.caseSensitive),c(this.diacriticSensitive),this.locale&&c(this.locale)}outputDefined(){return!1}}class up{constructor(c,f,x,w,T){this.type=_n,this.number=c,this.locale=f,this.currency=x,this.minFractionDigits=w,this.maxFractionDigits=T}static parse(c,f){if(c.length!==3)return f.error("Expected two arguments.");const x=f.parse(c[1],1,yt);if(!x)return null;const w=c[2];if(typeof w!="object"||Array.isArray(w))return f.error("NumberFormat options argument must be an object.");let T=null;if(w.locale&&(T=f.parse(w.locale,1,_n),!T))return null;let j=null;if(w.currency&&(j=f.parse(w.currency,1,_n),!j))return null;let A=null;if(w["min-fraction-digits"]&&(A=f.parse(w["min-fraction-digits"],1,yt),!A))return null;let I=null;return w["max-fraction-digits"]&&(I=f.parse(w["max-fraction-digits"],1,yt),!I)?null:new up(x,T,j,A,I)}evaluate(c){return new Intl.NumberFormat(this.locale?this.locale.evaluate(c):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(c):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(c):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(c):void 0}).format(this.number.evaluate(c))}eachChild(c){c(this.number),this.locale&&c(this.locale),this.currency&&c(this.currency),this.minFractionDigits&&c(this.minFractionDigits),this.maxFractionDigits&&c(this.maxFractionDigits)}outputDefined(){return!1}}class ve{constructor(c){this.type=Rs,this.sections=c}static parse(c,f){if(c.length<2)return f.error("Expected at least one argument.");const x=c[1];if(!Array.isArray(x)&&typeof x=="object")return f.error("First argument must be an image or text section.");const w=[];let T=!1;for(let j=1;j<=c.length-1;++j){const A=c[j];if(T&&typeof A=="object"&&!Array.isArray(A)){T=!1;let I=null;if(A["font-scale"]&&(I=f.parse(A["font-scale"],1,yt),!I))return null;let $=null;if(A["text-font"]&&($=f.parse(A["text-font"],1,U(_n)),!$))return null;let V=null;if(A["text-color"]&&(V=f.parse(A["text-color"],1,tr),!V))return null;const H=w[w.length-1];H.scale=I,H.font=$,H.textColor=V}else{const I=f.parse(c[j],1,sn);if(!I)return null;const $=I.type.kind;if($!=="string"&&$!=="value"&&$!=="null"&&$!=="resolvedImage")return f.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");T=!0,w.push({content:I,scale:null,font:null,textColor:null})}}return new ve(w)}evaluate(c){return new Ds(this.sections.map(f=>{const x=f.content.evaluate(c);return Si(x)===vs?new Jc("",x,null,null,null):new Jc(Ju(x),null,f.scale?f.scale.evaluate(c):null,f.font?f.font.evaluate(c).join(","):null,f.textColor?f.textColor.evaluate(c):null)}))}eachChild(c){for(const f of this.sections)c(f.content),f.scale&&c(f.scale),f.font&&c(f.font),f.textColor&&c(f.textColor)}outputDefined(){return!1}}class He{constructor(c){this.type=vs,this.input=c}static parse(c,f){if(c.length!==2)return f.error("Expected two arguments.");const x=f.parse(c[1],1,_n);return x?new He(x):f.error("No image name provided.")}evaluate(c){const f=this.input.evaluate(c),x=Ls.fromString(f);return x&&c.availableImages&&(x.available=c.availableImages.indexOf(f)>-1),x}eachChild(c){c(this.input)}outputDefined(){return!1}}class lt{constructor(c){this.type=yt,this.input=c}static parse(c,f){if(c.length!==2)return f.error(`Expected 1 argument, but found ${c.length-1} instead.`);const x=f.parse(c[1],1);return x?x.type.kind!=="array"&&x.type.kind!=="string"&&x.type.kind!=="value"?f.error(`Expected argument of type string or array, but found ${G(x.type)} instead.`):new lt(x):null}evaluate(c){const f=this.input.evaluate(c);if(typeof f=="string")return[...f].length;if(Array.isArray(f))return f.length;throw new yi(`Expected value to be of type string or array, but found ${G(Si(f))} instead.`)}eachChild(c){c(this.input)}outputDefined(){return!1}}const on=8192;function dr(d,c){const f=(180+d[0])/360,x=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,w=Math.pow(2,c.z);return[Math.round(f*w*on),Math.round(x*w*on)]}function Er(d,c){const f=Math.pow(2,c.z);return[(w=(d[0]/on+c.x)/f,360*w-180),(x=(d[1]/on+c.y)/f,360/Math.PI*Math.atan(Math.exp((180-360*x)*Math.PI/180))-90)];var x,w}function jr(d,c){d[0]=Math.min(d[0],c[0]),d[1]=Math.min(d[1],c[1]),d[2]=Math.max(d[2],c[0]),d[3]=Math.max(d[3],c[1])}function Jn(d,c){return!(d[0]<=c[0]||d[2]>=c[2]||d[1]<=c[1]||d[3]>=c[3])}function Tn(d,c,f){const x=d[0]-c[0],w=d[1]-c[1],T=d[0]-f[0],j=d[1]-f[1];return x*j-T*w==0&&x*T<=0&&w*j<=0}function Bs(d,c,f,x){return(w=[x[0]-f[0],x[1]-f[1]])[0]*(T=[c[0]-d[0],c[1]-d[1]])[1]-w[1]*T[0]!=0&&!(!V_(d,c,f,x)||!V_(f,x,d,c));var w,T}function to(d,c,f){for(const x of f)for(let w=0;w<x.length-1;++w)if(Bs(d,c,x[w],x[w+1]))return!0;return!1}function pa(d,c,f=!1){let x=!1;for(const A of c)for(let I=0;I<A.length-1;I++){if(Tn(d,A[I],A[I+1]))return f;(T=A[I])[1]>(w=d)[1]!=(j=A[I+1])[1]>w[1]&&w[0]<(j[0]-T[0])*(w[1]-T[1])/(j[1]-T[1])+T[0]&&(x=!x)}var w,T,j;return x}function hp(d,c){for(const f of c)if(pa(d,f))return!0;return!1}function od(d,c){for(const f of d)if(!pa(f,c))return!1;for(let f=0;f<d.length-1;++f)if(to(d[f],d[f+1],c))return!1;return!0}function dg(d,c){for(const f of c)if(od(d,f))return!0;return!1}function V_(d,c,f,x){const w=x[0]-f[0],T=x[1]-f[1],j=(d[0]-f[0])*T-w*(d[1]-f[1]),A=(c[0]-f[0])*T-w*(c[1]-f[1]);return j>0&&A<0||j<0&&A>0}function _x(d,c,f){const x=[];for(let w=0;w<d.length;w++){const T=[];for(let j=0;j<d[w].length;j++){const A=dr(d[w][j],f);jr(c,A),T.push(A)}x.push(T)}return x}function W_(d,c,f){const x=[];for(let w=0;w<d.length;w++){const T=_x(d[w],c,f);x.push(T)}return x}function U_(d,c,f,x){if(d[0]<f[0]||d[0]>f[2]){const w=.5*x;let T=d[0]-f[0]>w?-x:f[0]-d[0]>w?x:0;T===0&&(T=d[0]-f[2]>w?-x:f[2]-d[0]>w?x:0),d[0]+=T}jr(c,d)}function q_(d,c,f,x){const w=Math.pow(2,x.z)*on,T=[x.x*on,x.y*on],j=[];for(const A of d)for(const I of A){const $=[I.x+T[0],I.y+T[1]];U_($,c,f,w),j.push($)}return j}function Q_(d,c,f,x){const w=Math.pow(2,x.z)*on,T=[x.x*on,x.y*on],j=[];for(const I of d){const $=[];for(const V of I){const H=[V.x+T[0],V.y+T[1]];jr(c,H),$.push(H)}j.push($)}if(c[2]-c[0]<=w/2){(A=c)[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(const I of j)for(const $ of I)U_($,c,f,w)}var A;return j}class rh{constructor(c,f){this.type=Kt,this.geojson=c,this.geometries=f}static parse(c,f){if(c.length!==2)return f.error(`'within' expression requires exactly one argument, but found ${c.length-1} instead.`);if(xc(c[1])){const x=c[1];if(x.type==="FeatureCollection"){const w=[];for(const T of x.features){const{type:j,coordinates:A}=T.geometry;j==="Polygon"&&w.push(A),j==="MultiPolygon"&&w.push(...A)}if(w.length)return new rh(x,{type:"MultiPolygon",coordinates:w})}else if(x.type==="Feature"){const w=x.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new rh(x,x.geometry)}else if(x.type==="Polygon"||x.type==="MultiPolygon")return new rh(x,x)}return f.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return function(f,x){const w=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],j=f.canonicalID();if(x.type==="Polygon"){const A=_x(x.coordinates,T,j),I=q_(f.geometry(),w,T,j);if(!Jn(w,T))return!1;for(const $ of I)if(!pa($,A))return!1}if(x.type==="MultiPolygon"){const A=W_(x.coordinates,T,j),I=q_(f.geometry(),w,T,j);if(!Jn(w,T))return!1;for(const $ of I)if(!hp($,A))return!1}return!0}(c,this.geometries);if(c.geometryType()==="LineString")return function(f,x){const w=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],j=f.canonicalID();if(x.type==="Polygon"){const A=_x(x.coordinates,T,j),I=Q_(f.geometry(),w,T,j);if(!Jn(w,T))return!1;for(const $ of I)if(!od($,A))return!1}if(x.type==="MultiPolygon"){const A=W_(x.coordinates,T,j),I=Q_(f.geometry(),w,T,j);if(!Jn(w,T))return!1;for(const $ of I)if(!dg($,A))return!1}return!0}(c,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let H_=class{constructor(d=[],c=(f,x)=>f<x?-1:f>x?1:0){if(this.data=d,this.length=this.data.length,this.compare=c,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(d){this.data.push(d),this._up(this.length++)}pop(){if(this.length===0)return;const d=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),d}peek(){return this.data[0]}_up(d){const{data:c,compare:f}=this,x=c[d];for(;d>0;){const w=d-1>>1,T=c[w];if(f(x,T)>=0)break;c[d]=T,d=w}c[d]=x}_down(d){const{data:c,compare:f}=this,x=this.length>>1,w=c[d];for(;d<x;){let T=1+(d<<1);const j=T+1;if(j<this.length&&f(c[j],c[T])<0&&(T=j),f(c[T],w)>=0)break;c[d]=c[T],d=T}c[d]=w}};function UT(d,c,f,x,w){G_(d,c,f,x||d.length-1,w||qT)}function G_(d,c,f,x,w){for(;x>f;){if(x-f>600){var T=x-f+1,j=c-f+1,A=Math.log(T),I=.5*Math.exp(2*A/3),$=.5*Math.sqrt(A*I*(T-I)/T)*(j-T/2<0?-1:1);G_(d,c,Math.max(f,Math.floor(c-j*I/T+$)),Math.min(x,Math.floor(c+(T-j)*I/T+$)),w)}var V=d[c],H=f,ee=x;for(dp(d,f,c),w(d[x],V)>0&&dp(d,f,x);H<ee;){for(dp(d,H,ee),H++,ee--;w(d[H],V)<0;)H++;for(;w(d[ee],V)>0;)ee--}w(d[f],V)===0?dp(d,f,ee):dp(d,++ee,x),ee<=c&&(f=ee+1),c<=ee&&(x=ee-1)}}function dp(d,c,f){var x=d[c];d[c]=d[f],d[f]=x}function qT(d,c){return d<c?-1:d>c?1:0}function fg(d,c){if(d.length<=1)return[d];const f=[];let x,w;for(const T of d){const j=HT(T);j!==0&&(T.area=Math.abs(j),w===void 0&&(w=j<0),w===j<0?(x&&f.push(x),x=[T]):x.push(T))}if(x&&f.push(x),c>1)for(let T=0;T<f.length;T++)f[T].length<=c||(UT(f[T],c,1,f[T].length-1,QT),f[T]=f[T].slice(0,c));return f}function QT(d,c){return c.area-d.area}function HT(d){let c=0;for(let f,x,w=0,T=d.length,j=T-1;w<T;j=w++)f=d[w],x=d[j],c+=(x.x-f.x)*(f.y+x.y);return c}const X_=1/298.257223563,K_=X_*(2-X_),Z_=Math.PI/180;class wx{constructor(c){const f=6378.137*Z_*1e3,x=Math.cos(c*Z_),w=1/(1-K_*(1-x*x)),T=Math.sqrt(w);this.kx=f*T*x,this.ky=f*T*w*(1-K_)}distance(c,f){const x=this.wrap(c[0]-f[0])*this.kx,w=(c[1]-f[1])*this.ky;return Math.sqrt(x*x+w*w)}pointOnLine(c,f){let x,w,T,j,A=1/0;for(let I=0;I<c.length-1;I++){let $=c[I][0],V=c[I][1],H=this.wrap(c[I+1][0]-$)*this.kx,ee=(c[I+1][1]-V)*this.ky,ie=0;H===0&&ee===0||(ie=(this.wrap(f[0]-$)*this.kx*H+(f[1]-V)*this.ky*ee)/(H*H+ee*ee),ie>1?($=c[I+1][0],V=c[I+1][1]):ie>0&&($+=H/this.kx*ie,V+=ee/this.ky*ie)),H=this.wrap(f[0]-$)*this.kx,ee=(f[1]-V)*this.ky;const ce=H*H+ee*ee;ce<A&&(A=ce,x=$,w=V,T=I,j=ie)}return{point:[x,w],index:T,t:Math.max(0,Math.min(1,j))}}wrap(c){for(;c<-180;)c+=360;for(;c>180;)c-=360;return c}}function Y_(d,c){return c[0]-d[0]}function pg(d){return d[1]-d[0]+1}function _c(d,c){return d[1]>=d[0]&&d[1]<c}function Sx(d,c){if(d[0]>d[1])return[null,null];const f=pg(d);if(c){if(f===2)return[d,null];const w=Math.floor(f/2);return[[d[0],d[0]+w],[d[0]+w,d[1]]]}if(f===1)return[d,null];const x=Math.floor(f/2)-1;return[[d[0],d[0]+x],[d[0]+x+1,d[1]]]}function kx(d,c){if(!_c(c,d.length))return[1/0,1/0,-1/0,-1/0];const f=[1/0,1/0,-1/0,-1/0];for(let x=c[0];x<=c[1];++x)jr(f,d[x]);return f}function Cx(d){const c=[1/0,1/0,-1/0,-1/0];for(const f of d)for(const x of f)jr(c,x);return c}function mg(d){return d[0]!==-1/0&&d[1]!==-1/0&&d[2]!==1/0&&d[3]!==1/0}function Tx(d,c,f){if(!mg(d)||!mg(c))return NaN;let x=0,w=0;return d[2]<c[0]&&(x=c[0]-d[2]),d[0]>c[2]&&(x=d[0]-c[2]),d[1]>c[3]&&(w=d[1]-c[3]),d[3]<c[1]&&(w=c[1]-d[3]),f.distance([0,0],[x,w])}function ih(d,c,f){const x=f.pointOnLine(c,d);return f.distance(d,x.point)}function jx(d,c,f,x,w){const T=Math.min(ih(d,[f,x],w),ih(c,[f,x],w)),j=Math.min(ih(f,[d,c],w),ih(x,[d,c],w));return Math.min(T,j)}function GT(d,c,f,x,w){if(!_c(c,d.length)||!_c(x,f.length))return 1/0;let T=1/0;for(let j=c[0];j<c[1];++j){const A=d[j],I=d[j+1];for(let $=x[0];$<x[1];++$){const V=f[$],H=f[$+1];if(Bs(A,I,V,H))return 0;T=Math.min(T,jx(A,I,V,H,w))}}return T}function ki(d,c,f,x,w){if(!_c(c,d.length)||!_c(x,f.length))return NaN;let T=1/0;for(let j=c[0];j<=c[1];++j)for(let A=x[0];A<=x[1];++A)if(T=Math.min(T,w.distance(d[j],f[A])),T===0)return T;return T}function XT(d,c,f){if(pa(d,c,!0))return 0;let x=1/0;for(const w of c){const T=w[0],j=w[w.length-1];if(T!==j&&(x=Math.min(x,ih(d,[j,T],f)),x===0))return x;const A=f.pointOnLine(w,d);if(x=Math.min(x,f.distance(d,A.point)),x===0)return x}return x}function Kn(d,c,f,x){if(!_c(c,d.length))return NaN;for(let T=c[0];T<=c[1];++T)if(pa(d[T],f,!0))return 0;let w=1/0;for(let T=c[0];T<c[1];++T){const j=d[T],A=d[T+1];for(const I of f)for(let $=0,V=I.length,H=V-1;$<V;H=$++){const ee=I[H],ie=I[$];if(Bs(j,A,ee,ie))return 0;w=Math.min(w,jx(j,A,ee,ie,x))}}return w}function gg(d,c){for(const f of d)for(const x of f)if(pa(x,c,!0))return!0;return!1}function Xr(d,c,f,x=1/0){const w=Cx(d),T=Cx(c);if(x!==1/0&&Tx(w,T,f)>=x)return x;if(Jn(w,T)){if(gg(d,c))return 0}else if(gg(c,d))return 0;let j=1/0;for(const A of d)for(let I=0,$=A.length,V=$-1;I<$;V=I++){const H=A[V],ee=A[I];for(const ie of c)for(let ce=0,ue=ie.length,ye=ue-1;ce<ue;ye=ce++){const Te=ie[ye],Je=ie[ce];if(Bs(H,ee,Te,Je))return 0;j=Math.min(j,jx(H,ee,Te,Je,f))}}return j}function Rr(d,c,f,x,w,T){if(!T)return;const j=Tx(kx(x,T),w,f);j<c&&d.push([j,T,[0,0]])}function sh(d,c,f,x,w,T,j){if(!T||!j)return;const A=Tx(kx(x,T),kx(w,j),f);A<c&&d.push([A,T,j])}function fp(d,c,f,x,w=1/0){let T=Math.min(x.distance(d[0],f[0][0]),w);if(T===0)return T;const j=new H_([[0,[0,d.length-1],[0,0]]],Y_),A=Cx(f);for(;j.length>0;){const I=j.pop();if(I[0]>=T)continue;const $=I[1],V=c?50:100;if(pg($)<=V){if(!_c($,d.length))return NaN;if(c){const H=Kn(d,$,f,x);if(isNaN(H)||H===0)return H;T=Math.min(T,H)}else for(let H=$[0];H<=$[1];++H){const ee=XT(d[H],f,x);if(T=Math.min(T,ee),T===0)return 0}}else{const H=Sx($,c);Rr(j,T,x,d,A,H[0]),Rr(j,T,x,d,A,H[1])}}return T}function pp(d,c,f,x,w,T=1/0){let j=Math.min(T,w.distance(d[0],f[0]));if(j===0)return j;const A=new H_([[0,[0,d.length-1],[0,f.length-1]]],Y_);for(;A.length>0;){const I=A.pop();if(I[0]>=j)continue;const $=I[1],V=I[2],H=c?50:100,ee=x?50:100;if(pg($)<=H&&pg(V)<=ee){if(!_c($,d.length)&&_c(V,f.length))return NaN;let ie;if(c&&x)ie=GT(d,$,f,V,w),j=Math.min(j,ie);else if(c&&!x){const ce=d.slice($[0],$[1]+1);for(let ue=V[0];ue<=V[1];++ue)if(ie=ih(f[ue],ce,w),j=Math.min(j,ie),j===0)return j}else if(!c&&x){const ce=f.slice(V[0],V[1]+1);for(let ue=$[0];ue<=$[1];++ue)if(ie=ih(d[ue],ce,w),j=Math.min(j,ie),j===0)return j}else ie=ki(d,$,f,V,w),j=Math.min(j,ie)}else{const ie=Sx($,c),ce=Sx(V,x);sh(A,j,w,d,f,ie[0],ce[0]),sh(A,j,w,d,f,ie[0],ce[1]),sh(A,j,w,d,f,ie[1],ce[0]),sh(A,j,w,d,f,ie[1],ce[1])}}return j}function Px(d){return d.type==="MultiPolygon"?d.coordinates.map(c=>({type:"Polygon",coordinates:c})):d.type==="MultiLineString"?d.coordinates.map(c=>({type:"LineString",coordinates:c})):d.type==="MultiPoint"?d.coordinates.map(c=>({type:"Point",coordinates:c})):[d]}class oh{constructor(c,f){this.type=yt,this.geojson=c,this.geometries=f}static parse(c,f){if(c.length!==2)return f.error(`'distance' expression requires exactly one argument, but found ${c.length-1} instead.`);if(xc(c[1])){const x=c[1];if(x.type==="FeatureCollection")return new oh(x,x.features.map(w=>Px(w.geometry)).flat());if(x.type==="Feature")return new oh(x,Px(x.geometry));if("type"in x&&"coordinates"in x)return new oh(x,Px(x))}return f.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return function(f,x){const w=f.geometry(),T=w.flat().map(I=>Er([I.x,I.y],f.canonical));if(w.length===0)return NaN;const j=new wx(T[0][1]);let A=1/0;for(const I of x){switch(I.type){case"Point":A=Math.min(A,pp(T,!1,[I.coordinates],!1,j,A));break;case"LineString":A=Math.min(A,pp(T,!1,I.coordinates,!0,j,A));break;case"Polygon":A=Math.min(A,fp(T,!1,I.coordinates,j,A))}if(A===0)return A}return A}(c,this.geometries);if(c.geometryType()==="LineString")return function(f,x){const w=f.geometry(),T=w.flat().map(I=>Er([I.x,I.y],f.canonical));if(w.length===0)return NaN;const j=new wx(T[0][1]);let A=1/0;for(const I of x){switch(I.type){case"Point":A=Math.min(A,pp(T,!0,[I.coordinates],!1,j,A));break;case"LineString":A=Math.min(A,pp(T,!0,I.coordinates,!0,j,A));break;case"Polygon":A=Math.min(A,fp(T,!0,I.coordinates,j,A))}if(A===0)return A}return A}(c,this.geometries);if(c.geometryType()==="Polygon")return function(f,x){const w=f.geometry();if(w.length===0||w[0].length===0)return NaN;const T=fg(w,0).map(I=>I.map($=>$.map(V=>Er([V.x,V.y],f.canonical)))),j=new wx(T[0][0][0][1]);let A=1/0;for(const I of x)for(const $ of T){switch(I.type){case"Point":A=Math.min(A,fp([I.coordinates],!1,$,j,A));break;case"LineString":A=Math.min(A,fp(I.coordinates,!0,$,j,A));break;case"Polygon":A=Math.min(A,Xr($,I.coordinates,j,A))}if(A===0)return A}return A}(c,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const ad={"==":vx,"!=":cp,">":ug,"<":cg,">=":hg,"<=":bx,array:Wo,at:ap,boolean:Wo,case:rd,coalesce:ru,collator:iu,format:ve,image:He,in:lp,"index-of":nu,interpolate:Fs,"interpolate-hcl":Fs,"interpolate-lab":Fs,length:lt,let:Al,literal:Vo,match:nd,number:Wo,"number-format":up,object:Wo,slice:eh,step:El,string:Wo,"to-boolean":Uo,"to-color":Uo,"to-number":Uo,"to-string":Uo,var:hr,within:rh,distance:oh};class ma{constructor(c,f,x,w){this.name=c,this.type=f,this._evaluate=x,this.args=w}evaluate(c){return this._evaluate(c,this.args)}eachChild(c){this.args.forEach(c)}outputDefined(){return!1}static parse(c,f){const x=c[0],w=ma.definitions[x];if(!w)return f.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0);const T=Array.isArray(w)?w[0]:w.type,j=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,A=j.filter(([$])=>!Array.isArray($)||$.length===c.length-1);let I=null;for(const[$,V]of A){I=new vc(f.registry,mp,f.path,null,f.scope);const H=[];let ee=!1;for(let ie=1;ie<c.length;ie++){const ce=c[ie],ue=Array.isArray($)?$[ie-1]:$.type,ye=I.parse(ce,1+H.length,ue);if(!ye){ee=!0;break}H.push(ye)}if(!ee)if(Array.isArray($)&&$.length!==H.length)I.error(`Expected ${$.length} arguments, but found ${H.length} instead.`);else{for(let ie=0;ie<H.length;ie++){const ce=Array.isArray($)?$[ie]:$.type,ue=H[ie];I.concat(ie+1).checkSubtype(ce,ue.type)}if(I.errors.length===0)return new ma(x,T,V,H)}}if(A.length===1)f.errors.push(...I.errors);else{const $=(A.length?A:j).map(([H])=>{return ee=H,Array.isArray(ee)?`(${ee.map(G).join(", ")})`:`(${G(ee.type)}...)`;var ee}).join(" | "),V=[];for(let H=1;H<c.length;H++){const ee=f.parse(c[H],1+V.length);if(!ee)return null;V.push(G(ee.type))}f.error(`Expected arguments of type ${$}, but found (${V.join(", ")}) instead.`)}return null}static register(c,f){ma.definitions=f;for(const x in f)c[x]=ma}}function Ox(d,[c,f,x,w]){c=c.evaluate(d),f=f.evaluate(d),x=x.evaluate(d);const T=w?w.evaluate(d):1,j=eu(c,f,x,T);if(j)throw new yi(j);return new yr(c/255,f/255,x/255,T,!1)}function Ax(d,c){return d in c}function Ex(d,c){const f=c[d];return f===void 0?null:f}function ah(d){return{type:d}}function mp(d){if(d instanceof hr)return mp(d.boundExpression);if(d instanceof ma&&d.name==="error"||d instanceof iu||d instanceof rh||d instanceof oh)return!1;const c=d instanceof Uo||d instanceof Wo;let f=!0;return d.eachChild(x=>{f=c?f&&mp(x):f&&x instanceof Vo}),!!f&&gp(d)&&yp(d,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function gp(d){if(d instanceof ma&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof rh||d instanceof oh)return!1;let c=!0;return d.eachChild(f=>{c&&!gp(f)&&(c=!1)}),c}function ld(d){if(d instanceof ma&&d.name==="feature-state")return!1;let c=!0;return d.eachChild(f=>{c&&!ld(f)&&(c=!1)}),c}function yp(d,c){if(d instanceof ma&&c.indexOf(d.name)>=0)return!1;let f=!0;return d.eachChild(x=>{f&&!yp(x,c)&&(f=!1)}),f}function yg(d){return{result:"success",value:d}}function cd(d){return{result:"error",value:d}}function ud(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function J_(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function zx(d){return!!d.expression&&d.expression.interpolated}function xr(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function xg(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function KT(d){return d}function ew(d,c){const f=c.type==="color",x=d.stops&&typeof d.stops[0][0]=="object",w=x||!(x||d.property!==void 0),T=d.type||(zx(c)?"exponential":"interval");if(f||c.type==="padding"){const V=f?yr.parse:eo.parse;(d=Xt({},d)).stops&&(d.stops=d.stops.map(H=>[H[0],V(H[1])])),d.default=V(d.default?d.default:c.default)}if(d.colorSpace&&(j=d.colorSpace)!=="rgb"&&j!=="hcl"&&j!=="lab")throw new Error(`Unknown color space: "${d.colorSpace}"`);var j;let A,I,$;if(T==="exponential")A=nw;else if(T==="interval")A=vg;else if(T==="categorical"){A=tw,I=Object.create(null);for(const V of d.stops)I[V[0]]=V[1];$=typeof d.stops[0][0]}else{if(T!=="identity")throw new Error(`Unknown function type "${T}"`);A=rw}if(x){const V={},H=[];for(let ce=0;ce<d.stops.length;ce++){const ue=d.stops[ce],ye=ue[0].zoom;V[ye]===void 0&&(V[ye]={zoom:ye,type:d.type,property:d.property,default:d.default,stops:[]},H.push(ye)),V[ye].stops.push([ue[0].value,ue[1]])}const ee=[];for(const ce of H)ee.push([V[ce].zoom,ew(V[ce],c)]);const ie={name:"linear"};return{kind:"composite",interpolationType:ie,interpolationFactor:Fs.interpolationFactor.bind(void 0,ie),zoomStops:ee.map(ce=>ce[0]),evaluate:({zoom:ce},ue)=>nw({stops:ee,base:d.base},c,ce).evaluate(ce,ue)}}if(w){const V=T==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:Fs.interpolationFactor.bind(void 0,V),zoomStops:d.stops.map(H=>H[0]),evaluate:({zoom:H})=>A(d,c,H,I,$)}}return{kind:"source",evaluate(V,H){const ee=H&&H.properties?H.properties[d.property]:void 0;return ee===void 0?hd(d.default,c.default):A(d,c,ee,I,$)}}}function hd(d,c,f){return d!==void 0?d:c!==void 0?c:f!==void 0?f:void 0}function tw(d,c,f,x,w){return hd(typeof f===w?x[f]:void 0,d.default,c.default)}function vg(d,c,f){if(xr(f)!=="number")return hd(d.default,c.default);const x=d.stops.length;if(x===1||f<=d.stops[0][0])return d.stops[0][1];if(f>=d.stops[x-1][0])return d.stops[x-1][1];const w=id(d.stops.map(T=>T[0]),f);return d.stops[w][1]}function nw(d,c,f){const x=d.base!==void 0?d.base:1;if(xr(f)!=="number")return hd(d.default,c.default);const w=d.stops.length;if(w===1||f<=d.stops[0][0])return d.stops[0][1];if(f>=d.stops[w-1][0])return d.stops[w-1][1];const T=id(d.stops.map(V=>V[0]),f),j=function(V,H,ee,ie){const ce=ie-ee,ue=V-ee;return ce===0?0:H===1?ue/ce:(Math.pow(H,ue)-1)/(Math.pow(H,ce)-1)}(f,x,d.stops[T][0],d.stops[T+1][0]),A=d.stops[T][1],I=d.stops[T+1][1],$=is[c.type]||KT;return typeof A.evaluate=="function"?{evaluate(...V){const H=A.evaluate.apply(void 0,V),ee=I.evaluate.apply(void 0,V);if(H!==void 0&&ee!==void 0)return $(H,ee,j,d.colorSpace)}}:$(A,I,j,d.colorSpace)}function rw(d,c,f){switch(c.type){case"color":f=yr.parse(f);break;case"formatted":f=Ds.fromString(f.toString());break;case"resolvedImage":f=Ls.fromString(f.toString());break;case"padding":f=eo.parse(f);break;default:xr(f)===c.type||c.type==="enum"&&c.values[f]||(f=void 0)}return hd(f,d.default,c.default)}ma.register(ad,{error:[{kind:"error"},[_n],(d,[c])=>{throw new yi(c.evaluate(d))}],typeof:[_n,[sn],(d,[c])=>G(Si(c.evaluate(d)))],"to-rgba":[U(yt,4),[tr],(d,[c])=>{const[f,x,w,T]=c.evaluate(d).rgb;return[255*f,255*x,255*w,T]}],rgb:[tr,[yt,yt,yt],Ox],rgba:[tr,[yt,yt,yt,yt],Ox],has:{type:Kt,overloads:[[[_n],(d,[c])=>Ax(c.evaluate(d),d.properties())],[[_n,qr],(d,[c,f])=>Ax(c.evaluate(d),f.evaluate(d))]]},get:{type:sn,overloads:[[[_n],(d,[c])=>Ex(c.evaluate(d),d.properties())],[[_n,qr],(d,[c,f])=>Ex(c.evaluate(d),f.evaluate(d))]]},"feature-state":[sn,[_n],(d,[c])=>Ex(c.evaluate(d),d.featureState||{})],properties:[qr,[],d=>d.properties()],"geometry-type":[_n,[],d=>d.geometryType()],id:[sn,[],d=>d.id()],zoom:[yt,[],d=>d.globals.zoom],"heatmap-density":[yt,[],d=>d.globals.heatmapDensity||0],"line-progress":[yt,[],d=>d.globals.lineProgress||0],accumulated:[sn,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[yt,ah(yt),(d,c)=>{let f=0;for(const x of c)f+=x.evaluate(d);return f}],"*":[yt,ah(yt),(d,c)=>{let f=1;for(const x of c)f*=x.evaluate(d);return f}],"-":{type:yt,overloads:[[[yt,yt],(d,[c,f])=>c.evaluate(d)-f.evaluate(d)],[[yt],(d,[c])=>-c.evaluate(d)]]},"/":[yt,[yt,yt],(d,[c,f])=>c.evaluate(d)/f.evaluate(d)],"%":[yt,[yt,yt],(d,[c,f])=>c.evaluate(d)%f.evaluate(d)],ln2:[yt,[],()=>Math.LN2],pi:[yt,[],()=>Math.PI],e:[yt,[],()=>Math.E],"^":[yt,[yt,yt],(d,[c,f])=>Math.pow(c.evaluate(d),f.evaluate(d))],sqrt:[yt,[yt],(d,[c])=>Math.sqrt(c.evaluate(d))],log10:[yt,[yt],(d,[c])=>Math.log(c.evaluate(d))/Math.LN10],ln:[yt,[yt],(d,[c])=>Math.log(c.evaluate(d))],log2:[yt,[yt],(d,[c])=>Math.log(c.evaluate(d))/Math.LN2],sin:[yt,[yt],(d,[c])=>Math.sin(c.evaluate(d))],cos:[yt,[yt],(d,[c])=>Math.cos(c.evaluate(d))],tan:[yt,[yt],(d,[c])=>Math.tan(c.evaluate(d))],asin:[yt,[yt],(d,[c])=>Math.asin(c.evaluate(d))],acos:[yt,[yt],(d,[c])=>Math.acos(c.evaluate(d))],atan:[yt,[yt],(d,[c])=>Math.atan(c.evaluate(d))],min:[yt,ah(yt),(d,c)=>Math.min(...c.map(f=>f.evaluate(d)))],max:[yt,ah(yt),(d,c)=>Math.max(...c.map(f=>f.evaluate(d)))],abs:[yt,[yt],(d,[c])=>Math.abs(c.evaluate(d))],round:[yt,[yt],(d,[c])=>{const f=c.evaluate(d);return f<0?-Math.round(-f):Math.round(f)}],floor:[yt,[yt],(d,[c])=>Math.floor(c.evaluate(d))],ceil:[yt,[yt],(d,[c])=>Math.ceil(c.evaluate(d))],"filter-==":[Kt,[_n,sn],(d,[c,f])=>d.properties()[c.value]===f.value],"filter-id-==":[Kt,[sn],(d,[c])=>d.id()===c.value],"filter-type-==":[Kt,[_n],(d,[c])=>d.geometryType()===c.value],"filter-<":[Kt,[_n,sn],(d,[c,f])=>{const x=d.properties()[c.value],w=f.value;return typeof x==typeof w&&x<w}],"filter-id-<":[Kt,[sn],(d,[c])=>{const f=d.id(),x=c.value;return typeof f==typeof x&&f<x}],"filter->":[Kt,[_n,sn],(d,[c,f])=>{const x=d.properties()[c.value],w=f.value;return typeof x==typeof w&&x>w}],"filter-id->":[Kt,[sn],(d,[c])=>{const f=d.id(),x=c.value;return typeof f==typeof x&&f>x}],"filter-<=":[Kt,[_n,sn],(d,[c,f])=>{const x=d.properties()[c.value],w=f.value;return typeof x==typeof w&&x<=w}],"filter-id-<=":[Kt,[sn],(d,[c])=>{const f=d.id(),x=c.value;return typeof f==typeof x&&f<=x}],"filter->=":[Kt,[_n,sn],(d,[c,f])=>{const x=d.properties()[c.value],w=f.value;return typeof x==typeof w&&x>=w}],"filter-id->=":[Kt,[sn],(d,[c])=>{const f=d.id(),x=c.value;return typeof f==typeof x&&f>=x}],"filter-has":[Kt,[sn],(d,[c])=>c.value in d.properties()],"filter-has-id":[Kt,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[Kt,[U(_n)],(d,[c])=>c.value.indexOf(d.geometryType())>=0],"filter-id-in":[Kt,[U(sn)],(d,[c])=>c.value.indexOf(d.id())>=0],"filter-in-small":[Kt,[_n,U(sn)],(d,[c,f])=>f.value.indexOf(d.properties()[c.value])>=0],"filter-in-large":[Kt,[_n,U(sn)],(d,[c,f])=>function(x,w,T,j){for(;T<=j;){const A=T+j>>1;if(w[A]===x)return!0;w[A]>x?j=A-1:T=A+1}return!1}(d.properties()[c.value],f.value,0,f.value.length-1)],all:{type:Kt,overloads:[[[Kt,Kt],(d,[c,f])=>c.evaluate(d)&&f.evaluate(d)],[ah(Kt),(d,c)=>{for(const f of c)if(!f.evaluate(d))return!1;return!0}]]},any:{type:Kt,overloads:[[[Kt,Kt],(d,[c,f])=>c.evaluate(d)||f.evaluate(d)],[ah(Kt),(d,c)=>{for(const f of c)if(f.evaluate(d))return!0;return!1}]]},"!":[Kt,[Kt],(d,[c])=>!c.evaluate(d)],"is-supported-script":[Kt,[_n],(d,[c])=>{const f=d.globals&&d.globals.isSupportedScript;return!f||f(c.evaluate(d))}],upcase:[_n,[_n],(d,[c])=>c.evaluate(d).toUpperCase()],downcase:[_n,[_n],(d,[c])=>c.evaluate(d).toLowerCase()],concat:[_n,ah(sn),(d,c)=>c.map(f=>Ju(f.evaluate(d))).join("")],"resolved-locale":[_n,[Wi],(d,[c])=>c.evaluate(d).resolvedLocale()]});class bg{constructor(c,f){var x;this.expression=c,this._warningHistory={},this._evaluator=new tu,this._defaultValue=f?(x=f).type==="color"&&xg(x.default)?new yr(0,0,0,0):x.type==="color"?yr.parse(x.default)||null:x.type==="padding"?eo.parse(x.default)||null:x.type==="variableAnchorOffsetCollection"?wo.parse(x.default)||null:x.default===void 0?null:x.default:null,this._enumValues=f&&f.type==="enum"?f.values:null}evaluateWithoutErrorHandling(c,f,x,w,T,j){return this._evaluator.globals=c,this._evaluator.feature=f,this._evaluator.featureState=x,this._evaluator.canonical=w,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=j,this.expression.evaluate(this._evaluator)}evaluate(c,f,x,w,T,j){this._evaluator.globals=c,this._evaluator.feature=f||null,this._evaluator.featureState=x||null,this._evaluator.canonical=w,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=j||null;try{const A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new yi(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(A)} instead.`);return A}catch(A){return this._warningHistory[A.message]||(this._warningHistory[A.message]=!0,typeof console<"u"&&console.warn(A.message)),this._defaultValue}}}function _g(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in ad}function dd(d,c){const f=new vc(ad,mp,[],c?function(w){const T={color:tr,string:_n,number:yt,enum:_n,boolean:Kt,formatted:Rs,padding:Ui,resolvedImage:vs,variableAnchorOffsetCollection:xe};return w.type==="array"?U(T[w.value]||sn,w.length):T[w.type]}(c):void 0),x=f.parse(d,void 0,void 0,void 0,c&&c.type==="string"?{typeAnnotation:"coerce"}:void 0);return x?yg(new bg(x,c)):cd(f.errors)}class fd{constructor(c,f){this.kind=c,this._styleExpression=f,this.isStateDependent=c!=="constant"&&!ld(f.expression)}evaluateWithoutErrorHandling(c,f,x,w,T,j){return this._styleExpression.evaluateWithoutErrorHandling(c,f,x,w,T,j)}evaluate(c,f,x,w,T,j){return this._styleExpression.evaluate(c,f,x,w,T,j)}}class pd{constructor(c,f,x,w){this.kind=c,this.zoomStops=x,this._styleExpression=f,this.isStateDependent=c!=="camera"&&!ld(f.expression),this.interpolationType=w}evaluateWithoutErrorHandling(c,f,x,w,T,j){return this._styleExpression.evaluateWithoutErrorHandling(c,f,x,w,T,j)}evaluate(c,f,x,w,T,j){return this._styleExpression.evaluate(c,f,x,w,T,j)}interpolationFactor(c,f,x){return this.interpolationType?Fs.interpolationFactor(this.interpolationType,c,f,x):0}}function Ix(d,c){const f=dd(d,c);if(f.result==="error")return f;const x=f.value.expression,w=gp(x);if(!w&&!ud(c))return cd([new pt("","data expressions not supported")]);const T=yp(x,["zoom"]);if(!T&&!J_(c))return cd([new pt("","zoom expressions not supported")]);const j=xp(x);return j||T?j instanceof pt?cd([j]):j instanceof Fs&&!zx(c)?cd([new pt("",'"interpolate" expressions cannot be used with this property')]):yg(j?new pd(w?"camera":"composite",f.value,j.labels,j instanceof Fs?j.interpolation:void 0):new fd(w?"constant":"source",f.value)):cd([new pt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class md{constructor(c,f){this._parameters=c,this._specification=f,Xt(this,ew(this._parameters,this._specification))}static deserialize(c){return new md(c._parameters,c._specification)}static serialize(c){return{_parameters:c._parameters,_specification:c._specification}}}function xp(d){let c=null;if(d instanceof Al)c=xp(d.result);else if(d instanceof ru){for(const f of d.args)if(c=xp(f),c)break}else(d instanceof El||d instanceof Fs)&&d.input instanceof ma&&d.input.name==="zoom"&&(c=d);return c instanceof pt||d.eachChild(f=>{const x=xp(f);x instanceof pt?c=x:!c&&x?c=new pt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):c&&x&&c!==x&&(c=new pt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),c}function wg(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const c of d.slice(1))if(!wg(c)&&typeof c!="boolean")return!1;return!0;default:return!0}}const Sg={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Mx(d){if(d==null)return{filter:()=>!0,needGeometry:!1};wg(d)||(d=kg(d));const c=dd(d,Sg);if(c.result==="error")throw new Error(c.value.map(f=>`${f.key}: ${f.message}`).join(", "));return{filter:(f,x,w)=>c.value.evaluate(f,x,{},w),needGeometry:iw(d)}}function ZT(d,c){return d<c?-1:d>c?1:0}function iw(d){if(!Array.isArray(d))return!1;if(d[0]==="within"||d[0]==="distance")return!0;for(let c=1;c<d.length;c++)if(iw(d[c]))return!0;return!1}function kg(d){if(!d)return!0;const c=d[0];return d.length<=1?c!=="any":c==="=="?Rx(d[1],d[2],"=="):c==="!="?$s(Rx(d[1],d[2],"==")):c==="<"||c===">"||c==="<="||c===">="?Rx(d[1],d[2],c):c==="any"?(f=d.slice(1),["any"].concat(f.map(kg))):c==="all"?["all"].concat(d.slice(1).map(kg)):c==="none"?["all"].concat(d.slice(1).map(kg).map($s)):c==="in"?vp(d[1],d.slice(2)):c==="!in"?$s(vp(d[1],d.slice(2))):c==="has"?bp(d[1]):c!=="!has"||$s(bp(d[1]));var f}function Rx(d,c,f){switch(d){case"$type":return[`filter-type-${f}`,c];case"$id":return[`filter-id-${f}`,c];default:return[`filter-${f}`,d,c]}}function vp(d,c){if(c.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some(f=>typeof f!=typeof c[0])?["filter-in-large",d,["literal",c.sort(ZT)]]:["filter-in-small",d,["literal",c]]}}function bp(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function $s(d){return["!",d]}function lh(d){const c=typeof d;if(c==="number"||c==="boolean"||c==="string"||d==null)return JSON.stringify(d);if(Array.isArray(d)){let w="[";for(const T of d)w+=`${lh(T)},`;return`${w}]`}const f=Object.keys(d).sort();let x="{";for(let w=0;w<f.length;w++)x+=`${JSON.stringify(f[w])}:${lh(d[f[w]])},`;return`${x}}`}function sw(d){let c="";for(const f of ut)c+=`/${lh(d[f])}`;return c}function ow(d){const c=d.value;return c?[new Me(d.key,c,"constants have been deprecated as of v8")]:[]}function Ci(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function Ya(d){if(Array.isArray(d))return d.map(Ya);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const c={};for(const f in d)c[f]=Ya(d[f]);return c}return Ci(d)}function qo(d){const c=d.key,f=d.value,x=d.valueSpec||{},w=d.objectElementValidators||{},T=d.style,j=d.styleSpec,A=d.validateSpec;let I=[];const $=xr(f);if($!=="object")return[new Me(c,f,`object expected, ${$} found`)];for(const V in f){const H=V.split(".")[0],ee=x[H]||x["*"];let ie;if(w[H])ie=w[H];else if(x[H])ie=A;else if(w["*"])ie=w["*"];else{if(!x["*"]){I.push(new Me(c,f[V],`unknown property "${V}"`));continue}ie=A}I=I.concat(ie({key:(c&&`${c}.`)+V,value:f[V],valueSpec:ee,style:T,styleSpec:j,object:f,objectKey:V,validateSpec:A},f))}for(const V in x)w[V]||x[V].required&&x[V].default===void 0&&f[V]===void 0&&I.push(new Me(c,f,`missing required property "${V}"`));return I}function _p(d){const c=d.value,f=d.valueSpec,x=d.style,w=d.styleSpec,T=d.key,j=d.arrayElementValidator||d.validateSpec;if(xr(c)!=="array")return[new Me(T,c,`array expected, ${xr(c)} found`)];if(f.length&&c.length!==f.length)return[new Me(T,c,`array length ${f.length} expected, length ${c.length} found`)];if(f["min-length"]&&c.length<f["min-length"])return[new Me(T,c,`array length at least ${f["min-length"]} expected, length ${c.length} found`)];let A={type:f.value,values:f.values};w.$version<7&&(A.function=f.function),xr(f.value)==="object"&&(A=f.value);let I=[];for(let $=0;$<c.length;$++)I=I.concat(j({array:c,arrayIndex:$,value:c[$],valueSpec:A,validateSpec:d.validateSpec,style:x,styleSpec:w,key:`${T}[${$}]`}));return I}function Dx(d){const c=d.key,f=d.value,x=d.valueSpec;let w=xr(f);return w==="number"&&f!=f&&(w="NaN"),w!=="number"?[new Me(c,f,`number expected, ${w} found`)]:"minimum"in x&&f<x.minimum?[new Me(c,f,`${f} is less than the minimum value ${x.minimum}`)]:"maximum"in x&&f>x.maximum?[new Me(c,f,`${f} is greater than the maximum value ${x.maximum}`)]:[]}function Cg(d){const c=d.valueSpec,f=Ci(d.value.type);let x,w,T,j={};const A=f!=="categorical"&&d.value.property===void 0,I=!A,$=xr(d.value.stops)==="array"&&xr(d.value.stops[0])==="array"&&xr(d.value.stops[0][0])==="object",V=qo({key:d.key,value:d.value,valueSpec:d.styleSpec.function,validateSpec:d.validateSpec,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(ie){if(f==="identity")return[new Me(ie.key,ie.value,'identity function may not have a "stops" property')];let ce=[];const ue=ie.value;return ce=ce.concat(_p({key:ie.key,value:ue,valueSpec:ie.valueSpec,validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec,arrayElementValidator:H})),xr(ue)==="array"&&ue.length===0&&ce.push(new Me(ie.key,ue,"array must have at least one stop")),ce},default:function(ie){return ie.validateSpec({key:ie.key,value:ie.value,valueSpec:c,validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec})}}});return f==="identity"&&A&&V.push(new Me(d.key,d.value,'missing required property "property"')),f==="identity"||d.value.stops||V.push(new Me(d.key,d.value,'missing required property "stops"')),f==="exponential"&&d.valueSpec.expression&&!zx(d.valueSpec)&&V.push(new Me(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(I&&!ud(d.valueSpec)?V.push(new Me(d.key,d.value,"property functions not supported")):A&&!J_(d.valueSpec)&&V.push(new Me(d.key,d.value,"zoom functions not supported"))),f!=="categorical"&&!$||d.value.property!==void 0||V.push(new Me(d.key,d.value,'"property" property is required')),V;function H(ie){let ce=[];const ue=ie.value,ye=ie.key;if(xr(ue)!=="array")return[new Me(ye,ue,`array expected, ${xr(ue)} found`)];if(ue.length!==2)return[new Me(ye,ue,`array length 2 expected, length ${ue.length} found`)];if($){if(xr(ue[0])!=="object")return[new Me(ye,ue,`object expected, ${xr(ue[0])} found`)];if(ue[0].zoom===void 0)return[new Me(ye,ue,"object stop key must have zoom")];if(ue[0].value===void 0)return[new Me(ye,ue,"object stop key must have value")];if(T&&T>Ci(ue[0].zoom))return[new Me(ye,ue[0].zoom,"stop zoom values must appear in ascending order")];Ci(ue[0].zoom)!==T&&(T=Ci(ue[0].zoom),w=void 0,j={}),ce=ce.concat(qo({key:`${ye}[0]`,value:ue[0],valueSpec:{zoom:{}},validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{zoom:Dx,value:ee}}))}else ce=ce.concat(ee({key:`${ye}[0]`,value:ue[0],validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec},ue));return _g(Ya(ue[1]))?ce.concat([new Me(`${ye}[1]`,ue[1],"expressions are not allowed in function stops.")]):ce.concat(ie.validateSpec({key:`${ye}[1]`,value:ue[1],valueSpec:c,validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec}))}function ee(ie,ce){const ue=xr(ie.value),ye=Ci(ie.value),Te=ie.value!==null?ie.value:ce;if(x){if(ue!==x)return[new Me(ie.key,Te,`${ue} stop domain type must match previous stop domain type ${x}`)]}else x=ue;if(ue!=="number"&&ue!=="string"&&ue!=="boolean")return[new Me(ie.key,Te,"stop domain value must be a number, string, or boolean")];if(ue!=="number"&&f!=="categorical"){let Je=`number expected, ${ue} found`;return ud(c)&&f===void 0&&(Je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Me(ie.key,Te,Je)]}return f!=="categorical"||ue!=="number"||isFinite(ye)&&Math.floor(ye)===ye?f!=="categorical"&&ue==="number"&&w!==void 0&&ye<w?[new Me(ie.key,Te,"stop domain values must appear in ascending order")]:(w=ye,f==="categorical"&&ye in j?[new Me(ie.key,Te,"stop domain values must be unique")]:(j[ye]=!0,[])):[new Me(ie.key,Te,`integer expected, found ${ye}`)]}}function gd(d){const c=(d.expressionContext==="property"?Ix:dd)(Ya(d.value),d.valueSpec);if(c.result==="error")return c.value.map(x=>new Me(`${d.key}${x.key}`,d.value,x.message));const f=c.value.expression||c.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!f.outputDefined())return[new Me(d.key,d.value,`Invalid data expression for "${d.propertyKey}". Output values must be contained as literals within the expression.`)];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!ld(f))return[new Me(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!ld(f))return[new Me(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!yp(f,["zoom","feature-state"]))return[new Me(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!gp(f))return[new Me(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function wc(d){const c=d.key,f=d.value,x=d.valueSpec,w=[];return Array.isArray(x.values)?x.values.indexOf(Ci(f))===-1&&w.push(new Me(c,f,`expected one of [${x.values.join(", ")}], ${JSON.stringify(f)} found`)):Object.keys(x.values).indexOf(Ci(f))===-1&&w.push(new Me(c,f,`expected one of [${Object.keys(x.values).join(", ")}], ${JSON.stringify(f)} found`)),w}function Lx(d){return wg(Ya(d.value))?gd(Xt({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Tg(d)}function Tg(d){const c=d.value,f=d.key;if(xr(c)!=="array")return[new Me(f,c,`array expected, ${xr(c)} found`)];const x=d.styleSpec;let w,T=[];if(c.length<1)return[new Me(f,c,"filter array must have at least 1 element")];switch(T=T.concat(wc({key:`${f}[0]`,value:c[0],valueSpec:x.filter_operator,style:d.style,styleSpec:d.styleSpec})),Ci(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&Ci(c[1])==="$type"&&T.push(new Me(f,c,`"$type" cannot be use with operator "${c[0]}"`));case"==":case"!=":c.length!==3&&T.push(new Me(f,c,`filter array for operator "${c[0]}" must have 3 elements`));case"in":case"!in":c.length>=2&&(w=xr(c[1]),w!=="string"&&T.push(new Me(`${f}[1]`,c[1],`string expected, ${w} found`)));for(let j=2;j<c.length;j++)w=xr(c[j]),Ci(c[1])==="$type"?T=T.concat(wc({key:`${f}[${j}]`,value:c[j],valueSpec:x.geometry_type,style:d.style,styleSpec:d.styleSpec})):w!=="string"&&w!=="number"&&w!=="boolean"&&T.push(new Me(`${f}[${j}]`,c[j],`string, number, or boolean expected, ${w} found`));break;case"any":case"all":case"none":for(let j=1;j<c.length;j++)T=T.concat(Tg({key:`${f}[${j}]`,value:c[j],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":w=xr(c[1]),c.length!==2?T.push(new Me(f,c,`filter array for "${c[0]}" operator must have 2 elements`)):w!=="string"&&T.push(new Me(`${f}[1]`,c[1],`string expected, ${w} found`))}return T}function Fx(d,c){const f=d.key,x=d.validateSpec,w=d.style,T=d.styleSpec,j=d.value,A=d.objectKey,I=T[`${c}_${d.layerType}`];if(!I)return[];const $=A.match(/^(.*)-transition$/);if(c==="paint"&&$&&I[$[1]]&&I[$[1]].transition)return x({key:f,value:j,valueSpec:T.transition,style:w,styleSpec:T});const V=d.valueSpec||I[A];if(!V)return[new Me(f,j,`unknown property "${A}"`)];let H;if(xr(j)==="string"&&ud(V)&&!V.tokens&&(H=/^{([^}]+)}$/.exec(j)))return[new Me(f,j,`"${A}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(H[1])} }\`.`)];const ee=[];return d.layerType==="symbol"&&(A==="text-field"&&w&&!w.glyphs&&ee.push(new Me(f,j,'use of "text-field" requires a style "glyphs" property')),A==="text-font"&&xg(Ya(j))&&Ci(j.type)==="identity"&&ee.push(new Me(f,j,'"text-font" does not support identity functions'))),ee.concat(x({key:d.key,value:j,valueSpec:V,style:w,styleSpec:T,expressionContext:"property",propertyType:c,propertyKey:A}))}function jg(d){return Fx(d,"paint")}function Bx(d){return Fx(d,"layout")}function $x(d){let c=[];const f=d.value,x=d.key,w=d.style,T=d.styleSpec;f.type||f.ref||c.push(new Me(x,f,'either "type" or "ref" is required'));let j=Ci(f.type);const A=Ci(f.ref);if(f.id){const I=Ci(f.id);for(let $=0;$<d.arrayIndex;$++){const V=w.layers[$];Ci(V.id)===I&&c.push(new Me(x,f.id,`duplicate layer id "${f.id}", previously used at line ${V.id.__line__}`))}}if("ref"in f){let I;["type","source","source-layer","filter","layout"].forEach($=>{$ in f&&c.push(new Me(x,f[$],`"${$}" is prohibited for ref layers`))}),w.layers.forEach($=>{Ci($.id)===A&&(I=$)}),I?I.ref?c.push(new Me(x,f.ref,"ref cannot reference another ref layer")):j=Ci(I.type):c.push(new Me(x,f.ref,`ref layer "${A}" not found`))}else if(j!=="background")if(f.source){const I=w.sources&&w.sources[f.source],$=I&&Ci(I.type);I?$==="vector"&&j==="raster"?c.push(new Me(x,f.source,`layer "${f.id}" requires a raster source`)):$!=="raster-dem"&&j==="hillshade"?c.push(new Me(x,f.source,`layer "${f.id}" requires a raster-dem source`)):$==="raster"&&j!=="raster"?c.push(new Me(x,f.source,`layer "${f.id}" requires a vector source`)):$!=="vector"||f["source-layer"]?$==="raster-dem"&&j!=="hillshade"?c.push(new Me(x,f.source,"raster-dem source can only be used with layer type 'hillshade'.")):j!=="line"||!f.paint||!f.paint["line-gradient"]||$==="geojson"&&I.lineMetrics||c.push(new Me(x,f,`layer "${f.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):c.push(new Me(x,f,`layer "${f.id}" must specify a "source-layer"`)):c.push(new Me(x,f.source,`source "${f.source}" not found`))}else c.push(new Me(x,f,'missing required property "source"'));return c=c.concat(qo({key:x,value:f,valueSpec:T.layer,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*":()=>[],type:()=>d.validateSpec({key:`${x}.type`,value:f.type,valueSpec:T.layer.type,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,object:f,objectKey:"type"}),filter:Lx,layout:I=>qo({layer:f,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":$=>Bx(Xt({layerType:j},$))}}),paint:I=>qo({layer:f,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":$=>jg(Xt({layerType:j},$))}})}})),c}function ch(d){const c=d.value,f=d.key,x=xr(c);return x!=="string"?[new Me(f,c,`string expected, ${x} found`)]:[]}const Pg={promoteId:function({key:d,value:c}){if(xr(c)==="string")return ch({key:d,value:c});{const f=[];for(const x in c)f.push(...ch({key:`${d}.${x}`,value:c[x]}));return f}}};function wp(d){const c=d.value,f=d.key,x=d.styleSpec,w=d.style,T=d.validateSpec;if(!c.type)return[new Me(f,c,'"type" is required')];const j=Ci(c.type);let A;switch(j){case"vector":case"raster":return A=qo({key:f,value:c,valueSpec:x[`source_${j.replace("-","_")}`],style:d.style,styleSpec:x,objectElementValidators:Pg,validateSpec:T}),A;case"raster-dem":return A=function(I){var $;const V=($=I.sourceName)!==null&&$!==void 0?$:"",H=I.value,ee=I.styleSpec,ie=ee.source_raster_dem,ce=I.style;let ue=[];const ye=xr(H);if(H===void 0)return ue;if(ye!=="object")return ue.push(new Me("source_raster_dem",H,`object expected, ${ye} found`)),ue;const Te=Ci(H.encoding)==="custom",Je=["redFactor","greenFactor","blueFactor","baseShift"],Ve=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const Ze in H)!Te&&Je.includes(Ze)?ue.push(new Me(Ze,H[Ze],`In "${V}": "${Ze}" is only valid when "encoding" is set to "custom". ${Ve} encoding found`)):ie[Ze]?ue=ue.concat(I.validateSpec({key:Ze,value:H[Ze],valueSpec:ie[Ze],validateSpec:I.validateSpec,style:ce,styleSpec:ee})):ue.push(new Me(Ze,H[Ze],`unknown property "${Ze}"`));return ue}({sourceName:f,value:c,style:d.style,styleSpec:x,validateSpec:T}),A;case"geojson":if(A=qo({key:f,value:c,valueSpec:x.source_geojson,style:w,styleSpec:x,validateSpec:T,objectElementValidators:Pg}),c.cluster)for(const I in c.clusterProperties){const[$,V]=c.clusterProperties[I],H=typeof $=="string"?[$,["accumulated"],["get",I]]:$;A.push(...gd({key:`${f}.${I}.map`,value:V,expressionContext:"cluster-map"})),A.push(...gd({key:`${f}.${I}.reduce`,value:H,expressionContext:"cluster-reduce"}))}return A;case"video":return qo({key:f,value:c,valueSpec:x.source_video,style:w,validateSpec:T,styleSpec:x});case"image":return qo({key:f,value:c,valueSpec:x.source_image,style:w,validateSpec:T,styleSpec:x});case"canvas":return[new Me(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return wc({key:`${f}.type`,value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Nx(d){const c=d.value,f=d.styleSpec,x=f.light,w=d.style;let T=[];const j=xr(c);if(c===void 0)return T;if(j!=="object")return T=T.concat([new Me("light",c,`object expected, ${j} found`)]),T;for(const A in c){const I=A.match(/^(.*)-transition$/);T=T.concat(I&&x[I[1]]&&x[I[1]].transition?d.validateSpec({key:A,value:c[A],valueSpec:f.transition,validateSpec:d.validateSpec,style:w,styleSpec:f}):x[A]?d.validateSpec({key:A,value:c[A],valueSpec:x[A],validateSpec:d.validateSpec,style:w,styleSpec:f}):[new Me(A,c[A],`unknown property "${A}"`)])}return T}function Vx(d){const c=d.value,f=d.styleSpec,x=f.sky,w=d.style,T=xr(c);if(c===void 0)return[];if(T!=="object")return[new Me("sky",c,`object expected, ${T} found`)];let j=[];for(const A in c)j=j.concat(x[A]?d.validateSpec({key:A,value:c[A],valueSpec:x[A],style:w,styleSpec:f}):[new Me(A,c[A],`unknown property "${A}"`)]);return j}function Wx(d){const c=d.value,f=d.styleSpec,x=f.terrain,w=d.style;let T=[];const j=xr(c);if(c===void 0)return T;if(j!=="object")return T=T.concat([new Me("terrain",c,`object expected, ${j} found`)]),T;for(const A in c)T=T.concat(x[A]?d.validateSpec({key:A,value:c[A],valueSpec:x[A],validateSpec:d.validateSpec,style:w,styleSpec:f}):[new Me(A,c[A],`unknown property "${A}"`)]);return T}function Ux(d){let c=[];const f=d.value,x=d.key;if(Array.isArray(f)){const w=[],T=[];for(const j in f)f[j].id&&w.includes(f[j].id)&&c.push(new Me(x,f,`all the sprites' ids must be unique, but ${f[j].id} is duplicated`)),w.push(f[j].id),f[j].url&&T.includes(f[j].url)&&c.push(new Me(x,f,`all the sprites' URLs must be unique, but ${f[j].url} is duplicated`)),T.push(f[j].url),c=c.concat(qo({key:`${x}[${j}]`,value:f[j],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:d.validateSpec}));return c}return ch({key:x,value:f})}const Og={"*":()=>[],array:_p,boolean:function(d){const c=d.value,f=d.key,x=xr(c);return x!=="boolean"?[new Me(f,c,`boolean expected, ${x} found`)]:[]},number:Dx,color:function(d){const c=d.key,f=d.value,x=xr(f);return x!=="string"?[new Me(c,f,`color expected, ${x} found`)]:yr.parse(String(f))?[]:[new Me(c,f,`color expected, "${f}" found`)]},constants:ow,enum:wc,filter:Lx,function:Cg,layer:$x,object:qo,source:wp,light:Nx,sky:Vx,terrain:Wx,projection:function(d){const c=d.value,f=d.styleSpec,x=f.projection,w=d.style,T=xr(c);if(c===void 0)return[];if(T!=="object")return[new Me("projection",c,`object expected, ${T} found`)];let j=[];for(const A in c)j=j.concat(x[A]?d.validateSpec({key:A,value:c[A],valueSpec:x[A],style:w,styleSpec:f}):[new Me(A,c[A],`unknown property "${A}"`)]);return j},string:ch,formatted:function(d){return ch(d).length===0?[]:gd(d)},resolvedImage:function(d){return ch(d).length===0?[]:gd(d)},padding:function(d){const c=d.key,f=d.value;if(xr(f)==="array"){if(f.length<1||f.length>4)return[new Me(c,f,`padding requires 1 to 4 values; ${f.length} values found`)];const x={type:"number"};let w=[];for(let T=0;T<f.length;T++)w=w.concat(d.validateSpec({key:`${c}[${T}]`,value:f[T],validateSpec:d.validateSpec,valueSpec:x}));return w}return Dx({key:c,value:f,valueSpec:{}})},variableAnchorOffsetCollection:function(d){const c=d.key,f=d.value,x=xr(f),w=d.styleSpec;if(x!=="array"||f.length<1||f.length%2!=0)return[new Me(c,f,"variableAnchorOffsetCollection requires a non-empty array of even length")];let T=[];for(let j=0;j<f.length;j+=2)T=T.concat(wc({key:`${c}[${j}]`,value:f[j],valueSpec:w.layout_symbol["text-anchor"]})),T=T.concat(_p({key:`${c}[${j+1}]`,value:f[j+1],valueSpec:{length:2,value:"number"},validateSpec:d.validateSpec,style:d.style,styleSpec:w}));return T},sprite:Ux};function Sp(d){const c=d.value,f=d.valueSpec,x=d.styleSpec;return d.validateSpec=Sp,f.expression&&xg(Ci(c))?Cg(d):f.expression&&_g(Ya(c))?gd(d):f.type&&Og[f.type]?Og[f.type](d):qo(Xt({},d,{valueSpec:f.type?x[f.type]:f}))}function aw(d){const c=d.value,f=d.key,x=ch(d);return x.length||(c.indexOf("{fontstack}")===-1&&x.push(new Me(f,c,'"glyphs" url must include a "{fontstack}" token')),c.indexOf("{range}")===-1&&x.push(new Me(f,c,'"glyphs" url must include a "{range}" token'))),x}function ga(d,c=ze){let f=[];return f=f.concat(Sp({key:"",value:d,valueSpec:c.$root,styleSpec:c,style:d,validateSpec:Sp,objectElementValidators:{glyphs:aw,"*":()=>[]}})),d.constants&&(f=f.concat(ow({key:"constants",value:d.constants}))),qx(f)}function Il(d){return function(c){return d({...c,validateSpec:Sp})}}function qx(d){return[].concat(d).sort((c,f)=>c.line-f.line)}function Ja(d){return function(...c){return qx(d.apply(this,c))}}ga.source=Ja(Il(wp)),ga.sprite=Ja(Il(Ux)),ga.glyphs=Ja(Il(aw)),ga.light=Ja(Il(Nx)),ga.sky=Ja(Il(Vx)),ga.terrain=Ja(Il(Wx)),ga.layer=Ja(Il($x)),ga.filter=Ja(Il(Lx)),ga.paintProperty=Ja(Il(jg)),ga.layoutProperty=Ja(Il(Bx));const uh=ga,YT=uh.light,JT=uh.sky,lw=uh.paintProperty,cw=uh.layoutProperty;function Qx(d,c){let f=!1;if(c&&c.length)for(const x of c)d.fire(new kt(new Error(x.message))),f=!0;return f}class yd{constructor(c,f,x){const w=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;const j=new Int32Array(this.arrayBuffer);c=j[0],this.d=(f=j[1])+2*(x=j[2]);for(let I=0;I<this.d*this.d;I++){const $=j[3+I],V=j[3+I+1];w.push($===V?null:j.subarray($,V))}const A=j[3+w.length+1];this.keys=j.subarray(j[3+w.length],A),this.bboxes=j.subarray(A),this.insert=this._insertReadonly}else{this.d=f+2*x;for(let j=0;j<this.d*this.d;j++)w.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=c,this.padding=x,this.scale=f/c,this.uid=0;const T=x/f*c;this.min=-T,this.max=c+T}insert(c,f,x,w,T){this._forEachCell(f,x,w,T,this._insertCell,this.uid++,void 0,void 0),this.keys.push(c),this.bboxes.push(f),this.bboxes.push(x),this.bboxes.push(w),this.bboxes.push(T)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(c,f,x,w,T,j){this.cells[T].push(j)}query(c,f,x,w,T){const j=this.min,A=this.max;if(c<=j&&f<=j&&A<=x&&A<=w&&!T)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(c,f,x,w,this._queryCell,I,{},T),I}}_queryCell(c,f,x,w,T,j,A,I){const $=this.cells[T];if($!==null){const V=this.keys,H=this.bboxes;for(let ee=0;ee<$.length;ee++){const ie=$[ee];if(A[ie]===void 0){const ce=4*ie;(I?I(H[ce+0],H[ce+1],H[ce+2],H[ce+3]):c<=H[ce+2]&&f<=H[ce+3]&&x>=H[ce+0]&&w>=H[ce+1])?(A[ie]=!0,j.push(V[ie])):A[ie]=!1}}}}_forEachCell(c,f,x,w,T,j,A,I){const $=this._convertToCellCoord(c),V=this._convertToCellCoord(f),H=this._convertToCellCoord(x),ee=this._convertToCellCoord(w);for(let ie=$;ie<=H;ie++)for(let ce=V;ce<=ee;ce++){const ue=this.d*ce+ie;if((!I||I(this._convertFromCellCoord(ie),this._convertFromCellCoord(ce),this._convertFromCellCoord(ie+1),this._convertFromCellCoord(ce+1)))&&T.call(this,c,f,x,w,ue,j,A,I))return}}_convertFromCellCoord(c){return(c-this.padding)/this.scale}_convertToCellCoord(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const c=this.cells,f=3+this.cells.length+1+1;let x=0;for(let j=0;j<this.cells.length;j++)x+=this.cells[j].length;const w=new Int32Array(f+x+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;let T=f;for(let j=0;j<c.length;j++){const A=c[j];w[3+j]=T,w.set(A,T),T+=A.length}return w[3+c.length]=T,w.set(this.keys,T),T+=this.keys.length,w[3+c.length+1]=T,w.set(this.bboxes,T),T+=this.bboxes.length,w.buffer}static serialize(c,f){const x=c.toArrayBuffer();return f&&f.push(x),{buffer:x}}static deserialize(c){return new yd(c.buffer)}}const ya={};function nn(d,c,f={}){if(ya[d])throw new Error(`${d} is already registered.`);Object.defineProperty(c,"_classRegistryKey",{value:d,writeable:!1}),ya[d]={klass:c,omit:f.omit||[],shallow:f.shallow||[]}}nn("Object",Object),nn("TransferableGridIndex",yd),nn("Color",yr),nn("Error",Error),nn("AJAXError",Ye),nn("ResolvedImage",Ls),nn("StylePropertyFunction",md),nn("StyleExpression",bg,{omit:["_evaluator"]}),nn("ZoomDependentExpression",pd),nn("ZoomConstantExpression",fd),nn("CompoundExpression",ma,{omit:["_evaluate"]});for(const d in ad)ad[d]._classRegistryKey||nn(`Expression_${d}`,ad[d]);function Ag(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function Hx(d){return d.$name||d.constructor._classRegistryKey}function uw(d){return!function(c){if(c===null||typeof c!="object")return!1;const f=Hx(c);return!(!f||f==="Object")}(d)&&(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||d instanceof Blob||d instanceof Error||Ag(d)||we(d)||ArrayBuffer.isView(d)||d instanceof ImageData)}function xd(d,c){if(uw(d))return(Ag(d)||we(d))&&c&&c.push(d),ArrayBuffer.isView(d)&&c&&c.push(d.buffer),d instanceof ImageData&&c&&c.push(d.data.buffer),d;if(Array.isArray(d)){const T=[];for(const j of d)T.push(xd(j,c));return T}if(typeof d!="object")throw new Error("can't serialize object of type "+typeof d);const f=Hx(d);if(!f)throw new Error(`can't serialize object of unregistered class ${d.constructor.name}`);if(!ya[f])throw new Error(`${f} is not registered.`);const{klass:x}=ya[f],w=x.serialize?x.serialize(d,c):{};if(x.serialize){if(c&&w===c[c.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const T in d){if(!d.hasOwnProperty(T)||ya[f].omit.indexOf(T)>=0)continue;const j=d[T];w[T]=ya[f].shallow.indexOf(T)>=0?j:xd(j,c)}d instanceof Error&&(w.message=d.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(w.$name=f),w}function vd(d){if(uw(d))return d;if(Array.isArray(d))return d.map(vd);if(typeof d!="object")throw new Error("can't deserialize object of type "+typeof d);const c=Hx(d)||"Object";if(!ya[c])throw new Error(`can't deserialize unregistered class ${c}`);const{klass:f}=ya[c];if(!f)throw new Error(`can't deserialize unregistered class ${c}`);if(f.deserialize)return f.deserialize(d);const x=Object.create(f.prototype);for(const w of Object.keys(d)){if(w==="$name")continue;const T=d[w];x[w]=ya[c].shallow.indexOf(w)>=0?T:vd(T)}return x}class Gx{constructor(){this.first=!0}update(c,f){const x=Math.floor(c);return this.first?(this.first=!1,this.lastIntegerZoom=x,this.lastIntegerZoomTime=0,this.lastZoom=c,this.lastFloorZoom=x,!0):(this.lastFloorZoom>x?(this.lastIntegerZoom=x+1,this.lastIntegerZoomTime=f):this.lastFloorZoom<x&&(this.lastIntegerZoom=x,this.lastIntegerZoomTime=f),c!==this.lastZoom&&(this.lastZoom=c,this.lastFloorZoom=x,!0))}}const sr={"Latin-1 Supplement":d=>d>=128&&d<=255,"Hangul Jamo":d=>d>=4352&&d<=4607,Khmer:d=>d>=6016&&d<=6143,"General Punctuation":d=>d>=8192&&d<=8303,"Letterlike Symbols":d=>d>=8448&&d<=8527,"Number Forms":d=>d>=8528&&d<=8591,"Miscellaneous Technical":d=>d>=8960&&d<=9215,"Control Pictures":d=>d>=9216&&d<=9279,"Optical Character Recognition":d=>d>=9280&&d<=9311,"Enclosed Alphanumerics":d=>d>=9312&&d<=9471,"Geometric Shapes":d=>d>=9632&&d<=9727,"Miscellaneous Symbols":d=>d>=9728&&d<=9983,"Miscellaneous Symbols and Arrows":d=>d>=11008&&d<=11263,"Ideographic Description Characters":d=>d>=12272&&d<=12287,"CJK Symbols and Punctuation":d=>d>=12288&&d<=12351,Katakana:d=>d>=12448&&d<=12543,Kanbun:d=>d>=12688&&d<=12703,"CJK Strokes":d=>d>=12736&&d<=12783,"Enclosed CJK Letters and Months":d=>d>=12800&&d<=13055,"CJK Compatibility":d=>d>=13056&&d<=13311,"Yijing Hexagram Symbols":d=>d>=19904&&d<=19967,"Private Use Area":d=>d>=57344&&d<=63743,"Vertical Forms":d=>d>=65040&&d<=65055,"CJK Compatibility Forms":d=>d>=65072&&d<=65103,"Small Form Variants":d=>d>=65104&&d<=65135,"Halfwidth and Fullwidth Forms":d=>d>=65280&&d<=65519};function Xx(d){for(const c of d)if(Zx(c.charCodeAt(0)))return!0;return!1}function ej(d){for(const c of d)if(!bd(c.charCodeAt(0)))return!1;return!0}function Kx(d){const c=d.map(f=>{try{return new RegExp(`\\p{sc=${f}}`,"u").source}catch{return null}}).filter(f=>f);return new RegExp(c.join("|"),"u")}const tj=Kx(["Arab","Dupl","Mong","Ougr","Syrc"]);function bd(d){return!tj.test(String.fromCodePoint(d))}const hw=Kx(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Zx(d){return!(d!==746&&d!==747&&(d<4352||!(sr["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||sr["CJK Compatibility"](d)||sr["CJK Strokes"](d)||!(!sr["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||sr["Enclosed CJK Letters and Months"](d)||sr["Ideographic Description Characters"](d)||sr.Kanbun(d)||sr.Katakana(d)&&d!==12540||!(!sr["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!sr["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||sr["Vertical Forms"](d)||sr["Yijing Hexagram Symbols"](d)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(d))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(d))||hw.test(String.fromCodePoint(d)))))}function dw(d){return!(Zx(d)||function(c){return!!(sr["Latin-1 Supplement"](c)&&(c===167||c===169||c===174||c===177||c===188||c===189||c===190||c===215||c===247)||sr["General Punctuation"](c)&&(c===8214||c===8224||c===8225||c===8240||c===8241||c===8251||c===8252||c===8258||c===8263||c===8264||c===8265||c===8273)||sr["Letterlike Symbols"](c)||sr["Number Forms"](c)||sr["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||c===9003||c>=9085&&c<=9114||c>=9150&&c<=9165||c===9167||c>=9169&&c<=9179||c>=9186&&c<=9215)||sr["Control Pictures"](c)&&c!==9251||sr["Optical Character Recognition"](c)||sr["Enclosed Alphanumerics"](c)||sr["Geometric Shapes"](c)||sr["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||sr["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||sr["CJK Symbols and Punctuation"](c)||sr.Katakana(c)||sr["Private Use Area"](c)||sr["CJK Compatibility Forms"](c)||sr["Small Form Variants"](c)||sr["Halfwidth and Fullwidth Forms"](c)||c===8734||c===8756||c===8757||c>=9984&&c<=10087||c>=10102&&c<=10131||c===65532||c===65533)}(d))}const nj=Kx(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Yx(d){return nj.test(String.fromCodePoint(d))}function rj(d,c){return!(!c&&Yx(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||sr.Khmer(d))}function ij(d){for(const c of d)if(Yx(c.charCodeAt(0)))return!0;return!1}const Qo=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(d){this.pluginStatus=d.pluginStatus,this.pluginURL=d.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(d){this.applyArabicShaping=d.applyArabicShaping,this.processBidirectionalText=d.processBidirectionalText,this.processStyledBidirectionalText=d.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class ei{constructor(c,f){this.zoom=c,f?(this.now=f.now,this.fadeDuration=f.fadeDuration,this.zoomHistory=f.zoomHistory,this.transition=f.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Gx,this.transition={})}isSupportedScript(c){return function(f,x){for(const w of f)if(!rj(w.charCodeAt(0),x))return!1;return!0}(c,Qo.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const c=this.zoom,f=c-Math.floor(c),x=this.crossFadingFactor();return c>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:f+(1-f)*x}:{fromScale:.5,toScale:1,t:1-(1-x)*f}}}class _d{constructor(c,f){this.property=c,this.value=f,this.expression=function(x,w){if(xg(x))return new md(x,w);if(_g(x)){const T=Ix(x,w);if(T.result==="error")throw new Error(T.value.map(j=>`${j.key}: ${j.message}`).join(", "));return T.value}{let T=x;return w.type==="color"&&typeof x=="string"?T=yr.parse(x):w.type!=="padding"||typeof x!="number"&&!Array.isArray(x)?w.type==="variableAnchorOffsetCollection"&&Array.isArray(x)&&(T=wo.parse(x)):T=eo.parse(x),{kind:"constant",evaluate:()=>T}}}(f===void 0?c.specification.default:f,c.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(c,f,x){return this.property.possiblyEvaluate(this,c,f,x)}}class Eg{constructor(c){this.property=c,this.value=new _d(c,void 0)}transitioned(c,f){return new fw(this.property,this.value,f,X({},c.transition,this.transition),c.now)}untransitioned(){return new fw(this.property,this.value,null,{},0)}}class zg{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitionablePropertyValues)}getValue(c){return ae(this._values[c].value.value)}setValue(c,f){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Eg(this._values[c].property)),this._values[c].value=new _d(this._values[c].property,f===null?void 0:ae(f))}getTransition(c){return ae(this._values[c].transition)}setTransition(c,f){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Eg(this._values[c].property)),this._values[c].transition=ae(f)||void 0}serialize(){const c={};for(const f of Object.keys(this._values)){const x=this.getValue(f);x!==void 0&&(c[f]=x);const w=this.getTransition(f);w!==void 0&&(c[`${f}-transition`]=w)}return c}transitioned(c,f){const x=new kp(this._properties);for(const w of Object.keys(this._values))x._values[w]=this._values[w].transitioned(c,f._values[w]);return x}untransitioned(){const c=new kp(this._properties);for(const f of Object.keys(this._values))c._values[f]=this._values[f].untransitioned();return c}}class fw{constructor(c,f,x,w,T){this.property=c,this.value=f,this.begin=T+w.delay||0,this.end=this.begin+w.duration||0,c.specification.transition&&(w.delay||w.duration)&&(this.prior=x)}possiblyEvaluate(c,f,x){const w=c.now||0,T=this.value.possiblyEvaluate(c,f,x),j=this.prior;if(j){if(w>this.end)return this.prior=null,T;if(this.value.isDataDriven())return this.prior=null,T;if(w<this.begin)return j.possiblyEvaluate(c,f,x);{const A=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(j.possiblyEvaluate(c,f,x),T,function(I){if(I<=0)return 0;if(I>=1)return 1;const $=I*I,V=$*I;return 4*(I<.5?V:3*(I-$)+V-.75)}(A))}}return T}}class kp{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitioningPropertyValues)}possiblyEvaluate(c,f,x){const w=new Tp(this._properties);for(const T of Object.keys(this._values))w._values[T]=this._values[T].possiblyEvaluate(c,f,x);return w}hasTransition(){for(const c of Object.keys(this._values))if(this._values[c].prior)return!0;return!1}}class Cp{constructor(c){this._properties=c,this._values=Object.create(c.defaultPropertyValues)}hasValue(c){return this._values[c].value!==void 0}getValue(c){return ae(this._values[c].value)}setValue(c,f){this._values[c]=new _d(this._values[c].property,f===null?void 0:ae(f))}serialize(){const c={};for(const f of Object.keys(this._values)){const x=this.getValue(f);x!==void 0&&(c[f]=x)}return c}possiblyEvaluate(c,f,x){const w=new Tp(this._properties);for(const T of Object.keys(this._values))w._values[T]=this._values[T].possiblyEvaluate(c,f,x);return w}}class Ml{constructor(c,f,x){this.property=c,this.value=f,this.parameters=x}isConstant(){return this.value.kind==="constant"}constantOr(c){return this.value.kind==="constant"?this.value.value:c}evaluate(c,f,x,w){return this.property.evaluate(this.value,this.parameters,c,f,x,w)}}class Tp{constructor(c){this._properties=c,this._values=Object.create(c.defaultPossiblyEvaluatedValues)}get(c){return this._values[c]}}class fn{constructor(c){this.specification=c}possiblyEvaluate(c,f){if(c.isDataDriven())throw new Error("Value should not be data driven");return c.expression.evaluate(f)}interpolate(c,f,x){const w=is[this.specification.type];return w?w(c,f,x):c}}class jn{constructor(c,f){this.specification=c,this.overrides=f}possiblyEvaluate(c,f,x,w){return new Ml(this,c.expression.kind==="constant"||c.expression.kind==="camera"?{kind:"constant",value:c.expression.evaluate(f,null,{},x,w)}:c.expression,f)}interpolate(c,f,x){if(c.value.kind!=="constant"||f.value.kind!=="constant")return c;if(c.value.value===void 0||f.value.value===void 0)return new Ml(this,{kind:"constant",value:void 0},c.parameters);const w=is[this.specification.type];if(w){const T=w(c.value.value,f.value.value,x);return new Ml(this,{kind:"constant",value:T},c.parameters)}return c}evaluate(c,f,x,w,T,j){return c.kind==="constant"?c.value:c.evaluate(f,x,w,T,j)}}class Ig extends jn{possiblyEvaluate(c,f,x,w){if(c.value===void 0)return new Ml(this,{kind:"constant",value:void 0},f);if(c.expression.kind==="constant"){const T=c.expression.evaluate(f,null,{},x,w),j=c.property.specification.type==="resolvedImage"&&typeof T!="string"?T.name:T,A=this._calculate(j,j,j,f);return new Ml(this,{kind:"constant",value:A},f)}if(c.expression.kind==="camera"){const T=this._calculate(c.expression.evaluate({zoom:f.zoom-1}),c.expression.evaluate({zoom:f.zoom}),c.expression.evaluate({zoom:f.zoom+1}),f);return new Ml(this,{kind:"constant",value:T},f)}return new Ml(this,c.expression,f)}evaluate(c,f,x,w,T,j){if(c.kind==="source"){const A=c.evaluate(f,x,w,T,j);return this._calculate(A,A,A,f)}return c.kind==="composite"?this._calculate(c.evaluate({zoom:Math.floor(f.zoom)-1},x,w),c.evaluate({zoom:Math.floor(f.zoom)},x,w),c.evaluate({zoom:Math.floor(f.zoom)+1},x,w),f):c.value}_calculate(c,f,x,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:c,to:f}:{from:x,to:f}}interpolate(c){return c}}class Mg{constructor(c){this.specification=c}possiblyEvaluate(c,f,x,w){if(c.value!==void 0){if(c.expression.kind==="constant"){const T=c.expression.evaluate(f,null,{},x,w);return this._calculate(T,T,T,f)}return this._calculate(c.expression.evaluate(new ei(Math.floor(f.zoom-1),f)),c.expression.evaluate(new ei(Math.floor(f.zoom),f)),c.expression.evaluate(new ei(Math.floor(f.zoom+1),f)),f)}}_calculate(c,f,x,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:c,to:f}:{from:x,to:f}}interpolate(c){return c}}class Jx{constructor(c){this.specification=c}possiblyEvaluate(c,f,x,w){return!!c.expression.evaluate(f,null,{},x,w)}interpolate(){return!1}}class C{constructor(c){this.properties=c,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const f in c){const x=c[f];x.specification.overridable&&this.overridableProperties.push(f);const w=this.defaultPropertyValues[f]=new _d(x,void 0),T=this.defaultTransitionablePropertyValues[f]=new Eg(x);this.defaultTransitioningPropertyValues[f]=T.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=w.possiblyEvaluate({})}}}nn("DataDrivenProperty",jn),nn("DataConstantProperty",fn),nn("CrossFadedDataDrivenProperty",Ig),nn("CrossFadedProperty",Mg),nn("ColorRampProperty",Jx);const l="-transition";class m extends it{constructor(c,f){if(super(),this.id=c.id,this.type=c.type,this._featureFilter={filter:()=>!0,needGeometry:!1},c.type!=="custom"&&(this.metadata=c.metadata,this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,c.type!=="background"&&(this.source=c.source,this.sourceLayer=c["source-layer"],this.filter=c.filter),f.layout&&(this._unevaluatedLayout=new Cp(f.layout)),f.paint)){this._transitionablePaint=new zg(f.paint);for(const x in c.paint)this.setPaintProperty(x,c.paint[x],{validate:!1});for(const x in c.layout)this.setLayoutProperty(x,c.layout[x],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Tp(f.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(c){return c==="visibility"?this.visibility:this._unevaluatedLayout.getValue(c)}setLayoutProperty(c,f,x={}){f!=null&&this._validate(cw,`layers.${this.id}.layout.${c}`,c,f,x)||(c!=="visibility"?this._unevaluatedLayout.setValue(c,f):this.visibility=f)}getPaintProperty(c){return c.endsWith(l)?this._transitionablePaint.getTransition(c.slice(0,-11)):this._transitionablePaint.getValue(c)}setPaintProperty(c,f,x={}){if(f!=null&&this._validate(lw,`layers.${this.id}.paint.${c}`,c,f,x))return!1;if(c.endsWith(l))return this._transitionablePaint.setTransition(c.slice(0,-11),f||void 0),!1;{const w=this._transitionablePaint._values[c],T=w.property.specification["property-type"]==="cross-faded-data-driven",j=w.value.isDataDriven(),A=w.value;this._transitionablePaint.setValue(c,f),this._handleSpecialPaintPropertyUpdate(c);const I=this._transitionablePaint._values[c].value;return I.isDataDriven()||j||T||this._handleOverridablePaintPropertyUpdate(c,A,I)}}_handleSpecialPaintPropertyUpdate(c){}_handleOverridablePaintPropertyUpdate(c,f,x){return!1}isHidden(c){return!!(this.minzoom&&c<this.minzoom)||!!(this.maxzoom&&c>=this.maxzoom)||this.visibility==="none"}updateTransitions(c){this._transitioningPaint=this._transitionablePaint.transitioned(c,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(c,f){c.getCrossfadeParameters&&(this._crossfadeParameters=c.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(c,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(c,void 0,f)}serialize(){const c={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(c.layout=c.layout||{},c.layout.visibility=this.visibility),J(c,(f,x)=>!(f===void 0||x==="layout"&&!Object.keys(f).length||x==="paint"&&!Object.keys(f).length))}_validate(c,f,x,w,T={}){return(!T||T.validate!==!1)&&Qx(this,c.call(uh,{key:f,layerType:this.type,objectKey:x,value:w,styleSpec:ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const c in this.paint._values){const f=this.paint.get(c);if(f instanceof Ml&&ud(f.property.specification)&&(f.value.kind==="source"||f.value.kind==="composite")&&f.value.isStateDependent)return!0}return!1}}const v={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class _{constructor(c,f){this._structArray=c,this._pos1=f*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class k{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(c,f){return c._trim(),f&&(c.isTransferred=!0,f.push(c.arrayBuffer)),{length:c.length,arrayBuffer:c.arrayBuffer}}static deserialize(c){const f=Object.create(this.prototype);return f.arrayBuffer=c.arrayBuffer,f.length=c.length,f.capacity=c.arrayBuffer.byteLength/f.bytesPerElement,f._refreshViews(),f}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(c){this.reserve(c),this.length=c}reserve(c){if(c>this.capacity){this.capacity=Math.max(c,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const f=this.uint8;this._refreshViews(),f&&this.uint8.set(f)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function E(d,c=1){let f=0,x=0;return{members:d.map(w=>{const T=v[w.type].BYTES_PER_ELEMENT,j=f=M(f,Math.max(c,T)),A=w.components||1;return x=Math.max(x,T),f+=T*A,{name:w.name,type:w.type,components:A,offset:j}}),size:M(f,Math.max(x,c)),alignment:c}}function M(d,c){return Math.ceil(d/c)*c}class B extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,f){const x=this.length;return this.resize(x+1),this.emplace(x,c,f)}emplace(c,f,x){const w=2*c;return this.int16[w+0]=f,this.int16[w+1]=x,c}}B.prototype.bytesPerElement=4,nn("StructArrayLayout2i4",B);class W extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,f,x){const w=this.length;return this.resize(w+1),this.emplace(w,c,f,x)}emplace(c,f,x,w){const T=3*c;return this.int16[T+0]=f,this.int16[T+1]=x,this.int16[T+2]=w,c}}W.prototype.bytesPerElement=6,nn("StructArrayLayout3i6",W);class Z extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,f,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,c,f,x,w)}emplace(c,f,x,w,T){const j=4*c;return this.int16[j+0]=f,this.int16[j+1]=x,this.int16[j+2]=w,this.int16[j+3]=T,c}}Z.prototype.bytesPerElement=8,nn("StructArrayLayout4i8",Z);class Y extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,f,x,w,T,j){const A=this.length;return this.resize(A+1),this.emplace(A,c,f,x,w,T,j)}emplace(c,f,x,w,T,j,A){const I=6*c;return this.int16[I+0]=f,this.int16[I+1]=x,this.int16[I+2]=w,this.int16[I+3]=T,this.int16[I+4]=j,this.int16[I+5]=A,c}}Y.prototype.bytesPerElement=12,nn("StructArrayLayout2i4i12",Y);class le extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,f,x,w,T,j){const A=this.length;return this.resize(A+1),this.emplace(A,c,f,x,w,T,j)}emplace(c,f,x,w,T,j,A){const I=4*c,$=8*c;return this.int16[I+0]=f,this.int16[I+1]=x,this.uint8[$+4]=w,this.uint8[$+5]=T,this.uint8[$+6]=j,this.uint8[$+7]=A,c}}le.prototype.bytesPerElement=8,nn("StructArrayLayout2i4ub8",le);class he extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,f){const x=this.length;return this.resize(x+1),this.emplace(x,c,f)}emplace(c,f,x){const w=2*c;return this.float32[w+0]=f,this.float32[w+1]=x,c}}he.prototype.bytesPerElement=8,nn("StructArrayLayout2f8",he);class fe extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,f,x,w,T,j,A,I,$,V){const H=this.length;return this.resize(H+1),this.emplace(H,c,f,x,w,T,j,A,I,$,V)}emplace(c,f,x,w,T,j,A,I,$,V,H){const ee=10*c;return this.uint16[ee+0]=f,this.uint16[ee+1]=x,this.uint16[ee+2]=w,this.uint16[ee+3]=T,this.uint16[ee+4]=j,this.uint16[ee+5]=A,this.uint16[ee+6]=I,this.uint16[ee+7]=$,this.uint16[ee+8]=V,this.uint16[ee+9]=H,c}}fe.prototype.bytesPerElement=20,nn("StructArrayLayout10ui20",fe);class be extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,f,x,w,T,j,A,I,$,V,H,ee){const ie=this.length;return this.resize(ie+1),this.emplace(ie,c,f,x,w,T,j,A,I,$,V,H,ee)}emplace(c,f,x,w,T,j,A,I,$,V,H,ee,ie){const ce=12*c;return this.int16[ce+0]=f,this.int16[ce+1]=x,this.int16[ce+2]=w,this.int16[ce+3]=T,this.uint16[ce+4]=j,this.uint16[ce+5]=A,this.uint16[ce+6]=I,this.uint16[ce+7]=$,this.int16[ce+8]=V,this.int16[ce+9]=H,this.int16[ce+10]=ee,this.int16[ce+11]=ie,c}}be.prototype.bytesPerElement=24,nn("StructArrayLayout4i4ui4i24",be);class je extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,f,x){const w=this.length;return this.resize(w+1),this.emplace(w,c,f,x)}emplace(c,f,x,w){const T=3*c;return this.float32[T+0]=f,this.float32[T+1]=x,this.float32[T+2]=w,c}}je.prototype.bytesPerElement=12,nn("StructArrayLayout3f12",je);class Ae extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(c){const f=this.length;return this.resize(f+1),this.emplace(f,c)}emplace(c,f){return this.uint32[1*c+0]=f,c}}Ae.prototype.bytesPerElement=4,nn("StructArrayLayout1ul4",Ae);class De extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,f,x,w,T,j,A,I,$){const V=this.length;return this.resize(V+1),this.emplace(V,c,f,x,w,T,j,A,I,$)}emplace(c,f,x,w,T,j,A,I,$,V){const H=10*c,ee=5*c;return this.int16[H+0]=f,this.int16[H+1]=x,this.int16[H+2]=w,this.int16[H+3]=T,this.int16[H+4]=j,this.int16[H+5]=A,this.uint32[ee+3]=I,this.uint16[H+8]=$,this.uint16[H+9]=V,c}}De.prototype.bytesPerElement=20,nn("StructArrayLayout6i1ul2ui20",De);class ge extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,f,x,w,T,j){const A=this.length;return this.resize(A+1),this.emplace(A,c,f,x,w,T,j)}emplace(c,f,x,w,T,j,A){const I=6*c;return this.int16[I+0]=f,this.int16[I+1]=x,this.int16[I+2]=w,this.int16[I+3]=T,this.int16[I+4]=j,this.int16[I+5]=A,c}}ge.prototype.bytesPerElement=12,nn("StructArrayLayout2i2i2i12",ge);class Ue extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,f,x,w,T){const j=this.length;return this.resize(j+1),this.emplace(j,c,f,x,w,T)}emplace(c,f,x,w,T,j){const A=4*c,I=8*c;return this.float32[A+0]=f,this.float32[A+1]=x,this.float32[A+2]=w,this.int16[I+6]=T,this.int16[I+7]=j,c}}Ue.prototype.bytesPerElement=16,nn("StructArrayLayout2f1f2i16",Ue);class Xe extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,f,x,w,T,j){const A=this.length;return this.resize(A+1),this.emplace(A,c,f,x,w,T,j)}emplace(c,f,x,w,T,j,A){const I=16*c,$=4*c,V=8*c;return this.uint8[I+0]=f,this.uint8[I+1]=x,this.float32[$+1]=w,this.float32[$+2]=T,this.int16[V+6]=j,this.int16[V+7]=A,c}}Xe.prototype.bytesPerElement=16,nn("StructArrayLayout2ub2f2i16",Xe);class et extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,f,x){const w=this.length;return this.resize(w+1),this.emplace(w,c,f,x)}emplace(c,f,x,w){const T=3*c;return this.uint16[T+0]=f,this.uint16[T+1]=x,this.uint16[T+2]=w,c}}et.prototype.bytesPerElement=6,nn("StructArrayLayout3ui6",et);class mt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,f,x,w,T,j,A,I,$,V,H,ee,ie,ce,ue,ye,Te){const Je=this.length;return this.resize(Je+1),this.emplace(Je,c,f,x,w,T,j,A,I,$,V,H,ee,ie,ce,ue,ye,Te)}emplace(c,f,x,w,T,j,A,I,$,V,H,ee,ie,ce,ue,ye,Te,Je){const Ve=24*c,Ze=12*c,ot=48*c;return this.int16[Ve+0]=f,this.int16[Ve+1]=x,this.uint16[Ve+2]=w,this.uint16[Ve+3]=T,this.uint32[Ze+2]=j,this.uint32[Ze+3]=A,this.uint32[Ze+4]=I,this.uint16[Ve+10]=$,this.uint16[Ve+11]=V,this.uint16[Ve+12]=H,this.float32[Ze+7]=ee,this.float32[Ze+8]=ie,this.uint8[ot+36]=ce,this.uint8[ot+37]=ue,this.uint8[ot+38]=ye,this.uint32[Ze+10]=Te,this.int16[Ve+22]=Je,c}}mt.prototype.bytesPerElement=48,nn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",mt);class jt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,f,x,w,T,j,A,I,$,V,H,ee,ie,ce,ue,ye,Te,Je,Ve,Ze,ot,wt,Gt,Cn,Qt,Vt,xn,an){const Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,c,f,x,w,T,j,A,I,$,V,H,ee,ie,ce,ue,ye,Te,Je,Ve,Ze,ot,wt,Gt,Cn,Qt,Vt,xn,an)}emplace(c,f,x,w,T,j,A,I,$,V,H,ee,ie,ce,ue,ye,Te,Je,Ve,Ze,ot,wt,Gt,Cn,Qt,Vt,xn,an,Jt){const dt=32*c,vn=16*c;return this.int16[dt+0]=f,this.int16[dt+1]=x,this.int16[dt+2]=w,this.int16[dt+3]=T,this.int16[dt+4]=j,this.int16[dt+5]=A,this.int16[dt+6]=I,this.int16[dt+7]=$,this.uint16[dt+8]=V,this.uint16[dt+9]=H,this.uint16[dt+10]=ee,this.uint16[dt+11]=ie,this.uint16[dt+12]=ce,this.uint16[dt+13]=ue,this.uint16[dt+14]=ye,this.uint16[dt+15]=Te,this.uint16[dt+16]=Je,this.uint16[dt+17]=Ve,this.uint16[dt+18]=Ze,this.uint16[dt+19]=ot,this.uint16[dt+20]=wt,this.uint16[dt+21]=Gt,this.uint16[dt+22]=Cn,this.uint32[vn+12]=Qt,this.float32[vn+13]=Vt,this.float32[vn+14]=xn,this.uint16[dt+30]=an,this.uint16[dt+31]=Jt,c}}jt.prototype.bytesPerElement=64,nn("StructArrayLayout8i15ui1ul2f2ui64",jt);class Ut extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c){const f=this.length;return this.resize(f+1),this.emplace(f,c)}emplace(c,f){return this.float32[1*c+0]=f,c}}Ut.prototype.bytesPerElement=4,nn("StructArrayLayout1f4",Ut);class Zt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,f,x){const w=this.length;return this.resize(w+1),this.emplace(w,c,f,x)}emplace(c,f,x,w){const T=3*c;return this.uint16[6*c+0]=f,this.float32[T+1]=x,this.float32[T+2]=w,c}}Zt.prototype.bytesPerElement=12,nn("StructArrayLayout1ui2f12",Zt);class Ft extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,f,x){const w=this.length;return this.resize(w+1),this.emplace(w,c,f,x)}emplace(c,f,x,w){const T=4*c;return this.uint32[2*c+0]=f,this.uint16[T+2]=x,this.uint16[T+3]=w,c}}Ft.prototype.bytesPerElement=8,nn("StructArrayLayout1ul2ui8",Ft);class Dt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,f){const x=this.length;return this.resize(x+1),this.emplace(x,c,f)}emplace(c,f,x){const w=2*c;return this.uint16[w+0]=f,this.uint16[w+1]=x,c}}Dt.prototype.bytesPerElement=4,nn("StructArrayLayout2ui4",Dt);class pn extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c){const f=this.length;return this.resize(f+1),this.emplace(f,c)}emplace(c,f){return this.uint16[1*c+0]=f,c}}pn.prototype.bytesPerElement=2,nn("StructArrayLayout1ui2",pn);class Mn extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,f,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,c,f,x,w)}emplace(c,f,x,w,T){const j=4*c;return this.float32[j+0]=f,this.float32[j+1]=x,this.float32[j+2]=w,this.float32[j+3]=T,c}}Mn.prototype.bytesPerElement=16,nn("StructArrayLayout4f16",Mn);class Nt extends _{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new y(this.anchorPointX,this.anchorPointY)}}Nt.prototype.size=20;class Ht extends De{get(c){return new Nt(this,c)}}nn("CollisionBoxArray",Ht);class En extends _{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(c){this._structArray.uint8[this._pos1+37]=c}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(c){this._structArray.uint8[this._pos1+38]=c}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(c){this._structArray.uint32[this._pos4+10]=c}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}En.prototype.size=48;class ti extends mt{get(c){return new En(this,c)}}nn("PlacedSymbolArray",ti);class Qn extends _{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(c){this._structArray.uint32[this._pos4+12]=c}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Qn.prototype.size=64;class nr extends jt{get(c){return new Qn(this,c)}}nn("SymbolInstanceArray",nr);class ni extends Ut{getoffsetX(c){return this.float32[1*c+0]}}nn("GlyphOffsetArray",ni);class Ns extends W{getx(c){return this.int16[3*c+0]}gety(c){return this.int16[3*c+1]}gettileUnitDistanceFromAnchor(c){return this.int16[3*c+2]}}nn("SymbolLineVertexArray",Ns);class el extends _{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}el.prototype.size=12;class ri extends Zt{get(c){return new el(this,c)}}nn("TextAnchorOffsetArray",ri);class So extends _{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}So.prototype.size=8;class no extends Ft{get(c){return new So(this,c)}}nn("FeatureIndexArray",no);class Vs extends B{}class ro extends B{}class Rl extends B{}class wd extends Y{}class Rg extends le{}class Sd extends he{}class xa extends fe{}class Dg extends be{}class ev extends je{}class va extends Ae{}class ba extends ge{}class su extends Xe{}class tl extends et{}class _s extends Dt{}const Ws=E([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ho}=Ws;class or{constructor(c=[]){this.segments=c}prepareSegment(c,f,x,w){let T=this.segments[this.segments.length-1];return c>or.MAX_VERTEX_ARRAY_LENGTH&&Ce(`Max vertices per segment is ${or.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${c}`),(!T||T.vertexLength+c>or.MAX_VERTEX_ARRAY_LENGTH||T.sortKey!==w)&&(T={vertexOffset:f.length,primitiveOffset:x.length,vertexLength:0,primitiveLength:0},w!==void 0&&(T.sortKey=w),this.segments.push(T)),T}get(){return this.segments}destroy(){for(const c of this.segments)for(const f in c.vaos)c.vaos[f].destroy()}static simpleSegment(c,f,x,w){return new or([{vertexOffset:c,primitiveOffset:f,vertexLength:x,primitiveLength:w,vaos:{},sortKey:0}])}}function hh(d,c){return 256*(d=Q(Math.floor(d),0,255))+Q(Math.floor(c),0,255)}or.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,nn("SegmentVector",or);const kd=E([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Cd={exports:{}},pw={exports:{}};pw.exports=function(d,c){var f,x,w,T,j,A,I,$;for(x=d.length-(f=3&d.length),w=c,j=3432918353,A=461845907,$=0;$<x;)I=255&d.charCodeAt($)|(255&d.charCodeAt(++$))<<8|(255&d.charCodeAt(++$))<<16|(255&d.charCodeAt(++$))<<24,++$,w=27492+(65535&(T=5*(65535&(w=(w^=I=(65535&(I=(I=(65535&I)*j+(((I>>>16)*j&65535)<<16)&4294967295)<<15|I>>>17))*A+(((I>>>16)*A&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(T>>>16)&65535)<<16);switch(I=0,f){case 3:I^=(255&d.charCodeAt($+2))<<16;case 2:I^=(255&d.charCodeAt($+1))<<8;case 1:w^=I=(65535&(I=(I=(65535&(I^=255&d.charCodeAt($)))*j+(((I>>>16)*j&65535)<<16)&4294967295)<<15|I>>>17))*A+(((I>>>16)*A&65535)<<16)&4294967295}return w^=d.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0};var sj=pw.exports,mw={exports:{}};mw.exports=function(d,c){for(var f,x=d.length,w=c^x,T=0;x>=4;)f=1540483477*(65535&(f=255&d.charCodeAt(T)|(255&d.charCodeAt(++T))<<8|(255&d.charCodeAt(++T))<<16|(255&d.charCodeAt(++T))<<24))+((1540483477*(f>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),x-=4,++T;switch(x){case 3:w^=(255&d.charCodeAt(T+2))<<16;case 2:w^=(255&d.charCodeAt(T+1))<<8;case 1:w=1540483477*(65535&(w^=255&d.charCodeAt(T)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0};var ou=sj,gw=mw.exports;Cd.exports=ou,Cd.exports.murmur3=ou,Cd.exports.murmur2=gw;var Lg=h(Cd.exports);class jp{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(c,f,x,w){this.ids.push(Fg(c)),this.positions.push(f,x,w)}getPositions(c){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const f=Fg(c);let x=0,w=this.ids.length-1;for(;x<w;){const j=x+w>>1;this.ids[j]>=f?w=j:x=j+1}const T=[];for(;this.ids[x]===f;)T.push({index:this.positions[3*x],start:this.positions[3*x+1],end:this.positions[3*x+2]}),x++;return T}static serialize(c,f){const x=new Float64Array(c.ids),w=new Uint32Array(c.positions);return Bg(x,w,0,x.length-1),f&&f.push(x.buffer,w.buffer),{ids:x,positions:w}}static deserialize(c){const f=new jp;return f.ids=c.ids,f.positions=c.positions,f.indexed=!0,f}}function Fg(d){const c=+d;return!isNaN(c)&&c<=Number.MAX_SAFE_INTEGER?c:Lg(String(d))}function Bg(d,c,f,x){for(;f<x;){const w=d[f+x>>1];let T=f-1,j=x+1;for(;;){do T++;while(d[T]<w);do j--;while(d[j]>w);if(T>=j)break;Td(d,T,j),Td(c,3*T,3*j),Td(c,3*T+1,3*j+1),Td(c,3*T+2,3*j+2)}j-f<x-j?(Bg(d,c,f,j),f=j+1):(Bg(d,c,j+1,x),x=j)}}function Td(d,c,f){const x=d[c];d[c]=d[f],d[f]=x}nn("FeaturePositionMap",jp);class Pp{constructor(c,f){this.gl=c.gl,this.location=f}}class yw extends Pp{constructor(c,f){super(c,f),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class jD extends Pp{constructor(c,f){super(c,f),this.current=[0,0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3]))}}class PD extends Pp{constructor(c,f){super(c,f),this.current=yr.transparent}set(c){c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a))}}const HZ=new Float32Array(16);function oj(d){return[hh(255*d.r,255*d.g),hh(255*d.b,255*d.a)]}class tv{constructor(c,f,x){this.value=c,this.uniformNames=f.map(w=>`u_${w}`),this.type=x}setUniform(c,f,x){c.set(x.constantOr(this.value))}getBinding(c,f,x){return this.type==="color"?new PD(c,f):new yw(c,f)}}class $g{constructor(c,f){this.uniformNames=f.map(x=>`u_${x}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(c,f){this.pixelRatioFrom=f.pixelRatio,this.pixelRatioTo=c.pixelRatio,this.patternFrom=f.tlbr,this.patternTo=c.tlbr}setUniform(c,f,x,w){const T=w==="u_pattern_to"?this.patternTo:w==="u_pattern_from"?this.patternFrom:w==="u_pixel_ratio_to"?this.pixelRatioTo:w==="u_pixel_ratio_from"?this.pixelRatioFrom:null;T&&c.set(T)}getBinding(c,f,x){return x.substr(0,9)==="u_pattern"?new jD(c,f):new yw(c,f)}}class dh{constructor(c,f,x,w){this.expression=c,this.type=x,this.maxValue=0,this.paintVertexAttributes=f.map(T=>({name:`a_${T}`,type:"Float32",components:x==="color"?2:1,offset:0})),this.paintVertexArray=new w}populatePaintArray(c,f,x,w,T){const j=this.paintVertexArray.length,A=this.expression.evaluate(new ei(0),f,{},w,[],T);this.paintVertexArray.resize(c),this._setPaintValue(j,c,A)}updatePaintArray(c,f,x,w){const T=this.expression.evaluate({zoom:0},x,w);this._setPaintValue(c,f,T)}_setPaintValue(c,f,x){if(this.type==="color"){const w=oj(x);for(let T=c;T<f;T++)this.paintVertexArray.emplace(T,w[0],w[1])}else{for(let w=c;w<f;w++)this.paintVertexArray.emplace(w,x);this.maxValue=Math.max(this.maxValue,Math.abs(x))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Sc{constructor(c,f,x,w,T,j){this.expression=c,this.uniformNames=f.map(A=>`u_${A}_t`),this.type=x,this.useIntegerZoom=w,this.zoom=T,this.maxValue=0,this.paintVertexAttributes=f.map(A=>({name:`a_${A}`,type:"Float32",components:x==="color"?4:2,offset:0})),this.paintVertexArray=new j}populatePaintArray(c,f,x,w,T){const j=this.expression.evaluate(new ei(this.zoom),f,{},w,[],T),A=this.expression.evaluate(new ei(this.zoom+1),f,{},w,[],T),I=this.paintVertexArray.length;this.paintVertexArray.resize(c),this._setPaintValue(I,c,j,A)}updatePaintArray(c,f,x,w){const T=this.expression.evaluate({zoom:this.zoom},x,w),j=this.expression.evaluate({zoom:this.zoom+1},x,w);this._setPaintValue(c,f,T,j)}_setPaintValue(c,f,x,w){if(this.type==="color"){const T=oj(x),j=oj(w);for(let A=c;A<f;A++)this.paintVertexArray.emplace(A,T[0],T[1],j[0],j[1])}else{for(let T=c;T<f;T++)this.paintVertexArray.emplace(T,x,w);this.maxValue=Math.max(this.maxValue,Math.abs(x),Math.abs(w))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(c,f){const x=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,w=Q(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);c.set(w)}getBinding(c,f,x){return new yw(c,f)}}class jd{constructor(c,f,x,w,T,j){this.expression=c,this.type=f,this.useIntegerZoom=x,this.zoom=w,this.layerId=j,this.zoomInPaintVertexArray=new T,this.zoomOutPaintVertexArray=new T}populatePaintArray(c,f,x){const w=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(c),this.zoomOutPaintVertexArray.resize(c),this._setPaintValues(w,c,f.patterns&&f.patterns[this.layerId],x)}updatePaintArray(c,f,x,w,T){this._setPaintValues(c,f,x.patterns&&x.patterns[this.layerId],T)}_setPaintValues(c,f,x,w){if(!w||!x)return;const{min:T,mid:j,max:A}=x,I=w[T],$=w[j],V=w[A];if(I&&$&&V)for(let H=c;H<f;H++)this.zoomInPaintVertexArray.emplace(H,$.tl[0],$.tl[1],$.br[0],$.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],$.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(H,$.tl[0],$.tl[1],$.br[0],$.br[1],V.tl[0],V.tl[1],V.br[0],V.br[1],$.pixelRatio,V.pixelRatio)}upload(c){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=c.createVertexBuffer(this.zoomInPaintVertexArray,kd.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=c.createVertexBuffer(this.zoomOutPaintVertexArray,kd.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class OD{constructor(c,f,x){this.binders={},this._buffers=[];const w=[];for(const T in c.paint._values){if(!x(T))continue;const j=c.paint.get(T);if(!(j instanceof Ml&&ud(j.property.specification)))continue;const A=GZ(T,c.type),I=j.value,$=j.property.specification.type,V=j.property.useIntegerZoom,H=j.property.specification["property-type"],ee=H==="cross-faded"||H==="cross-faded-data-driven";if(I.kind==="constant")this.binders[T]=ee?new $g(I.value,A):new tv(I.value,A,$),w.push(`/u_${T}`);else if(I.kind==="source"||ee){const ie=AD(T,$,"source");this.binders[T]=ee?new jd(I,$,V,f,ie,c.id):new dh(I,A,$,ie),w.push(`/a_${T}`)}else{const ie=AD(T,$,"composite");this.binders[T]=new Sc(I,A,$,V,f,ie),w.push(`/z_${T}`)}}this.cacheKey=w.sort().join("")}getMaxValue(c){const f=this.binders[c];return f instanceof dh||f instanceof Sc?f.maxValue:0}populatePaintArrays(c,f,x,w,T){for(const j in this.binders){const A=this.binders[j];(A instanceof dh||A instanceof Sc||A instanceof jd)&&A.populatePaintArray(c,f,x,w,T)}}setConstantPatternPositions(c,f){for(const x in this.binders){const w=this.binders[x];w instanceof $g&&w.setConstantPatternPositions(c,f)}}updatePaintArrays(c,f,x,w,T){let j=!1;for(const A in c){const I=f.getPositions(A);for(const $ of I){const V=x.feature($.index);for(const H in this.binders){const ee=this.binders[H];if((ee instanceof dh||ee instanceof Sc||ee instanceof jd)&&ee.expression.isStateDependent===!0){const ie=w.paint.get(H);ee.expression=ie.value,ee.updatePaintArray($.start,$.end,V,c[A],T),j=!0}}}}return j}defines(){const c=[];for(const f in this.binders){const x=this.binders[f];(x instanceof tv||x instanceof $g)&&c.push(...x.uniformNames.map(w=>`#define HAS_UNIFORM_${w}`))}return c}getBinderAttributes(){const c=[];for(const f in this.binders){const x=this.binders[f];if(x instanceof dh||x instanceof Sc)for(let w=0;w<x.paintVertexAttributes.length;w++)c.push(x.paintVertexAttributes[w].name);else if(x instanceof jd)for(let w=0;w<kd.members.length;w++)c.push(kd.members[w].name)}return c}getBinderUniforms(){const c=[];for(const f in this.binders){const x=this.binders[f];if(x instanceof tv||x instanceof $g||x instanceof Sc)for(const w of x.uniformNames)c.push(w)}return c}getPaintVertexBuffers(){return this._buffers}getUniforms(c,f){const x=[];for(const w in this.binders){const T=this.binders[w];if(T instanceof tv||T instanceof $g||T instanceof Sc){for(const j of T.uniformNames)if(f[j]){const A=T.getBinding(c,f[j],j);x.push({name:j,property:w,binding:A})}}}return x}setUniforms(c,f,x,w){for(const{name:T,property:j,binding:A}of f)this.binders[j].setUniform(A,w,x.get(j),T)}updatePaintBuffers(c){this._buffers=[];for(const f in this.binders){const x=this.binders[f];if(c&&x instanceof jd){const w=c.fromScale===2?x.zoomInPaintVertexBuffer:x.zoomOutPaintVertexBuffer;w&&this._buffers.push(w)}else(x instanceof dh||x instanceof Sc)&&x.paintVertexBuffer&&this._buffers.push(x.paintVertexBuffer)}}upload(c){for(const f in this.binders){const x=this.binders[f];(x instanceof dh||x instanceof Sc||x instanceof jd)&&x.upload(c)}this.updatePaintBuffers()}destroy(){for(const c in this.binders){const f=this.binders[c];(f instanceof dh||f instanceof Sc||f instanceof jd)&&f.destroy()}}}class Op{constructor(c,f,x=()=>!0){this.programConfigurations={};for(const w of c)this.programConfigurations[w.id]=new OD(w,f,x);this.needsUpload=!1,this._featureMap=new jp,this._bufferOffset=0}populatePaintArrays(c,f,x,w,T,j){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(c,f,w,T,j);f.id!==void 0&&this._featureMap.add(f.id,x,this._bufferOffset,c),this._bufferOffset=c,this.needsUpload=!0}updatePaintArrays(c,f,x,w){for(const T of x)this.needsUpload=this.programConfigurations[T.id].updatePaintArrays(c,this._featureMap,f,T,w)||this.needsUpload}get(c){return this.programConfigurations[c]}upload(c){if(this.needsUpload){for(const f in this.programConfigurations)this.programConfigurations[f].upload(c);this.needsUpload=!1}}destroy(){for(const c in this.programConfigurations)this.programConfigurations[c].destroy()}}function GZ(d,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(`${c}-`,"").replace(/-/g,"_")]}function AD(d,c,f){const x={color:{source:he,composite:Mn},number:{source:Ut,composite:he}},w=function(T){return{"line-pattern":{source:xa,composite:xa},"fill-pattern":{source:xa,composite:xa},"fill-extrusion-pattern":{source:xa,composite:xa}}[T]}(d);return w&&w[f]||x[c][f]}nn("ConstantBinder",tv),nn("CrossFadedConstantBinder",$g),nn("SourceExpressionBinder",dh),nn("CrossFadedCompositeBinder",jd),nn("CompositeExpressionBinder",Sc),nn("ProgramConfiguration",OD,{omit:["_buffers"]}),nn("ProgramConfigurationSet",Op);const Bi=8192,aj=Math.pow(2,14)-1,ED=-aj-1;function Ap(d){const c=Bi/d.extent,f=d.loadGeometry();for(let x=0;x<f.length;x++){const w=f[x];for(let T=0;T<w.length;T++){const j=w[T],A=Math.round(j.x*c),I=Math.round(j.y*c);j.x=Q(A,ED,aj),j.y=Q(I,ED,aj),(A<j.x||A>j.x+1||I<j.y||I>j.y+1)&&Ce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return f}function Ep(d,c){return{type:d.type,id:d.id,properties:d.properties,geometry:c?Ap(d):[]}}function xw(d,c,f,x,w){d.emplaceBack(2*c+(x+1)/2,2*f+(w+1)/2)}class lj{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(f=>f.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new ro,this.indexArray=new tl,this.segments=new or,this.programConfigurations=new Op(c.layers,c.zoom),this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(c,f,x){const w=this.layers[0],T=[];let j=null,A=!1;w.type==="circle"&&(j=w.layout.get("circle-sort-key"),A=!j.isConstant());for(const{feature:I,id:$,index:V,sourceLayerIndex:H}of c){const ee=this.layers[0]._featureFilter.needGeometry,ie=Ep(I,ee);if(!this.layers[0]._featureFilter.filter(new ei(this.zoom),ie,x))continue;const ce=A?j.evaluate(ie,{},x):void 0,ue={id:$,properties:I.properties,type:I.type,sourceLayerIndex:H,index:V,geometry:ee?ie.geometry:Ap(I),patterns:{},sortKey:ce};T.push(ue)}A&&T.sort((I,$)=>I.sortKey-$.sortKey);for(const I of T){const{geometry:$,index:V,sourceLayerIndex:H}=I,ee=c[V].feature;this.addFeature(I,$,V,x),f.featureIndex.insert(ee,$,V,H,this.index)}}update(c,f,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,f,this.stateDependentLayers,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Ho),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(c,f,x,w){for(const T of f)for(const j of T){const A=j.x,I=j.y;if(A<0||A>=Bi||I<0||I>=Bi)continue;const $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,c.sortKey),V=$.vertexLength;xw(this.layoutVertexArray,A,I,-1,-1),xw(this.layoutVertexArray,A,I,1,-1),xw(this.layoutVertexArray,A,I,1,1),xw(this.layoutVertexArray,A,I,-1,1),this.indexArray.emplaceBack(V,V+1,V+2),this.indexArray.emplaceBack(V,V+3,V+2),$.vertexLength+=4,$.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,x,{},w)}}function zD(d,c){for(let f=0;f<d.length;f++)if(Ng(c,d[f]))return!0;for(let f=0;f<c.length;f++)if(Ng(d,c[f]))return!0;return!!cj(d,c)}function XZ(d,c,f){return!!Ng(d,c)||!!uj(c,d,f)}function ID(d,c){if(d.length===1)return RD(c,d[0]);for(let f=0;f<c.length;f++){const x=c[f];for(let w=0;w<x.length;w++)if(Ng(d,x[w]))return!0}for(let f=0;f<d.length;f++)if(RD(c,d[f]))return!0;for(let f=0;f<c.length;f++)if(cj(d,c[f]))return!0;return!1}function KZ(d,c,f){if(d.length>1){if(cj(d,c))return!0;for(let x=0;x<c.length;x++)if(uj(c[x],d,f))return!0}for(let x=0;x<d.length;x++)if(uj(d[x],c,f))return!0;return!1}function cj(d,c){if(d.length===0||c.length===0)return!1;for(let f=0;f<d.length-1;f++){const x=d[f],w=d[f+1];for(let T=0;T<c.length-1;T++)if(ZZ(x,w,c[T],c[T+1]))return!0}return!1}function ZZ(d,c,f,x){return $e(d,f,x)!==$e(c,f,x)&&$e(d,c,f)!==$e(d,c,x)}function uj(d,c,f){const x=f*f;if(c.length===1)return d.distSqr(c[0])<x;for(let w=1;w<c.length;w++)if(MD(d,c[w-1],c[w])<x)return!0;return!1}function MD(d,c,f){const x=c.distSqr(f);if(x===0)return d.distSqr(c);const w=((d.x-c.x)*(f.x-c.x)+(d.y-c.y)*(f.y-c.y))/x;return d.distSqr(w<0?c:w>1?f:f.sub(c)._mult(w)._add(c))}function RD(d,c){let f,x,w,T=!1;for(let j=0;j<d.length;j++){f=d[j];for(let A=0,I=f.length-1;A<f.length;I=A++)x=f[A],w=f[I],x.y>c.y!=w.y>c.y&&c.x<(w.x-x.x)*(c.y-x.y)/(w.y-x.y)+x.x&&(T=!T)}return T}function Ng(d,c){let f=!1;for(let x=0,w=d.length-1;x<d.length;w=x++){const T=d[x],j=d[w];T.y>c.y!=j.y>c.y&&c.x<(j.x-T.x)*(c.y-T.y)/(j.y-T.y)+T.x&&(f=!f)}return f}function YZ(d,c,f){const x=f[0],w=f[2];if(d.x<x.x&&c.x<x.x||d.x>w.x&&c.x>w.x||d.y<x.y&&c.y<x.y||d.y>w.y&&c.y>w.y)return!1;const T=$e(d,c,f[0]);return T!==$e(d,c,f[1])||T!==$e(d,c,f[2])||T!==$e(d,c,f[3])}function nv(d,c,f){const x=c.paint.get(d).value;return x.kind==="constant"?x.value:f.programConfigurations.get(c.id).getMaxValue(d)}function vw(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function bw(d,c,f,x,w){if(!c[0]&&!c[1])return d;const T=y.convert(c)._mult(w);f==="viewport"&&T._rotate(-x);const j=[];for(let A=0;A<d.length;A++)j.push(d[A].sub(T));return j}let DD,LD;nn("CircleBucket",lj,{omit:["layers"]});var JZ={get paint(){return LD=LD||new C({"circle-radius":new jn(ze.paint_circle["circle-radius"]),"circle-color":new jn(ze.paint_circle["circle-color"]),"circle-blur":new jn(ze.paint_circle["circle-blur"]),"circle-opacity":new jn(ze.paint_circle["circle-opacity"]),"circle-translate":new fn(ze.paint_circle["circle-translate"]),"circle-translate-anchor":new fn(ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new fn(ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new fn(ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new jn(ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new jn(ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new jn(ze.paint_circle["circle-stroke-opacity"])})},get layout(){return DD=DD||new C({"circle-sort-key":new jn(ze.layout_circle["circle-sort-key"])})}},ko=1e-6,Vg=typeof Float32Array<"u"?Float32Array:Array;function hj(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function FD(d,c,f){var x=c[0],w=c[1],T=c[2],j=c[3],A=c[4],I=c[5],$=c[6],V=c[7],H=c[8],ee=c[9],ie=c[10],ce=c[11],ue=c[12],ye=c[13],Te=c[14],Je=c[15],Ve=f[0],Ze=f[1],ot=f[2],wt=f[3];return d[0]=Ve*x+Ze*A+ot*H+wt*ue,d[1]=Ve*w+Ze*I+ot*ee+wt*ye,d[2]=Ve*T+Ze*$+ot*ie+wt*Te,d[3]=Ve*j+Ze*V+ot*ce+wt*Je,d[4]=(Ve=f[4])*x+(Ze=f[5])*A+(ot=f[6])*H+(wt=f[7])*ue,d[5]=Ve*w+Ze*I+ot*ee+wt*ye,d[6]=Ve*T+Ze*$+ot*ie+wt*Te,d[7]=Ve*j+Ze*V+ot*ce+wt*Je,d[8]=(Ve=f[8])*x+(Ze=f[9])*A+(ot=f[10])*H+(wt=f[11])*ue,d[9]=Ve*w+Ze*I+ot*ee+wt*ye,d[10]=Ve*T+Ze*$+ot*ie+wt*Te,d[11]=Ve*j+Ze*V+ot*ce+wt*Je,d[12]=(Ve=f[12])*x+(Ze=f[13])*A+(ot=f[14])*H+(wt=f[15])*ue,d[13]=Ve*w+Ze*I+ot*ee+wt*ye,d[14]=Ve*T+Ze*$+ot*ie+wt*Te,d[15]=Ve*j+Ze*V+ot*ce+wt*Je,d}Math.hypot||(Math.hypot=function(){for(var d=0,c=arguments.length;c--;)d+=arguments[c]*arguments[c];return Math.sqrt(d)});var rv,eY=FD;function _w(d,c,f){var x=c[0],w=c[1],T=c[2],j=c[3];return d[0]=f[0]*x+f[4]*w+f[8]*T+f[12]*j,d[1]=f[1]*x+f[5]*w+f[9]*T+f[13]*j,d[2]=f[2]*x+f[6]*w+f[10]*T+f[14]*j,d[3]=f[3]*x+f[7]*w+f[11]*T+f[15]*j,d}rv=new Vg(4),Vg!=Float32Array&&(rv[0]=0,rv[1]=0,rv[2]=0,rv[3]=0);class tY extends m{constructor(c){super(c,JZ)}createBucket(c){return new lj(c)}queryRadius(c){const f=c;return nv("circle-radius",this,f)+nv("circle-stroke-width",this,f)+vw(this.paint.get("circle-translate"))}queryIntersectsFeature(c,f,x,w,T,j,A,I){const $=bw(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),j.angle,A),V=this.paint.get("circle-radius").evaluate(f,x)+this.paint.get("circle-stroke-width").evaluate(f,x),H=this.paint.get("circle-pitch-alignment")==="map",ee=H?$:function(ce,ue){return ce.map(ye=>BD(ye,ue))}($,I),ie=H?V*A:V;for(const ce of w)for(const ue of ce){const ye=H?ue:BD(ue,I);let Te=ie;const Je=_w([],[ue.x,ue.y,0,1],I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Te*=Je[3]/j.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Te*=j.cameraToCenterDistance/Je[3]),XZ(ee,ye,Te))return!0}return!1}}function BD(d,c){const f=_w([],[d.x,d.y,0,1],c);return new y(f[0]/f[3],f[1]/f[3])}class $D extends lj{}let ND;nn("HeatmapBucket",$D,{omit:["layers"]});var nY={get paint(){return ND=ND||new C({"heatmap-radius":new jn(ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new jn(ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new fn(ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Jx(ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new fn(ze.paint_heatmap["heatmap-opacity"])})}};function dj(d,{width:c,height:f},x,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==c*f*x)throw new RangeError(`mismatched image size. expected: ${w.length} but got: ${c*f*x}`)}else w=new Uint8Array(c*f*x);return d.width=c,d.height=f,d.data=w,d}function VD(d,{width:c,height:f},x){if(c===d.width&&f===d.height)return;const w=dj({},{width:c,height:f},x);fj(d,w,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,c),height:Math.min(d.height,f)},x),d.width=c,d.height=f,d.data=w.data}function fj(d,c,f,x,w,T){if(w.width===0||w.height===0)return c;if(w.width>d.width||w.height>d.height||f.x>d.width-w.width||f.y>d.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>c.width||w.height>c.height||x.x>c.width-w.width||x.y>c.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const j=d.data,A=c.data;if(j===A)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<w.height;I++){const $=((f.y+I)*d.width+f.x)*T,V=((x.y+I)*c.width+x.x)*T;for(let H=0;H<w.width*T;H++)A[V+H]=j[$+H]}return c}class iv{constructor(c,f){dj(this,c,1,f)}resize(c){VD(this,c,1)}clone(){return new iv({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,f,x,w,T){fj(c,f,x,w,T,1)}}class nl{constructor(c,f){dj(this,c,4,f)}resize(c){VD(this,c,4)}replace(c,f){f?this.data.set(c):this.data=c instanceof Uint8ClampedArray?new Uint8Array(c.buffer):c}clone(){return new nl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,f,x,w,T){fj(c,f,x,w,T,4)}}function WD(d){const c={},f=d.resolution||256,x=d.clips?d.clips.length:1,w=d.image||new nl({width:f,height:x});if(Math.log(f)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${f}`);const T=(j,A,I)=>{c[d.evaluationKey]=I;const $=d.expression.evaluate(c);w.data[j+A+0]=Math.floor(255*$.r/$.a),w.data[j+A+1]=Math.floor(255*$.g/$.a),w.data[j+A+2]=Math.floor(255*$.b/$.a),w.data[j+A+3]=Math.floor(255*$.a)};if(d.clips)for(let j=0,A=0;j<x;++j,A+=4*f)for(let I=0,$=0;I<f;I++,$+=4){const V=I/(f-1),{start:H,end:ee}=d.clips[j];T(A,$,H*(1-V)+ee*V)}else for(let j=0,A=0;j<f;j++,A+=4)T(0,A,j/(f-1));return w}nn("AlphaImage",iv),nn("RGBAImage",nl);const pj="big-fb";class rY extends m{createBucket(c){return new $D(c)}constructor(c){super(c,nY),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=WD({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(pj)&&this.heatmapFbos.delete(pj)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let UD;var iY={get paint(){return UD=UD||new C({"hillshade-illumination-direction":new fn(ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new fn(ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new fn(ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new fn(ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new fn(ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new fn(ze.paint_hillshade["hillshade-accent-color"])})}};class sY extends m{constructor(c){super(c,iY)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const oY=E([{name:"a_pos",components:2,type:"Int16"}],4),{members:aY}=oY;function qD(d,c,f=2){const x=c&&c.length,w=x?c[0]*f:d.length;let T=QD(d,0,w,f,!0);const j=[];if(!T||T.next===T.prev)return j;let A,I,$;if(x&&(T=function(V,H,ee,ie){const ce=[];for(let ue=0,ye=H.length;ue<ye;ue++){const Te=QD(V,H[ue]*ie,ue<ye-1?H[ue+1]*ie:V.length,ie,!1);Te===Te.next&&(Te.steiner=!0),ce.push(mY(Te))}ce.sort(dY);for(let ue=0;ue<ce.length;ue++)ee=fY(ce[ue],ee);return ee}(d,c,T,f)),d.length>80*f){A=1/0,I=1/0;let V=-1/0,H=-1/0;for(let ee=f;ee<w;ee+=f){const ie=d[ee],ce=d[ee+1];ie<A&&(A=ie),ce<I&&(I=ce),ie>V&&(V=ie),ce>H&&(H=ce)}$=Math.max(V-A,H-I),$=$!==0?32767/$:0}return sv(T,j,f,A,I,$,0),j}function QD(d,c,f,x,w){let T;if(w===function(j,A,I,$){let V=0;for(let H=A,ee=I-$;H<I;H+=$)V+=(j[ee]-j[H])*(j[H+1]+j[ee+1]),ee=H;return V}(d,c,f,x)>0)for(let j=c;j<f;j+=x)T=XD(j/x|0,d[j],d[j+1],T);else for(let j=f-x;j>=c;j-=x)T=XD(j/x|0,d[j],d[j+1],T);return T&&ww(T,T.next)&&(av(T),T=T.next),T}function zp(d,c){if(!d)return d;c||(c=d);let f,x=d;do if(f=!1,x.steiner||!ww(x,x.next)&&zi(x.prev,x,x.next)!==0)x=x.next;else{if(av(x),x=c=x.prev,x===x.next)break;f=!0}while(f||x!==c);return c}function sv(d,c,f,x,w,T,j){if(!d)return;!j&&T&&function(I,$,V,H){let ee=I;do ee.z===0&&(ee.z=mj(ee.x,ee.y,$,V,H)),ee.prevZ=ee.prev,ee.nextZ=ee.next,ee=ee.next;while(ee!==I);ee.prevZ.nextZ=null,ee.prevZ=null,function(ie){let ce,ue=1;do{let ye,Te=ie;ie=null;let Je=null;for(ce=0;Te;){ce++;let Ve=Te,Ze=0;for(let wt=0;wt<ue&&(Ze++,Ve=Ve.nextZ,Ve);wt++);let ot=ue;for(;Ze>0||ot>0&&Ve;)Ze!==0&&(ot===0||!Ve||Te.z<=Ve.z)?(ye=Te,Te=Te.nextZ,Ze--):(ye=Ve,Ve=Ve.nextZ,ot--),Je?Je.nextZ=ye:ie=ye,ye.prevZ=Je,Je=ye;Te=Ve}Je.nextZ=null,ue*=2}while(ce>1)}(ee)}(d,x,w,T);let A=d;for(;d.prev!==d.next;){const I=d.prev,$=d.next;if(T?cY(d,x,w,T):lY(d))c.push(I.i,d.i,$.i),av(d),d=$.next,A=$.next;else if((d=$)===A){j?j===1?sv(d=uY(zp(d),c),c,f,x,w,T,2):j===2&&hY(d,c,f,x,w,T):sv(zp(d),c,f,x,w,T,1);break}}}function lY(d){const c=d.prev,f=d,x=d.next;if(zi(c,f,x)>=0)return!1;const w=c.x,T=f.x,j=x.x,A=c.y,I=f.y,$=x.y,V=w<T?w<j?w:j:T<j?T:j,H=A<I?A<$?A:$:I<$?I:$,ee=w>T?w>j?w:j:T>j?T:j,ie=A>I?A>$?A:$:I>$?I:$;let ce=x.next;for(;ce!==c;){if(ce.x>=V&&ce.x<=ee&&ce.y>=H&&ce.y<=ie&&Wg(w,A,T,I,j,$,ce.x,ce.y)&&zi(ce.prev,ce,ce.next)>=0)return!1;ce=ce.next}return!0}function cY(d,c,f,x){const w=d.prev,T=d,j=d.next;if(zi(w,T,j)>=0)return!1;const A=w.x,I=T.x,$=j.x,V=w.y,H=T.y,ee=j.y,ie=A<I?A<$?A:$:I<$?I:$,ce=V<H?V<ee?V:ee:H<ee?H:ee,ue=A>I?A>$?A:$:I>$?I:$,ye=V>H?V>ee?V:ee:H>ee?H:ee,Te=mj(ie,ce,c,f,x),Je=mj(ue,ye,c,f,x);let Ve=d.prevZ,Ze=d.nextZ;for(;Ve&&Ve.z>=Te&&Ze&&Ze.z<=Je;){if(Ve.x>=ie&&Ve.x<=ue&&Ve.y>=ce&&Ve.y<=ye&&Ve!==w&&Ve!==j&&Wg(A,V,I,H,$,ee,Ve.x,Ve.y)&&zi(Ve.prev,Ve,Ve.next)>=0||(Ve=Ve.prevZ,Ze.x>=ie&&Ze.x<=ue&&Ze.y>=ce&&Ze.y<=ye&&Ze!==w&&Ze!==j&&Wg(A,V,I,H,$,ee,Ze.x,Ze.y)&&zi(Ze.prev,Ze,Ze.next)>=0))return!1;Ze=Ze.nextZ}for(;Ve&&Ve.z>=Te;){if(Ve.x>=ie&&Ve.x<=ue&&Ve.y>=ce&&Ve.y<=ye&&Ve!==w&&Ve!==j&&Wg(A,V,I,H,$,ee,Ve.x,Ve.y)&&zi(Ve.prev,Ve,Ve.next)>=0)return!1;Ve=Ve.prevZ}for(;Ze&&Ze.z<=Je;){if(Ze.x>=ie&&Ze.x<=ue&&Ze.y>=ce&&Ze.y<=ye&&Ze!==w&&Ze!==j&&Wg(A,V,I,H,$,ee,Ze.x,Ze.y)&&zi(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.nextZ}return!0}function uY(d,c){let f=d;do{const x=f.prev,w=f.next.next;!ww(x,w)&&HD(x,f,f.next,w)&&ov(x,w)&&ov(w,x)&&(c.push(x.i,f.i,w.i),av(f),av(f.next),f=d=w),f=f.next}while(f!==d);return zp(f)}function hY(d,c,f,x,w,T){let j=d;do{let A=j.next.next;for(;A!==j.prev;){if(j.i!==A.i&&gY(j,A)){let I=GD(j,A);return j=zp(j,j.next),I=zp(I,I.next),sv(j,c,f,x,w,T,0),void sv(I,c,f,x,w,T,0)}A=A.next}j=j.next}while(j!==d)}function dY(d,c){return d.x-c.x}function fY(d,c){const f=function(w,T){let j=T;const A=w.x,I=w.y;let $,V=-1/0;do{if(I<=j.y&&I>=j.next.y&&j.next.y!==j.y){const ue=j.x+(I-j.y)*(j.next.x-j.x)/(j.next.y-j.y);if(ue<=A&&ue>V&&(V=ue,$=j.x<j.next.x?j:j.next,ue===A))return $}j=j.next}while(j!==T);if(!$)return null;const H=$,ee=$.x,ie=$.y;let ce=1/0;j=$;do{if(A>=j.x&&j.x>=ee&&A!==j.x&&Wg(I<ie?A:V,I,ee,ie,I<ie?V:A,I,j.x,j.y)){const ue=Math.abs(I-j.y)/(A-j.x);ov(j,w)&&(ue<ce||ue===ce&&(j.x>$.x||j.x===$.x&&pY($,j)))&&($=j,ce=ue)}j=j.next}while(j!==H);return $}(d,c);if(!f)return c;const x=GD(f,d);return zp(x,x.next),zp(f,f.next)}function pY(d,c){return zi(d.prev,d,c.prev)<0&&zi(c.next,d,d.next)<0}function mj(d,c,f,x,w){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-f)*w|0)|d<<8))|d<<4))|d<<2))|d<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-x)*w|0)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function mY(d){let c=d,f=d;do(c.x<f.x||c.x===f.x&&c.y<f.y)&&(f=c),c=c.next;while(c!==d);return f}function Wg(d,c,f,x,w,T,j,A){return(w-j)*(c-A)>=(d-j)*(T-A)&&(d-j)*(x-A)>=(f-j)*(c-A)&&(f-j)*(T-A)>=(w-j)*(x-A)}function gY(d,c){return d.next.i!==c.i&&d.prev.i!==c.i&&!function(f,x){let w=f;do{if(w.i!==f.i&&w.next.i!==f.i&&w.i!==x.i&&w.next.i!==x.i&&HD(w,w.next,f,x))return!0;w=w.next}while(w!==f);return!1}(d,c)&&(ov(d,c)&&ov(c,d)&&function(f,x){let w=f,T=!1;const j=(f.x+x.x)/2,A=(f.y+x.y)/2;do w.y>A!=w.next.y>A&&w.next.y!==w.y&&j<(w.next.x-w.x)*(A-w.y)/(w.next.y-w.y)+w.x&&(T=!T),w=w.next;while(w!==f);return T}(d,c)&&(zi(d.prev,d,c.prev)||zi(d,c.prev,c))||ww(d,c)&&zi(d.prev,d,d.next)>0&&zi(c.prev,c,c.next)>0)}function zi(d,c,f){return(c.y-d.y)*(f.x-c.x)-(c.x-d.x)*(f.y-c.y)}function ww(d,c){return d.x===c.x&&d.y===c.y}function HD(d,c,f,x){const w=kw(zi(d,c,f)),T=kw(zi(d,c,x)),j=kw(zi(f,x,d)),A=kw(zi(f,x,c));return w!==T&&j!==A||!(w!==0||!Sw(d,f,c))||!(T!==0||!Sw(d,x,c))||!(j!==0||!Sw(f,d,x))||!(A!==0||!Sw(f,c,x))}function Sw(d,c,f){return c.x<=Math.max(d.x,f.x)&&c.x>=Math.min(d.x,f.x)&&c.y<=Math.max(d.y,f.y)&&c.y>=Math.min(d.y,f.y)}function kw(d){return d>0?1:d<0?-1:0}function ov(d,c){return zi(d.prev,d,d.next)<0?zi(d,c,d.next)>=0&&zi(d,d.prev,c)>=0:zi(d,c,d.prev)<0||zi(d,d.next,c)<0}function GD(d,c){const f=gj(d.i,d.x,d.y),x=gj(c.i,c.x,c.y),w=d.next,T=c.prev;return d.next=c,c.prev=d,f.next=w,w.prev=f,x.next=f,f.prev=x,T.next=x,x.prev=T,x}function XD(d,c,f,x){const w=gj(d,c,f);return x?(w.next=x.next,w.prev=x,x.next.prev=w,x.next=w):(w.prev=w,w.next=w),w}function av(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function gj(d,c,f){return{i:d,x:c,y:f,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function yj(d,c,f){const x=f.patternDependencies;let w=!1;for(const T of c){const j=T.paint.get(`${d}-pattern`);j.isConstant()||(w=!0);const A=j.constantOr(null);A&&(w=!0,x[A.to]=!0,x[A.from]=!0)}return w}function xj(d,c,f,x,w){const T=w.patternDependencies;for(const j of c){const A=j.paint.get(`${d}-pattern`).value;if(A.kind!=="constant"){let I=A.evaluate({zoom:x-1},f,{},w.availableImages),$=A.evaluate({zoom:x},f,{},w.availableImages),V=A.evaluate({zoom:x+1},f,{},w.availableImages);I=I&&I.name?I.name:I,$=$&&$.name?$.name:$,V=V&&V.name?V.name:V,T[I]=!0,T[$]=!0,T[V]=!0,f.patterns[j.id]={min:I,mid:$,max:V}}}return f}class vj{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(f=>f.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Rl,this.indexArray=new tl,this.indexArray2=new _s,this.programConfigurations=new Op(c.layers,c.zoom),this.segments=new or,this.segments2=new or,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(c,f,x){this.hasPattern=yj("fill",this.layers,f);const w=this.layers[0].layout.get("fill-sort-key"),T=!w.isConstant(),j=[];for(const{feature:A,id:I,index:$,sourceLayerIndex:V}of c){const H=this.layers[0]._featureFilter.needGeometry,ee=Ep(A,H);if(!this.layers[0]._featureFilter.filter(new ei(this.zoom),ee,x))continue;const ie=T?w.evaluate(ee,{},x,f.availableImages):void 0,ce={id:I,properties:A.properties,type:A.type,sourceLayerIndex:V,index:$,geometry:H?ee.geometry:Ap(A),patterns:{},sortKey:ie};j.push(ce)}T&&j.sort((A,I)=>A.sortKey-I.sortKey);for(const A of j){const{geometry:I,index:$,sourceLayerIndex:V}=A;if(this.hasPattern){const H=xj("fill",this.layers,A,this.zoom,f);this.patternFeatures.push(H)}else this.addFeature(A,I,$,x,{});f.featureIndex.insert(c[$].feature,I,$,V,this.index)}}update(c,f,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,f,this.stateDependentLayers,x)}addFeatures(c,f,x){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,f,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,aY),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.indexBuffer2=c.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(c,f,x,w,T){for(const j of fg(f,500)){let A=0;for(const ie of j)A+=ie.length;const I=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),$=I.vertexLength,V=[],H=[];for(const ie of j){if(ie.length===0)continue;ie!==j[0]&&H.push(V.length/2);const ce=this.segments2.prepareSegment(ie.length,this.layoutVertexArray,this.indexArray2),ue=ce.vertexLength;this.layoutVertexArray.emplaceBack(ie[0].x,ie[0].y),this.indexArray2.emplaceBack(ue+ie.length-1,ue),V.push(ie[0].x),V.push(ie[0].y);for(let ye=1;ye<ie.length;ye++)this.layoutVertexArray.emplaceBack(ie[ye].x,ie[ye].y),this.indexArray2.emplaceBack(ue+ye-1,ue+ye),V.push(ie[ye].x),V.push(ie[ye].y);ce.vertexLength+=ie.length,ce.primitiveLength+=ie.length}const ee=qD(V,H);for(let ie=0;ie<ee.length;ie+=3)this.indexArray.emplaceBack($+ee[ie],$+ee[ie+1],$+ee[ie+2]);I.vertexLength+=A,I.primitiveLength+=ee.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,x,T,w)}}let KD,ZD;nn("FillBucket",vj,{omit:["layers","patternFeatures"]});var yY={get paint(){return ZD=ZD||new C({"fill-antialias":new fn(ze.paint_fill["fill-antialias"]),"fill-opacity":new jn(ze.paint_fill["fill-opacity"]),"fill-color":new jn(ze.paint_fill["fill-color"]),"fill-outline-color":new jn(ze.paint_fill["fill-outline-color"]),"fill-translate":new fn(ze.paint_fill["fill-translate"]),"fill-translate-anchor":new fn(ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ig(ze.paint_fill["fill-pattern"])})},get layout(){return KD=KD||new C({"fill-sort-key":new jn(ze.layout_fill["fill-sort-key"])})}};class xY extends m{constructor(c){super(c,yY)}recalculate(c,f){super.recalculate(c,f);const x=this.paint._values["fill-outline-color"];x.value.kind==="constant"&&x.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new vj(c)}queryRadius(){return vw(this.paint.get("fill-translate"))}queryIntersectsFeature(c,f,x,w,T,j,A){return ID(bw(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),j.angle,A),w)}isTileClipped(){return!0}}const vY=E([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),bY=E([{name:"a_centroid",components:2,type:"Int16"}],4),{members:_Y}=vY;var Pd={},wY=p,YD=Ug;function Ug(d,c,f,x,w){this.properties={},this.extent=f,this.type=0,this._pbf=d,this._geometry=-1,this._keys=x,this._values=w,d.readFields(SY,this,c)}function SY(d,c,f){d==1?c.id=f.readVarint():d==2?function(x,w){for(var T=x.readVarint()+x.pos;x.pos<T;){var j=w._keys[x.readVarint()],A=w._values[x.readVarint()];w.properties[j]=A}}(f,c):d==3?c.type=f.readVarint():d==4&&(c._geometry=f.pos)}function kY(d){for(var c,f,x=0,w=0,T=d.length,j=T-1;w<T;j=w++)x+=((f=d[j]).x-(c=d[w]).x)*(c.y+f.y);return x}Ug.types=["Unknown","Point","LineString","Polygon"],Ug.prototype.loadGeometry=function(){var d=this._pbf;d.pos=this._geometry;for(var c,f=d.readVarint()+d.pos,x=1,w=0,T=0,j=0,A=[];d.pos<f;){if(w<=0){var I=d.readVarint();x=7&I,w=I>>3}if(w--,x===1||x===2)T+=d.readSVarint(),j+=d.readSVarint(),x===1&&(c&&A.push(c),c=[]),c.push(new wY(T,j));else{if(x!==7)throw new Error("unknown command "+x);c&&c.push(c[0].clone())}}return c&&A.push(c),A},Ug.prototype.bbox=function(){var d=this._pbf;d.pos=this._geometry;for(var c=d.readVarint()+d.pos,f=1,x=0,w=0,T=0,j=1/0,A=-1/0,I=1/0,$=-1/0;d.pos<c;){if(x<=0){var V=d.readVarint();f=7&V,x=V>>3}if(x--,f===1||f===2)(w+=d.readSVarint())<j&&(j=w),w>A&&(A=w),(T+=d.readSVarint())<I&&(I=T),T>$&&($=T);else if(f!==7)throw new Error("unknown command "+f)}return[j,I,A,$]},Ug.prototype.toGeoJSON=function(d,c,f){var x,w,T=this.extent*Math.pow(2,f),j=this.extent*d,A=this.extent*c,I=this.loadGeometry(),$=Ug.types[this.type];function V(ie){for(var ce=0;ce<ie.length;ce++){var ue=ie[ce];ie[ce]=[360*(ue.x+j)/T-180,360/Math.PI*Math.atan(Math.exp((180-360*(ue.y+A)/T)*Math.PI/180))-90]}}switch(this.type){case 1:var H=[];for(x=0;x<I.length;x++)H[x]=I[x][0];V(I=H);break;case 2:for(x=0;x<I.length;x++)V(I[x]);break;case 3:for(I=function(ie){var ce=ie.length;if(ce<=1)return[ie];for(var ue,ye,Te=[],Je=0;Je<ce;Je++){var Ve=kY(ie[Je]);Ve!==0&&(ye===void 0&&(ye=Ve<0),ye===Ve<0?(ue&&Te.push(ue),ue=[ie[Je]]):ue.push(ie[Je]))}return ue&&Te.push(ue),Te}(I),x=0;x<I.length;x++)for(w=0;w<I[x].length;w++)V(I[x][w])}I.length===1?I=I[0]:$="Multi"+$;var ee={type:"Feature",geometry:{type:$,coordinates:I},properties:this.properties};return"id"in this&&(ee.id=this.id),ee};var CY=YD,JD=eL;function eL(d,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(TY,this,c),this.length=this._features.length}function TY(d,c,f){d===15?c.version=f.readVarint():d===1?c.name=f.readString():d===5?c.extent=f.readVarint():d===2?c._features.push(f.pos):d===3?c._keys.push(f.readString()):d===4&&c._values.push(function(x){for(var w=null,T=x.readVarint()+x.pos;x.pos<T;){var j=x.readVarint()>>3;w=j===1?x.readString():j===2?x.readFloat():j===3?x.readDouble():j===4?x.readVarint64():j===5?x.readVarint():j===6?x.readSVarint():j===7?x.readBoolean():null}return w}(f))}eL.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var c=this._pbf.readVarint()+this._pbf.pos;return new CY(this._pbf,c,this.extent,this._keys,this._values)};var jY=JD;function PY(d,c,f){if(d===3){var x=new jY(f,f.readVarint()+f.pos);x.length&&(c[x.name]=x)}}Pd.VectorTile=function(d,c){this.layers=d.readFields(PY,{},c)},Pd.VectorTileFeature=YD,Pd.VectorTileLayer=JD;const OY=Pd.VectorTileFeature.types,bj=Math.pow(2,13);function lv(d,c,f,x,w,T,j,A){d.emplaceBack(c,f,2*Math.floor(x*bj)+j,w*bj*2,T*bj*2,Math.round(A))}class _j{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(f=>f.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new wd,this.centroidVertexArray=new Vs,this.indexArray=new tl,this.programConfigurations=new Op(c.layers,c.zoom),this.segments=new or,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(c,f,x){this.features=[],this.hasPattern=yj("fill-extrusion",this.layers,f);for(const{feature:w,id:T,index:j,sourceLayerIndex:A}of c){const I=this.layers[0]._featureFilter.needGeometry,$=Ep(w,I);if(!this.layers[0]._featureFilter.filter(new ei(this.zoom),$,x))continue;const V={id:T,sourceLayerIndex:A,index:j,geometry:I?$.geometry:Ap(w),properties:w.properties,type:w.type,patterns:{}};this.hasPattern?this.features.push(xj("fill-extrusion",this.layers,V,this.zoom,f)):this.addFeature(V,V.geometry,j,x,{}),f.featureIndex.insert(w,V.geometry,j,A,this.index,!0)}}addFeatures(c,f,x){for(const w of this.features){const{geometry:T}=w;this.addFeature(w,T,w.index,f,x)}}update(c,f,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,f,this.stateDependentLayers,x)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,_Y),this.centroidVertexBuffer=c.createVertexBuffer(this.centroidVertexArray,bY.members,!0),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(c,f,x,w,T){for(const j of fg(f,500)){const A={x:0,y:0,vertexCount:0};let I=0;for(const ce of j)I+=ce.length;let $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ce of j){if(ce.length===0||EY(ce))continue;let ue=0;for(let ye=0;ye<ce.length;ye++){const Te=ce[ye];if(ye>=1){const Je=ce[ye-1];if(!AY(Te,Je)){$.vertexLength+4>or.MAX_VERTEX_ARRAY_LENGTH&&($=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ve=Te.sub(Je)._perp()._unit(),Ze=Je.dist(Te);ue+Ze>32768&&(ue=0),lv(this.layoutVertexArray,Te.x,Te.y,Ve.x,Ve.y,0,0,ue),lv(this.layoutVertexArray,Te.x,Te.y,Ve.x,Ve.y,0,1,ue),A.x+=2*Te.x,A.y+=2*Te.y,A.vertexCount+=2,ue+=Ze,lv(this.layoutVertexArray,Je.x,Je.y,Ve.x,Ve.y,0,0,ue),lv(this.layoutVertexArray,Je.x,Je.y,Ve.x,Ve.y,0,1,ue),A.x+=2*Je.x,A.y+=2*Je.y,A.vertexCount+=2;const ot=$.vertexLength;this.indexArray.emplaceBack(ot,ot+2,ot+1),this.indexArray.emplaceBack(ot+1,ot+2,ot+3),$.vertexLength+=4,$.primitiveLength+=2}}}}if($.vertexLength+I>or.MAX_VERTEX_ARRAY_LENGTH&&($=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),OY[c.type]!=="Polygon")continue;const V=[],H=[],ee=$.vertexLength;for(const ce of j)if(ce.length!==0){ce!==j[0]&&H.push(V.length/2);for(let ue=0;ue<ce.length;ue++){const ye=ce[ue];lv(this.layoutVertexArray,ye.x,ye.y,0,0,1,1,0),A.x+=ye.x,A.y+=ye.y,A.vertexCount+=1,V.push(ye.x),V.push(ye.y)}}const ie=qD(V,H);for(let ce=0;ce<ie.length;ce+=3)this.indexArray.emplaceBack(ee+ie[ce],ee+ie[ce+2],ee+ie[ce+1]);$.primitiveLength+=ie.length/3,$.vertexLength+=I;for(let ce=0;ce<A.vertexCount;ce++){const ue=Math.floor(A.x/A.vertexCount),ye=Math.floor(A.y/A.vertexCount);this.centroidVertexArray.emplaceBack(ue,ye)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,x,T,w)}}function AY(d,c){return d.x===c.x&&(d.x<0||d.x>Bi)||d.y===c.y&&(d.y<0||d.y>Bi)}function EY(d){return d.every(c=>c.x<0)||d.every(c=>c.x>Bi)||d.every(c=>c.y<0)||d.every(c=>c.y>Bi)}let tL;nn("FillExtrusionBucket",_j,{omit:["layers","features"]});var zY={get paint(){return tL=tL||new C({"fill-extrusion-opacity":new fn(ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new jn(ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new fn(ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new fn(ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ig(ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new jn(ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new jn(ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new fn(ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class IY extends m{constructor(c){super(c,zY)}createBucket(c){return new _j(c)}queryRadius(){return vw(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,f,x,w,T,j,A,I){const $=bw(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),j.angle,A),V=this.paint.get("fill-extrusion-height").evaluate(f,x),H=this.paint.get("fill-extrusion-base").evaluate(f,x),ee=function(ce,ue,ye,Te){const Je=[];for(const Ve of ce){const Ze=[Ve.x,Ve.y,0,1];_w(Ze,Ze,ue),Je.push(new y(Ze[0]/Ze[3],Ze[1]/Ze[3]))}return Je}($,I),ie=function(ce,ue,ye,Te){const Je=[],Ve=[],Ze=Te[8]*ue,ot=Te[9]*ue,wt=Te[10]*ue,Gt=Te[11]*ue,Cn=Te[8]*ye,Qt=Te[9]*ye,Vt=Te[10]*ye,xn=Te[11]*ye;for(const an of ce){const Jt=[],dt=[];for(const vn of an){const mn=vn.x,zn=vn.y,Qr=Te[0]*mn+Te[4]*zn+Te[12],Lr=Te[1]*mn+Te[5]*zn+Te[13],ss=Te[2]*mn+Te[6]*zn+Te[14],Dl=Te[3]*mn+Te[7]*zn+Te[15],qs=ss+wt,os=Dl+Gt,Co=Qr+Cn,To=Lr+Qt,jo=ss+Vt,Ti=Dl+xn,as=new y((Qr+Ze)/os,(Lr+ot)/os);as.z=qs/os,Jt.push(as);const io=new y(Co/Ti,To/Ti);io.z=jo/Ti,dt.push(io)}Je.push(Jt),Ve.push(dt)}return[Je,Ve]}(w,H,V,I);return function(ce,ue,ye){let Te=1/0;ID(ye,ue)&&(Te=nL(ye,ue[0]));for(let Je=0;Je<ue.length;Je++){const Ve=ue[Je],Ze=ce[Je];for(let ot=0;ot<Ve.length-1;ot++){const wt=Ve[ot],Gt=[wt,Ve[ot+1],Ze[ot+1],Ze[ot],wt];zD(ye,Gt)&&(Te=Math.min(Te,nL(ye,Gt)))}}return Te!==1/0&&Te}(ie[0],ie[1],ee)}}function cv(d,c){return d.x*c.x+d.y*c.y}function nL(d,c){if(d.length===1){let f=0;const x=c[f++];let w;for(;!w||x.equals(w);)if(w=c[f++],!w)return 1/0;for(;f<c.length;f++){const T=c[f],j=d[0],A=w.sub(x),I=T.sub(x),$=j.sub(x),V=cv(A,A),H=cv(A,I),ee=cv(I,I),ie=cv($,A),ce=cv($,I),ue=V*ee-H*H,ye=(ee*ie-H*ce)/ue,Te=(V*ce-H*ie)/ue,Je=x.z*(1-ye-Te)+w.z*ye+T.z*Te;if(isFinite(Je))return Je}return 1/0}{let f=1/0;for(const x of c)f=Math.min(f,x.z);return f}}const MY=E([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:RY}=MY,DY=E([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:LY}=DY,FY=Pd.VectorTileFeature.types,BY=Math.cos(Math.PI/180*37.5),rL=Math.pow(2,14)/.5;class wj{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(f=>f.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(f=>{this.gradients[f.id]={}}),this.layoutVertexArray=new Rg,this.layoutVertexArray2=new Sd,this.indexArray=new tl,this.programConfigurations=new Op(c.layers,c.zoom),this.segments=new or,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(c,f,x){this.hasPattern=yj("line",this.layers,f);const w=this.layers[0].layout.get("line-sort-key"),T=!w.isConstant(),j=[];for(const{feature:A,id:I,index:$,sourceLayerIndex:V}of c){const H=this.layers[0]._featureFilter.needGeometry,ee=Ep(A,H);if(!this.layers[0]._featureFilter.filter(new ei(this.zoom),ee,x))continue;const ie=T?w.evaluate(ee,{},x):void 0,ce={id:I,properties:A.properties,type:A.type,sourceLayerIndex:V,index:$,geometry:H?ee.geometry:Ap(A),patterns:{},sortKey:ie};j.push(ce)}T&&j.sort((A,I)=>A.sortKey-I.sortKey);for(const A of j){const{geometry:I,index:$,sourceLayerIndex:V}=A;if(this.hasPattern){const H=xj("line",this.layers,A,this.zoom,f);this.patternFeatures.push(H)}else this.addFeature(A,I,$,x,{});f.featureIndex.insert(c[$].feature,I,$,V,this.index)}}update(c,f,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,f,this.stateDependentLayers,x)}addFeatures(c,f,x){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,f,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=c.createVertexBuffer(this.layoutVertexArray2,LY)),this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,RY),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(c){if(c.properties&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_end"))return{start:+c.properties.mapbox_clip_start,end:+c.properties.mapbox_clip_end}}addFeature(c,f,x,w,T){const j=this.layers[0].layout,A=j.get("line-join").evaluate(c,{}),I=j.get("line-cap"),$=j.get("line-miter-limit"),V=j.get("line-round-limit");this.lineClips=this.lineFeatureClips(c);for(const H of f)this.addLine(H,c,A,I,$,V);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,x,T,w)}addLine(c,f,x,w,T,j){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Te=0;Te<c.length-1;Te++)this.totalDistance+=c[Te].dist(c[Te+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const A=FY[f.type]==="Polygon";let I=c.length;for(;I>=2&&c[I-1].equals(c[I-2]);)I--;let $=0;for(;$<I-1&&c[$].equals(c[$+1]);)$++;if(I<(A?3:2))return;x==="bevel"&&(T=1.05);const V=this.overscaling<=16?15*Bi/(512*this.overscaling):0,H=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let ee,ie,ce,ue,ye;this.e1=this.e2=-1,A&&(ee=c[I-2],ye=c[$].sub(ee)._unit()._perp());for(let Te=$;Te<I;Te++){if(ce=Te===I-1?A?c[$+1]:void 0:c[Te+1],ce&&c[Te].equals(ce))continue;ye&&(ue=ye),ee&&(ie=ee),ee=c[Te],ye=ce?ce.sub(ee)._unit()._perp():ue,ue=ue||ye;let Je=ue.add(ye);Je.x===0&&Je.y===0||Je._unit();const Ve=ue.x*ye.x+ue.y*ye.y,Ze=Je.x*ye.x+Je.y*ye.y,ot=Ze!==0?1/Ze:1/0,wt=2*Math.sqrt(2-2*Ze),Gt=Ze<BY&&ie&&ce,Cn=ue.x*ye.y-ue.y*ye.x>0;if(Gt&&Te>$){const xn=ee.dist(ie);if(xn>2*V){const an=ee.sub(ee.sub(ie)._mult(V/xn)._round());this.updateDistance(ie,an),this.addCurrentVertex(an,ue,0,0,H),ie=an}}const Qt=ie&&ce;let Vt=Qt?x:A?"butt":w;if(Qt&&Vt==="round"&&(ot<j?Vt="miter":ot<=2&&(Vt="fakeround")),Vt==="miter"&&ot>T&&(Vt="bevel"),Vt==="bevel"&&(ot>2&&(Vt="flipbevel"),ot<T&&(Vt="miter")),ie&&this.updateDistance(ie,ee),Vt==="miter")Je._mult(ot),this.addCurrentVertex(ee,Je,0,0,H);else if(Vt==="flipbevel"){if(ot>100)Je=ye.mult(-1);else{const xn=ot*ue.add(ye).mag()/ue.sub(ye).mag();Je._perp()._mult(xn*(Cn?-1:1))}this.addCurrentVertex(ee,Je,0,0,H),this.addCurrentVertex(ee,Je.mult(-1),0,0,H)}else if(Vt==="bevel"||Vt==="fakeround"){const xn=-Math.sqrt(ot*ot-1),an=Cn?xn:0,Jt=Cn?0:xn;if(ie&&this.addCurrentVertex(ee,ue,an,Jt,H),Vt==="fakeround"){const dt=Math.round(180*wt/Math.PI/20);for(let vn=1;vn<dt;vn++){let mn=vn/dt;if(mn!==.5){const Qr=mn-.5;mn+=mn*Qr*(mn-1)*((1.0904+Ve*(Ve*(3.55645-1.43519*Ve)-3.2452))*Qr*Qr+(.848013+Ve*(.215638*Ve-1.06021)))}const zn=ye.sub(ue)._mult(mn)._add(ue)._unit()._mult(Cn?-1:1);this.addHalfVertex(ee,zn.x,zn.y,!1,Cn,0,H)}}ce&&this.addCurrentVertex(ee,ye,-an,-Jt,H)}else if(Vt==="butt")this.addCurrentVertex(ee,Je,0,0,H);else if(Vt==="square"){const xn=ie?1:-1;this.addCurrentVertex(ee,Je,xn,xn,H)}else Vt==="round"&&(ie&&(this.addCurrentVertex(ee,ue,0,0,H),this.addCurrentVertex(ee,ue,1,1,H,!0)),ce&&(this.addCurrentVertex(ee,ye,-1,-1,H,!0),this.addCurrentVertex(ee,ye,0,0,H)));if(Gt&&Te<I-1){const xn=ee.dist(ce);if(xn>2*V){const an=ee.add(ce.sub(ee)._mult(V/xn)._round());this.updateDistance(ee,an),this.addCurrentVertex(an,ye,0,0,H),ee=an}}}}addCurrentVertex(c,f,x,w,T,j=!1){const A=f.y*w-f.x,I=-f.y-f.x*w;this.addHalfVertex(c,f.x+f.y*x,f.y-f.x*x,j,!1,x,T),this.addHalfVertex(c,A,I,j,!0,-w,T),this.distance>rL/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(c,f,x,w,T,j))}addHalfVertex({x:c,y:f},x,w,T,j,A,I){const $=.5*(this.lineClips?this.scaledDistance*(rL-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((c<<1)+(T?1:0),(f<<1)+(j?1:0),Math.round(63*x)+128,Math.round(63*w)+128,1+(A===0?0:A<0?-1:1)|(63&$)<<2,$>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const V=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,V),I.primitiveLength++),j?this.e2=V:this.e1=V}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(c,f){this.distance+=c.dist(f),this.updateScaledDistance()}}let iL,sL;nn("LineBucket",wj,{omit:["layers","patternFeatures"]});var oL={get paint(){return sL=sL||new C({"line-opacity":new jn(ze.paint_line["line-opacity"]),"line-color":new jn(ze.paint_line["line-color"]),"line-translate":new fn(ze.paint_line["line-translate"]),"line-translate-anchor":new fn(ze.paint_line["line-translate-anchor"]),"line-width":new jn(ze.paint_line["line-width"]),"line-gap-width":new jn(ze.paint_line["line-gap-width"]),"line-offset":new jn(ze.paint_line["line-offset"]),"line-blur":new jn(ze.paint_line["line-blur"]),"line-dasharray":new Mg(ze.paint_line["line-dasharray"]),"line-pattern":new Ig(ze.paint_line["line-pattern"]),"line-gradient":new Jx(ze.paint_line["line-gradient"])})},get layout(){return iL=iL||new C({"line-cap":new fn(ze.layout_line["line-cap"]),"line-join":new jn(ze.layout_line["line-join"]),"line-miter-limit":new fn(ze.layout_line["line-miter-limit"]),"line-round-limit":new fn(ze.layout_line["line-round-limit"]),"line-sort-key":new jn(ze.layout_line["line-sort-key"])})}};class $Y extends jn{possiblyEvaluate(c,f){return f=new ei(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),super.possiblyEvaluate(c,f)}evaluate(c,f,x,w){return f=X({},f,{zoom:Math.floor(f.zoom)}),super.evaluate(c,f,x,w)}}let Cw;class NY extends m{constructor(c){super(c,oL),this.gradientVersion=0,Cw||(Cw=new $Y(oL.paint.properties["line-width"].specification),Cw.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(c){if(c==="line-gradient"){const f=this.gradientExpression();this.stepInterpolant=!!function(x){return x._styleExpression!==void 0}(f)&&f._styleExpression.expression instanceof El,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,f){super.recalculate(c,f),this.paint._values["line-floorwidth"]=Cw.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new wj(c)}queryRadius(c){const f=c,x=aL(nv("line-width",this,f),nv("line-gap-width",this,f)),w=nv("line-offset",this,f);return x/2+Math.abs(w)+vw(this.paint.get("line-translate"))}queryIntersectsFeature(c,f,x,w,T,j,A){const I=bw(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),j.angle,A),$=A/2*aL(this.paint.get("line-width").evaluate(f,x),this.paint.get("line-gap-width").evaluate(f,x)),V=this.paint.get("line-offset").evaluate(f,x);return V&&(w=function(H,ee){const ie=[];for(let ce=0;ce<H.length;ce++){const ue=H[ce],ye=[];for(let Te=0;Te<ue.length;Te++){const Je=ue[Te-1],Ve=ue[Te],Ze=ue[Te+1],ot=Te===0?new y(0,0):Ve.sub(Je)._unit()._perp(),wt=Te===ue.length-1?new y(0,0):Ze.sub(Ve)._unit()._perp(),Gt=ot._add(wt)._unit(),Cn=Gt.x*wt.x+Gt.y*wt.y;Cn!==0&&Gt._mult(1/Cn),ye.push(Gt._mult(ee)._add(Ve))}ie.push(ye)}return ie}(w,V*A)),function(H,ee,ie){for(let ce=0;ce<ee.length;ce++){const ue=ee[ce];if(H.length>=3){for(let ye=0;ye<ue.length;ye++)if(Ng(H,ue[ye]))return!0}if(KZ(H,ue,ie))return!0}return!1}(I,w,$)}isTileClipped(){return!0}}function aL(d,c){return c>0?c+2*d:d}const VY=E([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),WY=E([{name:"a_projected_pos",components:3,type:"Float32"}],4);E([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const UY=E([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);E([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const lL=E([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),qY=E([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function QY(d,c,f){return d.sections.forEach(x=>{x.text=function(w,T,j){const A=T.layout.get("text-transform").evaluate(j,{});return A==="uppercase"?w=w.toLocaleUpperCase():A==="lowercase"&&(w=w.toLocaleLowerCase()),Qo.applyArabicShaping&&(w=Qo.applyArabicShaping(w)),w}(x.text,c,f)}),d}E([{name:"triangle",components:3,type:"Uint16"}]),E([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),E([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),E([{type:"Float32",name:"offsetX"}]),E([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),E([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const uv={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var qi=24,cL=Dr,uL=function(d,c,f,x,w){var T,j,A=8*w-x-1,I=(1<<A)-1,$=I>>1,V=-7,H=w-1,ee=-1,ie=d[c+H];for(H+=ee,T=ie&(1<<-V)-1,ie>>=-V,V+=A;V>0;T=256*T+d[c+H],H+=ee,V-=8);for(j=T&(1<<-V)-1,T>>=-V,V+=x;V>0;j=256*j+d[c+H],H+=ee,V-=8);if(T===0)T=1-$;else{if(T===I)return j?NaN:1/0*(ie?-1:1);j+=Math.pow(2,x),T-=$}return(ie?-1:1)*j*Math.pow(2,T-x)},hL=function(d,c,f,x,w,T){var j,A,I,$=8*T-w-1,V=(1<<$)-1,H=V>>1,ee=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,ie=0,ce=1,ue=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(A=isNaN(c)?1:0,j=V):(j=Math.floor(Math.log(c)/Math.LN2),c*(I=Math.pow(2,-j))<1&&(j--,I*=2),(c+=j+H>=1?ee/I:ee*Math.pow(2,1-H))*I>=2&&(j++,I/=2),j+H>=V?(A=0,j=V):j+H>=1?(A=(c*I-1)*Math.pow(2,w),j+=H):(A=c*Math.pow(2,H-1)*Math.pow(2,w),j=0));w>=8;d[f+ie]=255&A,ie+=ce,A/=256,w-=8);for(j=j<<w|A,$+=w;$>0;d[f+ie]=255&j,ie+=ce,j/=256,$-=8);d[f+ie-ce]|=128*ue};function Dr(d){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(d)?d:new Uint8Array(d||0),this.pos=0,this.type=0,this.length=this.buf.length}Dr.Varint=0,Dr.Fixed64=1,Dr.Bytes=2,Dr.Fixed32=5;var Sj=4294967296,dL=1/Sj,fL=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function fh(d){return d.type===Dr.Bytes?d.readVarint()+d.pos:d.pos+1}function qg(d,c,f){return f?4294967296*c+(d>>>0):4294967296*(c>>>0)+(d>>>0)}function pL(d,c,f){var x=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));f.realloc(x);for(var w=f.pos-1;w>=d;w--)f.buf[w+x]=f.buf[w]}function HY(d,c){for(var f=0;f<d.length;f++)c.writeVarint(d[f])}function GY(d,c){for(var f=0;f<d.length;f++)c.writeSVarint(d[f])}function XY(d,c){for(var f=0;f<d.length;f++)c.writeFloat(d[f])}function KY(d,c){for(var f=0;f<d.length;f++)c.writeDouble(d[f])}function ZY(d,c){for(var f=0;f<d.length;f++)c.writeBoolean(d[f])}function YY(d,c){for(var f=0;f<d.length;f++)c.writeFixed32(d[f])}function JY(d,c){for(var f=0;f<d.length;f++)c.writeSFixed32(d[f])}function eJ(d,c){for(var f=0;f<d.length;f++)c.writeFixed64(d[f])}function tJ(d,c){for(var f=0;f<d.length;f++)c.writeSFixed64(d[f])}function Tw(d,c){return(d[c]|d[c+1]<<8|d[c+2]<<16)+16777216*d[c+3]}function Qg(d,c,f){d[f]=c,d[f+1]=c>>>8,d[f+2]=c>>>16,d[f+3]=c>>>24}function mL(d,c){return(d[c]|d[c+1]<<8|d[c+2]<<16)+(d[c+3]<<24)}Dr.prototype={destroy:function(){this.buf=null},readFields:function(d,c,f){for(f=f||this.length;this.pos<f;){var x=this.readVarint(),w=x>>3,T=this.pos;this.type=7&x,d(w,c,this),this.pos===T&&this.skip(x)}return c},readMessage:function(d,c){return this.readFields(d,c,this.readVarint()+this.pos)},readFixed32:function(){var d=Tw(this.buf,this.pos);return this.pos+=4,d},readSFixed32:function(){var d=mL(this.buf,this.pos);return this.pos+=4,d},readFixed64:function(){var d=Tw(this.buf,this.pos)+Tw(this.buf,this.pos+4)*Sj;return this.pos+=8,d},readSFixed64:function(){var d=Tw(this.buf,this.pos)+mL(this.buf,this.pos+4)*Sj;return this.pos+=8,d},readFloat:function(){var d=uL(this.buf,this.pos,!0,23,4);return this.pos+=4,d},readDouble:function(){var d=uL(this.buf,this.pos,!0,52,8);return this.pos+=8,d},readVarint:function(d){var c,f,x=this.buf;return c=127&(f=x[this.pos++]),f<128?c:(c|=(127&(f=x[this.pos++]))<<7,f<128?c:(c|=(127&(f=x[this.pos++]))<<14,f<128?c:(c|=(127&(f=x[this.pos++]))<<21,f<128?c:function(w,T,j){var A,I,$=j.buf;if(A=(112&(I=$[j.pos++]))>>4,I<128||(A|=(127&(I=$[j.pos++]))<<3,I<128)||(A|=(127&(I=$[j.pos++]))<<10,I<128)||(A|=(127&(I=$[j.pos++]))<<17,I<128)||(A|=(127&(I=$[j.pos++]))<<24,I<128)||(A|=(1&(I=$[j.pos++]))<<31,I<128))return qg(w,A,T);throw new Error("Expected varint not more than 10 bytes")}(c|=(15&(f=x[this.pos]))<<28,d,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var d=this.readVarint();return d%2==1?(d+1)/-2:d/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var d=this.readVarint()+this.pos,c=this.pos;return this.pos=d,d-c>=12&&fL?function(f,x,w){return fL.decode(f.subarray(x,w))}(this.buf,c,d):function(f,x,w){for(var T="",j=x;j<w;){var A,I,$,V=f[j],H=null,ee=V>239?4:V>223?3:V>191?2:1;if(j+ee>w)break;ee===1?V<128&&(H=V):ee===2?(192&(A=f[j+1]))==128&&(H=(31&V)<<6|63&A)<=127&&(H=null):ee===3?(I=f[j+2],(192&(A=f[j+1]))==128&&(192&I)==128&&((H=(15&V)<<12|(63&A)<<6|63&I)<=2047||H>=55296&&H<=57343)&&(H=null)):ee===4&&(I=f[j+2],$=f[j+3],(192&(A=f[j+1]))==128&&(192&I)==128&&(192&$)==128&&((H=(15&V)<<18|(63&A)<<12|(63&I)<<6|63&$)<=65535||H>=1114112)&&(H=null)),H===null?(H=65533,ee=1):H>65535&&(H-=65536,T+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),T+=String.fromCharCode(H),j+=ee}return T}(this.buf,c,d)},readBytes:function(){var d=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,d);return this.pos=d,c},readPackedVarint:function(d,c){if(this.type!==Dr.Bytes)return d.push(this.readVarint(c));var f=fh(this);for(d=d||[];this.pos<f;)d.push(this.readVarint(c));return d},readPackedSVarint:function(d){if(this.type!==Dr.Bytes)return d.push(this.readSVarint());var c=fh(this);for(d=d||[];this.pos<c;)d.push(this.readSVarint());return d},readPackedBoolean:function(d){if(this.type!==Dr.Bytes)return d.push(this.readBoolean());var c=fh(this);for(d=d||[];this.pos<c;)d.push(this.readBoolean());return d},readPackedFloat:function(d){if(this.type!==Dr.Bytes)return d.push(this.readFloat());var c=fh(this);for(d=d||[];this.pos<c;)d.push(this.readFloat());return d},readPackedDouble:function(d){if(this.type!==Dr.Bytes)return d.push(this.readDouble());var c=fh(this);for(d=d||[];this.pos<c;)d.push(this.readDouble());return d},readPackedFixed32:function(d){if(this.type!==Dr.Bytes)return d.push(this.readFixed32());var c=fh(this);for(d=d||[];this.pos<c;)d.push(this.readFixed32());return d},readPackedSFixed32:function(d){if(this.type!==Dr.Bytes)return d.push(this.readSFixed32());var c=fh(this);for(d=d||[];this.pos<c;)d.push(this.readSFixed32());return d},readPackedFixed64:function(d){if(this.type!==Dr.Bytes)return d.push(this.readFixed64());var c=fh(this);for(d=d||[];this.pos<c;)d.push(this.readFixed64());return d},readPackedSFixed64:function(d){if(this.type!==Dr.Bytes)return d.push(this.readSFixed64());var c=fh(this);for(d=d||[];this.pos<c;)d.push(this.readSFixed64());return d},skip:function(d){var c=7&d;if(c===Dr.Varint)for(;this.buf[this.pos++]>127;);else if(c===Dr.Bytes)this.pos=this.readVarint()+this.pos;else if(c===Dr.Fixed32)this.pos+=4;else{if(c!==Dr.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(d,c){this.writeVarint(d<<3|c)},realloc:function(d){for(var c=this.length||16;c<this.pos+d;)c*=2;if(c!==this.length){var f=new Uint8Array(c);f.set(this.buf),this.buf=f,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(d){this.realloc(4),Qg(this.buf,d,this.pos),this.pos+=4},writeSFixed32:function(d){this.realloc(4),Qg(this.buf,d,this.pos),this.pos+=4},writeFixed64:function(d){this.realloc(8),Qg(this.buf,-1&d,this.pos),Qg(this.buf,Math.floor(d*dL),this.pos+4),this.pos+=8},writeSFixed64:function(d){this.realloc(8),Qg(this.buf,-1&d,this.pos),Qg(this.buf,Math.floor(d*dL),this.pos+4),this.pos+=8},writeVarint:function(d){(d=+d||0)>268435455||d<0?function(c,f){var x,w;if(c>=0?(x=c%4294967296|0,w=c/4294967296|0):(w=~(-c/4294967296),4294967295^(x=~(-c%4294967296))?x=x+1|0:(x=0,w=w+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),function(T,j,A){A.buf[A.pos++]=127&T|128,T>>>=7,A.buf[A.pos++]=127&T|128,T>>>=7,A.buf[A.pos++]=127&T|128,T>>>=7,A.buf[A.pos++]=127&T|128,A.buf[A.pos]=127&(T>>>=7)}(x,0,f),function(T,j){var A=(7&T)<<4;j.buf[j.pos++]|=A|((T>>>=3)?128:0),T&&(j.buf[j.pos++]=127&T|((T>>>=7)?128:0),T&&(j.buf[j.pos++]=127&T|((T>>>=7)?128:0),T&&(j.buf[j.pos++]=127&T|((T>>>=7)?128:0),T&&(j.buf[j.pos++]=127&T|((T>>>=7)?128:0),T&&(j.buf[j.pos++]=127&T)))))}(w,f)}(d,this):(this.realloc(4),this.buf[this.pos++]=127&d|(d>127?128:0),d<=127||(this.buf[this.pos++]=127&(d>>>=7)|(d>127?128:0),d<=127||(this.buf[this.pos++]=127&(d>>>=7)|(d>127?128:0),d<=127||(this.buf[this.pos++]=d>>>7&127))))},writeSVarint:function(d){this.writeVarint(d<0?2*-d-1:2*d)},writeBoolean:function(d){this.writeVarint(!!d)},writeString:function(d){d=String(d),this.realloc(4*d.length),this.pos++;var c=this.pos;this.pos=function(x,w,T){for(var j,A,I=0;I<w.length;I++){if((j=w.charCodeAt(I))>55295&&j<57344){if(!A){j>56319||I+1===w.length?(x[T++]=239,x[T++]=191,x[T++]=189):A=j;continue}if(j<56320){x[T++]=239,x[T++]=191,x[T++]=189,A=j;continue}j=A-55296<<10|j-56320|65536,A=null}else A&&(x[T++]=239,x[T++]=191,x[T++]=189,A=null);j<128?x[T++]=j:(j<2048?x[T++]=j>>6|192:(j<65536?x[T++]=j>>12|224:(x[T++]=j>>18|240,x[T++]=j>>12&63|128),x[T++]=j>>6&63|128),x[T++]=63&j|128)}return T}(this.buf,d,this.pos);var f=this.pos-c;f>=128&&pL(c,f,this),this.pos=c-1,this.writeVarint(f),this.pos+=f},writeFloat:function(d){this.realloc(4),hL(this.buf,d,this.pos,!0,23,4),this.pos+=4},writeDouble:function(d){this.realloc(8),hL(this.buf,d,this.pos,!0,52,8),this.pos+=8},writeBytes:function(d){var c=d.length;this.writeVarint(c),this.realloc(c);for(var f=0;f<c;f++)this.buf[this.pos++]=d[f]},writeRawMessage:function(d,c){this.pos++;var f=this.pos;d(c,this);var x=this.pos-f;x>=128&&pL(f,x,this),this.pos=f-1,this.writeVarint(x),this.pos+=x},writeMessage:function(d,c,f){this.writeTag(d,Dr.Bytes),this.writeRawMessage(c,f)},writePackedVarint:function(d,c){c.length&&this.writeMessage(d,HY,c)},writePackedSVarint:function(d,c){c.length&&this.writeMessage(d,GY,c)},writePackedBoolean:function(d,c){c.length&&this.writeMessage(d,ZY,c)},writePackedFloat:function(d,c){c.length&&this.writeMessage(d,XY,c)},writePackedDouble:function(d,c){c.length&&this.writeMessage(d,KY,c)},writePackedFixed32:function(d,c){c.length&&this.writeMessage(d,YY,c)},writePackedSFixed32:function(d,c){c.length&&this.writeMessage(d,JY,c)},writePackedFixed64:function(d,c){c.length&&this.writeMessage(d,eJ,c)},writePackedSFixed64:function(d,c){c.length&&this.writeMessage(d,tJ,c)},writeBytesField:function(d,c){this.writeTag(d,Dr.Bytes),this.writeBytes(c)},writeFixed32Field:function(d,c){this.writeTag(d,Dr.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(d,c){this.writeTag(d,Dr.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(d,c){this.writeTag(d,Dr.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(d,c){this.writeTag(d,Dr.Fixed64),this.writeSFixed64(c)},writeVarintField:function(d,c){this.writeTag(d,Dr.Varint),this.writeVarint(c)},writeSVarintField:function(d,c){this.writeTag(d,Dr.Varint),this.writeSVarint(c)},writeStringField:function(d,c){this.writeTag(d,Dr.Bytes),this.writeString(c)},writeFloatField:function(d,c){this.writeTag(d,Dr.Fixed32),this.writeFloat(c)},writeDoubleField:function(d,c){this.writeTag(d,Dr.Fixed64),this.writeDouble(c)},writeBooleanField:function(d,c){this.writeVarintField(d,!!c)}};var kj=h(cL);const Cj=3;function nJ(d,c,f){d===1&&f.readMessage(rJ,c)}function rJ(d,c,f){if(d===3){const{id:x,bitmap:w,width:T,height:j,left:A,top:I,advance:$}=f.readMessage(iJ,{});c.push({id:x,bitmap:new iv({width:T+2*Cj,height:j+2*Cj},w),metrics:{width:T,height:j,left:A,top:I,advance:$}})}}function iJ(d,c,f){d===1?c.id=f.readVarint():d===2?c.bitmap=f.readBytes():d===3?c.width=f.readVarint():d===4?c.height=f.readVarint():d===5?c.left=f.readSVarint():d===6?c.top=f.readSVarint():d===7&&(c.advance=f.readVarint())}const gL=Cj;function yL(d){let c=0,f=0;for(const j of d)c+=j.w*j.h,f=Math.max(f,j.w);d.sort((j,A)=>A.h-j.h);const x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),f),h:1/0}];let w=0,T=0;for(const j of d)for(let A=x.length-1;A>=0;A--){const I=x[A];if(!(j.w>I.w||j.h>I.h)){if(j.x=I.x,j.y=I.y,T=Math.max(T,j.y+j.h),w=Math.max(w,j.x+j.w),j.w===I.w&&j.h===I.h){const $=x.pop();A<x.length&&(x[A]=$)}else j.h===I.h?(I.x+=j.w,I.w-=j.w):j.w===I.w?(I.y+=j.h,I.h-=j.h):(x.push({x:I.x+j.w,y:I.y,w:I.w-j.w,h:j.h}),I.y+=j.h,I.h-=j.h);break}}return{w,h:T,fill:c/(w*T)||0}}const Go=1;class Tj{constructor(c,{pixelRatio:f,version:x,stretchX:w,stretchY:T,content:j,textFitWidth:A,textFitHeight:I}){this.paddedRect=c,this.pixelRatio=f,this.stretchX=w,this.stretchY=T,this.content=j,this.version=x,this.textFitWidth=A,this.textFitHeight=I}get tl(){return[this.paddedRect.x+Go,this.paddedRect.y+Go]}get br(){return[this.paddedRect.x+this.paddedRect.w-Go,this.paddedRect.y+this.paddedRect.h-Go]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Go)/this.pixelRatio,(this.paddedRect.h-2*Go)/this.pixelRatio]}}class xL{constructor(c,f){const x={},w={};this.haveRenderCallbacks=[];const T=[];this.addImages(c,x,T),this.addImages(f,w,T);const{w:j,h:A}=yL(T),I=new nl({width:j||1,height:A||1});for(const $ in c){const V=c[$],H=x[$].paddedRect;nl.copy(V.data,I,{x:0,y:0},{x:H.x+Go,y:H.y+Go},V.data)}for(const $ in f){const V=f[$],H=w[$].paddedRect,ee=H.x+Go,ie=H.y+Go,ce=V.data.width,ue=V.data.height;nl.copy(V.data,I,{x:0,y:0},{x:ee,y:ie},V.data),nl.copy(V.data,I,{x:0,y:ue-1},{x:ee,y:ie-1},{width:ce,height:1}),nl.copy(V.data,I,{x:0,y:0},{x:ee,y:ie+ue},{width:ce,height:1}),nl.copy(V.data,I,{x:ce-1,y:0},{x:ee-1,y:ie},{width:1,height:ue}),nl.copy(V.data,I,{x:0,y:0},{x:ee+ce,y:ie},{width:1,height:ue})}this.image=I,this.iconPositions=x,this.patternPositions=w}addImages(c,f,x){for(const w in c){const T=c[w],j={x:0,y:0,w:T.data.width+2*Go,h:T.data.height+2*Go};x.push(j),f[w]=new Tj(j,T),T.hasRenderCallback&&this.haveRenderCallbacks.push(w)}}patchUpdatedImages(c,f){c.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const x in c.updatedImages)this.patchUpdatedImage(this.iconPositions[x],c.getImage(x),f),this.patchUpdatedImage(this.patternPositions[x],c.getImage(x),f)}patchUpdatedImage(c,f,x){if(!c||!f||c.version===f.version)return;c.version=f.version;const[w,T]=c.tl;x.update(f.data,void 0,{x:w,y:T})}}var Od;nn("ImagePosition",Tj),nn("ImageAtlas",xL),o.ah=void 0,(Od=o.ah||(o.ah={}))[Od.none=0]="none",Od[Od.horizontal=1]="horizontal",Od[Od.vertical=2]="vertical",Od[Od.horizontalOnly=3]="horizontalOnly";const hv=-17;class dv{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(c,f){const x=new dv;return x.scale=c||1,x.fontStack=f,x}static forImage(c){const f=new dv;return f.imageName=c,f}}class Hg{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(c,f){const x=new Hg;for(let w=0;w<c.sections.length;w++){const T=c.sections[w];T.image?x.addImageSection(T):x.addTextSection(T,f)}return x}length(){return this.text.length}getSection(c){return this.sections[this.sectionIndex[c]]}getSectionIndex(c){return this.sectionIndex[c]}getCharCode(c){return this.text.charCodeAt(c)}verticalizePunctuation(){this.text=function(c){let f="";for(let x=0;x<c.length;x++){const w=c.charCodeAt(x+1)||null,T=c.charCodeAt(x-1)||null;f+=w&&dw(w)&&!uv[c[x+1]]||T&&dw(T)&&!uv[c[x-1]]||!uv[c[x]]?c[x]:uv[c[x]]}return f}(this.text)}trim(){let c=0;for(let x=0;x<this.text.length&&Pw[this.text.charCodeAt(x)];x++)c++;let f=this.text.length;for(let x=this.text.length-1;x>=0&&x>=c&&Pw[this.text.charCodeAt(x)];x--)f--;this.text=this.text.substring(c,f),this.sectionIndex=this.sectionIndex.slice(c,f)}substring(c,f){const x=new Hg;return x.text=this.text.substring(c,f),x.sectionIndex=this.sectionIndex.slice(c,f),x.sections=this.sections,x}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((c,f)=>Math.max(c,this.sections[f].scale),0)}addTextSection(c,f){this.text+=c.text,this.sections.push(dv.forText(c.scale,c.fontStack||f));const x=this.sections.length-1;for(let w=0;w<c.text.length;++w)this.sectionIndex.push(x)}addImageSection(c){const f=c.image?c.image.name:"";if(f.length===0)return void Ce("Can't add FormattedSection with an empty image.");const x=this.getNextImageSectionCharCode();x?(this.text+=String.fromCharCode(x),this.sections.push(dv.forImage(f)),this.sectionIndex.push(this.sections.length-1)):Ce("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function jw(d,c,f,x,w,T,j,A,I,$,V,H,ee,ie,ce){const ue=Hg.fromFeature(d,w);let ye;H===o.ah.vertical&&ue.verticalizePunctuation();const{processBidirectionalText:Te,processStyledBidirectionalText:Je}=Qo;if(Te&&ue.sections.length===1){ye=[];const ot=Te(ue.toString(),jj(ue,$,T,c,x,ie));for(const wt of ot){const Gt=new Hg;Gt.text=wt,Gt.sections=ue.sections;for(let Cn=0;Cn<wt.length;Cn++)Gt.sectionIndex.push(0);ye.push(Gt)}}else if(Je){ye=[];const ot=Je(ue.text,ue.sectionIndex,jj(ue,$,T,c,x,ie));for(const wt of ot){const Gt=new Hg;Gt.text=wt[0],Gt.sectionIndex=wt[1],Gt.sections=ue.sections,ye.push(Gt)}}else ye=function(ot,wt){const Gt=[],Cn=ot.text;let Qt=0;for(const Vt of wt)Gt.push(ot.substring(Qt,Vt)),Qt=Vt;return Qt<Cn.length&&Gt.push(ot.substring(Qt,Cn.length)),Gt}(ue,jj(ue,$,T,c,x,ie));const Ve=[],Ze={positionedLines:Ve,text:ue.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:H,iconsInText:!1,verticalizable:!1};return function(ot,wt,Gt,Cn,Qt,Vt,xn,an,Jt,dt,vn,mn){let zn=0,Qr=hv,Lr=0,ss=0;const Dl=an==="right"?1:an==="left"?0:.5;let qs=0;for(const Ti of Qt){Ti.trim();const as=Ti.getMaxScale(),io=(as-1)*qi,Qs={positionedGlyphs:[],lineOffset:0};ot.positionedLines[qs]=Qs;const Po=Qs.positionedGlyphs;let Hs=0;if(!Ti.length()){Qr+=Vt,++qs;continue}for(let Xo=0;Xo<Ti.length();Xo++){const vr=Ti.getSection(Xo),Kr=Ti.getSectionIndex(Xo),ii=Ti.getCharCode(Xo);let _a=0,xi=null,Zg=null,lu=null,cu=qi;const Ll=!(Jt===o.ah.horizontal||!vn&&!Zx(ii)||vn&&(Pw[ii]||(os=ii,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(os)))));if(vr.imageName){const sl=Cn[vr.imageName];if(!sl)continue;lu=vr.imageName,ot.iconsInText=ot.iconsInText||!0,Zg=sl.paddedRect;const ws=sl.displaySize;vr.scale=vr.scale*qi/mn,xi={width:ws[0],height:ws[1],left:Go,top:-gL,advance:Ll?ws[1]:ws[0]},_a=io+(qi-ws[1]*vr.scale),cu=xi.advance;const ph=Ll?ws[0]*vr.scale-qi*as:ws[1]*vr.scale-qi*as;ph>0&&ph>Hs&&(Hs=ph)}else{const sl=Gt[vr.fontStack],ws=sl&&sl[ii];if(ws&&ws.rect)Zg=ws.rect,xi=ws.metrics;else{const ph=wt[vr.fontStack],xv=ph&&ph[ii];if(!xv)continue;xi=xv.metrics}_a=(as-vr.scale)*qi}Ll?(ot.verticalizable=!0,Po.push({glyph:ii,imageName:lu,x:zn,y:Qr+_a,vertical:Ll,scale:vr.scale,fontStack:vr.fontStack,sectionIndex:Kr,metrics:xi,rect:Zg}),zn+=cu*vr.scale+dt):(Po.push({glyph:ii,imageName:lu,x:zn,y:Qr+_a,vertical:Ll,scale:vr.scale,fontStack:vr.fontStack,sectionIndex:Kr,metrics:xi,rect:Zg}),zn+=xi.advance*vr.scale+dt)}Po.length!==0&&(Lr=Math.max(zn-dt,Lr),lJ(Po,0,Po.length-1,Dl,Hs)),zn=0;const il=Vt*as+Hs;Qs.lineOffset=Math.max(Hs,io),Qr+=il,ss=Math.max(il,ss),++qs}var os;const Co=Qr-hv,{horizontalAlign:To,verticalAlign:jo}=Pj(xn);(function(Ti,as,io,Qs,Po,Hs,il,Xo,vr){const Kr=(as-io)*Po;let ii=0;ii=Hs!==il?-Xo*Qs-hv:(-Qs*vr+.5)*il;for(const _a of Ti)for(const xi of _a.positionedGlyphs)xi.x+=Kr,xi.y+=ii})(ot.positionedLines,Dl,To,jo,Lr,ss,Vt,Co,Qt.length),ot.top+=-jo*Co,ot.bottom=ot.top+Co,ot.left+=-To*Lr,ot.right=ot.left+Lr}(Ze,c,f,x,ye,j,A,I,H,$,ee,ce),!function(ot){for(const wt of ot)if(wt.positionedGlyphs.length!==0)return!1;return!0}(Ve)&&Ze}const Pw={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},sJ={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},oJ={40:!0};function vL(d,c,f,x,w,T){if(c.imageName){const j=x[c.imageName];return j?j.displaySize[0]*c.scale*qi/T+w:0}{const j=f[c.fontStack],A=j&&j[d];return A?A.metrics.advance*c.scale+w:0}}function bL(d,c,f,x){const w=Math.pow(d-c,2);return x?d<c?w/2:2*w:w+Math.abs(f)*f}function aJ(d,c,f){let x=0;return d===10&&(x-=1e4),f&&(x+=150),d!==40&&d!==65288||(x+=50),c!==41&&c!==65289||(x+=50),x}function _L(d,c,f,x,w,T){let j=null,A=bL(c,f,w,T);for(const I of x){const $=bL(c-I.x,f,w,T)+I.badness;$<=A&&(j=I,A=$)}return{index:d,x:c,priorBreak:j,badness:A}}function wL(d){return d?wL(d.priorBreak).concat(d.index):[]}function jj(d,c,f,x,w,T){if(!d)return[];const j=[],A=function(H,ee,ie,ce,ue,ye){let Te=0;for(let Je=0;Je<H.length();Je++){const Ve=H.getSection(Je);Te+=vL(H.getCharCode(Je),Ve,ce,ue,ee,ye)}return Te/Math.max(1,Math.ceil(Te/ie))}(d,c,f,x,w,T),I=d.text.indexOf("")>=0;let $=0;for(let H=0;H<d.length();H++){const ee=d.getSection(H),ie=d.getCharCode(H);if(Pw[ie]||($+=vL(ie,ee,x,w,c,T)),H<d.length()-1){const ce=!((V=ie)<11904)&&(!!sr["CJK Compatibility Forms"](V)||!!sr["CJK Compatibility"](V)||!!sr["CJK Strokes"](V)||!!sr["CJK Symbols and Punctuation"](V)||!!sr["Enclosed CJK Letters and Months"](V)||!!sr["Halfwidth and Fullwidth Forms"](V)||!!sr["Ideographic Description Characters"](V)||!!sr["Vertical Forms"](V)||hw.test(String.fromCodePoint(V)));(sJ[ie]||ce||ee.imageName||H!==d.length()-2&&oJ[d.getCharCode(H+1)])&&j.push(_L(H+1,$,A,j,aJ(ie,d.getCharCode(H+1),ce&&I),!1))}}var V;return wL(_L(d.length(),$,A,j,0,!0))}function Pj(d){let c=.5,f=.5;switch(d){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0}return{horizontalAlign:c,verticalAlign:f}}function lJ(d,c,f,x,w){if(!x&&!w)return;const T=d[f],j=(d[f].x+T.metrics.advance*T.scale)*x;for(let A=c;A<=f;A++)d[A].x-=j,d[A].y+=w}function cJ(d,c,f){const{horizontalAlign:x,verticalAlign:w}=Pj(f),T=c[0]-d.displaySize[0]*x,j=c[1]-d.displaySize[1]*w;return{image:d,top:j,bottom:j+d.displaySize[1],left:T,right:T+d.displaySize[0]}}function SL(d){var c,f;let x=d.left,w=d.top,T=d.right-x,j=d.bottom-w;const A=(c=d.image.textFitWidth)!==null&&c!==void 0?c:"stretchOrShrink",I=(f=d.image.textFitHeight)!==null&&f!==void 0?f:"stretchOrShrink",$=(d.image.content[2]-d.image.content[0])/(d.image.content[3]-d.image.content[1]);if(I==="proportional"){if(A==="stretchOnly"&&T/j<$||A==="proportional"){const V=Math.ceil(j*$);x*=V/T,T=V}}else if(A==="proportional"&&I==="stretchOnly"&&$!==0&&T/j>$){const V=Math.ceil(T/$);w*=V/j,j=V}return{x1:x,y1:w,x2:x+T,y2:w+j}}function kL(d,c,f,x,w,T){const j=d.image;let A;if(j.content){const ye=j.content,Te=j.pixelRatio||1;A=[ye[0]/Te,ye[1]/Te,j.displaySize[0]-ye[2]/Te,j.displaySize[1]-ye[3]/Te]}const I=c.left*T,$=c.right*T;let V,H,ee,ie;f==="width"||f==="both"?(ie=w[0]+I-x[3],H=w[0]+$+x[1]):(ie=w[0]+(I+$-j.displaySize[0])/2,H=ie+j.displaySize[0]);const ce=c.top*T,ue=c.bottom*T;return f==="height"||f==="both"?(V=w[1]+ce-x[0],ee=w[1]+ue+x[2]):(V=w[1]+(ce+ue-j.displaySize[1])/2,ee=V+j.displaySize[1]),{image:j,top:V,right:H,bottom:ee,left:ie,collisionPadding:A}}const fv=255,au=128,Ad=fv*au;function CL(d,c){const{expression:f}=c;if(f.kind==="constant")return{kind:"constant",layoutSize:f.evaluate(new ei(d+1))};if(f.kind==="source")return{kind:"source"};{const{zoomStops:x,interpolationType:w}=f;let T=0;for(;T<x.length&&x[T]<=d;)T++;T=Math.max(0,T-1);let j=T;for(;j<x.length&&x[j]<d+1;)j++;j=Math.min(x.length-1,j);const A=x[T],I=x[j];return f.kind==="composite"?{kind:"composite",minZoom:A,maxZoom:I,interpolationType:w}:{kind:"camera",minZoom:A,maxZoom:I,minSize:f.evaluate(new ei(A)),maxSize:f.evaluate(new ei(I)),interpolationType:w}}}function Oj(d,c,f){let x="never";const w=d.get(c);return w?x=w:d.get(f)&&(x="always"),x}const uJ=Pd.VectorTileFeature.types,hJ=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ow(d,c,f,x,w,T,j,A,I,$,V,H,ee){const ie=A?Math.min(Ad,Math.round(A[0])):0,ce=A?Math.min(Ad,Math.round(A[1])):0;d.emplaceBack(c,f,Math.round(32*x),Math.round(32*w),T,j,(ie<<1)+(I?1:0),ce,16*$,16*V,256*H,256*ee)}function Aj(d,c,f){d.emplaceBack(c.x,c.y,f),d.emplaceBack(c.x,c.y,f),d.emplaceBack(c.x,c.y,f),d.emplaceBack(c.x,c.y,f)}function dJ(d){for(const c of d.sections)if(ij(c.text))return!0;return!1}class Ej{constructor(c){this.layoutVertexArray=new Dg,this.indexArray=new tl,this.programConfigurations=c,this.segments=new or,this.dynamicLayoutVertexArray=new ev,this.opacityVertexArray=new va,this.hasVisibleVertices=!1,this.placedSymbolArray=new ti}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(c,f,x,w){this.isEmpty()||(x&&(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,VY.members),this.indexBuffer=c.createIndexBuffer(this.indexArray,f),this.dynamicLayoutVertexBuffer=c.createVertexBuffer(this.dynamicLayoutVertexArray,WY.members,!0),this.opacityVertexBuffer=c.createVertexBuffer(this.opacityVertexArray,hJ,!0),this.opacityVertexBuffer.itemSize=1),(x||w)&&this.programConfigurations.upload(c))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}nn("SymbolBuffers",Ej);class zj{constructor(c,f,x){this.layoutVertexArray=new c,this.layoutAttributes=f,this.indexArray=new x,this.segments=new or,this.collisionVertexArray=new su}upload(c){this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=c.createVertexBuffer(this.collisionVertexArray,UY.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}nn("CollisionBuffers",zj);class Gg{constructor(c){this.collisionBoxArray=c.collisionBoxArray,this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(j=>j.id),this.index=c.index,this.pixelRatio=c.pixelRatio,this.sourceLayerIndex=c.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=hj([]),this.placementViewportMatrix=hj([]);const f=this.layers[0]._unevaluatedLayout._values;this.textSizeData=CL(this.zoom,f["text-size"]),this.iconSizeData=CL(this.zoom,f["icon-size"]);const x=this.layers[0].layout,w=x.get("symbol-sort-key"),T=x.get("symbol-z-order");this.canOverlap=Oj(x,"text-overlap","text-allow-overlap")!=="never"||Oj(x,"icon-overlap","icon-allow-overlap")!=="never"||x.get("text-ignore-placement")||x.get("icon-ignore-placement"),this.sortFeaturesByKey=T!=="viewport-y"&&!w.isConstant(),this.sortFeaturesByY=(T==="viewport-y"||T==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,x.get("symbol-placement")==="point"&&(this.writingModes=x.get("text-writing-mode").map(j=>o.ah[j])),this.stateDependentLayerIds=this.layers.filter(j=>j.isStateDependent()).map(j=>j.id),this.sourceID=c.sourceID}createArrays(){this.text=new Ej(new Op(this.layers,this.zoom,c=>/^text/.test(c))),this.icon=new Ej(new Op(this.layers,this.zoom,c=>/^icon/.test(c))),this.glyphOffsetArray=new ni,this.lineVertexArray=new Ns,this.symbolInstances=new nr,this.textAnchorOffsets=new ri}calculateGlyphDependencies(c,f,x,w,T){for(let j=0;j<c.length;j++)if(f[c.charCodeAt(j)]=!0,(x||w)&&T){const A=uv[c.charAt(j)];A&&(f[A.charCodeAt(0)]=!0)}}populate(c,f,x){const w=this.layers[0],T=w.layout,j=T.get("text-font"),A=T.get("text-field"),I=T.get("icon-image"),$=(A.value.kind!=="constant"||A.value.value instanceof Ds&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(j.value.kind!=="constant"||j.value.value.length>0),V=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,H=T.get("symbol-sort-key");if(this.features=[],!$&&!V)return;const ee=f.iconDependencies,ie=f.glyphDependencies,ce=f.availableImages,ue=new ei(this.zoom);for(const{feature:ye,id:Te,index:Je,sourceLayerIndex:Ve}of c){const Ze=w._featureFilter.needGeometry,ot=Ep(ye,Ze);if(!w._featureFilter.filter(ue,ot,x))continue;let wt,Gt;if(Ze||(ot.geometry=Ap(ye)),$){const Qt=w.getValueAndResolveTokens("text-field",ot,x,ce),Vt=Ds.factory(Qt),xn=this.hasRTLText=this.hasRTLText||dJ(Vt);(!xn||Qo.getRTLTextPluginStatus()==="unavailable"||xn&&Qo.isParsed())&&(wt=QY(Vt,w,ot))}if(V){const Qt=w.getValueAndResolveTokens("icon-image",ot,x,ce);Gt=Qt instanceof Ls?Qt:Ls.fromString(Qt)}if(!wt&&!Gt)continue;const Cn=this.sortFeaturesByKey?H.evaluate(ot,{},x):void 0;if(this.features.push({id:Te,text:wt,icon:Gt,index:Je,sourceLayerIndex:Ve,geometry:ot.geometry,properties:ye.properties,type:uJ[ye.type],sortKey:Cn}),Gt&&(ee[Gt.name]=!0),wt){const Qt=j.evaluate(ot,{},x).join(","),Vt=T.get("text-rotation-alignment")!=="viewport"&&T.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.ah.vertical)>=0;for(const xn of wt.sections)if(xn.image)ee[xn.image.name]=!0;else{const an=Xx(wt.toString()),Jt=xn.fontStack||Qt,dt=ie[Jt]=ie[Jt]||{};this.calculateGlyphDependencies(xn.text,dt,Vt,this.allowVerticalPlacement,an)}}}T.get("symbol-placement")==="line"&&(this.features=function(ye){const Te={},Je={},Ve=[];let Ze=0;function ot(Qt){Ve.push(ye[Qt]),Ze++}function wt(Qt,Vt,xn){const an=Je[Qt];return delete Je[Qt],Je[Vt]=an,Ve[an].geometry[0].pop(),Ve[an].geometry[0]=Ve[an].geometry[0].concat(xn[0]),an}function Gt(Qt,Vt,xn){const an=Te[Vt];return delete Te[Vt],Te[Qt]=an,Ve[an].geometry[0].shift(),Ve[an].geometry[0]=xn[0].concat(Ve[an].geometry[0]),an}function Cn(Qt,Vt,xn){const an=xn?Vt[0][Vt[0].length-1]:Vt[0][0];return`${Qt}:${an.x}:${an.y}`}for(let Qt=0;Qt<ye.length;Qt++){const Vt=ye[Qt],xn=Vt.geometry,an=Vt.text?Vt.text.toString():null;if(!an){ot(Qt);continue}const Jt=Cn(an,xn),dt=Cn(an,xn,!0);if(Jt in Je&&dt in Te&&Je[Jt]!==Te[dt]){const vn=Gt(Jt,dt,xn),mn=wt(Jt,dt,Ve[vn].geometry);delete Te[Jt],delete Je[dt],Je[Cn(an,Ve[mn].geometry,!0)]=mn,Ve[vn].geometry=null}else Jt in Je?wt(Jt,dt,xn):dt in Te?Gt(Jt,dt,xn):(ot(Qt),Te[Jt]=Ze-1,Je[dt]=Ze-1)}return Ve.filter(Qt=>Qt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ye,Te)=>ye.sortKey-Te.sortKey)}update(c,f,x){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(c,f,this.layers,x),this.icon.programConfigurations.updatePaintArrays(c,f,this.layers,x))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(c){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(c),this.iconCollisionBox.upload(c)),this.text.upload(c,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(c,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(c,f){const x=this.lineVertexArray.length;if(c.segment!==void 0){let w=c.dist(f[c.segment+1]),T=c.dist(f[c.segment]);const j={};for(let A=c.segment+1;A<f.length;A++)j[A]={x:f[A].x,y:f[A].y,tileUnitDistanceFromAnchor:w},A<f.length-1&&(w+=f[A+1].dist(f[A]));for(let A=c.segment||0;A>=0;A--)j[A]={x:f[A].x,y:f[A].y,tileUnitDistanceFromAnchor:T},A>0&&(T+=f[A-1].dist(f[A]));for(let A=0;A<f.length;A++){const I=j[A];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:x,lineLength:this.lineVertexArray.length-x}}addSymbols(c,f,x,w,T,j,A,I,$,V,H,ee){const ie=c.indexArray,ce=c.layoutVertexArray,ue=c.segments.prepareSegment(4*f.length,ce,ie,this.canOverlap?j.sortKey:void 0),ye=this.glyphOffsetArray.length,Te=ue.vertexLength,Je=this.allowVerticalPlacement&&A===o.ah.vertical?Math.PI/2:0,Ve=j.text&&j.text.sections;for(let Ze=0;Ze<f.length;Ze++){const{tl:ot,tr:wt,bl:Gt,br:Cn,tex:Qt,pixelOffsetTL:Vt,pixelOffsetBR:xn,minFontScaleX:an,minFontScaleY:Jt,glyphOffset:dt,isSDF:vn,sectionIndex:mn}=f[Ze],zn=ue.vertexLength,Qr=dt[1];Ow(ce,I.x,I.y,ot.x,Qr+ot.y,Qt.x,Qt.y,x,vn,Vt.x,Vt.y,an,Jt),Ow(ce,I.x,I.y,wt.x,Qr+wt.y,Qt.x+Qt.w,Qt.y,x,vn,xn.x,Vt.y,an,Jt),Ow(ce,I.x,I.y,Gt.x,Qr+Gt.y,Qt.x,Qt.y+Qt.h,x,vn,Vt.x,xn.y,an,Jt),Ow(ce,I.x,I.y,Cn.x,Qr+Cn.y,Qt.x+Qt.w,Qt.y+Qt.h,x,vn,xn.x,xn.y,an,Jt),Aj(c.dynamicLayoutVertexArray,I,Je),ie.emplaceBack(zn,zn+1,zn+2),ie.emplaceBack(zn+1,zn+2,zn+3),ue.vertexLength+=4,ue.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(dt[0]),Ze!==f.length-1&&mn===f[Ze+1].sectionIndex||c.programConfigurations.populatePaintArrays(ce.length,j,j.index,{},ee,Ve&&Ve[mn])}c.placedSymbolArray.emplaceBack(I.x,I.y,ye,this.glyphOffsetArray.length-ye,Te,$,V,I.segment,x?x[0]:0,x?x[1]:0,w[0],w[1],A,0,!1,0,H)}_addCollisionDebugVertex(c,f,x,w,T,j){return f.emplaceBack(0,0),c.emplaceBack(x.x,x.y,w,T,Math.round(j.x),Math.round(j.y))}addCollisionDebugVertices(c,f,x,w,T,j,A){const I=T.segments.prepareSegment(4,T.layoutVertexArray,T.indexArray),$=I.vertexLength,V=T.layoutVertexArray,H=T.collisionVertexArray,ee=A.anchorX,ie=A.anchorY;this._addCollisionDebugVertex(V,H,j,ee,ie,new y(c,f)),this._addCollisionDebugVertex(V,H,j,ee,ie,new y(x,f)),this._addCollisionDebugVertex(V,H,j,ee,ie,new y(x,w)),this._addCollisionDebugVertex(V,H,j,ee,ie,new y(c,w)),I.vertexLength+=4;const ce=T.indexArray;ce.emplaceBack($,$+1),ce.emplaceBack($+1,$+2),ce.emplaceBack($+2,$+3),ce.emplaceBack($+3,$),I.primitiveLength+=4}addDebugCollisionBoxes(c,f,x,w){for(let T=c;T<f;T++){const j=this.collisionBoxArray.get(T);this.addCollisionDebugVertices(j.x1,j.y1,j.x2,j.y2,w?this.textCollisionBox:this.iconCollisionBox,j.anchorPoint,x)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new zj(ba,lL.members,_s),this.iconCollisionBox=new zj(ba,lL.members,_s);for(let c=0;c<this.symbolInstances.length;c++){const f=this.symbolInstances.get(c);this.addDebugCollisionBoxes(f.textBoxStartIndex,f.textBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.iconBoxStartIndex,f.iconBoxEndIndex,f,!1),this.addDebugCollisionBoxes(f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex,f,!1)}}_deserializeCollisionBoxesForSymbol(c,f,x,w,T,j,A,I,$){const V={};for(let H=f;H<x;H++){const ee=c.get(H);V.textBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},V.textFeatureIndex=ee.featureIndex;break}for(let H=w;H<T;H++){const ee=c.get(H);V.verticalTextBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},V.verticalTextFeatureIndex=ee.featureIndex;break}for(let H=j;H<A;H++){const ee=c.get(H);V.iconBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},V.iconFeatureIndex=ee.featureIndex;break}for(let H=I;H<$;H++){const ee=c.get(H);V.verticalIconBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},V.verticalIconFeatureIndex=ee.featureIndex;break}return V}deserializeCollisionBoxes(c){this.collisionArrays=[];for(let f=0;f<this.symbolInstances.length;f++){const x=this.symbolInstances.get(f);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(c,x.textBoxStartIndex,x.textBoxEndIndex,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x.iconBoxStartIndex,x.iconBoxEndIndex,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(c,f){const x=c.placedSymbolArray.get(f),w=x.vertexStartIndex+4*x.numGlyphs;for(let T=x.vertexStartIndex;T<w;T+=4)c.indexArray.emplaceBack(T,T+1,T+2),c.indexArray.emplaceBack(T+1,T+2,T+3)}getSortedSymbolIndexes(c){if(this.sortedAngle===c&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const f=Math.sin(c),x=Math.cos(c),w=[],T=[],j=[];for(let A=0;A<this.symbolInstances.length;++A){j.push(A);const I=this.symbolInstances.get(A);w.push(0|Math.round(f*I.anchorX+x*I.anchorY)),T.push(I.featureIndex)}return j.sort((A,I)=>w[A]-w[I]||T[I]-T[A]),j}addToSortKeyRanges(c,f){const x=this.sortKeyRanges[this.sortKeyRanges.length-1];x&&x.sortKey===f?x.symbolInstanceEnd=c+1:this.sortKeyRanges.push({sortKey:f,symbolInstanceStart:c,symbolInstanceEnd:c+1})}sortFeatures(c){if(this.sortFeaturesByY&&this.sortedAngle!==c&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(c),this.sortedAngle=c,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const f of this.symbolInstanceIndexes){const x=this.symbolInstances.get(f);this.featureSortOrder.push(x.featureIndex),[x.rightJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.leftJustifiedTextSymbolIndex].forEach((w,T,j)=>{w>=0&&j.indexOf(w)===T&&this.addIndicesForPlacedSymbol(this.text,w)}),x.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,x.verticalPlacedTextSymbolIndex),x.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.placedIconSymbolIndex),x.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let TL,jL;nn("SymbolBucket",Gg,{omit:["layers","collisionBoxArray","features","compareText"]}),Gg.MAX_GLYPHS=65535,Gg.addDynamicAttributes=Aj;var Ij={get paint(){return jL=jL||new C({"icon-opacity":new jn(ze.paint_symbol["icon-opacity"]),"icon-color":new jn(ze.paint_symbol["icon-color"]),"icon-halo-color":new jn(ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new jn(ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new jn(ze.paint_symbol["icon-halo-blur"]),"icon-translate":new fn(ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new fn(ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new jn(ze.paint_symbol["text-opacity"]),"text-color":new jn(ze.paint_symbol["text-color"],{runtimeType:tr,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new jn(ze.paint_symbol["text-halo-color"]),"text-halo-width":new jn(ze.paint_symbol["text-halo-width"]),"text-halo-blur":new jn(ze.paint_symbol["text-halo-blur"]),"text-translate":new fn(ze.paint_symbol["text-translate"]),"text-translate-anchor":new fn(ze.paint_symbol["text-translate-anchor"])})},get layout(){return TL=TL||new C({"symbol-placement":new fn(ze.layout_symbol["symbol-placement"]),"symbol-spacing":new fn(ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new fn(ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new jn(ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new fn(ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new fn(ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new fn(ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new fn(ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new fn(ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new fn(ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new jn(ze.layout_symbol["icon-size"]),"icon-text-fit":new fn(ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new fn(ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new jn(ze.layout_symbol["icon-image"]),"icon-rotate":new jn(ze.layout_symbol["icon-rotate"]),"icon-padding":new jn(ze.layout_symbol["icon-padding"]),"icon-keep-upright":new fn(ze.layout_symbol["icon-keep-upright"]),"icon-offset":new jn(ze.layout_symbol["icon-offset"]),"icon-anchor":new jn(ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new fn(ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new fn(ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new fn(ze.layout_symbol["text-rotation-alignment"]),"text-field":new jn(ze.layout_symbol["text-field"]),"text-font":new jn(ze.layout_symbol["text-font"]),"text-size":new jn(ze.layout_symbol["text-size"]),"text-max-width":new jn(ze.layout_symbol["text-max-width"]),"text-line-height":new fn(ze.layout_symbol["text-line-height"]),"text-letter-spacing":new jn(ze.layout_symbol["text-letter-spacing"]),"text-justify":new jn(ze.layout_symbol["text-justify"]),"text-radial-offset":new jn(ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new fn(ze.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new jn(ze.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new jn(ze.layout_symbol["text-anchor"]),"text-max-angle":new fn(ze.layout_symbol["text-max-angle"]),"text-writing-mode":new fn(ze.layout_symbol["text-writing-mode"]),"text-rotate":new jn(ze.layout_symbol["text-rotate"]),"text-padding":new fn(ze.layout_symbol["text-padding"]),"text-keep-upright":new fn(ze.layout_symbol["text-keep-upright"]),"text-transform":new jn(ze.layout_symbol["text-transform"]),"text-offset":new jn(ze.layout_symbol["text-offset"]),"text-allow-overlap":new fn(ze.layout_symbol["text-allow-overlap"]),"text-overlap":new fn(ze.layout_symbol["text-overlap"]),"text-ignore-placement":new fn(ze.layout_symbol["text-ignore-placement"]),"text-optional":new fn(ze.layout_symbol["text-optional"])})}};class PL{constructor(c){if(c.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=c.property.overrides?c.property.overrides.runtimeType:ir,this.defaultValue=c}evaluate(c){if(c.formattedSection){const f=this.defaultValue.property.overrides;if(f&&f.hasOverride(c.formattedSection))return f.getOverride(c.formattedSection)}return c.feature&&c.featureState?this.defaultValue.evaluate(c.feature,c.featureState):this.defaultValue.property.specification.default}eachChild(c){this.defaultValue.isConstant()||c(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}nn("FormatSectionOverride",PL,{omit:["defaultValue"]});class Aw extends m{constructor(c){super(c,Ij)}recalculate(c,f){if(super.recalculate(c,f),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const x=this.layout.get("text-writing-mode");if(x){const w=[];for(const T of x)w.indexOf(T)<0&&w.push(T);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(c,f,x,w){const T=this.layout.get(c).evaluate(f,{},x,w),j=this._unevaluatedLayout._values[c];return j.isDataDriven()||_g(j.value)||!T?T:function(A,I){return I.replace(/{([^{}]+)}/g,($,V)=>A&&V in A?String(A[V]):"")}(f.properties,T)}createBucket(c){return new Gg(c)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const c of Ij.paint.overridableProperties){if(!Aw.hasPaintOverride(this.layout,c))continue;const f=this.paint.get(c),x=new PL(f),w=new bg(x,f.property.specification);let T=null;T=f.value.kind==="constant"||f.value.kind==="source"?new fd("source",w):new pd("composite",w,f.value.zoomStops),this.paint._values[c]=new Ml(f.property,T,f.parameters)}}_handleOverridablePaintPropertyUpdate(c,f,x){return!(!this.layout||f.isDataDriven()||x.isDataDriven())&&Aw.hasPaintOverride(this.layout,c)}static hasPaintOverride(c,f){const x=c.get("text-field"),w=Ij.paint.properties[f];let T=!1;const j=A=>{for(const I of A)if(w.overrides&&w.overrides.hasOverride(I))return void(T=!0)};if(x.value.kind==="constant"&&x.value.value instanceof Ds)j(x.value.value.sections);else if(x.value.kind==="source"){const A=$=>{T||($ instanceof Vo&&Si($.value)===Rs?j($.value.sections):$ instanceof ve?j($.sections):$.eachChild(A))},I=x.value;I._styleExpression&&A(I._styleExpression.expression)}return T}}let OL;var fJ={get paint(){return OL=OL||new C({"background-color":new fn(ze.paint_background["background-color"]),"background-pattern":new Mg(ze.paint_background["background-pattern"]),"background-opacity":new fn(ze.paint_background["background-opacity"])})}};class pJ extends m{constructor(c){super(c,fJ)}}let AL;var mJ={get paint(){return AL=AL||new C({"raster-opacity":new fn(ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new fn(ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new fn(ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new fn(ze.paint_raster["raster-brightness-max"]),"raster-saturation":new fn(ze.paint_raster["raster-saturation"]),"raster-contrast":new fn(ze.paint_raster["raster-contrast"]),"raster-resampling":new fn(ze.paint_raster["raster-resampling"]),"raster-fade-duration":new fn(ze.paint_raster["raster-fade-duration"])})}};class gJ extends m{constructor(c){super(c,mJ)}}class yJ extends m{constructor(c){super(c,{}),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=c}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class xJ{constructor(c){this._methodToThrottle=c,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Mj=63710088e-1;class Ed{constructor(c,f){if(isNaN(c)||isNaN(f))throw new Error(`Invalid LngLat object: (${c}, ${f})`);if(this.lng=+c,this.lat=+f,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ed(q(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(c){const f=Math.PI/180,x=this.lat*f,w=c.lat*f,T=Math.sin(x)*Math.sin(w)+Math.cos(x)*Math.cos(w)*Math.cos((c.lng-this.lng)*f);return Mj*Math.acos(Math.min(T,1))}static convert(c){if(c instanceof Ed)return c;if(Array.isArray(c)&&(c.length===2||c.length===3))return new Ed(Number(c[0]),Number(c[1]));if(!Array.isArray(c)&&typeof c=="object"&&c!==null)return new Ed(Number("lng"in c?c.lng:c.lon),Number(c.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const EL=2*Math.PI*Mj;function zL(d){return EL*Math.cos(d*Math.PI/180)}function IL(d){return(180+d)/360}function ML(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function RL(d,c){return d/zL(c)}function Rj(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}class pv{constructor(c,f,x=0){this.x=+c,this.y=+f,this.z=+x}static fromLngLat(c,f=0){const x=Ed.convert(c);return new pv(IL(x.lng),ML(x.lat),RL(f,x.lat))}toLngLat(){return new Ed(360*this.x-180,Rj(this.y))}toAltitude(){return this.z*zL(Rj(this.y))}meterInMercatorCoordinateUnits(){return 1/EL*(c=Rj(this.y),1/Math.cos(c*Math.PI/180));var c}}function DL(d,c,f){var x=2*Math.PI*6378137/256/Math.pow(2,f);return[d*x-2*Math.PI*6378137/2,c*x-2*Math.PI*6378137/2]}class Dj{constructor(c,f,x){if(!function(w,T,j){return!(w<0||w>25||j<0||j>=Math.pow(2,w)||T<0||T>=Math.pow(2,w))}(c,f,x))throw new Error(`x=${f}, y=${x}, z=${c} outside of bounds. 0<=x<${Math.pow(2,c)}, 0<=y<${Math.pow(2,c)} 0<=z<=25 `);this.z=c,this.x=f,this.y=x,this.key=mv(0,c,c,f,x)}equals(c){return this.z===c.z&&this.x===c.x&&this.y===c.y}url(c,f,x){const w=(j=this.y,A=this.z,I=DL(256*(T=this.x),256*(j=Math.pow(2,A)-j-1),A),$=DL(256*(T+1),256*(j+1),A),I[0]+","+I[1]+","+$[0]+","+$[1]);var T,j,A,I,$;const V=function(H,ee,ie){let ce,ue="";for(let ye=H;ye>0;ye--)ce=1<<ye-1,ue+=(ee&ce?1:0)+(ie&ce?2:0);return ue}(this.z,this.x,this.y);return c[(this.x+this.y)%c.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(x==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,f>1?"@2x":"").replace(/{quadkey}/g,V).replace(/{bbox-epsg-3857}/g,w)}isChildOf(c){const f=this.z-c.z;return f>0&&c.x===this.x>>f&&c.y===this.y>>f}getTilePoint(c){const f=Math.pow(2,this.z);return new y((c.x*f-this.x)*Bi,(c.y*f-this.y)*Bi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class LL{constructor(c,f){this.wrap=c,this.canonical=f,this.key=mv(c,f.z,f.z,f.x,f.y)}}class rl{constructor(c,f,x,w,T){if(c<x)throw new Error(`overscaledZ should be >= z; overscaledZ = ${c}; z = ${x}`);this.overscaledZ=c,this.wrap=f,this.canonical=new Dj(x,+w,+T),this.key=mv(f,c,x,w,T)}clone(){return new rl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(c){return this.overscaledZ===c.overscaledZ&&this.wrap===c.wrap&&this.canonical.equals(c.canonical)}scaledTo(c){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-c;return c>this.canonical.z?new rl(c,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new rl(c,this.wrap,c,this.canonical.x>>f,this.canonical.y>>f)}calculateScaledKey(c,f){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const x=this.canonical.z-c;return c>this.canonical.z?mv(this.wrap*+f,c,this.canonical.z,this.canonical.x,this.canonical.y):mv(this.wrap*+f,c,c,this.canonical.x>>x,this.canonical.y>>x)}isChildOf(c){if(c.wrap!==this.wrap)return!1;const f=this.canonical.z-c.canonical.z;return c.overscaledZ===0||c.overscaledZ<this.overscaledZ&&c.canonical.x===this.canonical.x>>f&&c.canonical.y===this.canonical.y>>f}children(c){if(this.overscaledZ>=c)return[new rl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const f=this.canonical.z+1,x=2*this.canonical.x,w=2*this.canonical.y;return[new rl(f,this.wrap,f,x,w),new rl(f,this.wrap,f,x+1,w),new rl(f,this.wrap,f,x,w+1),new rl(f,this.wrap,f,x+1,w+1)]}isLessThan(c){return this.wrap<c.wrap||!(this.wrap>c.wrap)&&(this.overscaledZ<c.overscaledZ||!(this.overscaledZ>c.overscaledZ)&&(this.canonical.x<c.canonical.x||!(this.canonical.x>c.canonical.x)&&this.canonical.y<c.canonical.y))}wrapped(){return new rl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(c){return new rl(this.overscaledZ,c,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new LL(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(c){return this.canonical.getTilePoint(new pv(c.x-this.wrap,c.y))}}function mv(d,c,f,x,w){(d*=2)<0&&(d=-1*d-1);const T=1<<f;return(T*T*d+T*w+x).toString(36)+f.toString(36)+c.toString(36)}nn("CanonicalTileID",Dj),nn("OverscaledTileID",rl,{omit:["posMatrix"]});class FL{constructor(c,f,x,w=1,T=1,j=1,A=0){if(this.uid=c,f.height!==f.width)throw new RangeError("DEM tiles must be square");if(x&&!["mapbox","terrarium","custom"].includes(x))return void Ce(`"${x}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=f.height;const I=this.dim=f.height-2;switch(this.data=new Uint32Array(f.data.buffer),x){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=w,this.greenFactor=T,this.blueFactor=j,this.baseShift=A;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let $=0;$<I;$++)this.data[this._idx(-1,$)]=this.data[this._idx(0,$)],this.data[this._idx(I,$)]=this.data[this._idx(I-1,$)],this.data[this._idx($,-1)]=this.data[this._idx($,0)],this.data[this._idx($,I)]=this.data[this._idx($,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let $=0;$<I;$++)for(let V=0;V<I;V++){const H=this.get($,V);H>this.max&&(this.max=H),H<this.min&&(this.min=H)}}get(c,f){const x=new Uint8Array(this.data.buffer),w=4*this._idx(c,f);return this.unpack(x[w],x[w+1],x[w+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(c,f){if(c<-1||c>=this.dim+1||f<-1||f>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(f+1)*this.stride+(c+1)}unpack(c,f,x){return c*this.redFactor+f*this.greenFactor+x*this.blueFactor-this.baseShift}getPixels(){return new nl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(c,f,x){if(this.dim!==c.dim)throw new Error("dem dimension mismatch");let w=f*this.dim,T=f*this.dim+this.dim,j=x*this.dim,A=x*this.dim+this.dim;switch(f){case-1:w=T-1;break;case 1:T=w+1}switch(x){case-1:j=A-1;break;case 1:A=j+1}const I=-f*this.dim,$=-x*this.dim;for(let V=j;V<A;V++)for(let H=w;H<T;H++)this.data[this._idx(H,V)]=c.data[this._idx(H+I,V+$)]}}nn("DEMData",FL);class BL{constructor(c){this._stringToNumber={},this._numberToString=[];for(let f=0;f<c.length;f++){const x=c[f];this._stringToNumber[x]=f,this._numberToString[f]=x}}encode(c){return this._stringToNumber[c]}decode(c){if(c>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${c} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[c]}}class $L{constructor(c,f,x,w,T){this.type="Feature",this._vectorTileFeature=c,c._z=f,c._x=x,c._y=w,this.properties=c.properties,this.id=T}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(c){this._geometry=c}toJSON(){const c={geometry:this.geometry};for(const f in this)f!=="_geometry"&&f!=="_vectorTileFeature"&&(c[f]=this[f]);return c}}class NL{constructor(c,f){this.tileID=c,this.x=c.canonical.x,this.y=c.canonical.y,this.z=c.canonical.z,this.grid=new yd(Bi,16,0),this.grid3D=new yd(Bi,16,0),this.featureIndexArray=new no,this.promoteId=f}insert(c,f,x,w,T,j){const A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(x,w,T);const I=j?this.grid3D:this.grid;for(let $=0;$<f.length;$++){const V=f[$],H=[1/0,1/0,-1/0,-1/0];for(let ee=0;ee<V.length;ee++){const ie=V[ee];H[0]=Math.min(H[0],ie.x),H[1]=Math.min(H[1],ie.y),H[2]=Math.max(H[2],ie.x),H[3]=Math.max(H[3],ie.y)}H[0]<Bi&&H[1]<Bi&&H[2]>=0&&H[3]>=0&&I.insert(A,H[0],H[1],H[2],H[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Pd.VectorTile(new kj(this.rawTileData)).layers,this.sourceLayerCoder=new BL(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(c,f,x,w){this.loadVTLayers();const T=c.params||{},j=Bi/c.tileSize/c.scale,A=Mx(T.filter),I=c.queryGeometry,$=c.queryPadding*j,V=WL(I),H=this.grid.query(V.minX-$,V.minY-$,V.maxX+$,V.maxY+$),ee=WL(c.cameraQueryGeometry),ie=this.grid3D.query(ee.minX-$,ee.minY-$,ee.maxX+$,ee.maxY+$,(ye,Te,Je,Ve)=>function(Ze,ot,wt,Gt,Cn){for(const Vt of Ze)if(ot<=Vt.x&&wt<=Vt.y&&Gt>=Vt.x&&Cn>=Vt.y)return!0;const Qt=[new y(ot,wt),new y(ot,Cn),new y(Gt,Cn),new y(Gt,wt)];if(Ze.length>2){for(const Vt of Qt)if(Ng(Ze,Vt))return!0}for(let Vt=0;Vt<Ze.length-1;Vt++)if(YZ(Ze[Vt],Ze[Vt+1],Qt))return!0;return!1}(c.cameraQueryGeometry,ye-$,Te-$,Je+$,Ve+$));for(const ye of ie)H.push(ye);H.sort(vJ);const ce={};let ue;for(let ye=0;ye<H.length;ye++){const Te=H[ye];if(Te===ue)continue;ue=Te;const Je=this.featureIndexArray.get(Te);let Ve=null;this.loadMatchingFeature(ce,Je.bucketIndex,Je.sourceLayerIndex,Je.featureIndex,A,T.layers,T.availableImages,f,x,w,(Ze,ot,wt)=>(Ve||(Ve=Ap(Ze)),ot.queryIntersectsFeature(I,Ze,wt,Ve,this.z,c.transform,j,c.pixelPosMatrix)))}return ce}loadMatchingFeature(c,f,x,w,T,j,A,I,$,V,H){const ee=this.bucketLayerIDs[f];if(j&&!function(ye,Te){for(let Je=0;Je<ye.length;Je++)if(Te.indexOf(ye[Je])>=0)return!0;return!1}(j,ee))return;const ie=this.sourceLayerCoder.decode(x),ce=this.vtLayers[ie].feature(w);if(T.needGeometry){const ye=Ep(ce,!0);if(!T.filter(new ei(this.tileID.overscaledZ),ye,this.tileID.canonical))return}else if(!T.filter(new ei(this.tileID.overscaledZ),ce))return;const ue=this.getId(ce,ie);for(let ye=0;ye<ee.length;ye++){const Te=ee[ye];if(j&&j.indexOf(Te)<0)continue;const Je=I[Te];if(!Je)continue;let Ve={};ue&&V&&(Ve=V.getState(Je.sourceLayer||"_geojsonTileLayer",ue));const Ze=X({},$[Te]);Ze.paint=VL(Ze.paint,Je.paint,ce,Ve,A),Ze.layout=VL(Ze.layout,Je.layout,ce,Ve,A);const ot=!H||H(ce,Je,Ve);if(!ot)continue;const wt=new $L(ce,this.z,this.x,this.y,ue);wt.layer=Ze;let Gt=c[Te];Gt===void 0&&(Gt=c[Te]=[]),Gt.push({featureIndex:w,feature:wt,intersectionZ:ot})}}lookupSymbolFeatures(c,f,x,w,T,j,A,I){const $={};this.loadVTLayers();const V=Mx(T);for(const H of c)this.loadMatchingFeature($,x,w,H,V,j,A,I,f);return $}hasLayer(c){for(const f of this.bucketLayerIDs)for(const x of f)if(c===x)return!0;return!1}getId(c,f){let x=c.id;return this.promoteId&&(x=c.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[f]],typeof x=="boolean"&&(x=Number(x))),x}}function VL(d,c,f,x,w){return ne(d,(T,j)=>{const A=c instanceof Tp?c.get(j):null;return A&&A.evaluate?A.evaluate(f,x,w):A})}function WL(d){let c=1/0,f=1/0,x=-1/0,w=-1/0;for(const T of d)c=Math.min(c,T.x),f=Math.min(f,T.y),x=Math.max(x,T.x),w=Math.max(w,T.y);return{minX:c,minY:f,maxX:x,maxY:w}}function vJ(d,c){return c-d}function UL(d,c,f,x,w){const T=[];for(let j=0;j<d.length;j++){const A=d[j];let I;for(let $=0;$<A.length-1;$++){let V=A[$],H=A[$+1];V.x<c&&H.x<c||(V.x<c?V=new y(c,V.y+(c-V.x)/(H.x-V.x)*(H.y-V.y))._round():H.x<c&&(H=new y(c,V.y+(c-V.x)/(H.x-V.x)*(H.y-V.y))._round()),V.y<f&&H.y<f||(V.y<f?V=new y(V.x+(f-V.y)/(H.y-V.y)*(H.x-V.x),f)._round():H.y<f&&(H=new y(V.x+(f-V.y)/(H.y-V.y)*(H.x-V.x),f)._round()),V.x>=x&&H.x>=x||(V.x>=x?V=new y(x,V.y+(x-V.x)/(H.x-V.x)*(H.y-V.y))._round():H.x>=x&&(H=new y(x,V.y+(x-V.x)/(H.x-V.x)*(H.y-V.y))._round()),V.y>=w&&H.y>=w||(V.y>=w?V=new y(V.x+(w-V.y)/(H.y-V.y)*(H.x-V.x),w)._round():H.y>=w&&(H=new y(V.x+(w-V.y)/(H.y-V.y)*(H.x-V.x),w)._round()),I&&V.equals(I[I.length-1])||(I=[V],T.push(I)),I.push(H)))))}}return T}nn("FeatureIndex",NL,{omit:["rawTileData","sourceLayerCoder"]});class zd extends y{constructor(c,f,x,w){super(c,f),this.angle=x,w!==void 0&&(this.segment=w)}clone(){return new zd(this.x,this.y,this.angle,this.segment)}}function qL(d,c,f,x,w){if(c.segment===void 0||f===0)return!0;let T=c,j=c.segment+1,A=0;for(;A>-f/2;){if(j--,j<0)return!1;A-=d[j].dist(T),T=d[j]}A+=d[j].dist(d[j+1]),j++;const I=[];let $=0;for(;A<f/2;){const V=d[j],H=d[j+1];if(!H)return!1;let ee=d[j-1].angleTo(V)-V.angleTo(H);for(ee=Math.abs((ee+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:A,angleDelta:ee}),$+=ee;A-I[0].distance>x;)$-=I.shift().angleDelta;if($>w)return!1;j++,A+=V.dist(H)}return!0}function QL(d){let c=0;for(let f=0;f<d.length-1;f++)c+=d[f].dist(d[f+1]);return c}function HL(d,c,f){return d?.6*c*f:0}function GL(d,c){return Math.max(d?d.right-d.left:0,c?c.right-c.left:0)}function bJ(d,c,f,x,w,T){const j=HL(f,w,T),A=GL(f,x)*T;let I=0;const $=QL(d)/2;for(let V=0;V<d.length-1;V++){const H=d[V],ee=d[V+1],ie=H.dist(ee);if(I+ie>$){const ce=($-I)/ie,ue=is.number(H.x,ee.x,ce),ye=is.number(H.y,ee.y,ce),Te=new zd(ue,ye,ee.angleTo(H),V);return Te._round(),!j||qL(d,Te,A,j,c)?Te:void 0}I+=ie}}function _J(d,c,f,x,w,T,j,A,I){const $=HL(x,T,j),V=GL(x,w),H=V*j,ee=d[0].x===0||d[0].x===I||d[0].y===0||d[0].y===I;return c-H<c/4&&(c=H+c/4),XL(d,ee?c/2*A%c:(V/2+2*T)*j*A%c,c,$,f,H,ee,!1,I)}function XL(d,c,f,x,w,T,j,A,I){const $=T/2,V=QL(d);let H=0,ee=c-f,ie=[];for(let ce=0;ce<d.length-1;ce++){const ue=d[ce],ye=d[ce+1],Te=ue.dist(ye),Je=ye.angleTo(ue);for(;ee+f<H+Te;){ee+=f;const Ve=(ee-H)/Te,Ze=is.number(ue.x,ye.x,Ve),ot=is.number(ue.y,ye.y,Ve);if(Ze>=0&&Ze<I&&ot>=0&&ot<I&&ee-$>=0&&ee+$<=V){const wt=new zd(Ze,ot,Je,ce);wt._round(),x&&!qL(d,wt,T,x,w)||ie.push(wt)}}H+=Te}return A||ie.length||j||(ie=XL(d,H/2,f,x,w,T,j,!0,I)),ie}nn("Anchor",zd);const Xg=Go;function KL(d,c,f,x){const w=[],T=d.image,j=T.pixelRatio,A=T.paddedRect.w-2*Xg,I=T.paddedRect.h-2*Xg;let $={x1:d.left,y1:d.top,x2:d.right,y2:d.bottom};const V=T.stretchX||[[0,A]],H=T.stretchY||[[0,I]],ee=(dt,vn)=>dt+vn[1]-vn[0],ie=V.reduce(ee,0),ce=H.reduce(ee,0),ue=A-ie,ye=I-ce;let Te=0,Je=ie,Ve=0,Ze=ce,ot=0,wt=ue,Gt=0,Cn=ye;if(T.content&&x){const dt=T.content,vn=dt[2]-dt[0],mn=dt[3]-dt[1];(T.textFitWidth||T.textFitHeight)&&($=SL(d)),Te=Ew(V,0,dt[0]),Ve=Ew(H,0,dt[1]),Je=Ew(V,dt[0],dt[2]),Ze=Ew(H,dt[1],dt[3]),ot=dt[0]-Te,Gt=dt[1]-Ve,wt=vn-Je,Cn=mn-Ze}const Qt=$.x1,Vt=$.y1,xn=$.x2-Qt,an=$.y2-Vt,Jt=(dt,vn,mn,zn)=>{const Qr=zw(dt.stretch-Te,Je,xn,Qt),Lr=Iw(dt.fixed-ot,wt,dt.stretch,ie),ss=zw(vn.stretch-Ve,Ze,an,Vt),Dl=Iw(vn.fixed-Gt,Cn,vn.stretch,ce),qs=zw(mn.stretch-Te,Je,xn,Qt),os=Iw(mn.fixed-ot,wt,mn.stretch,ie),Co=zw(zn.stretch-Ve,Ze,an,Vt),To=Iw(zn.fixed-Gt,Cn,zn.stretch,ce),jo=new y(Qr,ss),Ti=new y(qs,ss),as=new y(qs,Co),io=new y(Qr,Co),Qs=new y(Lr/j,Dl/j),Po=new y(os/j,To/j),Hs=c*Math.PI/180;if(Hs){const vr=Math.sin(Hs),Kr=Math.cos(Hs),ii=[Kr,-vr,vr,Kr];jo._matMult(ii),Ti._matMult(ii),io._matMult(ii),as._matMult(ii)}const il=dt.stretch+dt.fixed,Xo=vn.stretch+vn.fixed;return{tl:jo,tr:Ti,bl:io,br:as,tex:{x:T.paddedRect.x+Xg+il,y:T.paddedRect.y+Xg+Xo,w:mn.stretch+mn.fixed-il,h:zn.stretch+zn.fixed-Xo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Qs,pixelOffsetBR:Po,minFontScaleX:wt/j/xn,minFontScaleY:Cn/j/an,isSDF:f}};if(x&&(T.stretchX||T.stretchY)){const dt=ZL(V,ue,ie),vn=ZL(H,ye,ce);for(let mn=0;mn<dt.length-1;mn++){const zn=dt[mn],Qr=dt[mn+1];for(let Lr=0;Lr<vn.length-1;Lr++)w.push(Jt(zn,vn[Lr],Qr,vn[Lr+1]))}}else w.push(Jt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:A+1},{fixed:0,stretch:I+1}));return w}function Ew(d,c,f){let x=0;for(const w of d)x+=Math.max(c,Math.min(f,w[1]))-Math.max(c,Math.min(f,w[0]));return x}function ZL(d,c,f){const x=[{fixed:-Xg,stretch:0}];for(const[w,T]of d){const j=x[x.length-1];x.push({fixed:w-j.stretch,stretch:j.stretch}),x.push({fixed:w-j.stretch,stretch:j.stretch+(T-w)})}return x.push({fixed:c+Xg,stretch:f}),x}function zw(d,c,f,x){return d/c*f+x}function Iw(d,c,f,x){return d-c*f/x}class Mw{constructor(c,f,x,w,T,j,A,I,$,V){var H;if(this.boxStartIndex=c.length,$){let ee=j.top,ie=j.bottom;const ce=j.collisionPadding;ce&&(ee-=ce[1],ie+=ce[3]);let ue=ie-ee;ue>0&&(ue=Math.max(10,ue),this.circleDiameter=ue)}else{const ee=!((H=j.image)===null||H===void 0)&&H.content&&(j.image.textFitWidth||j.image.textFitHeight)?SL(j):{x1:j.left,y1:j.top,x2:j.right,y2:j.bottom};ee.y1=ee.y1*A-I[0],ee.y2=ee.y2*A+I[2],ee.x1=ee.x1*A-I[3],ee.x2=ee.x2*A+I[1];const ie=j.collisionPadding;if(ie&&(ee.x1-=ie[0]*A,ee.y1-=ie[1]*A,ee.x2+=ie[2]*A,ee.y2+=ie[3]*A),V){const ce=new y(ee.x1,ee.y1),ue=new y(ee.x2,ee.y1),ye=new y(ee.x1,ee.y2),Te=new y(ee.x2,ee.y2),Je=V*Math.PI/180;ce._rotate(Je),ue._rotate(Je),ye._rotate(Je),Te._rotate(Je),ee.x1=Math.min(ce.x,ue.x,ye.x,Te.x),ee.x2=Math.max(ce.x,ue.x,ye.x,Te.x),ee.y1=Math.min(ce.y,ue.y,ye.y,Te.y),ee.y2=Math.max(ce.y,ue.y,ye.y,Te.y)}c.emplaceBack(f.x,f.y,ee.x1,ee.y1,ee.x2,ee.y2,x,w,T)}this.boxEndIndex=c.length}}class wJ{constructor(c=[],f=(x,w)=>x<w?-1:x>w?1:0){if(this.data=c,this.length=this.data.length,this.compare=f,this.length>0)for(let x=(this.length>>1)-1;x>=0;x--)this._down(x)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],f=this.data.pop();return--this.length>0&&(this.data[0]=f,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:f,compare:x}=this,w=f[c];for(;c>0;){const T=c-1>>1,j=f[T];if(x(w,j)>=0)break;f[c]=j,c=T}f[c]=w}_down(c){const{data:f,compare:x}=this,w=this.length>>1,T=f[c];for(;c<w;){let j=1+(c<<1);const A=j+1;if(A<this.length&&x(f[A],f[j])<0&&(j=A),x(f[j],T)>=0)break;f[c]=f[j],c=j}f[c]=T}}function SJ(d,c=1,f=!1){let x=1/0,w=1/0,T=-1/0,j=-1/0;const A=d[0];for(let ie=0;ie<A.length;ie++){const ce=A[ie];(!ie||ce.x<x)&&(x=ce.x),(!ie||ce.y<w)&&(w=ce.y),(!ie||ce.x>T)&&(T=ce.x),(!ie||ce.y>j)&&(j=ce.y)}const I=Math.min(T-x,j-w);let $=I/2;const V=new wJ([],kJ);if(I===0)return new y(x,w);for(let ie=x;ie<T;ie+=I)for(let ce=w;ce<j;ce+=I)V.push(new Kg(ie+$,ce+$,$,d));let H=function(ie){let ce=0,ue=0,ye=0;const Te=ie[0];for(let Je=0,Ve=Te.length,Ze=Ve-1;Je<Ve;Ze=Je++){const ot=Te[Je],wt=Te[Ze],Gt=ot.x*wt.y-wt.x*ot.y;ue+=(ot.x+wt.x)*Gt,ye+=(ot.y+wt.y)*Gt,ce+=3*Gt}return new Kg(ue/ce,ye/ce,0,ie)}(d),ee=V.length;for(;V.length;){const ie=V.pop();(ie.d>H.d||!H.d)&&(H=ie,f&&console.log("found best %d after %d probes",Math.round(1e4*ie.d)/1e4,ee)),ie.max-H.d<=c||($=ie.h/2,V.push(new Kg(ie.p.x-$,ie.p.y-$,$,d)),V.push(new Kg(ie.p.x+$,ie.p.y-$,$,d)),V.push(new Kg(ie.p.x-$,ie.p.y+$,$,d)),V.push(new Kg(ie.p.x+$,ie.p.y+$,$,d)),ee+=4)}return f&&(console.log(`num probes: ${ee}`),console.log(`best distance: ${H.d}`)),H.p}function kJ(d,c){return c.max-d.max}function Kg(d,c,f,x){this.p=new y(d,c),this.h=f,this.d=function(w,T){let j=!1,A=1/0;for(let I=0;I<T.length;I++){const $=T[I];for(let V=0,H=$.length,ee=H-1;V<H;ee=V++){const ie=$[V],ce=$[ee];ie.y>w.y!=ce.y>w.y&&w.x<(ce.x-ie.x)*(w.y-ie.y)/(ce.y-ie.y)+ie.x&&(j=!j),A=Math.min(A,MD(w,ie,ce))}}return(j?1:-1)*Math.sqrt(A)}(this.p,x),this.max=this.d+this.h*Math.SQRT2}var Us;o.aq=void 0,(Us=o.aq||(o.aq={}))[Us.center=1]="center",Us[Us.left=2]="left",Us[Us.right=3]="right",Us[Us.top=4]="top",Us[Us.bottom=5]="bottom",Us[Us["top-left"]=6]="top-left",Us[Us["top-right"]=7]="top-right",Us[Us["bottom-left"]=8]="bottom-left",Us[Us["bottom-right"]=9]="bottom-right";const Id=7,Lj=Number.POSITIVE_INFINITY;function YL(d,c){return c[1]!==Lj?function(f,x,w){let T=0,j=0;switch(x=Math.abs(x),w=Math.abs(w),f){case"top-right":case"top-left":case"top":j=w-Id;break;case"bottom-right":case"bottom-left":case"bottom":j=-w+Id}switch(f){case"top-right":case"bottom-right":case"right":T=-x;break;case"top-left":case"bottom-left":case"left":T=x}return[T,j]}(d,c[0],c[1]):function(f,x){let w=0,T=0;x<0&&(x=0);const j=x/Math.SQRT2;switch(f){case"top-right":case"top-left":T=j-Id;break;case"bottom-right":case"bottom-left":T=-j+Id;break;case"bottom":T=-x+Id;break;case"top":T=x-Id}switch(f){case"top-right":case"bottom-right":w=-j;break;case"top-left":case"bottom-left":w=j;break;case"left":w=x;break;case"right":w=-x}return[w,T]}(d,c[0])}function JL(d,c,f){var x;const w=d.layout,T=(x=w.get("text-variable-anchor-offset"))===null||x===void 0?void 0:x.evaluate(c,{},f);if(T){const A=T.values,I=[];for(let $=0;$<A.length;$+=2){const V=I[$]=A[$],H=A[$+1].map(ee=>ee*qi);V.startsWith("top")?H[1]-=Id:V.startsWith("bottom")&&(H[1]+=Id),I[$+1]=H}return new wo(I)}const j=w.get("text-variable-anchor");if(j){let A;A=d._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[w.get("text-radial-offset").evaluate(c,{},f)*qi,Lj]:w.get("text-offset").evaluate(c,{},f).map($=>$*qi);const I=[];for(const $ of j)I.push($,YL($,A));return new wo(I)}return null}function Fj(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function CJ(d,c,f,x,w,T,j,A,I,$,V){let H=T.textMaxSize.evaluate(c,{});H===void 0&&(H=j);const ee=d.layers[0].layout,ie=ee.get("icon-offset").evaluate(c,{},V),ce=t3(f.horizontal),ue=j/24,ye=d.tilePixelRatio*ue,Te=d.tilePixelRatio*H/24,Je=d.tilePixelRatio*A,Ve=d.tilePixelRatio*ee.get("symbol-spacing"),Ze=ee.get("text-padding")*d.tilePixelRatio,ot=function(dt,vn,mn,zn=1){const Qr=dt.get("icon-padding").evaluate(vn,{},mn),Lr=Qr&&Qr.values;return[Lr[0]*zn,Lr[1]*zn,Lr[2]*zn,Lr[3]*zn]}(ee,c,V,d.tilePixelRatio),wt=ee.get("text-max-angle")/180*Math.PI,Gt=ee.get("text-rotation-alignment")!=="viewport"&&ee.get("symbol-placement")!=="point",Cn=ee.get("icon-rotation-alignment")==="map"&&ee.get("symbol-placement")!=="point",Qt=ee.get("symbol-placement"),Vt=Ve/2,xn=ee.get("icon-text-fit");let an;x&&xn!=="none"&&(d.allowVerticalPlacement&&f.vertical&&(an=kL(x,f.vertical,xn,ee.get("icon-text-fit-padding"),ie,ue)),ce&&(x=kL(x,ce,xn,ee.get("icon-text-fit-padding"),ie,ue)));const Jt=(dt,vn)=>{vn.x<0||vn.x>=Bi||vn.y<0||vn.y>=Bi||function(mn,zn,Qr,Lr,ss,Dl,qs,os,Co,To,jo,Ti,as,io,Qs,Po,Hs,il,Xo,vr,Kr,ii,_a,xi,Zg){const lu=mn.addToLineVertexArray(zn,Qr);let cu,Ll,sl,ws,ph=0,xv=0,s3=0,o3=0,Qj=-1,Hj=-1;const mh={};let a3=Lg("");if(mn.allowVerticalPlacement&&Lr.vertical){const so=os.layout.get("text-rotate").evaluate(Kr,{},xi)+90;sl=new Mw(Co,zn,To,jo,Ti,Lr.vertical,as,io,Qs,so),qs&&(ws=new Mw(Co,zn,To,jo,Ti,qs,Hs,il,Qs,so))}if(ss){const so=os.layout.get("icon-rotate").evaluate(Kr,{}),ol=os.layout.get("icon-text-fit")!=="none",Ip=KL(ss,so,_a,ol),Cc=qs?KL(qs,so,_a,ol):void 0;Ll=new Mw(Co,zn,To,jo,Ti,ss,Hs,il,!1,so),ph=4*Ip.length;const Mp=mn.iconSizeData;let uu=null;Mp.kind==="source"?(uu=[au*os.layout.get("icon-size").evaluate(Kr,{})],uu[0]>Ad&&Ce(`${mn.layerIds[0]}: Value for "icon-size" is >= ${fv}. Reduce your "icon-size".`)):Mp.kind==="composite"&&(uu=[au*ii.compositeIconSizes[0].evaluate(Kr,{},xi),au*ii.compositeIconSizes[1].evaluate(Kr,{},xi)],(uu[0]>Ad||uu[1]>Ad)&&Ce(`${mn.layerIds[0]}: Value for "icon-size" is >= ${fv}. Reduce your "icon-size".`)),mn.addSymbols(mn.icon,Ip,uu,vr,Xo,Kr,o.ah.none,zn,lu.lineStartIndex,lu.lineLength,-1,xi),Qj=mn.icon.placedSymbolArray.length-1,Cc&&(xv=4*Cc.length,mn.addSymbols(mn.icon,Cc,uu,vr,Xo,Kr,o.ah.vertical,zn,lu.lineStartIndex,lu.lineLength,-1,xi),Hj=mn.icon.placedSymbolArray.length-1)}const l3=Object.keys(Lr.horizontal);for(const so of l3){const ol=Lr.horizontal[so];if(!cu){a3=Lg(ol.text);const Cc=os.layout.get("text-rotate").evaluate(Kr,{},xi);cu=new Mw(Co,zn,To,jo,Ti,ol,as,io,Qs,Cc)}const Ip=ol.positionedLines.length===1;if(s3+=e3(mn,zn,ol,Dl,os,Qs,Kr,Po,lu,Lr.vertical?o.ah.horizontal:o.ah.horizontalOnly,Ip?l3:[so],mh,Qj,ii,xi),Ip)break}Lr.vertical&&(o3+=e3(mn,zn,Lr.vertical,Dl,os,Qs,Kr,Po,lu,o.ah.vertical,["vertical"],mh,Hj,ii,xi));const PJ=cu?cu.boxStartIndex:mn.collisionBoxArray.length,OJ=cu?cu.boxEndIndex:mn.collisionBoxArray.length,AJ=sl?sl.boxStartIndex:mn.collisionBoxArray.length,EJ=sl?sl.boxEndIndex:mn.collisionBoxArray.length,zJ=Ll?Ll.boxStartIndex:mn.collisionBoxArray.length,IJ=Ll?Ll.boxEndIndex:mn.collisionBoxArray.length,MJ=ws?ws.boxStartIndex:mn.collisionBoxArray.length,RJ=ws?ws.boxEndIndex:mn.collisionBoxArray.length;let kc=-1;const Dw=(so,ol)=>so&&so.circleDiameter?Math.max(so.circleDiameter,ol):ol;kc=Dw(cu,kc),kc=Dw(sl,kc),kc=Dw(Ll,kc),kc=Dw(ws,kc);const c3=kc>-1?1:0;c3&&(kc*=Zg/qi),mn.glyphOffsetArray.length>=Gg.MAX_GLYPHS&&Ce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Kr.sortKey!==void 0&&mn.addToSortKeyRanges(mn.symbolInstances.length,Kr.sortKey);const DJ=JL(os,Kr,xi),[LJ,FJ]=function(so,ol){const Ip=so.length,Cc=ol==null?void 0:ol.values;if((Cc==null?void 0:Cc.length)>0)for(let Mp=0;Mp<Cc.length;Mp+=2){const uu=Cc[Mp+1];so.emplaceBack(o.aq[Cc[Mp]],uu[0],uu[1])}return[Ip,so.length]}(mn.textAnchorOffsets,DJ);mn.symbolInstances.emplaceBack(zn.x,zn.y,mh.right>=0?mh.right:-1,mh.center>=0?mh.center:-1,mh.left>=0?mh.left:-1,mh.vertical||-1,Qj,Hj,a3,PJ,OJ,AJ,EJ,zJ,IJ,MJ,RJ,To,s3,o3,ph,xv,c3,0,as,kc,LJ,FJ)}(d,vn,dt,f,x,w,an,d.layers[0],d.collisionBoxArray,c.index,c.sourceLayerIndex,d.index,ye,[Ze,Ze,Ze,Ze],Gt,I,Je,ot,Cn,ie,c,T,$,V,j)};if(Qt==="line")for(const dt of UL(c.geometry,0,0,Bi,Bi)){const vn=_J(dt,Ve,wt,f.vertical||ce,x,24,Te,d.overscaling,Bi);for(const mn of vn)ce&&TJ(d,ce.text,Vt,mn)||Jt(dt,mn)}else if(Qt==="line-center"){for(const dt of c.geometry)if(dt.length>1){const vn=bJ(dt,wt,f.vertical||ce,x,24,Te);vn&&Jt(dt,vn)}}else if(c.type==="Polygon")for(const dt of fg(c.geometry,0)){const vn=SJ(dt,16);Jt(dt[0],new zd(vn.x,vn.y,0))}else if(c.type==="LineString")for(const dt of c.geometry)Jt(dt,new zd(dt[0].x,dt[0].y,0));else if(c.type==="Point")for(const dt of c.geometry)for(const vn of dt)Jt([vn],new zd(vn.x,vn.y,0))}function e3(d,c,f,x,w,T,j,A,I,$,V,H,ee,ie,ce){const ue=function(Je,Ve,Ze,ot,wt,Gt,Cn,Qt){const Vt=ot.layout.get("text-rotate").evaluate(Gt,{})*Math.PI/180,xn=[];for(const an of Ve.positionedLines)for(const Jt of an.positionedGlyphs){if(!Jt.rect)continue;const dt=Jt.rect||{};let vn=gL+1,mn=!0,zn=1,Qr=0;const Lr=(wt||Qt)&&Jt.vertical,ss=Jt.metrics.advance*Jt.scale/2;if(Qt&&Ve.verticalizable&&(Qr=an.lineOffset/2-(Jt.imageName?-(qi-Jt.metrics.width*Jt.scale)/2:(Jt.scale-1)*qi)),Jt.imageName){const vr=Cn[Jt.imageName];mn=vr.sdf,zn=vr.pixelRatio,vn=Go/zn}const Dl=wt?[Jt.x+ss,Jt.y]:[0,0];let qs=wt?[0,0]:[Jt.x+ss+Ze[0],Jt.y+Ze[1]-Qr],os=[0,0];Lr&&(os=qs,qs=[0,0]);const Co=Jt.metrics.isDoubleResolution?2:1,To=(Jt.metrics.left-vn)*Jt.scale-ss+qs[0],jo=(-Jt.metrics.top-vn)*Jt.scale+qs[1],Ti=To+dt.w/Co*Jt.scale/zn,as=jo+dt.h/Co*Jt.scale/zn,io=new y(To,jo),Qs=new y(Ti,jo),Po=new y(To,as),Hs=new y(Ti,as);if(Lr){const vr=new y(-ss,ss-hv),Kr=-Math.PI/2,ii=qi/2-ss,_a=new y(5-hv-ii,-(Jt.imageName?ii:0)),xi=new y(...os);io._rotateAround(Kr,vr)._add(_a)._add(xi),Qs._rotateAround(Kr,vr)._add(_a)._add(xi),Po._rotateAround(Kr,vr)._add(_a)._add(xi),Hs._rotateAround(Kr,vr)._add(_a)._add(xi)}if(Vt){const vr=Math.sin(Vt),Kr=Math.cos(Vt),ii=[Kr,-vr,vr,Kr];io._matMult(ii),Qs._matMult(ii),Po._matMult(ii),Hs._matMult(ii)}const il=new y(0,0),Xo=new y(0,0);xn.push({tl:io,tr:Qs,bl:Po,br:Hs,tex:dt,writingMode:Ve.writingMode,glyphOffset:Dl,sectionIndex:Jt.sectionIndex,isSDF:mn,pixelOffsetTL:il,pixelOffsetBR:Xo,minFontScaleX:0,minFontScaleY:0})}return xn}(0,f,A,w,T,j,x,d.allowVerticalPlacement),ye=d.textSizeData;let Te=null;ye.kind==="source"?(Te=[au*w.layout.get("text-size").evaluate(j,{})],Te[0]>Ad&&Ce(`${d.layerIds[0]}: Value for "text-size" is >= ${fv}. Reduce your "text-size".`)):ye.kind==="composite"&&(Te=[au*ie.compositeTextSizes[0].evaluate(j,{},ce),au*ie.compositeTextSizes[1].evaluate(j,{},ce)],(Te[0]>Ad||Te[1]>Ad)&&Ce(`${d.layerIds[0]}: Value for "text-size" is >= ${fv}. Reduce your "text-size".`)),d.addSymbols(d.text,ue,Te,A,T,j,$,c,I.lineStartIndex,I.lineLength,ee,ce);for(const Je of V)H[Je]=d.text.placedSymbolArray.length-1;return 4*ue.length}function t3(d){for(const c in d)return d[c];return null}function TJ(d,c,f,x){const w=d.compareText;if(c in w){const T=w[c];for(let j=T.length-1;j>=0;j--)if(x.dist(T[j])<f)return!0}else w[c]=[];return w[c].push(x),!1}const n3=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Bj{static from(c){if(!(c instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[f,x]=new Uint8Array(c,0,2);if(f!==219)throw new Error("Data does not appear to be in a KDBush format.");const w=x>>4;if(w!==1)throw new Error(`Got v${w} data when expected v1.`);const T=n3[15&x];if(!T)throw new Error("Unrecognized array type.");const[j]=new Uint16Array(c,2,1),[A]=new Uint32Array(c,4,1);return new Bj(A,j,T,c)}constructor(c,f=64,x=Float64Array,w){if(isNaN(c)||c<0)throw new Error(`Unpexpected numItems value: ${c}.`);this.numItems=+c,this.nodeSize=Math.min(Math.max(+f,2),65535),this.ArrayType=x,this.IndexArrayType=c<65536?Uint16Array:Uint32Array;const T=n3.indexOf(this.ArrayType),j=2*c*this.ArrayType.BYTES_PER_ELEMENT,A=c*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-A%8)%8;if(T<0)throw new Error(`Unexpected typed array class: ${x}.`);w&&w instanceof ArrayBuffer?(this.data=w,this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+A+I,2*c),this._pos=2*c,this._finished=!0):(this.data=new ArrayBuffer(8+j+A+I),this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+A+I,2*c),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+T]),new Uint16Array(this.data,2,1)[0]=f,new Uint32Array(this.data,4,1)[0]=c)}add(c,f){const x=this._pos>>1;return this.ids[x]=x,this.coords[this._pos++]=c,this.coords[this._pos++]=f,x}finish(){const c=this._pos>>1;if(c!==this.numItems)throw new Error(`Added ${c} items when expected ${this.numItems}.`);return $j(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(c,f,x,w){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:T,coords:j,nodeSize:A}=this,I=[0,T.length-1,0],$=[];for(;I.length;){const V=I.pop()||0,H=I.pop()||0,ee=I.pop()||0;if(H-ee<=A){for(let ye=ee;ye<=H;ye++){const Te=j[2*ye],Je=j[2*ye+1];Te>=c&&Te<=x&&Je>=f&&Je<=w&&$.push(T[ye])}continue}const ie=ee+H>>1,ce=j[2*ie],ue=j[2*ie+1];ce>=c&&ce<=x&&ue>=f&&ue<=w&&$.push(T[ie]),(V===0?c<=ce:f<=ue)&&(I.push(ee),I.push(ie-1),I.push(1-V)),(V===0?x>=ce:w>=ue)&&(I.push(ie+1),I.push(H),I.push(1-V))}return $}within(c,f,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:T,nodeSize:j}=this,A=[0,w.length-1,0],I=[],$=x*x;for(;A.length;){const V=A.pop()||0,H=A.pop()||0,ee=A.pop()||0;if(H-ee<=j){for(let ye=ee;ye<=H;ye++)i3(T[2*ye],T[2*ye+1],c,f)<=$&&I.push(w[ye]);continue}const ie=ee+H>>1,ce=T[2*ie],ue=T[2*ie+1];i3(ce,ue,c,f)<=$&&I.push(w[ie]),(V===0?c-x<=ce:f-x<=ue)&&(A.push(ee),A.push(ie-1),A.push(1-V)),(V===0?c+x>=ce:f+x>=ue)&&(A.push(ie+1),A.push(H),A.push(1-V))}return I}}function $j(d,c,f,x,w,T){if(w-x<=f)return;const j=x+w>>1;r3(d,c,j,x,w,T),$j(d,c,f,x,j-1,1-T),$j(d,c,f,j+1,w,1-T)}function r3(d,c,f,x,w,T){for(;w>x;){if(w-x>600){const $=w-x+1,V=f-x+1,H=Math.log($),ee=.5*Math.exp(2*H/3),ie=.5*Math.sqrt(H*ee*($-ee)/$)*(V-$/2<0?-1:1);r3(d,c,f,Math.max(x,Math.floor(f-V*ee/$+ie)),Math.min(w,Math.floor(f+($-V)*ee/$+ie)),T)}const j=c[2*f+T];let A=x,I=w;for(gv(d,c,x,f),c[2*w+T]>j&&gv(d,c,x,w);A<I;){for(gv(d,c,A,I),A++,I--;c[2*A+T]<j;)A++;for(;c[2*I+T]>j;)I--}c[2*x+T]===j?gv(d,c,x,I):(I++,gv(d,c,I,w)),I<=f&&(x=I+1),f<=I&&(w=I-1)}}function gv(d,c,f,x){Nj(d,f,x),Nj(c,2*f,2*x),Nj(c,2*f+1,2*x+1)}function Nj(d,c,f){const x=d[c];d[c]=d[f],d[f]=x}function i3(d,c,f,x){const w=d-f,T=c-x;return w*w+T*T}var Vj;o.bg=void 0,(Vj=o.bg||(o.bg={})).create="create",Vj.load="load",Vj.fullLoad="fullLoad";let Rw=null,yv=[];const Wj=1e3/60,Uj="loadTime",qj="fullLoadTime",jJ={mark(d){performance.mark(d)},frame(d){const c=d;Rw!=null&&yv.push(c-Rw),Rw=c},clearMetrics(){Rw=null,yv=[],performance.clearMeasures(Uj),performance.clearMeasures(qj);for(const d in o.bg)performance.clearMarks(o.bg[d])},getPerformanceMetrics(){performance.measure(Uj,o.bg.create,o.bg.load),performance.measure(qj,o.bg.create,o.bg.fullLoad);const d=performance.getEntriesByName(Uj)[0].duration,c=performance.getEntriesByName(qj)[0].duration,f=yv.length,x=1/(yv.reduce((T,j)=>T+j,0)/f/1e3),w=yv.filter(T=>T>Wj).reduce((T,j)=>T+(j-Wj)/Wj,0);return{loadTime:d,fullLoadTime:c,fps:x,percentDroppedFrames:w/(f+w)*100,totalFrames:f}}};o.$=class extends Z{},o.A=Vg,o.B=JT,o.C=function(d){if(Fe==null){const c=d.navigator?d.navigator.userAgent:null;Fe=!!d.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return Fe},o.D=fn,o.E=it,o.F=class{constructor(d,c){this.target=d,this.mapId=c,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new xJ(()=>this.process()),this.subscription=function(f,x,w,T){return f.addEventListener(x,w,!1),{unsubscribe:()=>{f.removeEventListener(x,w,!1)}}}(this.target,"message",f=>this.receive(f)),this.globalScope=We(self)?d:window}registerMessageHandler(d,c){this.messageHandlers[d]=c}sendAsync(d,c){return new Promise((f,x)=>{const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[w]={resolve:f,reject:x},c&&c.signal.addEventListener("abort",()=>{delete this.resolveRejects[w];const A={id:w,type:"<cancel>",origin:location.origin,targetMapId:d.targetMapId,sourceMapId:this.mapId};this.target.postMessage(A)},{once:!0});const T=[],j=Object.assign(Object.assign({},d),{id:w,sourceMapId:this.mapId,origin:location.origin,data:xd(d.data,T)});this.target.postMessage(j,{transfer:T})})}receive(d){const c=d.data,f=c.id;if(!(c.origin!=="file://"&&location.origin!=="file://"&&c.origin!=="resource://android"&&location.origin!=="resource://android"&&c.origin!==location.origin||c.targetMapId&&this.mapId!==c.targetMapId)){if(c.type==="<cancel>"){delete this.tasks[f];const x=this.abortControllers[f];return delete this.abortControllers[f],void(x&&x.abort())}if(We(self)||c.mustQueue)return this.tasks[f]=c,this.taskQueue.push(f),void this.invoker.trigger();this.processTask(f,c)}}process(){if(this.taskQueue.length===0)return;const d=this.taskQueue.shift(),c=this.tasks[d];delete this.tasks[d],this.taskQueue.length>0&&this.invoker.trigger(),c&&this.processTask(d,c)}processTask(d,c){return a(this,void 0,void 0,function*(){if(c.type==="<response>"){const w=this.resolveRejects[d];return delete this.resolveRejects[d],w?void(c.error?w.reject(vd(c.error)):w.resolve(vd(c.data))):void 0}if(!this.messageHandlers[c.type])return void this.completeTask(d,new Error(`Could not find a registered handler for ${c.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const f=vd(c.data),x=new AbortController;this.abortControllers[d]=x;try{const w=yield this.messageHandlers[c.type](c.sourceMapId,f,x);this.completeTask(d,null,w)}catch(w){this.completeTask(d,w)}})}completeTask(d,c,f){const x=[];delete this.abortControllers[d];const w={id:d,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:c?xd(c):null,data:xd(f,x)};this.target.postMessage(w,{transfer:x})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},o.G=tt,o.H=function(){var d=new Vg(16);return Vg!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},o.I=Tj,o.J=function(d,c,f){var x,w,T,j,A,I,$,V,H,ee,ie,ce,ue=f[0],ye=f[1],Te=f[2];return c===d?(d[12]=c[0]*ue+c[4]*ye+c[8]*Te+c[12],d[13]=c[1]*ue+c[5]*ye+c[9]*Te+c[13],d[14]=c[2]*ue+c[6]*ye+c[10]*Te+c[14],d[15]=c[3]*ue+c[7]*ye+c[11]*Te+c[15]):(w=c[1],T=c[2],j=c[3],A=c[4],I=c[5],$=c[6],V=c[7],H=c[8],ee=c[9],ie=c[10],ce=c[11],d[0]=x=c[0],d[1]=w,d[2]=T,d[3]=j,d[4]=A,d[5]=I,d[6]=$,d[7]=V,d[8]=H,d[9]=ee,d[10]=ie,d[11]=ce,d[12]=x*ue+A*ye+H*Te+c[12],d[13]=w*ue+I*ye+ee*Te+c[13],d[14]=T*ue+$*ye+ie*Te+c[14],d[15]=j*ue+V*ye+ce*Te+c[15]),d},o.K=function(d,c,f){var x=f[0],w=f[1],T=f[2];return d[0]=c[0]*x,d[1]=c[1]*x,d[2]=c[2]*x,d[3]=c[3]*x,d[4]=c[4]*w,d[5]=c[5]*w,d[6]=c[6]*w,d[7]=c[7]*w,d[8]=c[8]*T,d[9]=c[9]*T,d[10]=c[10]*T,d[11]=c[11]*T,d[12]=c[12],d[13]=c[13],d[14]=c[14],d[15]=c[15],d},o.L=FD,o.M=function(d,c){const f={};for(let x=0;x<c.length;x++){const w=c[x];w in d&&(f[w]=d[w])}return f},o.N=Ed,o.O=IL,o.P=y,o.Q=ML,o.R=nl,o.S=rl,o.T=zg,o.U=z,o.V=F,o.W=Qe,o.X=Bi,o.Y=E,o.Z=pv,o._=a,o.a=nt,o.a$=function(d,c){var f=d[0],x=d[1],w=d[2],T=d[3],j=d[4],A=d[5],I=d[6],$=d[7],V=d[8],H=d[9],ee=d[10],ie=d[11],ce=d[12],ue=d[13],ye=d[14],Te=d[15],Je=c[0],Ve=c[1],Ze=c[2],ot=c[3],wt=c[4],Gt=c[5],Cn=c[6],Qt=c[7],Vt=c[8],xn=c[9],an=c[10],Jt=c[11],dt=c[12],vn=c[13],mn=c[14],zn=c[15];return Math.abs(f-Je)<=ko*Math.max(1,Math.abs(f),Math.abs(Je))&&Math.abs(x-Ve)<=ko*Math.max(1,Math.abs(x),Math.abs(Ve))&&Math.abs(w-Ze)<=ko*Math.max(1,Math.abs(w),Math.abs(Ze))&&Math.abs(T-ot)<=ko*Math.max(1,Math.abs(T),Math.abs(ot))&&Math.abs(j-wt)<=ko*Math.max(1,Math.abs(j),Math.abs(wt))&&Math.abs(A-Gt)<=ko*Math.max(1,Math.abs(A),Math.abs(Gt))&&Math.abs(I-Cn)<=ko*Math.max(1,Math.abs(I),Math.abs(Cn))&&Math.abs($-Qt)<=ko*Math.max(1,Math.abs($),Math.abs(Qt))&&Math.abs(V-Vt)<=ko*Math.max(1,Math.abs(V),Math.abs(Vt))&&Math.abs(H-xn)<=ko*Math.max(1,Math.abs(H),Math.abs(xn))&&Math.abs(ee-an)<=ko*Math.max(1,Math.abs(ee),Math.abs(an))&&Math.abs(ie-Jt)<=ko*Math.max(1,Math.abs(ie),Math.abs(Jt))&&Math.abs(ce-dt)<=ko*Math.max(1,Math.abs(ce),Math.abs(dt))&&Math.abs(ue-vn)<=ko*Math.max(1,Math.abs(ue),Math.abs(vn))&&Math.abs(ye-mn)<=ko*Math.max(1,Math.abs(ye),Math.abs(mn))&&Math.abs(Te-zn)<=ko*Math.max(1,Math.abs(Te),Math.abs(zn))},o.a0=or,o.a1=Dj,o.a2=Me,o.a3=d=>{const c=window.document.createElement("video");return c.muted=!0,new Promise(f=>{c.onloadstart=()=>{f(c)};for(const x of d){const w=window.document.createElement("source");Ot(x)||(c.crossOrigin="Anonymous"),w.src=x,c.appendChild(w)}})},o.a4=function(){return K++},o.a5=Ht,o.a6=Gg,o.a7=Mx,o.a8=Ep,o.a9=$L,o.aA=function(d){if(d.type==="custom")return new yJ(d);switch(d.type){case"background":return new pJ(d);case"circle":return new tY(d);case"fill":return new xY(d);case"fill-extrusion":return new IY(d);case"heatmap":return new rY(d);case"hillshade":return new sY(d);case"line":return new NY(d);case"raster":return new gJ(d);case"symbol":return new Aw(d)}},o.aB=ae,o.aC=function(d,c){if(!d)return[{command:"setStyle",args:[c]}];let f=[];try{if(!Ct(d.version,c.version))return[{command:"setStyle",args:[c]}];Ct(d.center,c.center)||f.push({command:"setCenter",args:[c.center]}),Ct(d.zoom,c.zoom)||f.push({command:"setZoom",args:[c.zoom]}),Ct(d.bearing,c.bearing)||f.push({command:"setBearing",args:[c.bearing]}),Ct(d.pitch,c.pitch)||f.push({command:"setPitch",args:[c.pitch]}),Ct(d.sprite,c.sprite)||f.push({command:"setSprite",args:[c.sprite]}),Ct(d.glyphs,c.glyphs)||f.push({command:"setGlyphs",args:[c.glyphs]}),Ct(d.transition,c.transition)||f.push({command:"setTransition",args:[c.transition]}),Ct(d.light,c.light)||f.push({command:"setLight",args:[c.light]}),Ct(d.terrain,c.terrain)||f.push({command:"setTerrain",args:[c.terrain]}),Ct(d.sky,c.sky)||f.push({command:"setSky",args:[c.sky]}),Ct(d.projection,c.projection)||f.push({command:"setProjection",args:[c.projection]});const x={},w=[];(function(j,A,I,$){let V;for(V in A=A||{},j=j||{})Object.prototype.hasOwnProperty.call(j,V)&&(Object.prototype.hasOwnProperty.call(A,V)||br(V,I,$));for(V in A)Object.prototype.hasOwnProperty.call(A,V)&&(Object.prototype.hasOwnProperty.call(j,V)?Ct(j[V],A[V])||(j[V].type==="geojson"&&A[V].type==="geojson"&&Ar(j,A,V)?$t(I,{command:"setGeoJSONSourceData",args:[V,A[V].data]}):ur(V,A,I,$)):Yn(V,A,I))})(d.sources,c.sources,w,x);const T=[];d.layers&&d.layers.forEach(j=>{"source"in j&&x[j.source]?f.push({command:"removeLayer",args:[j.id]}):T.push(j)}),f=f.concat(w),function(j,A,I){A=A||[];const $=(j=j||[]).map(ct),V=A.map(ct),H=j.reduce(Tt,{}),ee=A.reduce(Tt,{}),ie=$.slice(),ce=Object.create(null);let ue,ye,Te,Je,Ve;for(let Ze=0,ot=0;Ze<$.length;Ze++)ue=$[Ze],Object.prototype.hasOwnProperty.call(ee,ue)?ot++:($t(I,{command:"removeLayer",args:[ue]}),ie.splice(ie.indexOf(ue,ot),1));for(let Ze=0,ot=0;Ze<V.length;Ze++)ue=V[V.length-1-Ze],ie[ie.length-1-Ze]!==ue&&(Object.prototype.hasOwnProperty.call(H,ue)?($t(I,{command:"removeLayer",args:[ue]}),ie.splice(ie.lastIndexOf(ue,ie.length-ot),1)):ot++,Je=ie[ie.length-Ze],$t(I,{command:"addLayer",args:[ee[ue],Je]}),ie.splice(ie.length-Ze,0,ue),ce[ue]=!0);for(let Ze=0;Ze<V.length;Ze++)if(ue=V[Ze],ye=H[ue],Te=ee[ue],!ce[ue]&&!Ct(ye,Te))if(Ct(ye.source,Te.source)&&Ct(ye["source-layer"],Te["source-layer"])&&Ct(ye.type,Te.type)){for(Ve in _r(ye.layout,Te.layout,I,ue,null,"setLayoutProperty"),_r(ye.paint,Te.paint,I,ue,null,"setPaintProperty"),Ct(ye.filter,Te.filter)||$t(I,{command:"setFilter",args:[ue,Te.filter]}),Ct(ye.minzoom,Te.minzoom)&&Ct(ye.maxzoom,Te.maxzoom)||$t(I,{command:"setLayerZoomRange",args:[ue,Te.minzoom,Te.maxzoom]}),ye)Object.prototype.hasOwnProperty.call(ye,Ve)&&Ve!=="layout"&&Ve!=="paint"&&Ve!=="filter"&&Ve!=="metadata"&&Ve!=="minzoom"&&Ve!=="maxzoom"&&(Ve.indexOf("paint.")===0?_r(ye[Ve],Te[Ve],I,ue,Ve.slice(6),"setPaintProperty"):Ct(ye[Ve],Te[Ve])||$t(I,{command:"setLayerProperty",args:[ue,Ve,Te[Ve]]}));for(Ve in Te)Object.prototype.hasOwnProperty.call(Te,Ve)&&!Object.prototype.hasOwnProperty.call(ye,Ve)&&Ve!=="layout"&&Ve!=="paint"&&Ve!=="filter"&&Ve!=="metadata"&&Ve!=="minzoom"&&Ve!=="maxzoom"&&(Ve.indexOf("paint.")===0?_r(ye[Ve],Te[Ve],I,ue,Ve.slice(6),"setPaintProperty"):Ct(ye[Ve],Te[Ve])||$t(I,{command:"setLayerProperty",args:[ue,Ve,Te[Ve]]}))}else $t(I,{command:"removeLayer",args:[ue]}),Je=ie[ie.lastIndexOf(ue)+1],$t(I,{command:"addLayer",args:[Te,Je]})}(T,c.layers,f)}catch(x){console.warn("Unable to compute style diff:",x),f=[{command:"setStyle",args:[c]}]}return f},o.aD=function(d){const c=[],f=d.id;return f===void 0&&c.push({message:`layers.${f}: missing required property "id"`}),d.render===void 0&&c.push({message:`layers.${f}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&c.push({message:`layers.${f}: property "renderingMode" must be either "2d" or "3d"`}),c},o.aE=function d(c,f){if(Array.isArray(c)){if(!Array.isArray(f)||c.length!==f.length)return!1;for(let x=0;x<c.length;x++)if(!d(c[x],f[x]))return!1;return!0}if(typeof c=="object"&&c!==null&&f!==null){if(typeof f!="object"||Object.keys(c).length!==Object.keys(f).length)return!1;for(const x in c)if(!d(c[x],f[x]))return!1;return!0}return c===f},o.aF=ne,o.aG=J,o.aH=class extends Pp{constructor(d,c){super(d,c),this.current=0}set(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},o.aI=yw,o.aJ=class extends Pp{constructor(d,c){super(d,c),this.current=HZ}set(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let c=1;c<16;c++)if(d[c]!==this.current[c]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}},o.aK=jD,o.aL=PD,o.aM=yr,o.aN=class extends Pp{constructor(d,c){super(d,c),this.current=[0,0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))}},o.aO=class extends Pp{constructor(d,c){super(d,c),this.current=[0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))}},o.aP=function(d,c,f,x,w,T,j){var A=1/(c-f),I=1/(x-w),$=1/(T-j);return d[0]=-2*A,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*I,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*$,d[11]=0,d[12]=(c+f)*A,d[13]=(w+x)*I,d[14]=(j+T)*$,d[15]=1,d},o.aQ=eY,o.aR=class extends Ue{},o.aS=qY,o.aT=class extends et{},o.aU=pj,o.aV=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},o.aW=WD,o.aX=Vs,o.aY=tl,o.aZ=class extends pn{},o.a_=function(d,c){return d[0]===c[0]&&d[1]===c[1]&&d[2]===c[2]&&d[3]===c[3]&&d[4]===c[4]&&d[5]===c[5]&&d[6]===c[6]&&d[7]===c[7]&&d[8]===c[8]&&d[9]===c[9]&&d[10]===c[10]&&d[11]===c[11]&&d[12]===c[12]&&d[13]===c[13]&&d[14]===c[14]&&d[15]===c[15]},o.aa=function(d){const c={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(f,x,w,T)=>{const j=w||T;return c[x]=!j||j.toLowerCase(),""}),c["max-age"]){const f=parseInt(c["max-age"],10);isNaN(f)?delete c["max-age"]:c["max-age"]=f}return c},o.ab=function(d,c){const f=[];for(const x in d)x in c||f.push(x);return f},o.ac=Q,o.ad=function(d,c,f){var x=Math.sin(f),w=Math.cos(f),T=c[0],j=c[1],A=c[2],I=c[3],$=c[4],V=c[5],H=c[6],ee=c[7];return c!==d&&(d[8]=c[8],d[9]=c[9],d[10]=c[10],d[11]=c[11],d[12]=c[12],d[13]=c[13],d[14]=c[14],d[15]=c[15]),d[0]=T*w+$*x,d[1]=j*w+V*x,d[2]=A*w+H*x,d[3]=I*w+ee*x,d[4]=$*w-T*x,d[5]=V*w-j*x,d[6]=H*w-A*x,d[7]=ee*w-I*x,d},o.ae=function(d){var c=new Vg(16);return c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=d[6],c[7]=d[7],c[8]=d[8],c[9]=d[9],c[10]=d[10],c[11]=d[11],c[12]=d[12],c[13]=d[13],c[14]=d[14],c[15]=d[15],c},o.af=_w,o.ag=function(d,c){let f=0,x=0;if(d.kind==="constant")x=d.layoutSize;else if(d.kind!=="source"){const{interpolationType:w,minZoom:T,maxZoom:j}=d,A=w?Q(Fs.interpolationFactor(w,c,T,j),0,1):0;d.kind==="camera"?x=is.number(d.minSize,d.maxSize,A):f=A}return{uSizeT:f,uSize:x}},o.ai=function(d,{uSize:c,uSizeT:f},{lowerSize:x,upperSize:w}){return d.kind==="source"?x/au:d.kind==="composite"?is.number(x/au,w/au,f):c},o.aj=Aj,o.ak=function(d,c,f,x){const w=c.y-d.y,T=c.x-d.x,j=x.y-f.y,A=x.x-f.x,I=j*T-A*w;if(I===0)return null;const $=(A*(d.y-f.y)-j*(d.x-f.x))/I;return new y(d.x+$*T,d.y+$*w)},o.al=UL,o.am=zD,o.an=hj,o.ao=function(d){let c=1/0,f=1/0,x=-1/0,w=-1/0;for(const T of d)c=Math.min(c,T.x),f=Math.min(f,T.y),x=Math.max(x,T.x),w=Math.max(w,T.y);return[c,f,x,w]},o.ap=qi,o.ar=Oj,o.as=function(d,c){var f=c[0],x=c[1],w=c[2],T=c[3],j=c[4],A=c[5],I=c[6],$=c[7],V=c[8],H=c[9],ee=c[10],ie=c[11],ce=c[12],ue=c[13],ye=c[14],Te=c[15],Je=f*A-x*j,Ve=f*I-w*j,Ze=f*$-T*j,ot=x*I-w*A,wt=x*$-T*A,Gt=w*$-T*I,Cn=V*ue-H*ce,Qt=V*ye-ee*ce,Vt=V*Te-ie*ce,xn=H*ye-ee*ue,an=H*Te-ie*ue,Jt=ee*Te-ie*ye,dt=Je*Jt-Ve*an+Ze*xn+ot*Vt-wt*Qt+Gt*Cn;return dt?(d[0]=(A*Jt-I*an+$*xn)*(dt=1/dt),d[1]=(w*an-x*Jt-T*xn)*dt,d[2]=(ue*Gt-ye*wt+Te*ot)*dt,d[3]=(ee*wt-H*Gt-ie*ot)*dt,d[4]=(I*Vt-j*Jt-$*Qt)*dt,d[5]=(f*Jt-w*Vt+T*Qt)*dt,d[6]=(ye*Ze-ce*Gt-Te*Ve)*dt,d[7]=(V*Gt-ee*Ze+ie*Ve)*dt,d[8]=(j*an-A*Vt+$*Cn)*dt,d[9]=(x*Vt-f*an-T*Cn)*dt,d[10]=(ce*wt-ue*Ze+Te*Je)*dt,d[11]=(H*Ze-V*wt-ie*Je)*dt,d[12]=(A*Qt-j*xn-I*Cn)*dt,d[13]=(f*xn-x*Qt+w*Cn)*dt,d[14]=(ue*Ve-ce*ot-ye*Je)*dt,d[15]=(V*ot-H*Ve+ee*Je)*dt,d):null},o.at=Fj,o.au=Pj,o.av=Bj,o.aw=function(){const d={},c=ze.$version;for(const f in ze.$root){const x=ze.$root[f];if(x.required){let w=null;w=f==="version"?c:x.type==="array"?[]:{},w!=null&&(d[f]=w)}}return d},o.ax=Gx,o.ay=_t,o.az=function(d){d=d.slice();const c=Object.create(null);for(let f=0;f<d.length;f++)c[d[f].id]=d[f];for(let f=0;f<d.length;f++)"ref"in d[f]&&(d[f]=qt(d[f],c[d[f].ref]));return d},o.b=we,o.b0=function(d,c){return d[0]=c[0],d[1]=c[1],d[2]=c[2],d[3]=c[3],d[4]=c[4],d[5]=c[5],d[6]=c[6],d[7]=c[7],d[8]=c[8],d[9]=c[9],d[10]=c[10],d[11]=c[11],d[12]=c[12],d[13]=c[13],d[14]=c[14],d[15]=c[15],d},o.b1=function(d,c,f){return d[0]=c[0]*f[0],d[1]=c[1]*f[1],d[2]=c[2]*f[2],d[3]=c[3]*f[3],d},o.b2=function(d,c){return d[0]*c[0]+d[1]*c[1]+d[2]*c[2]+d[3]*c[3]},o.b3=q,o.b4=LL,o.b5=RL,o.b6=function(d,c,f,x,w){var T,j=1/Math.tan(c/2);return d[0]=j/f,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=j,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,w!=null&&w!==1/0?(d[10]=(w+x)*(T=1/(x-w)),d[14]=2*w*x*T):(d[10]=-1,d[14]=-2*x),d},o.b7=function(d,c,f){var x=Math.sin(f),w=Math.cos(f),T=c[4],j=c[5],A=c[6],I=c[7],$=c[8],V=c[9],H=c[10],ee=c[11];return c!==d&&(d[0]=c[0],d[1]=c[1],d[2]=c[2],d[3]=c[3],d[12]=c[12],d[13]=c[13],d[14]=c[14],d[15]=c[15]),d[4]=T*w+$*x,d[5]=j*w+V*x,d[6]=A*w+H*x,d[7]=I*w+ee*x,d[8]=$*w-T*x,d[9]=V*w-j*x,d[10]=H*w-A*x,d[11]=ee*w-I*x,d},o.b8=R,o.b9=N,o.bA=cL,o.bB=function(d){return d.message===Oe},o.bC=dd,o.bD=Qo,o.ba=function(d){return d*Math.PI/180},o.bb=function(d,c){const{x:f,y:x}=pv.fromLngLat(c);return!(d<0||d>25||x<0||x>=1||f<0||f>=1)},o.bc=function(d,c){return d[0]=c[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=c[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=c[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},o.bd=class extends W{},o.be=Mj,o.bf=jJ,o.bh=Ye,o.bi=function(d,c){nt.REGISTERED_PROTOCOLS[d]=c},o.bj=function(d){delete nt.REGISTERED_PROTOCOLS[d]},o.bk=function(d,c){const f={};for(let w=0;w<d.length;w++){const T=c&&c[d[w].id]||sw(d[w]);c&&(c[d[w].id]=T);let j=f[T];j||(j=f[T]=[]),j.push(d[w])}const x=[];for(const w in f)x.push(f[w]);return x},o.bl=nn,o.bm=BL,o.bn=NL,o.bo=xL,o.bp=function(d){d.bucket.createArrays(),d.bucket.tilePixelRatio=Bi/(512*d.bucket.overscaling),d.bucket.compareText={},d.bucket.iconsNeedLinear=!1;const c=d.bucket.layers[0],f=c.layout,x=c._unevaluatedLayout._values,w={layoutIconSize:x["icon-size"].possiblyEvaluate(new ei(d.bucket.zoom+1),d.canonical),layoutTextSize:x["text-size"].possiblyEvaluate(new ei(d.bucket.zoom+1),d.canonical),textMaxSize:x["text-size"].possiblyEvaluate(new ei(18))};if(d.bucket.textSizeData.kind==="composite"){const{minZoom:$,maxZoom:V}=d.bucket.textSizeData;w.compositeTextSizes=[x["text-size"].possiblyEvaluate(new ei($),d.canonical),x["text-size"].possiblyEvaluate(new ei(V),d.canonical)]}if(d.bucket.iconSizeData.kind==="composite"){const{minZoom:$,maxZoom:V}=d.bucket.iconSizeData;w.compositeIconSizes=[x["icon-size"].possiblyEvaluate(new ei($),d.canonical),x["icon-size"].possiblyEvaluate(new ei(V),d.canonical)]}const T=f.get("text-line-height")*qi,j=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",A=f.get("text-keep-upright"),I=f.get("text-size");for(const $ of d.bucket.features){const V=f.get("text-font").evaluate($,{},d.canonical).join(","),H=I.evaluate($,{},d.canonical),ee=w.layoutTextSize.evaluate($,{},d.canonical),ie=w.layoutIconSize.evaluate($,{},d.canonical),ce={horizontal:{},vertical:void 0},ue=$.text;let ye,Te=[0,0];if(ue){const Ze=ue.toString(),ot=f.get("text-letter-spacing").evaluate($,{},d.canonical)*qi,wt=ej(Ze)?ot:0,Gt=f.get("text-anchor").evaluate($,{},d.canonical),Cn=JL(c,$,d.canonical);if(!Cn){const an=f.get("text-radial-offset").evaluate($,{},d.canonical);Te=an?YL(Gt,[an*qi,Lj]):f.get("text-offset").evaluate($,{},d.canonical).map(Jt=>Jt*qi)}let Qt=j?"center":f.get("text-justify").evaluate($,{},d.canonical);const Vt=f.get("symbol-placement")==="point"?f.get("text-max-width").evaluate($,{},d.canonical)*qi:1/0,xn=()=>{d.bucket.allowVerticalPlacement&&Xx(Ze)&&(ce.vertical=jw(ue,d.glyphMap,d.glyphPositions,d.imagePositions,V,Vt,T,Gt,"left",wt,Te,o.ah.vertical,!0,ee,H))};if(!j&&Cn){const an=new Set;if(Qt==="auto")for(let dt=0;dt<Cn.values.length;dt+=2)an.add(Fj(Cn.values[dt]));else an.add(Qt);let Jt=!1;for(const dt of an)if(!ce.horizontal[dt])if(Jt)ce.horizontal[dt]=ce.horizontal[0];else{const vn=jw(ue,d.glyphMap,d.glyphPositions,d.imagePositions,V,Vt,T,"center",dt,wt,Te,o.ah.horizontal,!1,ee,H);vn&&(ce.horizontal[dt]=vn,Jt=vn.positionedLines.length===1)}xn()}else{Qt==="auto"&&(Qt=Fj(Gt));const an=jw(ue,d.glyphMap,d.glyphPositions,d.imagePositions,V,Vt,T,Gt,Qt,wt,Te,o.ah.horizontal,!1,ee,H);an&&(ce.horizontal[Qt]=an),xn(),Xx(Ze)&&j&&A&&(ce.vertical=jw(ue,d.glyphMap,d.glyphPositions,d.imagePositions,V,Vt,T,Gt,Qt,wt,Te,o.ah.vertical,!1,ee,H))}}let Je=!1;if($.icon&&$.icon.name){const Ze=d.imageMap[$.icon.name];Ze&&(ye=cJ(d.imagePositions[$.icon.name],f.get("icon-offset").evaluate($,{},d.canonical),f.get("icon-anchor").evaluate($,{},d.canonical)),Je=!!Ze.sdf,d.bucket.sdfIcons===void 0?d.bucket.sdfIcons=Je:d.bucket.sdfIcons!==Je&&Ce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ze.pixelRatio!==d.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(d.bucket.iconsNeedLinear=!0))}const Ve=t3(ce.horizontal)||ce.vertical;d.bucket.iconsInText=!!Ve&&Ve.iconsInText,(Ve||ye)&&CJ(d.bucket,$,ce,ye,d.imageMap,w,ee,ie,Te,Je,d.canonical)}d.showCollisionBoxes&&d.bucket.generateCollisionDebugBuffers()},o.bq=wj,o.br=vj,o.bs=_j,o.bt=Pd,o.bu=kj,o.bv=class{constructor(d){this._marks={start:[d.url,"start"].join("#"),end:[d.url,"end"].join("#"),measure:d.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let d=performance.getEntriesByName(this._marks.measure);return d.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),d=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),d}},o.bw=function(d,c,f,x,w){return a(this,void 0,void 0,function*(){if(F())try{return yield Qe(d,c,f,x,w)}catch{}return function(T,j,A,I,$){const V=T.width,H=T.height;se&&Re||(se=new OffscreenCanvas(V,H),Re=se.getContext("2d",{willReadFrequently:!0})),se.width=V,se.height=H,Re.drawImage(T,0,0,V,H);const ee=Re.getImageData(j,A,I,$);return Re.clearRect(0,0,V,H),ee.data}(d,c,f,x,w)})},o.bx=FL,o.by=h,o.bz=p,o.c=oe,o.d=d=>a(void 0,void 0,void 0,function*(){if(d.byteLength===0)return createImageBitmap(new ImageData(1,1));const c=new Blob([new Uint8Array(d)],{type:"image/png"});try{return createImageBitmap(c)}catch(f){throw new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),o.e=X,o.f=d=>new Promise((c,f)=>{const x=new Image;x.onload=()=>{c(x),URL.revokeObjectURL(x.src),x.onload=null,window.requestAnimationFrame(()=>{x.src=Ie})},x.onerror=()=>f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const w=new Blob([new Uint8Array(d)],{type:"image/png"});x.src=d.byteLength?URL.createObjectURL(w):Ie}),o.g=Ne,o.h=(d,c)=>At(X(d,{type:"json"}),c),o.i=We,o.j=kt,o.k=tn,o.l=(d,c)=>At(X(d,{type:"arrayBuffer"}),c),o.m=At,o.n=function(d){return new kj(d).readFields(nJ,[])},o.o=iv,o.p=yL,o.q=C,o.r=YT,o.s=Ot,o.t=Qx,o.u=uh,o.v=ze,o.w=Ce,o.x=function([d,c,f]){return c+=90,c*=Math.PI/180,f*=Math.PI/180,{x:d*Math.cos(c)*Math.sin(f),y:d*Math.sin(c)*Math.sin(f),z:d*Math.cos(f)}},o.y=is,o.z=ei}),i("worker",["./shared"],function(o){class a{constructor(U){this.keyCache={},U&&this.replace(U)}replace(U){this._layerConfigs={},this._layers={},this.update(U,[])}update(U,G){for(const pe of U){this._layerConfigs[pe.id]=pe;const Se=this._layers[pe.id]=o.aA(pe);Se._featureFilter=o.a7(Se.filter),this.keyCache[pe.id]&&delete this.keyCache[pe.id]}for(const pe of G)delete this.keyCache[pe],delete this._layerConfigs[pe],delete this._layers[pe];this.familiesBySource={};const re=o.bk(Object.values(this._layerConfigs),this.keyCache);for(const pe of re){const Se=pe.map(_e=>this._layers[_e.id]),Pe=Se[0];if(Pe.visibility==="none")continue;const qe=Pe.source||"";let ke=this.familiesBySource[qe];ke||(ke=this.familiesBySource[qe]={});const st=Pe.sourceLayer||"_geojsonTileLayer";let ft=ke[st];ft||(ft=ke[st]=[]),ft.push(Se)}}}class h{constructor(U){const G={},re=[];for(const qe in U){const ke=U[qe],st=G[qe]={};for(const ft in ke){const _e=ke[+ft];if(!_e||_e.bitmap.width===0||_e.bitmap.height===0)continue;const ht={x:0,y:0,w:_e.bitmap.width+2,h:_e.bitmap.height+2};re.push(ht),st[ft]={rect:ht,metrics:_e.metrics}}}const{w:pe,h:Se}=o.p(re),Pe=new o.o({width:pe||1,height:Se||1});for(const qe in U){const ke=U[qe];for(const st in ke){const ft=ke[+st];if(!ft||ft.bitmap.width===0||ft.bitmap.height===0)continue;const _e=G[qe][st].rect;o.o.copy(ft.bitmap,Pe,{x:0,y:0},{x:_e.x+1,y:_e.y+1},ft.bitmap)}}this.image=Pe,this.positions=G}}o.bl("GlyphAtlas",h);class p{constructor(U){this.tileID=new o.S(U.tileID.overscaledZ,U.tileID.wrap,U.tileID.canonical.z,U.tileID.canonical.x,U.tileID.canonical.y),this.uid=U.uid,this.zoom=U.zoom,this.pixelRatio=U.pixelRatio,this.tileSize=U.tileSize,this.source=U.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=U.showCollisionBoxes,this.collectResourceTiming=!!U.collectResourceTiming,this.returnDependencies=!!U.returnDependencies,this.promoteId=U.promoteId,this.inFlightDependencies=[]}parse(U,G,re,pe){return o._(this,void 0,void 0,function*(){this.status="parsing",this.data=U,this.collisionBoxArray=new o.a5;const Se=new o.bm(Object.keys(U.layers).sort()),Pe=new o.bn(this.tileID,this.promoteId);Pe.bucketLayerIDs=[];const qe={},ke={featureIndex:Pe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:re},st=G.familiesBySource[this.source];for(const qn in st){const Tr=U.layers[qn];if(!Tr)continue;Tr.version===1&&o.w(`Vector tile source "${this.source}" layer "${qn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Gr=Se.encode(qn),Fi=[];for(let Ei=0;Ei<Tr.length;Ei++){const bs=Tr.feature(Ei),Ka=Pe.getId(bs,qn);Fi.push({feature:bs,id:Ka,index:Ei,sourceLayerIndex:Gr})}for(const Ei of st[qn]){const bs=Ei[0];bs.source!==this.source&&o.w(`layer.source = ${bs.source} does not equal this.source = ${this.source}`),bs.minzoom&&this.zoom<Math.floor(bs.minzoom)||bs.maxzoom&&this.zoom>=bs.maxzoom||bs.visibility!=="none"&&(g(Ei,this.zoom,re),(qe[bs.id]=bs.createBucket({index:Pe.bucketLayerIDs.length,layers:Ei,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Gr,sourceID:this.source})).populate(Fi,ke,this.tileID.canonical),Pe.bucketLayerIDs.push(Ei.map(Ka=>Ka.id)))}}const ft=o.aF(ke.glyphDependencies,qn=>Object.keys(qn).map(Number));this.inFlightDependencies.forEach(qn=>qn==null?void 0:qn.abort()),this.inFlightDependencies=[];let _e=Promise.resolve({});if(Object.keys(ft).length){const qn=new AbortController;this.inFlightDependencies.push(qn),_e=pe.sendAsync({type:"GG",data:{stacks:ft,source:this.source,tileID:this.tileID,type:"glyphs"}},qn)}const ht=Object.keys(ke.iconDependencies);let Wt=Promise.resolve({});if(ht.length){const qn=new AbortController;this.inFlightDependencies.push(qn),Wt=pe.sendAsync({type:"GI",data:{icons:ht,source:this.source,tileID:this.tileID,type:"icons"}},qn)}const dn=Object.keys(ke.patternDependencies);let Xn=Promise.resolve({});if(dn.length){const qn=new AbortController;this.inFlightDependencies.push(qn),Xn=pe.sendAsync({type:"GI",data:{icons:dn,source:this.source,tileID:this.tileID,type:"patterns"}},qn)}const[Nn,cr,Un]=yield Promise.all([_e,Wt,Xn]),wi=new h(Nn),oi=new o.bo(cr,Un);for(const qn in qe){const Tr=qe[qn];Tr instanceof o.a6?(g(Tr.layers,this.zoom,re),o.bp({bucket:Tr,glyphMap:Nn,glyphPositions:wi.positions,imageMap:cr,imagePositions:oi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Tr.hasPattern&&(Tr instanceof o.bq||Tr instanceof o.br||Tr instanceof o.bs)&&(g(Tr.layers,this.zoom,re),Tr.addFeatures(ke,this.tileID.canonical,oi.patternPositions))}return this.status="done",{buckets:Object.values(qe).filter(qn=>!qn.isEmpty()),featureIndex:Pe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:wi.image,imageAtlas:oi,glyphMap:this.returnDependencies?Nn:null,iconMap:this.returnDependencies?cr:null,glyphPositions:this.returnDependencies?wi.positions:null}})}}function g(xe,U,G){const re=new o.z(U);for(const pe of xe)pe.recalculate(re,G)}class y{constructor(U,G,re){this.actor=U,this.layerIndex=G,this.availableImages=re,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(U,G){return o._(this,void 0,void 0,function*(){const re=yield o.l(U.request,G);try{return{vectorTile:new o.bt.VectorTile(new o.bu(re.data)),rawData:re.data,cacheControl:re.cacheControl,expires:re.expires}}catch(pe){const Se=new Uint8Array(re.data);let Pe=`Unable to parse the tile at ${U.request.url}, `;throw Pe+=Se[0]===31&&Se[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${pe.message}`,new Error(Pe)}})}loadTile(U){return o._(this,void 0,void 0,function*(){const G=U.uid,re=!!(U&&U.request&&U.request.collectResourceTiming)&&new o.bv(U.request),pe=new p(U);this.loading[G]=pe;const Se=new AbortController;pe.abort=Se;try{const Pe=yield this.loadVectorTile(U,Se);if(delete this.loading[G],!Pe)return null;const qe=Pe.rawData,ke={};Pe.expires&&(ke.expires=Pe.expires),Pe.cacheControl&&(ke.cacheControl=Pe.cacheControl);const st={};if(re){const _e=re.finish();_e&&(st.resourceTiming=JSON.parse(JSON.stringify(_e)))}pe.vectorTile=Pe.vectorTile;const ft=pe.parse(Pe.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[G]=pe,this.fetching[G]={rawTileData:qe,cacheControl:ke,resourceTiming:st};try{const _e=yield ft;return o.e({rawTileData:qe.slice(0)},_e,ke,st)}finally{delete this.fetching[G]}}catch(Pe){throw delete this.loading[G],pe.status="done",this.loaded[G]=pe,Pe}})}reloadTile(U){return o._(this,void 0,void 0,function*(){const G=U.uid;if(!this.loaded||!this.loaded[G])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const re=this.loaded[G];if(re.showCollisionBoxes=U.showCollisionBoxes,re.status==="parsing"){const pe=yield re.parse(re.vectorTile,this.layerIndex,this.availableImages,this.actor);let Se;if(this.fetching[G]){const{rawTileData:Pe,cacheControl:qe,resourceTiming:ke}=this.fetching[G];delete this.fetching[G],Se=o.e({rawTileData:Pe.slice(0)},pe,qe,ke)}else Se=pe;return Se}if(re.status==="done"&&re.vectorTile)return re.parse(re.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(U){return o._(this,void 0,void 0,function*(){const G=this.loading,re=U.uid;G&&G[re]&&G[re].abort&&(G[re].abort.abort(),delete G[re])})}removeTile(U){return o._(this,void 0,void 0,function*(){this.loaded&&this.loaded[U.uid]&&delete this.loaded[U.uid]})}}class b{constructor(){this.loaded={}}loadTile(U){return o._(this,void 0,void 0,function*(){const{uid:G,encoding:re,rawImageData:pe,redFactor:Se,greenFactor:Pe,blueFactor:qe,baseShift:ke}=U,st=pe.width+2,ft=pe.height+2,_e=o.b(pe)?new o.R({width:st,height:ft},yield o.bw(pe,-1,-1,st,ft)):pe,ht=new o.bx(G,_e,re,Se,Pe,qe,ke);return this.loaded=this.loaded||{},this.loaded[G]=ht,ht})}removeTile(U){const G=this.loaded,re=U.uid;G&&G[re]&&delete G[re]}}function S(xe,U){if(xe.length!==0){P(xe[0],U);for(var G=1;G<xe.length;G++)P(xe[G],!U)}}function P(xe,U){for(var G=0,re=0,pe=0,Se=xe.length,Pe=Se-1;pe<Se;Pe=pe++){var qe=(xe[pe][0]-xe[Pe][0])*(xe[Pe][1]+xe[pe][1]),ke=G+qe;re+=Math.abs(G)>=Math.abs(qe)?G-ke+qe:qe-ke+G,G=ke}G+re>=0!=!!U&&xe.reverse()}var O=o.by(function xe(U,G){var re,pe=U&&U.type;if(pe==="FeatureCollection")for(re=0;re<U.features.length;re++)xe(U.features[re],G);else if(pe==="GeometryCollection")for(re=0;re<U.geometries.length;re++)xe(U.geometries[re],G);else if(pe==="Feature")xe(U.geometry,G);else if(pe==="Polygon")S(U.coordinates,G);else if(pe==="MultiPolygon")for(re=0;re<U.coordinates.length;re++)S(U.coordinates[re],G);return U});const D=o.bt.VectorTileFeature.prototype.toGeoJSON;var z={exports:{}},F=o.bz,R=o.bt.VectorTileFeature,N=Q;function Q(xe,U){this.options=U||{},this.features=xe,this.length=xe.length}function q(xe,U){this.id=typeof xe.id=="number"?xe.id:void 0,this.type=xe.type,this.rawGeometry=xe.type===1?[xe.geometry]:xe.geometry,this.properties=xe.tags,this.extent=U||4096}Q.prototype.feature=function(xe){return new q(this.features[xe],this.options.extent)},q.prototype.loadGeometry=function(){var xe=this.rawGeometry;this.geometry=[];for(var U=0;U<xe.length;U++){for(var G=xe[U],re=[],pe=0;pe<G.length;pe++)re.push(new F(G[pe][0],G[pe][1]));this.geometry.push(re)}return this.geometry},q.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var xe=this.geometry,U=1/0,G=-1/0,re=1/0,pe=-1/0,Se=0;Se<xe.length;Se++)for(var Pe=xe[Se],qe=0;qe<Pe.length;qe++){var ke=Pe[qe];U=Math.min(U,ke.x),G=Math.max(G,ke.x),re=Math.min(re,ke.y),pe=Math.max(pe,ke.y)}return[U,re,G,pe]},q.prototype.toGeoJSON=R.prototype.toGeoJSON;var X=o.bA,K=N;function ne(xe){var U=new X;return function(G,re){for(var pe in G.layers)re.writeMessage(3,J,G.layers[pe])}(xe,U),U.finish()}function J(xe,U){var G;U.writeVarintField(15,xe.version||1),U.writeStringField(1,xe.name||""),U.writeVarintField(5,xe.extent||4096);var re={keys:[],values:[],keycache:{},valuecache:{}};for(G=0;G<xe.length;G++)re.feature=xe.feature(G),U.writeMessage(2,ae,re);var pe=re.keys;for(G=0;G<pe.length;G++)U.writeStringField(3,pe[G]);var Se=re.values;for(G=0;G<Se.length;G++)U.writeMessage(4,Fe,Se[G])}function ae(xe,U){var G=xe.feature;G.id!==void 0&&U.writeVarintField(1,G.id),U.writeMessage(2,Ee,xe),U.writeVarintField(3,G.type),U.writeMessage(4,We,G)}function Ee(xe,U){var G=xe.feature,re=xe.keys,pe=xe.values,Se=xe.keycache,Pe=xe.valuecache;for(var qe in G.properties){var ke=G.properties[qe],st=Se[qe];if(ke!==null){st===void 0&&(re.push(qe),Se[qe]=st=re.length-1),U.writeVarint(st);var ft=typeof ke;ft!=="string"&&ft!=="boolean"&&ft!=="number"&&(ke=JSON.stringify(ke));var _e=ft+":"+ke,ht=Pe[_e];ht===void 0&&(pe.push(ke),Pe[_e]=ht=pe.length-1),U.writeVarint(ht)}}}function Ce(xe,U){return(U<<3)+(7&xe)}function $e(xe){return xe<<1^xe>>31}function We(xe,U){for(var G=xe.loadGeometry(),re=xe.type,pe=0,Se=0,Pe=G.length,qe=0;qe<Pe;qe++){var ke=G[qe],st=1;re===1&&(st=ke.length),U.writeVarint(Ce(1,st));for(var ft=re===3?ke.length-1:ke.length,_e=0;_e<ft;_e++){_e===1&&re!==1&&U.writeVarint(Ce(2,ft-1));var ht=ke[_e].x-pe,Wt=ke[_e].y-Se;U.writeVarint($e(ht)),U.writeVarint($e(Wt)),pe+=ht,Se+=Wt}re===3&&U.writeVarint(Ce(7,1))}}function Fe(xe,U){var G=typeof xe;G==="string"?U.writeStringField(1,xe):G==="boolean"?U.writeBooleanField(7,xe):G==="number"&&(xe%1!=0?U.writeDoubleField(3,xe):xe<0?U.writeSVarintField(6,xe):U.writeVarintField(5,xe))}z.exports=ne,z.exports.fromVectorTileJs=ne,z.exports.fromGeojsonVt=function(xe,U){U=U||{};var G={};for(var re in xe)G[re]=new K(xe[re].features,U),G[re].name=re,G[re].version=U.version,G[re].extent=U.extent;return ne({layers:G})},z.exports.GeoJSONWrapper=K;var we=o.by(z.exports);const Ie={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:xe=>xe},Qe=Math.fround||(se=new Float32Array(1),xe=>(se[0]=+xe,se[0]));var se;const Re=3,Oe=5,oe=6;class nt{constructor(U){this.options=Object.assign(Object.create(Ie),U),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(U){const{log:G,minZoom:re,maxZoom:pe}=this.options;G&&console.time("total time");const Se=`prepare ${U.length} points`;G&&console.time(Se),this.points=U;const Pe=[];for(let ke=0;ke<U.length;ke++){const st=U[ke];if(!st.geometry)continue;const[ft,_e]=st.geometry.coordinates,ht=Qe(Ye(ft)),Wt=Qe(_t(_e));Pe.push(ht,Wt,1/0,ke,-1,1),this.options.reduce&&Pe.push(0)}let qe=this.trees[pe+1]=this._createTree(Pe);G&&console.timeEnd(Se);for(let ke=pe;ke>=re;ke--){const st=+Date.now();qe=this.trees[ke]=this._createTree(this._cluster(qe,ke)),G&&console.log("z%d: %d clusters in %dms",ke,qe.numItems,+Date.now()-st)}return G&&console.timeEnd("total time"),this}getClusters(U,G){let re=((U[0]+180)%360+360)%360-180;const pe=Math.max(-90,Math.min(90,U[1]));let Se=U[2]===180?180:((U[2]+180)%360+360)%360-180;const Pe=Math.max(-90,Math.min(90,U[3]));if(U[2]-U[0]>=360)re=-180,Se=180;else if(re>Se){const _e=this.getClusters([re,pe,180,Pe],G),ht=this.getClusters([-180,pe,Se,Pe],G);return _e.concat(ht)}const qe=this.trees[this._limitZoom(G)],ke=qe.range(Ye(re),_t(Pe),Ye(Se),_t(pe)),st=qe.data,ft=[];for(const _e of ke){const ht=this.stride*_e;ft.push(st[ht+Oe]>1?Ne(st,ht,this.clusterProps):this.points[st[ht+Re]])}return ft}getChildren(U){const G=this._getOriginId(U),re=this._getOriginZoom(U),pe="No cluster with the specified id.",Se=this.trees[re];if(!Se)throw new Error(pe);const Pe=Se.data;if(G*this.stride>=Pe.length)throw new Error(pe);const qe=this.options.radius/(this.options.extent*Math.pow(2,re-1)),ke=Se.within(Pe[G*this.stride],Pe[G*this.stride+1],qe),st=[];for(const ft of ke){const _e=ft*this.stride;Pe[_e+4]===U&&st.push(Pe[_e+Oe]>1?Ne(Pe,_e,this.clusterProps):this.points[Pe[_e+Re]])}if(st.length===0)throw new Error(pe);return st}getLeaves(U,G,re){const pe=[];return this._appendLeaves(pe,U,G=G||10,re=re||0,0),pe}getTile(U,G,re){const pe=this.trees[this._limitZoom(U)],Se=Math.pow(2,U),{extent:Pe,radius:qe}=this.options,ke=qe/Pe,st=(re-ke)/Se,ft=(re+1+ke)/Se,_e={features:[]};return this._addTileFeatures(pe.range((G-ke)/Se,st,(G+1+ke)/Se,ft),pe.data,G,re,Se,_e),G===0&&this._addTileFeatures(pe.range(1-ke/Se,st,1,ft),pe.data,Se,re,Se,_e),G===Se-1&&this._addTileFeatures(pe.range(0,st,ke/Se,ft),pe.data,-1,re,Se,_e),_e.features.length?_e:null}getClusterExpansionZoom(U){let G=this._getOriginZoom(U)-1;for(;G<=this.options.maxZoom;){const re=this.getChildren(U);if(G++,re.length!==1)break;U=re[0].properties.cluster_id}return G}_appendLeaves(U,G,re,pe,Se){const Pe=this.getChildren(G);for(const qe of Pe){const ke=qe.properties;if(ke&&ke.cluster?Se+ke.point_count<=pe?Se+=ke.point_count:Se=this._appendLeaves(U,ke.cluster_id,re,pe,Se):Se<pe?Se++:U.push(qe),U.length===re)break}return Se}_createTree(U){const G=new o.av(U.length/this.stride|0,this.options.nodeSize,Float32Array);for(let re=0;re<U.length;re+=this.stride)G.add(U[re],U[re+1]);return G.finish(),G.data=U,G}_addTileFeatures(U,G,re,pe,Se,Pe){for(const qe of U){const ke=qe*this.stride,st=G[ke+Oe]>1;let ft,_e,ht;if(st)ft=tt(G,ke,this.clusterProps),_e=G[ke],ht=G[ke+1];else{const Xn=this.points[G[ke+Re]];ft=Xn.properties;const[Nn,cr]=Xn.geometry.coordinates;_e=Ye(Nn),ht=_t(cr)}const Wt={type:1,geometry:[[Math.round(this.options.extent*(_e*Se-re)),Math.round(this.options.extent*(ht*Se-pe))]],tags:ft};let dn;dn=st||this.options.generateId?G[ke+Re]:this.points[G[ke+Re]].id,dn!==void 0&&(Wt.id=dn),Pe.features.push(Wt)}}_limitZoom(U){return Math.max(this.options.minZoom,Math.min(Math.floor(+U),this.options.maxZoom+1))}_cluster(U,G){const{radius:re,extent:pe,reduce:Se,minPoints:Pe}=this.options,qe=re/(pe*Math.pow(2,G)),ke=U.data,st=[],ft=this.stride;for(let _e=0;_e<ke.length;_e+=ft){if(ke[_e+2]<=G)continue;ke[_e+2]=G;const ht=ke[_e],Wt=ke[_e+1],dn=U.within(ke[_e],ke[_e+1],qe),Xn=ke[_e+Oe];let Nn=Xn;for(const cr of dn){const Un=cr*ft;ke[Un+2]>G&&(Nn+=ke[Un+Oe])}if(Nn>Xn&&Nn>=Pe){let cr,Un=ht*Xn,wi=Wt*Xn,oi=-1;const qn=((_e/ft|0)<<5)+(G+1)+this.points.length;for(const Tr of dn){const Gr=Tr*ft;if(ke[Gr+2]<=G)continue;ke[Gr+2]=G;const Fi=ke[Gr+Oe];Un+=ke[Gr]*Fi,wi+=ke[Gr+1]*Fi,ke[Gr+4]=qn,Se&&(cr||(cr=this._map(ke,_e,!0),oi=this.clusterProps.length,this.clusterProps.push(cr)),Se(cr,this._map(ke,Gr)))}ke[_e+4]=qn,st.push(Un/Nn,wi/Nn,1/0,qn,-1,Nn),Se&&st.push(oi)}else{for(let cr=0;cr<ft;cr++)st.push(ke[_e+cr]);if(Nn>1)for(const cr of dn){const Un=cr*ft;if(!(ke[Un+2]<=G)){ke[Un+2]=G;for(let wi=0;wi<ft;wi++)st.push(ke[Un+wi])}}}}return st}_getOriginId(U){return U-this.points.length>>5}_getOriginZoom(U){return(U-this.points.length)%32}_map(U,G,re){if(U[G+Oe]>1){const Pe=this.clusterProps[U[G+oe]];return re?Object.assign({},Pe):Pe}const pe=this.points[U[G+Re]].properties,Se=this.options.map(pe);return re&&Se===pe?Object.assign({},Se):Se}}function Ne(xe,U,G){return{type:"Feature",id:xe[U+Re],properties:tt(xe,U,G),geometry:{type:"Point",coordinates:[(re=xe[U],360*(re-.5)),At(xe[U+1])]}};var re}function tt(xe,U,G){const re=xe[U+Oe],pe=re>=1e4?`${Math.round(re/1e3)}k`:re>=1e3?Math.round(re/100)/10+"k":re,Se=xe[U+oe],Pe=Se===-1?{}:Object.assign({},G[Se]);return Object.assign(Pe,{cluster:!0,cluster_id:xe[U+Re],point_count:re,point_count_abbreviated:pe})}function Ye(xe){return xe/360+.5}function _t(xe){const U=Math.sin(xe*Math.PI/180),G=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return G<0?0:G>1?1:G}function At(xe){const U=(180-360*xe)*Math.PI/180;return 360*Math.atan(Math.exp(U))/Math.PI-90}function Ot(xe,U,G,re){let pe=re;const Se=U+(G-U>>1);let Pe,qe=G-U;const ke=xe[U],st=xe[U+1],ft=xe[G],_e=xe[G+1];for(let ht=U+3;ht<G;ht+=3){const Wt=bt(xe[ht],xe[ht+1],ke,st,ft,_e);if(Wt>pe)Pe=ht,pe=Wt;else if(Wt===pe){const dn=Math.abs(ht-Se);dn<qe&&(Pe=ht,qe=dn)}}pe>re&&(Pe-U>3&&Ot(xe,U,Pe,re),xe[Pe+2]=pe,G-Pe>3&&Ot(xe,Pe,G,re))}function bt(xe,U,G,re,pe,Se){let Pe=pe-G,qe=Se-re;if(Pe!==0||qe!==0){const ke=((xe-G)*Pe+(U-re)*qe)/(Pe*Pe+qe*qe);ke>1?(G=pe,re=Se):ke>0&&(G+=Pe*ke,re+=qe*ke)}return Pe=xe-G,qe=U-re,Pe*Pe+qe*qe}function rt(xe,U,G,re){const pe={id:xe??null,type:U,geometry:G,tags:re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(U==="Point"||U==="MultiPoint"||U==="LineString")tn(pe,G);else if(U==="Polygon")tn(pe,G[0]);else if(U==="MultiLineString")for(const Se of G)tn(pe,Se);else if(U==="MultiPolygon")for(const Se of G)tn(pe,Se[0]);return pe}function tn(xe,U){for(let G=0;G<U.length;G+=3)xe.minX=Math.min(xe.minX,U[G]),xe.minY=Math.min(xe.minY,U[G+1]),xe.maxX=Math.max(xe.maxX,U[G]),xe.maxY=Math.max(xe.maxY,U[G+1])}function kt(xe,U,G,re){if(!U.geometry)return;const pe=U.geometry.coordinates;if(pe&&pe.length===0)return;const Se=U.geometry.type,Pe=Math.pow(G.tolerance/((1<<G.maxZoom)*G.extent),2);let qe=[],ke=U.id;if(G.promoteId?ke=U.properties[G.promoteId]:G.generateId&&(ke=re||0),Se==="Point")it(pe,qe);else if(Se==="MultiPoint")for(const st of pe)it(st,qe);else if(Se==="LineString")ze(pe,qe,Pe,!1);else if(Se==="MultiLineString"){if(G.lineMetrics){for(const st of pe)qe=[],ze(st,qe,Pe,!1),xe.push(rt(ke,"LineString",qe,U.properties));return}ut(pe,qe,Pe,!1)}else if(Se==="Polygon")ut(pe,qe,Pe,!0);else{if(Se!=="MultiPolygon"){if(Se==="GeometryCollection"){for(const st of U.geometry.geometries)kt(xe,{id:ke,geometry:st,properties:U.properties},G,re);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const st of pe){const ft=[];ut(st,ft,Pe,!0),qe.push(ft)}}xe.push(rt(ke,Se,qe,U.properties))}function it(xe,U){U.push(qt(xe[0]),Ct(xe[1]),0)}function ze(xe,U,G,re){let pe,Se,Pe=0;for(let ke=0;ke<xe.length;ke++){const st=qt(xe[ke][0]),ft=Ct(xe[ke][1]);U.push(st,ft,0),ke>0&&(Pe+=re?(pe*ft-st*Se)/2:Math.sqrt(Math.pow(st-pe,2)+Math.pow(ft-Se,2))),pe=st,Se=ft}const qe=U.length-3;U[2]=1,Ot(U,0,qe,G),U[qe+2]=1,U.size=Math.abs(Pe),U.start=0,U.end=U.size}function ut(xe,U,G,re){for(let pe=0;pe<xe.length;pe++){const Se=[];ze(xe[pe],Se,G,re),U.push(Se)}}function qt(xe){return xe/360+.5}function Ct(xe){const U=Math.sin(xe*Math.PI/180),G=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return G<0?0:G>1?1:G}function $t(xe,U,G,re,pe,Se,Pe,qe){if(re/=U,Se>=(G/=U)&&Pe<re)return xe;if(Pe<G||Se>=re)return null;const ke=[];for(const st of xe){const ft=st.geometry;let _e=st.type;const ht=pe===0?st.minX:st.minY,Wt=pe===0?st.maxX:st.maxY;if(ht>=G&&Wt<re){ke.push(st);continue}if(Wt<G||ht>=re)continue;let dn=[];if(_e==="Point"||_e==="MultiPoint")Yn(ft,dn,G,re,pe);else if(_e==="LineString")br(ft,dn,G,re,pe,!1,qe.lineMetrics);else if(_e==="MultiLineString")Ar(ft,dn,G,re,pe,!1);else if(_e==="Polygon")Ar(ft,dn,G,re,pe,!0);else if(_e==="MultiPolygon")for(const Xn of ft){const Nn=[];Ar(Xn,Nn,G,re,pe,!0),Nn.length&&dn.push(Nn)}if(dn.length){if(qe.lineMetrics&&_e==="LineString"){for(const Xn of dn)ke.push(rt(st.id,_e,Xn,st.tags));continue}_e!=="LineString"&&_e!=="MultiLineString"||(dn.length===1?(_e="LineString",dn=dn[0]):_e="MultiLineString"),_e!=="Point"&&_e!=="MultiPoint"||(_e=dn.length===3?"Point":"MultiPoint"),ke.push(rt(st.id,_e,dn,st.tags))}}return ke.length?ke:null}function Yn(xe,U,G,re,pe){for(let Se=0;Se<xe.length;Se+=3){const Pe=xe[Se+pe];Pe>=G&&Pe<=re&&_r(U,xe[Se],xe[Se+1],xe[Se+2])}}function br(xe,U,G,re,pe,Se,Pe){let qe=ur(xe);const ke=pe===0?ct:Tt;let st,ft,_e=xe.start;for(let Nn=0;Nn<xe.length-3;Nn+=3){const cr=xe[Nn],Un=xe[Nn+1],wi=xe[Nn+2],oi=xe[Nn+3],qn=xe[Nn+4],Tr=pe===0?cr:Un,Gr=pe===0?oi:qn;let Fi=!1;Pe&&(st=Math.sqrt(Math.pow(cr-oi,2)+Math.pow(Un-qn,2))),Tr<G?Gr>G&&(ft=ke(qe,cr,Un,oi,qn,G),Pe&&(qe.start=_e+st*ft)):Tr>re?Gr<re&&(ft=ke(qe,cr,Un,oi,qn,re),Pe&&(qe.start=_e+st*ft)):_r(qe,cr,Un,wi),Gr<G&&Tr>=G&&(ft=ke(qe,cr,Un,oi,qn,G),Fi=!0),Gr>re&&Tr<=re&&(ft=ke(qe,cr,Un,oi,qn,re),Fi=!0),!Se&&Fi&&(Pe&&(qe.end=_e+st*ft),U.push(qe),qe=ur(xe)),Pe&&(_e+=st)}let ht=xe.length-3;const Wt=xe[ht],dn=xe[ht+1],Xn=pe===0?Wt:dn;Xn>=G&&Xn<=re&&_r(qe,Wt,dn,xe[ht+2]),ht=qe.length-3,Se&&ht>=3&&(qe[ht]!==qe[0]||qe[ht+1]!==qe[1])&&_r(qe,qe[0],qe[1],qe[2]),qe.length&&U.push(qe)}function ur(xe){const U=[];return U.size=xe.size,U.start=xe.start,U.end=xe.end,U}function Ar(xe,U,G,re,pe,Se){for(const Pe of xe)br(Pe,U,G,re,pe,Se,!1)}function _r(xe,U,G,re){xe.push(U,G,re)}function ct(xe,U,G,re,pe,Se){const Pe=(Se-U)/(re-U);return _r(xe,Se,G+(pe-G)*Pe,1),Pe}function Tt(xe,U,G,re,pe,Se){const Pe=(Se-G)/(pe-G);return _r(xe,U+(re-U)*Pe,Se,1),Pe}function Me(xe,U){const G=[];for(let re=0;re<xe.length;re++){const pe=xe[re],Se=pe.type;let Pe;if(Se==="Point"||Se==="MultiPoint"||Se==="LineString")Pe=Xt(pe.geometry,U);else if(Se==="MultiLineString"||Se==="Polygon"){Pe=[];for(const qe of pe.geometry)Pe.push(Xt(qe,U))}else if(Se==="MultiPolygon"){Pe=[];for(const qe of pe.geometry){const ke=[];for(const st of qe)ke.push(Xt(st,U));Pe.push(ke)}}G.push(rt(pe.id,Se,Pe,pe.tags))}return G}function Xt(xe,U){const G=[];G.size=xe.size,xe.start!==void 0&&(G.start=xe.start,G.end=xe.end);for(let re=0;re<xe.length;re+=3)G.push(xe[re]+U,xe[re+1],xe[re+2]);return G}function pt(xe,U){if(xe.transformed)return xe;const G=1<<xe.z,re=xe.x,pe=xe.y;for(const Se of xe.features){const Pe=Se.geometry,qe=Se.type;if(Se.geometry=[],qe===1)for(let ke=0;ke<Pe.length;ke+=2)Se.geometry.push(zt(Pe[ke],Pe[ke+1],U,G,re,pe));else for(let ke=0;ke<Pe.length;ke++){const st=[];for(let ft=0;ft<Pe[ke].length;ft+=2)st.push(zt(Pe[ke][ft],Pe[ke][ft+1],U,G,re,pe));Se.geometry.push(st)}}return xe.transformed=!0,xe}function zt(xe,U,G,re,pe,Se){return[Math.round(G*(xe*re-pe)),Math.round(G*(U*re-Se))]}function ir(xe,U,G,re,pe){const Se=U===pe.maxZoom?0:pe.tolerance/((1<<U)*pe.extent),Pe={features:[],numPoints:0,numSimplified:0,numFeatures:xe.length,source:null,x:G,y:re,z:U,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const qe of xe)yt(Pe,qe,Se,pe);return Pe}function yt(xe,U,G,re){const pe=U.geometry,Se=U.type,Pe=[];if(xe.minX=Math.min(xe.minX,U.minX),xe.minY=Math.min(xe.minY,U.minY),xe.maxX=Math.max(xe.maxX,U.maxX),xe.maxY=Math.max(xe.maxY,U.maxY),Se==="Point"||Se==="MultiPoint")for(let qe=0;qe<pe.length;qe+=3)Pe.push(pe[qe],pe[qe+1]),xe.numPoints++,xe.numSimplified++;else if(Se==="LineString")_n(Pe,pe,xe,G,!1,!1);else if(Se==="MultiLineString"||Se==="Polygon")for(let qe=0;qe<pe.length;qe++)_n(Pe,pe[qe],xe,G,Se==="Polygon",qe===0);else if(Se==="MultiPolygon")for(let qe=0;qe<pe.length;qe++){const ke=pe[qe];for(let st=0;st<ke.length;st++)_n(Pe,ke[st],xe,G,!0,st===0)}if(Pe.length){let qe=U.tags||null;if(Se==="LineString"&&re.lineMetrics){qe={};for(const st in U.tags)qe[st]=U.tags[st];qe.mapbox_clip_start=pe.start/pe.size,qe.mapbox_clip_end=pe.end/pe.size}const ke={geometry:Pe,type:Se==="Polygon"||Se==="MultiPolygon"?3:Se==="LineString"||Se==="MultiLineString"?2:1,tags:qe};U.id!==null&&(ke.id=U.id),xe.features.push(ke)}}function _n(xe,U,G,re,pe,Se){const Pe=re*re;if(re>0&&U.size<(pe?Pe:re))return void(G.numPoints+=U.length/3);const qe=[];for(let ke=0;ke<U.length;ke+=3)(re===0||U[ke+2]>Pe)&&(G.numSimplified++,qe.push(U[ke],U[ke+1])),G.numPoints++;pe&&function(ke,st){let ft=0;for(let _e=0,ht=ke.length,Wt=ht-2;_e<ht;Wt=_e,_e+=2)ft+=(ke[_e]-ke[Wt])*(ke[_e+1]+ke[Wt+1]);if(ft>0===st)for(let _e=0,ht=ke.length;_e<ht/2;_e+=2){const Wt=ke[_e],dn=ke[_e+1];ke[_e]=ke[ht-2-_e],ke[_e+1]=ke[ht-1-_e],ke[ht-2-_e]=Wt,ke[ht-1-_e]=dn}}(qe,Se),xe.push(qe)}const Kt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class tr{constructor(U,G){const re=(G=this.options=function(Se,Pe){for(const qe in Pe)Se[qe]=Pe[qe];return Se}(Object.create(Kt),G)).debug;if(re&&console.time("preprocess data"),G.maxZoom<0||G.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(G.promoteId&&G.generateId)throw new Error("promoteId and generateId cannot be used together.");let pe=function(Se,Pe){const qe=[];if(Se.type==="FeatureCollection")for(let ke=0;ke<Se.features.length;ke++)kt(qe,Se.features[ke],Pe,ke);else kt(qe,Se.type==="Feature"?Se:{geometry:Se},Pe);return qe}(U,G);this.tiles={},this.tileCoords=[],re&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",G.indexMaxZoom,G.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),pe=function(Se,Pe){const qe=Pe.buffer/Pe.extent;let ke=Se;const st=$t(Se,1,-1-qe,qe,0,-1,2,Pe),ft=$t(Se,1,1-qe,2+qe,0,-1,2,Pe);return(st||ft)&&(ke=$t(Se,1,-qe,1+qe,0,-1,2,Pe)||[],st&&(ke=Me(st,1).concat(ke)),ft&&(ke=ke.concat(Me(ft,-1)))),ke}(pe,G),pe.length&&this.splitTile(pe,0,0,0),re&&(pe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(U,G,re,pe,Se,Pe,qe){const ke=[U,G,re,pe],st=this.options,ft=st.debug;for(;ke.length;){pe=ke.pop(),re=ke.pop(),G=ke.pop(),U=ke.pop();const _e=1<<G,ht=qr(G,re,pe);let Wt=this.tiles[ht];if(!Wt&&(ft>1&&console.time("creation"),Wt=this.tiles[ht]=ir(U,G,re,pe,st),this.tileCoords.push({z:G,x:re,y:pe}),ft)){ft>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",G,re,pe,Wt.numFeatures,Wt.numPoints,Wt.numSimplified),console.timeEnd("creation"));const Fi=`z${G}`;this.stats[Fi]=(this.stats[Fi]||0)+1,this.total++}if(Wt.source=U,Se==null){if(G===st.indexMaxZoom||Wt.numPoints<=st.indexMaxPoints)continue}else{if(G===st.maxZoom||G===Se)continue;if(Se!=null){const Fi=Se-G;if(re!==Pe>>Fi||pe!==qe>>Fi)continue}}if(Wt.source=null,U.length===0)continue;ft>1&&console.time("clipping");const dn=.5*st.buffer/st.extent,Xn=.5-dn,Nn=.5+dn,cr=1+dn;let Un=null,wi=null,oi=null,qn=null,Tr=$t(U,_e,re-dn,re+Nn,0,Wt.minX,Wt.maxX,st),Gr=$t(U,_e,re+Xn,re+cr,0,Wt.minX,Wt.maxX,st);U=null,Tr&&(Un=$t(Tr,_e,pe-dn,pe+Nn,1,Wt.minY,Wt.maxY,st),wi=$t(Tr,_e,pe+Xn,pe+cr,1,Wt.minY,Wt.maxY,st),Tr=null),Gr&&(oi=$t(Gr,_e,pe-dn,pe+Nn,1,Wt.minY,Wt.maxY,st),qn=$t(Gr,_e,pe+Xn,pe+cr,1,Wt.minY,Wt.maxY,st),Gr=null),ft>1&&console.timeEnd("clipping"),ke.push(Un||[],G+1,2*re,2*pe),ke.push(wi||[],G+1,2*re,2*pe+1),ke.push(oi||[],G+1,2*re+1,2*pe),ke.push(qn||[],G+1,2*re+1,2*pe+1)}}getTile(U,G,re){U=+U,G=+G,re=+re;const pe=this.options,{extent:Se,debug:Pe}=pe;if(U<0||U>24)return null;const qe=1<<U,ke=qr(U,G=G+qe&qe-1,re);if(this.tiles[ke])return pt(this.tiles[ke],Se);Pe>1&&console.log("drilling down to z%d-%d-%d",U,G,re);let st,ft=U,_e=G,ht=re;for(;!st&&ft>0;)ft--,_e>>=1,ht>>=1,st=this.tiles[qr(ft,_e,ht)];return st&&st.source?(Pe>1&&(console.log("found parent tile z%d-%d-%d",ft,_e,ht),console.time("drilling down")),this.splitTile(st.source,ft,_e,ht,U,G,re),Pe>1&&console.timeEnd("drilling down"),this.tiles[ke]?pt(this.tiles[ke],Se):null):null}}function qr(xe,U,G){return 32*((1<<xe)*G+U)+xe}function sn(xe,U){return U?xe.properties[U]:xe.id}function Wi(xe,U){if(xe==null)return!0;if(xe.type==="Feature")return sn(xe,U)!=null;if(xe.type==="FeatureCollection"){const G=new Set;for(const re of xe.features){const pe=sn(re,U);if(pe==null||G.has(pe))return!1;G.add(pe)}return!0}return!1}function Rs(xe,U){const G=new Map;if(xe!=null)if(xe.type==="Feature")G.set(sn(xe,U),xe);else for(const re of xe.features)G.set(sn(re,U),re);return G}class Ui extends y{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(U,G){return o._(this,void 0,void 0,function*(){const re=U.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const pe=this._geoJSONIndex.getTile(re.z,re.x,re.y);if(!pe)return null;const Se=new class{constructor(qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.X,this.length=qe.length,this._features=qe}feature(qe){return new class{constructor(ke){this._feature=ke,this.extent=o.X,this.type=ke.type,this.properties=ke.tags,"id"in ke&&!isNaN(ke.id)&&(this.id=parseInt(ke.id,10))}loadGeometry(){if(this._feature.type===1){const ke=[];for(const st of this._feature.geometry)ke.push([new o.P(st[0],st[1])]);return ke}{const ke=[];for(const st of this._feature.geometry){const ft=[];for(const _e of st)ft.push(new o.P(_e[0],_e[1]));ke.push(ft)}return ke}}toGeoJSON(ke,st,ft){return D.call(this,ke,st,ft)}}(this._features[qe])}}(pe.features);let Pe=we(Se);return Pe.byteOffset===0&&Pe.byteLength===Pe.buffer.byteLength||(Pe=new Uint8Array(Pe)),{vectorTile:Se,rawData:Pe.buffer}})}loadData(U){return o._(this,void 0,void 0,function*(){var G;(G=this._pendingRequest)===null||G===void 0||G.abort();const re=!!(U&&U.request&&U.request.collectResourceTiming)&&new o.bv(U.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(U,this._pendingRequest),this._geoJSONIndex=U.cluster?new nt(function({superclusterOptions:Pe,clusterProperties:qe}){if(!qe||!Pe)return Pe;const ke={},st={},ft={accumulated:null,zoom:0},_e={properties:null},ht=Object.keys(qe);for(const Wt of ht){const[dn,Xn]=qe[Wt],Nn=o.bC(Xn),cr=o.bC(typeof dn=="string"?[dn,["accumulated"],["get",Wt]]:dn);ke[Wt]=Nn.value,st[Wt]=cr.value}return Pe.map=Wt=>{_e.properties=Wt;const dn={};for(const Xn of ht)dn[Xn]=ke[Xn].evaluate(ft,_e);return dn},Pe.reduce=(Wt,dn)=>{_e.properties=dn;for(const Xn of ht)ft.accumulated=Wt[Xn],Wt[Xn]=st[Xn].evaluate(ft,_e)},Pe}(U)).load((yield this._pendingData).features):(pe=yield this._pendingData,new tr(pe,U.geojsonVtOptions)),this.loaded={};const Se={};if(re){const Pe=re.finish();Pe&&(Se.resourceTiming={},Se.resourceTiming[U.source]=JSON.parse(JSON.stringify(Pe)))}return Se}catch(Se){if(delete this._pendingRequest,o.bB(Se))return{abandoned:!0};throw Se}var pe})}getData(){return o._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(U){const G=this.loaded;return G&&G[U.uid]?super.reloadTile(U):this.loadTile(U)}loadAndProcessGeoJSON(U,G){return o._(this,void 0,void 0,function*(){let re=yield this.loadGeoJSON(U,G);if(delete this._pendingRequest,typeof re!="object")throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`);if(O(re,!0),U.filter){const pe=o.bC(U.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(pe.result==="error")throw new Error(pe.value.map(Pe=>`${Pe.key}: ${Pe.message}`).join(", "));re={type:"FeatureCollection",features:re.features.filter(Pe=>pe.value.evaluate({zoom:0},Pe))}}return re})}loadGeoJSON(U,G){return o._(this,void 0,void 0,function*(){const{promoteId:re}=U;if(U.request){const pe=yield o.h(U.request,G);return this._dataUpdateable=Wi(pe.data,re)?Rs(pe.data,re):void 0,pe.data}if(typeof U.data=="string")try{const pe=JSON.parse(U.data);return this._dataUpdateable=Wi(pe,re)?Rs(pe,re):void 0,pe}catch{throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`)}if(!U.dataDiff)throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${U.source}`);return function(pe,Se,Pe){var qe,ke,st,ft;if(Se.removeAll&&pe.clear(),Se.remove)for(const _e of Se.remove)pe.delete(_e);if(Se.add)for(const _e of Se.add){const ht=sn(_e,Pe);ht!=null&&pe.set(ht,_e)}if(Se.update)for(const _e of Se.update){let ht=pe.get(_e.id);if(ht==null)continue;const Wt=!_e.removeAllProperties&&(((qe=_e.removeProperties)===null||qe===void 0?void 0:qe.length)>0||((ke=_e.addOrUpdateProperties)===null||ke===void 0?void 0:ke.length)>0);if((_e.newGeometry||_e.removeAllProperties||Wt)&&(ht=Object.assign({},ht),pe.set(_e.id,ht),Wt&&(ht.properties=Object.assign({},ht.properties))),_e.newGeometry&&(ht.geometry=_e.newGeometry),_e.removeAllProperties)ht.properties={};else if(((st=_e.removeProperties)===null||st===void 0?void 0:st.length)>0)for(const dn of _e.removeProperties)Object.prototype.hasOwnProperty.call(ht.properties,dn)&&delete ht.properties[dn];if(((ft=_e.addOrUpdateProperties)===null||ft===void 0?void 0:ft.length)>0)for(const{key:dn,value:Xn}of _e.addOrUpdateProperties)ht.properties[dn]=Xn}}(this._dataUpdateable,U.dataDiff,re),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(U){return o._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(U){return this._geoJSONIndex.getClusterExpansionZoom(U.clusterId)}getClusterChildren(U){return this._geoJSONIndex.getChildren(U.clusterId)}getClusterLeaves(U){return this._geoJSONIndex.getLeaves(U.clusterId,U.limit,U.offset)}}class vs{constructor(U){this.self=U,this.actor=new o.F(U),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(G,re)=>{if(this.externalWorkerSourceTypes[G])throw new Error(`Worker source with name "${G}" already registered.`);this.externalWorkerSourceTypes[G]=re},this.self.addProtocol=o.bi,this.self.removeProtocol=o.bj,this.self.registerRTLTextPlugin=G=>{if(o.bD.isParsed())throw new Error("RTL text plugin already registered.");o.bD.setMethods(G)},this.actor.registerMessageHandler("LDT",(G,re)=>this._getDEMWorkerSource(G,re.source).loadTile(re)),this.actor.registerMessageHandler("RDT",(G,re)=>o._(this,void 0,void 0,function*(){this._getDEMWorkerSource(G,re.source).removeTile(re)})),this.actor.registerMessageHandler("GCEZ",(G,re)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(G,re.type,re.source).getClusterExpansionZoom(re)})),this.actor.registerMessageHandler("GCC",(G,re)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(G,re.type,re.source).getClusterChildren(re)})),this.actor.registerMessageHandler("GCL",(G,re)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(G,re.type,re.source).getClusterLeaves(re)})),this.actor.registerMessageHandler("LD",(G,re)=>this._getWorkerSource(G,re.type,re.source).loadData(re)),this.actor.registerMessageHandler("GD",(G,re)=>this._getWorkerSource(G,re.type,re.source).getData()),this.actor.registerMessageHandler("LT",(G,re)=>this._getWorkerSource(G,re.type,re.source).loadTile(re)),this.actor.registerMessageHandler("RT",(G,re)=>this._getWorkerSource(G,re.type,re.source).reloadTile(re)),this.actor.registerMessageHandler("AT",(G,re)=>this._getWorkerSource(G,re.type,re.source).abortTile(re)),this.actor.registerMessageHandler("RMT",(G,re)=>this._getWorkerSource(G,re.type,re.source).removeTile(re)),this.actor.registerMessageHandler("RS",(G,re)=>o._(this,void 0,void 0,function*(){if(!this.workerSources[G]||!this.workerSources[G][re.type]||!this.workerSources[G][re.type][re.source])return;const pe=this.workerSources[G][re.type][re.source];delete this.workerSources[G][re.type][re.source],pe.removeSource!==void 0&&pe.removeSource(re)})),this.actor.registerMessageHandler("RM",G=>o._(this,void 0,void 0,function*(){delete this.layerIndexes[G],delete this.availableImages[G],delete this.workerSources[G],delete this.demWorkerSources[G]})),this.actor.registerMessageHandler("SR",(G,re)=>o._(this,void 0,void 0,function*(){this.referrer=re})),this.actor.registerMessageHandler("SRPS",(G,re)=>this._syncRTLPluginState(G,re)),this.actor.registerMessageHandler("IS",(G,re)=>o._(this,void 0,void 0,function*(){this.self.importScripts(re)})),this.actor.registerMessageHandler("SI",(G,re)=>this._setImages(G,re)),this.actor.registerMessageHandler("UL",(G,re)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(G).update(re.layers,re.removedIds)})),this.actor.registerMessageHandler("SL",(G,re)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(G).replace(re)}))}_setImages(U,G){return o._(this,void 0,void 0,function*(){this.availableImages[U]=G;for(const re in this.workerSources[U]){const pe=this.workerSources[U][re];for(const Se in pe)pe[Se].availableImages=G}})}_syncRTLPluginState(U,G){return o._(this,void 0,void 0,function*(){if(o.bD.isParsed())return o.bD.getState();if(G.pluginStatus!=="loading")return o.bD.setState(G),G;const re=G.pluginURL;if(this.self.importScripts(re),o.bD.isParsed()){const pe={pluginStatus:"loaded",pluginURL:re};return o.bD.setState(pe),pe}throw o.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${re}`)})}_getAvailableImages(U){let G=this.availableImages[U];return G||(G=[]),G}_getLayerIndex(U){let G=this.layerIndexes[U];return G||(G=this.layerIndexes[U]=new a),G}_getWorkerSource(U,G,re){if(this.workerSources[U]||(this.workerSources[U]={}),this.workerSources[U][G]||(this.workerSources[U][G]={}),!this.workerSources[U][G][re]){const pe={sendAsync:(Se,Pe)=>(Se.targetMapId=U,this.actor.sendAsync(Se,Pe))};switch(G){case"vector":this.workerSources[U][G][re]=new y(pe,this._getLayerIndex(U),this._getAvailableImages(U));break;case"geojson":this.workerSources[U][G][re]=new Ui(pe,this._getLayerIndex(U),this._getAvailableImages(U));break;default:this.workerSources[U][G][re]=new this.externalWorkerSourceTypes[G](pe,this._getLayerIndex(U),this._getAvailableImages(U))}}return this.workerSources[U][G][re]}_getDEMWorkerSource(U,G){return this.demWorkerSources[U]||(this.demWorkerSources[U]={}),this.demWorkerSources[U][G]||(this.demWorkerSources[U][G]=new b),this.demWorkerSources[U][G]}}return o.i(self)&&(self.worker=new vs(self)),vs}),i("index",["exports","./shared"],function(o,a){var h="4.7.1";let p,g;const y={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:C=>new Promise((l,m)=>{const v=requestAnimationFrame(l);C.signal.addEventListener("abort",()=>{cancelAnimationFrame(v),m(a.c())})}),getImageData(C,l=0){return this.getImageCanvasContext(C).getImageData(-l,-l,C.width+2*l,C.height+2*l)},getImageCanvasContext(C){const l=window.document.createElement("canvas"),m=l.getContext("2d",{willReadFrequently:!0});if(!m)throw new Error("failed to create canvas 2d context");return l.width=C.width,l.height=C.height,m.drawImage(C,0,0,C.width,C.height),m},resolveURL:C=>(p||(p=document.createElement("a")),p.href=C,p.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(g==null&&(g=matchMedia("(prefers-reduced-motion: reduce)")),g.matches)}};class b{static testProp(l){if(!b.docStyle)return l[0];for(let m=0;m<l.length;m++)if(l[m]in b.docStyle)return l[m];return l[0]}static create(l,m,v){const _=window.document.createElement(l);return m!==void 0&&(_.className=m),v&&v.appendChild(_),_}static createNS(l,m){return window.document.createElementNS(l,m)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(l,m){l.style[b.transformProp]=m}static addEventListener(l,m,v,_={}){l.addEventListener(m,v,"passive"in _?_:_.capture)}static removeEventListener(l,m,v,_={}){l.removeEventListener(m,v,"passive"in _?_:_.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",b.suppressClickInternal,!0)},0)}static getScale(l){const m=l.getBoundingClientRect();return{x:m.width/l.offsetWidth||1,y:m.height/l.offsetHeight||1,boundingClientRect:m}}static getPoint(l,m,v){const _=m.boundingClientRect;return new a.P((v.clientX-_.left)/m.x-l.clientLeft,(v.clientY-_.top)/m.y-l.clientTop)}static mousePos(l,m){const v=b.getScale(l);return b.getPoint(l,v,m)}static touchPos(l,m){const v=[],_=b.getScale(l);for(let k=0;k<m.length;k++)v.push(b.getPoint(l,_,m[k]));return v}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}}b.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);const S={supported:!1,testSupport:function(C){!D&&O&&(z?F(C):P=C)}};let P,O,D=!1,z=!1;function F(C){const l=C.createTexture();C.bindTexture(C.TEXTURE_2D,l);try{if(C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,O),C.isContextLost())return;S.supported=!0}catch{}C.deleteTexture(l),D=!0}var R;typeof document<"u"&&(O=document.createElement("img"),O.onload=()=>{P&&F(P),P=null,z=!0},O.onerror=()=>{D=!0,P=null},O.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(C){let l,m,v,_;C.resetRequestQueue=()=>{l=[],m=0,v=0,_={}},C.addThrottleControl=B=>{const W=v++;return _[W]=B,W},C.removeThrottleControl=B=>{delete _[B],E()},C.getImage=(B,W,Z=!0)=>new Promise((Y,le)=>{S.supported&&(B.headers||(B.headers={}),B.headers.accept="image/webp,*/*"),a.e(B,{type:"image"}),l.push({abortController:W,requestParameters:B,supportImageRefresh:Z,state:"queued",onError:he=>{le(he)},onSuccess:he=>{Y(he)}}),E()});const k=B=>a._(this,void 0,void 0,function*(){B.state="running";const{requestParameters:W,supportImageRefresh:Z,onError:Y,onSuccess:le,abortController:he}=B,fe=Z===!1&&!a.i(self)&&!a.g(W.url)&&(!W.headers||Object.keys(W.headers).reduce((Ae,De)=>Ae&&De==="accept",!0));m++;const be=fe?M(W,he):a.m(W,he);try{const Ae=yield be;delete B.abortController,B.state="completed",Ae.data instanceof HTMLImageElement||a.b(Ae.data)?le(Ae):Ae.data&&le({data:yield(je=Ae.data,typeof createImageBitmap=="function"?a.d(je):a.f(je)),cacheControl:Ae.cacheControl,expires:Ae.expires})}catch(Ae){delete B.abortController,Y(Ae)}finally{m--,E()}var je}),E=()=>{const B=(()=>{for(const W of Object.keys(_))if(_[W]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let W=m;W<B&&l.length>0;W++){const Z=l.shift();Z.abortController.signal.aborted?W--:k(Z)}},M=(B,W)=>new Promise((Z,Y)=>{const le=new Image,he=B.url,fe=B.credentials;fe&&fe==="include"?le.crossOrigin="use-credentials":(fe&&fe==="same-origin"||!a.s(he))&&(le.crossOrigin="anonymous"),W.signal.addEventListener("abort",()=>{le.src="",Y(a.c())}),le.fetchPriority="high",le.onload=()=>{le.onerror=le.onload=null,Z({data:le})},le.onerror=()=>{le.onerror=le.onload=null,W.signal.aborted||Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},le.src=he})}(R||(R={})),R.resetRequestQueue();class N{constructor(l){this._transformRequestFn=l}transformRequest(l,m){return this._transformRequestFn&&this._transformRequestFn(l,m)||{url:l}}setTransformRequest(l){this._transformRequestFn=l}}function Q(C){var l=new a.A(3);return l[0]=C[0],l[1]=C[1],l[2]=C[2],l}var q,X=function(C,l,m){return C[0]=l[0]-m[0],C[1]=l[1]-m[1],C[2]=l[2]-m[2],C};q=new a.A(3),a.A!=Float32Array&&(q[0]=0,q[1]=0,q[2]=0);var K=function(C){var l=C[0],m=C[1];return l*l+m*m};function ne(C){const l=[];if(typeof C=="string")l.push({id:"default",url:C});else if(C&&C.length>0){const m=[];for(const{id:v,url:_}of C){const k=`${v}${_}`;m.indexOf(k)===-1&&(m.push(k),l.push({id:v,url:_}))}}return l}function J(C,l,m){const v=C.split("?");return v[0]+=`${l}${m}`,v.join("?")}(function(){var C=new a.A(2);a.A!=Float32Array&&(C[0]=0,C[1]=0)})();class ae{constructor(l,m,v,_){this.context=l,this.format=v,this.texture=l.gl.createTexture(),this.update(m,_)}update(l,m,v){const{width:_,height:k}=l,E=!(this.size&&this.size[0]===_&&this.size[1]===k||v),{context:M}=this,{gl:B}=M;if(this.useMipmap=!!(m&&m.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),M.pixelStoreUnpackFlipY.set(!1),M.pixelStoreUnpack.set(1),M.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!m||m.premultiply!==!1)),E)this.size=[_,k],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||a.b(l)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,l):B.texImage2D(B.TEXTURE_2D,0,this.format,_,k,0,this.format,B.UNSIGNED_BYTE,l.data);else{const{x:W,y:Z}=v||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||a.b(l)?B.texSubImage2D(B.TEXTURE_2D,0,W,Z,B.RGBA,B.UNSIGNED_BYTE,l):B.texSubImage2D(B.TEXTURE_2D,0,W,Z,_,k,B.RGBA,B.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D)}bind(l,m,v){const{context:_}=this,{gl:k}=_;k.bindTexture(k.TEXTURE_2D,this.texture),v!==k.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(v=k.LINEAR),l!==this.filter&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,l),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,v||l),this.filter=l),m!==this.wrap&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,m),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,m),this.wrap=m)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function Ee(C){const{userImage:l}=C;return!!(l&&l.render&&l.render())&&(C.data.replace(new Uint8Array(l.data.buffer)),!0)}class Ce extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:m,promiseResolve:v}of this.requestors)v(this._getImagesForIds(m));this.requestors=[]}}getImage(l){const m=this.images[l];if(m&&!m.data&&m.spriteData){const v=m.spriteData;m.data=new a.R({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),m.spriteData=null}return m}addImage(l,m){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,m)&&(this.images[l]=m)}_validate(l,m){let v=!0;const _=m.data||m.spriteData;return this._validateStretch(m.stretchX,_&&_.width)||(this.fire(new a.j(new Error(`Image "${l}" has invalid "stretchX" value`))),v=!1),this._validateStretch(m.stretchY,_&&_.height)||(this.fire(new a.j(new Error(`Image "${l}" has invalid "stretchY" value`))),v=!1),this._validateContent(m.content,m)||(this.fire(new a.j(new Error(`Image "${l}" has invalid "content" value`))),v=!1),v}_validateStretch(l,m){if(!l)return!0;let v=0;for(const _ of l){if(_[0]<v||_[1]<_[0]||m<_[1])return!1;v=_[1]}return!0}_validateContent(l,m){if(!l)return!0;if(l.length!==4)return!1;const v=m.spriteData,_=v&&v.width||m.data.width,k=v&&v.height||m.data.height;return!(l[0]<0||_<l[0]||l[1]<0||k<l[1]||l[2]<0||_<l[2]||l[3]<0||k<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,m,v=!0){const _=this.getImage(l);if(v&&(_.data.width!==m.data.width||_.data.height!==m.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${m.data.width}x${m.data.height}).`);m.version=_.version+1,this.images[l]=m,this.updatedImages[l]=!0}removeImage(l){const m=this.images[l];delete this.images[l],delete this.patterns[l],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l){return new Promise((m,v)=>{let _=!0;if(!this.isLoaded())for(const k of l)this.images[k]||(_=!1);this.isLoaded()||_?m(this._getImagesForIds(l)):this.requestors.push({ids:l,promiseResolve:m})})}_getImagesForIds(l){const m={};for(const v of l){let _=this.getImage(v);_||(this.fire(new a.k("styleimagemissing",{id:v})),_=this.getImage(v)),_?m[v]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:a.w(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return m}getPixelSize(){const{width:l,height:m}=this.atlasImage;return{width:l,height:m}}getPattern(l){const m=this.patterns[l],v=this.getImage(l);if(!v)return null;if(m&&m.position.version===v.version)return m.position;if(m)m.position.version=v.version;else{const _={w:v.data.width+2,h:v.data.height+2,x:0,y:0},k=new a.I(_,v);this.patterns[l]={bin:_,position:k}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const m=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ae(l,this.atlasImage,m.RGBA),this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const k in this.patterns)l.push(this.patterns[k].bin);const{w:m,h:v}=a.p(l),_=this.atlasImage;_.resize({width:m||1,height:v||1});for(const k in this.patterns){const{bin:E}=this.patterns[k],M=E.x+1,B=E.y+1,W=this.getImage(k).data,Z=W.width,Y=W.height;a.R.copy(W,_,{x:0,y:0},{x:M,y:B},{width:Z,height:Y}),a.R.copy(W,_,{x:0,y:Y-1},{x:M,y:B-1},{width:Z,height:1}),a.R.copy(W,_,{x:0,y:0},{x:M,y:B+Y},{width:Z,height:1}),a.R.copy(W,_,{x:Z-1,y:0},{x:M-1,y:B},{width:1,height:Y}),a.R.copy(W,_,{x:0,y:0},{x:M+Z,y:B},{width:1,height:Y})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const m of l){if(this.callbackDispatchedThisFrame[m])continue;this.callbackDispatchedThisFrame[m]=!0;const v=this.getImage(m);v||a.w(`Image with ID: "${m}" was not found`),Ee(v)&&this.updateImage(m,v)}}}const $e=1e20;function We(C,l,m,v,_,k,E,M,B){for(let W=l;W<l+v;W++)Fe(C,m*k+W,k,_,E,M,B);for(let W=m;W<m+_;W++)Fe(C,W*k+l,1,v,E,M,B)}function Fe(C,l,m,v,_,k,E){k[0]=0,E[0]=-$e,E[1]=$e,_[0]=C[l];for(let M=1,B=0,W=0;M<v;M++){_[M]=C[l+M*m];const Z=M*M;do{const Y=k[B];W=(_[M]-_[Y]+Z-Y*Y)/(M-Y)/2}while(W<=E[B]&&--B>-1);B++,k[B]=M,E[B]=W,E[B+1]=$e}for(let M=0,B=0;M<v;M++){for(;E[B+1]<M;)B++;const W=k[B],Z=M-W;C[l+M*m]=_[W]+Z*Z}}class we{constructor(l,m){this.requestManager=l,this.localIdeographFontFamily=m,this.entries={}}setURL(l){this.url=l}getGlyphs(l){return a._(this,void 0,void 0,function*(){const m=[];for(const k in l)for(const E of l[k])m.push(this._getAndCacheGlyphsPromise(k,E));const v=yield Promise.all(m),_={};for(const{stack:k,id:E,glyph:M}of v)_[k]||(_[k]={}),_[k][E]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics};return _})}_getAndCacheGlyphsPromise(l,m){return a._(this,void 0,void 0,function*(){let v=this.entries[l];v||(v=this.entries[l]={glyphs:{},requests:{},ranges:{}});let _=v.glyphs[m];if(_!==void 0)return{stack:l,id:m,glyph:_};if(_=this._tinySDF(v,l,m),_)return v.glyphs[m]=_,{stack:l,id:m,glyph:_};const k=Math.floor(m/256);if(256*k>65535)throw new Error("glyphs > 65535 not supported");if(v.ranges[k])return{stack:l,id:m,glyph:_};if(!this.url)throw new Error("glyphsUrl is not set");if(!v.requests[k]){const M=we.loadGlyphRange(l,k,this.url,this.requestManager);v.requests[k]=M}const E=yield v.requests[k];for(const M in E)this._doesCharSupportLocalGlyph(+M)||(v.glyphs[+M]=E[+M]);return v.ranges[k]=!0,{stack:l,id:m,glyph:E[m]||null}})}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(l))}_tinySDF(l,m,v){const _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(v))return;let k=l.tinySDF;if(!k){let M="400";/bold/i.test(m)?M="900":/medium/i.test(m)?M="500":/light/i.test(m)&&(M="200"),k=l.tinySDF=new we.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:_,fontWeight:M})}const E=k.draw(String.fromCharCode(v));return{id:v,bitmap:new a.o({width:E.width||60,height:E.height||60},E.data),metrics:{width:E.glyphWidth/2||24,height:E.glyphHeight/2||24,left:E.glyphLeft/2+.5||0,top:E.glyphTop/2-27.5||-8,advance:E.glyphAdvance/2||24,isDoubleResolution:!0}}}}we.loadGlyphRange=function(C,l,m,v){return a._(this,void 0,void 0,function*(){const _=256*l,k=_+255,E=v.transformRequest(m.replace("{fontstack}",C).replace("{range}",`${_}-${k}`),"Glyphs"),M=yield a.l(E,new AbortController);if(!M||!M.data)throw new Error(`Could not load glyph range. range: ${l}, ${_}-${k}`);const B={};for(const W of a.n(M.data))B[W.id]=W;return B})},we.TinySDF=class{constructor({fontSize:C=24,buffer:l=3,radius:m=8,cutoff:v=.25,fontFamily:_="sans-serif",fontWeight:k="normal",fontStyle:E="normal"}={}){this.buffer=l,this.cutoff=v,this.radius=m;const M=this.size=C+4*l,B=this._createCanvas(M),W=this.ctx=B.getContext("2d",{willReadFrequently:!0});W.font=`${E} ${k} ${C}px ${_}`,W.textBaseline="alphabetic",W.textAlign="left",W.fillStyle="black",this.gridOuter=new Float64Array(M*M),this.gridInner=new Float64Array(M*M),this.f=new Float64Array(M),this.z=new Float64Array(M+1),this.v=new Uint16Array(M)}_createCanvas(C){const l=document.createElement("canvas");return l.width=l.height=C,l}draw(C){const{width:l,actualBoundingBoxAscent:m,actualBoundingBoxDescent:v,actualBoundingBoxLeft:_,actualBoundingBoxRight:k}=this.ctx.measureText(C),E=Math.ceil(m),M=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(k-_))),B=Math.min(this.size-this.buffer,E+Math.ceil(v)),W=M+2*this.buffer,Z=B+2*this.buffer,Y=Math.max(W*Z,0),le=new Uint8ClampedArray(Y),he={data:le,width:W,height:Z,glyphWidth:M,glyphHeight:B,glyphTop:E,glyphLeft:0,glyphAdvance:l};if(M===0||B===0)return he;const{ctx:fe,buffer:be,gridInner:je,gridOuter:Ae}=this;fe.clearRect(be,be,M,B),fe.fillText(C,be,be+E);const De=fe.getImageData(be,be,M,B);Ae.fill($e,0,Y),je.fill(0,0,Y);for(let ge=0;ge<B;ge++)for(let Ue=0;Ue<M;Ue++){const Xe=De.data[4*(ge*M+Ue)+3]/255;if(Xe===0)continue;const et=(ge+be)*W+Ue+be;if(Xe===1)Ae[et]=0,je[et]=$e;else{const mt=.5-Xe;Ae[et]=mt>0?mt*mt:0,je[et]=mt<0?mt*mt:0}}We(Ae,0,0,W,Z,W,this.f,this.v,this.z),We(je,be,be,M,B,W,this.f,this.v,this.z);for(let ge=0;ge<Y;ge++){const Ue=Math.sqrt(Ae[ge])-Math.sqrt(je[ge]);le[ge]=Math.round(255-255*(Ue/this.radius+this.cutoff))}return he}};class Ie{constructor(){this.specification=a.v.light.position}possiblyEvaluate(l,m){return a.x(l.expression.evaluate(m))}interpolate(l,m,v){return{x:a.y.number(l.x,m.x,v),y:a.y.number(l.y,m.y,v),z:a.y.number(l.z,m.z,v)}}}let Qe;class se extends a.E{constructor(l){super(),Qe=Qe||new a.q({anchor:new a.D(a.v.light.anchor),position:new Ie,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(Qe),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,m={}){if(!this._validate(a.r,l,m))for(const v in l){const _=l[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),_):this._transitionable.setValue(v,_)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,m,v){return(!v||v.validate!==!1)&&a.t(this,l.call(a.u,{value:m,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const Re=new a.q({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class Oe extends a.E{constructor(l){super(),this._transitionable=new a.T(Re),this.setSky(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.z(0))}setSky(l,m={}){if(!this._validate(a.B,l,m)){l||(l={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const v in l){const _=l[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),_):this._transitionable.setValue(v,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,m,v={}){return(v==null?void 0:v.validate)!==!1&&a.t(this,l.call(a.u,a.e({value:m,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(l){return l<60?0:l<70?(l-60)/10:1}}class oe{constructor(l,m){this.width=l,this.height=m,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,m){const v=l.join(",")+String(m);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(l,m)),this.dashEntry[v]}getDashRanges(l,m,v){const _=[];let k=l.length%2==1?-l[l.length-1]*v:0,E=l[0]*v,M=!0;_.push({left:k,right:E,isDash:M,zeroLength:l[0]===0});let B=l[0];for(let W=1;W<l.length;W++){M=!M;const Z=l[W];k=B*v,B+=Z,E=B*v,_.push({left:k,right:E,isDash:M,zeroLength:Z===0})}return _}addRoundDash(l,m,v){const _=m/2;for(let k=-v;k<=v;k++){const E=this.width*(this.nextRow+v+k);let M=0,B=l[M];for(let W=0;W<this.width;W++){W/B.right>1&&(B=l[++M]);const Z=Math.abs(W-B.left),Y=Math.abs(W-B.right),le=Math.min(Z,Y);let he;const fe=k/v*(_+1);if(B.isDash){const be=_-Math.abs(fe);he=Math.sqrt(le*le+be*be)}else he=_-Math.sqrt(le*le+fe*fe);this.data[E+W]=Math.max(0,Math.min(255,he+128))}}}addRegularDash(l){for(let M=l.length-1;M>=0;--M){const B=l[M],W=l[M+1];B.zeroLength?l.splice(M,1):W&&W.isDash===B.isDash&&(W.left=B.left,l.splice(M,1))}const m=l[0],v=l[l.length-1];m.isDash===v.isDash&&(m.left=v.left-this.width,v.right=m.right+this.width);const _=this.width*this.nextRow;let k=0,E=l[k];for(let M=0;M<this.width;M++){M/E.right>1&&(E=l[++k]);const B=Math.abs(M-E.left),W=Math.abs(M-E.right),Z=Math.min(B,W);this.data[_+M]=Math.max(0,Math.min(255,(E.isDash?Z:-Z)+128))}}addDash(l,m){const v=m?7:0,_=2*v+1;if(this.nextRow+_>this.height)return a.w("LineAtlas out of space"),null;let k=0;for(let M=0;M<l.length;M++)k+=l[M];if(k!==0){const M=this.width/k,B=this.getDashRanges(l,this.width,M);m?this.addRoundDash(B,M,v):this.addRegularDash(B)}const E={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:k};return this.nextRow+=_,this.dirty=!0,E}bind(l){const m=l.gl;this.texture?(m.bindTexture(m.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,m.texSubImage2D(m.TEXTURE_2D,0,0,0,this.width,this.height,m.ALPHA,m.UNSIGNED_BYTE,this.data))):(this.texture=m.createTexture(),m.bindTexture(m.TEXTURE_2D,this.texture),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texImage2D(m.TEXTURE_2D,0,m.ALPHA,this.width,this.height,0,m.ALPHA,m.UNSIGNED_BYTE,this.data))}}const nt="maplibre_preloaded_worker_pool";class Ne{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Ne.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(m=>{m.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[nt]}numActive(){return Object.keys(this.active).length}}const tt=Math.floor(y.hardwareConcurrency/2);let Ye,_t;function At(){return Ye||(Ye=new Ne),Ye}Ne.workerCount=a.C(globalThis)?Math.max(Math.min(tt,3),1):1;class Ot{constructor(l,m){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=m;const v=this.workerPool.acquire(m);for(let _=0;_<v.length;_++){const k=new a.F(v[_],m);k.name=`Worker ${_}`,this.actors.push(k)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,m){const v=[];for(const _ of this.actors)v.push(_.sendAsync({type:l,data:m}));return Promise.all(v)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach(m=>{m.remove()}),this.actors=[],l&&this.workerPool.release(this.id)}registerMessageHandler(l,m){for(const v of this.actors)v.registerMessageHandler(l,m)}}function bt(){return _t||(_t=new Ot(At(),a.G),_t.registerMessageHandler("GR",(C,l,m)=>a.m(l,m))),_t}function rt(C,l){const m=a.H();return a.J(m,m,[1,1,0]),a.K(m,m,[.5*C.width,.5*C.height,1]),a.L(m,m,C.calculatePosMatrix(l.toUnwrapped()))}function tn(C,l,m,v,_,k){const E=function(Y,le,he){if(Y)for(const fe of Y){const be=le[fe];if(be&&be.source===he&&be.type==="fill-extrusion")return!0}else for(const fe in le){const be=le[fe];if(be.source===he&&be.type==="fill-extrusion")return!0}return!1}(_&&_.layers,l,C.id),M=k.maxPitchScaleFactor(),B=C.tilesIn(v,M,E);B.sort(kt);const W=[];for(const Y of B)W.push({wrappedTileID:Y.tileID.wrapped().key,queryResults:Y.tile.queryRenderedFeatures(l,m,C._state,Y.queryGeometry,Y.cameraQueryGeometry,Y.scale,_,k,M,rt(C.transform,Y.tileID))});const Z=function(Y){const le={},he={};for(const fe of Y){const be=fe.queryResults,je=fe.wrappedTileID,Ae=he[je]=he[je]||{};for(const De in be){const ge=be[De],Ue=Ae[De]=Ae[De]||{},Xe=le[De]=le[De]||[];for(const et of ge)Ue[et.featureIndex]||(Ue[et.featureIndex]=!0,Xe.push(et))}}return le}(W);for(const Y in Z)Z[Y].forEach(le=>{const he=le.feature,fe=C.getFeatureState(he.layer["source-layer"],he.id);he.source=he.layer.source,he.layer["source-layer"]&&(he.sourceLayer=he.layer["source-layer"]),he.state=fe});return Z}function kt(C,l){const m=C.tileID,v=l.tileID;return m.overscaledZ-v.overscaledZ||m.canonical.y-v.canonical.y||m.wrap-v.wrap||m.canonical.x-v.canonical.x}function it(C,l,m){return a._(this,void 0,void 0,function*(){let v=C;if(C.url?v=(yield a.h(l.transformRequest(C.url,"Source"),m)).data:yield y.frameAsync(m),!v)return null;const _=a.M(a.e(v,C),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in v&&v.vector_layers&&(_.vectorLayerIds=v.vector_layers.map(k=>k.id)),_})}class ze{constructor(l,m){l&&(m?this.setSouthWest(l).setNorthEast(m):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof a.N?new a.N(l.lng,l.lat):a.N.convert(l),this}setSouthWest(l){return this._sw=l instanceof a.N?new a.N(l.lng,l.lat):a.N.convert(l),this}extend(l){const m=this._sw,v=this._ne;let _,k;if(l instanceof a.N)_=l,k=l;else{if(!(l instanceof ze))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(ze.convert(l)):this.extend(a.N.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(a.N.convert(l)):this;if(_=l._sw,k=l._ne,!_||!k)return this}return m||v?(m.lng=Math.min(_.lng,m.lng),m.lat=Math.min(_.lat,m.lat),v.lng=Math.max(k.lng,v.lng),v.lat=Math.max(k.lat,v.lat)):(this._sw=new a.N(_.lng,_.lat),this._ne=new a.N(k.lng,k.lat)),this}getCenter(){return new a.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.N(this.getWest(),this.getNorth())}getSouthEast(){return new a.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:m,lat:v}=a.N.convert(l);let _=this._sw.lng<=m&&m<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=m&&m>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&_}static convert(l){return l instanceof ze?l:l&&new ze(l)}static fromLngLat(l,m=0){const v=360*m/40075017,_=v/Math.cos(Math.PI/180*l.lat);return new ze(new a.N(l.lng-_,l.lat-v),new a.N(l.lng+_,l.lat+v))}adjustAntiMeridian(){const l=new a.N(this._sw.lng,this._sw.lat),m=new a.N(this._ne.lng,this._ne.lat);return new ze(l,l.lng>m.lng?new a.N(m.lng+360,m.lat):m)}}class ut{constructor(l,m,v){this.bounds=ze.convert(this.validateBounds(l)),this.minzoom=m||0,this.maxzoom=v||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const m=Math.pow(2,l.z),v=Math.floor(a.O(this.bounds.getWest())*m),_=Math.floor(a.Q(this.bounds.getNorth())*m),k=Math.ceil(a.O(this.bounds.getEast())*m),E=Math.ceil(a.Q(this.bounds.getSouth())*m);return l.x>=v&&l.x<k&&l.y>=_&&l.y<E}}class qt extends a.E{constructor(l,m,v,_){if(super(),this.id=l,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.M(m,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield it(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l&&(a.e(this,l),l.bounds&&(this.tileBounds=new ut(l.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this.fire(new a.j(l))}})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.abort(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(l){return a._(this,void 0,void 0,function*(){const m=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(m,"Tile"),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};v.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(l.actor&&l.state!=="expired"){if(l.state==="loading")return new Promise((k,E)=>{l.reloadPromise={resolve:k,reject:E}})}else l.actor=this.dispatcher.getActor(),_="LT";l.abortController=new AbortController;try{const k=yield l.actor.sendAsync({type:_,data:v},l.abortController);if(delete l.abortController,l.aborted)return;this._afterTileLoadWorkerResponse(l,k)}catch(k){if(delete l.abortController,l.aborted)return;if(k&&k.status!==404)throw k;this._afterTileLoadWorkerResponse(l,null)}})}_afterTileLoadWorkerResponse(l,m){if(m&&m.resourceTiming&&(l.resourceTiming=m.resourceTiming),m&&this.map._refreshExpiredTiles&&l.setExpiryData(m),l.loadVectorData(m,this.map.painter),l.reloadPromise){const v=l.reloadPromise;l.reloadPromise=null,this.loadTile(l).then(v.resolve).catch(v.reject)}}abortTile(l){return a._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.actor&&(yield l.actor.sendAsync({type:"AT",data:{uid:l.uid,type:this.type,source:this.id}}))})}unloadTile(l){return a._(this,void 0,void 0,function*(){l.unloadVectorData(),l.actor&&(yield l.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Ct extends a.E{constructor(l,m,v,_){super(),this.id=l,this.dispatcher=v,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},m),a.e(this,a.M(m,["url","scheme","tileSize"]))}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield it(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,l&&(a.e(this,l),l.bounds&&(this.tileBounds=new ut(l.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this.fire(new a.j(l))}})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}serialize(){return a.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l){return a._(this,void 0,void 0,function*(){const m=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.abortController=new AbortController;try{const v=yield R.getImage(this.map._requestManager.transformRequest(m,"Tile"),l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(v&&v.data){this.map._refreshExpiredTiles&&v.cacheControl&&v.expires&&l.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const _=this.map.painter.context,k=_.gl,E=v.data;l.texture=this.map.painter.getTileTexture(E.width),l.texture?l.texture.update(E,{useMipmap:!0}):(l.texture=new ae(_,E,k.RGBA,{useMipmap:!0}),l.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST)),l.state="loaded"}}catch(v){if(delete l.abortController,l.aborted)l.state="unloaded";else if(v)throw l.state="errored",v}})}abortTile(l){return a._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController)})}unloadTile(l){return a._(this,void 0,void 0,function*(){l.texture&&this.map.painter.saveTileTexture(l.texture)})}hasTransition(){return!1}}class $t extends Ct{constructor(l,m,v,_){super(l,m,v,_),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},m),this.encoding=m.encoding||"mapbox",this.redFactor=m.redFactor,this.greenFactor=m.greenFactor,this.blueFactor=m.blueFactor,this.baseShift=m.baseShift}loadTile(l){return a._(this,void 0,void 0,function*(){const m=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v=this.map._requestManager.transformRequest(m,"Tile");l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.abortController=new AbortController;try{const _=yield R.getImage(v,l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(_&&_.data){const k=_.data;this.map._refreshExpiredTiles&&_.cacheControl&&_.expires&&l.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const E=a.b(k)&&a.U()?k:yield this.readImageNow(k),M={type:this.type,uid:l.uid,source:this.id,rawImageData:E,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!l.actor||l.state==="expired"){l.actor=this.dispatcher.getActor();const B=yield l.actor.sendAsync({type:"LDT",data:M});l.dem=B,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded"}}}catch(_){if(delete l.abortController,l.aborted)l.state="unloaded";else if(_)throw l.state="errored",_}})}readImageNow(l){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.V()){const m=l.width+2,v=l.height+2;try{return new a.R({width:m,height:v},yield a.W(l,-1,-1,m,v))}catch{}}return y.getImageData(l,1)})}_getNeighboringTiles(l){const m=l.canonical,v=Math.pow(2,m.z),_=(m.x-1+v)%v,k=m.x===0?l.wrap-1:l.wrap,E=(m.x+1+v)%v,M=m.x+1===v?l.wrap+1:l.wrap,B={};return B[new a.S(l.overscaledZ,k,m.z,_,m.y).key]={backfilled:!1},B[new a.S(l.overscaledZ,M,m.z,E,m.y).key]={backfilled:!1},m.y>0&&(B[new a.S(l.overscaledZ,k,m.z,_,m.y-1).key]={backfilled:!1},B[new a.S(l.overscaledZ,l.wrap,m.z,m.x,m.y-1).key]={backfilled:!1},B[new a.S(l.overscaledZ,M,m.z,E,m.y-1).key]={backfilled:!1}),m.y+1<v&&(B[new a.S(l.overscaledZ,k,m.z,_,m.y+1).key]={backfilled:!1},B[new a.S(l.overscaledZ,l.wrap,m.z,m.x,m.y+1).key]={backfilled:!1},B[new a.S(l.overscaledZ,M,m.z,E,m.y+1).key]={backfilled:!1}),B}unloadTile(l){return a._(this,void 0,void 0,function*(){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&(yield l.actor.sendAsync({type:"RDT",data:{type:this.type,uid:l.uid,source:this.id}}))})}}class Yn extends a.E{constructor(l,m,v,_){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=v.getActor(),this.setEventedParent(_),this._data=m.data,this._options=a.e({},m),this._collectResourceTiming=m.collectResourceTiming,m.maxzoom!==void 0&&(this.maxzoom=m.maxzoom),m.type&&(this.type=m.type),m.attribution&&(this.attribution=m.attribution),this.promoteId=m.promoteId;const k=a.X/this.tileSize;m.clusterMaxZoom!==void 0&&this.maxzoom<=m.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${m.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:m.cluster||!1,geojsonVtOptions:{buffer:(m.buffer!==void 0?m.buffer:128)*k,tolerance:(m.tolerance!==void 0?m.tolerance:.375)*k,extent:a.X,maxZoom:this.maxzoom,lineMetrics:m.lineMetrics||!1,generateId:m.generateId||!1},superclusterOptions:{maxZoom:m.clusterMaxZoom!==void 0?m.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,m.clusterMinPoints||2),extent:a.X,radius:(m.clusterRadius||50)*k,log:!1,generateId:m.generateId||!1},clusterProperties:m.clusterProperties,filter:m.filter},m.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData(),this}updateData(l){return this._updateWorkerData(l),this}getData(){return a._(this,void 0,void 0,function*(){const l=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:l})})}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l&&(l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=l.clusterRadius),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=l.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(l){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:l,source:this.id}})}getClusterChildren(l){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:l,source:this.id}})}getClusterLeaves(l,m,v){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:l,limit:m,offset:v}})}_updateWorkerData(l){return a._(this,void 0,void 0,function*(){const m=a.e({type:this.type},this.workerOptions);l?m.dataDiff=l:typeof this._data=="string"?(m.request=this.map._requestManager.transformRequest(y.resolveURL(this._data),"Source"),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"}));try{const v=yield this.actor.sendAsync({type:"LD",data:m});if(this._pendingLoads--,this._removed||v.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let _=null;v.resourceTiming&&v.resourceTiming[this.id]&&(_=v.resourceTiming[this.id].slice(0));const k={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&a.e(k,{resourceTiming:_}),this.fire(new a.k("data",Object.assign(Object.assign({},k),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},k),{sourceDataType:"content"})))}catch(v){if(this._pendingLoads--,this._removed)return void this.fire(new a.k("dataabort",{dataType:"source"}));this.fire(new a.j(v))}})}loaded(){return this._pendingLoads===0}loadTile(l){return a._(this,void 0,void 0,function*(){const m=l.actor?"RT":"LT";l.actor=this.actor;const v={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};l.abortController=new AbortController;const _=yield this.actor.sendAsync({type:m,data:v},l.abortController);delete l.abortController,l.unloadVectorData(),l.aborted||l.loadVectorData(_,this.map.painter,m==="RT")})}abortTile(l){return a._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.aborted=!0})}unloadTile(l){return a._(this,void 0,void 0,function*(){l.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var br=a.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ur extends a.E{constructor(l,m,v,_){super(),this.id=l,this.dispatcher=v,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=m}load(l){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const m=yield R.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,m&&m.data&&(this.image=m.data,l&&(this.coordinates=l),this._finishLoading())}catch(m){this._request=null,this._loaded=!0,this.fire(new a.j(m))}})}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=l.url,this.load(l.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(l){this.coordinates=l;const m=l.map(a.Z.fromLngLat);this.tileID=function(_){let k=1/0,E=1/0,M=-1/0,B=-1/0;for(const le of _)k=Math.min(k,le.x),E=Math.min(E,le.y),M=Math.max(M,le.x),B=Math.max(B,le.y);const W=Math.max(M-k,B-E),Z=Math.max(0,Math.floor(-Math.log(W)/Math.LN2)),Y=Math.pow(2,Z);return new a.a1(Z,Math.floor((k+M)/2*Y),Math.floor((E+B)/2*Y))}(m),this.minzoom=this.maxzoom=this.tileID.z;const v=m.map(_=>this.tileID.getTilePoint(_)._round());return this._boundsArray=new a.$,this._boundsArray.emplaceBack(v[0].x,v[0].y,0,0),this._boundsArray.emplaceBack(v[1].x,v[1].y,a.X,0),this._boundsArray.emplaceBack(v[3].x,v[3].y,0,a.X),this._boundsArray.emplaceBack(v[2].x,v[2].y,a.X,a.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,m=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,br.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ae(l,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let v=!1;for(const _ in this.tiles){const k=this.tiles[_];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,v=!0)}v&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(l){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={}):l.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Ar extends ur{constructor(l,m,v,_){super(l,m,v,_),this.roundZoom=!0,this.type="video",this.options=m}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const l=this.options;this.urls=[];for(const m of l.urls)this.urls.push(this.map._requestManager.transformRequest(m,"Source").url);try{const m=yield a.a3(this.urls);if(this._loaded=!0,!m)return;this.video=m,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(m){this.fire(new a.j(m))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const m=this.video.seekable;l<m.start(0)||l>m.end(0)?this.fire(new a.j(new a.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${m.start(0)} and ${m.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,m=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,br.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.texSubImage2D(m.TEXTURE_2D,0,0,0,m.RGBA,m.UNSIGNED_BYTE,this.video)):(this.texture=new ae(l,this.video,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let v=!1;for(const _ in this.tiles){const k=this.tiles[_];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,v=!0)}v&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class _r extends ur{constructor(l,m,v,_){super(l,m,v,_),m.coordinates?Array.isArray(m.coordinates)&&m.coordinates.length===4&&!m.coordinates.some(k=>!Array.isArray(k)||k.length!==2||k.some(E=>typeof E!="number"))||this.fire(new a.j(new a.a2(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.a2(`sources.${l}`,null,'missing required property "coordinates"'))),m.animate&&typeof m.animate!="boolean"&&this.fire(new a.j(new a.a2(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),m.canvas?typeof m.canvas=="string"||m.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.a2(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.a2(`sources.${l}`,null,'missing required property "canvas"'))),this.options=m,this.animate=m.animate===void 0||m.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const m=this.map.painter.context,v=m.gl;this.boundsBuffer||(this.boundsBuffer=m.createVertexBuffer(this._boundsArray,br.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ae(m,this.canvas,v.RGBA,{premultiply:!0});let _=!1;for(const k in this.tiles){const E=this.tiles[k];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,_=!0)}_&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const ct={},Tt=C=>{switch(C){case"geojson":return Yn;case"image":return ur;case"raster":return Ct;case"raster-dem":return $t;case"vector":return qt;case"video":return Ar;case"canvas":return _r}return ct[C]},Me="RTLPluginLoaded";class Xt extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=bt()}_syncState(l){return this.status=l,this.dispatcher.broadcast("SRPS",{pluginStatus:l,pluginURL:this.url}).catch(m=>{throw this.status="error",m})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(l){return a._(this,arguments,void 0,function*(m,v=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=y.resolveURL(m),!this.url)throw new Error(`requested url ${m} is invalid`);if(this.status==="unavailable"){if(!v)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.k(Me))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let pt=null;function zt(){return pt||(pt=new Xt),pt}class ir{constructor(l,m){this.timeAdded=0,this.fadeEndTime=0,this.tileID=l,this.uid=a.a4(),this.uses=0,this.tileSize=m,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const m=l+this.timeAdded;m<this.fadeEndTime||(this.fadeEndTime=m)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,m,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(_,k){const E={};if(!k)return E;for(const M of _){const B=M.layerIds.map(W=>k.getLayer(W)).filter(Boolean);if(B.length!==0){M.layers=B,M.stateDependentLayerIds&&(M.stateDependentLayers=M.stateDependentLayerIds.map(W=>B.filter(Z=>Z.id===W)[0]));for(const W of B)E[W.id]=M}}return E}(l.buckets,m.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const k=this.buckets[_];if(k instanceof a.a6){if(this.hasSymbolBuckets=!0,!v)break;k.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const k=this.buckets[_];if(k instanceof a.a6&&k.hasRTLText){this.hasRTLText=!0,zt().lazyLoad();break}}this.queryPadding=0;for(const _ in this.buckets){const k=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,m.style.getLayer(_).queryRadius(k))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new a.a5}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const v in this.buckets){const _=this.buckets[v];_.uploadPending()&&_.upload(l)}const m=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ae(l,this.imageAtlas.image,m.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ae(l,this.glyphAtlasImage,m.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,m,v,_,k,E,M,B,W,Z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:k,scale:E,tileSize:this.tileSize,pixelPosMatrix:Z,transform:B,params:M,queryPadding:this.queryPadding*W},l,m,v):{}}querySourceFeatures(l,m){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const _=v.loadVTLayers(),k=m&&m.sourceLayer?m.sourceLayer:"",E=_._geojsonTileLayer||_[k];if(!E)return;const M=a.a7(m&&m.filter),{z:B,x:W,y:Z}=this.tileID.canonical,Y={z:B,x:W,y:Z};for(let le=0;le<E.length;le++){const he=E.feature(le);if(M.needGeometry){const je=a.a8(he,!0);if(!M.filter(new a.z(this.tileID.overscaledZ),je,this.tileID.canonical))continue}else if(!M.filter(new a.z(this.tileID.overscaledZ),he))continue;const fe=v.getId(he,k),be=new a.a9(he,B,W,Z,fe);be.tile=Y,l.push(be)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const m=this.expirationTime;if(l.cacheControl){const v=a.aa(l.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const v=Date.now();let _=!1;if(this.expirationTime>v)_=!1;else if(m)if(this.expirationTime<m)_=!0;else{const k=this.expirationTime-m;k?this.expirationTime=v+Math.max(k,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,m){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const v=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!m.style.hasLayer(_))continue;const k=this.buckets[_],E=k.layers[0].sourceLayer||"_geojsonTileLayer",M=v[E],B=l[E];if(!M||!B||Object.keys(B).length===0)continue;k.update(B,M,this.imageAtlas&&this.imageAtlas.patternPositions||{});const W=m&&m.style&&m.style.getLayer(_);W&&(this.queryPadding=Math.max(this.queryPadding,W.queryRadius(k)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<y.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=y.now()+l}setDependencies(l,m){const v={};for(const _ of m)v[_]=!0;this.dependencies[l]=v}hasDependency(l,m){for(const v of l){const _=this.dependencies[v];if(_){for(const k of m)if(_[k])return!0}}return!1}}class yt{constructor(l,m){this.max=l,this.onRemove=m,this.reset()}reset(){for(const l in this.data)for(const m of this.data[l])m.timeout&&clearTimeout(m.timeout),this.onRemove(m.value);return this.data={},this.order=[],this}add(l,m,v){const _=l.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const k={value:m,timeout:void 0};if(v!==void 0&&(k.timeout=setTimeout(()=>{this.remove(l,k)},v)),this.data[_].push(k),this.order.push(_),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const m=this.data[l].shift();return m.timeout&&clearTimeout(m.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),m.value}getByKey(l){const m=this.data[l];return m?m[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,m){if(!this.has(l))return this;const v=l.wrapped().key,_=m===void 0?0:this.data[v].indexOf(m),k=this.data[v][_];return this.data[v].splice(_,1),k.timeout&&clearTimeout(k.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(k.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const m=this._getAndRemoveByKey(this.order[0]);m&&this.onRemove(m)}return this}filter(l){const m=[];for(const v in this.data)for(const _ of this.data[v])l(_.value)||m.push(_);for(const v of m)this.remove(v.value.tileID,v)}}class _n{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,m,v){const _=String(m);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][_]=this.stateChanges[l][_]||{},a.e(this.stateChanges[l][_],v),this.deletedStates[l]===null){this.deletedStates[l]={};for(const k in this.state[l])k!==_&&(this.deletedStates[l][k]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][_]===null){this.deletedStates[l][_]={};for(const k in this.state[l][_])v[k]||(this.deletedStates[l][_][k]=null)}else for(const k in v)this.deletedStates[l]&&this.deletedStates[l][_]&&this.deletedStates[l][_][k]===null&&delete this.deletedStates[l][_][k]}removeFeatureState(l,m,v){if(this.deletedStates[l]===null)return;const _=String(m);if(this.deletedStates[l]=this.deletedStates[l]||{},v&&m!==void 0)this.deletedStates[l][_]!==null&&(this.deletedStates[l][_]=this.deletedStates[l][_]||{},this.deletedStates[l][_][v]=null);else if(m!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][_])for(v in this.deletedStates[l][_]={},this.stateChanges[l][_])this.deletedStates[l][_][v]=null;else this.deletedStates[l][_]=null;else this.deletedStates[l]=null}getState(l,m){const v=String(m),_=a.e({},(this.state[l]||{})[v],(this.stateChanges[l]||{})[v]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const k=this.deletedStates[l][m];if(k===null)return{};for(const E in k)delete _[E]}return _}initializeTileState(l,m){l.setFeatureState(this.state,m)}coalesceChanges(l,m){const v={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const k={};for(const E in this.stateChanges[_])this.state[_][E]||(this.state[_][E]={}),a.e(this.state[_][E],this.stateChanges[_][E]),k[E]=this.state[_][E];v[_]=k}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const k={};if(this.deletedStates[_]===null)for(const E in this.state[_])k[E]={},this.state[_][E]={};else for(const E in this.deletedStates[_]){if(this.deletedStates[_][E]===null)this.state[_][E]={};else for(const M of Object.keys(this.deletedStates[_][E]))delete this.state[_][E][M];k[E]=this.state[_][E]}v[_]=v[_]||{},a.e(v[_],k)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(const _ in l)l[_].setFeatureState(v,m)}}class Kt extends a.E{constructor(l,m,v){super(),this.id=l,this.dispatcher=v,this.on("data",_=>this._dataHandler(_)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((_,k,E,M)=>{const B=new(Tt(k.type))(_,k,E,M);if(B.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${B.id}`);return B})(l,m,v,this),this._tiles={},this._cache=new yt(0,_=>this._unloadTile(_)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new _n,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const m=this._tiles[l];if(m.state!=="loaded"&&m.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,m,v){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(l),this._tileLoaded(l,m,v)}catch(_){l.state="errored",_.status!==404?this._source.fire(new a.j(_,{tile:l})):this.update(this.transform,this.terrain)}})}_unloadTile(l){this._source.unloadTile&&this._source.unloadTile(l)}_abortTile(l){this._source.abortTile&&this._source.abortTile(l),this._source.fire(new a.k("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const m in this._tiles){const v=this._tiles[m];v.upload(l),v.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(tr).map(l=>l.key)}getRenderableIds(l){const m=[];for(const v in this._tiles)this._isIdRenderable(v,l)&&m.push(this._tiles[v]);return l?m.sort((v,_)=>{const k=v.tileID,E=_.tileID,M=new a.P(k.canonical.x,k.canonical.y)._rotate(this.transform.angle),B=new a.P(E.canonical.x,E.canonical.y)._rotate(this.transform.angle);return k.overscaledZ-E.overscaledZ||B.y-M.y||B.x-M.x}).map(v=>v.tileID.key):m.map(v=>v.tileID).sort(tr).map(v=>v.key)}hasRenderableParent(l){const m=this.findLoadedParent(l,0);return!!m&&this._isIdRenderable(m.tileID.key)}_isIdRenderable(l,m){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(m||!this._tiles[l].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(l,"reloading")}}_reloadTile(l,m){return a._(this,void 0,void 0,function*(){const v=this._tiles[l];v&&(v.state!=="loading"&&(v.state=m),yield this._loadTile(v,l,m))})}_tileLoaded(l,m,v){l.timeAdded=y.now(),v==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(m,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const m=this.getRenderableIds();for(let _=0;_<m.length;_++){const k=m[_];if(l.neighboringTiles&&l.neighboringTiles[k]){const E=this.getTileByID(k);v(l,E),v(E,l)}}function v(_,k){_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let E=k.tileID.canonical.x-_.tileID.canonical.x;const M=k.tileID.canonical.y-_.tileID.canonical.y,B=Math.pow(2,_.tileID.canonical.z),W=k.tileID.key;E===0&&M===0||Math.abs(M)>1||(Math.abs(E)>1&&(Math.abs(E+B)===1?E+=B:Math.abs(E-B)===1&&(E-=B)),k.dem&&_.dem&&(_.dem.backfillBorder(k.dem,E,M),_.neighboringTiles&&_.neighboringTiles[W]&&(_.neighboringTiles[W].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,m,v,_){for(const k in this._tiles){let E=this._tiles[k];if(_[k]||!E.hasData()||E.tileID.overscaledZ<=m||E.tileID.overscaledZ>v)continue;let M=E.tileID;for(;E&&E.tileID.overscaledZ>m+1;){const W=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[W.key],E&&E.hasData()&&(M=W)}let B=M;for(;B.overscaledZ>m;)if(B=B.scaledTo(B.overscaledZ-1),l[B.key]){_[M.key]=M;break}}}findLoadedParent(l,m){if(l.key in this._loadedParentTiles){const v=this._loadedParentTiles[l.key];return v&&v.tileID.overscaledZ>=m?v:null}for(let v=l.overscaledZ-1;v>=m;v--){const _=l.scaledTo(v),k=this._getLoadedTile(_);if(k)return k}}findLoadedSibling(l){return this._getLoadedTile(l)}_getLoadedTile(l){const m=this._tiles[l.key];return m&&m.hasData()?m:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const m=Math.ceil(l.width/this._source.tileSize)+1,v=Math.ceil(l.height/this._source.tileSize)+1,_=Math.floor(m*v*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(k)}handleWrapJump(l){const m=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,m){const v={};for(const _ in this._tiles){const k=this._tiles[_];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+m),v[k.tileID.key]=k}this._tiles=v;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}_updateCoveredAndRetainedTiles(l,m,v,_,k,E){const M={},B={},W=Object.keys(l),Z=y.now();for(const Y of W){const le=l[Y],he=this._tiles[Y];if(!he||he.fadeEndTime!==0&&he.fadeEndTime<=Z)continue;const fe=this.findLoadedParent(le,m),be=this.findLoadedSibling(le),je=fe||be||null;je&&(this._addTile(je.tileID),M[je.tileID.key]=je.tileID),B[Y]=le}this._retainLoadedChildren(B,_,v,l);for(const Y in M)l[Y]||(this._coveredTiles[Y]=!0,l[Y]=M[Y]);if(E){const Y={},le={};for(const he of k)this._tiles[he.key].hasData()?Y[he.key]=he:le[he.key]=he;for(const he in le){const fe=le[he].children(this._source.maxzoom);this._tiles[fe[0].key]&&this._tiles[fe[1].key]&&this._tiles[fe[2].key]&&this._tiles[fe[3].key]&&(Y[fe[0].key]=l[fe[0].key]=fe[0],Y[fe[1].key]=l[fe[1].key]=fe[1],Y[fe[2].key]=l[fe[2].key]=fe[2],Y[fe[3].key]=l[fe[3].key]=fe[3],delete le[he])}for(const he in le){const fe=le[he],be=this.findLoadedParent(fe,this._source.minzoom),je=this.findLoadedSibling(fe),Ae=be||je||null;if(Ae){Y[Ae.tileID.key]=l[Ae.tileID.key]=Ae.tileID;for(const De in Y)Y[De].isChildOf(Ae.tileID)&&delete Y[De]}}for(const he in this._tiles)Y[he]||(this._coveredTiles[he]=!0)}}update(l,m){if(!this._sourceLoaded||this._paused)return;let v;this.transform=l,this.terrain=m,this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(Z=>new a.S(Z.canonical.z,Z.wrap,Z.canonical.z,Z.canonical.x,Z.canonical.y)):(v=l.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:m}),this._source.hasTile&&(v=v.filter(Z=>this._source.hasTile(Z)))):v=[];const _=l.coveringZoomLevel(this._source),k=Math.max(_-Kt.maxOverzooming,this._source.minzoom),E=Math.max(_+Kt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Z={};for(const Y of v)if(Y.canonical.z>this._source.minzoom){const le=Y.scaledTo(Y.canonical.z-1);Z[le.key]=le;const he=Y.scaledTo(Math.max(this._source.minzoom,Math.min(Y.canonical.z,5)));Z[he.key]=he}v=v.concat(Object.values(Z))}const M=v.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,M&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const B=this._updateRetainedTiles(v,_);qr(this._source.type)&&this._updateCoveredAndRetainedTiles(B,k,E,_,v,m);for(const Z in B)this._tiles[Z].clearFadeHold();const W=a.ab(this._tiles,B);for(const Z of W){const Y=this._tiles[Z];Y.hasSymbolBuckets&&!Y.holdingForFade()?Y.setHoldDuration(this.map._fadeDuration):Y.hasSymbolBuckets&&!Y.symbolFadeFinished()||this._removeTile(Z)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,m){var v;const _={},k={},E=Math.max(m-Kt.maxOverzooming,this._source.minzoom),M=Math.max(m+Kt.maxUnderzooming,this._source.minzoom),B={};for(const W of l){const Z=this._addTile(W);_[W.key]=W,Z.hasData()||m<this._source.maxzoom&&(B[W.key]=W)}this._retainLoadedChildren(B,m,M,_);for(const W of l){let Z=this._tiles[W.key];if(Z.hasData())continue;if(m+1>this._source.maxzoom){const le=W.children(this._source.maxzoom)[0],he=this.getTile(le);if(he&&he.hasData()){_[le.key]=le;continue}}else{const le=W.children(this._source.maxzoom);if(_[le[0].key]&&_[le[1].key]&&_[le[2].key]&&_[le[3].key])continue}let Y=Z.wasRequested();for(let le=W.overscaledZ-1;le>=E;--le){const he=W.scaledTo(le);if(k[he.key])break;if(k[he.key]=!0,Z=this.getTile(he),!Z&&Y&&(Z=this._addTile(he)),Z){const fe=Z.hasData();if((fe||!(!((v=this.map)===null||v===void 0)&&v.cancelPendingTileRequestsWhileZooming)||Y)&&(_[he.key]=he),Y=Z.wasRequested(),fe)break}}}return _}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const m=[];let v,_=this._tiles[l].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){v=this._loadedParentTiles[_.key];break}m.push(_.key);const k=_.scaledTo(_.overscaledZ-1);if(v=this._getLoadedTile(k),v)break;_=k}for(const k of m)this._loadedParentTiles[k]=v}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const l in this._tiles){const m=this._tiles[l].tileID,v=this._getLoadedTile(m);this._loadedSiblingTiles[m.key]=v}}_addTile(l){let m=this._tiles[l.key];if(m)return m;m=this._cache.getAndRemove(l),m&&(this._setTileReloadTimer(l.key,m),m.tileID=l,this._state.initializeTileState(m,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,m)));const v=m;return m||(m=new ir(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(m,l.key,m.state)),m.uses++,this._tiles[l.key]=m,v||this._source.fire(new a.k("dataloading",{tile:m,coord:m.tileID,dataType:"source"})),m}_setTileReloadTimer(l,m){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const v=m.getExpiryTimeout();v&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},v))}_removeTile(l){const m=this._tiles[l];m&&(m.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),m.uses>0||(m.hasData()&&m.state!=="reloading"?this._cache.add(m.tileID,m,m.getExpiryTimeout()):(m.aborted=!0,this._abortTile(m),this._unloadTile(m))))}_dataHandler(l){const m=l.sourceDataType;l.dataType==="source"&&m==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&l.dataType==="source"&&m==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,m,v){const _=[],k=this.transform;if(!k)return _;const E=v?k.getCameraQueryGeometry(l):l,M=l.map(fe=>k.pointCoordinate(fe,this.terrain)),B=E.map(fe=>k.pointCoordinate(fe,this.terrain)),W=this.getIds();let Z=1/0,Y=1/0,le=-1/0,he=-1/0;for(const fe of B)Z=Math.min(Z,fe.x),Y=Math.min(Y,fe.y),le=Math.max(le,fe.x),he=Math.max(he,fe.y);for(let fe=0;fe<W.length;fe++){const be=this._tiles[W[fe]];if(be.holdingForFade())continue;const je=be.tileID,Ae=Math.pow(2,k.zoom-be.tileID.overscaledZ),De=m*be.queryPadding*a.X/be.tileSize/Ae,ge=[je.getTilePoint(new a.Z(Z,Y)),je.getTilePoint(new a.Z(le,he))];if(ge[0].x-De<a.X&&ge[0].y-De<a.X&&ge[1].x+De>=0&&ge[1].y+De>=0){const Ue=M.map(et=>je.getTilePoint(et)),Xe=B.map(et=>je.getTilePoint(et));_.push({tile:be,tileID:je,queryGeometry:Ue,cameraQueryGeometry:Xe,scale:Ae})}}return _}getVisibleCoordinates(l){const m=this.getRenderableIds(l).map(v=>this._tiles[v].tileID);for(const v of m)v.posMatrix=this.transform.calculatePosMatrix(v.toUnwrapped());return m}hasTransition(){if(this._source.hasTransition())return!0;if(qr(this._source.type)){const l=y.now();for(const m in this._tiles)if(this._tiles[m].fadeEndTime>=l)return!0}return!1}setFeatureState(l,m,v){this._state.updateState(l=l||"_geojsonTileLayer",m,v)}removeFeatureState(l,m,v){this._state.removeFeatureState(l=l||"_geojsonTileLayer",m,v)}getFeatureState(l,m){return this._state.getState(l=l||"_geojsonTileLayer",m)}setDependencies(l,m,v){const _=this._tiles[l];_&&_.setDependencies(m,v)}reloadTilesForDependencies(l,m){for(const v in this._tiles)this._tiles[v].hasDependency(l,m)&&this._reloadTile(v,"reloading");this._cache.filter(v=>!v.hasDependency(l,m))}}function tr(C,l){const m=Math.abs(2*C.wrap)-+(C.wrap<0),v=Math.abs(2*l.wrap)-+(l.wrap<0);return C.overscaledZ-l.overscaledZ||v-m||l.canonical.y-C.canonical.y||l.canonical.x-C.canonical.x}function qr(C){return C==="raster"||C==="image"||C==="video"}Kt.maxOverzooming=10,Kt.maxUnderzooming=3;class sn{constructor(l,m){this.reset(l,m)}reset(l,m){this.points=l||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.ac(l,0,1);let m=1,v=this._distances[m];const _=l*this.paddedLength+this.padding;for(;v<_&&m<this._distances.length;)v=this._distances[++m];const k=m-1,E=this._distances[k],M=v-E,B=M>0?(_-E)/M:0;return this.points[k].mult(1-B).add(this.points[m].mult(B))}}function Wi(C,l){let m=!0;return C==="always"||C!=="never"&&l!=="never"||(m=!1),m}class Rs{constructor(l,m,v){const _=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(l/v),this.yCellCount=Math.ceil(m/v);for(let E=0;E<this.xCellCount*this.yCellCount;E++)_.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=m,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,m,v,_,k){this._forEachCell(m,v,_,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(_),this.bboxes.push(k)}insertCircle(l,m,v,_){this._forEachCell(m-_,v-_,m+_,v+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(m),this.circles.push(v),this.circles.push(_)}_insertBoxCell(l,m,v,_,k,E){this.boxCells[k].push(E)}_insertCircleCell(l,m,v,_,k,E){this.circleCells[k].push(E)}_query(l,m,v,_,k,E,M){if(v<0||l>this.width||_<0||m>this.height)return[];const B=[];if(l<=0&&m<=0&&this.width<=v&&this.height<=_){if(k)return[{key:null,x1:l,y1:m,x2:v,y2:_}];for(let W=0;W<this.boxKeys.length;W++)B.push({key:this.boxKeys[W],x1:this.bboxes[4*W],y1:this.bboxes[4*W+1],x2:this.bboxes[4*W+2],y2:this.bboxes[4*W+3]});for(let W=0;W<this.circleKeys.length;W++){const Z=this.circles[3*W],Y=this.circles[3*W+1],le=this.circles[3*W+2];B.push({key:this.circleKeys[W],x1:Z-le,y1:Y-le,x2:Z+le,y2:Y+le})}}else this._forEachCell(l,m,v,_,this._queryCell,B,{hitTest:k,overlapMode:E,seenUids:{box:{},circle:{}}},M);return B}query(l,m,v,_){return this._query(l,m,v,_,!1,null)}hitTest(l,m,v,_,k,E){return this._query(l,m,v,_,!0,k,E).length>0}hitTestCircle(l,m,v,_,k){const E=l-v,M=l+v,B=m-v,W=m+v;if(M<0||E>this.width||W<0||B>this.height)return!1;const Z=[];return this._forEachCell(E,B,M,W,this._queryCellCircle,Z,{hitTest:!0,overlapMode:_,circle:{x:l,y:m,radius:v},seenUids:{box:{},circle:{}}},k),Z.length>0}_queryCell(l,m,v,_,k,E,M,B){const{seenUids:W,hitTest:Z,overlapMode:Y}=M,le=this.boxCells[k];if(le!==null){const fe=this.bboxes;for(const be of le)if(!W.box[be]){W.box[be]=!0;const je=4*be,Ae=this.boxKeys[be];if(l<=fe[je+2]&&m<=fe[je+3]&&v>=fe[je+0]&&_>=fe[je+1]&&(!B||B(Ae))&&(!Z||!Wi(Y,Ae.overlapMode))&&(E.push({key:Ae,x1:fe[je],y1:fe[je+1],x2:fe[je+2],y2:fe[je+3]}),Z))return!0}}const he=this.circleCells[k];if(he!==null){const fe=this.circles;for(const be of he)if(!W.circle[be]){W.circle[be]=!0;const je=3*be,Ae=this.circleKeys[be];if(this._circleAndRectCollide(fe[je],fe[je+1],fe[je+2],l,m,v,_)&&(!B||B(Ae))&&(!Z||!Wi(Y,Ae.overlapMode))){const De=fe[je],ge=fe[je+1],Ue=fe[je+2];if(E.push({key:Ae,x1:De-Ue,y1:ge-Ue,x2:De+Ue,y2:ge+Ue}),Z)return!0}}}return!1}_queryCellCircle(l,m,v,_,k,E,M,B){const{circle:W,seenUids:Z,overlapMode:Y}=M,le=this.boxCells[k];if(le!==null){const fe=this.bboxes;for(const be of le)if(!Z.box[be]){Z.box[be]=!0;const je=4*be,Ae=this.boxKeys[be];if(this._circleAndRectCollide(W.x,W.y,W.radius,fe[je+0],fe[je+1],fe[je+2],fe[je+3])&&(!B||B(Ae))&&!Wi(Y,Ae.overlapMode))return E.push(!0),!0}}const he=this.circleCells[k];if(he!==null){const fe=this.circles;for(const be of he)if(!Z.circle[be]){Z.circle[be]=!0;const je=3*be,Ae=this.circleKeys[be];if(this._circlesCollide(fe[je],fe[je+1],fe[je+2],W.x,W.y,W.radius)&&(!B||B(Ae))&&!Wi(Y,Ae.overlapMode))return E.push(!0),!0}}}_forEachCell(l,m,v,_,k,E,M,B){const W=this._convertToXCellCoord(l),Z=this._convertToYCellCoord(m),Y=this._convertToXCellCoord(v),le=this._convertToYCellCoord(_);for(let he=W;he<=Y;he++)for(let fe=Z;fe<=le;fe++)if(k.call(this,l,m,v,_,this.xCellCount*fe+he,E,M,B))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,m,v,_,k,E){const M=_-l,B=k-m,W=v+E;return W*W>M*M+B*B}_circleAndRectCollide(l,m,v,_,k,E,M){const B=(E-_)/2,W=Math.abs(l-(_+B));if(W>B+v)return!1;const Z=(M-k)/2,Y=Math.abs(m-(k+Z));if(Y>Z+v)return!1;if(W<=B||Y<=Z)return!0;const le=W-B,he=Y-Z;return le*le+he*he<=v*v}}function Ui(C,l,m,v,_){const k=a.H();return l?(a.K(k,k,[1/_,1/_,1]),m||a.ad(k,k,v.angle)):a.L(k,v.labelPlaneMatrix,C),k}function vs(C,l,m,v,_){if(l){const k=a.ae(C);return a.K(k,k,[_,_,1]),m||a.ad(k,k,-v.angle),k}return v.glCoordMatrix}function xe(C,l,m,v){let _;v?(_=[C,l,v(C,l),1],a.af(_,_,m)):(_=[C,l,0,1],Xn(_,_,m));const k=_[3];return{point:new a.P(_[0]/k,_[1]/k),signedDistanceFromCamera:k,isOccluded:!1}}function U(C,l){return .5+C/l*.5}function G(C,l){return C.x>=-l[0]&&C.x<=l[0]&&C.y>=-l[1]&&C.y<=l[1]}function re(C,l,m,v,_,k,E,M,B,W,Z,Y,le,he,fe){const be=v?C.textSizeData:C.iconSizeData,je=a.ag(be,m.transform.zoom),Ae=[256/m.width*2+1,256/m.height*2+1],De=v?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;De.clear();const ge=C.lineVertexArray,Ue=v?C.text.placedSymbolArray:C.icon.placedSymbolArray,Xe=m.transform.width/m.transform.height;let et=!1;for(let mt=0;mt<Ue.length;mt++){const jt=Ue.get(mt);if(jt.hidden||jt.writingMode===a.ah.vertical&&!et){dn(jt.numGlyphs,De);continue}et=!1;const Ut=xe(jt.anchorX,jt.anchorY,l,fe);if(!G(Ut.point,Ae)){dn(jt.numGlyphs,De);continue}const Zt=U(m.transform.cameraToCenterDistance,Ut.signedDistanceFromCamera),Ft=a.ai(be,je,jt),Dt=E?Ft/Zt:Ft*Zt,pn={getElevation:fe,labelPlaneMatrix:_,lineVertexArray:ge,pitchWithMap:E,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:W,tileAnchorPoint:new a.P(jt.anchorX,jt.anchorY),unwrappedTileID:Z,width:Y,height:le,translation:he},Mn=Pe(pn,jt,Dt,!1,M,l,k,C.glyphOffsetArray,De,Xe,B);et=Mn.useVertical,(Mn.notEnoughRoom||et||Mn.needsFlipping&&Pe(pn,jt,Dt,!0,M,l,k,C.glyphOffsetArray,De,Xe,B).notEnoughRoom)&&dn(jt.numGlyphs,De)}v?C.text.dynamicLayoutVertexBuffer.updateData(De):C.icon.dynamicLayoutVertexBuffer.updateData(De)}function pe(C,l,m,v,_,k,E,M){const B=k.glyphStartIndex+k.numGlyphs,W=k.lineStartIndex,Z=k.lineStartIndex+k.lineLength,Y=l.getoffsetX(k.glyphStartIndex),le=l.getoffsetX(B-1),he=ht(C*Y,m,v,_,k.segment,W,Z,M,E);if(!he)return null;const fe=ht(C*le,m,v,_,k.segment,W,Z,M,E);return fe?M.projectionCache.anyProjectionOccluded?null:{first:he,last:fe}:null}function Se(C,l,m,v){return C===a.ah.horizontal&&Math.abs(m.y-l.y)>Math.abs(m.x-l.x)*v?{useVertical:!0}:(C===a.ah.vertical?l.y<m.y:l.x>m.x)?{needsFlipping:!0}:null}function Pe(C,l,m,v,_,k,E,M,B,W,Z){const Y=m/24,le=l.lineOffsetX*Y,he=l.lineOffsetY*Y;let fe;if(l.numGlyphs>1){const be=l.glyphStartIndex+l.numGlyphs,je=l.lineStartIndex,Ae=l.lineStartIndex+l.lineLength,De=pe(Y,M,le,he,v,l,Z,C);if(!De)return{notEnoughRoom:!0};const ge=xe(De.first.point.x,De.first.point.y,E,C.getElevation).point,Ue=xe(De.last.point.x,De.last.point.y,E,C.getElevation).point;if(_&&!v){const Xe=Se(l.writingMode,ge,Ue,W);if(Xe)return Xe}fe=[De.first];for(let Xe=l.glyphStartIndex+1;Xe<be-1;Xe++)fe.push(ht(Y*M.getoffsetX(Xe),le,he,v,l.segment,je,Ae,C,Z));fe.push(De.last)}else{if(_&&!v){const je=xe(C.tileAnchorPoint.x,C.tileAnchorPoint.y,k,C.getElevation).point,Ae=l.lineStartIndex+l.segment+1,De=new a.P(C.lineVertexArray.getx(Ae),C.lineVertexArray.gety(Ae)),ge=xe(De.x,De.y,k,C.getElevation),Ue=ge.signedDistanceFromCamera>0?ge.point:function(et,mt,jt,Ut,Zt,Ft){return qe(et,mt,jt,1,Zt,Ft)}(C.tileAnchorPoint,De,je,0,k,C),Xe=Se(l.writingMode,je,Ue,W);if(Xe)return Xe}const be=ht(Y*M.getoffsetX(l.glyphStartIndex),le,he,v,l.segment,l.lineStartIndex,l.lineStartIndex+l.lineLength,C,Z);if(!be||C.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};fe=[be]}for(const be of fe)a.aj(B,be.point,be.angle);return{}}function qe(C,l,m,v,_,k){const E=C.add(C.sub(l)._unit()),M=_!==void 0?xe(E.x,E.y,_,k.getElevation).point:st(E.x,E.y,k).point,B=m.sub(M);return m.add(B._mult(v/B.mag()))}function ke(C,l,m){const v=l.projectionCache;if(v.projections[C])return v.projections[C];const _=new a.P(l.lineVertexArray.getx(C),l.lineVertexArray.gety(C)),k=st(_.x,_.y,l);if(k.signedDistanceFromCamera>0)return v.projections[C]=k.point,v.anyProjectionOccluded=v.anyProjectionOccluded||k.isOccluded,k.point;const E=C-m.direction;return function(M,B,W,Z,Y){return qe(M,B,W,Z,void 0,Y)}(m.distanceFromAnchor===0?l.tileAnchorPoint:new a.P(l.lineVertexArray.getx(E),l.lineVertexArray.gety(E)),_,m.previousVertex,m.absOffsetX-m.distanceFromAnchor+1,l)}function st(C,l,m){const v=C+m.translation[0],_=l+m.translation[1];let k;return!m.pitchWithMap&&m.projection.useSpecialProjectionForSymbols?(k=m.projection.projectTileCoordinates(v,_,m.unwrappedTileID,m.getElevation),k.point.x=(.5*k.point.x+.5)*m.width,k.point.y=(.5*-k.point.y+.5)*m.height):(k=xe(v,_,m.labelPlaneMatrix,m.getElevation),k.isOccluded=!1),k}function ft(C,l,m){return C._unit()._perp()._mult(l*m)}function _e(C,l,m,v,_,k,E,M,B){if(M.projectionCache.offsets[C])return M.projectionCache.offsets[C];const W=m.add(l);if(C+B.direction<v||C+B.direction>=_)return M.projectionCache.offsets[C]=W,W;const Z=ke(C+B.direction,M,B),Y=ft(Z.sub(m),E,B.direction),le=m.add(Y),he=Z.add(Y);return M.projectionCache.offsets[C]=a.ak(k,W,le,he)||W,M.projectionCache.offsets[C]}function ht(C,l,m,v,_,k,E,M,B){const W=v?C-l:C+l;let Z=W>0?1:-1,Y=0;v&&(Z*=-1,Y=Math.PI),Z<0&&(Y+=Math.PI);let le,he=Z>0?k+_:k+_+1;M.projectionCache.cachedAnchorPoint?le=M.projectionCache.cachedAnchorPoint:(le=st(M.tileAnchorPoint.x,M.tileAnchorPoint.y,M).point,M.projectionCache.cachedAnchorPoint=le);let fe,be,je=le,Ae=le,De=0,ge=0;const Ue=Math.abs(W),Xe=[];let et;for(;De+ge<=Ue;){if(he+=Z,he<k||he>=E)return null;De+=ge,Ae=je,be=fe;const Ut={absOffsetX:Ue,direction:Z,distanceFromAnchor:De,previousVertex:Ae};if(je=ke(he,M,Ut),m===0)Xe.push(Ae),et=je.sub(Ae);else{let Zt;const Ft=je.sub(Ae);Zt=Ft.mag()===0?ft(ke(he+Z,M,Ut).sub(je),m,Z):ft(Ft,m,Z),be||(be=Ae.add(Zt)),fe=_e(he,Zt,je,k,E,be,m,M,Ut),Xe.push(be),et=fe.sub(be)}ge=et.mag()}const mt=et._mult((Ue-De)/ge)._add(be||Ae),jt=Y+Math.atan2(je.y-Ae.y,je.x-Ae.x);return Xe.push(mt),{point:mt,angle:B?jt:0,path:Xe}}const Wt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function dn(C,l){for(let m=0;m<C;m++){const v=l.length;l.resize(v+4),l.float32.set(Wt,3*v)}}function Xn(C,l,m){const v=l[0],_=l[1];return C[0]=m[0]*v+m[4]*_+m[12],C[1]=m[1]*v+m[5]*_+m[13],C[3]=m[3]*v+m[7]*_+m[15],C}const Nn=100;class cr{constructor(l,m,v=new Rs(l.width+200,l.height+200,25),_=new Rs(l.width+200,l.height+200,25)){this.transform=l,this.mapProjection=m,this.grid=v,this.ignoredGrid=_,this.pitchFactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Nn,this.screenBottomBoundary=l.height+Nn,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,m,v,_,k,E,M,B,W,Z,Y){const le=l.anchorPointX+B[0],he=l.anchorPointY+B[1],fe=this.projectAndGetPerspectiveRatio(_,le,he,k,Z),be=v*fe.perspectiveRatio;let je;if(E||M)je=this._projectCollisionBox(l,be,_,k,E,M,B,fe,Z,Y);else{const Xe=fe.point.x+(Y?Y.x*be:0),et=fe.point.y+(Y?Y.y*be:0);je={allPointsOccluded:!1,box:[Xe+l.x1*be,et+l.y1*be,Xe+l.x2*be,et+l.y2*be]}}const[Ae,De,ge,Ue]=je.box;return this.mapProjection.useSpecialProjectionForSymbols&&(E?je.allPointsOccluded:this.mapProjection.isOccluded(le,he,k))||fe.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(Ae,De,ge,Ue)||m!=="always"&&this.grid.hitTest(Ae,De,ge,Ue,m,W)?{box:[Ae,De,ge,Ue],placeable:!1,offscreen:!1}:{box:[Ae,De,ge,Ue],placeable:!0,offscreen:this.isOffscreen(Ae,De,ge,Ue)}}placeCollisionCircles(l,m,v,_,k,E,M,B,W,Z,Y,le,he,fe,be,je){const Ae=[],De=new a.P(m.anchorX,m.anchorY),ge=this.getPerspectiveRatio(E,De.x,De.y,M,je),Ue=(Y?k/ge:k*ge)/a.ap,Xe={getElevation:je,labelPlaneMatrix:B,lineVertexArray:v,pitchWithMap:Y,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:De,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:be},et=pe(Ue,_,m.lineOffsetX*Ue,m.lineOffsetY*Ue,!1,m,!1,Xe);let mt=!1,jt=!1,Ut=!0;if(et){const Zt=.5*he*ge+fe,Ft=new a.P(-100,-100),Dt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),pn=new sn,Mn=et.first,Nt=et.last;let Ht=[];for(let Qn=Mn.path.length-1;Qn>=1;Qn--)Ht.push(Mn.path[Qn]);for(let Qn=1;Qn<Nt.path.length;Qn++)Ht.push(Nt.path[Qn]);const En=2.5*Zt;if(W){const Qn=this.projectPathToScreenSpace(Ht,Xe,W);Ht=Qn.some(nr=>nr.signedDistanceFromCamera<=0)?[]:Qn.map(nr=>nr.point)}let ti=[];if(Ht.length>0){const Qn=Ht[0].clone(),nr=Ht[0].clone();for(let ni=1;ni<Ht.length;ni++)Qn.x=Math.min(Qn.x,Ht[ni].x),Qn.y=Math.min(Qn.y,Ht[ni].y),nr.x=Math.max(nr.x,Ht[ni].x),nr.y=Math.max(nr.y,Ht[ni].y);ti=Qn.x>=Ft.x&&nr.x<=Dt.x&&Qn.y>=Ft.y&&nr.y<=Dt.y?[Ht]:nr.x<Ft.x||Qn.x>Dt.x||nr.y<Ft.y||Qn.y>Dt.y?[]:a.al([Ht],Ft.x,Ft.y,Dt.x,Dt.y)}for(const Qn of ti){pn.reset(Qn,.25*Zt);let nr=0;nr=pn.length<=.5*Zt?1:Math.ceil(pn.paddedLength/En)+1;for(let ni=0;ni<nr;ni++){const Ns=ni/Math.max(nr-1,1),el=pn.lerp(Ns),ri=el.x+Nn,So=el.y+Nn;Ae.push(ri,So,Zt,0);const no=ri-Zt,Vs=So-Zt,ro=ri+Zt,Rl=So+Zt;if(Ut=Ut&&this.isOffscreen(no,Vs,ro,Rl),jt=jt||this.isInsideGrid(no,Vs,ro,Rl),l!=="always"&&this.grid.hitTestCircle(ri,So,Zt,l,le)&&(mt=!0,!Z))return{circles:[],offscreen:!1,collisionDetected:mt}}}}return{circles:!Z&&mt||!jt||ge<this.perspectiveRatioCutoff?[]:Ae,offscreen:Ut,collisionDetected:mt}}projectPathToScreenSpace(l,m,v){return l.map(_=>xe(_.x,_.y,v,m.getElevation))}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[];let v=1/0,_=1/0,k=-1/0,E=-1/0;for(const Z of l){const Y=new a.P(Z.x+Nn,Z.y+Nn);v=Math.min(v,Y.x),_=Math.min(_,Y.y),k=Math.max(k,Y.x),E=Math.max(E,Y.y),m.push(Y)}const M=this.grid.query(v,_,k,E).concat(this.ignoredGrid.query(v,_,k,E)),B={},W={};for(const Z of M){const Y=Z.key;if(B[Y.bucketInstanceId]===void 0&&(B[Y.bucketInstanceId]={}),B[Y.bucketInstanceId][Y.featureIndex])continue;const le=[new a.P(Z.x1,Z.y1),new a.P(Z.x2,Z.y1),new a.P(Z.x2,Z.y2),new a.P(Z.x1,Z.y2)];a.am(m,le)&&(B[Y.bucketInstanceId][Y.featureIndex]=!0,W[Y.bucketInstanceId]===void 0&&(W[Y.bucketInstanceId]=[]),W[Y.bucketInstanceId].push(Y.featureIndex))}return W}insertCollisionBox(l,m,v,_,k,E){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:k,collisionGroupID:E,overlapMode:m},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,m,v,_,k,E){const M=v?this.ignoredGrid:this.grid,B={bucketInstanceId:_,featureIndex:k,collisionGroupID:E,overlapMode:m};for(let W=0;W<l.length;W+=4)M.insertCircle(B,l[W],l[W+1],l[W+2])}projectAndGetPerspectiveRatio(l,m,v,_,k){let E;k?(E=[m,v,k(m,v),1],a.af(E,E,l)):(E=[m,v,0,1],Xn(E,E,l));const M=E[3];return{point:new a.P((E[0]/M+1)/2*this.transform.width+Nn,(-E[1]/M+1)/2*this.transform.height+Nn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/M*.5,isOccluded:!1,signedDistanceFromCamera:M}}getPerspectiveRatio(l,m,v,_,k){const E=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(m,v,_,k):xe(m,v,l,k);return .5+this.transform.cameraToCenterDistance/E.signedDistanceFromCamera*.5}isOffscreen(l,m,v,_){return v<Nn||l>=this.screenRightBoundary||_<Nn||m>this.screenBottomBoundary}isInsideGrid(l,m,v,_){return v>=0&&l<this.gridRightBoundary&&_>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const l=a.an([]);return a.J(l,l,[-100,-100,0]),l}_projectCollisionBox(l,m,v,_,k,E,M,B,W,Z){let Y=new a.P(1,0),le=new a.P(0,1);const he=new a.P(l.anchorPointX+M[0],l.anchorPointY+M[1]);if(E&&!k){const Ut=this.projectAndGetPerspectiveRatio(v,he.x+1,he.y,_,W).point.sub(B.point).unit(),Zt=Math.atan(Ut.y/Ut.x)+(Ut.x<0?Math.PI:0),Ft=Math.sin(Zt),Dt=Math.cos(Zt);Y=new a.P(Dt,Ft),le=new a.P(-Ft,Dt)}else if(!E&&k){const Ut=-this.transform.angle,Zt=Math.sin(Ut),Ft=Math.cos(Ut);Y=new a.P(Ft,Zt),le=new a.P(-Zt,Ft)}let fe=B.point,be=m;if(k){fe=he;const Ut=this.transform.zoom-Math.floor(this.transform.zoom);be=Math.pow(2,-Ut),be*=this.mapProjection.getPitchedTextCorrection(this.transform,he,_),Z||(be*=a.ac(.5+B.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}Z&&(fe=fe.add(Y.mult(Z.x*be)).add(le.mult(Z.y*be)));const je=l.x1*be,Ae=l.x2*be,De=(je+Ae)/2,ge=l.y1*be,Ue=l.y2*be,Xe=(ge+Ue)/2,et=[{offsetX:je,offsetY:ge},{offsetX:De,offsetY:ge},{offsetX:Ae,offsetY:ge},{offsetX:Ae,offsetY:Xe},{offsetX:Ae,offsetY:Ue},{offsetX:De,offsetY:Ue},{offsetX:je,offsetY:Ue},{offsetX:je,offsetY:Xe}];let mt=[];for(const{offsetX:Ut,offsetY:Zt}of et)mt.push(new a.P(fe.x+Y.x*Ut+le.x*Zt,fe.y+Y.y*Ut+le.y*Zt));let jt=!1;if(k){const Ut=mt.map(Zt=>this.projectAndGetPerspectiveRatio(v,Zt.x,Zt.y,_,W));jt=Ut.some(Zt=>!Zt.isOccluded),mt=Ut.map(Zt=>Zt.point)}else jt=!0;return{box:a.ao(mt),allPointsOccluded:!jt}}}function Un(C,l,m){return l*(a.X/(C.tileSize*Math.pow(2,m-C.tileID.overscaledZ)))}class wi{constructor(l,m,v,_){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?m:-m))):_&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class oi{constructor(l,m,v,_,k){this.text=new wi(l?l.text:null,m,v,k),this.icon=new wi(l?l.icon:null,m,_,k)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class qn{constructor(l,m,v){this.text=l,this.icon=m,this.skipFade=v}}class Tr{constructor(){this.invProjMatrix=a.H(),this.viewportMatrix=a.H(),this.circles=[]}}class Gr{constructor(l,m,v,_,k){this.bucketInstanceId=l,this.featureIndex=m,this.sourceLayerIndex=v,this.bucketIndex=_,this.tileID=k}}class Fi{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const m=++this.maxGroupID;this.collisionGroups[l]={ID:m,predicate:v=>v.collisionGroupID===m}}return this.collisionGroups[l]}}function Ei(C,l,m,v,_){const{horizontalAlign:k,verticalAlign:E}=a.au(C);return new a.P(-(k-.5)*l+v[0]*_,-(E-.5)*m+v[1]*_)}class bs{constructor(l,m,v,_,k,E){this.transform=l.clone(),this.terrain=v,this.collisionIndex=new cr(this.transform,m),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new Fi(k),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(l){const m=this.terrain;return m?(v,_)=>m.getElevation(l,v,_):null}getBucketParts(l,m,v,_){const k=v.getBucket(m),E=v.latestFeatureIndex;if(!k||!E||m.id!==k.layerIds[0])return;const M=v.collisionBoxArray,B=k.layers[0].layout,W=k.layers[0].paint,Z=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),Y=v.tileSize/a.X,le=v.tileID.toUnwrapped(),he=this.transform.calculatePosMatrix(le),fe=B.get("text-pitch-alignment")==="map",be=B.get("text-rotation-alignment")==="map",je=Un(v,1,this.transform.zoom),Ae=this.collisionIndex.mapProjection.translatePosition(this.transform,v,W.get("text-translate"),W.get("text-translate-anchor")),De=this.collisionIndex.mapProjection.translatePosition(this.transform,v,W.get("icon-translate"),W.get("icon-translate-anchor")),ge=Ui(he,fe,be,this.transform,je);let Ue=null;if(fe){const et=vs(he,fe,be,this.transform,je);Ue=a.L([],this.transform.labelPlaneMatrix,et)}this.retainedQueryData[k.bucketInstanceId]=new Gr(k.bucketInstanceId,E,k.sourceLayerIndex,k.index,v.tileID);const Xe={bucket:k,layout:B,translationText:Ae,translationIcon:De,posMatrix:he,unwrappedTileID:le,textLabelPlaneMatrix:ge,labelToScreenMatrix:Ue,scale:Z,textPixelRatio:Y,holdingForFade:v.holdingForFade(),collisionBoxArray:M,partiallyEvaluatedTextSize:a.ag(k.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(_)for(const et of k.sortKeyRanges){const{sortKey:mt,symbolInstanceStart:jt,symbolInstanceEnd:Ut}=et;l.push({sortKey:mt,symbolInstanceStart:jt,symbolInstanceEnd:Ut,parameters:Xe})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:Xe})}attemptAnchorPlacement(l,m,v,_,k,E,M,B,W,Z,Y,le,he,fe,be,je,Ae,De,ge){const Ue=a.aq[l.textAnchor],Xe=[l.textOffset0,l.textOffset1],et=Ei(Ue,v,_,Xe,k),mt=this.collisionIndex.placeCollisionBox(m,le,B,W,Z,M,E,je,Y.predicate,ge,et);if((!De||this.collisionIndex.placeCollisionBox(De,le,B,W,Z,M,E,Ae,Y.predicate,ge,et).placeable)&&mt.placeable){let jt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[he.crossTileID]&&this.prevPlacement.placements[he.crossTileID]&&this.prevPlacement.placements[he.crossTileID].text&&(jt=this.prevPlacement.variableOffsets[he.crossTileID].anchor),he.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[he.crossTileID]={textOffset:Xe,width:v,height:_,anchor:Ue,textBoxScale:k,prevAnchor:jt},this.markUsedJustification(fe,Ue,he,be),fe.allowVerticalPlacement&&(this.markUsedOrientation(fe,be,he),this.placedOrientations[he.crossTileID]=be),{shift:et,placedGlyphBoxes:mt}}}placeLayerBucketPart(l,m,v){const{bucket:_,layout:k,translationText:E,translationIcon:M,posMatrix:B,unwrappedTileID:W,textLabelPlaneMatrix:Z,labelToScreenMatrix:Y,textPixelRatio:le,holdingForFade:he,collisionBoxArray:fe,partiallyEvaluatedTextSize:be,collisionGroup:je}=l.parameters,Ae=k.get("text-optional"),De=k.get("icon-optional"),ge=a.ar(k,"text-overlap","text-allow-overlap"),Ue=ge==="always",Xe=a.ar(k,"icon-overlap","icon-allow-overlap"),et=Xe==="always",mt=k.get("text-rotation-alignment")==="map",jt=k.get("text-pitch-alignment")==="map",Ut=k.get("icon-text-fit")!=="none",Zt=k.get("symbol-z-order")==="viewport-y",Ft=Ue&&(et||!_.hasIconData()||De),Dt=et&&(Ue||!_.hasTextData()||Ae);!_.collisionArrays&&fe&&_.deserializeCollisionBoxes(fe);const pn=this._getTerrainElevationFunc(this.retainedQueryData[_.bucketInstanceId].tileID),Mn=(Nt,Ht,En)=>{var ti,Qn;if(m[Nt.crossTileID])return;if(he)return void(this.placements[Nt.crossTileID]=new qn(!1,!1,!1));let nr=!1,ni=!1,Ns=!0,el=null,ri={box:null,placeable:!1,offscreen:null},So={placeable:!1},no=null,Vs=null,ro=null,Rl=0,wd=0,Rg=0;Ht.textFeatureIndex?Rl=Ht.textFeatureIndex:Nt.useRuntimeCollisionCircles&&(Rl=Nt.featureIndex),Ht.verticalTextFeatureIndex&&(wd=Ht.verticalTextFeatureIndex);const Sd=Ht.textBox;if(Sd){const va=_s=>{let Ws=a.ah.horizontal;if(_.allowVerticalPlacement&&!_s&&this.prevPlacement){const Ho=this.prevPlacement.placedOrientations[Nt.crossTileID];Ho&&(this.placedOrientations[Nt.crossTileID]=Ho,Ws=Ho,this.markUsedOrientation(_,Ws,Nt))}return Ws},ba=(_s,Ws)=>{if(_.allowVerticalPlacement&&Nt.numVerticalGlyphVertices>0&&Ht.verticalTextBox){for(const Ho of _.writingModes)if(Ho===a.ah.vertical?(ri=Ws(),So=ri):ri=_s(),ri&&ri.placeable)break}else ri=_s()},su=Nt.textAnchorOffsetStartIndex,tl=Nt.textAnchorOffsetEndIndex;if(tl===su){const _s=(Ws,Ho)=>{const or=this.collisionIndex.placeCollisionBox(Ws,ge,le,B,W,jt,mt,E,je.predicate,pn);return or&&or.placeable&&(this.markUsedOrientation(_,Ho,Nt),this.placedOrientations[Nt.crossTileID]=Ho),or};ba(()=>_s(Sd,a.ah.horizontal),()=>{const Ws=Ht.verticalTextBox;return _.allowVerticalPlacement&&Nt.numVerticalGlyphVertices>0&&Ws?_s(Ws,a.ah.vertical):{box:null,offscreen:null}}),va(ri&&ri.placeable)}else{let _s=a.aq[(Qn=(ti=this.prevPlacement)===null||ti===void 0?void 0:ti.variableOffsets[Nt.crossTileID])===null||Qn===void 0?void 0:Qn.anchor];const Ws=(or,hh,kd)=>{const Cd=or.x2-or.x1,pw=or.y2-or.y1,sj=Nt.textBoxScale,mw=Ut&&Xe==="never"?hh:null;let ou=null,gw=ge==="never"?1:2,Lg="never";_s&&gw++;for(let jp=0;jp<gw;jp++){for(let Fg=su;Fg<tl;Fg++){const Bg=_.textAnchorOffsets.get(Fg);if(_s&&Bg.textAnchor!==_s)continue;const Td=this.attemptAnchorPlacement(Bg,or,Cd,pw,sj,mt,jt,le,B,W,je,Lg,Nt,_,kd,E,M,mw,pn);if(Td&&(ou=Td.placedGlyphBoxes,ou&&ou.placeable))return nr=!0,el=Td.shift,ou}_s?_s=null:Lg=ge}return v&&!ou&&(ou={box:this.collisionIndex.placeCollisionBox(Sd,"always",le,B,W,jt,mt,E,je.predicate,pn,new a.P(0,0)).box,offscreen:!1,placeable:!1}),ou};ba(()=>Ws(Sd,Ht.iconBox,a.ah.horizontal),()=>{const or=Ht.verticalTextBox;return _.allowVerticalPlacement&&(!ri||!ri.placeable)&&Nt.numVerticalGlyphVertices>0&&or?Ws(or,Ht.verticalIconBox,a.ah.vertical):{box:null,occluded:!0,offscreen:null}}),ri&&(nr=ri.placeable,Ns=ri.offscreen);const Ho=va(ri&&ri.placeable);if(!nr&&this.prevPlacement){const or=this.prevPlacement.variableOffsets[Nt.crossTileID];or&&(this.variableOffsets[Nt.crossTileID]=or,this.markUsedJustification(_,or.anchor,Nt,Ho))}}}if(no=ri,nr=no&&no.placeable,Ns=no&&no.offscreen,Nt.useRuntimeCollisionCircles){const va=_.text.placedSymbolArray.get(Nt.centerJustifiedTextSymbolIndex),ba=a.ai(_.textSizeData,be,va),su=k.get("text-padding");Vs=this.collisionIndex.placeCollisionCircles(ge,va,_.lineVertexArray,_.glyphOffsetArray,ba,B,W,Z,Y,v,jt,je.predicate,Nt.collisionCircleDiameter,su,E,pn),Vs.circles.length&&Vs.collisionDetected&&!v&&a.w("Collisions detected, but collision boxes are not shown"),nr=Ue||Vs.circles.length>0&&!Vs.collisionDetected,Ns=Ns&&Vs.offscreen}if(Ht.iconFeatureIndex&&(Rg=Ht.iconFeatureIndex),Ht.iconBox){const va=ba=>this.collisionIndex.placeCollisionBox(ba,Xe,le,B,W,jt,mt,M,je.predicate,pn,Ut&&el?el:void 0);So&&So.placeable&&Ht.verticalIconBox?(ro=va(Ht.verticalIconBox),ni=ro.placeable):(ro=va(Ht.iconBox),ni=ro.placeable),Ns=Ns&&ro.offscreen}const xa=Ae||Nt.numHorizontalGlyphVertices===0&&Nt.numVerticalGlyphVertices===0,Dg=De||Nt.numIconVertices===0;xa||Dg?Dg?xa||(ni=ni&&nr):nr=ni&&nr:ni=nr=ni&&nr;const ev=ni&&ro.placeable;if(nr&&no.placeable&&this.collisionIndex.insertCollisionBox(no.box,ge,k.get("text-ignore-placement"),_.bucketInstanceId,So&&So.placeable&&wd?wd:Rl,je.ID),ev&&this.collisionIndex.insertCollisionBox(ro.box,Xe,k.get("icon-ignore-placement"),_.bucketInstanceId,Rg,je.ID),Vs&&nr&&this.collisionIndex.insertCollisionCircles(Vs.circles,ge,k.get("text-ignore-placement"),_.bucketInstanceId,Rl,je.ID),v&&this.storeCollisionData(_.bucketInstanceId,En,Ht,no,ro,Vs),Nt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Nt.crossTileID]=new qn(nr||Ft,ni||Dt,Ns||_.justReloaded),m[Nt.crossTileID]=!0};if(Zt){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Nt=_.getSortedSymbolIndexes(this.transform.angle);for(let Ht=Nt.length-1;Ht>=0;--Ht){const En=Nt[Ht];Mn(_.symbolInstances.get(En),_.collisionArrays[En],En)}}else for(let Nt=l.symbolInstanceStart;Nt<l.symbolInstanceEnd;Nt++)Mn(_.symbolInstances.get(Nt),_.collisionArrays[Nt],Nt);if(v&&_.bucketInstanceId in this.collisionCircleArrays){const Nt=this.collisionCircleArrays[_.bucketInstanceId];a.as(Nt.invProjMatrix,B),Nt.viewportMatrix=this.collisionIndex.getViewportMatrix()}_.justReloaded=!1}storeCollisionData(l,m,v,_,k,E){if(v.textBox||v.iconBox){let M,B;this.collisionBoxArrays.has(l)?M=this.collisionBoxArrays.get(l):(M=new Map,this.collisionBoxArrays.set(l,M)),M.has(m)?B=M.get(m):(B={text:null,icon:null},M.set(m,B)),v.textBox&&(B.text=_.box),v.iconBox&&(B.icon=k.box)}if(E){let M=this.collisionCircleArrays[l];M===void 0&&(M=this.collisionCircleArrays[l]=new Tr);for(let B=0;B<E.circles.length;B+=4)M.circles.push(E.circles[B+0]),M.circles.push(E.circles[B+1]),M.circles.push(E.circles[B+2]),M.circles.push(E.collisionDetected?1:0)}}markUsedJustification(l,m,v,_){let k;k=_===a.ah.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[a.at(m)];const E=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(const M of E)M>=0&&(l.text.placedSymbolArray.get(M).crossTileID=k>=0&&M!==k?0:v.crossTileID)}markUsedOrientation(l,m,v){const _=m===a.ah.horizontal||m===a.ah.horizontalOnly?m:0,k=m===a.ah.vertical?m:0,E=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(const M of E)l.text.placedSymbolArray.get(M).placedOrientation=_;v.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=k)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let v=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const _=m?m.symbolFadeChange(l):1,k=m?m.opacities:{},E=m?m.variableOffsets:{},M=m?m.placedOrientations:{};for(const B in this.placements){const W=this.placements[B],Z=k[B];Z?(this.opacities[B]=new oi(Z,_,W.text,W.icon),v=v||W.text!==Z.text.placed||W.icon!==Z.icon.placed):(this.opacities[B]=new oi(null,_,W.text,W.icon,W.skipFade),v=v||W.text||W.icon)}for(const B in k){const W=k[B];if(!this.opacities[B]){const Z=new oi(W,_,!1,!1);Z.isHidden()||(this.opacities[B]=Z,v=v||W.text.placed||W.icon.placed)}}for(const B in E)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=E[B]);for(const B in M)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=M[B]);if(m&&m.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:l)}updateLayerOpacities(l,m){const v={};for(const _ of m){const k=_.getBucket(l);k&&_.latestFeatureIndex&&l.id===k.layerIds[0]&&this.updateBucketOpacities(k,_.tileID,v,_.collisionBoxArray)}}updateBucketOpacities(l,m,v,_){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const k=l.layers[0],E=k.layout,M=new oi(null,0,!1,!1,!0),B=E.get("text-allow-overlap"),W=E.get("icon-allow-overlap"),Z=k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Y=E.get("text-rotation-alignment")==="map",le=E.get("text-pitch-alignment")==="map",he=E.get("icon-text-fit")!=="none",fe=new oi(null,0,B&&(W||!l.hasIconData()||E.get("icon-optional")),W&&(B||!l.hasTextData()||E.get("text-optional")),!0);!l.collisionArrays&&_&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(_);const be=(Ae,De,ge)=>{for(let Ue=0;Ue<De/4;Ue++)Ae.opacityVertexArray.emplaceBack(ge);Ae.hasVisibleVertices=Ae.hasVisibleVertices||ge!==eu},je=this.collisionBoxArrays.get(l.bucketInstanceId);for(let Ae=0;Ae<l.symbolInstances.length;Ae++){const De=l.symbolInstances.get(Ae),{numHorizontalGlyphVertices:ge,numVerticalGlyphVertices:Ue,crossTileID:Xe}=De;let et=this.opacities[Xe];v[Xe]?et=M:et||(et=fe,this.opacities[Xe]=et),v[Xe]=!0;const mt=De.numIconVertices>0,jt=this.placedOrientations[De.crossTileID],Ut=jt===a.ah.vertical,Zt=jt===a.ah.horizontal||jt===a.ah.horizontalOnly;if(ge>0||Ue>0){const Dt=Ls(et.text);be(l.text,ge,Ut?eu:Dt),be(l.text,Ue,Zt?eu:Dt);const pn=et.text.isHidden();[De.rightJustifiedTextSymbolIndex,De.centerJustifiedTextSymbolIndex,De.leftJustifiedTextSymbolIndex].forEach(Ht=>{Ht>=0&&(l.text.placedSymbolArray.get(Ht).hidden=pn||Ut?1:0)}),De.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(De.verticalPlacedTextSymbolIndex).hidden=pn||Zt?1:0);const Mn=this.variableOffsets[De.crossTileID];Mn&&this.markUsedJustification(l,Mn.anchor,De,jt);const Nt=this.placedOrientations[De.crossTileID];Nt&&(this.markUsedJustification(l,"left",De,Nt),this.markUsedOrientation(l,Nt,De))}if(mt){const Dt=Ls(et.icon),pn=!(he&&De.verticalPlacedIconSymbolIndex&&Ut);De.placedIconSymbolIndex>=0&&(be(l.icon,De.numIconVertices,pn?Dt:eu),l.icon.placedSymbolArray.get(De.placedIconSymbolIndex).hidden=et.icon.isHidden()),De.verticalPlacedIconSymbolIndex>=0&&(be(l.icon,De.numVerticalIconVertices,pn?eu:Dt),l.icon.placedSymbolArray.get(De.verticalPlacedIconSymbolIndex).hidden=et.icon.isHidden())}const Ft=je&&je.has(Ae)?je.get(Ae):{text:null,icon:null};if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Dt=l.collisionArrays[Ae];if(Dt){let pn=new a.P(0,0);if(Dt.textBox||Dt.verticalTextBox){let Mn=!0;if(Z){const Nt=this.variableOffsets[Xe];Nt?(pn=Ei(Nt.anchor,Nt.width,Nt.height,Nt.textOffset,Nt.textBoxScale),Y&&pn._rotate(le?this.transform.angle:-this.transform.angle)):Mn=!1}if(Dt.textBox||Dt.verticalTextBox){let Nt;Dt.textBox&&(Nt=Ut),Dt.verticalTextBox&&(Nt=Zt),Ka(l.textCollisionBox.collisionVertexArray,et.text.placed,!Mn||Nt,Ft.text,pn.x,pn.y)}}if(Dt.iconBox||Dt.verticalIconBox){const Mn=!!(!Zt&&Dt.verticalIconBox);let Nt;Dt.iconBox&&(Nt=Mn),Dt.verticalIconBox&&(Nt=!Mn),Ka(l.iconCollisionBox.collisionVertexArray,et.icon.placed,Nt,Ft.icon,he?pn.x:0,he?pn.y:0)}}}}if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);if(l.bucketInstanceId in this.collisionCircleArrays){const Ae=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=Ae.invProjMatrix,l.placementViewportMatrix=Ae.viewportMatrix,l.collisionCircleArray=Ae.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,m){const v=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*v>l}setStale(){this.stale=!0}}function Ka(C,l,m,v,_,k){v&&v.length!==0||(v=[0,0,0,0]);const E=v[0]-Nn,M=v[1]-Nn,B=v[2]-Nn,W=v[3]-Nn;C.emplaceBack(l?1:0,m?1:0,_||0,k||0,E,M),C.emplaceBack(l?1:0,m?1:0,_||0,k||0,B,M),C.emplaceBack(l?1:0,m?1:0,_||0,k||0,B,W),C.emplaceBack(l?1:0,m?1:0,_||0,k||0,E,W)}const yr=Math.pow(2,25),sp=Math.pow(2,24),Jc=Math.pow(2,17),Ds=Math.pow(2,16),eo=Math.pow(2,9),yx=Math.pow(2,8),wo=Math.pow(2,1);function Ls(C){if(C.opacity===0&&!C.placed)return 0;if(C.opacity===1&&C.placed)return 4294967295;const l=C.placed?1:0,m=Math.floor(127*C.opacity);return m*yr+l*sp+m*Jc+l*Ds+m*eo+l*yx+m*wo+l}const eu=0;function xc(){return{isOccluded:(C,l,m)=>!1,getPitchedTextCorrection:(C,l,m)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(C,l,m,v){throw new Error("Not implemented.")},translatePosition:(C,l,m,v)=>function(_,k,E,M,B=!1){if(!E[0]&&!E[1])return[0,0];const W=B?M==="map"?_.angle:0:M==="viewport"?-_.angle:0;if(W){const Z=Math.sin(W),Y=Math.cos(W);E=[E[0]*Y-E[1]*Z,E[0]*Z+E[1]*Y]}return[B?E[0]:Un(k,E[0],_.zoom),B?E[1]:Un(k,E[1],_.zoom)]}(C,l,m,v),getCircleRadiusCorrection:C=>1}}class Si{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,m,v,_,k){const E=this._bucketParts;for(;this._currentTileIndex<l.length;)if(m.getBucketParts(E,_,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((M,B)=>M.sortKey-B.sortKey));this._currentPartIndex<E.length;)if(m.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,k())return!0;return!1}}class Ju{constructor(l,m,v,_,k,E,M,B){this.placement=new bs(l,xc(),m,E,M,B),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=k,this._done=!1}isDone(){return this._done}continuePlacement(l,m,v){const _=y.now(),k=()=>!this._forceFullPlacement&&y.now()-_>2;for(;this._currentPlacementIndex>=0;){const E=m[l[this._currentPlacementIndex]],M=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=M)&&(!E.maxzoom||E.maxzoom>M)){if(this._inProgressLayer||(this._inProgressLayer=new Si(E)),this._inProgressLayer.continuePlacement(v[E.source],this.placement,this._showCollisionBoxes,E,k))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Vo=512/a.X/2;class yi{constructor(l,m,v){this.tileID=l,this.bucketInstanceId=v,this._symbolsByKey={};const _=new Map;for(let k=0;k<m.length;k++){const E=m.get(k),M=E.key,B=_.get(M);B?B.push(E):_.set(M,[E])}for(const[k,E]of _){const M={positions:E.map(B=>({x:Math.floor(B.anchorX*Vo),y:Math.floor(B.anchorY*Vo)})),crossTileIDs:E.map(B=>B.crossTileID)};if(M.positions.length>128){const B=new a.av(M.positions.length,16,Uint16Array);for(const{x:W,y:Z}of M.positions)B.add(W,Z);B.finish(),delete M.positions,M.index=B}this._symbolsByKey[k]=M}}getScaledCoordinates(l,m){const{x:v,y:_,z:k}=this.tileID.canonical,{x:E,y:M,z:B}=m.canonical,W=Vo/Math.pow(2,B-k),Z=(M*a.X+l.anchorY)*W,Y=_*a.X*Vo;return{x:Math.floor((E*a.X+l.anchorX)*W-v*a.X*Vo),y:Math.floor(Z-Y)}}findMatches(l,m,v){const _=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z);for(let k=0;k<l.length;k++){const E=l.get(k);if(E.crossTileID)continue;const M=this._symbolsByKey[E.key];if(!M)continue;const B=this.getScaledCoordinates(E,m);if(M.index){const W=M.index.range(B.x-_,B.y-_,B.x+_,B.y+_).sort();for(const Z of W){const Y=M.crossTileIDs[Z];if(!v[Y]){v[Y]=!0,E.crossTileID=Y;break}}}else if(M.positions)for(let W=0;W<M.positions.length;W++){const Z=M.positions[W],Y=M.crossTileIDs[W];if(Math.abs(Z.x-B.x)<=_&&Math.abs(Z.y-B.y)<=_&&!v[Y]){v[Y]=!0,E.crossTileID=Y;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:l})=>l)}}class ed{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Wo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const m=Math.round((l-this.lng)/360);if(m!==0)for(const v in this.indexes){const _=this.indexes[v],k={};for(const E in _){const M=_[E];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+m),k[M.tileID.key]=M}this.indexes[v]=k}this.lng=l}addBucket(l,m,v){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let k=0;k<m.symbolInstances.length;k++)m.symbolInstances.get(k).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const _=this.usedCrossTileIDs[l.overscaledZ];for(const k in this.indexes){const E=this.indexes[k];if(Number(k)>l.overscaledZ)for(const M in E){const B=E[M];B.tileID.isChildOf(l)&&B.findMatches(m.symbolInstances,l,_)}else{const M=E[l.scaledTo(Number(k)).key];M&&M.findMatches(m.symbolInstances,l,_)}}for(let k=0;k<m.symbolInstances.length;k++){const E=m.symbolInstances.get(k);E.crossTileID||(E.crossTileID=v.generate(),_[E.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new yi(l,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(l,m){for(const v of m.getCrossTileIDsLists())for(const _ of v)delete this.usedCrossTileIDs[l][_]}removeStaleBuckets(l){let m=!1;for(const v in this.indexes){const _=this.indexes[v];for(const k in _)l[_[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,_[k]),delete _[k],m=!0)}return m}}class op{constructor(){this.layerIndexes={},this.crossTileIDs=new ed,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,m,v){let _=this.layerIndexes[l.id];_===void 0&&(_=this.layerIndexes[l.id]=new Wo);let k=!1;const E={};_.handleWrapJump(v);for(const M of m){const B=M.getBucket(l);B&&l.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(M.tileID,B,this.crossTileIDs)&&(k=!0),E[B.bucketInstanceId]=!0)}return _.removeStaleBuckets(E)&&(k=!0),k}pruneUnusedLayers(l){const m={};l.forEach(v=>{m[v]=!0});for(const v in this.layerIndexes)m[v]||delete this.layerIndexes[v]}}const Uo=(C,l)=>a.t(C,l&&l.filter(m=>m.identifier!=="source.canvas")),td=a.aw();class tu extends a.E{constructor(l,m={}){super(),this._rtlPluginLoaded=()=>{for(const v in this.sourceCaches){const _=this.sourceCaches[v].getSource().type;_!=="vector"&&_!=="geojson"||this.sourceCaches[v].reload()}},this.map=l,this.dispatcher=new Ot(At(),l._getMapId()),this.dispatcher.registerMessageHandler("GG",(v,_)=>this.getGlyphs(v,_)),this.dispatcher.registerMessageHandler("GI",(v,_)=>this.getImages(v,_)),this.imageManager=new Ce,this.imageManager.setEventedParent(this),this.glyphManager=new we(l._requestManager,m.localIdeographFontFamily),this.lineAtlas=new oe(256,512),this.crossTileSymbolIndex=new op,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",a.ay()),zt().on(Me,this._rtlPluginLoaded),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const _=this.sourceCaches[v.sourceId];if(!_)return;const k=_.getSource();if(k&&k.vectorLayerIds)for(const E in this._layers){const M=this._layers[E];M.source===k.id&&this._validateLayer(M)}})}loadURL(l,m={},v){this.fire(new a.k("dataloading",{dataType:"style"})),m.validate=typeof m.validate!="boolean"||m.validate;const _=this.map._requestManager.transformRequest(l,"Style");this._loadStyleRequest=new AbortController;const k=this._loadStyleRequest;a.h(_,this._loadStyleRequest).then(E=>{this._loadStyleRequest=null,this._load(E.data,m,v)}).catch(E=>{this._loadStyleRequest=null,E&&!k.signal.aborted&&this.fire(new a.j(E))})}loadJSON(l,m={},v){this.fire(new a.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,y.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,m.validate=m.validate!==!1,this._load(l,m,v)}).catch(()=>{})}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(td,{validate:!1})}_load(l,m,v){var _;const k=m.transformStyle?m.transformStyle(v,l):l;if(!m.validate||!Uo(this,a.u(k))){this._loaded=!0,this.stylesheet=k;for(const E in k.sources)this.addSource(E,k.sources[E],{validate:!1});k.sprite?this._loadSprite(k.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(k.glyphs),this._createLayers(),this.light=new se(this.stylesheet.light),this.sky=new Oe(this.stylesheet.sky),this.map.setTerrain((_=this.stylesheet.terrain)!==null&&_!==void 0?_:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const l=a.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",l),this._order=l.map(m=>m.id),this._layers={},this._serializedLayers=null;for(const m of l){const v=a.aA(m);v.setEventedParent(this,{layer:{id:m.id}}),this._layers[m.id]=v}}_loadSprite(l,m=!1,v=void 0){let _;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(k,E,M,B){return a._(this,void 0,void 0,function*(){const W=ne(k),Z=M>1?"@2x":"",Y={},le={};for(const{id:he,url:fe}of W){const be=E.transformRequest(J(fe,Z,".json"),"SpriteJSON");Y[he]=a.h(be,B);const je=E.transformRequest(J(fe,Z,".png"),"SpriteImage");le[he]=R.getImage(je,B)}return yield Promise.all([...Object.values(Y),...Object.values(le)]),function(he,fe){return a._(this,void 0,void 0,function*(){const be={};for(const je in he){be[je]={};const Ae=y.getImageCanvasContext((yield fe[je]).data),De=(yield he[je]).data;for(const ge in De){const{width:Ue,height:Xe,x:et,y:mt,sdf:jt,pixelRatio:Ut,stretchX:Zt,stretchY:Ft,content:Dt,textFitWidth:pn,textFitHeight:Mn}=De[ge];be[je][ge]={data:null,pixelRatio:Ut,sdf:jt,stretchX:Zt,stretchY:Ft,content:Dt,textFitWidth:pn,textFitHeight:Mn,spriteData:{width:Ue,height:Xe,x:et,y:mt,context:Ae}}}}return be})}(Y,le)})}(l,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(k=>{if(this._spriteRequest=null,k)for(const E in k){this._spritesImagesIds[E]=[];const M=this._spritesImagesIds[E]?this._spritesImagesIds[E].filter(B=>!(B in k)):[];for(const B of M)this.imageManager.removeImage(B),this._changedImages[B]=!0;for(const B in k[E]){const W=E==="default"?B:`${E}:${B}`;this._spritesImagesIds[E].push(W),W in this.imageManager.images?this.imageManager.updateImage(W,k[E][B],!1):this.imageManager.addImage(W,k[E][B]),m&&(this._changedImages[W]=!0)}}}).catch(k=>{this._spriteRequest=null,_=k,this.fire(new a.j(_))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),m&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),v&&v(_)})}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(l){const m=this.sourceCaches[l.source];if(!m)return;const v=l.sourceLayer;if(!v)return;const _=m.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(v)===-1)&&this.fire(new a.j(new Error(`Source layer "${v}" does not exist on source "${_.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l,m=!1){const v=this._serializedAllLayers();if(!l||l.length===0)return Object.values(m?a.aB(v):v);const _=[];for(const k of l)if(v[k]){const E=m?a.aB(v[k]):v[k];_.push(E)}return _}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const m=Object.keys(this._layers);for(const v of m){const _=this._layers[v];_.type!=="custom"&&(l[v]=_.serialize())}return l}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const l in this.sourceCaches)if(this.sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const m=this._changed;if(m){const _=Object.keys(this._updatedLayers),k=Object.keys(this._removedLayers);(_.length||k.length)&&this._updateWorkerLayers(_,k);for(const E in this._updatedSources){const M=this._updatedSources[E];if(M==="reload")this._reloadSource(E);else{if(M!=="clear")throw new Error(`Invalid action ${M}`);this._clearSource(E)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(l);this.light.updateTransitions(l),this.sky.updateTransitions(l),this._resetUpdates()}const v={};for(const _ in this.sourceCaches){const k=this.sourceCaches[_];v[_]=k.used,k.used=!1}for(const _ of this._order){const k=this._layers[_];k.recalculate(l,this._availableImages),!k.isHidden(l.zoom)&&k.source&&(this.sourceCaches[k.source].used=!0)}for(const _ in v){const k=this.sourceCaches[_];!!v[_]!=!!k.used&&k.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(l),this.sky.recalculate(l),this.z=l.zoom,m&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const m in this.sourceCaches)this.sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,m){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(l,!1),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,m={}){var v;this._checkLoaded();const _=this.serialize();if(l=m.transformStyle?m.transformStyle(_,l):l,((v=m.validate)===null||v===void 0||v)&&Uo(this,a.u(l)))return!1;(l=a.aB(l)).layers=a.az(l.layers);const k=a.aC(_,l),E=this._getOperationsToPerform(k);if(E.unimplemented.length>0)throw new Error(`Unimplemented: ${E.unimplemented.join(", ")}.`);if(E.operations.length===0)return!1;for(const M of E.operations)M();return this.stylesheet=l,this._serializedLayers=null,!0}_getOperationsToPerform(l){const m=[],v=[];for(const _ of l)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":m.push(()=>this.addLayer.apply(this,_.args));break;case"removeLayer":m.push(()=>this.removeLayer.apply(this,_.args));break;case"setPaintProperty":m.push(()=>this.setPaintProperty.apply(this,_.args));break;case"setLayoutProperty":m.push(()=>this.setLayoutProperty.apply(this,_.args));break;case"setFilter":m.push(()=>this.setFilter.apply(this,_.args));break;case"addSource":m.push(()=>this.addSource.apply(this,_.args));break;case"removeSource":m.push(()=>this.removeSource.apply(this,_.args));break;case"setLayerZoomRange":m.push(()=>this.setLayerZoomRange.apply(this,_.args));break;case"setLight":m.push(()=>this.setLight.apply(this,_.args));break;case"setGeoJSONSourceData":m.push(()=>this.setGeoJSONSourceData.apply(this,_.args));break;case"setGlyphs":m.push(()=>this.setGlyphs.apply(this,_.args));break;case"setSprite":m.push(()=>this.setSprite.apply(this,_.args));break;case"setSky":m.push(()=>this.setSky.apply(this,_.args));break;case"setTerrain":m.push(()=>this.map.setTerrain.apply(this,_.args));break;case"setTransition":m.push(()=>{});break;default:v.push(_.command)}return{operations:m,unimplemented:v}}addImage(l,m){if(this.getImage(l))return this.fire(new a.j(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,m),this._afterImageUpdated(l)}updateImage(l,m){this.imageManager.updateImage(l,m)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new a.j(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,m,v={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(a.u.source,`sources.${l}`,m,null,v))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const _=this.sourceCaches[l]=new Kt(l,m,this.dispatcher);_.style=this,_.setEventedParent(this,()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:l})),_.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===l)return this.fire(new a.j(new Error(`Source "${l}" cannot be removed while layer "${v}" is using it.`)));const m=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],m.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),m.setEventedParent(null),m.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,m){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const v=this.sourceCaches[l].getSource();if(v.type!=="geojson")throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(m),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,m,v={}){this._checkLoaded();const _=l.id;if(this.getLayer(_))return void this.fire(new a.j(new Error(`Layer "${_}" already exists on this map.`)));let k;if(l.type==="custom"){if(Uo(this,a.aD(l)))return;k=a.aA(l)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(_,l.source),l=a.aB(l),l=a.e(l,{source:_})),this._validate(a.u.layer,`layers.${_}`,l,{arrayIndex:-1},v))return;k=a.aA(l),this._validateLayer(k),k.setEventedParent(this,{layer:{id:_}})}const E=m?this._order.indexOf(m):this._order.length;if(m&&E===-1)this.fire(new a.j(new Error(`Cannot add layer "${_}" before non-existing layer "${m}".`)));else{if(this._order.splice(E,0,_),this._layerOrderChanged=!0,this._layers[_]=k,this._removedLayers[_]&&k.source&&k.type!=="custom"){const M=this._removedLayers[_];delete this._removedLayers[_],M.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",this.sourceCaches[k.source].pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map)}}moveLayer(l,m){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new a.j(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===m)return;const v=this._order.indexOf(l);this._order.splice(v,1);const _=m?this._order.indexOf(m):this._order.length;m&&_===-1?this.fire(new a.j(new Error(`Cannot move layer "${l}" before non-existing layer "${m}".`))):(this._order.splice(_,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const m=this._layers[l];if(!m)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${l}".`)));m.setEventedParent(null);const v=this._order.indexOf(l);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=m,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],m.onRemove&&m.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,m,v){this._checkLoaded();const _=this.getLayer(l);_?_.minzoom===m&&_.maxzoom===v||(m!=null&&(_.minzoom=m),v!=null&&(_.maxzoom=v),this._updateLayer(_)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,m,v={}){this._checkLoaded();const _=this.getLayer(l);if(_){if(!a.aE(_.filter,m))return m==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(a.u.filter,`layers.${_.id}.filter`,m,null,v)||(_.filter=a.aB(m),this._updateLayer(_)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return a.aB(this.getLayer(l).filter)}setLayoutProperty(l,m,v,_={}){this._checkLoaded();const k=this.getLayer(l);k?a.aE(k.getLayoutProperty(m),v)||(k.setLayoutProperty(m,v,_),this._updateLayer(k)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,m){const v=this.getLayer(l);if(v)return v.getLayoutProperty(m);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,m,v,_={}){this._checkLoaded();const k=this.getLayer(l);k?a.aE(k.getPaintProperty(m),v)||(k.setPaintProperty(m,v,_)&&this._updateLayer(k),this._changed=!0,this._updatedPaintProps[l]=!0,this._serializedLayers=null):this.fire(new a.j(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,m){return this.getLayer(l).getPaintProperty(m)}setFeatureState(l,m){this._checkLoaded();const v=l.source,_=l.sourceLayer,k=this.sourceCaches[v];if(k===void 0)return void this.fire(new a.j(new Error(`The source '${v}' does not exist in the map's style.`)));const E=k.getSource().type;E==="geojson"&&_?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||_?(l.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),k.setFeatureState(_,l.id,m)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,m){this._checkLoaded();const v=l.source,_=this.sourceCaches[v];if(_===void 0)return void this.fire(new a.j(new Error(`The source '${v}' does not exist in the map's style.`)));const k=_.getSource().type,E=k==="vector"?l.sourceLayer:void 0;k!=="vector"||E?m&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(E,l.id,m):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const m=l.source,v=l.sourceLayer,_=this.sourceCaches[m];if(_!==void 0)return _.getSource().type!=="vector"||v?(l.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),_.getFeatureState(v,l.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${m}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=a.aF(this.sourceCaches,k=>k.serialize()),m=this._serializeByIds(this._order,!0),v=this.map.getTerrain()||void 0,_=this.stylesheet;return a.aG({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,sources:l,layers:m,terrain:v},k=>k!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const m=E=>this._layers[E].type==="fill-extrusion",v={},_=[];for(let E=this._order.length-1;E>=0;E--){const M=this._order[E];if(m(M)){v[M]=E;for(const B of l){const W=B[M];if(W)for(const Z of W)_.push(Z)}}}_.sort((E,M)=>M.intersectionZ-E.intersectionZ);const k=[];for(let E=this._order.length-1;E>=0;E--){const M=this._order[E];if(m(M))for(let B=_.length-1;B>=0;B--){const W=_[B].feature;if(v[W.layer.id]<E)break;k.push(W),_.pop()}else for(const B of l){const W=B[M];if(W)for(const Z of W)k.push(Z.feature)}}return k}queryRenderedFeatures(l,m,v){m&&m.filter&&this._validate(a.u.filter,"queryRenderedFeatures.filter",m.filter,null,m);const _={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const M of m.layers){const B=this._layers[M];if(!B)return this.fire(new a.j(new Error(`The layer '${M}' does not exist in the map's style and cannot be queried for features.`))),[];_[B.source]=!0}}const k=[];m.availableImages=this._availableImages;const E=this._serializedAllLayers();for(const M in this.sourceCaches)m.layers&&!_[M]||k.push(tn(this.sourceCaches[M],this._layers,E,l,m,v));return this.placement&&k.push(function(M,B,W,Z,Y,le,he){const fe={},be=le.queryRenderedSymbols(Z),je=[];for(const Ae of Object.keys(be).map(Number))je.push(he[Ae]);je.sort(kt);for(const Ae of je){const De=Ae.featureIndex.lookupSymbolFeatures(be[Ae.bucketInstanceId],B,Ae.bucketIndex,Ae.sourceLayerIndex,Y.filter,Y.layers,Y.availableImages,M);for(const ge in De){const Ue=fe[ge]=fe[ge]||[],Xe=De[ge];Xe.sort((et,mt)=>{const jt=Ae.featureSortOrder;if(jt){const Ut=jt.indexOf(et.featureIndex);return jt.indexOf(mt.featureIndex)-Ut}return mt.featureIndex-et.featureIndex});for(const et of Xe)Ue.push(et)}}for(const Ae in fe)fe[Ae].forEach(De=>{const ge=De.feature,Ue=W[M[Ae].source].getFeatureState(ge.layer["source-layer"],ge.id);ge.source=ge.layer.source,ge.layer["source-layer"]&&(ge.sourceLayer=ge.layer["source-layer"]),ge.state=Ue});return fe}(this._layers,E,this.sourceCaches,l,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(k)}querySourceFeatures(l,m){m&&m.filter&&this._validate(a.u.filter,"querySourceFeatures.filter",m.filter,null,m);const v=this.sourceCaches[l];return v?function(_,k){const E=_.getRenderableIds().map(W=>_.getTileByID(W)),M=[],B={};for(let W=0;W<E.length;W++){const Z=E[W],Y=Z.tileID.canonical.key;B[Y]||(B[Y]=!0,Z.querySourceFeatures(M,k))}return M}(v,m):[]}getLight(){return this.light.getLight()}setLight(l,m={}){this._checkLoaded();const v=this.light.getLight();let _=!1;for(const E in l)if(!a.aE(l[E],v[E])){_=!0;break}if(!_)return;const k={now:y.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,m),this.light.updateTransitions(k)}getSky(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.sky}setSky(l,m={}){const v=this.getSky();let _=!1;if(!l&&!v)return;if(l&&!v)_=!0;else if(!l&&v)_=!0;else for(const E in l)if(!a.aE(l[E],v[E])){_=!0;break}if(!_)return;const k={now:y.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=l,this.sky.setSky(l,m),this.sky.updateTransitions(k)}_validate(l,m,v,_,k={}){return(!k||k.validate!==!1)&&Uo(this,l.call(a.u,a.e({key:m,style:this.serialize(),value:v,styleSpec:a.v},_)))}_remove(l=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),zt().off(Me,this._rtlPluginLoaded);for(const m in this._layers)this._layers[m].setEventedParent(null);for(const m in this.sourceCaches){const v=this.sourceCaches[m];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),l&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(l)}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const m in this.sourceCaches)this.sourceCaches[m].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,m,v,_,k=!1){let E=!1,M=!1;const B={};for(const W of this._order){const Z=this._layers[W];if(Z.type!=="symbol")continue;if(!B[Z.source]){const le=this.sourceCaches[Z.source];B[Z.source]=le.getRenderableIds(!0).map(he=>le.getTileByID(he)).sort((he,fe)=>fe.tileID.overscaledZ-he.tileID.overscaledZ||(he.tileID.isLessThan(fe.tileID)?-1:1))}const Y=this.crossTileSymbolIndex.addLayer(Z,B[Z.source],l.center.lng);E=E||Y}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((k=k||this._layerOrderChanged||v===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(y.now(),l.zoom))&&(this.pauseablePlacement=new Ju(l,this.map.terrain,this._order,k,m,v,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(y.now()),M=!0),E&&this.pauseablePlacement.placement.setStale()),M||E)for(const W of this._order){const Z=this._layers[W];Z.type==="symbol"&&this.placement.updateLayerOpacities(Z,B[Z.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(y.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,m){return a._(this,void 0,void 0,function*(){const v=yield this.imageManager.getImages(m.icons);this._updateTilesForChangedImages();const _=this.sourceCaches[m.source];return _&&_.setDependencies(m.tileID.key,m.type,m.icons),v})}getGlyphs(l,m){return a._(this,void 0,void 0,function*(){const v=yield this.glyphManager.getGlyphs(m.stacks),_=this.sourceCaches[m.source];return _&&_.setDependencies(m.tileID.key,m.type,[""]),v})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,m={}){this._checkLoaded(),l&&this._validate(a.u.glyphs,"glyphs",l,null,m)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}addSprite(l,m,v={},_){this._checkLoaded();const k=[{id:l,url:m}],E=[...ne(this.stylesheet.sprite),...k];this._validate(a.u.sprite,"sprite",E,null,v)||(this.stylesheet.sprite=E,this._loadSprite(k,!0,_))}removeSprite(l){this._checkLoaded();const m=ne(this.stylesheet.sprite);if(m.find(v=>v.id===l)){if(this._spritesImagesIds[l])for(const v of this._spritesImagesIds[l])this.imageManager.removeImage(v),this._changedImages[v]=!0;m.splice(m.findIndex(v=>v.id===l),1),this.stylesheet.sprite=m.length>0?m:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return ne(this.stylesheet.sprite)}setSprite(l,m={},v){this._checkLoaded(),l&&this._validate(a.u.sprite,"sprite",l,null,m)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,v):(this._unloadSprite(),v&&v(null)))}}var vc=a.Y([{name:"a_pos",type:"Int16",components:2}]);const Al={prelude:hr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:hr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:hr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:hr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:hr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:hr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:hr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:hr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:hr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:hr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:hr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:hr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:hr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:hr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:hr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:hr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:hr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:hr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:hr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:hr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:hr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:hr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:hr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:hr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:hr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:hr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:hr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:hr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:hr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:hr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function hr(C,l){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=l.match(/attribute ([\w]+) ([\w]+)/g),_=C.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=k?k.concat(_):_,M={};return{fragmentSource:C=C.replace(m,(B,W,Z,Y,le)=>(M[le]=!0,W==="define"?`
#ifndef HAS_UNIFORM_u_${le}
varying ${Z} ${Y} ${le};
#else
uniform ${Z} ${Y} u_${le};
#endif
`:`
#ifdef HAS_UNIFORM_u_${le}
    ${Z} ${Y} ${le} = u_${le};
#endif
`)),vertexSource:l=l.replace(m,(B,W,Z,Y,le)=>{const he=Y==="float"?"vec2":"vec4",fe=le.match(/color/)?"color":he;return M[le]?W==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
attribute ${Z} ${he} a_${le};
varying ${Z} ${Y} ${le};
#else
uniform ${Z} ${Y} u_${le};
#endif
`:fe==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = a_${le};
#else
    ${Z} ${Y} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = unpack_mix_${fe}(a_${le}, u_${le}_t);
#else
    ${Z} ${Y} ${le} = u_${le};
#endif
`:W==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
attribute ${Z} ${he} a_${le};
#else
uniform ${Z} ${Y} u_${le};
#endif
`:fe==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${Z} ${Y} ${le} = a_${le};
#else
    ${Z} ${Y} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${Z} ${Y} ${le} = unpack_mix_${fe}(a_${le}, u_${le}_t);
#else
    ${Z} ${Y} ${le} = u_${le};
#endif
`}),staticAttributes:v,staticUniforms:E}}class ap{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,m,v,_,k,E,M,B,W){this.context=l;let Z=this.boundPaintVertexBuffers.length!==_.length;for(let Y=0;!Z&&Y<_.length;Y++)this.boundPaintVertexBuffers[Y]!==_[Y]&&(Z=!0);!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==v||Z||this.boundIndexBuffer!==k||this.boundVertexOffset!==E||this.boundDynamicVertexBuffer!==M||this.boundDynamicVertexBuffer2!==B||this.boundDynamicVertexBuffer3!==W?this.freshBind(m,v,_,k,E,M,B,W):(l.bindVertexArray.set(this.vao),M&&M.bind(),k&&k.dynamicDraw&&k.bind(),B&&B.bind(),W&&W.bind())}freshBind(l,m,v,_,k,E,M,B){const W=l.numAttributes,Z=this.context,Y=Z.gl;this.vao&&this.destroy(),this.vao=Z.createVertexArray(),Z.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=_,this.boundVertexOffset=k,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=M,this.boundDynamicVertexBuffer3=B,m.enableAttributes(Y,l);for(const le of v)le.enableAttributes(Y,l);E&&E.enableAttributes(Y,l),M&&M.enableAttributes(Y,l),B&&B.enableAttributes(Y,l),m.bind(),m.setVertexAttribPointers(Y,l,k);for(const le of v)le.bind(),le.setVertexAttribPointers(Y,l,k);E&&(E.bind(),E.setVertexAttribPointers(Y,l,k)),_&&_.bind(),M&&(M.bind(),M.setVertexAttribPointers(Y,l,k)),B&&(B.bind(),B.setVertexAttribPointers(Y,l,k)),Z.currentNumAttributes=W}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const lp=(C,l,m,v,_)=>({u_matrix:C,u_texture:0,u_ele_delta:l,u_fog_matrix:m,u_fog_color:v?v.properties.get("fog-color"):a.aM.white,u_fog_ground_blend:v?v.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?v.calculateFogBlendOpacity(_):0,u_horizon_color:v?v.properties.get("horizon-color"):a.aM.white,u_horizon_fog_blend:v?v.properties.get("horizon-fog-blend"):1});function nu(C){const l=[];for(let m=0;m<C.length;m++){if(C[m]===null)continue;const v=C[m].split(" ");l.push(v.pop())}return l}class nd{constructor(l,m,v,_,k,E){const M=l.gl;this.program=M.createProgram();const B=nu(m.staticAttributes),W=v?v.getBinderAttributes():[],Z=B.concat(W),Y=Al.prelude.staticUniforms?nu(Al.prelude.staticUniforms):[],le=m.staticUniforms?nu(m.staticUniforms):[],he=v?v.getBinderUniforms():[],fe=Y.concat(le).concat(he),be=[];for(const et of fe)be.indexOf(et)<0&&be.push(et);const je=v?v.defines():[];k&&je.push("#define OVERDRAW_INSPECTOR;"),E&&je.push("#define TERRAIN3D;");const Ae=je.concat(Al.prelude.fragmentSource,m.fragmentSource).join(`
`),De=je.concat(Al.prelude.vertexSource,m.vertexSource).join(`
`),ge=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(ge,Ae),M.compileShader(ge),!M.getShaderParameter(ge,M.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${M.getShaderInfoLog(ge)}`);M.attachShader(this.program,ge);const Ue=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(Ue,De),M.compileShader(Ue),!M.getShaderParameter(Ue,M.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${M.getShaderInfoLog(Ue)}`);M.attachShader(this.program,Ue),this.attributes={};const Xe={};this.numAttributes=Z.length;for(let et=0;et<this.numAttributes;et++)Z[et]&&(M.bindAttribLocation(this.program,et,Z[et]),this.attributes[Z[et]]=et);if(M.linkProgram(this.program),!M.getProgramParameter(this.program,M.LINK_STATUS))throw new Error(`Program failed to link: ${M.getProgramInfoLog(this.program)}`);M.deleteShader(Ue),M.deleteShader(ge);for(let et=0;et<be.length;et++){const mt=be[et];if(mt&&!Xe[mt]){const jt=M.getUniformLocation(this.program,mt);jt&&(Xe[mt]=jt)}}this.fixedUniforms=_(l,Xe),this.terrainUniforms=((et,mt)=>({u_depth:new a.aH(et,mt.u_depth),u_terrain:new a.aH(et,mt.u_terrain),u_terrain_dim:new a.aI(et,mt.u_terrain_dim),u_terrain_matrix:new a.aJ(et,mt.u_terrain_matrix),u_terrain_unpack:new a.aK(et,mt.u_terrain_unpack),u_terrain_exaggeration:new a.aI(et,mt.u_terrain_exaggeration)}))(l,Xe),this.binderUniforms=v?v.getUniforms(l,Xe):[]}draw(l,m,v,_,k,E,M,B,W,Z,Y,le,he,fe,be,je,Ae,De){const ge=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(v),l.setStencilMode(_),l.setColorMode(k),l.setCullFace(E),B){l.activeTexture.set(ge.TEXTURE2),ge.bindTexture(ge.TEXTURE_2D,B.depthTexture),l.activeTexture.set(ge.TEXTURE3),ge.bindTexture(ge.TEXTURE_2D,B.texture);for(const Xe in this.terrainUniforms)this.terrainUniforms[Xe].set(B[Xe])}for(const Xe in this.fixedUniforms)this.fixedUniforms[Xe].set(M[Xe]);be&&be.setUniforms(l,this.binderUniforms,he,{zoom:fe});let Ue=0;switch(m){case ge.LINES:Ue=2;break;case ge.TRIANGLES:Ue=3;break;case ge.LINE_STRIP:Ue=1}for(const Xe of le.get()){const et=Xe.vaos||(Xe.vaos={});(et[W]||(et[W]=new ap)).bind(l,this,Z,be?be.getPaintVertexBuffers():[],Y,Xe.vertexOffset,je,Ae,De),ge.drawElements(m,Xe.primitiveLength*Ue,ge.UNSIGNED_SHORT,Xe.primitiveOffset*Ue*2)}}}function rd(C,l,m){const v=1/Un(m,1,l.transform.tileZoom),_=Math.pow(2,m.tileID.overscaledZ),k=m.tileSize*Math.pow(2,l.transform.tileZoom)/_,E=k*(m.tileID.canonical.x+m.tileID.wrap*_),M=k*m.tileID.canonical.y;return{u_image:0,u_texsize:m.imageAtlasTexture.size,u_scale:[v,C.fromScale,C.toScale],u_fade:C.t,u_pixel_coord_upper:[E>>16,M>>16],u_pixel_coord_lower:[65535&E,65535&M]}}const eh=(C,l,m,v)=>{const _=l.style.light,k=_.properties.get("position"),E=[k.x,k.y,k.z],M=function(){var W=new a.A(9);return a.A!=Float32Array&&(W[1]=0,W[2]=0,W[3]=0,W[5]=0,W[6]=0,W[7]=0),W[0]=1,W[4]=1,W[8]=1,W}();_.properties.get("anchor")==="viewport"&&function(W,Z){var Y=Math.sin(Z),le=Math.cos(Z);W[0]=le,W[1]=Y,W[2]=0,W[3]=-Y,W[4]=le,W[5]=0,W[6]=0,W[7]=0,W[8]=1}(M,-l.transform.angle),function(W,Z,Y){var le=Z[0],he=Z[1],fe=Z[2];W[0]=le*Y[0]+he*Y[3]+fe*Y[6],W[1]=le*Y[1]+he*Y[4]+fe*Y[7],W[2]=le*Y[2]+he*Y[5]+fe*Y[8]}(E,E,M);const B=_.properties.get("color");return{u_matrix:C,u_lightpos:E,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+m,u_opacity:v}},id=(C,l,m,v,_,k,E)=>a.e(eh(C,l,m,v),rd(k,l,E),{u_height_factor:-Math.pow(2,_.overscaledZ)/E.tileSize/8}),El=C=>({u_matrix:C}),ag=(C,l,m,v)=>a.e(El(C),rd(m,l,v)),xx=(C,l)=>({u_matrix:C,u_world:l}),lg=(C,l,m,v,_)=>a.e(ag(C,l,m,v),{u_world:_}),sd=(C,l,m,v)=>{const _=C.transform;let k,E;if(v.paint.get("circle-pitch-alignment")==="map"){const M=Un(m,1,_.zoom);k=!0,E=[M,M]}else k=!1,E=_.pixelsToGLUnits;return{u_camera_to_center_distance:_.cameraToCenterDistance,u_scale_with_map:+(v.paint.get("circle-pitch-scale")==="map"),u_matrix:C.translatePosMatrix(l.posMatrix,m,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_pitch_with_map:+k,u_device_pixel_ratio:C.pixelRatio,u_extrude_scale:E}},Za=(C,l,m)=>({u_matrix:C,u_inv_matrix:l,u_camera_to_center_distance:m.cameraToCenterDistance,u_viewport_size:[m.width,m.height]}),bc=(C,l,m=1)=>({u_matrix:C,u_color:l,u_overlay:0,u_overlay_scale:m}),is=C=>({u_matrix:C}),Fs=(C,l,m,v)=>({u_matrix:C,u_extrude_scale:Un(l,1,m),u_intensity:v}),th=(C,l,m,v)=>{const _=a.H();a.aP(_,0,C.width,C.height,0,0,1);const k=C.context.gl;return{u_matrix:_,u_world:[k.drawingBufferWidth,k.drawingBufferHeight],u_image:m,u_color_ramp:v,u_opacity:l.paint.get("heatmap-opacity")}};function ru(C,l){const m=Math.pow(2,l.canonical.z),v=l.canonical.y;return[new a.Z(0,v/m).toLngLat().lat,new a.Z(0,(v+1)/m).toLngLat().lat]}const nh=(C,l,m,v)=>{const _=C.transform;return{u_matrix:cg(C,l,m,v),u_ratio:1/Un(l,1,_.zoom),u_device_pixel_ratio:C.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},zl=(C,l,m,v,_)=>a.e(nh(C,l,m,_),{u_image:0,u_image_height:v}),fa=(C,l,m,v,_)=>{const k=C.transform,E=cp(l,k);return{u_matrix:cg(C,l,m,_),u_texsize:l.imageAtlasTexture.size,u_ratio:1/Un(l,1,k.zoom),u_device_pixel_ratio:C.pixelRatio,u_image:0,u_scale:[E,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},vx=(C,l,m,v,_,k)=>{const E=C.lineAtlas,M=cp(l,C.transform),B=m.layout.get("line-cap")==="round",W=E.getDash(v.from,B),Z=E.getDash(v.to,B),Y=W.width*_.fromScale,le=Z.width*_.toScale;return a.e(nh(C,l,m,k),{u_patternscale_a:[M/Y,-W.height/2],u_patternscale_b:[M/le,-Z.height/2],u_sdfgamma:E.width/(256*Math.min(Y,le)*C.pixelRatio)/2,u_image:0,u_tex_y_a:W.y,u_tex_y_b:Z.y,u_mix:_.t})};function cp(C,l){return 1/Un(C,1,l.tileZoom)}function cg(C,l,m,v){return C.translatePosMatrix(v?v.posMatrix:l.tileID.posMatrix,l,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}const ug=(C,l,m,v,_)=>{return{u_matrix:C,u_tl_parent:l,u_scale_parent:m,u_buffer_scale:1,u_fade_t:v.mix,u_opacity:v.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(E=_.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(k=_.paint.get("raster-contrast"),k>0?1/(1-k):1+k),u_spin_weights:bx(_.paint.get("raster-hue-rotate"))};var k,E};function bx(C){C*=Math.PI/180;const l=Math.sin(C),m=Math.cos(C);return[(2*m+1)/3,(-Math.sqrt(3)*l-m+1)/3,(Math.sqrt(3)*l-m+1)/3]}const hg=(C,l,m,v,_,k,E,M,B,W,Z,Y,le,he)=>{const fe=E.transform;return{u_is_size_zoom_constant:+(C==="constant"||C==="source"),u_is_size_feature_constant:+(C==="constant"||C==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:fe.cameraToCenterDistance,u_pitch:fe.pitch/360*2*Math.PI,u_rotate_symbol:+m,u_aspect_ratio:fe.width/fe.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_matrix:M,u_label_plane_matrix:B,u_coord_matrix:W,u_is_text:+Y,u_pitch_with_map:+v,u_is_along_line:_,u_is_variable_anchor:k,u_texsize:le,u_texture:0,u_translation:Z,u_pitched_scale:he}},iu=(C,l,m,v,_,k,E,M,B,W,Z,Y,le,he,fe)=>{const be=E.transform;return a.e(hg(C,l,m,v,_,k,E,M,B,W,Z,Y,le,fe),{u_gamma_scale:v?Math.cos(be._pitch)*be.cameraToCenterDistance:1,u_device_pixel_ratio:E.pixelRatio,u_is_halo:1})},up=(C,l,m,v,_,k,E,M,B,W,Z,Y,le,he)=>a.e(iu(C,l,m,v,_,k,E,M,B,W,Z,!0,Y,!0,he),{u_texsize_icon:le,u_texture_icon:1}),ve=(C,l,m)=>({u_matrix:C,u_opacity:l,u_color:m}),He=(C,l,m,v,_,k)=>a.e(function(E,M,B,W){const Z=B.imageManager.getPattern(E.from.toString()),Y=B.imageManager.getPattern(E.to.toString()),{width:le,height:he}=B.imageManager.getPixelSize(),fe=Math.pow(2,W.tileID.overscaledZ),be=W.tileSize*Math.pow(2,B.transform.tileZoom)/fe,je=be*(W.tileID.canonical.x+W.tileID.wrap*fe),Ae=be*W.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Z.tl,u_pattern_br_a:Z.br,u_pattern_tl_b:Y.tl,u_pattern_br_b:Y.br,u_texsize:[le,he],u_mix:M.t,u_pattern_size_a:Z.displaySize,u_pattern_size_b:Y.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/Un(W,1,B.transform.tileZoom),u_pixel_coord_upper:[je>>16,Ae>>16],u_pixel_coord_lower:[65535&je,65535&Ae]}}(v,k,m,_),{u_matrix:C,u_opacity:l}),lt={fillExtrusion:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_lightpos:new a.aN(C,l.u_lightpos),u_lightintensity:new a.aI(C,l.u_lightintensity),u_lightcolor:new a.aN(C,l.u_lightcolor),u_vertical_gradient:new a.aI(C,l.u_vertical_gradient),u_opacity:new a.aI(C,l.u_opacity)}),fillExtrusionPattern:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_lightpos:new a.aN(C,l.u_lightpos),u_lightintensity:new a.aI(C,l.u_lightintensity),u_lightcolor:new a.aN(C,l.u_lightcolor),u_vertical_gradient:new a.aI(C,l.u_vertical_gradient),u_height_factor:new a.aI(C,l.u_height_factor),u_image:new a.aH(C,l.u_image),u_texsize:new a.aO(C,l.u_texsize),u_pixel_coord_upper:new a.aO(C,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(C,l.u_pixel_coord_lower),u_scale:new a.aN(C,l.u_scale),u_fade:new a.aI(C,l.u_fade),u_opacity:new a.aI(C,l.u_opacity)}),fill:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix)}),fillPattern:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_image:new a.aH(C,l.u_image),u_texsize:new a.aO(C,l.u_texsize),u_pixel_coord_upper:new a.aO(C,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(C,l.u_pixel_coord_lower),u_scale:new a.aN(C,l.u_scale),u_fade:new a.aI(C,l.u_fade)}),fillOutline:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_world:new a.aO(C,l.u_world)}),fillOutlinePattern:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_world:new a.aO(C,l.u_world),u_image:new a.aH(C,l.u_image),u_texsize:new a.aO(C,l.u_texsize),u_pixel_coord_upper:new a.aO(C,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(C,l.u_pixel_coord_lower),u_scale:new a.aN(C,l.u_scale),u_fade:new a.aI(C,l.u_fade)}),circle:(C,l)=>({u_camera_to_center_distance:new a.aI(C,l.u_camera_to_center_distance),u_scale_with_map:new a.aH(C,l.u_scale_with_map),u_pitch_with_map:new a.aH(C,l.u_pitch_with_map),u_extrude_scale:new a.aO(C,l.u_extrude_scale),u_device_pixel_ratio:new a.aI(C,l.u_device_pixel_ratio),u_matrix:new a.aJ(C,l.u_matrix)}),collisionBox:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_pixel_extrude_scale:new a.aO(C,l.u_pixel_extrude_scale)}),collisionCircle:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_inv_matrix:new a.aJ(C,l.u_inv_matrix),u_camera_to_center_distance:new a.aI(C,l.u_camera_to_center_distance),u_viewport_size:new a.aO(C,l.u_viewport_size)}),debug:(C,l)=>({u_color:new a.aL(C,l.u_color),u_matrix:new a.aJ(C,l.u_matrix),u_overlay:new a.aH(C,l.u_overlay),u_overlay_scale:new a.aI(C,l.u_overlay_scale)}),clippingMask:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix)}),heatmap:(C,l)=>({u_extrude_scale:new a.aI(C,l.u_extrude_scale),u_intensity:new a.aI(C,l.u_intensity),u_matrix:new a.aJ(C,l.u_matrix)}),heatmapTexture:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_world:new a.aO(C,l.u_world),u_image:new a.aH(C,l.u_image),u_color_ramp:new a.aH(C,l.u_color_ramp),u_opacity:new a.aI(C,l.u_opacity)}),hillshade:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_image:new a.aH(C,l.u_image),u_latrange:new a.aO(C,l.u_latrange),u_light:new a.aO(C,l.u_light),u_shadow:new a.aL(C,l.u_shadow),u_highlight:new a.aL(C,l.u_highlight),u_accent:new a.aL(C,l.u_accent)}),hillshadePrepare:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_image:new a.aH(C,l.u_image),u_dimension:new a.aO(C,l.u_dimension),u_zoom:new a.aI(C,l.u_zoom),u_unpack:new a.aK(C,l.u_unpack)}),line:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_ratio:new a.aI(C,l.u_ratio),u_device_pixel_ratio:new a.aI(C,l.u_device_pixel_ratio),u_units_to_pixels:new a.aO(C,l.u_units_to_pixels)}),lineGradient:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_ratio:new a.aI(C,l.u_ratio),u_device_pixel_ratio:new a.aI(C,l.u_device_pixel_ratio),u_units_to_pixels:new a.aO(C,l.u_units_to_pixels),u_image:new a.aH(C,l.u_image),u_image_height:new a.aI(C,l.u_image_height)}),linePattern:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_texsize:new a.aO(C,l.u_texsize),u_ratio:new a.aI(C,l.u_ratio),u_device_pixel_ratio:new a.aI(C,l.u_device_pixel_ratio),u_image:new a.aH(C,l.u_image),u_units_to_pixels:new a.aO(C,l.u_units_to_pixels),u_scale:new a.aN(C,l.u_scale),u_fade:new a.aI(C,l.u_fade)}),lineSDF:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_ratio:new a.aI(C,l.u_ratio),u_device_pixel_ratio:new a.aI(C,l.u_device_pixel_ratio),u_units_to_pixels:new a.aO(C,l.u_units_to_pixels),u_patternscale_a:new a.aO(C,l.u_patternscale_a),u_patternscale_b:new a.aO(C,l.u_patternscale_b),u_sdfgamma:new a.aI(C,l.u_sdfgamma),u_image:new a.aH(C,l.u_image),u_tex_y_a:new a.aI(C,l.u_tex_y_a),u_tex_y_b:new a.aI(C,l.u_tex_y_b),u_mix:new a.aI(C,l.u_mix)}),raster:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_tl_parent:new a.aO(C,l.u_tl_parent),u_scale_parent:new a.aI(C,l.u_scale_parent),u_buffer_scale:new a.aI(C,l.u_buffer_scale),u_fade_t:new a.aI(C,l.u_fade_t),u_opacity:new a.aI(C,l.u_opacity),u_image0:new a.aH(C,l.u_image0),u_image1:new a.aH(C,l.u_image1),u_brightness_low:new a.aI(C,l.u_brightness_low),u_brightness_high:new a.aI(C,l.u_brightness_high),u_saturation_factor:new a.aI(C,l.u_saturation_factor),u_contrast_factor:new a.aI(C,l.u_contrast_factor),u_spin_weights:new a.aN(C,l.u_spin_weights)}),symbolIcon:(C,l)=>({u_is_size_zoom_constant:new a.aH(C,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(C,l.u_is_size_feature_constant),u_size_t:new a.aI(C,l.u_size_t),u_size:new a.aI(C,l.u_size),u_camera_to_center_distance:new a.aI(C,l.u_camera_to_center_distance),u_pitch:new a.aI(C,l.u_pitch),u_rotate_symbol:new a.aH(C,l.u_rotate_symbol),u_aspect_ratio:new a.aI(C,l.u_aspect_ratio),u_fade_change:new a.aI(C,l.u_fade_change),u_matrix:new a.aJ(C,l.u_matrix),u_label_plane_matrix:new a.aJ(C,l.u_label_plane_matrix),u_coord_matrix:new a.aJ(C,l.u_coord_matrix),u_is_text:new a.aH(C,l.u_is_text),u_pitch_with_map:new a.aH(C,l.u_pitch_with_map),u_is_along_line:new a.aH(C,l.u_is_along_line),u_is_variable_anchor:new a.aH(C,l.u_is_variable_anchor),u_texsize:new a.aO(C,l.u_texsize),u_texture:new a.aH(C,l.u_texture),u_translation:new a.aO(C,l.u_translation),u_pitched_scale:new a.aI(C,l.u_pitched_scale)}),symbolSDF:(C,l)=>({u_is_size_zoom_constant:new a.aH(C,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(C,l.u_is_size_feature_constant),u_size_t:new a.aI(C,l.u_size_t),u_size:new a.aI(C,l.u_size),u_camera_to_center_distance:new a.aI(C,l.u_camera_to_center_distance),u_pitch:new a.aI(C,l.u_pitch),u_rotate_symbol:new a.aH(C,l.u_rotate_symbol),u_aspect_ratio:new a.aI(C,l.u_aspect_ratio),u_fade_change:new a.aI(C,l.u_fade_change),u_matrix:new a.aJ(C,l.u_matrix),u_label_plane_matrix:new a.aJ(C,l.u_label_plane_matrix),u_coord_matrix:new a.aJ(C,l.u_coord_matrix),u_is_text:new a.aH(C,l.u_is_text),u_pitch_with_map:new a.aH(C,l.u_pitch_with_map),u_is_along_line:new a.aH(C,l.u_is_along_line),u_is_variable_anchor:new a.aH(C,l.u_is_variable_anchor),u_texsize:new a.aO(C,l.u_texsize),u_texture:new a.aH(C,l.u_texture),u_gamma_scale:new a.aI(C,l.u_gamma_scale),u_device_pixel_ratio:new a.aI(C,l.u_device_pixel_ratio),u_is_halo:new a.aH(C,l.u_is_halo),u_translation:new a.aO(C,l.u_translation),u_pitched_scale:new a.aI(C,l.u_pitched_scale)}),symbolTextAndIcon:(C,l)=>({u_is_size_zoom_constant:new a.aH(C,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(C,l.u_is_size_feature_constant),u_size_t:new a.aI(C,l.u_size_t),u_size:new a.aI(C,l.u_size),u_camera_to_center_distance:new a.aI(C,l.u_camera_to_center_distance),u_pitch:new a.aI(C,l.u_pitch),u_rotate_symbol:new a.aH(C,l.u_rotate_symbol),u_aspect_ratio:new a.aI(C,l.u_aspect_ratio),u_fade_change:new a.aI(C,l.u_fade_change),u_matrix:new a.aJ(C,l.u_matrix),u_label_plane_matrix:new a.aJ(C,l.u_label_plane_matrix),u_coord_matrix:new a.aJ(C,l.u_coord_matrix),u_is_text:new a.aH(C,l.u_is_text),u_pitch_with_map:new a.aH(C,l.u_pitch_with_map),u_is_along_line:new a.aH(C,l.u_is_along_line),u_is_variable_anchor:new a.aH(C,l.u_is_variable_anchor),u_texsize:new a.aO(C,l.u_texsize),u_texsize_icon:new a.aO(C,l.u_texsize_icon),u_texture:new a.aH(C,l.u_texture),u_texture_icon:new a.aH(C,l.u_texture_icon),u_gamma_scale:new a.aI(C,l.u_gamma_scale),u_device_pixel_ratio:new a.aI(C,l.u_device_pixel_ratio),u_is_halo:new a.aH(C,l.u_is_halo),u_translation:new a.aO(C,l.u_translation),u_pitched_scale:new a.aI(C,l.u_pitched_scale)}),background:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_opacity:new a.aI(C,l.u_opacity),u_color:new a.aL(C,l.u_color)}),backgroundPattern:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_opacity:new a.aI(C,l.u_opacity),u_image:new a.aH(C,l.u_image),u_pattern_tl_a:new a.aO(C,l.u_pattern_tl_a),u_pattern_br_a:new a.aO(C,l.u_pattern_br_a),u_pattern_tl_b:new a.aO(C,l.u_pattern_tl_b),u_pattern_br_b:new a.aO(C,l.u_pattern_br_b),u_texsize:new a.aO(C,l.u_texsize),u_mix:new a.aI(C,l.u_mix),u_pattern_size_a:new a.aO(C,l.u_pattern_size_a),u_pattern_size_b:new a.aO(C,l.u_pattern_size_b),u_scale_a:new a.aI(C,l.u_scale_a),u_scale_b:new a.aI(C,l.u_scale_b),u_pixel_coord_upper:new a.aO(C,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(C,l.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aI(C,l.u_tile_units_to_pixels)}),terrain:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_texture:new a.aH(C,l.u_texture),u_ele_delta:new a.aI(C,l.u_ele_delta),u_fog_matrix:new a.aJ(C,l.u_fog_matrix),u_fog_color:new a.aL(C,l.u_fog_color),u_fog_ground_blend:new a.aI(C,l.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.aI(C,l.u_fog_ground_blend_opacity),u_horizon_color:new a.aL(C,l.u_horizon_color),u_horizon_fog_blend:new a.aI(C,l.u_horizon_fog_blend)}),terrainDepth:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_ele_delta:new a.aI(C,l.u_ele_delta)}),terrainCoords:(C,l)=>({u_matrix:new a.aJ(C,l.u_matrix),u_texture:new a.aH(C,l.u_texture),u_terrain_coords_id:new a.aI(C,l.u_terrain_coords_id),u_ele_delta:new a.aI(C,l.u_ele_delta)}),sky:(C,l)=>({u_sky_color:new a.aL(C,l.u_sky_color),u_horizon_color:new a.aL(C,l.u_horizon_color),u_horizon:new a.aI(C,l.u_horizon),u_sky_horizon_blend:new a.aI(C,l.u_sky_horizon_blend)})};class on{constructor(l,m,v){this.context=l;const _=l.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const m=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const dr={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Er{constructor(l,m,v,_){this.length=m.length,this.attributes=v,this.itemSize=m.bytesPerElement,this.dynamicDraw=_,this.context=l;const k=l.gl;this.buffer=k.createBuffer(),l.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,m){for(let v=0;v<this.attributes.length;v++){const _=m.attributes[this.attributes[v].name];_!==void 0&&l.enableVertexAttribArray(_)}}setVertexAttribPointers(l,m,v){for(let _=0;_<this.attributes.length;_++){const k=this.attributes[_],E=m.attributes[k.name];E!==void 0&&l.vertexAttribPointer(E,k.components,l[dr[k.type]],!1,this.itemSize,k.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const jr=new WeakMap;function Jn(C){var l;if(jr.has(C))return jr.get(C);{const m=(l=C.getParameter(C.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return jr.set(C,m),m}}class Tn{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Bs extends Tn{getDefault(){return a.aM.transparent}set(l){const m=this.current;(l.r!==m.r||l.g!==m.g||l.b!==m.b||l.a!==m.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class to extends Tn{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class pa extends Tn{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class hp extends Tn{getDefault(){return[!0,!0,!0,!0]}set(l){const m=this.current;(l[0]!==m[0]||l[1]!==m[1]||l[2]!==m[2]||l[3]!==m[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class od extends Tn{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class dg extends Tn{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class V_ extends Tn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const m=this.current;(l.func!==m.func||l.ref!==m.ref||l.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class _x extends Tn{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const m=this.current;(l[0]!==m[0]||l[1]!==m[1]||l[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class W_ extends Tn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;l?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=l,this.dirty=!1}}class U_ extends Tn{getDefault(){return[0,1]}set(l){const m=this.current;(l[0]!==m[0]||l[1]!==m[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class q_ extends Tn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;l?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=l,this.dirty=!1}}class Q_ extends Tn{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class rh extends Tn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;l?m.enable(m.BLEND):m.disable(m.BLEND),this.current=l,this.dirty=!1}}class H_ extends Tn{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const m=this.current;(l[0]!==m[0]||l[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class UT extends Tn{getDefault(){return a.aM.transparent}set(l){const m=this.current;(l.r!==m.r||l.g!==m.g||l.b!==m.b||l.a!==m.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class G_ extends Tn{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class dp extends Tn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;l?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=l,this.dirty=!1}}class qT extends Tn{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class fg extends Tn{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class QT extends Tn{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class HT extends Tn{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class X_ extends Tn{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const m=this.current;(l[0]!==m[0]||l[1]!==m[1]||l[2]!==m[2]||l[3]!==m[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class K_ extends Tn{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class Z_ extends Tn{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class wx extends Tn{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Y_ extends Tn{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class pg extends Tn{getDefault(){return null}set(l){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class _c extends Tn{getDefault(){return null}set(l){var m;if(l===this.current&&!this.dirty)return;const v=this.gl;Jn(v)?v.bindVertexArray(l):(m=v.getExtension("OES_vertex_array_object"))===null||m===void 0||m.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class Sx extends Tn{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class kx extends Tn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class Cx extends Tn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class mg extends Tn{constructor(l,m){super(l),this.context=l,this.parent=m}getDefault(){return null}}class Tx extends mg{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class ih extends mg{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class jx extends mg{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class GT{constructor(l,m,v,_,k){this.context=l,this.width=m,this.height=v;const E=l.gl,M=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new Tx(l,M),_)this.depthAttachment=k?new jx(l,M):new ih(l,M);else if(k)throw new Error("Stencil cannot be set without depth");if(E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const l=this.context.gl,m=this.colorAttachment.get();if(m&&l.deleteTexture(m),this.depthAttachment){const v=this.depthAttachment.get();v&&l.deleteRenderbuffer(v)}l.deleteFramebuffer(this.framebuffer)}}class ki{constructor(l,m,v){this.blendFunction=l,this.blendColor=m,this.mask=v}}ki.Replace=[1,0],ki.disabled=new ki(ki.Replace,a.aM.transparent,[!1,!1,!1,!1]),ki.unblended=new ki(ki.Replace,a.aM.transparent,[!0,!0,!0,!0]),ki.alphaBlended=new ki([1,771],a.aM.transparent,[!0,!0,!0,!0]);class XT{constructor(l){var m,v;if(this.gl=l,this.clearColor=new Bs(this),this.clearDepth=new to(this),this.clearStencil=new pa(this),this.colorMask=new hp(this),this.depthMask=new od(this),this.stencilMask=new dg(this),this.stencilFunc=new V_(this),this.stencilOp=new _x(this),this.stencilTest=new W_(this),this.depthRange=new U_(this),this.depthTest=new q_(this),this.depthFunc=new Q_(this),this.blend=new rh(this),this.blendFunc=new H_(this),this.blendColor=new UT(this),this.blendEquation=new G_(this),this.cullFace=new dp(this),this.cullFaceSide=new qT(this),this.frontFace=new fg(this),this.program=new QT(this),this.activeTexture=new HT(this),this.viewport=new X_(this),this.bindFramebuffer=new K_(this),this.bindRenderbuffer=new Z_(this),this.bindTexture=new wx(this),this.bindVertexBuffer=new Y_(this),this.bindElementBuffer=new pg(this),this.bindVertexArray=new _c(this),this.pixelStoreUnpack=new Sx(this),this.pixelStoreUnpackPremultiplyAlpha=new kx(this),this.pixelStoreUnpackFlipY=new Cx(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),Jn(l)){this.HALF_FLOAT=l.HALF_FLOAT;const _=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(m=l.RGBA16F)!==null&&m!==void 0?m:_==null?void 0:_.RGBA16F_EXT,this.RGB16F=(v=l.RGB16F)!==null&&v!==void 0?v:_==null?void 0:_.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const _=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=_==null?void 0:_.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,m){return new on(this,l,m)}createVertexBuffer(l,m,v){return new Er(this,l,m,v)}createRenderbuffer(l,m,v){const _=this.gl,k=_.createRenderbuffer();return this.bindRenderbuffer.set(k),_.renderbufferStorage(_.RENDERBUFFER,l,m,v),this.bindRenderbuffer.set(null),k}createFramebuffer(l,m,v,_){return new GT(this,l,m,v,_)}clear({color:l,depth:m,stencil:v}){const _=this.gl;let k=0;l&&(k|=_.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(k|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),v!==void 0&&(k|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),_.clear(k)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){a.aE(l.blendFunction,ki.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return Jn(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var m;return Jn(this.gl)?this.gl.deleteVertexArray(l):(m=this.gl.getExtension("OES_vertex_array_object"))===null||m===void 0?void 0:m.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}class Kn{constructor(l,m,v){this.func=l,this.mask=m,this.range=v}}Kn.ReadOnly=!1,Kn.ReadWrite=!0,Kn.disabled=new Kn(519,Kn.ReadOnly,[0,1]);const gg=7680;class Xr{constructor(l,m,v,_,k,E){this.test=l,this.ref=m,this.mask=v,this.fail=_,this.depthFail=k,this.pass=E}}Xr.disabled=new Xr({func:519,mask:0},0,0,gg,gg,gg);class Rr{constructor(l,m,v){this.enable=l,this.mode=m,this.frontFace=v}}let sh;function fp(C,l,m,v,_){const k=C.context,E=k.gl,M=C.useProgram("collisionBox"),B=[];let W=0,Z=0;for(let Ae=0;Ae<v.length;Ae++){const De=v[Ae],ge=l.getTile(De).getBucket(m);if(!ge)continue;const Ue=_?ge.textCollisionBox:ge.iconCollisionBox,Xe=ge.collisionCircleArray;if(Xe.length>0){const et=a.H();a.aQ(et,ge.placementInvProjMatrix,C.transform.glCoordMatrix),a.aQ(et,et,ge.placementViewportMatrix),B.push({circleArray:Xe,circleOffset:Z,transform:De.posMatrix,invTransform:et,coord:De}),W+=Xe.length/4,Z=W}Ue&&M.draw(k,E.LINES,Kn.disabled,Xr.disabled,C.colorModeForRenderPass(),Rr.disabled,{u_matrix:De.posMatrix,u_pixel_extrude_scale:[1/(Y=C.transform).width,1/Y.height]},C.style.map.terrain&&C.style.map.terrain.getTerrainData(De),m.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,null,C.transform.zoom,null,null,Ue.collisionVertexBuffer)}var Y;if(!_||!B.length)return;const le=C.useProgram("collisionCircle"),he=new a.aR;he.resize(4*W),he._trim();let fe=0;for(const Ae of B)for(let De=0;De<Ae.circleArray.length/4;De++){const ge=4*De,Ue=Ae.circleArray[ge+0],Xe=Ae.circleArray[ge+1],et=Ae.circleArray[ge+2],mt=Ae.circleArray[ge+3];he.emplace(fe++,Ue,Xe,et,mt,0),he.emplace(fe++,Ue,Xe,et,mt,1),he.emplace(fe++,Ue,Xe,et,mt,2),he.emplace(fe++,Ue,Xe,et,mt,3)}(!sh||sh.length<2*W)&&(sh=function(Ae){const De=2*Ae,ge=new a.aT;ge.resize(De),ge._trim();for(let Ue=0;Ue<De;Ue++){const Xe=6*Ue;ge.uint16[Xe+0]=4*Ue+0,ge.uint16[Xe+1]=4*Ue+1,ge.uint16[Xe+2]=4*Ue+2,ge.uint16[Xe+3]=4*Ue+2,ge.uint16[Xe+4]=4*Ue+3,ge.uint16[Xe+5]=4*Ue+0}return ge}(W));const be=k.createIndexBuffer(sh,!0),je=k.createVertexBuffer(he,a.aS.members,!0);for(const Ae of B){const De=Za(Ae.transform,Ae.invTransform,C.transform);le.draw(k,E.TRIANGLES,Kn.disabled,Xr.disabled,C.colorModeForRenderPass(),Rr.disabled,De,C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ae.coord),m.id,je,be,a.a0.simpleSegment(0,2*Ae.circleOffset,Ae.circleArray.length,Ae.circleArray.length/2),null,C.transform.zoom,null,null,null)}je.destroy(),be.destroy()}Rr.disabled=new Rr(!1,1029,2305),Rr.backCCW=new Rr(!0,1029,2305);const pp=a.an(new Float32Array(16));function Px(C,l,m,v,_,k){const{horizontalAlign:E,verticalAlign:M}=a.au(C);return new a.P((-(E-.5)*l/_+v[0])*k,(-(M-.5)*m/_+v[1])*k)}function oh(C,l,m,v,_,k){const E=l.tileAnchorPoint.add(new a.P(l.translation[0],l.translation[1]));if(l.pitchWithMap){let M=v.mult(k);m||(M=M.rotate(-_));const B=E.add(M);return xe(B.x,B.y,l.labelPlaneMatrix,l.getElevation).point}if(m){const M=st(l.tileAnchorPoint.x+1,l.tileAnchorPoint.y,l).point.sub(C),B=Math.atan(M.y/M.x)+(M.x<0?Math.PI:0);return C.add(v.rotate(B))}return C.add(v)}function ad(C,l,m,v,_,k,E,M,B,W,Z,Y,le,he){const fe=C.text.placedSymbolArray,be=C.text.dynamicLayoutVertexArray,je=C.icon.dynamicLayoutVertexArray,Ae={};be.clear();for(let De=0;De<fe.length;De++){const ge=fe.get(De),Ue=ge.hidden||!ge.crossTileID||C.allowVerticalPlacement&&!ge.placedOrientation?null:v[ge.crossTileID];if(Ue){const Xe=new a.P(ge.anchorX,ge.anchorY),et={getElevation:he,width:_.width,height:_.height,labelPlaneMatrix:k,pitchWithMap:m,projection:Z,tileAnchorPoint:Xe,translation:Y,unwrappedTileID:le},mt=m?xe(Xe.x,Xe.y,E,he):st(Xe.x,Xe.y,et),jt=U(_.cameraToCenterDistance,mt.signedDistanceFromCamera);let Ut=a.ai(C.textSizeData,B,ge)*jt/a.ap;m&&(Ut*=C.tilePixelRatio/M);const{width:Zt,height:Ft,anchor:Dt,textOffset:pn,textBoxScale:Mn}=Ue,Nt=Px(Dt,Zt,Ft,pn,Mn,Ut),Ht=Z.getPitchedTextCorrection(_,Xe.add(new a.P(Y[0],Y[1])),le),En=oh(mt.point,et,l,Nt,_.angle,Ht),ti=C.allowVerticalPlacement&&ge.placedOrientation===a.ah.vertical?Math.PI/2:0;for(let Qn=0;Qn<ge.numGlyphs;Qn++)a.aj(be,En,ti);W&&ge.associatedIconIndex>=0&&(Ae[ge.associatedIconIndex]={shiftedAnchor:En,angle:ti})}else dn(ge.numGlyphs,be)}if(W){je.clear();const De=C.icon.placedSymbolArray;for(let ge=0;ge<De.length;ge++){const Ue=De.get(ge);if(Ue.hidden)dn(Ue.numGlyphs,je);else{const Xe=Ae[ge];if(Xe)for(let et=0;et<Ue.numGlyphs;et++)a.aj(je,Xe.shiftedAnchor,Xe.angle);else dn(Ue.numGlyphs,je)}}C.icon.dynamicLayoutVertexBuffer.updateData(je)}C.text.dynamicLayoutVertexBuffer.updateData(be)}function ma(C,l,m){return m.iconsInText&&l?"symbolTextAndIcon":C?"symbolSDF":"symbolIcon"}function Ox(C,l,m,v,_,k,E,M,B,W,Z,Y){const le=C.context,he=le.gl,fe=C.transform,be=xc(),je=M==="map",Ae=B==="map",De=M!=="viewport"&&m.layout.get("symbol-placement")!=="point",ge=je&&!Ae&&!De,Ue=!Ae&&De,Xe=!m.layout.get("symbol-sort-key").isConstant();let et=!1;const mt=C.depthModeForSublayer(0,Kn.ReadOnly),jt=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ut=[],Zt=be.getCircleRadiusCorrection(fe);for(const Ft of v){const Dt=l.getTile(Ft),pn=Dt.getBucket(m);if(!pn)continue;const Mn=_?pn.text:pn.icon;if(!Mn||!Mn.segments.get().length||!Mn.hasVisibleVertices)continue;const Nt=Mn.programConfigurations.get(m.id),Ht=_||pn.sdfIcons,En=_?pn.textSizeData:pn.iconSizeData,ti=Ae||fe.pitch!==0,Qn=C.useProgram(ma(Ht,_,pn),Nt),nr=a.ag(En,fe.zoom),ni=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ft);let Ns,el,ri,So,no=[0,0],Vs=null;if(_)el=Dt.glyphAtlasTexture,ri=he.LINEAR,Ns=Dt.glyphAtlasTexture.size,pn.iconsInText&&(no=Dt.imageAtlasTexture.size,Vs=Dt.imageAtlasTexture,So=ti||C.options.rotating||C.options.zooming||En.kind==="composite"||En.kind==="camera"?he.LINEAR:he.NEAREST);else{const or=m.layout.get("icon-size").constantOr(0)!==1||pn.iconsNeedLinear;el=Dt.imageAtlasTexture,ri=Ht||C.options.rotating||C.options.zooming||or||ti?he.LINEAR:he.NEAREST,Ns=Dt.imageAtlasTexture.size}const ro=Un(Dt,1,C.transform.zoom),Rl=Ue?Ft.posMatrix:pp,wd=Ui(Rl,Ae,je,C.transform,ro),Rg=vs(Rl,Ae,je,C.transform,ro),Sd=vs(Ft.posMatrix,Ae,je,C.transform,ro),xa=be.translatePosition(C.transform,Dt,k,E),Dg=jt&&pn.hasTextData(),ev=m.layout.get("icon-text-fit")!=="none"&&Dg&&pn.hasIconData();if(De){const or=C.style.map.terrain?(kd,Cd)=>C.style.map.terrain.getElevation(Ft,kd,Cd):null,hh=m.layout.get("text-rotation-alignment")==="map";re(pn,Ft.posMatrix,C,_,wd,Sd,Ae,W,hh,be,Ft.toUnwrapped(),fe.width,fe.height,xa,or)}const va=Ft.posMatrix,ba=_&&jt||ev,su=De||ba?pp:wd,tl=Rg,_s=Ht&&m.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ws;Ws=Ht?pn.iconsInText?up(En.kind,nr,ge,Ae,De,ba,C,va,su,tl,xa,Ns,no,Zt):iu(En.kind,nr,ge,Ae,De,ba,C,va,su,tl,xa,_,Ns,!0,Zt):hg(En.kind,nr,ge,Ae,De,ba,C,va,su,tl,xa,_,Ns,Zt);const Ho={program:Qn,buffers:Mn,uniformValues:Ws,atlasTexture:el,atlasTextureIcon:Vs,atlasInterpolation:ri,atlasInterpolationIcon:So,isSDF:Ht,hasHalo:_s};if(Xe&&pn.canOverlap){et=!0;const or=Mn.segments.get();for(const hh of or)Ut.push({segments:new a.a0([hh]),sortKey:hh.sortKey,state:Ho,terrainData:ni})}else Ut.push({segments:Mn.segments,sortKey:0,state:Ho,terrainData:ni})}et&&Ut.sort((Ft,Dt)=>Ft.sortKey-Dt.sortKey);for(const Ft of Ut){const Dt=Ft.state;if(le.activeTexture.set(he.TEXTURE0),Dt.atlasTexture.bind(Dt.atlasInterpolation,he.CLAMP_TO_EDGE),Dt.atlasTextureIcon&&(le.activeTexture.set(he.TEXTURE1),Dt.atlasTextureIcon&&Dt.atlasTextureIcon.bind(Dt.atlasInterpolationIcon,he.CLAMP_TO_EDGE)),Dt.isSDF){const pn=Dt.uniformValues;Dt.hasHalo&&(pn.u_is_halo=1,Ax(Dt.buffers,Ft.segments,m,C,Dt.program,mt,Z,Y,pn,Ft.terrainData)),pn.u_is_halo=0}Ax(Dt.buffers,Ft.segments,m,C,Dt.program,mt,Z,Y,Dt.uniformValues,Ft.terrainData)}}function Ax(C,l,m,v,_,k,E,M,B,W){const Z=v.context;_.draw(Z,Z.gl.TRIANGLES,k,E,M,Rr.disabled,B,W,m.id,C.layoutVertexBuffer,C.indexBuffer,l,m.paint,v.transform.zoom,C.programConfigurations.get(m.id),C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer)}function Ex(C,l,m,v){const _=C.context,k=_.gl,E=Xr.disabled,M=new ki([k.ONE,k.ONE],a.aM.transparent,[!0,!0,!0,!0]),B=l.getBucket(m);if(!B)return;const W=v.key;let Z=m.heatmapFbos.get(W);Z||(Z=mp(_,l.tileSize,l.tileSize),m.heatmapFbos.set(W,Z)),_.bindFramebuffer.set(Z.framebuffer),_.viewport.set([0,0,l.tileSize,l.tileSize]),_.clear({color:a.aM.transparent});const Y=B.programConfigurations.get(m.id),le=C.useProgram("heatmap",Y),he=C.style.map.terrain.getTerrainData(v);le.draw(_,k.TRIANGLES,Kn.disabled,E,M,Rr.disabled,Fs(v.posMatrix,l,C.transform.zoom,m.paint.get("heatmap-intensity")),he,m.id,B.layoutVertexBuffer,B.indexBuffer,B.segments,m.paint,C.transform.zoom,Y)}function ah(C,l,m){const v=C.context,_=v.gl;v.setColorMode(C.colorModeForRenderPass());const k=gp(v,l),E=m.key,M=l.heatmapFbos.get(E);M&&(v.activeTexture.set(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,M.colorAttachment.get()),v.activeTexture.set(_.TEXTURE1),k.bind(_.LINEAR,_.CLAMP_TO_EDGE),C.useProgram("heatmapTexture").draw(v,_.TRIANGLES,Kn.disabled,Xr.disabled,C.colorModeForRenderPass(),Rr.disabled,th(C,l,0,1),null,l.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments,l.paint,C.transform.zoom),M.destroy(),l.heatmapFbos.delete(E))}function mp(C,l,m){var v,_;const k=C.gl,E=k.createTexture();k.bindTexture(k.TEXTURE_2D,E),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.LINEAR),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.LINEAR);const M=(v=C.HALF_FLOAT)!==null&&v!==void 0?v:k.UNSIGNED_BYTE,B=(_=C.RGBA16F)!==null&&_!==void 0?_:k.RGBA;k.texImage2D(k.TEXTURE_2D,0,B,l,m,0,k.RGBA,M,null);const W=C.createFramebuffer(l,m,!1,!1);return W.colorAttachment.set(E),W}function gp(C,l){return l.colorRampTexture||(l.colorRampTexture=new ae(C,l.colorRamp,C.gl.RGBA)),l.colorRampTexture}function ld(C,l,m,v,_){if(!m||!v||!v.imageAtlas)return;const k=v.imageAtlas.patternPositions;let E=k[m.to.toString()],M=k[m.from.toString()];if(!E&&M&&(E=M),!M&&E&&(M=E),!E||!M){const B=_.getPaintProperty(l);E=k[B],M=k[B]}E&&M&&C.setConstantPatternPositions(E,M)}function yp(C,l,m,v,_,k,E){const M=C.context.gl,B="fill-pattern",W=m.paint.get(B),Z=W&&W.constantOr(1),Y=m.getCrossfadeParameters();let le,he,fe,be,je;E?(he=Z&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",le=M.LINES):(he=Z?"fillPattern":"fill",le=M.TRIANGLES);const Ae=W.constantOr(null);for(const De of v){const ge=l.getTile(De);if(Z&&!ge.patternsLoaded())continue;const Ue=ge.getBucket(m);if(!Ue)continue;const Xe=Ue.programConfigurations.get(m.id),et=C.useProgram(he,Xe),mt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(De);Z&&(C.context.activeTexture.set(M.TEXTURE0),ge.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),Xe.updatePaintBuffers(Y)),ld(Xe,B,Ae,ge,m);const jt=mt?De:null,Ut=C.translatePosMatrix(jt?jt.posMatrix:De.posMatrix,ge,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor"));if(E){be=Ue.indexBuffer2,je=Ue.segments2;const Zt=[M.drawingBufferWidth,M.drawingBufferHeight];fe=he==="fillOutlinePattern"&&Z?lg(Ut,C,Y,ge,Zt):xx(Ut,Zt)}else be=Ue.indexBuffer,je=Ue.segments,fe=Z?ag(Ut,C,Y,ge):El(Ut);et.draw(C.context,le,_,C.stencilModeForClipping(De),k,Rr.disabled,fe,mt,m.id,Ue.layoutVertexBuffer,be,je,m.paint,C.transform.zoom,Xe)}}function yg(C,l,m,v,_,k,E){const M=C.context,B=M.gl,W="fill-extrusion-pattern",Z=m.paint.get(W),Y=Z.constantOr(1),le=m.getCrossfadeParameters(),he=m.paint.get("fill-extrusion-opacity"),fe=Z.constantOr(null);for(const be of v){const je=l.getTile(be),Ae=je.getBucket(m);if(!Ae)continue;const De=C.style.map.terrain&&C.style.map.terrain.getTerrainData(be),ge=Ae.programConfigurations.get(m.id),Ue=C.useProgram(Y?"fillExtrusionPattern":"fillExtrusion",ge);Y&&(C.context.activeTexture.set(B.TEXTURE0),je.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),ge.updatePaintBuffers(le)),ld(ge,W,fe,je,m);const Xe=C.translatePosMatrix(be.posMatrix,je,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),et=m.paint.get("fill-extrusion-vertical-gradient"),mt=Y?id(Xe,C,et,he,be,le,je):eh(Xe,C,et,he);Ue.draw(M,M.gl.TRIANGLES,_,k,E,Rr.backCCW,mt,De,m.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,m.paint,C.transform.zoom,ge,C.style.map.terrain&&Ae.centroidVertexBuffer)}}function cd(C,l,m,v,_,k,E){const M=C.context,B=M.gl,W=m.fbo;if(!W)return;const Z=C.useProgram("hillshade"),Y=C.style.map.terrain&&C.style.map.terrain.getTerrainData(l);M.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,W.colorAttachment.get()),Z.draw(M,B.TRIANGLES,_,k,E,Rr.disabled,((le,he,fe,be)=>{const je=fe.paint.get("hillshade-shadow-color"),Ae=fe.paint.get("hillshade-highlight-color"),De=fe.paint.get("hillshade-accent-color");let ge=fe.paint.get("hillshade-illumination-direction")*(Math.PI/180);fe.paint.get("hillshade-illumination-anchor")==="viewport"&&(ge-=le.transform.angle);const Ue=!le.options.moving;return{u_matrix:be?be.posMatrix:le.transform.calculatePosMatrix(he.tileID.toUnwrapped(),Ue),u_image:0,u_latrange:ru(0,he.tileID),u_light:[fe.paint.get("hillshade-exaggeration"),ge],u_shadow:je,u_highlight:Ae,u_accent:De}})(C,m,v,Y?l:null),Y,v.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}function ud(C,l,m,v,_,k){const E=C.context,M=E.gl,B=l.dem;if(B&&B.data){const W=B.dim,Z=B.stride,Y=B.getPixels();if(E.activeTexture.set(M.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||C.getTileTexture(Z),l.demTexture){const he=l.demTexture;he.update(Y,{premultiply:!1}),he.bind(M.NEAREST,M.CLAMP_TO_EDGE)}else l.demTexture=new ae(E,Y,M.RGBA,{premultiply:!1}),l.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE);E.activeTexture.set(M.TEXTURE0);let le=l.fbo;if(!le){const he=new ae(E,{width:W,height:W,data:null},M.RGBA);he.bind(M.LINEAR,M.CLAMP_TO_EDGE),le=l.fbo=E.createFramebuffer(W,W,!0,!1),le.colorAttachment.set(he.texture)}E.bindFramebuffer.set(le.framebuffer),E.viewport.set([0,0,W,W]),C.useProgram("hillshadePrepare").draw(E,M.TRIANGLES,v,_,k,Rr.disabled,((he,fe)=>{const be=fe.stride,je=a.H();return a.aP(je,0,a.X,-a.X,0,0,1),a.J(je,je,[0,-a.X,0]),{u_matrix:je,u_image:1,u_dimension:[be,be],u_zoom:he.overscaledZ,u_unpack:fe.getUnpackVector()}})(l.tileID,B),null,m.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments),l.needsHillshadePrepare=!1}}function J_(C,l,m,v,_,k){const E=v.paint.get("raster-fade-duration");if(!k&&E>0){const M=y.now(),B=(M-C.timeAdded)/E,W=l?(M-l.timeAdded)/E:-1,Z=m.getSource(),Y=_.coveringZoomLevel({tileSize:Z.tileSize,roundZoom:Z.roundZoom}),le=!l||Math.abs(l.tileID.overscaledZ-Y)>Math.abs(C.tileID.overscaledZ-Y),he=le&&C.refreshedUponExpiration?1:a.ac(le?B:1-W,0,1);return C.refreshedUponExpiration&&B>=1&&(C.refreshedUponExpiration=!1),l?{opacity:1,mix:1-he}:{opacity:he,mix:0}}return{opacity:1,mix:0}}const zx=new a.aM(1,0,0,1),xr=new a.aM(0,1,0,1),xg=new a.aM(0,0,1,1),KT=new a.aM(1,0,1,1),ew=new a.aM(0,1,1,1);function hd(C,l,m,v){vg(C,0,l+m/2,C.transform.width,m,v)}function tw(C,l,m,v){vg(C,l-m/2,0,m,C.transform.height,v)}function vg(C,l,m,v,_,k){const E=C.context,M=E.gl;M.enable(M.SCISSOR_TEST),M.scissor(l*C.pixelRatio,m*C.pixelRatio,v*C.pixelRatio,_*C.pixelRatio),E.clear({color:k}),M.disable(M.SCISSOR_TEST)}function nw(C,l,m){const v=C.context,_=v.gl,k=m.posMatrix,E=C.useProgram("debug"),M=Kn.disabled,B=Xr.disabled,W=C.colorModeForRenderPass(),Z="$debug",Y=C.style.map.terrain&&C.style.map.terrain.getTerrainData(m);v.activeTexture.set(_.TEXTURE0);const le=l.getTileByID(m.key).latestRawTileData,he=Math.floor((le&&le.byteLength||0)/1024),fe=l.getTile(m).tileSize,be=512/Math.min(fe,512)*(m.overscaledZ/C.transform.zoom)*.5;let je=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(je+=` => ${m.overscaledZ}`),function(Ae,De){Ae.initDebugOverlayCanvas();const ge=Ae.debugOverlayCanvas,Ue=Ae.context.gl,Xe=Ae.debugOverlayCanvas.getContext("2d");Xe.clearRect(0,0,ge.width,ge.height),Xe.shadowColor="white",Xe.shadowBlur=2,Xe.lineWidth=1.5,Xe.strokeStyle="white",Xe.textBaseline="top",Xe.font="bold 36px Open Sans, sans-serif",Xe.fillText(De,5,5),Xe.strokeText(De,5,5),Ae.debugOverlayTexture.update(ge),Ae.debugOverlayTexture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE)}(C,`${je} ${he}kB`),E.draw(v,_.TRIANGLES,M,B,ki.alphaBlended,Rr.disabled,bc(k,a.aM.transparent,be),null,Z,C.debugBuffer,C.quadTriangleIndexBuffer,C.debugSegments),E.draw(v,_.LINE_STRIP,M,B,W,Rr.disabled,bc(k,a.aM.red),Y,Z,C.debugBuffer,C.tileBorderIndexBuffer,C.debugSegments)}function rw(C,l,m){const v=C.context,_=v.gl,k=C.colorModeForRenderPass(),E=new Kn(_.LEQUAL,Kn.ReadWrite,C.depthRangeFor3D),M=C.useProgram("terrain"),B=l.getTerrainMesh();v.bindFramebuffer.set(null),v.viewport.set([0,0,C.width,C.height]);for(const W of m){const Z=C.renderToTexture.getTexture(W),Y=l.getTerrainData(W.tileID);v.activeTexture.set(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,Z.texture);const le=C.transform.calculatePosMatrix(W.tileID.toUnwrapped()),he=l.getMeshFrameDelta(C.transform.zoom),fe=C.transform.calculateFogMatrix(W.tileID.toUnwrapped()),be=lp(le,he,fe,C.style.sky,C.transform.pitch);M.draw(v,_.TRIANGLES,E,Xr.disabled,k,Rr.backCCW,be,Y,"terrain",B.vertexBuffer,B.indexBuffer,B.segments)}}class bg{constructor(l,m,v){this.vertexBuffer=l,this.indexBuffer=m,this.segments=v}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class _g{constructor(l,m){this.context=new XT(l),this.transform=m,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Kt.maxUnderzooming+Kt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new op}resize(l,m,v){if(this.width=Math.floor(l*v),this.height=Math.floor(m*v),this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const l=this.context,m=new a.aX;m.emplaceBack(0,0),m.emplaceBack(a.X,0),m.emplaceBack(0,a.X),m.emplaceBack(a.X,a.X),this.tileExtentBuffer=l.createVertexBuffer(m,vc.members),this.tileExtentSegments=a.a0.simpleSegment(0,0,4,2);const v=new a.aX;v.emplaceBack(0,0),v.emplaceBack(a.X,0),v.emplaceBack(0,a.X),v.emplaceBack(a.X,a.X),this.debugBuffer=l.createVertexBuffer(v,vc.members),this.debugSegments=a.a0.simpleSegment(0,0,4,5);const _=new a.$;_.emplaceBack(0,0,0,0),_.emplaceBack(a.X,0,a.X,0),_.emplaceBack(0,a.X,0,a.X),_.emplaceBack(a.X,a.X,a.X,a.X),this.rasterBoundsBuffer=l.createVertexBuffer(_,br.members),this.rasterBoundsSegments=a.a0.simpleSegment(0,0,4,2);const k=new a.aX;k.emplaceBack(0,0),k.emplaceBack(1,0),k.emplaceBack(0,1),k.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(k,vc.members),this.viewportSegments=a.a0.simpleSegment(0,0,4,2);const E=new a.aZ;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(E);const M=new a.aY;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(M);const B=this.context.gl;this.stencilClearMode=new Xr({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO)}clearStencil(){const l=this.context,m=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const v=a.H();a.aP(v,0,this.width,this.height,0,0,1),a.K(v,v,[m.drawingBufferWidth,m.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,m.TRIANGLES,Kn.disabled,this.stencilClearMode,ki.disabled,Rr.disabled,is(v),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,m){if(this.currentStencilSource===l.source||!l.isTileClipped()||!m||!m.length)return;this.currentStencilSource=l.source;const v=this.context,_=v.gl;this.nextStencilID+m.length>256&&this.clearStencil(),v.setColorMode(ki.disabled),v.setDepthMode(Kn.disabled);const k=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const E of m){const M=this._tileClippingMaskIDs[E.key]=this.nextStencilID++,B=this.style.map.terrain&&this.style.map.terrain.getTerrainData(E);k.draw(v,_.TRIANGLES,Kn.disabled,new Xr({func:_.ALWAYS,mask:0},M,255,_.KEEP,_.KEEP,_.REPLACE),ki.disabled,Rr.disabled,is(E.posMatrix),B,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,m=this.context.gl;return new Xr({func:m.NOTEQUAL,mask:255},l,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(l){const m=this.context.gl;return new Xr({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,m.KEEP,m.KEEP,m.REPLACE)}stencilConfigForOverlap(l){const m=this.context.gl,v=l.sort((E,M)=>M.overscaledZ-E.overscaledZ),_=v[v.length-1].overscaledZ,k=v[0].overscaledZ-_+1;if(k>1){this.currentStencilSource=void 0,this.nextStencilID+k>256&&this.clearStencil();const E={};for(let M=0;M<k;M++)E[M+_]=new Xr({func:m.GEQUAL,mask:255},M+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=k,[E,v]}return[{[_]:Xr.disabled},v]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new ki([l.CONSTANT_COLOR,l.ONE],new a.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ki.unblended:ki.alphaBlended}depthModeForSublayer(l,m,v){if(!this.opaquePassEnabledForLayer())return Kn.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Kn(v||this.context.gl.LEQUAL,m,[_,_])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,m){this.style=l,this.options=m,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(y.now()),this.imageManager.beginFrame();const v=this.style._order,_=this.style.sourceCaches,k={},E={},M={};for(const B in _){const W=_[B];W.used&&W.prepare(this.context),k[B]=W.getVisibleCoordinates(),E[B]=k[B].slice().reverse(),M[B]=W.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let B=0;B<v.length;B++)if(this.style._layers[v[B]].is3D()){this.opaquePassCutoff=B;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const B of v){const W=this.style._layers[B];if(!W.hasOffscreenPass()||W.isHidden(this.transform.zoom))continue;const Z=E[W.source];(W.type==="custom"||Z.length)&&this.renderLayer(this,_[W.source],W,Z)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:m.showOverdrawInspector?a.aM.black:a.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(B,W){const Z=B.context,Y=Z.gl,le=((Ae,De,ge)=>({u_sky_color:Ae.properties.get("sky-color"),u_horizon_color:Ae.properties.get("horizon-color"),u_horizon:(De.height/2+De.getHorizon())*ge,u_sky_horizon_blend:Ae.properties.get("sky-horizon-blend")*De.height/2*ge}))(W,B.style.map.transform,B.pixelRatio),he=new Kn(Y.LEQUAL,Kn.ReadWrite,[0,1]),fe=Xr.disabled,be=B.colorModeForRenderPass(),je=B.useProgram("sky");if(!W.mesh){const Ae=new a.aX;Ae.emplaceBack(-1,-1),Ae.emplaceBack(1,-1),Ae.emplaceBack(1,1),Ae.emplaceBack(-1,1);const De=new a.aY;De.emplaceBack(0,1,2),De.emplaceBack(0,2,3),W.mesh=new bg(Z.createVertexBuffer(Ae,vc.members),Z.createIndexBuffer(De),a.a0.simpleSegment(0,0,Ae.length,De.length))}je.draw(Z,Y.TRIANGLES,he,fe,be,Rr.disabled,le,void 0,"sky",W.mesh.vertexBuffer,W.mesh.indexBuffer,W.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=m.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const B=this.style._layers[v[this.currentLayer]],W=_[B.source],Z=k[B.source];this._renderTileClippingMasks(B,Z),this.renderLayer(this,W,B,Z)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const B=this.style._layers[v[this.currentLayer]],W=_[B.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(B))continue;const Z=(B.type==="symbol"?M:E)[B.source];this._renderTileClippingMasks(B,k[B.source]),this.renderLayer(this,W,B,Z)}if(this.options.showTileBoundaries){const B=function(W,Z){let Y=null;const le=Object.values(W._layers).flatMap(je=>je.source&&!je.isHidden(Z)?[W.sourceCaches[je.source]]:[]),he=le.filter(je=>je.getSource().type==="vector"),fe=le.filter(je=>je.getSource().type!=="vector"),be=je=>{(!Y||Y.getSource().maxzoom<je.getSource().maxzoom)&&(Y=je)};return he.forEach(je=>be(je)),Y||fe.forEach(je=>be(je)),Y}(this.style,this.transform.zoom);B&&function(W,Z,Y){for(let le=0;le<Y.length;le++)nw(W,Z,Y[le])}(this,B,B.getVisibleCoordinates())}this.options.showPadding&&function(B){const W=B.transform.padding;hd(B,B.transform.height-(W.top||0),3,zx),hd(B,W.bottom||0,3,xr),tw(B,W.left||0,3,xg),tw(B,B.transform.width-(W.right||0),3,KT);const Z=B.transform.centerPoint;(function(Y,le,he,fe){vg(Y,le-1,he-10,2,20,fe),vg(Y,le-10,he-1,20,2,fe)})(B,Z.x,B.transform.height-Z.y,ew)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(l){if(!this.style||!this.style.map||!this.style.map.terrain)return;const m=this.terrainFacilitator.matrix,v=this.transform.modelViewProjectionMatrix;let _=this.terrainFacilitator.dirty;_||(_=l?!a.a_(m,v):!a.a$(m,v)),_||(_=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),_&&(a.b0(m,v),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(k,E){const M=k.context,B=M.gl,W=ki.unblended,Z=new Kn(B.LEQUAL,Kn.ReadWrite,[0,1]),Y=E.getTerrainMesh(),le=E.sourceCache.getRenderableTiles(),he=k.useProgram("terrainDepth");M.bindFramebuffer.set(E.getFramebuffer("depth").framebuffer),M.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),M.clear({color:a.aM.transparent,depth:1});for(const fe of le){const be=E.getTerrainData(fe.tileID),je={u_matrix:k.transform.calculatePosMatrix(fe.tileID.toUnwrapped()),u_ele_delta:E.getMeshFrameDelta(k.transform.zoom)};he.draw(M,B.TRIANGLES,Z,Xr.disabled,W,Rr.backCCW,je,be,"terrain",Y.vertexBuffer,Y.indexBuffer,Y.segments)}M.bindFramebuffer.set(null),M.viewport.set([0,0,k.width,k.height])}(this,this.style.map.terrain),function(k,E){const M=k.context,B=M.gl,W=ki.unblended,Z=new Kn(B.LEQUAL,Kn.ReadWrite,[0,1]),Y=E.getTerrainMesh(),le=E.getCoordsTexture(),he=E.sourceCache.getRenderableTiles(),fe=k.useProgram("terrainCoords");M.bindFramebuffer.set(E.getFramebuffer("coords").framebuffer),M.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),M.clear({color:a.aM.transparent,depth:1}),E.coordsIndex=[];for(const be of he){const je=E.getTerrainData(be.tileID);M.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,le.texture);const Ae={u_matrix:k.transform.calculatePosMatrix(be.tileID.toUnwrapped()),u_terrain_coords_id:(255-E.coordsIndex.length)/255,u_texture:0,u_ele_delta:E.getMeshFrameDelta(k.transform.zoom)};fe.draw(M,B.TRIANGLES,Z,Xr.disabled,W,Rr.backCCW,Ae,je,"terrain",Y.vertexBuffer,Y.indexBuffer,Y.segments),E.coordsIndex.push(be.tileID.key)}M.bindFramebuffer.set(null),M.viewport.set([0,0,k.width,k.height])}(this,this.style.map.terrain))}renderLayer(l,m,v,_){if(!v.isHidden(this.transform.zoom)&&(v.type==="background"||v.type==="custom"||(_||[]).length))switch(this.id=v.id,v.type){case"symbol":(function(k,E,M,B,W){if(k.renderPass!=="translucent")return;const Z=Xr.disabled,Y=k.colorModeForRenderPass();(M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(le,he,fe,be,je,Ae,De,ge,Ue){const Xe=he.transform,et=xc(),mt=je==="map",jt=Ae==="map";for(const Ut of le){const Zt=be.getTile(Ut),Ft=Zt.getBucket(fe);if(!Ft||!Ft.text||!Ft.text.segments.get().length)continue;const Dt=a.ag(Ft.textSizeData,Xe.zoom),pn=Un(Zt,1,he.transform.zoom),Mn=Ui(Ut.posMatrix,jt,mt,he.transform,pn),Nt=fe.layout.get("icon-text-fit")!=="none"&&Ft.hasIconData();if(Dt){const Ht=Math.pow(2,Xe.zoom-Zt.tileID.overscaledZ),En=he.style.map.terrain?(Qn,nr)=>he.style.map.terrain.getElevation(Ut,Qn,nr):null,ti=et.translatePosition(Xe,Zt,De,ge);ad(Ft,mt,jt,Ue,Xe,Mn,Ut.posMatrix,Ht,Dt,Nt,et,ti,Ut.toUnwrapped(),En)}}}(B,k,M,E,M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),W),M.paint.get("icon-opacity").constantOr(1)!==0&&Ox(k,E,M,B,!1,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),M.layout.get("icon-rotation-alignment"),M.layout.get("icon-pitch-alignment"),M.layout.get("icon-keep-upright"),Z,Y),M.paint.get("text-opacity").constantOr(1)!==0&&Ox(k,E,M,B,!0,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.layout.get("text-keep-upright"),Z,Y),E.map.showCollisionBoxes&&(fp(k,E,M,B,!0),fp(k,E,M,B,!1))})(l,m,v,_,this.style.placement.variableOffsets);break;case"circle":(function(k,E,M,B){if(k.renderPass!=="translucent")return;const W=M.paint.get("circle-opacity"),Z=M.paint.get("circle-stroke-width"),Y=M.paint.get("circle-stroke-opacity"),le=!M.layout.get("circle-sort-key").isConstant();if(W.constantOr(1)===0&&(Z.constantOr(1)===0||Y.constantOr(1)===0))return;const he=k.context,fe=he.gl,be=k.depthModeForSublayer(0,Kn.ReadOnly),je=Xr.disabled,Ae=k.colorModeForRenderPass(),De=[];for(let ge=0;ge<B.length;ge++){const Ue=B[ge],Xe=E.getTile(Ue),et=Xe.getBucket(M);if(!et)continue;const mt=et.programConfigurations.get(M.id),jt=k.useProgram("circle",mt),Ut=et.layoutVertexBuffer,Zt=et.indexBuffer,Ft=k.style.map.terrain&&k.style.map.terrain.getTerrainData(Ue),Dt={programConfiguration:mt,program:jt,layoutVertexBuffer:Ut,indexBuffer:Zt,uniformValues:sd(k,Ue,Xe,M),terrainData:Ft};if(le){const pn=et.segments.get();for(const Mn of pn)De.push({segments:new a.a0([Mn]),sortKey:Mn.sortKey,state:Dt})}else De.push({segments:et.segments,sortKey:0,state:Dt})}le&&De.sort((ge,Ue)=>ge.sortKey-Ue.sortKey);for(const ge of De){const{programConfiguration:Ue,program:Xe,layoutVertexBuffer:et,indexBuffer:mt,uniformValues:jt,terrainData:Ut}=ge.state;Xe.draw(he,fe.TRIANGLES,be,je,Ae,Rr.disabled,jt,Ut,M.id,et,mt,ge.segments,M.paint,k.transform.zoom,Ue)}})(l,m,v,_);break;case"heatmap":(function(k,E,M,B){if(M.paint.get("heatmap-opacity")===0)return;const W=k.context;if(k.style.map.terrain){for(const Z of B){const Y=E.getTile(Z);E.hasRenderableParent(Z)||(k.renderPass==="offscreen"?Ex(k,Y,M,Z):k.renderPass==="translucent"&&ah(k,M,Z))}W.viewport.set([0,0,k.width,k.height])}else k.renderPass==="offscreen"?function(Z,Y,le,he){const fe=Z.context,be=fe.gl,je=Xr.disabled,Ae=new ki([be.ONE,be.ONE],a.aM.transparent,[!0,!0,!0,!0]);(function(De,ge,Ue){const Xe=De.gl;De.activeTexture.set(Xe.TEXTURE1),De.viewport.set([0,0,ge.width/4,ge.height/4]);let et=Ue.heatmapFbos.get(a.aU);et?(Xe.bindTexture(Xe.TEXTURE_2D,et.colorAttachment.get()),De.bindFramebuffer.set(et.framebuffer)):(et=mp(De,ge.width/4,ge.height/4),Ue.heatmapFbos.set(a.aU,et))})(fe,Z,le),fe.clear({color:a.aM.transparent});for(let De=0;De<he.length;De++){const ge=he[De];if(Y.hasRenderableParent(ge))continue;const Ue=Y.getTile(ge),Xe=Ue.getBucket(le);if(!Xe)continue;const et=Xe.programConfigurations.get(le.id),mt=Z.useProgram("heatmap",et),{zoom:jt}=Z.transform;mt.draw(fe,be.TRIANGLES,Kn.disabled,je,Ae,Rr.disabled,Fs(ge.posMatrix,Ue,jt,le.paint.get("heatmap-intensity")),null,le.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,le.paint,Z.transform.zoom,et)}fe.viewport.set([0,0,Z.width,Z.height])}(k,E,M,B):k.renderPass==="translucent"&&function(Z,Y){const le=Z.context,he=le.gl;le.setColorMode(Z.colorModeForRenderPass());const fe=Y.heatmapFbos.get(a.aU);fe&&(le.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_2D,fe.colorAttachment.get()),le.activeTexture.set(he.TEXTURE1),gp(le,Y).bind(he.LINEAR,he.CLAMP_TO_EDGE),Z.useProgram("heatmapTexture").draw(le,he.TRIANGLES,Kn.disabled,Xr.disabled,Z.colorModeForRenderPass(),Rr.disabled,th(Z,Y,0,1),null,Y.id,Z.viewportBuffer,Z.quadTriangleIndexBuffer,Z.viewportSegments,Y.paint,Z.transform.zoom))}(k,M)})(l,m,v,_);break;case"line":(function(k,E,M,B){if(k.renderPass!=="translucent")return;const W=M.paint.get("line-opacity"),Z=M.paint.get("line-width");if(W.constantOr(1)===0||Z.constantOr(1)===0)return;const Y=k.depthModeForSublayer(0,Kn.ReadOnly),le=k.colorModeForRenderPass(),he=M.paint.get("line-dasharray"),fe=M.paint.get("line-pattern"),be=fe.constantOr(1),je=M.paint.get("line-gradient"),Ae=M.getCrossfadeParameters(),De=be?"linePattern":he?"lineSDF":je?"lineGradient":"line",ge=k.context,Ue=ge.gl;let Xe=!0;for(const et of B){const mt=E.getTile(et);if(be&&!mt.patternsLoaded())continue;const jt=mt.getBucket(M);if(!jt)continue;const Ut=jt.programConfigurations.get(M.id),Zt=k.context.program.get(),Ft=k.useProgram(De,Ut),Dt=Xe||Ft.program!==Zt,pn=k.style.map.terrain&&k.style.map.terrain.getTerrainData(et),Mn=fe.constantOr(null);if(Mn&&mt.imageAtlas){const En=mt.imageAtlas,ti=En.patternPositions[Mn.to.toString()],Qn=En.patternPositions[Mn.from.toString()];ti&&Qn&&Ut.setConstantPatternPositions(ti,Qn)}const Nt=pn?et:null,Ht=be?fa(k,mt,M,Ae,Nt):he?vx(k,mt,M,he,Ae,Nt):je?zl(k,mt,M,jt.lineClipsArray.length,Nt):nh(k,mt,M,Nt);if(be)ge.activeTexture.set(Ue.TEXTURE0),mt.imageAtlasTexture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE),Ut.updatePaintBuffers(Ae);else if(he&&(Dt||k.lineAtlas.dirty))ge.activeTexture.set(Ue.TEXTURE0),k.lineAtlas.bind(ge);else if(je){const En=jt.gradients[M.id];let ti=En.texture;if(M.gradientVersion!==En.version){let Qn=256;if(M.stepInterpolant){const nr=E.getSource().maxzoom,ni=et.canonical.z===nr?Math.ceil(1<<k.transform.maxZoom-et.canonical.z):1;Qn=a.ac(a.aV(jt.maxLineLength/a.X*1024*ni),256,ge.maxTextureSize)}En.gradient=a.aW({expression:M.gradientExpression(),evaluationKey:"lineProgress",resolution:Qn,image:En.gradient||void 0,clips:jt.lineClipsArray}),En.texture?En.texture.update(En.gradient):En.texture=new ae(ge,En.gradient,Ue.RGBA),En.version=M.gradientVersion,ti=En.texture}ge.activeTexture.set(Ue.TEXTURE0),ti.bind(M.stepInterpolant?Ue.NEAREST:Ue.LINEAR,Ue.CLAMP_TO_EDGE)}Ft.draw(ge,Ue.TRIANGLES,Y,k.stencilModeForClipping(et),le,Rr.disabled,Ht,pn,M.id,jt.layoutVertexBuffer,jt.indexBuffer,jt.segments,M.paint,k.transform.zoom,Ut,jt.layoutVertexBuffer2),Xe=!1}})(l,m,v,_);break;case"fill":(function(k,E,M,B){const W=M.paint.get("fill-color"),Z=M.paint.get("fill-opacity");if(Z.constantOr(1)===0)return;const Y=k.colorModeForRenderPass(),le=M.paint.get("fill-pattern"),he=k.opaquePassEnabledForLayer()&&!le.constantOr(1)&&W.constantOr(a.aM.transparent).a===1&&Z.constantOr(0)===1?"opaque":"translucent";if(k.renderPass===he){const fe=k.depthModeForSublayer(1,k.renderPass==="opaque"?Kn.ReadWrite:Kn.ReadOnly);yp(k,E,M,B,fe,Y,!1)}if(k.renderPass==="translucent"&&M.paint.get("fill-antialias")){const fe=k.depthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,Kn.ReadOnly);yp(k,E,M,B,fe,Y,!0)}})(l,m,v,_);break;case"fill-extrusion":(function(k,E,M,B){const W=M.paint.get("fill-extrusion-opacity");if(W!==0&&k.renderPass==="translucent"){const Z=new Kn(k.context.gl.LEQUAL,Kn.ReadWrite,k.depthRangeFor3D);if(W!==1||M.paint.get("fill-extrusion-pattern").constantOr(1))yg(k,E,M,B,Z,Xr.disabled,ki.disabled),yg(k,E,M,B,Z,k.stencilModeFor3D(),k.colorModeForRenderPass());else{const Y=k.colorModeForRenderPass();yg(k,E,M,B,Z,Xr.disabled,Y)}}})(l,m,v,_);break;case"hillshade":(function(k,E,M,B){if(k.renderPass!=="offscreen"&&k.renderPass!=="translucent")return;const W=k.context,Z=k.depthModeForSublayer(0,Kn.ReadOnly),Y=k.colorModeForRenderPass(),[le,he]=k.renderPass==="translucent"?k.stencilConfigForOverlap(B):[{},B];for(const fe of he){const be=E.getTile(fe);be.needsHillshadePrepare!==void 0&&be.needsHillshadePrepare&&k.renderPass==="offscreen"?ud(k,be,M,Z,Xr.disabled,Y):k.renderPass==="translucent"&&cd(k,fe,be,M,Z,le[fe.overscaledZ],Y)}W.viewport.set([0,0,k.width,k.height])})(l,m,v,_);break;case"raster":(function(k,E,M,B){if(k.renderPass!=="translucent"||M.paint.get("raster-opacity")===0||!B.length)return;const W=k.context,Z=W.gl,Y=E.getSource(),le=k.useProgram("raster"),he=k.colorModeForRenderPass(),[fe,be]=Y instanceof ur?[{},B]:k.stencilConfigForOverlap(B),je=be[be.length-1].overscaledZ,Ae=!k.options.moving;for(const De of be){const ge=k.depthModeForSublayer(De.overscaledZ-je,M.paint.get("raster-opacity")===1?Kn.ReadWrite:Kn.ReadOnly,Z.LESS),Ue=E.getTile(De);Ue.registerFadeDuration(M.paint.get("raster-fade-duration"));const Xe=E.findLoadedParent(De,0),et=E.findLoadedSibling(De),mt=J_(Ue,Xe||et||null,E,M,k.transform,k.style.map.terrain);let jt,Ut;const Zt=M.paint.get("raster-resampling")==="nearest"?Z.NEAREST:Z.LINEAR;W.activeTexture.set(Z.TEXTURE0),Ue.texture.bind(Zt,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),W.activeTexture.set(Z.TEXTURE1),Xe?(Xe.texture.bind(Zt,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),jt=Math.pow(2,Xe.tileID.overscaledZ-Ue.tileID.overscaledZ),Ut=[Ue.tileID.canonical.x*jt%1,Ue.tileID.canonical.y*jt%1]):Ue.texture.bind(Zt,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),Ue.texture.useMipmap&&W.extTextureFilterAnisotropic&&k.transform.pitch>20&&Z.texParameterf(Z.TEXTURE_2D,W.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,W.extTextureFilterAnisotropicMax);const Ft=k.style.map.terrain&&k.style.map.terrain.getTerrainData(De),Dt=Ft?De:null,pn=Dt?Dt.posMatrix:k.transform.calculatePosMatrix(De.toUnwrapped(),Ae),Mn=ug(pn,Ut||[0,0],jt||1,mt,M);Y instanceof ur?le.draw(W,Z.TRIANGLES,ge,Xr.disabled,he,Rr.disabled,Mn,Ft,M.id,Y.boundsBuffer,k.quadTriangleIndexBuffer,Y.boundsSegments):le.draw(W,Z.TRIANGLES,ge,fe[De.overscaledZ],he,Rr.disabled,Mn,Ft,M.id,k.rasterBoundsBuffer,k.quadTriangleIndexBuffer,k.rasterBoundsSegments)}})(l,m,v,_);break;case"background":(function(k,E,M,B){const W=M.paint.get("background-color"),Z=M.paint.get("background-opacity");if(Z===0)return;const Y=k.context,le=Y.gl,he=k.transform,fe=he.tileSize,be=M.paint.get("background-pattern");if(k.isPatternMissing(be))return;const je=!be&&W.a===1&&Z===1&&k.opaquePassEnabledForLayer()?"opaque":"translucent";if(k.renderPass!==je)return;const Ae=Xr.disabled,De=k.depthModeForSublayer(0,je==="opaque"?Kn.ReadWrite:Kn.ReadOnly),ge=k.colorModeForRenderPass(),Ue=k.useProgram(be?"backgroundPattern":"background"),Xe=B||he.coveringTiles({tileSize:fe,terrain:k.style.map.terrain});be&&(Y.activeTexture.set(le.TEXTURE0),k.imageManager.bind(k.context));const et=M.getCrossfadeParameters();for(const mt of Xe){const jt=B?mt.posMatrix:k.transform.calculatePosMatrix(mt.toUnwrapped()),Ut=be?He(jt,Z,k,be,{tileID:mt,tileSize:fe},et):ve(jt,Z,W),Zt=k.style.map.terrain&&k.style.map.terrain.getTerrainData(mt);Ue.draw(Y,le.TRIANGLES,De,Ae,ge,Rr.disabled,Ut,Zt,M.id,k.tileExtentBuffer,k.quadTriangleIndexBuffer,k.tileExtentSegments)}})(l,0,v,_);break;case"custom":(function(k,E,M){const B=k.context,W=M.implementation;if(k.renderPass==="offscreen"){const Z=W.prerender;Z&&(k.setCustomLayerDefaults(),B.setColorMode(k.colorModeForRenderPass()),Z.call(W,B.gl,k.transform.customLayerMatrix()),B.setDirty(),k.setBaseState())}else if(k.renderPass==="translucent"){k.setCustomLayerDefaults(),B.setColorMode(k.colorModeForRenderPass()),B.setStencilMode(Xr.disabled);const Z=W.renderingMode==="3d"?new Kn(k.context.gl.LEQUAL,Kn.ReadWrite,k.depthRangeFor3D):k.depthModeForSublayer(0,Kn.ReadOnly);B.setDepthMode(Z),W.render(B.gl,k.transform.customLayerMatrix(),{farZ:k.transform.farZ,nearZ:k.transform.nearZ,fov:k.transform._fov,modelViewProjectionMatrix:k.transform.modelViewProjectionMatrix,projectionMatrix:k.transform.projectionMatrix}),B.setDirty(),k.setBaseState(),B.bindFramebuffer.set(null)}})(l,0,v)}}translatePosMatrix(l,m,v,_,k){if(!v[0]&&!v[1])return l;const E=k?_==="map"?this.transform.angle:0:_==="viewport"?-this.transform.angle:0;if(E){const W=Math.sin(E),Z=Math.cos(E);v=[v[0]*Z-v[1]*W,v[0]*W+v[1]*Z]}const M=[k?v[0]:Un(m,v[0],this.transform.zoom),k?v[1]:Un(m,v[1],this.transform.zoom),0],B=new Float32Array(16);return a.J(B,l,M),B}saveTileTexture(l){const m=this._tileTextures[l.size[0]];m?m.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const m=this._tileTextures[l];return m&&m.length>0?m.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const m=this.imageManager.getPattern(l.from.toString()),v=this.imageManager.getPattern(l.to.toString());return!m||!v}useProgram(l,m){this.cache=this.cache||{};const v=l+(m?m.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[v]||(this.cache[v]=new nd(this.context,Al[l],m,lt[l],this._showOverdrawInspector,this.style.map.terrain)),this.cache[v]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ae(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:m}=this.context.gl;return this.width!==l||this.height!==m}}class dd{constructor(l,m){this.points=l,this.planes=m}static fromInvProjectionMatrix(l,m,v){const _=Math.pow(2,v),k=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(M=>{const B=1/(M=a.af([],M,l))[3]/m*_;return a.b1(M,M,[B,B,1/M[3],B])}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(M=>{const B=function(le,he){var fe=he[0],be=he[1],je=he[2],Ae=fe*fe+be*be+je*je;return Ae>0&&(Ae=1/Math.sqrt(Ae)),le[0]=he[0]*Ae,le[1]=he[1]*Ae,le[2]=he[2]*Ae,le}([],function(le,he,fe){var be=he[0],je=he[1],Ae=he[2],De=fe[0],ge=fe[1],Ue=fe[2];return le[0]=je*Ue-Ae*ge,le[1]=Ae*De-be*Ue,le[2]=be*ge-je*De,le}([],X([],k[M[0]],k[M[1]]),X([],k[M[2]],k[M[1]]))),W=-((Z=B)[0]*(Y=k[M[1]])[0]+Z[1]*Y[1]+Z[2]*Y[2]);var Z,Y;return B.concat(W)});return new dd(k,E)}}class fd{constructor(l,m){this.min=l,this.max=m,this.center=function(v,_,k){return v[0]=.5*_[0],v[1]=.5*_[1],v[2]=.5*_[2],v}([],function(v,_,k){return v[0]=_[0]+k[0],v[1]=_[1]+k[1],v[2]=_[2]+k[2],v}([],this.min,this.max))}quadrant(l){const m=[l%2==0,l<2],v=Q(this.min),_=Q(this.max);for(let k=0;k<m.length;k++)v[k]=m[k]?this.min[k]:this.center[k],_[k]=m[k]?this.center[k]:this.max[k];return _[2]=this.max[2],new fd(v,_)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersects(l){const m=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let v=!0;for(let _=0;_<l.planes.length;_++){const k=l.planes[_];let E=0;for(let M=0;M<m.length;M++)a.b2(k,m[M])>=0&&E++;if(E===0)return 0;E!==m.length&&(v=!1)}if(v)return 2;for(let _=0;_<3;_++){let k=Number.MAX_VALUE,E=-Number.MAX_VALUE;for(let M=0;M<l.points.length;M++){const B=l.points[M][_]-this.min[_];k=Math.min(k,B),E=Math.max(E,B)}if(E<0||k>this.max[_]-this.min[_])return 0}return 1}}class pd{constructor(l=0,m=0,v=0,_=0){if(isNaN(l)||l<0||isNaN(m)||m<0||isNaN(v)||v<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=m,this.left=v,this.right=_}interpolate(l,m,v){return m.top!=null&&l.top!=null&&(this.top=a.y.number(l.top,m.top,v)),m.bottom!=null&&l.bottom!=null&&(this.bottom=a.y.number(l.bottom,m.bottom,v)),m.left!=null&&l.left!=null&&(this.left=a.y.number(l.left,m.left,v)),m.right!=null&&l.right!=null&&(this.right=a.y.number(l.right,m.right,v)),this}getCenter(l,m){const v=a.ac((this.left+l-this.right)/2,0,l),_=a.ac((this.top+m-this.bottom)/2,0,m);return new a.P(v,_)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new pd(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Ix=85.051129;class md{constructor(l,m,v,_,k){this.tileSize=512,this._renderWorldCopies=k===void 0||!!k,this._minZoom=l||0,this._maxZoom=m||22,this._minPitch=v??0,this._maxPitch=_??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new pd,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const l=new md(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.apply(this),l}apply(l){this.tileSize=l.tileSize,this.latRange=l.latRange,this.lngRange=l.lngRange,this.width=l.width,this.height=l.height,this._center=l._center,this._elevation=l._elevation,this.minElevationForCurrentTile=l.minElevationForCurrentTile,this.zoom=l.zoom,this.angle=l.angle,this._fov=l._fov,this._pitch=l._pitch,this._unmodified=l._unmodified,this._edgeInsets=l._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(l){const m=-a.b3(l,-180,180)*Math.PI/180;this.angle!==m&&(this._unmodified=!1,this.angle=m,this._calcMatrices(),this.rotationMatrix=function(){var v=new a.A(4);return a.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}(),function(v,_,k){var E=_[0],M=_[1],B=_[2],W=_[3],Z=Math.sin(k),Y=Math.cos(k);v[0]=E*Y+B*Z,v[1]=M*Y+W*Z,v[2]=E*-Z+B*Y,v[3]=M*-Z+W*Y}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const m=a.ac(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==m&&(this._unmodified=!1,this._pitch=m,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(l){const m=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==m&&(this._unmodified=!1,this._zoom=m,this.tileZoom=Math.max(0,Math.floor(m)),this.scale=this.zoomScale(m),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,m,v){this._unmodified=!1,this._edgeInsets.interpolate(l,m,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const m=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,m)}getVisibleUnwrappedCoordinates(l){const m=[new a.b4(0,l)];if(this._renderWorldCopies){const v=this.pointCoordinate(new a.P(0,0)),_=this.pointCoordinate(new a.P(this.width,0)),k=this.pointCoordinate(new a.P(this.width,this.height)),E=this.pointCoordinate(new a.P(0,this.height)),M=Math.floor(Math.min(v.x,_.x,k.x,E.x)),B=Math.floor(Math.max(v.x,_.x,k.x,E.x)),W=1;for(let Z=M-W;Z<=B+W;Z++)Z!==0&&m.push(new a.b4(Z,l))}return m}coveringTiles(l){var m,v;let _=this.coveringZoomLevel(l);const k=_;if(l.minzoom!==void 0&&_<l.minzoom)return[];l.maxzoom!==void 0&&_>l.maxzoom&&(_=l.maxzoom);const E=this.pointCoordinate(this.getCameraPoint()),M=a.Z.fromLngLat(this.center),B=Math.pow(2,_),W=[B*E.x,B*E.y,0],Z=[B*M.x,B*M.y,0],Y=dd.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,_);let le=l.minzoom||0;!l.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(le=_);const he=l.terrain?2/Math.min(this.tileSize,l.tileSize)*this.tileSize:3,fe=ge=>({aabb:new fd([ge*B,0,0],[(ge+1)*B,B,0]),zoom:0,x:0,y:0,wrap:ge,fullyVisible:!1}),be=[],je=[],Ae=_,De=l.reparseOverscaled?k:_;if(this._renderWorldCopies)for(let ge=1;ge<=3;ge++)be.push(fe(-ge)),be.push(fe(ge));for(be.push(fe(0));be.length>0;){const ge=be.pop(),Ue=ge.x,Xe=ge.y;let et=ge.fullyVisible;if(!et){const Ft=ge.aabb.intersects(Y);if(Ft===0)continue;et=Ft===2}const mt=l.terrain?W:Z,jt=ge.aabb.distanceX(mt),Ut=ge.aabb.distanceY(mt),Zt=Math.max(Math.abs(jt),Math.abs(Ut));if(ge.zoom===Ae||Zt>he+(1<<Ae-ge.zoom)-2&&ge.zoom>=le){const Ft=Ae-ge.zoom,Dt=W[0]-.5-(Ue<<Ft),pn=W[1]-.5-(Xe<<Ft);je.push({tileID:new a.S(ge.zoom===Ae?De:ge.zoom,ge.wrap,ge.zoom,Ue,Xe),distanceSq:K([Z[0]-.5-Ue,Z[1]-.5-Xe]),tileDistanceToCamera:Math.sqrt(Dt*Dt+pn*pn)})}else for(let Ft=0;Ft<4;Ft++){const Dt=(Ue<<1)+Ft%2,pn=(Xe<<1)+(Ft>>1),Mn=ge.zoom+1;let Nt=ge.aabb.quadrant(Ft);if(l.terrain){const Ht=new a.S(Mn,ge.wrap,Mn,Dt,pn),En=l.terrain.getMinMaxElevation(Ht),ti=(m=En.minElevation)!==null&&m!==void 0?m:this.elevation,Qn=(v=En.maxElevation)!==null&&v!==void 0?v:this.elevation;Nt=new fd([Nt.min[0],Nt.min[1],ti],[Nt.max[0],Nt.max[1],Qn])}be.push({aabb:Nt,zoom:Mn,x:Dt,y:pn,wrap:ge.wrap,fullyVisible:et})}}return je.sort((ge,Ue)=>ge.distanceSq-Ue.distanceSq).map(ge=>ge.tileID)}resize(l,m){this.width=l,this.height=m,this.pixelsToGLUnits=[2/l,-2/m],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const m=a.ac(l.lat,-85.051129,Ix);return new a.P(a.O(l.lng)*this.worldSize,a.Q(m)*this.worldSize)}unproject(l){return new a.Z(l.x/this.worldSize,l.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(l){const m=this.elevation,v=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,_=this.pointLocation(this.centerPoint,l),k=l.getElevationForLngLatZoom(_,this.tileZoom);if(!(this.elevation-k))return;const E=v+m-k,M=Math.cos(this._pitch)*this.cameraToCenterDistance/E/a.b5(1,_.lat),B=this.scaleZoom(M/this.tileSize);this._elevation=k,this._center=_,this.zoom=B}setLocationAtPoint(l,m){const v=this.pointCoordinate(m),_=this.pointCoordinate(this.centerPoint),k=this.locationCoordinate(l),E=new a.Z(k.x-(v.x-_.x),k.y-(v.y-_.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(l,m){return m?this.coordinatePoint(this.locationCoordinate(l),m.getElevationForLngLatZoom(l,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(l))}pointLocation(l,m){return this.coordinateLocation(this.pointCoordinate(l,m))}locationCoordinate(l){return a.Z.fromLngLat(l)}coordinateLocation(l){return l&&l.toLngLat()}pointCoordinate(l,m){if(m){const le=m.pointCoordinate(l);if(le!=null)return le}const v=[l.x,l.y,0,1],_=[l.x,l.y,1,1];a.af(v,v,this.pixelMatrixInverse),a.af(_,_,this.pixelMatrixInverse);const k=v[3],E=_[3],M=v[1]/k,B=_[1]/E,W=v[2]/k,Z=_[2]/E,Y=W===Z?0:(0-W)/(Z-W);return new a.Z(a.y.number(v[0]/k,_[0]/E,Y)/this.worldSize,a.y.number(M,B,Y)/this.worldSize)}coordinatePoint(l,m=0,v=this.pixelMatrix){const _=[l.x*this.worldSize,l.y*this.worldSize,m,1];return a.af(_,_,v),new a.P(_[0]/_[3],_[1]/_[3])}getBounds(){const l=Math.max(0,this.height/2-this.getHorizon());return new ze().extend(this.pointLocation(new a.P(0,l))).extend(this.pointLocation(new a.P(this.width,l))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new ze([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Ix])}calculateTileMatrix(l){const m=l.canonical,v=this.worldSize/this.zoomScale(m.z),_=m.x+Math.pow(2,m.z)*l.wrap,k=a.an(new Float64Array(16));return a.J(k,k,[_*v,m.y*v,0]),a.K(k,k,[v/a.X,v/a.X,1]),k}calculatePosMatrix(l,m=!1){const v=l.key,_=m?this._alignedPosMatrixCache:this._posMatrixCache;if(_[v])return _[v];const k=this.calculateTileMatrix(l);return a.L(k,m?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,k),_[v]=new Float32Array(k),_[v]}calculateFogMatrix(l){const m=l.key,v=this._fogMatrixCache;if(v[m])return v[m];const _=this.calculateTileMatrix(l);return a.L(_,this.fogMatrix,_),v[m]=new Float32Array(_),v[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(l,m){m=a.ac(+m,this.minZoom,this.maxZoom);const v={center:new a.N(l.lng,l.lat),zoom:m};let _=this.lngRange;if(!this._renderWorldCopies&&_===null){const ge=179.9999999999;_=[-ge,ge]}const k=this.tileSize*this.zoomScale(v.zoom);let E=0,M=k,B=0,W=k,Z=0,Y=0;const{x:le,y:he}=this.size;if(this.latRange){const ge=this.latRange;E=a.Q(ge[1])*k,M=a.Q(ge[0])*k,M-E<he&&(Z=he/(M-E))}_&&(B=a.b3(a.O(_[0])*k,0,k),W=a.b3(a.O(_[1])*k,0,k),W<B&&(W+=k),W-B<le&&(Y=le/(W-B)));const{x:fe,y:be}=this.project.call({worldSize:k},l);let je,Ae;const De=Math.max(Y||0,Z||0);if(De){const ge=new a.P(Y?(W+B)/2:fe,Z?(M+E)/2:be);return v.center=this.unproject.call({worldSize:k},ge).wrap(),v.zoom+=this.scaleZoom(De),v}if(this.latRange){const ge=he/2;be-ge<E&&(Ae=E+ge),be+ge>M&&(Ae=M-ge)}if(_){const ge=(B+W)/2;let Ue=fe;this._renderWorldCopies&&(Ue=a.b3(fe,ge-k/2,ge+k/2));const Xe=le/2;Ue-Xe<B&&(je=B+Xe),Ue+Xe>W&&(je=W-Xe)}if(je!==void 0||Ae!==void 0){const ge=new a.P(je??fe,Ae??be);v.center=this.unproject.call({worldSize:k},ge).wrap()}return v}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this._unmodified,{center:m,zoom:v}=this.getConstrained(this.center,this.zoom);this.center=m,this.zoom=v,this._unmodified=l,this._constraining=!1}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,m=this.point.x,v=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b5(1,this.center.lat)*this.worldSize;let _=a.an(new Float64Array(16));a.K(_,_,[this.width/2,-this.height/2,1]),a.J(_,_,[1,-1,0]),this.labelPlaneMatrix=_,_=a.an(new Float64Array(16)),a.K(_,_,[1,-1,1]),a.J(_,_,[-1,-1,0]),a.K(_,_,[2/this.width,2/this.height,1]),this.glCoordMatrix=_;const k=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),E=Math.min(this.elevation,this.minElevationForCurrentTile),M=k-E*this._pixelPerMeter/Math.cos(this._pitch),B=E<0?M:k,W=Math.PI/2+this._pitch,Z=this._fov*(.5+l.y/this.height),Y=Math.sin(Z)*B/Math.sin(a.ac(Math.PI-W-Z,.01,Math.PI-.01)),le=this.getHorizon(),he=2*Math.atan(le/this.cameraToCenterDistance)*(.5+l.y/(2*le)),fe=Math.sin(he)*B/Math.sin(a.ac(Math.PI-W-he,.01,Math.PI-.01)),be=Math.min(Y,fe);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*be+B),this.nearZ=this.height/50,_=new Float64Array(16),a.b6(_,this._fov,this.width/this.height,this.nearZ,this.farZ),_[8]=2*-l.x/this.width,_[9]=2*l.y/this.height,this.projectionMatrix=a.ae(_),a.K(_,_,[1,-1,1]),a.J(_,_,[0,0,-this.cameraToCenterDistance]),a.b7(_,_,this._pitch),a.ad(_,_,this.angle),a.J(_,_,[-m,-v,0]),this.mercatorMatrix=a.K([],_,[this.worldSize,this.worldSize,this.worldSize]),a.K(_,_,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.L(new Float64Array(16),this.labelPlaneMatrix,_),a.J(_,_,[0,0,-this.elevation]),this.modelViewProjectionMatrix=_,this.invModelViewProjectionMatrix=a.as([],_),this.fogMatrix=new Float64Array(16),a.b6(this.fogMatrix,this._fov,this.width/this.height,k,this.farZ),this.fogMatrix[8]=2*-l.x/this.width,this.fogMatrix[9]=2*l.y/this.height,a.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b7(this.fogMatrix,this.fogMatrix,this._pitch),a.ad(this.fogMatrix,this.fogMatrix,this.angle),a.J(this.fogMatrix,this.fogMatrix,[-m,-v,0]),a.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=a.L(new Float64Array(16),this.labelPlaneMatrix,_);const je=this.width%2/2,Ae=this.height%2/2,De=Math.cos(this.angle),ge=Math.sin(this.angle),Ue=m-Math.round(m)+De*je+ge*Ae,Xe=v-Math.round(v)+De*Ae+ge*je,et=new Float64Array(_);if(a.J(et,et,[Ue>.5?Ue-1:Ue,Xe>.5?Xe-1:Xe,0]),this.alignedModelViewProjectionMatrix=et,_=a.as(new Float64Array(16),this.pixelMatrix),!_)throw new Error("failed to invert matrix");this.pixelMatrixInverse=_,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const l=this.pointCoordinate(new a.P(0,0)),m=[l.x*this.worldSize,l.y*this.worldSize,0,1];return a.af(m,m,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,l))}getCameraQueryGeometry(l){const m=this.getCameraPoint();if(l.length===1)return[l[0],m];{let v=m.x,_=m.y,k=m.x,E=m.y;for(const M of l)v=Math.min(v,M.x),_=Math.min(_,M.y),k=Math.max(k,M.x),E=Math.max(E,M.y);return[new a.P(v,_),new a.P(k,_),new a.P(k,E),new a.P(v,E),new a.P(v,_)]}}lngLatToCameraDepth(l,m){const v=this.locationCoordinate(l),_=[v.x*this.worldSize,v.y*this.worldSize,m,1];return a.af(_,_,this.modelViewProjectionMatrix),_[2]/_[3]}}function xp(C,l){let m,v=!1,_=null,k=null;const E=()=>{_=null,v&&(C.apply(k,m),_=setTimeout(E,l),v=!1)};return(...M)=>(v=!0,k=this,m=M,_||E(),_)}class wg{constructor(l){this._getCurrentHash=()=>{const m=window.location.hash.replace("#","");if(this._hashName){let v;return m.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(v=_)}),(v&&v[1]||"").split("/")}return m.split("/")},this._onHashChange=()=>{const m=this._getCurrentHash();if(m.length>=3&&!m.some(v=>isNaN(v))){const v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(m[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:v,pitch:+(m[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const m=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,m)},this._removeHash=()=>{const m=this._getCurrentHash();if(m.length===0)return;const v=m.join("/");let _=v;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${v}`);let k=window.location.hash.replace(_,"");k.startsWith("#&")?k=k.slice(0,1)+k.slice(2):k==="#"&&(k="");let E=window.location.href.replace(/(#.+)?$/,k);E=E.replace("&&","&"),window.history.replaceState(window.history.state,null,E)},this._updateHash=xp(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(l){const m=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,_=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,_),E=Math.round(m.lng*k)/k,M=Math.round(m.lat*k)/k,B=this._map.getBearing(),W=this._map.getPitch();let Z="";if(Z+=l?`/${E}/${M}/${v}`:`${v}/${M}/${E}`,(B||W)&&(Z+="/"+Math.round(10*B)/10),W&&(Z+=`/${Math.round(W)}`),this._hashName){const Y=this._hashName;let le=!1;const he=window.location.hash.slice(1).split("&").map(fe=>{const be=fe.split("=")[0];return be===Y?(le=!0,`${be}=${Z}`):fe}).filter(fe=>fe);return le||he.push(`${Y}=${Z}`),`#${he.join("&")}`}return`#${Z}`}}const Sg={linearity:.3,easing:a.b8(0,0,.3,1)},Mx=a.e({deceleration:2500,maxSpeed:1400},Sg),ZT=a.e({deceleration:20,maxSpeed:1400},Sg),iw=a.e({deceleration:1e3,maxSpeed:360},Sg),kg=a.e({deceleration:1e3,maxSpeed:90},Sg);class Rx{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:y.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,m=y.now();for(;l.length>0&&m-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const m={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:k}of this._inertiaBuffer)m.zoom+=k.zoomDelta||0,m.bearing+=k.bearingDelta||0,m.pitch+=k.pitchDelta||0,k.panDelta&&m.pan._add(k.panDelta),k.around&&(m.around=k.around),k.pinchAround&&(m.pinchAround=k.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(m.pan.mag()){const k=bp(m.pan.mag(),v,a.e({},Mx,l||{}));_.offset=m.pan.mult(k.amount/m.pan.mag()),_.center=this._map.transform.center,vp(_,k)}if(m.zoom){const k=bp(m.zoom,v,ZT);_.zoom=this._map.transform.zoom+k.amount,vp(_,k)}if(m.bearing){const k=bp(m.bearing,v,iw);_.bearing=this._map.transform.bearing+a.ac(k.amount,-179,179),vp(_,k)}if(m.pitch){const k=bp(m.pitch,v,kg);_.pitch=this._map.transform.pitch+k.amount,vp(_,k)}if(_.zoom||_.bearing){const k=m.pinchAround===void 0?m.around:m.pinchAround;_.around=k?this._map.unproject(k):this._map.getCenter()}return this.clear(),a.e(_,{noMoveStart:!0})}}function vp(C,l){(!C.duration||C.duration<l.duration)&&(C.duration=l.duration,C.easing=l.easing)}function bp(C,l,m){const{maxSpeed:v,linearity:_,deceleration:k}=m,E=a.ac(C*_/(l/1e3),-v,v),M=Math.abs(E)/(k*_);return{easing:m.easing,duration:1e3*M,amount:E*(M/2)}}class $s extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,m,v,_={}){const k=b.mousePos(m.getCanvas(),v),E=m.unproject(k);super(l,a.e({point:k,lngLat:E,originalEvent:v},_)),this._defaultPrevented=!1,this.target=m}}class lh extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,m,v){const _=l==="touchend"?v.changedTouches:v.touches,k=b.touchPos(m.getCanvasContainer(),_),E=k.map(B=>m.unproject(B)),M=k.reduce((B,W,Z,Y)=>B.add(W.div(Y.length)),new a.P(0,0));super(l,{points:k,point:M,lngLats:E,lngLat:m.unproject(M),originalEvent:v}),this._defaultPrevented=!1}}class sw extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,m,v){super(l,{originalEvent:v}),this._defaultPrevented=!1}}class ow{constructor(l,m){this._map=l,this._clickTolerance=m.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new sw(l.type,this._map,l))}mousedown(l,m){return this._mousedownPos=m,this._firePreventable(new $s(l.type,this._map,l))}mouseup(l){this._map.fire(new $s(l.type,this._map,l))}click(l,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||this._map.fire(new $s(l.type,this._map,l))}dblclick(l){return this._firePreventable(new $s(l.type,this._map,l))}mouseover(l){this._map.fire(new $s(l.type,this._map,l))}mouseout(l){this._map.fire(new $s(l.type,this._map,l))}touchstart(l){return this._firePreventable(new lh(l.type,this._map,l))}touchmove(l){this._map.fire(new lh(l.type,this._map,l))}touchend(l){this._map.fire(new lh(l.type,this._map,l))}touchcancel(l){this._map.fire(new lh(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ci{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new $s(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new $s("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new $s(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ya{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.pointLocation(a.P.convert(l),this._map.terrain)}}class qo{constructor(l,m){this._map=l,this._tr=new Ya(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,m){this.isEnabled()&&l.shiftKey&&l.button===0&&(b.disableDrag(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(l,m){if(!this._active)return;const v=m;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=v,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const k=Math.min(_.x,v.x),E=Math.max(_.x,v.x),M=Math.min(_.y,v.y),B=Math.max(_.y,v.y);b.setTransform(this._box,`translate(${k}px,${M}px)`),this._box.style.width=E-k+"px",this._box.style.height=B-M+"px"}mouseupWindow(l,m){if(!this._active||l.button!==0)return;const v=this._startPos,_=m;if(this.reset(),b.suppressClick(),v.x!==_.x||v.y!==_.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:l})),{cameraAnimation:k=>k.fitScreenCoordinates(v,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,m){return this._map.fire(new a.k(l,{originalEvent:m}))}}function _p(C,l){if(C.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${C.length}, points ${l.length}`);const m={};for(let v=0;v<C.length;v++)m[C[v].identifier]=l[v];return m}class Dx{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,m,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),v.length===this.numTouches&&(this.centroid=function(_){const k=new a.P(0,0);for(const E of _)k._add(E);return k.div(_.length)}(m),this.touches=_p(v,m)))}touchmove(l,m,v){if(this.aborted||!this.centroid)return;const _=_p(v,m);for(const k in this.touches){const E=_[k];(!E||E.dist(this.touches[k])>30)&&(this.aborted=!0)}}touchend(l,m,v){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class Cg{constructor(l){this.singleTap=new Dx(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,m,v){this.singleTap.touchstart(l,m,v)}touchmove(l,m,v){this.singleTap.touchmove(l,m,v)}touchend(l,m,v){const _=this.singleTap.touchend(l,m,v);if(_){const k=l.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(_)<30;if(k&&E||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class gd{constructor(l){this._tr=new Ya(l),this._zoomIn=new Cg({numTouches:1,numTaps:2}),this._zoomOut=new Cg({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,m,v){this._zoomIn.touchstart(l,m,v),this._zoomOut.touchstart(l,m,v)}touchmove(l,m,v){this._zoomIn.touchmove(l,m,v),this._zoomOut.touchmove(l,m,v)}touchend(l,m,v){const _=this._zoomIn.touchend(l,m,v),k=this._zoomOut.touchend(l,m,v),E=this._tr;return _?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:E.zoom+1,around:E.unproject(_)},{originalEvent:l})}):k?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:E.zoom-1,around:E.unproject(k)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wc{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const m=this._moveFunction(...l);if(m.bearingDelta||m.pitchDelta||m.around||m.panDelta)return this._active=!0,m}dragStart(l,m){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=m.length?m[0]:m,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,m){if(!this.isEnabled())return;const v=this._lastPoint;if(!v)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const _=m.length?m[0]:m;return!this._moved&&_.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(v,_))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&b.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Lx={0:1,2:2};class Tg{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const m=b.mouseButton(l);this._eventButton=m}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!function(m,v){const _=Lx[v];return m.buttons===void 0||(m.buttons&_)!==_}(l,this._eventButton)}isValidEndEvent(l){return b.mouseButton(l)===this._eventButton}}class Fx{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}const jg=C=>{C.mousedown=C.dragStart,C.mousemoveWindow=C.dragMove,C.mouseup=C.dragEnd,C.contextmenu=l=>{l.preventDefault()}},Bx=({enable:C,clickTolerance:l,bearingDegreesPerPixelMoved:m=.8})=>{const v=new Tg({checkCorrectEvent:_=>b.mouseButton(_)===0&&_.ctrlKey||b.mouseButton(_)===2});return new wc({clickTolerance:l,move:(_,k)=>({bearingDelta:(k.x-_.x)*m}),moveStateManager:v,enable:C,assignEvents:jg})},$x=({enable:C,clickTolerance:l,pitchDegreesPerPixelMoved:m=-.5})=>{const v=new Tg({checkCorrectEvent:_=>b.mouseButton(_)===0&&_.ctrlKey||b.mouseButton(_)===2});return new wc({clickTolerance:l,move:(_,k)=>({pitchDelta:(k.y-_.y)*m}),moveStateManager:v,enable:C,assignEvents:jg})};class ch{constructor(l,m){this._clickTolerance=l.clickTolerance||1,this._map=m,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(l){return l<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(l,m,v){return this._calculateTransform(l,m,v)}touchmove(l,m,v){if(this._active){if(!this._shouldBePrevented(v.length))return l.preventDefault(),this._calculateTransform(l,m,v);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",l)}}touchend(l,m,v){this._calculateTransform(l,m,v),this._active&&this._shouldBePrevented(v.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,m,v){v.length>0&&(this._active=!0);const _=_p(v,m),k=new a.P(0,0),E=new a.P(0,0);let M=0;for(const W in _){const Z=_[W],Y=this._touches[W];Y&&(k._add(Z),E._add(Z.sub(Y)),M++,_[W]=Z)}if(this._touches=_,this._shouldBePrevented(M)||!E.mag())return;const B=E.div(M);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:k.div(M),panDelta:B}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pg{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,m,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([m[0],m[1]]))}touchmove(l,m,v){if(!this._firstTwoTouches)return;l.preventDefault();const[_,k]=this._firstTwoTouches,E=wp(v,m,_),M=wp(v,m,k);if(!E||!M)return;const B=this._aroundCenter?null:E.add(M).div(2);return this._move([E,M],B,l)}touchend(l,m,v){if(!this._firstTwoTouches)return;const[_,k]=this._firstTwoTouches,E=wp(v,m,_),M=wp(v,m,k);E&&M||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function wp(C,l,m){for(let v=0;v<C.length;v++)if(C[v].identifier===m)return l[v]}function Nx(C,l){return Math.log(C/l)/Math.LN2}class Vx extends Pg{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,m){const v=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(Nx(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Nx(this._distance,v),pinchAround:m}}}function Wx(C,l){return 180*C.angleWith(l)/Math.PI}class Ux extends Pg{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,m,v){const _=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Wx(this._vector,_),pinchAround:m}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const m=25/(Math.PI*this._minDiameter)*360,v=Wx(l,this._startVector);return Math.abs(v)<m}}function Og(C){return Math.abs(C.y)>Math.abs(C.x)}class Sp extends Pg{constructor(l){super(),this._currentTouchCount=0,this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,m,v){super.touchstart(l,m,v),this._currentTouchCount=v.length}_start(l){this._lastPoints=l,Og(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,m,v){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const _=l[0].sub(this._lastPoints[0]),k=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,k,v.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(_.y+k.y)/2*-.5}):void 0}gestureBeginsVertically(l,m,v){if(this._valid!==void 0)return this._valid;const _=l.mag()>=2,k=m.mag()>=2;if(!_&&!k)return;if(!_||!k)return this._firstMove===void 0&&(this._firstMove=v),v-this._firstMove<100&&void 0;const E=l.y>0==m.y>0;return Og(l)&&Og(m)&&E}}const aw={panStep:100,bearingStep:15,pitchStep:10};class ga{constructor(l){this._tr=new Ya(l);const m=aw;this._panStep=m.panStep,this._bearingStep=m.bearingStep,this._pitchStep=m.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let m=0,v=0,_=0,k=0,E=0;switch(l.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:l.shiftKey?v=-1:(l.preventDefault(),k=-1);break;case 39:l.shiftKey?v=1:(l.preventDefault(),k=1);break;case 38:l.shiftKey?_=1:(l.preventDefault(),E=-1);break;case 40:l.shiftKey?_=-1:(l.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(v=0,_=0),{cameraAnimation:M=>{const B=this._tr;M.easeTo({duration:300,easeId:"keyboardHandler",easing:Il,zoom:m?Math.round(B.zoom)+m*(l.shiftKey?2:1):B.zoom,bearing:B.bearing+v*this._bearingStep,pitch:B.pitch+_*this._pitchStep,offset:[-k*this._panStep,-E*this._panStep],center:B.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Il(C){return C*(2-C)}const qx=4.000244140625;class Ja{constructor(l,m){this._onTimeout=v=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(v)},this._map=l,this._tr=new Ya(l),this._triggerRenderFrame=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(l){return!!this._map.cooperativeGestures.isEnabled()&&!(l.ctrlKey||this._map.cooperativeGestures.isBypassed(l))}wheel(l){if(!this.isEnabled())return;if(this._shouldBePrevented(l))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",l);let m=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const v=y.now(),_=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,m!==0&&m%qx==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(_*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),l.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=l,this._delta-=m,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=b.mousePos(this._map.getCanvas(),l),v=this._tr;this._around=m.y>v.transform.height/2-v.transform.getHorizon()?a.N.convert(this._aroundCenter?v.center:v.unproject(m)):a.N.convert(v.center),this._aroundPoint=v.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(this._delta!==0){const B=this._type==="wheel"&&Math.abs(this._delta)>qx?this._wheelZoomRate:this._defaultZoomRate;let W=2/(1+Math.exp(-Math.abs(this._delta*B)));this._delta<0&&W!==0&&(W=1/W);const Z=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):l.scale;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(Z*W))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const m=typeof this._targetZoom=="number"?this._targetZoom:l.zoom,v=this._startZoom,_=this._easing;let k,E=!1;const M=y.now()-this._lastWheelEventTime;if(this._type==="wheel"&&v&&_&&M){const B=Math.min(M/200,1),W=_(B);k=a.y.number(v,m,W),B<1?this._frameId||(this._frameId=!0):E=!0}else k=m,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!E,zoomDelta:k-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let m=a.b9;if(this._prevEase){const v=this._prevEase,_=(y.now()-v.start)/v.duration,k=v.easing(_+.01)-v.easing(_),E=.27/Math.sqrt(k*k+1e-4)*.01,M=Math.sqrt(.0729-E*E);m=a.b8(E,M,.25,1)}return this._prevEase={start:y.now(),duration:l,easing:m},m}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class uh{constructor(l,m){this._clickZoom=l,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class YT{constructor(l){this._tr=new Ya(l),this.reset()}reset(){this._active=!1}dblclick(l,m){return l.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(m)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class JT{constructor(){this._tap=new Cg({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,m,v){if(!this._swipePoint)if(this._tapTime){const _=m[0],k=l.timeStamp-this._tapTime<500,E=this._tapPoint.dist(_)<30;k&&E?v.length>0&&(this._swipePoint=_,this._swipeTouch=v[0].identifier):this.reset()}else this._tap.touchstart(l,m,v)}touchmove(l,m,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const _=m[0],k=_.y-this._swipePoint.y;return this._swipePoint=_,l.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(l,m,v)}touchend(l,m,v){if(this._tapTime)this._swipePoint&&v.length===0&&this.reset();else{const _=this._tap.touchend(l,m,v);_&&(this._tapTime=l.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class lw{constructor(l,m,v){this._el=l,this._mousePan=m,this._touchPan=v}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class cw{constructor(l,m,v){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=m,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Qx{constructor(l,m,v,_){this._el=l,this._touchZoom=m,this._touchRotate=v,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class yd{constructor(l,m){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=l,this._options=m,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const l=this._map.getCanvasContainer();l.classList.add("maplibregl-cooperative-gestures"),this._container=b.create("div","maplibregl-cooperative-gesture-screen",l);let m=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(m=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const v=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=m,this._container.appendChild(_);const k=document.createElement("div");k.className="maplibregl-mobile-message",k.textContent=v,this._container.appendChild(k),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(b.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(l){return l[this._bypassKey]}notifyGestureBlocked(l,m){this._enabled&&(this._map.fire(new a.k("cooperativegestureprevented",{gestureType:l,originalEvent:m})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const ya=C=>C.zoom||C.drag||C.pitch||C.rotate;class nn extends a.k{}function Ag(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta}class Hx{constructor(l,m){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,k)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const E=_.type==="renderFrame"?void 0:_,M={needsRenderFrame:!1},B={},W={},Z=_.touches,Y=Z?this._getMapTouches(Z):void 0,le=Y?b.touchPos(this._map.getCanvas(),Y):b.mousePos(this._map.getCanvas(),_);for(const{handlerName:be,handler:je,allowed:Ae}of this._handlers){if(!je.isEnabled())continue;let De;this._blockedByActive(W,Ae,be)?je.reset():je[k||_.type]&&(De=je[k||_.type](_,le,Y),this.mergeHandlerResult(M,B,De,be,E),De&&De.needsRenderFrame&&this._triggerRenderFrame()),(De||je.isActive())&&(W[be]=je)}const he={};for(const be in this._previousActiveHandlers)W[be]||(he[be]=E);this._previousActiveHandlers=W,(Object.keys(he).length||Ag(M))&&(this._changes.push([M,B,he]),this._triggerRenderFrame()),(Object.keys(W).length||Ag(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:fe}=M;fe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],fe(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Rx(l),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(m);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,k,E]of this._listeners)b.addEventListener(_,k,_===document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[l,m,v]of this._listeners)b.removeEventListener(l,m,l===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(l){const m=this._map,v=m.getCanvasContainer();this._add("mapEvent",new ow(m,l));const _=m.boxZoom=new qo(m,l);this._add("boxZoom",_),l.interactive&&l.boxZoom&&_.enable();const k=m.cooperativeGestures=new yd(m,l.cooperativeGestures);this._add("cooperativeGestures",k),l.cooperativeGestures&&k.enable();const E=new gd(m),M=new YT(m);m.doubleClickZoom=new uh(M,E),this._add("tapZoom",E),this._add("clickZoom",M),l.interactive&&l.doubleClickZoom&&m.doubleClickZoom.enable();const B=new JT;this._add("tapDragZoom",B);const W=m.touchPitch=new Sp(m);this._add("touchPitch",W),l.interactive&&l.touchPitch&&m.touchPitch.enable(l.touchPitch);const Z=Bx(l),Y=$x(l);m.dragRotate=new cw(l,Z,Y),this._add("mouseRotate",Z,["mousePitch"]),this._add("mousePitch",Y,["mouseRotate"]),l.interactive&&l.dragRotate&&m.dragRotate.enable();const le=(({enable:De,clickTolerance:ge})=>{const Ue=new Tg({checkCorrectEvent:Xe=>b.mouseButton(Xe)===0&&!Xe.ctrlKey});return new wc({clickTolerance:ge,move:(Xe,et)=>({around:et,panDelta:et.sub(Xe)}),activateOnStart:!0,moveStateManager:Ue,enable:De,assignEvents:jg})})(l),he=new ch(l,m);m.dragPan=new lw(v,le,he),this._add("mousePan",le),this._add("touchPan",he,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&m.dragPan.enable(l.dragPan);const fe=new Ux,be=new Vx;m.touchZoomRotate=new Qx(v,be,fe,B),this._add("touchRotate",fe,["touchPan","touchZoom"]),this._add("touchZoom",be,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&m.touchZoomRotate.enable(l.touchZoomRotate);const je=m.scrollZoom=new Ja(m,()=>this._triggerRenderFrame());this._add("scrollZoom",je,["mousePan"]),l.interactive&&l.scrollZoom&&m.scrollZoom.enable(l.scrollZoom);const Ae=m.keyboard=new ga(m);this._add("keyboard",Ae),l.interactive&&l.keyboard&&m.keyboard.enable(),this._add("blockableMapEvent",new Ci(m))}_add(l,m,v){this._handlers.push({handlerName:l,handler:m,allowed:v}),this._handlersById[l]=m}stop(l){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ya(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,m,v){for(const _ in l)if(_!==v&&(!m||m.indexOf(_)<0))return!0;return!1}_getMapTouches(l){const m=[];for(const v of l)this._el.contains(v.target)&&m.push(v);return m}mergeHandlerResult(l,m,v,_,k){if(!v)return;a.e(l,v);const E={handlerName:_,originalEvent:v.originalEvent||k};v.zoomDelta!==void 0&&(m.zoom=E),v.panDelta!==void 0&&(m.drag=E),v.pitchDelta!==void 0&&(m.pitch=E),v.bearingDelta!==void 0&&(m.rotate=E)}_applyChanges(){const l={},m={},v={};for(const[_,k,E]of this._changes)_.panDelta&&(l.panDelta=(l.panDelta||new a.P(0,0))._add(_.panDelta)),_.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+_.pitchDelta),_.around!==void 0&&(l.around=_.around),_.pinchAround!==void 0&&(l.pinchAround=_.pinchAround),_.noInertia&&(l.noInertia=_.noInertia),a.e(m,k),a.e(v,E);this._updateMapTransform(l,m,v),this._changes=[]}_updateMapTransform(l,m,v){const _=this._map,k=_._getTransformForUpdate(),E=_.terrain;if(!(Ag(l)||E&&this._terrainMovement))return this._fireEvents(m,v,!0);let{panDelta:M,zoomDelta:B,bearingDelta:W,pitchDelta:Z,around:Y,pinchAround:le}=l;le!==void 0&&(Y=le),_._stop(!0),Y=Y||_.transform.centerPoint;const he=k.pointLocation(M?Y.sub(M):Y);W&&(k.bearing+=W),Z&&(k.pitch+=Z),B&&(k.zoom+=B),E?this._terrainMovement||!m.drag&&!m.zoom?m.drag&&this._terrainMovement?k.center=k.pointLocation(k.centerPoint.sub(M)):k.setLocationAtPoint(he,Y):(this._terrainMovement=!0,this._map._elevationFreeze=!0,k.setLocationAtPoint(he,Y)):k.setLocationAtPoint(he,Y),_._applyUpdatedTransform(k),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(m,v,!0)}_fireEvents(l,m,v){const _=ya(this._eventsInProgress),k=ya(l),E={};for(const Y in l){const{originalEvent:le}=l[Y];this._eventsInProgress[Y]||(E[`${Y}start`]=le),this._eventsInProgress[Y]=l[Y]}!_&&k&&this._fireEvent("movestart",k.originalEvent);for(const Y in E)this._fireEvent(Y,E[Y]);k&&this._fireEvent("move",k.originalEvent);for(const Y in l){const{originalEvent:le}=l[Y];this._fireEvent(Y,le)}const M={};let B;for(const Y in this._eventsInProgress){const{handlerName:le,originalEvent:he}=this._eventsInProgress[Y];this._handlersById[le].isActive()||(delete this._eventsInProgress[Y],B=m[le]||he,M[`${Y}end`]=B)}for(const Y in M)this._fireEvent(Y,M[Y]);const W=ya(this._eventsInProgress),Z=(_||k)&&!W;if(Z&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Y=this._map._getTransformForUpdate();Y.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(Y)}if(v&&Z){this._updatingCamera=!0;const Y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),le=he=>he!==0&&-this._bearingSnap<he&&he<this._bearingSnap;!Y||!Y.essential&&y.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:B})),le(this._map.getBearing())&&this._map.resetNorth()):(le(Y.bearing||this._map.getBearing())&&(Y.bearing=0),Y.freezeElevation=!0,this._map.easeTo(Y,{originalEvent:B})),this._updatingCamera=!1}}_fireEvent(l,m){this._map.fire(new a.k(l,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{delete this._frameId,this.handleEvent(new nn("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class uw extends a.E{constructor(l,m){super(),this._renderFrameCallback=()=>{const v=Math.min((y.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=m.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.N(this.transform.center.lng,this.transform.center.lat)}setCenter(l,m){return this.jumpTo({center:l},m)}panBy(l,m,v){return l=a.P.convert(l).mult(-1),this.panTo(this.transform.center,a.e({offset:l},m),v)}panTo(l,m,v){return this.easeTo(a.e({center:l},m),v)}getZoom(){return this.transform.zoom}setZoom(l,m){return this.jumpTo({zoom:l},m),this}zoomTo(l,m,v){return this.easeTo(a.e({zoom:l},m),v)}zoomIn(l,m){return this.zoomTo(this.getZoom()+1,l,m),this}zoomOut(l,m){return this.zoomTo(this.getZoom()-1,l,m),this}getBearing(){return this.transform.bearing}setBearing(l,m){return this.jumpTo({bearing:l},m),this}getPadding(){return this.transform.padding}setPadding(l,m){return this.jumpTo({padding:l},m),this}rotateTo(l,m,v){return this.easeTo(a.e({bearing:l},m),v)}resetNorth(l,m){return this.rotateTo(0,a.e({duration:1e3},l),m),this}resetNorthPitch(l,m){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},l),m),this}snapToNorth(l,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,m):this}getPitch(){return this.transform.pitch}setPitch(l,m){return this.jumpTo({pitch:l},m),this}cameraForBounds(l,m){l=ze.convert(l).adjustAntiMeridian();const v=m&&m.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),v,m)}_cameraForBoxAndBearing(l,m,v,_){const k={top:0,bottom:0,right:0,left:0};if(typeof(_=a.e({padding:k,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const Ft=_.padding;_.padding={top:Ft,bottom:Ft,right:Ft,left:Ft}}_.padding=a.e(k,_.padding);const E=this.transform,M=E.padding,B=new ze(l,m),W=E.project(B.getNorthWest()),Z=E.project(B.getNorthEast()),Y=E.project(B.getSouthEast()),le=E.project(B.getSouthWest()),he=a.ba(-v),fe=W.rotate(he),be=Z.rotate(he),je=Y.rotate(he),Ae=le.rotate(he),De=new a.P(Math.max(fe.x,be.x,Ae.x,je.x),Math.max(fe.y,be.y,Ae.y,je.y)),ge=new a.P(Math.min(fe.x,be.x,Ae.x,je.x),Math.min(fe.y,be.y,Ae.y,je.y)),Ue=De.sub(ge),Xe=(E.width-(M.left+M.right+_.padding.left+_.padding.right))/Ue.x,et=(E.height-(M.top+M.bottom+_.padding.top+_.padding.bottom))/Ue.y;if(et<0||Xe<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const mt=Math.min(E.scaleZoom(E.scale*Math.min(Xe,et)),_.maxZoom),jt=a.P.convert(_.offset),Ut=new a.P((_.padding.left-_.padding.right)/2,(_.padding.top-_.padding.bottom)/2).rotate(a.ba(v)),Zt=jt.add(Ut).mult(E.scale/E.zoomScale(mt));return{center:E.unproject(W.add(Y).div(2).sub(Zt)),zoom:mt,bearing:v}}fitBounds(l,m,v){return this._fitInternal(this.cameraForBounds(l,m),m,v)}fitScreenCoordinates(l,m,v,_,k){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(l)),this.transform.pointLocation(a.P.convert(m)),v,_),_,k)}_fitInternal(l,m,v){return l?(delete(m=a.e(l,m)).padding,m.linear?this.easeTo(m,v):this.flyTo(m,v)):this}jumpTo(l,m){this.stop();const v=this._getTransformForUpdate();let _=!1,k=!1,E=!1;return"zoom"in l&&v.zoom!==+l.zoom&&(_=!0,v.zoom=+l.zoom),l.center!==void 0&&(v.center=a.N.convert(l.center)),"bearing"in l&&v.bearing!==+l.bearing&&(k=!0,v.bearing=+l.bearing),"pitch"in l&&v.pitch!==+l.pitch&&(E=!0,v.pitch=+l.pitch),l.padding==null||v.isPaddingEqual(l.padding)||(v.padding=l.padding),this._applyUpdatedTransform(v),this.fire(new a.k("movestart",m)).fire(new a.k("move",m)),_&&this.fire(new a.k("zoomstart",m)).fire(new a.k("zoom",m)).fire(new a.k("zoomend",m)),k&&this.fire(new a.k("rotatestart",m)).fire(new a.k("rotate",m)).fire(new a.k("rotateend",m)),E&&this.fire(new a.k("pitchstart",m)).fire(new a.k("pitch",m)).fire(new a.k("pitchend",m)),this.fire(new a.k("moveend",m))}calculateCameraOptionsFromTo(l,m,v,_=0){const k=a.Z.fromLngLat(l,m),E=a.Z.fromLngLat(v,_),M=E.x-k.x,B=E.y-k.y,W=E.z-k.z,Z=Math.hypot(M,B,W);if(Z===0)throw new Error("Can't calculate camera options with same From and To");const Y=Math.hypot(M,B),le=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Z/this.transform.tileSize),he=180*Math.atan2(M,-B)/Math.PI;let fe=180*Math.acos(Y/Z)/Math.PI;return fe=W<0?90-fe:90+fe,{center:E.toLngLat(),zoom:le,pitch:fe,bearing:he}}easeTo(l,m){var v;this._stop(!1,l.easeId),((l=a.e({offset:[0,0],duration:500,easing:a.b9},l)).animate===!1||!l.essential&&y.prefersReducedMotion)&&(l.duration=0);const _=this._getTransformForUpdate(),k=_.zoom,E=_.bearing,M=_.pitch,B=_.padding,W="bearing"in l?this._normalizeBearing(l.bearing,E):E,Z="pitch"in l?+l.pitch:M,Y="padding"in l?l.padding:_.padding,le=a.P.convert(l.offset);let he=_.centerPoint.add(le);const fe=_.pointLocation(he),{center:be,zoom:je}=_.getConstrained(a.N.convert(l.center||fe),(v=l.zoom)!==null&&v!==void 0?v:k);this._normalizeCenter(be,_);const Ae=_.project(fe),De=_.project(be).sub(Ae),ge=_.zoomScale(je-k);let Ue,Xe;l.around&&(Ue=a.N.convert(l.around),Xe=_.locationPoint(Ue));const et={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||je!==k,this._rotating=this._rotating||E!==W,this._pitching=this._pitching||Z!==M,this._padding=!_.isPaddingEqual(Y),this._easeId=l.easeId,this._prepareEase(m,l.noMoveStart,et),this.terrain&&this._prepareElevation(be),this._ease(mt=>{if(this._zooming&&(_.zoom=a.y.number(k,je,mt)),this._rotating&&(_.bearing=a.y.number(E,W,mt)),this._pitching&&(_.pitch=a.y.number(M,Z,mt)),this._padding&&(_.interpolatePadding(B,Y,mt),he=_.centerPoint.add(le)),this.terrain&&!l.freezeElevation&&this._updateElevation(mt),Ue)_.setLocationAtPoint(Ue,Xe);else{const jt=_.zoomScale(_.zoom-k),Ut=je>k?Math.min(2,ge):Math.max(.5,ge),Zt=Math.pow(Ut,1-mt),Ft=_.unproject(Ae.add(De.mult(mt*Zt)).mult(jt));_.setLocationAtPoint(_.renderWorldCopies?Ft.wrap():Ft,he)}this._applyUpdatedTransform(_),this._fireMoveEvents(m)},mt=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(m,mt)},l),this}_prepareEase(l,m,v={}){this._moving=!0,m||v.moving||this.fire(new a.k("movestart",l)),this._zooming&&!v.zooming&&this.fire(new a.k("zoomstart",l)),this._rotating&&!v.rotating&&this.fire(new a.k("rotatestart",l)),this._pitching&&!v.pitching&&this.fire(new a.k("pitchstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const m=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&m!==this._elevationTarget){const v=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(v-(m-(v*l+this._elevationStart))/(1-l)),this._elevationTarget=m}this.transform.elevation=a.y.number(this._elevationStart,this._elevationTarget,l)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(l){const m=l.getCameraPosition(),v=this.terrain.getElevationForLngLatZoom(m.lngLat,l.zoom);if(m.altitude<v){const _=this.calculateCameraOptionsFromTo(m.lngLat,v,l.center,l.elevation);return{pitch:_.pitch,zoom:_.zoom}}return{}}_applyUpdatedTransform(l){const m=[];if(this.terrain&&m.push(_=>this._elevateCameraIfInsideTerrain(_)),this.transformCameraUpdate&&m.push(_=>this.transformCameraUpdate(_)),!m.length)return;const v=l.clone();for(const _ of m){const k=v.clone(),{center:E,zoom:M,pitch:B,bearing:W,elevation:Z}=_(k);E&&(k.center=E),M!==void 0&&(k.zoom=M),B!==void 0&&(k.pitch=B),W!==void 0&&(k.bearing=W),Z!==void 0&&(k.elevation=Z),v.apply(k)}this.transform.apply(v)}_fireMoveEvents(l){this.fire(new a.k("move",l)),this._zooming&&this.fire(new a.k("zoom",l)),this._rotating&&this.fire(new a.k("rotate",l)),this._pitching&&this.fire(new a.k("pitch",l))}_afterEase(l,m){if(this._easeId&&m&&this._easeId===m)return;delete this._easeId;const v=this._zooming,_=this._rotating,k=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new a.k("zoomend",l)),_&&this.fire(new a.k("rotateend",l)),k&&this.fire(new a.k("pitchend",l)),this.fire(new a.k("moveend",l))}flyTo(l,m){var v;if(!l.essential&&y.prefersReducedMotion){const Ht=a.M(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ht,m)}this.stop(),l=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.b9},l);const _=this._getTransformForUpdate(),k=_.zoom,E=_.bearing,M=_.pitch,B=_.padding,W="bearing"in l?this._normalizeBearing(l.bearing,E):E,Z="pitch"in l?+l.pitch:M,Y="padding"in l?l.padding:_.padding,le=a.P.convert(l.offset);let he=_.centerPoint.add(le);const fe=_.pointLocation(he),{center:be,zoom:je}=_.getConstrained(a.N.convert(l.center||fe),(v=l.zoom)!==null&&v!==void 0?v:k);this._normalizeCenter(be,_);const Ae=_.zoomScale(je-k),De=_.project(fe),ge=_.project(be).sub(De);let Ue=l.curve;const Xe=Math.max(_.width,_.height),et=Xe/Ae,mt=ge.mag();if("minZoom"in l){const Ht=a.ac(Math.min(l.minZoom,k,je),_.minZoom,_.maxZoom),En=Xe/_.zoomScale(Ht-k);Ue=Math.sqrt(En/mt*2)}const jt=Ue*Ue;function Ut(Ht){const En=(et*et-Xe*Xe+(Ht?-1:1)*jt*jt*mt*mt)/(2*(Ht?et:Xe)*jt*mt);return Math.log(Math.sqrt(En*En+1)-En)}function Zt(Ht){return(Math.exp(Ht)-Math.exp(-Ht))/2}function Ft(Ht){return(Math.exp(Ht)+Math.exp(-Ht))/2}const Dt=Ut(!1);let pn=function(Ht){return Ft(Dt)/Ft(Dt+Ue*Ht)},Mn=function(Ht){return Xe*((Ft(Dt)*(Zt(En=Dt+Ue*Ht)/Ft(En))-Zt(Dt))/jt)/mt;var En},Nt=(Ut(!0)-Dt)/Ue;if(Math.abs(mt)<1e-6||!isFinite(Nt)){if(Math.abs(Xe-et)<1e-6)return this.easeTo(l,m);const Ht=et<Xe?-1:1;Nt=Math.abs(Math.log(et/Xe))/Ue,Mn=()=>0,pn=En=>Math.exp(Ht*Ue*En)}return l.duration="duration"in l?+l.duration:1e3*Nt/("screenSpeed"in l?+l.screenSpeed/Ue:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=E!==W,this._pitching=Z!==M,this._padding=!_.isPaddingEqual(Y),this._prepareEase(m,!1),this.terrain&&this._prepareElevation(be),this._ease(Ht=>{const En=Ht*Nt,ti=1/pn(En);_.zoom=Ht===1?je:k+_.scaleZoom(ti),this._rotating&&(_.bearing=a.y.number(E,W,Ht)),this._pitching&&(_.pitch=a.y.number(M,Z,Ht)),this._padding&&(_.interpolatePadding(B,Y,Ht),he=_.centerPoint.add(le)),this.terrain&&!l.freezeElevation&&this._updateElevation(Ht);const Qn=Ht===1?be:_.unproject(De.add(ge.mult(Mn(En))).mult(ti));_.setLocationAtPoint(_.renderWorldCopies?Qn.wrap():Qn,he),this._applyUpdatedTransform(_),this._fireMoveEvents(m)},()=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(m)},l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,m){var v;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,m)}return l||(v=this.handlers)===null||v===void 0||v.stop(!1),this}_ease(l,m,v){v.animate===!1||v.duration===0?(l(1),m()):(this._easeStart=y.now(),this._easeOptions=v,this._onEaseFrame=l,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,m){l=a.b3(l,-180,180);const v=Math.abs(l-m);return Math.abs(l-360-m)<v&&(l-=360),Math.abs(l+360-m)<v&&(l+=360),l}_normalizeCenter(l,m){if(!m.renderWorldCopies||m.lngRange)return;const v=l.lng-m.center.lng;l.lng+=v>180?-360:v<-180?360:0}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(a.N.convert(l),this.transform.tileZoom)-this.transform.elevation:null}}const xd={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class vd{constructor(l=xd){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=m=>{!m||m.sourceDataType!=="metadata"&&m.sourceDataType!=="visibility"&&m.dataType!=="style"&&m.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,m){const v=this._map._getUIString(`AttributionControl.${m}`);l.title=v,l.setAttribute("aria-label",v)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(_=>typeof _!="string"?"":_)):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const m=this._map.style.sourceCaches;for(const _ in m){const k=m[_];if(k.used||k.usedForTerrain){const E=k.getSource();E.attribution&&l.indexOf(E.attribution)<0&&l.push(E.attribution)}}l=l.filter(_=>String(_).trim()),l.sort((_,k)=>_.length-k.length),l=l.filter((_,k)=>{for(let E=k+1;E<l.length;E++)if(l[E].indexOf(_)>=0)return!1;return!0});const v=l.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,l.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Gx{constructor(l={}){this._updateCompact=()=>{const m=this._container.children;if(m.length){const v=m[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&v.classList.add("maplibregl-compact"):v.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");const m=b.create("a","maplibregl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://maplibre.org/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class sr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const m=++this._id;return this._queue.push({callback:l,id:m,cancelled:!1}),m}remove(l){const m=this._currentlyRunning,v=m?this._queue.concat(m):this._queue;for(const _ of v)if(_.id===l)return void(_.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const m=this._currentlyRunning=this._queue;this._queue=[];for(const v of m)if(!v.cancelled&&(v.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Xx=a.Y([{name:"a_pos3d",type:"Int16",components:3}]);class ej extends a.E{constructor(l){super(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,l.usedForTerrain=!0,l.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(l,m){this.sourceCache.update(l,m),this._renderableTilesKeys=[];const v={};for(const _ of l.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:m}))v[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.posMatrix=new Float64Array(16),a.aP(_.posMatrix,0,a.X,0,a.X,0,1),this._tiles[_.key]=new ir(_,this.tileSize));for(const _ in this._tiles)v[_]||delete this._tiles[_]}freeRtt(l){for(const m in this._tiles){const v=this._tiles[m];(!l||v.tileID.equals(l)||v.tileID.isChildOf(l)||l.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(l=>this.getTileByID(l))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l){const m={};for(const v of this._renderableTilesKeys){const _=this._tiles[v].tileID;if(_.canonical.equals(l.canonical)){const k=l.clone();k.posMatrix=new Float64Array(16),a.aP(k.posMatrix,0,a.X,0,a.X,0,1),m[v]=k}else if(_.canonical.isChildOf(l.canonical)){const k=l.clone();k.posMatrix=new Float64Array(16);const E=_.canonical.z-l.canonical.z,M=_.canonical.x-(_.canonical.x>>E<<E),B=_.canonical.y-(_.canonical.y>>E<<E),W=a.X>>E;a.aP(k.posMatrix,0,W,0,W,0,1),a.J(k.posMatrix,k.posMatrix,[-M*W,-B*W,0]),m[v]=k}else if(l.canonical.isChildOf(_.canonical)){const k=l.clone();k.posMatrix=new Float64Array(16);const E=l.canonical.z-_.canonical.z,M=l.canonical.x-(l.canonical.x>>E<<E),B=l.canonical.y-(l.canonical.y>>E<<E),W=a.X>>E;a.aP(k.posMatrix,0,a.X,0,a.X,0,1),a.J(k.posMatrix,k.posMatrix,[M*W,B*W,0]),a.K(k.posMatrix,k.posMatrix,[1/2**E,1/2**E,0]),m[v]=k}}return m}getSourceTile(l,m){const v=this.sourceCache._source;let _=l.overscaledZ-this.deltaZoom;if(_>v.maxzoom&&(_=v.maxzoom),_<v.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(_).key);let k=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!k||!k.dem)&&m)for(;_>=v.minzoom&&(!k||!k.dem);)k=this.sourceCache.getTileByID(l.scaledTo(_--).key);return k}tilesAfterTime(l=Date.now()){return Object.values(this._tiles).filter(m=>m.timeAdded>=l)}}class Kx{constructor(l,m,v){this.painter=l,this.sourceCache=new ej(m),this.options=v,this.exaggeration=typeof v.exaggeration=="number"?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,m,v,_=a.X){var k;if(!(m>=0&&m<_&&v>=0&&v<_))return 0;const E=this.getTerrainData(l),M=(k=E.tile)===null||k===void 0?void 0:k.dem;if(!M)return 0;const B=function(fe,be,je){var Ae=be[0],De=be[1];return fe[0]=je[0]*Ae+je[4]*De+je[12],fe[1]=je[1]*Ae+je[5]*De+je[13],fe}([],[m/_*a.X,v/_*a.X],E.u_terrain_matrix),W=[B[0]*M.dim,B[1]*M.dim],Z=Math.floor(W[0]),Y=Math.floor(W[1]),le=W[0]-Z,he=W[1]-Y;return M.get(Z,Y)*(1-le)*(1-he)+M.get(Z+1,Y)*le*(1-he)+M.get(Z,Y+1)*(1-le)*he+M.get(Z+1,Y+1)*le*he}getElevationForLngLatZoom(l,m){if(!a.bb(m,l.wrap()))return 0;const{tileID:v,mercatorX:_,mercatorY:k}=this._getOverscaledTileIDFromLngLatZoom(l,m);return this.getElevation(v,_%a.X,k%a.X,a.X)}getElevation(l,m,v,_=a.X){return this.getDEMElevation(l,m,v,_)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const _=this.painter.context,k=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ae(_,k,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ae(_,new a.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.an([])}const m=this.sourceCache.getSourceTile(l,!0);if(m&&m.dem&&(!m.demTexture||m.needsTerrainPrepare)){const _=this.painter.context;m.demTexture=this.painter.getTileTexture(m.dem.stride),m.demTexture?m.demTexture.update(m.dem.getPixels(),{premultiply:!1}):m.demTexture=new ae(_,m.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),m.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),m.needsTerrainPrepare=!1}const v=m&&m+m.tileID.key+l.key;if(v&&!this._demMatrixCache[v]){const _=this.sourceCache.sourceCache._source.maxzoom;let k=l.canonical.z-m.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=_?k=l.canonical.z-_:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const E=l.canonical.x-(l.canonical.x>>k<<k),M=l.canonical.y-(l.canonical.y>>k<<k),B=a.bc(new Float64Array(16),[1/(a.X<<k),1/(a.X<<k),0]);a.J(B,B,[E*a.X,M*a.X,0]),this._demMatrixCache[l.key]={matrix:B,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:m&&m.dem&&m.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:m&&m.dem&&m.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(m&&m.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:m}}getFramebuffer(l){const m=this.painter,v=m.width/devicePixelRatio,_=m.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ae(m.context,{width:v,height:_,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ae(m.context,{width:v,height:_,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=m.context.createFramebuffer(v,_,!0,!1),this._fbo.depthAttachment.set(m.context.createRenderbuffer(m.context.gl.DEPTH_COMPONENT16,v,_))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const m=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let k=0,E=0;k<this._coordsTextureSize;k++)for(let M=0;M<this._coordsTextureSize;M++,E+=4)m[E+0]=255&M,m[E+1]=255&k,m[E+2]=M>>8<<4|k>>8,m[E+3]=0;const v=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(m.buffer)),_=new ae(l,v,l.gl.RGBA,{premultiply:!1});return _.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(l){this.painter.maybeDrawDepthAndCoords(!0);const m=new Uint8Array(4),v=this.painter.context,_=v.gl,k=Math.round(l.x*this.painter.pixelRatio/devicePixelRatio),E=Math.round(l.y*this.painter.pixelRatio/devicePixelRatio),M=Math.round(this.painter.height/devicePixelRatio);v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(k,M-E-1,1,1,_.RGBA,_.UNSIGNED_BYTE,m),v.bindFramebuffer.set(null);const B=m[0]+(m[2]>>4<<8),W=m[1]+((15&m[2])<<8),Z=this.coordsIndex[255-m[3]],Y=Z&&this.sourceCache.getTileByID(Z);if(!Y)return null;const le=this._coordsTextureSize,he=(1<<Y.tileID.canonical.z)*le;return new a.Z((Y.tileID.canonical.x*le+B)/he+Y.tileID.wrap,(Y.tileID.canonical.y*le+W)/he,this.getElevation(Y.tileID,B,W,le))}depthAtPoint(l){const m=new Uint8Array(4),v=this.painter.context,_=v.gl;return v.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,m),v.bindFramebuffer.set(null),(m[0]/16777216+m[1]/65536+m[2]/256+m[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const l=this.painter.context,m=new a.bd,v=new a.aY,_=this.meshSize,k=a.X/_,E=_*_;for(let Y=0;Y<=_;Y++)for(let le=0;le<=_;le++)m.emplaceBack(le*k,Y*k,0);for(let Y=0;Y<E;Y+=_+1)for(let le=0;le<_;le++)v.emplaceBack(le+Y,_+le+Y+1,_+le+Y+2),v.emplaceBack(le+Y,_+le+Y+2,le+Y+1);const M=m.length,B=M+2*(_+1);for(const Y of[0,1])for(let le=0;le<=_;le++)for(const he of[0,1])m.emplaceBack(le*k,Y*a.X,he);for(let Y=0;Y<2*_;Y+=2)v.emplaceBack(B+Y,B+Y+1,B+Y+3),v.emplaceBack(B+Y,B+Y+3,B+Y+2),v.emplaceBack(M+Y,M+Y+3,M+Y+1),v.emplaceBack(M+Y,M+Y+2,M+Y+3);const W=m.length,Z=W+2*(_+1);for(const Y of[0,1])for(let le=0;le<=_;le++)for(const he of[0,1])m.emplaceBack(Y*a.X,le*k,he);for(let Y=0;Y<2*_;Y+=2)v.emplaceBack(W+Y,W+Y+1,W+Y+3),v.emplaceBack(W+Y,W+Y+3,W+Y+2),v.emplaceBack(Z+Y,Z+Y+3,Z+Y+1),v.emplaceBack(Z+Y,Z+Y+2,Z+Y+3);return this._mesh=new bg(l.createVertexBuffer(m,Xx.members),l.createIndexBuffer(v),a.a0.simpleSegment(0,0,m.length,v.length)),this._mesh}getMeshFrameDelta(l){return 2*Math.PI*a.be/Math.pow(2,l)/5}getMinTileElevationForLngLatZoom(l,m){var v;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(l,m);return(v=this.getMinMaxElevation(_).minElevation)!==null&&v!==void 0?v:0}getMinMaxElevation(l){const m=this.getTerrainData(l).tile,v={minElevation:null,maxElevation:null};return m&&m.dem&&(v.minElevation=m.dem.min*this.exaggeration,v.maxElevation=m.dem.max*this.exaggeration),v}_getOverscaledTileIDFromLngLatZoom(l,m){const v=a.Z.fromLngLat(l.wrap()),_=(1<<m)*a.X,k=v.x*_,E=v.y*_,M=Math.floor(k/a.X),B=Math.floor(E/a.X);return{tileID:new a.S(m,0,m,M,B),mercatorX:k,mercatorY:E}}}class tj{constructor(l,m,v){this._context=l,this._size=m,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const m=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new ae(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),m.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),m.colorAttachment.set(v.texture),{id:l,fbo:m,texture:v,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(m=>l.id!==m),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const m of this._recentlyUsed)if(!this._objects[m].inUse)return this._objects[m];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(l=>!l.inUse)===!1}}const bd={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class hw{constructor(l,m){this.painter=l,this.terrain=m,this.pool=new tj(l.context,30,m.sourceCache.tileSize*m.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,m){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=l._order.filter(v=>!l._layers[v].isHidden(m)),this._coordsDescendingInv={};for(const v in l.sourceCaches){this._coordsDescendingInv[v]={};const _=l.sourceCaches[v].getVisibleCoordinates();for(const k of _){const E=this.terrain.sourceCache.getTerrainCoords(k);for(const M in E)this._coordsDescendingInv[v][M]||(this._coordsDescendingInv[v][M]=[]),this._coordsDescendingInv[v][M].push(E[M])}}this._coordsDescendingInvStr={};for(const v of l._order){const _=l._layers[v],k=_.source;if(bd[_.type]&&!this._coordsDescendingInvStr[k]){this._coordsDescendingInvStr[k]={};for(const E in this._coordsDescendingInv[k])this._coordsDescendingInvStr[k][E]=this._coordsDescendingInv[k][E].map(M=>M.key).sort().join()}}for(const v of this._renderableTiles)for(const _ in this._coordsDescendingInvStr){const k=this._coordsDescendingInvStr[_][v.tileID.key];k&&k!==v.rttCoords[_]&&(v.rtt=[])}}renderLayer(l){if(l.isHidden(this.painter.transform.zoom))return!1;const m=l.type,v=this.painter,_=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(bd[m]&&(this._prevType&&bd[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(l.id),!_))return!0;if(bd[this._prevType]||bd[m]&&_){this._prevType=m;const k=this._stacks.length-1,E=this._stacks[k]||[];for(const M of this._renderableTiles){if(this.pool.isFull()&&(rw(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(M),M.rtt[k]){const W=this.pool.getObjectForId(M.rtt[k].id);if(W.stamp===M.rtt[k].stamp){this.pool.useObject(W);continue}}const B=this.pool.getOrCreateFreeObject();this.pool.useObject(B),this.pool.stampObject(B),M.rtt[k]={id:B.id,stamp:B.stamp},v.context.bindFramebuffer.set(B.fbo.framebuffer),v.context.clear({color:a.aM.transparent,stencil:0}),v.currentStencilSource=void 0;for(let W=0;W<E.length;W++){const Z=v.style._layers[E[W]],Y=Z.source?this._coordsDescendingInv[Z.source][M.tileID.key]:[M.tileID];v.context.viewport.set([0,0,B.fbo.width,B.fbo.height]),v._renderTileClippingMasks(Z,Y),v.renderLayer(v,v.style.sourceCaches[Z.source],Z,Y),Z.source&&(M.rttCoords[Z.source]=this._coordsDescendingInvStr[Z.source][M.tileID.key])}}return rw(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),bd[m]}return!1}}const Zx={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},dw=h,nj={hash:!1,interactive:!0,bearingSnap:7,attributionControl:xd,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Yx=C=>{C.touchstart=C.dragStart,C.touchmoveWindow=C.dragMove,C.touchend=C.dragEnd},rj={showCompass:!0,showZoom:!0,visualizePitch:!1};class ij{constructor(l,m,v=!1){this.mousedown=E=>{this.startMouse(a.e({},E,{ctrlKey:!0,preventDefault:()=>E.preventDefault()}),b.mousePos(this.element,E)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=E=>{this.moveMouse(E,b.mousePos(this.element,E))},this.mouseup=E=>{this.mouseRotate.dragEnd(E),this.mousePitch&&this.mousePitch.dragEnd(E),this.offTemp()},this.touchstart=E=>{E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,E.targetTouches)[0],this.startTouch(E,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=E=>{E.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,E.targetTouches)[0],this.moveTouch(E,this._lastPos))},this.touchend=E=>{E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const _=l.dragRotate._mouseRotate.getClickTolerance(),k=l.dragRotate._mousePitch.getClickTolerance();this.element=m,this.mouseRotate=Bx({clickTolerance:_,enable:!0}),this.touchRotate=(({enable:E,clickTolerance:M,bearingDegreesPerPixelMoved:B=.8})=>{const W=new Fx;return new wc({clickTolerance:M,move:(Z,Y)=>({bearingDelta:(Y.x-Z.x)*B}),moveStateManager:W,enable:E,assignEvents:Yx})})({clickTolerance:_,enable:!0}),this.map=l,v&&(this.mousePitch=$x({clickTolerance:k,enable:!0}),this.touchPitch=(({enable:E,clickTolerance:M,pitchDegreesPerPixelMoved:B=-.5})=>{const W=new Fx;return new wc({clickTolerance:M,move:(Z,Y)=>({pitchDelta:(Y.y-Z.y)*B}),moveStateManager:W,enable:E,assignEvents:Yx})})({clickTolerance:k,enable:!0})),b.addEventListener(m,"mousedown",this.mousedown),b.addEventListener(m,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(m,"touchcancel",this.reset)}startMouse(l,m){this.mouseRotate.dragStart(l,m),this.mousePitch&&this.mousePitch.dragStart(l,m),b.disableDrag()}startTouch(l,m){this.touchRotate.dragStart(l,m),this.touchPitch&&this.touchPitch.dragStart(l,m),b.disableDrag()}moveMouse(l,m){const v=this.map,{bearingDelta:_}=this.mouseRotate.dragMove(l,m)||{};if(_&&v.setBearing(v.getBearing()+_),this.mousePitch){const{pitchDelta:k}=this.mousePitch.dragMove(l,m)||{};k&&v.setPitch(v.getPitch()+k)}}moveTouch(l,m){const v=this.map,{bearingDelta:_}=this.touchRotate.dragMove(l,m)||{};if(_&&v.setBearing(v.getBearing()+_),this.touchPitch){const{pitchDelta:k}=this.touchPitch.dragMove(l,m)||{};k&&v.setPitch(v.getPitch()+k)}}off(){const l=this.element;b.removeEventListener(l,"mousedown",this.mousedown),b.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let Qo;function ei(C,l,m){const v=new a.N(C.lng,C.lat);if(C=new a.N(C.lng,C.lat),l){const _=new a.N(C.lng-360,C.lat),k=new a.N(C.lng+360,C.lat),E=m.locationPoint(C).distSqr(l);m.locationPoint(_).distSqr(l)<E?C=_:m.locationPoint(k).distSqr(l)<E&&(C=k)}for(;Math.abs(C.lng-m.center.lng)>180;){const _=m.locationPoint(C);if(_.x>=0&&_.y>=0&&_.x<=m.width&&_.y<=m.height)break;C.lng>m.center.lng?C.lng-=360:C.lng+=360}return C.lng!==v.lng&&m.locationPoint(C).y>m.height/2-m.getHorizon()?C:v}const _d={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Eg(C,l,m){const v=C.classList;for(const _ in _d)v.remove(`maplibregl-${m}-anchor-${_}`);v.add(`maplibregl-${m}-anchor-${l}`)}class zg extends a.E{constructor(l){if(super(),this._onKeyPress=m=>{const v=m.code,_=m.charCode||m.keyCode;v!=="Space"&&v!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=m=>{const v=m.originalEvent.target,_=this._element;this._popup&&(v===_||_.contains(v))&&this.togglePopup()},this._update=m=>{var v;if(!this._map)return;const _=this._map.loaded()&&!this._map.isMoving();((m==null?void 0:m.type)==="terrain"||(m==null?void 0:m.type)==="render"&&!_)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?ei(this._lngLat,this._flatPos,this._map.transform):(v=this._lngLat)===null||v===void 0?void 0:v.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let k="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?k=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(k=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let E="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?E="rotateX(0deg)":this._pitchAlignment==="map"&&(E=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||m&&m.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${_d[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${E} ${k}`),y.frameAsync(new AbortController).then(()=>{this._updateOpacity(m&&m.type==="moveend")}).catch(()=>{})},this._onMove=m=>{if(!this._isDragging){const v=this._clickTolerance||this._map._clickTolerance;this._isDragging=m.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=m.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=m=>{this._element.contains(m.originalEvent.target)&&(m.preventDefault(),this._positionDelta=m.point.sub(this._pos).add(this._offset),this._pointerdownPos=m.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._subpixelPositioning=l&&l.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(l==null?void 0:l.opacity,l==null?void 0:l.opacityWhenCovered),l&&l.element)this._element=l.element,this._offset=a.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div");const m=b.createNS("http://www.w3.org/2000/svg","svg"),v=41,_=27;m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height",`${v}px`),m.setAttributeNS(null,"width",`${_}px`),m.setAttributeNS(null,"viewBox",`0 0 ${_} ${v}`);const k=b.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"stroke","none"),k.setAttributeNS(null,"stroke-width","1"),k.setAttributeNS(null,"fill","none"),k.setAttributeNS(null,"fill-rule","evenodd");const E=b.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");const M=b.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(3.0, 29.0)"),M.setAttributeNS(null,"fill","#000000");const B=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ae of B){const De=b.createNS("http://www.w3.org/2000/svg","ellipse");De.setAttributeNS(null,"opacity","0.04"),De.setAttributeNS(null,"cx","10.5"),De.setAttributeNS(null,"cy","5.80029008"),De.setAttributeNS(null,"rx",Ae.rx),De.setAttributeNS(null,"ry",Ae.ry),M.appendChild(De)}const W=b.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"fill",this._color);const Z=b.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),W.appendChild(Z);const Y=b.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"opacity","0.25"),Y.setAttributeNS(null,"fill","#000000");const le=b.createNS("http://www.w3.org/2000/svg","path");le.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Y.appendChild(le);const he=b.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"transform","translate(6.0, 7.0)"),he.setAttributeNS(null,"fill","#FFFFFF");const fe=b.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const be=b.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#000000"),be.setAttributeNS(null,"opacity","0.25"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962");const je=b.createNS("http://www.w3.org/2000/svg","circle");je.setAttributeNS(null,"fill","#FFFFFF"),je.setAttributeNS(null,"cx","5.5"),je.setAttributeNS(null,"cy","5.5"),je.setAttributeNS(null,"r","5.4999962"),fe.appendChild(be),fe.appendChild(je),E.appendChild(M),E.appendChild(W),E.appendChild(Y),E.appendChild(he),E.appendChild(fe),m.appendChild(E),m.setAttributeNS(null,"height",v*this._scale+"px"),m.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(m),this._offset=a.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",m=>{m.preventDefault()}),this._element.addEventListener("mousedown",m=>{m.preventDefault()}),Eg(this._element,this._anchor,"marker"),l&&l.className)for(const m of l.className.split(" "))this._element.classList.add(m);this._popup=null}addTo(l){return this.remove(),this._map=l,this._element.setAttribute("aria-label",l._getUIString("Marker.Title")),l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.N.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const _=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(l){return this._subpixelPositioning=l,this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:l?(l.isOpen()?l.remove():(l.setLngLat(this._lngLat),l.addTo(this._map)),this):this}_updateOpacity(l=!1){var m,v;if(!(!((m=this._map)===null||m===void 0)&&m.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(l)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const _=this._map,k=_.terrain.depthAtPoint(this._pos),E=_.terrain.getElevationForLngLatZoom(this._lngLat,_.transform.tileZoom);if(_.transform.lngLatToCameraDepth(this._lngLat,E)-k<.006)return void(this._element.style.opacity=this._opacity);const M=-this._offset.y/_.transform._pixelPerMeter,B=Math.sin(_.getPitch()*Math.PI/180)*M,W=_.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),Z=_.transform.lngLatToCameraDepth(this._lngLat,E+B)-W>.006;!((v=this._popup)===null||v===void 0)&&v.isOpen()&&Z&&this._popup.remove(),this._element.style.opacity=Z?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(l){return this._offset=a.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(l,m){return l===void 0&&m===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),l!==void 0&&(this._opacity=l),m!==void 0&&(this._opacityWhenCovered=m),this._map&&this._updateOpacity(!0),this}}const fw={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let kp=0,Cp=!1;const Ml={maxWidth:100,unit:"metric"};function Tp(C,l,m){const v=m&&m.maxWidth||100,_=C._container.clientHeight/2,k=C.unproject([0,_]),E=C.unproject([v,_]),M=k.distanceTo(E);if(m&&m.unit==="imperial"){const B=3.2808*M;B>5280?fn(l,v,B/5280,C._getUIString("ScaleControl.Miles")):fn(l,v,B,C._getUIString("ScaleControl.Feet"))}else m&&m.unit==="nautical"?fn(l,v,M/1852,C._getUIString("ScaleControl.NauticalMiles")):M>=1e3?fn(l,v,M/1e3,C._getUIString("ScaleControl.Kilometers")):fn(l,v,M,C._getUIString("ScaleControl.Meters"))}function fn(C,l,m,v){const _=function(k){const E=Math.pow(10,`${Math.floor(k)}`.length-1);let M=k/E;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:function(B){const W=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*W)/W}(M),E*M}(m);C.style.width=l*(_/m)+"px",C.innerHTML=`${_}&nbsp;${v}`}const jn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Ig=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Mg(C){if(C){if(typeof C=="number"){const l=Math.round(Math.abs(C)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,C),"top-left":new a.P(l,l),"top-right":new a.P(-l,l),bottom:new a.P(0,-C),"bottom-left":new a.P(l,-l),"bottom-right":new a.P(-l,-l),left:new a.P(C,0),right:new a.P(-C,0)}}if(C instanceof a.P||Array.isArray(C)){const l=a.P.convert(C);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:a.P.convert(C.center||[0,0]),top:a.P.convert(C.top||[0,0]),"top-left":a.P.convert(C["top-left"]||[0,0]),"top-right":a.P.convert(C["top-right"]||[0,0]),bottom:a.P.convert(C.bottom||[0,0]),"bottom-left":a.P.convert(C["bottom-left"]||[0,0]),"bottom-right":a.P.convert(C["bottom-right"]||[0,0]),left:a.P.convert(C.left||[0,0]),right:a.P.convert(C.right||[0,0])}}return Mg(new a.P(0,0))}const Jx=h;o.AJAXError=a.bh,o.Evented=a.E,o.LngLat=a.N,o.MercatorCoordinate=a.Z,o.Point=a.P,o.addProtocol=a.bi,o.config=a.a,o.removeProtocol=a.bj,o.AttributionControl=vd,o.BoxZoomHandler=qo,o.CanvasSource=_r,o.CooperativeGesturesHandler=yd,o.DoubleClickZoomHandler=uh,o.DragPanHandler=lw,o.DragRotateHandler=cw,o.EdgeInsets=pd,o.FullscreenControl=class extends a.E{constructor(C={}){super(),this._onFullscreenChange=()=>{var l;let m=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((l=m==null?void 0:m.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)m=m.shadowRoot.fullscreenElement;m===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,C&&C.container&&(C.container instanceof HTMLElement?this._container=C.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const C=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",C).setAttribute("aria-hidden","true"),C.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const C=this._getTitle();this._fullscreenButton.setAttribute("aria-label",C),this._fullscreenButton.title=C}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},o.GeoJSONSource=Yn,o.GeolocateControl=class extends a.E{constructor(C){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",l)),this._finish()}},this._updateCamera=l=>{const m=new a.N(l.coords.longitude,l.coords.latitude),v=l.coords.accuracy,_=this._map.getBearing(),k=a.e({bearing:_},this.options.fitBoundsOptions),E=ze.fromLngLat(m,v);this._map.fitBounds(E,k,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const m=new a.N(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(m).addTo(this._map),this._userLocationDotMarker.setLngLat(m).addTo(this._map),this._accuracy=l.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=l=>{if(this._map){if(this.options.trackUserLocation)if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&Cp)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=l=>{if(this._map){if(l===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{const m=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new zg({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new zg({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",m=>{m.geolocateSource||this._watchState!=="ACTIVE_LOCK"||m.originalEvent&&m.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")),this.fire(new a.k("userlocationlostfocus")))})}},this.options=a.e({},fw,C)}onAdd(C){return this._map=C,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(l=!1){if(Qo!==void 0&&!l)return Qo;if(window.navigator.permissions===void 0)return Qo=!!window.navigator.geolocation,Qo;try{Qo=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Qo=!!window.navigator.geolocation}return Qo})}().then(l=>this._finishSetupUI(l)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,kp=0,Cp=!1}_isOutOfMapMaxBounds(C){const l=this._map.getMaxBounds(),m=C.coords;return l&&(m.longitude<l.getWest()||m.longitude>l.getEast()||m.latitude<l.getSouth()||m.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const C=this._map.getBounds(),l=C.getSouthEast(),m=C.getNorthEast(),v=l.distanceTo(m),_=Math.ceil(this._accuracy/(v/this._map._container.clientHeight)*2);this._circleElement.style.width=`${_}px`,this._circleElement.style.height=`${_}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":kp--,Cp=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart")),this.fire(new a.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let C;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),kp++,kp>1?(C={maximumAge:6e5,timeout:0},Cp=!0):(C=this.options.positionOptions,Cp=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,C)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},o.Hash=wg,o.ImageSource=ur,o.KeyboardHandler=ga,o.LngLatBounds=ze,o.LogoControl=Gx,o.Map=class extends uw{constructor(C){a.bf.mark(a.bg.create);const l=Object.assign(Object.assign({},nj),C);if(l.minZoom!=null&&l.maxZoom!=null&&l.minZoom>l.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(l.minPitch!=null&&l.maxPitch!=null&&l.minPitch>l.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(l.minPitch!=null&&l.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(l.maxPitch!=null&&l.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new md(l.minZoom,l.maxZoom,l.minPitch,l.maxPitch,l.renderWorldCopies),{bearingSnap:l.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new sr,this._controls=[],this._mapId=a.a4(),this._contextLost=m=>{m.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.k("webglcontextlost",{originalEvent:m}))},this._contextRestored=m=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:m}))},this._onMapScroll=m=>{if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=l.interactive,this._maxTileCacheSize=l.maxTileCacheSize,this._maxTileCacheZoomLevels=l.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=l.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=l.preserveDrawingBuffer===!0,this._antialias=l.antialias===!0,this._trackResize=l.trackResize===!0,this._bearingSnap=l.bearingSnap,this._refreshExpiredTiles=l.refreshExpiredTiles===!0,this._fadeDuration=l.fadeDuration,this._crossSourceCollisions=l.crossSourceCollisions===!0,this._collectResourceTiming=l.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Zx),l.locale),this._clickTolerance=l.clickTolerance,this._overridePixelRatio=l.pixelRatio,this._maxCanvasSize=l.maxCanvasSize,this.transformCameraUpdate=l.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=l.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=R.addThrottleControl(()=>this.isMoving()),this._requestManager=new N(l.transformRequest),typeof l.container=="string"){if(this._container=document.getElementById(l.container),!this._container)throw new Error(`Container '${l.container}' not found.`)}else{if(!(l.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=l.container}if(l.maxBounds&&this.setMaxBounds(l.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let m=!1;const v=xp(_=>{this._trackResize&&!this._removed&&(this.resize(_),this.redraw())},50);this._resizeObserver=new ResizeObserver(_=>{m?v(_):m=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Hx(this,l),this._hash=l.hash&&new wg(typeof l.hash=="string"&&l.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:l.center,zoom:l.zoom,bearing:l.bearing,pitch:l.pitch}),l.bounds&&(this.resize(),this.fitBounds(l.bounds,a.e({},l.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=l.localIdeographFontFamily,this._validateStyle=l.validateStyle,l.style&&this.setStyle(l.style,{localIdeographFontFamily:l.localIdeographFontFamily}),l.attributionControl&&this.addControl(new vd(typeof l.attributionControl=="boolean"?void 0:l.attributionControl)),l.maplibreLogo&&this.addControl(new Gx,l.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",m=>{this._update(m.dataType==="style"),this.fire(new a.k(`${m.dataType}data`,m))}),this.on("dataloading",m=>{this.fire(new a.k(`${m.dataType}dataloading`,m))}),this.on("dataabort",m=>{this.fire(new a.k("sourcedataabort",m))})}_getMapId(){return this._mapId}addControl(C,l){if(l===void 0&&(l=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=C.onAdd(this);this._controls.push(C);const v=this._controlPositions[l];return l.indexOf("bottom")!==-1?v.insertBefore(m,v.firstChild):v.appendChild(m),this}removeControl(C){if(!C||!C.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(C);return l>-1&&this._controls.splice(l,1),C.onRemove(this),this}hasControl(C){return this._controls.indexOf(C)>-1}calculateCameraOptionsFromTo(C,l,m,v){return v==null&&this.terrain&&(v=this.terrain.getElevationForLngLatZoom(m,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(C,l,m,v)}resize(C){var l;const m=this._containerDimensions(),v=m[0],_=m[1],k=this._getClampedPixelRatio(v,_);if(this._resizeCanvas(v,_,k),this.painter.resize(v,_,k),this.painter.overLimit()){const M=this.painter.context.gl;this._maxCanvasSize=[M.drawingBufferWidth,M.drawingBufferHeight];const B=this._getClampedPixelRatio(v,_);this._resizeCanvas(v,_,B),this.painter.resize(v,_,B)}this.transform.resize(v,_),(l=this._requestedCameraState)===null||l===void 0||l.resize(v,_);const E=!this._moving;return E&&(this.stop(),this.fire(new a.k("movestart",C)).fire(new a.k("move",C))),this.fire(new a.k("resize",C)),E&&this.fire(new a.k("moveend",C)),this}_getClampedPixelRatio(C,l){const{0:m,1:v}=this._maxCanvasSize,_=this.getPixelRatio(),k=C*_,E=l*_;return Math.min(k>m?m/k:1,E>v?v/E:1)*_}getPixelRatio(){var C;return(C=this._overridePixelRatio)!==null&&C!==void 0?C:devicePixelRatio}setPixelRatio(C){this._overridePixelRatio=C,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(C){return this.transform.setMaxBounds(ze.convert(C)),this._update()}setMinZoom(C){if((C=C??-2)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C&&this.setZoom(C),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(C){if((C=C??22)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C&&this.setZoom(C),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(C){if((C=C??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C&&this.setPitch(C),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(C){if((C=C??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C&&this.setPitch(C),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(C){return this.transform.renderWorldCopies=C,this._update()}project(C){return this.transform.locationPoint(a.N.convert(C),this.style&&this.terrain)}unproject(C){return this.transform.pointLocation(a.P.convert(C),this.terrain)}isMoving(){var C;return this._moving||((C=this.handlers)===null||C===void 0?void 0:C.isMoving())}isZooming(){var C;return this._zooming||((C=this.handlers)===null||C===void 0?void 0:C.isZooming())}isRotating(){var C;return this._rotating||((C=this.handlers)===null||C===void 0?void 0:C.isRotating())}_createDelegatedListener(C,l,m){if(C==="mouseenter"||C==="mouseover"){let v=!1;return{layers:l,listener:m,delegates:{mousemove:k=>{const E=l.filter(B=>this.getLayer(B)),M=E.length!==0?this.queryRenderedFeatures(k.point,{layers:E}):[];M.length?v||(v=!0,m.call(this,new $s(C,this,k.originalEvent,{features:M}))):v=!1},mouseout:()=>{v=!1}}}}if(C==="mouseleave"||C==="mouseout"){let v=!1;return{layers:l,listener:m,delegates:{mousemove:E=>{const M=l.filter(B=>this.getLayer(B));(M.length!==0?this.queryRenderedFeatures(E.point,{layers:M}):[]).length?v=!0:v&&(v=!1,m.call(this,new $s(C,this,E.originalEvent)))},mouseout:E=>{v&&(v=!1,m.call(this,new $s(C,this,E.originalEvent)))}}}}{const v=_=>{const k=l.filter(M=>this.getLayer(M)),E=k.length!==0?this.queryRenderedFeatures(_.point,{layers:k}):[];E.length&&(_.features=E,m.call(this,_),delete _.features)};return{layers:l,listener:m,delegates:{[C]:v}}}}_saveDelegatedListener(C,l){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(l)}_removeDelegatedListener(C,l,m){if(!this._delegatedListeners||!this._delegatedListeners[C])return;const v=this._delegatedListeners[C];for(let _=0;_<v.length;_++){const k=v[_];if(k.listener===m&&k.layers.length===l.length&&k.layers.every(E=>l.includes(E))){for(const E in k.delegates)this.off(E,k.delegates[E]);return void v.splice(_,1)}}}on(C,l,m){if(m===void 0)return super.on(C,l);const v=this._createDelegatedListener(C,typeof l=="string"?[l]:l,m);this._saveDelegatedListener(C,v);for(const _ in v.delegates)this.on(_,v.delegates[_]);return this}once(C,l,m){if(m===void 0)return super.once(C,l);const v=typeof l=="string"?[l]:l,_=this._createDelegatedListener(C,v,m);for(const k in _.delegates){const E=_.delegates[k];_.delegates[k]=(...M)=>{this._removeDelegatedListener(C,v,m),E(...M)}}this._saveDelegatedListener(C,_);for(const k in _.delegates)this.once(k,_.delegates[k]);return this}off(C,l,m){return m===void 0?super.off(C,l):(this._removeDelegatedListener(C,typeof l=="string"?[l]:l,m),this)}queryRenderedFeatures(C,l){if(!this.style)return[];let m;const v=C instanceof a.P||Array.isArray(C),_=v?C:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(v?{}:C)||{},_ instanceof a.P||typeof _[0]=="number")m=[a.P.convert(_)];else{const k=a.P.convert(_[0]),E=a.P.convert(_[1]);m=[k,new a.P(E.x,k.y),E,new a.P(k.x,E.y),k]}return this.style.queryRenderedFeatures(m,l,this.transform)}querySourceFeatures(C,l){return this.style.querySourceFeatures(C,l)}setStyle(C,l){return(l=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&C?(this._diffStyle(C,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(C,l))}setTransformRequest(C){return this._requestManager.setTransformRequest(C),this}_getUIString(C){const l=this._locale[C];if(l==null)throw new Error(`Missing UI string '${C}'`);return l}_updateStyle(C,l){if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(C,l));const m=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!C)),C?(this.style=new tu(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof C=="string"?this.style.loadURL(C,l,m):this.style.loadJSON(C,l,m),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new tu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(C,l){if(typeof C=="string"){const m=this._requestManager.transformRequest(C,"Style");a.h(m,new AbortController).then(v=>{this._updateDiff(v.data,l)}).catch(v=>{v&&this.fire(new a.j(v))})}else typeof C=="object"&&this._updateDiff(C,l)}_updateDiff(C,l){try{this.style.setState(C,l)&&this._update(!0)}catch(m){a.w(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(C,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(C,l){return this._lazyInitEmptyStyle(),this.style.addSource(C,l),this._update(!0)}isSourceLoaded(C){const l=this.style&&this.style.sourceCaches[C];if(l!==void 0)return l.loaded();this.fire(new a.j(new Error(`There is no source with ID '${C}'`)))}setTerrain(C){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),C){const l=this.style.sourceCaches[C.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${C.source}`);this.terrain===null&&l.reload();for(const m in this.style._layers){const v=this.style._layers[m];v.type==="hillshade"&&v.source===C.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Kx(this.painter,l,C),this.painter.renderToTexture=new hw(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=m=>{m.dataType==="style"?this.terrain.sourceCache.freeRtt():m.dataType==="source"&&m.tile&&(m.sourceId!==C.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(m.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:C})),this}getTerrain(){var C,l;return(l=(C=this.terrain)===null||C===void 0?void 0:C.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const C=this.style&&this.style.sourceCaches;for(const l in C){const m=C[l]._tiles;for(const v in m){const _=m[v];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}removeSource(C){return this.style.removeSource(C),this._update(!0)}getSource(C){return this.style.getSource(C)}addImage(C,l,m={}){const{pixelRatio:v=1,sdf:_=!1,stretchX:k,stretchY:E,content:M,textFitWidth:B,textFitHeight:W}=m;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||a.b(l))){if(l.width===void 0||l.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Z,height:Y,data:le}=l,he=l;return this.style.addImage(C,{data:new a.R({width:Z,height:Y},new Uint8Array(le)),pixelRatio:v,stretchX:k,stretchY:E,content:M,textFitWidth:B,textFitHeight:W,sdf:_,version:0,userImage:he}),he.onAdd&&he.onAdd(this,C),this}}{const{width:Z,height:Y,data:le}=y.getImageData(l);this.style.addImage(C,{data:new a.R({width:Z,height:Y},le),pixelRatio:v,stretchX:k,stretchY:E,content:M,textFitWidth:B,textFitHeight:W,sdf:_,version:0})}}updateImage(C,l){const m=this.style.getImage(C);if(!m)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=l instanceof HTMLImageElement||a.b(l)?y.getImageData(l):l,{width:_,height:k,data:E}=v;if(_===void 0||k===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==m.data.width||k!==m.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const M=!(l instanceof HTMLImageElement||a.b(l));return m.data.replace(E,M),this.style.updateImage(C,m),this}getImage(C){return this.style.getImage(C)}hasImage(C){return C?!!this.style.getImage(C):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(C){this.style.removeImage(C)}loadImage(C){return R.getImage(this._requestManager.transformRequest(C,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(C,l){return this._lazyInitEmptyStyle(),this.style.addLayer(C,l),this._update(!0)}moveLayer(C,l){return this.style.moveLayer(C,l),this._update(!0)}removeLayer(C){return this.style.removeLayer(C),this._update(!0)}getLayer(C){return this.style.getLayer(C)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(C,l,m){return this.style.setLayerZoomRange(C,l,m),this._update(!0)}setFilter(C,l,m={}){return this.style.setFilter(C,l,m),this._update(!0)}getFilter(C){return this.style.getFilter(C)}setPaintProperty(C,l,m,v={}){return this.style.setPaintProperty(C,l,m,v),this._update(!0)}getPaintProperty(C,l){return this.style.getPaintProperty(C,l)}setLayoutProperty(C,l,m,v={}){return this.style.setLayoutProperty(C,l,m,v),this._update(!0)}getLayoutProperty(C,l){return this.style.getLayoutProperty(C,l)}setGlyphs(C,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(C,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(C,l,m={}){return this._lazyInitEmptyStyle(),this.style.addSprite(C,l,m,v=>{v||this._update(!0)}),this}removeSprite(C){return this._lazyInitEmptyStyle(),this.style.removeSprite(C),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(C,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(C,l,m=>{m||this._update(!0)}),this}setLight(C,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(C,l),this._update(!0)}getLight(){return this.style.getLight()}setSky(C){return this._lazyInitEmptyStyle(),this.style.setSky(C),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(C,l){return this.style.setFeatureState(C,l),this._update()}removeFeatureState(C,l){return this.style.removeFeatureState(C,l),this._update()}getFeatureState(C){return this.style.getFeatureState(C)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let C=0,l=0;return this._container&&(C=this._container.clientWidth||400,l=this._container.clientHeight||300),[C,l]}_setupContainer(){const C=this._container;C.classList.add("maplibregl-map");const l=this._canvasContainer=b.create("div","maplibregl-canvas-container",C);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const m=this._containerDimensions(),v=this._getClampedPixelRatio(m[0],m[1]);this._resizeCanvas(m[0],m[1],v);const _=this._controlContainer=b.create("div","maplibregl-control-container",C),k=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{k[E]=b.create("div",`maplibregl-ctrl-${E} `,_)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(C,l,m){this._canvas.width=Math.floor(m*C),this._canvas.height=Math.floor(m*l),this._canvas.style.width=`${C}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const C={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let l=null;this._canvas.addEventListener("webglcontextcreationerror",v=>{l={requestedAttributes:C},v&&(l.statusMessage=v.statusMessage,l.type=v.type)},{once:!0});const m=this._canvas.getContext("webgl2",C)||this._canvas.getContext("webgl",C);if(!m){const v="Failed to initialize WebGL";throw l?(l.message=v,new Error(JSON.stringify(l))):new Error(v)}this.painter=new _g(m,this.transform),S.testSupport(m)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(C){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(C){return this._update(),this._renderTaskQueue.add(C)}_cancelRenderFrame(C){this._renderTaskQueue.remove(C)}_render(C){const l=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(C),this._removed)return;let m=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const _=this.transform.zoom,k=y.now();this.style.zoomHistory.update(_,k);const E=new a.z(_,{now:k,fadeDuration:l,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),M=E.crossFadingFactor();M===1&&M===this._crossFadingFactor||(m=!0,this._crossFadingFactor=M),this.style.update(E)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,l,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:l,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bf.mark(a.bg.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||m)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,a.bf.mark(a.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var C;this._hash&&this._hash.remove();for(const m of this._controls)m.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),R.removeThrottleControl(this._imageQueueHandle),(C=this._resizeObserver)===null||C===void 0||C.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l!=null&&l.loseContext&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),a.bf.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,y.frameAsync(this._frameRequest).then(C=>{a.bf.frame(C),this._frameRequest=null,this._render(C)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())}get showPadding(){return!!this._showPadding}set showPadding(C){this._showPadding!==C&&(this._showPadding=C,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())}get repaint(){return!!this._repaint}set repaint(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(C){this._vertices=C,this._update()}get version(){return dw}getCameraTargetElevation(){return this.transform.elevation}},o.MapMouseEvent=$s,o.MapTouchEvent=lh,o.MapWheelEvent=sw,o.Marker=zg,o.NavigationControl=class{constructor(C){this._updateZoomButtons=()=>{const l=this._map.getZoom(),m=l===this._map.getMaxZoom(),v=l===this._map.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())},this._rotateCompassArrow=()=>{const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=l},this._setButtonTitle=(l,m)=>{const v=this._map._getUIString(`NavigationControl.${m}`);l.title=v,l.setAttribute("aria-label",v)},this.options=a.e({},rj,C),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",l=>this._map.zoomIn({},{originalEvent:l})),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",l=>this._map.zoomOut({},{originalEvent:l})),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})}),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ij(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(C,l){const m=b.create("button",C,this._container);return m.type="button",m.addEventListener("click",l),m}},o.Popup=class extends a.E{constructor(C){super(),this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.k("close"))),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{var m;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?ei(this._lngLat,this._flatPos,this._map.transform):(m=this._lngLat)===null||m===void 0?void 0:m.wrap(),this._trackPointer&&!l)return;const v=this._flatPos=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&l?l:this._map.transform.locationPoint(this._lngLat));let _=this.options.anchor;const k=Mg(this.options.offset);if(!_){const M=this._container.offsetWidth,B=this._container.offsetHeight;let W;W=v.y+k.bottom.y<B?["top"]:v.y>this._map.transform.height-B?["bottom"]:[],v.x<M/2?W.push("left"):v.x>this._map.transform.width-M/2&&W.push("right"),_=W.length===0?"bottom":W.join("-")}let E=v.add(k[_]);this.options.subpixelPositioning||(E=E.round()),b.setTransform(this._container,`${_d[_]} translate(${E.x}px,${E.y}px)`),Eg(this._container,_,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(jn),C)}addTo(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(C){return this._lngLat=a.N.convert(C),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(C){return this.setDOMContent(document.createTextNode(C))}setHTML(C){const l=document.createDocumentFragment(),m=document.createElement("body");let v;for(m.innerHTML=C;v=m.firstChild,v;)l.appendChild(v);return this.setDOMContent(l)}getMaxWidth(){var C;return(C=this._container)===null||C===void 0?void 0:C.style.maxWidth}setMaxWidth(C){return this.options.maxWidth=C,this._update(),this}setDOMContent(C){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(C),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(C){return this._container&&this._container.classList.add(C),this}removeClassName(C){return this._container&&this._container.classList.remove(C),this}setOffset(C){return this.options.offset=C,this._update(),this}toggleClassName(C){if(this._container)return this._container.classList.toggle(C)}setSubpixelPositioning(C){this.options.subpixelPositioning=C}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const C=this._container.querySelector(Ig);C&&C.focus()}},o.RasterDEMTileSource=$t,o.RasterTileSource=Ct,o.ScaleControl=class{constructor(C){this._onMove=()=>{Tp(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,Tp(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ml),C)}getDefaultPosition(){return"bottom-left"}onAdd(C){return this._map=C,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",C.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},o.ScrollZoomHandler=Ja,o.Style=tu,o.TerrainControl=class{constructor(C){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=C}onAdd(C){return this._map=C,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},o.TwoFingersTouchPitchHandler=Sp,o.TwoFingersTouchRotateHandler=Ux,o.TwoFingersTouchZoomHandler=Vx,o.TwoFingersTouchZoomRotateHandler=Qx,o.VectorTileSource=qt,o.VideoSource=Ar,o.addSourceType=(C,l)=>a._(void 0,void 0,void 0,function*(){if(Tt(C))throw new Error(`A source type called "${C}" already exists.`);((m,v)=>{ct[m]=v})(C,l)}),o.clearPrewarmedResources=function(){const C=Ye;C&&(C.isPreloaded()&&C.numActive()===1?(C.release(nt),Ye=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},o.getRTLTextPluginStatus=function(){return zt().getRTLTextPluginStatus()},o.getVersion=function(){return Jx},o.getWorkerCount=function(){return Ne.workerCount},o.getWorkerUrl=function(){return a.a.WORKER_URL},o.importScriptInWorkers=function(C){return bt().broadcast("IS",C)},o.prewarm=function(){At().acquire(nt)},o.setMaxParallelImageRequests=function(C){a.a.MAX_PARALLEL_IMAGE_REQUESTS=C},o.setRTLTextPlugin=function(C,l){return zt().setRTLTextPlugin(C,l)},o.setWorkerCount=function(C){Ne.workerCount=C},o.setWorkerUrl=function(C){a.a.WORKER_URL=C}});var s=n;return s})})(jH);var Eke=jH.exports;const gO=Zm(Eke);function zke({geoserverUrl:t,workspace:e,layerName:n,styleName:r,size:i=20}){const[s,o]=L.useState(!1),a=`${t}/${e}/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetLegendGraphic&LAYER=${e}:${n}&STYLE=${r}&FORMAT=image/png&WIDTH=${i}&HEIGHT=${i}&LEGEND_OPTIONS=forceLabels:off;fontAntiAliasing:true`;return s?u.jsx(Le,{as:na,color:"pink.500",boxSize:`${i}px`}):u.jsx(de,{as:"img",src:a,alt:r,w:`${i}px`,h:`${i}px`,minW:`${i}px`,minH:`${i}px`,borderRadius:"sm",objectFit:"contain",bg:"white",border:"1px solid",borderColor:"gray.200",onError:()=>o(!0)})}function Ike({previewUrl:t,layerName:e,workspace:n,storeName:r,storeType:i,layerType:s,connectionId:o,onClose:a}){const h=L.useRef(null),p=L.useRef(null),g=L.useRef(null),[y,b]=L.useState(!1),[S,P]=L.useState(null),[O,D]=L.useState(null),[z,F]=L.useState(!1),[R,N]=L.useState(!1),[Q,q]=L.useState("2d"),[X,K]=L.useState([]),[ne,J]=L.useState(""),[ae,Ee]=L.useState(""),Ce=Et("white","gray.800"),$e=Et("gray.200","gray.600"),We=Et("gray.50","gray.700"),Fe=St(Oe=>Oe.setPreviewMode);L.useEffect(()=>{t&&(console.log("[MapPreview] Fetching layer info from:",`${t}/api/layer`),fetch(`${t}/api/layer`).then(Oe=>Oe.json()).then(Oe=>{console.log("[MapPreview] Received layer info:",Oe),D(Oe)}).catch(Oe=>{console.error("[MapPreview] Failed to fetch layer info:",Oe)}))},[t]),L.useEffect(()=>{t&&(console.log("[MapPreview] Fetching metadata from:",`${t}/api/metadata`),F(!0),fetch(`${t}/api/metadata`).then(Oe=>Oe.json()).then(Oe=>{console.log("[MapPreview] Received metadata:",Oe),P(Oe),F(!1)}).catch(Oe=>{console.error("[MapPreview] Failed to fetch metadata:",Oe),F(!1)}))},[t]),L.useEffect(()=>{o&&n&&e&&gH(o,n,e).then(Oe=>{const oe=[Oe.defaultStyle,...Oe.additionalStyles||[]];K(oe.filter(Boolean)),Ee(Oe.defaultStyle||""),J(Oe.defaultStyle||"")}).catch(Oe=>{console.error("Failed to fetch layer styles:",Oe)})},[o,n,e]);const we=(Oe,oe)=>!(Oe[2]<oe[0]||oe[2]<Oe[0]||Oe[3]<oe[1]||oe[3]<Oe[1]),Ie=Oe=>{if(!p.current)return!1;const oe=p.current.getBounds(),nt=[oe.getWest(),oe.getSouth(),oe.getEast(),oe.getNorth()];return we(nt,Oe)},Qe=(Oe,oe)=>{const nt=`${Oe.workspace}:${Oe.name}`;if(Oe.use_cache){const Ye=Oe.grid_set||"EPSG:900913",_t=Oe.tile_format||"image/png";return`${Oe.geoserver_url}/gwc/service/wmts/rest/${encodeURIComponent(nt)}/${Ye}/${encodeURIComponent(_t)}/{z}/{y}/{x}`}const Ne=`${Oe.geoserver_url}/${Oe.workspace}/wms`,tt=new URLSearchParams({SERVICE:"WMS",VERSION:"1.1.1",REQUEST:"GetMap",LAYERS:nt,FORMAT:"image/png",TRANSPARENT:"true",SRS:"EPSG:3857",WIDTH:"256",HEIGHT:"256"});return oe&&tt.set("STYLES",oe),`${Ne}?${tt.toString()}&BBOX={bbox-epsg-3857}`};L.useEffect(()=>{if(!h.current||!O)return;const Oe=S!=null&&S.latlon_bbox?[S.latlon_bbox.minx,S.latlon_bbox.miny,S.latlon_bbox.maxx,S.latlon_bbox.maxy]:[-180,-85,180,85],oe=[(Oe[0]+Oe[2])/2,(Oe[1]+Oe[3])/2];return p.current=new gO.Map({container:h.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:19}]},center:oe,zoom:2}),p.current.addControl(new gO.NavigationControl,"top-right"),p.current.addControl(new gO.ScaleControl,"bottom-left"),p.current.on("load",()=>{N(!0)}),()=>{p.current&&(p.current.remove(),p.current=null,N(!1))}},[O]),L.useEffect(()=>{if(!p.current||!R||!O)return;const Oe=Qe(O,ne);if(console.log("[MapPreview] Layer info:",{workspace:O.workspace,name:O.name,geoserver_url:O.geoserver_url,store_type:O.store_type,type:O.type,use_cache:O.use_cache}),console.log("[MapPreview] WMS tile URL template:",Oe),console.log("[MapPreview] Current style:",ne||"(default)"),p.current.getLayer("wms-layer")&&p.current.removeLayer("wms-layer"),p.current.getSource("wms-layer")&&p.current.removeSource("wms-layer"),p.current.addSource("wms-layer",{type:"raster",tiles:[Oe],tileSize:256}),p.current.addLayer({id:"wms-layer",type:"raster",source:"wms-layer",paint:{"raster-opacity":1}}),S!=null&&S.latlon_bbox){const oe=[S.latlon_bbox.minx,S.latlon_bbox.miny,S.latlon_bbox.maxx,S.latlon_bbox.maxy];console.log("[MapPreview] Layer bounds (lat/lon):",oe);const nt=!Ie(oe);console.log("[MapPreview] Should fit to bounds:",nt),nt&&p.current.fitBounds(oe,{padding:50,maxZoom:15}),g.current=oe}else console.log("[MapPreview] No bounds available in metadata")},[R,O,ne,S==null?void 0:S.latlon_bbox]),L.useEffect(()=>{if(!(!p.current||!R))switch(Q){case"2d":p.current.easeTo({pitch:0,bearing:0,duration:500}),p.current.setMaxPitch(0);break;case"3d":p.current.setMaxPitch(85),p.current.easeTo({pitch:45,duration:500});break}},[Q,R]);const se=()=>{if(!p.current||!R||!O)return;const Oe=Qe(O,ne);p.current.getLayer("wms-layer")&&p.current.removeLayer("wms-layer"),p.current.getSource("wms-layer")&&p.current.removeSource("wms-layer");const oe=`&_t=${Date.now()}`;p.current.addSource("wms-layer",{type:"raster",tiles:[Oe+oe],tileSize:256}),p.current.addLayer({id:"wms-layer",type:"raster",source:"wms-layer",paint:{"raster-opacity":1}})},Re=Oe=>{J(Oe)};return t?u.jsxs(Dn,{bg:Ce,overflow:"hidden",h:"100%",display:"flex",flexDirection:"column",children:[u.jsx(de,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",px:4,py:3,children:u.jsxs(me,{justify:"space-between",children:[u.jsxs(at,{align:"start",spacing:0,children:[u.jsxs(me,{children:[u.jsx(lr,{size:"sm",color:"white",children:"Layer Preview"}),u.jsx(Lt,{colorScheme:"whiteAlpha",variant:"solid",fontSize:"xs",children:s==="raster"?"Raster":"Vector"})]}),u.jsxs(te,{fontSize:"xs",color:"whiteAlpha.800",children:[n,":",e]})]}),u.jsxs(me,{spacing:2,children:[X.length>0&&u.jsxs(Df,{children:[u.jsx(Lf,{as:vt,size:"sm",variant:"solid",bg:"whiteAlpha.200",color:"white",_hover:{bg:"whiteAlpha.300"},_active:{bg:"whiteAlpha.400"},rightIcon:u.jsx(fc,{}),leftIcon:u.jsx(na,{}),maxW:"180px",children:u.jsx(te,{isTruncated:!0,fontSize:"xs",children:ne||"Default Style"})}),u.jsx(Ff,{color:"gray.800",zIndex:1e3,children:X.map(Oe=>u.jsx(ml,{onClick:()=>Re(Oe),fontWeight:ne===Oe?"bold":"normal",bg:ne===Oe?"kartoza.50":void 0,children:u.jsxs(me,{children:[O!=null&&O.geoserver_url?u.jsx(zke,{geoserverUrl:O.geoserver_url,workspace:n,layerName:e,styleName:Oe,size:20}):u.jsx(Le,{as:na,color:"pink.500"}),u.jsx(te,{children:Oe}),Oe===ae&&u.jsx(Lt,{colorScheme:"kartoza",size:"sm",ml:2,children:"Default"})]})},Oe))})]}),u.jsxs(oT,{size:"sm",isAttached:!0,variant:"ghost",children:[u.jsx(kn,{label:"2D View",children:u.jsx(wn,{"aria-label":"2D",icon:u.jsx(Hc,{}),color:"white",bg:Q==="2d"?"whiteAlpha.300":void 0,_hover:{bg:"whiteAlpha.200"},onClick:()=>q("2d")})}),u.jsx(kn,{label:"3D View (tilt)",children:u.jsx(wn,{"aria-label":"3D",icon:u.jsx(uR,{}),color:"white",bg:Q==="3d"?"whiteAlpha.300":void 0,_hover:{bg:"whiteAlpha.200"},onClick:()=>q("3d")})})]}),u.jsx(kn,{label:"3D Globe (Cesium)",children:u.jsx(wn,{"aria-label":"3D Globe",icon:u.jsx(Os,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:()=>Fe("3d")})}),u.jsx(Hn,{orientation:"vertical",h:"24px",borderColor:"whiteAlpha.400"}),u.jsx(kn,{label:"Refresh",children:u.jsx(wn,{"aria-label":"Refresh",icon:u.jsx(Xc,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:se})}),u.jsx(kn,{label:"Layer Info",children:u.jsx(wn,{"aria-label":"Layer Info",icon:u.jsx(P_,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:()=>b(!y),bg:y?"whiteAlpha.200":void 0})}),a&&u.jsx(kn,{label:"Close Preview",children:u.jsx(wn,{"aria-label":"Close",icon:u.jsx(Wf,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:a})})]})]})}),ne&&X.length>1&&u.jsx(de,{px:4,py:2,bg:"kartoza.50",borderBottom:"1px solid",borderColor:$e,children:u.jsxs(me,{fontSize:"sm",children:[u.jsx(Le,{as:na,color:"pink.500"}),u.jsxs(te,{color:"gray.600",children:["Style: ",u.jsx(te,{as:"span",fontWeight:"600",children:ne}),ne===ae&&u.jsx(Lt,{ml:2,colorScheme:"kartoza",size:"sm",children:"Default"})]}),X.length>1&&u.jsxs(Df,{children:[u.jsx(Lf,{as:vt,size:"xs",variant:"ghost",rightIcon:u.jsx(fc,{}),ml:"auto",children:"Change"}),u.jsx(Ff,{children:X.map(Oe=>u.jsx(ml,{onClick:()=>Re(Oe),fontWeight:ne===Oe?"bold":"normal",children:u.jsxs(me,{children:[u.jsx(Le,{as:na,color:"pink.500"}),u.jsx(te,{children:Oe}),Oe===ae&&u.jsx(Lt,{colorScheme:"kartoza",size:"sm",children:"Default"})]})},Oe))})]})]})}),u.jsx(qc,{in:y,animateOpacity:!0,children:u.jsx(de,{bg:We,p:4,borderBottom:"1px solid",borderColor:$e,children:z?u.jsxs(me,{justify:"center",py:4,children:[u.jsx(Cr,{size:"sm",color:"kartoza.500"}),u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Loading metadata..."})]}):S?u.jsxs(Gn,{columns:{base:1,md:2,lg:3},spacing:4,children:[S.layer_title&&u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:"Title"}),u.jsx(te,{fontSize:"sm",children:S.layer_title})]}),S.layer_srs&&u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:"SRS"}),u.jsx(te,{fontSize:"sm",fontFamily:"mono",children:S.layer_srs})]}),S.store_format&&u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:"Format"}),u.jsx(te,{fontSize:"sm",children:S.store_format})]}),S.latlon_bbox&&u.jsxs(de,{gridColumn:{md:"span 2",lg:"span 3"},children:[u.jsx(te,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:"Bounding Box (WGS84)"}),u.jsxs(te,{fontSize:"sm",fontFamily:"mono",children:["[",S.latlon_bbox.minx.toFixed(4),", ",S.latlon_bbox.miny.toFixed(4),"] - [",S.latlon_bbox.maxx.toFixed(4),", ",S.latlon_bbox.maxy.toFixed(4),"]"]})]}),u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:"Status"}),u.jsxs(me,{spacing:2,mt:1,children:[S.layer_enabled!==void 0&&u.jsx(Lt,{colorScheme:S.layer_enabled?"green":"gray",size:"sm",children:S.layer_enabled?"Enabled":"Disabled"}),S.layer_queryable!==void 0&&S.layer_queryable&&u.jsx(Lt,{colorScheme:"blue",size:"sm",children:"Queryable"}),S.layer_advertised!==void 0&&S.layer_advertised&&u.jsx(Lt,{colorScheme:"purple",size:"sm",children:"Advertised"})]})]}),S.layer_abstract&&u.jsxs(de,{gridColumn:{md:"span 2",lg:"span 3"},children:[u.jsx(te,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:"Abstract"}),u.jsx(te,{fontSize:"sm",noOfLines:3,children:S.layer_abstract})]})]}):u.jsx(te,{fontSize:"sm",color:"gray.500",children:"No metadata available"})})}),u.jsxs(de,{flex:"1",minH:"300px",position:"relative",bg:"gray.100",children:[u.jsx(de,{ref:h,position:"absolute",top:0,left:0,right:0,bottom:0}),!R&&u.jsxs(de,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",children:[u.jsx(Cr,{size:"xl",color:"kartoza.500"}),u.jsx(te,{mt:2,color:"gray.600",children:"Loading map..."})]})]}),u.jsx(de,{px:4,py:2,bg:We,borderTop:"1px solid",borderColor:$e,children:u.jsxs(me,{justify:"space-between",fontSize:"xs",color:"gray.500",children:[u.jsxs(te,{children:["Store: ",r||"N/A"," (",i||"unknown",")"]}),u.jsxs(me,{spacing:4,children:[u.jsxs(Lt,{colorScheme:Q==="2d"?"blue":Q==="3d"?"purple":"green",children:[Q.toUpperCase()," Mode"]}),u.jsxs(te,{children:["Zoom with scroll, drag to pan",Q!=="2d"&&", Ctrl+drag to rotate"]})]})]})})]}):null}Cesium.Ion.defaultAccessToken="";function Mke({connectionId:t,workspace:e,layerName:n,nodeType:r="layer",onClose:i}){const s=L.useRef(null),o=L.useRef(null),[a,h]=L.useState(!0),[p,g]=L.useState("3d"),[y,b]=L.useState([]),[S,P]=L.useState(null),[O,D]=L.useState(!1),[z,F]=L.useState(0),R=Et("white","gray.800"),N=Et("gray.200","gray.600"),Q=Et("gray.50","gray.700"),q=St(Ce=>Ce.setPreviewMode),X=St(Ce=>Ce.setPreview),K=async()=>{try{const Ce=r==="layergroup"?"group":"vector",{url:$e}=await Cl({connId:t,workspace:e,layerName:n,layerType:Ce});X({url:$e,layerName:n,workspace:e,connectionId:t,layerType:Ce,nodeType:r}),q("2d")}catch(Ce){St.getState().setError(Ce.message)}},ne=L.useCallback(()=>!t||!e?null:r==="layergroup"?`/api/terria/story/${t}/${e}/${n}`:`/api/terria/layer/${t}/${e}/${n}`,[t,e,n,r]);L.useEffect(()=>{F(Ce=>Ce+1)},[t,e,n]),L.useEffect(()=>{if(!s.current)return;if(o.current){try{o.current.destroy()}catch(We){console.warn("[Globe3D] Error destroying previous viewer:",We)}o.current=null}h(!0),P(null);let Ce=!0;const $e=setTimeout(async()=>{if(!(!Ce||!s.current))try{console.log("[Globe3D] Initializing Cesium viewer...");const We=new Cesium.Viewer(s.current,{baseLayerPicker:!1,geocoder:!1,homeButton:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,animation:!1,navigationHelpButton:!1,fullscreenButton:!1,vrButton:!1,infoBox:!1,creditContainer:document.createElement("div")});We.imageryLayers.removeAll(),We.terrainProvider=new Cesium.EllipsoidTerrainProvider,console.log("[Globe3D] Viewer created, adding base layer..."),We.imageryLayers.addImageryProvider(new Cesium.UrlTemplateImageryProvider({url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",subdomains:["a","b","c","d"],credit:new Cesium.Credit("Map tiles by CartoDB, under CC BY 3.0. Data by OpenStreetMap, under ODbL.")})),console.log("[Globe3D] CartoDB base layer added"),o.current=We;const Fe=ne();if(Fe){const we=await fetch(Fe);if(!we.ok)throw new Error(`Failed to fetch catalog: ${we.status}`);const Ie=await we.json(),Qe=[],se=Re=>{if(Re.type==="wms")try{const Oe=new Cesium.WebMapServiceImageryProvider({url:Re.url,layers:Re.layers||Re.name,parameters:{transparent:!0,format:"image/png"}}),oe=We.imageryLayers.addImageryProvider(Oe);if(oe.alpha=Re.opacity||1,Qe.push({name:Re.name,layer:oe,visible:!0,opacity:oe.alpha}),Re.rectangle){const nt=Re.rectangle;We.camera.flyTo({destination:Cesium.Rectangle.fromDegrees(nt.west,nt.south,nt.east,nt.north),duration:1.5})}}catch(Oe){console.error("Failed to add WMS layer:",Re.name,Oe)}else Re.type==="group"&&Array.isArray(Re.members)&&Re.members.forEach(Oe=>se(Oe))};Ie.catalog?Ie.catalog.forEach(Re=>se(Re)):(Ie.type==="wms"||Ie.type==="group")&&se(Ie),Ce&&b(Qe)}Ce&&h(!1)}catch(We){console.error("Failed to initialize Cesium viewer:",We),Ce&&(P(We instanceof Error?We.message:"Failed to initialize viewer"),h(!1))}},200);return()=>{if(Ce=!1,clearTimeout($e),o.current){try{o.current.destroy()}catch(We){console.warn("[Globe3D] Error destroying viewer:",We)}o.current=null}b([])}},[ne,z]),L.useEffect(()=>{if(o.current)switch(p){case"3d":o.current.scene.mode=Cesium.SceneMode.SCENE3D;break;case"2d":o.current.scene.mode=Cesium.SceneMode.SCENE2D;break;case"columbus":o.current.scene.mode=Cesium.SceneMode.COLUMBUS_VIEW;break}},[p]);const J=(Ce,$e)=>{y[Ce]&&(y[Ce].layer.show=$e,b(We=>We.map((Fe,we)=>we===Ce?{...Fe,visible:$e}:Fe)))},ae=(Ce,$e)=>{y[Ce]&&(y[Ce].layer.alpha=$e,b(We=>We.map((Fe,we)=>we===Ce?{...Fe,opacity:$e}:Fe)))},Ee=()=>{if(!o.current)return;const $e=o.current.imageryLayers;for(let We=0;We<$e.length;We++){const Fe=$e.get(We),we=Fe.show;Fe.show=!1,setTimeout(()=>{Fe.show=we},100)}};return u.jsxs(Dn,{bg:R,overflow:"hidden",h:"100%",display:"flex",flexDirection:"column",children:[u.jsx(de,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",px:4,py:3,children:u.jsxs(me,{justify:"space-between",children:[u.jsxs(at,{align:"start",spacing:0,children:[u.jsxs(me,{children:[u.jsx(lr,{size:"sm",color:"white",children:"3D Globe Preview"}),u.jsx(Lt,{colorScheme:"whiteAlpha",variant:"solid",fontSize:"xs",children:r==="layergroup"?"Layer Group":"Layer"})]}),u.jsxs(te,{fontSize:"xs",color:"whiteAlpha.800",children:[e,":",n]})]}),u.jsxs(me,{spacing:2,children:[y.length>0&&u.jsxs(Df,{children:[u.jsx(Lf,{as:vt,size:"sm",variant:"solid",bg:"whiteAlpha.200",color:"white",_hover:{bg:"whiteAlpha.300"},_active:{bg:"whiteAlpha.400"},rightIcon:u.jsx(fc,{}),leftIcon:u.jsx(mi,{}),maxW:"180px",children:u.jsxs(te,{isTruncated:!0,fontSize:"xs",children:[y.length," Layer",y.length!==1?"s":""]})}),u.jsx(Ff,{color:"gray.800",zIndex:1e3,maxH:"300px",overflowY:"auto",children:y.map((Ce,$e)=>u.jsx(ml,{onClick:()=>J($e,!Ce.visible),closeOnSelect:!1,children:u.jsxs(me,{justify:"space-between",w:"100%",children:[u.jsxs(me,{children:[u.jsx(Le,{as:Ce.visible?Pi:Nf,color:Ce.visible?"green.500":"gray.400"}),u.jsx(te,{fontSize:"sm",children:Ce.name})]}),u.jsxs(Lt,{colorScheme:Ce.visible?"green":"gray",size:"sm",children:[Math.round(Ce.opacity*100),"%"]})]})},$e))})]}),u.jsx(kn,{label:"2D Map (MapLibre)",children:u.jsx(wn,{"aria-label":"2D Map",icon:u.jsx(Hc,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:K})}),u.jsxs(oT,{size:"sm",isAttached:!0,variant:"ghost",children:[u.jsx(kn,{label:"3D Globe",children:u.jsx(wn,{"aria-label":"3D Globe",icon:u.jsx(Os,{}),color:"white",bg:p==="3d"?"whiteAlpha.300":void 0,_hover:{bg:"whiteAlpha.200"},onClick:()=>g("3d")})}),u.jsx(kn,{label:"Columbus View",children:u.jsx(wn,{"aria-label":"Columbus View",icon:u.jsx(uR,{}),color:"white",bg:p==="columbus"?"whiteAlpha.300":void 0,_hover:{bg:"whiteAlpha.200"},onClick:()=>g("columbus")})})]}),u.jsx(Hn,{orientation:"vertical",h:"24px",borderColor:"whiteAlpha.400"}),u.jsx(kn,{label:"Refresh",children:u.jsx(wn,{"aria-label":"Refresh",icon:u.jsx(Xc,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:Ee})}),u.jsx(kn,{label:"Layer Controls",children:u.jsx(wn,{"aria-label":"Layer Controls",icon:u.jsx(P_,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:()=>D(!O),bg:O?"whiteAlpha.200":void 0})}),i&&u.jsx(kn,{label:"Close Preview",children:u.jsx(wn,{"aria-label":"Close",icon:u.jsx(Wf,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:i})})]})]})}),u.jsx(qc,{in:O,animateOpacity:!0,children:u.jsx(de,{bg:Q,p:4,borderBottom:"1px solid",borderColor:N,children:a?u.jsxs(me,{justify:"center",py:4,children:[u.jsx(Cr,{size:"sm",color:"kartoza.500"}),u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Loading layers..."})]}):y.length>0?u.jsx(Gn,{columns:{base:1,md:2,lg:3},spacing:4,children:y.map((Ce,$e)=>u.jsxs(de,{bg:R,p:3,borderRadius:"md",border:"1px solid",borderColor:N,children:[u.jsx(me,{justify:"space-between",mb:2,children:u.jsxs(me,{children:[u.jsx(wn,{"aria-label":"Toggle visibility",icon:Ce.visible?u.jsx(Pi,{}):u.jsx(Nf,{}),size:"xs",variant:"ghost",colorScheme:Ce.visible?"green":"gray",onClick:()=>J($e,!Ce.visible)}),u.jsx(te,{fontSize:"sm",fontWeight:"500",noOfLines:1,children:Ce.name})]})}),u.jsxs(me,{spacing:2,children:[u.jsx(te,{fontSize:"xs",color:"gray.500",minW:"50px",children:"Opacity"}),u.jsxs(Hl,{value:Ce.opacity*100,onChange:We=>ae($e,We/100),min:0,max:100,size:"sm",children:[u.jsx(Xl,{bg:"gray.200",children:u.jsx(Kl,{bg:"kartoza.500"})}),u.jsx(Gl,{boxSize:3})]}),u.jsxs(te,{fontSize:"xs",color:"gray.500",minW:"30px",children:[Math.round(Ce.opacity*100),"%"]})]})]},$e))}):u.jsx(te,{fontSize:"sm",color:"gray.500",children:"No layers loaded"})})}),u.jsxs(de,{flex:"1",minH:"300px",position:"relative",bg:"gray.900",children:[u.jsx(de,{ref:s,position:"absolute",top:0,left:0,right:0,bottom:0},`cesium-container-${z}`),a&&u.jsxs(de,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",bg:"blackAlpha.700",p:6,borderRadius:"lg",children:[u.jsx(Cr,{size:"xl",color:"kartoza.400",thickness:"4px"}),u.jsx(te,{mt:3,color:"white",children:"Loading 3D viewer..."})]}),S&&u.jsxs(de,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",bg:"red.600",color:"white",p:6,borderRadius:"lg",maxW:"400px",children:[u.jsx(te,{fontWeight:"bold",mb:2,children:"Error"}),u.jsx(te,{fontSize:"sm",children:S})]})]}),u.jsx(de,{px:4,py:2,bg:Q,borderTop:"1px solid",borderColor:N,children:u.jsxs(me,{justify:"space-between",fontSize:"xs",color:"gray.500",children:[u.jsxs(te,{children:["Connection: ",t==null?void 0:t.slice(0,8),"..."]}),u.jsxs(me,{spacing:4,children:[u.jsx(Lt,{colorScheme:p==="3d"?"green":p==="2d"?"blue":"purple",children:p==="3d"?"3D Globe":p==="2d"?"2D Map":"Columbus View"}),u.jsx(te,{children:"Scroll to zoom, drag to pan, right-drag to rotate"})]})]})})]})}function Rke({isOpen:t,onClose:e,connectionId:n,connectionName:r}){const i=ha(),s=da(),[o,a]=L.useState({}),{data:h,isLoading:p}=er({queryKey:["contact",n],queryFn:()=>WSe(n),enabled:t&&!!n});L.useEffect(()=>{h&&a(h)},[h]);const g=Au({mutationFn:S=>USe(n,S),onSuccess:()=>{s.invalidateQueries({queryKey:["contact",n]}),i({title:"Settings saved",description:"Service metadata has been updated successfully.",status:"success",duration:3e3}),e()},onError:S=>{i({title:"Error saving settings",description:S.message,status:"error",duration:5e3})}}),y=(S,P)=>{a(O=>({...O,[S]:P}))},b=()=>{g.mutate(o)};return u.jsxs(es,{isOpen:t,onClose:e,size:"4xl",scrollBehavior:"inside",children:[u.jsx(ts,{backdropFilter:"blur(4px)"}),u.jsxs(gs,{maxH:"90vh",children:[u.jsxs(ax,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",borderTopRadius:"md",children:[u.jsxs(me,{children:[u.jsx(Le,{as:o6}),u.jsx(te,{children:"Service Metadata"})]}),u.jsx(te,{fontSize:"sm",fontWeight:"normal",opacity:.9,children:r})]}),u.jsx(Is,{color:"white"}),u.jsx(ys,{py:6,children:p?u.jsxs(at,{py:10,children:[u.jsx(Cr,{size:"xl",color:"kartoza.500"}),u.jsx(te,{color:"gray.500",children:"Loading settings..."})]}):u.jsxs(cx,{colorScheme:"kartoza",variant:"enclosed",children:[u.jsxs(ux,{children:[u.jsx(fo,{children:u.jsxs(me,{children:[u.jsx(Le,{as:c6}),u.jsx(te,{children:"Contact"})]})}),u.jsx(fo,{children:u.jsxs(me,{children:[u.jsx(Le,{as:I2}),u.jsx(te,{children:"Address"})]})}),u.jsx(fo,{children:u.jsxs(me,{children:[u.jsx(Le,{as:Os}),u.jsx(te,{children:"Service"})]})})]}),u.jsxs(T_,{children:[u.jsx(Ra,{children:u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsxs(de,{children:[u.jsx(te,{fontWeight:"bold",color:"gray.600",mb:3,children:"Contact Person"}),u.jsxs(Gn,{columns:{base:1,md:2},spacing:4,children:[u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",children:"Name"}),u.jsxs(Ta,{children:[u.jsx(Wl,{pointerEvents:"none",children:u.jsx(Le,{as:c6,color:"gray.400"})}),u.jsx(Rn,{placeholder:"John Smith",value:o.contactPerson||"",onChange:S=>y("contactPerson",S.target.value)})]})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",children:"Position"}),u.jsxs(Ta,{children:[u.jsx(Wl,{pointerEvents:"none",children:u.jsx(Le,{as:o6,color:"gray.400"})}),u.jsx(Rn,{placeholder:"GIS Administrator",value:o.contactPosition||"",onChange:S=>y("contactPosition",S.target.value)})]})]})]})]}),u.jsx(Hn,{}),u.jsxs(de,{children:[u.jsx(te,{fontWeight:"bold",color:"gray.600",mb:3,children:"Organization"}),u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",children:"Organization Name"}),u.jsxs(Ta,{children:[u.jsx(Wl,{pointerEvents:"none",children:u.jsx(Le,{as:Awe,color:"gray.400"})}),u.jsx(Rn,{placeholder:"Kartoza (Pty) Ltd",value:o.contactOrganization||"",onChange:S=>y("contactOrganization",S.target.value)})]})]})]}),u.jsx(Hn,{}),u.jsxs(de,{children:[u.jsx(te,{fontWeight:"bold",color:"gray.600",mb:3,children:"Contact Details"}),u.jsxs(Gn,{columns:{base:1,md:2},spacing:4,children:[u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",children:"Email"}),u.jsxs(Ta,{children:[u.jsx(Wl,{pointerEvents:"none",children:u.jsx(Le,{as:zwe,color:"gray.400"})}),u.jsx(Rn,{type:"email",placeholder:"info@example.com",value:o.contactEmail||"",onChange:S=>y("contactEmail",S.target.value)})]})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",children:"Phone"}),u.jsxs(Ta,{children:[u.jsx(Wl,{pointerEvents:"none",children:u.jsx(Le,{as:l6,color:"gray.400"})}),u.jsx(Rn,{placeholder:"+27 21 123 4567",value:o.contactVoice||"",onChange:S=>y("contactVoice",S.target.value)})]})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",children:"Fax"}),u.jsxs(Ta,{children:[u.jsx(Wl,{pointerEvents:"none",children:u.jsx(Le,{as:l6,color:"gray.400"})}),u.jsx(Rn,{placeholder:"+27 21 123 4568",value:o.contactFacsimile||"",onChange:S=>y("contactFacsimile",S.target.value)})]})]})]})]})]})}),u.jsx(Ra,{children:u.jsx(at,{spacing:6,align:"stretch",children:u.jsxs(de,{children:[u.jsx(te,{fontWeight:"bold",color:"gray.600",mb:3,children:"Location"}),u.jsxs(Gn,{columns:{base:1,md:2},spacing:4,children:[u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",children:"Address Type"}),u.jsx(Rn,{placeholder:"Work",value:o.addressType||"",onChange:S=>y("addressType",S.target.value)})]}),u.jsxs(It,{gridColumn:{md:"span 2"},children:[u.jsx(Mt,{fontSize:"sm",children:"Street Address"}),u.jsxs(Ta,{children:[u.jsx(Wl,{pointerEvents:"none",children:u.jsx(Le,{as:I2,color:"gray.400"})}),u.jsx(Rn,{placeholder:"123 Main Street",value:o.address||"",onChange:S=>y("address",S.target.value)})]})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",children:"City"}),u.jsx(Rn,{placeholder:"Cape Town",value:o.addressCity||"",onChange:S=>y("addressCity",S.target.value)})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",children:"State / Province"}),u.jsx(Rn,{placeholder:"Western Cape",value:o.addressState||"",onChange:S=>y("addressState",S.target.value)})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",children:"Postal Code"}),u.jsx(Rn,{placeholder:"8001",value:o.addressPostalCode||"",onChange:S=>y("addressPostalCode",S.target.value)})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",children:"Country"}),u.jsx(Rn,{placeholder:"South Africa",value:o.addressCountry||"",onChange:S=>y("addressCountry",S.target.value)})]})]})]})})}),u.jsx(Ra,{children:u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsxs(de,{children:[u.jsx(te,{fontWeight:"bold",color:"gray.600",mb:3,children:"Online Presence"}),u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",children:"Online Resource (Website)"}),u.jsxs(Ta,{children:[u.jsx(Wl,{pointerEvents:"none",children:u.jsx(Le,{as:Os,color:"gray.400"})}),u.jsx(Rn,{type:"url",placeholder:"https://www.example.com",value:o.onlineResource||"",onChange:S=>y("onlineResource",S.target.value)})]})]})]}),u.jsx(Hn,{}),u.jsxs(de,{children:[u.jsx(te,{fontWeight:"bold",color:"gray.600",mb:3,children:"Welcome Message"}),u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",children:"Service Welcome Message"}),u.jsx(Ta,{children:u.jsx(mT,{placeholder:"Welcome to our GeoServer instance. This service provides access to...",value:o.welcome||"",onChange:S=>y("welcome",S.target.value),rows:6})}),u.jsx(te,{fontSize:"xs",color:"gray.500",mt:1,children:"This message will be displayed on the GeoServer welcome page"})]})]})]})})]})]})}),u.jsx(Fo,{borderTop:"1px",borderColor:"gray.200",children:u.jsxs(me,{spacing:3,children:[u.jsx(vt,{variant:"ghost",onClick:e,children:"Cancel"}),u.jsx(vt,{colorScheme:"kartoza",onClick:b,isLoading:g.isPending,loadingText:"Saving...",children:"Save Changes"})]})})]})]})}const Dke=bo`
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
`,Lke=bo`
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
`;function m6(t){if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB","TB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(1))+" "+n[r]}function Fke({data:t,width:e=80,height:n=20,color:r="#38B2AC"}){if(t.length<2)return null;const i=Math.min(...t),o=Math.max(...t)-i||1,a=t.map((h,p)=>{const g=p/(t.length-1)*e,y=n-(h-i)/o*(n-4)-2;return`${g},${y}`}).join(" ");return u.jsx("svg",{width:e,height:n,style:{display:"inline-block",marginLeft:"4px"},children:u.jsx("polyline",{points:a,fill:"none",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}const kz=new Map,Bke=30;function $ke(t,e){const n=kz.get(t)||[];n.push(e),n.length>Bke&&n.shift(),kz.set(t,n)}function Nke(t){return kz.get(t)||[]}const Ak=new Map,Vke=6e4;function Wke({service:t,onParse:e,isParsing:n,onToggleHidden:r,isTogglingHidden:i}){const[s,o]=L.useState(null),[a,h]=L.useState(!1);L.useEffect(()=>{const P=Ak.get(t.name),O=Date.now();if(P&&O-P.lastChecked<Vke){o(P.online);return}if(t.hidden){o(null);return}(async()=>{h(!0);try{const z=await _H(t.name);o(z.success),Ak.set(t.name,{online:z.success,lastChecked:O})}catch{o(!1),Ak.set(t.name,{online:!1,lastChecked:O})}finally{h(!1)}})()},[t.name,t.hidden]);const p=t.hidden?"gray.100":t.is_parsed?"white":"gray.50",g=t.hidden?"gray.400":s===!0?"green.400":s===!1?"red.400":t.is_parsed?"blue.400":"gray.300",y=()=>t.hidden?Nf:s===!0?$f:s===!1?yT:t.is_parsed?$f:Yr,b=()=>t.hidden?"gray.500":s===!0?"green.500":s===!1?"red.500":t.is_parsed?"blue.500":"gray.400",S=()=>t.hidden?"Hidden (disabled)":a?"Checking...":s===!0?"Online":s===!1?"Offline":t.is_parsed?"Schema Parsed":"Not Parsed";return u.jsxs(de,{bg:p,borderRadius:"xl",border:"2px solid",borderColor:g,p:4,minH:"220px",position:"relative",transition:"all 0.3s ease",opacity:t.hidden?.7:1,_hover:{transform:"translateY(-2px)",boxShadow:"lg"},children:[u.jsxs(me,{position:"absolute",top:3,right:3,spacing:2,children:[u.jsx(kn,{label:t.hidden?"Show service":"Hide service",children:u.jsx(wn,{"aria-label":t.hidden?"Show":"Hide",icon:u.jsx(Le,{as:t.hidden?Pi:Nf}),size:"xs",variant:"ghost",colorScheme:t.hidden?"blue":"gray",onClick:()=>r(!t.hidden),isLoading:i})}),u.jsx(kn,{label:S(),children:u.jsx("span",{children:a?u.jsx(Cr,{size:"sm",color:"blue.500"}):u.jsx(Le,{as:y(),color:b(),boxSize:5})})})]}),u.jsxs(at,{align:"start",spacing:3,children:[u.jsxs(me,{children:[u.jsx(Le,{as:Gh,color:t.hidden?"gray.400":"blue.600",boxSize:6}),u.jsxs(at,{align:"start",spacing:0,children:[u.jsx(te,{fontWeight:"bold",fontSize:"lg",noOfLines:1,color:t.hidden?"gray.500":void 0,children:t.name}),u.jsx(te,{fontSize:"xs",color:"gray.500",noOfLines:1,children:t.host?`${t.host}:${t.port||"5432"}`:"pg_service.conf entry"})]})]}),t.dbname&&u.jsxs(Lt,{colorScheme:t.hidden?"gray":"blue",fontSize:"xs",children:["Database: ",t.dbname]}),t.hidden?u.jsxs(go,{status:"info",variant:"subtle",borderRadius:"md",py:2,children:[u.jsx(yo,{boxSize:4}),u.jsx(te,{fontSize:"sm",children:"This service is hidden"})]}):t.is_parsed?u.jsxs(Gn,{columns:2,spacing:2,w:"100%",children:[u.jsxs(ds,{size:"sm",children:[u.jsx(fs,{fontSize:"xs",color:"gray.500",children:u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:Ks,boxSize:3}),u.jsx(te,{children:"Status"})]})}),u.jsx(ps,{fontSize:"md",color:s===!0?"green.600":s===!1?"red.600":"blue.600",children:s===!0?"Online":s===!1?"Offline":"Parsed"})]}),u.jsxs(ds,{size:"sm",children:[u.jsx(fs,{fontSize:"xs",color:"gray.500",children:u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:Yr,boxSize:3}),u.jsx(te,{children:"User"})]})}),u.jsx(ps,{fontSize:"md",color:"gray.600",noOfLines:1,children:t.user||"N/A"})]})]}):u.jsx(vt,{size:"sm",colorScheme:"blue",variant:"outline",leftIcon:u.jsx(Yr,{}),onClick:e,isLoading:n,loadingText:"Parsing...",w:"100%",children:"Parse Schema"}),t.sslmode&&u.jsx(me,{spacing:2,fontSize:"xs",color:"gray.500",w:"100%",children:u.jsxs(te,{children:["SSL: ",t.sslmode]})})]})]})}function g6({server:t,isAlert:e=!1}){const n=t.online?"green.400":"red.400",r=e?"red.50":t.online?"white":"gray.50",i=t.online?$f:yT,s=t.online?"green.500":"red.500",o=Nke(t.connectionId);return u.jsxs(de,{bg:r,borderRadius:"xl",border:"2px solid",borderColor:n,p:4,minH:"220px",position:"relative",transition:"all 0.3s ease",_hover:{transform:"translateY(-2px)",boxShadow:"lg"},css:t.online?void 0:Nc`animation: ${Dke} 2s ease-in-out infinite;`,children:[u.jsx(de,{position:"absolute",top:3,right:3,children:u.jsx(kn,{label:t.online?"Online":t.error||"Offline",children:u.jsx("span",{children:u.jsx(Le,{as:i,color:s,boxSize:5})})})}),u.jsxs(at,{align:"start",spacing:3,children:[u.jsxs(me,{children:[u.jsx(Le,{as:mc,color:"kartoza.500",boxSize:6}),u.jsxs(at,{align:"start",spacing:0,children:[u.jsx(te,{fontWeight:"bold",fontSize:"lg",noOfLines:1,children:t.connectionName}),u.jsx(te,{fontSize:"xs",color:"gray.500",noOfLines:1,children:t.url})]})]}),t.online?u.jsxs(u.Fragment,{children:[t.geoserverVersion&&u.jsxs(Lt,{colorScheme:"blue",fontSize:"xs",children:["GeoServer ",t.geoserverVersion]}),u.jsxs(Gn,{columns:2,spacing:2,w:"100%",children:[u.jsxs(ds,{size:"sm",children:[u.jsx(fs,{fontSize:"xs",color:"gray.500",children:u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:mi,boxSize:3}),u.jsx(te,{children:"Layers"})]})}),u.jsx(ps,{fontSize:"xl",color:"purple.600",children:t.layerCount})]}),u.jsxs(ds,{size:"sm",children:[u.jsx(fs,{fontSize:"xs",color:"gray.500",children:u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:Yr,boxSize:3}),u.jsx(te,{children:"Stores"})]})}),u.jsx(ps,{fontSize:"xl",color:"blue.600",children:t.dataStoreCount+t.coverageCount})]})]}),t.memoryTotal>0&&u.jsxs(de,{w:"100%",children:[u.jsxs(me,{justify:"space-between",mb:1,children:[u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:e0,boxSize:3,color:"gray.500"}),u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Memory"})]}),u.jsxs(te,{fontSize:"xs",color:"gray.600",children:[m6(t.memoryUsed)," / ",m6(t.memoryTotal)]})]}),u.jsx(tp,{value:t.memoryUsedPct,size:"sm",colorScheme:t.memoryUsedPct>80?"red":t.memoryUsedPct>60?"yellow":"green",borderRadius:"full"})]}),u.jsxs(me,{spacing:2,fontSize:"xs",color:"gray.500",w:"100%",children:[u.jsx(Le,{as:gT,boxSize:3}),u.jsxs(te,{children:["Response: ",t.responseTimeMs,"ms"]}),o.length>=2&&u.jsx(Fke,{data:o,width:60,height:16,color:"#38B2AC"})]})]}):u.jsx(de,{w:"100%",children:u.jsxs(go,{status:"error",variant:"subtle",borderRadius:"md",py:2,children:[u.jsx(yo,{boxSize:4}),u.jsx(te,{fontSize:"sm",noOfLines:2,children:t.error||"Server is offline"})]})})]})]})}function y6(){const t=L.useRef(30),e=da(),[n,r]=L.useState(null),[i,s]=L.useState(null),o=St(J=>J.settings.showHiddenPGServices),a=St(J=>J.openDialog),h=Ln(J=>J.selectedNode),g=(()=>{if(!h)return"all";const J=h.type;return J==="geoserver"||J==="connection"||J==="workspace"||J==="datastores"||J==="coveragestores"||J==="datastore"||J==="coveragestore"||J==="layers"||J==="layer"||J==="styles"||J==="style"||J==="layergroups"||J==="layergroup"?"geoserver":J==="postgresql"||J==="pgservice"||J==="pgschema"||J==="pgtable"||J==="pgview"||J==="pgcolumn"?"postgresql":"all"})(),{data:y,isLoading:b,error:S,refetch:P,isFetching:O}=er({queryKey:["dashboard"],queryFn:YSe,refetchInterval:()=>t.current*1e3}),{data:D}=er({queryKey:["pgservices"],queryFn:vR,staleTime:3e4}),z=D==null?void 0:D.filter(J=>o||!J.hidden),F=async J=>{r(J);try{await wH(J),e.invalidateQueries({queryKey:["pgservices"]})}catch(ae){console.error("Failed to parse service:",ae)}finally{r(null)}},R=async(J,ae)=>{s(J);try{await ske(J,ae),Ak.delete(J),e.invalidateQueries({queryKey:["pgservices"]})}catch(Ee){console.error("Failed to toggle hidden state:",Ee)}finally{s(null)}};if(L.useEffect(()=>{if(y!=null&&y.servers){for(const J of y.servers)J.online&&$ke(J.connectionId,J.responseTimeMs);y.pingIntervalSecs&&y.pingIntervalSecs>0&&(t.current=y.pingIntervalSecs)}},[y]),b)return u.jsx(Sn,{h:"100%",align:"center",justify:"center",children:u.jsxs(at,{spacing:4,children:[u.jsx(Cr,{size:"xl",color:"kartoza.500",thickness:"4px"}),u.jsx(te,{color:"gray.500",children:"Loading server status..."})]})});if(S)return u.jsx(Sn,{h:"100%",align:"center",justify:"center",p:8,children:u.jsxs(go,{status:"error",borderRadius:"lg",children:[u.jsx(yo,{}),u.jsx(m_,{children:"Failed to load dashboard"}),u.jsx(M0,{children:S.message})]})});const N=y&&y.servers.length>0,Q=z&&z.length>0,q=(g==="all"||g==="geoserver")&&N,X=(g==="all"||g==="postgresql")&&Q;if(!N&&!Q)return u.jsx(Sn,{h:"100%",align:"center",justify:"center",p:8,children:u.jsxs(at,{spacing:4,textAlign:"center",children:[u.jsx(Le,{as:mc,boxSize:16,color:"gray.300"}),u.jsx(te,{color:"gray.500",fontSize:"lg",children:"No servers configured"}),u.jsx(te,{color:"gray.400",fontSize:"sm",children:"Add a GeoServer connection or PostgreSQL service to get started"})]})});const K=(y==null?void 0:y.servers.filter(J=>J.online))||[],ne=(y==null?void 0:y.servers.filter(J=>!J.online))||[];return u.jsxs(Sn,{h:"100%",direction:"column",children:[u.jsxs(Sn,{justify:"space-between",align:"center",p:4,bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",flexShrink:0,children:[u.jsxs(me,{spacing:3,children:[u.jsx(de,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(Le,{as:j_,boxSize:5,color:"white"})}),u.jsx(te,{fontSize:"xl",fontWeight:"bold",children:"Server Dashboard"})]}),u.jsxs(me,{spacing:4,children:[u.jsxs(me,{spacing:6,display:{base:"none",md:"flex"},children:[u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:$f,color:"green.200"}),u.jsx(te,{fontWeight:"bold",color:"white",children:(y==null?void 0:y.onlineCount)||0}),u.jsx(te,{color:"whiteAlpha.800",children:"Online"})]}),((y==null?void 0:y.offlineCount)||0)>0&&u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:yT,color:"red.200"}),u.jsx(te,{fontWeight:"bold",color:"white",children:(y==null?void 0:y.offlineCount)||0}),u.jsx(te,{color:"whiteAlpha.800",children:"Offline"})]}),u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:mi,color:"purple.200"}),u.jsx(te,{fontWeight:"bold",color:"white",children:(y==null?void 0:y.totalLayers)||0}),u.jsx(te,{color:"whiteAlpha.800",children:"Layers"})]}),Q&&u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:Gh,color:"blue.200"}),u.jsx(te,{fontWeight:"bold",color:"white",children:(z==null?void 0:z.length)||0}),u.jsx(te,{color:"whiteAlpha.800",children:"PG Services"})]}),u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:gT,color:"whiteAlpha.700"}),u.jsxs(te,{color:"whiteAlpha.800",children:[(y==null?void 0:y.pingIntervalSecs)||60,"s"]})]})]}),u.jsx(kn,{label:"Settings",children:u.jsx(wn,{"aria-label":"Settings",icon:u.jsx(O_,{}),variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:()=>a("settings")})}),u.jsx(kn,{label:"Refresh status",children:u.jsx(wn,{"aria-label":"Refresh",icon:u.jsx(Xc,{}),variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:()=>P(),css:O?Nc`animation: ${Lke} 1s linear infinite;`:void 0})})]})]}),u.jsx(Sn,{flex:1,overflowY:"auto",p:6,justify:"center",align:((y==null?void 0:y.servers.length)||0)+((z==null?void 0:z.length)||0)<=3?"center":"flex-start",children:u.jsxs(at,{spacing:6,maxW:"1400px",w:"100%",children:[q&&u.jsxs(de,{w:"100%",children:[u.jsx(me,{spacing:2,mb:4,justify:"center",children:u.jsxs(de,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",px:4,py:2,borderRadius:"full",display:"flex",alignItems:"center",gap:2,children:[u.jsx(Le,{as:mc,color:"white",boxSize:4}),u.jsxs(te,{fontWeight:"600",color:"white",fontSize:"sm",children:["GeoServer Connections (",(y==null?void 0:y.servers.length)||0,")"]})]})}),ne.length>0&&u.jsxs(de,{mb:4,children:[u.jsxs(me,{spacing:2,mb:2,justify:"center",children:[u.jsx(Le,{as:YQ,color:"red.500",boxSize:4}),u.jsxs(te,{fontSize:"sm",fontWeight:"medium",color:"red.600",children:["Requires Attention (",ne.length,")"]})]}),u.jsx(Sn,{wrap:"wrap",gap:4,justify:"center",children:ne.map(J=>u.jsx(de,{w:{base:"100%",md:"340px"},children:u.jsx(g6,{server:J,isAlert:!0})},J.connectionId))})]}),K.length>0&&u.jsx(Sn,{wrap:"wrap",gap:4,justify:"center",children:K.map(J=>u.jsx(de,{w:{base:"100%",md:"340px"},children:u.jsx(g6,{server:J})},J.connectionId))})]}),X&&u.jsxs(de,{w:"100%",children:[u.jsx(me,{spacing:2,mb:4,justify:"center",children:u.jsxs(de,{bg:"linear-gradient(90deg, #417d9b 0%, #336699 100%)",px:4,py:2,borderRadius:"full",display:"flex",alignItems:"center",gap:2,children:[u.jsx(Le,{as:Gh,color:"white",boxSize:4}),u.jsxs(te,{fontWeight:"600",color:"white",fontSize:"sm",children:["PostgreSQL Services (",(z==null?void 0:z.length)||0,")"]})]})}),u.jsx(Sn,{wrap:"wrap",gap:4,justify:"center",children:z==null?void 0:z.map(J=>u.jsx(de,{w:{base:"100%",md:"340px"},children:u.jsx(Wke,{service:J,onParse:()=>F(J.name),isParsing:n===J.name,onToggleHidden:ae=>R(J.name,ae),isTogglingHidden:i===J.name})},J.name))})]})]})})]})}function Uke(){const t=Ln(s=>s.selectedNode),e=St(s=>s.activePreview),n=St(s=>s.previewMode),r=St(s=>s.setPreview),i=L.useRef(t);if(L.useEffect(()=>{const s=i.current;if(i.current=t,!e||!t||(s==null?void 0:s.id)===t.id||!["layer","layergroup","datastore","coveragestore"].includes(t.type))return;(async()=>{try{const h=t.type==="coveragestore"?"raster":t.type==="layergroup"?"group":"vector",{url:p}=await Cl({connId:t.connectionId,workspace:t.workspace,layerName:t.name,storeName:t.type==="datastore"||t.type==="coveragestore"?t.name:void 0,storeType:t.type==="datastore"||t.type==="coveragestore"?t.type:void 0,layerType:h});r({url:p,layerName:t.name,workspace:t.workspace,connectionId:t.connectionId,storeName:t.type==="datastore"||t.type==="coveragestore"?t.name:void 0,storeType:t.type==="datastore"||t.type==="coveragestore"?t.type:void 0,layerType:h})}catch(h){St.getState().setError(h.message)}})()},[t,e,r]),e)return u.jsx(de,{flex:"1",display:"flex",flexDirection:"column",minH:"0",children:n==="3d"?u.jsx(Mke,{connectionId:e.connectionId,workspace:e.workspace,layerName:e.layerName,nodeType:e.nodeType||(e.layerType==="group"?"layergroup":"layer"),onClose:()=>r(null)},`3d-${e.workspace}:${e.layerName}`):u.jsx(Ike,{previewUrl:e.url,layerName:e.layerName,workspace:e.workspace,connectionId:e.connectionId,storeName:e.storeName,storeType:e.storeType,layerType:e.layerType,onClose:()=>r(null)},`2d-${e.workspace}:${e.layerName}:${e.url}`)});if(!t)return u.jsx(y6,{});switch(t.type){case"connection":return u.jsx(Yke,{connectionId:t.connectionId});case"workspace":return u.jsx(Jke,{connectionId:t.connectionId,workspace:t.workspace});case"datastores":return u.jsx(qke,{connectionId:t.connectionId,workspace:t.workspace});case"coveragestores":return u.jsx(Qke,{connectionId:t.connectionId,workspace:t.workspace});case"layers":return u.jsx(Hke,{connectionId:t.connectionId,workspace:t.workspace});case"styles":return u.jsx(Xke,{connectionId:t.connectionId,workspace:t.workspace});case"layergroups":return u.jsx(Kke,{connectionId:t.connectionId,workspace:t.workspace});case"datastore":case"coveragestore":return u.jsx(e2e,{connectionId:t.connectionId,workspace:t.workspace,storeName:t.name,storeType:t.type});case"layer":return u.jsx(t2e,{connectionId:t.connectionId,workspace:t.workspace,layerName:t.name});case"style":return u.jsx(r2e,{connectionId:t.connectionId,workspace:t.workspace,styleName:t.name});case"layergroup":return u.jsx(n2e,{connectionId:t.connectionId,workspace:t.workspace,groupName:t.name});case"pgservice":return u.jsx(l2e,{serviceName:t.serviceName});case"pgschema":return u.jsx(c2e,{serviceName:t.serviceName,schemaName:t.schemaName});case"pgtable":case"pgview":return u.jsx(u2e,{serviceName:t.serviceName,schemaName:t.schemaName,tableName:t.tableName,isView:t.type==="pgview"});default:return u.jsx(y6,{})}}function qke({connectionId:t,workspace:e}){const n=St(s=>s.openDialog),r=Et("white","gray.800"),{data:i}=er({queryKey:["datastores",t,e],queryFn:()=>gR(t,e)});return u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsx(Dn,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",children:u.jsx(Vn,{py:8,px:6,children:u.jsxs(Sn,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(me,{spacing:4,children:[u.jsx(de,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(Le,{as:Yr,boxSize:8})}),u.jsxs(at,{align:"start",spacing:0,children:[u.jsx(lr,{size:"lg",color:"white",children:"Data Stores"}),u.jsxs(te,{color:"white",opacity:.9,children:["Workspace: ",e]})]})]}),u.jsx(Bo,{}),u.jsx(at,{align:"end",spacing:2,children:u.jsxs(ds,{textAlign:"right",children:[u.jsx(ps,{fontSize:"3xl",children:(i==null?void 0:i.length)??0}),u.jsx(fs,{color:"whiteAlpha.800",children:"Total Stores"})]})})]})})}),u.jsxs(Gn,{columns:{base:1,md:2},spacing:4,children:[u.jsx(vt,{size:"lg",variant:"accent",leftIcon:u.jsx(As,{}),onClick:()=>n("datastore",{mode:"create",data:{connectionId:t,workspace:e}}),py:8,children:"Create New Data Store"}),u.jsx(vt,{size:"lg",variant:"outline",leftIcon:u.jsx(Ol,{}),onClick:()=>n("upload",{mode:"create",data:{connectionId:t,workspace:e}}),py:8,children:"Upload Shapefile / GeoPackage"})]}),i&&i.length>0&&u.jsx(Dn,{bg:r,children:u.jsx(Vn,{children:u.jsxs(at,{align:"stretch",spacing:4,children:[u.jsx(lr,{size:"sm",color:"gray.600",children:"Existing Data Stores"}),u.jsx(Hn,{}),u.jsx(Gn,{columns:{base:1,md:2,lg:3},spacing:4,children:i.map(s=>u.jsx(OH,{name:s.name,type:s.type||"Unknown",enabled:s.enabled,icon:Yr,connectionId:t,workspace:e,storeType:"datastore"},s.name))})]})})})]})}function Qke({connectionId:t,workspace:e}){const n=St(s=>s.openDialog),r=Et("white","gray.800"),{data:i}=er({queryKey:["coveragestores",t,e],queryFn:()=>yR(t,e)});return u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsx(Dn,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",children:u.jsx(Vn,{py:8,px:6,children:u.jsxs(Sn,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(me,{spacing:4,children:[u.jsx(de,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(Le,{as:Qc,boxSize:8})}),u.jsxs(at,{align:"start",spacing:0,children:[u.jsx(lr,{size:"lg",color:"white",children:"Coverage Stores"}),u.jsxs(te,{color:"white",opacity:.9,children:["Workspace: ",e]})]})]}),u.jsx(Bo,{}),u.jsx(at,{align:"end",spacing:2,children:u.jsxs(ds,{textAlign:"right",children:[u.jsx(ps,{fontSize:"3xl",children:(i==null?void 0:i.length)??0}),u.jsx(fs,{color:"whiteAlpha.800",children:"Total Stores"})]})})]})})}),u.jsxs(Gn,{columns:{base:1,md:2},spacing:4,children:[u.jsx(vt,{size:"lg",variant:"accent",leftIcon:u.jsx(As,{}),onClick:()=>n("coveragestore",{mode:"create",data:{connectionId:t,workspace:e}}),py:8,children:"Create New Coverage Store"}),u.jsx(vt,{size:"lg",variant:"outline",leftIcon:u.jsx(Ol,{}),onClick:()=>n("upload",{mode:"create",data:{connectionId:t,workspace:e}}),py:8,children:"Upload GeoTIFF"})]}),i&&i.length>0&&u.jsx(Dn,{bg:r,children:u.jsx(Vn,{children:u.jsxs(at,{align:"stretch",spacing:4,children:[u.jsx(lr,{size:"sm",color:"gray.600",children:"Existing Coverage Stores"}),u.jsx(Hn,{}),u.jsx(Gn,{columns:{base:1,md:2,lg:3},spacing:4,children:i.map(s=>u.jsx(OH,{name:s.name,type:s.type||"GeoTIFF",enabled:s.enabled,icon:Qc,connectionId:t,workspace:e,storeType:"coveragestore"},s.name))})]})})})]})}function Hke({connectionId:t,workspace:e}){const n=St(s=>s.openDialog),r=Et("white","gray.800"),{data:i}=er({queryKey:["layers",t,e],queryFn:()=>A_(t,e)});return u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsx(Dn,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",children:u.jsx(Vn,{py:8,px:6,children:u.jsxs(Sn,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(me,{spacing:4,children:[u.jsx(de,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(Le,{as:mi,boxSize:8})}),u.jsxs(at,{align:"start",spacing:0,children:[u.jsx(lr,{size:"lg",color:"white",children:"Layers"}),u.jsxs(te,{color:"white",opacity:.9,children:["Workspace: ",e]})]})]}),u.jsx(Bo,{}),u.jsx(at,{align:"end",spacing:2,children:u.jsxs(ds,{textAlign:"right",children:[u.jsx(ps,{fontSize:"3xl",children:(i==null?void 0:i.length)??0}),u.jsx(fs,{color:"whiteAlpha.800",children:"Published Layers"})]})})]})})}),u.jsx(vt,{size:"lg",variant:"accent",leftIcon:u.jsx(Ol,{}),onClick:()=>n("upload",{mode:"create",data:{connectionId:t,workspace:e}}),py:8,children:"Upload New Layer Data"}),i&&i.length>0&&u.jsx(Dn,{bg:r,children:u.jsx(Vn,{children:u.jsxs(at,{align:"stretch",spacing:4,children:[u.jsx(lr,{size:"sm",color:"gray.600",children:"Published Layers"}),u.jsx(Hn,{}),u.jsx(Gn,{columns:{base:1,md:2,lg:3},spacing:4,children:i.map(s=>u.jsx(Zke,{name:s.name,connectionId:t,workspace:e,enabled:s.enabled},s.name))})]})})})]})}function Gke({connectionId:t,workspace:e,styleName:n,size:r=24}){const[i,s]=L.useState(!1),a=uo(b=>b.connections).find(b=>b.id===t),{data:h}=er({queryKey:["layers",t,e],queryFn:()=>A_(t,e),staleTime:6e4}),p=h==null?void 0:h.find(b=>b.defaultStyle===n);if(!a||i||!p)return u.jsx(Le,{as:na,color:"pink.500",boxSize:`${r}px`});const y=`${a.url.replace(/\/rest\/?$/,"")}/${e}/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetLegendGraphic&LAYER=${e}:${p.name}&STYLE=${n}&FORMAT=image/png&WIDTH=${r}&HEIGHT=${r}&LEGEND_OPTIONS=forceLabels:off;fontAntiAliasing:true`;return u.jsx(de,{as:"img",src:y,alt:n,w:`${r}px`,h:`${r}px`,minW:`${r}px`,minH:`${r}px`,borderRadius:"sm",objectFit:"contain",bg:"white",border:"1px solid",borderColor:"gray.200",onError:()=>s(!0)})}function Xke({connectionId:t,workspace:e}){const n=St(s=>s.openDialog),r=Et("white","gray.800"),{data:i}=er({queryKey:["styles",t,e],queryFn:()=>xR(t,e)});return u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsx(Dn,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",children:u.jsx(Vn,{py:8,px:6,children:u.jsxs(Sn,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(me,{spacing:4,children:[u.jsx(de,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(Le,{as:pc,boxSize:8})}),u.jsxs(at,{align:"start",spacing:0,children:[u.jsx(lr,{size:"lg",color:"white",children:"Styles"}),u.jsxs(te,{color:"white",opacity:.9,children:["Workspace: ",e]})]})]}),u.jsx(Bo,{}),u.jsx(at,{align:"end",spacing:2,children:u.jsxs(ds,{textAlign:"right",children:[u.jsx(ps,{fontSize:"3xl",children:(i==null?void 0:i.length)??0}),u.jsx(fs,{color:"whiteAlpha.800",children:"Total Styles"})]})})]})})}),u.jsxs(me,{spacing:4,children:[u.jsx(vt,{size:"lg",variant:"accent",leftIcon:u.jsx(As,{}),onClick:()=>n("style",{mode:"create",data:{connectionId:t,workspace:e}}),py:8,flex:1,children:"Create Style"}),u.jsx(vt,{size:"lg",variant:"outline",leftIcon:u.jsx(Ol,{}),onClick:()=>n("upload",{mode:"create",data:{connectionId:t,workspace:e}}),py:8,flex:1,children:"Upload SLD / CSS"})]}),i&&i.length>0&&u.jsx(Dn,{bg:r,children:u.jsx(Vn,{children:u.jsxs(at,{align:"stretch",spacing:4,children:[u.jsx(lr,{size:"sm",color:"gray.600",children:"Existing Styles"}),u.jsx(Hn,{}),u.jsx(Gn,{columns:{base:1,md:2,lg:3},spacing:4,children:i.map(s=>u.jsx(Dn,{variant:"outline",size:"sm",cursor:"pointer",_hover:{shadow:"md",borderColor:"kartoza.300"},transition:"all 0.2s",onClick:()=>n("style",{mode:"edit",data:{connectionId:t,workspace:e,name:s.name}}),children:u.jsx(Vn,{py:3,px:4,children:u.jsxs(me,{children:[u.jsx(Gke,{connectionId:t,workspace:e,styleName:s.name,size:24}),u.jsx(te,{fontWeight:"medium",children:s.name}),s.format&&u.jsx(Lt,{colorScheme:"blue",size:"sm",children:s.format})]})})},s.name))})]})})})]})}function Kke({connectionId:t,workspace:e}){const n=Et("white","gray.800"),r=St(s=>s.openDialog),{data:i}=er({queryKey:["layergroups",t,e],queryFn:()=>xH(t,e)});return u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsx(Dn,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",children:u.jsx(Vn,{py:8,px:6,children:u.jsxs(Sn,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(me,{spacing:4,children:[u.jsx(de,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(Le,{as:Vf,boxSize:8})}),u.jsxs(at,{align:"start",spacing:0,children:[u.jsx(lr,{size:"lg",color:"white",children:"Layer Groups"}),u.jsxs(te,{color:"white",opacity:.9,children:["Workspace: ",e]})]})]}),u.jsx(Bo,{}),u.jsx(at,{align:"end",spacing:2,children:u.jsxs(ds,{textAlign:"right",children:[u.jsx(ps,{fontSize:"3xl",children:(i==null?void 0:i.length)??0}),u.jsx(fs,{color:"whiteAlpha.800",children:"Total Groups"})]})})]})})}),u.jsx(vt,{size:"lg",variant:"accent",leftIcon:u.jsx(As,{}),py:8,onClick:()=>r("layergroup",{mode:"create",data:{connectionId:t,workspace:e}}),children:"Create Layer Group"}),i&&i.length>0&&u.jsx(Dn,{bg:n,children:u.jsx(Vn,{children:u.jsxs(at,{align:"stretch",spacing:4,children:[u.jsx(lr,{size:"sm",color:"gray.600",children:"Existing Layer Groups"}),u.jsx(Hn,{}),u.jsx(Gn,{columns:{base:1,md:2,lg:3},spacing:4,children:i.map(s=>u.jsx(Dn,{variant:"outline",size:"sm",children:u.jsx(Vn,{py:3,px:4,children:u.jsxs(me,{children:[u.jsx(Le,{as:Vf,color:"kartoza.500"}),u.jsx(te,{fontWeight:"medium",children:s.name}),s.mode&&u.jsx(Lt,{colorScheme:"purple",size:"sm",children:s.mode})]})})},s.name))})]})})})]})}function OH({name:t,type:e,enabled:n,icon:r,connectionId:i,workspace:s,storeType:o}){const a=St(p=>p.setPreview),h=async()=>{try{const{url:p}=await Cl({connId:i,workspace:s,layerName:t,storeName:t,storeType:o,layerType:o==="coveragestore"?"raster":"vector"});a({url:p,layerName:t,workspace:s,connectionId:i,storeName:t,storeType:o,layerType:o==="coveragestore"?"raster":"vector"})}catch(p){St.getState().setError(p.message)}};return u.jsx(Dn,{variant:"outline",size:"sm",_hover:{shadow:"md"},transition:"all 0.2s",children:u.jsx(Vn,{py:4,px:4,children:u.jsxs(at,{align:"stretch",spacing:3,children:[u.jsxs(me,{justify:"space-between",children:[u.jsxs(me,{children:[u.jsx(Le,{as:r,color:"kartoza.500",boxSize:5}),u.jsx(te,{fontWeight:"medium",noOfLines:1,children:t})]}),u.jsx(Lt,{colorScheme:n?"green":"gray",size:"sm",children:n?"Enabled":"Disabled"})]}),u.jsx(te,{fontSize:"xs",color:"gray.500",children:e}),u.jsx(vt,{size:"sm",variant:"outline",leftIcon:u.jsx(Pi,{}),onClick:h,children:"Preview"})]})})})}function Zke({name:t,connectionId:e,workspace:n,enabled:r}){const i=St(a=>a.setPreview),{data:s}=er({queryKey:["layer",e,n,t],queryFn:()=>mH(e,n,t)}),o=async()=>{try{const{url:a}=await Cl({connId:e,workspace:n,layerName:t,storeName:s==null?void 0:s.store,storeType:s==null?void 0:s.storeType,layerType:(s==null?void 0:s.storeType)==="coveragestore"?"raster":"vector"});i({url:a,layerName:t,workspace:n,connectionId:e,storeName:s==null?void 0:s.store,storeType:s==null?void 0:s.storeType,layerType:(s==null?void 0:s.storeType)==="coveragestore"?"raster":"vector"})}catch(a){St.getState().setError(a.message)}};return u.jsx(Dn,{variant:"outline",size:"sm",_hover:{shadow:"md"},transition:"all 0.2s",children:u.jsx(Vn,{py:4,px:4,children:u.jsxs(at,{align:"stretch",spacing:3,children:[u.jsxs(me,{justify:"space-between",children:[u.jsxs(me,{children:[u.jsx(Le,{as:mi,color:"kartoza.500",boxSize:5}),u.jsx(te,{fontWeight:"medium",noOfLines:1,children:t})]}),u.jsx(Lt,{colorScheme:r?"green":"gray",size:"sm",children:r?"Enabled":"Disabled"})]}),(s==null?void 0:s.defaultStyle)&&u.jsxs(te,{fontSize:"xs",color:"gray.500",children:["Style: ",s.defaultStyle]}),u.jsx(vt,{size:"sm",colorScheme:"kartoza",leftIcon:u.jsx(Hc,{}),onClick:o,children:"Preview on Map"})]})})})}function Yke({connectionId:t}){const n=uo(h=>h.connections).find(h=>h.id===t),r=St(h=>h.openDialog),i=Et("white","gray.800"),s=Lm(),{data:o}=er({queryKey:["serverInfo",t],queryFn:()=>ySe(t)}),{data:a}=er({queryKey:["workspaces",t],queryFn:()=>cH(t)});return n?u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsx(Dn,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",children:u.jsx(Vn,{py:8,px:6,children:u.jsxs(Sn,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(me,{spacing:4,children:[u.jsx(de,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(Le,{as:mc,boxSize:8})}),u.jsxs(at,{align:"start",spacing:0,children:[u.jsx(lr,{size:"lg",color:"white",children:n.name}),u.jsx(te,{color:"white",opacity:.9,children:n.url})]})]}),u.jsx(Bo,{}),u.jsxs(me,{children:[u.jsx(vt,{variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(O_,{}),onClick:s.onOpen,children:"Service Metadata"}),u.jsx(Lt,{colorScheme:"green",fontSize:"md",px:4,py:2,children:"Connected"})]})]})})}),u.jsx(Rke,{isOpen:s.isOpen,onClose:s.onClose,connectionId:t,connectionName:n.name}),u.jsxs(Gn,{columns:{base:1,md:3},spacing:4,children:[u.jsx(Dn,{bg:i,children:u.jsx(Vn,{children:u.jsxs(ds,{children:[u.jsx(fs,{children:"Workspaces"}),u.jsx(ps,{color:"kartoza.700",children:(a==null?void 0:a.length)??0}),u.jsx(kf,{children:"Total workspaces"})]})})}),o&&u.jsxs(u.Fragment,{children:[u.jsx(Dn,{bg:i,children:u.jsx(Vn,{children:u.jsxs(ds,{children:[u.jsx(fs,{children:"GeoServer"}),u.jsx(ps,{color:"kartoza.700",fontSize:"xl",children:o.GeoServerVersion}),u.jsx(kf,{children:"Version"})]})})}),u.jsx(Dn,{bg:i,children:u.jsx(Vn,{children:u.jsxs(ds,{children:[u.jsx(fs,{children:"GeoTools"}),u.jsx(ps,{color:"kartoza.700",fontSize:"xl",children:o.GeoToolsVersion}),u.jsx(kf,{children:"Version"})]})})})]})]}),u.jsxs(Gn,{columns:{base:1,md:2},spacing:4,children:[u.jsx(vt,{size:"lg",variant:"accent",leftIcon:u.jsx(As,{}),onClick:()=>r("workspace",{mode:"create",data:{connectionId:t}}),py:8,children:"Create New Workspace"}),u.jsx(vt,{size:"lg",variant:"outline",leftIcon:u.jsx(Ol,{}),onClick:()=>r("upload",{mode:"create"}),py:8,children:"Upload Data"})]})]}):null}function Jke({connectionId:t,workspace:e}){const n=Et("white","gray.800"),r=St(h=>h.openDialog),{data:i}=er({queryKey:["workspace",t,e],queryFn:()=>uH(t,e)}),{data:s}=er({queryKey:["datastores",t,e],queryFn:()=>gR(t,e)}),{data:o}=er({queryKey:["coveragestores",t,e],queryFn:()=>yR(t,e)}),{data:a}=er({queryKey:["layers",t,e],queryFn:()=>A_(t,e)});return u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsx(Dn,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",children:u.jsx(Vn,{py:8,px:6,children:u.jsxs(Sn,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(me,{spacing:4,children:[u.jsx(de,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(Le,{as:Uu,boxSize:8})}),u.jsxs(at,{align:"start",spacing:1,children:[u.jsx(lr,{size:"lg",color:"white",children:e}),u.jsxs(me,{children:[(i==null?void 0:i.default)&&u.jsx(Lt,{colorScheme:"blue",children:"Default"}),(i==null?void 0:i.isolated)&&u.jsx(Lt,{colorScheme:"purple",children:"Isolated"}),(i==null?void 0:i.enabled)&&u.jsx(Lt,{colorScheme:"green",children:"Enabled"})]})]})]}),u.jsx(Bo,{}),u.jsx(vt,{variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},onClick:()=>r("workspace",{mode:"edit",data:{connectionId:t,workspace:e}}),children:"Edit Workspace"})]})})}),u.jsxs(Gn,{columns:{base:1,md:3},spacing:4,children:[u.jsx(Dn,{bg:n,variant:"elevated",cursor:"pointer",children:u.jsx(Vn,{children:u.jsxs(ds,{children:[u.jsxs(me,{children:[u.jsx(Le,{as:Yr,color:"kartoza.500",boxSize:6}),u.jsx(fs,{children:"Data Stores"})]}),u.jsx(ps,{color:"kartoza.700",children:(s==null?void 0:s.length)??0})]})})}),u.jsx(Dn,{bg:n,variant:"elevated",cursor:"pointer",children:u.jsx(Vn,{children:u.jsxs(ds,{children:[u.jsxs(me,{children:[u.jsx(Le,{as:Qc,color:"accent.400",boxSize:6}),u.jsx(fs,{children:"Coverage Stores"})]}),u.jsx(ps,{color:"kartoza.700",children:(o==null?void 0:o.length)??0})]})})}),u.jsx(Dn,{bg:n,variant:"elevated",cursor:"pointer",children:u.jsx(Vn,{children:u.jsxs(ds,{children:[u.jsxs(me,{children:[u.jsx(Le,{as:mi,color:"kartoza.500",boxSize:6}),u.jsx(fs,{children:"Layers"})]}),u.jsx(ps,{color:"kartoza.700",children:(a==null?void 0:a.length)??0})]})})})]}),u.jsx(Dn,{bg:n,children:u.jsx(Vn,{children:u.jsxs(at,{align:"stretch",spacing:4,children:[u.jsx(lr,{size:"sm",color:"gray.600",children:"Quick Actions"}),u.jsx(Hn,{}),u.jsxs(Gn,{columns:{base:1,md:3},spacing:4,children:[u.jsx(vt,{variant:"accent",leftIcon:u.jsx(Ol,{}),onClick:()=>r("upload",{mode:"create",data:{connectionId:t,workspace:e}}),children:"Upload Data"}),u.jsx(vt,{variant:"outline",leftIcon:u.jsx(As,{}),onClick:()=>r("datastore",{mode:"create",data:{connectionId:t,workspace:e}}),children:"New Data Store"}),u.jsx(vt,{variant:"outline",leftIcon:u.jsx(As,{}),onClick:()=>r("coveragestore",{mode:"create",data:{connectionId:t,workspace:e}}),children:"New Coverage Store"})]})]})})}),i&&u.jsx(Dn,{bg:n,children:u.jsx(Vn,{children:u.jsxs(at,{align:"start",spacing:3,children:[u.jsx(lr,{size:"sm",color:"gray.600",children:"OGC Services"}),u.jsx(Hn,{}),u.jsxs(me,{wrap:"wrap",gap:2,children:[u.jsx(Lt,{colorScheme:i.wmsEnabled?"green":"gray",px:3,py:1,children:"WMS"}),u.jsx(Lt,{colorScheme:i.wfsEnabled?"green":"gray",px:3,py:1,children:"WFS"}),u.jsx(Lt,{colorScheme:i.wcsEnabled?"green":"gray",px:3,py:1,children:"WCS"}),u.jsx(Lt,{colorScheme:i.wmtsEnabled?"green":"gray",px:3,py:1,children:"WMTS"}),u.jsx(Lt,{colorScheme:i.wpsEnabled?"green":"gray",px:3,py:1,children:"WPS"})]})]})})})]})}function e2e({connectionId:t,workspace:e,storeName:n,storeType:r}){const i=Et("white","gray.800"),s=St(g=>g.setPreview),o=St(g=>g.openDialog),a=r==="datastore",{data:h}=er({queryKey:[r+"s",t,e,n],queryFn:()=>a?hH(t,e,n):pH(t,e,n)}),p=async()=>{try{const{url:g}=await Cl({connId:t,workspace:e,layerName:n,storeName:n,storeType:r,layerType:a?"vector":"raster"});s({url:g,layerName:n,workspace:e,connectionId:t,storeName:n,storeType:r,layerType:a?"vector":"raster"})}catch(g){St.getState().setError(g.message)}};return u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsx(Dn,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",children:u.jsx(Vn,{py:8,px:6,children:u.jsxs(Sn,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(me,{spacing:4,children:[u.jsx(de,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(Le,{as:a?Yr:Qc,boxSize:8})}),u.jsxs(at,{align:"start",spacing:1,children:[u.jsx(lr,{size:"lg",color:"white",children:n}),u.jsxs(me,{children:[u.jsx(Lt,{colorScheme:a?"blue":"orange",children:a?"Data Store":"Coverage Store"}),(h==null?void 0:h.enabled)&&u.jsx(Lt,{colorScheme:"green",children:"Enabled"})]})]})]}),u.jsx(Bo,{}),u.jsxs(me,{wrap:"wrap",gap:2,children:[u.jsx(vt,{variant:"solid",bg:"whiteAlpha.200",color:"white",_hover:{bg:"whiteAlpha.300"},leftIcon:u.jsx(Hc,{}),onClick:p,children:"Preview on Map"}),u.jsx(vt,{variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(pc,{}),onClick:()=>o(r,{mode:"edit",data:{connectionId:t,workspace:e,storeName:n}}),children:"Edit Store"})]})]})})}),u.jsx(Dn,{bg:i,children:u.jsx(Vn,{children:u.jsxs(at,{align:"start",spacing:3,children:[u.jsx(lr,{size:"sm",color:"gray.600",children:"Store Details"}),u.jsx(Hn,{}),u.jsxs(Gn,{columns:2,spacing:4,w:"100%",children:[u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Workspace"}),u.jsx(te,{fontWeight:"medium",children:e})]}),u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Type"}),u.jsx(te,{fontWeight:"medium",children:(h==null?void 0:h.type)||"Unknown"})]})]})]})})})]})}function t2e({connectionId:t,workspace:e,layerName:n}){const r=Et("white","gray.800"),i=St(g=>g.setPreview),s=St(g=>g.openDialog),{data:o}=er({queryKey:["layer",t,e,n],queryFn:()=>mH(t,e,n)}),a=async()=>{try{const{url:g}=await Cl({connId:t,workspace:e,layerName:n,storeName:o==null?void 0:o.store,storeType:o==null?void 0:o.storeType,layerType:(o==null?void 0:o.storeType)==="coveragestore"?"raster":"vector"});i({url:g,layerName:n,workspace:e,connectionId:t,storeName:o==null?void 0:o.store,storeType:o==null?void 0:o.storeType,layerType:(o==null?void 0:o.storeType)==="coveragestore"?"raster":"vector"})}catch(g){St.getState().setError(g.message)}},h=()=>{s("info",{mode:"view",title:"Tile Cache",data:{connectionId:t,workspace:e,layerName:n}})},p=async()=>{try{const{url:g}=await Cl({connId:t,workspace:e,layerName:n,storeName:o==null?void 0:o.store,storeType:o==null?void 0:o.storeType,layerType:(o==null?void 0:o.storeType)==="coveragestore"?"raster":"vector",useCache:!0,gridSet:"EPSG:900913",tileFormat:"image/png"});i({url:g,layerName:n,workspace:e,connectionId:t,storeName:o==null?void 0:o.store,storeType:o==null?void 0:o.storeType,layerType:(o==null?void 0:o.storeType)==="coveragestore"?"raster":"vector"})}catch(g){St.getState().setError(g.message)}};return u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsx(Dn,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",children:u.jsx(Vn,{py:8,px:6,children:u.jsxs(Sn,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(me,{spacing:4,children:[u.jsx(de,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(Le,{as:mi,boxSize:8})}),u.jsxs(at,{align:"start",spacing:1,children:[u.jsx(lr,{size:"lg",color:"white",children:n}),u.jsxs(me,{children:[u.jsx(Lt,{colorScheme:"teal",children:"Layer"}),(o==null?void 0:o.enabled)&&u.jsx(Lt,{colorScheme:"green",children:"Enabled"}),(o==null?void 0:o.advertised)&&u.jsx(Lt,{colorScheme:"blue",children:"Advertised"})]})]})]}),u.jsx(Bo,{}),u.jsxs(me,{wrap:"wrap",gap:2,children:[u.jsx(vt,{size:"lg",variant:"accent",leftIcon:u.jsx(Hc,{}),onClick:a,children:"Preview (WMS)"}),u.jsx(vt,{size:"lg",variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(Hc,{}),onClick:p,children:"Preview Cache"}),u.jsx(vt,{size:"lg",variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(Yr,{}),onClick:h,children:"Manage Cache"}),u.jsx(vt,{size:"lg",variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(pc,{}),onClick:()=>s("layer",{mode:"edit",data:{connectionId:t,workspace:e,layerName:n}}),children:"Edit Layer"})]})]})})}),o&&u.jsx(Dn,{bg:r,children:u.jsx(Vn,{children:u.jsxs(at,{align:"start",spacing:3,children:[u.jsx(lr,{size:"sm",color:"gray.600",children:"Layer Configuration"}),u.jsx(Hn,{}),u.jsxs(Gn,{columns:{base:1,md:2},spacing:4,w:"100%",children:[u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Workspace"}),u.jsx(te,{fontWeight:"medium",children:e})]}),u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Store"}),u.jsx(te,{fontWeight:"medium",children:o.store||"Unknown"})]}),u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Store Type"}),u.jsx(te,{fontWeight:"medium",children:o.storeType||"Unknown"})]}),u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Default Style"}),u.jsx(te,{fontWeight:"medium",children:o.defaultStyle||"None"})]})]})]})})}),u.jsx(Dn,{bg:r,children:u.jsx(Vn,{children:u.jsxs(at,{align:"stretch",spacing:4,children:[u.jsx(lr,{size:"sm",color:"gray.600",children:"Tile Cache"}),u.jsx(Hn,{}),u.jsx(te,{fontSize:"sm",color:"gray.600",children:"Manage tile cache for this layer. Seed tiles for faster map viewing, or truncate the cache to regenerate tiles."}),u.jsx(Gn,{columns:{base:1,md:2},spacing:4,children:u.jsx(vt,{colorScheme:"kartoza",leftIcon:u.jsx(Yr,{}),onClick:h,children:"Seed / Truncate Cache"})})]})})})]})}function n2e({connectionId:t,workspace:e,groupName:n}){const r=Et("white","gray.800"),i=St(y=>y.setPreview),s=St(y=>y.openDialog),{data:o}=er({queryKey:["layergroup",t,e,n],queryFn:()=>vH(t,e,n)}),a=async()=>{try{const{url:y}=await Cl({connId:t,workspace:e,layerName:n,layerType:"group"});i({url:y,layerName:n,workspace:e,connectionId:t,layerType:"group"})}catch(y){St.getState().setError(y.message)}},h=()=>{s("info",{mode:"view",title:"Tile Cache",data:{connectionId:t,workspace:e,layerName:n}})},p=async()=>{try{const{url:y}=await Cl({connId:t,workspace:e,layerName:n,layerType:"group",useCache:!0,gridSet:"EPSG:900913",tileFormat:"image/png"});i({url:y,layerName:n,workspace:e,connectionId:t,layerType:"group"})}catch(y){St.getState().setError(y.message)}},g=()=>{s("layergroup",{mode:"edit",data:{connectionId:t,workspace:e,name:n,layers:(o==null?void 0:o.layers.map(y=>y.name))||[],mode:o==null?void 0:o.mode,title:o==null?void 0:o.title}})};return u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsx(Dn,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",children:u.jsx(Vn,{py:8,px:6,children:u.jsxs(Sn,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(me,{spacing:4,children:[u.jsx(de,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(Le,{as:Vf,boxSize:8})}),u.jsxs(at,{align:"start",spacing:1,children:[u.jsx(lr,{size:"lg",color:"white",children:n}),u.jsxs(me,{children:[u.jsx(Lt,{colorScheme:"purple",children:"Layer Group"}),(o==null?void 0:o.mode)&&u.jsx(Lt,{colorScheme:"blue",children:o.mode}),(o==null?void 0:o.enabled)&&u.jsx(Lt,{colorScheme:"green",children:"Enabled"})]})]})]}),u.jsx(Bo,{}),u.jsxs(me,{wrap:"wrap",gap:2,children:[u.jsx(vt,{size:"lg",variant:"accent",leftIcon:u.jsx(Hc,{}),onClick:a,children:"Preview (WMS)"}),u.jsx(vt,{size:"lg",variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(Hc,{}),onClick:p,children:"Preview Cache"}),u.jsx(vt,{size:"lg",variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(Yr,{}),onClick:h,children:"Manage Cache"}),u.jsx(vt,{size:"lg",variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(pc,{}),onClick:g,children:"Edit Layers"})]})]})})}),o&&u.jsxs(u.Fragment,{children:[u.jsx(Dn,{bg:r,children:u.jsx(Vn,{children:u.jsxs(at,{align:"start",spacing:3,children:[u.jsx(lr,{size:"sm",color:"gray.600",children:"Group Configuration"}),u.jsx(Hn,{}),u.jsxs(Gn,{columns:{base:1,md:2},spacing:4,w:"100%",children:[u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Workspace"}),u.jsx(te,{fontWeight:"medium",children:e})]}),u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Mode"}),u.jsx(te,{fontWeight:"medium",children:o.mode||"SINGLE"})]}),o.title&&u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Title"}),u.jsx(te,{fontWeight:"medium",children:o.title})]}),o.bounds&&u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Bounds"}),u.jsxs(te,{fontWeight:"medium",fontSize:"xs",children:["[",o.bounds.minX.toFixed(2),", ",o.bounds.minY.toFixed(2),", ",o.bounds.maxX.toFixed(2),", ",o.bounds.maxY.toFixed(2),"]"]})]})]})]})})}),u.jsx(Dn,{bg:r,children:u.jsx(Vn,{children:u.jsxs(at,{align:"stretch",spacing:3,children:[u.jsxs(lr,{size:"sm",color:"gray.600",children:["Layers in Group (",o.layers.length,")"]}),u.jsx(Hn,{}),u.jsx(at,{align:"stretch",spacing:2,children:o.layers.map((y,b)=>u.jsxs(me,{p:2,bg:"gray.50",borderRadius:"md",_dark:{bg:"gray.700"},children:[u.jsx(Lt,{colorScheme:y.type==="layer"?"teal":"purple",children:y.type}),u.jsx(te,{fontWeight:"medium",children:y.name}),y.styleName&&u.jsxs(te,{fontSize:"sm",color:"gray.500",children:["(Style: ",y.styleName,")"]})]},b))})]})})}),u.jsx(Dn,{bg:r,children:u.jsx(Vn,{children:u.jsxs(at,{align:"stretch",spacing:4,children:[u.jsx(lr,{size:"sm",color:"gray.600",children:"Tile Cache"}),u.jsx(Hn,{}),u.jsx(te,{fontSize:"sm",color:"gray.600",children:"Manage tile cache for this layer group. Seed tiles for faster map viewing, or truncate the cache to regenerate tiles."}),u.jsxs(Gn,{columns:{base:1,md:2},spacing:4,children:[u.jsx(vt,{colorScheme:"kartoza",leftIcon:u.jsx(Yr,{}),onClick:h,children:"Seed / Truncate Cache"}),u.jsx(vt,{variant:"outline",leftIcon:u.jsx(pc,{}),onClick:g,children:"Modify Layers"})]})]})})})]})]})}function r2e({connectionId:t,workspace:e,styleName:n}){var o;const r=Et("white","gray.800"),i=St(a=>a.openDialog),{data:s}=er({queryKey:["style",t,e,n],queryFn:()=>yH(t,e,n)});return u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsx(Dn,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",children:u.jsx(Vn,{py:8,px:6,children:u.jsxs(Sn,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(me,{spacing:4,children:[u.jsx(de,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(Le,{as:pc,boxSize:8})}),u.jsxs(at,{align:"start",spacing:1,children:[u.jsx(lr,{size:"lg",color:"white",children:n}),u.jsxs(me,{children:[u.jsx(Lt,{colorScheme:"pink",children:"Style"}),(s==null?void 0:s.format)&&u.jsx(Lt,{colorScheme:"blue",children:s.format.toUpperCase()})]})]})]}),u.jsx(Bo,{}),u.jsx(vt,{size:"lg",variant:"accent",leftIcon:u.jsx(pc,{}),onClick:()=>i("style",{mode:"edit",data:{connectionId:t,workspace:e,name:n}}),children:"Edit Style"})]})})}),u.jsx(Dn,{bg:r,children:u.jsx(Vn,{children:u.jsxs(at,{align:"start",spacing:3,children:[u.jsx(lr,{size:"sm",color:"gray.600",children:"Style Details"}),u.jsx(Hn,{}),u.jsxs(Gn,{columns:{base:1,md:2},spacing:4,w:"100%",children:[u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Workspace"}),u.jsx(te,{fontWeight:"medium",children:e})]}),u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Format"}),u.jsx(te,{fontWeight:"medium",children:((o=s==null?void 0:s.format)==null?void 0:o.toUpperCase())||"Unknown"})]})]})]})})}),(s==null?void 0:s.content)&&u.jsx(Dn,{bg:r,children:u.jsx(Vn,{children:u.jsxs(at,{align:"stretch",spacing:3,children:[u.jsx(lr,{size:"sm",color:"gray.600",children:"Style Content Preview"}),u.jsx(Hn,{}),u.jsxs(de,{bg:"gray.50",_dark:{bg:"gray.900"},p:4,borderRadius:"md",maxH:"400px",overflowY:"auto",fontFamily:"mono",fontSize:"sm",whiteSpace:"pre-wrap",wordBreak:"break-all",children:[s.content.slice(0,2e3),s.content.length>2e3&&`...
[Content truncated - click Edit Style to see full content]`]})]})})})]})}const x6=bo`
  0% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(2);
    opacity: 0.5;
  }
  100% {
    transform: scale(3);
    opacity: 0;
  }
`,i2e=`
  M 115 95 Q 120 80 140 75 Q 160 70 180 78 Q 200 85 210 95 Q 220 105 215 120
  Q 210 135 195 145 Q 180 155 160 160 Q 140 165 125 155 Q 110 145 105 130
  Q 100 115 115 95 Z
  M 125 170 Q 135 165 145 170 Q 155 175 160 190 Q 165 205 158 225
  Q 150 245 140 255 Q 130 265 120 260 Q 110 255 108 240 Q 105 225 110 205
  Q 115 185 125 170 Z
  M 440 70 Q 460 65 480 72 Q 500 80 510 95 Q 520 110 515 125
  Q 510 140 495 145 Q 480 150 460 145 Q 440 140 430 125 Q 420 110 425 90 Q 430 75 440 70 Z
  M 455 155 Q 475 150 495 158 Q 515 165 525 185 Q 535 205 530 230
  Q 525 255 510 270 Q 495 285 475 282 Q 455 280 445 265 Q 435 250 438 225
  Q 440 200 445 180 Q 450 160 455 155 Z
  M 550 60 Q 590 50 640 55 Q 690 60 730 80 Q 770 100 790 130
  Q 810 160 800 195 Q 790 230 760 250 Q 730 270 690 275 Q 650 280 610 270
  Q 570 260 545 235 Q 520 210 520 175 Q 520 140 530 110 Q 540 80 550 60 Z
  M 770 280 Q 790 275 810 285 Q 830 295 835 315 Q 840 335 830 350
  Q 820 365 800 368 Q 780 370 765 360 Q 750 350 752 330 Q 755 310 760 295 Q 765 285 770 280 Z
`;function s2e(t){return!t||t==="localhost"||t==="127.0.0.1"?"Local development server on this machine":t.startsWith("192.168.")||t.startsWith("10.")||t.startsWith("172.")?"Server on local network (private IP address)":t.includes("kartoza.com")?"Kartoza cloud infrastructure, Cape Town, South Africa":t.includes("digitalocean.com")||t.includes(".do.")?"DigitalOcean cloud infrastructure":t.includes("aws.")||t.includes("amazonaws.com")?"Amazon Web Services (AWS) cloud":t.includes("azure.")||t.includes("microsoft.com")?"Microsoft Azure cloud":t.includes("gcp.")||t.includes("google")?"Google Cloud Platform":t.split(".").length>=2?`Remote server at ${t}`:`Server: ${t}`}function o2e(t){return!t||t==="localhost"||t==="127.0.0.1"||t.startsWith("192.168.")||t.startsWith("10.")||t.startsWith("172.")?{x:"48%",y:"35%"}:t.includes("kartoza.com")?{x:"53%",y:"72%"}:{x:"50%",y:"45%"}}function a2e({host:t}){const e=Et("blue.50","blue.900"),n=Et("#94a3b8","#475569"),r=Et("red.500","red.400"),i=Et("red.300","red.600"),s=Et("gray.100","gray.700"),o=Et("gray.700","gray.200"),a=o2e(t),h=s2e(t);return u.jsxs(at,{spacing:3,align:"stretch",children:[u.jsxs(de,{position:"relative",bg:e,borderRadius:"xl",overflow:"hidden",h:"180px",w:"100%",children:[u.jsxs("svg",{viewBox:"0 0 900 400",style:{width:"100%",height:"100%"},preserveAspectRatio:"xMidYMid meet",children:[u.jsx("defs",{children:u.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:u.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"currentColor",strokeWidth:"0.5",opacity:"0.1"})})}),u.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),u.jsx("path",{d:i2e,fill:n,stroke:n,strokeWidth:"2",opacity:"0.6"})]}),u.jsxs(de,{position:"absolute",left:a.x,top:a.y,transform:"translate(-50%, -50%)",children:[u.jsx(de,{position:"absolute",w:"24px",h:"24px",borderRadius:"full",bg:i,animation:`${x6} 2s ease-out infinite`,transform:"translate(-50%, -50%)",left:"50%",top:"50%"}),u.jsx(de,{position:"absolute",w:"24px",h:"24px",borderRadius:"full",bg:i,animation:`${x6} 2s ease-out infinite 0.6s`,transform:"translate(-50%, -50%)",left:"50%",top:"50%"}),u.jsx(de,{w:"14px",h:"14px",borderRadius:"full",bg:r,shadow:"lg",position:"relative",zIndex:1,border:"2px solid white"})]}),u.jsx(de,{position:"absolute",bottom:3,left:3,bg:"blackAlpha.700",px:3,py:1.5,borderRadius:"lg",children:u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:I2,color:"red.300",boxSize:4}),u.jsx(te,{fontSize:"sm",color:"white",fontWeight:"semibold",children:t||"localhost"})]})})]}),u.jsx(de,{bg:s,px:4,py:2,borderRadius:"lg",children:u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:mc,color:"blue.500",boxSize:4}),u.jsx(te,{fontSize:"sm",color:o,children:h})]})})]})}function ai({label:t,value:e,helpText:n,icon:r,colorScheme:i="blue"}){const s=Et("white","gray.700"),o=Et("gray.200","gray.600");return u.jsxs(de,{bg:s,p:4,borderRadius:"xl",borderWidth:1,borderColor:o,shadow:"sm",transition:"all 0.2s",_hover:{shadow:"md",borderColor:`${i}.300`},children:[u.jsxs(me,{spacing:3,mb:2,children:[u.jsx(de,{p:2,borderRadius:"lg",bg:`${i}.50`,color:`${i}.500`,children:u.jsx(Le,{as:r,boxSize:5})}),u.jsx(te,{fontSize:"sm",fontWeight:"medium",color:"gray.500",children:t})]}),u.jsx(te,{fontSize:"2xl",fontWeight:"bold",children:e}),n&&u.jsx(te,{fontSize:"xs",color:"gray.400",mt:1,children:n})]})}function l2e({serviceName:t}){var g;const[e,n]=L.useState(null),[r,i]=L.useState(!0),[s,o]=L.useState(null),a=St(y=>y.openDialog),h=Et("white","gray.800");L.useEffect(()=>{i(!0),o(null),SH(t).then(n).catch(y=>o(y.message)).finally(()=>i(!1))},[t]);const p=L.useMemo(()=>{if(!(e!=null&&e.version))return"Unknown";const y=e.version.match(/PostgreSQL (\d+\.\d+)/);return y?`PostgreSQL ${y[1]}`:"PostgreSQL"},[e==null?void 0:e.version]);return r?u.jsx(Jl,{h:"400px",children:u.jsxs(at,{spacing:4,children:[u.jsx(Cr,{size:"xl",color:"blue.500",thickness:"4px"}),u.jsx(te,{color:"gray.500",children:"Loading server statistics..."})]})}):s?u.jsx(Jl,{h:"400px",children:u.jsxs(at,{spacing:4,children:[u.jsx(Le,{as:Tf,boxSize:12,color:"red.500"}),u.jsx(te,{color:"red.500",fontWeight:"medium",children:s})]})}):e?u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsx(Dn,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",children:u.jsx(Vn,{py:8,px:6,children:u.jsxs(Sn,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(me,{spacing:4,children:[u.jsx(de,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(Le,{as:Gh,boxSize:8})}),u.jsxs(at,{align:"start",spacing:1,children:[u.jsxs(me,{spacing:3,children:[u.jsx(lr,{size:"lg",color:"white",children:t}),u.jsx(Lt,{colorScheme:"green",variant:"solid",fontSize:"xs",px:2,py:1,borderRadius:"full",children:u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:$f,boxSize:3}),u.jsx(te,{children:"Connected"})]})})]}),u.jsxs(me,{spacing:3,opacity:.9,children:[u.jsx(te,{fontSize:"sm",children:e.database_name}),u.jsx(te,{fontSize:"sm",children:"|"}),u.jsx(te,{fontSize:"sm",children:p}),e.has_postgis&&u.jsxs(u.Fragment,{children:[u.jsx(te,{fontSize:"sm",children:"|"}),u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:Os,boxSize:4}),u.jsx(te,{fontSize:"sm",children:"PostGIS"})]})]})]})]})]}),u.jsx(Bo,{}),u.jsxs(me,{wrap:"wrap",gap:2,children:[u.jsx(vt,{variant:"solid",bg:"whiteAlpha.200",color:"white",_hover:{bg:"whiteAlpha.300"},leftIcon:u.jsx(Da,{}),onClick:()=>a("query",{mode:"create",data:{serviceName:t}}),children:"SQL Query"}),u.jsx(vt,{variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(Ol,{}),onClick:()=>a("pgupload",{mode:"create",data:{serviceName:t}}),children:"Import Data"})]})]})})}),u.jsx(a2e,{host:e.host}),u.jsx(Dn,{bg:h,children:u.jsxs(Vn,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:M2,color:"purple.500"}),u.jsx(te,{fontWeight:"semibold",fontSize:"lg",children:"Connections"})]}),u.jsxs(Gn,{columns:{base:2,md:4},spacing:4,children:[u.jsx(ai,{label:"Current",value:e.current_connections,helpText:`of ${e.max_connections} max`,icon:M2,colorScheme:"purple"}),u.jsx(ai,{label:"Active",value:e.active_connections,helpText:"executing queries",icon:j_,colorScheme:"green"}),u.jsx(ai,{label:"Idle",value:e.idle_connections,helpText:"waiting for work",icon:gT,colorScheme:"blue"}),u.jsx(ai,{label:"Waiting",value:e.waiting_connections,helpText:"blocked on locks",icon:qu,colorScheme:"orange"})]}),u.jsxs(de,{mt:4,children:[u.jsxs(me,{justify:"space-between",mb:2,children:[u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Connection Pool Usage"}),u.jsxs(te,{fontSize:"sm",fontWeight:"bold",children:[e.connection_percent,"%"]})]}),u.jsx(tp,{value:e.connection_percent,colorScheme:e.connection_percent>80?"red":e.connection_percent>60?"orange":"green",borderRadius:"full",size:"lg"})]})]})}),u.jsx(Dn,{bg:h,children:u.jsxs(Vn,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:Yr,color:"blue.500"}),u.jsx(te,{fontWeight:"semibold",fontSize:"lg",children:"Database"})]}),u.jsxs(Gn,{columns:{base:2,md:4},spacing:4,children:[u.jsx(ai,{label:"Size",value:e.database_size,icon:e0,colorScheme:"blue"}),u.jsx(ai,{label:"Cache Hit Ratio",value:e.cache_hit_ratio,helpText:"higher is better",icon:qu,colorScheme:"green"}),u.jsx(ai,{label:"Live Tuples",value:e.live_tuples.toLocaleString(),icon:Ks,colorScheme:"purple"}),u.jsx(ai,{label:"Dead Tuples",value:e.dead_tuples.toLocaleString(),helpText:"needs vacuum",icon:Tf,colorScheme:e.dead_tuples>1e4?"red":"gray"})]})]})}),u.jsx(Dn,{bg:h,children:u.jsxs(Vn,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:mi,color:"teal.500"}),u.jsx(te,{fontWeight:"semibold",fontSize:"lg",children:"Objects"})]}),u.jsxs(Gn,{columns:{base:3,md:5},spacing:4,children:[u.jsx(ai,{label:"Schemas",value:e.schema_count,icon:mi,colorScheme:"teal"}),u.jsx(ai,{label:"Tables",value:e.table_count,icon:Ks,colorScheme:"blue"}),u.jsx(ai,{label:"Views",value:e.view_count,icon:Pi,colorScheme:"purple"}),u.jsx(ai,{label:"Indexes",value:e.index_count,icon:qu,colorScheme:"orange"}),u.jsx(ai,{label:"Functions",value:e.function_count,icon:Da,colorScheme:"pink"})]})]})}),e.has_postgis&&u.jsx(Dn,{bg:h,children:u.jsxs(Vn,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:Os,color:"green.500"}),u.jsx(te,{fontWeight:"semibold",fontSize:"lg",children:"PostGIS"})]}),u.jsxs(Gn,{columns:{base:2,md:3},spacing:4,children:[u.jsx(ai,{label:"Geometry Columns",value:e.geometry_columns||0,icon:Os,colorScheme:"green"}),u.jsx(ai,{label:"Raster Columns",value:e.raster_columns||0,icon:mi,colorScheme:"blue"})]}),e.postgis_version&&u.jsx(de,{mt:4,p:3,bg:"green.50",borderRadius:"lg",_dark:{bg:"green.900"},children:u.jsx(te,{fontSize:"xs",color:"green.700",fontFamily:"mono",noOfLines:2,_dark:{color:"green.200"},children:e.postgis_version})})]})}),u.jsx(Dn,{bg:h,children:u.jsxs(Vn,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:mc,color:"gray.500"}),u.jsx(te,{fontWeight:"semibold",fontSize:"lg",children:"Server Info"})]}),u.jsxs(Gn,{columns:{base:1,md:2},spacing:4,children:[u.jsxs(ds,{children:[u.jsx(fs,{children:"Uptime"}),u.jsx(ps,{fontSize:"lg",children:e.uptime||"N/A"}),u.jsxs(kf,{children:["Since ",(g=e.server_start_time)==null?void 0:g.split(" ")[0]]})]}),u.jsxs(ds,{children:[u.jsx(fs,{children:"Transactions"}),u.jsx(ps,{fontSize:"lg",children:e.xact_commit.toLocaleString()}),u.jsxs(kf,{children:[e.xact_rollback.toLocaleString()," rollbacks"]})]})]}),u.jsx(de,{mt:4,p:3,bg:"gray.100",borderRadius:"lg",_dark:{bg:"gray.700"},children:u.jsx(te,{fontSize:"xs",color:"gray.600",fontFamily:"mono",noOfLines:2,_dark:{color:"gray.300"},children:e.version})})]})}),e.installed_extensions&&e.installed_extensions.length>0&&u.jsx(Dn,{bg:h,children:u.jsxs(Vn,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:Da,color:"indigo.500"}),u.jsx(te,{fontWeight:"semibold",fontSize:"lg",children:"Extensions"})]}),u.jsx($0,{spacing:2,children:e.installed_extensions.map(y=>u.jsx(Wm,{children:u.jsx(kn,{label:y,fontSize:"xs",children:u.jsx(Vm,{size:"md",colorScheme:y==="postgis"?"green":y==="plpgsql"?"blue":"gray",borderRadius:"full",children:y})})},y))})]})})]}):null}function c2e({serviceName:t,schemaName:e}){const[n,r]=L.useState(null),[i,s]=L.useState(!0),[o,a]=L.useState(null),h=St(b=>b.openDialog),p=Et("white","gray.800"),g=Et("gray.50","gray.700"),y=Et("gray.200","gray.600");return L.useEffect(()=>{s(!0),a(null),oke(t,e).then(r).catch(b=>a(b.message)).finally(()=>s(!1))},[t,e]),i?u.jsx(Jl,{h:"400px",children:u.jsxs(at,{spacing:4,children:[u.jsx(Cr,{size:"xl",color:"teal.500",thickness:"4px"}),u.jsx(te,{color:"gray.500",children:"Loading schema statistics..."})]})}):o?u.jsx(Jl,{h:"400px",children:u.jsxs(at,{spacing:4,children:[u.jsx(Le,{as:Tf,boxSize:12,color:"red.500"}),u.jsx(te,{color:"red.500",fontWeight:"medium",children:o})]})}):n?u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsx(Dn,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",children:u.jsx(Vn,{py:8,px:6,children:u.jsxs(Sn,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(me,{spacing:4,children:[u.jsx(de,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(Le,{as:mi,boxSize:8})}),u.jsxs(at,{align:"start",spacing:1,children:[u.jsx(me,{spacing:3,children:u.jsx(lr,{size:"lg",color:"white",children:e})}),u.jsxs(me,{spacing:3,opacity:.9,children:[u.jsx(te,{fontSize:"sm",children:n.database_name}),u.jsx(te,{fontSize:"sm",children:"|"}),u.jsxs(te,{fontSize:"sm",children:["Owner: ",n.owner]}),n.has_postgis&&u.jsxs(u.Fragment,{children:[u.jsx(te,{fontSize:"sm",children:"|"}),u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:Os,boxSize:4}),u.jsx(te,{fontSize:"sm",children:"PostGIS"})]})]})]})]})]}),u.jsx(Bo,{}),u.jsxs(me,{wrap:"wrap",gap:2,children:[u.jsx(vt,{variant:"solid",bg:"whiteAlpha.200",color:"white",_hover:{bg:"whiteAlpha.300"},leftIcon:u.jsx(Da,{}),onClick:()=>h("query",{mode:"create",data:{serviceName:t,schemaName:e}}),children:"SQL Query"}),u.jsx(vt,{variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(Ol,{}),onClick:()=>h("pgupload",{mode:"create",data:{serviceName:t,schemaName:e}}),children:"Import Data"})]})]})})}),u.jsx(Dn,{bg:p,children:u.jsxs(Vn,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:e0,color:"teal.500"}),u.jsx(te,{fontWeight:"semibold",fontSize:"lg",children:"Schema Size"})]}),u.jsxs(Gn,{columns:{base:2,md:4},spacing:4,children:[u.jsx(ai,{label:"Total Size",value:n.total_size||"0 bytes",icon:e0,colorScheme:"teal"}),u.jsx(ai,{label:"Total Rows",value:n.total_rows.toLocaleString(),icon:Ks,colorScheme:"blue"}),u.jsx(ai,{label:"Dead Tuples",value:n.dead_tuples.toLocaleString(),helpText:n.dead_tuples>1e3?"Consider VACUUM":"",icon:Tf,colorScheme:n.dead_tuples>1e3?"orange":"gray"}),u.jsx(ai,{label:"Tables",value:n.table_count,icon:Ks,colorScheme:"purple"})]})]})}),u.jsx(Dn,{bg:p,children:u.jsxs(Vn,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:mi,color:"purple.500"}),u.jsx(te,{fontWeight:"semibold",fontSize:"lg",children:"Objects"})]}),u.jsxs(Gn,{columns:{base:3,md:6},spacing:4,children:[u.jsx(ai,{label:"Tables",value:n.table_count,icon:Ks,colorScheme:"blue"}),u.jsx(ai,{label:"Views",value:n.view_count,icon:Pi,colorScheme:"purple"}),u.jsx(ai,{label:"Indexes",value:n.index_count,icon:qu,colorScheme:"orange"}),u.jsx(ai,{label:"Functions",value:n.function_count,icon:Da,colorScheme:"pink"}),u.jsx(ai,{label:"Sequences",value:n.sequence_count,icon:j_,colorScheme:"cyan"}),u.jsx(ai,{label:"Triggers",value:n.trigger_count,icon:qu,colorScheme:"red"})]})]})}),n.has_postgis&&(n.geometry_columns>0||n.raster_columns>0)&&u.jsx(Dn,{bg:p,children:u.jsxs(Vn,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:Os,color:"green.500"}),u.jsx(te,{fontWeight:"semibold",fontSize:"lg",children:"PostGIS"})]}),u.jsxs(Gn,{columns:{base:2,md:2},spacing:4,children:[u.jsx(ai,{label:"Geometry Columns",value:n.geometry_columns,icon:Os,colorScheme:"green"}),u.jsx(ai,{label:"Raster Columns",value:n.raster_columns,icon:Qc,colorScheme:"blue"})]})]})}),n.tables&&n.tables.length>0&&u.jsx(Dn,{bg:p,children:u.jsxs(Vn,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:Ks,color:"blue.500"}),u.jsxs(te,{fontWeight:"semibold",fontSize:"lg",children:["Tables (",n.tables.length,")"]})]}),u.jsx(at,{align:"stretch",spacing:2,children:n.tables.map(b=>u.jsx(de,{p:3,bg:g,borderRadius:"lg",borderWidth:1,borderColor:y,children:u.jsxs(Sn,{align:"center",wrap:"wrap",gap:2,children:[u.jsxs(me,{flex:"1",minW:"200px",children:[u.jsx(Le,{as:b.has_geometry?Os:Ks,color:b.has_geometry?"green.500":"blue.500",boxSize:4}),u.jsx(te,{fontWeight:"medium",children:b.name}),b.has_primary_key&&u.jsx(kn,{label:"Has Primary Key",children:u.jsx(Lt,{colorScheme:"blue",size:"sm",variant:"subtle",children:"PK"})}),b.has_geometry&&u.jsx(kn,{label:`${b.geometry_type} (SRID: ${b.srid})`,children:u.jsx(Lt,{colorScheme:"green",size:"sm",variant:"subtle",children:b.geometry_type})})]}),u.jsxs(me,{spacing:4,fontSize:"sm",color:"gray.500",children:[u.jsx(kn,{label:"Row count",children:u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:Ks,boxSize:3}),u.jsxs(te,{children:[b.row_count.toLocaleString()," rows"]})]})}),u.jsx(kn,{label:"Table size",children:u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:e0,boxSize:3}),u.jsx(te,{children:b.size})]})}),u.jsx(kn,{label:"Index count",children:u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:qu,boxSize:3}),u.jsxs(te,{children:[b.index_count," idx"]})]})}),b.dead_tuples>0&&u.jsx(kn,{label:"Dead tuples - consider VACUUM",children:u.jsxs(me,{spacing:1,color:b.dead_tuples>100?"orange.500":"gray.500",children:[u.jsx(Le,{as:Tf,boxSize:3}),u.jsxs(te,{children:[b.dead_tuples," dead"]})]})})]}),u.jsxs(me,{spacing:2,children:[u.jsx(kn,{label:"View data",children:u.jsx(vt,{size:"xs",variant:"ghost",colorScheme:"blue",onClick:()=>h("dataviewer",{mode:"view",data:{serviceName:t,schemaName:e,tableName:b.name}}),children:u.jsx(Le,{as:Pi})})}),u.jsx(kn,{label:"Query",children:u.jsx(vt,{size:"xs",variant:"ghost",colorScheme:"teal",onClick:()=>h("query",{mode:"view",data:{serviceName:t,schemaName:e,tableName:b.name,initialSQL:`SELECT * FROM "${e}"."${b.name}" LIMIT 100`}}),children:u.jsx(Le,{as:Da})})})]})]})},b.name))})]})}),n.views&&n.views.length>0&&u.jsx(Dn,{bg:p,children:u.jsxs(Vn,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:Pi,color:"purple.500"}),u.jsxs(te,{fontWeight:"semibold",fontSize:"lg",children:["Views (",n.views.length,")"]})]}),u.jsx(at,{align:"stretch",spacing:2,children:n.views.map(b=>u.jsx(de,{p:3,bg:g,borderRadius:"lg",borderWidth:1,borderColor:y,children:u.jsxs(Sn,{align:"center",wrap:"wrap",gap:2,children:[u.jsxs(me,{flex:"1",children:[u.jsx(Le,{as:Pi,color:"purple.500",boxSize:4}),u.jsx(te,{fontWeight:"medium",children:b.name}),b.is_materialized&&u.jsx(Lt,{colorScheme:"orange",size:"sm",variant:"subtle",children:"Materialized"})]}),u.jsxs(me,{spacing:2,children:[u.jsx(kn,{label:"View data",children:u.jsx(vt,{size:"xs",variant:"ghost",colorScheme:"purple",onClick:()=>h("dataviewer",{mode:"view",data:{serviceName:t,schemaName:e,tableName:b.name,isView:!0}}),children:u.jsx(Le,{as:Pi})})}),u.jsx(kn,{label:"Query",children:u.jsx(vt,{size:"xs",variant:"ghost",colorScheme:"teal",onClick:()=>h("query",{mode:"view",data:{serviceName:t,schemaName:e,tableName:b.name,initialSQL:`SELECT * FROM "${e}"."${b.name}" LIMIT 100`}}),children:u.jsx(Le,{as:Da})})})]})]})},b.name))})]})})]}):null}function u2e({serviceName:t,schemaName:e,tableName:n,isView:r=!1}){const[i,s]=L.useState([]),[o,a]=L.useState([]),[h,p]=L.useState(!0),[g,y]=L.useState(!1),[b,S]=L.useState(null),[P,O]=L.useState(!0),[D,z]=L.useState(0),F=St(Fe=>Fe.openDialog),R=L.useRef(null),N=100,Q=Et("white","gray.800"),q=Et("gray.50","gray.700"),X=Et("gray.100","gray.600"),K=Et("gray.200","gray.600"),ne=Fe=>(Fe.length>0&&typeof Fe[0]=="object"&&!Array.isArray(Fe[0]),Fe);L.useEffect(()=>{p(!0),S(null),s([]),a([]),z(0),O(!0),Ok(t,e,n,N,0).then(Fe=>{if(!Fe||!Fe.result){S("Invalid response from server");return}const{result:we}=Fe;we.columns&&a(we.columns),we.rows&&we.rows.length>0?(s(ne(we.rows)),z(we.rows.length),O(we.rows.length===N)):(s([]),O(!1))}).catch(Fe=>S((Fe==null?void 0:Fe.message)||"Failed to load data")).finally(()=>p(!1))},[t,e,n]);const J=L.useCallback(async()=>{if(!(g||!P)){y(!0);try{const Fe=await Ok(t,e,n,N,D);if(!(Fe!=null&&Fe.result)){O(!1);return}const{result:we}=Fe;we.rows&&we.rows.length>0?(s(Ie=>[...Ie,...ne(we.rows)]),z(Ie=>Ie+we.rows.length),O(we.rows.length===N)):O(!1)}catch(Fe){console.error("Failed to load more rows:",Fe)}finally{y(!1)}}},[t,e,n,D,g,P,o]),ae=L.useCallback(()=>{if(!R.current||g||!P)return;const{scrollTop:Fe,scrollHeight:we,clientHeight:Ie}=R.current;Fe+Ie>=we*.8&&J()},[J,g,P]),Ee=()=>{if(i.length===0)return;const Fe=o.join(","),we=i.map(Re=>o.map(Oe=>{const oe=Re[Oe];if(oe==null)return"";const nt=String(oe);return nt.includes(",")||nt.includes(`
`)||nt.includes('"')?`"${nt.replace(/"/g,'""')}"`:nt}).join(",")),Ie=[Fe,...we].join(`
`),Qe=new Blob([Ie],{type:"text/csv;charset=utf-8;"}),se=document.createElement("a");se.href=URL.createObjectURL(Qe),se.download=`${e}_${n}.csv`,se.click(),URL.revokeObjectURL(se.href)},Ce=()=>{p(!0),S(null),s([]),z(0),O(!0),Ok(t,e,n,N,0).then(Fe=>{if(!(Fe!=null&&Fe.result)){S("Invalid response from server");return}const{result:we}=Fe;we.columns&&a(we.columns),we.rows&&we.rows.length>0?(s(ne(we.rows)),z(we.rows.length),O(we.rows.length===N)):(s([]),O(!1))}).catch(Fe=>S((Fe==null?void 0:Fe.message)||"Failed to load data")).finally(()=>p(!1))},$e=Fe=>{if(Fe==null)return"-";if(typeof Fe=="object"){const Ie=JSON.stringify(Fe);return Ie.length>100?Ie.substring(0,100)+"...":Ie}const we=String(Fe);return we.length>100?we.substring(0,100)+"...":we},We=Fe=>{if(typeof Fe=="object"&&Fe!==null){const we=Fe;return we.name||we.NAME||"-"}return String(Fe)};return h?u.jsx(Jl,{h:"400px",children:u.jsxs(at,{spacing:4,children:[u.jsx(Cr,{size:"xl",color:"blue.500",thickness:"4px"}),u.jsxs(te,{color:"gray.500",children:["Loading ",r?"view":"table"," data..."]})]})}):b?u.jsx(Jl,{h:"400px",children:u.jsxs(at,{spacing:4,children:[u.jsx(Le,{as:Tf,boxSize:12,color:"red.500"}),u.jsx(te,{color:"red.500",fontWeight:"medium",children:b}),u.jsx(vt,{colorScheme:"blue",onClick:Ce,children:"Retry"})]})}):u.jsxs(at,{spacing:4,align:"stretch",h:"100%",children:[u.jsx(Dn,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",children:u.jsx(Vn,{py:6,px:6,children:u.jsxs(Sn,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(me,{spacing:4,children:[u.jsx(de,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(Le,{as:r?Pi:Ks,boxSize:6})}),u.jsxs(at,{align:"start",spacing:0,children:[u.jsx(lr,{size:"md",children:n}),u.jsxs(me,{spacing:2,opacity:.9,children:[u.jsx(te,{fontSize:"sm",children:e}),u.jsx(te,{fontSize:"sm",children:"|"}),u.jsx(te,{fontSize:"sm",children:r?"View":"Table"}),u.jsx(te,{fontSize:"sm",children:"|"}),u.jsxs(te,{fontSize:"sm",children:[D.toLocaleString()," rows loaded"]}),P&&u.jsx(te,{fontSize:"sm",children:"(more available)"})]})]})]}),u.jsx(Bo,{}),u.jsxs(me,{wrap:"wrap",gap:2,children:[u.jsx(vt,{variant:"solid",bg:"whiteAlpha.200",color:"white",size:"sm",_hover:{bg:"whiteAlpha.300"},leftIcon:u.jsx(Xc,{}),onClick:Ce,children:"Refresh"}),u.jsx(vt,{variant:"solid",bg:"whiteAlpha.200",color:"white",size:"sm",_hover:{bg:"whiteAlpha.300"},leftIcon:u.jsx(Om,{}),onClick:Ee,isDisabled:i.length===0,children:"Export CSV"}),u.jsx(vt,{variant:"outline",color:"white",borderColor:"whiteAlpha.400",size:"sm",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(Da,{}),onClick:()=>F("query",{mode:"view",data:{serviceName:t,schemaName:e,tableName:n,initialSQL:`SELECT * FROM "${e}"."${n}" LIMIT 100`}}),children:"SQL Query"})]})]})})}),u.jsx(Dn,{bg:Q,flex:"1",overflow:"hidden",minH:0,display:"flex",flexDirection:"column",children:u.jsx(Vn,{p:0,flex:"1",minH:0,display:"flex",flexDirection:"column",children:i.length===0?u.jsx(Jl,{h:"200px",children:u.jsxs(at,{spacing:2,children:[u.jsx(Le,{as:Ks,boxSize:8,color:"gray.400"}),u.jsxs(te,{color:"gray.500",children:["No data in this ",r?"view":"table"]})]})}):u.jsxs(de,{ref:R,flex:"1",minH:0,overflowY:"auto",overflowX:"auto",onScroll:ae,children:[u.jsxs(rg,{size:"sm",variant:"simple",children:[u.jsx(C_,{position:"sticky",top:0,bg:X,zIndex:1,children:u.jsxs(za,{children:[u.jsx(Dc,{borderColor:K,py:3,fontSize:"xs",textTransform:"none",color:"gray.500",w:"50px",children:"#"}),o.map((Fe,we)=>u.jsx(Dc,{borderColor:K,py:3,fontSize:"xs",whiteSpace:"nowrap",children:We(Fe)},we))]})}),u.jsx(lx,{children:i.map((Fe,we)=>u.jsxs(za,{_hover:{bg:q},children:[u.jsx(Qi,{borderColor:K,fontSize:"xs",color:"gray.500",py:2,children:we+1}),o.map((Ie,Qe)=>{const se=We(Ie),Re=Fe[se];return u.jsx(Qi,{borderColor:K,fontSize:"xs",py:2,maxW:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:u.jsx(kn,{label:$e(Re),placement:"top",hasArrow:!0,fontSize:"xs",openDelay:500,children:u.jsx(te,{as:"span",color:Re===null?"gray.400":void 0,fontStyle:Re===null?"italic":void 0,children:$e(Re)})})},Qe)})]},we))})]}),g&&u.jsx(Jl,{py:4,children:u.jsxs(me,{spacing:2,children:[u.jsx(Cr,{size:"sm",color:"blue.500"}),u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Loading more rows..."})]})}),!P&&i.length>0&&u.jsx(Jl,{py:4,children:u.jsxs(te,{fontSize:"sm",color:"gray.500",children:["All ",D.toLocaleString()," rows loaded"]})})]})})})]})}const Mu={default:{type:"spring",stiffness:300,damping:24,mass:1},snappy:{type:"spring",stiffness:400,damping:28,mass:.8},bouncy:{type:"spring",stiffness:500,damping:15,mass:1}},v6={hidden:{opacity:0,x:20,height:0},visible:{opacity:1,x:0,height:"auto",transition:{...Mu.snappy,staggerChildren:.05}},exit:{opacity:0,x:-20,height:0,transition:{duration:.2}}},pu={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:Mu.snappy},exit:{opacity:0,y:-10,transition:{duration:.1}}};function h2e(){var ze;const t=St(ut=>ut.activeDialog),e=St(ut=>ut.dialogData),n=St(ut=>ut.closeDialog),r=uo(ut=>ut.addConnection),i=uo(ut=>ut.updateConnection),s=uo(ut=>ut.testConnection),o=uo(ut=>ut.connections),a=uo(ut=>ut.refreshPGServices),[h,p]=L.useState("geoserver"),[g,y]=L.useState(""),[b,S]=L.useState(""),[P,O]=L.useState(""),[D,z]=L.useState(""),[F,R]=L.useState(!1),[N,Q]=L.useState(""),[q,X]=L.useState("localhost"),[K,ne]=L.useState("5432"),[J,ae]=L.useState(""),[Ee,Ce]=L.useState(""),[$e,We]=L.useState(""),[Fe,we]=L.useState("prefer"),[Ie,Qe]=L.useState(!1),[se,Re]=L.useState(!1),[Oe,oe]=L.useState(!1),[nt,Ne]=L.useState(null),tt=ha(),Ye=t==="connection",_t=(e==null?void 0:e.mode)==="edit",At=(ze=e==null?void 0:e.data)==null?void 0:ze.connectionId;L.useEffect(()=>{if(Ye&&_t&&At){const ut=o.find(qt=>qt.id===At);ut&&(p("geoserver"),y(ut.name),S(ut.url),O(ut.username),z(ut.password||""),R(!1))}else Ye&&!_t&&(p("geoserver"),y(""),S(""),O(""),z(""),R(!1),Q(""),X("localhost"),ne("5432"),ae(""),Ce(""),We(""),we("prefer"),Qe(!1));Ne(null)},[Ye,_t,At,o]);const Ot=async()=>{oe(!0),Ne(null);try{if(h==="geoserver"){if(!At&&!b){tt({title:"URL required",description:"Please enter a GeoServer URL first",status:"warning",duration:3e3}),oe(!1);return}if(At){const ut=await s(At);Ne(ut)}else{const ut=await r({name:g||"Test",url:b,username:P,password:D}),qt=await s(ut.id);qt.success||await uo.getState().removeConnection(ut.id),Ne(qt)}}else{if(!N){tt({title:"Service name required",description:"Please enter a service name first",status:"warning",duration:3e3}),oe(!1);return}await p6({name:N,host:q,port:K,dbname:J,user:Ee,password:$e,sslmode:Fe});const qt=await _H(N);Ne(qt)}}catch(ut){Ne({success:!1,message:ut.message})}finally{oe(!1)}},bt=async()=>{Re(!0);try{if(h==="geoserver"){if(!g||!b){tt({title:"Required fields",description:"Name and URL are required",status:"warning",duration:3e3}),Re(!1);return}_t&&At?(await i(At,{name:g,url:b,username:P,password:D||void 0}),tt({title:"Connection updated",status:"success",duration:2e3})):(await r({name:g,url:b,username:P,password:D}),tt({title:"Connection added",status:"success",duration:2e3}))}else{if(!N||!q||!J){tt({title:"Required fields",description:"Service name, host, and database are required",status:"warning",duration:3e3}),Re(!1);return}await p6({name:N,host:q,port:K,dbname:J,user:Ee,password:$e,sslmode:Fe}),await(a==null?void 0:a()),tt({title:"PostgreSQL service added",description:`Service "${N}" saved to pg_service.conf`,status:"success",duration:3e3})}n()}catch(ut){tt({title:"Error",description:ut.message,status:"error",duration:5e3})}finally{Re(!1)}},rt=()=>"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",tn=()=>h==="geoserver"?mc:Yr,kt=()=>_t?"Edit Connection":h==="geoserver"?"Add GeoServer":"Add PostgreSQL",it=()=>_t?"Update your connection settings":h==="geoserver"?"Connect to a GeoServer instance":"Add a PostgreSQL service to pg_service.conf";return u.jsxs(es,{isOpen:Ye,onClose:n,size:"lg",isCentered:!0,children:[u.jsx(ts,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(gs,{borderRadius:"xl",overflow:"hidden",children:[u.jsx(Nr.div,{animate:{background:rt()},transition:{duration:.3},style:{padding:"16px 24px"},children:u.jsxs(me,{spacing:3,children:[u.jsx(Nr.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:Mu.bouncy,children:u.jsx(de,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(Le,{as:tn(),boxSize:5,color:"white"})})},h),u.jsxs(de,{children:[u.jsx(Nr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:Mu.snappy,children:u.jsx(te,{color:"white",fontWeight:"600",fontSize:"lg",children:kt()})},`title-${h}`),u.jsx(Nr.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{...Mu.snappy,delay:.1},children:u.jsx(te,{color:"whiteAlpha.800",fontSize:"sm",children:it()})},`subtitle-${h}`)]})]})}),u.jsx(Is,{color:"white"}),u.jsx(ys,{py:6,children:u.jsxs(at,{spacing:4,children:[!_t&&u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Connection Type"}),u.jsxs(me,{spacing:3,children:[u.jsx(Nr.div,{style:{flex:1},whileHover:{scale:1.02},whileTap:{scale:.98},children:u.jsx(de,{as:"button",type:"button",onClick:()=>p("geoserver"),w:"100%",p:4,borderRadius:"lg",border:"2px solid",borderColor:h==="geoserver"?"blue.500":"gray.200",bg:h==="geoserver"?"blue.50":"white",transition:"all 0.2s",_hover:{borderColor:"blue.300"},children:u.jsxs(at,{spacing:1,children:[u.jsx(Le,{as:mc,boxSize:6,color:h==="geoserver"?"blue.500":"gray.400"}),u.jsx(te,{fontWeight:"500",color:h==="geoserver"?"blue.700":"gray.600",children:"GeoServer"}),u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Web map server"})]})})}),u.jsx(Nr.div,{style:{flex:1},whileHover:{scale:1.02},whileTap:{scale:.98},children:u.jsx(de,{as:"button",type:"button",onClick:()=>p("postgresql"),w:"100%",p:4,borderRadius:"lg",border:"2px solid",borderColor:h==="postgresql"?"blue.500":"gray.200",bg:h==="postgresql"?"blue.50":"white",transition:"all 0.2s",_hover:{borderColor:"blue.300"},children:u.jsxs(at,{spacing:1,children:[u.jsx(Le,{as:Yr,boxSize:6,color:h==="postgresql"?"blue.500":"gray.400"}),u.jsx(te,{fontWeight:"500",color:h==="postgresql"?"blue.700":"gray.600",children:"PostgreSQL"}),u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Database service"})]})})})]})]}),u.jsx(Hn,{}),u.jsxs(Sl,{mode:"wait",children:[h==="geoserver"&&u.jsx(Nr.div,{variants:v6,initial:"hidden",animate:"visible",exit:"exit",style:{width:"100%"},children:u.jsxs(at,{spacing:4,w:"100%",children:[u.jsx(Nr.div,{variants:pu,style:{width:"100%"},children:u.jsxs(It,{isRequired:!0,children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Name"}),u.jsx(Rn,{value:g,onChange:ut=>y(ut.target.value),placeholder:"My GeoServer",size:"lg",borderRadius:"lg"})]})}),u.jsx(Nr.div,{variants:pu,style:{width:"100%"},children:u.jsxs(It,{isRequired:!0,children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"URL"}),u.jsx(Rn,{value:b,onChange:ut=>S(ut.target.value),placeholder:"http://localhost:8080/geoserver",size:"lg",borderRadius:"lg"})]})}),u.jsx(Nr.div,{variants:pu,style:{width:"100%"},children:u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Username"}),u.jsx(Rn,{value:P,onChange:ut=>O(ut.target.value),placeholder:"admin",size:"lg",borderRadius:"lg"})]})}),u.jsx(Nr.div,{variants:pu,style:{width:"100%"},children:u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Password"}),u.jsxs(Ta,{size:"lg",children:[u.jsx(Rn,{type:F?"text":"password",value:D,onChange:ut=>z(ut.target.value),placeholder:_t?"(unchanged)":"password",borderRadius:"lg"}),u.jsx(S1,{h:"full",children:u.jsx(wn,{"aria-label":F?"Hide password":"Show password",icon:F?u.jsx(Nf,{}):u.jsx(Pi,{}),variant:"ghost",size:"md",onClick:()=>R(!F)})})]})]})})]})},"geoserver-form"),h==="postgresql"&&u.jsx(Nr.div,{variants:v6,initial:"hidden",animate:"visible",exit:"exit",style:{width:"100%"},children:u.jsxs(at,{spacing:4,w:"100%",children:[u.jsx(Nr.div,{variants:pu,style:{width:"100%"},children:u.jsxs(It,{isRequired:!0,children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Service Name"}),u.jsx(Rn,{value:N,onChange:ut=>Q(ut.target.value),placeholder:"my_database",size:"lg",borderRadius:"lg"}),u.jsx(te,{fontSize:"xs",color:"gray.500",mt:1,children:"This will be saved to ~/.pg_service.conf"})]})}),u.jsx(Nr.div,{variants:pu,style:{width:"100%"},children:u.jsxs(me,{spacing:4,children:[u.jsxs(It,{isRequired:!0,flex:2,children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Host"}),u.jsx(Rn,{value:q,onChange:ut=>X(ut.target.value),placeholder:"localhost",size:"lg",borderRadius:"lg"})]}),u.jsxs(It,{flex:1,children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Port"}),u.jsx(Rn,{value:K,onChange:ut=>ne(ut.target.value),placeholder:"5432",size:"lg",borderRadius:"lg"})]})]})}),u.jsx(Nr.div,{variants:pu,style:{width:"100%"},children:u.jsxs(It,{isRequired:!0,children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Database"}),u.jsx(Rn,{value:J,onChange:ut=>ae(ut.target.value),placeholder:"postgres",size:"lg",borderRadius:"lg"})]})}),u.jsx(Nr.div,{variants:pu,style:{width:"100%"},children:u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Username"}),u.jsx(Rn,{value:Ee,onChange:ut=>Ce(ut.target.value),placeholder:"postgres",size:"lg",borderRadius:"lg"})]})}),u.jsx(Nr.div,{variants:pu,style:{width:"100%"},children:u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Password"}),u.jsxs(Ta,{size:"lg",children:[u.jsx(Rn,{type:Ie?"text":"password",value:$e,onChange:ut=>We(ut.target.value),placeholder:"password",borderRadius:"lg"}),u.jsx(S1,{h:"full",children:u.jsx(wn,{"aria-label":Ie?"Hide password":"Show password",icon:Ie?u.jsx(Nf,{}):u.jsx(Pi,{}),variant:"ghost",size:"md",onClick:()=>Qe(!Ie)})})]})]})}),u.jsx(Nr.div,{variants:pu,style:{width:"100%"},children:u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"SSL Mode"}),u.jsxs(Vr,{value:Fe,onChange:ut=>we(ut.target.value),size:"lg",borderRadius:"lg",children:[u.jsx("option",{value:"disable",children:"disable"}),u.jsx("option",{value:"allow",children:"allow"}),u.jsx("option",{value:"prefer",children:"prefer"}),u.jsx("option",{value:"require",children:"require"}),u.jsx("option",{value:"verify-ca",children:"verify-ca"}),u.jsx("option",{value:"verify-full",children:"verify-full"})]})]})})]})},"postgresql-form")]}),u.jsx(Sl,{children:nt&&u.jsx(Nr.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},transition:Mu.snappy,style:{width:"100%"},children:u.jsxs(go,{status:nt.success?"success":"error",borderRadius:"lg",variant:"subtle",children:[u.jsx(yo,{}),u.jsx(te,{fontSize:"sm",children:nt.message})]})})})]})}),u.jsxs(Fo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:[u.jsx(vt,{variant:"outline",onClick:Ot,isLoading:Oe,loadingText:"Testing...",leftIcon:u.jsx(hR,{}),borderRadius:"lg",flexShrink:0,children:"Test Connection"}),u.jsx(vt,{variant:"ghost",onClick:n,borderRadius:"lg",children:"Cancel"}),u.jsx(Nr.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:u.jsx(vt,{colorScheme:h==="geoserver"?"blue":"purple",onClick:bt,isLoading:se,borderRadius:"lg",px:6,children:_t?"Save Changes":"Add Connection"})})]})]})]})}const b6={name:"",isolated:!1,default:!1,enabled:!0,wmtsEnabled:!1,wmsEnabled:!0,wcsEnabled:!0,wpsEnabled:!1,wfsEnabled:!0};function d2e(){var F,R;const t=St(N=>N.activeDialog),e=St(N=>N.dialogData),n=St(N=>N.closeDialog),r=Ln(N=>N.selectedNode),i=uo(N=>N.activeConnectionId),s=da(),o=ha(),[a,h]=L.useState(b6),[p,g]=L.useState(!1),y=t==="workspace",b=(e==null?void 0:e.mode)==="edit",S=((F=e==null?void 0:e.data)==null?void 0:F.connectionId)||(r==null?void 0:r.connectionId)||i,P=(R=e==null?void 0:e.data)==null?void 0:R.workspace,{data:O}=er({queryKey:["workspace",S,P],queryFn:()=>uH(S,P),enabled:y&&b&&!!S&&!!P});L.useEffect(()=>{y&&h(b&&O?O:b6)},[y,b,O]);const D=(N,Q)=>{h(q=>({...q,[N]:Q}))},z=async()=>{if(!S){o({title:"No connection selected",description:"Please select a connection first",status:"warning",duration:3e3});return}if(!a.name){o({title:"Name required",description:"Please enter a workspace name",status:"warning",duration:3e3});return}g(!0);try{b&&P?(await vSe(S,P,a),o({title:"Workspace updated",status:"success",duration:2e3})):(await xSe(S,a),o({title:"Workspace created",status:"success",duration:2e3})),s.invalidateQueries({queryKey:["workspaces",S]}),n()}catch(N){o({title:"Error",description:N.message,status:"error",duration:5e3})}finally{g(!1)}};return u.jsxs(es,{isOpen:y,onClose:n,size:"lg",isCentered:!0,children:[u.jsx(ts,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(gs,{borderRadius:"xl",overflow:"hidden",children:[u.jsx(de,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",px:6,py:4,children:u.jsxs(me,{spacing:3,children:[u.jsx(de,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(Le,{as:Uu,boxSize:5,color:"white"})}),u.jsxs(de,{children:[u.jsx(te,{color:"white",fontWeight:"600",fontSize:"lg",children:b?"Edit Workspace":"Create Workspace"}),u.jsx(te,{color:"whiteAlpha.800",fontSize:"sm",children:b?"Update workspace settings":"Create a new GeoServer workspace"})]})]})}),u.jsx(Is,{color:"white"}),u.jsx(ys,{py:6,children:u.jsxs(at,{spacing:5,align:"stretch",children:[u.jsxs(It,{isRequired:!0,children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Workspace Name"}),u.jsx(Rn,{value:a.name,onChange:N=>D("name",N.target.value),placeholder:"my_workspace",isDisabled:b,size:"lg",borderRadius:"lg"})]}),u.jsxs(de,{p:4,bg:"gray.50",borderRadius:"lg",children:[u.jsx(lr,{size:"sm",mb:3,color:"gray.700",children:"Workspace Settings"}),u.jsxs(Gn,{columns:3,spacing:4,children:[u.jsxs(It,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[u.jsx(Mt,{mb:0,fontWeight:"normal",children:"Isolated"}),u.jsx(ja,{isChecked:a.isolated,onChange:N=>D("isolated",N.target.checked),colorScheme:"kartoza"})]}),u.jsxs(It,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[u.jsx(Mt,{mb:0,fontWeight:"normal",children:"Default"}),u.jsx(ja,{isChecked:a.default,onChange:N=>D("default",N.target.checked),colorScheme:"kartoza"})]}),u.jsxs(It,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[u.jsx(Mt,{mb:0,fontWeight:"normal",children:"Enabled"}),u.jsx(ja,{isChecked:a.enabled,onChange:N=>D("enabled",N.target.checked),colorScheme:"kartoza"})]})]})]}),u.jsxs(de,{p:4,bg:"gray.50",borderRadius:"lg",children:[u.jsx(lr,{size:"sm",mb:3,color:"gray.700",children:"OGC Services"}),u.jsxs(Gn,{columns:5,spacing:4,children:[u.jsxs(It,{display:"flex",alignItems:"center",flexDirection:"column",gap:1,children:[u.jsx(Mt,{mb:0,fontSize:"sm",fontWeight:"500",color:"gray.600",children:"WMS"}),u.jsx(ja,{isChecked:a.wmsEnabled,onChange:N=>D("wmsEnabled",N.target.checked),colorScheme:"kartoza",size:"md"})]}),u.jsxs(It,{display:"flex",alignItems:"center",flexDirection:"column",gap:1,children:[u.jsx(Mt,{mb:0,fontSize:"sm",fontWeight:"500",color:"gray.600",children:"WFS"}),u.jsx(ja,{isChecked:a.wfsEnabled,onChange:N=>D("wfsEnabled",N.target.checked),colorScheme:"kartoza",size:"md"})]}),u.jsxs(It,{display:"flex",alignItems:"center",flexDirection:"column",gap:1,children:[u.jsx(Mt,{mb:0,fontSize:"sm",fontWeight:"500",color:"gray.600",children:"WCS"}),u.jsx(ja,{isChecked:a.wcsEnabled,onChange:N=>D("wcsEnabled",N.target.checked),colorScheme:"kartoza",size:"md"})]}),u.jsxs(It,{display:"flex",alignItems:"center",flexDirection:"column",gap:1,children:[u.jsx(Mt,{mb:0,fontSize:"sm",fontWeight:"500",color:"gray.600",children:"WMTS"}),u.jsx(ja,{isChecked:a.wmtsEnabled,onChange:N=>D("wmtsEnabled",N.target.checked),colorScheme:"kartoza",size:"md"})]}),u.jsxs(It,{display:"flex",alignItems:"center",flexDirection:"column",gap:1,children:[u.jsx(Mt,{mb:0,fontSize:"sm",fontWeight:"500",color:"gray.600",children:"WPS"}),u.jsx(ja,{isChecked:a.wpsEnabled,onChange:N=>D("wpsEnabled",N.target.checked),colorScheme:"kartoza",size:"md"})]})]})]})]})}),u.jsxs(Fo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:[u.jsx(vt,{variant:"ghost",onClick:n,borderRadius:"lg",children:"Cancel"}),u.jsx(vt,{colorScheme:"kartoza",onClick:z,isLoading:p,borderRadius:"lg",px:6,children:b?"Save Changes":"Create Workspace"})]})]})]})}function f2e(){const t=St(S=>S.activeDialog),e=St(S=>S.dialogData),n=St(S=>S.closeDialog),r=uo(S=>S.removeConnection),i=da(),s=ha(),[o,a]=L.useState(!1),h=t==="confirm",p=(e==null?void 0:e.title)||"Confirm",g=(e==null?void 0:e.message)||"Are you sure?",y=e==null?void 0:e.data,b=async()=>{a(!0);try{if(y!=null&&y.pgServiceName)await ike(y.pgServiceName),i.invalidateQueries({queryKey:["pgservices"]}),s({title:"PostgreSQL service deleted",status:"success",duration:2e3});else if(y!=null&&y.connectionId&&!(y!=null&&y.workspace))await r(y.connectionId),i.invalidateQueries({queryKey:["dashboard"]}),s({title:"Connection deleted",status:"success",duration:2e3});else if(y!=null&&y.connectionId&&(y!=null&&y.workspace)&&!(y!=null&&y.name))await bSe(y.connectionId,y.workspace,!0),i.invalidateQueries({queryKey:["workspaces",y.connectionId]}),s({title:"Workspace deleted",status:"success",duration:2e3});else if(y!=null&&y.connectionId&&(y!=null&&y.workspace)&&(y!=null&&y.name)&&(y!=null&&y.type)){const S=y.connectionId,P=y.workspace,O=y.name,D=y.type;switch(D){case"datastore":await _Se(S,P,O,!0),i.invalidateQueries({queryKey:["datastores",S,P]});break;case"coveragestore":await wSe(S,P,O,!0),i.invalidateQueries({queryKey:["coveragestores",S,P]});break;case"layer":await SSe(S,P,O),i.invalidateQueries({queryKey:["layers",S,P]});break;case"style":await jSe(S,P,O,!0),i.invalidateQueries({queryKey:["styles",S,P]});break;case"layergroup":await ISe(S,P,O),i.invalidateQueries({queryKey:["layergroups",S,P]});break}s({title:`${D} deleted`,status:"success",duration:2e3})}e!=null&&e.onConfirm&&await e.onConfirm(),n()}catch(S){s({title:"Error",description:S.message,status:"error",duration:5e3})}finally{a(!1)}};return u.jsxs(es,{isOpen:h,onClose:n,size:"md",isCentered:!0,children:[u.jsx(ts,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(gs,{borderRadius:"xl",overflow:"hidden",children:[u.jsx(de,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",px:6,py:4,children:u.jsxs(me,{spacing:3,children:[u.jsx(de,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(Le,{as:YQ,boxSize:5,color:"white"})}),u.jsxs(de,{children:[u.jsx(te,{color:"white",fontWeight:"600",fontSize:"lg",children:p}),u.jsx(te,{color:"whiteAlpha.800",fontSize:"sm",children:"This action cannot be undone"})]})]})}),u.jsx(Is,{color:"white"}),u.jsx(ys,{py:6,children:u.jsx(te,{color:"gray.700",fontSize:"md",children:g})}),u.jsxs(Fo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:[u.jsx(vt,{variant:"ghost",onClick:n,borderRadius:"lg",children:"Cancel"}),u.jsx(vt,{colorScheme:"red",onClick:b,isLoading:o,borderRadius:"lg",px:6,children:"Delete"})]})]})]})}function p2e(){const t=St(Ne=>Ne.activeDialog),e=St(Ne=>Ne.closeDialog),n=Ln(Ne=>Ne.selectedNode),r=uo(Ne=>Ne.activeConnectionId),i=da(),s=ha(),[o,a]=L.useState([]),[h,p]=L.useState(!1),[g,y]=L.useState(!1),[b,S]=L.useState([]),[P,O]=L.useState(!1),[D,z]=L.useState(!1),[F,R]=L.useState(null),N=L.useRef(null),Q=Et("gray.50","gray.700"),q=Et("gray.300","gray.600"),X=t==="upload",K=(n==null?void 0:n.connectionId)||r,ne=n==null?void 0:n.workspace;L.useEffect(()=>{X&&(a([]),y(!1),S([]),R(null))},[X]);const J=L.useCallback(Ne=>{Ne.preventDefault();const tt=Array.from(Ne.dataTransfer.files);Ee(tt)},[]),ae=Ne=>{if(Ne.target.files){const tt=Array.from(Ne.target.files);Ee(tt)}},Ee=Ne=>{const tt=[".shp",".zip",".gpkg",".tif",".tiff",".sld",".css"],Ye=Ne.filter(_t=>tt.some(At=>_t.name.toLowerCase().endsWith(At)));Ye.length<Ne.length&&s({title:"Some files skipped",description:"Only shapefiles, GeoPackages, GeoTIFFs, and styles are supported",status:"warning",duration:3e3}),a(_t=>[..._t,...Ye.map(At=>({file:At,progress:0,status:"pending"}))]),y(!1),S([])},Ce=Ne=>{a(tt=>tt.filter((Ye,_t)=>_t!==Ne))},$e=async()=>{if(!K||!ne){s({title:"No workspace selected",description:"Please select a workspace in the tree first",status:"warning",duration:3e3});return}if(o.length===0){s({title:"No files selected",description:"Please select files to upload",status:"warning",duration:3e3});return}p(!0);let Ne=null;for(let Ye=0;Ye<o.length;Ye++)if(o[Ye].status==="pending"){a(_t=>_t.map((At,Ot)=>Ot===Ye?{...At,status:"uploading"}:At));try{const _t=await LSe(K,ne,o[Ye].file,At=>{a(Ot=>Ot.map((bt,rt)=>rt===Ye?{...bt,progress:At}:bt))});a(At=>At.map((Ot,bt)=>bt===Ye?{...Ot,status:"success",progress:100,storeName:_t.storeName,storeType:_t.storeType}:Ot)),o[Ye].file.name.toLowerCase().endsWith(".gpkg")&&_t.storeName&&(Ne={name:_t.storeName,type:_t.storeType||"datastore"})}catch(_t){a(At=>At.map((Ot,bt)=>bt===Ye?{...Ot,status:"error",error:_t.message}:Ot))}}p(!1),y(!0),i.invalidateQueries({queryKey:["datastores",K,ne]}),i.invalidateQueries({queryKey:["coveragestores",K,ne]}),i.invalidateQueries({queryKey:["styles",K,ne]}),i.invalidateQueries({queryKey:["layers",K,ne]});const tt=o.filter(Ye=>Ye.status==="success").length;tt>0&&s({title:"Upload complete",description:`${tt} file(s) uploaded successfully`,status:"success",duration:3e3}),Ne&&Ne.type==="datastore"&&(R(Ne),await We(Ne.name))},We=async Ne=>{if(!(!K||!ne)){O(!0);try{const tt=await dH(K,ne,Ne);tt.length>0&&S(tt.map(Ye=>({name:Ye,selected:!0})))}catch(tt){console.error("Failed to load available layers:",tt)}finally{O(!1)}}},Fe=Ne=>{S(tt=>tt.map((Ye,_t)=>_t===Ne?{...Ye,selected:!Ye.selected}:Ye))},we=()=>{S(Ne=>Ne.map(tt=>({...tt,selected:!0})))},Ie=()=>{S(Ne=>Ne.map(tt=>({...tt,selected:!1})))},Qe=async()=>{if(!K||!ne||!F)return;const Ne=b.filter(tt=>tt.selected).map(tt=>tt.name);if(Ne.length===0){s({title:"No layers selected",description:"Please select at least one layer to publish",status:"warning",duration:3e3});return}z(!0);try{const tt=await fH(K,ne,F.name,Ne);tt.published.length>0&&(s({title:"Layers published",description:`${tt.published.length} layer(s) published successfully`,status:"success",duration:3e3}),S(Ye=>Ye.filter(_t=>!tt.published.includes(_t.name))),i.invalidateQueries({queryKey:["layers",K,ne]})),tt.errors.length>0&&s({title:"Some layers failed",description:tt.errors.join(", "),status:"error",duration:5e3})}catch(tt){s({title:"Publish failed",description:tt.message,status:"error",duration:5e3})}finally{z(!1)}},se=()=>{a([]),y(!1),S([]),R(null),e()},Re=Ne=>{switch(Ne){case"success":return hR;case"error":return Wf;default:return tH}},Oe=Ne=>{switch(Ne){case"success":return"green.500";case"error":return"red.500";default:return"gray.500"}},oe=o.some(Ne=>Ne.status==="pending"),nt=b.filter(Ne=>Ne.selected).length;return u.jsxs(es,{isOpen:X,onClose:se,size:"lg",isCentered:!0,children:[u.jsx(ts,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(gs,{borderRadius:"xl",overflow:"hidden",maxH:"85vh",children:[u.jsx(de,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",px:6,py:4,children:u.jsxs(me,{spacing:3,children:[u.jsx(de,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(Le,{as:Ib,boxSize:5,color:"white"})}),u.jsxs(de,{flex:"1",children:[u.jsx(te,{color:"white",fontWeight:"600",fontSize:"lg",children:"Upload Files"}),u.jsxs(me,{spacing:2,children:[u.jsx(te,{color:"whiteAlpha.800",fontSize:"sm",children:"Target:"}),ne?u.jsx(Lt,{bg:"whiteAlpha.200",color:"white",fontSize:"xs",children:ne}):u.jsx(te,{color:"whiteAlpha.600",fontSize:"sm",fontStyle:"italic",children:"No workspace selected"})]})]})]})}),u.jsx(Is,{color:"white"}),u.jsx(ys,{py:6,overflowY:"auto",children:u.jsxs(at,{spacing:4,children:[!g&&u.jsxs(de,{w:"100%",p:8,bg:Q,border:"2px dashed",borderColor:q,borderRadius:"xl",textAlign:"center",cursor:"pointer",onClick:()=>{var Ne;return(Ne=N.current)==null?void 0:Ne.click()},onDrop:J,onDragOver:Ne=>Ne.preventDefault(),_hover:{borderColor:"kartoza.500",bg:"kartoza.50"},transition:"all 0.2s",children:[u.jsxs(at,{spacing:3,children:[u.jsx(de,{bg:"kartoza.50",p:4,borderRadius:"full",children:u.jsx(Le,{as:Ib,boxSize:10,color:"kartoza.500"})}),u.jsxs(at,{spacing:1,children:[u.jsx(te,{fontWeight:"600",color:"gray.700",children:"Drop files here or click to browse"}),u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Shapefile (.zip), GeoPackage (.gpkg), GeoTIFF (.tif), SLD, CSS"})]})]}),u.jsx("input",{ref:N,type:"file",multiple:!0,accept:".zip,.shp,.gpkg,.tif,.tiff,.sld,.css",style:{display:"none"},onChange:ae})]}),o.length>0&&u.jsx(x_,{spacing:2,w:"100%",children:o.map((Ne,tt)=>u.jsx(G5,{p:3,bg:Q,borderRadius:"lg",border:"1px solid",borderColor:Ne.status==="success"?"green.200":Ne.status==="error"?"red.200":"gray.200",children:u.jsxs(at,{align:"stretch",spacing:2,children:[u.jsxs(de,{display:"flex",alignItems:"center",gap:2,children:[u.jsx(X5,{as:Re(Ne.status),color:Oe(Ne.status),boxSize:5}),u.jsx(te,{flex:"1",fontSize:"sm",noOfLines:1,fontWeight:"500",children:Ne.file.name}),Ne.status==="pending"&&u.jsx(vt,{size:"xs",variant:"ghost",colorScheme:"red",onClick:()=>Ce(tt),borderRadius:"md",children:"Remove"}),Ne.status==="success"&&u.jsx(Lt,{colorScheme:"green",borderRadius:"md",children:"Complete"})]}),Ne.status==="uploading"&&u.jsx(tp,{value:Ne.progress,size:"sm",colorScheme:"kartoza",borderRadius:"full"}),Ne.status==="error"&&u.jsx(te,{fontSize:"xs",color:"red.500",children:Ne.error})]})},tt))}),g&&b.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Hn,{}),u.jsxs(de,{w:"100%",children:[u.jsxs(me,{justify:"space-between",mb:3,children:[u.jsxs(me,{children:[u.jsx(Le,{as:mi,color:"kartoza.500"}),u.jsxs(te,{fontWeight:"600",children:["Available Layers in ",F==null?void 0:F.name]})]}),u.jsxs(me,{spacing:2,children:[u.jsx(vt,{size:"xs",variant:"ghost",onClick:we,children:"Select All"}),u.jsx(vt,{size:"xs",variant:"ghost",onClick:Ie,children:"Deselect All"})]})]}),u.jsx(te,{fontSize:"sm",color:"gray.500",mb:3,children:"The GeoPackage contains multiple layers. Select which layers to publish:"}),u.jsx(at,{align:"stretch",spacing:2,maxH:"200px",overflowY:"auto",children:b.map((Ne,tt)=>u.jsx(de,{p:2,bg:Q,borderRadius:"md",border:"1px solid",borderColor:Ne.selected?"kartoza.200":"gray.200",children:u.jsx(dl,{isChecked:Ne.selected,onChange:()=>Fe(tt),colorScheme:"kartoza",children:u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:Yr,color:"gray.500",boxSize:4}),u.jsx(te,{fontSize:"sm",children:Ne.name})]})})},Ne.name))})]})]}),P&&u.jsxs(me,{spacing:2,color:"gray.500",children:[u.jsx(Cr,{size:"sm"}),u.jsx(te,{fontSize:"sm",children:"Checking for available layers..."})]})]})}),u.jsxs(Fo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:[u.jsx(vt,{variant:"ghost",onClick:se,borderRadius:"lg",children:g?"Close":"Cancel"}),g&&b.length>0&&u.jsxs(vt,{colorScheme:"green",onClick:Qe,isLoading:D,loadingText:"Publishing...",isDisabled:nt===0,leftIcon:u.jsx(mi,{}),borderRadius:"lg",px:6,children:["Publish ",nt>0&&`(${nt})`]}),(!g||oe)&&u.jsxs(vt,{colorScheme:"kartoza",onClick:$e,isLoading:h,loadingText:"Uploading...",isDisabled:o.length===0||!ne||!oe,leftIcon:u.jsx(Ib,{}),borderRadius:"lg",px:6,children:["Upload ",o.filter(Ne=>Ne.status==="pending").length>0&&`(${o.filter(Ne=>Ne.status==="pending").length})`]})]})]})]})}function m2e(){var ne,J;const t=St(ae=>ae.activeDialog),e=St(ae=>ae.dialogData),n=St(ae=>ae.closeDialog),r=Ln(ae=>ae.selectedNode),[i,s]=L.useState(""),[o,a]=L.useState(""),[h,p]=L.useState("SINGLE"),[g,y]=L.useState([]),[b,S]=L.useState(!1),P=ha(),O=da(),D=t==="layergroup",z=(e==null?void 0:e.mode)==="edit",F=((ne=e==null?void 0:e.data)==null?void 0:ne.connectionId)||(r==null?void 0:r.connectionId)||"",R=((J=e==null?void 0:e.data)==null?void 0:J.workspace)||(r==null?void 0:r.workspace)||"",{data:N,isLoading:Q}=er({queryKey:["layers",F,R],queryFn:()=>A_(F,R),enabled:D&&!!F&&!!R});L.useEffect(()=>{D&&(z&&(e!=null&&e.data)?(s(e.data.name||""),a(e.data.title||""),p(e.data.mode||"SINGLE"),y(e.data.layers||[])):(s(""),a(""),p("SINGLE"),y([])))},[D,z,e]);const q=async()=>{if(!i.trim()){P({title:"Name is required",status:"error",duration:3e3});return}if(g.length===0){P({title:"Select at least one layer",status:"error",duration:3e3});return}S(!0);try{const ae=g.map(Ee=>`${R}:${Ee}`);z?(await zSe(F,R,i,{title:o.trim()||void 0,mode:h,layers:ae,enabled:!0}),P({title:`Layer group "${i}" updated successfully`,status:"success",duration:3e3})):(await ESe(F,R,{name:i.trim(),title:o.trim()||void 0,mode:h,layers:ae}),P({title:`Layer group "${i}" created successfully`,status:"success",duration:3e3})),O.invalidateQueries({queryKey:["layergroups",F,R]}),n()}catch(ae){P({title:z?"Failed to update layer group":"Failed to create layer group",description:ae instanceof Error?ae.message:"Unknown error",status:"error",duration:5e3})}finally{S(!1)}},X=ae=>{y(Ee=>Ee.includes(ae)?Ee.filter(Ce=>Ce!==ae):[...Ee,ae])},K=()=>{N&&(g.length===N.length?y([]):y(N.map(ae=>ae.name)))};return D?u.jsxs(es,{isOpen:D,onClose:n,size:"lg",isCentered:!0,children:[u.jsx(ts,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(gs,{borderRadius:"xl",overflow:"hidden",maxH:"85vh",children:[u.jsx(de,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",px:6,py:4,children:u.jsxs(me,{spacing:3,children:[u.jsx(de,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(Le,{as:Vf,boxSize:5,color:"white"})}),u.jsxs(de,{children:[u.jsx(te,{color:"white",fontWeight:"600",fontSize:"lg",children:z?"Edit Layer Group":"Create Layer Group"}),u.jsx(te,{color:"whiteAlpha.800",fontSize:"sm",children:R?`Workspace: ${R}`:"Select layers to group together"})]})]})}),u.jsx(Is,{color:"white"}),u.jsx(ys,{py:6,overflowY:"auto",children:u.jsxs(at,{spacing:5,align:"stretch",children:[u.jsxs(It,{isRequired:!0,children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Group Name"}),u.jsx(Rn,{value:i,onChange:ae=>s(ae.target.value),placeholder:"my_layer_group",size:"lg",borderRadius:"lg",isDisabled:z})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Title (Optional)"}),u.jsx(Rn,{value:o,onChange:ae=>a(ae.target.value),placeholder:"My Layer Group",size:"lg",borderRadius:"lg"})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Mode"}),u.jsxs(Vr,{value:h,onChange:ae=>p(ae.target.value),size:"lg",borderRadius:"lg",children:[u.jsx("option",{value:"SINGLE",children:"Single (merged into one layer)"}),u.jsx("option",{value:"NAMED",children:"Named (layers visible separately)"}),u.jsx("option",{value:"CONTAINER",children:"Container (organizational only)"}),u.jsx("option",{value:"EO",children:"EO (Earth Observation)"})]})]}),u.jsxs(It,{isRequired:!0,children:[u.jsxs(me,{justify:"space-between",mb:2,children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",mb:0,children:"Select Layers"}),u.jsxs(me,{children:[u.jsxs(Lt,{colorScheme:"kartoza",borderRadius:"md",px:2,children:[g.length," selected"]}),u.jsx(vt,{size:"xs",variant:"ghost",colorScheme:"kartoza",onClick:K,children:N&&g.length===N.length?"Deselect All":"Select All"})]})]}),u.jsx(de,{border:"1px solid",borderColor:"gray.200",borderRadius:"lg",maxH:"250px",overflowY:"auto",p:3,children:Q?u.jsxs(me,{justify:"center",py:6,children:[u.jsx(Cr,{size:"sm",color:"kartoza.500"}),u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Loading layers..."})]}):N&&N.length>0?u.jsx(S_,{spacing:2,children:N.map(ae=>u.jsx(de,{p:2,borderRadius:"md",bg:g.includes(ae.name)?"kartoza.50":"transparent",_hover:{bg:"gray.50"},transition:"background 0.15s",children:u.jsx(dl,{isChecked:g.includes(ae.name),onChange:()=>X(ae.name),colorScheme:"kartoza",children:u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:mi,color:"blue.500"}),u.jsx(te,{fontSize:"sm",fontWeight:g.includes(ae.name)?"500":"normal",children:ae.name}),ae.storeType&&u.jsx(Lt,{size:"sm",colorScheme:ae.storeType==="coverage"?"purple":"green",fontSize:"xs",children:ae.storeType==="coverage"?"Raster":"Vector"})]})})},ae.name))}):u.jsxs(go,{status:"info",borderRadius:"md",children:[u.jsx(yo,{}),u.jsx(te,{fontSize:"sm",children:"No layers available in this workspace"})]})})]})]})}),u.jsxs(Fo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:[u.jsx(vt,{variant:"ghost",onClick:n,borderRadius:"lg",children:"Cancel"}),u.jsx(vt,{colorScheme:"kartoza",onClick:q,isLoading:b,isDisabled:!i.trim()||g.length===0,borderRadius:"lg",px:6,children:z?"Save Changes":"Create Layer Group"})]})]})]}):null}function g2e(){var se,Re,Oe,oe,nt,Ne,tt;const t=St(Ye=>Ye.activeDialog),e=St(Ye=>Ye.dialogData),n=St(Ye=>Ye.closeDialog),r=Ln(Ye=>Ye.selectedNode),[i,s]=L.useState(0),[o,a]=L.useState(""),[h,p]=L.useState("image/png"),[g,y]=L.useState(0),[b,S]=L.useState(10),[P,O]=L.useState(2),[D,z]=L.useState("seed"),[F,R]=L.useState(!1),N=ha(),Q=da(),q=t==="info"&&(e==null?void 0:e.title)==="Tile Cache",X=((se=e==null?void 0:e.data)==null?void 0:se.layerName)||"",K=((Re=e==null?void 0:e.data)==null?void 0:Re.connectionId)||(r==null?void 0:r.connectionId)||"",ne=((Oe=e==null?void 0:e.data)==null?void 0:Oe.workspace)||(r==null?void 0:r.workspace)||"",J=ne?`${ne}:${X}`:X,{data:ae,isLoading:Ee}=er({queryKey:["gwc-layer",K,J],queryFn:()=>FSe(K,J),enabled:q&&!!K&&!!J}),{data:Ce,refetch:$e}=er({queryKey:["gwc-seed-status",K,J],queryFn:()=>BSe(K,J),enabled:q&&!!K&&!!J,refetchInterval:i===1?2e3:!1});L.useEffect(()=>{var Ye,_t;(Ye=ae==null?void 0:ae.gridSubsets)!=null&&Ye[0]&&!o&&a(ae.gridSubsets[0]),(_t=ae==null?void 0:ae.mimeFormats)!=null&&_t[0]&&h==="image/png"&&!ae.mimeFormats.includes("image/png")&&ae.mimeFormats[0]&&p(ae.mimeFormats[0])},[ae,o,h]);const We=async()=>{if(!o||!h){N({title:"Select grid set and format",status:"error",duration:3e3});return}R(!0);try{await $Se(K,J,{gridSetId:o,format:h,zoomStart:g,zoomStop:b,type:D,threadCount:P}),N({title:`${D==="seed"?"Seeding":"Reseeding"} started`,description:`Layer: ${X}`,status:"success",duration:3e3}),s(1),$e()}catch(Ye){N({title:"Failed to start seeding",description:Ye instanceof Error?Ye.message:"Unknown error",status:"error",duration:5e3})}finally{R(!1)}},Fe=async()=>{R(!0);try{await VSe(K,J,{gridSetId:o||void 0,format:h||void 0,zoomStart:g,zoomStop:b}),N({title:"Cache truncated",description:`Layer: ${X}`,status:"success",duration:3e3}),Q.invalidateQueries({queryKey:["gwc-layer",K,J]})}catch(Ye){N({title:"Failed to truncate cache",description:Ye instanceof Error?Ye.message:"Unknown error",status:"error",duration:5e3})}finally{R(!1)}},we=async()=>{try{await NSe(K,J),N({title:"Seed tasks terminated",status:"success",duration:3e3}),$e()}catch(Ye){N({title:"Failed to terminate tasks",description:Ye instanceof Error?Ye.message:"Unknown error",status:"error",duration:5e3})}},Ie=Ye=>Ye<0?"Unknown":Ye<60?`${Ye}s`:Ye<3600?`${Math.floor(Ye/60)}m ${Ye%60}s`:`${Math.floor(Ye/3600)}h ${Math.floor(Ye%3600/60)}m`,Qe=Ye=>{switch(Ye){case"Running":return"blue";case"Pending":return"yellow";case"Done":return"green";case"Aborted":return"red";default:return"gray"}};return q?u.jsxs(es,{isOpen:q,onClose:n,size:"xl",isCentered:!0,children:[u.jsx(ts,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(gs,{borderRadius:"xl",overflow:"hidden",maxH:"85vh",children:[u.jsx(de,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",px:6,py:4,children:u.jsxs(me,{spacing:3,children:[u.jsx(de,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(Le,{as:Yr,boxSize:5,color:"white"})}),u.jsxs(de,{children:[u.jsx(te,{color:"white",fontWeight:"600",fontSize:"lg",children:"Tile Cache Management"}),u.jsx(te,{color:"whiteAlpha.800",fontSize:"sm",children:J})]})]})}),u.jsx(Is,{color:"white"}),u.jsx(ys,{py:4,overflowY:"auto",children:Ee?u.jsxs(me,{justify:"center",py:6,children:[u.jsx(Cr,{size:"sm",color:"kartoza.500"}),u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Loading cache info..."})]}):ae?u.jsxs(cx,{index:i,onChange:s,colorScheme:"kartoza",children:[u.jsxs(ux,{children:[u.jsx(fo,{children:"Seed / Truncate"}),u.jsxs(fo,{children:["Progress",Ce&&Ce.length>0&&u.jsx(Lt,{ml:2,colorScheme:"blue",borderRadius:"full",children:Ce.length})]}),u.jsx(fo,{children:"Info"})]}),u.jsxs(T_,{children:[u.jsx(Ra,{px:0,children:u.jsxs(at,{spacing:4,align:"stretch",children:[u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Grid Set"}),u.jsx(Vr,{value:o,onChange:Ye=>a(Ye.target.value),borderRadius:"lg",children:(oe=ae.gridSubsets)==null?void 0:oe.map(Ye=>u.jsx("option",{value:Ye,children:Ye},Ye))})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Format"}),u.jsx(Vr,{value:h,onChange:Ye=>p(Ye.target.value),borderRadius:"lg",children:(nt=ae.mimeFormats)==null?void 0:nt.map(Ye=>u.jsx("option",{value:Ye,children:Ye},Ye))})]}),u.jsxs(me,{spacing:4,children:[u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Zoom Start"}),u.jsxs(km,{value:g,onChange:(Ye,_t)=>y(_t||0),min:0,max:b,children:[u.jsx(Tm,{borderRadius:"lg"}),u.jsxs(Cm,{children:[u.jsx(Pm,{}),u.jsx(jm,{})]})]})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Zoom Stop"}),u.jsxs(km,{value:b,onChange:(Ye,_t)=>S(_t||10),min:g,max:25,children:[u.jsx(Tm,{borderRadius:"lg"}),u.jsxs(Cm,{children:[u.jsx(Pm,{}),u.jsx(jm,{})]})]})]})]}),u.jsxs(me,{spacing:4,children:[u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Operation"}),u.jsxs(Vr,{value:D,onChange:Ye=>z(Ye.target.value),borderRadius:"lg",children:[u.jsx("option",{value:"seed",children:"Seed (generate new tiles)"}),u.jsx("option",{value:"reseed",children:"Reseed (regenerate all tiles)"})]})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",color:"gray.700",children:"Threads"}),u.jsxs(km,{value:P,onChange:(Ye,_t)=>O(_t||1),min:1,max:16,children:[u.jsx(Tm,{borderRadius:"lg"}),u.jsxs(Cm,{children:[u.jsx(Pm,{}),u.jsx(jm,{})]})]})]})]}),u.jsxs(me,{spacing:3,pt:4,children:[u.jsx(vt,{leftIcon:u.jsx(Le,{as:pR}),colorScheme:"kartoza",onClick:We,isLoading:F,flex:1,borderRadius:"lg",children:D==="seed"?"Seed Tiles":"Reseed Tiles"}),u.jsx(vt,{leftIcon:u.jsx(Le,{as:jf}),colorScheme:"red",variant:"outline",onClick:Fe,isLoading:F,flex:1,borderRadius:"lg",children:"Truncate Cache"})]})]})}),u.jsx(Ra,{px:0,children:u.jsxs(at,{spacing:4,align:"stretch",children:[u.jsxs(me,{justify:"space-between",children:[u.jsx(te,{fontWeight:"500",color:"gray.700",children:"Running Tasks"}),u.jsxs(me,{children:[u.jsx(kn,{label:"Refresh status",children:u.jsx(wn,{"aria-label":"Refresh",icon:u.jsx(Le,{as:Xc}),size:"sm",variant:"ghost",onClick:()=>$e()})}),Ce&&Ce.length>0&&u.jsx(vt,{leftIcon:u.jsx(Le,{as:Fwe}),size:"sm",colorScheme:"red",variant:"outline",onClick:we,children:"Stop All"})]})]}),!Ce||Ce.length===0?u.jsxs(go,{status:"info",borderRadius:"md",children:[u.jsx(yo,{}),u.jsx(te,{fontSize:"sm",children:"No active seeding tasks"})]}):u.jsx(de,{border:"1px solid",borderColor:"gray.200",borderRadius:"lg",overflow:"hidden",children:u.jsxs(rg,{size:"sm",children:[u.jsx(C_,{bg:"gray.50",children:u.jsxs(za,{children:[u.jsx(Dc,{children:"Status"}),u.jsx(Dc,{children:"Progress"}),u.jsx(Dc,{children:"Tiles"}),u.jsx(Dc,{children:"ETA"})]})}),u.jsx(lx,{children:Ce.map(Ye=>u.jsxs(za,{children:[u.jsx(Qi,{children:u.jsx(Lt,{colorScheme:Qe(Ye.status),children:Ye.status})}),u.jsx(Qi,{children:u.jsxs(at,{spacing:1,align:"stretch",children:[u.jsx(tp,{value:Ye.progress,size:"sm",colorScheme:"kartoza",borderRadius:"full"}),u.jsxs(te,{fontSize:"xs",color:"gray.500",children:[Ye.progress.toFixed(1),"%"]})]})}),u.jsx(Qi,{children:u.jsxs(te,{fontSize:"sm",children:[Ye.tilesDone.toLocaleString()," / ",Ye.tilesTotal.toLocaleString()]})}),u.jsx(Qi,{children:u.jsx(te,{fontSize:"sm",children:Ie(Ye.timeRemaining)})})]},Ye.id))})]})})]})}),u.jsx(Ra,{px:0,children:u.jsxs(at,{spacing:3,align:"stretch",children:[u.jsxs(de,{p:4,bg:"gray.50",borderRadius:"lg",children:[u.jsx(te,{fontWeight:"500",mb:2,children:"Cache Status"}),u.jsx(me,{children:u.jsx(Lt,{colorScheme:ae.enabled?"green":"red",children:ae.enabled?"Enabled":"Disabled"})})]}),u.jsxs(de,{p:4,bg:"gray.50",borderRadius:"lg",children:[u.jsx(te,{fontWeight:"500",mb:2,children:"Available Grid Sets"}),u.jsx(me,{flexWrap:"wrap",gap:2,children:(Ne=ae.gridSubsets)==null?void 0:Ne.map(Ye=>u.jsx(Lt,{colorScheme:"blue",variant:"subtle",children:Ye},Ye))})]}),u.jsxs(de,{p:4,bg:"gray.50",borderRadius:"lg",children:[u.jsx(te,{fontWeight:"500",mb:2,children:"Supported Formats"}),u.jsx(me,{flexWrap:"wrap",gap:2,children:(tt=ae.mimeFormats)==null?void 0:tt.map(Ye=>u.jsx(Lt,{colorScheme:"purple",variant:"subtle",children:Ye},Ye))})]})]})})]})]}):u.jsxs(go,{status:"warning",borderRadius:"md",children:[u.jsx(yo,{}),u.jsx(te,{fontSize:"sm",children:"No cache configuration found for this layer"})]})}),u.jsx(Fo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:u.jsx(vt,{variant:"ghost",onClick:n,borderRadius:"lg",children:"Close"})})]})]}):null}function y2e(){var _t,At,Ot,bt;const t=St(rt=>rt.activeDialog),e=St(rt=>rt.dialogData),n=St(rt=>rt.closeDialog),r=St(rt=>rt.openDialog),i=Ln(rt=>rt.selectedNode),s=da(),o=ha(),[a,h]=L.useState({enabled:!0,advertised:!0,queryable:!0}),[p,g]=L.useState(""),[y,b]=L.useState([]),[S,P]=L.useState({type:"text/html",metadataType:"TC211",content:""}),[O,D]=L.useState(""),[z,F]=L.useState([]),[R,N]=L.useState(!1),Q=t==="layer",q=((_t=e==null?void 0:e.data)==null?void 0:_t.connectionId)||(i==null?void 0:i.connectionId)||"",X=((At=e==null?void 0:e.data)==null?void 0:At.workspace)||(i==null?void 0:i.workspace)||"",K=((Ot=e==null?void 0:e.data)==null?void 0:Ot.layerName)||(i==null?void 0:i.name)||"",{data:ne,isLoading:J}=er({queryKey:["layerMetadata",q,X,K],queryFn:()=>kSe(q,X,K),enabled:Q&&!!q&&!!X&&!!K}),{data:ae}=er({queryKey:["styles",q,X],queryFn:()=>xR(q,X),enabled:Q&&!!q&&!!X}),{data:Ee,isLoading:Ce}=er({queryKey:["layerStyles",q,X,K],queryFn:()=>gH(q,X,K),enabled:Q&&!!q&&!!X&&!!K});L.useEffect(()=>{ne&&(h({title:ne.title||"",abstract:ne.abstract||"",keywords:ne.keywords||[],srs:ne.srs||"",enabled:ne.enabled,advertised:ne.advertised,queryable:ne.queryable,attributionTitle:ne.attributionTitle||"",attributionHref:ne.attributionHref||""}),b(ne.metadataLinks||[]))},[ne]),L.useEffect(()=>{Ee&&(D(Ee.defaultStyle||""),F(Ee.additionalStyles||[]),N(!1))},[Ee]);const $e=Au({mutationFn:rt=>TSe(q,X,K,{...rt,metadataLinks:y}),onSuccess:()=>{s.invalidateQueries({queryKey:["layerMetadata",q,X,K]}),s.invalidateQueries({queryKey:["layer",q,X,K]}),s.invalidateQueries({queryKey:["layers",q,X]}),o({title:"Layer updated",description:"Layer metadata has been updated successfully.",status:"success",duration:3e3}),n()},onError:rt=>{o({title:"Error updating layer",description:rt.message,status:"error",duration:5e3})}}),We=Au({mutationFn:()=>PSe(q,X,K,O,z),onSuccess:()=>{s.invalidateQueries({queryKey:["layerStyles",q,X,K]}),s.invalidateQueries({queryKey:["layer",q,X,K]}),N(!1),o({title:"Styles updated",description:"Layer styles have been updated successfully.",status:"success",duration:3e3})},onError:rt=>{o({title:"Error updating styles",description:rt.message,status:"error",duration:5e3})}}),Fe=(rt,tn)=>{h(kt=>({...kt,[rt]:tn}))},we=()=>{var rt;p.trim()&&!((rt=a.keywords)!=null&&rt.includes(p.trim()))&&(h(tn=>({...tn,keywords:[...tn.keywords||[],p.trim()]})),g(""))},Ie=rt=>{h(tn=>{var kt;return{...tn,keywords:((kt=tn.keywords)==null?void 0:kt.filter(it=>it!==rt))||[]}})},Qe=()=>{S.content.trim()&&(b(rt=>[...rt,{...S}]),P({type:"text/html",metadataType:"TC211",content:""}))},se=rt=>{b(tn=>tn.filter((kt,it)=>it!==rt))},Re=()=>{$e.mutate(a)},Oe=()=>{We.mutate()},oe=rt=>{N(!0),z.includes(rt)?F(z.filter(tn=>tn!==rt)):F([...z,rt])},nt=rt=>{N(!0),D(rt),z.includes(rt)&&F(z.filter(tn=>tn!==rt))},Ne=()=>{n(),r("style",{mode:"create",data:{connectionId:q,workspace:X,forLayer:K}})},tt=rt=>{n(),r("style",{mode:"edit",data:{connectionId:q,workspace:X,name:rt}})},Ye=()=>{s.invalidateQueries({queryKey:["styles",q,X]}),s.invalidateQueries({queryKey:["layerStyles",q,X,K]}),o({title:"Styles refreshed",status:"info",duration:2e3})};return Q?u.jsxs(es,{isOpen:Q,onClose:n,size:"2xl",isCentered:!0,scrollBehavior:"inside",children:[u.jsx(ts,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(gs,{borderRadius:"xl",overflow:"hidden",maxH:"85vh",children:[u.jsx(de,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",px:6,py:4,children:u.jsxs(me,{spacing:3,children:[u.jsx(de,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(Le,{as:mi,boxSize:5,color:"white"})}),u.jsxs(de,{children:[u.jsx(te,{color:"white",fontWeight:"600",fontSize:"lg",children:"Edit Layer Metadata"}),u.jsx(te,{color:"whiteAlpha.800",fontSize:"sm",children:K})]}),ne&&u.jsx(Lt,{ml:"auto",colorScheme:ne.storeType==="coveragestore"?"orange":"blue",px:2,py:1,borderRadius:"md",children:ne.storeType==="coveragestore"?"Raster":"Vector"})]})}),u.jsx(Is,{color:"white"}),u.jsx(ys,{py:4,overflowY:"auto",children:J?u.jsxs(at,{py:10,children:[u.jsx(Cr,{size:"xl",color:"kartoza.500"}),u.jsx(te,{color:"gray.500",children:"Loading layer metadata..."})]}):u.jsxs(cx,{variant:"enclosed",colorScheme:"kartoza",children:[u.jsxs(ux,{children:[u.jsx(fo,{children:u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:P_}),u.jsx(te,{children:"Basic Info"})]})}),u.jsx(fo,{children:u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:na}),u.jsx(te,{children:"Styles"})]})}),u.jsx(fo,{children:u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:Os}),u.jsx(te,{children:"Description"})]})}),u.jsx(fo,{children:u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:Ewe}),u.jsx(te,{children:"Attribution"})]})})]}),u.jsxs(T_,{children:[u.jsx(Ra,{px:0,py:4,children:u.jsxs(at,{spacing:4,align:"stretch",children:[u.jsxs(It,{display:"flex",alignItems:"center",justifyContent:"space-between",p:3,bg:"gray.50",borderRadius:"lg",children:[u.jsxs(me,{children:[u.jsx(Le,{as:mi,color:"green.500"}),u.jsxs(de,{children:[u.jsx(Mt,{mb:0,fontWeight:"500",children:"Enabled"}),u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Layer is available for use in GeoServer"})]})]}),u.jsx(ja,{colorScheme:"green",size:"lg",isChecked:a.enabled,onChange:rt=>Fe("enabled",rt.target.checked)})]}),u.jsxs(It,{display:"flex",alignItems:"center",justifyContent:"space-between",p:3,bg:"gray.50",borderRadius:"lg",children:[u.jsxs(me,{children:[u.jsx(Le,{as:Pi,color:"blue.500"}),u.jsxs(de,{children:[u.jsx(Mt,{mb:0,fontWeight:"500",children:"Advertised"}),u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Layer appears in GetCapabilities responses"})]})]}),u.jsx(ja,{colorScheme:"blue",size:"lg",isChecked:a.advertised,onChange:rt=>Fe("advertised",rt.target.checked)})]}),u.jsxs(It,{display:"flex",alignItems:"center",justifyContent:"space-between",p:3,bg:"gray.50",borderRadius:"lg",children:[u.jsxs(me,{children:[u.jsx(Le,{as:V0,color:"purple.500"}),u.jsxs(de,{children:[u.jsx(Mt,{mb:0,fontWeight:"500",children:"Queryable"}),u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Layer supports GetFeatureInfo requests"})]})]}),u.jsx(ja,{colorScheme:"purple",size:"lg",isChecked:a.queryable,onChange:rt=>Fe("queryable",rt.target.checked)})]}),u.jsx(Hn,{}),u.jsx(sT,{allowToggle:!0,children:u.jsxs(Yd,{border:"none",children:[u.jsxs(Kd,{bg:"gray.50",borderRadius:"lg",_hover:{bg:"gray.100"},children:[u.jsx(de,{flex:"1",textAlign:"left",children:u.jsx(te,{fontWeight:"500",color:"gray.600",children:"Data Information"})}),u.jsx(Zd,{})]}),u.jsxs(Jd,{pb:4,children:[u.jsxs(Gn,{columns:2,spacing:4,children:[u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Workspace"}),u.jsx(te,{fontWeight:"medium",children:X})]}),u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Store"}),u.jsx(te,{fontWeight:"medium",children:(ne==null?void 0:ne.store)||"Unknown"})]}),u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Native Name"}),u.jsx(ec,{fontSize:"sm",children:(ne==null?void 0:ne.nativeName)||(ne==null?void 0:ne.name)})]}),u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Default Style"}),u.jsx(te,{fontWeight:"medium",children:(ne==null?void 0:ne.defaultStyle)||"None"})]}),u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Native CRS"}),u.jsx(ec,{fontSize:"sm",children:(ne==null?void 0:ne.nativeCRS)||"Unknown"})]}),u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Declared SRS"}),u.jsx(ec,{fontSize:"sm",children:(ne==null?void 0:ne.srs)||"Unknown"})]})]}),(ne==null?void 0:ne.nativeBoundingBox)&&u.jsxs(de,{mt:4,children:[u.jsx(te,{fontSize:"xs",color:"gray.500",mb:2,children:"Native Bounding Box"}),u.jsxs(ec,{display:"block",p:2,borderRadius:"md",fontSize:"xs",children:["(",ne.nativeBoundingBox.minx.toFixed(4),", ",ne.nativeBoundingBox.miny.toFixed(4),") - (",ne.nativeBoundingBox.maxx.toFixed(4),", ",ne.nativeBoundingBox.maxy.toFixed(4),")"]})]}),(ne==null?void 0:ne.latLonBoundingBox)&&u.jsxs(de,{mt:4,children:[u.jsx(te,{fontSize:"xs",color:"gray.500",mb:2,children:"Lat/Lon Bounding Box"}),u.jsxs(ec,{display:"block",p:2,borderRadius:"md",fontSize:"xs",children:["(",ne.latLonBoundingBox.minx.toFixed(4),", ",ne.latLonBoundingBox.miny.toFixed(4),") - (",ne.latLonBoundingBox.maxx.toFixed(4),", ",ne.latLonBoundingBox.maxy.toFixed(4),")"]})]})]})]})})]})}),u.jsx(Ra,{px:0,py:4,children:u.jsxs(at,{spacing:4,align:"stretch",children:[u.jsx(de,{p:4,bg:"blue.50",borderRadius:"lg",borderLeft:"4px solid",borderLeftColor:"blue.400",children:u.jsxs(te,{fontSize:"sm",color:"blue.700",children:[u.jsx("strong",{children:"Styles"})," control how your layer is rendered on the map. Select a default style and optionally add additional styles that users can choose from."]})}),u.jsxs(me,{spacing:2,children:[u.jsx(vt,{size:"sm",colorScheme:"kartoza",leftIcon:u.jsx(Le,{as:As}),onClick:Ne,children:"Create New Style"}),u.jsx(wn,{"aria-label":"Refresh styles",icon:u.jsx(Xc,{}),size:"sm",variant:"outline",onClick:Ye})]}),Ce?u.jsxs(at,{py:6,children:[u.jsx(Cr,{size:"md",color:"kartoza.500"}),u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Loading styles..."})]}):u.jsx(u.Fragment,{children:!ae||ae.length===0?u.jsxs(de,{p:6,bg:"orange.50",borderRadius:"lg",border:"2px dashed",borderColor:"orange.200",textAlign:"center",children:[u.jsx(Le,{as:na,boxSize:8,color:"orange.400",mb:3}),u.jsx(te,{fontWeight:"600",color:"orange.700",mb:2,children:"No Styles Available"}),u.jsx(te,{fontSize:"sm",color:"orange.600",mb:4,children:"This workspace doesn't have any styles yet. Create a new style to customize how your layer appears on the map."}),u.jsx(vt,{colorScheme:"orange",leftIcon:u.jsx(Le,{as:As}),onClick:Ne,children:"Create Your First Style"})]}):u.jsxs(u.Fragment,{children:[u.jsxs(de,{children:[u.jsx(te,{fontWeight:"600",mb:3,children:"Default Style"}),u.jsx(te,{fontSize:"xs",color:"gray.500",mb:3,children:"The style used when no specific style is requested"}),u.jsx(OQ,{value:O,onChange:nt,children:u.jsx(S_,{spacing:2,children:ae==null?void 0:ae.map(rt=>u.jsx(de,{p:3,bg:O===rt.name?"kartoza.50":"gray.50",borderRadius:"lg",border:"2px solid",borderColor:O===rt.name?"kartoza.500":"transparent",_hover:{borderColor:"kartoza.300"},transition:"all 0.15s",children:u.jsxs(me,{justify:"space-between",children:[u.jsx(AQ,{value:rt.name,colorScheme:"kartoza",flex:"1",children:u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:na,color:"pink.500"}),u.jsx(te,{fontWeight:O===rt.name?"600":"normal",children:rt.name})]})}),u.jsxs(me,{spacing:2,children:[O===rt.name&&u.jsx(Lt,{colorScheme:"kartoza",children:u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:Lwe,boxSize:3}),u.jsx(te,{children:"Default"})]})}),u.jsx(wn,{"aria-label":"Edit style",icon:u.jsx(pc,{}),size:"xs",variant:"ghost",colorScheme:"blue",onClick:tn=>{tn.stopPropagation(),tt(rt.name)}})]})]})},rt.name))})})]}),u.jsx(Hn,{}),u.jsxs(de,{children:[u.jsx(te,{fontWeight:"600",mb:3,children:"Additional Styles"}),u.jsx(te,{fontSize:"xs",color:"gray.500",mb:3,children:"Additional styles that users can choose from when viewing this layer"}),u.jsx(at,{align:"stretch",spacing:2,children:ae==null?void 0:ae.filter(rt=>rt.name!==O).map(rt=>u.jsx(de,{p:3,bg:z.includes(rt.name)?"green.50":"gray.50",borderRadius:"lg",border:"2px solid",borderColor:z.includes(rt.name)?"green.500":"transparent",_hover:{borderColor:"green.300"},transition:"all 0.15s",children:u.jsxs(me,{justify:"space-between",children:[u.jsx(dl,{isChecked:z.includes(rt.name),onChange:()=>oe(rt.name),colorScheme:"green",flex:"1",children:u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:na,color:"pink.500"}),u.jsx(te,{children:rt.name})]})}),u.jsx(wn,{"aria-label":"Edit style",icon:u.jsx(pc,{}),size:"xs",variant:"ghost",colorScheme:"blue",onClick:tn=>{tn.stopPropagation(),tt(rt.name)}})]})},rt.name))}),(ae==null?void 0:ae.filter(rt=>rt.name!==O).length)===0&&u.jsx(te,{fontSize:"sm",color:"gray.500",fontStyle:"italic",mt:2,children:"All available styles are either set as default or not yet created"})]}),R&&u.jsx(vt,{colorScheme:"kartoza",onClick:Oe,isLoading:We.isPending,leftIcon:u.jsx(Le,{as:na}),children:"Save Style Changes"})]})})]})}),u.jsx(Ra,{px:0,py:4,children:u.jsxs(at,{spacing:4,align:"stretch",children:[u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",children:"Title"}),u.jsx(Rn,{value:a.title||"",onChange:rt=>Fe("title",rt.target.value),placeholder:"Human-readable layer title",bg:"gray.50",borderRadius:"lg"}),u.jsx(te,{fontSize:"xs",color:"gray.500",mt:1,children:"A short descriptive name for the layer"})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",children:"Abstract / Description"}),u.jsx(mT,{value:a.abstract||"",onChange:rt=>Fe("abstract",rt.target.value),placeholder:"Detailed description of the layer content, purpose, and data source...",bg:"gray.50",borderRadius:"lg",rows:4}),u.jsx(te,{fontSize:"xs",color:"gray.500",mt:1,children:"A longer description of the layer for metadata and documentation"})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",children:"Keywords"}),u.jsxs(me,{children:[u.jsx(Rn,{value:p,onChange:rt=>g(rt.target.value),placeholder:"Add a keyword...",bg:"gray.50",borderRadius:"lg",onKeyPress:rt=>rt.key==="Enter"&&we()}),u.jsx(wn,{"aria-label":"Add keyword",icon:u.jsx(As,{}),colorScheme:"kartoza",onClick:we,borderRadius:"lg"})]}),u.jsx($0,{mt:2,spacing:2,children:(bt=a.keywords)==null?void 0:bt.map(rt=>u.jsx(Wm,{children:u.jsxs(Vm,{size:"md",colorScheme:"blue",borderRadius:"full",children:[u.jsx(T1,{children:rt}),u.jsx(FQ,{onClick:()=>Ie(rt)})]})},rt))}),u.jsx(te,{fontSize:"xs",color:"gray.500",mt:1,children:"Keywords help users find this layer in searches"})]})]})}),u.jsx(Ra,{px:0,py:4,children:u.jsxs(at,{spacing:4,align:"stretch",children:[u.jsx(de,{p:4,bg:"blue.50",borderRadius:"lg",borderLeft:"4px solid",borderLeftColor:"blue.400",children:u.jsxs(te,{fontSize:"sm",color:"blue.700",children:[u.jsx("strong",{children:"Attribution"})," provides credit to the data source and is displayed in WMS GetCapabilities and map clients."]})}),u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",children:"Attribution Title"}),u.jsx(Rn,{value:a.attributionTitle||"",onChange:rt=>Fe("attributionTitle",rt.target.value),placeholder:"e.g., Data provided by...",bg:"gray.50",borderRadius:"lg"})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontWeight:"500",children:"Attribution Link (URL)"}),u.jsx(Rn,{value:a.attributionHref||"",onChange:rt=>Fe("attributionHref",rt.target.value),placeholder:"https://example.com/data-source",bg:"gray.50",borderRadius:"lg"})]}),u.jsx(Hn,{}),u.jsxs(de,{children:[u.jsx(te,{fontWeight:"500",mb:3,children:"Metadata Links"}),u.jsx(te,{fontSize:"xs",color:"gray.500",mb:3,children:"Links to external metadata documents (ISO 19115, FGDC, etc.)"}),y.length>0&&u.jsx(at,{spacing:2,mb:4,align:"stretch",children:y.map((rt,tn)=>u.jsxs(me,{p:3,bg:"gray.50",borderRadius:"lg",justify:"space-between",children:[u.jsxs(at,{align:"start",spacing:0,children:[u.jsxs(me,{children:[u.jsx(Lt,{colorScheme:"purple",children:rt.metadataType}),u.jsx(Lt,{colorScheme:"gray",children:rt.type})]}),u.jsx(te,{fontSize:"sm",color:"gray.600",isTruncated:!0,maxW:"300px",children:rt.content})]}),u.jsx(wn,{"aria-label":"Remove link",icon:u.jsx(jf,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>se(tn)})]},tn))}),u.jsxs(de,{p:4,bg:"gray.50",borderRadius:"lg",children:[u.jsx(te,{fontWeight:"500",fontSize:"sm",mb:3,children:"Add Metadata Link"}),u.jsxs(at,{spacing:3,children:[u.jsxs(me,{w:"100%",children:[u.jsxs(It,{flex:1,children:[u.jsx(Mt,{fontSize:"xs",children:"Type"}),u.jsx(Rn,{size:"sm",value:S.type,onChange:rt=>P({...S,type:rt.target.value}),placeholder:"text/html"})]}),u.jsxs(It,{flex:1,children:[u.jsx(Mt,{fontSize:"xs",children:"Metadata Type"}),u.jsx(Rn,{size:"sm",value:S.metadataType,onChange:rt=>P({...S,metadataType:rt.target.value}),placeholder:"TC211"})]})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"xs",children:"URL"}),u.jsxs(me,{children:[u.jsx(Rn,{size:"sm",value:S.content,onChange:rt=>P({...S,content:rt.target.value}),placeholder:"https://example.com/metadata.xml"}),u.jsx(wn,{"aria-label":"Add link",icon:u.jsx(As,{}),size:"sm",colorScheme:"kartoza",onClick:Qe})]})]})]})]})]})]})})]})]})}),u.jsxs(Fo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:[u.jsx(vt,{variant:"ghost",onClick:n,borderRadius:"lg",children:"Cancel"}),u.jsx(vt,{colorScheme:"kartoza",onClick:Re,isLoading:$e.isPending,borderRadius:"lg",px:6,children:"Save Changes"})]})]})]}):null}function x2e(){var b,S,P;const t=St(O=>O.activeDialog),e=St(O=>O.dialogData),n=St(O=>O.closeDialog),r=Ln(O=>O.selectedNode),i=t==="datastore"||t==="coveragestore",s=t==="datastore",o=(e==null?void 0:e.mode)==="edit",a=((b=e==null?void 0:e.data)==null?void 0:b.connectionId)||(r==null?void 0:r.connectionId)||"",h=((S=e==null?void 0:e.data)==null?void 0:S.workspace)||(r==null?void 0:r.workspace)||"",p=((P=e==null?void 0:e.data)==null?void 0:P.storeName)||(r==null?void 0:r.name)||"",{data:g,isLoading:y}=er({queryKey:[s?"datastores":"coveragestores",a,h,p],queryFn:()=>s?hH(a,h,p):pH(a,h,p),enabled:i&&o&&!!a&&!!h&&!!p});return i?u.jsxs(es,{isOpen:i,onClose:n,size:"xl",isCentered:!0,children:[u.jsx(ts,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(gs,{borderRadius:"xl",overflow:"hidden",maxH:"85vh",children:[u.jsx(de,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",px:6,py:4,children:u.jsxs(me,{spacing:3,children:[u.jsx(de,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(Le,{as:s?Yr:Qc,boxSize:5,color:"white"})}),u.jsxs(de,{children:[u.jsx(te,{color:"white",fontWeight:"600",fontSize:"lg",children:s?"Data Store Details":"Coverage Store Details"}),u.jsx(te,{color:"whiteAlpha.800",fontSize:"sm",children:p})]})]})}),u.jsx(Is,{color:"white"}),u.jsx(ys,{py:6,overflowY:"auto",children:y?u.jsxs(at,{py:10,children:[u.jsx(Cr,{size:"xl",color:"kartoza.500"}),u.jsx(te,{color:"gray.500",children:"Loading store details..."})]}):g?u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsxs(de,{p:4,bg:"gray.50",borderRadius:"lg",children:[u.jsxs(me,{mb:3,children:[u.jsx(Le,{as:P_,color:"kartoza.500"}),u.jsx(te,{fontWeight:"bold",color:"gray.600",children:"Store Information"})]}),u.jsxs(Gn,{columns:{base:1,md:2},spacing:4,children:[u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Name"}),u.jsx(te,{fontWeight:"medium",children:g.name})]}),u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Type"}),u.jsxs(me,{children:[u.jsx(te,{fontWeight:"medium",children:g.type||"Unknown"}),u.jsx(Lt,{colorScheme:s?"blue":"orange",children:s?"Vector":"Raster"})]})]}),u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Workspace"}),u.jsxs(me,{children:[u.jsx(Le,{as:Uu,color:"gray.400",boxSize:4}),u.jsx(te,{fontWeight:"medium",children:h})]})]}),u.jsxs(de,{children:[u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Status"}),u.jsx(Lt,{colorScheme:g.enabled?"green":"gray",fontSize:"sm",children:g.enabled?"Enabled":"Disabled"})]})]})]}),!s&&g.description&&u.jsxs(u.Fragment,{children:[u.jsx(Hn,{}),u.jsxs(de,{children:[u.jsx(te,{fontWeight:"bold",color:"gray.600",mb:2,children:"Description"}),u.jsx(te,{color:"gray.600",children:g.description})]})]}),u.jsx(sT,{allowToggle:!0,children:u.jsxs(Yd,{border:"none",children:[u.jsxs(Kd,{bg:"gray.50",borderRadius:"lg",_hover:{bg:"gray.100"},children:[u.jsx(de,{flex:"1",textAlign:"left",children:u.jsx(te,{fontWeight:"500",color:"gray.600",children:"Technical Details"})}),u.jsx(Zd,{})]}),u.jsx(Jd,{pb:4,children:u.jsxs(at,{align:"stretch",spacing:2,children:[u.jsxs(me,{justify:"space-between",children:[u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Store Type:"}),u.jsx(ec,{fontSize:"sm",children:g.type||"Unknown"})]}),u.jsxs(me,{justify:"space-between",children:[u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Workspace:"}),u.jsx(ec,{fontSize:"sm",children:h})]}),u.jsxs(me,{justify:"space-between",children:[u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Enabled:"}),u.jsx(ec,{fontSize:"sm",children:g.enabled?"true":"false"})]})]})})]})}),u.jsx(de,{p:4,bg:"blue.50",borderRadius:"lg",borderLeft:"4px solid",borderLeftColor:"blue.400",children:u.jsxs(te,{fontSize:"sm",color:"blue.700",children:[u.jsx("strong",{children:"Note:"})," Store configuration (connection parameters, file paths, etc.) can be modified through the GeoServer admin interface. This view shows the current store metadata."]})})]}):u.jsx(at,{py:10,children:u.jsx(te,{color:"gray.500",children:"Store not found"})})}),u.jsx(Fo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:u.jsx(vt,{colorScheme:"kartoza",onClick:n,borderRadius:"lg",px:6,children:"Close"})})]})]}):null}function v2e(){const t=St(s=>s.activeDialog),e=St(s=>s.closeDialog),n=St(s=>s.settings),r=St(s=>s.setShowHiddenPGServices),i=t==="settings";return u.jsxs(es,{isOpen:i,onClose:e,size:"md",isCentered:!0,children:[u.jsx(ts,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(gs,{borderRadius:"xl",overflow:"hidden",children:[u.jsx(de,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",px:6,py:4,children:u.jsxs(me,{spacing:3,children:[u.jsx(de,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(Le,{as:O_,boxSize:5,color:"white"})}),u.jsxs(de,{children:[u.jsx(te,{color:"white",fontWeight:"600",fontSize:"lg",children:"Settings"}),u.jsx(te,{color:"whiteAlpha.800",fontSize:"sm",children:"Configure application preferences"})]})]})}),u.jsx(Is,{color:"white"}),u.jsx(ys,{py:6,children:u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsxs(de,{children:[u.jsxs(me,{spacing:2,mb:4,children:[u.jsx(Le,{as:Gh,color:"blue.600"}),u.jsx(te,{fontWeight:"600",color:"gray.700",children:"PostgreSQL Services"})]}),u.jsxs(It,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[u.jsxs(me,{spacing:3,children:[u.jsx(Le,{as:Pi,color:"gray.500"}),u.jsxs(de,{children:[u.jsx(Mt,{htmlFor:"show-hidden-pg",mb:0,cursor:"pointer",children:"Show hidden services"}),u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Display hidden PostgreSQL services in tree and dashboard"})]})]}),u.jsx(ja,{id:"show-hidden-pg",colorScheme:"blue",isChecked:n.showHiddenPGServices,onChange:s=>r(s.target.checked)})]})]}),u.jsx(Hn,{}),u.jsx(de,{children:u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Hidden services are commented out in your pg_service.conf file. They won't be used by applications but can be restored later."})})]})}),u.jsx(Fo,{borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:u.jsx(vt,{onClick:e,colorScheme:"blue",borderRadius:"lg",children:"Done"})})]})]})}let Cz=[],AH=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?AH:Cz).push(n=n+t[e])})();function b2e(t){if(t<768)return!1;for(let e=0,n=Cz.length;;){let r=e+n>>1;if(t<Cz[r])n=r;else if(t>=AH[r])e=r+1;else return!0;if(e==n)return!1}}function _6(t){return t>=127462&&t<=127487}const w6=8205;function _2e(t,e,n=!0,r=!0){return(n?EH:w2e)(t,e,r)}function EH(t,e,n){if(e==t.length)return e;e&&zH(t.charCodeAt(e))&&IH(t.charCodeAt(e-1))&&e--;let r=yO(t,e);for(e+=S6(r);e<t.length;){let i=yO(t,e);if(r==w6||i==w6||n&&b2e(i))e+=S6(i),r=i;else if(_6(i)){let s=0,o=e-2;for(;o>=0&&_6(yO(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function w2e(t,e,n){for(;e>0;){let r=EH(t,e-2,n);if(r<e)return r;e--}return 0}function yO(t,e){let n=t.charCodeAt(e);if(!IH(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return zH(r)?(n-55296<<10)+(r-56320)+65536:n}function zH(t){return t>=56320&&t<57344}function IH(t){return t>=55296&&t<56320}function S6(t){return t<65536?1:2}class Ir{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=U0(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Eu.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=U0(this,e,n);let r=[];return this.decompose(e,n,r,0),Eu.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Mb(this),s=new Mb(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new Mb(this,e)}iterRange(e,n=this.length){return new MH(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new RH(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ir.empty:e.length<=32?new Hi(e):Eu.from(Hi.split(e,[]))}}class Hi extends Ir{constructor(e,n=S2e(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new k2e(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new Hi(k6(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=Ek(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new Hi(a,o.length+s.length));else{let h=a.length>>1;r.push(new Hi(a.slice(0,h)),new Hi(a.slice(h)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof Hi))return super.replace(e,n,r);[e,n]=U0(this,e,n);let i=Ek(this.text,Ek(r.text,k6(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new Hi(i,s):Eu.from(Hi.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=U0(this,e,n);let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],h=s+a.length;s>e&&o&&(i+=r),e<h&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=h+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new Hi(r,i)),r=[],i=-1);return i>-1&&n.push(new Hi(r,i)),n}}class Eu extends Ir{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,h=r+o.lines-1;if((n?h:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=h+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],h=o+a.length;if(e<=h&&n>=o){let p=i&((o<=e?1:0)|(h>=n?2:0));o>=e&&h<=n&&!p?r.push(a):a.decompose(e-o,n-o,r,p)}o=h+1}}replace(e,n,r){if([e,n]=U0(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let h=o.replace(e-s,n-s,r),p=this.lines-o.lines+h.lines;if(h.lines<p>>4&&h.lines>p>>6){let g=this.children.slice();return g[i]=h,new Eu(g,this.length-(n-e)+r.length)}return super.replace(s,a,h)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=U0(this,e,n);let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],h=o+a.length;o>e&&s&&(i+=r),e<h&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=h+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Eu))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let h=this.children[i],p=e.children[s];if(h!=p)return r+h.scanIdentical(p,n);r+=h.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let S of e)r+=S.lines;if(r<32){let S=[];for(let P of e)P.flatten(S);return new Hi(S,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],h=0,p=-1,g=[];function y(S){let P;if(S.lines>s&&S instanceof Eu)for(let O of S.children)y(O);else S.lines>o&&(h>o||!h)?(b(),a.push(S)):S instanceof Hi&&h&&(P=g[g.length-1])instanceof Hi&&S.lines+P.lines<=32?(h+=S.lines,p+=S.length+1,g[g.length-1]=new Hi(P.text.concat(S.text),P.length+1+S.length)):(h+S.lines>i&&b(),h+=S.lines,p+=S.length+1,g.push(S))}function b(){h!=0&&(a.push(g.length==1?g[0]:Eu.from(g,p)),p=-1,h=g.length=0)}for(let S of e)y(S);return b(),a.length==1?a[0]:new Eu(a,n)}}Ir.empty=new Hi([""],0);function S2e(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Ek(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],h=i+a.length;h>=n&&(h>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=h+1}return e}function k6(t,e,n){return Ek(t,[""],e,n)}class Mb{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Hi?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof Hi?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Hi){let h=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,h.length>Math.max(0,e))return this.value=e==0?h:n>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=i.children[o+(n<0?-1:0)];e>h.length?(e-=h.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(h),this.offsets.push(n>0?1:(h instanceof Hi?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class MH{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new Mb(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class RH{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ir.prototype[Symbol.iterator]=function(){return this.iter()},Mb.prototype[Symbol.iterator]=MH.prototype[Symbol.iterator]=RH.prototype[Symbol.iterator]=function(){return this});class k2e{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function U0(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Es(t,e,n=!0,r=!0){return _2e(t,e,n,r)}function C2e(t){return t>=56320&&t<57344}function T2e(t){return t>=55296&&t<56320}function Oa(t,e){let n=t.charCodeAt(e);if(!T2e(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return C2e(r)?(n-55296<<10)+(r-56320)+65536:n}function bR(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function zu(t){return t<65536?1:2}const Tz=/\r\n?|\n/;var ra=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(ra||(ra={}));class Qu{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){jz(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new Qu(e)}composeDesc(e){return this.empty?e:e.empty?this:DH(this,e)}mapDesc(e,n=!1){return e.empty?this:Pz(this,e,n)}mapPos(e,n=-1,r=ra.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],h=this.sections[o++],p=i+a;if(h<0){if(p>e)return s+(e-i);s+=a}else{if(r!=ra.Simple&&p>=e&&(r==ra.TrackDel&&i<e&&p>e||r==ra.TrackBefore&&i<e||r==ra.TrackAfter&&p>e))return null;if(p>e||p==e&&n<0&&!a)return e==i||n<0?s:s+h;s+=h}i=p}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Qu(e)}static create(e){return new Qu(e)}}class Ts extends Qu{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return jz(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return Pz(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let h=i>>1;for(;r.length<h;)r.push(Ir.empty);r.push(o?e.slice(s,s+o):Ir.empty)}s+=o}return new Ts(n,r)}compose(e){return this.empty?e:e.empty?this:DH(this,e,!0)}map(e,n=!1){return e.empty?this:Pz(this,e,n,!0)}iterChanges(e,n=!1){jz(this,e,n)}get desc(){return Qu.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new P1(this);e:for(let o=0,a=0;;){let h=o==e.length?1e9:e[o++];for(;a<h||a==h&&s.len==0;){if(s.done)break e;let g=Math.min(s.len,h-a);Mo(i,g,-1);let y=s.ins==-1?-1:s.off==0?s.ins:0;Mo(n,g,y),y>0&&ff(r,n,s.text),s.forward(g),a+=g}let p=e[o++];for(;a<p;){if(s.done)break e;let g=Math.min(s.len,p-a);Mo(n,g,-1),Mo(i,g,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(g),a+=g}}return{changes:new Ts(n,r),filtered:Qu.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function h(g=!1){if(!g&&!i.length)return;o<n&&Mo(i,n-o,-1);let y=new Ts(i,s);a=a?a.compose(y.map(a)):y,i=[],s=[],o=0}function p(g){if(Array.isArray(g))for(let y of g)p(y);else if(g instanceof Ts){if(g.length!=n)throw new RangeError(`Mismatched change set length (got ${g.length}, expected ${n})`);h(),a=a?a.compose(g.map(a)):g}else{let{from:y,to:b=y,insert:S}=g;if(y>b||y<0||b>n)throw new RangeError(`Invalid change range ${y} to ${b} (in doc of length ${n})`);let P=S?typeof S=="string"?Ir.of(S.split(r||Tz)):S:Ir.empty,O=P.length;if(y==b&&O==0)return;y<o&&h(),y>o&&Mo(i,y-o,-1),Mo(i,b-y,O),ff(s,i,P),o=b}}return p(e),h(!a),a}static empty(e){return new Ts(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(Ir.empty);r[i]=Ir.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Ts(n,r)}static createSet(e,n){return new Ts(e,n)}}function Mo(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function ff(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Ir.empty);t.push(n)}}function jz(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],h=t.sections[o++];if(h<0)i+=a,s+=a;else{let p=i,g=s,y=Ir.empty;for(;p+=a,g+=h,h&&r&&(y=y.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],h=t.sections[o++];e(i,p,s,g,y),i=p,s=g}}}function Pz(t,e,n,r=!1){let i=[],s=r?[]:null,o=new P1(t),a=new P1(e);for(let h=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let p=Math.min(o.len,a.len);Mo(i,p,-1),o.forward(p),a.forward(p)}else if(a.ins>=0&&(o.ins<0||h==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let p=a.len;for(Mo(i,a.ins,-1);p;){let g=Math.min(o.len,p);o.ins>=0&&h<o.i&&o.len<=g&&(Mo(i,0,o.ins),s&&ff(s,i,o.text),h=o.i),o.forward(g),p-=g}a.next()}else if(o.ins>=0){let p=0,g=o.len;for(;g;)if(a.ins==-1){let y=Math.min(g,a.len);p+=y,g-=y,a.forward(y)}else if(a.ins==0&&a.len<g)g-=a.len,a.next();else break;Mo(i,p,h<o.i?o.ins:0),s&&h<o.i&&ff(s,i,o.text),h=o.i,o.forward(o.len-g)}else{if(o.done&&a.done)return s?Ts.createSet(i,s):Qu.create(i);throw new Error("Mismatched change set lengths")}}}function DH(t,e,n=!1){let r=[],i=n?[]:null,s=new P1(t),o=new P1(e);for(let a=!1;;){if(s.done&&o.done)return i?Ts.createSet(r,i):Qu.create(r);if(s.ins==0)Mo(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)Mo(r,0,o.ins,a),i&&ff(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let h=Math.min(s.len2,o.len),p=r.length;if(s.ins==-1){let g=o.ins==-1?-1:o.off?0:o.ins;Mo(r,h,g,a),i&&g&&ff(i,r,o.text)}else o.ins==-1?(Mo(r,s.off?0:s.len,h,a),i&&ff(i,r,s.textBit(h))):(Mo(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&ff(i,r,o.text));a=(s.ins>h||o.ins>=0&&o.len>h)&&(a||r.length>p),s.forward2(h),o.forward(h)}}}}class P1{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Ir.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?Ir.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class rm{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new rm(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return xt.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return xt.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return xt.range(e.anchor,e.head)}static create(e,n,r){return new rm(e,n,r)}}class xt{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:xt.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new xt([this.main],0)}addRange(e,n=!0){return xt.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,xt.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new xt(e.ranges.map(n=>rm.fromJSON(n)),e.main)}static single(e,n=e){return new xt([xt.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return xt.normalized(e.slice(),n);r=s.to}return new xt(e,n)}static cursor(e,n=0,r,i){return rm.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?rm.create(n,e,48|s):rm.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,h=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?xt.range(h,a):xt.range(a,h))}}return new xt(e,n)}}function LH(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let _R=0;class yn{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=_R++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new yn(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:wR),!!e.static,e.enables)}of(e){return new zk([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new zk(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new zk(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function wR(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class zk{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=_R++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,h=!1,p=!1,g=[];for(let y of this.dependencies)y=="doc"?h=!0:y=="selection"?p=!0:((n=e[y.id])!==null&&n!==void 0?n:1)&1||g.push(e[y.id]);return{create(y){return y.values[o]=r(y),1},update(y,b){if(h&&b.docChanged||p&&(b.docChanged||b.selection)||Oz(y,g)){let S=r(y);if(a?!C6(S,y.values[o],i):!i(S,y.values[o]))return y.values[o]=S,1}return 0},reconfigure:(y,b)=>{let S,P=b.config.address[s];if(P!=null){let O=D2(b,P);if(this.dependencies.every(D=>D instanceof yn?b.facet(D)===y.facet(D):D instanceof _o?b.field(D,!1)==y.field(D,!1):!0)||(a?C6(S=r(y),O,i):i(S=r(y),O)))return y.values[o]=O,0}else S=r(y);return y.values[o]=S,1}}}}function C6(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function Oz(t,e){let n=!1;for(let r of e)Rb(t,r)&1&&(n=!0);return n}function j2e(t,e,n){let r=n.map(h=>t[h.id]),i=n.map(h=>h.type),s=r.filter(h=>!(h&1)),o=t[e.id]>>1;function a(h){let p=[];for(let g=0;g<r.length;g++){let y=D2(h,r[g]);if(i[g]==2)for(let b of y)p.push(b);else p.push(y)}return e.combine(p)}return{create(h){for(let p of r)Rb(h,p);return h.values[o]=a(h),1},update(h,p){if(!Oz(h,s))return 0;let g=a(h);return e.compare(g,h.values[o])?0:(h.values[o]=g,1)},reconfigure(h,p){let g=Oz(h,r),y=p.config.facets[e.id],b=p.facet(e);if(y&&!g&&wR(n,y))return h.values[o]=b,0;let S=a(h);return e.compare(S,b)?(h.values[o]=b,0):(h.values[o]=S,1)}}}const bS=yn.define({static:!0});class _o{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new _o(_R++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(bS).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>{let s=r.facet(bS),o=i.facet(bS),a;return(a=s.find(h=>h.field==this))&&a!=o.find(h=>h.field==this)?(r.values[n]=a.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,bS.of({field:this,create:e})]}get extension(){return this}}const Hp={lowest:4,low:3,default:2,high:1,highest:0};function Lv(t){return e=>new FH(e,t)}const ig={highest:Lv(Hp.highest),high:Lv(Hp.high),default:Lv(Hp.default),low:Lv(Hp.low),lowest:Lv(Hp.lowest)};class FH{constructor(e,n){this.inner=e,this.prec=n}}class vT{of(e){return new Az(this,e)}reconfigure(e){return vT.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Az{constructor(e,n){this.compartment=e,this.inner=n}}class R2{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let b of P2e(e,n,o))b instanceof _o?i.push(b):(s[b.facet.id]||(s[b.facet.id]=[])).push(b);let a=Object.create(null),h=[],p=[];for(let b of i)a[b.id]=p.length<<1,p.push(S=>b.slot(S));let g=r==null?void 0:r.config.facets;for(let b in s){let S=s[b],P=S[0].facet,O=g&&g[b]||[];if(S.every(D=>D.type==0))if(a[P.id]=h.length<<1|1,wR(O,S))h.push(r.facet(P));else{let D=P.combine(S.map(z=>z.value));h.push(r&&P.compare(D,r.facet(P))?r.facet(P):D)}else{for(let D of S)D.type==0?(a[D.id]=h.length<<1|1,h.push(D.value)):(a[D.id]=p.length<<1,p.push(z=>D.dynamicSlot(z)));a[P.id]=p.length<<1,p.push(D=>j2e(D,P,S))}}let y=p.map(b=>b(a));return new R2(e,o,y,a,h,s)}}function P2e(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let h=i.get(o);if(h!=null){if(h<=a)return;let p=r[h].indexOf(o);p>-1&&r[h].splice(p,1),o instanceof Az&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let p of o)s(p,a);else if(o instanceof Az){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let p=e.get(o.compartment)||o.inner;n.set(o.compartment,p),s(p,a)}else if(o instanceof FH)s(o.inner,o.prec);else if(o instanceof _o)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof zk)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,Hp.default);else{let p=o.extension;if(!p)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(p,a)}}return s(t,Hp.default),r.reduce((o,a)=>o.concat(a))}function Rb(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function D2(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const BH=yn.define(),Ez=yn.define({combine:t=>t.some(e=>e),static:!0}),$H=yn.define({combine:t=>t.length?t[0]:void 0,static:!0}),NH=yn.define(),VH=yn.define(),WH=yn.define(),UH=yn.define({combine:t=>t.length?t[0]:!1});class Xu{constructor(e,n){this.type=e,this.value=n}static define(){return new O2e}}class O2e{of(e){return new Xu(this,e)}}class A2e{constructor(e){this.map=e}of(e){return new Zn(this,e)}}class Zn{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Zn(this.type,n)}is(e){return this.type==e}static define(e={}){return new A2e(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}Zn.reconfigure=Zn.define();Zn.appendConfig=Zn.define();class zs{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&LH(r,n.newLength),s.some(a=>a.type==zs.time)||(this.annotations=s.concat(zs.time.of(Date.now())))}static create(e,n,r,i,s,o){return new zs(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(zs.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}zs.time=Xu.define();zs.userEvent=Xu.define();zs.addToHistory=Xu.define();zs.remote=Xu.define();function E2e(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function qH(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=Ts.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:Zn.mapEffects(t.effects,i).concat(Zn.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function zz(t,e,n){let r=e.selection,i=t0(e.annotations);return e.userEvent&&(i=i.concat(zs.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ts?e.changes:Ts.of(e.changes||[],n,t.facet($H)),selection:r&&(r instanceof xt?r:xt.single(r.anchor,r.head)),effects:t0(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function QH(t,e,n){let r=zz(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=qH(r,zz(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=zs.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return I2e(n?z2e(i):i)}function z2e(t){let e=t.startState,n=!0;for(let i of e.facet(NH)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:E2e(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Ts.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=zs.create(e,i,t.selection&&t.selection.map(s),Zn.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(VH);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof zs?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof zs?t=s[0]:t=QH(e,t0(s),!1)}return t}function I2e(t){let e=t.startState,n=e.facet(WH),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=qH(r,zz(e,s,t.changes.newLength),!0))}return r==t?t:zs.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const M2e=[];function t0(t){return t==null?M2e:Array.isArray(t)?t:[t]}var Oi=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Oi||(Oi={}));const R2e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Iz;try{Iz=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function D2e(t){if(Iz)return Iz.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||R2e.test(n)))return!0}return!1}function L2e(t){return e=>{if(!/\S/.test(e))return Oi.Space;if(D2e(e))return Oi.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Oi.Word;return Oi.Other}}class kr{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Rb(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Rb(this,r),D2(this,r)}update(...e){return QH(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let a of e.effects)a.is(vT.reconfigure)?(n&&(i=new Map,n.compartments.forEach((h,p)=>i.set(p,h)),n=null),i.set(a.value.compartment,a.value.extension)):a.is(Zn.reconfigure)?(n=null,r=a.value):a.is(Zn.appendConfig)&&(n=null,r=t0(r).concat(a.value));let s;n?s=e.startState.values.slice():(n=R2.resolve(r,i,this),s=new kr(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(h,p)=>p.reconfigure(h,this),null).values);let o=e.startState.facet(Ez)?e.newSelection:e.newSelection.asSingle();new kr(n,e.newDoc,o,s,(a,h)=>h.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:xt.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=t0(r.effects);for(let a=1;a<n.ranges.length;a++){let h=e(n.ranges[a]),p=this.changes(h.changes),g=p.map(i);for(let b=0;b<a;b++)s[b]=s[b].map(g);let y=i.mapDesc(p,!0);s.push(h.range.map(y)),i=i.compose(g),o=Zn.mapEffects(o,g).concat(Zn.mapEffects(t0(h.effects),y))}return{changes:i,selection:xt.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Ts?e:Ts.of(e,this.doc.length,this.facet(kr.lineSeparator))}toText(e){return Ir.of(e.split(this.facet(kr.lineSeparator)||Tz))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Rb(this,n),D2(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof _o&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(h=>o.spec.fromJSON(a,h)))}}return kr.create({doc:e.doc,selection:xt.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=R2.resolve(e.extensions||[],new Map),r=e.doc instanceof Ir?e.doc:Ir.of((e.doc||"").split(n.staticFacet(kr.lineSeparator)||Tz)),i=e.selection?e.selection instanceof xt?e.selection:xt.single(e.selection.anchor,e.selection.head):xt.single(0);return LH(i,r.length),n.staticFacet(Ez)||(i=i.asSingle()),new kr(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(kr.tabSize)}get lineBreak(){return this.facet(kr.lineSeparator)||`
`}get readOnly(){return this.facet(UH)}phrase(e,...n){for(let r of this.facet(kr.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(BH))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){let n=this.languageDataAt("wordChars",e);return L2e(n.length?n[0]:"")}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let h=Es(n,o,!1);if(s(n.slice(h,o))!=Oi.Word)break;o=h}for(;a<i;){let h=Es(n,a);if(s(n.slice(a,h))!=Oi.Word)break;a=h}return o==a?null:xt.range(o+r,a+r)}}kr.allowMultipleSelections=Ez;kr.tabSize=yn.define({combine:t=>t.length?t[0]:4});kr.lineSeparator=$H;kr.readOnly=UH;kr.phrases=yn.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});kr.languageData=BH;kr.changeFilter=NH;kr.transactionFilter=VH;kr.transactionExtender=WH;vT.reconfigure=Zn.define();function Ku(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Uf{eq(e){return this==e}range(e,n=e){return Mz.create(e,n,this)}}Uf.prototype.startSide=Uf.prototype.endSide=0;Uf.prototype.point=!1;Uf.prototype.mapMode=ra.TrackDel;function SR(t,e){return t==e||t.constructor==e.constructor&&t.eq(e)}let Mz=class HH{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new HH(e,n,r)}};function Rz(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class kR{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let h=o+a>>1,p=s[h]-e||(r?this.value[h].endSide:this.value[h].startSide)-n;if(h==o)return p>=0?o:a;p>=0?a=h:o=h+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let h=0;h<this.value.length;h++){let p=this.value[h],g=this.from[h]+e,y=this.to[h]+e,b,S;if(g==y){let P=n.mapPos(g,p.startSide,p.mapMode);if(P==null||(b=S=P,p.startSide!=p.endSide&&(S=n.mapPos(g,p.endSide),S<b)))continue}else if(b=n.mapPos(g,p.startSide),S=n.mapPos(y,p.endSide),b>S||b==S&&p.startSide>0&&p.endSide<=0)continue;(S-b||p.endSide-p.startSide)<0||(o<0&&(o=b),p.point&&(a=Math.max(a,S-b)),r.push(p),i.push(b-o),s.push(S-o))}return{mapped:r.length?new kR(i,s,r,a):null,pos:o}}}class pr{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new pr(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(Rz)),this.isEmpty)return n.length?pr.of(n):this;let a=new GH(this,null,-1).goto(0),h=0,p=[],g=new Xh;for(;a.value||h<n.length;)if(h<n.length&&(a.from-n[h].from||a.startSide-n[h].value.startSide)>=0){let y=n[h++];g.addInner(y.from,y.to,y.value)||p.push(y)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(h==n.length||this.chunkEnd(a.chunkIndex)<n[h].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&g.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(g.addInner(a.from,a.to,a.value)||p.push(Mz.create(a.from,a.to,a.value))),a.next());return g.finishInner(this.nextLayer.isEmpty&&!p.length?pr.empty:this.nextLayer.update({add:p,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],h=this.chunk[o],p=e.touchesRange(a,a+h.length);if(p===!1)i=Math.max(i,h.maxPoint),n.push(h),r.push(e.mapPos(a));else if(p===!0){let{mapped:g,pos:y}=h.map(a,e);g&&(i=Math.max(i,g.maxPoint),n.push(g),r.push(y))}}let s=this.nextLayer.map(e);return n.length==0?s:new pr(r,n,s||pr.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return O1.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return O1.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(y=>y.maxPoint>0||!y.isEmpty&&y.maxPoint>=s),a=n.filter(y=>y.maxPoint>0||!y.isEmpty&&y.maxPoint>=s),h=T6(o,a,r),p=new Fv(o,h,s),g=new Fv(a,h,s);r.iterGaps((y,b,S)=>j6(p,y,g,b,S,i)),r.empty&&r.length==0&&j6(p,0,g,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(g=>!g.isEmpty&&n.indexOf(g)<0),o=n.filter(g=>!g.isEmpty&&e.indexOf(g)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=T6(s,o),h=new Fv(s,a,0).goto(r),p=new Fv(o,a,0).goto(r);for(;;){if(h.to!=p.to||!Dz(h.active,p.active)||h.point&&(!p.point||!SR(h.point,p.point)))return!1;if(h.to>i)return!0;h.next(),p.next()}}static spans(e,n,r,i,s=-1){let o=new Fv(e,null,s).goto(n),a=n,h=o.openStart;for(;;){let p=Math.min(o.to,r);if(o.point){let g=o.activeForPoint(o.to),y=o.pointFrom<n?g.length+1:o.point.startSide<0?g.length:Math.min(g.length,h);i.point(a,p,o.point,g,y,o.pointRank),h=Math.min(o.openEnd(p),g.length)}else p>a&&(i.span(a,p,o.active,h),h=o.openEnd(p));if(o.to>r)return h+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new Xh;for(let i of e instanceof Mz?[e]:n?F2e(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return pr.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=pr.empty;i=i.nextLayer)n=new pr(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}pr.empty=new pr([],[],null,-1);function F2e(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(Rz(e,r)>0)return t.slice().sort(Rz);e=r}return t}pr.empty.nextLayer=pr.empty;class Xh{finishChunk(e){this.chunks.push(new kR(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Xh)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(pr.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=pr.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function T6(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class GH{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class O1{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new GH(o,n,r,s));return i.length==1?i[0]:new O1(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)xO(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)xO(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),xO(this.heap,0)}}}function xO(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Fv{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=O1.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){_S(this.active,e),_S(this.activeTo,e),_S(this.activeRank,e),this.minActive=P6(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;wS(this.active,n,r),wS(this.activeTo,n,i),wS(this.activeRank,n,s),e&&wS(e,n,this.cursor.from),this.minActive=P6(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&_S(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function j6(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,h=r-e,p=!!s.boundChange;for(let g=!1;;){let y=t.to+h-n.to,b=y||t.endSide-n.endSide,S=b<0?t.to+h:n.to,P=Math.min(S,o);if(t.point||n.point?(t.point&&n.point&&SR(t.point,n.point)&&Dz(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,P,t.point,n.point),g=!1):(g&&s.boundChange(a),P>a&&!Dz(t.active,n.active)&&s.compareRange(a,P,t.active,n.active),p&&P<o&&(y||t.openEnd(S)!=n.openEnd(S))&&(g=!0)),S>o)break;a=S,b<=0&&t.next(),b>=0&&n.next()}}function Dz(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!SR(t[n],e[n]))return!1;return!0}function _S(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function wS(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function P6(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function dx(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Es(t,i));return r}function Lz(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Es(t,i)}return r===!0?-1:t.length}const Fz="",O6=typeof Symbol>"u"?"__"+Fz:Symbol.for(Fz),Bz=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),A6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class qf{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,h,p){let g=[],y=/^@(\w+)\b/.exec(o[0]),b=y&&y[1]=="keyframes";if(y&&a==null)return h.push(o[0]+";");for(let S in a){let P=a[S];if(/&/.test(S))s(S.split(/,\s*/).map(O=>o.map(D=>O.replace(/&/,D))).reduce((O,D)=>O.concat(D)),P,h);else if(P&&typeof P=="object"){if(!y)throw new RangeError("The value of a property ("+S+") should be a primitive value.");s(i(S),P,g,b)}else P!=null&&g.push(S.replace(/_.*/,"").replace(/[A-Z]/g,O=>"-"+O.toLowerCase())+": "+P+";")}(g.length||b)&&h.push((r&&!y&&!p?o.map(r):o).join(", ")+" {"+g.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=A6[O6]||1;return A6[O6]=e+1,Fz+e.toString(36)}static mount(e,n,r){let i=e[Bz],s=r&&r.nonce;i?s&&i.setNonce(s):i=new B2e(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let E6=new Map;class B2e{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=E6.get(r);if(s)return e[Bz]=s;this.sheet=new i.CSSStyleSheet,E6.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[Bz]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],h=this.modules.indexOf(a);if(h<s&&h>-1&&(this.modules.splice(h,1),s--,h=-1),h==-1){if(this.modules.splice(s++,0,a),r)for(let p=0;p<a.rules.length;p++)r.insertRule(a.rules[p],i++)}else{for(;s<h;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let h=0;h<this.modules.length;h++)o+=this.modules[h].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Qf={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},A1={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},$2e=typeof navigator<"u"&&/Mac/.test(navigator.platform),N2e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ho=0;ho<10;ho++)Qf[48+ho]=Qf[96+ho]=String(ho);for(var ho=1;ho<=24;ho++)Qf[ho+111]="F"+ho;for(var ho=65;ho<=90;ho++)Qf[ho]=String.fromCharCode(ho+32),A1[ho]=String.fromCharCode(ho);for(var vO in Qf)A1.hasOwnProperty(vO)||(A1[vO]=Qf[vO]);function V2e(t){var e=$2e&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||N2e&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?A1:Qf)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function si(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)XH(t,arguments[e]);return t}function XH(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)XH(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}let ta=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},$z=typeof document<"u"?document:{documentElement:{style:{}}};const Nz=/Edge\/(\d+)/.exec(ta.userAgent),KH=/MSIE \d/.test(ta.userAgent),Vz=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ta.userAgent),bT=!!(KH||Vz||Nz),z6=!bT&&/gecko\/(\d+)/i.test(ta.userAgent),bO=!bT&&/Chrome\/(\d+)/.exec(ta.userAgent),W2e="webkitFontSmoothing"in $z.documentElement.style,Wz=!bT&&/Apple Computer/.test(ta.vendor),I6=Wz&&(/Mobile\/\w+/.test(ta.userAgent)||ta.maxTouchPoints>2);var gn={mac:I6||/Mac/.test(ta.platform),windows:/Win/.test(ta.platform),linux:/Linux|X11/.test(ta.platform),ie:bT,ie_version:KH?$z.documentMode||6:Vz?+Vz[1]:Nz?+Nz[1]:0,gecko:z6,gecko_version:z6?+(/Firefox\/(\d+)/.exec(ta.userAgent)||[0,0])[1]:0,chrome:!!bO,chrome_version:bO?+bO[1]:0,ios:I6,android:/Android\b/.test(ta.userAgent),webkit_version:W2e?+(/\bAppleWebKit\/(\d+)/.exec(ta.userAgent)||[0,0])[1]:0,safari:Wz,safari_version:Wz?+(/\bVersion\/(\d+(\.\d+)?)/.exec(ta.userAgent)||[0,0])[1]:0,tabSize:$z.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function CR(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const L2=Object.create(null);function TR(t,e,n){if(t==e)return!0;t||(t=L2),e||(e=L2);let r=Object.keys(t),i=Object.keys(e);if(r.length-0!=i.length-0)return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function U2e(t,e){for(let n=t.attributes.length-1;n>=0;n--){let r=t.attributes[n].name;e[r]==null&&t.removeAttribute(r)}for(let n in e){let r=e[n];n=="style"?t.style.cssText=r:t.getAttribute(n)!=r&&t.setAttribute(n,r)}}function M6(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function q2e(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class Zu{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var xo=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(xo||(xo={}));class In extends Uf{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new E_(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Qm(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=ZH(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new Qm(e,r,i,n,e.widget||null,!0)}static line(e){return new z_(e)}static set(e,n=!1){return pr.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}In.none=pr.empty;class E_ extends In{constructor(e){let{start:n,end:r}=ZH(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?CR(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||L2}eq(e){return this==e||e instanceof E_&&this.tagName==e.tagName&&TR(this.attrs,e.attrs)}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}E_.prototype.point=!1;class z_ extends In{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof z_&&this.spec.class==e.spec.class&&TR(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}z_.prototype.mapMode=ra.TrackBefore;z_.prototype.point=!0;class Qm extends In{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?ra.TrackBefore:ra.TrackAfter:ra.TrackDel}get type(){return this.startSide!=this.endSide?xo.WidgetRange:this.startSide<=0?xo.WidgetBefore:xo.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Qm&&Q2e(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Qm.prototype.point=!0;function ZH(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function Q2e(t,e){return t==e||!!(t&&e&&t.compare(e))}function n0(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class E1 extends Uf{constructor(e,n){super(),this.tagName=e,this.attributes=n}eq(e){return e==this||e instanceof E1&&this.tagName==e.tagName&&TR(this.attributes,e.attributes)}static create(e){return new E1(e.tagName,e.attributes||L2)}static set(e,n=!1){return pr.of(e,n)}}E1.prototype.startSide=E1.prototype.endSide=-1;function q0(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Uz(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Db(t,e){if(!e.anchorNode)return!1;try{return Uz(t,e.anchorNode)}catch{return!1}}function Lb(t){return t.nodeType==3?I1(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Fb(t,e,n,r){return n?R6(t,e,n,r,-1)||R6(t,e,n,r,1):!1}function Hf(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function F2(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function R6(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Kh(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Hf(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?Kh(t):0}else return!1}}function Kh(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function z1(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function H2e(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function YH(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function G2e(t,e,n,r,i,s,o,a){let h=t.ownerDocument,p=h.defaultView||window;for(let g=t,y=!1;g&&!y;)if(g.nodeType==1){let b,S=g==h.body,P=1,O=1;if(S)b=H2e(p);else{if(/^(fixed|sticky)$/.test(getComputedStyle(g).position)&&(y=!0),g.scrollHeight<=g.clientHeight&&g.scrollWidth<=g.clientWidth){g=g.assignedSlot||g.parentNode;continue}let F=g.getBoundingClientRect();({scaleX:P,scaleY:O}=YH(g,F)),b={left:F.left,right:F.left+g.clientWidth*P,top:F.top,bottom:F.top+g.clientHeight*O}}let D=0,z=0;if(i=="nearest")e.top<b.top?(z=e.top-(b.top+o),n>0&&e.bottom>b.bottom+z&&(z=e.bottom-b.bottom+o)):e.bottom>b.bottom&&(z=e.bottom-b.bottom+o,n<0&&e.top-z<b.top&&(z=e.top-(b.top+o)));else{let F=e.bottom-e.top,R=b.bottom-b.top;z=(i=="center"&&F<=R?e.top+F/2-R/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-R+o)-b.top}if(r=="nearest"?e.left<b.left?(D=e.left-(b.left+s),n>0&&e.right>b.right+D&&(D=e.right-b.right+s)):e.right>b.right&&(D=e.right-b.right+s,n<0&&e.left<b.left+D&&(D=e.left-(b.left+s))):D=(r=="center"?e.left+(e.right-e.left)/2-(b.right-b.left)/2:r=="start"==a?e.left-s:e.right-(b.right-b.left)+s)-b.left,D||z)if(S)p.scrollBy(D,z);else{let F=0,R=0;if(z){let N=g.scrollTop;g.scrollTop+=z/O,R=(g.scrollTop-N)*O}if(D){let N=g.scrollLeft;g.scrollLeft+=D/P,F=(g.scrollLeft-N)*P}e={left:e.left-F,top:e.top-R,right:e.right-F,bottom:e.bottom-R},F&&Math.abs(F-D)<1&&(r="nearest"),R&&Math.abs(R-z)<1&&(i="nearest")}if(S)break;(e.top<b.top||e.bottom>b.bottom||e.left<b.left||e.right>b.right)&&(e={left:Math.max(e.left,b.left),right:Math.min(e.right,b.right),top:Math.max(e.top,b.top),bottom:Math.min(e.bottom,b.bottom)}),g=g.assignedSlot||g.parentNode}else if(g.nodeType==11)g=g.host;else break}function X2e(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class K2e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?Kh(n):0),r,Math.min(e.focusOffset,r?Kh(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Up=null;gn.safari&&gn.safari_version>=26&&(Up=!1);function JH(t){if(t.setActive)return t.setActive();if(Up)return t.focus(Up);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Up==null?{get preventScroll(){return Up={preventScroll:!0},!0}}:void 0),!Up){Up=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let D6;function I1(t,e,n=e){let r=D6||(D6=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function r0(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function Z2e(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function Y2e(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,Kh(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=Kh(n))}else{if(n==t)return!0;r=Hf(n),n=n.parentNode}}function eG(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function tG(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=Kh(n)}else if(n.parentNode&&!F2(n))r=Hf(n),n=n.parentNode;else return null}}function nG(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!F2(n))r=Hf(n)+1,n=n.parentNode;else return null}}class Lc{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Lc(e.parentNode,Hf(e),n)}static after(e,n){return new Lc(e.parentNode,Hf(e)+1,n)}}var ci=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(ci||(ci={}));const Hm=ci.LTR,jR=ci.RTL;function rG(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const J2e=rG("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),eCe=rG("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),qz=Object.create(null),mu=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);qz[e]=n,qz[n]=-e}function iG(t){return t<=247?J2e[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?eCe[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const tCe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Rh{get dir(){return this.level%2?jR:Hm}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function sG(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!sG(r.inner,i.inner))return!1}return!0}const li=[];function nCe(t,e,n,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:n,h=s?256:i;for(let p=o,g=h,y=h;p<a;p++){let b=iG(t.charCodeAt(p));b==512?b=g:b==8&&y==4&&(b=16),li[p]=b==4?2:b,b&7&&(y=b),g=b}for(let p=o,g=h,y=h;p<a;p++){let b=li[p];if(b==128)p<a-1&&g==li[p+1]&&g&24?b=li[p]=g:li[p]=256;else if(b==64){let S=p+1;for(;S<a&&li[S]==64;)S++;let P=p&&g==8||S<n&&li[S]==8?y==1?1:8:256;for(let O=p;O<S;O++)li[O]=P;p=S-1}else b==8&&y==1&&(li[p]=1);g=b,b&7&&(y=b)}}}function rCe(t,e,n,r,i){let s=i==1?2:1;for(let o=0,a=0,h=0;o<=r.length;o++){let p=o?r[o-1].to:e,g=o<r.length?r[o].from:n;for(let y=p,b,S,P;y<g;y++)if(S=qz[b=t.charCodeAt(y)])if(S<0){for(let O=a-3;O>=0;O-=3)if(mu[O+1]==-S){let D=mu[O+2],z=D&2?i:D&4?D&1?s:i:0;z&&(li[y]=li[mu[O]]=z),a=O;break}}else{if(mu.length==189)break;mu[a++]=y,mu[a++]=b,mu[a++]=h}else if((P=li[y])==2||P==1){let O=P==i;h=O?0:1;for(let D=a-3;D>=0;D-=3){let z=mu[D+2];if(z&2)break;if(O)mu[D+2]|=2;else{if(z&4)break;mu[D+2]|=4}}}}}function iCe(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let o=i?n[i-1].to:t,a=i<n.length?n[i].from:e;for(let h=o;h<a;){let p=li[h];if(p==256){let g=h+1;for(;;)if(g==a){if(i==n.length)break;g=n[i++].to,a=i<n.length?n[i].from:e}else if(li[g]==256)g++;else break;let y=s==1,b=(g<e?li[g]:r)==1,S=y==b?y?1:2:r;for(let P=g,O=i,D=O?n[O-1].to:t;P>h;)P==D&&(P=n[--O].from,D=O?n[O-1].to:t),li[--P]=S;h=g}else s=p,h++}}}function Qz(t,e,n,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let h=e,p=0;h<n;){let g=!0,y=!1;if(p==s.length||h<s[p].from){let O=li[h];O!=a&&(g=!1,y=O==16)}let b=!g&&a==1?[]:null,S=g?r:r+1,P=h;e:for(;;)if(p<s.length&&P==s[p].from){if(y)break e;let O=s[p];if(!g)for(let D=O.to,z=p+1;;){if(D==n)break e;if(z<s.length&&s[z].from==D)D=s[z++].to;else{if(li[D]==a)break e;break}}if(p++,b)b.push(O);else{O.from>h&&o.push(new Rh(h,O.from,S));let D=O.direction==Hm!=!(S%2);Hz(t,D?r+1:r,i,O.inner,O.from,O.to,o),h=O.to}P=O.to}else{if(P==n||(g?li[P]!=a:li[P]==a))break;P++}b?Qz(t,h,P,r+1,i,b,o):h<P&&o.push(new Rh(h,P,S)),h=P}else for(let h=n,p=s.length;h>e;){let g=!0,y=!1;if(!p||h>s[p-1].to){let O=li[h-1];O!=a&&(g=!1,y=O==16)}let b=!g&&a==1?[]:null,S=g?r:r+1,P=h;e:for(;;)if(p&&P==s[p-1].to){if(y)break e;let O=s[--p];if(!g)for(let D=O.from,z=p;;){if(D==e)break e;if(z&&s[z-1].to==D)D=s[--z].from;else{if(li[D-1]==a)break e;break}}if(b)b.push(O);else{O.to<h&&o.push(new Rh(O.to,h,S));let D=O.direction==Hm!=!(S%2);Hz(t,D?r+1:r,i,O.inner,O.from,O.to,o),h=O.from}P=O.from}else{if(P==e||(g?li[P-1]!=a:li[P-1]==a))break;P--}b?Qz(t,P,h,r+1,i,b,o):P<h&&o.push(new Rh(P,h,S)),h=P}}function Hz(t,e,n,r,i,s,o){let a=e%2?2:1;nCe(t,i,s,r,a),rCe(t,i,s,r,a),iCe(i,s,r,a),Qz(t,i,s,e,n,r,o)}function sCe(t,e,n){if(!t)return[new Rh(0,0,e==jR?1:0)];if(e==Hm&&!n.length&&!tCe.test(t))return oG(t.length);if(n.length)for(;t.length>li.length;)li[li.length]=256;let r=[],i=e==Hm?0:1;return Hz(t,i,i,n,0,t.length,r),r}function oG(t){return[new Rh(0,t,0)]}let aG="";function oCe(t,e,n,r,i){var s;let o=r.head-t.from,a=Rh.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),h=e[a],p=h.side(i,n);if(o==p){let b=a+=i?1:-1;if(b<0||b>=e.length)return null;h=e[a=b],o=h.side(!i,n),p=h.side(i,n)}let g=Es(t.text,o,h.forward(i,n));(g<h.from||g>h.to)&&(g=p),aG=t.text.slice(Math.min(o,g),Math.max(o,g));let y=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return y&&g==p&&y.level+(i?0:1)<h.level?xt.cursor(y.side(!i,n)+t.from,y.forward(i,n)?1:-1,y.level):xt.cursor(g+t.from,h.forward(i,n)?-1:1,h.level)}function aCe(t,e,n){for(let r=e;r<n;r++){let i=iG(t.charCodeAt(r));if(i==1)return Hm;if(i==2||i==4)return jR}return Hm}const lG=yn.define(),cG=yn.define(),uG=yn.define(),hG=yn.define(),Gz=yn.define(),dG=yn.define(),fG=yn.define(),PR=yn.define(),OR=yn.define(),pG=yn.define({combine:t=>t.some(e=>e)}),mG=yn.define({combine:t=>t.some(e=>e)}),gG=yn.define();class i0{constructor(e,n="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new i0(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new i0(xt.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const SS=Zn.define({map:(t,e)=>t.map(e)}),yG=Zn.define();function La(t,e,n){let r=t.facet(hG);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const Oh=yn.define({combine:t=>t.length?t[0]:!0});let lCe=0;const My=yn.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class ns{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(My.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(My.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=n||{};return new ns(lCe++,e,r,i,a=>{let h=[];return o&&h.push(_T.of(p=>{let g=p.plugin(a);return g?o(g):In.none})),s&&h.push(s(a)),h})}static fromClass(e,n){return ns.define((r,i)=>new e(r,i),n)}}class _O{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(La(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){La(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){La(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const xG=yn.define(),AR=yn.define(),_T=yn.define(),vG=yn.define(),ER=yn.define(),I_=yn.define(),bG=yn.define();function L6(t,e){let n=t.state.facet(bG);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return pr.spans(r,e.from,e.to,{point(){},span(s,o,a,h){let p=s-e.from,g=o-e.from,y=i;for(let b=a.length-1;b>=0;b--,h--){let S=a[b].spec.bidiIsolate,P;if(S==null&&(S=aCe(e.text,p,g)),h>0&&y.length&&(P=y[y.length-1]).to==p&&P.direction==S)P.to=g,y=P.inner;else{let O={from:p,to:g,direction:S,inner:[]};y.push(O),y=O.inner}}}}),i}const _G=yn.define();function zR(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(_G)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const ob=yn.define();class rc{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new rc(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0;;){let a=i<e.length?e[i].fromB:1e9,h=s<n.length?n[s]:1e9,p=Math.min(a,h);if(p==1e9)break;let g=p+o,y=p,b=g;for(;;)if(s<n.length&&n[s]<=y){let S=n[s+1];s+=2,y=Math.max(y,S);for(let P=i;P<e.length&&e[P].fromB<=y;P++)o=e[P].toA-e[P].toB;b=Math.max(b,S+o)}else if(i<e.length&&e[i].fromB<=y){let S=e[i++];y=Math.max(y,S.toB),b=Math.max(b,S.toA),o=S.toA-S.toB}else break;r.push(new rc(g,b,p,y))}return r}}class B2{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Ts.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,h)=>i.push(new rc(s,o,a,h))),this.changedRanges=i}static create(e,n,r){return new B2(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const cCe=[];class ms{constructor(e,n,r=0){this.dom=e,this.length=n,this.flags=r,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return cCe}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let n=this.domAttrs;n&&U2e(this.dom,n)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,n=this.posAtStart){let r=n;for(let i of this.children){if(i==e)return r;r+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,n){return null}domPosFor(e,n){let r=Hf(this.dom),i=this.length?e>0:n>0;return new Lc(this.parent.dom,r+(i?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof ST)return e;return null}static get(e){return e.cmTile}}class wT extends ms{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let n=this.dom,r=null,i,s=(e==null?void 0:e.node)==n?e:null,o=0;for(let a of this.children){if(a.sync(e),o+=a.length+a.breakAfter,i=r?r.nextSibling:n.firstChild,s&&i!=a.dom&&(s.written=!0),a.dom.parentNode==n)for(;i&&i!=a.dom;)i=F6(i);else n.insertBefore(a.dom,i);r=a.dom}for(i=r?r.nextSibling:n.firstChild,s&&i&&(s.written=!0);i;)i=F6(i);this.length=o}}function F6(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class ST extends wT{constructor(e,n){super(n),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let n=ms.get(e);if(n&&this.owns(n))return n;e=e.parentNode}}blockTiles(e){for(let n=[],r=this,i=0,s=0;;)if(i==r.children.length){if(!n.length)return;r=r.parent,r.breakAfter&&s++,i=n.pop()}else{let o=r.children[i++];if(o instanceof Pf)n.push(i),r=o,i=0;else{let a=s+o.length,h=e(o,s);if(h!==void 0)return h;s=a+o.breakAfter}}}resolveBlock(e,n){let r,i=-1,s,o=-1;if(this.blockTiles((a,h)=>{let p=h+a.length;if(e>=h&&e<=p){if(a.isWidget()&&n>=-1&&n<=1){if(a.flags&32)return!0;a.flags&16&&(r=void 0)}(h<e||e==p&&(n<-1?a.length:a.covers(1)))&&(!r||!a.isWidget()&&r.isWidget())&&(r=a,i=e-h),(p>e||e==h&&(n>1?a.length:a.covers(-1)))&&(!s||!a.isWidget()&&s.isWidget())&&(s=a,o=e-h)}}),!r&&!s)throw new Error("No tile at position "+e);return r&&n<0||!s?{tile:r,offset:i}:{tile:s,offset:o}}}class Pf extends wT{constructor(e,n){super(e),this.wrapper=n}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,n){let r=new Pf(n||document.createElement(e.tagName),e);return n||(r.flags|=4),r}}class Q0 extends wT{constructor(e,n){super(e),this.attrs=n}isLine(){return!0}static start(e,n,r){let i=new Q0(n||document.createElement("div"),e);return(!n||!r)&&(i.flags|=4),i}get domAttrs(){return this.attrs}resolveInline(e,n,r){let i=null,s=-1,o=null,a=-1;function h(g,y){for(let b=0,S=0;b<g.children.length&&S<=y;b++){let P=g.children[b],O=S+P.length;O>=y&&(P.isComposite()?h(P,y-S):(!o||o.isHidden&&(n>0||r&&hCe(o,P)))&&(O>y||P.flags&32)?(o=P,a=y-S):(S<y||P.flags&16&&!P.isHidden)&&(i=P,s=y-S)),S=O}}h(this,e);let p=(n<0?i:o)||i||o;return p?{tile:p,offset:p==i?s:a}:null}coordsIn(e,n){let r=this.resolveInline(e,n,!0);return r?r.tile.coordsIn(Math.max(0,r.offset),n):uCe(this)}domIn(e,n){let r=this.resolveInline(e,n);if(r){let{tile:i,offset:s}=r;if(this.dom.contains(i.dom))return i.isText()?new Lc(i.dom,Math.min(i.dom.nodeValue.length,s)):i.domPosFor(s,i.flags&16?1:i.flags&32?-1:n);let o=r.tile.parent,a=!1;for(let h of o.children){if(a)return new Lc(h.dom,0);h==r.tile&&(a=!0)}}return new Lc(this.dom,0)}}function uCe(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Lb(e);return n[n.length-1]||null}function hCe(t,e){let n=t.coordsIn(0,1),r=e.coordsIn(0,1);return n&&r&&r.top<n.bottom}class Ia extends wT{constructor(e,n){super(e),this.mark=n}get domAttrs(){return this.mark.attrs}static of(e,n){let r=new Ia(n||document.createElement(e.tagName),e);return n||(r.flags|=4),r}}class im extends ms{constructor(e,n){super(e,n.length),this.text=n}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,n){let r=this.dom.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?gn.chrome||gn.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=I1(this.dom,i,s).getClientRects();if(!a.length)return null;let h=a[(o?o<0:n>=0)?0:a.length-1];return gn.safari&&!o&&h.width==0&&(h=Array.prototype.find.call(a,p=>p.width)||h),o?z1(h,o<0):h||null}static of(e,n){let r=new im(n||document.createTextNode(e),e);return n||(r.flags|=2),r}}class Gm extends ms{constructor(e,n,r,i){super(e,n,i),this.widget=r}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,n){return this.coordsInWidget(e,n,!1)}coordsInWidget(e,n,r){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;if(r)return z1(this.dom.getBoundingClientRect(),this.length?e==0:n<=0);{let s=this.dom.getClientRects(),o=null;if(!s.length)return null;let a=this.flags&16?!0:this.flags&32?!1:e>0;for(let h=a?s.length-1:0;o=s[h],!(e>0?h==0:h==s.length-1||o.top<o.bottom);h+=a?-1:1);return z1(o,!a)}}get overrideDOMText(){if(!this.length)return Ir.empty;let{root:e}=this;if(!e)return Ir.empty;let n=this.posAtStart;return e.view.state.doc.slice(n,n+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,n,r,i,s){return s||(s=e.toDOM(n),e.editable||(s.contentEditable="false")),new Gm(s,r,e,i)}}class $2 extends ms{constructor(e){let n=document.createElement("img");n.className="cm-widgetBuffer",n.setAttribute("aria-hidden","true"),super(n,0,e)}get isHidden(){return!0}get overrideDOMText(){return Ir.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class dCe{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,n,r){let{tile:i,index:s,beforeBreak:o,parents:a}=this;for(;e||n>0;)if(i.isComposite())if(o){if(!e)break;r&&r.break(),e--,o=!1}else if(s==i.children.length){if(!e&&!a.length)break;r&&r.leave(i),o=!!i.breakAfter,{tile:i,index:s}=a.pop(),s++}else{let h=i.children[s],p=h.breakAfter;(n>0?h.length<=e:h.length<e)&&(!r||r.skip(h,0,h.length)!==!1||!h.isComposite)?(o=!!p,s++,e-=h.length):(a.push({tile:i,index:s}),i=h,s=0,r&&h.isComposite()&&r.enter(h))}else if(s==i.length)o=!!i.breakAfter,{tile:i,index:s}=a.pop(),s++;else if(e){let h=Math.min(e,i.length-s);r&&r.skip(i,s,s+h),e-=h,s+=h}else break;return this.tile=i,this.index=s,this.beforeBreak=o,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class fCe{constructor(e,n,r,i){this.from=e,this.to=n,this.wrapper=r,this.rank=i}}class pCe{constructor(e,n,r){this.cache=e,this.root=n,this.blockWrappers=r,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,n,r,i){var s;this.flushBuffer();let o=this.ensureMarks(n,r),a=o.lastChild;if(a&&a.isText()&&!(a.flags&8)&&a.length+e.length<512){this.cache.reused.set(a,2);let h=o.children[o.children.length-1]=new im(a.dom,a.text+e);h.parent=o}else o.append(i||im.of(e,(s=this.cache.find(im))===null||s===void 0?void 0:s.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,n){let r=this.curLine;r.dom!=n.line.dom&&(r.setDOM(this.cache.reused.has(n.line)?wO(n.line.dom):n.line.dom),this.cache.reused.set(n.line,2));let i=r;for(let a=n.marks.length-1;a>=0;a--){let h=n.marks[a],p=i.lastChild;if(p instanceof Ia&&p.mark.eq(h.mark))p.dom!=h.dom&&p.setDOM(wO(h.dom)),i=p;else{if(this.cache.reused.get(h)){let y=ms.get(h.dom);y&&y.setDOM(wO(h.dom))}let g=Ia.of(h.mark,h.dom);i.append(g),i=g}this.cache.reused.set(h,2)}let s=ms.get(e.text);s&&this.cache.reused.set(s,2);let o=new im(e.text,e.text.nodeValue);o.flags|=8,i.append(o)}addInlineWidget(e,n,r){let i=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);i||this.flushBuffer();let s=this.ensureMarks(n,r);!i&&!(e.flags&16)&&s.append(this.getBuffer(1)),s.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,n,r){this.flushBuffer(),this.ensureMarks(n,r).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let n=this.afterWidget||this.lastBlock;n.length+=e,this.pos+=e}addLineStart(e,n){var r;e||(e=wG);let i=Q0.start(e,n||((r=this.cache.find(Q0))===null||r===void 0?void 0:r.dom),!!n);this.getBlockPos().append(this.lastBlock=this.curLine=i)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,n){var r;let i=this.curLine;for(let s=e.length-1;s>=0;s--){let o=e[s],a;if(n>0&&(a=i.lastChild)&&a instanceof Ia&&a.mark.eq(o))i=a,n--;else{let h=Ia.of(o,(r=this.cache.find(Ia,p=>p.mark.eq(o)))===null||r===void 0?void 0:r.dom);i.append(h),i=h,n=0}}return i}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!B6(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(gn.ios&&B6(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(SO,0,32)||new Gm(SO.toDOM(),0,SO,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let n=new fCe(e.from,e.to,e.value,e.rank),r=this.wrappers.length;for(;r>0&&(this.wrappers[r-1].rank-n.rank||this.wrappers[r-1].to-n.to)<0;)r--;this.wrappers.splice(r,0,n)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let n=this.root;for(let r of this.wrappers){let i=n.lastChild;if(r.from<this.pos&&i instanceof Pf&&i.wrapper.eq(r.wrapper))n=i;else{let s=Pf.of(r.wrapper,(e=this.cache.find(Pf,o=>o.wrapper.eq(r.wrapper)))===null||e===void 0?void 0:e.dom);n.append(s),n=s}}return n}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let n=2|(e<0?16:32),r=this.cache.find($2,void 0,1);return r&&(r.flags=n),r||new $2(n)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class mCe{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:i,lineBreak:s,done:o}=this.cursor.next(this.skipCount);if(this.skipCount=0,o)throw new Error("Ran out of text content when drawing inline views");this.text=i;let a=this.textOff=Math.min(e,i.length);return s?null:i.slice(0,a)}let n=Math.min(this.text.length,this.textOff+e),r=this.text.slice(this.textOff,n);return this.textOff=n,r}}const N2=[Gm,Q0,im,Ia,$2,Pf,ST];for(let t=0;t<N2.length;t++)N2[t].bucket=t;class gCe{constructor(e){this.view=e,this.buckets=N2.map(()=>[]),this.index=N2.map(()=>0),this.reused=new Map}add(e){let n=e.constructor.bucket,r=this.buckets[n];r.length<6?r.push(e):r[this.index[n]=(this.index[n]+1)%6]=e}find(e,n,r=2){let i=e.bucket,s=this.buckets[i],o=this.index[i];for(let a=s.length-1;a>=0;a--){let h=(a+o)%s.length,p=s[h];if((!n||n(p))&&!this.reused.has(p))return s.splice(h,1),h<o&&this.index[i]--,this.reused.set(p,r),p}return null}findWidget(e,n,r){let i=this.buckets[0];if(i.length)for(let s=0,o=0;;s++){if(s==i.length){if(o)return null;o=1,s=0}let a=i[s];if(!this.reused.has(a)&&(o==0?a.widget.compare(e):a.widget.constructor==e.constructor&&e.updateDOM(a.dom,this.view)))return i.splice(s,1),s<this.index[0]&&this.index[0]--,a.widget==e&&a.length==n&&(a.flags&497)==r?(this.reused.set(a,1),a):(this.reused.set(a,2),new Gm(a.dom,n,e,a.flags&-498|r))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,n=2){if(!this.reused.has(e))return this.reused.set(e,n),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class yCe{constructor(e,n,r,i,s){this.view=e,this.decorations=i,this.disallowBlockEffectsFor=s,this.openWidget=!1,this.openMarks=0,this.cache=new gCe(e),this.text=new mCe(e.state.doc),this.builder=new pCe(this.cache,new ST(e,e.contentDOM),pr.iter(r)),this.cache.reused.set(n,2),this.old=new dCe(n),this.reuseWalker={skip:(o,a,h)=>{if(this.cache.add(o),o.isComposite())return!1},enter:o=>this.cache.add(o),leave:()=>{},break:()=>{}}}run(e,n){let r=n&&this.getCompositionContext(n.text);for(let i=0,s=0,o=0;;){let a=o<e.length?e[o++]:null,h=a?a.fromA:this.old.root.length;if(h>i){let p=h-i;this.preserve(p,!o,!a),i=h,s+=p}if(!a)break;n&&a.fromA<=n.range.fromA&&a.toA>=n.range.toA?(this.forward(a.fromA,n.range.fromA,n.range.fromA<n.range.toA?1:-1),this.emit(s,n.range.fromB),this.cache.clear(),this.builder.addComposition(n,r),this.text.skip(n.range.toB-n.range.fromB),this.forward(n.range.fromA,a.toA),this.emit(n.range.toB,a.toB)):(this.forward(a.fromA,a.toA),this.emit(s,a.toB)),s=a.toB,i=a.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,n,r){let i=bCe(this.old),s=this.openMarks;this.old.advance(e,r?1:-1,{skip:(o,a,h)=>{if(o.isWidget())if(this.openWidget)this.builder.continueWidget(h-a);else{let p=h>0||a<o.length?Gm.of(o.widget,this.view,h-a,o.flags&496,this.cache.maybeReuse(o)):this.cache.reuse(o);p.flags&256?(p.flags&=-2,this.builder.addBlockWidget(p)):(this.builder.ensureLine(null),this.builder.addInlineWidget(p,i,s),s=i.length)}else if(o.isText())this.builder.ensureLine(null),!a&&h==o.length?this.builder.addText(o.text,i,s,this.cache.reuse(o)):(this.cache.add(o),this.builder.addText(o.text.slice(a,h),i,s)),s=i.length;else if(o.isLine())o.flags&=-2,this.cache.reused.set(o,1),this.builder.addLine(o);else if(o instanceof $2)this.cache.add(o);else if(o instanceof Ia)this.builder.ensureLine(null),this.builder.addMark(o,i,s),this.cache.reused.set(o,1),s=i.length;else return!1;this.openWidget=!1},enter:o=>{o.isLine()?this.builder.addLineStart(o.attrs,this.cache.maybeReuse(o)):(this.cache.add(o),o instanceof Ia&&i.unshift(o.mark)),this.openWidget=!1},leave:o=>{o.isLine()?i.length&&(i.length=s=0):o instanceof Ia&&(i.shift(),s=Math.min(s,i.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,n){let r=null,i=this.builder,s=0,o=pr.spans(this.decorations,e,n,{point:(a,h,p,g,y,b)=>{if(p instanceof Qm){if(this.disallowBlockEffectsFor[b]){if(p.block)throw new RangeError("Block decorations may not be specified via plugins");if(h>this.view.state.doc.lineAt(a).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(s=g.length,y>g.length)i.continueWidget(h-a);else{let S=p.widget||(p.block?H0.block:H0.inline),P=xCe(p),O=this.cache.findWidget(S,h-a,P)||Gm.of(S,this.view,h-a,P);p.block?(p.startSide>0&&i.addLineStartIfNotCovered(r),i.addBlockWidget(O)):(i.ensureLine(r),i.addInlineWidget(O,g,y))}r=null}else r=vCe(r,p);h>a&&this.text.skip(h-a)},span:(a,h,p,g)=>{for(let y=a;y<h;){let b=this.text.next(Math.min(512,h-y));b==null?(i.addLineStartIfNotCovered(r),i.addBreak(),y++):(i.ensureLine(r),i.addText(b,p,y==a?g:p.length),y+=b.length),r=null}}});i.addLineStartIfNotCovered(r),this.openWidget=o>s,this.openMarks=o}forward(e,n,r=1){n-e<=10?this.old.advance(n-e,r,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(n-e-10,-1),this.old.advance(5,r,this.reuseWalker))}getCompositionContext(e){let n=[],r=null;for(let i=e.parentNode;;i=i.parentNode){let s=ms.get(i);if(i==this.view.contentDOM)break;s instanceof Ia?n.push(s):s!=null&&s.isLine()?r=s:i.nodeName=="DIV"&&!r&&i!=this.view.contentDOM?r=new Q0(i,wG):n.push(Ia.of(new E_({tagName:i.nodeName.toLowerCase(),attributes:q2e(i)}),i))}return{line:r,marks:n}}}function B6(t,e){let n=r=>{for(let i of r.children)if((e?i.isText():i.length)||n(i))return!0;return!1};return n(t)}function xCe(t){let e=t.isReplace?(t.startSide<0?64:0)|(t.endSide>0?128:0):t.startSide>0?32:16;return t.block&&(e|=256),e}const wG={class:"cm-line"};function vCe(t,e){let n=e.spec.attributes,r=e.spec.class;return!n&&!r||(t||(t={class:"cm-line"}),n&&CR(n,t),r&&(t.class+=" "+r)),t}function bCe(t){let e=[];for(let n=t.parents.length;n>1;n--){let r=n==t.parents.length?t.tile:t.parents[n].tile;r instanceof Ia&&e.push(r.mark)}return e}function wO(t){let e=ms.get(t);return e&&e.setDOM(t.cloneNode()),t}class H0 extends Zu{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}H0.inline=new H0("span");H0.block=new H0("div");const SO=new class extends Zu{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class $6{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=In.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new ST(e,e.contentDOM),this.updateInner([new rc(0,0,0,e.state.doc.length)],null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:g,toA:y})=>y<this.minWidthFrom||g>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!OCe(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?wCe(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){let{from:g,to:y}=this.hasComposition;r=new rc(g,y,e.changes.mapPos(g,-1),e.changes.mapPos(y,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(gn.ie||gn.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.blockWrappers;this.updateDeco();let h=CCe(o,this.decorations,e.changes);h.length&&(r=rc.extendWithRanges(r,h));let p=jCe(a,this.blockWrappers,e.changes);return p.length&&(r=rc.extendWithRanges(r,p)),s&&!r.some(g=>g.fromA<=s.range.fromA&&g.toA>=s.range.toA)&&(r=s.range.addToSet(r.slice())),this.tile.flags&2&&r.length==0?!1:(this.updateInner(r,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n){this.view.viewState.mustMeasureContent=!0;let{observer:r}=this.view;r.ignore(()=>{if(n||e.length){let o=this.tile,a=new yCe(this.view,o,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=a.run(e,n),Xz(o,a.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=gn.chrome||gn.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(s),s&&(s.written||r.selectionRange.focusNode!=s.node||!this.tile.dom.contains(s.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.tile.children)s.isWidget()&&s.widget instanceof kO&&i.push(s.dom);r.updateGaps(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(yG)&&(this.editContextFormatting=r.value)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:r}=this.tile,i=this.view.root.activeElement,s=i==r,o=!s&&!(this.view.state.facet(Oh)||r.tabIndex>-1)&&Db(r,this.view.observer.selectionRange)&&!(i&&r.contains(i));if(!(s||n||o))return;let a=this.forceSelection;this.forceSelection=!1;let h=this.view.state.selection.main,p,g;if(h.empty?g=p=this.inlineDOMNearPos(h.anchor,h.assoc||1):(g=this.inlineDOMNearPos(h.head,h.head==h.from?1:-1),p=this.inlineDOMNearPos(h.anchor,h.anchor==h.from?1:-1)),gn.gecko&&h.empty&&!this.hasComposition&&_Ce(p)){let b=document.createTextNode("");this.view.observer.ignore(()=>p.node.insertBefore(b,p.node.childNodes[p.offset]||null)),p=g=new Lc(b,0),a=!0}let y=this.view.observer.selectionRange;(a||!y.focusNode||(!Fb(p.node,p.offset,y.anchorNode,y.anchorOffset)||!Fb(g.node,g.offset,y.focusNode,y.focusOffset))&&!this.suppressWidgetCursorChange(y,h))&&(this.view.observer.ignore(()=>{gn.android&&gn.chrome&&r.contains(y.focusNode)&&PCe(y.focusNode,r)&&(r.blur(),r.focus({preventScroll:!0}));let b=q0(this.view.root);if(b)if(h.empty){if(gn.gecko){let S=SCe(p.node,p.offset);if(S&&S!=3){let P=(S==1?tG:nG)(p.node,p.offset);P&&(p=new Lc(P.node,P.offset))}}b.collapse(p.node,p.offset),h.bidiLevel!=null&&b.caretBidiLevel!==void 0&&(b.caretBidiLevel=h.bidiLevel)}else if(b.extend){b.collapse(p.node,p.offset);try{b.extend(g.node,g.offset)}catch{}}else{let S=document.createRange();h.anchor>h.head&&([p,g]=[g,p]),S.setEnd(g.node,g.offset),S.setStart(p.node,p.offset),b.removeAllRanges(),b.addRange(S)}o&&this.view.root.activeElement==r&&(r.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(p,g)),this.impreciseAnchor=p.precise?null:new Lc(y.anchorNode,y.anchorOffset),this.impreciseHead=g.precise?null:new Lc(y.focusNode,y.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Fb(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=q0(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=this.lineAt(n.head,n.assoc);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let h=this.coordsAt(n.head,-1),p=this.coordsAt(n.head,1);if(!h||!p||h.bottom>p.top)return;let g=this.domAtPos(n.head+n.assoc,n.assoc);r.collapse(g.node,g.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let y=e.observer.selectionRange;e.docView.posFromDOM(y.anchorNode,y.anchorOffset)!=n.from&&r.collapse(i,s)}posFromDOM(e,n){let r=this.tile.nearest(e);if(!r)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let i=r.posAtStart;if(r.isComposite()){let s;if(e==r.dom)s=r.dom.childNodes[n];else{let o=Kh(e)==0?0:n==0?-1:1;for(;;){let a=e.parentNode;if(a==r.dom)break;o==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?o=-1:o=1),e=a}o<0?s=e:s=e.nextSibling}if(s==r.dom.firstChild)return i;for(;s&&!ms.get(s);)s=s.nextSibling;if(!s)return i+r.length;for(let o=0,a=i;;o++){let h=r.children[o];if(h.dom==s)return a;a+=h.length+h.breakAfter}}else return r.isText()?e==r.dom?i+n:i+(n?r.length:0):i}domAtPos(e,n){let{tile:r,offset:i}=this.tile.resolveBlock(e,n);return r.isWidget()?r.domPosFor(e,n):r.domIn(i,n)}inlineDOMNearPos(e,n){let r,i=-1,s=!1,o,a=-1,h=!1;return this.tile.blockTiles((p,g)=>{if(p.isWidget()){if(p.flags&32&&g>=e)return!0;p.flags&16&&(s=!0)}else{let y=g+p.length;if(g<=e&&(r=p,i=e-g,s=y<e),y>=e&&!o&&(o=p,a=e-g,h=g>e),g>e&&o)return!0}}),!r&&!o?this.domAtPos(e,n):(s&&o?r=null:h&&r&&(o=null),r&&n<0||!o?r.domIn(i,n):o.domIn(a,n))}coordsAt(e,n){let{tile:r,offset:i}=this.tile.resolveBlock(e,n);return r.isWidget()?r.widget instanceof kO?null:r.coordsInWidget(i,n,!0):r.coordsIn(i,n)}lineAt(e,n){let{tile:r}=this.tile.resolveBlock(e,n);return r.isLine()?r:null}coordsForChar(e){let{tile:n,offset:r}=this.tile.resolveBlock(e,1);if(!n.isLine())return null;function i(s,o){if(s.isComposite())for(let a of s.children){if(a.length>=o){let h=i(a,o);if(h)return h}if(o-=a.length,o<0)break}else if(s.isText()&&o<s.length){let a=Es(s.text,o);if(a==o)return null;let h=I1(s.dom,o,a).getClientRects();for(let p=0;p<h.length;p++){let g=h[p];if(p==h.length-1||g.top<g.bottom&&g.left<g.right)return g}}return null}return i(n,r)}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,h=this.view.textDirection==ci.LTR,p=0,g=(y,b,S)=>{for(let P=0;P<y.children.length&&!(b>i);P++){let O=y.children[P],D=b+O.length,z=O.dom.getBoundingClientRect(),{height:F}=z;if(S&&!P&&(p+=z.top-S.top),O instanceof Pf)D>r&&g(O,b,z);else if(b>=r&&(p>0&&n.push(-p),n.push(F+p),p=0,o)){let R=O.dom.lastChild,N=R?Lb(R):[];if(N.length){let Q=N[N.length-1],q=h?Q.right-z.left:z.right-Q.left;q>a&&(a=q,this.minWidth=s,this.minWidthFrom=b,this.minWidthTo=D)}}S&&P==y.children.length-1&&(p+=S.bottom-z.bottom),b=D+O.breakAfter}};return g(this.tile,0,null),n}textDirectionAt(e){let{tile:n}=this.tile.resolveBlock(e,1);return getComputedStyle(n.dom).direction=="rtl"?ci.RTL:ci.LTR}measureTextSize(){let e=this.tile.blockTiles(o=>{if(o.isLine()&&o.children.length&&o.length<=20){let a=0,h;for(let p of o.children){if(!p.isText()||/[^ -~]/.test(p.text))return;let g=Lb(p.dom);if(g.length!=1)return;a+=g[0].width,h=g[0].height}if(a)return{lineHeight:o.dom.getBoundingClientRect().height,charWidth:a/o.length,textHeight:h}}});if(e)return e;let n=document.createElement("div"),r,i,s;return n.className="cm-line",n.style.width="99999px",n.style.position="absolute",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(n);let o=Lb(n.firstChild)[0];r=n.getBoundingClientRect().height,i=o&&o.width?o.width/27:7,s=o&&o.height?o.height:r,n.remove()}),{lineHeight:r,charWidth:i,textHeight:s}}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.view.state.doc.length;if(o>r){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(In.replace({widget:new kO(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return In.set(e)}updateDeco(){let e=1,n=this.view.state.facet(_T).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(ER).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(pr.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(vG).map(s=>typeof s=="function"?s(this.view):s)}scrollIntoView(e){if(e.isSnapshot){let p=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=p.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let p of this.view.state.facet(gG))try{if(p(this.view,e.range,e))return!0}catch(g){La(this.view.state,g,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=zR(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:h}=this.view.scrollDOM;G2e(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==ci.LTR)}lineHasWidget(e){let n=r=>r.isWidget()||r.children.some(n);return n(this.tile.resolveBlock(e,1).tile)}destroy(){Xz(this.tile)}}function Xz(t,e){let n=e==null?void 0:e.get(t);if(n!=1){n==null&&t.destroy();for(let r of t.children)Xz(r,e)}}function _Ce(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function SG(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=tG(n.focusNode,n.focusOffset),i=nG(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=ms.get(i.node);if(!a||a.isText()&&a.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let h=ms.get(r.node);!h||h.isText()&&h.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function wCe(t,e,n){let r=SG(t,n);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let h=e.invertedDesc;return{range:new rc(h.mapPos(s),h.mapPos(o),s,o),text:i}}function SCe(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let kCe=class{constructor(){this.changes=[]}compareRange(e,n){n0(e,n,this.changes)}comparePoint(e,n){n0(e,n,this.changes)}boundChange(e){n0(e,e,this.changes)}};function CCe(t,e,n){let r=new kCe;return pr.compare(t,e,n,r),r.changes}class TCe{constructor(){this.changes=[]}compareRange(e,n){n0(e,n,this.changes)}comparePoint(){}boundChange(e){n0(e,e,this.changes)}}function jCe(t,e,n){let r=new TCe;return pr.compare(t,e,n,r),r.changes}function PCe(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function OCe(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}class kO extends Zu{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function ACe(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return xt.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=Es(i.text,s,!1):a=Es(i.text,s);let h=r(i.text.slice(o,a));for(;o>0;){let p=Es(i.text,o,!1);if(r(i.text.slice(p,o))!=h)break;o=p}for(;a<i.length;){let p=Es(i.text,a);if(r(i.text.slice(a,p))!=h)break;a=p}return xt.range(o+i.from,a+i.from)}function ECe(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,h=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=h*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+Lz(o,s,t.state.tabSize)}function Kz(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==xo.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function zCe(t,e,n,r){let i=Kz(t,e.head,e.assoc||-1),s=!r||i.type!=xo.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),h=t.posAtCoords({x:n==(a==ci.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(h!=null)return xt.cursor(h,n?-1:1)}return xt.cursor(n?i.to:i.from,n?-1:1)}function N6(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,h=null;;){let p=oCe(i,s,o,a,n),g=aG;if(!p){if(i.number==(n?t.state.doc.lines:1))return a;g=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),p=t.visualLineSide(i,!n)}if(h){if(!h(g))return a}else{if(!r)return p;h=r(g)}a=p}}function ICe(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==Oi.Space&&(i=o),i==o}}function MCe(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return xt.cursor(i,e.assoc);let o=e.goalColumn,a,h=t.contentDOM.getBoundingClientRect(),p=t.coordsAtPos(i,(e.empty?e.assoc:0)||(n?1:-1)),g=t.documentTop;if(p)o==null&&(o=p.left-h.left),a=s<0?p.top:p.bottom;else{let P=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(h.right-h.left,t.defaultCharacterWidth*(i-P.from))),a=(s<0?P.top:P.bottom)+g}let y=h.left+o,b=r??t.viewState.heightOracle.textHeight>>1,S=Zz(t,{x:y,y:a+b*s},!1,s);return xt.cursor(S.pos,S.assoc,void 0,o)}function Bb(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let h=r||n||(e-s<o-e?-1:1);e=h<0?s:o,r=h}});if(!r)return e}}function kG(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=Bb(t,i.from,0);o!=i.from&&(s=xt.cursor(o,-1))}else{let o=Bb(t,i.from,-1),a=Bb(t,i.to,1);(o!=i.from||a!=i.to)&&(s=xt.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?xt.create(n,e.mainIndex):e}function CO(t,e,n){let r=Bb(t.state.facet(I_).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:xt.cursor(r,r<n.from?1:-1)}class Iu{constructor(e,n){this.pos=e,this.assoc=n}}function Zz(t,e,n,r){let i=t.contentDOM.getBoundingClientRect(),s=i.top+t.viewState.paddingTop,{x:o,y:a}=e,h=a-s,p;for(;;){if(h<0)return new Iu(0,1);if(h>t.viewState.docHeight)return new Iu(t.state.doc.length,-1);if(p=t.elementAtHeight(h),r==null)break;if(p.type==xo.Text){if(r<0?p.to<t.viewport.from:p.from>t.viewport.to)break;let b=t.docView.coordsAt(r<0?p.from:p.to,r>0?-1:1);if(b&&(r<0?b.top<=h+s:b.bottom>=h+s))break}let y=t.viewState.heightOracle.textHeight/2;h=r>0?p.bottom+y:p.top-y}if(t.viewport.from>=p.to||t.viewport.to<=p.from){if(n)return null;if(p.type==xo.Text){let y=ECe(t,i,p,o,a);return new Iu(y,y==p.from?1:-1)}}if(p.type!=xo.Text)return h<(p.top+p.bottom)/2?new Iu(p.from,1):new Iu(p.to,-1);let g=t.docView.lineAt(p.from,2);return(!g||g.length!=p.length)&&(g=t.docView.lineAt(p.from,-2)),CG(t,g,p.from,o,a)}function CG(t,e,n,r,i){let s=-1,o=null,a=1e9,h=1e9,p=i,g=i,y=(b,S)=>{for(let P=0;P<b.length;P++){let O=b[P];if(O.top==O.bottom)continue;let D=O.left>r?O.left-r:O.right<r?r-O.right:0,z=O.top>i?O.top-i:O.bottom<i?i-O.bottom:0;O.top<=g&&O.bottom>=p&&(p=Math.min(O.top,p),g=Math.max(O.bottom,g),z=0),(s<0||(z-h||D-a)<0)&&(s>=0&&h&&a<D&&o.top<=g-2&&o.bottom>=p+2?h=0:(s=S,a=D,h=z,o=O))}};if(e.isText()){for(let S=0;S<e.length;){let P=Es(e.text,S);if(y(I1(e.dom,S,P).getClientRects(),S),!a&&!h)break;S=P}return r>(o.left+o.right)/2==(V6(t,s+n)==ci.LTR)?new Iu(n+Es(e.text,s),-1):new Iu(n+s,1)}else{if(!e.length)return new Iu(n,1);for(let O=0;O<e.children.length;O++){let D=e.children[O];if(D.flags&48)continue;let z=(D.dom.nodeType==1?D.dom:I1(D.dom,0,D.length)).getClientRects();if(y(z,O),!a&&!h)break}let b=e.children[s],S=e.posBefore(b,n);return b.isComposite()||b.isText()?CG(t,b,S,Math.max(o.left,Math.min(o.right,r)),i):r>(o.left+o.right)/2==(V6(t,s+n)==ci.LTR)?new Iu(S+b.length,-1):new Iu(S,1)}}function V6(t,e){let n=t.state.doc.lineAt(e);return t.bidiSpans(n)[Rh.find(t.bidiSpans(n),e-n.from,-1,1)].dir}const ab="";class RCe{constructor(e,n){this.points=e,this.view=n,this.text="",this.lineSeparator=n.state.facet(kr.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ab}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=ms.get(i),a=i.nextSibling;if(a==n){o!=null&&o.breakAfter&&!a&&r!=this.view.contentDOM&&this.lineBreak();break}let h=ms.get(a);(o&&h?o.breakAfter:(o?o.breakAfter:F2(i))||F2(a)&&(i.nodeName!="BR"||o!=null&&o.isWidget())&&this.text.length>s)&&!LCe(a,n)&&this.lineBreak(),i=a}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=o-1);r=s+o}}readNode(e){let n=ms.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(DCe(e,r.node,r.offset)?n:0))}}function DCe(t,e,n){for(;;){if(!e||n<Kh(e))return!1;if(e==t)return!0;n=Hf(e)+1,e=e.parentNode}}function LCe(t,e){let n;for(;!(t==e||!t);t=t.nextSibling){let r=ms.get(t);if(!(r!=null&&r.isWidget()))return!1;r&&(n||(n=[])).push(r)}if(n)for(let r of n){let i=r.overrideDOMText;if(i!=null&&i.length)return!1}return!0}class W6{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class FCe{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=TG(e.docView.tile,n,r,0))){let a=s||o?[]:$Ce(e),h=new RCe(a,e);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=NCe(a,this.bounds.from)}else{let a=e.observer.selectionRange,h=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!Uz(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),p=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!Uz(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),g=e.viewport;if((gn.ios||gn.chrome)&&e.state.selection.main.empty&&h!=p&&(g.from>0||g.to<e.state.doc.length)){let y=Math.min(h,p),b=Math.max(h,p),S=g.from-y,P=g.to-b;(S==0||S==1||y==0)&&(P==0||P==-1||b==e.state.doc.length)&&(h=0,p=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(xt.range(p,h)):this.newSel=xt.single(p,h)}}}function TG(t,e,n,r){if(t.isComposite()){let i=-1,s=-1,o=-1,a=-1;for(let h=0,p=r,g=r;h<t.children.length;h++){let y=t.children[h],b=p+y.length;if(p<e&&b>n)return TG(y,e,n,p);if(b>=e&&i==-1&&(i=h,s=p),p>n&&y.dom.parentNode==t.dom){o=h,a=g;break}g=b,p=b+y.breakAfter}return{from:s,to:a<0?r+t.length:a,startDOM:(i?t.children[i-1].dom.nextSibling:null)||t.dom.firstChild,endDOM:o<t.children.length&&o>=0?t.children[o].dom:null}}else return t.isText()?{from:r,to:r+t.length,startDOM:t.dom,endDOM:t.dom.nextSibling}:null}function jG(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,h=i.from,p=null;(s===8||gn.android&&e.text.length<a-o)&&(h=i.to,p="end");let g=PG(t.state.doc.sliceString(o,a,ab),e.text,h-o,p);g&&(gn.chrome&&s==13&&g.toB==g.from+2&&e.text.slice(g.from,g.toB)==ab+ab&&g.toB--,n={from:o+g.from,to:o+g.toA,insert:Ir.of(e.text.slice(g.from,g.toB).split(ab))})}else r&&(!t.hasFocus&&t.state.facet(Oh)||V2(r,i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(gn.mac||gn.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=xt.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:Ir.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:t.state.doc.lineAt(i.from).to<i.to&&t.docView.lineHasWidget(i.to)&&t.inputState.insertingTextAt>Date.now()-50?n={from:i.from,to:i.to,insert:t.state.toText(t.inputState.insertingText)}:gn.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=xt.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Ir.of([" "])}),n)return IR(t,n,r,s);if(r&&!V2(r,i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin,a=="select.pointer"&&(r=kG(t.state.facet(I_).map(h=>h(t)),r))),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function IR(t,e,n,r=-1){if(gn.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(gn.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&r0(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&r0(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&r0(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=BCe(t,e,n));return t.state.facet(dG).some(h=>h(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function BCe(t,e,n){let r,i=t.state,s=i.selection.main,o=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let h=e.from<s.from?-1:1,p=h<0?s.from:s.to,g=Bb(i.facet(I_).map(y=>y(t)),p,h);e.from==g&&(o=g)}if(o>-1)r={changes:e,selection:xt.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let h=s.from<e.from?i.sliceDoc(s.from,e.from):"",p=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(h+e.insert.sliceString(0,void 0,t.state.lineBreak)+p))}else{let h=i.changes(e),p=n&&n.main.to<=h.newLength?n.main:void 0;if(i.selection.ranges.length>1&&(t.inputState.composing>=0||t.inputState.compositionPendingChange)&&e.to<=s.to+10&&e.to>=s.to-10){let g=t.state.sliceDoc(e.from,e.to),y,b=n&&SG(t,n.main.head);if(b){let P=e.insert.length-(e.to-e.from);y={from:b.from,to:b.to-P}}else y=t.state.doc.lineAt(s.head);let S=s.to-e.to;r=i.changeByRange(P=>{if(P.from==s.from&&P.to==s.to)return{changes:h,range:p||P.map(h)};let O=P.to-S,D=O-g.length;if(t.state.sliceDoc(D,O)!=g||O>=y.from&&D<=y.to)return{range:P};let z=i.changes({from:D,to:O,insert:e.insert}),F=P.to-s.to;return{changes:z,range:p?xt.range(Math.max(0,p.anchor+F),Math.max(0,p.head+F)):P.map(z)}})}else r={changes:h,selection:p&&i.selection.replaceRange(p)}}let a="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,a+=".compose",t.inputState.compositionFirstChange&&(a+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:a,scrollIntoView:!0})}function PG(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let h=Math.max(0,s-Math.min(o,a));n-=o+h-s}if(o<s&&t.length<e.length){let h=n<=s&&n>=o?s-n:0;s-=h,a=s+(a-o),o=s}else if(a<s){let h=n<=s&&n>=a?s-n:0;s-=h,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function $Ce(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new W6(n,r)),(i!=n||s!=r)&&e.push(new W6(i,s))),e}function NCe(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?xt.single(n+e,r+e):null}function V2(t,e){return e.head==t.main.head&&e.anchor==t.main.anchor}class VCe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,gn.safari&&e.contentDOM.addEventListener("input",()=>null),gn.gecko&&rTe(e.contentDOM.ownerDocument)}handleEvent(e){!KCe(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=WCe(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&AG.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),gn.android&&gn.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return gn.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=OG.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||UCe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,r0(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:gn.safari&&!gn.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function U6(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){La(n.state,i)}}}function WCe(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(s)for(let a in s){let h=s[a];h&&n(a).handlers.push(U6(r.value,h))}if(o)for(let a in o){let h=o[a];h&&n(a).observers.push(U6(r.value,h))}}for(let r in Gc)n(r).handlers.push(Gc[r]);for(let r in gc)n(r).observers.push(gc[r]);return e}const OG=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],UCe="dthko",AG=[16,17,18,20,91,92,224,225],kS=6;function CS(t){return Math.max(0,t)*.7+8}function qCe(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class QCe{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=X2e(e.contentDOM),this.atoms=e.state.facet(I_).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(kr.allowMultipleSelections)&&HCe(e,n),this.dragging=XCe(e,n)&&IG(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&qCe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let h=zR(this.view);e.clientX-h.left<=i+kS?n=-CS(i-e.clientX):e.clientX+h.right>=o-kS&&(n=CS(e.clientX-o)),e.clientY-h.top<=s+kS?r=-CS(s-e.clientY):e.clientY+h.bottom>=a-kS&&(r=CS(e.clientY-a)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=kG(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function HCe(t,e){let n=t.state.facet(lG);return n.length?n[0](e):gn.mac?e.metaKey:e.ctrlKey}function GCe(t,e){let n=t.state.facet(cG);return n.length?n[0](e):gn.mac?!e.altKey:!e.ctrlKey}function XCe(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=q0(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function KCe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=ms.get(n))&&r.isWidget()&&!r.isHidden&&r.widget.ignoreEvent(e))return!1;return!0}const Gc=Object.create(null),gc=Object.create(null),EG=gn.ie&&gn.ie_version<15||gn.ios&&gn.webkit_version<604;function ZCe(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),zG(t,n.value)},50)}function kT(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function zG(t,e){e=kT(t.state,PR,e);let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(Yz!=null&&n.selection.ranges.every(h=>h.empty)&&Yz==s.toString()){let h=-1;r=n.changeByRange(p=>{let g=n.doc.lineAt(p.from);if(g.from==h)return{range:p};h=g.from;let y=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:g.from,insert:y},range:xt.cursor(p.from+y.length)}})}else o?r=n.changeByRange(h=>{let p=s.line(i++);return{changes:{from:h.from,to:h.to,insert:p.text},range:xt.cursor(h.from+p.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}gc.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Gc.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);gc.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};gc.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Gc.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(uG))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=JCe(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new QCe(t,e,n,r)),r&&t.observer.ignore(()=>{JH(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function q6(t,e,n,r){if(r==1)return xt.cursor(e,n);if(r==2)return ACe(t.state,e,n);{let i=t.docView.lineAt(e,n),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,xt.range(o,a)}}const YCe=gn.ie&&gn.ie_version<=11;let Q6=null,H6=0,G6=0;function IG(t){if(!YCe)return t.detail;let e=Q6,n=G6;return Q6=t,G6=Date.now(),H6=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(H6+1)%3:1}function JCe(t,e){let n=t.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),r=IG(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let h=t.posAndSideAtCoords({x:s.clientX,y:s.clientY},!1),p,g=q6(t,h.pos,h.assoc,r);if(n.pos!=h.pos&&!o){let y=q6(t,n.pos,n.assoc,r),b=Math.min(y.from,g.from),S=Math.max(y.to,g.to);g=b<g.from?xt.range(b,S):xt.range(S,b)}return o?i.replaceRange(i.main.extend(g.from,g.to)):a&&r==1&&i.ranges.length>1&&(p=eTe(i,h.pos))?p:a?i.addRange(g):xt.create([g])}}}function eTe(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return xt.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Gc.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.tile.nearest(e.target);if(i&&i.isWidget()){let s=i.posAtStart,o=s+i.length;(s>=n.to||o<=n.from)&&(n=xt.range(s,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",kT(t.state,OR,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Gc.dragend=t=>(t.inputState.draggedContent=null,!1);function X6(t,e,n,r){if(n=kT(t.state,PR,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=r&&s&&GCe(t,e)?{from:s.from,to:s.to}:null,a={from:i,insert:n},h=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:h,selection:{anchor:h.mapPos(i,-1),head:h.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Gc.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&X6(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return X6(t,e,r,!0),!0}return!1};Gc.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=EG?null:e.clipboardData;return n?(zG(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(ZCe(t),!1)};function tTe(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function nTe(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:kT(t,OR,e.join(t.lineBreak)),ranges:n,linewise:r}}let Yz=null;Gc.copy=Gc.cut=(t,e)=>{let n=q0(t.root);if(n&&!Db(t.contentDOM,n))return!1;let{text:r,ranges:i,linewise:s}=nTe(t.state);if(!r&&!s)return!1;Yz=s?r:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=EG?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",r),!0):(tTe(t,r),!1)};const MG=Xu.define();function RG(t,e){let n=[];for(let r of t.facet(fG)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:MG.of(!0)}):null}function DG(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=RG(t.state,e);n?t.dispatch(n):t.update([])}},10)}gc.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),DG(t)};gc.blur=t=>{t.observer.clearSelectionRange(),DG(t)};gc.compositionstart=gc.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};gc.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,gn.chrome&&gn.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};gc.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Gc.beforeinput=(t,e)=>{var n,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(t.inputState.insertingText=e.data,t.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],h=t.posAtDOM(a.startContainer,a.startOffset),p=t.posAtDOM(a.endContainer,a.endOffset);return IR(t,{from:h,to:p,insert:t.state.toText(s)},null),!0}}let i;if(gn.chrome&&gn.android&&(i=OG.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return gn.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),gn.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>gc.compositionend(t,e),20),!1};const K6=new Set;function rTe(t){K6.has(t)||(K6.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const Z6=["pre-wrap","normal","pre-line","break-spaces"];let G0=!1;function Y6(){G0=!1}class iTe{constructor(e){this.lineWrapping=e,this.doc=Ir.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Z6.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=Z6.indexOf(e)>-1,h=Math.abs(n-this.lineHeight)>.3||this.lineWrapping!=a||Math.abs(r-this.charWidth)>.1;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,h){this.heightSamples={};for(let p=0;p<o.length;p++){let g=o[p];g<0?p++:this.heightSamples[Math.floor(g*10)]=!0}}return h}}class sTe{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Rc{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?xo.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Qm?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Rc(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var di=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(di||(di={}));const Ik=.001;class la{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Ik&&(G0=!0),this.height=e)}replace(e,n,r){return la.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:h,toA:p,fromB:g,toB:y}=i[a],b=s.lineAt(h,di.ByPosNoHeight,r.setDoc(n),0,0),S=b.to>=p?b:s.lineAt(p,di.ByPosNoHeight,r,0,0);for(y+=S.to-p,p=S.to;a>0&&b.from<=i[a-1].toA;)h=i[a-1].fromA,g=i[a-1].fromB,a--,h<b.from&&(b=s.lineAt(h,di.ByPosNoHeight,r,0,0));g+=b.from-h,h=b.from;let P=MR.build(r.setDoc(o),e,g,y);s=W2(s,s.replace(h,p,P))}return s.updateHeight(r,0)}static empty(){return new hl(0,0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new aTe(la.of(e.slice(0,n)),o,la.of(e.slice(r)))}}function W2(t,e){return t==e?t:(t.constructor!=e.constructor&&(G0=!0),e)}la.prototype.size=1;const oTe=In.replace({});class LG extends la{constructor(e,n,r){super(e,n),this.deco=r,this.spaceAbove=0}mainBlock(e,n){return new Rc(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,n,r,i){return this.spaceAbove&&e<r+this.spaceAbove?new Rc(i,0,r,this.spaceAbove,oTe):this.mainBlock(r,i)}lineAt(e,n,r,i,s){let o=this.mainBlock(i,s);return this.spaceAbove?this.blockAt(0,r,i,s).join(o):o}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.lineAt(0,di.ByPos,r,i,s))}setMeasuredHeight(e){let n=e.heights[e.index++];n<0?(this.spaceAbove=-n,n=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(n)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setMeasuredHeight(i),this.outdated=!1,this}toString(){return`block(${this.length})`}}class hl extends LG{constructor(e,n,r){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=r}mainBlock(e,n){return new Rc(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof hl||i instanceof ao&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof ao?i=new hl(i.length,this.height,this.spaceAbove):i.height=this.height,this.outdated||(i.outdated=!1),i):la.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setMeasuredHeight(i):(r||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class ao extends la{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*s);o=h/s,this.length>s+1&&(a=(this.height-h)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:h}=this.heightMetrics(n,i);if(n.lineWrapping){let p=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),g=n.doc.lineAt(p),y=a+g.length*h,b=Math.max(r,e-y/2);return new Rc(g.from,g.length,b,y,0)}else{let p=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:g,length:y}=n.doc.line(s+p);return new Rc(g,y,r+a*p,a,0)}}lineAt(e,n,r,i,s){if(n==di.ByHeight)return this.blockAt(e,r,i,s);if(n==di.ByPosNoHeight){let{from:S,to:P}=r.doc.lineAt(e);return new Rc(S,P-S,0,0,0)}let{firstLine:o,perLine:a,perChar:h}=this.heightMetrics(r,s),p=r.doc.lineAt(e),g=a+p.length*h,y=p.number-o,b=i+a*y+h*(p.from-s-y);return new Rc(p.from,p.length,Math.max(i,Math.min(b,i+this.height-g)),g,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:h,perChar:p}=this.heightMetrics(r,s);for(let g=e,y=i;g<=n;){let b=r.doc.lineAt(g);if(g==e){let P=b.number-a;y+=h*P+p*(e-s-P)}let S=h+p*b.length;o(new Rc(b.from,b.length,y,S,0)),y+=S,g=b.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof ao?r[r.length-1]=new ao(s.length+i):r.push(null,new ao(i-1))}if(e>0){let s=r[0];s instanceof ao?r[0]=new ao(e+s.length):r.unshift(new ao(e-1),null)}return la.of(r)}decomposeLeft(e,n){n.push(new ao(e-1),null)}decomposeRight(e,n){n.push(null,new ao(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),h=-1;for(i.from>n&&o.push(new ao(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let g=e.doc.lineAt(a).length;o.length&&o.push(null);let y=i.heights[i.index++],b=0;y<0&&(b=-y,y=i.heights[i.index++]),h==-1?h=y:Math.abs(y-h)>=Ik&&(h=-2);let S=new hl(g,y,b);S.outdated=!1,o.push(S),a+=g+1}a<=s&&o.push(null,new ao(s-a).updateHeight(e,a));let p=la.of(o);return(h<0||Math.abs(p.height-this.height)>=Ik||Math.abs(h-this.heightMetrics(e,n).perLine)>=Ik)&&(G0=!0),W2(this,p)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class aTe extends la{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,h=n==di.ByHeight?e<o:e<a,p=h?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(h?p.to<a:p.from>a))return p;let g=n==di.ByPosNoHeight?di.ByPosNoHeight:di.ByPos;return h?p.join(this.right.lineAt(a,g,r,o,a)):this.left.lineAt(a,g,r,i,s).join(p)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,h=s+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,n,r,i,s,o),n>=h&&this.right.forEachLine(e,n,r,a,h,o);else{let p=this.lineAt(h,di.ByPos,r,i,s);e<p.from&&this.left.forEachLine(e,p.from-1,r,i,s,o),p.to>=e&&p.from<=n&&o(p),n>p.to&&this.right.forEachLine(p.to+1,n,r,a,h,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&J6(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),J6(s,a)}return la.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?la.of(this.break?[e,null,n]:[e,n]):(this.left=W2(this.left,e),this.right=W2(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,h=null;return i&&i.from<=n+s.length&&i.more?h=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?h=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),h?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function J6(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof ao&&(r=t[e+1])instanceof ao&&t.splice(e-1,3,new ao(n.length+1+r.length))}const lTe=5;class MR{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof hl?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new hl(r-this.pos,-1,0)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new LG(o,i,r)):(o||s||i>=lTe)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new hl(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,n){let r=new ao(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof hl)return e;let n=new hl(0,-1,0);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof hl)&&!this.isCovered?this.nodes.push(new hl(0,-1,0)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof hl&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new MR(r,e);return pr.spans(n,r,i,s,0),s.finish(r)}}function cTe(t,e,n){let r=new uTe;return pr.compare(t,e,n,r,0),r.changes}class uTe{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&n0(e,n,this.changes,5)}}function hTe(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),h=Math.min(i.innerHeight,n.bottom);for(let p=t.parentNode;p&&p!=r.body;)if(p.nodeType==1){let g=p,y=window.getComputedStyle(g);if((g.scrollHeight>g.clientHeight||g.scrollWidth>g.clientWidth)&&y.overflow!="visible"){let b=g.getBoundingClientRect();s=Math.max(s,b.left),o=Math.min(o,b.right),a=Math.max(a,b.top),h=Math.min(p==t.parentNode?i.innerHeight:h,b.bottom)}p=y.position=="absolute"||y.position=="fixed"?g.offsetParent:g.parentNode}else if(p.nodeType==11)p=p.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,h)-(n.top+e)}}function dTe(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function fTe(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class TO{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return In.replace({widget:new pTe(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class pTe extends Zu{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class e${constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=t$,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ci.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(AR).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new iTe(n),this.stateDeco=n$(e),this.heightMap=la.empty().applyChanges(this.stateDeco,Ir.empty,this.heightOracle.setDoc(e.doc),[new rc(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=In.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new TS(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?t$:new RR(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(lb(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=n$(this.state);let i=e.changedRanges,s=rc.extendWithRanges(i,cTe(r,this.stateDeco,e?e.changes:Ts.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Y6(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||G0)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let h=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<h.from||n.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,n));let p=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(p||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(mG)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?ci.RTL:ci.LTR;let o=this.heightOracle.mustRefreshForWrapping(s)||this.mustMeasureContent,a=n.getBoundingClientRect(),h=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let p=0,g=0;if(a.width&&a.height){let{scaleX:N,scaleY:Q}=YH(n,a);(N>.005&&Math.abs(this.scaleX-N)>.005||Q>.005&&Math.abs(this.scaleY-Q)>.005)&&(this.scaleX=N,this.scaleY=Q,p|=16,o=h=!0)}let y=(parseInt(r.paddingTop)||0)*this.scaleY,b=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=y||this.paddingBottom!=b)&&(this.paddingTop=y,this.paddingBottom=b,p|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,p|=16);let S=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=S&&(this.scrollAnchorHeight=-1,this.scrollTop=S),this.scrolledToBottom=eG(e.scrollDOM);let P=(this.printing?fTe:hTe)(n,this.paddingTop),O=P.top-this.pixelViewport.top,D=P.bottom-this.pixelViewport.bottom;this.pixelViewport=P;let z=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(z!=this.inView&&(this.inView=z,z&&(h=!0)),!this.inView&&!this.scrollTarget&&!dTe(e.dom))return 0;let F=a.width;if((this.contentDOMWidth!=F||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,p|=16),h){let N=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(N)&&(o=!0),o||i.lineWrapping&&Math.abs(F-this.contentDOMWidth)>i.charWidth){let{lineHeight:Q,charWidth:q,textHeight:X}=e.docView.measureTextSize();o=Q>0&&i.refresh(s,Q,q,X,Math.max(5,F/q),N),o&&(e.docView.minWidth=0,p|=16)}O>0&&D>0?g=Math.max(O,D):O<0&&D<0&&(g=Math.min(O,D)),Y6();for(let Q of this.viewports){let q=Q.from==this.viewport.from?N:e.docView.measureVisibleLineHeights(Q);this.heightMap=(o?la.empty().applyChanges(this.stateDeco,Ir.empty,this.heightOracle,[new rc(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new sTe(Q.from,q))}G0&&(p|=2)}let R=!this.viewportIsAppropriate(this.viewport,g)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return R&&(p&2&&(p|=this.updateScaler()),this.viewport=this.getViewport(g,this.scrollTarget),p|=this.updateForViewport()),(p&2||R)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),p|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),p}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,h=new TS(i.lineAt(o-r*1e3,di.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,di.ByHeight,s,0,0).to);if(n){let{head:p}=n.range;if(p<h.from||p>h.to){let g=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),y=i.lineAt(p,di.ByPos,s,0,0),b;n.y=="center"?b=(y.top+y.bottom)/2-g/2:n.y=="start"||n.y=="nearest"&&p<h.from?b=y.top:b=y.bottom-g,h=new TS(i.lineAt(b-1e3/2,di.ByHeight,s,0,0).from,i.lineAt(b+g+1e3/2,di.ByHeight,s,0,0).to)}}return h}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new TS(this.heightMap.lineAt(r,di.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,di.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,di.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,di.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new TO(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=ci.LTR&&!r)return[];let a=[],h=(g,y,b,S)=>{if(y-g<s)return;let P=this.state.selection.main,O=[P.from];P.empty||O.push(P.to);for(let z of O)if(z>g&&z<y){h(g,z-10,b,S),h(z+10,y,b,S);return}let D=gTe(e,z=>z.from>=b.from&&z.to<=b.to&&Math.abs(z.from-g)<s&&Math.abs(z.to-y)<s&&!O.some(F=>z.from<F&&z.to>F));if(!D){if(y<b.to&&n&&r&&n.visibleRanges.some(R=>R.from<=y&&R.to>=y)){let R=n.moveToLineBoundary(xt.cursor(y),!1,!0).head;R>g&&(y=R)}let z=this.gapSize(b,g,y,S),F=r||z<2e6?z:2e6;D=new TO(g,y,z,F)}a.push(D)},p=g=>{if(g.length<o||g.type!=xo.Text)return;let y=mTe(g.from,g.to,this.stateDeco);if(y.total<o)return;let b=this.scrollTarget?this.scrollTarget.range.head:null,S,P;if(r){let O=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,D,z;if(b!=null){let F=PS(y,b),R=((this.visibleBottom-this.visibleTop)/2+O)/g.height;D=F-R,z=F+R}else D=(this.visibleTop-g.top-O)/g.height,z=(this.visibleBottom-g.top+O)/g.height;S=jS(y,D),P=jS(y,z)}else{let O=y.total*this.heightOracle.charWidth,D=i*this.heightOracle.charWidth,z=0;if(O>2e6)for(let q of e)q.from>=g.from&&q.from<g.to&&q.size!=q.displaySize&&q.from*this.heightOracle.charWidth+z<this.pixelViewport.left&&(z=q.size-q.displaySize);let F=this.pixelViewport.left+z,R=this.pixelViewport.right+z,N,Q;if(b!=null){let q=PS(y,b),X=((R-F)/2+D)/O;N=q-X,Q=q+X}else N=(F-D)/O,Q=(R+D)/O;S=jS(y,N),P=jS(y,Q)}S>g.from&&h(g.from,S,g,y),P<g.to&&h(P,g.to,g,y)};for(let g of this.viewportLines)Array.isArray(g.type)?g.type.forEach(p):p(g);return a}gapSize(e,n,r,i){let s=PS(i,r)-PS(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){TO.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=In.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];pr.spans(n,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],a=r[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||lb(this.heightMap.lineAt(e,di.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||lb(this.heightMap.lineAt(this.scaler.fromDOM(e),di.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return lb(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class TS{constructor(e,n){this.from=e,this.to=n}}function mTe(t,e,n){let r=[],i=t,s=0;return pr.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function jS({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function PS(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function gTe(t,e){for(let n of t)if(e(n))return n}const t$={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};function n$(t){let e=t.facet(_T).filter(r=>typeof r!="function"),n=t.facet(ER).filter(r=>typeof r!="function");return n.length&&e.push(pr.join(n)),e}class RR{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:h})=>{let p=n.lineAt(a,di.ByPos,e,0,0).top,g=n.lineAt(h,di.ByPos,e,0,0).bottom;return i+=g-p,{from:a,to:h,top:p,bottom:g,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof RR?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function lb(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new Rc(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>lb(i,e)):t._content)}const OS=yn.define({combine:t=>t.join(" ")}),Jz=yn.define({combine:t=>t.indexOf(!0)>-1}),eI=qf.newName(),FG=qf.newName(),BG=qf.newName(),$G={"&light":"."+FG,"&dark":"."+BG};function tI(t,e,n){return new qf(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const yTe=tI("."+eI,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},$G),xTe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},jO=gn.ie&&gn.ie_version<=11;class vTe{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new K2e,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(gn.ie&&gn.ie_version<=11||gn.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&gn.android&&e.constructor.EDIT_CONTEXT!==!1&&!(gn.chrome&&gn.chrome_version<126)&&(this.editContext=new _Te(e),e.state.facet(Oh)&&(e.contentDOM.editContext=this.editContext.editContext)),jO&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(Oh)?r.root.activeElement!=this.dom:!Db(this.dom,i))return;let s=i.anchorNode&&r.docView.tile.nearest(i.anchorNode);if(s&&s.isWidget()&&s.widget.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(gn.ie&&gn.ie_version<=11||gn.android&&gn.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Fb(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=q0(e.root);if(!n)return!1;let r=gn.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&bTe(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=Db(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Y2e(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,xTe),jO&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),jO&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&r0(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Db(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new FCe(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=jG(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!V2(this.view.state.selection,n.newSel.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.tile.nearest(e.target);if(!n||n.isWidget())return null;if(n.markDirty(e.type=="attributes"),e.type=="childList"){let r=r$(n,e.previousSibling||e.target.previousSibling,-1),i=r$(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Oh)!=e.state.facet(Oh)&&(e.view.contentDOM.editContext=e.state.facet(Oh)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function r$(t,e,n){for(;e;){let r=ms.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function i$(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor,1);return Fb(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function bTe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return i$(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?i$(t,n):null}class _Te{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(r.updateRangeStart),h=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let p=h-a>r.text.length;a==this.from&&s<this.from?a=s:h==this.to&&s>this.to&&(h=s);let g=PG(e.state.sliceDoc(a,h),r.text,(p?i.from:i.to)-a,p?"end":null);if(!g){let b=xt.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));V2(b,i)||e.dispatch({selection:b,userEvent:"select"});return}let y={from:g.from+a,to:g.toA+a,insert:Ir.of(r.text.slice(g.from,g.toB).split(`
`))};if((gn.mac||gn.android)&&y.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(y={from:a,to:h,insert:Ir.of([r.text.replace("."," ")])}),this.pendingContextChange=y,!e.state.readOnly){let b=this.to-this.from+(y.to-y.from+y.insert.length);IR(e,y,xt.single(this.toEditorPos(r.selectionStart,b),this.toEditorPos(r.selectionEnd,b)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),y.from<y.to&&!y.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let h=e.coordsForChar(o);s=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(a)){let h=this.toEditorPos(s.rangeStart),p=this.toEditorPos(s.rangeEnd);if(h<p){let g=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;i.push(In.mark({attributes:{style:g}}).range(h,p))}}}e.dispatch({effects:yG.of(In.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=q0(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,h,p)=>{if(r)return;let g=p.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(p)){i=this.pendingContextChange=null,n+=g,this.to+=g;return}else i=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=g,this.to+=g;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+p.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),p.toString()),this.to+=g}n+=g}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class rn{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Z2e(e.parent)||document,this.viewState=new e$(e.state||kr.create(e)),e.scrollTo&&e.scrollTo.is(SS)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(My).map(i=>new _O(i));for(let i of this.plugins)i.update(this);this.observer=new vTe(this),this.inputState=new VCe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new $6(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...e){let n=e.length==1&&e[0]instanceof zs?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let b of e){if(b.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=b.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,h=null;e.some(b=>b.annotation(MG))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,h=RG(s,o),h||(a=1));let p=this.observer.delayedAndroidKey,g=null;if(p?(this.observer.clearDelayedAndroidKey(),g=this.observer.readChange(),(g&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(g=null)):this.observer.clear(),s.facet(kr.phrases)!=this.state.facet(kr.phrases))return this.setState(s);i=B2.create(this,s,e),i.flags|=a;let y=this.viewState.scrollTarget;try{this.updateState=2;for(let b of e){if(y&&(y=y.map(b.changes)),b.scrollIntoView){let{main:S}=b.state.selection;y=new i0(S.empty?S:xt.cursor(S.head,S.head>S.anchor?-1:1))}for(let S of b.effects)S.is(SS)&&(y=S.value.clip(this.state))}this.viewState.update(i,y),this.bidiCache=U2.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(ob)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(b=>b.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(OS)!=i.state.facet(OS)&&(this.viewState.mustMeasureContent=!0),(n||r||y||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let b of this.state.facet(Gz))try{b(i)}catch(S){La(this.state,S,"update listener")}(h||g)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),g&&!jG(this,g)&&p.force&&r0(this.contentDOM,p.key,p.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new e$(e),this.plugins=e.facet(My).map(r=>new _O(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new $6(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(My),r=e.state.facet(My);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new _O(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){La(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(eG(r))s=-1,o=this.viewState.heightMap.height;else{let S=this.viewState.scrollAnchorAt(i);s=S.from,o=S.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let p=[];h&4||([this.measureRequests,p]=[p,this.measureRequests]);let g=p.map(S=>{try{return S.read(this)}catch(P){return La(this.state,P),s$}}),y=B2.create(this,this.state,[]),b=!1;y.flags|=h,n?n.flags|=h:n=y,this.updateState=2,y.empty||(this.updatePlugins(y),this.inputState.update(y),this.updateAttrs(),b=this.docView.update(y),b&&this.docViewUpdate());for(let S=0;S<p.length;S++)if(g[S]!=s$)try{let P=p[S];P.write&&P.write(g[S],this)}catch(P){La(this.state,P)}if(b&&this.docView.updateSelection(!0),!y.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let P=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(P>1||P<-1){i=i+P,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(Gz))a(n)}get themeClasses(){return eI+" "+(this.state.facet(Jz)?BG:FG)+" "+this.state.facet(OS)}updateAttrs(){let e=o$(this,xG,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Oh)?"true":"false",class:"cm-content",style:`${gn.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),o$(this,AR,n);let r=this.observer.ignore(()=>{let i=M6(this.contentDOM,this.contentAttrs,n),s=M6(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(rn.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(ob);let e=this.state.facet(rn.cspNonce);qf.mount(this.root,this.styleModules.concat(yTe).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return CO(this,e,N6(this,e,n,r))}moveByGroup(e,n){return CO(this,e,N6(this,e,n,r=>ICe(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return xt.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return zCe(this,e,n,r)}moveVertically(e,n,r){return CO(this,e,MCe(this,e,n,r))}domAtPos(e,n=1){return this.docView.domAtPos(e,n)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){this.readMeasured();let r=Zz(this,e,n);return r&&r.pos}posAndSideAtCoords(e,n=!0){return this.readMeasured(),Zz(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Rh.find(s,e-i.from,-1,n)];return z1(r,o.dir==ci.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(pG)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>wTe)return oG(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||sG(s.isolates,r=L6(this,e))))return s.order;r||(r=L6(this,e));let i=sCe(e.text,n,r);return this.bidiCache.push(new U2(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||gn.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{JH(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return SS.of(new i0(typeof e=="number"?xt.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return SS.of(new i0(xt.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ns.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ns.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=qf.newName(),i=[OS.of(r),ob.of(tI(`.${r}`,e))];return n&&n.dark&&i.push(Jz.of(!0)),i}static baseTheme(e){return ig.lowest(ob.of(tI("."+eI,e,$G)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&ms.get(r)||ms.get(e);return((n=i==null?void 0:i.root)===null||n===void 0?void 0:n.view)||null}}rn.styleModule=ob;rn.inputHandler=dG;rn.clipboardInputFilter=PR;rn.clipboardOutputFilter=OR;rn.scrollHandler=gG;rn.focusChangeEffect=fG;rn.perLineTextDirection=pG;rn.exceptionSink=hG;rn.updateListener=Gz;rn.editable=Oh;rn.mouseSelectionStyle=uG;rn.dragMovesSelection=cG;rn.clickAddsSelectionRange=lG;rn.decorations=_T;rn.blockWrappers=vG;rn.outerDecorations=ER;rn.atomicRanges=I_;rn.bidiIsolatedRanges=bG;rn.scrollMargins=_G;rn.darkTheme=Jz;rn.cspNonce=yn.define({combine:t=>t.length?t[0]:""});rn.contentAttributes=AR;rn.editorAttributes=xG;rn.lineWrapping=rn.contentAttributes.of({class:"cm-lineWrapping"});rn.announce=Zn.define();const wTe=4096,s$={};class U2{constructor(e,n,r,i,s,o){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:ci.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new U2(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function o$(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&CR(o,n)}return n}const STe=gn.mac?"mac":gn.windows?"win":gn.linux?"linux":"key";function kTe(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let h=0;h<n.length-1;++h){const p=n[h];if(/^(cmd|meta|m)$/i.test(p))a=!0;else if(/^a(lt)?$/i.test(p))i=!0;else if(/^(c|ctrl|control)$/i.test(p))s=!0;else if(/^s(hift)?$/i.test(p))o=!0;else if(/^mod$/i.test(p))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+p)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function AS(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const CTe=ig.default(rn.domEventHandlers({keydown(t,e){return VG(NG(e.state),t,e,"editor")}})),CT=yn.define({enables:CTe}),a$=new WeakMap;function NG(t){let e=t.facet(CT),n=a$.get(e);return n||a$.set(e,n=PTe(e.reduce((r,i)=>r.concat(i),[]))),n}function TTe(t,e,n){return VG(NG(t.state),e,t,n)}let ef=null;const jTe=4e3;function PTe(t,e=STe){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let h=r[o];if(h==null)r[o]=a;else if(h!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,h,p,g)=>{var y,b;let S=n[o]||(n[o]=Object.create(null)),P=a.split(/ (?!$)/).map(z=>kTe(z,e));for(let z=1;z<P.length;z++){let F=P.slice(0,z).join(" ");i(F,!0),S[F]||(S[F]={preventDefault:!0,stopPropagation:!1,run:[R=>{let N=ef={view:R,prefix:F,scope:o};return setTimeout(()=>{ef==N&&(ef=null)},jTe),!0}]})}let O=P.join(" ");i(O,!1);let D=S[O]||(S[O]={preventDefault:!1,stopPropagation:!1,run:((b=(y=S._any)===null||y===void 0?void 0:y.run)===null||b===void 0?void 0:b.slice())||[]});h&&D.run.push(h),p&&(D.preventDefault=!0),g&&(D.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let p of a){let g=n[p]||(n[p]=Object.create(null));g._any||(g._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:y}=o;for(let b in g)g[b].run.push(S=>y(S,nI))}let h=o[e]||o.key;if(h)for(let p of a)s(p,h,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(p,"Shift-"+h,o.shift,o.preventDefault,o.stopPropagation)}return n}let nI=null;function VG(t,e,n,r){nI=e;let i=V2e(e),s=Oa(i,0),o=zu(s)==i.length&&i!=" ",a="",h=!1,p=!1,g=!1;ef&&ef.view==n&&ef.scope==r&&(a=ef.prefix+" ",AG.indexOf(e.keyCode)<0&&(p=!0,ef=null));let y=new Set,b=D=>{if(D){for(let z of D.run)if(!y.has(z)&&(y.add(z),z(n)))return D.stopPropagation&&(g=!0),!0;D.preventDefault&&(D.stopPropagation&&(g=!0),p=!0)}return!1},S=t[r],P,O;return S&&(b(S[a+AS(i,e,!o)])?h=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(gn.windows&&e.ctrlKey&&e.altKey)&&!(gn.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(P=Qf[e.keyCode])&&P!=i?(b(S[a+AS(P,e,!0)])||e.shiftKey&&(O=A1[e.keyCode])!=i&&O!=P&&b(S[a+AS(O,e,!1)]))&&(h=!0):o&&e.shiftKey&&b(S[a+AS(i,e,!0)])&&(h=!0),!h&&b(S._any)&&(h=!0)),p&&(h=!0),h&&g&&e.stopPropagation(),nI=null,h}class M_{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=WG(e);return[new M_(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return OTe(e,n,r)}}function WG(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==ci.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function l$(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let s=t.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),h=t.posAtCoords({x:s.right-1,y:o});return a==null||h==null?r:{from:Math.max(r.from,Math.min(a,h)),to:Math.min(r.to,Math.max(a,h))}}function OTe(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==ci.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),h=WG(t),p=o.querySelector(".cm-line"),g=p&&window.getComputedStyle(p),y=a.left+(g?parseInt(g.paddingLeft)+Math.min(0,parseInt(g.textIndent)):0),b=a.right-(g?parseInt(g.paddingRight):0),S=Kz(t,r,1),P=Kz(t,i,-1),O=S.type==xo.Text?S:null,D=P.type==xo.Text?P:null;if(O&&(t.lineWrapping||S.widgetLineBreaks)&&(O=l$(t,r,1,O)),D&&(t.lineWrapping||P.widgetLineBreaks)&&(D=l$(t,i,-1,D)),O&&D&&O.from==D.from&&O.to==D.to)return F(R(n.from,n.to,O));{let Q=O?R(n.from,null,O):N(S,!1),q=D?R(null,n.to,D):N(P,!0),X=[];return(O||S).to<(D||P).from-(O&&D?1:0)||S.widgetLineBreaks>1&&Q.bottom+t.defaultLineHeight/2<q.top?X.push(z(y,Q.bottom,b,q.top)):Q.bottom<q.top&&t.elementAtHeight((Q.bottom+q.top)/2).type==xo.Text&&(Q.bottom=q.top=(Q.bottom+q.top)/2),F(Q).concat(X).concat(F(q))}function z(Q,q,X,K){return new M_(e,Q-h.left,q-h.top,Math.max(0,X-Q),K-q)}function F({top:Q,bottom:q,horizontal:X}){let K=[];for(let ne=0;ne<X.length;ne+=2)K.push(z(X[ne],Q,X[ne+1],q));return K}function R(Q,q,X){let K=1e9,ne=-1e9,J=[];function ae($e,We,Fe,we,Ie){let Qe=t.coordsAtPos($e,$e==X.to?-2:2),se=t.coordsAtPos(Fe,Fe==X.from?2:-2);!Qe||!se||(K=Math.min(Qe.top,se.top,K),ne=Math.max(Qe.bottom,se.bottom,ne),Ie==ci.LTR?J.push(s&&We?y:Qe.left,s&&we?b:se.right):J.push(!s&&we?y:se.left,!s&&We?b:Qe.right))}let Ee=Q??X.from,Ce=q??X.to;for(let $e of t.visibleRanges)if($e.to>Ee&&$e.from<Ce)for(let We=Math.max($e.from,Ee),Fe=Math.min($e.to,Ce);;){let we=t.state.doc.lineAt(We);for(let Ie of t.bidiSpans(we)){let Qe=Ie.from+we.from,se=Ie.to+we.from;if(Qe>=Fe)break;se>We&&ae(Math.max(Qe,We),Q==null&&Qe<=Ee,Math.min(se,Fe),q==null&&se>=Ce,Ie.dir)}if(We=we.to+1,We>=Fe)break}return J.length==0&&ae(Ee,Q==null,Ce,q==null,t.textDirection),{top:K,bottom:ne,horizontal:J}}function N(Q,q){let X=a.top+(q?Q.top:Q.bottom);return{top:X,bottom:X,horizontal:[]}}}function ATe(t,e){return t.constructor==e.constructor&&t.eq(e)}class ETe{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(Mk)!=e.state.facet(Mk)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(Mk);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!ATe(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e,gn.safari&&gn.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Mk=yn.define();function UG(t){return[ns.define(e=>new ETe(e,t)),Mk.of(t)]}const M1=yn.define({combine(t){return Ku(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function zTe(t={}){return[M1.of(t),ITe,MTe,RTe,mG.of(!0)]}function qG(t){return t.startState.facet(M1)!=t.state.facet(M1)}const ITe=UG({above:!0,markers(t){let{state:e}=t,n=e.facet(M1),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:xt.cursor(i.head,i.head>i.anchor?-1:1);for(let h of M_.forRange(t,o,a))r.push(h)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=qG(t);return n&&c$(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){c$(e.state,t)},class:"cm-cursorLayer"});function c$(t,e){e.style.animationDuration=t.facet(M1).cursorBlinkRate+"ms"}const MTe=UG({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:M_.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||qG(t)},class:"cm-selectionLayer"}),RTe=ig.highest(rn.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),QG=Zn.define({map(t,e){return t==null?null:e.mapPos(t)}}),cb=_o.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(QG)?r.value:n,t)}}),DTe=ns.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(cb);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(cb)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(cb),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(cb)!=t&&this.view.dispatch({effects:QG.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function LTe(){return[cb,DTe]}function u$(t,e,n,r,i){e.lastIndex=0;for(let s=t.iterRange(n,r),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function FTe(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class BTe{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(a,h,p,g)=>i(g,p,p+a[0].length,a,h);else if(typeof r=="function")this.addMatch=(a,h,p,g)=>{let y=r(a,h,p);y&&g(p,p+a[0].length,y)};else if(r)this.addMatch=(a,h,p,g)=>g(p,p+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Xh,r=n.add.bind(n);for(let{from:i,to:s}of FTe(e,this.maxLength))u$(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,h)=>{h>=e.view.viewport.from&&a<=e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(h,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>=o){let h=e.state.doc.lineAt(o),p=h.to<a?e.state.doc.lineAt(a):h,g=Math.max(s.from,h.from),y=Math.min(s.to,p.to);if(this.boundary){for(;o>h.from;o--)if(this.boundary.test(h.text[o-1-h.from])){g=o;break}for(;a<p.to;a++)if(this.boundary.test(p.text[a-p.from])){y=a;break}}let b=[],S,P=(O,D,z)=>b.push(z.range(O,D));if(h==p)for(this.regexp.lastIndex=g-h.from;(S=this.regexp.exec(h.text))&&S.index<y-h.from;)this.addMatch(S,e,S.index+h.from,P);else u$(e.state.doc,this.regexp,g,y,(O,D)=>this.addMatch(D,e,O,P));n=n.update({filterFrom:g,filterTo:y,filter:(O,D)=>O<g||D>y,add:b})}}return n}}const rI=/x/.unicode!=null?"gu":"g",$Te=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,rI),NTe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let PO=null;function VTe(){var t;if(PO==null&&typeof document<"u"&&document.body){let e=document.body.style;PO=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return PO||!1}const Rk=yn.define({combine(t){let e=Ku(t,{render:null,specialChars:$Te,addSpecialChars:null});return(e.replaceTabs=!VTe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,rI)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,rI)),e}});function WTe(t={}){return[Rk.of(t),UTe()]}let h$=null;function UTe(){return h$||(h$=ns.fromClass(class{constructor(t){this.view=t,this.decorations=In.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Rk)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new BTe({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,s=Oa(e[0],0);if(s==9){let o=i.lineAt(r),a=n.state.tabSize,h=dx(o.text,a,r-o.from);return In.replace({widget:new GTe((a-h%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=In.replace({widget:new HTe(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Rk);t.startState.facet(Rk)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const qTe="";function QTe(t){return t>=32?qTe:t==10?"":String.fromCharCode(9216+t)}class HTe extends Zu{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=QTe(this.code),r=e.state.phrase("Control character")+" "+(NTe[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let s=document.createElement("span");return s.textContent=n,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class GTe extends Zu{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function XTe(){return ZTe}const KTe=In.line({class:"cm-activeLine"}),ZTe=ns.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(KTe.range(i.from)),e=i.from)}return In.set(n)}},{decorations:t=>t.decorations});class YTe extends Zu{constructor(e){super(),this.content=e}toDOM(e){let n=document.createElement("span");return n.className="cm-placeholder",n.style.pointerEvents="none",n.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),n.setAttribute("aria-hidden","true"),n}coordsAt(e){let n=e.firstChild?Lb(e.firstChild):[];if(!n.length)return null;let r=window.getComputedStyle(e.parentNode),i=z1(n[0],r.direction!="rtl"),s=parseInt(r.lineHeight);return i.bottom-i.top>s*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+s}:i}ignoreEvent(){return!1}}function JTe(t){let e=ns.fromClass(class{constructor(n){this.view=n,this.placeholder=t?In.set([In.widget({widget:new YTe(t),side:1}).range(0)]):In.none}get decorations(){return this.view.state.doc.length?In.none:this.placeholder}},{decorations:n=>n.decorations});return typeof t=="string"?[e,rn.contentAttributes.of({"aria-placeholder":t})]:e}const iI=2e3;function eje(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),s=[];if(e.off>iI||n.off>iI||e.col<0||n.col<0){let o=Math.min(e.off,n.off),a=Math.max(e.off,n.off);for(let h=r;h<=i;h++){let p=t.doc.line(h);p.length<=a&&s.push(xt.range(p.from+o,p.to+a))}}else{let o=Math.min(e.col,n.col),a=Math.max(e.col,n.col);for(let h=r;h<=i;h++){let p=t.doc.line(h),g=Lz(p.text,o,t.tabSize,!0);if(g<0)s.push(xt.cursor(p.to));else{let y=Lz(p.text,a,t.tabSize);s.push(xt.range(p.from+g,p.from+y))}}}return s}function tje(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function d$(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,s=i>iI?-1:i==r.length?tje(t,e.clientX):dx(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:s,off:i}}function nje(t,e){let n=d$(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(n.line).from),o=i.state.doc.lineAt(s);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let a=d$(t,i);if(!a)return r;let h=eje(t.state,n,a);return h.length?o?xt.create(h.concat(r.ranges)):xt.create(h):r}}:null}function rje(t){let e=n=>n.altKey&&n.button==0;return rn.mouseSelectionStyle.of((n,r)=>e(r)?nje(n,r):null)}const ije={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},sje={style:"cursor: crosshair"};function oje(t={}){let[e,n]=ije[t.key||"Alt"],r=ns.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)},mousemove(i){this.set(n(i))}}});return[r,rn.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?sje:null})]}const ES="-10000px";class HG{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,n){var r;let i=e.state.facet(this.facet),s=i.filter(h=>h);if(i===this.input){for(let h of this.tooltipViews)h.update&&h.update(e);return!1}let o=[],a=n?[]:null;for(let h=0;h<s.length;h++){let p=s[h],g=-1;if(p){for(let y=0;y<this.tooltips.length;y++){let b=this.tooltips[y];b&&b.create==p.create&&(g=y)}if(g<0)o[h]=this.createTooltipView(p,h?o[h-1]:null),a&&(a[h]=!!p.above);else{let y=o[h]=this.tooltipViews[g];a&&(a[h]=n[g]),y.update&&y.update(e)}}}for(let h of this.tooltipViews)o.indexOf(h)<0&&(this.removeTooltipView(h),(r=h.destroy)===null||r===void 0||r.call(h));return n&&(a.forEach((h,p)=>n[p]=h),n.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function aje(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const OO=yn.define({combine:t=>{var e,n,r;return{position:gn.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||aje}}}),f$=new WeakMap,DR=ns.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(OO);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new HG(t,LR,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(OO);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=ES,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(gn.safari){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}else n=!!s.offsetParent&&s.offsetParent!=this.container.ownerDocument.body}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=zR(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(OO).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let h=this.manager.tooltips[a],p=this.manager.tooltipViews[a],{dom:g}=p,y=t.pos[a],b=t.size[a];if(!y||h.clip!==!1&&(y.bottom<=Math.max(n.top,r.top)||y.top>=Math.min(n.bottom,r.bottom)||y.right<Math.max(n.left,r.left)-.1||y.left>Math.min(n.right,r.right)+.1)){g.style.top=ES;continue}let S=h.arrow?p.dom.querySelector(".cm-tooltip-arrow"):null,P=S?7:0,O=b.right-b.left,D=(e=f$.get(p))!==null&&e!==void 0?e:b.bottom-b.top,z=p.offset||cje,F=this.view.textDirection==ci.LTR,R=b.width>r.right-r.left?F?r.left:r.right-b.width:F?Math.max(r.left,Math.min(y.left-(S?14:0)+z.x,r.right-O)):Math.min(Math.max(r.left,y.left-O+(S?14:0)-z.x),r.right-O),N=this.above[a];!h.strictSide&&(N?y.top-D-P-z.y<r.top:y.bottom+D+P+z.y>r.bottom)&&N==r.bottom-y.bottom>y.top-r.top&&(N=this.above[a]=!N);let Q=(N?y.top-r.top:r.bottom-y.bottom)-P;if(Q<D&&p.resize!==!1){if(Q<this.view.defaultLineHeight){g.style.top=ES;continue}f$.set(p,D),g.style.height=(D=Q)/s+"px"}else g.style.height&&(g.style.height="");let q=N?y.top-D-P-z.y:y.bottom+P+z.y,X=R+O;if(p.overlap!==!0)for(let K of o)K.left<X&&K.right>R&&K.top<q+D&&K.bottom>q&&(q=N?K.top-D-2-P:K.bottom+P+2);if(this.position=="absolute"?(g.style.top=(q-t.parent.top)/s+"px",p$(g,(R-t.parent.left)/i)):(g.style.top=q/s+"px",p$(g,R/i)),S){let K=y.left+(F?z.x:-z.x)-(R+14-7);S.style.left=K/i+"px"}p.overlap!==!0&&o.push({left:R,top:q,right:X,bottom:q+D}),g.classList.toggle("cm-tooltip-above",N),g.classList.toggle("cm-tooltip-below",!N),p.positioned&&p.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=ES}},{eventObservers:{scroll(){this.maybeMeasure()}}});function p$(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const lje=rn.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),cje={x:0,y:0},LR=yn.define({enables:[DR,lje]}),q2=yn.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class TT{static create(e){return new TT(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new HG(e,q2,(n,r)=>this.createHostedView(n,r),n=>n.dom.remove())}createHostedView(e,n){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const uje=LR.compute([q2],t=>{let e=t.facet(q2);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:TT.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class hje{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.tile.nearest(n.target);if(!r)return;let i,s=1;if(r.isWidget())i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let a=e.coordsAtPos(i);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let h=e.bidiSpans(e.state.doc.lineAt(i)).find(g=>g.from<=i&&g.to>=i),p=h&&h.dir==ci.RTL?-1:1;s=n.x<a.left?-p:p}let o=this.source(e,i,s);if(o!=null&&o.then){let a=this.pending={pos:i};o.then(h=>{this.pending==a&&(this.pending=null,h&&!(Array.isArray(h)&&!h.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(h)?h:[h])}))},h=>La(e.state,h,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(DR),n=e?e.manager.tooltips.findIndex(r=>r.create==TT.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!dje(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,a=(r=(n=i[0])===null||n===void 0?void 0:n.end)!==null&&r!==void 0?r:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!fje(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),clearTimeout(this.restartTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const zS=4;function dje(t,e){let{left:n,right:r,top:i,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();i=Math.min(a.top,i),s=Math.max(a.bottom,s)}return e.clientX>=n-zS&&e.clientX<=r+zS&&e.clientY>=i-zS&&e.clientY<=s+zS}function fje(t,e,n,r,i,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let h=t.posAtCoords({x:r,y:i},!1);return h>=e&&h<=n}function pje(t,e={}){let n=Zn.define(),r=_o.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of i){let h=s.changes.mapPos(a.pos,-1,ra.TrackDel);if(h!=null){let p=Object.assign(Object.create(null),a);p.pos=h,p.end!=null&&(p.end=s.changes.mapPos(p.end)),o.push(p)}}i=o}for(let o of s.effects)o.is(n)&&(i=o.value),o.is(mje)&&(i=[]);return i},provide:i=>q2.from(i)});return{active:r,extension:[r,ns.define(i=>new hje(i,t,r,n,e.hoverTime||300)),uje]}}function GG(t,e){let n=t.plugin(DR);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const mje=Zn.define(),m$=yn.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function FR(t,e){let n=t.plugin(XG),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const XG=ns.fromClass(class{constructor(t){this.input=t.state.facet(R1),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(m$);this.top=new IS(t,!0,e.topContainer),this.bottom=new IS(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(m$);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new IS(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new IS(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(R1);if(n!=this.input){let r=n.filter(h=>h),i=[],s=[],o=[],a=[];for(let h of r){let p=this.specs.indexOf(h),g;p<0?(g=h(t.view),a.push(g)):(g=this.panels[p],g.update&&g.update(t)),i.push(g),(g.top?s:o).push(g)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let h of a)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>rn.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class IS{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=g$(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=g$(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function g$(t){let e=t.nextSibling;return t.remove(),e}const R1=yn.define({enables:XG});function gje(t,e){let n,r=new Promise(o=>n=o),i=o=>yje(o,e,n);t.state.field(AO,!1)?t.dispatch({effects:KG.of(i)}):t.dispatch({effects:Zn.appendConfig.of(AO.init(()=>[i]))});let s=ZG.of(i);return{close:s,result:r.then(o=>((t.win.queueMicrotask||(h=>t.win.setTimeout(h,10)))(()=>{t.state.field(AO).indexOf(i)>-1&&t.dispatch({effects:s})}),o))}}const AO=_o.define({create(){return[]},update(t,e){for(let n of e.effects)n.is(KG)?t=[n.value].concat(t):n.is(ZG)&&(t=t.filter(r=>r!=n.value));return t},provide:t=>R1.computeN([t],e=>e.field(t))}),KG=Zn.define(),ZG=Zn.define();function yje(t,e,n){let r=e.content?e.content(t,()=>o(null)):null;if(!r){if(r=si("form"),e.input){let a=si("input",e.input);/^(text|password|number|email|tel|url)$/.test(a.type)&&a.classList.add("cm-textfield"),a.name||(a.name="input"),r.appendChild(si("label",(e.label||"")+": ",a))}else r.appendChild(document.createTextNode(e.label||""));r.appendChild(document.createTextNode(" ")),r.appendChild(si("button",{class:"cm-button",type:"submit"},e.submitLabel||"OK"))}let i=r.nodeName=="FORM"?[r]:r.querySelectorAll("form");for(let a=0;a<i.length;a++){let h=i[a];h.addEventListener("keydown",p=>{p.keyCode==27?(p.preventDefault(),o(null)):p.keyCode==13&&(p.preventDefault(),o(h))}),h.addEventListener("submit",p=>{p.preventDefault(),o(h)})}let s=si("div",r,si("button",{onclick:()=>o(null),"aria-label":t.state.phrase("close"),class:"cm-dialog-close",type:"button"},[""]));e.class&&(s.className=e.class),s.classList.add("cm-dialog");function o(a){s.contains(s.ownerDocument.activeElement)&&t.focus(),n(a)}return{dom:s,top:e.top,mount:()=>{if(e.focus){let a;typeof e.focus=="string"?a=r.querySelector(e.focus):a=r.querySelector("input")||r.querySelector("button"),a&&"select"in a?a.select():a&&"focus"in a&&a.focus()}}}}class Zh extends Uf{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Zh.prototype.elementClass="";Zh.prototype.toDOM=void 0;Zh.prototype.mapMode=ra.TrackBefore;Zh.prototype.startSide=Zh.prototype.endSide=-1;Zh.prototype.point=!0;const Dk=yn.define(),xje=yn.define(),vje={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>pr.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},$b=yn.define();function bje(t){return[YG(),$b.of({...vje,...t})]}const y$=yn.define({combine:t=>t.some(e=>e)});function YG(t){return[_je]}const _je=ns.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet($b).map(e=>new v$(t,e)),this.fixed=!t.state.facet(y$);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(y$)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=pr.iter(this.view.state.facet(Dk),this.view.viewport.from),r=[],i=this.gutters.map(s=>new wje(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==xo.Text&&o){sI(n,r,a.from);for(let h of i)h.line(this.view,a,r);o=!1}else if(a.widget)for(let h of i)h.widget(this.view,a)}else if(s.type==xo.Text){sI(n,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet($b),n=t.state.facet($b),r=t.docChanged||t.heightChanged||t.viewportChanged||!pr.eq(t.startState.facet(Dk),t.state.facet(Dk),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new v$(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>rn.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==ci.LTR?{left:r,right:i}:{right:r,left:i}})});function x$(t){return Array.isArray(t)?t:[t]}function sI(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class wje{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=pr.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let a=new JG(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];sI(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(xje)){let o=s(e,n.widget,n);o&&(i||(i=[])).push(o)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class v${constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let h=s.getBoundingClientRect();o=(h.top+h.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=x$(n.markers(e)),n.initialSpacer&&(this.spacer=new JG(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=x$(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!pr.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class JG{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),Sje(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,h=s<n.length?n[s++]:null,p=!1;if(h){let g=h.elementClass;g&&(r+=" "+g);for(let y=o;y<this.markers.length;y++)if(this.markers[y].compare(h)){a=y,p=!0;break}}else a=this.markers.length;for(;o<a;){let g=this.markers[o++];if(g.toDOM){g.destroy(i);let y=i.nextSibling;i.remove(),i=y}}if(!h)break;h.toDOM&&(p?i=i.nextSibling:this.dom.insertBefore(h.toDOM(e),i)),p&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function Sje(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const kje=yn.define(),Cje=yn.define(),Ry=yn.define({combine(t){return Ku(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,h,p)=>s(a,h,p)||o(a,h,p):o}return r}})}});class EO extends Zh{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function zO(t,e){return t.state.facet(Ry).formatNumber(e,t.state)}const Tje=$b.compute([Ry],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(kje)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new EO(zO(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(Cje)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Ry)!=e.state.facet(Ry),initialSpacer(e){return new EO(zO(e,b$(e.state.doc.lines)))},updateSpacer(e,n){let r=zO(n.view,b$(n.view.state.doc.lines));return r==e.number?e:new EO(r)},domEventHandlers:t.facet(Ry).domEventHandlers,side:"before"}));function jje(t={}){return[Ry.of(t),YG(),Tje]}function b$(t){let e=9;for(;e<t;)e=e*10+9;return e}const Pje=new class extends Zh{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Oje=Dk.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(Pje.range(i)))}return pr.of(e)});function Aje(){return Oje}const eX=1024;let Eje=0;class IO{constructor(e,n){this.from=e,this.to=n}}class fr{constructor(e={}){this.id=Eje++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ha.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}fr.closedBy=new fr({deserialize:t=>t.split(" ")});fr.openedBy=new fr({deserialize:t=>t.split(" ")});fr.group=new fr({deserialize:t=>t.split(" ")});fr.isolate=new fr({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});fr.contextHash=new fr({perNode:!0});fr.lookAhead=new fr({perNode:!0});fr.mounted=new fr({perNode:!0});class Nb{constructor(e,n,r,i=!1){this.tree=e,this.overlay=n,this.parser=r,this.bracketed=i}static get(e){return e&&e.props&&e.props[fr.mounted.id]}}const zje=Object.create(null);class Ha{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):zje,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Ha(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(fr.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(fr.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}Ha.none=new Ha("",Object.create(null),0,8);class BR{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);if(o){i||(i=Object.assign({},r.props));let a=o[1],h=o[0];h.combine&&h.id in i&&(a=h.combine(i[h.id],a)),i[h.id]=a}}n.push(i?new Ha(r.name,i,r.id,r.flags):r)}return new BR(n)}}const MS=new WeakMap,_$=new WeakMap;var Mi;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays",t[t.EnterBracketed=16]="EnterBracketed"})(Mi||(Mi={}));class Ji{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Nb.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new aI(this.topNode,e)}cursorAt(e,n=0,r=0){let i=MS.get(this)||this.topNode,s=new aI(i);return s.moveTo(e,n),MS.set(this,s._tree),s}get topNode(){return new Ua(this,0,0,null)}resolve(e,n=0){let r=D1(MS.get(this)||this.topNode,e,n,!1);return MS.set(this,r),r}resolveInner(e,n=0){let r=D1(_$.get(this)||this.topNode,e,n,!0);return _$.set(this,r),r}resolveStack(e,n=0){return Rje(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&Mi.IncludeAnonymous)>0;for(let h=this.cursor(o|Mi.IncludeAnonymous);;){let p=!1;if(h.from<=s&&h.to>=i&&(!a&&h.type.isAnonymous||n(h)!==!1)){if(h.firstChild())continue;p=!0}for(;p&&r&&(a||!h.type.isAnonymous)&&r(h),!h.nextSibling();){if(!h.parent())return;p=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:VR(Ha.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new Ji(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new Ji(Ha.none,n,r,i)))}static build(e){return Dje(e)}}Ji.empty=new Ji(Ha.none,[],[],0);class $R{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new $R(this.buffer,this.index)}}class Gf{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return Ha.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let h=e;h!=n&&!(tX(s,i,o[h+1],o[h+2])&&(a=h,r>0));h=o[h+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,h=0;a<n;){s[h++]=i[a++],s[h++]=i[a++]-r;let p=s[h++]=i[a++]-r;s[h++]=i[a++]-e,o=Math.max(o,p)}return new Gf(s,o,this.set)}}function tX(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function D1(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof Ua&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:Mi.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Ua&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class nX{cursor(e=0){return new aI(this,e)}getChild(e,n=null,r=null){let i=w$(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return w$(this,e,n,r)}resolve(e,n=0){return D1(this,e,n,!1)}resolveInner(e,n=0){return D1(this,e,n,!0)}matchContext(e){return oI(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Ua extends nX{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:h}=o._tree,p=n>0?a.length:-1;e!=p;e+=n){let g=a[e],y=h[e]+o.from,b;if(!(!(s&Mi.EnterBracketed&&g instanceof Ji&&(b=Nb.get(g))&&!b.overlay&&b.bracketed&&r>=y&&r<=y+g.length)&&!tX(i,r,y,y+g.length))){if(g instanceof Gf){if(s&Mi.ExcludeBuffers)continue;let S=g.findChild(0,g.buffer.length,n,r-y,i);if(S>-1)return new Ru(new Ije(o,g,e,y),null,S)}else if(s&Mi.IncludeAnonymous||!g.type.isAnonymous||NR(g)){let S;if(!(s&Mi.IgnoreMounts)&&(S=Nb.get(g))&&!S.overlay)return new Ua(S.tree,y,e,o);let P=new Ua(g,y,e,o);return s&Mi.IncludeAnonymous||!P.type.isAnonymous?P:P.nextChild(n<0?g.children.length-1:0,n,r,i,s)}}}if(s&Mi.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,n,r=0){let i;if(!(r&Mi.IgnoreOverlays)&&(i=Nb.get(this._tree))&&i.overlay){let s=e-this.from,o=r&Mi.EnterBracketed&&i.bracketed;for(let{from:a,to:h}of i.overlay)if((n>0||o?a<=s:a<s)&&(n<0||o?h>=s:h>s))return new Ua(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function w$(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function oI(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class Ije{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class Ru extends nX{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new Ru(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,n,r=0){if(r&Mi.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Ru(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ru(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Ru(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new Ji(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function rX(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let r=n instanceof Ua&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new Mje(i,n)}class Mje{constructor(e,n){this.heads=e,this.node=n}get next(){return rX(this.heads)}}function Rje(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Ua?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,n)),s=o}else{let o=Nb.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Ua(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(D1(a,e,n,!1))}}return i?rX(i):r}class aI{get name(){return this.type.name}constructor(e,n=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=n&~Mi.EnterBracketed,e instanceof Ua)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Ua?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Mi.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Mi.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Mi.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&Mi.IncludeAnonymous||a instanceof Gf||!a.type.isAnonymous||NR(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new Ru(this.buffer,n,this.stack[i]);return this.bufferNode=new Ru(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return oI(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return oI(this._tree,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function NR(t){return t.children.some(e=>e instanceof Gf||!e.type.isAnonymous||NR(e))}function Dje(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=eX,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new $R(n,n.length):n,h=r.types,p=0,g=0;function y(Q,q,X,K,ne,J){let{id:ae,start:Ee,end:Ce,size:$e}=a,We=g,Fe=p;if($e<0)if(a.next(),$e==-1){let Re=s[ae];X.push(Re),K.push(Ee-Q);return}else if($e==-3){p=ae;return}else if($e==-4){g=ae;return}else throw new RangeError(`Unrecognized record size: ${$e}`);let we=h[ae],Ie,Qe,se=Ee-Q;if(Ce-Ee<=i&&(Qe=D(a.pos-q,ne))){let Re=new Uint16Array(Qe.size-Qe.skip),Oe=a.pos-Qe.size,oe=Re.length;for(;a.pos>Oe;)oe=z(Qe.start,Re,oe);Ie=new Gf(Re,Ce-Qe.start,r),se=Qe.start-Q}else{let Re=a.pos-$e;a.next();let Oe=[],oe=[],nt=ae>=o?ae:-1,Ne=0,tt=Ce;for(;a.pos>Re;)nt>=0&&a.id==nt&&a.size>=0?(a.end<=tt-i&&(P(Oe,oe,Ee,Ne,a.end,tt,nt,We,Fe),Ne=Oe.length,tt=a.end),a.next()):J>2500?b(Ee,Re,Oe,oe):y(Ee,Re,Oe,oe,nt,J+1);if(nt>=0&&Ne>0&&Ne<Oe.length&&P(Oe,oe,Ee,Ne,Ee,tt,nt,We,Fe),Oe.reverse(),oe.reverse(),nt>-1&&Ne>0){let Ye=S(we,Fe);Ie=VR(we,Oe,oe,0,Oe.length,0,Ce-Ee,Ye,Ye)}else Ie=O(we,Oe,oe,Ce-Ee,We-Ce,Fe)}X.push(Ie),K.push(se)}function b(Q,q,X,K){let ne=[],J=0,ae=-1;for(;a.pos>q;){let{id:Ee,start:Ce,end:$e,size:We}=a;if(We>4)a.next();else{if(ae>-1&&Ce<ae)break;ae<0&&(ae=$e-i),ne.push(Ee,Ce,$e),J++,a.next()}}if(J){let Ee=new Uint16Array(J*4),Ce=ne[ne.length-2];for(let $e=ne.length-3,We=0;$e>=0;$e-=3)Ee[We++]=ne[$e],Ee[We++]=ne[$e+1]-Ce,Ee[We++]=ne[$e+2]-Ce,Ee[We++]=We;X.push(new Gf(Ee,ne[2]-Ce,r)),K.push(Ce-Q)}}function S(Q,q){return(X,K,ne)=>{let J=0,ae=X.length-1,Ee,Ce;if(ae>=0&&(Ee=X[ae])instanceof Ji){if(!ae&&Ee.type==Q&&Ee.length==ne)return Ee;(Ce=Ee.prop(fr.lookAhead))&&(J=K[ae]+Ee.length+Ce)}return O(Q,X,K,ne,J,q)}}function P(Q,q,X,K,ne,J,ae,Ee,Ce){let $e=[],We=[];for(;Q.length>K;)$e.push(Q.pop()),We.push(q.pop()+X-ne);Q.push(O(r.types[ae],$e,We,J-ne,Ee-J,Ce)),q.push(ne-X)}function O(Q,q,X,K,ne,J,ae){if(J){let Ee=[fr.contextHash,J];ae=ae?[Ee].concat(ae):[Ee]}if(ne>25){let Ee=[fr.lookAhead,ne];ae=ae?[Ee].concat(ae):[Ee]}return new Ji(Q,q,X,K,ae)}function D(Q,q){let X=a.fork(),K=0,ne=0,J=0,ae=X.end-i,Ee={size:0,start:0,skip:0};e:for(let Ce=X.pos-Q;X.pos>Ce;){let $e=X.size;if(X.id==q&&$e>=0){Ee.size=K,Ee.start=ne,Ee.skip=J,J+=4,K+=4,X.next();continue}let We=X.pos-$e;if($e<0||We<Ce||X.start<ae)break;let Fe=X.id>=o?4:0,we=X.start;for(X.next();X.pos>We;){if(X.size<0)if(X.size==-3||X.size==-4)Fe+=4;else break e;else X.id>=o&&(Fe+=4);X.next()}ne=we,K+=$e,J+=Fe}return(q<0||K==Q)&&(Ee.size=K,Ee.start=ne,Ee.skip=J),Ee.size>4?Ee:void 0}function z(Q,q,X){let{id:K,start:ne,end:J,size:ae}=a;if(a.next(),ae>=0&&K<o){let Ee=X;if(ae>4){let Ce=a.pos-(ae-4);for(;a.pos>Ce;)X=z(Q,q,X)}q[--X]=Ee,q[--X]=J-Q,q[--X]=ne-Q,q[--X]=K}else ae==-3?p=K:ae==-4&&(g=K);return X}let F=[],R=[];for(;a.pos>0;)y(t.start||0,t.bufferStart||0,F,R,-1,0);let N=(e=t.length)!==null&&e!==void 0?e:F.length?R[0]+F[0].length:0;return new Ji(h[t.topID],F.reverse(),R.reverse(),N)}const S$=new WeakMap;function Lk(t,e){if(!t.isAnonymous||e instanceof Gf||e.type!=t)return 1;let n=S$.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Ji)){n=1;break}n+=Lk(t,r)}S$.set(e,n)}return n}function VR(t,e,n,r,i,s,o,a,h){let p=0;for(let P=r;P<i;P++)p+=Lk(t,e[P]);let g=Math.ceil(p*1.5/8),y=[],b=[];function S(P,O,D,z,F){for(let R=D;R<z;){let N=R,Q=O[R],q=Lk(t,P[R]);for(R++;R<z;R++){let X=Lk(t,P[R]);if(q+X>=g)break;q+=X}if(R==N+1){if(q>g){let X=P[N];S(X.children,X.positions,0,X.children.length,O[N]+F);continue}y.push(P[N])}else{let X=O[R-1]+P[R-1].length-Q;y.push(VR(t,P,O,N,R,Q,X,null,h))}b.push(Q+F-s)}}return S(e,n,r,i,0),(a||h)(y,b,o)}class Lje{constructor(){this.map=new WeakMap}setBuffer(e,n,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(n,r)}getBuffer(e,n){let r=this.map.get(e);return r&&r.get(n)}set(e,n){e instanceof Ru?this.setBuffer(e.context.buffer,e.index,n):e instanceof Ua&&this.map.set(e.tree,n)}get(e){return e instanceof Ru?this.getBuffer(e.context.buffer,e.index):e instanceof Ua?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Am{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new Am(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,h=0,p=0;;a++){let g=a<n.length?n[a]:null,y=g?g.fromA:1e9;if(y-h>=r)for(;o&&o.from<y;){let b=o;if(h>=b.from||y<=b.to||p){let S=Math.max(b.from,h)-p,P=Math.min(b.to,y)-p;b=S>=P?null:new Am(S,P,b.tree,b.offset+p,a>0,!!g)}if(b&&i.push(b),o.to>y)break;o=s<e.length?e[s++]:null}if(!g)break;h=g.toA,p=g.toA-g.toB}return i}}class iX{startParse(e,n,r){return typeof e=="string"&&(e=new Fje(e)),r=r?r.length?r.map(i=>new IO(i.from,i.to)):[new IO(0,0)]:[new IO(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class Fje{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new fr({perNode:!0});let Bje=0;class Zl{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=Bje++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof Zl&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new Zl(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new Q2(e);return r=>r.modified.indexOf(n)>-1?r:Q2.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let $je=0;class Q2{constructor(e){this.name=e,this.instances=[],this.id=$je++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&Nje(n,a.modified));if(r)return r;let i=[],s=new Zl(e.name,i,e,n);for(let a of n)a.instances.push(s);let o=Vje(n);for(let a of e.set)if(!a.modified.length)for(let h of o)i.push(Q2.get(a,h));return s}}function Nje(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function Vje(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function jT(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let y=0;;){if(a=="..."&&y>0&&y+3==i.length){o=1;break}let b=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!b)throw new RangeError("Invalid path: "+i);if(s.push(b[0]=="*"?"":b[0][0]=='"'?JSON.parse(b[0]):b[0]),y+=b[0].length,y==i.length)break;let S=i[y++];if(y==i.length&&S=="!"){o=0;break}if(S!="/")throw new RangeError("Invalid path: "+i);a=i.slice(y)}let h=s.length-1,p=s[h];if(!p)throw new RangeError("Invalid path: "+i);let g=new L1(r,o,h>0?s.slice(0,h):null);e[p]=g.sort(e[p])}}return sX.add(e)}const sX=new fr({combine(t,e){let n,r,i;for(;t||e;){if(!t||e&&t.depth>=e.depth?(i=e,e=e.next):(i=t,t=t.next),n&&n.mode==i.mode&&!i.context&&!n.context)continue;let s=new L1(i.tags,i.mode,i.context);n?n.next=s:r=s,n=s}return r}});class L1{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}L1.empty=new L1([],2,null);function oX(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let h of a.set){let p=n[h.id];if(p){o=o?o+" "+p:p;break}}return o},scope:r}}function Wje(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function Uje(t,e,n,r=0,i=t.length){let s=new qje(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class qje{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:h}=e;if(a>=r||h<=n)return;o.isTop&&(s=this.highlighters.filter(S=>!S.scope||S.scope(o)));let p=i,g=Qje(e)||L1.empty,y=Wje(s,g.tags);if(y&&(p&&(p+=" "),p+=y,g.mode==1&&(i+=(i?" ":"")+y)),this.startSpan(Math.max(n,a),p),g.opaque)return;let b=e.tree&&e.tree.prop(fr.mounted);if(b&&b.overlay){let S=e.node.enter(b.overlay[0].from+a,1),P=this.highlighters.filter(D=>!D.scope||D.scope(b.tree.type)),O=e.firstChild();for(let D=0,z=a;;D++){let F=D<b.overlay.length?b.overlay[D]:null,R=F?F.from+a:h,N=Math.max(n,z),Q=Math.min(r,R);if(N<Q&&O)for(;e.from<Q&&(this.highlightRange(e,N,Q,i,s),this.startSpan(Math.min(Q,e.to),p),!(e.to>=R||!e.nextSibling())););if(!F||R>r)break;z=F.to+a,z>n&&(this.highlightRange(S.cursor(),Math.max(n,F.from+a),Math.min(r,z),"",P),this.startSpan(Math.min(r,z),p))}O&&e.parent()}else if(e.firstChild()){b&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),p)}while(e.nextSibling());e.parent()}}}function Qje(t){let e=t.type.prop(sX);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const en=Zl.define,RS=en(),qd=en(),k$=en(qd),C$=en(qd),Qd=en(),DS=en(Qd),MO=en(Qd),xu=en(),Dp=en(xu),gu=en(),yu=en(),lI=en(),Bv=en(lI),LS=en(),Ge={comment:RS,lineComment:en(RS),blockComment:en(RS),docComment:en(RS),name:qd,variableName:en(qd),typeName:k$,tagName:en(k$),propertyName:C$,attributeName:en(C$),className:en(qd),labelName:en(qd),namespace:en(qd),macroName:en(qd),literal:Qd,string:DS,docString:en(DS),character:en(DS),attributeValue:en(DS),number:MO,integer:en(MO),float:en(MO),bool:en(Qd),regexp:en(Qd),escape:en(Qd),color:en(Qd),url:en(Qd),keyword:gu,self:en(gu),null:en(gu),atom:en(gu),unit:en(gu),modifier:en(gu),operatorKeyword:en(gu),controlKeyword:en(gu),definitionKeyword:en(gu),moduleKeyword:en(gu),operator:yu,derefOperator:en(yu),arithmeticOperator:en(yu),logicOperator:en(yu),bitwiseOperator:en(yu),compareOperator:en(yu),updateOperator:en(yu),definitionOperator:en(yu),typeOperator:en(yu),controlOperator:en(yu),punctuation:lI,separator:en(lI),bracket:Bv,angleBracket:en(Bv),squareBracket:en(Bv),paren:en(Bv),brace:en(Bv),content:xu,heading:Dp,heading1:en(Dp),heading2:en(Dp),heading3:en(Dp),heading4:en(Dp),heading5:en(Dp),heading6:en(Dp),contentSeparator:en(xu),list:en(xu),quote:en(xu),emphasis:en(xu),strong:en(xu),link:en(xu),monospace:en(xu),strikethrough:en(xu),inserted:en(),deleted:en(),changed:en(),invalid:en(),meta:LS,documentMeta:en(LS),annotation:en(LS),processingInstruction:en(LS),definition:Zl.defineModifier("definition"),constant:Zl.defineModifier("constant"),function:Zl.defineModifier("function"),standard:Zl.defineModifier("standard"),local:Zl.defineModifier("local"),special:Zl.defineModifier("special")};for(let t in Ge){let e=Ge[t];e instanceof Zl&&(e.name=t)}oX([{tag:Ge.link,class:"tok-link"},{tag:Ge.heading,class:"tok-heading"},{tag:Ge.emphasis,class:"tok-emphasis"},{tag:Ge.strong,class:"tok-strong"},{tag:Ge.keyword,class:"tok-keyword"},{tag:Ge.atom,class:"tok-atom"},{tag:Ge.bool,class:"tok-bool"},{tag:Ge.url,class:"tok-url"},{tag:Ge.labelName,class:"tok-labelName"},{tag:Ge.inserted,class:"tok-inserted"},{tag:Ge.deleted,class:"tok-deleted"},{tag:Ge.literal,class:"tok-literal"},{tag:Ge.string,class:"tok-string"},{tag:Ge.number,class:"tok-number"},{tag:[Ge.regexp,Ge.escape,Ge.special(Ge.string)],class:"tok-string2"},{tag:Ge.variableName,class:"tok-variableName"},{tag:Ge.local(Ge.variableName),class:"tok-variableName tok-local"},{tag:Ge.definition(Ge.variableName),class:"tok-variableName tok-definition"},{tag:Ge.special(Ge.variableName),class:"tok-variableName2"},{tag:Ge.definition(Ge.propertyName),class:"tok-propertyName tok-definition"},{tag:Ge.typeName,class:"tok-typeName"},{tag:Ge.namespace,class:"tok-namespace"},{tag:Ge.className,class:"tok-className"},{tag:Ge.macroName,class:"tok-macroName"},{tag:Ge.propertyName,class:"tok-propertyName"},{tag:Ge.operator,class:"tok-operator"},{tag:Ge.comment,class:"tok-comment"},{tag:Ge.meta,class:"tok-meta"},{tag:Ge.invalid,class:"tok-invalid"},{tag:Ge.punctuation,class:"tok-punctuation"}]);var RO;const Dy=new fr;function Hje(t){return yn.define({combine:t?e=>e.concat(t):void 0})}const Gje=new fr;class Fc{constructor(e,n,r=[],i=""){this.data=e,this.name=i,kr.prototype.hasOwnProperty("tree")||Object.defineProperty(kr.prototype,"tree",{get(){return rs(this)}}),this.parser=n,this.extension=[Xf.of(this),kr.languageData.of((s,o,a)=>{let h=T$(s,o,a),p=h.type.prop(Dy);if(!p)return[];let g=s.facet(p),y=h.type.prop(Gje);if(y){let b=h.resolve(o-h.from,a);for(let S of y)if(S.test(b,s)){let P=s.facet(S.facet);return S.type=="replace"?P:P.concat(g)}}return g})].concat(r)}isActiveAt(e,n,r=-1){return T$(e,n,r).type.prop(Dy)==this.data}findRegions(e){let n=e.facet(Xf);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(Dy)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(fr.mounted);if(a){if(a.tree.prop(Dy)==this.data){if(a.overlay)for(let h of a.overlay)r.push({from:h.from+o,to:h.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let h=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>h)return}}for(let h=0;h<s.children.length;h++){let p=s.children[h];p instanceof Ji&&i(p,s.positions[h]+o)}};return i(rs(e),0),r}get allowsNesting(){return!0}}Fc.setState=Zn.define();function T$(t,e,n){let r=t.facet(Xf),i=rs(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Mi.ExcludeBuffers|Mi.EnterBracketed))s.type.isTop&&(i=s);return i}class X0 extends Fc{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=Hje(e.languageData);return new X0(n,e.parser.configure({props:[Dy.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new X0(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function rs(t){let e=t.field(Fc.state,!1);return e?e.tree:Ji.empty}class Xje{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let $v=null;class H2{constructor(e,n,r=[],i,s,o,a,h){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new H2(e,n,[],Ji.empty,0,r,[],null)}startParse(){return this.parser.startParse(new Xje(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Ji.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Am.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Am.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=$v;$v=this;try{return e()}finally{$v=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=j$(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((p,g,y,b)=>h.push({fromA:p,toA:g,fromB:y,toB:b})),r=Am.applyChanges(r,h),i=Ji.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let p of this.skipped){let g=e.mapPos(p.from,1),y=e.mapPos(p.to,-1);g<y&&a.push({from:g,to:y})}}}return new H2(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=j$(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends iX{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let h=$v;if(h){for(let p of i)h.tempSkipped.push(p);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=o,new Ji(Ha.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return $v}}function j$(t,e,n){return Am.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class K0{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new K0(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=H2.create(e.facet(Xf).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new K0(r)}}Fc.state=_o.define({create:K0.init,update(t,e){for(let n of e.effects)if(n.is(Fc.setState))return n.value;return e.startState.facet(Xf)!=e.state.facet(Xf)?K0.init(e.state):t.apply(e)}});let aX=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(aX=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const DO=typeof navigator<"u"&&(!((RO=navigator.scheduling)===null||RO===void 0)&&RO.isInputPending)?()=>navigator.scheduling.isInputPending():null,Kje=ns.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Fc.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Fc.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=aX(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Fc.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!DO?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,h=s.context.work(()=>DO&&DO()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(h||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Fc.setState.of(new K0(s.context))})),this.chunkBudget>0&&!(h&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>La(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Xf=yn.define({combine(t){return t.length?t[0]:null},enables:t=>[Fc.state,Kje,rn.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class WR{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const Zje=yn.define(),PT=yn.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function G2(t){let e=t.facet(PT);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function F1(t,e){let n="",r=t.tabSize,i=t.facet(PT)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function UR(t,e){t instanceof kr&&(t=new OT(t));for(let r of t.state.facet(Zje)){let i=r(t,e);if(i!==void 0)return i}let n=rs(t.state);return n.length>=e?Yje(t,n,e):null}class OT{constructor(e,n={}){this.state=e,this.options=n,this.unit=G2(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return dx(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const AT=new fr;function Yje(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from<r.node.from||o.to>r.node.to||o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return lX(r,t,n)}function lX(t,e,n){for(let r=t;r;r=r.next){let i=ePe(r.node);if(i)return i(qR.create(e,n,r))}return 0}function Jje(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function ePe(t){let e=t.type.prop(AT);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(fr.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>iPe(o,!0,1,void 0,s&&!Jje(o)?i.from:void 0)}return t.parent==null?tPe:null}function tPe(){return 0}class qR extends OT{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new qR(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(nPe(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return lX(this.context.next,this.base,this.pos)}}function nPe(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function rPe(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let h=e.childAfter(a);if(!h||h==r)return null;if(!h.type.isSkipped){if(h.from>=o)return null;let p=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+p}}a=h.to}}function iPe(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,h=rPe(t);return h?a?t.column(h.from):t.column(h.to):t.baseIndent+(a?0:t.unit*n)}function cX({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const sPe=200;function oPe(){return kr.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+sPe)return t;let s=n.sliceString(i.from,r);if(!e.some(p=>p.test(s)))return t;let{state:o}=t,a=-1,h=[];for(let{head:p}of o.selection.ranges){let g=o.doc.lineAt(p);if(g.from==a)continue;a=g.from;let y=UR(o,g.from);if(y==null)continue;let b=/^\s*/.exec(g.text)[0],S=F1(o,y);b!=S&&h.push({from:g.from,to:g.from+b.length,insert:S})}return h.length?[t,{changes:h,sequential:!0}]:t})}const aPe=yn.define(),ET=new fr;function lPe(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function cPe(t,e,n){let r=rs(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let h=a.type.prop(ET);if(h&&(a.to<r.length-50||r.length==t.doc.length||!uPe(a))){let p=h(a,t);p&&p.from<=n&&p.from>=e&&p.to>n&&(s=p)}}return s}function uPe(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function X2(t,e,n){for(let r of t.facet(aPe)){let i=r(t,e,n);if(i)return i}return cPe(t,e,n)}function uX(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const zT=Zn.define({map:uX}),R_=Zn.define({map:uX});function hX(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const Xm=_o.define({create(){return In.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=P$(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(zT)&&!hPe(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(pX),i=r?In.replace({widget:new xPe(r(e.state,n.value))}):O$;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(R_)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=P$(t,e.selection.main.head)),t},provide:t=>rn.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(O$.range(r,i))}return In.set(e,!0)}});function P$(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function K2(t,e,n){var r;let i=null;return(r=t.field(Xm,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function hPe(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}function dX(t,e){return t.field(Xm,!1)?e:e.concat(Zn.appendConfig.of(mX()))}const dPe=t=>{for(let e of hX(t)){let n=X2(t.state,e.from,e.to);if(n)return t.dispatch({effects:dX(t.state,[zT.of(n),fX(t,n)])}),!0}return!1},fPe=t=>{if(!t.state.field(Xm,!1))return!1;let e=[];for(let n of hX(t)){let r=K2(t.state,n.from,n.to);r&&e.push(R_.of(r),fX(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function fX(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return rn.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const pPe=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),s=X2(e,i.from,i.to);s&&n.push(zT.of(s)),r=(s?t.lineBlockAt(s.to):i).to+1}return n.length&&t.dispatch({effects:dX(t.state,n)}),!!n.length},mPe=t=>{let e=t.state.field(Xm,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(R_.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},gPe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:dPe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:fPe},{key:"Ctrl-Alt-[",run:pPe},{key:"Ctrl-Alt-]",run:mPe}],yPe={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},pX=yn.define({combine(t){return Ku(t,yPe)}});function mX(t){return[Xm,_Pe]}function gX(t,e){let{state:n}=t,r=n.facet(pX),i=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),h=K2(t.state,a.from,a.to);h&&t.dispatch({effects:R_.of(h)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const O$=In.replace({widget:new class extends Zu{toDOM(t){return gX(t,null)}}});class xPe extends Zu{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return gX(e,this.value)}}const vPe={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class LO extends Zh{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function bPe(t={}){let e={...vPe,...t},n=new LO(e,!0),r=new LO(e,!1),i=ns.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Xf)!=o.state.facet(Xf)||o.startState.field(Xm,!1)!=o.state.field(Xm,!1)||rs(o.startState)!=rs(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new Xh;for(let h of o.viewportLineBlocks){let p=K2(o.state,h.from,h.to)?r:X2(o.state,h.from,h.to)?n:null;p&&a.add(h.from,h.from,p)}return a.finish()}}),{domEventHandlers:s}=e;return[i,bje({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||pr.empty},initialSpacer(){return new LO(e,!1)},domEventHandlers:{...s,click:(o,a,h)=>{if(s.click&&s.click(o,a,h))return!0;let p=K2(o.state,a.from,a.to);if(p)return o.dispatch({effects:R_.of(p)}),!0;let g=X2(o.state,a.from,a.to);return g?(o.dispatch({effects:zT.of(g)}),!0):!1}}}),mX()]}const _Pe=rn.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class D_{constructor(e,n){this.specs=e;let r;function i(a){let h=qf.newName();return(r||(r=Object.create(null)))["."+h]=a,h}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof Fc?a=>a.prop(Dy)==o.data:o?a=>a==o:void 0,this.style=oX(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new qf(r):null,this.themeType=n.themeType}static define(e,n){return new D_(e,n||{})}}const cI=yn.define(),yX=yn.define({combine(t){return t.length?[t[0]]:null}});function FO(t){let e=t.facet(cI);return e.length?e:t.facet(yX)}function xX(t,e){let n=[SPe],r;return t instanceof D_&&(t.module&&n.push(rn.styleModule.of(t.module)),r=t.themeType),e!=null&&e.fallback?n.push(yX.of(t)):r?n.push(cI.computeN([rn.darkTheme],i=>i.facet(rn.darkTheme)==(r=="dark")?[t]:[])):n.push(cI.of(t)),n}class wPe{constructor(e){this.markCache=Object.create(null),this.tree=rs(e.state),this.decorations=this.buildDeco(e,FO(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=rs(e.state),r=FO(e.state),i=r!=FO(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return In.none;let r=new Xh;for(let{from:i,to:s}of e.visibleRanges)Uje(this.tree,n,(o,a,h)=>{r.add(o,a,this.markCache[h]||(this.markCache[h]=In.mark({class:h})))},i,s);return r.finish()}}const SPe=ig.high(ns.fromClass(wPe,{decorations:t=>t.decorations})),kPe=D_.define([{tag:Ge.meta,color:"#404740"},{tag:Ge.link,textDecoration:"underline"},{tag:Ge.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ge.emphasis,fontStyle:"italic"},{tag:Ge.strong,fontWeight:"bold"},{tag:Ge.strikethrough,textDecoration:"line-through"},{tag:Ge.keyword,color:"#708"},{tag:[Ge.atom,Ge.bool,Ge.url,Ge.contentSeparator,Ge.labelName],color:"#219"},{tag:[Ge.literal,Ge.inserted],color:"#164"},{tag:[Ge.string,Ge.deleted],color:"#a11"},{tag:[Ge.regexp,Ge.escape,Ge.special(Ge.string)],color:"#e40"},{tag:Ge.definition(Ge.variableName),color:"#00f"},{tag:Ge.local(Ge.variableName),color:"#30a"},{tag:[Ge.typeName,Ge.namespace],color:"#085"},{tag:Ge.className,color:"#167"},{tag:[Ge.special(Ge.variableName),Ge.macroName],color:"#256"},{tag:Ge.definition(Ge.propertyName),color:"#00c"},{tag:Ge.comment,color:"#940"},{tag:Ge.invalid,color:"#f00"}]),CPe=rn.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),vX=1e4,bX="()[]{}",_X=yn.define({combine(t){return Ku(t,{afterCursor:!0,brackets:bX,maxScanDistance:vX,renderMatch:PPe})}}),TPe=In.mark({class:"cm-matchingBracket"}),jPe=In.mark({class:"cm-nonmatchingBracket"});function PPe(t){let e=[],n=t.matched?TPe:jPe;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const OPe=_o.define({create(){return In.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(_X);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Du(e.state,i.head,-1,r)||i.head>0&&Du(e.state,i.head-1,1,r)||r.afterCursor&&(Du(e.state,i.head,1,r)||i.head<e.state.doc.length&&Du(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return In.set(n,!0)},provide:t=>rn.decorations.from(t)}),APe=[OPe,CPe];function EPe(t={}){return[_X.of(t),APe]}const wX=new fr;function uI(t,e,n){let r=t.prop(e<0?fr.openedBy:fr.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function hI(t){let e=t.type.prop(wX);return e?e(t.node):t}function Du(t,e,n,r={}){let i=r.maxScanDistance||vX,s=r.brackets||bX,o=rs(t),a=o.resolveInner(e,n);for(let h=a;h;h=h.parent){let p=uI(h.type,n,s);if(p&&h.from<h.to){let g=hI(h);if(g&&(n>0?e>=g.from&&e<g.to:e>g.from&&e<=g.to))return zPe(t,e,n,h,g,p,s)}}return IPe(t,e,n,o,a.type,i,s)}function zPe(t,e,n,r,i,s,o){let a=r.parent,h={from:i.from,to:i.to},p=0,g=a==null?void 0:a.cursor();if(g&&(n<0?g.childBefore(r.from):g.childAfter(r.to)))do if(n<0?g.to<=r.from:g.from>=r.to){if(p==0&&s.indexOf(g.type.name)>-1&&g.from<g.to){let y=hI(g);return{start:h,end:y?{from:y.from,to:y.to}:void 0,matched:!0}}else if(uI(g.type,n,o))p++;else if(uI(g.type,-n,o)){if(p==0){let y=hI(g);return{start:h,end:y&&y.from<y.to?{from:y.from,to:y.to}:void 0,matched:!1}}p--}}while(n<0?g.prevSibling():g.nextSibling());return{start:h,matched:!1}}function IPe(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),h=o.indexOf(a);if(h<0||h%2==0!=n>0)return null;let p={from:n<0?e-1:e,to:n>0?e+1:e},g=t.doc.iterRange(e,n>0?t.doc.length:0),y=0;for(let b=0;!g.next().done&&b<=s;){let S=g.value;n<0&&(b+=S.length);let P=e+b*n;for(let O=n>0?0:S.length-1,D=n>0?S.length:-1;O!=D;O+=n){let z=o.indexOf(S[O]);if(!(z<0||r.resolveInner(P+O,1).type!=i))if(z%2==0==n>0)y++;else{if(y==1)return{start:p,end:{from:P+O,to:P+O+1},matched:z>>1==h>>1};y--}}n>0&&(b+=S.length)}return g.done?{start:p,matched:!1}:null}const MPe=Object.create(null),A$=[Ha.none],E$=[],z$=Object.create(null),RPe=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])RPe[t]=DPe(MPe,e);function BO(t,e){E$.indexOf(t)>-1||(E$.push(t),console.warn(e))}function DPe(t,e){let n=[];for(let a of e.split(" ")){let h=[];for(let p of a.split(".")){let g=t[p]||Ge[p];g?typeof g=="function"?h.length?h=h.map(g):BO(p,`Modifier ${p} used at start of tag`):h.length?BO(p,`Tag ${p} used as modifier`):h=Array.isArray(g)?g:[g]:BO(p,`Unknown highlighting tag ${p}`)}for(let p of h)n.push(p)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(a=>a.id),s=z$[i];if(s)return s.id;let o=z$[i]=Ha.define({id:A$.length,name:r,props:[jT({[r]:n})]});return A$.push(o),o.id}ci.RTL,ci.LTR;const LPe=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=HR(t.state,n.from);return r.line?FPe(t):r.block?$Pe(t):!1};function QR(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const FPe=QR(WPe,0),BPe=QR(SX,0),$Pe=QR((t,e)=>SX(t,e,VPe(e)),0);function HR(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Nv=50;function NPe(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-Nv,r),o=t.sliceDoc(i,i+Nv),a=/\s*$/.exec(s)[0].length,h=/^\s*/.exec(o)[0].length,p=s.length-a;if(s.slice(p-e.length,p)==e&&o.slice(h,h+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+h,margin:h&&1}};let g,y;i-r<=2*Nv?g=y=t.sliceDoc(r,i):(g=t.sliceDoc(r,r+Nv),y=t.sliceDoc(i-Nv,i));let b=/^\s*/.exec(g)[0].length,S=/\s*$/.exec(y)[0].length,P=y.length-S-n.length;return g.slice(b,b+e.length)==e&&y.slice(P,P+n.length)==n?{open:{pos:r+b+e.length,margin:/\s/.test(g.charAt(b+e.length))?1:0},close:{pos:i-S-n.length,margin:/\s/.test(y.charAt(P-1))?1:0}}:null}function VPe(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function SX(t,e,n=e.selection.ranges){let r=n.map(s=>HR(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>NPe(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let h=r[o],{open:p,close:g}=a;s.push({from:p.pos-h.open.length,to:p.pos+p.margin},{from:g.pos-g.margin,to:g.pos+h.close.length})}return{changes:s}}return null}function WPe(t,e,n=e.selection.ranges){let r=[],i=-1;e:for(let{from:s,to:o}of n){let a=r.length,h=1e9,p;for(let g=s;g<=o;){let y=e.doc.lineAt(g);if(p==null&&(p=HR(e,y.from).line,!p))continue e;if(y.from>i&&(s==o||o>y.from)){i=y.from;let b=/^\s*/.exec(y.text)[0].length,S=b==y.length,P=y.text.slice(b,b+p.length)==p?b:-1;b<y.text.length&&b<h&&(h=b),r.push({line:y,comment:P,token:p,indent:b,empty:S,single:!1})}g=y.to+1}if(h<1e9)for(let g=a;g<r.length;g++)r[g].indent<r[g].line.text.length&&(r[g].indent=h);r.length==a+1&&(r[a].single=!0)}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:h,indent:p,empty:g,single:y}of r)(y||!g)&&s.push({from:a.from+p,insert:h+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:h}of r)if(a>=0){let p=o.from+a,g=p+h.length;o.text[g-o.from]==" "&&g++,s.push({from:p,to:g})}return{changes:s}}return null}const dI=Xu.define(),UPe=Xu.define(),qPe=yn.define(),kX=yn.define({combine(t){return Ku(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),CX=_o.define({create(){return Lu.empty},update(t,e){let n=e.state.facet(kX),r=e.annotation(dI);if(r){let h=Fa.fromTransaction(e,r.selection),p=r.side,g=p==0?t.undone:t.done;return h?g=Z2(g,g.length,n.minDepth,h):g=PX(g,e.startState.selection),new Lu(p==0?r.rest:g,p==0?g:r.rest)}let i=e.annotation(UPe);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(zs.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Fa.fromTransaction(e),o=e.annotation(zs.time),a=e.annotation(zs.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Lu(t.done.map(Fa.fromJSON),t.undone.map(Fa.fromJSON))}});function QPe(t={}){return[CX,kX.of(t),rn.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?TX:e.inputType=="historyRedo"?fI:null;return r?(e.preventDefault(),r(n)):!1}})]}function IT(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(CX,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const TX=IT(0,!1),fI=IT(1,!1),HPe=IT(0,!0),GPe=IT(1,!0);class Fa{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Fa(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Fa(e.changes&&Ts.fromJSON(e.changes),[],e.mapped&&Qu.fromJSON(e.mapped),e.startSelection&&xt.fromJSON(e.startSelection),e.selectionsAfter.map(xt.fromJSON))}static fromTransaction(e,n){let r=ic;for(let i of e.startState.facet(qPe)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Fa(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,ic)}static selection(e){return new Fa(void 0,ic,void 0,void 0,e)}}function Z2(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function XPe(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let h=0;h<n.length;){let p=n[h++],g=n[h++];a>=p&&o<=g&&(r=!0)}}),r}function KPe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function jX(t,e){return t.length?e.length?t.concat(e):t:e}const ic=[],ZPe=200;function PX(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-ZPe));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),Z2(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Fa.selection([e])]}function YPe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function $O(t,e){if(!t.length)return t;let n=t.length,r=ic;for(;n;){let i=JPe(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Fa.selection(r)]:ic}function JPe(t,e,n){let r=jX(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):ic,n);if(!t.changes)return Fa.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Fa(i,Zn.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const eOe=/^(input\.type|delete)($|\.)/;class Lu{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Lu(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||eOe.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,XPe(a.changes,e.changes))||r=="input.type.compose")?o=Z2(o,o.length-1,i.minDepth,new Fa(e.changes.compose(a.changes),jX(Zn.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,ic)):o=Z2(o,o.length,i.minDepth,e),new Lu(o,ic,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:ic;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&KPe(s[s.length-1],e)?this:new Lu(PX(this.done,e),this.undone,n,r)}addMapping(e){return new Lu($O(this.done,e),$O(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||(s.startSelection?s.startSelection.map(s.changes.invertedDesc,1):n.selection);if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:dI.of({side:e,rest:YPe(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?ic:i.slice(0,i.length-1);return s.mapped&&(a=$O(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:dI.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Lu.empty=new Lu(ic,ic);const tOe=[{key:"Mod-z",run:TX,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:fI,preventDefault:!0},{linux:"Ctrl-Shift-z",run:fI,preventDefault:!0},{key:"Mod-u",run:HPe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:GPe,preventDefault:!0}];function fx(t,e){return xt.create(t.ranges.map(e),t.mainIndex)}function Zc(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Yc({state:t,dispatch:e},n){let r=fx(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Zc(t,r)),!0)}function MT(t,e){return xt.cursor(e?t.to:t.from)}function OX(t,e){return Yc(t,n=>n.empty?t.moveByChar(n,e):MT(n,e))}function $o(t){return t.textDirectionAt(t.state.selection.main.head)==ci.LTR}const AX=t=>OX(t,!$o(t)),EX=t=>OX(t,$o(t));function zX(t,e){return Yc(t,n=>n.empty?t.moveByGroup(n,e):MT(n,e))}const nOe=t=>zX(t,!$o(t)),rOe=t=>zX(t,$o(t));function iOe(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function RT(t,e,n){let r=rs(t).resolveInner(e.head),i=n?fr.closedBy:fr.openedBy;for(let h=e.head;;){let p=n?r.childAfter(h):r.childBefore(h);if(!p)break;iOe(t,p,i)?r=p:h=n?p.to:p.from}let s=r.type.prop(i),o,a;return s&&(o=n?Du(t,r.from,1):Du(t,r.to,-1))&&o.matched?a=n?o.end.to:o.end.from:a=n?r.to:r.from,xt.cursor(a,n?-1:1)}const sOe=t=>Yc(t,e=>RT(t.state,e,!$o(t))),oOe=t=>Yc(t,e=>RT(t.state,e,$o(t)));function IX(t,e){return Yc(t,n=>{if(!n.empty)return MT(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const MX=t=>IX(t,!1),RX=t=>IX(t,!0);function DX(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(rn.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function LX(t,e){let n=DX(t),{state:r}=t,i=fx(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):MT(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),h=a.top+n.marginTop,p=a.bottom-n.marginBottom;o&&o.top>h&&o.bottom<p&&(s=rn.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-h}))}return t.dispatch(Zc(r,i),{effects:s}),!0}const I$=t=>LX(t,!1),pI=t=>LX(t,!0);function rp(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=xt.cursor(r.from+s))}return i}const aOe=t=>Yc(t,e=>rp(t,e,!0)),lOe=t=>Yc(t,e=>rp(t,e,!1)),cOe=t=>Yc(t,e=>rp(t,e,!$o(t))),uOe=t=>Yc(t,e=>rp(t,e,$o(t))),hOe=t=>Yc(t,e=>xt.cursor(t.lineBlockAt(e.head).from,1)),dOe=t=>Yc(t,e=>xt.cursor(t.lineBlockAt(e.head).to,-1));function fOe(t,e,n){let r=!1,i=fx(t.selection,s=>{let o=Du(t,s.head,-1)||Du(t,s.head,1)||s.head>0&&Du(t,s.head-1,1)||s.head<t.doc.length&&Du(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return xt.cursor(a)});return r?(e(Zc(t,i)),!0):!1}const pOe=({state:t,dispatch:e})=>fOe(t,e);function yc(t,e){let n=fx(t.state.selection,r=>{let i=e(r);return xt.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Zc(t.state,n)),!0)}function FX(t,e){return yc(t,n=>t.moveByChar(n,e))}const BX=t=>FX(t,!$o(t)),$X=t=>FX(t,$o(t));function NX(t,e){return yc(t,n=>t.moveByGroup(n,e))}const mOe=t=>NX(t,!$o(t)),gOe=t=>NX(t,$o(t)),yOe=t=>yc(t,e=>RT(t.state,e,!$o(t))),xOe=t=>yc(t,e=>RT(t.state,e,$o(t)));function VX(t,e){return yc(t,n=>t.moveVertically(n,e))}const WX=t=>VX(t,!1),UX=t=>VX(t,!0);function qX(t,e){return yc(t,n=>t.moveVertically(n,e,DX(t).height))}const M$=t=>qX(t,!1),R$=t=>qX(t,!0),vOe=t=>yc(t,e=>rp(t,e,!0)),bOe=t=>yc(t,e=>rp(t,e,!1)),_Oe=t=>yc(t,e=>rp(t,e,!$o(t))),wOe=t=>yc(t,e=>rp(t,e,$o(t))),SOe=t=>yc(t,e=>xt.cursor(t.lineBlockAt(e.head).from)),kOe=t=>yc(t,e=>xt.cursor(t.lineBlockAt(e.head).to)),D$=({state:t,dispatch:e})=>(e(Zc(t,{anchor:0})),!0),L$=({state:t,dispatch:e})=>(e(Zc(t,{anchor:t.doc.length})),!0),F$=({state:t,dispatch:e})=>(e(Zc(t,{anchor:t.selection.main.anchor,head:0})),!0),B$=({state:t,dispatch:e})=>(e(Zc(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),COe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),TOe=({state:t,dispatch:e})=>{let n=DT(t).map(({from:r,to:i})=>xt.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:xt.create(n),userEvent:"select"})),!0},jOe=({state:t,dispatch:e})=>{let n=fx(t.selection,r=>{let i=rs(t),s=i.resolveStack(r.from,1);if(r.empty){let o=i.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&o.next)return xt.range(a.to,a.from)}return r});return n.eq(t.selection)?!1:(e(Zc(t,n)),!0)};function QX(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let o=n.doc.lineAt(s.head);if(e?o.to<t.state.doc.length:o.from>0)for(let a=s;;){let h=t.moveVertically(a,e);if(h.head<o.from||h.head>o.to){i.some(p=>p.head==h.head)||i.push(h);break}else{if(h.head==a.head)break;a=h}}}return i.length==r.ranges.length?!1:(t.dispatch(Zc(n,xt.create(i,i.length-1))),!0)}const POe=t=>QX(t,!1),OOe=t=>QX(t,!0),AOe=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=xt.create([n.main]):n.main.empty||(r=xt.create([xt.cursor(n.main.head)])),r?(e(Zc(t,r)),!0):!1};function L_(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let h=e(s);h<o?(n="delete.backward",h=FS(t,h,!1)):h>o&&(n="delete.forward",h=FS(t,h,!0)),o=Math.min(o,h),a=Math.max(a,h)}else o=FS(t,o,!1),a=FS(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:xt.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?rn.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function FS(t,e,n){if(t instanceof rn)for(let r of t.state.facet(rn.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const HX=(t,e,n)=>L_(t,r=>{let i=r.from,{state:s}=t,o=s.doc.lineAt(i),a,h;if(n&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let p=dx(a,s.tabSize),g=p%G2(s)||G2(s);for(let y=0;y<g&&a[a.length-1-y]==" ";y++)i--;h=i}else h=Es(o.text,i-o.from,e,e)+o.from,h==i&&o.number!=(e?s.doc.lines:1)?h+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(h-o.from,i-o.from))&&(h=Es(o.text,h-o.from,!1,!1)+o.from);return h}),mI=t=>HX(t,!1,!0),GX=t=>HX(t,!0,!1),XX=(t,e)=>L_(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let h=Es(s.text,r-s.from,e)+s.from,p=s.text.slice(Math.min(r,h)-s.from,Math.max(r,h)-s.from),g=o(p);if(a!=null&&g!=a)break;(p!=" "||r!=n.head)&&(a=g),r=h}return r}),KX=t=>XX(t,!1),EOe=t=>XX(t,!0),zOe=t=>L_(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),IOe=t=>L_(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),MOe=t=>L_(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),ROe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Ir.of(["",""])},range:xt.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},DOe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:Es(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Es(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:xt.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function DT(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function ZX(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of DT(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let h of s.ranges)i.push(xt.range(Math.min(t.doc.length,h.anchor+a),Math.min(t.doc.length,h.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let h of s.ranges)i.push(xt.range(h.anchor-a,h.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:xt.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const LOe=({state:t,dispatch:e})=>ZX(t,e,!1),FOe=({state:t,dispatch:e})=>ZX(t,e,!0);function YX(t,e,n){if(t.readOnly)return!1;let r=[];for(let s of DT(t))n?r.push({from:s.from,insert:t.doc.slice(s.from,s.to)+t.lineBreak}):r.push({from:s.to,insert:t.lineBreak+t.doc.slice(s.from,s.to)});let i=t.changes(r);return e(t.update({changes:i,selection:t.selection.map(i,n?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const BOe=({state:t,dispatch:e})=>YX(t,e,!1),$Oe=({state:t,dispatch:e})=>YX(t,e,!0),NOe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(DT(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=fx(e.selection,i=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(i.head),a=t.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function VOe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=rs(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(fr.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const $$=JX(!1),WOe=JX(!0);function JX(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),h=!t&&s==o&&VOe(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let p=new OT(e,{simulateBreak:s,simulateDoubleBreak:!!h}),g=UR(p,s);for(g==null&&(g=dx(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;h?{from:s,to:o}=h:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let y=["",F1(e,g)];return h&&y.push(F1(e,p.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Ir.of(y)},range:xt.cursor(s+1+y[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function GR(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:xt.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const UOe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new OT(t,{overrideIndentation:s=>{let o=n[s];return o??-1}}),i=GR(t,(s,o,a)=>{let h=UR(r,s.from);if(h==null)return;/\S/.test(s.text)||(h=0);let p=/^\s*/.exec(s.text)[0],g=F1(t,h);(p!=g||a.from<s.from+p.length)&&(n[s.from]=h,o.push({from:s.from,to:s.from+p.length,insert:g}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},eK=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(GR(t,(n,r)=>{r.push({from:n.from,insert:t.facet(PT)})}),{userEvent:"input.indent"})),!0),tK=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(GR(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=dx(i,t.tabSize),o=0,a=F1(t,Math.max(0,s-G2(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),qOe=t=>(t.setTabFocusMode(),!0),QOe=[{key:"Ctrl-b",run:AX,shift:BX,preventDefault:!0},{key:"Ctrl-f",run:EX,shift:$X},{key:"Ctrl-p",run:MX,shift:WX},{key:"Ctrl-n",run:RX,shift:UX},{key:"Ctrl-a",run:hOe,shift:SOe},{key:"Ctrl-e",run:dOe,shift:kOe},{key:"Ctrl-d",run:GX},{key:"Ctrl-h",run:mI},{key:"Ctrl-k",run:zOe},{key:"Ctrl-Alt-h",run:KX},{key:"Ctrl-o",run:ROe},{key:"Ctrl-t",run:DOe},{key:"Ctrl-v",run:pI}],HOe=[{key:"ArrowLeft",run:AX,shift:BX,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:nOe,shift:mOe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cOe,shift:_Oe,preventDefault:!0},{key:"ArrowRight",run:EX,shift:$X,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:rOe,shift:gOe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:uOe,shift:wOe,preventDefault:!0},{key:"ArrowUp",run:MX,shift:WX,preventDefault:!0},{mac:"Cmd-ArrowUp",run:D$,shift:F$},{mac:"Ctrl-ArrowUp",run:I$,shift:M$},{key:"ArrowDown",run:RX,shift:UX,preventDefault:!0},{mac:"Cmd-ArrowDown",run:L$,shift:B$},{mac:"Ctrl-ArrowDown",run:pI,shift:R$},{key:"PageUp",run:I$,shift:M$},{key:"PageDown",run:pI,shift:R$},{key:"Home",run:lOe,shift:bOe,preventDefault:!0},{key:"Mod-Home",run:D$,shift:F$},{key:"End",run:aOe,shift:vOe,preventDefault:!0},{key:"Mod-End",run:L$,shift:B$},{key:"Enter",run:$$,shift:$$},{key:"Mod-a",run:COe},{key:"Backspace",run:mI,shift:mI,preventDefault:!0},{key:"Delete",run:GX,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:KX,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:EOe,preventDefault:!0},{mac:"Mod-Backspace",run:IOe,preventDefault:!0},{mac:"Mod-Delete",run:MOe,preventDefault:!0}].concat(QOe.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),GOe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:sOe,shift:yOe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:oOe,shift:xOe},{key:"Alt-ArrowUp",run:LOe},{key:"Shift-Alt-ArrowUp",run:BOe},{key:"Alt-ArrowDown",run:FOe},{key:"Shift-Alt-ArrowDown",run:$Oe},{key:"Mod-Alt-ArrowUp",run:POe},{key:"Mod-Alt-ArrowDown",run:OOe},{key:"Escape",run:AOe},{key:"Mod-Enter",run:WOe},{key:"Alt-l",mac:"Ctrl-l",run:TOe},{key:"Mod-i",run:jOe,preventDefault:!0},{key:"Mod-[",run:tK},{key:"Mod-]",run:eK},{key:"Mod-Alt-\\",run:UOe},{key:"Shift-Mod-k",run:NOe},{key:"Shift-Mod-\\",run:pOe},{key:"Mod-/",run:LPe},{key:"Alt-A",run:BPe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:qOe}].concat(HOe),XOe={key:"Tab",run:eK,shift:tK},N$=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Z0{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(N$(a)):N$,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Oa(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=bR(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=zu(e);let i=this.normalize(n);if(i.length)for(let s=0,o=r;;s++){let a=i.charCodeAt(s),h=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(h)return this.value=h,this;break}o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Z0.prototype[Symbol.iterator]=function(){return this});const nK={from:-1,to:-1,match:/.*/.exec("")},XR="gm"+(/x/.unicode==null?"":"u");class rK{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=nK,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new iK(e,n,r,i,s);this.re=new RegExp(n,XR+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=Y2(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Y2(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const NO=new WeakMap;class s0{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=NO.get(e);if(!i||i.from>=r||i.to<=n){let a=new s0(n,e.sliceString(n,r));return NO.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),NO.set(e,new s0(o,s)),new s0(n,s.slice(n-o,r-o))}}class iK{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=nK,this.matchPos=Y2(e,i),this.re=new RegExp(n,XR+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=s0.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Y2(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=s0.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(rK.prototype[Symbol.iterator]=iK.prototype[Symbol.iterator]=function(){return this});function KOe(t){try{return new RegExp(t,XR),!0}catch{return!1}}function Y2(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}const ZOe=t=>{let{state:e}=t,n=String(e.doc.lineAt(t.state.selection.main.head).number),{close:r,result:i}=gje(t,{label:e.phrase("Go to line"),input:{type:"text",name:"line",value:n},focus:!0,submitLabel:e.phrase("go")});return i.then(s=>{let o=s&&/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(s.elements.line.value);if(!o){t.dispatch({effects:r});return}let a=e.doc.lineAt(e.selection.main.head),[,h,p,g,y]=o,b=g?+g.slice(1):0,S=p?+p:a.number;if(p&&y){let D=S/100;h&&(D=D*(h=="-"?-1:1)+a.number/e.doc.lines),S=Math.round(e.doc.lines*D)}else p&&h&&(S=S*(h=="-"?-1:1)+a.number);let P=e.doc.line(Math.max(1,Math.min(e.doc.lines,S))),O=xt.cursor(P.from+Math.max(0,Math.min(b,P.length)));t.dispatch({effects:[r,rn.scrollIntoView(O.from,{y:"center"})],selection:O})}),!0},YOe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},JOe=yn.define({combine(t){return Ku(t,YOe,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function eAe(t){return[sAe,iAe]}const tAe=In.mark({class:"cm-selectionMatch"}),nAe=In.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function V$(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=Oi.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=Oi.Word)}function rAe(t,e,n,r){return t(e.sliceDoc(n,n+1))==Oi.Word&&t(e.sliceDoc(r-1,r))==Oi.Word}const iAe=ns.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(JOe),{state:n}=t,r=n.selection;if(r.ranges.length>1)return In.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return In.none;let h=n.wordAt(i.head);if(!h)return In.none;o=n.charCategorizer(i.head),s=n.sliceDoc(h.from,h.to)}else{let h=i.to-i.from;if(h<e.minSelectionLength||h>200)return In.none;if(e.wholeWords){if(s=n.sliceDoc(i.from,i.to),o=n.charCategorizer(i.head),!(V$(o,n,i.from,i.to)&&rAe(o,n,i.from,i.to)))return In.none}else if(s=n.sliceDoc(i.from,i.to),!s)return In.none}let a=[];for(let h of t.visibleRanges){let p=new Z0(n.doc,s,h.from,h.to);for(;!p.next().done;){let{from:g,to:y}=p.value;if((!o||V$(o,n,g,y))&&(i.empty&&g<=i.from&&y>=i.to?a.push(nAe.range(g,y)):(g>=i.to||y<=i.from)&&a.push(tAe.range(g,y)),a.length>e.maxMatches))return In.none}}return In.set(a)}},{decorations:t=>t.decorations}),sAe=rn.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),oAe=({state:t,dispatch:e})=>{let{selection:n}=t,r=xt.create(n.ranges.map(i=>t.wordAt(i.head)||xt.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function aAe(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new Z0(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Z0(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(h=>h.from==a.value.from))continue;if(s){let h=t.wordAt(a.value.from);if(!h||h.from!=a.value.from||h.to!=a.value.to)continue}return a.value}}const lAe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return oAe({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=aAe(t,r);return i?(e(t.update({selection:t.selection.addRange(xt.range(i.from,i.to),!1),effects:rn.scrollIntoView(i.to)})),!0):!1},px=yn.define({combine(t){return Ku(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new wAe(e),scrollToMatch:e=>rn.scrollIntoView(e)})}});class sK{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||KOe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord,this.test=e.test}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord&&this.test==e.test}create(){return this.regexp?new pAe(this):new hAe(this)}getCursor(e,n=0,r){let i=e.doc?e:kr.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?uy(this,i,n,r):cy(this,i,n,r)}}class oK{constructor(e){this.spec=e}}function cAe(t,e,n){return(r,i,s,o)=>{if(n&&!n(r,i,s,o))return!1;let a=r>=o&&i<=o+s.length?s.slice(r-o,i-o):e.doc.sliceString(r,i);return t(a,e,r,i)}}function cy(t,e,n,r){let i;return t.wholeWord&&(i=uAe(e.doc,e.charCategorizer(e.selection.main.head))),t.test&&(i=cAe(t.test,e,i)),new Z0(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:s=>s.toLowerCase(),i)}function uAe(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(J2(i,n-s))!=Oi.Word||e(eC(i,n-s))!=Oi.Word)&&(e(eC(i,r-s))!=Oi.Word||e(J2(i,r-s))!=Oi.Word))}class hAe extends oK{constructor(e){super(e)}nextMatch(e,n,r){let i=cy(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=cy(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=cy(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=cy(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=cy(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function dAe(t,e,n){return(r,i,s)=>(!n||n(r,i,s))&&t(s[0],e,r,i)}function uy(t,e,n,r){let i;return t.wholeWord&&(i=fAe(e.charCategorizer(e.selection.main.head))),t.test&&(i=dAe(t.test,e,i)),new rK(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:i},n,r)}function J2(t,e){return t.slice(Es(t,e,!1),e)}function eC(t,e){return t.slice(e,Es(t,e))}function fAe(t){return(e,n,r)=>!r[0].length||(t(J2(r.input,r.index))!=Oi.Word||t(eC(r.input,r.index))!=Oi.Word)&&(t(eC(r.input,r.index+r[0].length))!=Oi.Word||t(J2(r.input,r.index+r[0].length))!=Oi.Word)}class pAe extends oK{nextMatch(e,n,r){let i=uy(this.spec,e,r,e.doc.length).next();return i.done&&(i=uy(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=uy(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=uy(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=uy(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const B1=Zn.define(),KR=Zn.define(),Of=_o.define({create(t){return new VO(gI(t).create(),null)},update(t,e){for(let n of e.effects)n.is(B1)?t=new VO(n.value.create(),t.panel):n.is(KR)&&(t=new VO(t.query,n.value?ZR:null));return t},provide:t=>R1.from(t,e=>e.panel)});class VO{constructor(e,n){this.query=e,this.panel=n}}const mAe=In.mark({class:"cm-searchMatch"}),gAe=In.mark({class:"cm-searchMatch cm-searchMatch-selected"}),yAe=ns.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Of))}update(t){let e=t.state.field(Of);(e!=t.startState.field(Of)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return In.none;let{view:n}=this,r=new Xh;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:h}=s[i];for(;i<o-1&&h>s[i+1].from-2*250;)h=s[++i].to;t.highlight(n.state,a,h,(p,g)=>{let y=n.state.selection.ranges.some(b=>b.from==p&&b.to==g);r.add(p,g,y?gAe:mAe)})}return r.finish()}},{decorations:t=>t.decorations});function F_(t){return e=>{let n=e.state.field(Of,!1);return n&&n.query.spec.valid?t(e,n):cK(e)}}const tC=F_((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=xt.single(r.from,r.to),s=t.state.facet(px);return t.dispatch({selection:i,effects:[YR(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),lK(t),!0}),nC=F_((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=xt.single(i.from,i.to),o=t.state.facet(px);return t.dispatch({selection:s,effects:[YR(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),lK(t),!0}),xAe=F_((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:xt.create(n.map(r=>xt.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),vAe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new Z0(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(xt.range(a.value.from,a.value.to))}return e(t.update({selection:xt.create(s,o),userEvent:"select.search.matches"})),!0},W$=F_((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=s,a=[],h,p,g=[];o.from==r&&o.to==i&&(p=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:p}),o=e.nextMatch(n,o.from,o.to),g.push(rn.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let y=t.state.changes(a);return o&&(h=xt.single(o.from,o.to).map(y),g.push(YR(t,o)),g.push(n.facet(px).scrollToMatch(h.main,t))),t.dispatch({changes:y,selection:h,effects:g,userEvent:"input.replace"}),!0}),bAe=F_((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:rn.announce.of(r),userEvent:"input.replace.all"}),!0});function ZR(t){return t.state.facet(px).createPanel(t)}function gI(t,e){var n,r,i,s,o;let a=t.selection.main,h=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!h)return e;let p=t.facet(px);return new sK({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:p.literal)?h:h.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:p.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:p.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:p.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:p.wholeWord})}function aK(t){let e=FR(t,ZR);return e&&e.dom.querySelector("[main-field]")}function lK(t){let e=aK(t);e&&e==t.root.activeElement&&e.select()}const cK=t=>{let e=t.state.field(Of,!1);if(e&&e.panel){let n=aK(t);if(n&&n!=t.root.activeElement){let r=gI(t.state,e.query.spec);r.valid&&t.dispatch({effects:B1.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[KR.of(!0),e?B1.of(gI(t.state,e.query.spec)):Zn.appendConfig.of(kAe)]});return!0},uK=t=>{let e=t.state.field(Of,!1);if(!e||!e.panel)return!1;let n=FR(t,ZR);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:KR.of(!1)}),!0},_Ae=[{key:"Mod-f",run:cK,scope:"editor search-panel"},{key:"F3",run:tC,shift:nC,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:tC,shift:nC,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:uK,scope:"editor search-panel"},{key:"Mod-Shift-l",run:vAe},{key:"Mod-Alt-g",run:ZOe},{key:"Mod-d",run:lAe,preventDefault:!0}];class wAe{constructor(e){this.view=e;let n=this.query=e.state.field(Of).query.spec;this.commit=this.commit.bind(this),this.searchField=si("input",{value:n.search,placeholder:al(e,"Find"),"aria-label":al(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=si("input",{value:n.replace,placeholder:al(e,"Replace"),"aria-label":al(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=si("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=si("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=si("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return si("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=si("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>tC(e),[al(e,"next")]),r("prev",()=>nC(e),[al(e,"previous")]),r("select",()=>xAe(e),[al(e,"all")]),si("label",null,[this.caseField,al(e,"match case")]),si("label",null,[this.reField,al(e,"regexp")]),si("label",null,[this.wordField,al(e,"by word")]),...e.state.readOnly?[]:[si("br"),this.replaceField,r("replace",()=>W$(e),[al(e,"replace")]),r("replaceAll",()=>bAe(e),[al(e,"replace all")])],si("button",{name:"close",onclick:()=>uK(e),"aria-label":al(e,"close"),type:"button"},[""])])}commit(){let e=new sK({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:B1.of(e)}))}keydown(e){TTe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?nC:tC)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),W$(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(B1)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(px).top}}function al(t,e){return t.state.phrase(e)}const BS=30,$S=/[\s\.,:;?!]/;function YR(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-BS),o=Math.min(i,n+BS),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let h=0;h<BS;h++)if(!$S.test(a[h+1])&&$S.test(a[h])){a=a.slice(h);break}}if(o!=i){for(let h=a.length-1;h>a.length-BS;h--)if(!$S.test(a[h-1])&&$S.test(a[h])){a=a.slice(0,h);break}}return rn.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const SAe=rn.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),kAe=[Of,ig.low(yAe),SAe];class hK{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=rs(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(fK(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function U$(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function CAe(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=U$(e)+U$(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function dK(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:CAe(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}function TAe(t,e){return n=>{for(let r=rs(n.state).resolveInner(n.pos,-1);r;r=r.parent){if(t.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(n)}}class q${constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function Em(t){return t.selection.main.from}function fK(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const pK=Xu.define();function jAe(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return{...t.changeByRange(a=>{if(a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r))return{range:a};let h=t.toText(e);return{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:h},range:xt.cursor(a.from+s+h.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const Q$=new WeakMap;function PAe(t){if(!Array.isArray(t))return t;let e=Q$.get(t);return e||Q$.set(t,e=dK(t)),e}const rC=Zn.define(),$1=Zn.define();class OAe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=Oa(e,n),i=zu(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(Oa(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let F=Oa(e,0),R=zu(F),N=R==e.length?0:-100;if(F!=n[0])if(F==r[0])N+=-200;else return null;return this.ret(N,[0,R])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let h=n.length,p=0;if(a<0){for(let F=0,R=Math.min(e.length,200);F<R&&p<h;){let N=Oa(e,F);(N==n[p]||N==r[p])&&(i[p++]=F),F+=zu(N)}if(p<h)return null}let g=0,y=0,b=!1,S=0,P=-1,O=-1,D=/[a-z]/.test(e),z=!0;for(let F=0,R=Math.min(e.length,200),N=0;F<R&&y<h;){let Q=Oa(e,F);a<0&&(g<h&&Q==n[g]&&(s[g++]=F),S<h&&(Q==n[S]||Q==r[S]?(S==0&&(P=F),O=F+1,S++):S=0));let q,X=Q<255?Q>=48&&Q<=57||Q>=97&&Q<=122?2:Q>=65&&Q<=90?1:0:(q=bR(Q))!=q.toLowerCase()?1:q!=q.toUpperCase()?2:0;(!F||X==1&&D||N==0&&X!=0)&&(n[y]==Q||r[y]==Q&&(b=!0)?o[y++]=F:o.length&&(z=!1)),N=X,F+=zu(Q)}return y==h&&o[0]==0&&z?this.result(-100+(b?-200:0),o,e):S==h&&P==0?this.ret(-200-e.length+(O==e.length?0:-100),[0,O]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):S==h?this.ret(-900-e.length,[P,O]):y==h?this.result(-100+(b?-200:0)+-700+(z?0:-1100),o,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let a=o+(this.astral?zu(Oa(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}class AAe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const Zs=yn.define({combine(t){return Ku(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:EAe,filterStrict:!1,compareCompletions:(e,n)=>(e.sortText||e.label).localeCompare(n.sortText||n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>H$(e(r),n(r)),optionClass:(e,n)=>r=>H$(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function H$(t,e){return t?e?t+" "+e:t:e}function EAe(t,e,n,r,i,s){let o=t.textDirection==ci.RTL,a=o,h=!1,p="top",g,y,b=e.left-i.left,S=i.right-e.right,P=r.right-r.left,O=r.bottom-r.top;if(a&&b<Math.min(P,S)?a=!1:!a&&S<Math.min(P,b)&&(a=!0),P<=(a?b:S))g=Math.max(i.top,Math.min(n.top,i.bottom-O))-e.top,y=Math.min(400,a?b:S);else{h=!0,y=Math.min(400,(o?e.right:i.right-e.left)-30);let F=i.bottom-e.bottom;F>=O||F>e.top?g=n.bottom-e.top:(p="bottom",g=e.bottom-n.top)}let D=(e.bottom-e.top)/s.offsetHeight,z=(e.right-e.left)/s.offsetWidth;return{style:`${p}: ${g/D}px; max-width: ${y/z}px`,class:"cm-completionInfo-"+(h?o?"left-narrow":"right-narrow":a?"left":"right")}}function zAe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,h=0;for(let p=0;p<s.length;){let g=s[p++],y=s[p++];g>h&&o.appendChild(document.createTextNode(a.slice(h,g)));let b=o.appendChild(document.createElement("span"));b.appendChild(document.createTextNode(a.slice(g,y))),b.className="cm-completionMatchedText",h=y}return h<a.length&&o.appendChild(document.createTextNode(a.slice(h))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function WO(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class IAe{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet(Zs);this.optionContent=zAe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=WO(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",h=>{let{options:p}=e.state.field(n).open;for(let g=h.target,y;g&&g!=this.dom;g=g.parentNode)if(g.nodeName=="LI"&&(y=/-(\d+)$/.exec(g.id))&&+y[1]<p.length){this.applyCompletion(e,p[+y[1]]),h.preventDefault();return}}),this.dom.addEventListener("focusout",h=>{let p=e.state.field(this.stateField,!1);p&&p.tooltip&&e.state.facet(Zs).closeOnBlur&&h.relatedTarget!=e.contentDOM&&e.dispatch({effects:$1.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=WO(s.length,o,e.state.facet(Zs).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;(n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=WO(n.options.length,n.selected,this.view.state.facet(Zs).maxRenderedOptions),this.showOptions(n.options,e.id));let r=this.updateSelectedOption(n.selected);if(r){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:s}=i;if(!s)return;let o=typeof s=="string"?document.createTextNode(s):s(i);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,i)}).catch(a=>La(this.view.state,a,"completion info")):(this.addInfoPane(o,i),r.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",r.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&(r.removeAttribute("aria-selected"),r.removeAttribute("aria-describedby"));return n&&RAe(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Zs).positionInfo(this.view,n,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:h}=e[o],{section:p}=a;if(p){let b=typeof p=="string"?p:p.name;if(b!=s&&(o>r.from||r.from==0))if(s=b,typeof p!="string"&&p.header)i.appendChild(p.header(p));else{let S=i.appendChild(document.createElement("completion-section"));S.textContent=b}}const g=i.appendChild(document.createElement("li"));g.id=n+"-"+o,g.setAttribute("role","option");let y=this.optionClass(a);y&&(g.className=y);for(let b of this.optionContent){let S=b(a,this.view.state,this.view,h);S&&g.appendChild(S)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function MAe(t,e){return n=>new IAe(n,t,e)}function RAe(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function G$(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function DAe(t,e){let n=[],r=null,i=null,s=g=>{n.push(g);let{section:y}=g.completion;if(y){r||(r=[]);let b=typeof y=="string"?y:y.name;r.some(S=>S.name==b)||r.push(typeof y=="string"?{name:b}:y)}},o=e.facet(Zs);for(let g of t)if(g.hasResult()){let y=g.result.getMatch;if(g.result.filter===!1)for(let b of g.result.options)s(new q$(b,g.source,y?y(b):[],1e9-n.length));else{let b=e.sliceDoc(g.from,g.to),S,P=o.filterStrict?new AAe(b):new OAe(b);for(let O of g.result.options)if(S=P.match(O.label)){let D=O.displayLabel?y?y(O,S.matched):[]:S.matched,z=S.score+(O.boost||0);if(s(new q$(O,g.source,D,z)),typeof O.section=="object"&&O.section.rank==="dynamic"){let{name:F}=O.section;i||(i=Object.create(null)),i[F]=Math.max(z,i[F]||-1e9)}}}}if(r){let g=Object.create(null),y=0,b=(S,P)=>(S.rank==="dynamic"&&P.rank==="dynamic"?i[P.name]-i[S.name]:0)||(typeof S.rank=="number"?S.rank:1e9)-(typeof P.rank=="number"?P.rank:1e9)||(S.name<P.name?-1:1);for(let S of r.sort(b))y-=1e5,g[S.name]=y;for(let S of n){let{section:P}=S.completion;P&&(S.score+=g[typeof P=="string"?P:P.name])}}let a=[],h=null,p=o.compareCompletions;for(let g of n.sort((y,b)=>b.score-y.score||p(y.completion,b.completion))){let y=g.completion;!h||h.label!=y.label||h.detail!=y.detail||h.type!=null&&y.type!=null&&h.type!=y.type||h.apply!=y.apply||h.boost!=y.boost?a.push(g):G$(g.completion)>G$(h)&&(a[a.length-1]=g),h=g.completion}return a}class Ly{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Ly(this.options,X$(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s,o){if(i&&!o&&e.some(p=>p.isPending))return i.setDisabled();let a=DAe(e,n);if(!a.length)return i&&e.some(p=>p.isPending)?i.setDisabled():null;let h=n.facet(Zs).selectOnOpen?0:-1;if(i&&i.selected!=h&&i.selected!=-1){let p=i.options[i.selected].completion;for(let g=0;g<a.length;g++)if(a[g].completion==p){h=g;break}}return new Ly(a,X$(r,h),{pos:e.reduce((p,g)=>g.hasResult()?Math.min(p,g.from):p,1e8),create:VAe,above:s.aboveCursor},i?i.timestamp:Date.now(),h,!1)}map(e){return new Ly(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Ly(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class iC{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new iC($Ae,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(Zs),s=(r.override||n.languageDataAt("autocomplete",Em(n)).map(PAe)).map(h=>(this.active.find(g=>g.source==h)||new sc(h,this.active.some(g=>g.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((h,p)=>h==this.active[p])&&(s=this.active);let o=this.open,a=e.effects.some(h=>h.is(JR));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(h=>h.hasResult()&&e.changes.touchesRange(h.from,h.to))||!LAe(s,this.active)||a?o=Ly.build(s,n,this.id,o,r,a):o&&o.disabled&&!s.some(h=>h.isPending)&&(o=null),!o&&s.every(h=>!h.isPending)&&s.some(h=>h.hasResult())&&(s=s.map(h=>h.hasResult()?new sc(h.source,0):h));for(let h of e.effects)h.is(gK)&&(o=o&&o.setSelected(h.value,this.id));return s==this.active&&o==this.open?this:new iC(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?FAe:BAe}}function LAe(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const FAe={"aria-autocomplete":"list"},BAe={};function X$(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const $Ae=[];function mK(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(pK);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class sc{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=mK(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new sc(i.source,0)),r&4&&i.state==0&&(i=new sc(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(rC))i=new sc(i.source,1,s.value);else if(s.is($1))i=new sc(i.source,0);else if(s.is(JR))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Em(e.state))}}class o0 extends sc{constructor(e,n,r,i,s,o){super(e,3,n),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Em(e.state);if(a>o||!i||n&2&&(Em(e.startState)==this.from||a<this.limit))return new sc(this.source,n&4?1:0);let h=e.changes.mapPos(this.limit);return NAe(i.validFor,e.state,s,o)?new o0(this.source,this.explicit,h,i,s,o):i.update&&(i=i.update(i,s,o,new hK(e.state,a,!1)))?new o0(this.source,this.explicit,h,i,i.from,(r=i.to)!==null&&r!==void 0?r:Em(e.state)):new sc(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new o0(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new sc(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function NAe(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):fK(t,!0).test(i)}const JR=Zn.define({map(t,e){return t.map(n=>n.map(e))}}),gK=Zn.define(),Aa=_o.define({create(){return iC.start()},update(t,e){return t.update(e)},provide:t=>[LR.from(t,e=>e.tooltip),rn.contentAttributes.from(t,e=>e.attrs)]});function eD(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(Aa).active.find(i=>i.source==e.source);return r instanceof o0?(typeof n=="string"?t.dispatch({...jAe(t.state,n,r.from,r.to),annotations:pK.of(e.completion)}):n(t,e.completion,r.from,r.to),!0):!1}const VAe=MAe(Aa,eD);function NS(t,e="option"){return n=>{let r=n.state.field(Aa,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(Zs).interactionDelay)return!1;let i=1,s;e=="page"&&(s=GG(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:gK.of(a)}),!0}}const WAe=t=>{let e=t.state.field(Aa,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Zs).interactionDelay?!1:eD(t,e.open.options[e.open.selected])},UO=t=>t.state.field(Aa,!1)?(t.dispatch({effects:rC.of(!0)}),!0):!1,UAe=t=>{let e=t.state.field(Aa,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:$1.of(null)}),!0)};class qAe{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const QAe=50,HAe=1e3,GAe=ns.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(Aa).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(Aa),n=t.state.facet(Zs);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Aa)==e)return;let r=t.transactions.some(s=>{let o=mK(s,n);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>QAe&&Date.now()-o.time>HAe){for(let a of o.context.abortListeners)try{a()}catch(h){La(this.view.state,h)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(o=>o.is(rC)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(Aa);for(let n of e.active)n.isPending&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Zs).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=Em(e),r=new hK(e,n,t.explicit,this.view),i=new qAe(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:$1.of(null)}),La(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Zs).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Zs),r=this.view.state.field(Aa);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=Em(s.updates.length?s.updates[0].startState:this.view.state),h=Math.min(a,s.done.from+(s.active.explicit?0:1)),p=new o0(s.active.source,s.active.explicit,h,s.done,s.done.from,(t=s.done.to)!==null&&t!==void 0?t:a);for(let g of s.updates)p=p.update(g,n);if(p.hasResult()){e.push(p);continue}}let o=r.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new sc(s.active.source,0);for(let h of s.updates)a=a.update(h,n);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:JR.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(Aa,!1);if(e&&e.tooltip&&this.view.state.facet(Zs).closeOnBlur){let n=e.open&&GG(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:$1.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:rC.of(!1)}),20),this.composing=0}}}),XAe=typeof navigator=="object"&&/Win/.test(navigator.platform),KAe=ig.highest(rn.domEventHandlers({keydown(t,e){let n=e.state.field(Aa,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(XAe&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&eD(e,r),!1}})),ZAe=rn.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),N1={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},sm=Zn.define({map(t,e){let n=e.mapPos(t,-1,ra.TrackAfter);return n??void 0}}),tD=new class extends Uf{};tD.startSide=1;tD.endSide=-1;const yK=_o.define({create(){return pr.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(sm)&&(t=t.update({add:[tD.range(n.value,n.value+1)]}));return t}});function YAe(){return[eEe,yK]}const qO="()[]{}<>";function xK(t){for(let e=0;e<qO.length;e+=2)if(qO.charCodeAt(e)==t)return qO.charAt(e+1);return bR(t<128?t:t+1)}function vK(t,e){return t.languageDataAt("closeBrackets",e)[0]||N1}const JAe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),eEe=rn.inputHandler.of((t,e,n,r)=>{if((JAe?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&zu(Oa(r,0))==1||e!=i.from||n!=i.to)return!1;let s=rEe(t.state,r);return s?(t.dispatch(s),!0):!1}),tEe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=vK(t,t.selection.main.head).brackets||N1.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let a=iEe(t.doc,o.head);for(let h of r)if(h==a&&LT(t.doc,o.head)==xK(Oa(h,0)))return{changes:{from:o.head-h.length,to:o.head+h.length},range:xt.cursor(o.head-h.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},nEe=[{key:"Backspace",run:tEe}];function rEe(t,e){let n=vK(t,t.selection.main.head),r=n.brackets||N1.brackets;for(let i of r){let s=xK(Oa(i,0));if(e==i)return s==i?aEe(t,i,r.indexOf(i+i+i)>-1,n):sEe(t,i,s,n.before||N1.before);if(e==s&&bK(t,t.selection.main.from))return oEe(t,i,s)}return null}function bK(t,e){let n=!1;return t.field(yK).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function LT(t,e){let n=t.sliceString(e,e+2);return n.slice(0,zu(Oa(n,0)))}function iEe(t,e){let n=t.sliceString(e-2,e);return zu(Oa(n,0))==n.length?n:n.slice(1)}function sEe(t,e,n,r){let i=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:sm.of(o.to+e.length),range:xt.range(o.anchor+e.length,o.head+e.length)};let a=LT(t.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+n,from:o.head},effects:sm.of(o.head+e.length),range:xt.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function oEe(t,e,n){let r=null,i=t.changeByRange(s=>s.empty&&LT(t.doc,s.head)==n?{changes:{from:s.head,to:s.head+n.length,insert:n},range:xt.cursor(s.head+n.length)}:r={range:s});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function aEe(t,e,n,r){let i=r.stringPrefixes||N1.stringPrefixes,s=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:sm.of(a.to+e.length),range:xt.range(a.anchor+e.length,a.head+e.length)};let h=a.head,p=LT(t.doc,h),g;if(p==e){if(K$(t,h))return{changes:{insert:e+e,from:h},effects:sm.of(h+e.length),range:xt.cursor(h+e.length)};if(bK(t,h)){let b=n&&t.sliceDoc(h,h+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:h,to:h+b.length,insert:b},range:xt.cursor(h+b.length)}}}else{if(n&&t.sliceDoc(h-2*e.length,h)==e+e&&(g=Z$(t,h-2*e.length,i))>-1&&K$(t,g))return{changes:{insert:e+e+e+e,from:h},effects:sm.of(h+e.length),range:xt.cursor(h+e.length)};if(t.charCategorizer(h)(p)!=Oi.Word&&Z$(t,h,i)>-1&&!lEe(t,h,e,i))return{changes:{insert:e+e,from:h},effects:sm.of(h+e.length),range:xt.cursor(h+e.length)}}return{range:s=a}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function K$(t,e){let n=rs(t).resolveInner(e+1);return n.parent&&n.from==e}function lEe(t,e,n,r){let i=rs(t).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+s)),h=a.indexOf(n);if(!h||h>-1&&r.indexOf(a.slice(0,h))>-1){let g=i.firstChild;for(;g&&g.from==i.from&&g.to-g.from>n.length+h;){if(t.sliceDoc(g.to-n.length,g.to)==n)return!1;g=g.firstChild}return!0}let p=i.to==e&&i.parent;if(!p)break;i=p}return!1}function Z$(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=Oi.Word)return e;for(let i of n){let s=e-i.length;if(t.sliceDoc(s,e)==i&&r(t.sliceDoc(s-1,s))!=Oi.Word)return s}return-1}function _K(t={}){return[KAe,Aa,Zs.of(t),GAe,cEe,ZAe]}const wK=[{key:"Ctrl-Space",run:UO},{mac:"Alt-`",run:UO},{mac:"Alt-i",run:UO},{key:"Escape",run:UAe},{key:"ArrowDown",run:NS(!0)},{key:"ArrowUp",run:NS(!1)},{key:"PageDown",run:NS(!0,"page")},{key:"PageUp",run:NS(!1,"page")},{key:"Enter",run:WAe}],cEe=ig.highest(CT.computeN([Zs],t=>t.facet(Zs).defaultKeymap?[wK]:[]));class Y${constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class Gp{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=r.facet(V1).markerFilter;i&&(e=i(e,r));let s=e.slice().sort((S,P)=>S.from-P.from||S.to-P.to),o=new Xh,a=[],h=0,p=r.doc.iter(),g=0,y=r.doc.length;for(let S=0;;){let P=S==s.length?null:s[S];if(!P&&!a.length)break;let O,D;if(a.length)O=h,D=a.reduce((R,N)=>Math.min(R,N.to),P&&P.from>O?P.from:1e8);else{if(O=P.from,O>y)break;D=P.to,a.push(P),S++}for(;S<s.length;){let R=s[S];if(R.from==O&&(R.to>R.from||R.to==O))a.push(R),S++,D=Math.min(R.to,D);else{D=Math.min(R.from,D);break}}D=Math.min(D,y);let z=!1;if(a.some(R=>R.from==O&&(R.to==D||D==y))&&(z=O==D,!z&&D-O<10)){let R=O-(g+p.value.length);R>0&&(p.next(R),g=O);for(let N=O;;){if(N>=D){z=!0;break}if(!p.lineBreak&&g+p.value.length>N)break;N=g+p.value.length,g+=p.value.length,p.next()}}let F=wEe(a);if(z)o.add(O,O,In.widget({widget:new xEe(F),diagnostics:a.slice()}));else{let R=a.reduce((N,Q)=>Q.markClass?N+" "+Q.markClass:N,"");o.add(O,D,In.mark({class:"cm-lintRange cm-lintRange-"+F+R,diagnostics:a.slice(),inclusiveEnd:a.some(N=>N.to>D)}))}if(h=D,h==y)break;for(let R=0;R<a.length;R++)a[R].to<=h&&a.splice(R--,1)}let b=o.finish();return new Gp(b,n,Y0(b))}}function Y0(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new Y$(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new Y$(r.from,s,r.diagnostic)}}),r}function uEe(t,e){let n=e.pos,r=e.end||n,i=t.state.facet(V1).hideOn(t,n,r);if(i!=null)return i;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(SK))||t.changes.touchesRange(s.from,Math.max(s.to,r)))}function hEe(t,e){return t.field(gl,!1)?e:e.concat(Zn.appendConfig.of(SEe))}const SK=Zn.define(),nD=Zn.define(),kK=Zn.define(),gl=_o.define({create(){return new Gp(In.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),r=null,i=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);r=Y0(n,t.selected.diagnostic,s)||Y0(n,null,s)}!n.size&&i&&e.state.facet(V1).autoPanel&&(i=null),t=new Gp(n,i,r)}for(let n of e.effects)if(n.is(SK)){let r=e.state.facet(V1).autoPanel?n.value.length?W1.open:null:t.panel;t=Gp.init(n.value,r,e.state)}else n.is(nD)?t=new Gp(t.diagnostics,n.value?W1.open:null,t.selected):n.is(kK)&&(t=new Gp(t.diagnostics,t.panel,n.value));return t},provide:t=>[R1.from(t,e=>e.panel),rn.decorations.from(t,e=>e.diagnostics)]}),dEe=In.mark({class:"cm-lintRange cm-lintRange-active"});function fEe(t,e,n){let{diagnostics:r}=t.state.field(gl),i,s=-1,o=-1;r.between(e-(n<0?1:0),e+(n>0?1:0),(h,p,{spec:g})=>{if(e>=h&&e<=p&&(h==p||(e>h||n>0)&&(e<p||n<0)))return i=g.diagnostics,s=h,o=p,!1});let a=t.state.facet(V1).tooltipFilter;return i&&a&&(i=a(i,t.state)),i?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:pEe(t,i)}}}:null}function pEe(t,e){return si("ul",{class:"cm-tooltip-lint"},e.map(n=>TK(t,n,!1)))}const mEe=t=>{let e=t.state.field(gl,!1);(!e||!e.panel)&&t.dispatch({effects:hEe(t.state,[nD.of(!0)])});let n=FR(t,W1.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},J$=t=>{let e=t.state.field(gl,!1);return!e||!e.panel?!1:(t.dispatch({effects:nD.of(!1)}),!0)},gEe=t=>{let e=t.state.field(gl,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},yEe=[{key:"Mod-Shift-m",run:mEe,preventDefault:!0},{key:"F8",run:gEe}],V1=yn.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...Ku(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:eN,tooltipFilter:eN,needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n,hideOn:(e,n)=>e?n?(r,i,s)=>e(r,i,s)||n(r,i,s):e:n,autoPanel:(e,n)=>e||n})}}});function eN(t,e){return t?e?(n,r)=>e(t(n,r),r):t:e}function CK(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function TK(t,e,n){var r;let i=n?CK(e.actions):[];return si("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},si("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,h=S=>{if(S.preventDefault(),a)return;a=!0;let P=Y0(t.state.field(gl).diagnostics,e);P&&s.apply(t,P.from,P.to)},{name:p}=s,g=i[o]?p.indexOf(i[o]):-1,y=g<0?p:[p.slice(0,g),si("u",p.slice(g,g+1)),p.slice(g+1)],b=s.markClass?" "+s.markClass:"";return si("button",{type:"button",class:"cm-diagnosticAction"+b,onclick:h,onmousedown:h,"aria-label":` Action: ${p}${g<0?"":` (access key "${i[o]})"`}.`},y)}),e.source&&si("div",{class:"cm-diagnosticSource"},e.source))}class xEe extends Zu{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return si("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class tN{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=TK(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class W1{constructor(e){this.view=e,this.items=[];let n=i=>{if(!(i.ctrlKey||i.altKey||i.metaKey)){if(i.keyCode==27)J$(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=CK(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let h=Y0(this.view.state.field(gl).diagnostics,s);h&&s.actions[a].apply(e,h.from,h.to)}}else return;i.preventDefault()}},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=si("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=si("div",{class:"cm-panel-lint"},this.list,si("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>J$(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(gl).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(gl),r=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,h,{spec:p})=>{for(let g of p.diagnostics){if(o.has(g))continue;o.add(g);let y=-1,b;for(let S=r;S<this.items.length;S++)if(this.items[S].diagnostic==g){y=S;break}y<0?(b=new tN(this.view,g),this.items.splice(r,0,b),i=!0):(b=this.items[y],y>r&&(this.items.splice(r,y-r),i=!0)),n&&b.diagnostic==n.diagnostic?b.dom.hasAttribute("aria-selected")||(b.dom.setAttribute("aria-selected","true"),s=b):b.dom.hasAttribute("aria-selected")&&b.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new tN(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:h})=>{let p=h.height/this.list.offsetHeight;a.top<h.top?this.list.scrollTop-=(h.top-a.top)/p:a.bottom>h.bottom&&(this.list.scrollTop+=(a.bottom-h.bottom)/p)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(gl),r=Y0(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:kK.of(r)})}static open(e){return new W1(e)}}function vEe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function VS(t){return vEe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const bEe=rn.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:VS("#d11")},".cm-lintRange-warning":{backgroundImage:VS("orange")},".cm-lintRange-info":{backgroundImage:VS("#999")},".cm-lintRange-hint":{backgroundImage:VS("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function _Ee(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function wEe(t){let e="hint",n=1;for(let r of t){let i=_Ee(r.severity);i>n&&(n=i,e=r.severity)}return e}const SEe=[gl,rn.decorations.compute([gl],t=>{let{selected:e,panel:n}=t.field(gl);return!e||!n||e.from==e.to?In.none:In.set([dEe.range(e.from,e.to)])}),pje(fEe,{hideOn:uEe}),bEe];var nN=function(e){e===void 0&&(e={});var{crosshairCursor:n=!1}=e,r=[];e.closeBracketsKeymap!==!1&&(r=r.concat(nEe)),e.defaultKeymap!==!1&&(r=r.concat(GOe)),e.searchKeymap!==!1&&(r=r.concat(_Ae)),e.historyKeymap!==!1&&(r=r.concat(tOe)),e.foldKeymap!==!1&&(r=r.concat(gPe)),e.completionKeymap!==!1&&(r=r.concat(wK)),e.lintKeymap!==!1&&(r=r.concat(yEe));var i=[];return e.lineNumbers!==!1&&i.push(jje()),e.highlightActiveLineGutter!==!1&&i.push(Aje()),e.highlightSpecialChars!==!1&&i.push(WTe()),e.history!==!1&&i.push(QPe()),e.foldGutter!==!1&&i.push(bPe()),e.drawSelection!==!1&&i.push(zTe()),e.dropCursor!==!1&&i.push(LTe()),e.allowMultipleSelections!==!1&&i.push(kr.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(oPe()),e.syntaxHighlighting!==!1&&i.push(xX(kPe,{fallback:!0})),e.bracketMatching!==!1&&i.push(EPe()),e.closeBrackets!==!1&&i.push(YAe()),e.autocompletion!==!1&&i.push(_K()),e.rectangularSelection!==!1&&i.push(rje()),n!==!1&&i.push(oje()),e.highlightActiveLine!==!1&&i.push(XTe()),e.highlightSelectionMatches!==!1&&i.push(eAe()),e.tabSize&&typeof e.tabSize=="number"&&i.push(PT.of(" ".repeat(e.tabSize))),i.concat([CT.of(r.flat())]).filter(Boolean)};const kEe="#e5c07b",rN="#e06c75",CEe="#56b6c2",TEe="#ffffff",Fk="#abb2bf",yI="#7d8799",jEe="#61afef",PEe="#98c379",iN="#d19a66",OEe="#c678dd",AEe="#21252b",sN="#2c313a",oN="#282c34",QO="#353a42",EEe="#3E4451",aN="#528bff",zEe=rn.theme({"&":{color:Fk,backgroundColor:oN},".cm-content":{caretColor:aN},".cm-cursor, .cm-dropCursor":{borderLeftColor:aN},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:EEe},".cm-panels":{backgroundColor:AEe,color:Fk},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:oN,color:yI,border:"none"},".cm-activeLineGutter":{backgroundColor:sN},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:QO},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:QO,borderBottomColor:QO},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:sN,color:Fk}}},{dark:!0}),IEe=D_.define([{tag:Ge.keyword,color:OEe},{tag:[Ge.name,Ge.deleted,Ge.character,Ge.propertyName,Ge.macroName],color:rN},{tag:[Ge.function(Ge.variableName),Ge.labelName],color:jEe},{tag:[Ge.color,Ge.constant(Ge.name),Ge.standard(Ge.name)],color:iN},{tag:[Ge.definition(Ge.name),Ge.separator],color:Fk},{tag:[Ge.typeName,Ge.className,Ge.number,Ge.changed,Ge.annotation,Ge.modifier,Ge.self,Ge.namespace],color:kEe},{tag:[Ge.operator,Ge.operatorKeyword,Ge.url,Ge.escape,Ge.regexp,Ge.link,Ge.special(Ge.string)],color:CEe},{tag:[Ge.meta,Ge.comment],color:yI},{tag:Ge.strong,fontWeight:"bold"},{tag:Ge.emphasis,fontStyle:"italic"},{tag:Ge.strikethrough,textDecoration:"line-through"},{tag:Ge.link,color:yI,textDecoration:"underline"},{tag:Ge.heading,fontWeight:"bold",color:rN},{tag:[Ge.atom,Ge.bool,Ge.special(Ge.variableName)],color:iN},{tag:[Ge.processingInstruction,Ge.string,Ge.inserted],color:PEe},{tag:Ge.invalid,color:TEe}]),MEe=[zEe,xX(IEe)];var REe=rn.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),DEe=function(e){e===void 0&&(e={});var{indentWithTab:n=!0,editable:r=!0,readOnly:i=!1,theme:s="light",placeholder:o="",basicSetup:a=!0}=e,h=[];switch(n&&h.unshift(CT.of([XOe])),a&&(typeof a=="boolean"?h.unshift(nN()):h.unshift(nN(a))),o&&h.unshift(JTe(o)),s){case"light":h.push(REe);break;case"dark":h.push(MEe);break;case"none":break;default:h.push(s);break}return r===!1&&h.push(rn.editable.of(!1)),i&&h.push(kr.readOnly.of(!0)),[...h]},LEe=t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map(e=>t.state.sliceDoc(e.from,e.to)),selectedText:t.state.selection.ranges.some(e=>!e.empty)});class FEe{constructor(e,n){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=n,this.timeoutMS=n,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(n=>{try{n()}catch(r){console.error("TimeoutLatch callback error:",r)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class lN{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var HO=null,BEe=()=>typeof window>"u"?new lN:(HO||(HO=new lN),HO),cN=Xu.define(),$Ee=200,NEe=[];function VEe(t){var{value:e,selection:n,onChange:r,onStatistics:i,onCreateEditor:s,onUpdate:o,extensions:a=NEe,autoFocus:h,theme:p="light",height:g=null,minHeight:y=null,maxHeight:b=null,width:S=null,minWidth:P=null,maxWidth:O=null,placeholder:D="",editable:z=!0,readOnly:F=!1,indentWithTab:R=!0,basicSetup:N=!0,root:Q,initialState:q}=t,[X,K]=L.useState(),[ne,J]=L.useState(),[ae,Ee]=L.useState(),Ce=L.useState(()=>({current:null}))[0],$e=L.useState(()=>({current:null}))[0],We=rn.theme({"&":{height:g,minHeight:y,maxHeight:b,width:S,minWidth:P,maxWidth:O},"& .cm-scroller":{height:"100% !important"}}),Fe=rn.updateListener.of(Qe=>{if(Qe.docChanged&&typeof r=="function"&&!Qe.transactions.some(Oe=>Oe.annotation(cN))){Ce.current?Ce.current.reset():(Ce.current=new FEe(()=>{if($e.current){var Oe=$e.current;$e.current=null,Oe()}Ce.current=null},$Ee),BEe().add(Ce.current));var se=Qe.state.doc,Re=se.toString();r(Re,Qe)}i&&i(LEe(Qe))}),we=DEe({theme:p,editable:z,readOnly:F,placeholder:D,indentWithTab:R,basicSetup:N}),Ie=[Fe,We,...we];return o&&typeof o=="function"&&Ie.push(rn.updateListener.of(o)),Ie=Ie.concat(a),L.useLayoutEffect(()=>{if(X&&!ae){var Qe={doc:e,selection:n,extensions:Ie},se=q?kr.fromJSON(q.json,Qe,q.fields):kr.create(Qe);if(Ee(se),!ne){var Re=new rn({state:se,parent:X,root:Q});J(Re),s&&s(Re,se)}}return()=>{ne&&(Ee(void 0),J(void 0))}},[X,ae]),L.useEffect(()=>{t.container&&K(t.container)},[t.container]),L.useEffect(()=>()=>{ne&&(ne.destroy(),J(void 0)),Ce.current&&(Ce.current.cancel(),Ce.current=null)},[ne]),L.useEffect(()=>{h&&ne&&ne.focus()},[h,ne]),L.useEffect(()=>{ne&&ne.dispatch({effects:Zn.reconfigure.of(Ie)})},[p,a,g,y,b,S,P,O,D,z,F,R,N,r,o]),L.useEffect(()=>{if(e!==void 0){var Qe=ne?ne.state.doc.toString():"";if(ne&&e!==Qe){var se=Ce.current&&!Ce.current.isDone,Re=()=>{ne&&e!==ne.state.doc.toString()&&ne.dispatch({changes:{from:0,to:ne.state.doc.toString().length,insert:e||""},annotations:[cN.of(!0)]})};se?$e.current=Re:Re()}}},[e,ne]),{state:ae,setState:Ee,view:ne,setView:J,container:X,setContainer:K}}var WEe=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],rD=L.forwardRef((t,e)=>{var{className:n,value:r="",selection:i,extensions:s=[],onChange:o,onStatistics:a,onCreateEditor:h,onUpdate:p,autoFocus:g,theme:y="light",height:b,minHeight:S,maxHeight:P,width:O,minWidth:D,maxWidth:z,basicSetup:F,placeholder:R,indentWithTab:N,editable:Q,readOnly:q,root:X,initialState:K}=t,ne=pq(t,WEe),J=L.useRef(null),{state:ae,view:Ee,container:Ce,setContainer:$e}=VEe({root:X,value:r,autoFocus:g,theme:y,height:b,minHeight:S,maxHeight:P,width:O,minWidth:D,maxWidth:z,basicSetup:F,placeholder:R,indentWithTab:N,editable:Q,readOnly:q,selection:i,onChange:o,onStatistics:a,onCreateEditor:h,onUpdate:p,extensions:s,initialState:K});L.useImperativeHandle(e,()=>({editor:J.current,state:ae,view:Ee}),[J,Ce,ae,Ee]);var We=L.useCallback(we=>{J.current=we,$e(we)},[$e]);if(typeof r!="string")throw new Error("value must be typeof string but got "+typeof r);var Fe=typeof y=="string"?"cm-theme-"+y:"cm-theme";return u.jsx("div",If({ref:We,className:""+Fe+(n?" "+n:"")},ne))});rD.displayName="CodeMirror";var uN={};class sC{constructor(e,n,r,i,s,o,a,h,p,g=0,y){this.p=e,this.stack=n,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=h,this.curContext=p,this.lookAhead=g,this.parent=y}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,r=0){let i=e.parser.context;return new sC(e,[],n,r,r,0,[],0,i?new hN(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let r=e>>19,i=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),a=s.dynamicPrecedence(i);if(a&&(this.score+=a),r==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(i,this.reducePos);return}let h=this.stack.length-(r-1)*3-(e&262144?6:0),p=h?this.stack[h-2]:this.p.ranges[0].from,g=this.reducePos-p;g>=2e3&&!(!((n=this.p.parser.nodeSet.types[i])===null||n===void 0)&&n.isAnonymous)&&(p==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=g):this.p.lastBigReductionSize<g&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=p,this.p.lastBigReductionSize=g));let y=h?this.stack[h-1]:0,b=this.bufferBase+this.buffer.length-y;if(i<s.minRepeatTerm||e&131072){let S=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,p,S,b+4,!0)}if(e&262144)this.state=this.stack[h];else{let S=this.stack[h-3];this.state=s.getGoto(S,i,!0)}for(;this.stack.length>h;)this.stack.pop();this.reduceContext(i,p)}storeNode(e,n,r,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(n==r)return;if(o.buffer[a-2]>=n){o.buffer[a-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,n,r,i);else{let o=this.buffer.length;if(o>0&&(this.buffer[o-4]!=0||this.buffer[o-1]<0)){let a=!1;for(let h=o;h>0&&this.buffer[h-2]>r;h-=4)if(this.buffer[h-1]>=0){a=!0;break}if(a)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4)}this.buffer[o]=e,this.buffer[o+1]=n,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,n,r,i){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=i,this.shiftContext(n,r),n<=this.p.parser.maxNode&&this.buffer.push(n,r,i,4);else{let s=e,{parser:o}=this.p;this.pos=i;let a=o.stateFlag(s,1);!a&&(i>r||n<=o.maxNode)&&(this.reducePos=i),this.pushState(s,a?r:Math.min(r,this.reducePos)),this.shiftContext(n,r),n<=o.maxNode&&this.buffer.push(n,r,i,4)}}apply(e,n,r,i){e&65536?this.reduce(e):this.shift(e,n,r,i)}useNode(e,n){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(n,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let r=e.buffer.slice(n),i=e.bufferBase+n;for(;e&&i==e.bufferBase;)e=e.parent;return new sC(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,r?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new UEe(this);;){let r=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(r==0)return!1;if(!(r&65536))return!0;n.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let i=[];for(let s=0,o;s<n.length;s+=2)(o=n[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(n[s],o);if(this.stack.length<120)for(let s=0;i.length<8&&s<n.length;s+=2){let o=n[s+1];i.some((a,h)=>h&1&&a==o)||i.push(n[s],o)}n=i}let r=[];for(let i=0;i<n.length&&r.length<4;i+=2){let s=n[i+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(n[i],this.pos),o.reducePos=this.pos,o.score-=200,r.push(o)}return r}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if(!(n&65536))return!1;if(!e.validAction(this.state,n)){let r=n>>19,i=n&65535,s=this.stack.length-r*3;if(s<0||e.getGoto(this.stack[s],i,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;n=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],r=(i,s)=>{if(!n.includes(i))return n.push(i),e.allActions(i,o=>{if(!(o&393216))if(o&65536){let a=(o>>19)-s;if(a>1){let h=o&65535,p=this.stack.length-a*3;if(p>=0&&e.getGoto(this.stack[p],h,!1)>=0)return a<<19|65536|h}}else{let a=r(o,s+1);if(a!=null)return a}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new hN(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class hN{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class UEe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=i}}class oC{constructor(e,n,r){this.stack=e,this.pos=n,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new oC(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new oC(this.stack,this.pos,this.index)}}function ub(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let r=0,i=0;r<t.length;){let s=0;for(;;){let o=t.charCodeAt(r++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let h=o-32;if(h>=46&&(h-=46,a=!0),s+=h,a)break;s*=46}n?n[i++]=s:n=new e(s)}return n}class Bk{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const dN=new Bk;class qEe{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=dN,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let o=this.ranges[--i];s-=r.from-o.to,r=o}for(;n<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];s+=o.from-r.to,r=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,r,i;if(n>=0&&n<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(n);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,n=0){let r=n?this.resolveOffset(n,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=dN,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let r="";for(let i of this.ranges){if(i.from>=n)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,n)))}return r}}class a0{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:r}=n.p;PK(this.data,e,n,this.id,r.data,r.tokenPrecTable)}}a0.prototype.contextual=a0.prototype.fallback=a0.prototype.extend=!1;class jK{constructor(e,n,r){this.precTable=n,this.elseToken=r,this.data=typeof e=="string"?ub(e):e}token(e,n){let r=e.pos,i=0;for(;;){let s=e.next<0,o=e.resolveOffset(1,1);if(PK(this.data,e,n,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(s||i++,o==null)break;e.reset(o,e.token)}i&&(e.reset(r,e.token),e.acceptToken(this.elseToken,i))}}jK.prototype.contextual=a0.prototype.fallback=a0.prototype.extend=!1;class sg{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function PK(t,e,n,r,i,s){let o=0,a=1<<r,{dialect:h}=n.p.parser;e:for(;a&t[o];){let p=t[o+1];for(let S=o+3;S<p;S+=2)if((t[S+1]&a)>0){let P=t[S];if(h.allows(P)&&(e.token.value==-1||e.token.value==P||QEe(P,e.token.value,i,s))){e.acceptToken(P);break}}let g=e.next,y=0,b=t[o+2];if(e.next<0&&b>y&&t[p+b*3-3]==65535){o=t[p+b*3-1];continue e}for(;y<b;){let S=y+b>>1,P=p+S+(S<<1),O=t[P],D=t[P+1]||65536;if(g<O)b=S;else if(g>=D)y=S+1;else{o=t[P+2],e.advance();continue e}}break}}function fN(t,e,n){for(let r=e,i;(i=t[r])!=65535;r++)if(i==n)return r-e;return-1}function QEe(t,e,n,r){let i=fN(n,r,e);return i<0||fN(n,r,t)<i}const ll=typeof process<"u"&&uN&&/\bparse\b/.test(uN.LOG);let GO=null;function pN(t,e,n){let r=t.cursor(Mi.IncludeAnonymous);for(r.moveTo(e);;)if(!(n<0?r.childBefore(e):r.childAfter(e)))for(;;){if((n<0?r.to<e:r.from>e)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(t.length,Math.max(r.from+1,e+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:t.length}}class HEe{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?pN(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?pN(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let r=this.trees[n],i=this.index[n];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[n]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof Ji){if(o==e){if(o<this.safeFrom)return null;let a=o+s.length;if(a<=this.safeTo){let h=s.prop(fr.lookAhead);if(!h||a+h<this.fragment.to)return s}}this.index[n]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[n]++,this.nextStart=o+s.length}}}class GEe{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Bk)}getActions(e){let n=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,h=0;for(let p=0;p<s.length;p++){if(!(1<<p&o))continue;let g=s[p],y=this.tokens[p];if(!(r&&!g.fallback)&&((g.contextual||y.start!=e.pos||y.mask!=o||y.context!=a)&&(this.updateCachedToken(y,g,e),y.mask=o,y.context=a),y.lookAhead>y.end+25&&(h=Math.max(y.lookAhead,h)),y.value!=0)){let b=n;if(y.extended>-1&&(n=this.addActions(e,y.extended,y.end,n)),n=this.addActions(e,y.value,y.end,n),!g.extend&&(r=y,n>b))break}}for(;this.actions.length>n;)this.actions.pop();return h&&e.setLookAhead(h),!r&&e.pos==this.stream.end&&(r=new Bk,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,n=this.addActions(e,r.value,r.end,n)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new Bk,{pos:r,p:i}=e;return n.start=r,n.end=Math.min(r+1,i.stream.end),n.value=r==i.stream.end?i.parser.eofTerm:0,n}updateCachedToken(e,n,r){let i=this.stream.clipPos(r.pos);if(n.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let a=s.specializers[o](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){a&1?e.extended=a>>1:e.value=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,n,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=n,this.actions[i++]=r,i}addActions(e,n,r,i){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let h=0;h<2;h++)for(let p=o.stateSlot(s,h?2:1);;p+=3){if(a[p]==65535)if(a[p+1]==1)p=_h(a,p+2);else{i==0&&a[p+1]==2&&(i=this.putAction(_h(a,p+2),n,r,i));break}a[p]==n&&(i=this.putAction(_h(a,p+1),n,r,i))}return i}}class XEe{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new qEe(n,i),this.tokens=new GEe(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[sC.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new HEe(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,r=this.stacks=[],i,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>n)r.push(a);else{if(this.advanceStack(a,r,e))continue;{i||(i=[],s=[]),i.push(a);let h=this.tokens.getMainToken(a);s.push(h.value,h.end)}}break}}if(!r.length){let o=i&&YEe(i);if(o)return ll&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw ll&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(o)return ll&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((a,h)=>h.score-a.score);r.length>o;)r.pop();r.some(a=>a.reducePos>n)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let a=r[o];for(let h=o+1;h<r.length;h++){let p=r[h];if(a.sameState(p)||a.buffer.length>500&&p.buffer.length>500)if((a.score-p.score||a.buffer.length-p.buffer.length)>0)r.splice(h--,1);else{r.splice(o--,1);continue e}}}r.length>12&&(r.sort((o,a)=>a.score-o.score),r.splice(12,r.length-12))}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,r){let i=e.pos,{parser:s}=this,o=ll?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let p=e.curContext&&e.curContext.tracker.strict,g=p?e.curContext.hash:0;for(let y=this.fragments.nodeAt(i);y;){let b=this.parser.nodeSet.types[y.type.id]==y.type?s.getGoto(e.state,y.type.id):-1;if(b>-1&&y.length&&(!p||(y.prop(fr.contextHash)||0)==g))return e.useNode(y,b),ll&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(y.type.id)})`),!0;if(!(y instanceof Ji)||y.children.length==0||y.positions[0]>0)break;let S=y.children[0];if(S instanceof Ji&&y.positions[0]==0)y=S;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),ll&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let p=0;p<h.length;){let g=h[p++],y=h[p++],b=h[p++],S=p==h.length||!r,P=S?e:e.split(),O=this.tokens.mainToken;if(P.apply(g,y,O?O.start:P.pos,b),ll&&console.log(o+this.stackID(P)+` (via ${g&65536?`reduce of ${s.getName(g&65535)}`:"shift"} for ${s.getName(y)} @ ${i}${P==e?"":", split"})`),S)return!0;P.pos>i?n.push(P):r.push(P)}return!1}advanceFully(e,n){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return mN(e,n),!0}}runRecovery(e,n,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],h=n[o<<1],p=n[(o<<1)+1],g=ll?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),ll&&console.log(g+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let y=a.split(),b=g;for(let S=0;S<10&&y.forceReduce()&&(ll&&console.log(b+this.stackID(y)+" (via force-reduce)"),!this.advanceFully(y,r));S++)ll&&(b=this.stackID(y)+" -> ");for(let S of a.recoverByInsert(h))ll&&console.log(g+this.stackID(S)+" (via recover-insert)"),this.advanceFully(S,r);this.stream.end>a.pos?(p==a.pos&&(p++,h=0),a.recoverByDelete(h,p),ll&&console.log(g+this.stackID(a)+` (via recover-delete ${this.parser.getName(h)})`),mN(a,r)):(!i||i.score<y.score)&&(i=y)}return i}stackToTree(e){return e.close(),Ji.build({buffer:oC.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(GO||(GO=new WeakMap)).get(e);return n||GO.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function mN(t,e){for(let n=0;n<e.length;n++){let r=e[n];if(r.pos==t.pos&&r.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class KEe{constructor(e,n,r){this.source=e,this.flags=n,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const XO=t=>t;class ZEe{constructor(e){this.start=e.start,this.shift=e.shift||XO,this.reduce=e.reduce||XO,this.reuse=e.reuse||XO,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class J0 extends iX{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let a=0;a<e.repeatNodeCount;a++)n.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<n.length;a++)i.push([]);function s(a,h,p){i[a].push([h,h.deserialize(String(p))])}if(e.nodeProps)for(let a of e.nodeProps){let h=a[0];typeof h=="string"&&(h=fr[h]);for(let p=1;p<a.length;){let g=a[p++];if(g>=0)s(g,h,a[p++]);else{let y=a[p+-g];for(let b=-g;b>0;b--)s(a[p++],h,y);p++}}}this.nodeSet=new BR(n.map((a,h)=>Ha.define({name:h>=this.minRepeatTerm?void 0:a,id:h,props:i[h],top:r.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=eX;let o=ub(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(gN),this.states=ub(e.states,Uint32Array),this.data=ub(e.stateData),this.goto=ub(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new a0(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,r){let i=new XEe(this,e,n,r);for(let s of this.wrappers)i=s(i,e,n,r);return i}getGoto(e,n,r=!1){let i=this.goto;if(n>=i[0])return-1;for(let s=i[n+1];;){let o=i[s++],a=o&1,h=i[s++];if(a&&r)return h;for(let p=s+(o>>1);s<p;s++)if(i[s]==e)return h;if(a)return-1}}hasAction(e,n){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=_h(r,s+2)];else{if(r[s+1]==2)return _h(r,s+2);break}if(o==n||o==0)return _h(r,s+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,r=>r==n?!0:null)}allActions(e,n){let r=this.stateSlot(e,4),i=r?n(r):void 0;for(let s=this.stateSlot(e,1);i==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=_h(this.data,s+2);else break;i=n(_h(this.data,s+1))}return i}nextStates(e){let n=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=_h(this.data,r+2);else break;if(!(this.data[r+2]&1)){let i=this.data[r+1];n.some((s,o)=>o&1&&s==i)||n.push(this.data[r],i)}}return n}configure(e){let n=Object.assign(Object.create(J0.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=r}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(a=>a.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return n.specializers[i]=gN(o),o})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),r=n.map(()=>!1);if(e)for(let s of e.split(" ")){let o=n.indexOf(s);o>=0&&(r[o]=!0)}let i=null;for(let s=0;s<n.length;s++)if(!r[s])for(let o=this.dialects[n[s]],a;(a=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new KEe(e,r,i)}static deserialize(e){return new J0(e)}}function _h(t,e){return t[e]|t[e+1]<<16}function YEe(t){let e=null;for(let n of t){let r=n.p.stoppedAt;(n.pos==n.p.stream.end||r!=null&&n.pos>r)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function gN(t){if(t.external){let e=t.extend?1:0;return(n,r)=>t.external(n,r)<<1|e}return t.get}const JEe=36,yN=1,eze=2,sy=3,KO=4,tze=5,nze=6,rze=7,ize=8,sze=9,oze=10,aze=11,lze=12,cze=13,uze=14,hze=15,dze=16,fze=17,xN=18,pze=19,OK=20,AK=21,vN=22,mze=23,gze=24;function xI(t){return t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57}function yze(t){return t>=48&&t<=57||t>=97&&t<=102||t>=65&&t<=70}function qp(t,e,n){for(let r=!1;;){if(t.next<0)return;if(t.next==e&&!r){t.advance();return}r=n&&!r&&t.next==92,t.advance()}}function xze(t,e){e:for(;;){if(t.next<0)return;if(t.next==36){t.advance();for(let n=0;n<e.length;n++){if(t.next!=e.charCodeAt(n))continue e;t.advance()}if(t.next==36){t.advance();return}}else t.advance()}}function vze(t,e){let n="[{<(".indexOf(String.fromCharCode(e)),r=n<0?e:"]}>)".charCodeAt(n);for(;;){if(t.next<0)return;if(t.next==r&&t.peek(1)==39){t.advance(2);return}t.advance()}}function vI(t,e){for(;!(t.next!=95&&!xI(t.next));)e!=null&&(e+=String.fromCharCode(t.next)),t.advance();return e}function bze(t){if(t.next==39||t.next==34||t.next==96){let e=t.next;t.advance(),qp(t,e,!1)}else vI(t)}function bN(t,e){for(;t.next==48||t.next==49;)t.advance();e&&t.next==e&&t.advance()}function _N(t,e){for(;;){if(t.next==46){if(e)break;e=!0}else if(t.next<48||t.next>57)break;t.advance()}if(t.next==69||t.next==101)for(t.advance(),(t.next==43||t.next==45)&&t.advance();t.next>=48&&t.next<=57;)t.advance()}function wN(t){for(;!(t.next<0||t.next==10);)t.advance()}function Lp(t,e){for(let n=0;n<e.length;n++)if(e.charCodeAt(n)==t)return!0;return!1}const ZO=` 	\r
`;function EK(t,e,n){let r=Object.create(null);r.true=r.false=tze,r.null=r.unknown=nze;for(let i of t.split(" "))i&&(r[i]=OK);for(let i of e.split(" "))i&&(r[i]=AK);for(let i of(n||"").split(" "))i&&(r[i]=gze);return r}const zK="array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ",IK="absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ",bI={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',caseInsensitiveIdentifiers:!1,words:EK(IK,zK)};function _ze(t,e,n,r){let i={};for(let s in bI)i[s]=(t.hasOwnProperty(s)?t:bI)[s];return e&&(i.words=EK(e,n||"",r)),i}function MK(t){return new sg(e=>{var n;let{next:r}=e;if(e.advance(),Lp(r,ZO)){for(;Lp(e.next,ZO);)e.advance();e.acceptToken(JEe)}else if(r==36&&t.doubleDollarQuotedStrings){let i=vI(e,"");e.next==36&&(e.advance(),xze(e,i),e.acceptToken(sy))}else if(r==39||r==34&&t.doubleQuotedStrings)qp(e,r,t.backslashEscapes),e.acceptToken(sy);else if(r==35&&t.hashComments||r==47&&e.next==47&&t.slashComments)wN(e),e.acceptToken(yN);else if(r==45&&e.next==45&&(!t.spaceAfterDashes||e.peek(1)==32))wN(e),e.acceptToken(yN);else if(r==47&&e.next==42){e.advance();for(let i=1;;){let s=e.next;if(e.next<0)break;if(e.advance(),s==42&&e.next==47){if(i--,e.advance(),!i)break}else s==47&&e.next==42&&(i++,e.advance())}e.acceptToken(eze)}else if((r==101||r==69)&&e.next==39)e.advance(),qp(e,39,!0),e.acceptToken(sy);else if((r==110||r==78)&&e.next==39&&t.charSetCasts)e.advance(),qp(e,39,t.backslashEscapes),e.acceptToken(sy);else if(r==95&&t.charSetCasts)for(let i=0;;i++){if(e.next==39&&i>1){e.advance(),qp(e,39,t.backslashEscapes),e.acceptToken(sy);break}if(!xI(e.next))break;e.advance()}else if(t.plsqlQuotingMechanism&&(r==113||r==81)&&e.next==39&&e.peek(1)>0&&!Lp(e.peek(1),ZO)){let i=e.peek(1);e.advance(2),vze(e,i),e.acceptToken(sy)}else if(Lp(r,t.identifierQuotes)){const i=r==91?93:r;qp(e,i,!1),e.acceptToken(pze)}else if(r==40)e.acceptToken(rze);else if(r==41)e.acceptToken(ize);else if(r==123)e.acceptToken(sze);else if(r==125)e.acceptToken(oze);else if(r==91)e.acceptToken(aze);else if(r==93)e.acceptToken(lze);else if(r==59)e.acceptToken(cze);else if(t.unquotedBitLiterals&&r==48&&e.next==98)e.advance(),bN(e),e.acceptToken(vN);else if((r==98||r==66)&&(e.next==39||e.next==34)){const i=e.next;e.advance(),t.treatBitsAsBytes?(qp(e,i,t.backslashEscapes),e.acceptToken(mze)):(bN(e,i),e.acceptToken(vN))}else if(r==48&&(e.next==120||e.next==88)||(r==120||r==88)&&e.next==39){let i=e.next==39;for(e.advance();yze(e.next);)e.advance();i&&e.next==39&&e.advance(),e.acceptToken(KO)}else if(r==46&&e.next>=48&&e.next<=57)_N(e,!0),e.acceptToken(KO);else if(r==46)e.acceptToken(uze);else if(r>=48&&r<=57)_N(e,!1),e.acceptToken(KO);else if(Lp(r,t.operatorChars)){for(;Lp(e.next,t.operatorChars);)e.advance();e.acceptToken(hze)}else if(Lp(r,t.specialVar))e.next==r&&e.advance(),bze(e),e.acceptToken(fze);else if(r==58||r==44)e.acceptToken(dze);else if(xI(r)){let i=vI(e,String.fromCharCode(r));e.acceptToken(e.next==46||e.peek(-i.length-1)==46?xN:(n=t.words[i.toLowerCase()])!==null&&n!==void 0?n:xN)}})}const RK=MK(bI),wze=J0.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:" LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,nodeProps:[["isolate",-4,1,2,3,19,""]],skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,RK],topRules:{Script:[0,25]},tokenPrec:0});function _I(t){let e=t.cursor().moveTo(t.from,-1);for(;/Comment/.test(e.name);)e.moveTo(e.from,-1);return e.node}function U1(t,e){let n=t.sliceString(e.from,e.to),r=/^([`'"\[])(.*)([`'"\]])$/.exec(n);return r?r[2]:n}function aC(t){return t&&(t.name=="Identifier"||t.name=="QuotedIdentifier")}function Sze(t,e){if(e.name=="CompositeIdentifier"){let n=[];for(let r=e.firstChild;r;r=r.nextSibling)aC(r)&&n.push(U1(t,r));return n}return[U1(t,e)]}function SN(t,e){for(let n=[];;){if(!e||e.name!=".")return n;let r=_I(e);if(!aC(r))return n;n.unshift(U1(t,r)),e=_I(r)}}function kze(t,e){let n=rs(t).resolveInner(e,-1),r=Tze(t.doc,n);return n.name=="Identifier"||n.name=="QuotedIdentifier"||n.name=="Keyword"?{from:n.from,quoted:n.name=="QuotedIdentifier"?t.doc.sliceString(n.from,n.from+1):null,parents:SN(t.doc,_I(n)),aliases:r}:n.name=="."?{from:e,quoted:null,parents:SN(t.doc,n),aliases:r}:{from:e,quoted:null,parents:[],empty:!0,aliases:r}}const Cze=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" "));function Tze(t,e){let n;for(let i=e;!n;i=i.parent){if(!i)return null;i.name=="Statement"&&(n=i)}let r=null;for(let i=n.firstChild,s=!1,o=null;i;i=i.nextSibling){let a=i.name=="Keyword"?t.sliceString(i.from,i.to).toLowerCase():null,h=null;if(!s)s=a=="from";else if(a=="as"&&o&&aC(i.nextSibling))h=U1(t,i.nextSibling);else{if(a&&Cze.has(a))break;o&&aC(i)&&(h=U1(t,i))}h&&(r||(r=Object.create(null)),r[h]=Sze(t,o)),o=/Identifier$/.test(i.name)?i:null}return r}function jze(t,e,n){return n.map(r=>({...r,label:r.label[0]==t?r.label:t+r.label+e,apply:void 0}))}const Pze=/^\w*$/,Oze=/^[`'"\[]?\w*[`'"\]]?$/;function kN(t){return t.self&&typeof t.self.label=="string"}class iD{constructor(e,n){this.idQuote=e,this.idCaseInsensitive=n,this.list=[],this.children=void 0}child(e){let n=this.children||(this.children=Object.create(null)),r=n[e];return r||(e&&!this.list.some(i=>i.label==e)&&this.list.push(CN(e,"type",this.idQuote,this.idCaseInsensitive)),n[e]=new iD(this.idQuote,this.idCaseInsensitive))}maybeChild(e){return this.children?this.children[e]:null}addCompletion(e){let n=this.list.findIndex(r=>r.label==e.label);n>-1?this.list[n]=e:this.list.push(e)}addCompletions(e){for(let n of e)this.addCompletion(typeof n=="string"?CN(n,"property",this.idQuote,this.idCaseInsensitive):n)}addNamespace(e){Array.isArray(e)?this.addCompletions(e):kN(e)?this.addNamespace(e.children):this.addNamespaceObject(e)}addNamespaceObject(e){for(let n of Object.keys(e)){let r=e[n],i=null,s=n.replace(/\\?\./g,a=>a=="."?"\0":a).split("\0"),o=this;kN(r)&&(i=r.self,r=r.children);for(let a=0;a<s.length;a++)i&&a==s.length-1&&o.addCompletion(i),o=o.child(s[a].replace(/\\\./g,"."));o.addNamespace(r)}}}function CN(t,e,n,r){return new RegExp("^[a-z_][a-z_\\d]*$",r?"i":"").test(t)?{label:t,type:e}:{label:t,type:e,apply:n+t+DK(n)}}function DK(t){return t==="["?"]":t}function Aze(t,e,n,r,i,s){var o;let a=((o=s==null?void 0:s.spec.identifierQuotes)===null||o===void 0?void 0:o[0])||'"',h=new iD(a,!!(s!=null&&s.spec.caseInsensitiveIdentifiers)),p=i?h.child(i):null;return h.addNamespace(t),e&&(p||h).addCompletions(e),n&&h.addCompletions(n),p&&h.addCompletions(p.list),r&&h.addCompletions((p||h).child(r).list),g=>{let{parents:y,from:b,quoted:S,empty:P,aliases:O}=kze(g.state,g.pos);if(P&&!g.explicit)return null;O&&y.length==1&&(y=O[y[0]]||y);let D=h;for(let F of y){for(;!D.children||!D.children[F];)if(D==h&&p)D=p;else if(D==p&&r)D=D.child(r);else return null;let R=D.maybeChild(F);if(!R)return null;D=R}let z=D.list;if(D==h&&O&&(z=z.concat(Object.keys(O).map(F=>({label:F,type:"constant"})))),S){let F=S[0],R=DK(F),N=g.state.sliceDoc(g.pos,g.pos+1)==R;return{from:b,to:N?g.pos+1:void 0,options:jze(F,R,z),validFor:Oze}}else return{from:b,options:z,validFor:Pze}}}function Eze(t){return t==AK?"type":t==OK?"keyword":"variable"}function zze(t,e,n){let r=Object.keys(t).map(i=>n(e?i.toUpperCase():i,Eze(t[i])));return TAe(["QuotedIdentifier","String","LineComment","BlockComment","."],dK(r))}let Ize=wze.configure({props:[AT.add({Statement:cX()}),ET.add({Statement(t,e){return{from:Math.min(t.from+100,e.doc.lineAt(t.from).to),to:t.to}},BlockComment(t){return{from:t.from+2,to:t.to-2}}}),jT({Keyword:Ge.keyword,Type:Ge.typeName,Builtin:Ge.standard(Ge.name),Bits:Ge.number,Bytes:Ge.string,Bool:Ge.bool,Null:Ge.null,Number:Ge.number,String:Ge.string,Identifier:Ge.name,QuotedIdentifier:Ge.special(Ge.string),SpecialVar:Ge.special(Ge.name),LineComment:Ge.lineComment,BlockComment:Ge.blockComment,Operator:Ge.operator,"Semi Punctuation":Ge.punctuation,"( )":Ge.paren,"{ }":Ge.brace,"[ ]":Ge.squareBracket})]});class q1{constructor(e,n,r){this.dialect=e,this.language=n,this.spec=r}get extension(){return this.language.extension}configureLanguage(e,n){return new q1(this.dialect,this.language.configure(e,n),this.spec)}static define(e){let n=_ze(e,e.keywords,e.types,e.builtin),r=X0.define({name:"sql",parser:Ize.configure({tokenizers:[{from:RK,to:MK(n)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new q1(n,r,e)}}function Mze(t,e){return{label:t,type:e,boost:-1}}function Rze(t,e=!1,n){return zze(t.dialect.words,e,n||Mze)}function Dze(t){return t.schema?Aze(t.schema,t.tables,t.schemas,t.defaultTable,t.defaultSchema,t.dialect||sD):()=>null}function Lze(t){return t.schema?(t.dialect||sD).language.data.of({autocomplete:Dze(t)}):[]}function Fze(t={}){let e=t.dialect||sD;return new WR(e.language,[Lze(t),e.language.data.of({autocomplete:Rze(e,t.upperCaseKeywords,t.keywordCompletion)})])}const sD=q1.define({}),Bze=q1.define({charSetCasts:!0,doubleDollarQuotedStrings:!0,operatorChars:"+-*/<>=~!@#%^&|`?",specialVar:"",keywords:IK+"abort abs absent access according ada admin aggregate alias also always analyse analyze array_agg array_max_cardinality asensitive assert assignment asymmetric atomic attach attribute attributes avg backward base64 begin_frame begin_partition bernoulli bit_length blocked bom cache called cardinality catalog_name ceil ceiling chain char_length character_length character_set_catalog character_set_name character_set_schema characteristics characters checkpoint class class_origin cluster coalesce cobol collation_catalog collation_name collation_schema collect column_name columns command_function command_function_code comment comments committed concurrently condition_number configuration conflict connection_name constant constraint_catalog constraint_name constraint_schema contains content control conversion convert copy corr cost covar_pop covar_samp csv cume_dist current_catalog current_row current_schema cursor_name database datalink datatype datetime_interval_code datetime_interval_precision db debug defaults defined definer degree delimiter delimiters dense_rank depends derived detach detail dictionary disable discard dispatch dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue document dump dynamic_function dynamic_function_code element elsif empty enable encoding encrypted end_frame end_partition endexec enforced enum errcode error event every exclude excluding exclusive exp explain expression extension extract family file filter final first_value flag floor following force foreach fortran forward frame_row freeze fs functions fusion generated granted greatest groups handler header hex hierarchy hint id ignore ilike immediately immutable implementation implicit import include including increment indent index indexes info inherit inherits inline insensitive instance instantiable instead integrity intersection invoker isnull key_member key_type label lag last_value lead leakproof least length library like_regex link listen ln load location lock locked log logged lower mapping matched materialized max max_cardinality maxvalue member merge message message_length message_octet_length message_text min minvalue mod mode more move multiset mumps name namespace nfc nfd nfkc nfkd nil normalize normalized nothing notice notify notnull nowait nth_value ntile nullable nullif nulls number occurrences_regex octet_length octets off offset oids operator options ordering others over overlay overriding owned owner parallel parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partition pascal passing passthrough password percent percent_rank percentile_cont percentile_disc perform period permission pg_context pg_datatype_name pg_exception_context pg_exception_detail pg_exception_hint placing plans pli policy portion position position_regex power precedes preceding prepared print_strict_params procedural procedures program publication query quote raise range rank reassign recheck recovery refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex rename repeatable replace replica requiring reset respect restart restore result_oid returned_cardinality returned_length returned_octet_length returned_sqlstate returning reverse routine_catalog routine_name routine_schema routines row_count row_number rowtype rule scale schema_name schemas scope scope_catalog scope_name scope_schema security selective self sensitive sequence sequences serializable server server_name setof share show simple skip slice snapshot source specific_name sqlcode sqlerror sqrt stable stacked standalone statement statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset subscription substring substring_regex succeeds sum symmetric sysid system system_time table_name tables tablesample tablespace temp template ties token top_level_count transaction_active transactions_committed transactions_rolled_back transform transforms translate translate_regex trigger_catalog trigger_name trigger_schema trim trim_array truncate trusted type types uescape unbounded uncommitted unencrypted unlink unlisten unlogged unnamed untyped upper uri use_column use_variable user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema vacuum valid validate validator value_of var_pop var_samp varbinary variable_conflict variadic verbose version versioning views volatile warning whitespace width_bucket window within wrapper xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate yes",types:zK+"bigint int8 bigserial serial8 varbit bool box bytea cidr circle precision float8 inet int4 json jsonb line lseg macaddr macaddr8 money numeric pg_lsn point polygon float4 int2 smallserial serial2 serial serial4 text timetz timestamptz tsquery tsvector txid_snapshot uuid xml"}),$ze=["SELECT","FROM","WHERE","AND","OR","NOT","IN","BETWEEN","LIKE","ILIKE","IS","NULL","TRUE","FALSE","AS","ON","JOIN","LEFT","RIGHT","INNER","OUTER","FULL","CROSS","NATURAL","USING","GROUP","BY","HAVING","ORDER","ASC","DESC","NULLS","FIRST","LAST","LIMIT","OFFSET","DISTINCT","ALL","UNION","INTERSECT","EXCEPT","CASE","WHEN","THEN","ELSE","END","CAST","COALESCE","NULLIF","EXISTS","ANY","SOME","WITH","RECURSIVE","OVER","PARTITION","WINDOW","ROWS","RANGE","UNBOUNDED","PRECEDING","FOLLOWING","CURRENT","ROW","FILTER","WITHIN","LATERAL","FETCH","NEXT","ONLY"],Nze=["COUNT","SUM","AVG","MIN","MAX","ARRAY_AGG","STRING_AGG","BOOL_AND","BOOL_OR","BIT_AND","BIT_OR","EVERY","PERCENTILE_CONT","PERCENTILE_DISC","LENGTH","LOWER","UPPER","TRIM","LTRIM","RTRIM","SUBSTRING","POSITION","REPLACE","CONCAT","CONCAT_WS","SPLIT_PART","REGEXP_REPLACE","REGEXP_MATCHES","LEFT","RIGHT","REVERSE","REPEAT","LPAD","RPAD","INITCAP","FORMAT","ABS","CEIL","CEILING","FLOOR","ROUND","TRUNC","MOD","POWER","SQRT","EXP","LN","LOG","RANDOM","SIGN","GREATEST","LEAST","NOW","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE_PART","DATE_TRUNC","EXTRACT","AGE","INTERVAL","TO_CHAR","TO_DATE","TO_TIMESTAMP","JSON_AGG","JSONB_AGG","JSON_BUILD_OBJECT","JSONB_BUILD_OBJECT","JSON_OBJECT_AGG","JSONB_OBJECT_AGG","ROW_TO_JSON","JSON_ARRAY_LENGTH","ARRAY_LENGTH","ARRAY_TO_STRING","STRING_TO_ARRAY","UNNEST","ARRAY_CAT","CAST","TO_NUMBER","TO_TEXT"],Vze=["ST_Point","ST_MakePoint","ST_MakeLine","ST_MakePolygon","ST_MakeEnvelope","ST_GeomFromText","ST_GeomFromWKB","ST_GeomFromGeoJSON","ST_GeogFromText","ST_SetSRID","ST_Transform","ST_Collect","ST_Union","ST_Buffer","ST_X","ST_Y","ST_Z","ST_M","ST_SRID","ST_GeometryType","ST_Dimension","ST_CoordDim","ST_NPoints","ST_NRings","ST_NumGeometries","ST_NumPoints","ST_ExteriorRing","ST_InteriorRingN","ST_GeometryN","ST_PointN","ST_StartPoint","ST_EndPoint","ST_Centroid","ST_PointOnSurface","ST_Envelope","ST_Boundary","ST_AsText","ST_AsBinary","ST_AsGeoJSON","ST_AsKML","ST_AsSVG","ST_AsGML","ST_AsEWKT","ST_AsEWKB","ST_AsMVT","ST_AsMVTGeom","ST_Intersects","ST_Contains","ST_Within","ST_Overlaps","ST_Touches","ST_Crosses","ST_Disjoint","ST_Equals","ST_Covers","ST_CoveredBy","ST_ContainsProperly","ST_DWithin","ST_Distance","ST_3DDistance","ST_Area","ST_Perimeter","ST_Length","ST_Length2D","ST_3DLength","ST_Distance","ST_MaxDistance","ST_HausdorffDistance","ST_FrechetDistance","ST_Simplify","ST_SimplifyPreserveTopology","ST_SimplifyVW","ST_ChaikinSmoothing","ST_ConvexHull","ST_ConcaveHull","ST_Buffer","ST_OffsetCurve","ST_Difference","ST_Intersection","ST_SymDifference","ST_Split","ST_Subdivide","ST_MakeValid","ST_Snap","ST_SnapToGrid","ST_Segmentize","ST_LineMerge","ST_UnaryUnion","ST_ClusterDBSCAN","ST_ClusterKMeans","ST_ClusterWithin","ST_ClusterIntersecting","ST_Extent","ST_3DExtent","ST_MemUnion","ST_Collect","ST_MakeLine","ST_MakeBox2D","ST_XMin","ST_XMax","ST_YMin","ST_YMax","ST_ZMin","ST_ZMax","ST_Expand","ST_EstimatedExtent","Box2D","Box3D","ST_LineInterpolatePoint","ST_LineInterpolatePoints","ST_LineLocatePoint","ST_LineSubstring","ST_LocateAlong","ST_LocateBetween","ST_AddMeasure","ST_IsValid","ST_IsSimple","ST_IsEmpty","ST_IsClosed","ST_IsRing","ST_IsCollection","ST_HasArc","ST_NumPatches","ST_Force2D","ST_Force3D","ST_ForceRHR","ST_Reverse","ST_FlipCoordinates","ST_OrientedEnvelope"],Wze=["integer","int","int4","bigint","int8","smallint","int2","numeric","decimal","real","float4","double precision","float8","text","varchar","char","character varying","character","boolean","bool","date","time","timestamp","timestamptz","interval","json","jsonb","uuid","bytea","array","point","line","polygon","geometry","geography","box","circle","inet","cidr","macaddr"],TN=({value:t,onChange:e,placeholder:n="Enter SQL query...",height:r="150px",minHeight:i,maxHeight:s,schemas:o=[],serviceName:a,readOnly:h=!1,className:p=""})=>{const[g,y]=L.useState(o);L.useEffect(()=>{o.length>0&&y(o)},[o]),L.useEffect(()=>{a&&o.length===0&&g.length===0&&b(a)},[a,o.length,g.length]);const b=async z=>{try{const F=await fetch(`/api/pg/services/${z}/schemas`);if(F.ok){const R=await F.json();R.schemas&&y(R.schemas)}}catch(F){console.error("Failed to load schema info:",F)}},S=L.useMemo(()=>z=>{const F=z.matchBefore(/[\w.]+/);if(!F||F.from===F.to&&!z.explicit)return null;const R=F.text.toLowerCase(),N=[],Q=R.lastIndexOf(".");if(Q>=0){const X=R.substring(0,Q),K=R.substring(Q+1);for(const ne of g){if(ne.name.toLowerCase()===X)for(const J of ne.tables)J.name.toLowerCase().startsWith(K)&&N.push({label:J.name,type:"class",detail:`table in ${ne.name}`,boost:10});for(const J of ne.tables){const ae=`${ne.name}.${J.name}`.toLowerCase(),Ee=J.name.toLowerCase();if(X===ae||X===Ee)for(const Ce of J.columns)Ce.name.toLowerCase().startsWith(K)&&N.push({label:Ce.name,type:"property",detail:Ce.type,boost:15})}}}else{for(const X of $ze)X.toLowerCase().startsWith(R)&&N.push({label:X,type:"keyword",boost:5});for(const X of Nze)X.toLowerCase().startsWith(R)&&N.push({label:X+"()",type:"function",detail:"PostgreSQL",boost:3});for(const X of Vze)X.toLowerCase().startsWith(R)&&N.push({label:X+"()",type:"function",detail:"PostGIS",boost:4});for(const X of Wze)X.toLowerCase().startsWith(R)&&N.push({label:X,type:"type",boost:1});for(const X of g){X.name.toLowerCase().startsWith(R)&&N.push({label:X.name,type:"namespace",detail:"schema",boost:6});for(const K of X.tables){K.name.toLowerCase().startsWith(R)&&N.push({label:K.name,type:"class",detail:`table in ${X.name}`,boost:8});const ne=`${X.name}.${K.name}`;ne.toLowerCase().startsWith(R)&&N.push({label:ne,type:"class",detail:"table",boost:7})}}}N.sort((X,K)=>(K.boost||0)-(X.boost||0));const q=N.slice(0,50);return q.length===0?null:{from:F.from,options:q,validFor:/^[\w.]*$/}},[g]),P=L.useMemo(()=>{const z={};for(const F of g)for(const R of F.tables){const N=`${F.name}.${R.name}`;z[N]=R.columns.map(Q=>Q.name),z[R.name]=R.columns.map(Q=>Q.name)}return Fze({dialect:Bze,schema:z,upperCaseKeywords:!0})},[g]),O=L.useMemo(()=>rn.theme({"&":{fontSize:"14px",fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace'},".cm-content":{padding:"8px 0"},".cm-line":{padding:"0 8px"},".cm-gutters":{backgroundColor:"#f7f7f7",borderRight:"1px solid #e0e0e0"},"&.cm-focused .cm-cursor":{borderLeftColor:"#3b82f6"},".cm-placeholder":{color:"#9ca3af"},".cm-tooltip.cm-tooltip-autocomplete":{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},".cm-tooltip.cm-tooltip-autocomplete > ul":{fontFamily:"inherit"},".cm-tooltip.cm-tooltip-autocomplete > ul > li":{padding:"4px 8px"},".cm-tooltip.cm-tooltip-autocomplete > ul > li[aria-selected]":{backgroundColor:"#3b82f6",color:"#fff"},".cm-completionIcon":{width:"1em",marginRight:"0.5em"},".cm-completionIcon-keyword":{"&::after":{content:'"K"',color:"#9333ea"}},".cm-completionIcon-function":{"&::after":{content:'""',color:"#2563eb"}},".cm-completionIcon-class":{"&::after":{content:'"T"',color:"#059669"}},".cm-completionIcon-property":{"&::after":{content:'"c"',color:"#d97706"}},".cm-completionIcon-namespace":{"&::after":{content:'"S"',color:"#dc2626"}},".cm-completionIcon-type":{"&::after":{content:'"t"',color:"#6366f1"}}}),[]),D=L.useMemo(()=>[P,_K({override:[S],activateOnTyping:!0,maxRenderedOptions:50}),rn.lineWrapping,O],[P,S,O]);return u.jsx("div",{className:`sql-editor-wrapper border rounded ${p}`,children:u.jsx(rD,{value:t,onChange:e,placeholder:n,height:r,minHeight:i,maxHeight:s,extensions:D,readOnly:h,basicSetup:{lineNumbers:!0,highlightActiveLineGutter:!0,highlightSpecialChars:!0,history:!0,foldGutter:!1,drawSelection:!0,dropCursor:!0,allowMultipleSelections:!0,indentOnInput:!0,syntaxHighlighting:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!1,rectangularSelection:!0,crosshairCursor:!1,highlightActiveLine:!0,highlightSelectionMatches:!0,closeBracketsKeymap:!0,defaultKeymap:!0,searchKeymap:!0,historyKeymap:!0,foldKeymap:!1,completionKeymap:!0,lintKeymap:!0}})})},oy=Nr(de),Uze=[{value:"=",label:"equals"},{value:"!=",label:"not equals"},{value:"<",label:"less than"},{value:"<=",label:"less or equal"},{value:">",label:"greater than"},{value:">=",label:"greater or equal"},{value:"LIKE",label:"contains"},{value:"ILIKE",label:"contains (case insensitive)"},{value:"IS NULL",label:"is null"},{value:"IS NOT NULL",label:"is not null"},{value:"IN",label:"in list"}],qze=[{value:"",label:"None"},{value:"COUNT",label:"Count"},{value:"SUM",label:"Sum"},{value:"AVG",label:"Average"},{value:"MIN",label:"Min"},{value:"MAX",label:"Max"},{value:"ST_Extent",label:"Extent (geo)"},{value:"ST_Union",label:"Union (geo)"}],Qze=["Show me all records from the last 30 days","Find the top 10 largest by area","Count records grouped by type",'Show records where name contains "park"',"Find all polygons that intersect with each other"],Hze=({serviceName:t,initialSchema:e="public",initialTable:n="",initialSQL:r="",onClose:i,onPublishToGeoServer:s})=>{const o=ha(),a=Et("white","gray.800"),h=Et("gray.200","gray.600"),p=Et("gray.50","gray.700"),g=Et("gray.50","gray.900"),y=Et("blue.50","blue.900"),[b,S]=L.useState("visual"),[P,O]=L.useState([]),[,D]=L.useState(!0),[z,F]=L.useState(e),[R,N]=L.useState(n),[Q,q]=L.useState([]),[X,K]=L.useState([]),[ne,J]=L.useState([]),[ae,Ee]=L.useState(100),[Ce,$e]=L.useState(0),[We,Fe]=L.useState(!1),[we,Ie]=L.useState(r),[Qe,se]=L.useState(""),[Re,Oe]=L.useState(""),[oe,nt]=L.useState(!1),[Ne,tt]=L.useState(null),[Ye,_t]=L.useState(!0),[At,Ot]=L.useState(!1),[bt,rt]=L.useState(null),[tn,kt]=L.useState(""),[it,ze]=L.useState(!1),ut=L.useRef(null),[qt,Ct]=L.useState(()=>{const U=localStorage.getItem("query-panel-split");return U?parseInt(U,10):50}),[$t,Yn]=L.useState(!1),br=L.useRef(null),ur=L.useRef(qt),Ar=L.useMemo(()=>P.find(U=>U.name===z),[P,z]),_r=L.useMemo(()=>Ar==null?void 0:Ar.tables.find(U=>U.name===R),[Ar,R]),ct=L.useMemo(()=>(_r==null?void 0:_r.columns)||[],[_r]);L.useEffect(()=>{D(!0),fetch(`/api/pg/services/${encodeURIComponent(t)}/schemas`).then(U=>U.json()).then(U=>{U.schemas&&(O(U.schemas),U.schemas.length>0&&!z&&F(U.schemas[0].name))}).catch(U=>{console.error("Failed to load schemas:",U),kt("Failed to load database schemas")}).finally(()=>D(!1))},[t]),L.useEffect(()=>{fetch("/api/ai/providers").then(U=>U.json()).then(U=>{var re;const G=(re=U.providers)==null?void 0:re.find(pe=>pe.active);_t((G==null?void 0:G.available)??!1)}).catch(()=>_t(!1))},[]),L.useEffect(()=>{if(b==="visual")if(R){const U=Tt();se(U)}else se("")},[b,z,R,Q,X,ne,ae,We]);const Tt=L.useCallback(()=>{if(!R)return"";const U=Q.length>0?Q.map(Se=>Se.aggregate?`${Se.aggregate}(${Se.name})${Se.alias?` AS ${Se.alias}`:""}`:Se.alias?`${Se.name} AS ${Se.alias}`:Se.name).join(", "):"*";let G=`SELECT ${We?"DISTINCT ":""}${U}
FROM ${z}.${R}`;if(X.length>0){const Se=X.map((Pe,qe)=>{let ke="";return qe>0&&(ke+=` ${Pe.logic} `),["IS NULL","IS NOT NULL"].includes(Pe.operator)?ke+=`${Pe.column} ${Pe.operator}`:Pe.operator==="IN"?ke+=`${Pe.column} IN (${Pe.value})`:["LIKE","ILIKE"].includes(Pe.operator)?ke+=`${Pe.column} ${Pe.operator} '%${Pe.value}%'`:ke+=`${Pe.column} ${Pe.operator} '${Pe.value}'`,ke}).join("");G+=`
WHERE ${Se}`}const re=Q.some(Se=>Se.aggregate),pe=Q.filter(Se=>!Se.aggregate);return re&&pe.length>0&&(G+=`
GROUP BY ${pe.map(Se=>Se.name).join(", ")}`),ne.length>0&&(G+=`
ORDER BY ${ne.map(Se=>`${Se.column} ${Se.direction}`).join(", ")}`),G+=`
LIMIT ${ae}`,Ce>0&&(G+=` OFFSET ${Ce}`),G},[z,R,Q,X,ne,ae,Ce,We]),Me=L.useCallback(async(U,G=!1)=>{var re,pe;if(!U.trim()){kt("Please enter a query");return}G?ze(!0):(Ot(!0),kt(""),rt(null),$e(0));try{const Pe=await(await fetch("/api/query/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sql:U,service_name:t,max_rows:ae,offset:G&&(bt==null?void 0:bt.rows.length)||0})})).json();if(Pe.success){const qe=((re=Pe.result)==null?void 0:re.rows)||[],ke=((pe=Pe.result)==null?void 0:pe.columns)||[];rt(G&&bt?{...Pe.result,columns:ke,rows:[...bt.rows||[],...qe],has_more:qe.length===ae}:{...Pe.result,columns:ke,rows:qe,has_more:qe.length===ae}),se(Pe.sql||U)}else kt(Pe.error||"Query execution failed")}catch(Se){kt("Failed to execute query: "+Se.message)}finally{Ot(!1),ze(!1)}},[t,ae,bt]),Xt=L.useCallback(async()=>{if(!(!Re.trim()||oe)){nt(!0),tt(null),kt("");try{const G=await(await fetch("/api/ai/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:Re.trim(),service_name:t,schema_name:z,max_rows:ae,execute:!1})})).json();G.success&&G.sql?(tt({sql:G.sql,explanation:G.explanation,confidence:G.confidence,warnings:G.warnings}),Ie(G.sql)):kt(G.error||"AI query generation failed")}catch(U){kt("AI query failed: "+U.message)}finally{nt(!1)}}},[Re,oe,t,z,ae]),pt=L.useCallback(()=>{let U="";switch(b){case"ai":U=(Ne==null?void 0:Ne.sql)||we;break;case"visual":U=Qe;break;case"sql":U=we;break}Me(U)},[b,Ne,Qe,we,Me]),zt=L.useCallback(()=>{if(!(bt!=null&&bt.has_more)||it)return;let U="";switch(b){case"ai":U=(Ne==null?void 0:Ne.sql)||we;break;case"visual":U=Qe;break;case"sql":U=we;break}const G=bt.rows.length,re=U.replace(/LIMIT \d+(\s+OFFSET \d+)?/i,`LIMIT ${ae} OFFSET ${G}`);Me(re.includes("OFFSET")?re:`${U} OFFSET ${G}`,!0)},[bt,it,b,Ne,Qe,we,ae,Me]);L.useEffect(()=>{const U=ut.current;if(!U)return;const G=()=>{const{scrollTop:re,scrollHeight:pe,clientHeight:Se}=U;pe-re-Se<100&&(bt!=null&&bt.has_more)&&!it&&zt()};return U.addEventListener("scroll",G),()=>U.removeEventListener("scroll",G)},[bt,it,zt]);const ir=L.useCallback(U=>{U.preventDefault(),Yn(!0)},[]);L.useEffect(()=>{ur.current=qt},[qt]),L.useEffect(()=>{if(!$t)return;const U=re=>{if(!br.current)return;const pe=br.current.getBoundingClientRect(),Se=(re.clientX-pe.left)/pe.width*100,Pe=Math.max(25,Math.min(75,Se));Ct(Pe)},G=()=>{Yn(!1),localStorage.setItem("query-panel-split",ur.current.toString())};return document.addEventListener("mousemove",U),document.addEventListener("mouseup",G),()=>{document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",G)}},[$t]);const yt=()=>q([...Q,{name:""}]),_n=U=>q(Q.filter((G,re)=>re!==U)),Kt=(U,G)=>{const re=[...Q];re[U]={...re[U],...G},q(re)},tr=()=>K([...X,{column:"",operator:"=",value:"",logic:"AND"}]),qr=U=>K(X.filter((G,re)=>re!==U)),sn=(U,G)=>{const re=[...X];re[U]={...re[U],...G},K(re)},Wi=()=>J([...ne,{column:"",direction:"ASC"}]),Rs=U=>J(ne.filter((G,re)=>re!==U)),Ui=(U,G)=>{const re=[...ne];re[U]={...re[U],...G},J(re)},vs=()=>{const U=b==="visual"?Qe:we;navigator.clipboard.writeText(U),o({title:"Copied",description:"SQL copied to clipboard",status:"success",duration:2e3})},xe=U=>{if(!bt)return;let G="",re="",pe="";if(U==="csv"){const ke=bt.columns.map(ft=>ft.name).join(","),st=bt.rows.map(ft=>bt.columns.map(_e=>{const ht=ft[_e.name];return ht===null?"":typeof ht=="string"&&ht.includes(",")?`"${ht}"`:String(ht)}).join(",")).join(`
`);G=`${ke}
${st}`,re="query-results.csv",pe="text/csv"}else G=JSON.stringify(bt.rows,null,2),re="query-results.json",pe="application/json";const Se=new Blob([G],{type:pe}),Pe=URL.createObjectURL(Se),qe=document.createElement("a");qe.href=Pe,qe.download=re,qe.click(),URL.revokeObjectURL(Pe)};return u.jsxs(oy,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:Mu.default,bg:a,borderRadius:"2xl",boxShadow:"2xl",overflow:"hidden",h:"100%",display:"flex",flexDirection:"column",children:[u.jsxs(Sn,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",px:6,py:4,align:"center",justify:"space-between",children:[u.jsxs(me,{spacing:3,children:[u.jsx(de,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(Le,{as:Yr,boxSize:5,color:"white"})}),u.jsxs(de,{children:[u.jsx(te,{color:"white",fontWeight:"600",fontSize:"lg",children:"Query Designer"}),u.jsx(te,{color:"whiteAlpha.800",fontSize:"sm",children:t})]})]}),u.jsxs(me,{spacing:2,children:[u.jsxs(Lt,{colorScheme:"whiteAlpha",variant:"subtle",px:3,py:1,borderRadius:"full",children:[P.length," schemas"]}),i&&u.jsx(wn,{"aria-label":"Close",icon:u.jsx(Wf,{}),variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:i})]})]}),u.jsx(cx,{index:b==="ai"?0:b==="visual"?1:2,onChange:U=>S(U===0?"ai":U===1?"visual":"sql"),variant:"soft-rounded",colorScheme:"blue",px:4,py:3,bg:p,children:u.jsxs(ux,{children:[u.jsxs(fo,{gap:2,children:[u.jsx(Le,{as:Twe}),"AI Natural Language"]}),u.jsxs(fo,{gap:2,children:[u.jsx(Le,{as:Vf}),"Visual Builder"]}),u.jsxs(fo,{gap:2,children:[u.jsx(Le,{as:Da}),"SQL Editor"]})]})}),u.jsxs(Sn,{ref:br,flex:1,overflow:"hidden",position:"relative",children:[u.jsxs(Sn,{w:`${qt}%`,flexDirection:"column",overflow:"hidden",children:[u.jsx(de,{flex:1,overflow:"auto",p:4,children:u.jsxs(Sl,{mode:"wait",children:[b==="ai"&&u.jsx(oy,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:Mu.snappy,children:u.jsxs(at,{spacing:4,align:"stretch",children:[!Ye&&u.jsxs(go,{status:"warning",borderRadius:"lg",children:[u.jsx(yo,{}),u.jsxs(de,{children:[u.jsx(m_,{children:"Ollama not available"}),u.jsxs(M0,{fontSize:"sm",children:["Start Ollama with: ",u.jsx("code",{children:"ollama serve"})]})]})]}),u.jsxs(de,{children:[u.jsx(te,{fontWeight:"600",mb:2,fontSize:"sm",color:"gray.600",children:"Ask a question about your data"}),u.jsx(mT,{value:Re,onChange:U=>Oe(U.target.value),placeholder:"e.g., Show me all records where status is active...",rows:4,borderRadius:"xl",_focus:{borderColor:"purple.400",boxShadow:"0 0 0 3px rgba(159, 122, 234, 0.2)"},onKeyDown:U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),Xt())}})]}),u.jsxs(me,{children:[u.jsx(Vr,{value:z,onChange:U=>F(U.target.value),size:"sm",borderRadius:"lg",flex:1,children:P.map(U=>u.jsx("option",{value:U.name,children:U.name},U.name))}),u.jsx(vt,{colorScheme:"purple",leftIcon:oe?u.jsx(Cr,{size:"sm"}):u.jsx(qu,{}),onClick:Xt,isDisabled:!Re.trim()||oe||!Ye,borderRadius:"xl",children:"Generate SQL"})]}),u.jsxs(de,{children:[u.jsxs(me,{mb:2,children:[u.jsx(Le,{as:fR,color:"gray.400"}),u.jsx(te,{fontSize:"xs",color:"gray.500",children:"Examples"})]}),u.jsx($0,{spacing:2,children:Qze.map((U,G)=>u.jsx(Wm,{children:u.jsx(Vm,{size:"sm",variant:"subtle",colorScheme:"purple",cursor:"pointer",onClick:()=>Oe(U),_hover:{bg:"purple.100"},borderRadius:"full",children:u.jsx(T1,{children:U})})},G))})]}),Ne&&u.jsxs(oy,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},bg:"purple.50",p:4,borderRadius:"xl",borderLeft:"4px solid",borderLeftColor:"purple.400",children:[Ne.confidence!==void 0&&u.jsx(me,{mb:2,children:u.jsxs(Lt,{colorScheme:Ne.confidence>=.8?"green":Ne.confidence>=.5?"yellow":"red",children:[Math.round(Ne.confidence*100),"% confidence"]})}),Ne.explanation&&u.jsx(te,{fontSize:"sm",color:"purple.700",mb:2,children:Ne.explanation}),Ne.warnings&&Ne.warnings.length>0&&u.jsxs(go,{status:"warning",size:"sm",borderRadius:"md",mb:2,children:[u.jsx(yo,{}),u.jsx(at,{align:"start",spacing:0,children:Ne.warnings.map((U,G)=>u.jsx(te,{fontSize:"xs",children:U},G))})]})]}),((Ne==null?void 0:Ne.sql)||we)&&b==="ai"&&u.jsxs(de,{children:[u.jsx(te,{fontWeight:"600",mb:2,fontSize:"sm",color:"gray.600",children:"Generated SQL"}),u.jsx(TN,{value:(Ne==null?void 0:Ne.sql)||we,onChange:Ie,height:"150px",serviceName:t,schemas:P})]})]})},"ai"),b==="visual"&&u.jsx(oy,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:Mu.snappy,children:u.jsxs(at,{spacing:4,align:"stretch",children:[u.jsxs(me,{children:[u.jsxs(de,{flex:1,children:[u.jsx(te,{fontSize:"xs",fontWeight:"600",color:"gray.500",mb:1,children:"Schema"}),u.jsx(Vr,{value:z,onChange:U=>{F(U.target.value),N(""),q([])},size:"sm",borderRadius:"lg",children:P.map(U=>u.jsx("option",{value:U.name,children:U.name},U.name))})]}),u.jsxs(de,{flex:2,children:[u.jsx(te,{fontSize:"xs",fontWeight:"600",color:"gray.500",mb:1,children:"Table"}),u.jsx(Vr,{value:R,onChange:U=>{N(U.target.value),q([])},size:"sm",borderRadius:"lg",placeholder:"Select table...",children:Ar==null?void 0:Ar.tables.map(U=>u.jsxs("option",{value:U.name,children:[U.name," ",U.has_geometry&&"(geo)"]},U.name))})]})]}),_r&&u.jsxs(de,{bg:g,p:3,borderRadius:"lg",maxH:"120px",overflowY:"auto",children:[u.jsxs(me,{mb:2,children:[u.jsx(Le,{as:dR,color:"gray.500",size:"sm"}),u.jsxs(te,{fontSize:"xs",fontWeight:"600",color:"gray.500",children:["Available Columns (",ct.length,")"]})]}),u.jsx($0,{spacing:1,children:ct.map(U=>u.jsx(Wm,{children:u.jsxs(Vm,{size:"sm",variant:"subtle",colorScheme:"gray",cursor:"pointer",onClick:()=>{Q.find(G=>G.name===U.name)||q([...Q,{name:U.name}])},children:[u.jsx(T1,{children:U.name}),u.jsx(te,{fontSize:"2xs",color:"gray.400",ml:1,children:U.type})]})},U.name))})]}),u.jsxs(de,{children:[u.jsxs(Sn,{justify:"space-between",align:"center",mb:2,children:[u.jsxs(me,{children:[u.jsx(Le,{as:Ks,color:"blue.500"}),u.jsx(te,{fontSize:"sm",fontWeight:"600",children:"SELECT Columns"})]}),u.jsx(vt,{size:"xs",leftIcon:u.jsx(As,{}),onClick:yt,variant:"ghost",colorScheme:"blue",children:"Add"})]}),Q.length===0?u.jsx(te,{fontSize:"sm",color:"gray.500",fontStyle:"italic",children:"All columns (*)"}):u.jsx(at,{spacing:2,align:"stretch",children:Q.map((U,G)=>u.jsxs(me,{children:[u.jsxs(Vr,{value:U.name,onChange:re=>Kt(G,{name:re.target.value}),size:"sm",flex:2,borderRadius:"lg",children:[u.jsx("option",{value:"",children:"Select..."}),ct.map(re=>u.jsx("option",{value:re.name,children:re.name},re.name))]}),u.jsx(Vr,{value:U.aggregate||"",onChange:re=>Kt(G,{aggregate:re.target.value}),size:"sm",flex:1,borderRadius:"lg",children:qze.map(re=>u.jsx("option",{value:re.value,children:re.label},re.value))}),u.jsx(Rn,{value:U.alias||"",onChange:re=>Kt(G,{alias:re.target.value}),placeholder:"alias",size:"sm",flex:1,borderRadius:"lg"}),u.jsx(wn,{"aria-label":"Remove",icon:u.jsx(jf,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>_n(G)})]},G))})]}),u.jsx(Hn,{}),u.jsxs(de,{children:[u.jsxs(Sn,{justify:"space-between",align:"center",mb:2,children:[u.jsxs(me,{children:[u.jsx(Le,{as:Owe,color:"orange.500"}),u.jsx(te,{fontSize:"sm",fontWeight:"600",children:"WHERE Conditions"})]}),u.jsx(vt,{size:"xs",leftIcon:u.jsx(As,{}),onClick:tr,variant:"ghost",colorScheme:"orange",children:"Add"})]}),X.length===0?u.jsx(te,{fontSize:"sm",color:"gray.500",fontStyle:"italic",children:"No conditions"}):u.jsx(at,{spacing:2,align:"stretch",children:X.map((U,G)=>u.jsxs(me,{flexWrap:"wrap",children:[G>0&&u.jsxs(Vr,{value:U.logic,onChange:re=>sn(G,{logic:re.target.value}),size:"sm",w:"80px",borderRadius:"lg",children:[u.jsx("option",{value:"AND",children:"AND"}),u.jsx("option",{value:"OR",children:"OR"})]}),u.jsxs(Vr,{value:U.column,onChange:re=>sn(G,{column:re.target.value}),size:"sm",flex:1,minW:"100px",borderRadius:"lg",children:[u.jsx("option",{value:"",children:"Column..."}),ct.map(re=>u.jsx("option",{value:re.name,children:re.name},re.name))]}),u.jsx(Vr,{value:U.operator,onChange:re=>sn(G,{operator:re.target.value}),size:"sm",w:"150px",borderRadius:"lg",children:Uze.map(re=>u.jsx("option",{value:re.value,children:re.label},re.value))}),!["IS NULL","IS NOT NULL"].includes(U.operator)&&u.jsx(Rn,{value:U.value,onChange:re=>sn(G,{value:re.target.value}),placeholder:"value",size:"sm",flex:1,minW:"80px",borderRadius:"lg"}),u.jsx(wn,{"aria-label":"Remove",icon:u.jsx(jf,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>qr(G)})]},G))})]}),u.jsx(Hn,{}),u.jsxs(de,{children:[u.jsxs(Sn,{justify:"space-between",align:"center",mb:2,children:[u.jsxs(me,{children:[u.jsx(Le,{as:vwe,color:"green.500"}),u.jsx(te,{fontSize:"sm",fontWeight:"600",children:"ORDER BY"})]}),u.jsx(vt,{size:"xs",leftIcon:u.jsx(As,{}),onClick:Wi,variant:"ghost",colorScheme:"green",children:"Add"})]}),ne.length===0?u.jsx(te,{fontSize:"sm",color:"gray.500",fontStyle:"italic",children:"No sorting"}):u.jsx(at,{spacing:2,align:"stretch",children:ne.map((U,G)=>u.jsxs(me,{children:[u.jsxs(Vr,{value:U.column,onChange:re=>Ui(G,{column:re.target.value}),size:"sm",flex:2,borderRadius:"lg",children:[u.jsx("option",{value:"",children:"Column..."}),ct.map(re=>u.jsx("option",{value:re.name,children:re.name},re.name))]}),u.jsxs(Vr,{value:U.direction,onChange:re=>Ui(G,{direction:re.target.value}),size:"sm",w:"100px",borderRadius:"lg",children:[u.jsx("option",{value:"ASC",children:"ASC"}),u.jsx("option",{value:"DESC",children:"DESC"})]}),u.jsx(wn,{"aria-label":"Remove",icon:u.jsx(jf,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>Rs(G)})]},G))})]}),u.jsx(Hn,{}),u.jsxs(me,{spacing:4,children:[u.jsx(dl,{isChecked:We,onChange:U=>Fe(U.target.checked),size:"sm",children:"DISTINCT"}),u.jsxs(me,{children:[u.jsx(te,{fontSize:"sm",children:"LIMIT:"}),u.jsx(Rn,{type:"number",value:ae,onChange:U=>Ee(parseInt(U.target.value)||100),size:"sm",w:"80px",borderRadius:"lg",min:1,max:1e4})]})]}),Qe&&u.jsxs(de,{children:[u.jsxs(me,{justify:"space-between",mb:2,children:[u.jsx(te,{fontSize:"sm",fontWeight:"600",color:"gray.600",children:"Generated SQL"}),u.jsx(wn,{"aria-label":"Copy",icon:u.jsx(a6,{}),size:"xs",variant:"ghost",onClick:vs})]}),u.jsx(de,{bg:"gray.900",color:"gray.100",p:3,borderRadius:"lg",fontSize:"xs",fontFamily:"mono",whiteSpace:"pre-wrap",maxH:"150px",overflow:"auto",children:Qe})]})]})},"visual"),b==="sql"&&u.jsx(oy,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:Mu.snappy,h:"100%",children:u.jsxs(at,{spacing:4,align:"stretch",h:"100%",children:[u.jsxs(me,{justify:"space-between",children:[u.jsx(te,{fontWeight:"600",fontSize:"sm",color:"gray.600",children:"Write your SQL query"}),u.jsx(me,{children:u.jsx(wn,{"aria-label":"Copy",icon:u.jsx(a6,{}),size:"sm",variant:"ghost",onClick:vs})})]}),u.jsx(de,{flex:1,minH:"300px",children:u.jsx(TN,{value:we,onChange:Ie,height:"100%",serviceName:t,schemas:P,placeholder:"SELECT * FROM schema.table WHERE ..."})})]})},"sql")]})}),u.jsxs(Sn,{p:4,gap:2,borderTop:"1px solid",borderColor:h,bg:a,flexShrink:0,children:[u.jsx(vt,{colorScheme:"blue",leftIcon:At?u.jsx(Cr,{size:"sm"}):u.jsx(pR,{}),onClick:pt,isDisabled:At,flex:1,borderRadius:"xl",size:"lg",children:At?"Executing...":"Execute Query"}),s&&bt&&u.jsx(kn,{label:"Publish as SQL View Layer to GeoServer",children:u.jsx(vt,{colorScheme:"green",leftIcon:u.jsx(Ol,{}),onClick:()=>{s(b==="visual"?Qe:we,"sql_view_"+Date.now())},borderRadius:"xl",size:"lg",children:"Publish"})})]})]}),u.jsx(de,{w:"4px",cursor:"col-resize",bg:$t?"blue.400":h,_hover:{bg:"blue.400"},transition:"background 0.2s",onMouseDown:ir,flexShrink:0}),u.jsxs(de,{w:`calc(${100-qt}% - 4px)`,display:"flex",flexDirection:"column",overflow:"hidden",children:[u.jsxs(Sn,{px:4,py:3,bg:p,borderBottom:"1px solid",borderColor:h,align:"center",justify:"space-between",children:[u.jsxs(me,{children:[u.jsx(Le,{as:Ks,color:"blue.500"}),u.jsx(te,{fontWeight:"600",children:"Results"}),bt&&u.jsxs(Lt,{colorScheme:"blue",borderRadius:"full",children:[bt.rows.length,bt.total_count?` / ${bt.total_count}`:""," rows"]}),bt&&u.jsxs(Lt,{colorScheme:"gray",borderRadius:"full",children:[bt.duration_ms.toFixed(2),"ms"]})]}),bt&&u.jsxs(Df,{children:[u.jsx(Lf,{as:vt,size:"sm",variant:"ghost",rightIcon:u.jsx(fc,{}),children:u.jsx(Le,{as:Om})}),u.jsxs(Ff,{children:[u.jsx(ml,{icon:u.jsx(Om,{}),onClick:()=>xe("csv"),children:"Export as CSV"}),u.jsx(ml,{icon:u.jsx(Om,{}),onClick:()=>xe("json"),children:"Export as JSON"})]})]})]}),tn&&u.jsxs(go,{status:"error",borderRadius:"none",children:[u.jsx(yo,{}),u.jsx(M0,{fontSize:"sm",children:tn})]}),u.jsx(de,{ref:ut,flex:1,overflow:"auto",position:"relative",children:At&&!bt?u.jsx(Sn,{h:"100%",align:"center",justify:"center",children:u.jsxs(at,{spacing:4,children:[u.jsx(Cr,{size:"xl",color:"blue.500",thickness:"4px"}),u.jsx(te,{color:"gray.500",children:"Executing query..."})]})}):bt?u.jsxs(u.Fragment,{children:[u.jsxs(rg,{size:"sm",variant:"simple",children:[u.jsx(C_,{position:"sticky",top:0,bg:p,zIndex:1,children:u.jsxs(za,{children:[u.jsx(Dc,{w:"50px",textAlign:"center",borderBottomWidth:"2px",borderBottomColor:h,children:"#"}),bt.columns.map((U,G)=>u.jsx(Dc,{borderBottomWidth:"2px",borderBottomColor:h,whiteSpace:"nowrap",children:u.jsxs(at,{align:"start",spacing:0,children:[u.jsx(te,{children:U.name}),u.jsx(te,{fontSize:"2xs",color:"gray.400",fontWeight:"normal",children:U.type})]})},G))]})}),u.jsx(lx,{children:u.jsx(Sl,{children:bt.rows.map((U,G)=>u.jsxs(oy,{as:za,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:G*.01},_hover:{bg:y},children:[u.jsx(Qi,{textAlign:"center",color:"gray.400",fontSize:"xs",fontFamily:"mono",children:G+1}),bt.columns.map((re,pe)=>{const Se=U[re.name],Pe=Se===null,qe=Pe?"NULL":typeof Se=="object"?JSON.stringify(Se):String(Se);return u.jsx(Qi,{maxW:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:Pe?"gray.400":void 0,fontStyle:Pe?"italic":void 0,fontSize:"sm",title:qe,children:qe.length>100?qe.substring(0,100)+"...":qe},pe)})]},G))})})]}),it&&u.jsx(Sn,{py:4,justify:"center",children:u.jsxs(me,{children:[u.jsx(Cr,{size:"sm"}),u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Loading more..."})]})}),!bt.has_more&&bt.rows.length>0&&u.jsx(Sn,{py:4,justify:"center",children:u.jsxs(te,{fontSize:"sm",color:"gray.400",children:["End of results (",bt.rows.length," rows)"]})})]}):u.jsx(Sn,{h:"100%",align:"center",justify:"center",children:u.jsxs(at,{spacing:4,color:"gray.400",children:[u.jsx(Le,{as:V0,boxSize:12}),u.jsx(te,{children:"Execute a query to see results"})]})})})]})]})]})};function Gze(){const t=St(s=>s.activeDialog),e=St(s=>s.dialogData),n=St(s=>s.closeDialog),r=t==="query",i=e==null?void 0:e.data;return i!=null&&i.serviceName?u.jsxs(es,{isOpen:r,onClose:n,size:"full",motionPreset:"slideInBottom",children:[u.jsx(ts,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsx(gs,{m:4,borderRadius:"2xl",overflow:"hidden",h:"calc(100vh - 32px)",maxH:"calc(100vh - 32px)",children:u.jsx(Hze,{serviceName:i.serviceName,initialSchema:i.schemaName,initialTable:i.tableName,initialSQL:i.initialSQL,onClose:n})})]}):null}function Xze(){const t=St(i=>i.activeDialog),e=St(i=>i.dialogData),n=St(i=>i.closeDialog),r=t==="dataviewer";return r?u.jsxs(es,{isOpen:r,onClose:n,size:"6xl",scrollBehavior:"inside",children:[u.jsx(ts,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsx(gs,{maxH:"85vh",borderRadius:"xl",overflow:"hidden",children:u.jsx(Kze,{dialogData:e,onClose:n})})]}):null}function Kze({dialogData:t,onClose:e}){var ae,Ee,Ce,$e;const[n,r]=L.useState(null),[i,s]=L.useState(!0),[o,a]=L.useState(null),[h,p]=L.useState(0),[g,y]=L.useState(100),[b,S]=L.useState(null),P=Et("white","gray.800"),O=Et("gray.50","gray.700"),D=Et("gray.200","gray.600"),z=Et("gray.50","gray.700"),F=((ae=t==null?void 0:t.data)==null?void 0:ae.serviceName)??"",R=((Ee=t==null?void 0:t.data)==null?void 0:Ee.schemaName)??"",N=((Ce=t==null?void 0:t.data)==null?void 0:Ce.tableName)??"",Q=(($e=t==null?void 0:t.data)==null?void 0:$e.isView)??!1,q=async()=>{if(!F||!R||!N){a("Missing table information"),s(!1);return}s(!0),a(null);try{const We=await Ok(F,R,N,g,h*g);if(r(We),b===null)try{const Fe=await kH(F,`SELECT COUNT(*) as count FROM "${R}"."${N}"`,1);Fe.result.rows.length>0&&S(Number(Fe.result.rows[0][0]))}catch{}}catch(We){a(We.message)}finally{s(!1)}};L.useEffect(()=>{q()},[F,R,N,h,g]);const X=()=>{S(null),q()},K=()=>{if(!(n!=null&&n.result))return;const We=n.result.columns.join(","),Fe=n.result.rows.map(Re=>Re.map(Oe=>{if(Oe===null)return"";const oe=String(Oe);return oe.includes(",")||oe.includes('"')||oe.includes(`
`)?`"${oe.replace(/"/g,'""')}"`:oe}).join(",")),we=[We,...Fe].join(`
`),Ie=new Blob([we],{type:"text/csv"}),Qe=URL.createObjectURL(Ie),se=document.createElement("a");se.href=Qe,se.download=`${R}.${N}.csv`,se.click(),URL.revokeObjectURL(Qe)},ne=b!==null?Math.ceil(b/g):null,J={start:h*g+1,end:Math.min((h+1)*g,b??(h+1)*g)};return u.jsxs(u.Fragment,{children:[u.jsx(de,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",px:6,py:4,children:u.jsxs(Sn,{justify:"space-between",align:"center",children:[u.jsxs(de,{children:[u.jsxs(me,{spacing:2,mb:1,children:[u.jsx(Lt,{bg:"whiteAlpha.200",color:"white",fontSize:"xs",children:Q?"VIEW":"TABLE"}),u.jsx(te,{color:"white",fontWeight:"600",fontSize:"lg",children:N})]}),u.jsxs(me,{spacing:2,children:[u.jsx(te,{color:"whiteAlpha.800",fontSize:"sm",children:F}),u.jsx(te,{color:"whiteAlpha.600",fontSize:"sm",children:"/"}),u.jsx(te,{color:"whiteAlpha.800",fontSize:"sm",children:R})]})]}),u.jsxs(me,{spacing:2,children:[u.jsx(kn,{label:"Refresh",children:u.jsx(wn,{"aria-label":"Refresh",icon:u.jsx(Xc,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:X,isLoading:i})}),u.jsx(kn,{label:"Export CSV",children:u.jsx(wn,{"aria-label":"Export CSV",icon:u.jsx(Om,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:K,isDisabled:!(n!=null&&n.result)})})]})]})}),u.jsx(Is,{color:"white"}),u.jsxs(ys,{p:0,children:[i&&!n&&u.jsx(Sn,{justify:"center",align:"center",py:12,children:u.jsx(Cr,{size:"xl",color:"purple.500",thickness:"3px"})}),o&&u.jsxs(go,{status:"error",m:4,borderRadius:"md",children:[u.jsx(yo,{}),u.jsxs(de,{children:[u.jsx(m_,{children:"Query Error"}),u.jsx(M0,{children:o})]})]}),(n==null?void 0:n.result)&&u.jsx(de,{overflowX:"auto",maxH:"60vh",children:u.jsxs(rg,{size:"sm",variant:"simple",bg:P,children:[u.jsx(C_,{position:"sticky",top:0,bg:O,zIndex:1,children:u.jsxs(za,{children:[u.jsx(Dc,{borderColor:D,fontSize:"xs",color:"gray.500",w:"50px",textAlign:"center",children:"#"}),n.result.columns.map((We,Fe)=>u.jsx(Dc,{borderColor:D,fontSize:"xs",textTransform:"none",letterSpacing:"normal",fontWeight:"600",color:"gray.700",_dark:{color:"gray.200"},children:We},Fe))]})}),u.jsx(lx,{children:n.result.rows.map((We,Fe)=>u.jsxs(za,{_hover:{bg:z},transition:"background 0.1s",children:[u.jsx(Qi,{borderColor:D,fontSize:"xs",color:"gray.400",textAlign:"center",fontFamily:"mono",children:h*g+Fe+1}),We.map((we,Ie)=>u.jsx(Qi,{borderColor:D,fontSize:"sm",maxW:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",title:we!==null?String(we):"",children:we===null?u.jsx(te,{color:"gray.400",fontStyle:"italic",fontSize:"xs",children:"NULL"}):typeof we=="object"?u.jsx(te,{color:"blue.500",fontSize:"xs",fontFamily:"mono",children:JSON.stringify(we)}):String(we)},Ie))]},Fe))})]})}),(n==null?void 0:n.result)&&n.result.rows.length===0&&u.jsx(Sn,{justify:"center",align:"center",py:12,children:u.jsx(te,{color:"gray.500",children:"No data found in this table"})})]}),u.jsxs(Fo,{borderTop:"1px solid",borderTopColor:D,bg:O,justifyContent:"space-between",children:[u.jsxs(me,{spacing:4,children:[u.jsxs(me,{spacing:2,children:[u.jsx(te,{fontSize:"sm",color:"gray.600",children:"Rows per page:"}),u.jsxs(Vr,{size:"sm",w:"80px",value:g,onChange:We=>{y(Number(We.target.value)),p(0)},children:[u.jsx("option",{value:25,children:"25"}),u.jsx("option",{value:50,children:"50"}),u.jsx("option",{value:100,children:"100"}),u.jsx("option",{value:250,children:"250"}),u.jsx("option",{value:500,children:"500"})]})]}),b!==null&&u.jsxs(te,{fontSize:"sm",color:"gray.600",children:[J.start,"-",J.end," of ",b.toLocaleString()," rows"]}),(n==null?void 0:n.result)&&u.jsxs(Lt,{colorScheme:"green",fontSize:"xs",children:[n.result.execution_time_ms,"ms"]})]}),u.jsxs(me,{spacing:2,children:[u.jsx(wn,{"aria-label":"Previous page",icon:u.jsx(wwe,{}),size:"sm",variant:"outline",onClick:()=>p(We=>Math.max(0,We-1)),isDisabled:h===0||i}),u.jsx(Rn,{size:"sm",w:"60px",textAlign:"center",value:h+1,onChange:We=>{const Fe=parseInt(We.target.value,10)-1;!isNaN(Fe)&&Fe>=0&&(ne===null||Fe<ne)&&p(Fe)}}),ne!==null&&u.jsxs(te,{fontSize:"sm",color:"gray.500",children:["of ",ne]}),u.jsx(wn,{"aria-label":"Next page",icon:u.jsx(JQ,{}),size:"sm",variant:"outline",onClick:()=>p(We=>We+1),isDisabled:i||ne!==null&&h>=ne-1||(n==null?void 0:n.result)&&n.result.rows.length<g}),u.jsx(vt,{variant:"ghost",onClick:e,ml:4,children:"Close"})]})]})]})}const jN=bo`
  0% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(2);
    opacity: 0.5;
  }
  100% {
    transform: scale(3);
    opacity: 0;
  }
`;function Ko({label:t,value:e,helpText:n,icon:r,colorScheme:i="blue"}){const s=Et("white","gray.700"),o=Et("gray.200","gray.600");return u.jsxs(de,{bg:s,p:4,borderRadius:"xl",borderWidth:1,borderColor:o,shadow:"sm",transition:"all 0.2s",_hover:{shadow:"md",borderColor:`${i}.300`},children:[u.jsxs(me,{spacing:3,mb:2,children:[u.jsx(de,{p:2,borderRadius:"lg",bg:`${i}.50`,color:`${i}.500`,children:u.jsx(Le,{as:r,boxSize:5})}),u.jsx(te,{fontSize:"sm",fontWeight:"medium",color:"gray.500",children:t})]}),u.jsx(te,{fontSize:"2xl",fontWeight:"bold",children:e}),n&&u.jsx(te,{fontSize:"xs",color:"gray.400",mt:1,children:n})]})}const Zze=`
  M 115 95 Q 120 80 140 75 Q 160 70 180 78 Q 200 85 210 95 Q 220 105 215 120
  Q 210 135 195 145 Q 180 155 160 160 Q 140 165 125 155 Q 110 145 105 130
  Q 100 115 115 95 Z
  M 125 170 Q 135 165 145 170 Q 155 175 160 190 Q 165 205 158 225
  Q 150 245 140 255 Q 130 265 120 260 Q 110 255 108 240 Q 105 225 110 205
  Q 115 185 125 170 Z
  M 440 70 Q 460 65 480 72 Q 500 80 510 95 Q 520 110 515 125
  Q 510 140 495 145 Q 480 150 460 145 Q 440 140 430 125 Q 420 110 425 90 Q 430 75 440 70 Z
  M 455 155 Q 475 150 495 158 Q 515 165 525 185 Q 535 205 530 230
  Q 525 255 510 270 Q 495 285 475 282 Q 455 280 445 265 Q 435 250 438 225
  Q 440 200 445 180 Q 450 160 455 155 Z
  M 550 60 Q 590 50 640 55 Q 690 60 730 80 Q 770 100 790 130
  Q 810 160 800 195 Q 790 230 760 250 Q 730 270 690 275 Q 650 280 610 270
  Q 570 260 545 235 Q 520 210 520 175 Q 520 140 530 110 Q 540 80 550 60 Z
  M 770 280 Q 790 275 810 285 Q 830 295 835 315 Q 840 335 830 350
  Q 820 365 800 368 Q 780 370 765 360 Q 750 350 752 330 Q 755 310 760 295 Q 765 285 770 280 Z
`;function Yze(t){return!t||t==="localhost"||t==="127.0.0.1"?"Local development server on this machine":t.startsWith("192.168.")||t.startsWith("10.")||t.startsWith("172.")?"Server on local network (private IP address)":t.includes("kartoza.com")?"Kartoza cloud infrastructure, Cape Town, South Africa":t.includes("digitalocean.com")||t.includes(".do.")?"DigitalOcean cloud infrastructure":t.includes("aws.")||t.includes("amazonaws.com")?"Amazon Web Services (AWS) cloud":t.includes("azure.")||t.includes("microsoft.com")?"Microsoft Azure cloud":t.includes("gcp.")||t.includes("google")?"Google Cloud Platform":t.split(".").length>=2?`Remote server at ${t}`:`Server: ${t}`}function Jze(t){return!t||t==="localhost"||t==="127.0.0.1"||t.startsWith("192.168.")||t.startsWith("10.")||t.startsWith("172.")?{x:"48%",y:"35%"}:t.includes("kartoza.com")?{x:"53%",y:"72%"}:{x:"50%",y:"45%"}}function eIe({host:t}){const e=Et("blue.50","blue.900"),n=Et("#94a3b8","#475569"),r=Et("red.500","red.400"),i=Et("red.300","red.600"),s=Et("gray.100","gray.700"),o=Et("gray.700","gray.200"),a=Jze(t),h=Yze(t);return u.jsxs(at,{spacing:3,align:"stretch",children:[u.jsxs(de,{position:"relative",bg:e,borderRadius:"xl",overflow:"hidden",h:"180px",w:"100%",children:[u.jsxs("svg",{viewBox:"0 0 900 400",style:{width:"100%",height:"100%"},preserveAspectRatio:"xMidYMid meet",children:[u.jsx("defs",{children:u.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:u.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"currentColor",strokeWidth:"0.5",opacity:"0.1"})})}),u.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),u.jsx("path",{d:Zze,fill:n,stroke:n,strokeWidth:"2",opacity:"0.6"})]}),u.jsxs(de,{position:"absolute",left:a.x,top:a.y,transform:"translate(-50%, -50%)",children:[u.jsx(de,{position:"absolute",w:"24px",h:"24px",borderRadius:"full",bg:i,animation:`${jN} 2s ease-out infinite`,transform:"translate(-50%, -50%)",left:"50%",top:"50%"}),u.jsx(de,{position:"absolute",w:"24px",h:"24px",borderRadius:"full",bg:i,animation:`${jN} 2s ease-out infinite 0.6s`,transform:"translate(-50%, -50%)",left:"50%",top:"50%"}),u.jsx(de,{w:"14px",h:"14px",borderRadius:"full",bg:r,shadow:"lg",position:"relative",zIndex:1,border:"2px solid white"})]}),u.jsx(de,{position:"absolute",bottom:3,left:3,bg:"blackAlpha.700",px:3,py:1.5,borderRadius:"lg",children:u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:I2,color:"red.300",boxSize:4}),u.jsx(te,{fontSize:"sm",color:"white",fontWeight:"semibold",children:t||"localhost"})]})})]}),u.jsx(de,{bg:s,px:4,py:2,borderRadius:"lg",children:u.jsxs(me,{spacing:2,children:[u.jsx(Le,{as:mc,color:"blue.500",boxSize:4}),u.jsx(te,{fontSize:"sm",color:o,children:h})]})})]})}function tIe(){var P;const t=St(O=>O.activeDialog),e=St(O=>O.dialogData),n=St(O=>O.closeDialog),r=t==="pgdashboard",i=e==null?void 0:e.data,[s,o]=L.useState(null),[a,h]=L.useState(!1),[p,g]=L.useState(null),y=Et("linear-gradient(90deg, #dea037 0%, #417d9b 100%)","linear-gradient(90deg, #dea037 0%, #417d9b 100%)"),b=Et("gray.50","gray.900");L.useEffect(()=>{r&&(i!=null&&i.serviceName)&&(h(!0),g(null),SH(i.serviceName).then(o).catch(O=>g(O.message)).finally(()=>h(!1)))},[r,i==null?void 0:i.serviceName]);const S=L.useMemo(()=>{if(!(s!=null&&s.version))return"Unknown";const O=s.version.match(/PostgreSQL (\d+\.\d+)/);return O?`PostgreSQL ${O[1]}`:"PostgreSQL"},[s==null?void 0:s.version]);return i!=null&&i.serviceName?u.jsxs(es,{isOpen:r,onClose:n,size:"5xl",motionPreset:"slideInBottom",children:[u.jsx(ts,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(gs,{m:4,borderRadius:"2xl",overflow:"hidden",maxH:"90vh",bg:b,children:[u.jsx(ax,{bgGradient:y,color:"white",py:6,px:6,children:u.jsxs(me,{spacing:4,children:[u.jsx(de,{p:3,bg:"whiteAlpha.200",borderRadius:"xl",children:u.jsx(Le,{as:Gh,boxSize:8})}),u.jsxs(at,{align:"start",spacing:0,children:[u.jsxs(me,{spacing:3,children:[u.jsx(te,{fontSize:"xl",fontWeight:"bold",children:i.serviceName}),s&&u.jsx(Lt,{colorScheme:"green",variant:"solid",fontSize:"xs",px:2,py:1,borderRadius:"full",children:u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:$f,boxSize:3}),u.jsx(te,{children:"Connected"})]})})]}),s&&u.jsxs(me,{spacing:3,opacity:.9,mt:1,children:[u.jsx(te,{fontSize:"sm",children:s.database_name}),u.jsx(te,{fontSize:"sm",children:"|"}),u.jsx(te,{fontSize:"sm",children:S}),s.has_postgis&&u.jsxs(u.Fragment,{children:[u.jsx(te,{fontSize:"sm",children:"|"}),u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:Os,boxSize:4}),u.jsx(te,{fontSize:"sm",children:"PostGIS"})]})]})]})]})]})}),u.jsx(Is,{color:"white"}),u.jsx(ys,{p:6,overflowY:"auto",maxH:"calc(90vh - 100px)",children:a?u.jsx(Jl,{h:"300px",children:u.jsxs(at,{spacing:4,children:[u.jsx(Cr,{size:"xl",color:"blue.500",thickness:"4px"}),u.jsx(te,{color:"gray.500",children:"Loading server statistics..."})]})}):p?u.jsx(Jl,{h:"300px",children:u.jsxs(at,{spacing:4,children:[u.jsx(Le,{as:Tf,boxSize:12,color:"red.500"}),u.jsx(te,{color:"red.500",fontWeight:"medium",children:p})]})}):s&&u.jsxs(at,{spacing:6,align:"stretch",children:[u.jsx(eIe,{host:s.host}),u.jsxs(de,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:M2,color:"purple.500"}),u.jsx(te,{fontWeight:"semibold",fontSize:"lg",children:"Connections"})]}),u.jsxs(Gn,{columns:{base:2,md:4},spacing:4,children:[u.jsx(Ko,{label:"Current",value:s.current_connections,helpText:`of ${s.max_connections} max`,icon:M2,colorScheme:"purple"}),u.jsx(Ko,{label:"Active",value:s.active_connections,helpText:"executing queries",icon:j_,colorScheme:"green"}),u.jsx(Ko,{label:"Idle",value:s.idle_connections,helpText:"waiting for work",icon:gT,colorScheme:"blue"}),u.jsx(Ko,{label:"Waiting",value:s.waiting_connections,helpText:"blocked on locks",icon:qu,colorScheme:"orange"})]}),u.jsxs(de,{mt:4,children:[u.jsxs(me,{justify:"space-between",mb:2,children:[u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Connection Pool Usage"}),u.jsxs(te,{fontSize:"sm",fontWeight:"bold",children:[s.connection_percent,"%"]})]}),u.jsx(tp,{value:s.connection_percent,colorScheme:s.connection_percent>80?"red":s.connection_percent>60?"orange":"green",borderRadius:"full",size:"lg"})]})]}),u.jsx(Hn,{}),u.jsxs(de,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:Yr,color:"blue.500"}),u.jsx(te,{fontWeight:"semibold",fontSize:"lg",children:"Database"})]}),u.jsxs(Gn,{columns:{base:2,md:4},spacing:4,children:[u.jsx(Ko,{label:"Size",value:s.database_size,icon:e0,colorScheme:"blue"}),u.jsx(Ko,{label:"Cache Hit Ratio",value:s.cache_hit_ratio,helpText:"higher is better",icon:qu,colorScheme:"green"}),u.jsx(Ko,{label:"Live Tuples",value:s.live_tuples.toLocaleString(),icon:Ks,colorScheme:"purple"}),u.jsx(Ko,{label:"Dead Tuples",value:s.dead_tuples.toLocaleString(),helpText:"needs vacuum",icon:Tf,colorScheme:s.dead_tuples>1e4?"red":"gray"})]})]}),u.jsx(Hn,{}),u.jsxs(de,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:mi,color:"teal.500"}),u.jsx(te,{fontWeight:"semibold",fontSize:"lg",children:"Objects"})]}),u.jsxs(Gn,{columns:{base:3,md:5},spacing:4,children:[u.jsx(Ko,{label:"Schemas",value:s.schema_count,icon:mi,colorScheme:"teal"}),u.jsx(Ko,{label:"Tables",value:s.table_count,icon:Ks,colorScheme:"blue"}),u.jsx(Ko,{label:"Views",value:s.view_count,icon:Pi,colorScheme:"purple"}),u.jsx(Ko,{label:"Indexes",value:s.index_count,icon:qu,colorScheme:"orange"}),u.jsx(Ko,{label:"Functions",value:s.function_count,icon:Da,colorScheme:"pink"})]})]}),s.has_postgis&&u.jsxs(u.Fragment,{children:[u.jsx(Hn,{}),u.jsxs(de,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:Os,color:"green.500"}),u.jsx(te,{fontWeight:"semibold",fontSize:"lg",children:"PostGIS"})]}),u.jsxs(Gn,{columns:{base:2,md:3},spacing:4,children:[u.jsx(Ko,{label:"Geometry Columns",value:s.geometry_columns||0,icon:Os,colorScheme:"green"}),u.jsx(Ko,{label:"Raster Columns",value:s.raster_columns||0,icon:mi,colorScheme:"blue"})]}),s.postgis_version&&u.jsx(de,{mt:4,p:3,bg:"green.50",borderRadius:"lg",children:u.jsx(te,{fontSize:"xs",color:"green.700",fontFamily:"mono",noOfLines:2,children:s.postgis_version})})]})]}),u.jsx(Hn,{}),u.jsxs(de,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:mc,color:"gray.500"}),u.jsx(te,{fontWeight:"semibold",fontSize:"lg",children:"Server Info"})]}),u.jsxs(Gn,{columns:{base:1,md:2},spacing:4,children:[u.jsxs(ds,{children:[u.jsx(fs,{children:"Uptime"}),u.jsx(ps,{fontSize:"lg",children:s.uptime||"N/A"}),u.jsxs(kf,{children:["Since ",(P=s.server_start_time)==null?void 0:P.split(" ")[0]]})]}),u.jsxs(ds,{children:[u.jsx(fs,{children:"Transactions"}),u.jsx(ps,{fontSize:"lg",children:s.xact_commit.toLocaleString()}),u.jsxs(kf,{children:[s.xact_rollback.toLocaleString()," rollbacks"]})]})]}),u.jsx(de,{mt:4,p:3,bg:"gray.100",borderRadius:"lg",_dark:{bg:"gray.700"},children:u.jsx(te,{fontSize:"xs",color:"gray.600",fontFamily:"mono",noOfLines:2,_dark:{color:"gray.300"},children:s.version})})]}),s.installed_extensions&&s.installed_extensions.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Hn,{}),u.jsxs(de,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:Da,color:"indigo.500"}),u.jsx(te,{fontWeight:"semibold",fontSize:"lg",children:"Extensions"})]}),u.jsx($0,{spacing:2,children:s.installed_extensions.map(O=>u.jsx(Wm,{children:u.jsx(kn,{label:O,fontSize:"xs",children:u.jsx(Vm,{size:"md",colorScheme:O==="postgis"?"green":O==="plpgsql"?"blue":"gray",borderRadius:"full",children:O})})},O))})]})]})]})})]})]}):null}function nIe(){var tn,kt;const t=St(it=>it.activeDialog),e=St(it=>it.dialogData),n=St(it=>it.closeDialog),r=da(),i=ha(),[s,o]=L.useState([]),[a,h]=L.useState(!1),[p,g]=L.useState(!1),[y,b]=L.useState([]),[S,P]=L.useState(!1),[O,D]=L.useState(!1),[z,F]=L.useState(!1),[R,N]=L.useState("public"),[Q,q]=L.useState(!1),[X,K]=L.useState(void 0),[ne,J]=L.useState(null),ae=L.useRef(null),Ee=Et("gray.50","gray.700"),Ce=Et("gray.300","gray.600"),$e=t==="pgupload",We=(tn=e==null?void 0:e.data)==null?void 0:tn.serviceName,Fe=(kt=e==null?void 0:e.data)==null?void 0:kt.schemaName;L.useEffect(()=>{$e&&(ake().then(J).catch(console.error),o([]),g(!1),b([]),F(!1),N(Fe||"public"),q(!1),K(void 0))},[$e,Fe]);const we=it=>{const ze=it.toLowerCase().split(".").pop()||"";return[".tif",".tiff",".img",".jp2",".ecw",".sid",".asc",".dem",".hgt",".nc",".vrt"].some(ut=>ut.slice(1)===ze)},Ie=L.useCallback(it=>{it.preventDefault();const ze=Array.from(it.dataTransfer.files);se(ze)},[]),Qe=it=>{if(it.target.files){const ze=Array.from(it.target.files);se(ze)}},se=it=>{if(!ne){i({title:"Import tools not available",description:"Please ensure ogr2ogr and raster2pgsql are installed",status:"warning",duration:3e3});return}const ze=Object.keys(ne.supported_extensions),ut=it.filter(qt=>{const Ct="."+qt.name.toLowerCase().split(".").pop();return ze.includes(Ct)});ut.length<it.length&&i({title:"Some files skipped",description:"Only supported geospatial formats are accepted",status:"warning",duration:3e3}),o(qt=>[...qt,...ut.map(Ct=>({file:Ct,progress:0,status:"pending",isRaster:we(Ct.name)}))]),g(!1),b([])},Re=it=>{o(ze=>ze.filter((ut,qt)=>qt!==it))},Oe=async()=>{if(!We){i({title:"No service selected",description:"Please select a PostgreSQL service first",status:"warning",duration:3e3});return}if(s.length===0){i({title:"No files selected",description:"Please select files to upload",status:"warning",duration:3e3});return}h(!0);for(let ze=0;ze<s.length;ze++)if(s[ze].status==="pending"){o(ut=>ut.map((qt,Ct)=>Ct===ze?{...qt,status:"uploading"}:qt));try{const ut=await lke(s[ze].file,qt=>{o(Ct=>Ct.map(($t,Yn)=>Yn===ze?{...$t,progress:qt}:$t))});if(o(qt=>qt.map((Ct,$t)=>$t===ze?{...Ct,status:"uploaded",progress:100,filePath:ut.file_path}:Ct)),!s[ze].isRaster){P(!0);try{const qt=await cke(ut.file_path);if(o(Ct=>Ct.map(($t,Yn)=>Yn===ze?{...$t,layers:qt}:$t)),qt.length>0){const Ct=qt.map($t=>({name:$t.name,selected:!0,tableName:$t.name.toLowerCase().replace(/[^a-z0-9_]/g,"_")}));b($t=>[...$t,...Ct])}else{const Ct=s[ze].file.name.replace(/\.[^/.]+$/,""),$t=Ct.toLowerCase().replace(/[^a-z0-9_]/g,"_");b(Yn=>[...Yn,{name:Ct,selected:!0,tableName:$t}])}}catch(qt){console.error("Failed to detect layers:",qt);const Ct=s[ze].file.name.replace(/\.[^/.]+$/,""),$t=Ct.toLowerCase().replace(/[^a-z0-9_]/g,"_");b(Yn=>[...Yn,{name:Ct,selected:!0,tableName:$t}])}finally{P(!1)}}}catch(ut){o(qt=>qt.map((Ct,$t)=>$t===ze?{...Ct,status:"error",error:ut.message}:Ct))}}h(!1),g(!0);const it=s.filter(ze=>ze.status==="uploaded").length;it>0&&i({title:"Files uploaded",description:`${it} file(s) ready for import`,status:"success",duration:3e3})},oe=async()=>{if(!We)return;D(!0);const it=[];for(const ut of s)if(!(ut.status!=="uploaded"||!ut.filePath)){o(qt=>qt.map(Ct=>Ct.filePath===ut.filePath?{...Ct,status:"importing"}:Ct));try{if(ut.isRaster){const qt=await hke({source_file:ut.filePath,target_service:We,target_schema:R,overwrite:Q,create_index:!0});it.push(qt.job_id),o(Ct=>Ct.map($t=>$t.filePath===ut.filePath?{...$t,jobId:qt.job_id}:$t))}else{const qt=y.filter(Ct=>{var $t;return Ct.selected&&(($t=ut.layers)==null?void 0:$t.some(Yn=>Yn.name===Ct.name))});for(const Ct of qt){const $t=await uke({source_file:ut.filePath,target_service:We,target_schema:R,table_name:Ct.tableName,source_layer:Ct.name,overwrite:Q,target_srid:X});it.push($t.job_id)}}o(qt=>qt.map(Ct=>Ct.filePath===ut.filePath?{...Ct,status:"success"}:Ct))}catch(qt){o(Ct=>Ct.map($t=>$t.filePath===ut.filePath?{...$t,status:"error",error:qt.message}:$t))}}D(!1),it.length>0&&nt(it),r.invalidateQueries({queryKey:["pgschemas",We]});const ze=s.filter(ut=>ut.status==="success").length;ze>0&&i({title:"Import started",description:`${ze} file(s) queued for import`,status:"success",duration:3e3})},nt=async it=>{const ze=new Set(it);for(;ze.size>0;){await new Promise(ut=>setTimeout(ut,2e3));for(const ut of Array.from(ze))try{const qt=await dke(ut);(qt.status==="completed"||qt.status==="failed")&&(ze.delete(ut),qt.status==="completed"?i({title:"Import completed",description:`Table ${qt.target_table} created successfully`,status:"success",duration:3e3}):i({title:"Import failed",description:qt.error||"Unknown error",status:"error",duration:5e3}))}catch{ze.delete(ut)}}r.invalidateQueries({queryKey:["pgschemas",We]})},Ne=it=>{b(ze=>ze.map(ut=>ut.name===it?{...ut,selected:!ut.selected}:ut))},tt=(it,ze)=>{b(ut=>ut.map(qt=>qt.name===it?{...qt,tableName:ze}:qt))},Ye=()=>{o([]),g(!1),b([]),n()},_t=it=>{if(it.isRaster)return Qc;switch(it.status){case"success":return hR;case"error":return Wf;default:return tH}},At=it=>{switch(it){case"success":return"green.500";case"error":return"red.500";case"importing":return"blue.500";default:return"gray.500"}},Ot=s.some(it=>it.status==="pending"),bt=s.some(it=>it.status==="uploaded"),rt=y.filter(it=>it.selected).length;return ne!=null&&ne.available?u.jsxs(es,{isOpen:$e,onClose:Ye,size:"xl",isCentered:!0,children:[u.jsx(ts,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(gs,{borderRadius:"xl",overflow:"hidden",maxH:"85vh",children:[u.jsx(de,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",px:6,py:4,children:u.jsxs(me,{spacing:3,children:[u.jsx(de,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(Le,{as:Yr,boxSize:5,color:"white"})}),u.jsxs(de,{flex:"1",children:[u.jsx(te,{color:"white",fontWeight:"600",fontSize:"lg",children:"Import Data to PostgreSQL"}),u.jsxs(me,{spacing:2,children:[u.jsx(te,{color:"whiteAlpha.800",fontSize:"sm",children:"Target:"}),We?u.jsx(Lt,{bg:"whiteAlpha.200",color:"white",fontSize:"xs",children:We}):u.jsx(te,{color:"whiteAlpha.600",fontSize:"sm",fontStyle:"italic",children:"No service selected"})]})]})]})}),u.jsx(Is,{color:"white"}),u.jsx(ys,{py:6,overflowY:"auto",children:u.jsxs(at,{spacing:4,children:[!p&&u.jsxs(de,{w:"100%",p:8,bg:Ee,border:"2px dashed",borderColor:Ce,borderRadius:"xl",textAlign:"center",cursor:"pointer",onClick:()=>{var it;return(it=ae.current)==null?void 0:it.click()},onDrop:Ie,onDragOver:it=>it.preventDefault(),_hover:{borderColor:"purple.500",bg:"purple.50"},transition:"all 0.2s",children:[u.jsxs(at,{spacing:3,children:[u.jsx(de,{bg:"purple.50",p:4,borderRadius:"full",children:u.jsx(Le,{as:Ib,boxSize:10,color:"purple.500"})}),u.jsxs(at,{spacing:1,children:[u.jsx(te,{fontWeight:"600",color:"gray.700",children:"Drop files here or click to browse"}),u.jsx(te,{fontSize:"sm",color:"gray.500",children:"GeoPackage, Shapefile, GeoJSON, GeoTIFF, and more"})]})]}),u.jsx("input",{ref:ae,type:"file",multiple:!0,accept:".gpkg,.shp,.zip,.geojson,.json,.kml,.tif,.tiff,.gml",style:{display:"none"},onChange:Qe})]}),s.length>0&&u.jsx(x_,{spacing:2,w:"100%",children:s.map((it,ze)=>u.jsx(G5,{p:3,bg:Ee,borderRadius:"lg",border:"1px solid",borderColor:it.status==="success"?"green.200":it.status==="error"?"red.200":"gray.200",children:u.jsxs(at,{align:"stretch",spacing:2,children:[u.jsxs(de,{display:"flex",alignItems:"center",gap:2,children:[u.jsx(X5,{as:_t(it),color:At(it.status),boxSize:5}),u.jsx(te,{flex:"1",fontSize:"sm",noOfLines:1,fontWeight:"500",children:it.file.name}),it.isRaster&&u.jsx(Lt,{colorScheme:"purple",size:"sm",children:"Raster"}),it.status==="pending"&&u.jsx(vt,{size:"xs",variant:"ghost",colorScheme:"red",onClick:()=>Re(ze),borderRadius:"md",children:"Remove"}),it.status==="success"&&u.jsx(Lt,{colorScheme:"green",borderRadius:"md",children:"Imported"}),it.status==="importing"&&u.jsxs(me,{children:[u.jsx(Cr,{size:"xs"}),u.jsx(Lt,{colorScheme:"blue",borderRadius:"md",children:"Importing"})]})]}),(it.status==="uploading"||it.status==="importing")&&u.jsx(tp,{value:it.status==="importing"?void 0:it.progress,isIndeterminate:it.status==="importing",size:"sm",colorScheme:"purple",borderRadius:"full"}),it.status==="error"&&u.jsx(te,{fontSize:"xs",color:"red.500",children:it.error})]})},ze))}),p&&y.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Hn,{}),u.jsxs(de,{w:"100%",children:[u.jsxs(me,{justify:"space-between",mb:3,children:[u.jsxs(me,{children:[u.jsx(Le,{as:mi,color:"purple.500"}),u.jsx(te,{fontWeight:"600",children:"Layers to Import"})]}),u.jsxs(me,{spacing:2,children:[u.jsx(vt,{size:"xs",variant:"outline",colorScheme:"purple",onClick:()=>{b(it=>it.map(ze=>({...ze,selected:!0})))},isDisabled:y.every(it=>it.selected),children:"Select All"}),u.jsx(vt,{size:"xs",variant:"outline",onClick:()=>{b(it=>it.map(ze=>({...ze,selected:!1})))},isDisabled:y.every(it=>!it.selected),children:"Deselect All"}),u.jsxs(Lt,{colorScheme:"purple",children:[rt," selected"]})]})]}),u.jsxs(te,{fontSize:"sm",color:"gray.500",mb:3,children:["All ",y.length," layer(s) detected in the file. Adjust table names if needed:"]}),u.jsx(at,{align:"stretch",spacing:2,maxH:"200px",overflowY:"auto",children:y.map(it=>u.jsx(de,{p:2,bg:Ee,borderRadius:"md",border:"1px solid",borderColor:it.selected?"purple.200":"gray.200",children:u.jsxs(me,{spacing:3,children:[u.jsx(dl,{isChecked:it.selected,onChange:()=>Ne(it.name),colorScheme:"purple"}),u.jsxs(at,{align:"stretch",flex:"1",spacing:1,children:[u.jsx(te,{fontSize:"sm",fontWeight:"500",children:it.name}),u.jsx(Rn,{size:"xs",value:it.tableName,onChange:ze=>tt(it.name,ze.target.value),placeholder:"Table name",isDisabled:!it.selected})]})]})},it.name))})]})]}),p&&bt&&u.jsxs(u.Fragment,{children:[u.jsx(Hn,{}),u.jsxs(de,{w:"100%",children:[u.jsx(vt,{variant:"ghost",size:"sm",leftIcon:z?u.jsx(N0,{}):u.jsx(fc,{}),rightIcon:u.jsx(O_,{}),onClick:()=>F(!z),w:"100%",justifyContent:"space-between",children:"Advanced Options"}),u.jsx(qc,{in:z,children:u.jsxs(at,{spacing:4,mt:3,align:"stretch",p:3,bg:Ee,borderRadius:"md",children:[u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",children:"Target Schema"}),u.jsx(Rn,{size:"sm",value:R,onChange:it=>N(it.target.value),placeholder:"public"})]}),u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",children:"Target SRID (leave empty to keep source)"}),u.jsx(Rn,{size:"sm",type:"number",value:X||"",onChange:it=>K(it.target.value?parseInt(it.target.value):void 0),placeholder:"e.g. 4326"})]}),u.jsxs(It,{display:"flex",alignItems:"center",children:[u.jsx(Mt,{fontSize:"sm",mb:"0",children:"Overwrite existing tables"}),u.jsx(ja,{colorScheme:"purple",isChecked:Q,onChange:it=>q(it.target.checked)})]})]})})]})]}),S&&u.jsxs(me,{spacing:2,color:"gray.500",children:[u.jsx(Cr,{size:"sm"}),u.jsx(te,{fontSize:"sm",children:"Detecting layers..."})]})]})}),u.jsxs(Fo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:[u.jsx(vt,{variant:"ghost",onClick:Ye,borderRadius:"lg",children:p?"Close":"Cancel"}),p&&bt&&u.jsx(vt,{colorScheme:"green",onClick:oe,isLoading:O,loadingText:"Importing...",isDisabled:rt===0&&!s.some(it=>it.isRaster&&it.status==="uploaded"),leftIcon:u.jsx(Yr,{}),borderRadius:"lg",px:6,children:"Import to PostgreSQL"}),(!p||Ot)&&u.jsxs(vt,{colorScheme:"purple",onClick:Oe,isLoading:a,loadingText:"Uploading...",isDisabled:s.length===0||!We||!Ot,leftIcon:u.jsx(Ib,{}),borderRadius:"lg",px:6,children:["Upload ",s.filter(it=>it.status==="pending").length>0&&`(${s.filter(it=>it.status==="pending").length})`]})]})]})]}):u.jsxs(es,{isOpen:$e,onClose:Ye,size:"lg",isCentered:!0,children:[u.jsx(ts,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(gs,{borderRadius:"xl",overflow:"hidden",children:[u.jsx(de,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",px:6,py:4,children:u.jsxs(me,{spacing:3,children:[u.jsx(de,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(Le,{as:Yr,boxSize:5,color:"white"})}),u.jsx(te,{color:"white",fontWeight:"600",fontSize:"lg",children:"Import Data to PostgreSQL"})]})}),u.jsx(Is,{color:"white"}),u.jsx(ys,{py:6,children:u.jsxs(at,{spacing:4,align:"center",children:[u.jsx(Le,{as:Wf,boxSize:12,color:"red.500"}),u.jsx(te,{fontWeight:"600",fontSize:"lg",children:"Import Tools Not Available"}),u.jsx(te,{color:"gray.500",textAlign:"center",children:"ogr2ogr and raster2pgsql are required for data import. Please install GDAL and PostGIS on the server."})]})}),u.jsx(Fo,{children:u.jsx(vt,{onClick:Ye,children:"Close"})})]})]})}const PN=bo`
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.3); opacity: 0.6; }
  100% { transform: scale(1.6); opacity: 0; }
`,rIe=bo`
  0% { transform: scale(1.6); opacity: 0; }
  50% { transform: scale(1.3); opacity: 0.6; }
  100% { transform: scale(1); opacity: 1; }
`,YO=bo`
  0% { transform: translateX(-10px); opacity: 0; }
  50% { opacity: 1; }
  100% { transform: translateX(10px); opacity: 0; }
`,iIe=bo`
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
`,sIe=bo`
  0%, 100% { box-shadow: 0 0 5px rgba(56, 178, 172, 0.3); }
  50% { box-shadow: 0 0 20px rgba(56, 178, 172, 0.6); }
`;function oIe({connection:t,isSelected:e,onSelect:n,isHovered:r,onHover:i}){return u.jsxs(de,{position:"relative",p:4,bg:e?"green.50":"gray.50",borderRadius:"lg",border:"2px solid",borderColor:e?"green.400":r?"green.300":"gray.200",cursor:"pointer",transition:"all 0.3s ease",onClick:n,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),_hover:{borderColor:"green.300",bg:"green.50"},children:[(r||e)&&u.jsxs(u.Fragment,{children:[u.jsx(de,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",w:"60px",h:"60px",borderRadius:"full",border:"2px solid",borderColor:"green.300",css:Nc`animation: ${PN} 1.5s ease-out infinite;`}),u.jsx(de,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",w:"60px",h:"60px",borderRadius:"full",border:"2px solid",borderColor:"green.300",css:Nc`animation: ${PN} 1.5s ease-out infinite 0.5s;`})]}),u.jsxs(at,{spacing:2,position:"relative",zIndex:1,children:[u.jsxs(de,{position:"relative",children:[u.jsx(Le,{as:mc,w:10,h:10,color:e?"green.500":"gray.400"}),e&&u.jsx(Le,{as:$f,position:"absolute",bottom:-1,right:-1,w:4,h:4,color:"green.500",bg:"white",borderRadius:"full"})]}),u.jsx(te,{fontWeight:"bold",fontSize:"sm",textAlign:"center",noOfLines:1,children:(t==null?void 0:t.name)||"No server"}),u.jsx(Lt,{colorScheme:"green",fontSize:"xs",children:"SOURCE"})]})]})}function aIe({connection:t,isRunning:e,task:n,onRemove:r,onStop:i}){const s=(n==null?void 0:n.progress)||0;return u.jsxs(de,{position:"relative",p:4,bg:e?"blue.50":(n==null?void 0:n.status)==="completed"?"green.50":(n==null?void 0:n.status)==="failed"?"red.50":"gray.50",borderRadius:"lg",border:"2px solid",borderColor:e?"blue.400":(n==null?void 0:n.status)==="completed"?"green.400":(n==null?void 0:n.status)==="failed"?"red.400":"gray.200",transition:"all 0.3s ease",css:e?Nc`animation: ${sIe} 2s ease-in-out infinite;`:void 0,children:[e&&u.jsx(de,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",w:"60px",h:"60px",borderRadius:"full",border:"2px solid",borderColor:"blue.300",css:Nc`animation: ${rIe} 1.5s ease-in infinite;`}),u.jsxs(at,{spacing:2,position:"relative",zIndex:1,children:[u.jsxs(de,{position:"relative",children:[u.jsx(Le,{as:Yr,w:10,h:10,color:e?"blue.500":(n==null?void 0:n.status)==="completed"?"green.500":(n==null?void 0:n.status)==="failed"?"red.500":"gray.400",css:e?Nc`animation: ${iIe} 2s linear infinite;`:void 0}),(n==null?void 0:n.status)==="completed"&&u.jsx(Le,{as:$f,position:"absolute",bottom:-1,right:-1,w:4,h:4,color:"green.500",bg:"white",borderRadius:"full"}),(n==null?void 0:n.status)==="failed"&&u.jsx(Le,{as:yT,position:"absolute",bottom:-1,right:-1,w:4,h:4,color:"red.500",bg:"white",borderRadius:"full"})]}),u.jsx(te,{fontWeight:"bold",fontSize:"sm",textAlign:"center",noOfLines:1,children:t.name}),u.jsx(Lt,{colorScheme:"blue",fontSize:"xs",children:"DESTINATION"}),(e||n)&&u.jsxs(de,{w:"100%",mt:2,children:[u.jsx(tp,{value:s,size:"sm",colorScheme:(n==null?void 0:n.status)==="failed"?"red":(n==null?void 0:n.status)==="completed"?"green":"blue",borderRadius:"full",hasStripe:e,isAnimated:e}),u.jsx(te,{fontSize:"xs",color:"gray.500",textAlign:"center",mt:1,children:(n==null?void 0:n.currentItem)||`${s}%`})]}),u.jsx(me,{spacing:1,mt:2,children:e?u.jsx(kn,{label:"Stop sync",children:u.jsx(wn,{"aria-label":"Stop sync",icon:u.jsx(rH,{}),size:"xs",colorScheme:"red",variant:"ghost",onClick:o=>{o.stopPropagation(),i()}})}):u.jsx(kn,{label:"Remove",children:u.jsx(wn,{"aria-label":"Remove destination",icon:u.jsx(jf,{}),size:"xs",colorScheme:"red",variant:"ghost",onClick:o=>{o.stopPropagation(),r()}})})})]})]})}function lIe({isActive:t}){return u.jsxs(de,{position:"relative",minW:"80px",display:"flex",alignItems:"center",justifyContent:"center",children:[u.jsx(de,{h:"2px",flex:1,bg:t?"blue.400":"gray.300",transition:"background 0.3s ease"}),t&&u.jsxs(u.Fragment,{children:[u.jsx(Le,{as:sb,position:"absolute",color:"blue.500",css:Nc`animation: ${YO} 1s ease-in-out infinite;`}),u.jsx(Le,{as:sb,position:"absolute",color:"blue.500",css:Nc`animation: ${YO} 1s ease-in-out infinite 0.33s;`}),u.jsx(Le,{as:sb,position:"absolute",color:"blue.500",css:Nc`animation: ${YO} 1s ease-in-out infinite 0.66s;`})]}),!t&&u.jsx(Le,{as:sb,position:"absolute",color:"gray.400"})]})}function cIe({options:t,onChange:e}){const{isOpen:n,onToggle:r}=Lm({defaultIsOpen:!0}),i=s=>{e({...t,[s]:!t[s]})};return u.jsxs(de,{bg:"gray.50",borderRadius:"md",p:3,children:[u.jsxs(Sn,{justify:"space-between",align:"center",cursor:"pointer",onClick:r,children:[u.jsxs(me,{children:[u.jsx(Le,{as:Mwe,color:"kartoza.500"}),u.jsx(te,{fontWeight:"bold",fontSize:"sm",children:"Sync Options"})]}),u.jsx(Le,{as:n?N0:fc})]}),u.jsx(qc,{in:n,children:u.jsxs(Gn,{columns:3,gap:3,mt:3,children:[u.jsx(dl,{isChecked:t.workspaces,onChange:()=>i("workspaces"),colorScheme:"kartoza",children:u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:Uu,color:"yellow.500",boxSize:3}),u.jsx(te,{fontSize:"sm",children:"Workspaces"})]})}),u.jsx(dl,{isChecked:t.datastores,onChange:()=>i("datastores"),colorScheme:"kartoza",children:u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:Yr,color:"blue.500",boxSize:3}),u.jsx(te,{fontSize:"sm",children:"Data Stores"})]})}),u.jsx(dl,{isChecked:t.coveragestores,onChange:()=>i("coveragestores"),colorScheme:"kartoza",children:u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:Qc,color:"green.500",boxSize:3}),u.jsx(te,{fontSize:"sm",children:"Coverage Stores"})]})}),u.jsx(dl,{isChecked:t.layers,onChange:()=>i("layers"),colorScheme:"kartoza",children:u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:mi,color:"purple.500",boxSize:3}),u.jsx(te,{fontSize:"sm",children:"Layers"})]})}),u.jsx(dl,{isChecked:t.styles,onChange:()=>i("styles"),colorScheme:"kartoza",children:u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:pc,color:"pink.500",boxSize:3}),u.jsx(te,{fontSize:"sm",children:"Styles"})]})}),u.jsx(dl,{isChecked:t.layergroups,onChange:()=>i("layergroups"),colorScheme:"kartoza",children:u.jsxs(me,{spacing:1,children:[u.jsx(Le,{as:Vf,color:"orange.500",boxSize:3}),u.jsx(te,{fontSize:"sm",children:"Layer Groups"})]})})]})})]})}function uIe({tasks:t}){const e=L.useRef(null),{isOpen:n,onToggle:r}=Lm({defaultIsOpen:!1}),i=t.flatMap(o=>o.log||[]);L.useEffect(()=>{e.current&&(e.current.scrollTop=e.current.scrollHeight)},[i.length]);const s=o=>{o.stopPropagation(),t.forEach(a=>{a.id&&tke(a.id)})};return t.length===0?null:u.jsxs(de,{bg:"gray.900",borderRadius:"md",overflow:"hidden",children:[u.jsxs(Sn,{justify:"space-between",align:"center",p:2,bg:"gray.800",cursor:"pointer",onClick:r,children:[u.jsxs(me,{children:[u.jsx(Le,{as:j_,color:"green.400"}),u.jsx(te,{fontWeight:"bold",fontSize:"sm",color:"white",children:"Activity Log"}),u.jsxs(Lt,{colorScheme:"green",fontSize:"xs",children:[i.length," entries"]})]}),u.jsxs(me,{children:[i.length>0&&u.jsx(kn,{label:"Download Logs",fontSize:"xs",children:u.jsx(wn,{"aria-label":"Download logs",icon:u.jsx(Om,{size:14}),size:"xs",variant:"ghost",colorScheme:"green",onClick:s})}),u.jsx(Le,{as:n?N0:fc,color:"white"})]})]}),u.jsx(qc,{in:n,children:u.jsxs(de,{ref:e,maxH:"150px",overflowY:"auto",p:2,fontFamily:"mono",fontSize:"xs",css:{"&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{background:"gray.600",borderRadius:"3px"}},children:[i.map((o,a)=>u.jsx(te,{color:"green.300",mb:.5,children:o},a)),i.length===0&&u.jsx(te,{color:"gray.500",children:"Waiting for activity..."})]})})]})}function hIe(){const t=ha(),e=St(se=>se.activeDialog),n=St(se=>se.closeDialog),r=uo(se=>se.connections),i=e==="sync",[s,o]=L.useState(null),[a,h]=L.useState([]),[p,g]=L.useState({workspaces:!0,datastores:!0,coveragestores:!0,layers:!0,styles:!0,layergroups:!0}),[y,b]=L.useState(!1),[S,P]=L.useState(""),[O,D]=L.useState(null),{data:z=[],refetch:F}=er({queryKey:["syncConfigs"],queryFn:qSe,enabled:i}),{data:R=[],refetch:N}=er({queryKey:["syncStatus"],queryFn:XSe,enabled:i,refetchInterval:1e3}),Q=R.some(se=>se.status==="running"),q=Au({mutationFn:se=>GSe(se),onSuccess:()=>{t({title:"Sync started",description:"Synchronization has been initiated.",status:"success",duration:3e3}),N()},onError:se=>{t({title:"Failed to start sync",description:se.message,status:"error",duration:5e3})}}),X=Au({mutationFn:se=>KSe(se),onSuccess:()=>{t({title:"Sync stopped",status:"info",duration:2e3}),N()}}),K=Au({mutationFn:ZSe,onSuccess:()=>{t({title:"All syncs stopped",status:"info",duration:2e3}),N()}}),ne=Au({mutationFn:se=>QSe(se),onSuccess:()=>{t({title:"Configuration saved",status:"success",duration:2e3}),F(),P("")},onError:se=>{t({title:"Failed to save configuration",description:se.message,status:"error",duration:5e3})}}),J=Au({mutationFn:se=>HSe(se),onSuccess:()=>{t({title:"Configuration deleted",status:"info",duration:2e3}),F(),D(null)}}),ae=()=>{if(!s||a.length===0){t({title:"Configuration incomplete",description:"Please select a source and at least one destination.",status:"warning",duration:3e3});return}q.mutate({sourceId:s,destinationIds:a,options:p})},Ee=()=>{if(!S||!s||a.length===0){t({title:"Cannot save",description:"Please provide a name and complete the sync configuration.",status:"warning",duration:3e3});return}ne.mutate({name:S,source_id:s,destination_ids:a,options:p})},Ce=se=>{console.log("Loading sync config:",se),console.log("Available connections:",r.map(tt=>({id:tt.id,name:tt.name})));const Re=se.source_id&&se.source_id.trim()!==""?se.source_id:null;o(Re);const Oe=(se.destination_ids||[]).filter(tt=>tt&&tt.trim()!=="");h(Oe),g({...{workspaces:!0,datastores:!0,coveragestores:!0,layers:!0,styles:!0,layergroups:!0},...se.options||{}}),D(se.id),P(se.name);const nt=Re?r.find(tt=>tt.id===Re):null,Ne=Oe.filter(tt=>!r.find(Ye=>Ye.id===tt));Re&&!nt&&t({title:"Source connection not found",description:`The saved source connection (${Re}) may have been deleted.`,status:"warning",duration:5e3}),Ne.length>0&&t({title:"Some destination connections not found",description:`${Ne.length} destination(s) may have been deleted.`,status:"warning",duration:5e3})},$e=se=>{if(se===s){t({title:"Invalid selection",description:"Cannot sync to the same server.",status:"warning",duration:2e3});return}a.includes(se)||h([...a,se])},We=se=>{h(a.filter(Re=>Re!==se))},Fe=se=>r.find(Re=>Re.id===se),we=s?Fe(s):null,Ie=r.filter(se=>se.id!==s&&!a.includes(se.id)),Qe=se=>R.find(Re=>Re.destId===se&&Re.sourceId===s);return u.jsxs(es,{isOpen:i,onClose:n,size:"6xl",scrollBehavior:"inside",children:[u.jsx(ts,{backdropFilter:"blur(4px)"}),u.jsxs(gs,{maxH:"90vh",children:[u.jsxs(ax,{bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",borderTopRadius:"md",children:[u.jsxs(me,{children:[u.jsx(Le,{as:Xc}),u.jsx(te,{children:"Sync Servers"})]}),u.jsx(te,{fontSize:"sm",fontWeight:"normal",opacity:.9,children:"Replicate resources between GeoServer instances"})]}),u.jsx(Is,{color:"white"}),u.jsx(ys,{py:6,children:u.jsxs(at,{spacing:6,align:"stretch",children:[z.length>0&&u.jsx(de,{children:u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",fontWeight:"bold",children:u.jsxs(me,{children:[u.jsx(Le,{as:Pk}),u.jsx(te,{children:"Saved Configurations"})]})}),u.jsxs(me,{children:[u.jsx(Vr,{placeholder:"Select a saved configuration...",value:O||"",onChange:se=>{const Re=z.find(Oe=>Oe.id===se.target.value);Re&&Ce(Re)},size:"sm",children:z.map(se=>u.jsxs("option",{value:se.id,children:[se.name," (Last sync: ",se.last_synced_at||"Never",")"]},se.id))}),O&&u.jsx(kn,{label:"Delete configuration",children:u.jsx(wn,{"aria-label":"Delete configuration",icon:u.jsx(jf,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>J.mutate(O)})})]})]})}),u.jsxs(Sn,{gap:4,align:"stretch",wrap:"wrap",justify:"center",children:[u.jsxs(de,{flex:"1",minW:"250px",children:[u.jsx(te,{fontWeight:"bold",fontSize:"sm",mb:2,color:"green.600",children:u.jsxs(me,{children:[u.jsx(Le,{as:sb}),u.jsx(te,{children:"Source (Read Only)"})]})}),u.jsxs(at,{spacing:3,children:[u.jsx(Vr,{placeholder:"Select source server...",value:s||"",onChange:se=>o(se.target.value||null),size:"sm",children:r.map(se=>u.jsx("option",{value:se.id,children:se.name},se.id))}),we&&u.jsx(oIe,{connection:we,isSelected:!0,onSelect:()=>{},isHovered:y,onHover:b})]})]}),u.jsx(Sn,{align:"center",minW:"100px",justify:"center",children:u.jsx(lIe,{isActive:Q})}),u.jsxs(de,{flex:"2",minW:"350px",children:[u.jsx(te,{fontWeight:"bold",fontSize:"sm",mb:2,color:"blue.600",children:u.jsxs(me,{children:[u.jsx(Le,{as:bwe}),u.jsx(te,{children:"Destinations (Receivers)"})]})}),u.jsx(me,{mb:3,children:u.jsx(Vr,{placeholder:"Add destination server...",onChange:se=>{se.target.value&&($e(se.target.value),se.target.value="")},size:"sm",isDisabled:!s||Ie.length===0,children:Ie.map(se=>u.jsx("option",{value:se.id,children:se.name},se.id))})}),a.length>0?u.jsx(Gn,{columns:{base:1,md:2,lg:3},spacing:3,children:a.map(se=>{const Re=Fe(se);if(!Re)return null;const Oe=Qe(se),oe=(Oe==null?void 0:Oe.status)==="running";return u.jsx(aIe,{connection:Re,isRunning:oe,task:Oe,onRemove:()=>We(se),onStop:()=>Oe&&X.mutate(Oe.id)},se)})}):u.jsxs(de,{p:8,border:"2px dashed",borderColor:"gray.300",borderRadius:"lg",textAlign:"center",children:[u.jsx(Le,{as:Rwe,w:10,h:10,color:"gray.300",mb:2}),u.jsx(te,{color:"gray.500",fontSize:"sm",children:"Select destination servers from the dropdown above"})]})]})]}),u.jsx(Hn,{}),u.jsx(cIe,{options:p,onChange:g}),u.jsx(uIe,{tasks:R}),u.jsx(de,{bg:"gray.50",borderRadius:"md",p:3,children:u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",fontWeight:"bold",children:u.jsxs(me,{children:[u.jsx(Le,{as:Pk,color:"kartoza.500"}),u.jsx(te,{children:"Save Configuration"})]})}),u.jsxs(me,{children:[u.jsx(Rn,{placeholder:"Configuration name...",value:S,onChange:se=>P(se.target.value),size:"sm"}),u.jsx(vt,{leftIcon:u.jsx(Pk,{}),colorScheme:"kartoza",size:"sm",onClick:Ee,isDisabled:!S||!s||a.length===0,isLoading:ne.isPending,children:"Save"})]})]})})]})}),u.jsx(Fo,{borderTop:"1px",borderColor:"gray.200",bg:"gray.50",children:u.jsxs(me,{spacing:3,w:"100%",justify:"space-between",children:[Q&&u.jsx(vt,{leftIcon:u.jsx(Wf,{}),colorScheme:"red",variant:"outline",onClick:()=>K.mutate(),isLoading:K.isPending,children:"Stop All"}),u.jsxs(me,{spacing:3,ml:"auto",children:[u.jsx(vt,{variant:"ghost",onClick:n,children:"Close"}),u.jsx(vt,{leftIcon:Q?u.jsx(Cr,{size:"sm"}):u.jsx(pR,{}),colorScheme:"kartoza",size:"lg",onClick:ae,isDisabled:!s||a.length===0||Q,isLoading:q.isPending,px:8,_hover:{transform:"scale(1.02)",boxShadow:"lg"},transition:"all 0.2s ease",children:Q?"Syncing...":"Start Sync"})]})]})})]})]})}const wI=1,dIe=2,fIe=3,pIe=4,mIe=5,gIe=36,yIe=37,xIe=38,vIe=11,bIe=13;function _Ie(t){return t==45||t==46||t==58||t>=65&&t<=90||t==95||t>=97&&t<=122||t>=161}function wIe(t){return t==9||t==10||t==13||t==32}let ON=null,AN=null,EN=0;function SI(t,e){let n=t.pos+e;if(AN==t&&EN==n)return ON;for(;wIe(t.peek(e));)e++;let r="";for(;;){let i=t.peek(e);if(!_Ie(i))break;r+=String.fromCharCode(i),e++}return AN=t,EN=n,ON=r||null}function zN(t,e){this.name=t,this.parent=e}const SIe=new ZEe({start:null,shift(t,e,n,r){return e==wI?new zN(SI(r,1)||"",t):t},reduce(t,e){return e==vIe&&t?t.parent:t},reuse(t,e,n,r){let i=e.type.id;return i==wI||i==bIe?new zN(SI(r,1)||"",t):t},strict:!1}),kIe=new sg((t,e)=>{if(t.next==60){if(t.advance(),t.next==47){t.advance();let n=SI(t,0);if(!n)return t.acceptToken(mIe);if(e.context&&n==e.context.name)return t.acceptToken(dIe);for(let r=e.context;r;r=r.parent)if(r.name==n)return t.acceptToken(fIe,-2);t.acceptToken(pIe)}else if(t.next!=33&&t.next!=63)return t.acceptToken(wI)}},{contextual:!0});function oD(t,e){return new sg(n=>{let r=0,i=e.charCodeAt(0);e:for(;!(n.next<0);n.advance(),r++)if(n.next==i){for(let s=1;s<e.length;s++)if(n.peek(s)!=e.charCodeAt(s))continue e;break}r&&n.acceptToken(t)})}const CIe=oD(gIe,"-->"),TIe=oD(yIe,"?>"),jIe=oD(xIe,"]]>"),PIe=jT({Text:Ge.content,"StartTag StartCloseTag EndTag SelfCloseEndTag":Ge.angleBracket,TagName:Ge.tagName,"MismatchedCloseTag/TagName":[Ge.tagName,Ge.invalid],AttributeName:Ge.attributeName,AttributeValue:Ge.attributeValue,Is:Ge.definitionOperator,"EntityReference CharacterReference":Ge.character,Comment:Ge.blockComment,ProcessingInst:Ge.processingInstruction,DoctypeDecl:Ge.documentMeta,Cdata:Ge.special(Ge.string)}),OIe=J0.deserialize({version:14,states:",lOQOaOOOrOxO'#CfOzOpO'#CiO!tOaO'#CgOOOP'#Cg'#CgO!{OrO'#CrO#TOtO'#CsO#]OpO'#CtOOOP'#DT'#DTOOOP'#Cv'#CvQQOaOOOOOW'#Cw'#CwO#eOxO,59QOOOP,59Q,59QOOOO'#Cx'#CxO#mOpO,59TO#uO!bO,59TOOOP'#C|'#C|O$TOaO,59RO$[OpO'#CoOOOP,59R,59ROOOQ'#C}'#C}O$dOrO,59^OOOP,59^,59^OOOS'#DO'#DOO$lOtO,59_OOOP,59_,59_O$tOpO,59`O$|OpO,59`OOOP-E6t-E6tOOOW-E6u-E6uOOOP1G.l1G.lOOOO-E6v-E6vO%UO!bO1G.oO%UO!bO1G.oO%dOpO'#CkO%lO!bO'#CyO%zO!bO1G.oOOOP1G.o1G.oOOOP1G.w1G.wOOOP-E6z-E6zOOOP1G.m1G.mO&VOpO,59ZO&_OpO,59ZOOOQ-E6{-E6{OOOP1G.x1G.xOOOS-E6|-E6|OOOP1G.y1G.yO&gOpO1G.zO&gOpO1G.zOOOP1G.z1G.zO&oO!bO7+$ZO&}O!bO7+$ZOOOP7+$Z7+$ZOOOP7+$c7+$cO'YOpO,59VO'bOpO,59VO'mO!bO,59eOOOO-E6w-E6wO'{OpO1G.uO'{OpO1G.uOOOP1G.u1G.uO(TOpO7+$fOOOP7+$f7+$fO(]O!bO<<GuOOOP<<Gu<<GuOOOP<<G}<<G}O'bOpO1G.qO'bOpO1G.qO(hO#tO'#CnO(vO&jO'#CnOOOO1G.q1G.qO)UOpO7+$aOOOP7+$a7+$aOOOP<<HQ<<HQOOOPAN=aAN=aOOOPAN=iAN=iO'bOpO7+$]OOOO7+$]7+$]OOOO'#Cz'#CzO)^O#tO,59YOOOO,59Y,59YOOOO'#C{'#C{O)lO&jO,59YOOOP<<G{<<G{OOOO<<Gw<<GwOOOO-E6x-E6xOOOO1G.t1G.tOOOO-E6y-E6y",stateData:")z~OPQOSVOTWOVWOWWOXWOiXOyPO!QTO!SUO~OvZOx]O~O^`Oz^O~OPQOQcOSVOTWOVWOWWOXWOyPO!QTO!SUO~ORdO~P!SOteO!PgO~OuhO!RjO~O^lOz^O~OvZOxoO~O^qOz^O~O[vO`sOdwOz^O~ORyO~P!SO^{Oz^O~OteO!P}O~OuhO!R!PO~O^!QOz^O~O[!SOz^O~O[!VO`sOd!WOz^O~Oa!YOz^O~Oz^O[mX`mXdmX~O[!VO`sOd!WO~O^!]Oz^O~O[!_Oz^O~O[!aOz^O~O[!cO`sOd!dOz^O~O[!cO`sOd!dO~Oa!eOz^O~Oz^O{!gO}!hO~Oz^O[ma`madma~O[!kOz^O~O[!lOz^O~O[!mO`sOd!nO~OW!qOX!qO{!sO|!qO~OW!tOX!tO}!sO!O!tO~O[!vOz^O~OW!qOX!qO{!yO|!qO~OW!tOX!tO}!yO!O!tO~O",goto:"%cxPPPPPPPPPPyyP!PP!VPP!`!jP!pyyyP!v!|#S$[$k$q$w$}%TPPPP%ZXWORYbXRORYb_t`qru!T!U!bQ!i!YS!p!e!fR!w!oQdRRybXSORYbQYORmYQ[PRn[Q_QQkVjp_krz!R!T!X!Z!^!`!f!j!oQr`QzcQ!RlQ!TqQ!XsQ!ZtQ!^{Q!`!QQ!f!YQ!j!]R!o!eQu`S!UqrU![u!U!bR!b!TQ!r!gR!x!rQ!u!hR!z!uQbRRxbQfTR|fQiUR!OiSXOYTaRb",nodeNames:" StartTag StartCloseTag MissingCloseTag StartCloseTag StartCloseTag Document Text EntityReference CharacterReference Cdata Element EndTag OpenTag TagName Attribute AttributeName Is AttributeValue CloseTag SelfCloseEndTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag DoctypeDecl",maxTerm:50,context:SIe,nodeProps:[["closedBy",1,"SelfCloseEndTag EndTag",13,"CloseTag MissingCloseTag"],["openedBy",12,"StartTag StartCloseTag",19,"OpenTag",20,"StartTag"],["isolate",-6,13,18,19,21,22,24,""]],propSources:[PIe],skippedNodes:[0],repeatNodeCount:9,tokenData:"!)v~R!YOX$qXY)iYZ)iZ]$q]^)i^p$qpq)iqr$qrs*vsv$qvw+fwx/ix}$q}!O0[!O!P$q!P!Q2z!Q![$q![!]4n!]!^$q!^!_8U!_!`!#t!`!a!$l!a!b!%d!b!c$q!c!}4n!}#P$q#P#Q!'W#Q#R$q#R#S4n#S#T$q#T#o4n#o%W$q%W%o4n%o%p$q%p&a4n&a&b$q&b1p4n1p4U$q4U4d4n4d4e$q4e$IS4n$IS$I`$q$I`$Ib4n$Ib$Kh$q$Kh%#t4n%#t&/x$q&/x&Et4n&Et&FV$q&FV;'S4n;'S;:j8O;:j;=`)c<%l?&r$q?&r?Ah4n?Ah?BY$q?BY?Mn4n?MnO$qi$zXVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qa%nVVP!O`Ov%gwx&Tx!^%g!^!_&o!_;'S%g;'S;=`'W<%lO%gP&YTVPOv&Tw!^&T!_;'S&T;'S;=`&i<%lO&TP&lP;=`<%l&T`&tS!O`Ov&ox;'S&o;'S;=`'Q<%lO&o`'TP;=`<%l&oa'ZP;=`<%l%gX'eWVP|WOr'^rs&Tsv'^w!^'^!^!_'}!_;'S'^;'S;=`(i<%lO'^W(ST|WOr'}sv'}w;'S'};'S;=`(c<%lO'}W(fP;=`<%l'}X(lP;=`<%l'^h(vV|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oh)`P;=`<%l(oi)fP;=`<%l$qo)t`VP|W!O`zUOX$qXY)iYZ)iZ]$q]^)i^p$qpq)iqr$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk+PV{YVP!O`Ov%gwx&Tx!^%g!^!_&o!_;'S%g;'S;=`'W<%lO%g~+iast,n![!]-r!c!}-r#R#S-r#T#o-r%W%o-r%p&a-r&b1p-r4U4d-r4e$IS-r$I`$Ib-r$Kh%#t-r&/x&Et-r&FV;'S-r;'S;:j/c?&r?Ah-r?BY?Mn-r~,qQ!Q![,w#l#m-V~,zQ!Q![,w!]!^-Q~-VOX~~-YR!Q![-c!c!i-c#T#Z-c~-fS!Q![-c!]!^-Q!c!i-c#T#Z-c~-ug}!O-r!O!P-r!Q![-r![!]-r!]!^/^!c!}-r#R#S-r#T#o-r$}%O-r%W%o-r%p&a-r&b1p-r1p4U-r4U4d-r4e$IS-r$I`$Ib-r$Je$Jg-r$Kh%#t-r&/x&Et-r&FV;'S-r;'S;:j/c?&r?Ah-r?BY?Mn-r~/cOW~~/fP;=`<%l-rk/rW}bVP|WOr'^rs&Tsv'^w!^'^!^!_'}!_;'S'^;'S;=`(i<%lO'^k0eZVP|W!O`Or$qrs%gsv$qwx'^x}$q}!O1W!O!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk1aZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a2S!a;'S$q;'S;=`)c<%lO$qk2_X!PQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qm3TZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a3v!a;'S$q;'S;=`)c<%lO$qm4RXdSVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qo4{!P`S^QVP|W!O`Or$qrs%gsv$qwx'^x}$q}!O4n!O!P4n!P!Q$q!Q![4n![!]4n!]!^$q!^!_(o!_!c$q!c!}4n!}#R$q#R#S4n#S#T$q#T#o4n#o$}$q$}%O4n%O%W$q%W%o4n%o%p$q%p&a4n&a&b$q&b1p4n1p4U4n4U4d4n4d4e$q4e$IS4n$IS$I`$q$I`$Ib4n$Ib$Je$q$Je$Jg4n$Jg$Kh$q$Kh%#t4n%#t&/x$q&/x&Et4n&Et&FV$q&FV;'S4n;'S;:j8O;:j;=`)c<%l?&r$q?&r?Ah4n?Ah?BY$q?BY?Mn4n?MnO$qo8RP;=`<%l4ni8]Y|W!O`Oq(oqr8{rs&osv(owx'}x!a(o!a!b!#U!b;'S(o;'S;=`)]<%lO(oi9S_|W!O`Or(ors&osv(owx'}x}(o}!O:R!O!f(o!f!g;e!g!}(o!}#ODh#O#W(o#W#XLp#X;'S(o;'S;=`)]<%lO(oi:YX|W!O`Or(ors&osv(owx'}x}(o}!O:u!O;'S(o;'S;=`)]<%lO(oi;OV!QP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oi;lX|W!O`Or(ors&osv(owx'}x!q(o!q!r<X!r;'S(o;'S;=`)]<%lO(oi<`X|W!O`Or(ors&osv(owx'}x!e(o!e!f<{!f;'S(o;'S;=`)]<%lO(oi=SX|W!O`Or(ors&osv(owx'}x!v(o!v!w=o!w;'S(o;'S;=`)]<%lO(oi=vX|W!O`Or(ors&osv(owx'}x!{(o!{!|>c!|;'S(o;'S;=`)]<%lO(oi>jX|W!O`Or(ors&osv(owx'}x!r(o!r!s?V!s;'S(o;'S;=`)]<%lO(oi?^X|W!O`Or(ors&osv(owx'}x!g(o!g!h?y!h;'S(o;'S;=`)]<%lO(oi@QY|W!O`Or?yrs@psv?yvwA[wxBdx!`?y!`!aCr!a;'S?y;'S;=`Db<%lO?ya@uV!O`Ov@pvxA[x!`@p!`!aAy!a;'S@p;'S;=`B^<%lO@pPA_TO!`A[!`!aAn!a;'SA[;'S;=`As<%lOA[PAsOiPPAvP;=`<%lA[aBQSiP!O`Ov&ox;'S&o;'S;=`'Q<%lO&oaBaP;=`<%l@pXBiX|WOrBdrsA[svBdvwA[w!`Bd!`!aCU!a;'SBd;'S;=`Cl<%lOBdXC]TiP|WOr'}sv'}w;'S'};'S;=`(c<%lO'}XCoP;=`<%lBdiC{ViP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oiDeP;=`<%l?yiDoZ|W!O`Or(ors&osv(owx'}x!e(o!e!fEb!f#V(o#V#WIr#W;'S(o;'S;=`)]<%lO(oiEiX|W!O`Or(ors&osv(owx'}x!f(o!f!gFU!g;'S(o;'S;=`)]<%lO(oiF]X|W!O`Or(ors&osv(owx'}x!c(o!c!dFx!d;'S(o;'S;=`)]<%lO(oiGPX|W!O`Or(ors&osv(owx'}x!v(o!v!wGl!w;'S(o;'S;=`)]<%lO(oiGsX|W!O`Or(ors&osv(owx'}x!c(o!c!dH`!d;'S(o;'S;=`)]<%lO(oiHgX|W!O`Or(ors&osv(owx'}x!}(o!}#OIS#O;'S(o;'S;=`)]<%lO(oiI]V|W!O`yPOr(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oiIyX|W!O`Or(ors&osv(owx'}x#W(o#W#XJf#X;'S(o;'S;=`)]<%lO(oiJmX|W!O`Or(ors&osv(owx'}x#T(o#T#UKY#U;'S(o;'S;=`)]<%lO(oiKaX|W!O`Or(ors&osv(owx'}x#h(o#h#iK|#i;'S(o;'S;=`)]<%lO(oiLTX|W!O`Or(ors&osv(owx'}x#T(o#T#UH`#U;'S(o;'S;=`)]<%lO(oiLwX|W!O`Or(ors&osv(owx'}x#c(o#c#dMd#d;'S(o;'S;=`)]<%lO(oiMkX|W!O`Or(ors&osv(owx'}x#V(o#V#WNW#W;'S(o;'S;=`)]<%lO(oiN_X|W!O`Or(ors&osv(owx'}x#h(o#h#iNz#i;'S(o;'S;=`)]<%lO(oi! RX|W!O`Or(ors&osv(owx'}x#m(o#m#n! n#n;'S(o;'S;=`)]<%lO(oi! uX|W!O`Or(ors&osv(owx'}x#d(o#d#e!!b#e;'S(o;'S;=`)]<%lO(oi!!iX|W!O`Or(ors&osv(owx'}x#X(o#X#Y?y#Y;'S(o;'S;=`)]<%lO(oi!#_V!SP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(ok!$PXaQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qo!$wX[UVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk!%mZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a!&`!a;'S$q;'S;=`)c<%lO$qk!&kX!RQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk!'aZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_#P$q#P#Q!(S#Q;'S$q;'S;=`)c<%lO$qk!(]ZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a!)O!a;'S$q;'S;=`)c<%lO$qk!)ZXxQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$q",tokenizers:[kIe,CIe,TIe,jIe,0,1,2,3,4],topRules:{Document:[0,6]},tokenPrec:0});function $k(t,e){let n=e&&e.getChild("TagName");return n?t.sliceString(n.from,n.to):""}function JO(t,e){let n=e&&e.firstChild;return!n||n.name!="OpenTag"?"":$k(t,n)}function AIe(t,e,n){let r=e&&e.getChildren("Attribute").find(s=>s.from<=n&&s.to>=n),i=r&&r.getChild("AttributeName");return i?t.sliceString(i.from,i.to):""}function eA(t){for(let e=t&&t.parent;e;e=e.parent)if(e.name=="Element")return e;return null}function EIe(t,e){var n;let r=rs(t).resolveInner(e,-1),i=null;for(let s=r;!i&&s.parent;s=s.parent)(s.name=="OpenTag"||s.name=="CloseTag"||s.name=="SelfClosingTag"||s.name=="MismatchedCloseTag")&&(i=s);if(i&&(i.to>e||i.lastChild.type.isError)){let s=i.parent;if(r.name=="TagName")return i.name=="CloseTag"||i.name=="MismatchedCloseTag"?{type:"closeTag",from:r.from,context:s}:{type:"openTag",from:r.from,context:eA(s)};if(r.name=="AttributeName")return{type:"attrName",from:r.from,context:i};if(r.name=="AttributeValue")return{type:"attrValue",from:r.from,context:i};let o=r==i||r.name=="Attribute"?r.childBefore(e):r;return(o==null?void 0:o.name)=="StartTag"?{type:"openTag",from:e,context:eA(s)}:(o==null?void 0:o.name)=="StartCloseTag"&&o.to<=e?{type:"closeTag",from:e,context:s}:(o==null?void 0:o.name)=="Is"?{type:"attrValue",from:e,context:i}:o?{type:"attrName",from:e,context:i}:null}else if(r.name=="StartCloseTag")return{type:"closeTag",from:e,context:r.parent};for(;r.parent&&r.to==e&&!(!((n=r.lastChild)===null||n===void 0)&&n.type.isError);)r=r.parent;return r.name=="Element"||r.name=="Text"||r.name=="Document"?{type:"tag",from:e,context:r.name=="Element"?r:eA(r)}:null}let zIe=class{constructor(e,n,r){this.attrs=n,this.attrValues=r,this.children=[],this.name=e.name,this.completion=Object.assign(Object.assign({type:"type"},e.completion||{}),{label:this.name}),this.openCompletion=Object.assign(Object.assign({},this.completion),{label:"<"+this.name}),this.closeCompletion=Object.assign(Object.assign({},this.completion),{label:"</"+this.name+">",boost:2}),this.closeNameCompletion=Object.assign(Object.assign({},this.completion),{label:this.name+">"}),this.text=e.textContent?e.textContent.map(i=>({label:i,type:"text"})):[]}};const tA=/^[:\-\.\w\u00b7-\uffff]*$/;function IN(t){return Object.assign(Object.assign({type:"property"},t.completion||{}),{label:t.name})}function MN(t){return typeof t=="string"?{label:`"${t}"`,type:"constant"}:/^"/.test(t.label)?t:Object.assign(Object.assign({},t),{label:`"${t.label}"`})}function IIe(t,e){let n=[],r=[],i=Object.create(null);for(let h of e){let p=IN(h);n.push(p),h.global&&r.push(p),h.values&&(i[h.name]=h.values.map(MN))}let s=[],o=[],a=Object.create(null);for(let h of t){let p=r,g=i;h.attributes&&(p=p.concat(h.attributes.map(b=>typeof b=="string"?n.find(S=>S.label==b)||{label:b,type:"property"}:(b.values&&(g==i&&(g=Object.create(g)),g[b.name]=b.values.map(MN)),IN(b)))));let y=new zIe(h,p,g);a[y.name]=y,s.push(y),h.top&&o.push(y)}o.length||(o=s);for(let h=0;h<s.length;h++){let p=t[h],g=s[h];if(p.children)for(let y of p.children)a[y]&&g.children.push(a[y]);else g.children=s}return h=>{var p;let{doc:g}=h.state,y=EIe(h.state,h.pos);if(!y||y.type=="tag"&&!h.explicit)return null;let{type:b,from:S,context:P}=y;if(b=="openTag"){let O=o,D=JO(g,P);if(D){let z=a[D];O=(z==null?void 0:z.children)||s}return{from:S,options:O.map(z=>z.completion),validFor:tA}}else if(b=="closeTag"){let O=JO(g,P);return O?{from:S,to:h.pos+(g.sliceString(h.pos,h.pos+1)==">"?1:0),options:[((p=a[O])===null||p===void 0?void 0:p.closeNameCompletion)||{label:O+">",type:"type"}],validFor:tA}:null}else if(b=="attrName"){let O=a[$k(g,P)];return{from:S,options:(O==null?void 0:O.attrs)||r,validFor:tA}}else if(b=="attrValue"){let O=AIe(g,P,S);if(!O)return null;let D=a[$k(g,P)],z=((D==null?void 0:D.attrValues)||i)[O];return!z||!z.length?null:{from:S,to:h.pos+(g.sliceString(h.pos,h.pos+1)=='"'?1:0),options:z,validFor:/^"[^"]*"?$/}}else if(b=="tag"){let O=JO(g,P),D=a[O],z=[],F=P&&P.lastChild;O&&(!F||F.name!="CloseTag"||$k(g,F)!=O)&&z.push(D?D.closeCompletion:{label:"</"+O+">",type:"type",boost:2});let R=z.concat(((D==null?void 0:D.children)||(P?s:o)).map(N=>N.openCompletion));if(P&&(D!=null&&D.text.length)){let N=P.firstChild;N.to>h.pos-20&&!/\S/.test(h.state.sliceDoc(N.to,h.pos))&&(R=R.concat(D.text))}return{from:S,options:R,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}else return null}}const kI=X0.define({name:"xml",parser:OIe.configure({props:[AT.add({Element(t){let e=/^\s*<\//.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},"OpenTag CloseTag SelfClosingTag"(t){return t.column(t.node.from)+t.unit}}),ET.add({Element(t){let e=t.firstChild,n=t.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:n.name=="CloseTag"?n.from:t.to}}}),wX.add({"OpenTag CloseTag":t=>t.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/$/}});function MIe(t={}){let e=[kI.data.of({autocomplete:IIe(t.elements||[],t.attributes||[])})];return t.autoCloseTags!==!1&&e.push(RIe),new WR(kI,e)}function RN(t,e,n=t.length){if(!e)return"";let r=e.firstChild,i=r&&r.getChild("TagName");return i?t.sliceString(i.from,Math.min(i.to,n)):""}const RIe=rn.inputHandler.of((t,e,n,r,i)=>{if(t.composing||t.state.readOnly||e!=n||r!=">"&&r!="/"||!kI.isActiveAt(t.state,e,-1))return!1;let s=i(),{state:o}=s,a=o.changeByRange(h=>{var p,g,y;let{head:b}=h,S=o.doc.sliceString(b-1,b)==r,P=rs(o).resolveInner(b,-1),O;if(S&&r==">"&&P.name=="EndTag"){let D=P.parent;if(((g=(p=D.parent)===null||p===void 0?void 0:p.lastChild)===null||g===void 0?void 0:g.name)!="CloseTag"&&(O=RN(o.doc,D.parent,b))){let z=b+(o.doc.sliceString(b,b+1)===">"?1:0),F=`</${O}>`;return{range:h,changes:{from:b,to:z,insert:F}}}}else if(S&&r=="/"&&P.name=="StartCloseTag"){let D=P.parent;if(P.from==b-2&&((y=D.lastChild)===null||y===void 0?void 0:y.name)!="CloseTag"&&(O=RN(o.doc,D,b))){let z=b+(o.doc.sliceString(b,b+1)===">"?1:0),F=`${O}>`;return{range:xt.cursor(b+F.length,-1),changes:{from:b,to:z,insert:F}}}}return{range:h}});return a.changes.empty?!1:(t.dispatch([s,o.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),DIe=122,DN=1,LIe=123,FIe=124,LK=2,BIe=125,$Ie=3,NIe=4,FK=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],VIe=58,WIe=40,BK=95,UIe=91,Nk=45,qIe=46,QIe=35,HIe=37,GIe=38,XIe=92,KIe=10,ZIe=42;function Q1(t){return t>=65&&t<=90||t>=97&&t<=122||t>=161}function aD(t){return t>=48&&t<=57}function LN(t){return aD(t)||t>=97&&t<=102||t>=65&&t<=70}const $K=(t,e,n)=>(r,i)=>{for(let s=!1,o=0,a=0;;a++){let{next:h}=r;if(Q1(h)||h==Nk||h==BK||s&&aD(h))!s&&(h!=Nk||a>0)&&(s=!0),o===a&&h==Nk&&o++,r.advance();else if(h==XIe&&r.peek(1)!=KIe){if(r.advance(),LN(r.next)){do r.advance();while(LN(r.next));r.next==32&&r.advance()}else r.next>-1&&r.advance();s=!0}else{s&&r.acceptToken(o==2&&i.canShift(LK)?e:h==WIe?n:t);break}}},YIe=new sg($K(LIe,LK,FIe)),JIe=new sg($K(BIe,$Ie,NIe)),eMe=new sg(t=>{if(FK.includes(t.peek(-1))){let{next:e}=t;(Q1(e)||e==BK||e==QIe||e==qIe||e==ZIe||e==UIe||e==VIe&&Q1(t.peek(1))||e==Nk||e==GIe)&&t.acceptToken(DIe)}}),tMe=new sg(t=>{if(!FK.includes(t.peek(-1))){let{next:e}=t;if(e==HIe&&(t.advance(),t.acceptToken(DN)),Q1(e)){do t.advance();while(Q1(t.next)||aD(t.next));t.acceptToken(DN)}}}),nMe=jT({"AtKeyword import charset namespace keyframes media supports":Ge.definitionKeyword,"from to selector":Ge.keyword,NamespaceName:Ge.namespace,KeyframeName:Ge.labelName,KeyframeRangeName:Ge.operatorKeyword,TagName:Ge.tagName,ClassName:Ge.className,PseudoClassName:Ge.constant(Ge.className),IdName:Ge.labelName,"FeatureName PropertyName":Ge.propertyName,AttributeName:Ge.attributeName,NumberLiteral:Ge.number,KeywordQuery:Ge.keyword,UnaryQueryOp:Ge.operatorKeyword,"CallTag ValueName":Ge.atom,VariableName:Ge.variableName,Callee:Ge.operatorKeyword,Unit:Ge.unit,"UniversalSelector NestingSelector":Ge.definitionOperator,"MatchOp CompareOp":Ge.compareOperator,"ChildOp SiblingOp, LogicOp":Ge.logicOperator,BinOp:Ge.arithmeticOperator,Important:Ge.modifier,Comment:Ge.blockComment,ColorLiteral:Ge.color,"ParenthesizedContent StringLiteral":Ge.string,":":Ge.punctuation,"PseudoOp #":Ge.derefOperator,"; ,":Ge.separator,"( )":Ge.paren,"[ ]":Ge.squareBracket,"{ }":Ge.brace}),rMe={__proto__:null,lang:38,"nth-child":38,"nth-last-child":38,"nth-of-type":38,"nth-last-of-type":38,dir:38,"host-context":38,if:84,url:124,"url-prefix":124,domain:124,regexp:124},iMe={__proto__:null,or:98,and:98,not:106,only:106,layer:170},sMe={__proto__:null,selector:112,layer:166},oMe={__proto__:null,"@import":162,"@media":174,"@charset":178,"@namespace":182,"@keyframes":188,"@supports":200,"@scope":204},aMe={__proto__:null,to:207},lMe=J0.deserialize({version:14,states:"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",stateData:"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",goto:"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",nodeNames:" Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",maxTerm:143,nodeProps:[["isolate",-2,5,36,""],["openedBy",20,"(",28,"[",31,"{"],["closedBy",21,")",29,"]",32,"}"]],propSources:[nMe],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",tokenizers:[eMe,tMe,YIe,JIe,1,2,3,4,new jK("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},specialized:[{term:124,get:t=>rMe[t]||-1},{term:125,get:t=>iMe[t]||-1},{term:4,get:t=>sMe[t]||-1},{term:25,get:t=>oMe[t]||-1},{term:123,get:t=>aMe[t]||-1}],tokenPrec:1963});let nA=null;function rA(){if(!nA&&typeof document=="object"&&document.body){let{style:t}=document.body,e=[],n=new Set;for(let r in t)r!="cssText"&&r!="cssFloat"&&typeof t[r]=="string"&&(/[A-Z]/.test(r)&&(r=r.replace(/[A-Z]/g,i=>"-"+i.toLowerCase())),n.has(r)||(e.push(r),n.add(r)));nA=e.sort().map(r=>({type:"property",label:r,apply:r+": "}))}return nA||[]}const FN=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(t=>({type:"class",label:t})),BN=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(t=>({type:"keyword",label:t})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(t=>({type:"constant",label:t}))),cMe=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(t=>({type:"type",label:t})),uMe=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(t=>({type:"keyword",label:t})),yh=/^(\w[\w-]*|-\w[\w-]*|)$/,hMe=/^-(-[\w-]*)?$/;function dMe(t,e){var n;if((t.name=="("||t.type.isError)&&(t=t.parent||t),t.name!="ArgList")return!1;let r=(n=t.parent)===null||n===void 0?void 0:n.firstChild;return(r==null?void 0:r.name)!="Callee"?!1:e.sliceString(r.from,r.to)=="var"}const $N=new Lje,fMe=["Declaration"];function pMe(t){for(let e=t;;){if(e.type.isTop)return e;if(!(e=e.parent))return t}}function NK(t,e,n){if(e.to-e.from>4096){let r=$N.get(e);if(r)return r;let i=[],s=new Set,o=e.cursor(Mi.IncludeAnonymous);if(o.firstChild())do for(let a of NK(t,o.node,n))s.has(a.label)||(s.add(a.label),i.push(a));while(o.nextSibling());return $N.set(e,i),i}else{let r=[],i=new Set;return e.cursor().iterate(s=>{var o;if(n(s)&&s.matchContext(fMe)&&((o=s.node.nextSibling)===null||o===void 0?void 0:o.name)==":"){let a=t.sliceString(s.from,s.to);i.has(a)||(i.add(a),r.push({label:a,type:"variable"}))}}),r}}const mMe=t=>e=>{let{state:n,pos:r}=e,i=rs(n).resolveInner(r,-1),s=i.type.isError&&i.from==i.to-1&&n.doc.sliceString(i.from,i.to)=="-";if(i.name=="PropertyName"||(s||i.name=="TagName")&&/^(Block|Styles)$/.test(i.resolve(i.to).name))return{from:i.from,options:rA(),validFor:yh};if(i.name=="ValueName")return{from:i.from,options:BN,validFor:yh};if(i.name=="PseudoClassName")return{from:i.from,options:FN,validFor:yh};if(t(i)||(e.explicit||s)&&dMe(i,n.doc))return{from:t(i)||s?i.from:r,options:NK(n.doc,pMe(i),t),validFor:hMe};if(i.name=="TagName"){for(let{parent:h}=i;h;h=h.parent)if(h.name=="Block")return{from:i.from,options:rA(),validFor:yh};return{from:i.from,options:cMe,validFor:yh}}if(i.name=="AtKeyword")return{from:i.from,options:uMe,validFor:yh};if(!e.explicit)return null;let o=i.resolve(r),a=o.childBefore(r);return a&&a.name==":"&&o.name=="PseudoClassSelector"?{from:r,options:FN,validFor:yh}:a&&a.name==":"&&o.name=="Declaration"||o.name=="ArgList"?{from:r,options:BN,validFor:yh}:o.name=="Block"||o.name=="Styles"?{from:r,options:rA(),validFor:yh}:null},gMe=mMe(t=>t.name=="VariableName"),NN=X0.define({name:"css",parser:lMe.configure({props:[AT.add({Declaration:cX()}),ET.add({"Block KeyframeList":lPe})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function yMe(){return new WR(NN,NN.data.of({autocomplete:gMe}))}const WS=`<?xml version="1.0" encoding="UTF-8"?>
<StyledLayerDescriptor version="1.0.0"
  xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"
  xmlns="http://www.opengis.net/sld"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NamedLayer>
    <Name>NewStyle</Name>
    <UserStyle>
      <Title>New Style</Title>
      <FeatureTypeStyle>
        <Rule>
          <Name>Default</Name>
          <PolygonSymbolizer>
            <Fill>
              <CssParameter name="fill">#3388ff</CssParameter>
              <CssParameter name="fill-opacity">0.6</CssParameter>
            </Fill>
            <Stroke>
              <CssParameter name="stroke">#2266cc</CssParameter>
              <CssParameter name="stroke-width">1</CssParameter>
            </Stroke>
          </PolygonSymbolizer>
        </Rule>
      </FeatureTypeStyle>
    </UserStyle>
  </NamedLayer>
</StyledLayerDescriptor>`,xMe=`/* GeoServer CSS Style */
* {
  fill: #3388ff;
  fill-opacity: 0.6;
  stroke: #2266cc;
  stroke-width: 1;
}`,iA={"blue-to-red":["#2166ac","#67a9cf","#d1e5f0","#fddbc7","#ef8a62","#b2182b"],"green-to-red":["#1a9850","#91cf60","#d9ef8b","#fee08b","#fc8d59","#d73027"],viridis:["#440154","#443983","#31688e","#21918c","#35b779","#fde725"],spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"]},ay={rainbow:{name:"Rainbow",description:"Classic rainbow spectrum",colors:["#9400D3","#4B0082","#0000FF","#00FF00","#FFFF00","#FF7F00","#FF0000"]},terrain:{name:"Terrain",description:"Natural terrain colors (blue-green-brown)",colors:["#0000FF","#00FFFF","#00FF00","#FFFF00","#FF8C00","#8B4513","#FFFFFF"]},elevation:{name:"Elevation",description:"DEM/elevation visualization",colors:["#006400","#228B22","#90EE90","#FFFF00","#FFA500","#8B4513","#FFFFFF"]},temperature:{name:"Temperature",description:"Cold to hot temperature scale",colors:["#0000FF","#00BFFF","#00FFFF","#FFFF00","#FFA500","#FF0000","#8B0000"]},ndvi:{name:"NDVI",description:"Vegetation index (brown-yellow-green)",colors:["#8B4513","#D2691E","#FFD700","#ADFF2F","#32CD32","#006400"]},bathymetry:{name:"Bathymetry",description:"Ocean depth visualization",colors:["#000033","#000066","#0000CC","#0066FF","#00CCFF","#99FFFF"]},grayscale:{name:"Grayscale",description:"Black to white gradient",colors:["#000000","#333333","#666666","#999999","#CCCCCC","#FFFFFF"]},magma:{name:"Magma",description:"Dark purple to bright yellow",colors:["#000004","#3B0F70","#8C2981","#DE4968","#FE9F6D","#FCFDBF"]},plasma:{name:"Plasma",description:"Blue-purple to yellow",colors:["#0D0887","#6A00A8","#B12A90","#E16462","#FCA636","#F0F921"]},inferno:{name:"Inferno",description:"Black through red to bright yellow",colors:["#000004","#420A68","#932667","#DD513A","#FCA50A","#FCFFA4"]}},VN=[{name:"Default",azimuth:315,altitude:45,zFactor:1},{name:"Morning Light",azimuth:90,altitude:30,zFactor:1},{name:"Evening Light",azimuth:270,altitude:30,zFactor:1},{name:"High Contrast",azimuth:315,altitude:60,zFactor:2},{name:"Subtle",azimuth:315,altitude:45,zFactor:.5}];function WN(t,e,n,r,i="ramp",s=1){const o=r-n,a=e.map((h,p)=>{const g=n+o*p/(e.length-1);return`          <ColorMapEntry color="${h}" quantity="${g.toFixed(2)}" opacity="${s}" />`}).join(`
`);return`<?xml version="1.0" encoding="UTF-8"?>
<StyledLayerDescriptor version="1.0.0"
  xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"
  xmlns="http://www.opengis.net/sld"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NamedLayer>
    <Name>${t}</Name>
    <UserStyle>
      <Title>${t} - Raster Color Map</Title>
      <FeatureTypeStyle>
        <Rule>
          <RasterSymbolizer>
            <Opacity>${s}</Opacity>
            <ColorMap type="${i}">
${a}
            </ColorMap>
          </RasterSymbolizer>
        </Rule>
      </FeatureTypeStyle>
    </UserStyle>
  </NamedLayer>
</StyledLayerDescriptor>`}function vMe(t,e=315,n=45,r=1,i=1){return`<?xml version="1.0" encoding="UTF-8"?>
<StyledLayerDescriptor version="1.0.0"
  xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"
  xmlns="http://www.opengis.net/sld"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NamedLayer>
    <Name>${t}</Name>
    <UserStyle>
      <Title>${t} - Hillshade</Title>
      <FeatureTypeStyle>
        <Rule>
          <RasterSymbolizer>
            <Opacity>${i}</Opacity>
            <ShadedRelief>
              <BrightnessOnly>false</BrightnessOnly>
              <ReliefFactor>${r}</ReliefFactor>
            </ShadedRelief>
            <VendorOption name="algorithm">zevenbergenThorne</VendorOption>
            <VendorOption name="azimuth">${e}</VendorOption>
            <VendorOption name="altitude">${n}</VendorOption>
          </RasterSymbolizer>
        </Rule>
      </FeatureTypeStyle>
    </UserStyle>
  </NamedLayer>
</StyledLayerDescriptor>`}function bMe(t,e,n,r,i=315,s=45,o=1,a=1){const h=r-n,p=e.map((g,y)=>{const b=n+h*y/(e.length-1);return`          <ColorMapEntry color="${g}" quantity="${b.toFixed(2)}" />`}).join(`
`);return`<?xml version="1.0" encoding="UTF-8"?>
<StyledLayerDescriptor version="1.0.0"
  xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"
  xmlns="http://www.opengis.net/sld"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NamedLayer>
    <Name>${t}</Name>
    <UserStyle>
      <Title>${t} - Hillshade with Color</Title>
      <FeatureTypeStyle>
        <Rule>
          <RasterSymbolizer>
            <Opacity>${a}</Opacity>
            <ColorMap type="ramp">
${p}
            </ColorMap>
            <ShadedRelief>
              <BrightnessOnly>false</BrightnessOnly>
              <ReliefFactor>${o}</ReliefFactor>
            </ShadedRelief>
            <VendorOption name="algorithm">zevenbergenThorne</VendorOption>
            <VendorOption name="azimuth">${i}</VendorOption>
            <VendorOption name="altitude">${s}</VendorOption>
          </RasterSymbolizer>
        </Rule>
      </FeatureTypeStyle>
    </UserStyle>
  </NamedLayer>
</StyledLayerDescriptor>`}function _Me(t,e="normalize",n=1,r=1){const i=e==="none"?"":`
            <ContrastEnhancement>
              <${e==="normalize"?"Normalize":"Histogram"} />
              <GammaValue>${n}</GammaValue>
            </ContrastEnhancement>`;return`<?xml version="1.0" encoding="UTF-8"?>
<StyledLayerDescriptor version="1.0.0"
  xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"
  xmlns="http://www.opengis.net/sld"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NamedLayer>
    <Name>${t}</Name>
    <UserStyle>
      <Title>${t} - Enhanced</Title>
      <FeatureTypeStyle>
        <Rule>
          <RasterSymbolizer>
            <Opacity>${r}</Opacity>${i}
          </RasterSymbolizer>
        </Rule>
      </FeatureTypeStyle>
    </UserStyle>
  </NamedLayer>
</StyledLayerDescriptor>`}function CI(t,e){const n=Math.min(...t),i=(Math.max(...t)-n)/e,s=[];for(let o=0;o<=e;o++)s.push(n+o*i);return s}function wMe(t,e){const n=[...t].sort((i,s)=>i-s),r=[];for(let i=0;i<=e;i++){const s=Math.floor(i/e*(n.length-1));r.push(n[s])}return r}function SMe(t,e){const n=[...t].sort((s,o)=>s-o);if(n.length<=e)return n;const i=CI(t,e);for(let s=0;s<10;s++){const o=[];for(let a=0;a<e;a++){const h=i[a],p=i[a+1],g=n.filter(y=>y>=h&&(a===e-1?y<=p:y<p));g.length>0?o.push(g.reduce((y,b)=>y+b,0)/g.length):o.push((h+p)/2)}for(let a=1;a<e;a++)i[a]=(o[a-1]+o[a])/2}return i}function kMe(t,e){const n=Math.min(...t),s=(Math.max(...t)-n)/e,o=Math.pow(10,Math.floor(Math.log10(s))),a=s/o;let h;a<=1?h=1*o:a<=2?h=2*o:a<=5?h=5*o:h=10*o;const p=Math.floor(n/h)*h,g=[];for(let y=0;y<=e;y++)g.push(p+y*h);return g}function CMe(t,e,n){switch(n){case"equal-interval":return CI(t,e);case"quantile":return wMe(t,e);case"jenks":return SMe(t,e);case"pretty":return kMe(t,e);default:return CI(t,e)}}function UN(t,e){if(e<=t.length){const n=[];for(let r=0;r<e;r++){const i=Math.floor(r/(e-1)*(t.length-1));n.push(t[i])}return n}return t.slice(0,e)}function TMe(t,e,n,r,i){const s=n.slice(0,-1).map((o,a)=>{const h=n[a+1],p=r[a]||r[r.length-1],g=`${o.toFixed(2)} - ${h.toFixed(2)}`;let y="";return i==="polygon"?y=`
            <PolygonSymbolizer>
              <Fill>
                <CssParameter name="fill">${p}</CssParameter>
                <CssParameter name="fill-opacity">0.8</CssParameter>
              </Fill>
              <Stroke>
                <CssParameter name="stroke">#333333</CssParameter>
                <CssParameter name="stroke-width">0.5</CssParameter>
              </Stroke>
            </PolygonSymbolizer>`:i==="line"?y=`
            <LineSymbolizer>
              <Stroke>
                <CssParameter name="stroke">${p}</CssParameter>
                <CssParameter name="stroke-width">2</CssParameter>
              </Stroke>
            </LineSymbolizer>`:y=`
            <PointSymbolizer>
              <Graphic>
                <Mark>
                  <WellKnownName>circle</WellKnownName>
                  <Fill>
                    <CssParameter name="fill">${p}</CssParameter>
                  </Fill>
                  <Stroke>
                    <CssParameter name="stroke">#333333</CssParameter>
                    <CssParameter name="stroke-width">1</CssParameter>
                  </Stroke>
                </Mark>
                <Size>8</Size>
              </Graphic>
            </PointSymbolizer>`,`
          <Rule>
            <Name>${g}</Name>
            <Title>${g}</Title>
            <ogc:Filter>
              <ogc:And>
                <ogc:PropertyIsGreaterThanOrEqualTo>
                  <ogc:PropertyName>${e}</ogc:PropertyName>
                  <ogc:Literal>${o}</ogc:Literal>
                </ogc:PropertyIsGreaterThanOrEqualTo>
                <ogc:PropertyIsLessThan>
                  <ogc:PropertyName>${e}</ogc:PropertyName>
                  <ogc:Literal>${h}</ogc:Literal>
                </ogc:PropertyIsLessThan>
              </ogc:And>
            </ogc:Filter>${y}
          </Rule>`}).join("");return`<?xml version="1.0" encoding="UTF-8"?>
<StyledLayerDescriptor version="1.0.0"
  xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"
  xmlns="http://www.opengis.net/sld"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NamedLayer>
    <Name>${t}</Name>
    <UserStyle>
      <Title>${t} - Classified</Title>
      <FeatureTypeStyle>${s}
      </FeatureTypeStyle>
    </UserStyle>
  </NamedLayer>
</StyledLayerDescriptor>`}const sA=[{name:"Ocean Drop",description:"Deep blue with soft glow",icon:"",shape:"circle",fill:"#0077be",fillOpacity:.9,stroke:"#004d80",strokeWidth:2,size:12,haloColor:"#87ceeb",haloRadius:3},{name:"Sunset Glow",description:"Warm orange with golden halo",icon:"",shape:"circle",fill:"#ff6b35",fillOpacity:.95,stroke:"#cc4400",strokeWidth:2,size:14,haloColor:"#ffd700",haloRadius:4},{name:"Forest Emerald",description:"Rich green nature marker",icon:"",shape:"circle",fill:"#228b22",fillOpacity:.9,stroke:"#145214",strokeWidth:2,size:12,haloColor:"#90ee90",haloRadius:3},{name:"Royal Purple",description:"Elegant purple with silver edge",icon:"",shape:"circle",fill:"#8b008b",fillOpacity:.9,stroke:"#c0c0c0",strokeWidth:2,size:12,haloColor:"#dda0dd",haloRadius:3},{name:"Cherry Blossom",description:"Soft pink with delicate outline",icon:"",shape:"circle",fill:"#ffb7c5",fillOpacity:.95,stroke:"#ff69b4",strokeWidth:1.5,size:11,haloColor:"#fff0f5",haloRadius:2},{name:"Diamond Marker",description:"Classic diamond shape",icon:"",shape:"square",fill:"#00bfff",fillOpacity:.85,stroke:"#0080ff",strokeWidth:2,size:14,rotation:45},{name:"Golden Star",description:"Bright star for highlights",icon:"",shape:"star",fill:"#ffd700",fillOpacity:1,stroke:"#b8860b",strokeWidth:1.5,size:16},{name:"Ruby Triangle",description:"Bold triangular marker",icon:"",shape:"triangle",fill:"#dc143c",fillOpacity:.9,stroke:"#8b0000",strokeWidth:2,size:14},{name:"Navy Square",description:"Professional square marker",icon:"",shape:"square",fill:"#1e3a5f",fillOpacity:.95,stroke:"#0d1b2a",strokeWidth:2,size:12},{name:"Neon Pulse",description:"Bright neon with glow effect",icon:"",shape:"circle",fill:"#00ff88",fillOpacity:1,stroke:"#00cc6a",strokeWidth:1,size:10,haloColor:"#00ff88",haloRadius:6},{name:"Fire Ember",description:"Hot red with orange glow",icon:"",shape:"circle",fill:"#ff4500",fillOpacity:.95,stroke:"#8b0000",strokeWidth:2,size:12,haloColor:"#ff8c00",haloRadius:4},{name:"Ice Crystal",description:"Cool blue with frost effect",icon:"",shape:"star",fill:"#e0ffff",fillOpacity:.9,stroke:"#00ced1",strokeWidth:1.5,size:14,haloColor:"#b0e0e6",haloRadius:3},{name:"Midnight Shadow",description:"Dark with subtle shadow",icon:"",shape:"circle",fill:"#2c3e50",fillOpacity:.95,stroke:"#1a252f",strokeWidth:2,size:12,haloColor:"#34495e",haloRadius:4},{name:"Coral Reef",description:"Vibrant coral with aqua edge",icon:"",shape:"circle",fill:"#ff7f50",fillOpacity:.9,stroke:"#20b2aa",strokeWidth:2,size:12,haloColor:"#40e0d0",haloRadius:3},{name:"Map Pin Red",description:"Classic red location pin",icon:"",shape:"circle",fill:"#e74c3c",fillOpacity:1,stroke:"#c0392b",strokeWidth:2,size:14,haloColor:"#ffffff",haloRadius:2},{name:"Corporate Blue",description:"Clean professional blue",icon:"",shape:"circle",fill:"#3498db",fillOpacity:.95,stroke:"#2980b9",strokeWidth:2,size:12},{name:"Success Green",description:"Positive indicator marker",icon:"",shape:"circle",fill:"#27ae60",fillOpacity:.95,stroke:"#1e8449",strokeWidth:2,size:12},{name:"Warning Amber",description:"Attention-grabbing yellow",icon:"",shape:"triangle",fill:"#f39c12",fillOpacity:1,stroke:"#d68910",strokeWidth:2,size:14},{name:"Cross Mark",description:"X marker for exclusions",icon:"",shape:"cross",fill:"#e74c3c",fillOpacity:1,stroke:"#c0392b",strokeWidth:2,size:14},{name:"Target Bullseye",description:"Precision crosshair marker",icon:"",shape:"cross",fill:"#2c3e50",fillOpacity:1,stroke:"#e74c3c",strokeWidth:3,size:16}];function Vv(t){const e=[];try{new DOMParser().parseFromString(t,"text/xml").querySelectorAll("Rule").forEach((s,o)=>{const a=s.querySelector("Name"),h={name:(a==null?void 0:a.textContent)||`Rule ${o+1}`,symbolizer:{type:"polygon"}},p=s.querySelector("PolygonSymbolizer");p&&(h.symbolizer.type="polygon",p.querySelectorAll("Fill CssParameter").forEach(P=>{const O=P.getAttribute("name");O==="fill"&&(h.symbolizer.fill=P.textContent||"#3388ff"),O==="fill-opacity"&&(h.symbolizer.fillOpacity=parseFloat(P.textContent||"1"))}),p.querySelectorAll("Stroke CssParameter").forEach(P=>{const O=P.getAttribute("name");O==="stroke"&&(h.symbolizer.stroke=P.textContent||"#2266cc"),O==="stroke-width"&&(h.symbolizer.strokeWidth=parseFloat(P.textContent||"1")),O==="stroke-opacity"&&(h.symbolizer.strokeOpacity=parseFloat(P.textContent||"1"))}));const g=s.querySelector("LineSymbolizer");g&&(h.symbolizer.type="line",g.querySelectorAll("Stroke CssParameter").forEach(S=>{const P=S.getAttribute("name");P==="stroke"&&(h.symbolizer.stroke=S.textContent||"#3388ff"),P==="stroke-width"&&(h.symbolizer.strokeWidth=parseFloat(S.textContent||"2")),P==="stroke-opacity"&&(h.symbolizer.strokeOpacity=parseFloat(S.textContent||"1"))}));const y=s.querySelector("PointSymbolizer");if(y){h.symbolizer.type="point",h.symbolizer.pointShape="circle",h.symbolizer.pointSize=8,y.querySelectorAll("Fill CssParameter").forEach(O=>{const D=O.getAttribute("name");D==="fill"&&(h.symbolizer.fill=O.textContent||"#3388ff"),D==="fill-opacity"&&(h.symbolizer.fillOpacity=parseFloat(O.textContent||"1"))}),y.querySelectorAll("Stroke CssParameter").forEach(O=>{const D=O.getAttribute("name");D==="stroke"&&(h.symbolizer.stroke=O.textContent||"#2266cc"),D==="stroke-width"&&(h.symbolizer.strokeWidth=parseFloat(O.textContent||"1"))});const P=y.querySelector("Size");P&&(h.symbolizer.pointSize=parseFloat(P.textContent||"8"))}e.push(h)})}catch(n){console.error("Failed to parse SLD:",n)}return e.length>0?e:[{name:"Default",symbolizer:{type:"polygon",fill:"#3388ff",fillOpacity:.6,stroke:"#2266cc",strokeWidth:1}}]}function jMe(t,e){let n="";return e.forEach(r=>{let i="";if(r.symbolizer.type==="polygon")i=`
          <PolygonSymbolizer>
            <Fill>
              <CssParameter name="fill">${r.symbolizer.fill||"#3388ff"}</CssParameter>
              <CssParameter name="fill-opacity">${r.symbolizer.fillOpacity??.6}</CssParameter>
            </Fill>
            <Stroke>
              <CssParameter name="stroke">${r.symbolizer.stroke||"#2266cc"}</CssParameter>
              <CssParameter name="stroke-width">${r.symbolizer.strokeWidth||1}</CssParameter>
            </Stroke>
          </PolygonSymbolizer>`;else if(r.symbolizer.type==="line")i=`
          <LineSymbolizer>
            <Stroke>
              <CssParameter name="stroke">${r.symbolizer.stroke||"#3388ff"}</CssParameter>
              <CssParameter name="stroke-width">${r.symbolizer.strokeWidth||2}</CssParameter>
              <CssParameter name="stroke-opacity">${r.symbolizer.strokeOpacity??1}</CssParameter>
            </Stroke>
          </LineSymbolizer>`;else if(r.symbolizer.type==="point"){const s=r.symbolizer.rotation?`
              <Rotation>${r.symbolizer.rotation}</Rotation>`:"";let o=`
          <PointSymbolizer>
            <Graphic>
              <Mark>
                <WellKnownName>${r.symbolizer.pointShape||"circle"}</WellKnownName>
                <Fill>
                  <CssParameter name="fill">${r.symbolizer.fill||"#3388ff"}</CssParameter>
                  <CssParameter name="fill-opacity">${r.symbolizer.fillOpacity??1}</CssParameter>
                </Fill>
                <Stroke>
                  <CssParameter name="stroke">${r.symbolizer.stroke||"#2266cc"}</CssParameter>
                  <CssParameter name="stroke-width">${r.symbolizer.strokeWidth||1}</CssParameter>
                </Stroke>
              </Mark>
              <Size>${r.symbolizer.pointSize||8}</Size>${s}
            </Graphic>
          </PointSymbolizer>`;if(r.symbolizer.haloColor&&r.symbolizer.haloRadius){const a=(r.symbolizer.pointSize||8)+r.symbolizer.haloRadius*2;i=`
          <PointSymbolizer>
            <Graphic>
              <Mark>
                <WellKnownName>${r.symbolizer.pointShape||"circle"}</WellKnownName>
                <Fill>
                  <CssParameter name="fill">${r.symbolizer.haloColor}</CssParameter>
                  <CssParameter name="fill-opacity">0.4</CssParameter>
                </Fill>
              </Mark>
              <Size>${a}</Size>${s}
            </Graphic>
          </PointSymbolizer>`+o}else i=o}n+=`
        <Rule>
          <Name>${r.name}</Name>${i}
        </Rule>`}),`<?xml version="1.0" encoding="UTF-8"?>
<StyledLayerDescriptor version="1.0.0"
  xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"
  xmlns="http://www.opengis.net/sld"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NamedLayer>
    <Name>${t}</Name>
    <UserStyle>
      <Title>${t}</Title>
      <FeatureTypeStyle>${n}
      </FeatureTypeStyle>
    </UserStyle>
  </NamedLayer>
</StyledLayerDescriptor>`}function oA({value:t,onChange:e,label:n}){const r=Et("gray.200","gray.600");return u.jsxs(It,{children:[u.jsx(Mt,{fontSize:"sm",children:n}),u.jsxs(me,{children:[u.jsxs(de,{position:"relative",children:[u.jsx(de,{w:"40px",h:"40px",borderRadius:"full",bg:t,border:"2px solid",borderColor:r,cursor:"pointer",_hover:{borderColor:"kartoza.400"},transition:"border-color 0.2s"}),u.jsx(Rn,{type:"color",value:t,onChange:i=>e(i.target.value),position:"absolute",top:0,left:0,w:"40px",h:"40px",opacity:0,cursor:"pointer"})]}),u.jsx(Rn,{value:t,onChange:i=>e(i.target.value),size:"sm",w:"100px",fontFamily:"mono",borderColor:r})]})]})}function PMe({rule:t,onChange:e,onDelete:n}){const r=Et("white","gray.800"),i=Et("gray.200","gray.600"),[s,o]=L.useState(!1),a=h=>{e({...t,symbolizer:{...t.symbolizer,...h}})};return u.jsx(de,{p:4,bg:r,borderRadius:"lg",border:"1px solid",borderColor:i,children:u.jsxs(at,{spacing:4,align:"stretch",children:[u.jsxs(me,{justify:"space-between",children:[u.jsxs(It,{maxW:"200px",children:[u.jsx(Mt,{fontSize:"sm",children:"Rule Name"}),u.jsx(Rn,{size:"sm",value:t.name,onChange:h=>e({...t,name:h.target.value})})]}),u.jsxs(It,{maxW:"150px",children:[u.jsx(Mt,{fontSize:"sm",children:"Geometry Type"}),u.jsxs(Vr,{size:"sm",value:t.symbolizer.type,onChange:h=>a({type:h.target.value}),children:[u.jsx("option",{value:"polygon",children:"Polygon"}),u.jsx("option",{value:"line",children:"Line"}),u.jsx("option",{value:"point",children:"Point"})]})]}),u.jsx(wn,{"aria-label":"Delete rule",icon:u.jsx(nH,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:n})]}),u.jsx(Hn,{}),(t.symbolizer.type==="polygon"||t.symbolizer.type==="point")&&u.jsxs(de,{children:[u.jsx(te,{fontWeight:"600",fontSize:"sm",mb:2,children:"Fill"}),u.jsxs(me,{spacing:4,wrap:"wrap",children:[u.jsx(oA,{label:"Color",value:t.symbolizer.fill||"#3388ff",onChange:h=>a({fill:h})}),u.jsxs(It,{maxW:"150px",children:[u.jsx(Mt,{fontSize:"sm",children:"Opacity"}),u.jsxs(me,{children:[u.jsxs(Hl,{value:t.symbolizer.fillOpacity??1,min:0,max:1,step:.1,onChange:h=>a({fillOpacity:h}),children:[u.jsx(Xl,{children:u.jsx(Kl,{bg:"kartoza.500"})}),u.jsx(Gl,{})]}),u.jsxs(te,{fontSize:"sm",w:"40px",children:[((t.symbolizer.fillOpacity??1)*100).toFixed(0),"%"]})]})]})]})]}),u.jsxs(de,{children:[u.jsx(te,{fontWeight:"600",fontSize:"sm",mb:2,children:"Stroke"}),u.jsxs(me,{spacing:4,wrap:"wrap",children:[u.jsx(oA,{label:"Color",value:t.symbolizer.stroke||"#2266cc",onChange:h=>a({stroke:h})}),u.jsxs(It,{maxW:"100px",children:[u.jsx(Mt,{fontSize:"sm",children:"Width"}),u.jsxs(km,{size:"sm",value:t.symbolizer.strokeWidth||1,min:0,max:20,step:.5,onChange:(h,p)=>a({strokeWidth:p}),children:[u.jsx(Tm,{}),u.jsxs(Cm,{children:[u.jsx(Pm,{}),u.jsx(jm,{})]})]})]}),t.symbolizer.type==="line"&&u.jsxs(It,{maxW:"150px",children:[u.jsx(Mt,{fontSize:"sm",children:"Opacity"}),u.jsxs(me,{children:[u.jsxs(Hl,{value:t.symbolizer.strokeOpacity??1,min:0,max:1,step:.1,onChange:h=>a({strokeOpacity:h}),children:[u.jsx(Xl,{children:u.jsx(Kl,{bg:"kartoza.500"})}),u.jsx(Gl,{})]}),u.jsxs(te,{fontSize:"sm",w:"40px",children:[((t.symbolizer.strokeOpacity??1)*100).toFixed(0),"%"]})]})]})]})]}),t.symbolizer.type==="point"&&u.jsxs(de,{children:[u.jsx(te,{fontWeight:"600",fontSize:"sm",mb:2,children:"Point Symbol"}),u.jsxs(de,{mb:4,children:[u.jsx(te,{fontSize:"xs",color:"gray.500",mb:2,children:"Quick Presets"}),u.jsx(Sn,{flexWrap:"wrap",gap:2,children:sA.slice(0,10).map(h=>u.jsx(de,{title:`${h.name}: ${h.description}`,cursor:"pointer",p:1,borderRadius:"md",border:"2px solid",borderColor:t.symbolizer.fill===h.fill&&t.symbolizer.pointShape===h.shape?"kartoza.500":"transparent",_hover:{borderColor:"kartoza.300",bg:"gray.50"},onClick:()=>{a({pointShape:h.shape,fill:h.fill,fillOpacity:h.fillOpacity,stroke:h.stroke,strokeWidth:h.strokeWidth,pointSize:h.size,haloColor:h.haloColor,haloRadius:h.haloRadius,rotation:h.rotation})},children:u.jsxs(de,{w:"28px",h:"28px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",children:[h.haloColor&&u.jsx(de,{position:"absolute",w:`${h.size+(h.haloRadius||0)*2}px`,h:`${h.size+(h.haloRadius||0)*2}px`,borderRadius:h.shape==="circle"?"50%":h.shape==="triangle"?"0":"sm",bg:h.haloColor,opacity:.4,transform:h.rotation?`rotate(${h.rotation}deg)`:void 0,style:{clipPath:h.shape==="triangle"?"polygon(50% 0%, 0% 100%, 100% 100%)":void 0}}),u.jsx(de,{position:"relative",w:`${h.size}px`,h:`${h.size}px`,borderRadius:h.shape==="circle"?"50%":h.shape==="triangle"?"0":"sm",bg:h.fill,opacity:h.fillOpacity,border:`${h.strokeWidth}px solid ${h.stroke}`,transform:h.rotation?`rotate(${h.rotation}deg)`:void 0,style:{clipPath:h.shape==="triangle"?"polygon(50% 0%, 0% 100%, 100% 100%)":h.shape==="star"?"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)":h.shape==="cross"?"polygon(35% 0%, 65% 0%, 65% 35%, 100% 35%, 100% 65%, 65% 65%, 65% 100%, 35% 100%, 35% 65%, 0% 65%, 0% 35%, 35% 35%)":void 0}})]})},h.name))}),u.jsx(qc,{in:s,animateOpacity:!0,children:u.jsx(Sn,{flexWrap:"wrap",gap:2,mt:2,children:sA.slice(10).map(h=>u.jsx(de,{title:`${h.name}: ${h.description}`,cursor:"pointer",p:1,borderRadius:"md",border:"2px solid",borderColor:t.symbolizer.fill===h.fill&&t.symbolizer.pointShape===h.shape?"kartoza.500":"transparent",_hover:{borderColor:"kartoza.300",bg:"gray.50"},onClick:()=>{a({pointShape:h.shape,fill:h.fill,fillOpacity:h.fillOpacity,stroke:h.stroke,strokeWidth:h.strokeWidth,pointSize:h.size,haloColor:h.haloColor,haloRadius:h.haloRadius,rotation:h.rotation})},children:u.jsxs(de,{w:"28px",h:"28px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",children:[h.haloColor&&u.jsx(de,{position:"absolute",w:`${h.size+(h.haloRadius||0)*2}px`,h:`${h.size+(h.haloRadius||0)*2}px`,borderRadius:h.shape==="circle"?"50%":h.shape==="triangle"?"0":"sm",bg:h.haloColor,opacity:.4,transform:h.rotation?`rotate(${h.rotation}deg)`:void 0,style:{clipPath:h.shape==="triangle"?"polygon(50% 0%, 0% 100%, 100% 100%)":void 0}}),u.jsx(de,{position:"relative",w:`${h.size}px`,h:`${h.size}px`,borderRadius:h.shape==="circle"?"50%":h.shape==="triangle"?"0":"sm",bg:h.fill,opacity:h.fillOpacity,border:`${h.strokeWidth}px solid ${h.stroke}`,transform:h.rotation?`rotate(${h.rotation}deg)`:void 0,style:{clipPath:h.shape==="triangle"?"polygon(50% 0%, 0% 100%, 100% 100%)":h.shape==="star"?"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)":h.shape==="cross"?"polygon(35% 0%, 65% 0%, 65% 35%, 100% 35%, 100% 65%, 65% 65%, 65% 100%, 35% 100%, 35% 65%, 0% 65%, 0% 35%, 35% 35%)":void 0}})]})},h.name))})}),u.jsx(vt,{size:"xs",variant:"ghost",mt:2,onClick:()=>o(!s),rightIcon:u.jsx(Le,{as:s?N0:fc}),children:s?"Show Less":`Show ${sA.length-10} More`})]}),u.jsx(Hn,{my:3}),u.jsxs(me,{spacing:4,wrap:"wrap",children:[u.jsxs(It,{maxW:"150px",children:[u.jsx(Mt,{fontSize:"sm",children:"Shape"}),u.jsxs(Vr,{size:"sm",value:t.symbolizer.pointShape||"circle",onChange:h=>a({pointShape:h.target.value}),children:[u.jsx("option",{value:"circle",children:"Circle"}),u.jsx("option",{value:"square",children:"Square"}),u.jsx("option",{value:"triangle",children:"Triangle"}),u.jsx("option",{value:"star",children:"Star"}),u.jsx("option",{value:"cross",children:"Cross"}),u.jsx("option",{value:"x",children:"X"})]})]}),u.jsxs(It,{maxW:"100px",children:[u.jsx(Mt,{fontSize:"sm",children:"Size"}),u.jsxs(km,{size:"sm",value:t.symbolizer.pointSize||8,min:1,max:50,onChange:(h,p)=>a({pointSize:p}),children:[u.jsx(Tm,{}),u.jsxs(Cm,{children:[u.jsx(Pm,{}),u.jsx(jm,{})]})]})]}),u.jsxs(It,{maxW:"100px",children:[u.jsx(Mt,{fontSize:"sm",children:"Rotation"}),u.jsxs(km,{size:"sm",value:t.symbolizer.rotation||0,min:0,max:360,step:15,onChange:(h,p)=>a({rotation:p}),children:[u.jsx(Tm,{}),u.jsxs(Cm,{children:[u.jsx(Pm,{}),u.jsx(jm,{})]})]})]})]}),u.jsxs(de,{mt:4,children:[u.jsx(te,{fontWeight:"600",fontSize:"sm",mb:2,children:"Halo / Glow Effect"}),u.jsxs(me,{spacing:4,wrap:"wrap",children:[u.jsx(oA,{label:"Halo Color",value:t.symbolizer.haloColor||"#ffffff",onChange:h=>a({haloColor:h})}),u.jsxs(It,{maxW:"120px",children:[u.jsx(Mt,{fontSize:"sm",children:"Halo Radius"}),u.jsxs(me,{children:[u.jsxs(Hl,{value:t.symbolizer.haloRadius||0,min:0,max:10,step:1,onChange:h=>a({haloRadius:h}),children:[u.jsx(Xl,{children:u.jsx(Kl,{bg:"kartoza.500"})}),u.jsx(Gl,{})]}),u.jsxs(te,{fontSize:"sm",w:"30px",children:[t.symbolizer.haloRadius||0,"px"]})]})]}),t.symbolizer.haloRadius&&t.symbolizer.haloRadius>0&&u.jsx(vt,{size:"xs",variant:"ghost",colorScheme:"red",onClick:()=>a({haloRadius:0,haloColor:void 0}),children:"Remove Halo"})]})]})]}),u.jsxs(de,{children:[u.jsx(te,{fontWeight:"600",fontSize:"sm",mb:2,children:"Preview"}),u.jsxs(de,{w:"100px",h:"60px",borderRadius:"md",border:"1px solid",borderColor:i,display:"flex",alignItems:"center",justifyContent:"center",bg:"gray.100",children:[t.symbolizer.type==="polygon"&&u.jsx(de,{w:"60px",h:"40px",borderRadius:"sm",bg:t.symbolizer.fill,opacity:t.symbolizer.fillOpacity,border:`${t.symbolizer.strokeWidth}px solid ${t.symbolizer.stroke}`}),t.symbolizer.type==="line"&&u.jsx(de,{w:"60px",h:`${Math.max(2,t.symbolizer.strokeWidth||2)}px`,bg:t.symbolizer.stroke,opacity:t.symbolizer.strokeOpacity}),t.symbolizer.type==="point"&&u.jsxs(de,{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",children:[t.symbolizer.haloColor&&t.symbolizer.haloRadius&&t.symbolizer.haloRadius>0&&u.jsx(de,{position:"absolute",w:`${(t.symbolizer.pointSize||8)+t.symbolizer.haloRadius*2}px`,h:`${(t.symbolizer.pointSize||8)+t.symbolizer.haloRadius*2}px`,borderRadius:t.symbolizer.pointShape==="circle"?"50%":t.symbolizer.pointShape==="triangle"?"0":"sm",bg:t.symbolizer.haloColor,opacity:.4,transform:t.symbolizer.rotation?`rotate(${t.symbolizer.rotation}deg)`:void 0,style:{clipPath:t.symbolizer.pointShape==="triangle"?"polygon(50% 0%, 0% 100%, 100% 100%)":t.symbolizer.pointShape==="star"?"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)":t.symbolizer.pointShape==="cross"?"polygon(35% 0%, 65% 0%, 65% 35%, 100% 35%, 100% 65%, 65% 65%, 65% 100%, 35% 100%, 35% 65%, 0% 65%, 0% 35%, 35% 35%)":t.symbolizer.pointShape==="x"?"polygon(10% 0%, 50% 40%, 90% 0%, 100% 10%, 60% 50%, 100% 90%, 90% 100%, 50% 60%, 10% 100%, 0% 90%, 40% 50%, 0% 10%)":void 0}}),u.jsx(de,{position:"relative",w:`${t.symbolizer.pointSize||8}px`,h:`${t.symbolizer.pointSize||8}px`,borderRadius:t.symbolizer.pointShape==="circle"?"50%":t.symbolizer.pointShape==="triangle"?"0":"sm",bg:t.symbolizer.fill,opacity:t.symbolizer.fillOpacity,border:`${t.symbolizer.strokeWidth}px solid ${t.symbolizer.stroke}`,transform:t.symbolizer.rotation?`rotate(${t.symbolizer.rotation}deg)`:void 0,style:{clipPath:t.symbolizer.pointShape==="triangle"?"polygon(50% 0%, 0% 100%, 100% 100%)":t.symbolizer.pointShape==="star"?"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)":t.symbolizer.pointShape==="cross"?"polygon(35% 0%, 65% 0%, 65% 35%, 100% 35%, 100% 65%, 65% 65%, 65% 100%, 35% 100%, 35% 65%, 0% 65%, 0% 35%, 35% 35%)":t.symbolizer.pointShape==="x"?"polygon(10% 0%, 50% 40%, 90% 0%, 100% 10%, 60% 50%, 100% 90%, 90% 100%, 50% 60%, 10% 100%, 0% 90%, 40% 50%, 0% 10%)":void 0}})]})]})]})]})})}function OMe(){var Se,Pe,qe,ke,st,ft;const t=St(_e=>_e.activeDialog),e=St(_e=>_e.dialogData),n=St(_e=>_e.closeDialog),r=ha(),i=da(),s=t==="style",o=(e==null?void 0:e.mode)==="edit",a=(Se=e==null?void 0:e.data)==null?void 0:Se.connectionId,h=(Pe=e==null?void 0:e.data)==null?void 0:Pe.workspace,p=(qe=e==null?void 0:e.data)==null?void 0:qe.name,g=(ke=e==null?void 0:e.data)==null?void 0:ke.previewLayer,[y,b]=L.useState(""),[S,P]=L.useState("sld"),[O,D]=L.useState(""),[z,F]=L.useState([]),[R,N]=L.useState(0),[Q,q]=L.useState(!1),[X,K]=L.useState(null),[ne,J]=L.useState(null),{isOpen:ae,onToggle:Ee}=Lm(),[Ce,$e]=L.useState(""),[We,Fe]=L.useState("equal-interval"),[we,Ie]=L.useState(5),[Qe,se]=L.useState("blue-to-red"),[Re,Oe]=L.useState("polygon"),[oe,nt]=L.useState(""),{isOpen:Ne,onToggle:tt}=Lm(),[Ye,_t]=L.useState("colormap"),[At,Ot]=L.useState("rainbow"),[bt,rt]=L.useState(0),[tn,kt]=L.useState(1e3),[it,ze]=L.useState(1),[ut,qt]=L.useState("ramp"),[Ct,$t]=L.useState(315),[Yn,br]=L.useState(45),[ur,Ar]=L.useState(1),[_r,ct]=L.useState("normalize"),[Tt,Me]=L.useState(1),Xt=Et("gray.50","gray.900"),pt=Et("linear-gradient(90deg, #dea037 0%, #417d9b 100%)","linear-gradient(90deg, #dea037 0%, #417d9b 100%)"),{data:zt,isLoading:ir}=er({queryKey:["style",a,h,p],queryFn:()=>yH(a,h,p),enabled:s&&o&&!!p});L.useEffect(()=>{s&&(o&&zt?(b(zt.name),P(zt.format),D(zt.content),zt.format==="sld"&&F(Vv(zt.content))):o||(b(""),P("sld"),D(WS),F(Vv(WS))),q(!1),K(null))},[s,o,zt]),L.useEffect(()=>{if(S==="sld"&&R===0&&z.length>0){const _e=jMe(y||"NewStyle",z);_e!==O&&(D(_e),q(!0))}},[z,y]);const yt=L.useCallback(()=>{var _e;if(S==="sld")try{const dn=new DOMParser().parseFromString(O,"text/xml").querySelector("parsererror");return dn?(K("Invalid XML: "+((_e=dn.textContent)==null?void 0:_e.slice(0,100))),!1):(K(null),!0)}catch{return K("Failed to parse SLD"),!1}return K(null),!0},[O,S]),_n=Au({mutationFn:()=>OSe(a,h,p,O,S),onSuccess:()=>{i.invalidateQueries({queryKey:["styles",a,h]}),i.invalidateQueries({queryKey:["style",a,h,p]}),r({title:"Style updated",status:"success",duration:3e3}),q(!1)},onError:_e=>{r({title:"Failed to update style",description:_e.message,status:"error",duration:5e3})}}),Kt=Au({mutationFn:()=>ASe(a,h,y,O,S),onSuccess:()=>{i.invalidateQueries({queryKey:["styles",a,h]}),r({title:"Style created",status:"success",duration:3e3}),n()},onError:_e=>{r({title:"Failed to create style",description:_e.message,status:"error",duration:5e3})}}),tr=()=>{if(!yt()){r({title:"Please fix validation errors",status:"warning",duration:3e3});return}if(!o&&!y.trim()){r({title:"Style name is required",status:"warning",duration:3e3});return}o?_n.mutate():Kt.mutate()},qr=_e=>{D(_e),q(!0),S==="sld"&&F(Vv(_e))},sn=_e=>{_e!==S&&(_e==="sld"?(D(WS),F(Vv(WS))):(D(xMe),F([])),P(_e),q(!0))},Wi=()=>{F([...z,{name:`Rule ${z.length+1}`,symbolizer:{type:"polygon",fill:"#3388ff",fillOpacity:.6,stroke:"#2266cc",strokeWidth:1}}])},Rs=(_e,ht)=>{const Wt=[...z];Wt[_e]=ht,F(Wt),q(!0)},Ui=_e=>{if(z.length<=1){r({title:"Cannot delete the last rule",status:"warning",duration:3e3});return}F(z.filter((ht,Wt)=>Wt!==_e)),q(!0)},vs=async()=>{if(!g){r({title:"No preview layer specified",status:"info",duration:3e3});return}try{const{url:_e}=await Cl({connId:a,workspace:h,layerName:g,storeName:"",storeType:"datastore",layerType:"vector"});J(_e)}catch{r({title:"Failed to start preview",status:"error",duration:3e3})}},xe=()=>{const _e=oe.split(",").map(Xn=>parseFloat(Xn.trim())).filter(Xn=>!isNaN(Xn));if(_e.length<2){r({title:"Need more sample values",description:"Please enter at least 2 numeric values separated by commas",status:"warning",duration:3e3});return}const ht=CMe(_e,we,We),Wt=UN(iA[Qe],we),dn=TMe(y||"ClassifiedStyle",Ce,ht,Wt,Re);D(dn),P("sld"),F(Vv(dn)),q(!0),N(1),r({title:"Classified style generated",description:`Created ${we} classes using ${We.replace("-"," ")}`,status:"success",duration:3e3})},U=()=>{var dn;const _e=y||"RasterStyle",ht=((dn=ay[At])==null?void 0:dn.colors)||ay.rainbow.colors;let Wt;switch(Ye){case"colormap":Wt=WN(_e,ht,bt,tn,ut,it);break;case"hillshade":Wt=vMe(_e,Ct,Yn,ur,it);break;case"hillshade-color":Wt=bMe(_e,ht,bt,tn,Ct,Yn,ur,it);break;case"contrast":Wt=_Me(_e,_r,Tt,it);break;default:Wt=WN(_e,ht,bt,tn,"ramp",it)}D(Wt),P("sld"),F([]),q(!0),N(1),r({title:"Raster style generated",description:`Created ${Ye==="hillshade"?"hillshade":Ye==="hillshade-color"?"hillshade with colors":Ye==="contrast"?"contrast enhanced":"color map"} style`,status:"success",duration:3e3})},G=_e=>{$t(_e.azimuth),br(_e.altitude),Ar(_e.zFactor)},re=L.useMemo(()=>S==="sld"?[MIe()]:[yMe()],[S]),pe=ir||_n.isPending||Kt.isPending;return u.jsxs(es,{isOpen:s,onClose:n,size:"6xl",scrollBehavior:"inside",children:[u.jsx(ts,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(gs,{maxH:"90vh",borderRadius:"xl",overflow:"hidden",children:[u.jsx(de,{bg:pt,color:"white",px:6,py:4,children:u.jsxs(Sn,{align:"center",justify:"space-between",children:[u.jsxs(me,{spacing:3,children:[u.jsx(Le,{as:na,boxSize:6}),u.jsxs(de,{children:[u.jsx(te,{fontSize:"lg",fontWeight:"600",children:o?"Edit Style":"Create Style"}),u.jsx(te,{fontSize:"sm",opacity:.9,children:o?`Editing ${p}`:"Create a new map style"})]})]}),u.jsxs(me,{children:[Q&&u.jsx(Lt,{colorScheme:"yellow",variant:"solid",children:"Unsaved Changes"}),u.jsx(Lt,{colorScheme:S==="sld"?"blue":"purple",variant:"solid",children:S.toUpperCase()})]})]})}),u.jsx(Is,{color:"white"}),u.jsx(ys,{p:0,bg:Xt,children:ir?u.jsx(Sn,{h:"400px",align:"center",justify:"center",children:u.jsx(Cr,{size:"xl",color:"kartoza.500"})}):u.jsxs(Sn,{h:"70vh",children:[u.jsx(de,{w:"250px",borderRight:"1px solid",borderColor:"gray.200",p:4,overflowY:"auto",children:u.jsxs(at,{spacing:4,align:"stretch",children:[!o&&u.jsxs(It,{isRequired:!0,children:[u.jsx(Mt,{children:"Style Name"}),u.jsx(Rn,{value:y,onChange:_e=>{b(_e.target.value),q(!0)},placeholder:"my-style"})]}),u.jsxs(It,{children:[u.jsx(Mt,{children:"Format"}),u.jsxs(Vr,{value:S,onChange:_e=>sn(_e.target.value),children:[u.jsx("option",{value:"sld",children:"SLD (Styled Layer Descriptor)"}),u.jsx("option",{value:"css",children:"CSS (GeoServer CSS)"})]})]}),u.jsx(Hn,{}),S==="sld"&&u.jsxs(u.Fragment,{children:[u.jsx(te,{fontWeight:"600",children:"Quick Actions"}),u.jsx(vt,{size:"sm",leftIcon:u.jsx(Le,{as:rH}),variant:"outline",onClick:()=>F([{name:"Polygon",symbolizer:{type:"polygon",fill:"#3388ff",fillOpacity:.6,stroke:"#2266cc",strokeWidth:1}}]),children:"Polygon Style"}),u.jsx(vt,{size:"sm",leftIcon:u.jsx(Le,{as:nH}),variant:"outline",onClick:()=>F([{name:"Line",symbolizer:{type:"line",stroke:"#3388ff",strokeWidth:2,strokeOpacity:1}}]),children:"Line Style"}),u.jsx(vt,{size:"sm",leftIcon:u.jsx(Le,{as:Swe}),variant:"outline",onClick:()=>F([{name:"Point",symbolizer:{type:"point",fill:"#3388ff",fillOpacity:1,stroke:"#2266cc",strokeWidth:1,pointShape:"circle",pointSize:8}}]),children:"Point Style"}),u.jsx(Hn,{}),u.jsx(te,{fontWeight:"600",children:"Classified Style"}),u.jsx(vt,{size:"sm",leftIcon:u.jsx(Le,{as:Vf}),rightIcon:u.jsx(Le,{as:ae?N0:fc}),variant:"outline",colorScheme:"kartoza",onClick:Ee,children:"Choropleth Wizard"}),u.jsx(qc,{in:ae,animateOpacity:!0,children:u.jsxs(at,{spacing:3,p:3,bg:"gray.50",borderRadius:"md",align:"stretch",children:[u.jsxs(It,{size:"sm",children:[u.jsx(Mt,{fontSize:"xs",children:"Attribute"}),u.jsx(Rn,{size:"sm",value:Ce,onChange:_e=>$e(_e.target.value),placeholder:"population"})]}),u.jsxs(It,{size:"sm",children:[u.jsx(Mt,{fontSize:"xs",children:"Method"}),u.jsxs(Vr,{size:"sm",value:We,onChange:_e=>Fe(_e.target.value),children:[u.jsx("option",{value:"equal-interval",children:"Equal Interval"}),u.jsx("option",{value:"quantile",children:"Quantile"}),u.jsx("option",{value:"jenks",children:"Jenks Natural Breaks"}),u.jsx("option",{value:"pretty",children:"Pretty Breaks"})]})]}),u.jsxs(It,{size:"sm",children:[u.jsxs(Mt,{fontSize:"xs",children:["Classes: ",we]}),u.jsxs(Hl,{value:we,onChange:_e=>Ie(_e),min:3,max:10,step:1,children:[u.jsx(Xl,{children:u.jsx(Kl,{bg:"kartoza.500"})}),u.jsx(Gl,{})]})]}),u.jsxs(It,{size:"sm",children:[u.jsx(Mt,{fontSize:"xs",children:"Color Ramp"}),u.jsx(Vr,{size:"sm",value:Qe,onChange:_e=>se(_e.target.value),children:Object.keys(iA).map(_e=>u.jsx("option",{value:_e,children:_e.replace(/-/g," ")},_e))}),u.jsx(me,{mt:1,spacing:1,children:UN(iA[Qe],we).map((_e,ht)=>u.jsx(de,{w:"16px",h:"12px",bg:_e,borderRadius:"sm"},ht))})]}),u.jsxs(It,{size:"sm",children:[u.jsx(Mt,{fontSize:"xs",children:"Geometry Type"}),u.jsxs(Vr,{size:"sm",value:Re,onChange:_e=>Oe(_e.target.value),children:[u.jsx("option",{value:"polygon",children:"Polygon"}),u.jsx("option",{value:"line",children:"Line"}),u.jsx("option",{value:"point",children:"Point"})]})]}),u.jsxs(It,{size:"sm",children:[u.jsx(Mt,{fontSize:"xs",children:"Sample Values (comma separated)"}),u.jsx(Rn,{size:"sm",value:oe,onChange:_e=>nt(_e.target.value),placeholder:"10, 25, 50, 100, 200"})]}),u.jsx(vt,{size:"sm",colorScheme:"kartoza",onClick:xe,isDisabled:!Ce||!oe,children:"Generate Style"})]})}),u.jsx(Hn,{}),u.jsx(te,{fontWeight:"600",children:"Raster Style"}),u.jsx(vt,{size:"sm",leftIcon:u.jsx(Le,{as:Qc}),rightIcon:u.jsx(Le,{as:Ne?N0:fc}),variant:"outline",colorScheme:"purple",onClick:tt,children:"Raster Wizard"}),u.jsx(qc,{in:Ne,animateOpacity:!0,children:u.jsxs(at,{spacing:3,p:3,bg:"purple.50",borderRadius:"md",align:"stretch",children:[u.jsxs(It,{size:"sm",children:[u.jsx(Mt,{fontSize:"xs",children:"Style Type"}),u.jsxs(Vr,{size:"sm",value:Ye,onChange:_e=>_t(_e.target.value),children:[u.jsx("option",{value:"colormap",children:"Color Map (Graduated)"}),u.jsx("option",{value:"hillshade",children:"Hillshade Only"}),u.jsx("option",{value:"hillshade-color",children:"Hillshade + Colors"}),u.jsx("option",{value:"contrast",children:"Contrast Enhancement"})]})]}),(Ye==="colormap"||Ye==="hillshade-color")&&u.jsxs(u.Fragment,{children:[u.jsxs(It,{size:"sm",children:[u.jsx(Mt,{fontSize:"xs",children:"Color Ramp"}),u.jsx(Vr,{size:"sm",value:At,onChange:_e=>Ot(_e.target.value),children:Object.entries(ay).map(([_e,ht])=>u.jsx("option",{value:_e,children:ht.name},_e))}),u.jsx(me,{mt:1,spacing:0,children:(st=ay[At])==null?void 0:st.colors.map((_e,ht)=>u.jsx(de,{flex:"1",h:"8px",bg:_e,borderRadius:ht===0?"sm 0 0 sm":ht===ay[At].colors.length-1?"0 sm sm 0":"0"},ht))}),u.jsx(te,{fontSize:"xs",color:"gray.500",mt:1,children:(ft=ay[At])==null?void 0:ft.description})]}),u.jsxs(It,{size:"sm",children:[u.jsx(Mt,{fontSize:"xs",children:"Min Value"}),u.jsx(Rn,{size:"sm",type:"number",value:bt,onChange:_e=>rt(parseFloat(_e.target.value)||0)})]}),u.jsxs(It,{size:"sm",children:[u.jsx(Mt,{fontSize:"xs",children:"Max Value"}),u.jsx(Rn,{size:"sm",type:"number",value:tn,onChange:_e=>kt(parseFloat(_e.target.value)||1e3)})]}),Ye==="colormap"&&u.jsxs(It,{size:"sm",children:[u.jsx(Mt,{fontSize:"xs",children:"Color Map Type"}),u.jsxs(Vr,{size:"sm",value:ut,onChange:_e=>qt(_e.target.value),children:[u.jsx("option",{value:"ramp",children:"Ramp (Smooth gradient)"}),u.jsx("option",{value:"intervals",children:"Intervals (Discrete)"}),u.jsx("option",{value:"values",children:"Values (Exact match)"})]})]})]}),(Ye==="hillshade"||Ye==="hillshade-color")&&u.jsxs(u.Fragment,{children:[u.jsxs(It,{size:"sm",children:[u.jsx(Mt,{fontSize:"xs",children:"Hillshade Preset"}),u.jsx(Vr,{size:"sm",placeholder:"Select preset...",onChange:_e=>{const ht=VN.find(Wt=>Wt.name===_e.target.value);ht&&G(ht)},children:VN.map(_e=>u.jsx("option",{value:_e.name,children:_e.name},_e.name))})]}),u.jsxs(It,{size:"sm",children:[u.jsxs(Mt,{fontSize:"xs",children:["Sun Azimuth: ",Ct,""]}),u.jsxs(Hl,{value:Ct,onChange:_e=>$t(_e),min:0,max:360,step:15,children:[u.jsx(Xl,{children:u.jsx(Kl,{bg:"purple.500"})}),u.jsx(Gl,{})]})]}),u.jsxs(It,{size:"sm",children:[u.jsxs(Mt,{fontSize:"xs",children:["Sun Altitude: ",Yn,""]}),u.jsxs(Hl,{value:Yn,onChange:_e=>br(_e),min:0,max:90,step:5,children:[u.jsx(Xl,{children:u.jsx(Kl,{bg:"purple.500"})}),u.jsx(Gl,{})]})]}),u.jsxs(It,{size:"sm",children:[u.jsxs(Mt,{fontSize:"xs",children:["Z Factor: ",ur]}),u.jsxs(Hl,{value:ur,onChange:_e=>Ar(_e),min:.1,max:5,step:.1,children:[u.jsx(Xl,{children:u.jsx(Kl,{bg:"purple.500"})}),u.jsx(Gl,{})]})]})]}),Ye==="contrast"&&u.jsxs(u.Fragment,{children:[u.jsxs(It,{size:"sm",children:[u.jsx(Mt,{fontSize:"xs",children:"Enhancement Method"}),u.jsxs(Vr,{size:"sm",value:_r,onChange:_e=>ct(_e.target.value),children:[u.jsx("option",{value:"normalize",children:"Normalize (Stretch to min/max)"}),u.jsx("option",{value:"histogram",children:"Histogram Equalization"}),u.jsx("option",{value:"none",children:"None"})]})]}),u.jsxs(It,{size:"sm",children:[u.jsxs(Mt,{fontSize:"xs",children:["Gamma: ",Tt.toFixed(1)]}),u.jsxs(Hl,{value:Tt,onChange:_e=>Me(_e),min:.1,max:3,step:.1,children:[u.jsx(Xl,{children:u.jsx(Kl,{bg:"purple.500"})}),u.jsx(Gl,{})]})]})]}),u.jsxs(It,{size:"sm",children:[u.jsxs(Mt,{fontSize:"xs",children:["Opacity: ",(it*100).toFixed(0),"%"]}),u.jsxs(Hl,{value:it,onChange:_e=>ze(_e),min:0,max:1,step:.05,children:[u.jsx(Xl,{children:u.jsx(Kl,{bg:"purple.500"})}),u.jsx(Gl,{})]})]}),u.jsx(vt,{size:"sm",colorScheme:"purple",onClick:U,children:"Generate Raster Style"})]})})]}),g&&u.jsxs(u.Fragment,{children:[u.jsx(Hn,{}),u.jsx(te,{fontWeight:"600",children:"Preview"}),u.jsxs(te,{fontSize:"sm",color:"gray.600",children:["Layer: ",g]}),u.jsx(vt,{size:"sm",leftIcon:u.jsx(Le,{as:Pi}),colorScheme:"kartoza",onClick:vs,children:"Preview on Map"})]})]})}),u.jsx(de,{flex:"1",display:"flex",flexDirection:"column",children:u.jsxs(cx,{index:R,onChange:N,flex:"1",display:"flex",flexDirection:"column",children:[u.jsxs(ux,{px:4,pt:2,children:[S==="sld"&&u.jsxs(fo,{children:[u.jsx(Le,{as:na,mr:2}),"Visual Editor"]}),u.jsxs(fo,{children:[u.jsx(Le,{as:Da,mr:2}),"Code Editor"]}),ne&&u.jsxs(fo,{children:[u.jsx(Le,{as:Pi,mr:2}),"Map Preview"]})]}),u.jsxs(T_,{flex:"1",overflow:"hidden",children:[S==="sld"&&u.jsx(Ra,{h:"100%",overflowY:"auto",p:4,children:u.jsxs(at,{spacing:4,align:"stretch",children:[X&&u.jsxs(go,{status:"warning",borderRadius:"md",children:[u.jsx(yo,{}),X]}),z.map((_e,ht)=>u.jsx(PMe,{rule:_e,onChange:Wt=>Rs(ht,Wt),onDelete:()=>Ui(ht)},ht)),u.jsx(vt,{leftIcon:u.jsx(Le,{as:na}),onClick:Wi,variant:"outline",colorScheme:"kartoza",children:"Add Rule"})]})}),u.jsx(Ra,{h:"100%",p:0,children:u.jsxs(de,{h:"100%",position:"relative",children:[X&&u.jsxs(go,{status:"warning",position:"absolute",top:0,left:0,right:0,zIndex:1,children:[u.jsx(yo,{}),X]}),u.jsx(rD,{value:O,height:"100%",extensions:re,onChange:qr,onBlur:yt,theme:"light",style:{height:"100%"}})]})}),ne&&u.jsx(Ra,{h:"100%",p:0,children:u.jsx("iframe",{src:ne,style:{width:"100%",height:"100%",border:"none"},title:"Style Preview"})})]})]})})]})}),u.jsxs(Fo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.200",bg:"gray.50",children:[u.jsx(vt,{variant:"ghost",onClick:n,children:"Cancel"}),u.jsx(vt,{colorScheme:"kartoza",leftIcon:u.jsx(Le,{as:Pk}),onClick:tr,isLoading:pe,isDisabled:!Q&&o,children:o?"Save Changes":"Create Style"})]})]})]})}Cesium.Ion.defaultAccessToken="";function AMe(){var we,Ie,Qe,se;const{activeDialog:t,dialogData:e,closeDialog:n}=St(),r=L.useRef(null),i=L.useRef(null),[s,o]=L.useState(!0),[a,h]=L.useState("3d"),[p,g]=L.useState([]),[y,b]=L.useState(null),[S,P]=L.useState(!1),[O,D]=L.useState(0),[z,F]=L.useState(!1),R=t==="globe3d";L.useEffect(()=>{R&&D(Re=>Re+1)},[R]);const N="linear-gradient(90deg, #dea037 0%, #417d9b 100%)",Q=Et("white","gray.800"),q=Et("gray.50","gray.700"),X=Et("gray.200","gray.600"),K=(we=e==null?void 0:e.data)==null?void 0:we.connectionId,ne=(Ie=e==null?void 0:e.data)==null?void 0:Ie.workspace,J=(Qe=e==null?void 0:e.data)==null?void 0:Qe.name,ae=(se=e==null?void 0:e.data)==null?void 0:se.type,Ee=L.useCallback(()=>!K||!ne?null:ae==="layergroup"?`/api/terria/story/${K}/${ne}/${J}`:`/api/terria/layer/${K}/${ne}/${J}`,[K,ne,J,ae]);L.useEffect(()=>{if(!R||!r.current)return;if(i.current){try{i.current.destroy()}catch(oe){console.warn("[Globe3D] Error destroying previous viewer:",oe)}i.current=null}o(!0),b(null);let Re=!0;const Oe=setTimeout(async()=>{if(!(!Re||!r.current))try{console.log("[Globe3D] Initializing Cesium viewer...");const oe=new Cesium.Viewer(r.current,{baseLayerPicker:!1,geocoder:!1,homeButton:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,animation:!1,navigationHelpButton:!1,fullscreenButton:!1,vrButton:!1,infoBox:!1,creditContainer:document.createElement("div")});oe.imageryLayers.removeAll(),oe.terrainProvider=new Cesium.EllipsoidTerrainProvider,console.log("[Globe3D] Viewer created, adding base layer..."),oe.imageryLayers.addImageryProvider(new Cesium.UrlTemplateImageryProvider({url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",subdomains:["a","b","c","d"],credit:new Cesium.Credit("Map tiles by CartoDB, under CC BY 3.0. Data by OpenStreetMap, under ODbL.")})),console.log("[Globe3D] CartoDB base layer added"),i.current=oe;const nt=Ee();if(nt){const Ne=await fetch(nt);if(!Ne.ok)throw new Error(`Failed to fetch catalog: ${Ne.status}`);const tt=await Ne.json(),Ye=[],_t=At=>{if(At.type==="wms")try{const Ot=new Cesium.WebMapServiceImageryProvider({url:At.url,layers:At.layers||At.name,parameters:{transparent:!0,format:"image/png"}}),bt=oe.imageryLayers.addImageryProvider(Ot);if(bt.alpha=At.opacity||1,Ye.push({name:At.name,layer:bt,visible:!0,opacity:bt.alpha}),At.rectangle){const rt=At.rectangle;oe.camera.flyTo({destination:Cesium.Rectangle.fromDegrees(rt.west,rt.south,rt.east,rt.north),duration:1.5})}}catch(Ot){console.error("Failed to add WMS layer:",At.name,Ot)}else At.type==="group"&&Array.isArray(At.members)&&At.members.forEach(Ot=>_t(Ot))};tt.catalog?tt.catalog.forEach(At=>_t(At)):(tt.type==="wms"||tt.type==="group")&&_t(tt),Re&&g(Ye)}Re&&o(!1)}catch(oe){console.error("Failed to initialize Cesium viewer:",oe),Re&&(b(oe instanceof Error?oe.message:"Failed to initialize viewer"),o(!1))}},200);return()=>{if(Re=!1,clearTimeout(Oe),i.current){try{i.current.destroy()}catch(oe){console.warn("[Globe3D] Error destroying viewer:",oe)}i.current=null}g([])}},[R,Ee,O]),L.useEffect(()=>{if(i.current)switch(a){case"3d":i.current.scene.mode=Cesium.SceneMode.SCENE3D;break;case"2d":i.current.scene.mode=Cesium.SceneMode.SCENE2D;break;case"columbus":i.current.scene.mode=Cesium.SceneMode.COLUMBUS_VIEW;break}},[a]);const Ce=(Re,Oe)=>{p[Re]&&(p[Re].layer.show=Oe,g(oe=>oe.map((nt,Ne)=>Ne===Re?{...nt,visible:Oe}:nt)))},$e=(Re,Oe)=>{p[Re]&&(p[Re].layer.alpha=Oe,g(oe=>oe.map((nt,Ne)=>Ne===Re?{...nt,opacity:Oe}:nt)))},We=()=>{if(!i.current)return;const Oe=i.current.imageryLayers;for(let oe=0;oe<Oe.length;oe++){const nt=Oe.get(oe),Ne=nt.show;nt.show=!1,setTimeout(()=>{nt.show=Ne},100)}},Fe=()=>{P(Re=>!Re)};return R?u.jsxs(es,{isOpen:R,onClose:n,size:S?"full":"6xl",isCentered:!S,children:[u.jsx(ts,{bg:"blackAlpha.700"}),u.jsxs(gs,{bg:Q,maxH:S?"100vh":"90vh",h:S?"100vh":"85vh",overflow:"hidden",children:[u.jsx(ax,{bg:N,color:"white",py:3,borderTopRadius:S?0:"md",children:u.jsxs(me,{justify:"space-between",children:[u.jsxs(at,{align:"start",spacing:0,children:[u.jsxs(me,{children:[u.jsx(Le,{as:Os}),u.jsx(te,{fontWeight:"bold",children:"3D Globe Viewer"}),u.jsx(Lt,{colorScheme:"whiteAlpha",variant:"solid",fontSize:"xs",children:ae==="layergroup"?"Layer Group":"Layer"})]}),u.jsxs(te,{fontSize:"xs",color:"whiteAlpha.800",children:[ne,":",J]})]}),u.jsxs(me,{spacing:2,children:[p.length>0&&u.jsxs(Df,{children:[u.jsx(Lf,{as:vt,size:"sm",variant:"solid",bg:"whiteAlpha.200",color:"white",_hover:{bg:"whiteAlpha.300"},_active:{bg:"whiteAlpha.400"},rightIcon:u.jsx(fc,{}),leftIcon:u.jsx(mi,{}),maxW:"180px",children:u.jsxs(te,{isTruncated:!0,fontSize:"xs",children:[p.length," Layer",p.length!==1?"s":""]})}),u.jsx(Ff,{color:"gray.800",zIndex:1e3,maxH:"300px",overflowY:"auto",children:p.map((Re,Oe)=>u.jsx(ml,{onClick:()=>Ce(Oe,!Re.visible),closeOnSelect:!1,children:u.jsxs(me,{justify:"space-between",w:"100%",children:[u.jsxs(me,{children:[u.jsx(Le,{as:Re.visible?Pi:Nf,color:Re.visible?"green.500":"gray.400"}),u.jsx(te,{fontSize:"sm",children:Re.name})]}),u.jsxs(Lt,{colorScheme:Re.visible?"green":"gray",size:"sm",children:[Math.round(Re.opacity*100),"%"]})]})},Oe))})]}),u.jsxs(oT,{size:"sm",isAttached:!0,variant:"ghost",children:[u.jsx(kn,{label:"3D Globe",children:u.jsx(wn,{"aria-label":"3D Globe",icon:u.jsx(Os,{}),color:"white",bg:a==="3d"?"whiteAlpha.300":void 0,_hover:{bg:"whiteAlpha.200"},onClick:()=>h("3d")})}),u.jsx(kn,{label:"2D Map",children:u.jsx(wn,{"aria-label":"2D Map",icon:u.jsx(Hc,{}),color:"white",bg:a==="2d"?"whiteAlpha.300":void 0,_hover:{bg:"whiteAlpha.200"},onClick:()=>h("2d")})}),u.jsx(kn,{label:"Columbus View",children:u.jsx(wn,{"aria-label":"Columbus View",icon:u.jsx(uR,{}),color:"white",bg:a==="columbus"?"whiteAlpha.300":void 0,_hover:{bg:"whiteAlpha.200"},onClick:()=>h("columbus")})})]}),u.jsx(Hn,{orientation:"vertical",h:"24px",borderColor:"whiteAlpha.400"}),u.jsx(kn,{label:"Refresh",children:u.jsx(wn,{"aria-label":"Refresh",icon:u.jsx(Xc,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:We})}),u.jsx(kn,{label:"Layer Controls",children:u.jsx(wn,{"aria-label":"Layer Controls",icon:u.jsx(P_,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:()=>F(!z),bg:z?"whiteAlpha.200":void 0})}),u.jsx(kn,{label:S?"Exit Fullscreen":"Fullscreen",children:u.jsx(wn,{"aria-label":"Fullscreen",icon:u.jsx(Iwe,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:Fe})})]})]})}),u.jsx(Is,{color:"white"}),u.jsxs(ys,{p:0,display:"flex",flexDirection:"column",h:"calc(100% - 60px)",children:[u.jsx(qc,{in:z,animateOpacity:!0,children:u.jsx(de,{bg:q,p:4,borderBottom:"1px solid",borderColor:X,children:s?u.jsxs(me,{justify:"center",py:4,children:[u.jsx(Cr,{size:"sm",color:"kartoza.500"}),u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Loading layers..."})]}):p.length>0?u.jsx(Gn,{columns:{base:1,md:2,lg:3},spacing:4,children:p.map((Re,Oe)=>u.jsxs(de,{bg:Q,p:3,borderRadius:"md",border:"1px solid",borderColor:X,children:[u.jsx(me,{justify:"space-between",mb:2,children:u.jsxs(me,{children:[u.jsx(wn,{"aria-label":"Toggle visibility",icon:Re.visible?u.jsx(Pi,{}):u.jsx(Nf,{}),size:"xs",variant:"ghost",colorScheme:Re.visible?"green":"gray",onClick:()=>Ce(Oe,!Re.visible)}),u.jsx(te,{fontSize:"sm",fontWeight:"500",noOfLines:1,children:Re.name})]})}),u.jsxs(me,{spacing:2,children:[u.jsx(te,{fontSize:"xs",color:"gray.500",minW:"50px",children:"Opacity"}),u.jsxs(Hl,{value:Re.opacity*100,onChange:oe=>$e(Oe,oe/100),min:0,max:100,size:"sm",children:[u.jsx(Xl,{bg:"gray.200",children:u.jsx(Kl,{bg:"kartoza.500"})}),u.jsx(Gl,{boxSize:3})]}),u.jsxs(te,{fontSize:"xs",color:"gray.500",minW:"30px",children:[Math.round(Re.opacity*100),"%"]})]})]},Oe))}):u.jsx(te,{fontSize:"sm",color:"gray.500",children:"No layers loaded"})})}),u.jsxs(de,{flex:"1",position:"relative",bg:"gray.900",children:[u.jsx(de,{ref:r,position:"absolute",top:0,left:0,right:0,bottom:0},`cesium-container-${O}`),s&&u.jsxs(de,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",bg:"blackAlpha.700",p:6,borderRadius:"lg",children:[u.jsx(Cr,{size:"xl",color:"kartoza.400",thickness:"4px"}),u.jsx(te,{mt:3,color:"white",children:"Loading 3D viewer..."})]}),y&&u.jsxs(de,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",bg:"red.600",color:"white",p:6,borderRadius:"lg",maxW:"400px",children:[u.jsx(te,{fontWeight:"bold",mb:2,children:"Error"}),u.jsx(te,{fontSize:"sm",children:y})]})]})]}),u.jsx(de,{px:4,py:2,bg:q,borderTop:"1px solid",borderColor:X,children:u.jsxs(me,{justify:"space-between",fontSize:"xs",color:"gray.500",children:[u.jsxs(te,{children:["Connection: ",K==null?void 0:K.slice(0,8),"..."]}),u.jsxs(me,{spacing:4,children:[u.jsx(Lt,{colorScheme:a==="3d"?"green":a==="2d"?"blue":"purple",children:a==="3d"?"3D Globe":a==="2d"?"2D Map":"Columbus View"}),u.jsx(te,{children:"Scroll to zoom, drag to pan, right-drag to rotate"})]})]})})]})]}):null}function EMe(){return u.jsxs(u.Fragment,{children:[u.jsx(h2e,{}),u.jsx(d2e,{}),u.jsx(f2e,{}),u.jsx(p2e,{}),u.jsx(m2e,{}),u.jsx(g2e,{}),u.jsx(y2e,{}),u.jsx(x2e,{}),u.jsx(hIe,{}),u.jsx(OMe,{}),u.jsx(AMe,{}),u.jsx(v2e,{}),u.jsx(Gze,{}),u.jsx(Xze,{}),u.jsx(tIe,{}),u.jsx(nIe,{})]})}const zMe={workspace:Uu,datastore:Yr,coveragestore:Qc,layer:mi,style:pc,layergroup:_we,pgservice:Gh,pgschema:Uu,pgtable:Ks,pgview:Pi,pgcolumn:dR,pgfunction:Da},IMe={workspace:"blue",datastore:"green",coveragestore:"orange",layer:"teal",style:"purple",layergroup:"cyan",pgservice:"blue",pgschema:"cyan",pgtable:"green",pgview:"purple",pgcolumn:"gray",pgfunction:"orange"};function MMe({isOpen:t,onClose:e,onSelect:n}){const[r,i]=L.useState(""),[s,o]=L.useState(0),a=L.useRef(null),h=L.useRef(null),p=Ln(K=>K.selectNode),g=Ln(K=>K.expandNode),y=Et("white","gray.800"),b=Et("gray.200","gray.600"),S=Et("gray.50","gray.700"),P=Et("kartoza.50","kartoza.900"),O=Et("gray.500","gray.400"),{data:D}=er({queryKey:["searchSuggestions"],queryFn:rke,staleTime:5*60*1e3}),{data:z,isLoading:F}=er({queryKey:["search",r],queryFn:()=>nke(r),enabled:r.length>=2,staleTime:30*1e3}),R=(z==null?void 0:z.results)||[],N=(D==null?void 0:D.suggestions)||[];L.useEffect(()=>{o(0)},[R]),L.useEffect(()=>{t&&a.current&&setTimeout(()=>{var K;return(K=a.current)==null?void 0:K.focus()},100),t||(i(""),o(0))},[t]),L.useEffect(()=>{if(h.current&&R.length>0){const K=h.current.querySelector(`[data-index="${s}"]`);K&&K.scrollIntoView({block:"nearest"})}},[s,R.length]);const Q=L.useCallback(K=>{if(["pgservice","pgschema","pgtable","pgview","pgcolumn","pgfunction"].includes(K.type)){g("postgresql-root"),K.serviceName&&(g(`pgservice:${K.serviceName}`),K.schemaName&&(g(`pgschema:${K.serviceName}:${K.schemaName}`),K.type==="pgcolumn"&&K.tableName&&g(`pgtable:${K.serviceName}:${K.schemaName}:${K.tableName}`)));let J;K.type==="pgservice"?J=`pgservice:${K.serviceName}`:K.type==="pgschema"?J=`pgschema:${K.serviceName}:${K.schemaName}`:K.type==="pgtable"||K.type==="pgview"?J=`${K.type}:${K.serviceName}:${K.schemaName}:${K.name}`:K.type==="pgcolumn"?J=`pgcolumn:${K.serviceName}:${K.schemaName}:${K.tableName}:${K.name}`:K.type==="pgfunction"?J=`pgfunction:${K.serviceName}:${K.schemaName}:${K.name}`:J=`${K.type}:${K.serviceName}:${K.name}`,p({id:J,name:K.name,type:K.type,serviceName:K.serviceName,schemaName:K.schemaName,tableName:K.type==="pgtable"||K.type==="pgview"?K.name:K.tableName})}else g(`connection:${K.connectionId}`),K.workspace&&(g(`workspace:${K.connectionId}:${K.workspace}`),K.type==="layer"?g(`layers:${K.connectionId}:${K.workspace}`):K.type==="style"?g(`styles:${K.connectionId}:${K.workspace}`):K.type==="datastore"?g(`datastores:${K.connectionId}:${K.workspace}`):K.type==="coveragestore"?g(`coveragestores:${K.connectionId}:${K.workspace}`):K.type==="layergroup"&&g(`layergroups:${K.connectionId}:${K.workspace}`)),p({id:`${K.type}:${K.connectionId}:${K.workspace||""}:${K.name}`,name:K.name,type:K.type,connectionId:K.connectionId,workspace:K.workspace});n&&n(K),e()},[n,e,p,g]),q=L.useCallback(K=>{K.key==="ArrowDown"?(K.preventDefault(),o(ne=>Math.min(ne+1,R.length-1))):K.key==="ArrowUp"?(K.preventDefault(),o(ne=>Math.max(ne-1,0))):K.key==="Enter"&&R.length>0?(K.preventDefault(),Q(R[s])):K.key==="Escape"&&e()},[R,s,Q,e]),X=K=>{var ne;i(K),(ne=a.current)==null||ne.focus()};return u.jsxs(es,{isOpen:t,onClose:e,size:"xl",motionPreset:"slideInBottom",children:[u.jsx(ts,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsx(gs,{bg:y,borderRadius:"xl",overflow:"hidden",mx:4,my:20,maxH:"70vh",children:u.jsxs(ys,{p:0,children:[u.jsxs(de,{p:4,borderBottomWidth:"1px",borderColor:b,children:[u.jsxs(Ta,{size:"lg",children:[u.jsx(Wl,{pointerEvents:"none",children:F?u.jsx(Cr,{size:"sm",color:"kartoza.500"}):u.jsx(Le,{as:V0,color:O})}),u.jsx(Rn,{ref:a,placeholder:"Search workspaces, layers, styles...",value:r,onChange:K=>i(K.target.value),onKeyDown:q,border:"none",_focus:{boxShadow:"none"},fontSize:"md"}),r&&u.jsx(S1,{children:u.jsx(Le,{as:Wf,color:O,cursor:"pointer",onClick:()=>i(""),_hover:{color:"kartoza.500"}})})]}),!r&&N.length>0&&u.jsxs(me,{mt:3,spacing:2,flexWrap:"wrap",children:[u.jsx(te,{fontSize:"sm",color:O,children:"Try searching for:"}),N.slice(0,6).map(K=>u.jsx(Vm,{size:"sm",variant:"subtle",colorScheme:"gray",cursor:"pointer",onClick:()=>X(K),_hover:{bg:"gray.200"},borderRadius:"full",children:u.jsx(T1,{children:K})},K))]})]}),u.jsxs(de,{ref:h,maxH:"50vh",overflowY:"auto",py:2,children:[r.length>=2&&R.length===0&&!F&&u.jsx(de,{p:8,textAlign:"center",children:u.jsxs(te,{color:O,children:['No results found for "',r,'"']})}),r.length>=2&&r.length<2&&u.jsx(de,{p:8,textAlign:"center",children:u.jsx(te,{color:O,children:"Type at least 2 characters to search"})}),R.map((K,ne)=>u.jsx(RMe,{result:K,isSelected:ne===s,onClick:()=>Q(K),onMouseEnter:()=>o(ne),dataIndex:ne,hoverBg:S,selectedBg:P},`${K.connectionId}-${K.type}-${K.name}-${ne}`)),!r&&u.jsx(de,{p:8,textAlign:"center",children:u.jsxs(at,{spacing:3,children:[u.jsx(Le,{as:V0,boxSize:8,color:O}),u.jsx(te,{color:O,children:"Search across GeoServer and PostgreSQL resources"}),u.jsxs(me,{spacing:1,fontSize:"sm",color:O,children:[u.jsx(te,{children:"Press"}),u.jsx(ks,{children:""}),u.jsx(ks,{children:""}),u.jsx(te,{children:"to navigate,"}),u.jsx(ks,{children:"Enter"}),u.jsx(te,{children:"to select"})]})]})})]}),u.jsx(de,{px:4,py:2,borderTopWidth:"1px",borderColor:b,bg:Et("gray.50","gray.900"),children:u.jsxs(me,{justify:"space-between",fontSize:"xs",color:O,children:[u.jsxs(me,{spacing:4,children:[u.jsxs(me,{spacing:1,children:[u.jsx(ks,{size:"xs",children:""}),u.jsx(te,{children:"Navigate"})]}),u.jsxs(me,{spacing:1,children:[u.jsx(ks,{size:"xs",children:"Enter"}),u.jsx(te,{children:"Select"})]}),u.jsxs(me,{spacing:1,children:[u.jsx(ks,{size:"xs",children:"Esc"}),u.jsx(te,{children:"Close"})]})]}),z&&u.jsxs(te,{children:[z.total," results"]})]})})]})})]})}function RMe({result:t,isSelected:e,onClick:n,onMouseEnter:r,dataIndex:i,hoverBg:s,selectedBg:o}){const a=zMe[t.type]||Uu,h=IMe[t.type]||"gray",p=Et("gray.500","gray.400");return u.jsx(de,{"data-index":i,px:4,py:3,cursor:"pointer",bg:e?o:"transparent",_hover:{bg:e?o:s},onClick:n,onMouseEnter:r,transition:"background 0.1s",children:u.jsxs(Sn,{align:"start",gap:3,children:[u.jsx(de,{p:2,bg:`${h}.100`,borderRadius:"lg",color:`${h}.600`,children:u.jsx(Le,{as:a,boxSize:5})}),u.jsxs(de,{flex:1,minW:0,children:[u.jsxs(me,{spacing:2,mb:1,children:[u.jsx(te,{fontWeight:"semibold",fontSize:"sm",noOfLines:1,children:t.name}),t.tags.map(g=>u.jsx(Lt,{colorScheme:h,fontSize:"xs",borderRadius:"full",px:2,children:g},g))]}),u.jsxs(me,{spacing:2,fontSize:"xs",color:p,children:[u.jsx(te,{children:t.serverName}),t.workspace&&u.jsxs(u.Fragment,{children:[u.jsx(te,{children:""}),u.jsx(te,{children:t.workspace})]})]})]}),e&&u.jsx(ks,{size:"xs",alignSelf:"center",children:"Enter"})]})})}function DMe(t){L.useEffect(()=>{const e=n=>{(n.ctrlKey||n.metaKey)&&n.key==="k"&&(n.preventDefault(),t())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t])}function LMe(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const FMe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,BMe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,$Me={};function qN(t,e){return($Me.jsx?BMe:FMe).test(t)}const NMe=/[ \t\n\f\r]/g;function VMe(t){return typeof t=="object"?t.type==="text"?QN(t.value):!1:QN(t)}function QN(t){return t.replace(NMe,"")===""}class B_{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}B_.prototype.normal={};B_.prototype.property={};B_.prototype.space=void 0;function VK(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new B_(n,r,e)}function TI(t){return t.toLowerCase()}class Xa{constructor(e,n){this.attribute=n,this.property=e}}Xa.prototype.attribute="";Xa.prototype.booleanish=!1;Xa.prototype.boolean=!1;Xa.prototype.commaOrSpaceSeparated=!1;Xa.prototype.commaSeparated=!1;Xa.prototype.defined=!1;Xa.prototype.mustUseProperty=!1;Xa.prototype.number=!1;Xa.prototype.overloadedBoolean=!1;Xa.prototype.property="";Xa.prototype.spaceSeparated=!1;Xa.prototype.space=void 0;let WMe=0;const rr=og(),cs=og(),jI=og(),Bt=og(),hi=og(),l0=og(),cl=og();function og(){return 2**++WMe}const PI=Object.freeze(Object.defineProperty({__proto__:null,boolean:rr,booleanish:cs,commaOrSpaceSeparated:cl,commaSeparated:l0,number:Bt,overloadedBoolean:jI,spaceSeparated:hi},Symbol.toStringTag,{value:"Module"})),aA=Object.keys(PI);class lD extends Xa{constructor(e,n,r,i){let s=-1;if(super(e,n),HN(this,"space",i),typeof r=="number")for(;++s<aA.length;){const o=aA[s];HN(this,aA[s],(r&PI[o])===PI[o])}}}lD.prototype.defined=!0;function HN(t,e,n){n&&(t[e]=n)}function mx(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new lD(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[TI(r)]=r,n[TI(s.attribute)]=r}return new B_(e,n,t.space)}const WK=mx({properties:{ariaActiveDescendant:null,ariaAtomic:cs,ariaAutoComplete:null,ariaBusy:cs,ariaChecked:cs,ariaColCount:Bt,ariaColIndex:Bt,ariaColSpan:Bt,ariaControls:hi,ariaCurrent:null,ariaDescribedBy:hi,ariaDetails:null,ariaDisabled:cs,ariaDropEffect:hi,ariaErrorMessage:null,ariaExpanded:cs,ariaFlowTo:hi,ariaGrabbed:cs,ariaHasPopup:null,ariaHidden:cs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:hi,ariaLevel:Bt,ariaLive:null,ariaModal:cs,ariaMultiLine:cs,ariaMultiSelectable:cs,ariaOrientation:null,ariaOwns:hi,ariaPlaceholder:null,ariaPosInSet:Bt,ariaPressed:cs,ariaReadOnly:cs,ariaRelevant:null,ariaRequired:cs,ariaRoleDescription:hi,ariaRowCount:Bt,ariaRowIndex:Bt,ariaRowSpan:Bt,ariaSelected:cs,ariaSetSize:Bt,ariaSort:null,ariaValueMax:Bt,ariaValueMin:Bt,ariaValueNow:Bt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function UK(t,e){return e in t?t[e]:e}function qK(t,e){return UK(t,e.toLowerCase())}const UMe=mx({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:l0,acceptCharset:hi,accessKey:hi,action:null,allow:null,allowFullScreen:rr,allowPaymentRequest:rr,allowUserMedia:rr,alt:null,as:null,async:rr,autoCapitalize:null,autoComplete:hi,autoFocus:rr,autoPlay:rr,blocking:hi,capture:null,charSet:null,checked:rr,cite:null,className:hi,cols:Bt,colSpan:null,content:null,contentEditable:cs,controls:rr,controlsList:hi,coords:Bt|l0,crossOrigin:null,data:null,dateTime:null,decoding:null,default:rr,defer:rr,dir:null,dirName:null,disabled:rr,download:jI,draggable:cs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:rr,formTarget:null,headers:hi,height:Bt,hidden:jI,high:Bt,href:null,hrefLang:null,htmlFor:hi,httpEquiv:hi,id:null,imageSizes:null,imageSrcSet:null,inert:rr,inputMode:null,integrity:null,is:null,isMap:rr,itemId:null,itemProp:hi,itemRef:hi,itemScope:rr,itemType:hi,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:rr,low:Bt,manifest:null,max:null,maxLength:Bt,media:null,method:null,min:null,minLength:Bt,multiple:rr,muted:rr,name:null,nonce:null,noModule:rr,noValidate:rr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:rr,optimum:Bt,pattern:null,ping:hi,placeholder:null,playsInline:rr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:rr,referrerPolicy:null,rel:hi,required:rr,reversed:rr,rows:Bt,rowSpan:Bt,sandbox:hi,scope:null,scoped:rr,seamless:rr,selected:rr,shadowRootClonable:rr,shadowRootDelegatesFocus:rr,shadowRootMode:null,shape:null,size:Bt,sizes:null,slot:null,span:Bt,spellCheck:cs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Bt,step:null,style:null,tabIndex:Bt,target:null,title:null,translate:null,type:null,typeMustMatch:rr,useMap:null,value:cs,width:Bt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:hi,axis:null,background:null,bgColor:null,border:Bt,borderColor:null,bottomMargin:Bt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:rr,declare:rr,event:null,face:null,frame:null,frameBorder:null,hSpace:Bt,leftMargin:Bt,link:null,longDesc:null,lowSrc:null,marginHeight:Bt,marginWidth:Bt,noResize:rr,noHref:rr,noShade:rr,noWrap:rr,object:null,profile:null,prompt:null,rev:null,rightMargin:Bt,rules:null,scheme:null,scrolling:cs,standby:null,summary:null,text:null,topMargin:Bt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Bt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:rr,disableRemotePlayback:rr,prefix:null,property:null,results:Bt,security:null,unselectable:null},space:"html",transform:qK}),qMe=mx({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:cl,accentHeight:Bt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Bt,amplitude:Bt,arabicForm:null,ascent:Bt,attributeName:null,attributeType:null,azimuth:Bt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Bt,by:null,calcMode:null,capHeight:Bt,className:hi,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Bt,diffuseConstant:Bt,direction:null,display:null,dur:null,divisor:Bt,dominantBaseline:null,download:rr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Bt,enableBackground:null,end:null,event:null,exponent:Bt,externalResourcesRequired:null,fill:null,fillOpacity:Bt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:l0,g2:l0,glyphName:l0,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Bt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Bt,horizOriginX:Bt,horizOriginY:Bt,id:null,ideographic:Bt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Bt,k:Bt,k1:Bt,k2:Bt,k3:Bt,k4:Bt,kernelMatrix:cl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Bt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Bt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Bt,overlineThickness:Bt,paintOrder:null,panose1:null,path:null,pathLength:Bt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:hi,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Bt,pointsAtY:Bt,pointsAtZ:Bt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:cl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:cl,rev:cl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:cl,requiredFeatures:cl,requiredFonts:cl,requiredFormats:cl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Bt,specularExponent:Bt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Bt,strikethroughThickness:Bt,string:null,stroke:null,strokeDashArray:cl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Bt,strokeOpacity:Bt,strokeWidth:null,style:null,surfaceScale:Bt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:cl,tabIndex:Bt,tableValues:null,target:null,targetX:Bt,targetY:Bt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:cl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Bt,underlineThickness:Bt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Bt,values:null,vAlphabetic:Bt,vMathematical:Bt,vectorEffect:null,vHanging:Bt,vIdeographic:Bt,version:null,vertAdvY:Bt,vertOriginX:Bt,vertOriginY:Bt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Bt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:UK}),QK=mx({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),HK=mx({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:qK}),GK=mx({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),QMe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},HMe=/[A-Z]/g,GN=/-[a-z]/g,GMe=/^data[-\w.:]+$/i;function XMe(t,e){const n=TI(e);let r=e,i=Xa;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&GMe.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(GN,ZMe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!GN.test(s)){let o=s.replace(HMe,KMe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=lD}return new i(r,e)}function KMe(t){return"-"+t.toLowerCase()}function ZMe(t){return t.charAt(1).toUpperCase()}const YMe=VK([WK,UMe,QK,HK,GK],"html"),cD=VK([WK,qMe,QK,HK,GK],"svg");function JMe(t){return t.join(" ").trim()}var uD={},XN=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e5e=/\n/g,t5e=/^\s*/,n5e=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r5e=/^:\s*/,i5e=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s5e=/^[;\s]*/,o5e=/^\s+|\s+$/g,a5e=`
`,KN="/",ZN="*",Xp="",l5e="comment",c5e="declaration";function u5e(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(P){var O=P.match(e5e);O&&(n+=O.length);var D=P.lastIndexOf(a5e);r=~D?P.length-D:r+P.length}function s(){var P={line:n,column:r};return function(O){return O.position=new o(P),p(),O}}function o(P){this.start=P,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(P){var O=new Error(e.source+":"+n+":"+r+": "+P);if(O.reason=P,O.filename=e.source,O.line=n,O.column=r,O.source=t,!e.silent)throw O}function h(P){var O=P.exec(t);if(O){var D=O[0];return i(D),t=t.slice(D.length),O}}function p(){h(t5e)}function g(P){var O;for(P=P||[];O=y();)O!==!1&&P.push(O);return P}function y(){var P=s();if(!(KN!=t.charAt(0)||ZN!=t.charAt(1))){for(var O=2;Xp!=t.charAt(O)&&(ZN!=t.charAt(O)||KN!=t.charAt(O+1));)++O;if(O+=2,Xp===t.charAt(O-1))return a("End of comment missing");var D=t.slice(2,O-2);return r+=2,i(D),t=t.slice(O),r+=2,P({type:l5e,comment:D})}}function b(){var P=s(),O=h(n5e);if(O){if(y(),!h(r5e))return a("property missing ':'");var D=h(i5e),z=P({type:c5e,property:YN(O[0].replace(XN,Xp)),value:D?YN(D[0].replace(XN,Xp)):Xp});return h(s5e),z}}function S(){var P=[];g(P);for(var O;O=b();)O!==!1&&(P.push(O),g(P));return P}return p(),S()}function YN(t){return t?t.replace(o5e,Xp):Xp}var h5e=u5e,d5e=Ah&&Ah.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(uD,"__esModule",{value:!0});uD.default=p5e;const f5e=d5e(h5e);function p5e(t,e){let n=null;if(!t||typeof t!="string")return n;const r=(0,f5e.default)(t),i=typeof e=="function";return r.forEach(s=>{if(s.type!=="declaration")return;const{property:o,value:a}=s;i?e(o,a,s):a&&(n=n||{},n[o]=a)}),n}var FT={};Object.defineProperty(FT,"__esModule",{value:!0});FT.camelCase=void 0;var m5e=/^--[a-zA-Z0-9_-]+$/,g5e=/-([a-z])/g,y5e=/^[^-]+$/,x5e=/^-(webkit|moz|ms|o|khtml)-/,v5e=/^-(ms)-/,b5e=function(t){return!t||y5e.test(t)||m5e.test(t)},_5e=function(t,e){return e.toUpperCase()},JN=function(t,e){return"".concat(e,"-")},w5e=function(t,e){return e===void 0&&(e={}),b5e(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(v5e,JN):t=t.replace(x5e,JN),t.replace(g5e,_5e))};FT.camelCase=w5e;var S5e=Ah&&Ah.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},k5e=S5e(uD),C5e=FT;function OI(t,e){var n={};return!t||typeof t!="string"||(0,k5e.default)(t,function(r,i){r&&i&&(n[(0,C5e.camelCase)(r,e)]=i)}),n}OI.default=OI;var T5e=OI;const j5e=Zm(T5e),XK=KK("end"),hD=KK("start");function KK(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function P5e(t){const e=hD(t),n=XK(t);if(e&&n)return{start:e,end:n}}function Vb(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?e8(t.position):"start"in t||"end"in t?e8(t):"line"in t||"column"in t?AI(t):""}function AI(t){return t8(t&&t.line)+":"+t8(t&&t.column)}function e8(t){return AI(t&&t.start)+"-"+AI(t&&t.end)}function t8(t){return t&&typeof t=="number"?t:1}class No extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const h=r.indexOf(":");h===-1?s.ruleId=r:(s.source=r.slice(0,h),s.ruleId=r.slice(h+1))}if(!s.place&&s.ancestors&&s.ancestors){const h=s.ancestors[s.ancestors.length-1];h&&(s.place=h.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=Vb(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}No.prototype.file="";No.prototype.name="";No.prototype.reason="";No.prototype.message="";No.prototype.stack="";No.prototype.column=void 0;No.prototype.line=void 0;No.prototype.ancestors=void 0;No.prototype.cause=void 0;No.prototype.fatal=void 0;No.prototype.place=void 0;No.prototype.ruleId=void 0;No.prototype.source=void 0;const dD={}.hasOwnProperty,O5e=new Map,A5e=/[A-Z]/g,E5e=new Set(["table","tbody","thead","tfoot","tr"]),z5e=new Set(["td","th"]),ZK="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function I5e(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=N5e(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=$5e(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?cD:YMe,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=YK(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function YK(t,e,n){if(e.type==="element")return M5e(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return R5e(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return L5e(t,e,n);if(e.type==="mdxjsEsm")return D5e(t,e);if(e.type==="root")return F5e(t,e,n);if(e.type==="text")return B5e(t,e)}function M5e(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=cD,t.schema=i),t.ancestors.push(e);const s=eZ(t,e.tagName,!1),o=V5e(t,e);let a=pD(t,e);return E5e.has(e.tagName)&&(a=a.filter(function(h){return typeof h=="string"?!VMe(h):!0})),JK(t,o,s,e),fD(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function R5e(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}H1(t,e.position)}function D5e(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);H1(t,e.position)}function L5e(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=cD,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:eZ(t,e.name,!0),o=W5e(t,e),a=pD(t,e);return JK(t,o,s,e),fD(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function F5e(t,e,n){const r={};return fD(r,pD(t,e)),t.create(e,t.Fragment,r,n)}function B5e(t,e){return e.value}function JK(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function fD(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function $5e(t,e,n){return r;function r(i,s,o,a){const p=Array.isArray(o.children)?n:e;return a?p(s,o,a):p(s,o)}}function N5e(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),h=hD(r);return e(i,s,o,a,{columnNumber:h?h.column-1:void 0,fileName:t,lineNumber:h?h.line:void 0},void 0)}}function V5e(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&dD.call(e.properties,i)){const s=U5e(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&z5e.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function W5e(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else H1(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else H1(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function pD(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:O5e;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const h=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(h){const p=i.get(h)||0;o=h+"-"+p,i.set(h,p+1)}}const a=YK(t,s,o);a!==void 0&&n.push(a)}return n}function U5e(t,e,n){const r=XMe(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?LMe(n):JMe(n)),r.property==="style"){let i=typeof n=="object"?n:q5e(t,String(n));return t.stylePropertyNameCase==="css"&&(i=Q5e(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?QMe[r.property]||r.property:r.attribute,n]}}function q5e(t,e){try{return j5e(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new No("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=ZK+"#cannot-parse-style-attribute",i}}function eZ(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=qN(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=qN(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return dD.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);H1(t)}function H1(t,e){const n=new No("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=ZK+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Q5e(t){const e={};let n;for(n in t)dD.call(t,n)&&(e[H5e(n)]=t[n]);return e}function H5e(t){let e=t.replace(A5e,G5e);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function G5e(t){return"-"+t.toLowerCase()}const lA={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},X5e={};function mD(t,e){const n=X5e,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return tZ(t,r,i)}function tZ(t,e,n){if(K5e(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return n8(t.children,e,n)}return Array.isArray(t)?n8(t,e,n):""}function n8(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=tZ(t[i],e,n);return r.join("")}function K5e(t){return!!(t&&typeof t=="object")}const r8=document.createElement("i");function gD(t){const e="&"+t+";";r8.innerHTML=e;const n=r8.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function bl(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Yl(t,e){return t.length>0?(bl(t,t.length,0,e),t):e}const i8={}.hasOwnProperty;function nZ(t){const e={};let n=-1;for(;++n<t.length;)Z5e(e,t[n]);return e}function Z5e(t,e){let n;for(n in e){const i=(i8.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){i8.call(i,o)||(i[o]=[]);const a=s[o];Y5e(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Y5e(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);bl(t,0,0,r)}function rZ(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Wc(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ia=ip(/[A-Za-z]/),Do=ip(/[\dA-Za-z]/),J5e=ip(/[#-'*+\--9=?A-Z^-~]/);function lC(t){return t!==null&&(t<32||t===127)}const EI=ip(/\d/),eRe=ip(/[\dA-Fa-f]/),tRe=ip(/[!-/:-@[-`{-~]/);function Bn(t){return t!==null&&t<-2}function ui(t){return t!==null&&(t<0||t===32)}function mr(t){return t===-2||t===-1||t===32}const BT=ip(new RegExp("\\p{P}|\\p{S}","u")),Km=ip(/\s/);function ip(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function gx(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&Do(t.charCodeAt(n+1))&&Do(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Pr(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(h){return mr(h)?(t.enter(n),a(h)):e(h)}function a(h){return mr(h)&&s++<i?(t.consume(h),a):(t.exit(n),e(h))}}const nRe={tokenize:rRe};function rRe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Pr(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const h=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=h),n=h,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Bn(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const iRe={tokenize:sRe},s8={tokenize:oRe};function sRe(t){const e=this,n=[];let r=0,i,s,o;return a;function a(R){if(r<n.length){const N=n[r];return e.containerState=N[1],t.attempt(N[0].continuation,h,p)(R)}return p(R)}function h(R){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&F();const N=e.events.length;let Q=N,q;for(;Q--;)if(e.events[Q][0]==="exit"&&e.events[Q][1].type==="chunkFlow"){q=e.events[Q][1].end;break}z(r);let X=N;for(;X<e.events.length;)e.events[X][1].end={...q},X++;return bl(e.events,Q+1,0,e.events.slice(N)),e.events.length=X,p(R)}return a(R)}function p(R){if(r===n.length){if(!i)return b(R);if(i.currentConstruct&&i.currentConstruct.concrete)return P(R);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(s8,g,y)(R)}function g(R){return i&&F(),z(r),b(R)}function y(R){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,P(R)}function b(R){return e.containerState={},t.attempt(s8,S,P)(R)}function S(R){return r++,n.push([e.currentConstruct,e.containerState]),b(R)}function P(R){if(R===null){i&&F(),z(0),t.consume(R);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),O(R)}function O(R){if(R===null){D(t.exit("chunkFlow"),!0),z(0),t.consume(R);return}return Bn(R)?(t.consume(R),D(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(R),O)}function D(R,N){const Q=e.sliceStream(R);if(N&&Q.push(null),R.previous=s,s&&(s.next=R),s=R,i.defineSkip(R.start),i.write(Q),e.parser.lazy[R.start.line]){let q=i.events.length;for(;q--;)if(i.events[q][1].start.offset<o&&(!i.events[q][1].end||i.events[q][1].end.offset>o))return;const X=e.events.length;let K=X,ne,J;for(;K--;)if(e.events[K][0]==="exit"&&e.events[K][1].type==="chunkFlow"){if(ne){J=e.events[K][1].end;break}ne=!0}for(z(r),q=X;q<e.events.length;)e.events[q][1].end={...J},q++;bl(e.events,K+1,0,e.events.slice(X)),e.events.length=q}}function z(R){let N=n.length;for(;N-- >R;){const Q=n[N];e.containerState=Q[1],Q[0].exit.call(e,t)}n.length=R}function F(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function oRe(t,e,n){return Pr(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ex(t){if(t===null||ui(t)||Km(t))return 1;if(BT(t))return 2}function $T(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const zI={name:"attention",resolveAll:aRe,tokenize:lRe};function aRe(t,e){let n=-1,r,i,s,o,a,h,p,g;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;h=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const y={...t[r][1].end},b={...t[n][1].start};o8(y,-h),o8(b,h),o={type:h>1?"strongSequence":"emphasisSequence",start:y,end:{...t[r][1].end}},a={type:h>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:b},s={type:h>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:h>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},p=[],t[r][1].end.offset-t[r][1].start.offset&&(p=Yl(p,[["enter",t[r][1],e],["exit",t[r][1],e]])),p=Yl(p,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),p=Yl(p,$T(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),p=Yl(p,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(g=2,p=Yl(p,[["enter",t[n][1],e],["exit",t[n][1],e]])):g=0,bl(t,r-1,n-r+3,p),n=r+p.length-g-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function lRe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=ex(r);let s;return o;function o(h){return s=h,t.enter("attentionSequence"),a(h)}function a(h){if(h===s)return t.consume(h),a;const p=t.exit("attentionSequence"),g=ex(h),y=!g||g===2&&i||n.includes(h),b=!i||i===2&&g||n.includes(r);return p._open=!!(s===42?y:y&&(i||!b)),p._close=!!(s===42?b:b&&(g||!y)),e(h)}}function o8(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const cRe={name:"autolink",tokenize:uRe};function uRe(t,e,n){let r=0;return i;function i(S){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(S),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(S){return ia(S)?(t.consume(S),o):S===64?n(S):p(S)}function o(S){return S===43||S===45||S===46||Do(S)?(r=1,a(S)):p(S)}function a(S){return S===58?(t.consume(S),r=0,h):(S===43||S===45||S===46||Do(S))&&r++<32?(t.consume(S),a):(r=0,p(S))}function h(S){return S===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(S),t.exit("autolinkMarker"),t.exit("autolink"),e):S===null||S===32||S===60||lC(S)?n(S):(t.consume(S),h)}function p(S){return S===64?(t.consume(S),g):J5e(S)?(t.consume(S),p):n(S)}function g(S){return Do(S)?y(S):n(S)}function y(S){return S===46?(t.consume(S),r=0,g):S===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(S),t.exit("autolinkMarker"),t.exit("autolink"),e):b(S)}function b(S){if((S===45||Do(S))&&r++<63){const P=S===45?b:y;return t.consume(S),P}return n(S)}}const $_={partial:!0,tokenize:hRe};function hRe(t,e,n){return r;function r(s){return mr(s)?Pr(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Bn(s)?e(s):n(s)}}const iZ={continuation:{tokenize:fRe},exit:pRe,name:"blockQuote",tokenize:dRe};function dRe(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return mr(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function fRe(t,e,n){const r=this;return i;function i(o){return mr(o)?Pr(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(iZ,e,n)(o)}}function pRe(t){t.exit("blockQuote")}const sZ={name:"characterEscape",tokenize:mRe};function mRe(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return tRe(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const oZ={name:"characterReference",tokenize:gRe};function gRe(t,e,n){const r=this;let i=0,s,o;return a;function a(y){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),h}function h(y){return y===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(y),t.exit("characterReferenceMarkerNumeric"),p):(t.enter("characterReferenceValue"),s=31,o=Do,g(y))}function p(y){return y===88||y===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(y),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=eRe,g):(t.enter("characterReferenceValue"),s=7,o=EI,g(y))}function g(y){if(y===59&&i){const b=t.exit("characterReferenceValue");return o===Do&&!gD(r.sliceSerialize(b))?n(y):(t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(y)&&i++<s?(t.consume(y),g):n(y)}}const a8={partial:!0,tokenize:xRe},l8={concrete:!0,name:"codeFenced",tokenize:yRe};function yRe(t,e,n){const r=this,i={partial:!0,tokenize:Q};let s=0,o=0,a;return h;function h(q){return p(q)}function p(q){const X=r.events[r.events.length-1];return s=X&&X[1].type==="linePrefix"?X[2].sliceSerialize(X[1],!0).length:0,a=q,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),g(q)}function g(q){return q===a?(o++,t.consume(q),g):o<3?n(q):(t.exit("codeFencedFenceSequence"),mr(q)?Pr(t,y,"whitespace")(q):y(q))}function y(q){return q===null||Bn(q)?(t.exit("codeFencedFence"),r.interrupt?e(q):t.check(a8,O,N)(q)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),b(q))}function b(q){return q===null||Bn(q)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),y(q)):mr(q)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Pr(t,S,"whitespace")(q)):q===96&&q===a?n(q):(t.consume(q),b)}function S(q){return q===null||Bn(q)?y(q):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),P(q))}function P(q){return q===null||Bn(q)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),y(q)):q===96&&q===a?n(q):(t.consume(q),P)}function O(q){return t.attempt(i,N,D)(q)}function D(q){return t.enter("lineEnding"),t.consume(q),t.exit("lineEnding"),z}function z(q){return s>0&&mr(q)?Pr(t,F,"linePrefix",s+1)(q):F(q)}function F(q){return q===null||Bn(q)?t.check(a8,O,N)(q):(t.enter("codeFlowValue"),R(q))}function R(q){return q===null||Bn(q)?(t.exit("codeFlowValue"),F(q)):(t.consume(q),R)}function N(q){return t.exit("codeFenced"),e(q)}function Q(q,X,K){let ne=0;return J;function J(We){return q.enter("lineEnding"),q.consume(We),q.exit("lineEnding"),ae}function ae(We){return q.enter("codeFencedFence"),mr(We)?Pr(q,Ee,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(We):Ee(We)}function Ee(We){return We===a?(q.enter("codeFencedFenceSequence"),Ce(We)):K(We)}function Ce(We){return We===a?(ne++,q.consume(We),Ce):ne>=o?(q.exit("codeFencedFenceSequence"),mr(We)?Pr(q,$e,"whitespace")(We):$e(We)):K(We)}function $e(We){return We===null||Bn(We)?(q.exit("codeFencedFence"),X(We)):K(We)}}}function xRe(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const cA={name:"codeIndented",tokenize:bRe},vRe={partial:!0,tokenize:_Re};function bRe(t,e,n){const r=this;return i;function i(p){return t.enter("codeIndented"),Pr(t,s,"linePrefix",5)(p)}function s(p){const g=r.events[r.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?o(p):n(p)}function o(p){return p===null?h(p):Bn(p)?t.attempt(vRe,o,h)(p):(t.enter("codeFlowValue"),a(p))}function a(p){return p===null||Bn(p)?(t.exit("codeFlowValue"),o(p)):(t.consume(p),a)}function h(p){return t.exit("codeIndented"),e(p)}}function _Re(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Bn(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Pr(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Bn(o)?i(o):n(o)}}const wRe={name:"codeText",previous:kRe,resolve:SRe,tokenize:CRe};function SRe(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function kRe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function CRe(t,e,n){let r=0,i,s;return o;function o(y){return t.enter("codeText"),t.enter("codeTextSequence"),a(y)}function a(y){return y===96?(t.consume(y),r++,a):(t.exit("codeTextSequence"),h(y))}function h(y){return y===null?n(y):y===32?(t.enter("space"),t.consume(y),t.exit("space"),h):y===96?(s=t.enter("codeTextSequence"),i=0,g(y)):Bn(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),h):(t.enter("codeTextData"),p(y))}function p(y){return y===null||y===32||y===96||Bn(y)?(t.exit("codeTextData"),h(y)):(t.consume(y),p)}function g(y){return y===96?(t.consume(y),i++,g):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(y)):(s.type="codeTextData",p(y))}}class TRe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Wv(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Wv(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Wv(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Wv(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Wv(this.left,n.reverse())}}}function Wv(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function aZ(t){const e={};let n=-1,r,i,s,o,a,h,p;const g=new TRe(t);for(;++n<g.length;){for(;n in e;)n=e[n];if(r=g.get(n),n&&r[1].type==="chunkFlow"&&g.get(n-1)[1].type==="listItemPrefix"&&(h=r[1]._tokenizer.events,s=0,s<h.length&&h[s][1].type==="lineEndingBlank"&&(s+=2),s<h.length&&h[s][1].type==="content"))for(;++s<h.length&&h[s][1].type!=="content";)h[s][1].type==="chunkText"&&(h[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,jRe(g,n)),n=e[n],p=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=g.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(g.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...g.get(i)[1].start},a=g.slice(i,n),a.unshift(r),g.splice(i,n-i+1,a))}}return bl(t,0,Number.POSITIVE_INFINITY,g.slice(0)),!p}function jRe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,h=[],p={};let g,y,b=-1,S=n,P=0,O=0;const D=[O];for(;S;){for(;t.get(++i)[1]!==S;);s.push(i),S._tokenizer||(g=r.sliceStream(S),S.next||g.push(null),y&&o.defineSkip(S.start),S._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(g),S._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),y=S,S=S.next}for(S=n;++b<a.length;)a[b][0]==="exit"&&a[b-1][0]==="enter"&&a[b][1].type===a[b-1][1].type&&a[b][1].start.line!==a[b][1].end.line&&(O=b+1,D.push(O),S._tokenizer=void 0,S.previous=void 0,S=S.next);for(o.events=[],S?(S._tokenizer=void 0,S.previous=void 0):D.pop(),b=D.length;b--;){const z=a.slice(D[b],D[b+1]),F=s.pop();h.push([F,F+z.length-1]),t.splice(F,2,z)}for(h.reverse(),b=-1;++b<h.length;)p[P+h[b][0]]=P+h[b][1],P+=h[b][1]-h[b][0]-1;return p}const PRe={resolve:ARe,tokenize:ERe},ORe={partial:!0,tokenize:zRe};function ARe(t){return aZ(t),t}function ERe(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Bn(a)?t.check(ORe,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function zRe(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Pr(t,s,"linePrefix")}function s(o){if(o===null||Bn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function lZ(t,e,n,r,i,s,o,a,h){const p=h||Number.POSITIVE_INFINITY;let g=0;return y;function y(z){return z===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(z),t.exit(s),b):z===null||z===32||z===41||lC(z)?n(z):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),O(z))}function b(z){return z===62?(t.enter(s),t.consume(z),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),S(z))}function S(z){return z===62?(t.exit("chunkString"),t.exit(a),b(z)):z===null||z===60||Bn(z)?n(z):(t.consume(z),z===92?P:S)}function P(z){return z===60||z===62||z===92?(t.consume(z),S):S(z)}function O(z){return!g&&(z===null||z===41||ui(z))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(z)):g<p&&z===40?(t.consume(z),g++,O):z===41?(t.consume(z),g--,O):z===null||z===32||z===40||lC(z)?n(z):(t.consume(z),z===92?D:O)}function D(z){return z===40||z===41||z===92?(t.consume(z),O):O(z)}}function cZ(t,e,n,r,i,s){const o=this;let a=0,h;return p;function p(S){return t.enter(r),t.enter(i),t.consume(S),t.exit(i),t.enter(s),g}function g(S){return a>999||S===null||S===91||S===93&&!h||S===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(S):S===93?(t.exit(s),t.enter(i),t.consume(S),t.exit(i),t.exit(r),e):Bn(S)?(t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),g):(t.enter("chunkString",{contentType:"string"}),y(S))}function y(S){return S===null||S===91||S===93||Bn(S)||a++>999?(t.exit("chunkString"),g(S)):(t.consume(S),h||(h=!mr(S)),S===92?b:y)}function b(S){return S===91||S===92||S===93?(t.consume(S),a++,y):y(S)}}function uZ(t,e,n,r,i,s){let o;return a;function a(b){return b===34||b===39||b===40?(t.enter(r),t.enter(i),t.consume(b),t.exit(i),o=b===40?41:b,h):n(b)}function h(b){return b===o?(t.enter(i),t.consume(b),t.exit(i),t.exit(r),e):(t.enter(s),p(b))}function p(b){return b===o?(t.exit(s),h(o)):b===null?n(b):Bn(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),Pr(t,p,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===o||b===null||Bn(b)?(t.exit("chunkString"),p(b)):(t.consume(b),b===92?y:g)}function y(b){return b===o||b===92?(t.consume(b),g):g(b)}}function Wb(t,e){let n;return r;function r(i){return Bn(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):mr(i)?Pr(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const IRe={name:"definition",tokenize:RRe},MRe={partial:!0,tokenize:DRe};function RRe(t,e,n){const r=this;let i;return s;function s(S){return t.enter("definition"),o(S)}function o(S){return cZ.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(S)}function a(S){return i=Wc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),S===58?(t.enter("definitionMarker"),t.consume(S),t.exit("definitionMarker"),h):n(S)}function h(S){return ui(S)?Wb(t,p)(S):p(S)}function p(S){return lZ(t,g,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(S)}function g(S){return t.attempt(MRe,y,y)(S)}function y(S){return mr(S)?Pr(t,b,"whitespace")(S):b(S)}function b(S){return S===null||Bn(S)?(t.exit("definition"),r.parser.defined.push(i),e(S)):n(S)}}function DRe(t,e,n){return r;function r(a){return ui(a)?Wb(t,i)(a):n(a)}function i(a){return uZ(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return mr(a)?Pr(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Bn(a)?e(a):n(a)}}const LRe={name:"hardBreakEscape",tokenize:FRe};function FRe(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Bn(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const BRe={name:"headingAtx",resolve:$Re,tokenize:NRe};function $Re(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},bl(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function NRe(t,e,n){let r=0;return i;function i(g){return t.enter("atxHeading"),s(g)}function s(g){return t.enter("atxHeadingSequence"),o(g)}function o(g){return g===35&&r++<6?(t.consume(g),o):g===null||ui(g)?(t.exit("atxHeadingSequence"),a(g)):n(g)}function a(g){return g===35?(t.enter("atxHeadingSequence"),h(g)):g===null||Bn(g)?(t.exit("atxHeading"),e(g)):mr(g)?Pr(t,a,"whitespace")(g):(t.enter("atxHeadingText"),p(g))}function h(g){return g===35?(t.consume(g),h):(t.exit("atxHeadingSequence"),a(g))}function p(g){return g===null||g===35||ui(g)?(t.exit("atxHeadingText"),a(g)):(t.consume(g),p)}}const VRe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],c8=["pre","script","style","textarea"],WRe={concrete:!0,name:"htmlFlow",resolveTo:QRe,tokenize:HRe},URe={partial:!0,tokenize:XRe},qRe={partial:!0,tokenize:GRe};function QRe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function HRe(t,e,n){const r=this;let i,s,o,a,h;return p;function p(oe){return g(oe)}function g(oe){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(oe),y}function y(oe){return oe===33?(t.consume(oe),b):oe===47?(t.consume(oe),s=!0,O):oe===63?(t.consume(oe),i=3,r.interrupt?e:se):ia(oe)?(t.consume(oe),o=String.fromCharCode(oe),D):n(oe)}function b(oe){return oe===45?(t.consume(oe),i=2,S):oe===91?(t.consume(oe),i=5,a=0,P):ia(oe)?(t.consume(oe),i=4,r.interrupt?e:se):n(oe)}function S(oe){return oe===45?(t.consume(oe),r.interrupt?e:se):n(oe)}function P(oe){const nt="CDATA[";return oe===nt.charCodeAt(a++)?(t.consume(oe),a===nt.length?r.interrupt?e:Ee:P):n(oe)}function O(oe){return ia(oe)?(t.consume(oe),o=String.fromCharCode(oe),D):n(oe)}function D(oe){if(oe===null||oe===47||oe===62||ui(oe)){const nt=oe===47,Ne=o.toLowerCase();return!nt&&!s&&c8.includes(Ne)?(i=1,r.interrupt?e(oe):Ee(oe)):VRe.includes(o.toLowerCase())?(i=6,nt?(t.consume(oe),z):r.interrupt?e(oe):Ee(oe)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(oe):s?F(oe):R(oe))}return oe===45||Do(oe)?(t.consume(oe),o+=String.fromCharCode(oe),D):n(oe)}function z(oe){return oe===62?(t.consume(oe),r.interrupt?e:Ee):n(oe)}function F(oe){return mr(oe)?(t.consume(oe),F):J(oe)}function R(oe){return oe===47?(t.consume(oe),J):oe===58||oe===95||ia(oe)?(t.consume(oe),N):mr(oe)?(t.consume(oe),R):J(oe)}function N(oe){return oe===45||oe===46||oe===58||oe===95||Do(oe)?(t.consume(oe),N):Q(oe)}function Q(oe){return oe===61?(t.consume(oe),q):mr(oe)?(t.consume(oe),Q):R(oe)}function q(oe){return oe===null||oe===60||oe===61||oe===62||oe===96?n(oe):oe===34||oe===39?(t.consume(oe),h=oe,X):mr(oe)?(t.consume(oe),q):K(oe)}function X(oe){return oe===h?(t.consume(oe),h=null,ne):oe===null||Bn(oe)?n(oe):(t.consume(oe),X)}function K(oe){return oe===null||oe===34||oe===39||oe===47||oe===60||oe===61||oe===62||oe===96||ui(oe)?Q(oe):(t.consume(oe),K)}function ne(oe){return oe===47||oe===62||mr(oe)?R(oe):n(oe)}function J(oe){return oe===62?(t.consume(oe),ae):n(oe)}function ae(oe){return oe===null||Bn(oe)?Ee(oe):mr(oe)?(t.consume(oe),ae):n(oe)}function Ee(oe){return oe===45&&i===2?(t.consume(oe),Fe):oe===60&&i===1?(t.consume(oe),we):oe===62&&i===4?(t.consume(oe),Re):oe===63&&i===3?(t.consume(oe),se):oe===93&&i===5?(t.consume(oe),Qe):Bn(oe)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(URe,Oe,Ce)(oe)):oe===null||Bn(oe)?(t.exit("htmlFlowData"),Ce(oe)):(t.consume(oe),Ee)}function Ce(oe){return t.check(qRe,$e,Oe)(oe)}function $e(oe){return t.enter("lineEnding"),t.consume(oe),t.exit("lineEnding"),We}function We(oe){return oe===null||Bn(oe)?Ce(oe):(t.enter("htmlFlowData"),Ee(oe))}function Fe(oe){return oe===45?(t.consume(oe),se):Ee(oe)}function we(oe){return oe===47?(t.consume(oe),o="",Ie):Ee(oe)}function Ie(oe){if(oe===62){const nt=o.toLowerCase();return c8.includes(nt)?(t.consume(oe),Re):Ee(oe)}return ia(oe)&&o.length<8?(t.consume(oe),o+=String.fromCharCode(oe),Ie):Ee(oe)}function Qe(oe){return oe===93?(t.consume(oe),se):Ee(oe)}function se(oe){return oe===62?(t.consume(oe),Re):oe===45&&i===2?(t.consume(oe),se):Ee(oe)}function Re(oe){return oe===null||Bn(oe)?(t.exit("htmlFlowData"),Oe(oe)):(t.consume(oe),Re)}function Oe(oe){return t.exit("htmlFlow"),e(oe)}}function GRe(t,e,n){const r=this;return i;function i(o){return Bn(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function XRe(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt($_,e,n)}}const KRe={name:"htmlText",tokenize:ZRe};function ZRe(t,e,n){const r=this;let i,s,o;return a;function a(se){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(se),h}function h(se){return se===33?(t.consume(se),p):se===47?(t.consume(se),Q):se===63?(t.consume(se),R):ia(se)?(t.consume(se),K):n(se)}function p(se){return se===45?(t.consume(se),g):se===91?(t.consume(se),s=0,P):ia(se)?(t.consume(se),F):n(se)}function g(se){return se===45?(t.consume(se),S):n(se)}function y(se){return se===null?n(se):se===45?(t.consume(se),b):Bn(se)?(o=y,we(se)):(t.consume(se),y)}function b(se){return se===45?(t.consume(se),S):y(se)}function S(se){return se===62?Fe(se):se===45?b(se):y(se)}function P(se){const Re="CDATA[";return se===Re.charCodeAt(s++)?(t.consume(se),s===Re.length?O:P):n(se)}function O(se){return se===null?n(se):se===93?(t.consume(se),D):Bn(se)?(o=O,we(se)):(t.consume(se),O)}function D(se){return se===93?(t.consume(se),z):O(se)}function z(se){return se===62?Fe(se):se===93?(t.consume(se),z):O(se)}function F(se){return se===null||se===62?Fe(se):Bn(se)?(o=F,we(se)):(t.consume(se),F)}function R(se){return se===null?n(se):se===63?(t.consume(se),N):Bn(se)?(o=R,we(se)):(t.consume(se),R)}function N(se){return se===62?Fe(se):R(se)}function Q(se){return ia(se)?(t.consume(se),q):n(se)}function q(se){return se===45||Do(se)?(t.consume(se),q):X(se)}function X(se){return Bn(se)?(o=X,we(se)):mr(se)?(t.consume(se),X):Fe(se)}function K(se){return se===45||Do(se)?(t.consume(se),K):se===47||se===62||ui(se)?ne(se):n(se)}function ne(se){return se===47?(t.consume(se),Fe):se===58||se===95||ia(se)?(t.consume(se),J):Bn(se)?(o=ne,we(se)):mr(se)?(t.consume(se),ne):Fe(se)}function J(se){return se===45||se===46||se===58||se===95||Do(se)?(t.consume(se),J):ae(se)}function ae(se){return se===61?(t.consume(se),Ee):Bn(se)?(o=ae,we(se)):mr(se)?(t.consume(se),ae):ne(se)}function Ee(se){return se===null||se===60||se===61||se===62||se===96?n(se):se===34||se===39?(t.consume(se),i=se,Ce):Bn(se)?(o=Ee,we(se)):mr(se)?(t.consume(se),Ee):(t.consume(se),$e)}function Ce(se){return se===i?(t.consume(se),i=void 0,We):se===null?n(se):Bn(se)?(o=Ce,we(se)):(t.consume(se),Ce)}function $e(se){return se===null||se===34||se===39||se===60||se===61||se===96?n(se):se===47||se===62||ui(se)?ne(se):(t.consume(se),$e)}function We(se){return se===47||se===62||ui(se)?ne(se):n(se)}function Fe(se){return se===62?(t.consume(se),t.exit("htmlTextData"),t.exit("htmlText"),e):n(se)}function we(se){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(se),t.exit("lineEnding"),Ie}function Ie(se){return mr(se)?Pr(t,Qe,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(se):Qe(se)}function Qe(se){return t.enter("htmlTextData"),o(se)}}const yD={name:"labelEnd",resolveAll:tDe,resolveTo:nDe,tokenize:rDe},YRe={tokenize:iDe},JRe={tokenize:sDe},eDe={tokenize:oDe};function tDe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&bl(t,0,t.length,n),t}function nDe(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const h={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},p={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},g={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",h,e],["enter",p,e]],a=Yl(a,t.slice(s+1,s+r+3)),a=Yl(a,[["enter",g,e]]),a=Yl(a,$T(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=Yl(a,[["exit",g,e],t[o-2],t[o-1],["exit",p,e]]),a=Yl(a,t.slice(o+1)),a=Yl(a,[["exit",h,e]]),bl(t,s,t.length,a),t}function rDe(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(b){return s?s._inactive?y(b):(o=r.parser.defined.includes(Wc(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(b),t.exit("labelMarker"),t.exit("labelEnd"),h):n(b)}function h(b){return b===40?t.attempt(YRe,g,o?g:y)(b):b===91?t.attempt(JRe,g,o?p:y)(b):o?g(b):y(b)}function p(b){return t.attempt(eDe,g,y)(b)}function g(b){return e(b)}function y(b){return s._balanced=!0,n(b)}}function iDe(t,e,n){return r;function r(y){return t.enter("resource"),t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),i}function i(y){return ui(y)?Wb(t,s)(y):s(y)}function s(y){return y===41?g(y):lZ(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(y)}function o(y){return ui(y)?Wb(t,h)(y):g(y)}function a(y){return n(y)}function h(y){return y===34||y===39||y===40?uZ(t,p,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(y):g(y)}function p(y){return ui(y)?Wb(t,g)(y):g(y)}function g(y){return y===41?(t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),t.exit("resource"),e):n(y)}}function sDe(t,e,n){const r=this;return i;function i(a){return cZ.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Wc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function oDe(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const aDe={name:"labelStartImage",resolveAll:yD.resolveAll,tokenize:lDe};function lDe(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const cDe={name:"labelStartLink",resolveAll:yD.resolveAll,tokenize:uDe};function uDe(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const uA={name:"lineEnding",tokenize:hDe};function hDe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Pr(t,e,"linePrefix")}}const Vk={name:"thematicBreak",tokenize:dDe};function dDe(t,e,n){let r=0,i;return s;function s(p){return t.enter("thematicBreak"),o(p)}function o(p){return i=p,a(p)}function a(p){return p===i?(t.enter("thematicBreakSequence"),h(p)):r>=3&&(p===null||Bn(p))?(t.exit("thematicBreak"),e(p)):n(p)}function h(p){return p===i?(t.consume(p),r++,h):(t.exit("thematicBreakSequence"),mr(p)?Pr(t,a,"whitespace")(p):a(p))}}const wa={continuation:{tokenize:gDe},exit:xDe,name:"list",tokenize:mDe},fDe={partial:!0,tokenize:vDe},pDe={partial:!0,tokenize:yDe};function mDe(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(S){const P=r.containerState.type||(S===42||S===43||S===45?"listUnordered":"listOrdered");if(P==="listUnordered"?!r.containerState.marker||S===r.containerState.marker:EI(S)){if(r.containerState.type||(r.containerState.type=P,t.enter(P,{_container:!0})),P==="listUnordered")return t.enter("listItemPrefix"),S===42||S===45?t.check(Vk,n,p)(S):p(S);if(!r.interrupt||S===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),h(S)}return n(S)}function h(S){return EI(S)&&++o<10?(t.consume(S),h):(!r.interrupt||o<2)&&(r.containerState.marker?S===r.containerState.marker:S===41||S===46)?(t.exit("listItemValue"),p(S)):n(S)}function p(S){return t.enter("listItemMarker"),t.consume(S),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||S,t.check($_,r.interrupt?n:g,t.attempt(fDe,b,y))}function g(S){return r.containerState.initialBlankLine=!0,s++,b(S)}function y(S){return mr(S)?(t.enter("listItemPrefixWhitespace"),t.consume(S),t.exit("listItemPrefixWhitespace"),b):n(S)}function b(S){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(S)}}function gDe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check($_,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Pr(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!mr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(pDe,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Pr(t,t.attempt(wa,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function yDe(t,e,n){const r=this;return Pr(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function xDe(t){t.exit(this.containerState.type)}function vDe(t,e,n){const r=this;return Pr(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!mr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const u8={name:"setextUnderline",resolveTo:bDe,tokenize:_De};function bDe(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function _De(t,e,n){const r=this;let i;return s;function s(p){let g=r.events.length,y;for(;g--;)if(r.events[g][1].type!=="lineEnding"&&r.events[g][1].type!=="linePrefix"&&r.events[g][1].type!=="content"){y=r.events[g][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||y)?(t.enter("setextHeadingLine"),i=p,o(p)):n(p)}function o(p){return t.enter("setextHeadingLineSequence"),a(p)}function a(p){return p===i?(t.consume(p),a):(t.exit("setextHeadingLineSequence"),mr(p)?Pr(t,h,"lineSuffix")(p):h(p))}function h(p){return p===null||Bn(p)?(t.exit("setextHeadingLine"),e(p)):n(p)}}const wDe={tokenize:SDe};function SDe(t){const e=this,n=t.attempt($_,r,t.attempt(this.parser.constructs.flowInitial,i,Pr(t,t.attempt(this.parser.constructs.flow,i,t.attempt(PRe,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const kDe={resolveAll:dZ()},CDe=hZ("string"),TDe=hZ("text");function hZ(t){return{resolveAll:dZ(t==="text"?jDe:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(g){return p(g)?s(g):a(g)}function a(g){if(g===null){n.consume(g);return}return n.enter("data"),n.consume(g),h}function h(g){return p(g)?(n.exit("data"),s(g)):(n.consume(g),h)}function p(g){if(g===null)return!0;const y=i[g];let b=-1;if(y)for(;++b<y.length;){const S=y[b];if(!S.previous||S.previous.call(r,r.previous))return!0}return!1}}}function dZ(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function jDe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,h;for(;s--;){const p=i[s];if(typeof p=="string"){for(o=p.length;p.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(p===-2)h=!0,a++;else if(p!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const p={type:n===t.length||h||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...p.start},r.start.offset===r.end.offset?Object.assign(r,p):(t.splice(n,0,["enter",p,e],["exit",p,e]),n+=2)}n++}return t}const PDe={42:wa,43:wa,45:wa,48:wa,49:wa,50:wa,51:wa,52:wa,53:wa,54:wa,55:wa,56:wa,57:wa,62:iZ},ODe={91:IRe},ADe={[-2]:cA,[-1]:cA,32:cA},EDe={35:BRe,42:Vk,45:[u8,Vk],60:WRe,61:u8,95:Vk,96:l8,126:l8},zDe={38:oZ,92:sZ},IDe={[-5]:uA,[-4]:uA,[-3]:uA,33:aDe,38:oZ,42:zI,60:[cRe,KRe],91:cDe,92:[LRe,sZ],93:yD,95:zI,96:wRe},MDe={null:[zI,kDe]},RDe={null:[42,95]},DDe={null:[]},LDe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:RDe,contentInitial:ODe,disable:DDe,document:PDe,flow:EDe,flowInitial:ADe,insideSpan:MDe,string:zDe,text:IDe},Symbol.toStringTag,{value:"Module"}));function FDe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const h={attempt:X(Q),check:X(q),consume:F,enter:R,exit:N,interrupt:X(q,{interrupt:!0})},p={code:null,containerState:{},defineSkip:O,events:[],now:P,parser:t,previous:null,sliceSerialize:b,sliceStream:S,write:y};let g=e.tokenize.call(p,h);return e.resolveAll&&s.push(e),p;function y(ae){return o=Yl(o,ae),D(),o[o.length-1]!==null?[]:(K(e,0),p.events=$T(s,p.events,p),p.events)}function b(ae,Ee){return $De(S(ae),Ee)}function S(ae){return BDe(o,ae)}function P(){const{_bufferIndex:ae,_index:Ee,line:Ce,column:$e,offset:We}=r;return{_bufferIndex:ae,_index:Ee,line:Ce,column:$e,offset:We}}function O(ae){i[ae.line]=ae.column,J()}function D(){let ae;for(;r._index<o.length;){const Ee=o[r._index];if(typeof Ee=="string")for(ae=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===ae&&r._bufferIndex<Ee.length;)z(Ee.charCodeAt(r._bufferIndex));else z(Ee)}}function z(ae){g=g(ae)}function F(ae){Bn(ae)?(r.line++,r.column=1,r.offset+=ae===-3?2:1,J()):ae!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),p.previous=ae}function R(ae,Ee){const Ce=Ee||{};return Ce.type=ae,Ce.start=P(),p.events.push(["enter",Ce,p]),a.push(Ce),Ce}function N(ae){const Ee=a.pop();return Ee.end=P(),p.events.push(["exit",Ee,p]),Ee}function Q(ae,Ee){K(ae,Ee.from)}function q(ae,Ee){Ee.restore()}function X(ae,Ee){return Ce;function Ce($e,We,Fe){let we,Ie,Qe,se;return Array.isArray($e)?Oe($e):"tokenize"in $e?Oe([$e]):Re($e);function Re(tt){return Ye;function Ye(_t){const At=_t!==null&&tt[_t],Ot=_t!==null&&tt.null,bt=[...Array.isArray(At)?At:At?[At]:[],...Array.isArray(Ot)?Ot:Ot?[Ot]:[]];return Oe(bt)(_t)}}function Oe(tt){return we=tt,Ie=0,tt.length===0?Fe:oe(tt[Ie])}function oe(tt){return Ye;function Ye(_t){return se=ne(),Qe=tt,tt.partial||(p.currentConstruct=tt),tt.name&&p.parser.constructs.disable.null.includes(tt.name)?Ne():tt.tokenize.call(Ee?Object.assign(Object.create(p),Ee):p,h,nt,Ne)(_t)}}function nt(tt){return ae(Qe,se),We}function Ne(tt){return se.restore(),++Ie<we.length?oe(we[Ie]):Fe}}}function K(ae,Ee){ae.resolveAll&&!s.includes(ae)&&s.push(ae),ae.resolve&&bl(p.events,Ee,p.events.length-Ee,ae.resolve(p.events.slice(Ee),p)),ae.resolveTo&&(p.events=ae.resolveTo(p.events,p))}function ne(){const ae=P(),Ee=p.previous,Ce=p.currentConstruct,$e=p.events.length,We=Array.from(a);return{from:$e,restore:Fe};function Fe(){r=ae,p.previous=Ee,p.currentConstruct=Ce,p.events.length=$e,a=We,J()}}function J(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function BDe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function $De(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function NDe(t){const r={constructs:nZ([LDe,...(t||{}).extensions||[]]),content:i(nRe),defined:[],document:i(iRe),flow:i(wDe),lazy:{},string:i(CDe),text:i(TDe)};return r;function i(s){return o;function o(a){return FDe(r,s,a)}}}function VDe(t){for(;!aZ(t););return t}const h8=/[\0\t\n\r]/g;function WDe(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const h=[];let p,g,y,b,S;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),y=0,e="",n&&(s.charCodeAt(0)===65279&&y++,n=void 0);y<s.length;){if(h8.lastIndex=y,p=h8.exec(s),b=p&&p.index!==void 0?p.index:s.length,S=s.charCodeAt(b),!p){e=s.slice(y);break}if(S===10&&y===b&&r)h.push(-3),r=void 0;else switch(r&&(h.push(-5),r=void 0),y<b&&(h.push(s.slice(y,b)),t+=b-y),S){case 0:{h.push(65533),t++;break}case 9:{for(g=Math.ceil(t/4)*4,h.push(-2);t++<g;)h.push(-1);break}case 10:{h.push(-4),t=1;break}default:r=!0,t=1}y=b+1}return a&&(r&&h.push(-5),e&&h.push(e),h.push(null)),h}}const UDe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function qDe(t){return t.replace(UDe,QDe)}function QDe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return rZ(n.slice(s?2:1),s?16:10)}return gD(n)||t}const fZ={}.hasOwnProperty;function HDe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),GDe(n)(VDe(NDe(n).document().write(WDe()(t,e,!0))))}function GDe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ct),autolinkProtocol:ne,autolinkEmail:ne,atxHeading:s(it),blockQuote:s(Ot),characterEscape:ne,characterReference:ne,codeFenced:s(bt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(bt,o),codeText:s(rt,o),codeTextData:ne,data:ne,codeFlowValue:ne,definition:s(tn),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(kt),hardBreakEscape:s(ze),hardBreakTrailing:s(ze),htmlFlow:s(ut,o),htmlFlowData:ne,htmlText:s(ut,o),htmlTextData:ne,image:s(qt),label:o,link:s(Ct),listItem:s(Yn),listItemValue:b,listOrdered:s($t,y),listUnordered:s($t),paragraph:s(br),reference:oe,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(it),strong:s(ur),thematicBreak:s(_r)},exit:{atxHeading:h(),atxHeadingSequence:Q,autolink:h(),autolinkEmail:At,autolinkProtocol:_t,blockQuote:h(),characterEscapeValue:J,characterReferenceMarkerHexadecimal:Ne,characterReferenceMarkerNumeric:Ne,characterReferenceValue:tt,characterReference:Ye,codeFenced:h(D),codeFencedFence:O,codeFencedFenceInfo:S,codeFencedFenceMeta:P,codeFlowValue:J,codeIndented:h(z),codeText:h(We),codeTextData:J,data:J,definition:h(),definitionDestinationString:N,definitionLabelString:F,definitionTitleString:R,emphasis:h(),hardBreakEscape:h(Ee),hardBreakTrailing:h(Ee),htmlFlow:h(Ce),htmlFlowData:J,htmlText:h($e),htmlTextData:J,image:h(we),label:Qe,labelText:Ie,lineEnding:ae,link:h(Fe),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:nt,resourceDestinationString:se,resourceTitleString:Re,resource:Oe,setextHeading:h(K),setextHeadingLineSequence:X,setextHeadingText:q,strong:h(),thematicBreak:h()}};pZ(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ct){let Tt={type:"root",children:[]};const Me={stack:[Tt],tokenStack:[],config:e,enter:a,exit:p,buffer:o,resume:g,data:n},Xt=[];let pt=-1;for(;++pt<ct.length;)if(ct[pt][1].type==="listOrdered"||ct[pt][1].type==="listUnordered")if(ct[pt][0]==="enter")Xt.push(pt);else{const zt=Xt.pop();pt=i(ct,zt,pt)}for(pt=-1;++pt<ct.length;){const zt=e[ct[pt][0]];fZ.call(zt,ct[pt][1].type)&&zt[ct[pt][1].type].call(Object.assign({sliceSerialize:ct[pt][2].sliceSerialize},Me),ct[pt][1])}if(Me.tokenStack.length>0){const zt=Me.tokenStack[Me.tokenStack.length-1];(zt[1]||d8).call(Me,void 0,zt[0])}for(Tt.position={start:Ld(ct.length>0?ct[0][1].start:{line:1,column:1,offset:0}),end:Ld(ct.length>0?ct[ct.length-2][1].end:{line:1,column:1,offset:0})},pt=-1;++pt<e.transforms.length;)Tt=e.transforms[pt](Tt)||Tt;return Tt}function i(ct,Tt,Me){let Xt=Tt-1,pt=-1,zt=!1,ir,yt,_n,Kt;for(;++Xt<=Me;){const tr=ct[Xt];switch(tr[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{tr[0]==="enter"?pt++:pt--,Kt=void 0;break}case"lineEndingBlank":{tr[0]==="enter"&&(ir&&!Kt&&!pt&&!_n&&(_n=Xt),Kt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Kt=void 0}if(!pt&&tr[0]==="enter"&&tr[1].type==="listItemPrefix"||pt===-1&&tr[0]==="exit"&&(tr[1].type==="listUnordered"||tr[1].type==="listOrdered")){if(ir){let qr=Xt;for(yt=void 0;qr--;){const sn=ct[qr];if(sn[1].type==="lineEnding"||sn[1].type==="lineEndingBlank"){if(sn[0]==="exit")continue;yt&&(ct[yt][1].type="lineEndingBlank",zt=!0),sn[1].type="lineEnding",yt=qr}else if(!(sn[1].type==="linePrefix"||sn[1].type==="blockQuotePrefix"||sn[1].type==="blockQuotePrefixWhitespace"||sn[1].type==="blockQuoteMarker"||sn[1].type==="listItemIndent"))break}_n&&(!yt||_n<yt)&&(ir._spread=!0),ir.end=Object.assign({},yt?ct[yt][1].start:tr[1].end),ct.splice(yt||Xt,0,["exit",ir,tr[2]]),Xt++,Me++}if(tr[1].type==="listItemPrefix"){const qr={type:"listItem",_spread:!1,start:Object.assign({},tr[1].start),end:void 0};ir=qr,ct.splice(Xt,0,["enter",qr,tr[2]]),Xt++,Me++,_n=void 0,Kt=!0}}}return ct[Tt][1]._spread=zt,Me}function s(ct,Tt){return Me;function Me(Xt){a.call(this,ct(Xt),Xt),Tt&&Tt.call(this,Xt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ct,Tt,Me){this.stack[this.stack.length-1].children.push(ct),this.stack.push(ct),this.tokenStack.push([Tt,Me||void 0]),ct.position={start:Ld(Tt.start),end:void 0}}function h(ct){return Tt;function Tt(Me){ct&&ct.call(this,Me),p.call(this,Me)}}function p(ct,Tt){const Me=this.stack.pop(),Xt=this.tokenStack.pop();if(Xt)Xt[0].type!==ct.type&&(Tt?Tt.call(this,ct,Xt[0]):(Xt[1]||d8).call(this,ct,Xt[0]));else throw new Error("Cannot close `"+ct.type+"` ("+Vb({start:ct.start,end:ct.end})+"): its not open");Me.position.end=Ld(ct.end)}function g(){return mD(this.stack.pop())}function y(){this.data.expectingFirstListItemValue=!0}function b(ct){if(this.data.expectingFirstListItemValue){const Tt=this.stack[this.stack.length-2];Tt.start=Number.parseInt(this.sliceSerialize(ct),10),this.data.expectingFirstListItemValue=void 0}}function S(){const ct=this.resume(),Tt=this.stack[this.stack.length-1];Tt.lang=ct}function P(){const ct=this.resume(),Tt=this.stack[this.stack.length-1];Tt.meta=ct}function O(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function D(){const ct=this.resume(),Tt=this.stack[this.stack.length-1];Tt.value=ct.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function z(){const ct=this.resume(),Tt=this.stack[this.stack.length-1];Tt.value=ct.replace(/(\r?\n|\r)$/g,"")}function F(ct){const Tt=this.resume(),Me=this.stack[this.stack.length-1];Me.label=Tt,Me.identifier=Wc(this.sliceSerialize(ct)).toLowerCase()}function R(){const ct=this.resume(),Tt=this.stack[this.stack.length-1];Tt.title=ct}function N(){const ct=this.resume(),Tt=this.stack[this.stack.length-1];Tt.url=ct}function Q(ct){const Tt=this.stack[this.stack.length-1];if(!Tt.depth){const Me=this.sliceSerialize(ct).length;Tt.depth=Me}}function q(){this.data.setextHeadingSlurpLineEnding=!0}function X(ct){const Tt=this.stack[this.stack.length-1];Tt.depth=this.sliceSerialize(ct).codePointAt(0)===61?1:2}function K(){this.data.setextHeadingSlurpLineEnding=void 0}function ne(ct){const Me=this.stack[this.stack.length-1].children;let Xt=Me[Me.length-1];(!Xt||Xt.type!=="text")&&(Xt=Ar(),Xt.position={start:Ld(ct.start),end:void 0},Me.push(Xt)),this.stack.push(Xt)}function J(ct){const Tt=this.stack.pop();Tt.value+=this.sliceSerialize(ct),Tt.position.end=Ld(ct.end)}function ae(ct){const Tt=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Me=Tt.children[Tt.children.length-1];Me.position.end=Ld(ct.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Tt.type)&&(ne.call(this,ct),J.call(this,ct))}function Ee(){this.data.atHardBreak=!0}function Ce(){const ct=this.resume(),Tt=this.stack[this.stack.length-1];Tt.value=ct}function $e(){const ct=this.resume(),Tt=this.stack[this.stack.length-1];Tt.value=ct}function We(){const ct=this.resume(),Tt=this.stack[this.stack.length-1];Tt.value=ct}function Fe(){const ct=this.stack[this.stack.length-1];if(this.data.inReference){const Tt=this.data.referenceType||"shortcut";ct.type+="Reference",ct.referenceType=Tt,delete ct.url,delete ct.title}else delete ct.identifier,delete ct.label;this.data.referenceType=void 0}function we(){const ct=this.stack[this.stack.length-1];if(this.data.inReference){const Tt=this.data.referenceType||"shortcut";ct.type+="Reference",ct.referenceType=Tt,delete ct.url,delete ct.title}else delete ct.identifier,delete ct.label;this.data.referenceType=void 0}function Ie(ct){const Tt=this.sliceSerialize(ct),Me=this.stack[this.stack.length-2];Me.label=qDe(Tt),Me.identifier=Wc(Tt).toLowerCase()}function Qe(){const ct=this.stack[this.stack.length-1],Tt=this.resume(),Me=this.stack[this.stack.length-1];if(this.data.inReference=!0,Me.type==="link"){const Xt=ct.children;Me.children=Xt}else Me.alt=Tt}function se(){const ct=this.resume(),Tt=this.stack[this.stack.length-1];Tt.url=ct}function Re(){const ct=this.resume(),Tt=this.stack[this.stack.length-1];Tt.title=ct}function Oe(){this.data.inReference=void 0}function oe(){this.data.referenceType="collapsed"}function nt(ct){const Tt=this.resume(),Me=this.stack[this.stack.length-1];Me.label=Tt,Me.identifier=Wc(this.sliceSerialize(ct)).toLowerCase(),this.data.referenceType="full"}function Ne(ct){this.data.characterReferenceType=ct.type}function tt(ct){const Tt=this.sliceSerialize(ct),Me=this.data.characterReferenceType;let Xt;Me?(Xt=rZ(Tt,Me==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Xt=gD(Tt);const pt=this.stack[this.stack.length-1];pt.value+=Xt}function Ye(ct){const Tt=this.stack.pop();Tt.position.end=Ld(ct.end)}function _t(ct){J.call(this,ct);const Tt=this.stack[this.stack.length-1];Tt.url=this.sliceSerialize(ct)}function At(ct){J.call(this,ct);const Tt=this.stack[this.stack.length-1];Tt.url="mailto:"+this.sliceSerialize(ct)}function Ot(){return{type:"blockquote",children:[]}}function bt(){return{type:"code",lang:null,meta:null,value:""}}function rt(){return{type:"inlineCode",value:""}}function tn(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function kt(){return{type:"emphasis",children:[]}}function it(){return{type:"heading",depth:0,children:[]}}function ze(){return{type:"break"}}function ut(){return{type:"html",value:""}}function qt(){return{type:"image",title:null,url:"",alt:null}}function Ct(){return{type:"link",title:null,url:"",children:[]}}function $t(ct){return{type:"list",ordered:ct.type==="listOrdered",start:null,spread:ct._spread,children:[]}}function Yn(ct){return{type:"listItem",spread:ct._spread,checked:null,children:[]}}function br(){return{type:"paragraph",children:[]}}function ur(){return{type:"strong",children:[]}}function Ar(){return{type:"text",value:""}}function _r(){return{type:"thematicBreak"}}}function Ld(t){return{line:t.line,column:t.column,offset:t.offset}}function pZ(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?pZ(t,r):XDe(t,r)}}function XDe(t,e){let n;for(n in e)if(fZ.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function d8(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Vb({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Vb({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Vb({start:e.start,end:e.end})+") is still open")}function KDe(t){const e=this;e.parser=n;function n(r){return HDe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function ZDe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function YDe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function JDe(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function eLe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function tLe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function nLe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=gx(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const h={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,h);const p={type:"element",tagName:"sup",properties:{},children:[h]};return t.patch(e,p),t.applyData(e,p)}function rLe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function iLe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function mZ(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function sLe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return mZ(t,e);const i={src:gx(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function oLe(t,e){const n={src:gx(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function aLe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function lLe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return mZ(t,e);const i={href:gx(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function cLe(t,e){const n={href:gx(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function uLe(t,e,n){const r=t.all(e),i=n?hLe(n):gZ(e),s={},o=[];if(typeof e.checked=="boolean"){const g=r[0];let y;g&&g.type==="element"&&g.tagName==="p"?y=g:(y={type:"element",tagName:"p",properties:{},children:[]},r.unshift(y)),y.children.length>0&&y.children.unshift({type:"text",value:" "}),y.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const g=r[a];(i||a!==0||g.type!=="element"||g.tagName!=="p")&&o.push({type:"text",value:`
`}),g.type==="element"&&g.tagName==="p"&&!i?o.push(...g.children):o.push(g)}const h=r[r.length-1];h&&(i||h.type!=="element"||h.tagName!=="p")&&o.push({type:"text",value:`
`});const p={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,p),t.applyData(e,p)}function hLe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=gZ(n[r])}return e}function gZ(t){const e=t.spread;return e??t.children.length>1}function dLe(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function fLe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function pLe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function mLe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function gLe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=hD(e.children[1]),h=XK(e.children[e.children.length-1]);a&&h&&(o.position={start:a,end:h}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function yLe(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let h=-1;const p=[];for(;++h<a;){const y=e.children[h],b={},S=o?o[h]:void 0;S&&(b.align=S);let P={type:"element",tagName:s,properties:b,children:[]};y&&(P.children=t.all(y),t.patch(y,P),P=t.applyData(y,P)),p.push(P)}const g={type:"element",tagName:"tr",properties:{},children:t.wrap(p,!0)};return t.patch(e,g),t.applyData(e,g)}function xLe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const f8=9,p8=32;function vLe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(m8(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(m8(e.slice(i),i>0,!1)),s.join("")}function m8(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===f8||s===p8;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===f8||s===p8;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function bLe(t,e){const n={type:"text",value:vLe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function _Le(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const wLe={blockquote:ZDe,break:YDe,code:JDe,delete:eLe,emphasis:tLe,footnoteReference:nLe,heading:rLe,html:iLe,imageReference:sLe,image:oLe,inlineCode:aLe,linkReference:lLe,link:cLe,listItem:uLe,list:dLe,paragraph:fLe,root:pLe,strong:mLe,table:gLe,tableCell:xLe,tableRow:yLe,text:bLe,thematicBreak:_Le,toml:US,yaml:US,definition:US,footnoteDefinition:US};function US(){}const yZ=-1,NT=0,Ub=1,cC=2,xD=3,vD=4,bD=5,_D=6,xZ=7,vZ=8,g8=typeof self=="object"?self:globalThis,SLe=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case NT:case yZ:return n(o,i);case Ub:{const a=n([],i);for(const h of o)a.push(r(h));return a}case cC:{const a=n({},i);for(const[h,p]of o)a[r(h)]=r(p);return a}case xD:return n(new Date(o),i);case vD:{const{source:a,flags:h}=o;return n(new RegExp(a,h),i)}case bD:{const a=n(new Map,i);for(const[h,p]of o)a.set(r(h),r(p));return a}case _D:{const a=n(new Set,i);for(const h of o)a.add(r(h));return a}case xZ:{const{name:a,message:h}=o;return n(new g8[a](h),i)}case vZ:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new g8[s](o),i)};return r},y8=t=>SLe(new Map,t)(0),ly="",{toString:kLe}={},{keys:CLe}=Object,Uv=t=>{const e=typeof t;if(e!=="object"||!t)return[NT,e];const n=kLe.call(t).slice(8,-1);switch(n){case"Array":return[Ub,ly];case"Object":return[cC,ly];case"Date":return[xD,ly];case"RegExp":return[vD,ly];case"Map":return[bD,ly];case"Set":return[_D,ly];case"DataView":return[Ub,n]}return n.includes("Array")?[Ub,n]:n.includes("Error")?[xZ,n]:[cC,n]},qS=([t,e])=>t===NT&&(e==="function"||e==="symbol"),TLe=(t,e,n,r)=>{const i=(o,a)=>{const h=r.push(o)-1;return n.set(a,h),h},s=o=>{if(n.has(o))return n.get(o);let[a,h]=Uv(o);switch(a){case NT:{let g=o;switch(h){case"bigint":a=vZ,g=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+h);g=null;break;case"undefined":return i([yZ],o)}return i([a,g],o)}case Ub:{if(h){let b=o;return h==="DataView"?b=new Uint8Array(o.buffer):h==="ArrayBuffer"&&(b=new Uint8Array(o)),i([h,[...b]],o)}const g=[],y=i([a,g],o);for(const b of o)g.push(s(b));return y}case cC:{if(h)switch(h){case"BigInt":return i([h,o.toString()],o);case"Boolean":case"Number":case"String":return i([h,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const g=[],y=i([a,g],o);for(const b of CLe(o))(t||!qS(Uv(o[b])))&&g.push([s(b),s(o[b])]);return y}case xD:return i([a,o.toISOString()],o);case vD:{const{source:g,flags:y}=o;return i([a,{source:g,flags:y}],o)}case bD:{const g=[],y=i([a,g],o);for(const[b,S]of o)(t||!(qS(Uv(b))||qS(Uv(S))))&&g.push([s(b),s(S)]);return y}case _D:{const g=[],y=i([a,g],o);for(const b of o)(t||!qS(Uv(b)))&&g.push(s(b));return y}}const{message:p}=o;return i([a,{name:h,message:p}],o)};return s},x8=(t,{json:e,lossy:n}={})=>{const r=[];return TLe(!(e||n),!!e,new Map,r)(t),r},uC=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?y8(x8(t,e)):structuredClone(t):(t,e)=>y8(x8(t,e));function jLe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function PLe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function OLe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||jLe,r=t.options.footnoteBackLabel||PLe,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let h=-1;for(;++h<t.footnoteOrder.length;){const p=t.footnoteById.get(t.footnoteOrder[h]);if(!p)continue;const g=t.all(p),y=String(p.identifier).toUpperCase(),b=gx(y.toLowerCase());let S=0;const P=[],O=t.footnoteCounts.get(y);for(;O!==void 0&&++S<=O;){P.length>0&&P.push({type:"text",value:" "});let F=typeof n=="string"?n:n(h,S);typeof F=="string"&&(F={type:"text",value:F}),P.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+b+(S>1?"-"+S:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(h,S),className:["data-footnote-backref"]},children:Array.isArray(F)?F:[F]})}const D=g[g.length-1];if(D&&D.type==="element"&&D.tagName==="p"){const F=D.children[D.children.length-1];F&&F.type==="text"?F.value+=" ":D.children.push({type:"text",value:" "}),D.children.push(...P)}else g.push(...P);const z={type:"element",tagName:"li",properties:{id:e+"fn-"+b},children:t.wrap(g,!0)};t.patch(p,z),a.push(z)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...uC(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const VT=function(t){if(t==null)return ILe;if(typeof t=="function")return WT(t);if(typeof t=="object")return Array.isArray(t)?ALe(t):ELe(t);if(typeof t=="string")return zLe(t);throw new Error("Expected function, string, or object as test")};function ALe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=VT(t[n]);return WT(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function ELe(t){const e=t;return WT(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function zLe(t){return WT(e);function e(n){return n&&n.type===t}}function WT(t){return e;function e(n,r,i){return!!(MLe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function ILe(){return!0}function MLe(t){return t!==null&&typeof t=="object"&&"type"in t}const bZ=[],RLe=!0,II=!1,DLe="skip";function _Z(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=VT(i),o=r?-1:1;a(t,void 0,[])();function a(h,p,g){const y=h&&typeof h=="object"?h:{};if(typeof y.type=="string"){const S=typeof y.tagName=="string"?y.tagName:typeof y.name=="string"?y.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(h.type+(S?"<"+S+">":""))+")"})}return b;function b(){let S=bZ,P,O,D;if((!e||s(h,p,g[g.length-1]||void 0))&&(S=LLe(n(h,g)),S[0]===II))return S;if("children"in h&&h.children){const z=h;if(z.children&&S[0]!==DLe)for(O=(r?z.children.length:-1)+o,D=g.concat(z);O>-1&&O<z.children.length;){const F=z.children[O];if(P=a(F,O,D)(),P[0]===II)return P;O=typeof P[1]=="number"?P[1]:O+o}}return S}}}function LLe(t){return Array.isArray(t)?t:typeof t=="number"?[RLe,t]:t==null?bZ:[t]}function wD(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),_Z(t,s,a,i);function a(h,p){const g=p[p.length-1],y=g?g.children.indexOf(h):void 0;return o(h,y,g)}}const MI={}.hasOwnProperty,FLe={};function BLe(t,e){const n=e||FLe,r=new Map,i=new Map,s=new Map,o={...wLe,...n.handlers},a={all:p,applyData:NLe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:h,options:n,patch:$Le,wrap:WLe};return wD(t,function(g){if(g.type==="definition"||g.type==="footnoteDefinition"){const y=g.type==="definition"?r:i,b=String(g.identifier).toUpperCase();y.has(b)||y.set(b,g)}}),a;function h(g,y){const b=g.type,S=a.handlers[b];if(MI.call(a.handlers,b)&&S)return S(a,g,y);if(a.options.passThrough&&a.options.passThrough.includes(b)){if("children"in g){const{children:O,...D}=g,z=uC(D);return z.children=a.all(g),z}return uC(g)}return(a.options.unknownHandler||VLe)(a,g,y)}function p(g){const y=[];if("children"in g){const b=g.children;let S=-1;for(;++S<b.length;){const P=a.one(b[S],g);if(P){if(S&&b[S-1].type==="break"&&(!Array.isArray(P)&&P.type==="text"&&(P.value=v8(P.value)),!Array.isArray(P)&&P.type==="element")){const O=P.children[0];O&&O.type==="text"&&(O.value=v8(O.value))}Array.isArray(P)?y.push(...P):y.push(P)}}}return y}}function $Le(t,e){t.position&&(e.position=P5e(t))}function NLe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,uC(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function VLe(t,e){const n=e.data||{},r="value"in e&&!(MI.call(n,"hProperties")||MI.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function WLe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function v8(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function b8(t,e){const n=BLe(t,e),r=n.one(t,void 0),i=OLe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function ULe(t,e){return t&&"run"in t?async function(n,r){const i=b8(n,{file:r,...e});await t.run(i,r)}:function(n,r){return b8(n,{file:r,...t||e})}}function _8(t){if(t)throw t}var Wk=Object.prototype.hasOwnProperty,wZ=Object.prototype.toString,w8=Object.defineProperty,S8=Object.getOwnPropertyDescriptor,k8=function(e){return typeof Array.isArray=="function"?Array.isArray(e):wZ.call(e)==="[object Array]"},C8=function(e){if(!e||wZ.call(e)!=="[object Object]")return!1;var n=Wk.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Wk.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||Wk.call(e,i)},T8=function(e,n){w8&&n.name==="__proto__"?w8(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},j8=function(e,n){if(n==="__proto__")if(Wk.call(e,n)){if(S8)return S8(e,n).value}else return;return e[n]},qLe=function t(){var e,n,r,i,s,o,a=arguments[0],h=1,p=arguments.length,g=!1;for(typeof a=="boolean"&&(g=a,a=arguments[1]||{},h=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});h<p;++h)if(e=arguments[h],e!=null)for(n in e)r=j8(a,n),i=j8(e,n),a!==i&&(g&&i&&(C8(i)||(s=k8(i)))?(s?(s=!1,o=r&&k8(r)?r:[]):o=r&&C8(r)?r:{},T8(a,{name:n,newValue:t(g,o,i)})):typeof i<"u"&&T8(a,{name:n,newValue:i}));return a};const hA=Zm(qLe);function RI(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function QLe(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(h,...p){const g=t[++s];let y=-1;if(h){o(h);return}for(;++y<i.length;)(p[y]===null||p[y]===void 0)&&(p[y]=i[y]);i=p,g?HLe(g,a)(...p):o(null,...p)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function HLe(t,e){let n;return r;function r(...o){const a=t.length>o.length;let h;a&&o.push(i);try{h=t.apply(this,o)}catch(p){const g=p;if(a&&n)throw g;return i(g)}a||(h&&h.then&&typeof h.then=="function"?h.then(s,i):h instanceof Error?i(h):s(h))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const bu={basename:GLe,dirname:XLe,extname:KLe,join:ZLe,sep:"/"};function GLe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');N_(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function XLe(t){if(N_(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function KLe(t){N_(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function ZLe(...t){let e=-1,n;for(;++e<t.length;)N_(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":YLe(n)}function YLe(t){N_(t);const e=t.codePointAt(0)===47;let n=JLe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function JLe(t,e){let n="",r=0,i=-1,s=0,o=-1,a,h;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(h=n.lastIndexOf("/"),h!==n.length-1){h<0?(n="",r=0):(n=n.slice(0,h),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function N_(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const e3e={cwd:t3e};function t3e(){return"/"}function DI(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function n3e(t){if(typeof t=="string")t=new URL(t);else if(!DI(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return r3e(t)}function r3e(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const dA=["history","path","basename","stem","extname","dirname"];class SZ{constructor(e){let n;e?DI(e)?n={path:e}:typeof e=="string"||i3e(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":e3e.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<dA.length;){const s=dA[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)dA.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?bu.basename(this.path):void 0}set basename(e){pA(e,"basename"),fA(e,"basename"),this.path=bu.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?bu.dirname(this.path):void 0}set dirname(e){P8(this.basename,"dirname"),this.path=bu.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?bu.extname(this.path):void 0}set extname(e){if(fA(e,"extname"),P8(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=bu.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){DI(e)&&(e=n3e(e)),pA(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?bu.basename(this.path,this.extname):void 0}set stem(e){pA(e,"stem"),fA(e,"stem"),this.path=bu.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new No(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function fA(t,e){if(t&&t.includes(bu.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+bu.sep+"`")}function pA(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function P8(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function i3e(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const s3e=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},o3e={}.hasOwnProperty;class SD extends s3e{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=QLe()}copy(){const e=new SD;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(hA(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(yA("data",this.frozen),this.namespace[e]=n,this):o3e.call(this.namespace,e)&&this.namespace[e]||void 0:e?(yA("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=QS(e),r=this.parser||this.Parser;return mA("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),mA("process",this.parser||this.Parser),gA("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=QS(e),h=r.parse(a);r.run(h,a,function(g,y,b){if(g||!y||!b)return p(g);const S=y,P=r.stringify(S,b);c3e(P)?b.value=P:b.result=P,p(g,b)});function p(g,y){g||!y?o(g):s?s(y):n(void 0,y)}}}processSync(e){let n=!1,r;return this.freeze(),mA("processSync",this.parser||this.Parser),gA("processSync",this.compiler||this.Compiler),this.process(e,i),A8("processSync","process",n),r;function i(s,o){n=!0,_8(s),r=o}}run(e,n,r){O8(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const h=QS(n);i.run(e,h,p);function p(g,y,b){const S=y||e;g?a(g):o?o(S):r(void 0,S,b)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),A8("runSync","run",r),i;function s(o,a){_8(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=QS(n),i=this.compiler||this.Compiler;return gA("stringify",i),O8(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(yA("use",this.frozen),e!=null)if(typeof e=="function")h(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(p){if(typeof p=="function")h(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[g,...y]=p;h(g,y)}else o(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function o(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(p.plugins),p.settings&&(i.settings=hA(!0,i.settings,p.settings))}function a(p){let g=-1;if(p!=null)if(Array.isArray(p))for(;++g<p.length;){const y=p[g];s(y)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function h(p,g){let y=-1,b=-1;for(;++y<r.length;)if(r[y][0]===p){b=y;break}if(b===-1)r.push([p,...g]);else if(g.length>0){let[S,...P]=g;const O=r[b][1];RI(O)&&RI(S)&&(S=hA(!0,O,S)),r[b]=[p,S,...P]}}}}const a3e=new SD().freeze();function mA(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function gA(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function yA(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function O8(t){if(!RI(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function A8(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function QS(t){return l3e(t)?t:new SZ(t)}function l3e(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function c3e(t){return typeof t=="string"||u3e(t)}function u3e(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const h3e="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",E8=[],z8={allowDangerousHtml:!0},d3e=/^(https?|ircs?|mailto|xmpp)$/i,f3e=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function p3e(t){const e=m3e(t),n=g3e(t);return y3e(e.runSync(e.parse(n),n),t)}function m3e(t){const e=t.rehypePlugins||E8,n=t.remarkPlugins||E8,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...z8}:z8;return a3e().use(KDe).use(n).use(ULe,r).use(e)}function g3e(t){const e=t.children||"",n=new SZ;return typeof e=="string"&&(n.value=e),n}function y3e(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,h=e.urlTransform||x3e;for(const g of f3e)Object.hasOwn(e,g.from)&&(""+g.from+(g.to?"use `"+g.to+"` instead":"remove it")+h3e+g.id,void 0);return wD(t,p),I5e(t,{Fragment:u.Fragment,components:i,ignoreInvalidStyle:!0,jsx:u.jsx,jsxs:u.jsxs,passKeys:!0,passNode:!0});function p(g,y,b){if(g.type==="raw"&&b&&typeof y=="number")return o?b.children.splice(y,1):b.children[y]={type:"text",value:g.value},y;if(g.type==="element"){let S;for(S in lA)if(Object.hasOwn(lA,S)&&Object.hasOwn(g.properties,S)){const P=g.properties[S],O=lA[S];(O===null||O.includes(g.tagName))&&(g.properties[S]=h(String(P||""),S,g))}}if(g.type==="element"){let S=n?!n.includes(g.tagName):s?s.includes(g.tagName):!1;if(!S&&r&&typeof y=="number"&&(S=!r(g,y,b)),S&&b&&typeof y=="number")return a&&g.children?b.children.splice(y,1,...g.children):b.children.splice(y,1),y}}}function x3e(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||d3e.test(t.slice(0,e))?t:""}function I8(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function v3e(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function b3e(t,e,n){const i=VT((n||{}).ignore||[]),s=_3e(e);let o=-1;for(;++o<s.length;)_Z(t,"text",a);function a(p,g){let y=-1,b;for(;++y<g.length;){const S=g[y],P=b?b.children:void 0;if(i(S,P?P.indexOf(S):void 0,b))return;b=S}if(b)return h(p,g)}function h(p,g){const y=g[g.length-1],b=s[o][0],S=s[o][1];let P=0;const D=y.children.indexOf(p);let z=!1,F=[];b.lastIndex=0;let R=b.exec(p.value);for(;R;){const N=R.index,Q={index:R.index,input:R.input,stack:[...g,p]};let q=S(...R,Q);if(typeof q=="string"&&(q=q.length>0?{type:"text",value:q}:void 0),q===!1?b.lastIndex=N+1:(P!==N&&F.push({type:"text",value:p.value.slice(P,N)}),Array.isArray(q)?F.push(...q):q&&F.push(q),P=N+R[0].length,z=!0),!b.global)break;R=b.exec(p.value)}return z?(P<p.value.length&&F.push({type:"text",value:p.value.slice(P)}),y.children.splice(D,1,...F)):F=[p],D+F.length}}function _3e(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([w3e(i[0]),S3e(i[1])])}return e}function w3e(t){return typeof t=="string"?new RegExp(v3e(t),"g"):t}function S3e(t){return typeof t=="function"?t:function(){return t}}const xA="phrasing",vA=["autolink","link","image","label"];function k3e(){return{transforms:[E3e],enter:{literalAutolink:T3e,literalAutolinkEmail:bA,literalAutolinkHttp:bA,literalAutolinkWww:bA},exit:{literalAutolink:A3e,literalAutolinkEmail:O3e,literalAutolinkHttp:j3e,literalAutolinkWww:P3e}}}function C3e(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:xA,notInConstruct:vA},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:xA,notInConstruct:vA},{character:":",before:"[ps]",after:"\\/",inConstruct:xA,notInConstruct:vA}]}}function T3e(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function bA(t){this.config.enter.autolinkProtocol.call(this,t)}function j3e(t){this.config.exit.autolinkProtocol.call(this,t)}function P3e(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function O3e(t){this.config.exit.autolinkEmail.call(this,t)}function A3e(t){this.exit(t)}function E3e(t){b3e(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,z3e],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),I3e]],{ignore:["link","linkReference"]})}function z3e(t,e,n,r,i){let s="";if(!kZ(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!M3e(n)))return!1;const o=R3e(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function I3e(t,e,n,r){return!kZ(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function M3e(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function R3e(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=I8(t,"(");let s=I8(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function kZ(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Km(n)||BT(n))&&(!e||n!==47)}CZ.peek=U3e;function D3e(){this.buffer()}function L3e(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function F3e(){this.buffer()}function B3e(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function $3e(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Wc(this.sliceSerialize(t)).toLowerCase(),n.label=e}function N3e(t){this.exit(t)}function V3e(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Wc(this.sliceSerialize(t)).toLowerCase(),n.label=e}function W3e(t){this.exit(t)}function U3e(){return"["}function CZ(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function q3e(){return{enter:{gfmFootnoteCallString:D3e,gfmFootnoteCall:L3e,gfmFootnoteDefinitionLabelString:F3e,gfmFootnoteDefinition:B3e},exit:{gfmFootnoteCallString:$3e,gfmFootnoteCall:N3e,gfmFootnoteDefinitionLabelString:V3e,gfmFootnoteDefinition:W3e}}}function Q3e(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:CZ},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let h=a.move("[^");const p=s.enter("footnoteDefinition"),g=s.enter("label");return h+=a.move(s.safe(s.associationId(r),{before:h,after:"]"})),g(),h+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),h+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?TZ:H3e))),p(),h}}function H3e(t,e,n){return e===0?t:TZ(t,e,n)}function TZ(t,e,n){return(n?"":"    ")+t}const G3e=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];jZ.peek=J3e;function X3e(){return{canContainEols:["delete"],enter:{strikethrough:Z3e},exit:{strikethrough:Y3e}}}function K3e(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:G3e}],handlers:{delete:jZ}}}function Z3e(t){this.enter({type:"delete",children:[]},t)}function Y3e(t){this.exit(t)}function jZ(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function J3e(){return"~"}function e4e(t){return t.length}function t4e(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||e4e,s=[],o=[],a=[],h=[];let p=0,g=-1;for(;++g<t.length;){const O=[],D=[];let z=-1;for(t[g].length>p&&(p=t[g].length);++z<t[g].length;){const F=n4e(t[g][z]);if(n.alignDelimiters!==!1){const R=i(F);D[z]=R,(h[z]===void 0||R>h[z])&&(h[z]=R)}O.push(F)}o[g]=O,a[g]=D}let y=-1;if(typeof r=="object"&&"length"in r)for(;++y<p;)s[y]=M8(r[y]);else{const O=M8(r);for(;++y<p;)s[y]=O}y=-1;const b=[],S=[];for(;++y<p;){const O=s[y];let D="",z="";O===99?(D=":",z=":"):O===108?D=":":O===114&&(z=":");let F=n.alignDelimiters===!1?1:Math.max(1,h[y]-D.length-z.length);const R=D+"-".repeat(F)+z;n.alignDelimiters!==!1&&(F=D.length+F+z.length,F>h[y]&&(h[y]=F),S[y]=F),b[y]=R}o.splice(1,0,b),a.splice(1,0,S),g=-1;const P=[];for(;++g<o.length;){const O=o[g],D=a[g];y=-1;const z=[];for(;++y<p;){const F=O[y]||"";let R="",N="";if(n.alignDelimiters!==!1){const Q=h[y]-(D[y]||0),q=s[y];q===114?R=" ".repeat(Q):q===99?Q%2?(R=" ".repeat(Q/2+.5),N=" ".repeat(Q/2-.5)):(R=" ".repeat(Q/2),N=R):N=" ".repeat(Q)}n.delimiterStart!==!1&&!y&&z.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&F==="")&&(n.delimiterStart!==!1||y)&&z.push(" "),n.alignDelimiters!==!1&&z.push(R),z.push(F),n.alignDelimiters!==!1&&z.push(N),n.padding!==!1&&z.push(" "),(n.delimiterEnd!==!1||y!==p-1)&&z.push("|")}P.push(n.delimiterEnd===!1?z.join("").replace(/ +$/,""):z.join(""))}return P.join(`
`)}function n4e(t){return t==null?"":String(t)}function M8(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function r4e(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),i4e);return i(),o}function i4e(t,e,n){return">"+(n?"":" ")+t}function s4e(t,e){return R8(t,e.inConstruct,!0)&&!R8(t,e.notInConstruct,!1)}function R8(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function D8(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&s4e(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function o4e(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function a4e(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function l4e(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function c4e(t,e,n,r){const i=l4e(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(a4e(t,n)){const y=n.enter("codeIndented"),b=n.indentLines(s,u4e);return y(),b}const a=n.createTracker(r),h=i.repeat(Math.max(o4e(s,i)+1,3)),p=n.enter("codeFenced");let g=a.move(h);if(t.lang){const y=n.enter(`codeFencedLang${o}`);g+=a.move(n.safe(t.lang,{before:g,after:" ",encode:["`"],...a.current()})),y()}if(t.lang&&t.meta){const y=n.enter(`codeFencedMeta${o}`);g+=a.move(" "),g+=a.move(n.safe(t.meta,{before:g,after:`
`,encode:["`"],...a.current()})),y()}return g+=a.move(`
`),s&&(g+=a.move(s+`
`)),g+=a.move(h),p(),g}function u4e(t,e,n){return(n?"":"    ")+t}function kD(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function h4e(t,e,n,r){const i=kD(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const h=n.createTracker(r);let p=h.move("[");return p+=h.move(n.safe(n.associationId(t),{before:p,after:"]",...h.current()})),p+=h.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),p+=h.move("<"),p+=h.move(n.safe(t.url,{before:p,after:">",...h.current()})),p+=h.move(">")):(a=n.enter("destinationRaw"),p+=h.move(n.safe(t.url,{before:p,after:t.title?" ":`
`,...h.current()}))),a(),t.title&&(a=n.enter(`title${s}`),p+=h.move(" "+i),p+=h.move(n.safe(t.title,{before:p,after:i,...h.current()})),p+=h.move(i),a()),o(),p}function d4e(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function G1(t){return"&#x"+t.toString(16).toUpperCase()+";"}function hC(t,e,n){const r=ex(t),i=ex(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}PZ.peek=f4e;function PZ(t,e,n,r){const i=d4e(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let h=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const p=h.charCodeAt(0),g=hC(r.before.charCodeAt(r.before.length-1),p,i);g.inside&&(h=G1(p)+h.slice(1));const y=h.charCodeAt(h.length-1),b=hC(r.after.charCodeAt(0),y,i);b.inside&&(h=h.slice(0,-1)+G1(y));const S=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:b.outside,before:g.outside},a+h+S}function f4e(t,e,n){return n.options.emphasis||"*"}function p4e(t,e){let n=!1;return wD(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,II}),!!((!t.depth||t.depth<3)&&mD(t)&&(e.options.setext||n))}function m4e(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(p4e(t,n)){const g=n.enter("headingSetext"),y=n.enter("phrasing"),b=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return y(),g(),b+`
`+(i===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),h=n.enter("phrasing");s.move(o+" ");let p=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(p)&&(p=G1(p.charCodeAt(0))+p.slice(1)),p=p?o+" "+p:o,n.options.closeAtx&&(p+=" "+o),h(),a(),p}OZ.peek=g4e;function OZ(t){return t.value||""}function g4e(){return"<"}AZ.peek=y4e;function AZ(t,e,n,r){const i=kD(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const h=n.createTracker(r);let p=h.move("![");return p+=h.move(n.safe(t.alt,{before:p,after:"]",...h.current()})),p+=h.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),p+=h.move("<"),p+=h.move(n.safe(t.url,{before:p,after:">",...h.current()})),p+=h.move(">")):(a=n.enter("destinationRaw"),p+=h.move(n.safe(t.url,{before:p,after:t.title?" ":")",...h.current()}))),a(),t.title&&(a=n.enter(`title${s}`),p+=h.move(" "+i),p+=h.move(n.safe(t.title,{before:p,after:i,...h.current()})),p+=h.move(i),a()),p+=h.move(")"),o(),p}function y4e(){return"!"}EZ.peek=x4e;function EZ(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let h=a.move("![");const p=n.safe(t.alt,{before:h,after:"]",...a.current()});h+=a.move(p+"]["),o();const g=n.stack;n.stack=[],o=n.enter("reference");const y=n.safe(n.associationId(t),{before:h,after:"]",...a.current()});return o(),n.stack=g,s(),i==="full"||!p||p!==y?h+=a.move(y+"]"):i==="shortcut"?h=h.slice(0,-1):h+=a.move("]"),h}function x4e(){return"!"}zZ.peek=v4e;function zZ(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let h;if(o.atBreak)for(;h=a.exec(r);){let p=h.index;r.charCodeAt(p)===10&&r.charCodeAt(p-1)===13&&p--,r=r.slice(0,p)+" "+r.slice(h.index+1)}}return i+r+i}function v4e(){return"`"}function IZ(t,e){const n=mD(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}MZ.peek=b4e;function MZ(t,e,n,r){const i=kD(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,h;if(IZ(t,n)){const g=n.stack;n.stack=[],a=n.enter("autolink");let y=o.move("<");return y+=o.move(n.containerPhrasing(t,{before:y,after:">",...o.current()})),y+=o.move(">"),a(),n.stack=g,y}a=n.enter("link"),h=n.enter("label");let p=o.move("[");return p+=o.move(n.containerPhrasing(t,{before:p,after:"](",...o.current()})),p+=o.move("]("),h(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(h=n.enter("destinationLiteral"),p+=o.move("<"),p+=o.move(n.safe(t.url,{before:p,after:">",...o.current()})),p+=o.move(">")):(h=n.enter("destinationRaw"),p+=o.move(n.safe(t.url,{before:p,after:t.title?" ":")",...o.current()}))),h(),t.title&&(h=n.enter(`title${s}`),p+=o.move(" "+i),p+=o.move(n.safe(t.title,{before:p,after:i,...o.current()})),p+=o.move(i),h()),p+=o.move(")"),a(),p}function b4e(t,e,n){return IZ(t,n)?"<":"["}RZ.peek=_4e;function RZ(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let h=a.move("[");const p=n.containerPhrasing(t,{before:h,after:"]",...a.current()});h+=a.move(p+"]["),o();const g=n.stack;n.stack=[],o=n.enter("reference");const y=n.safe(n.associationId(t),{before:h,after:"]",...a.current()});return o(),n.stack=g,s(),i==="full"||!p||p!==y?h+=a.move(y+"]"):i==="shortcut"?h=h.slice(0,-1):h+=a.move("]"),h}function _4e(){return"["}function CD(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function w4e(t){const e=CD(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function S4e(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function DZ(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function k4e(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?S4e(n):CD(n);const a=t.ordered?o==="."?")":".":w4e(n);let h=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const g=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&g&&(!g.children||!g.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(h=!0),DZ(n)===o&&g){let y=-1;for(;++y<t.children.length;){const b=t.children[y];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){h=!0;break}}}}h&&(o=a),n.bulletCurrent=o;const p=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),p}function C4e(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function T4e(t,e,n,r){const i=C4e(n);let s=n.bulletCurrent||CD(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const h=n.enter("listItem"),p=n.indentLines(n.containerFlow(t,a.current()),g);return h(),p;function g(y,b,S){return b?(S?"":" ".repeat(o))+y:(S?s:s+" ".repeat(o-s.length))+y}}function j4e(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const P4e=VT(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function O4e(t,e,n,r){return(t.children.some(function(o){return P4e(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function A4e(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}LZ.peek=E4e;function LZ(t,e,n,r){const i=A4e(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let h=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const p=h.charCodeAt(0),g=hC(r.before.charCodeAt(r.before.length-1),p,i);g.inside&&(h=G1(p)+h.slice(1));const y=h.charCodeAt(h.length-1),b=hC(r.after.charCodeAt(0),y,i);b.inside&&(h=h.slice(0,-1)+G1(y));const S=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:b.outside,before:g.outside},a+h+S}function E4e(t,e,n){return n.options.strong||"*"}function z4e(t,e,n,r){return n.safe(t.value,r)}function I4e(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function M4e(t,e,n){const r=(DZ(n)+(n.options.ruleSpaces?" ":"")).repeat(I4e(n));return n.options.ruleSpaces?r.slice(0,-1):r}const FZ={blockquote:r4e,break:D8,code:c4e,definition:h4e,emphasis:PZ,hardBreak:D8,heading:m4e,html:OZ,image:AZ,imageReference:EZ,inlineCode:zZ,link:MZ,linkReference:RZ,list:k4e,listItem:T4e,paragraph:j4e,root:O4e,strong:LZ,text:z4e,thematicBreak:M4e};function R4e(){return{enter:{table:D4e,tableData:L8,tableHeader:L8,tableRow:F4e},exit:{codeText:B4e,table:L4e,tableData:_A,tableHeader:_A,tableRow:_A}}}function D4e(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function L4e(t){this.exit(t),this.data.inTable=void 0}function F4e(t){this.enter({type:"tableRow",children:[]},t)}function _A(t){this.exit(t)}function L8(t){this.enter({type:"tableCell",children:[]},t)}function B4e(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,$4e));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function $4e(t,e){return e==="|"?e:t}function N4e(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:b,table:o,tableCell:h,tableRow:a}};function o(S,P,O,D){return p(g(S,O,D),S.align)}function a(S,P,O,D){const z=y(S,O,D),F=p([z]);return F.slice(0,F.indexOf(`
`))}function h(S,P,O,D){const z=O.enter("tableCell"),F=O.enter("phrasing"),R=O.containerPhrasing(S,{...D,before:s,after:s});return F(),z(),R}function p(S,P){return t4e(S,{align:P,alignDelimiters:r,padding:n,stringLength:i})}function g(S,P,O){const D=S.children;let z=-1;const F=[],R=P.enter("table");for(;++z<D.length;)F[z]=y(D[z],P,O);return R(),F}function y(S,P,O){const D=S.children;let z=-1;const F=[],R=P.enter("tableRow");for(;++z<D.length;)F[z]=h(D[z],S,P,O);return R(),F}function b(S,P,O){let D=FZ.inlineCode(S,P,O);return O.stack.includes("tableCell")&&(D=D.replace(/\|/g,"\\$&")),D}}function V4e(){return{exit:{taskListCheckValueChecked:F8,taskListCheckValueUnchecked:F8,paragraph:U4e}}}function W4e(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:q4e}}}function F8(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function U4e(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function q4e(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let h=FZ.listItem(t,e,n,{...r,...a.current()});return s&&(h=h.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,p)),h;function p(g){return g+o}}function Q4e(){return[k3e(),q3e(),X3e(),R4e(),V4e()]}function H4e(t){return{extensions:[C3e(),Q3e(t),K3e(),N4e(t),W4e()]}}const G4e={tokenize:eFe,partial:!0},BZ={tokenize:tFe,partial:!0},$Z={tokenize:nFe,partial:!0},NZ={tokenize:rFe,partial:!0},X4e={tokenize:iFe,partial:!0},VZ={name:"wwwAutolink",tokenize:Y4e,previous:UZ},WZ={name:"protocolAutolink",tokenize:J4e,previous:qZ},Jh={name:"emailAutolink",tokenize:Z4e,previous:QZ},Yu={};function K4e(){return{text:Yu}}let Fp=48;for(;Fp<123;)Yu[Fp]=Jh,Fp++,Fp===58?Fp=65:Fp===91&&(Fp=97);Yu[43]=Jh;Yu[45]=Jh;Yu[46]=Jh;Yu[95]=Jh;Yu[72]=[Jh,WZ];Yu[104]=[Jh,WZ];Yu[87]=[Jh,VZ];Yu[119]=[Jh,VZ];function Z4e(t,e,n){const r=this;let i,s;return o;function o(y){return!LI(y)||!QZ.call(r,r.previous)||TD(r.events)?n(y):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(y))}function a(y){return LI(y)?(t.consume(y),a):y===64?(t.consume(y),h):n(y)}function h(y){return y===46?t.check(X4e,g,p)(y):y===45||y===95||Do(y)?(s=!0,t.consume(y),h):g(y)}function p(y){return t.consume(y),i=!0,h}function g(y){return s&&i&&ia(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(y)):n(y)}}function Y4e(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!UZ.call(r,r.previous)||TD(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(G4e,t.attempt(BZ,t.attempt($Z,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function J4e(t,e,n){const r=this;let i="",s=!1;return o;function o(y){return(y===72||y===104)&&qZ.call(r,r.previous)&&!TD(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(y),t.consume(y),a):n(y)}function a(y){if(ia(y)&&i.length<5)return i+=String.fromCodePoint(y),t.consume(y),a;if(y===58){const b=i.toLowerCase();if(b==="http"||b==="https")return t.consume(y),h}return n(y)}function h(y){return y===47?(t.consume(y),s?p:(s=!0,h)):n(y)}function p(y){return y===null||lC(y)||ui(y)||Km(y)||BT(y)?n(y):t.attempt(BZ,t.attempt($Z,g),n)(y)}function g(y){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(y)}}function eFe(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function tFe(t,e,n){let r,i,s;return o;function o(p){return p===46||p===95?t.check(NZ,h,a)(p):p===null||ui(p)||Km(p)||p!==45&&BT(p)?h(p):(s=!0,t.consume(p),o)}function a(p){return p===95?r=!0:(i=r,r=void 0),t.consume(p),o}function h(p){return i||r||!s?n(p):e(p)}}function nFe(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(NZ,e,s)(o):o===null||ui(o)||Km(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function rFe(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||ui(a)||Km(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||ui(a)||Km(a)?e(a):r(a)}function s(a){return ia(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):ia(a)?(t.consume(a),o):n(a)}}function iFe(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return Do(s)?n(s):e(s)}}function UZ(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||ui(t)}function qZ(t){return!ia(t)}function QZ(t){return!(t===47||LI(t))}function LI(t){return t===43||t===45||t===46||t===95||Do(t)}function TD(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const sFe={tokenize:fFe,partial:!0};function oFe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:uFe,continuation:{tokenize:hFe},exit:dFe}},text:{91:{name:"gfmFootnoteCall",tokenize:cFe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:aFe,resolveTo:lFe}}}}function aFe(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const h=r.events[i][1];if(h.type==="labelImage"){o=h;break}if(h.type==="gfmFootnoteCall"||h.type==="labelLink"||h.type==="label"||h.type==="image"||h.type==="link")break}return a;function a(h){if(!o||!o._balanced)return n(h);const p=Wc(r.sliceSerialize({start:o.end,end:r.now()}));return p.codePointAt(0)!==94||!s.includes(p.slice(1))?n(h):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),e(h))}}function lFe(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function cFe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(y){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(y),t.exit("gfmFootnoteCallLabelMarker"),h}function h(y){return y!==94?n(y):(t.enter("gfmFootnoteCallMarker"),t.consume(y),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",p)}function p(y){if(s>999||y===93&&!o||y===null||y===91||ui(y))return n(y);if(y===93){t.exit("chunkString");const b=t.exit("gfmFootnoteCallString");return i.includes(Wc(r.sliceSerialize(b)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(y),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(y)}return ui(y)||(o=!0),s++,t.consume(y),y===92?g:p}function g(y){return y===91||y===92||y===93?(t.consume(y),s++,p):p(y)}}function uFe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return h;function h(P){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(P),t.exit("gfmFootnoteDefinitionLabelMarker"),p}function p(P){return P===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(P),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",g):n(P)}function g(P){if(o>999||P===93&&!a||P===null||P===91||ui(P))return n(P);if(P===93){t.exit("chunkString");const O=t.exit("gfmFootnoteDefinitionLabelString");return s=Wc(r.sliceSerialize(O)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(P),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),b}return ui(P)||(a=!0),o++,t.consume(P),P===92?y:g}function y(P){return P===91||P===92||P===93?(t.consume(P),o++,g):g(P)}function b(P){return P===58?(t.enter("definitionMarker"),t.consume(P),t.exit("definitionMarker"),i.includes(s)||i.push(s),Pr(t,S,"gfmFootnoteDefinitionWhitespace")):n(P)}function S(P){return e(P)}}function hFe(t,e,n){return t.check($_,e,t.attempt(sFe,e,n))}function dFe(t){t.exit("gfmFootnoteDefinition")}function fFe(t,e,n){const r=this;return Pr(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function pFe(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let h=-1;for(;++h<o.length;)if(o[h][0]==="enter"&&o[h][1].type==="strikethroughSequenceTemporary"&&o[h][1]._close){let p=h;for(;p--;)if(o[p][0]==="exit"&&o[p][1].type==="strikethroughSequenceTemporary"&&o[p][1]._open&&o[h][1].end.offset-o[h][1].start.offset===o[p][1].end.offset-o[p][1].start.offset){o[h][1].type="strikethroughSequence",o[p][1].type="strikethroughSequence";const g={type:"strikethrough",start:Object.assign({},o[p][1].start),end:Object.assign({},o[h][1].end)},y={type:"strikethroughText",start:Object.assign({},o[p][1].end),end:Object.assign({},o[h][1].start)},b=[["enter",g,a],["enter",o[p][1],a],["exit",o[p][1],a],["enter",y,a]],S=a.parser.constructs.insideSpan.null;S&&bl(b,b.length,0,$T(S,o.slice(p+1,h),a)),bl(b,b.length,0,[["exit",y,a],["enter",o[h][1],a],["exit",o[h][1],a],["exit",g,a]]),bl(o,p-1,h-p+3,b),h=p+b.length-2;break}}for(h=-1;++h<o.length;)o[h][1].type==="strikethroughSequenceTemporary"&&(o[h][1].type="data");return o}function s(o,a,h){const p=this.previous,g=this.events;let y=0;return b;function b(P){return p===126&&g[g.length-1][1].type!=="characterEscape"?h(P):(o.enter("strikethroughSequenceTemporary"),S(P))}function S(P){const O=ex(p);if(P===126)return y>1?h(P):(o.consume(P),y++,S);if(y<2&&!n)return h(P);const D=o.exit("strikethroughSequenceTemporary"),z=ex(P);return D._open=!z||z===2&&!!O,D._close=!O||O===2&&!!z,a(P)}}}class mFe{constructor(){this.map=[]}add(e,n,r){gFe(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function gFe(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function yFe(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function xFe(){return{flow:{null:{name:"table",tokenize:vFe,resolveAll:bFe}}}}function vFe(t,e,n){const r=this;let i=0,s=0,o;return a;function a(J){let ae=r.events.length-1;for(;ae>-1;){const $e=r.events[ae][1].type;if($e==="lineEnding"||$e==="linePrefix")ae--;else break}const Ee=ae>-1?r.events[ae][1].type:null,Ce=Ee==="tableHead"||Ee==="tableRow"?q:h;return Ce===q&&r.parser.lazy[r.now().line]?n(J):Ce(J)}function h(J){return t.enter("tableHead"),t.enter("tableRow"),p(J)}function p(J){return J===124||(o=!0,s+=1),g(J)}function g(J){return J===null?n(J):Bn(J)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(J),t.exit("lineEnding"),S):n(J):mr(J)?Pr(t,g,"whitespace")(J):(s+=1,o&&(o=!1,i+=1),J===124?(t.enter("tableCellDivider"),t.consume(J),t.exit("tableCellDivider"),o=!0,g):(t.enter("data"),y(J)))}function y(J){return J===null||J===124||ui(J)?(t.exit("data"),g(J)):(t.consume(J),J===92?b:y)}function b(J){return J===92||J===124?(t.consume(J),y):y(J)}function S(J){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(J):(t.enter("tableDelimiterRow"),o=!1,mr(J)?Pr(t,P,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(J):P(J))}function P(J){return J===45||J===58?D(J):J===124?(o=!0,t.enter("tableCellDivider"),t.consume(J),t.exit("tableCellDivider"),O):Q(J)}function O(J){return mr(J)?Pr(t,D,"whitespace")(J):D(J)}function D(J){return J===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(J),t.exit("tableDelimiterMarker"),z):J===45?(s+=1,z(J)):J===null||Bn(J)?N(J):Q(J)}function z(J){return J===45?(t.enter("tableDelimiterFiller"),F(J)):Q(J)}function F(J){return J===45?(t.consume(J),F):J===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(J),t.exit("tableDelimiterMarker"),R):(t.exit("tableDelimiterFiller"),R(J))}function R(J){return mr(J)?Pr(t,N,"whitespace")(J):N(J)}function N(J){return J===124?P(J):J===null||Bn(J)?!o||i!==s?Q(J):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(J)):Q(J)}function Q(J){return n(J)}function q(J){return t.enter("tableRow"),X(J)}function X(J){return J===124?(t.enter("tableCellDivider"),t.consume(J),t.exit("tableCellDivider"),X):J===null||Bn(J)?(t.exit("tableRow"),e(J)):mr(J)?Pr(t,X,"whitespace")(J):(t.enter("data"),K(J))}function K(J){return J===null||J===124||ui(J)?(t.exit("data"),X(J)):(t.consume(J),J===92?ne:K)}function ne(J){return J===92||J===124?(t.consume(J),K):K(J)}}function bFe(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,h=0,p,g,y;const b=new mFe;for(;++n<t.length;){const S=t[n],P=S[1];S[0]==="enter"?P.type==="tableHead"?(a=!1,h!==0&&(B8(b,e,h,p,g),g=void 0,h=0),p={type:"table",start:Object.assign({},P.start),end:Object.assign({},P.end)},b.add(n,0,[["enter",p,e]])):P.type==="tableRow"||P.type==="tableDelimiterRow"?(r=!0,y=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,g={type:"tableBody",start:Object.assign({},P.start),end:Object.assign({},P.end)},b.add(n,0,[["enter",g,e]])),i=P.type==="tableDelimiterRow"?2:g?3:1):i&&(P.type==="data"||P.type==="tableDelimiterMarker"||P.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],y=HS(b,e,s,i,void 0,y),s=[0,0,0,0]),o[2]=n)):P.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],y=HS(b,e,s,i,void 0,y)),s=o,o=[s[1],n,0,0])):P.type==="tableHead"?(a=!0,h=n):P.type==="tableRow"||P.type==="tableDelimiterRow"?(h=n,s[1]!==0?(o[0]=o[1],y=HS(b,e,s,i,n,y)):o[1]!==0&&(y=HS(b,e,o,i,n,y)),i=0):i&&(P.type==="data"||P.type==="tableDelimiterMarker"||P.type==="tableDelimiterFiller")&&(o[3]=n)}for(h!==0&&B8(b,e,h,p,g),b.consume(e.events),n=-1;++n<e.events.length;){const S=e.events[n];S[0]==="enter"&&S[1].type==="table"&&(S[1]._align=yFe(e.events,n))}return t}function HS(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},hy(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const h=hy(e.events,n[1]);if(s={type:o,start:Object.assign({},h),end:Object.assign({},h)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const p=hy(e.events,n[2]),g=hy(e.events,n[3]),y={type:a,start:Object.assign({},p),end:Object.assign({},g)};if(t.add(n[2],0,[["enter",y,e]]),r!==2){const b=e.events[n[2]],S=e.events[n[3]];if(b[1].end=Object.assign({},S[1].end),b[1].type="chunkText",b[1].contentType="text",n[3]>n[2]+1){const P=n[2]+1,O=n[3]-n[2]-1;t.add(P,O,[])}}t.add(n[3]+1,0,[["exit",y,e]])}return i!==void 0&&(s.end=Object.assign({},hy(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function B8(t,e,n,r,i){const s=[],o=hy(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function hy(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const _Fe={name:"tasklistCheck",tokenize:SFe};function wFe(){return{text:{91:_Fe}}}function SFe(t,e,n){const r=this;return i;function i(h){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(h):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(h),t.exit("taskListCheckMarker"),s)}function s(h){return ui(h)?(t.enter("taskListCheckValueUnchecked"),t.consume(h),t.exit("taskListCheckValueUnchecked"),o):h===88||h===120?(t.enter("taskListCheckValueChecked"),t.consume(h),t.exit("taskListCheckValueChecked"),o):n(h)}function o(h){return h===93?(t.enter("taskListCheckMarker"),t.consume(h),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(h)}function a(h){return Bn(h)?e(h):mr(h)?t.check({tokenize:kFe},e,n)(h):n(h)}}function kFe(t,e,n){return Pr(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function CFe(t){return nZ([K4e(),oFe(),pFe(t),xFe(),wFe()])}const TFe={};function jFe(t){const e=this,n=t||TFe,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(CFe(n)),s.push(Q4e()),o.push(H4e(n))}function PFe({isOpen:t,onClose:e}){const n=Et("white","gray.800"),r=Et("gray.200","gray.600"),i=Et("kartoza.600","kartoza.300"),s=Et("gray.50","gray.900"),{data:o,isLoading:a}=er({queryKey:["documentation"],queryFn:fke,staleTime:5*60*1e3,enabled:t});return L.useEffect(()=>{const h=p=>{p.key==="Escape"&&t&&e()};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[t,e]),u.jsx(Sl,{children:t&&u.jsxs(w1e,{isOpen:t,placement:"right",onClose:e,size:"lg",children:[u.jsx(ts,{bg:"blackAlpha.400",backdropFilter:"blur(2px)"}),u.jsxs(TQ,{bg:n,maxW:"600px",children:[u.jsx(Is,{size:"lg"}),u.jsx(ax,{borderBottomWidth:"1px",borderColor:r,bg:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)",color:"white",children:u.jsxs(me,{spacing:3,children:[u.jsx(Le,{as:fR,boxSize:6}),u.jsx(te,{children:"Kartoza CloudBench Help"})]})}),u.jsx(ys,{p:0,overflow:"auto",children:a?u.jsxs(at,{py:10,spacing:4,children:[u.jsx(Cr,{size:"xl",color:"kartoza.500"}),u.jsx(te,{color:"gray.500",children:"Loading documentation..."})]}):o!=null&&o.content?u.jsx(de,{p:6,className:"markdown-content",children:u.jsx(p3e,{remarkPlugins:[jFe],components:{h1:({children:h})=>u.jsx(lr,{as:"h1",size:"xl",mt:6,mb:4,color:i,children:h}),h2:({children:h})=>u.jsx(lr,{as:"h2",size:"lg",mt:6,mb:3,color:i,borderBottomWidth:"1px",borderColor:r,pb:2,children:h}),h3:({children:h})=>u.jsx(lr,{as:"h3",size:"md",mt:4,mb:2,color:i,children:h}),h4:({children:h})=>u.jsx(lr,{as:"h4",size:"sm",mt:3,mb:2,children:h}),p:({children:h})=>u.jsx(te,{mb:3,lineHeight:"tall",children:h}),ul:({children:h})=>u.jsx(de,{as:"ul",pl:6,mb:3,listStyleType:"disc",children:h}),ol:({children:h})=>u.jsx(de,{as:"ol",pl:6,mb:3,listStyleType:"decimal",children:h}),li:({children:h})=>u.jsx(de,{as:"li",mb:1,children:h}),code:({className:h,children:p})=>h?u.jsx(de,{as:"pre",bg:s,p:4,borderRadius:"md",overflowX:"auto",mb:3,fontSize:"sm",children:u.jsx(ec,{bg:"transparent",display:"block",whiteSpace:"pre",children:p})}):u.jsx(ec,{px:2,py:.5,borderRadius:"md",fontSize:"sm",children:p}),table:({children:h})=>u.jsx(de,{overflowX:"auto",mb:4,children:u.jsx(rg,{size:"sm",variant:"simple",children:h})}),thead:({children:h})=>u.jsx(C_,{children:h}),tbody:({children:h})=>u.jsx(lx,{children:h}),tr:({children:h})=>u.jsx(za,{children:h}),th:({children:h})=>u.jsx(Dc,{bg:s,fontWeight:"semibold",children:h}),td:({children:h})=>u.jsx(Qi,{children:h}),blockquote:({children:h})=>u.jsx(de,{pl:4,borderLeftWidth:"4px",borderColor:"kartoza.400",color:"gray.600",fontStyle:"italic",mb:3,children:h}),hr:()=>u.jsx(de,{as:"hr",my:6,borderColor:r}),a:({href:h,children:p})=>u.jsx(te,{as:"a",href:h,color:"kartoza.500",textDecoration:"underline",_hover:{color:"kartoza.600"},target:"_blank",rel:"noopener noreferrer",children:p})},children:o.content})}):u.jsx(OFe,{})})]})]})})}function OFe(){const t=Et("kartoza.600","kartoza.300"),e=Et("gray.200","gray.600");return u.jsxs(at,{align:"stretch",spacing:6,p:6,children:[u.jsxs(de,{children:[u.jsxs(me,{mb:4,children:[u.jsx(Le,{as:Cwe,color:"kartoza.500",boxSize:5}),u.jsx(lr,{size:"md",color:t,children:"Keyboard Shortcuts"})]}),u.jsx(rg,{size:"sm",variant:"simple",children:u.jsxs(lx,{children:[u.jsxs(za,{children:[u.jsxs(Qi,{children:[u.jsx(ks,{children:"Ctrl"})," + ",u.jsx(ks,{children:"K"})]}),u.jsx(Qi,{children:"Open universal search"})]}),u.jsxs(za,{children:[u.jsx(Qi,{children:u.jsx(ks,{children:"?"})}),u.jsx(Qi,{children:"Toggle help panel"})]}),u.jsxs(za,{children:[u.jsx(Qi,{children:u.jsx(ks,{children:"Tab"})}),u.jsx(Qi,{children:"Switch between panels"})]}),u.jsxs(za,{children:[u.jsx(Qi,{children:u.jsx(ks,{children:"Enter"})}),u.jsx(Qi,{children:"Expand/select item"})]}),u.jsxs(za,{children:[u.jsx(Qi,{children:u.jsx(ks,{children:"Esc"})}),u.jsx(Qi,{children:"Close dialog/panel"})]})]})})]}),u.jsxs(sT,{allowMultiple:!0,children:[u.jsxs(Yd,{border:"none",children:[u.jsxs(Kd,{px:0,children:[u.jsxs(me,{flex:1,children:[u.jsx(Le,{as:V0,color:"kartoza.500"}),u.jsx(te,{fontWeight:"semibold",children:"Universal Search"})]}),u.jsx(Zd,{})]}),u.jsxs(Jd,{pl:6,children:[u.jsxs(te,{mb:2,children:["Press ",u.jsx(ks,{children:"Ctrl"}),"+",u.jsx(ks,{children:"K"})," to search across all GeoServer connections and PostgreSQL services."]}),u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Search for workspaces, layers, styles, tables, and more."})]})]}),u.jsxs(Yd,{border:"none",children:[u.jsxs(Kd,{px:0,children:[u.jsxs(me,{flex:1,children:[u.jsx(Le,{as:mi,color:"kartoza.500"}),u.jsx(te,{fontWeight:"semibold",children:"GeoServer Management"})]}),u.jsx(Zd,{})]}),u.jsx(Jd,{pl:6,children:u.jsxs(at,{align:"start",spacing:2,children:[u.jsx(te,{children:"Manage GeoServer resources:"}),u.jsxs(me,{children:[u.jsx(Lt,{colorScheme:"blue",children:"Workspaces"}),u.jsx(Lt,{colorScheme:"green",children:"Data Stores"}),u.jsx(Lt,{colorScheme:"orange",children:"Coverages"})]}),u.jsxs(me,{children:[u.jsx(Lt,{colorScheme:"teal",children:"Layers"}),u.jsx(Lt,{colorScheme:"purple",children:"Styles"}),u.jsx(Lt,{colorScheme:"cyan",children:"Layer Groups"})]})]})})]}),u.jsxs(Yd,{border:"none",children:[u.jsxs(Kd,{px:0,children:[u.jsxs(me,{flex:1,children:[u.jsx(Le,{as:Gh,color:"blue.500"}),u.jsx(te,{fontWeight:"semibold",children:"PostgreSQL Integration"})]}),u.jsx(Zd,{})]}),u.jsxs(Jd,{pl:6,children:[u.jsxs(te,{mb:2,children:["Connect to PostgreSQL databases via ",u.jsx(ec,{children:"pg_service.conf"}),"."]}),u.jsx(te,{fontSize:"sm",color:"gray.500",children:"Browse schemas, tables, views, and columns. Import data using ogr2ogr and raster2pgsql."})]})]}),u.jsxs(Yd,{border:"none",children:[u.jsxs(Kd,{px:0,children:[u.jsxs(me,{flex:1,children:[u.jsx(Le,{as:Ol,color:"kartoza.500"}),u.jsx(te,{fontWeight:"semibold",children:"Data Import"})]}),u.jsx(Zd,{})]}),u.jsxs(Jd,{pl:6,children:[u.jsx(te,{mb:2,children:"Supported formats:"}),u.jsxs(at,{align:"start",spacing:1,fontSize:"sm",children:[u.jsxs(me,{children:[u.jsx(Lt,{size:"sm",children:"Shapefile"}),u.jsx(Lt,{size:"sm",children:"GeoPackage"}),u.jsx(Lt,{size:"sm",children:"GeoJSON"})]}),u.jsxs(me,{children:[u.jsx(Lt,{size:"sm",children:"GeoTIFF"}),u.jsx(Lt,{size:"sm",children:"KML/KMZ"}),u.jsx(Lt,{size:"sm",children:"CSV"})]})]})]})]}),u.jsxs(Yd,{border:"none",children:[u.jsxs(Kd,{px:0,children:[u.jsxs(me,{flex:1,children:[u.jsx(Le,{as:pc,color:"kartoza.500"}),u.jsx(te,{fontWeight:"semibold",children:"Style Editing"})]}),u.jsx(Zd,{})]}),u.jsxs(Jd,{pl:6,children:[u.jsx(te,{mb:2,children:"Edit layer styles with:"}),u.jsxs(at,{align:"start",spacing:1,fontSize:"sm",children:[u.jsx(te,{children:"Visual Editor - WYSIWYG style designer"}),u.jsx(te,{children:"Code Editor - SLD/CSS syntax highlighting"}),u.jsx(te,{children:"Live Preview - Real-time WMS preview"})]})]})]})]}),u.jsxs(de,{pt:4,borderTopWidth:"1px",borderColor:e,children:[u.jsx(te,{fontSize:"sm",color:"gray.500",textAlign:"center",children:"Kartoza CloudBench v0.14.0"}),u.jsxs(te,{fontSize:"xs",color:"gray.400",textAlign:"center",mt:1,children:["Press ",u.jsx(ks,{size:"xs",children:"?"})," to toggle this help panel"]})]})]})}function AFe(t){L.useEffect(()=>{const e=n=>{const r=n.target,i=r.tagName==="INPUT"||r.tagName==="TEXTAREA"||r.isContentEditable;n.key==="?"&&!i&&(n.preventDefault(),t())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t])}function EFe(){const[t,e]=L.useState(!1),[n,r]=L.useState(!1);DMe(()=>e(!0));const i=L.useCallback(()=>r(s=>!s),[]);return AFe(i),u.jsxs(u.Fragment,{children:[u.jsx(Ake,{onSearchClick:()=>e(!0),onHelpClick:()=>r(!0),children:u.jsx(Uke,{})}),u.jsx(EMe,{}),u.jsx(MMe,{isOpen:t,onClose:()=>e(!1)}),u.jsx(PFe,{isOpen:n,onClose:()=>r(!1)})]})}const zFe={kartoza:{50:"#e8f2f6",100:"#c5dfe8",200:"#9ecbd9",300:"#6eb2c7",400:"#4f9bb3",500:"#417d9b",600:"#386d87",700:"#2d5a70",800:"#234859",900:"#193642"},accent:{50:"#fdf6e8",100:"#fae9c5",200:"#f5d89e",300:"#efc777",400:"#e9b650",500:"#dea037",600:"#c78d2f",700:"#a67525",800:"#865d1c",900:"#664612"},gray:{50:"#f5f5f5",100:"#e8e9e8",200:"#d4d5d4",300:"#b8b9b8",400:"#9fa09f",500:"#8b8d8a",600:"#737573",700:"#5c5e5c",800:"#454745",900:"#2e302e"}},IFe={sm:"0 2px 8px rgba(65, 125, 155, 0.08)",md:"0 4px 16px rgba(65, 125, 155, 0.12)",lg:"0 8px 32px rgba(65, 125, 155, 0.16)",xl:"0 16px 48px rgba(65, 125, 155, 0.20)",kartoza:"0 4px 16px rgba(65, 125, 155, 0.10), 0 1px 4px rgba(0, 0, 0, 0.06)",kartozaHover:"0 8px 28px rgba(65, 125, 155, 0.16), 0 2px 8px rgba(0, 0, 0, 0.08)",accent:"0 4px 20px rgba(222, 160, 55, 0.4)",accentHover:"0 6px 28px rgba(222, 160, 55, 0.5)"},MFe={sm:"8px",md:"12px",lg:"20px",xl:"32px"},RFe={initialColorMode:"light",useSystemColorMode:!1},DFe=o0e({config:RFe,colors:zFe,shadows:IFe,radii:MFe,fonts:{heading:"'Roboto', -apple-system, BlinkMacSystemFont, sans-serif",body:"'Roboto', -apple-system, BlinkMacSystemFont, sans-serif"},styles:{global:{body:{bg:"gray.50",color:"gray.900"},".kartoza-gradient":{background:"linear-gradient(90deg, #dea037 0%, #417d9b 100%)"},".kartoza-card":{borderRadius:"12px",boxShadow:"0 4px 16px rgba(65, 125, 155, 0.10), 0 1px 4px rgba(0, 0, 0, 0.06)",transition:"box-shadow 0.3s ease, transform 0.3s ease",_hover:{boxShadow:"0 8px 28px rgba(65, 125, 155, 0.16), 0 2px 8px rgba(0, 0, 0, 0.08)",transform:"translateY(-3px)"}}}},components:{Button:{baseStyle:{borderRadius:"10px",fontWeight:"600",transition:"all 0.25s ease"},defaultProps:{colorScheme:"kartoza"},variants:{solid:{bg:"kartoza.500",color:"white",boxShadow:"0 2px 8px rgba(65, 125, 155, 0.12)",_hover:{bg:"kartoza.600",boxShadow:"0 4px 14px rgba(65, 125, 155, 0.20)",transform:"translateY(-1px)"}},outline:{borderColor:"kartoza.500",borderWidth:"2px",color:"kartoza.500",_hover:{bg:"kartoza.50",transform:"translateY(-1px)"}},ghost:{color:"kartoza.500",_hover:{bg:"kartoza.50"}},accent:{bg:"accent.500",color:"white",boxShadow:"0 4px 20px rgba(222, 160, 55, 0.4)",_hover:{bg:"accent.600",boxShadow:"0 6px 28px rgba(222, 160, 55, 0.5)",transform:"translateY(-2px)"}},"accent-outline":{borderColor:"accent.400",borderWidth:"2px",color:"accent.400",_hover:{bg:"accent.50"}}},sizes:{lg:{fontSize:"md",px:8,py:6},xl:{fontSize:"lg",px:10,py:7,minW:"200px"}}},Link:{baseStyle:{color:"kartoza.500",_hover:{textDecoration:"underline",color:"kartoza.600"}}},Heading:{baseStyle:{color:"gray.900",fontWeight:"600"},variants:{brand:{color:"kartoza.700"},accent:{color:"accent.400"}}},Card:{baseStyle:{container:{borderRadius:"12px",boxShadow:"0 4px 16px rgba(65, 125, 155, 0.10), 0 1px 4px rgba(0, 0, 0, 0.06)",transition:"box-shadow 0.3s ease, transform 0.3s ease",overflow:"hidden",_hover:{boxShadow:"0 8px 28px rgba(65, 125, 155, 0.16), 0 2px 8px rgba(0, 0, 0, 0.08)"}}},variants:{elevated:{container:{_hover:{transform:"translateY(-3px)"}}},feature:{container:{borderLeft:"4px solid",borderLeftColor:"kartoza.500"}},accent:{container:{borderTop:"4px solid",borderTopColor:"accent.400"}}}},Modal:{baseStyle:{dialog:{borderRadius:"12px",boxShadow:"0 16px 48px rgba(65, 125, 155, 0.20)"},header:{borderBottom:"1px solid",borderBottomColor:"gray.100"},footer:{borderTop:"1px solid",borderTopColor:"gray.100"}}},Input:{defaultProps:{focusBorderColor:"kartoza.500"},baseStyle:{field:{borderRadius:"8px"}}},Select:{defaultProps:{focusBorderColor:"kartoza.500"}},Checkbox:{defaultProps:{colorScheme:"kartoza"}},Switch:{defaultProps:{colorScheme:"kartoza"}},Progress:{defaultProps:{colorScheme:"kartoza"}},Tabs:{defaultProps:{colorScheme:"kartoza"}},Badge:{baseStyle:{borderRadius:"6px",fontWeight:"600"},variants:{subtle:{bg:"kartoza.50",color:"kartoza.700"},solid:{bg:"kartoza.500",color:"white"},accent:{bg:"accent.400",color:"white"}}},Stat:{baseStyle:{container:{p:4},label:{color:"gray.600",fontSize:"sm",fontWeight:"500"},number:{color:"kartoza.700",fontWeight:"700"},helpText:{color:"gray.500"}}},Divider:{baseStyle:{borderColor:"gray.200"}}},semanticTokens:{colors:{primary:"kartoza.500","primary.dark":"kartoza.700","primary.light":"kartoza.300",secondary:"accent.400",success:"#4CAF50",error:"#E55B3C",warning:"accent.400",info:"kartoza.300"}}}),LFe=new J_e({defaultOptions:{queries:{staleTime:1e3*60,refetchOnWindowFocus:!1}}});wA.createRoot(document.getElementById("root")).render(u.jsx(Gi.StrictMode,{children:u.jsx(ewe,{client:LFe,children:u.jsx(oye,{theme:DFe,children:u.jsx(EFe,{})})})}));
