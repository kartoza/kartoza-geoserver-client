var rR=t=>{throw TypeError(t)};var TT=(t,e,r)=>e.has(t)||rR("Cannot "+r);var je=(t,e,r)=>(TT(t,e,"read from private field"),r?r.call(t):e.get(t)),wr=(t,e,r)=>e.has(t)?rR("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),tr=(t,e,r,n)=>(TT(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Xr=(t,e,r)=>(TT(t,e,"access private method"),r);var M_=(t,e,r,n)=>({set _(i){tr(t,e,i,r)},get _(){return je(t,e,n)}});function OX(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var qx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function e1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var u$={exports:{}},Z2={},h$={exports:{}},sn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t1=Symbol.for("react.element"),PX=Symbol.for("react.portal"),jX=Symbol.for("react.fragment"),AX=Symbol.for("react.strict_mode"),EX=Symbol.for("react.profiler"),zX=Symbol.for("react.provider"),MX=Symbol.for("react.context"),IX=Symbol.for("react.forward_ref"),DX=Symbol.for("react.suspense"),RX=Symbol.for("react.memo"),LX=Symbol.for("react.lazy"),nR=Symbol.iterator;function FX(t){return t===null||typeof t!="object"?null:(t=nR&&t[nR]||t["@@iterator"],typeof t=="function"?t:null)}var d$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f$=Object.assign,p$={};function a0(t,e,r){this.props=t,this.context=e,this.refs=p$,this.updater=r||d$}a0.prototype.isReactComponent={};a0.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};a0.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function m$(){}m$.prototype=a0.prototype;function UE(t,e,r){this.props=t,this.context=e,this.refs=p$,this.updater=r||d$}var qE=UE.prototype=new m$;qE.constructor=UE;f$(qE,a0.prototype);qE.isPureReactComponent=!0;var iR=Array.isArray,g$=Object.prototype.hasOwnProperty,QE={current:null},y$={key:!0,ref:!0,__self:!0,__source:!0};function x$(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)g$.call(e,n)&&!y$.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var d=Array(o),m=0;m<o;m++)d[m]=arguments[m+2];i.children=d}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:t1,type:t,key:s,ref:a,props:i,_owner:QE.current}}function BX(t,e){return{$$typeof:t1,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function HE(t){return typeof t=="object"&&t!==null&&t.$$typeof===t1}function $X(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var sR=/\/+/g;function OT(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$X(""+t.key):e.toString(36)}function $w(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case t1:case PX:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+OT(a,0):n,iR(i)?(r="",t!=null&&(r=t.replace(sR,"$&/")+"/"),$w(i,e,r,"",function(m){return m})):i!=null&&(HE(i)&&(i=BX(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(sR,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",iR(t))for(var o=0;o<t.length;o++){s=t[o];var d=n+OT(s,o);a+=$w(s,e,r,d,i)}else if(d=FX(t),typeof d=="function")for(t=d.call(t),o=0;!(s=t.next()).done;)s=s.value,d=n+OT(s,o++),a+=$w(s,e,r,d,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function I_(t,e,r){if(t==null)return t;var n=[],i=0;return $w(t,n,"","",function(s){return e.call(r,s,i++)}),n}function NX(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qo={current:null},Nw={transition:null},VX={ReactCurrentDispatcher:Qo,ReactCurrentBatchConfig:Nw,ReactCurrentOwner:QE};function v$(){throw Error("act(...) is not supported in production builds of React.")}sn.Children={map:I_,forEach:function(t,e,r){I_(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return I_(t,function(){e++}),e},toArray:function(t){return I_(t,function(e){return e})||[]},only:function(t){if(!HE(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};sn.Component=a0;sn.Fragment=jX;sn.Profiler=EX;sn.PureComponent=UE;sn.StrictMode=AX;sn.Suspense=DX;sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VX;sn.act=v$;sn.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=f$({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=QE.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(d in e)g$.call(e,d)&&!y$.hasOwnProperty(d)&&(n[d]=e[d]===void 0&&o!==void 0?o[d]:e[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){o=Array(d);for(var m=0;m<d;m++)o[m]=arguments[m+2];n.children=o}return{$$typeof:t1,type:t.type,key:i,ref:s,props:n,_owner:a}};sn.createContext=function(t){return t={$$typeof:MX,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zX,_context:t},t.Consumer=t};sn.createElement=x$;sn.createFactory=function(t){var e=x$.bind(null,t);return e.type=t,e};sn.createRef=function(){return{current:null}};sn.forwardRef=function(t){return{$$typeof:IX,render:t}};sn.isValidElement=HE;sn.lazy=function(t){return{$$typeof:LX,_payload:{_status:-1,_result:t},_init:NX}};sn.memo=function(t,e){return{$$typeof:RX,type:t,compare:e===void 0?null:e}};sn.startTransition=function(t){var e=Nw.transition;Nw.transition={};try{t()}finally{Nw.transition=e}};sn.unstable_act=v$;sn.useCallback=function(t,e){return Qo.current.useCallback(t,e)};sn.useContext=function(t){return Qo.current.useContext(t)};sn.useDebugValue=function(){};sn.useDeferredValue=function(t){return Qo.current.useDeferredValue(t)};sn.useEffect=function(t,e){return Qo.current.useEffect(t,e)};sn.useId=function(){return Qo.current.useId()};sn.useImperativeHandle=function(t,e,r){return Qo.current.useImperativeHandle(t,e,r)};sn.useInsertionEffect=function(t,e){return Qo.current.useInsertionEffect(t,e)};sn.useLayoutEffect=function(t,e){return Qo.current.useLayoutEffect(t,e)};sn.useMemo=function(t,e){return Qo.current.useMemo(t,e)};sn.useReducer=function(t,e,r){return Qo.current.useReducer(t,e,r)};sn.useRef=function(t){return Qo.current.useRef(t)};sn.useState=function(t){return Qo.current.useState(t)};sn.useSyncExternalStore=function(t,e,r){return Qo.current.useSyncExternalStore(t,e,r)};sn.useTransition=function(){return Qo.current.useTransition()};sn.version="18.3.1";h$.exports=sn;var I=h$.exports;const Mi=e1(I),oR=OX({__proto__:null,default:Mi},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WX=I,UX=Symbol.for("react.element"),qX=Symbol.for("react.fragment"),QX=Object.prototype.hasOwnProperty,HX=WX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GX={key:!0,ref:!0,__self:!0,__source:!0};function b$(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)QX.call(e,n)&&!GX.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:UX,type:t,key:s,ref:a,props:i,_owner:HX.current}}Z2.Fragment=qX;Z2.jsx=b$;Z2.jsxs=b$;u$.exports=Z2;var u=u$.exports,BP={},_$={exports:{}},tl={},w$={exports:{}},S$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Me,Ge){var Le=Me.length;Me.push(Ge);e:for(;0<Le;){var Ie=Le-1>>>1,Oe=Me[Ie];if(0<i(Oe,Ge))Me[Ie]=Ge,Me[Le]=Oe,Le=Ie;else break e}}function r(Me){return Me.length===0?null:Me[0]}function n(Me){if(Me.length===0)return null;var Ge=Me[0],Le=Me.pop();if(Le!==Ge){Me[0]=Le;e:for(var Ie=0,Oe=Me.length,Re=Oe>>>1;Ie<Re;){var nt=2*(Ie+1)-1,ze=Me[nt],rt=nt+1,Xe=Me[rt];if(0>i(ze,Le))rt<Oe&&0>i(Xe,ze)?(Me[Ie]=Xe,Me[rt]=Le,Ie=rt):(Me[Ie]=ze,Me[nt]=Le,Ie=nt);else if(rt<Oe&&0>i(Xe,Le))Me[Ie]=Xe,Me[rt]=Le,Ie=rt;else break e}}return Ge}function i(Me,Ge){var Le=Me.sortIndex-Ge.sortIndex;return Le!==0?Le:Me.id-Ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var d=[],m=[],y=1,b=null,w=3,O=!1,A=!1,E=!1,$=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(Me){for(var Ge=r(m);Ge!==null;){if(Ge.callback===null)n(m);else if(Ge.startTime<=Me)n(m),Ge.sortIndex=Ge.expirationTime,e(d,Ge);else break;Ge=r(m)}}function U(Me){if(E=!1,L(Me),!A)if(r(d)!==null)A=!0,at(Q);else{var Ge=r(m);Ge!==null&&Be(U,Ge.startTime-Me)}}function Q(Me,Ge){A=!1,E&&(E=!1,R(J),J=-1),O=!0;var Le=w;try{for(L(Ge),b=r(d);b!==null&&(!(b.expirationTime>Ge)||Me&&!le());){var Ie=b.callback;if(typeof Ie=="function"){b.callback=null,w=b.priorityLevel;var Oe=Ie(b.expirationTime<=Ge);Ge=t.unstable_now(),typeof Oe=="function"?b.callback=Oe:b===r(d)&&n(d),L(Ge)}else n(d);b=r(d)}if(b!==null)var Re=!0;else{var nt=r(m);nt!==null&&Be(U,nt.startTime-Ge),Re=!1}return Re}finally{b=null,w=Le,O=!1}}var Y=!1,Z=null,J=-1,re=5,he=-1;function le(){return!(t.unstable_now()-he<re)}function Ze(){if(Z!==null){var Me=t.unstable_now();he=Me;var Ge=!0;try{Ge=Z(!0,Me)}finally{Ge?Ee():(Y=!1,Z=null)}}else Y=!1}var Ee;if(typeof F=="function")Ee=function(){F(Ze)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,et=qe.port2;qe.port1.onmessage=Ze,Ee=function(){et.postMessage(null)}}else Ee=function(){$(Ze,0)};function at(Me){Z=Me,Y||(Y=!0,Ee())}function Be(Me,Ge){J=$(function(){Me(t.unstable_now())},Ge)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Me){Me.callback=null},t.unstable_continueExecution=function(){A||O||(A=!0,at(Q))},t.unstable_forceFrameRate=function(Me){0>Me||125<Me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<Me?Math.floor(1e3/Me):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return r(d)},t.unstable_next=function(Me){switch(w){case 1:case 2:case 3:var Ge=3;break;default:Ge=w}var Le=w;w=Ge;try{return Me()}finally{w=Le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Me,Ge){switch(Me){case 1:case 2:case 3:case 4:case 5:break;default:Me=3}var Le=w;w=Me;try{return Ge()}finally{w=Le}},t.unstable_scheduleCallback=function(Me,Ge,Le){var Ie=t.unstable_now();switch(typeof Le=="object"&&Le!==null?(Le=Le.delay,Le=typeof Le=="number"&&0<Le?Ie+Le:Ie):Le=Ie,Me){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=Le+Oe,Me={id:y++,callback:Ge,priorityLevel:Me,startTime:Le,expirationTime:Oe,sortIndex:-1},Le>Ie?(Me.sortIndex=Le,e(m,Me),r(d)===null&&Me===r(m)&&(E?(R(J),J=-1):E=!0,Be(U,Le-Ie))):(Me.sortIndex=Oe,e(d,Me),A||O||(A=!0,at(Q))),Me},t.unstable_shouldYield=le,t.unstable_wrapCallback=function(Me){var Ge=w;return function(){var Le=w;w=Ge;try{return Me.apply(this,arguments)}finally{w=Le}}}})(S$);w$.exports=S$;var XX=w$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KX=I,Za=XX;function jt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k$=new Set,Uv={};function om(t,e){Oy(t,e),Oy(t+"Capture",e)}function Oy(t,e){for(Uv[t]=e,t=0;t<e.length;t++)k$.add(e[t])}var dh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$P=Object.prototype.hasOwnProperty,ZX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aR={},lR={};function YX(t){return $P.call(lR,t)?!0:$P.call(aR,t)?!1:ZX.test(t)?lR[t]=!0:(aR[t]=!0,!1)}function JX(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eK(t,e,r,n){if(e===null||typeof e>"u"||JX(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ho(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var io={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){io[t]=new Ho(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];io[e]=new Ho(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){io[t]=new Ho(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){io[t]=new Ho(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){io[t]=new Ho(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){io[t]=new Ho(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){io[t]=new Ho(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){io[t]=new Ho(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){io[t]=new Ho(t,5,!1,t.toLowerCase(),null,!1,!1)});var GE=/[\-:]([a-z])/g;function XE(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(GE,XE);io[e]=new Ho(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(GE,XE);io[e]=new Ho(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(GE,XE);io[e]=new Ho(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){io[t]=new Ho(t,1,!1,t.toLowerCase(),null,!1,!1)});io.xlinkHref=new Ho("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){io[t]=new Ho(t,1,!1,t.toLowerCase(),null,!0,!0)});function KE(t,e,r,n){var i=io.hasOwnProperty(e)?io[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eK(e,r,i,n)&&(r=null),n||i===null?YX(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var wh=KX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D_=Symbol.for("react.element"),gg=Symbol.for("react.portal"),yg=Symbol.for("react.fragment"),ZE=Symbol.for("react.strict_mode"),NP=Symbol.for("react.profiler"),C$=Symbol.for("react.provider"),T$=Symbol.for("react.context"),YE=Symbol.for("react.forward_ref"),VP=Symbol.for("react.suspense"),WP=Symbol.for("react.suspense_list"),JE=Symbol.for("react.memo"),cd=Symbol.for("react.lazy"),O$=Symbol.for("react.offscreen"),cR=Symbol.iterator;function wx(t){return t===null||typeof t!="object"?null:(t=cR&&t[cR]||t["@@iterator"],typeof t=="function"?t:null)}var Ti=Object.assign,PT;function Qx(t){if(PT===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);PT=e&&e[1]||""}return`
`+PT+t}var jT=!1;function AT(t,e){if(!t||jT)return"";jT=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var n=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){n=m}t.call(e.prototype)}else{try{throw Error()}catch(m){n=m}t()}}catch(m){if(m&&n&&typeof m.stack=="string"){for(var i=m.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var d=`
`+i[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=o);break}}}finally{jT=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Qx(t):""}function tK(t){switch(t.tag){case 5:return Qx(t.type);case 16:return Qx("Lazy");case 13:return Qx("Suspense");case 19:return Qx("SuspenseList");case 0:case 2:case 15:return t=AT(t.type,!1),t;case 11:return t=AT(t.type.render,!1),t;case 1:return t=AT(t.type,!0),t;default:return""}}function UP(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yg:return"Fragment";case gg:return"Portal";case NP:return"Profiler";case ZE:return"StrictMode";case VP:return"Suspense";case WP:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case T$:return(t.displayName||"Context")+".Consumer";case C$:return(t._context.displayName||"Context")+".Provider";case YE:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case JE:return e=t.displayName||null,e!==null?e:UP(t.type)||"Memo";case cd:e=t._payload,t=t._init;try{return UP(t(e))}catch{}}return null}function rK(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return UP(e);case 8:return e===ZE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ud(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function P$(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nK(t){var e=P$(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function R_(t){t._valueTracker||(t._valueTracker=nK(t))}function j$(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=P$(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function IS(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qP(t,e){var r=e.checked;return Ti({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function uR(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ud(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function A$(t,e){e=e.checked,e!=null&&KE(t,"checked",e,!1)}function QP(t,e){A$(t,e);var r=Ud(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?HP(t,e.type,r):e.hasOwnProperty("defaultValue")&&HP(t,e.type,Ud(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hR(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function HP(t,e,r){(e!=="number"||IS(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Hx=Array.isArray;function qg(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ud(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function GP(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(jt(91));return Ti({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dR(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(jt(92));if(Hx(r)){if(1<r.length)throw Error(jt(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ud(r)}}function E$(t,e){var r=Ud(e.value),n=Ud(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function fR(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function z$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function XP(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?z$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var L_,M$=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(L_=L_||document.createElement("div"),L_.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=L_.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qv(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var dv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iK=["Webkit","ms","Moz","O"];Object.keys(dv).forEach(function(t){iK.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dv[e]=dv[t]})});function I$(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||dv.hasOwnProperty(t)&&dv[t]?(""+e).trim():e+"px"}function D$(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=I$(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var sK=Ti({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function KP(t,e){if(e){if(sK[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(jt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(jt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(jt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(jt(62))}}function ZP(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var YP=null;function ez(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var JP=null,Qg=null,Hg=null;function pR(t){if(t=i1(t)){if(typeof JP!="function")throw Error(jt(280));var e=t.stateNode;e&&(e=rk(e),JP(t.stateNode,t.type,e))}}function R$(t){Qg?Hg?Hg.push(t):Hg=[t]:Qg=t}function L$(){if(Qg){var t=Qg,e=Hg;if(Hg=Qg=null,pR(t),e)for(t=0;t<e.length;t++)pR(e[t])}}function F$(t,e){return t(e)}function B$(){}var ET=!1;function $$(t,e,r){if(ET)return t(e,r);ET=!0;try{return F$(t,e,r)}finally{ET=!1,(Qg!==null||Hg!==null)&&(B$(),L$())}}function Qv(t,e){var r=t.stateNode;if(r===null)return null;var n=rk(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(jt(231,e,typeof r));return r}var ej=!1;if(dh)try{var Sx={};Object.defineProperty(Sx,"passive",{get:function(){ej=!0}}),window.addEventListener("test",Sx,Sx),window.removeEventListener("test",Sx,Sx)}catch{ej=!1}function oK(t,e,r,n,i,s,a,o,d){var m=Array.prototype.slice.call(arguments,3);try{e.apply(r,m)}catch(y){this.onError(y)}}var fv=!1,DS=null,RS=!1,tj=null,aK={onError:function(t){fv=!0,DS=t}};function lK(t,e,r,n,i,s,a,o,d){fv=!1,DS=null,oK.apply(aK,arguments)}function cK(t,e,r,n,i,s,a,o,d){if(lK.apply(this,arguments),fv){if(fv){var m=DS;fv=!1,DS=null}else throw Error(jt(198));RS||(RS=!0,tj=m)}}function am(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function N$(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mR(t){if(am(t)!==t)throw Error(jt(188))}function uK(t){var e=t.alternate;if(!e){if(e=am(t),e===null)throw Error(jt(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return mR(i),t;if(s===n)return mR(i),e;s=s.sibling}throw Error(jt(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(jt(189))}}if(r.alternate!==n)throw Error(jt(190))}if(r.tag!==3)throw Error(jt(188));return r.stateNode.current===r?t:e}function V$(t){return t=uK(t),t!==null?W$(t):null}function W$(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=W$(t);if(e!==null)return e;t=t.sibling}return null}var U$=Za.unstable_scheduleCallback,gR=Za.unstable_cancelCallback,hK=Za.unstable_shouldYield,dK=Za.unstable_requestPaint,Fi=Za.unstable_now,fK=Za.unstable_getCurrentPriorityLevel,tz=Za.unstable_ImmediatePriority,q$=Za.unstable_UserBlockingPriority,LS=Za.unstable_NormalPriority,pK=Za.unstable_LowPriority,Q$=Za.unstable_IdlePriority,Y2=null,au=null;function mK(t){if(au&&typeof au.onCommitFiberRoot=="function")try{au.onCommitFiberRoot(Y2,t,void 0,(t.current.flags&128)===128)}catch{}}var uc=Math.clz32?Math.clz32:xK,gK=Math.log,yK=Math.LN2;function xK(t){return t>>>=0,t===0?32:31-(gK(t)/yK|0)|0}var F_=64,B_=4194304;function Gx(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function FS(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=Gx(o):(s&=a,s!==0&&(n=Gx(s)))}else a=r&~i,a!==0?n=Gx(a):s!==0&&(n=Gx(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-uc(e),i=1<<r,n|=t[r],e&=~i;return n}function vK(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bK(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-uc(s),o=1<<a,d=i[a];d===-1?(!(o&r)||o&n)&&(i[a]=vK(o,e)):d<=e&&(t.expiredLanes|=o),s&=~o}}function rj(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function H$(){var t=F_;return F_<<=1,!(F_&4194240)&&(F_=64),t}function zT(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function r1(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-uc(e),t[e]=r}function _K(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-uc(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function rz(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-uc(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Vn=0;function G$(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var X$,nz,K$,Z$,Y$,nj=!1,$_=[],Ed=null,zd=null,Md=null,Hv=new Map,Gv=new Map,md=[],wK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yR(t,e){switch(t){case"focusin":case"focusout":Ed=null;break;case"dragenter":case"dragleave":zd=null;break;case"mouseover":case"mouseout":Md=null;break;case"pointerover":case"pointerout":Hv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gv.delete(e.pointerId)}}function kx(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=i1(e),e!==null&&nz(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function SK(t,e,r,n,i){switch(e){case"focusin":return Ed=kx(Ed,t,e,r,n,i),!0;case"dragenter":return zd=kx(zd,t,e,r,n,i),!0;case"mouseover":return Md=kx(Md,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Hv.set(s,kx(Hv.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Gv.set(s,kx(Gv.get(s)||null,t,e,r,n,i)),!0}return!1}function J$(t){var e=op(t.target);if(e!==null){var r=am(e);if(r!==null){if(e=r.tag,e===13){if(e=N$(r),e!==null){t.blockedOn=e,Y$(t.priority,function(){K$(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vw(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=ij(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);YP=n,r.target.dispatchEvent(n),YP=null}else return e=i1(r),e!==null&&nz(e),t.blockedOn=r,!1;e.shift()}return!0}function xR(t,e,r){Vw(t)&&r.delete(e)}function kK(){nj=!1,Ed!==null&&Vw(Ed)&&(Ed=null),zd!==null&&Vw(zd)&&(zd=null),Md!==null&&Vw(Md)&&(Md=null),Hv.forEach(xR),Gv.forEach(xR)}function Cx(t,e){t.blockedOn===e&&(t.blockedOn=null,nj||(nj=!0,Za.unstable_scheduleCallback(Za.unstable_NormalPriority,kK)))}function Xv(t){function e(i){return Cx(i,t)}if(0<$_.length){Cx($_[0],t);for(var r=1;r<$_.length;r++){var n=$_[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ed!==null&&Cx(Ed,t),zd!==null&&Cx(zd,t),Md!==null&&Cx(Md,t),Hv.forEach(e),Gv.forEach(e),r=0;r<md.length;r++)n=md[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<md.length&&(r=md[0],r.blockedOn===null);)J$(r),r.blockedOn===null&&md.shift()}var Gg=wh.ReactCurrentBatchConfig,BS=!0;function CK(t,e,r,n){var i=Vn,s=Gg.transition;Gg.transition=null;try{Vn=1,iz(t,e,r,n)}finally{Vn=i,Gg.transition=s}}function TK(t,e,r,n){var i=Vn,s=Gg.transition;Gg.transition=null;try{Vn=4,iz(t,e,r,n)}finally{Vn=i,Gg.transition=s}}function iz(t,e,r,n){if(BS){var i=ij(t,e,r,n);if(i===null)VT(t,e,n,$S,r),yR(t,n);else if(SK(i,t,e,r,n))n.stopPropagation();else if(yR(t,n),e&4&&-1<wK.indexOf(t)){for(;i!==null;){var s=i1(i);if(s!==null&&X$(s),s=ij(t,e,r,n),s===null&&VT(t,e,n,$S,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else VT(t,e,n,null,r)}}var $S=null;function ij(t,e,r,n){if($S=null,t=ez(n),t=op(t),t!==null)if(e=am(t),e===null)t=null;else if(r=e.tag,r===13){if(t=N$(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $S=t,null}function eN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fK()){case tz:return 1;case q$:return 4;case LS:case pK:return 16;case Q$:return 536870912;default:return 16}default:return 16}}var Pd=null,sz=null,Ww=null;function tN(){if(Ww)return Ww;var t,e=sz,r=e.length,n,i="value"in Pd?Pd.value:Pd.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return Ww=i.slice(t,1<n?1-n:void 0)}function Uw(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function N_(){return!0}function vR(){return!1}function rl(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?N_:vR,this.isPropagationStopped=vR,this}return Ti(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=N_)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=N_)},persist:function(){},isPersistent:N_}),e}var l0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oz=rl(l0),n1=Ti({},l0,{view:0,detail:0}),OK=rl(n1),MT,IT,Tx,J2=Ti({},n1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:az,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tx&&(Tx&&t.type==="mousemove"?(MT=t.screenX-Tx.screenX,IT=t.screenY-Tx.screenY):IT=MT=0,Tx=t),MT)},movementY:function(t){return"movementY"in t?t.movementY:IT}}),bR=rl(J2),PK=Ti({},J2,{dataTransfer:0}),jK=rl(PK),AK=Ti({},n1,{relatedTarget:0}),DT=rl(AK),EK=Ti({},l0,{animationName:0,elapsedTime:0,pseudoElement:0}),zK=rl(EK),MK=Ti({},l0,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),IK=rl(MK),DK=Ti({},l0,{data:0}),_R=rl(DK),RK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LK={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FK={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BK(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=FK[t])?!!e[t]:!1}function az(){return BK}var $K=Ti({},n1,{key:function(t){if(t.key){var e=RK[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Uw(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?LK[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:az,charCode:function(t){return t.type==="keypress"?Uw(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Uw(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NK=rl($K),VK=Ti({},J2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wR=rl(VK),WK=Ti({},n1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:az}),UK=rl(WK),qK=Ti({},l0,{propertyName:0,elapsedTime:0,pseudoElement:0}),QK=rl(qK),HK=Ti({},J2,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GK=rl(HK),XK=[9,13,27,32],lz=dh&&"CompositionEvent"in window,pv=null;dh&&"documentMode"in document&&(pv=document.documentMode);var KK=dh&&"TextEvent"in window&&!pv,rN=dh&&(!lz||pv&&8<pv&&11>=pv),SR=" ",kR=!1;function nN(t,e){switch(t){case"keyup":return XK.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xg=!1;function ZK(t,e){switch(t){case"compositionend":return iN(e);case"keypress":return e.which!==32?null:(kR=!0,SR);case"textInput":return t=e.data,t===SR&&kR?null:t;default:return null}}function YK(t,e){if(xg)return t==="compositionend"||!lz&&nN(t,e)?(t=tN(),Ww=sz=Pd=null,xg=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rN&&e.locale!=="ko"?null:e.data;default:return null}}var JK={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JK[t.type]:e==="textarea"}function sN(t,e,r,n){R$(n),e=NS(e,"onChange"),0<e.length&&(r=new oz("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var mv=null,Kv=null;function eZ(t){gN(t,0)}function ek(t){var e=_g(t);if(j$(e))return t}function tZ(t,e){if(t==="change")return e}var oN=!1;if(dh){var RT;if(dh){var LT="oninput"in document;if(!LT){var TR=document.createElement("div");TR.setAttribute("oninput","return;"),LT=typeof TR.oninput=="function"}RT=LT}else RT=!1;oN=RT&&(!document.documentMode||9<document.documentMode)}function OR(){mv&&(mv.detachEvent("onpropertychange",aN),Kv=mv=null)}function aN(t){if(t.propertyName==="value"&&ek(Kv)){var e=[];sN(e,Kv,t,ez(t)),$$(eZ,e)}}function rZ(t,e,r){t==="focusin"?(OR(),mv=e,Kv=r,mv.attachEvent("onpropertychange",aN)):t==="focusout"&&OR()}function nZ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ek(Kv)}function iZ(t,e){if(t==="click")return ek(e)}function sZ(t,e){if(t==="input"||t==="change")return ek(e)}function oZ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fc=typeof Object.is=="function"?Object.is:oZ;function Zv(t,e){if(fc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!$P.call(e,i)||!fc(t[i],e[i]))return!1}return!0}function PR(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jR(t,e){var r=PR(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=PR(r)}}function lN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?lN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cN(){for(var t=window,e=IS();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=IS(t.document)}return e}function cz(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aZ(t){var e=cN(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&lN(r.ownerDocument.documentElement,r)){if(n!==null&&cz(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=jR(r,s);var a=jR(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lZ=dh&&"documentMode"in document&&11>=document.documentMode,vg=null,sj=null,gv=null,oj=!1;function AR(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;oj||vg==null||vg!==IS(n)||(n=vg,"selectionStart"in n&&cz(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),gv&&Zv(gv,n)||(gv=n,n=NS(sj,"onSelect"),0<n.length&&(e=new oz("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=vg)))}function V_(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var bg={animationend:V_("Animation","AnimationEnd"),animationiteration:V_("Animation","AnimationIteration"),animationstart:V_("Animation","AnimationStart"),transitionend:V_("Transition","TransitionEnd")},FT={},uN={};dh&&(uN=document.createElement("div").style,"AnimationEvent"in window||(delete bg.animationend.animation,delete bg.animationiteration.animation,delete bg.animationstart.animation),"TransitionEvent"in window||delete bg.transitionend.transition);function tk(t){if(FT[t])return FT[t];if(!bg[t])return t;var e=bg[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in uN)return FT[t]=e[r];return t}var hN=tk("animationend"),dN=tk("animationiteration"),fN=tk("animationstart"),pN=tk("transitionend"),mN=new Map,ER="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cf(t,e){mN.set(t,e),om(e,[t])}for(var BT=0;BT<ER.length;BT++){var $T=ER[BT],cZ=$T.toLowerCase(),uZ=$T[0].toUpperCase()+$T.slice(1);cf(cZ,"on"+uZ)}cf(hN,"onAnimationEnd");cf(dN,"onAnimationIteration");cf(fN,"onAnimationStart");cf("dblclick","onDoubleClick");cf("focusin","onFocus");cf("focusout","onBlur");cf(pN,"onTransitionEnd");Oy("onMouseEnter",["mouseout","mouseover"]);Oy("onMouseLeave",["mouseout","mouseover"]);Oy("onPointerEnter",["pointerout","pointerover"]);Oy("onPointerLeave",["pointerout","pointerover"]);om("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));om("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));om("onBeforeInput",["compositionend","keypress","textInput","paste"]);om("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));om("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));om("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xx));function zR(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,cK(n,e,void 0,t),t.currentTarget=null}function gN(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],d=o.instance,m=o.currentTarget;if(o=o.listener,d!==s&&i.isPropagationStopped())break e;zR(i,o,m),s=d}else for(a=0;a<n.length;a++){if(o=n[a],d=o.instance,m=o.currentTarget,o=o.listener,d!==s&&i.isPropagationStopped())break e;zR(i,o,m),s=d}}}if(RS)throw t=tj,RS=!1,tj=null,t}function ai(t,e){var r=e[hj];r===void 0&&(r=e[hj]=new Set);var n=t+"__bubble";r.has(n)||(yN(e,t,2,!1),r.add(n))}function NT(t,e,r){var n=0;e&&(n|=4),yN(r,t,n,e)}var W_="_reactListening"+Math.random().toString(36).slice(2);function Yv(t){if(!t[W_]){t[W_]=!0,k$.forEach(function(r){r!=="selectionchange"&&(hZ.has(r)||NT(r,!1,t),NT(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[W_]||(e[W_]=!0,NT("selectionchange",!1,e))}}function yN(t,e,r,n){switch(eN(e)){case 1:var i=CK;break;case 4:i=TK;break;default:i=iz}r=i.bind(null,e,r,t),i=void 0,!ej||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function VT(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;a=a.return}for(;o!==null;){if(a=op(o),a===null)return;if(d=a.tag,d===5||d===6){n=s=a;continue e}o=o.parentNode}}n=n.return}$$(function(){var m=s,y=ez(r),b=[];e:{var w=mN.get(t);if(w!==void 0){var O=oz,A=t;switch(t){case"keypress":if(Uw(r)===0)break e;case"keydown":case"keyup":O=NK;break;case"focusin":A="focus",O=DT;break;case"focusout":A="blur",O=DT;break;case"beforeblur":case"afterblur":O=DT;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=bR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=jK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=UK;break;case hN:case dN:case fN:O=zK;break;case pN:O=QK;break;case"scroll":O=OK;break;case"wheel":O=GK;break;case"copy":case"cut":case"paste":O=IK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=wR}var E=(e&4)!==0,$=!E&&t==="scroll",R=E?w!==null?w+"Capture":null:w;E=[];for(var F=m,L;F!==null;){L=F;var U=L.stateNode;if(L.tag===5&&U!==null&&(L=U,R!==null&&(U=Qv(F,R),U!=null&&E.push(Jv(F,U,L)))),$)break;F=F.return}0<E.length&&(w=new O(w,A,null,r,y),b.push({event:w,listeners:E}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",O=t==="mouseout"||t==="pointerout",w&&r!==YP&&(A=r.relatedTarget||r.fromElement)&&(op(A)||A[fh]))break e;if((O||w)&&(w=y.window===y?y:(w=y.ownerDocument)?w.defaultView||w.parentWindow:window,O?(A=r.relatedTarget||r.toElement,O=m,A=A?op(A):null,A!==null&&($=am(A),A!==$||A.tag!==5&&A.tag!==6)&&(A=null)):(O=null,A=m),O!==A)){if(E=bR,U="onMouseLeave",R="onMouseEnter",F="mouse",(t==="pointerout"||t==="pointerover")&&(E=wR,U="onPointerLeave",R="onPointerEnter",F="pointer"),$=O==null?w:_g(O),L=A==null?w:_g(A),w=new E(U,F+"leave",O,r,y),w.target=$,w.relatedTarget=L,U=null,op(y)===m&&(E=new E(R,F+"enter",A,r,y),E.target=L,E.relatedTarget=$,U=E),$=U,O&&A)t:{for(E=O,R=A,F=0,L=E;L;L=ig(L))F++;for(L=0,U=R;U;U=ig(U))L++;for(;0<F-L;)E=ig(E),F--;for(;0<L-F;)R=ig(R),L--;for(;F--;){if(E===R||R!==null&&E===R.alternate)break t;E=ig(E),R=ig(R)}E=null}else E=null;O!==null&&MR(b,w,O,E,!1),A!==null&&$!==null&&MR(b,$,A,E,!0)}}e:{if(w=m?_g(m):window,O=w.nodeName&&w.nodeName.toLowerCase(),O==="select"||O==="input"&&w.type==="file")var Q=tZ;else if(CR(w))if(oN)Q=sZ;else{Q=nZ;var Y=rZ}else(O=w.nodeName)&&O.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(Q=iZ);if(Q&&(Q=Q(t,m))){sN(b,Q,r,y);break e}Y&&Y(t,w,m),t==="focusout"&&(Y=w._wrapperState)&&Y.controlled&&w.type==="number"&&HP(w,"number",w.value)}switch(Y=m?_g(m):window,t){case"focusin":(CR(Y)||Y.contentEditable==="true")&&(vg=Y,sj=m,gv=null);break;case"focusout":gv=sj=vg=null;break;case"mousedown":oj=!0;break;case"contextmenu":case"mouseup":case"dragend":oj=!1,AR(b,r,y);break;case"selectionchange":if(lZ)break;case"keydown":case"keyup":AR(b,r,y)}var Z;if(lz)e:{switch(t){case"compositionstart":var J="onCompositionStart";break e;case"compositionend":J="onCompositionEnd";break e;case"compositionupdate":J="onCompositionUpdate";break e}J=void 0}else xg?nN(t,r)&&(J="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(J="onCompositionStart");J&&(rN&&r.locale!=="ko"&&(xg||J!=="onCompositionStart"?J==="onCompositionEnd"&&xg&&(Z=tN()):(Pd=y,sz="value"in Pd?Pd.value:Pd.textContent,xg=!0)),Y=NS(m,J),0<Y.length&&(J=new _R(J,t,null,r,y),b.push({event:J,listeners:Y}),Z?J.data=Z:(Z=iN(r),Z!==null&&(J.data=Z)))),(Z=KK?ZK(t,r):YK(t,r))&&(m=NS(m,"onBeforeInput"),0<m.length&&(y=new _R("onBeforeInput","beforeinput",null,r,y),b.push({event:y,listeners:m}),y.data=Z))}gN(b,e)})}function Jv(t,e,r){return{instance:t,listener:e,currentTarget:r}}function NS(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Qv(t,r),s!=null&&n.unshift(Jv(t,s,i)),s=Qv(t,e),s!=null&&n.push(Jv(t,s,i))),t=t.return}return n}function ig(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function MR(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var o=r,d=o.alternate,m=o.stateNode;if(d!==null&&d===n)break;o.tag===5&&m!==null&&(o=m,i?(d=Qv(r,s),d!=null&&a.unshift(Jv(r,d,o))):i||(d=Qv(r,s),d!=null&&a.push(Jv(r,d,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var dZ=/\r\n?/g,fZ=/\u0000|\uFFFD/g;function IR(t){return(typeof t=="string"?t:""+t).replace(dZ,`
`).replace(fZ,"")}function U_(t,e,r){if(e=IR(e),IR(t)!==e&&r)throw Error(jt(425))}function VS(){}var aj=null,lj=null;function cj(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var uj=typeof setTimeout=="function"?setTimeout:void 0,pZ=typeof clearTimeout=="function"?clearTimeout:void 0,DR=typeof Promise=="function"?Promise:void 0,mZ=typeof queueMicrotask=="function"?queueMicrotask:typeof DR<"u"?function(t){return DR.resolve(null).then(t).catch(gZ)}:uj;function gZ(t){setTimeout(function(){throw t})}function WT(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Xv(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Xv(e)}function Id(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function RR(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var c0=Math.random().toString(36).slice(2),Kc="__reactFiber$"+c0,eb="__reactProps$"+c0,fh="__reactContainer$"+c0,hj="__reactEvents$"+c0,yZ="__reactListeners$"+c0,xZ="__reactHandles$"+c0;function op(t){var e=t[Kc];if(e)return e;for(var r=t.parentNode;r;){if(e=r[fh]||r[Kc]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=RR(t);t!==null;){if(r=t[Kc])return r;t=RR(t)}return e}t=r,r=t.parentNode}return null}function i1(t){return t=t[Kc]||t[fh],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _g(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(jt(33))}function rk(t){return t[eb]||null}var dj=[],wg=-1;function uf(t){return{current:t}}function ci(t){0>wg||(t.current=dj[wg],dj[wg]=null,wg--)}function ri(t,e){wg++,dj[wg]=t.current,t.current=e}var qd={},_o=uf(qd),va=uf(!1),Np=qd;function Py(t,e){var r=t.type.contextTypes;if(!r)return qd;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ba(t){return t=t.childContextTypes,t!=null}function WS(){ci(va),ci(_o)}function LR(t,e,r){if(_o.current!==qd)throw Error(jt(168));ri(_o,e),ri(va,r)}function xN(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(jt(108,rK(t)||"Unknown",i));return Ti({},r,n)}function US(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qd,Np=_o.current,ri(_o,t),ri(va,va.current),!0}function FR(t,e,r){var n=t.stateNode;if(!n)throw Error(jt(169));r?(t=xN(t,e,Np),n.__reactInternalMemoizedMergedChildContext=t,ci(va),ci(_o),ri(_o,t)):ci(va),ri(va,r)}var Wu=null,nk=!1,UT=!1;function vN(t){Wu===null?Wu=[t]:Wu.push(t)}function vZ(t){nk=!0,vN(t)}function hf(){if(!UT&&Wu!==null){UT=!0;var t=0,e=Vn;try{var r=Wu;for(Vn=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Wu=null,nk=!1}catch(i){throw Wu!==null&&(Wu=Wu.slice(t+1)),U$(tz,hf),i}finally{Vn=e,UT=!1}}return null}var Sg=[],kg=0,qS=null,QS=0,_l=[],wl=0,Vp=null,eh=1,th="";function Kf(t,e){Sg[kg++]=QS,Sg[kg++]=qS,qS=t,QS=e}function bN(t,e,r){_l[wl++]=eh,_l[wl++]=th,_l[wl++]=Vp,Vp=t;var n=eh;t=th;var i=32-uc(n)-1;n&=~(1<<i),r+=1;var s=32-uc(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,eh=1<<32-uc(e)+i|r<<i|n,th=s+t}else eh=1<<s|r<<i|n,th=t}function uz(t){t.return!==null&&(Kf(t,1),bN(t,1,0))}function hz(t){for(;t===qS;)qS=Sg[--kg],Sg[kg]=null,QS=Sg[--kg],Sg[kg]=null;for(;t===Vp;)Vp=_l[--wl],_l[wl]=null,th=_l[--wl],_l[wl]=null,eh=_l[--wl],_l[wl]=null}var Ga=null,qa=null,gi=!1,sc=null;function _N(t,e){var r=Pl(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function BR(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ga=t,qa=Id(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ga=t,qa=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Vp!==null?{id:eh,overflow:th}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Pl(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ga=t,qa=null,!0):!1;default:return!1}}function fj(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pj(t){if(gi){var e=qa;if(e){var r=e;if(!BR(t,e)){if(fj(t))throw Error(jt(418));e=Id(r.nextSibling);var n=Ga;e&&BR(t,e)?_N(n,r):(t.flags=t.flags&-4097|2,gi=!1,Ga=t)}}else{if(fj(t))throw Error(jt(418));t.flags=t.flags&-4097|2,gi=!1,Ga=t}}}function $R(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ga=t}function q_(t){if(t!==Ga)return!1;if(!gi)return $R(t),gi=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cj(t.type,t.memoizedProps)),e&&(e=qa)){if(fj(t))throw wN(),Error(jt(418));for(;e;)_N(t,e),e=Id(e.nextSibling)}if($R(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(jt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){qa=Id(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}qa=null}}else qa=Ga?Id(t.stateNode.nextSibling):null;return!0}function wN(){for(var t=qa;t;)t=Id(t.nextSibling)}function jy(){qa=Ga=null,gi=!1}function dz(t){sc===null?sc=[t]:sc.push(t)}var bZ=wh.ReactCurrentBatchConfig;function Ox(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(jt(309));var n=r.stateNode}if(!n)throw Error(jt(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(jt(284));if(!r._owner)throw Error(jt(290,t))}return t}function Q_(t,e){throw t=Object.prototype.toString.call(e),Error(jt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function NR(t){var e=t._init;return e(t._payload)}function SN(t){function e(R,F){if(t){var L=R.deletions;L===null?(R.deletions=[F],R.flags|=16):L.push(F)}}function r(R,F){if(!t)return null;for(;F!==null;)e(R,F),F=F.sibling;return null}function n(R,F){for(R=new Map;F!==null;)F.key!==null?R.set(F.key,F):R.set(F.index,F),F=F.sibling;return R}function i(R,F){return R=Fd(R,F),R.index=0,R.sibling=null,R}function s(R,F,L){return R.index=L,t?(L=R.alternate,L!==null?(L=L.index,L<F?(R.flags|=2,F):L):(R.flags|=2,F)):(R.flags|=1048576,F)}function a(R){return t&&R.alternate===null&&(R.flags|=2),R}function o(R,F,L,U){return F===null||F.tag!==6?(F=ZT(L,R.mode,U),F.return=R,F):(F=i(F,L),F.return=R,F)}function d(R,F,L,U){var Q=L.type;return Q===yg?y(R,F,L.props.children,U,L.key):F!==null&&(F.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===cd&&NR(Q)===F.type)?(U=i(F,L.props),U.ref=Ox(R,F,L),U.return=R,U):(U=Zw(L.type,L.key,L.props,null,R.mode,U),U.ref=Ox(R,F,L),U.return=R,U)}function m(R,F,L,U){return F===null||F.tag!==4||F.stateNode.containerInfo!==L.containerInfo||F.stateNode.implementation!==L.implementation?(F=YT(L,R.mode,U),F.return=R,F):(F=i(F,L.children||[]),F.return=R,F)}function y(R,F,L,U,Q){return F===null||F.tag!==7?(F=Cp(L,R.mode,U,Q),F.return=R,F):(F=i(F,L),F.return=R,F)}function b(R,F,L){if(typeof F=="string"&&F!==""||typeof F=="number")return F=ZT(""+F,R.mode,L),F.return=R,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case D_:return L=Zw(F.type,F.key,F.props,null,R.mode,L),L.ref=Ox(R,null,F),L.return=R,L;case gg:return F=YT(F,R.mode,L),F.return=R,F;case cd:var U=F._init;return b(R,U(F._payload),L)}if(Hx(F)||wx(F))return F=Cp(F,R.mode,L,null),F.return=R,F;Q_(R,F)}return null}function w(R,F,L,U){var Q=F!==null?F.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return Q!==null?null:o(R,F,""+L,U);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case D_:return L.key===Q?d(R,F,L,U):null;case gg:return L.key===Q?m(R,F,L,U):null;case cd:return Q=L._init,w(R,F,Q(L._payload),U)}if(Hx(L)||wx(L))return Q!==null?null:y(R,F,L,U,null);Q_(R,L)}return null}function O(R,F,L,U,Q){if(typeof U=="string"&&U!==""||typeof U=="number")return R=R.get(L)||null,o(F,R,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case D_:return R=R.get(U.key===null?L:U.key)||null,d(F,R,U,Q);case gg:return R=R.get(U.key===null?L:U.key)||null,m(F,R,U,Q);case cd:var Y=U._init;return O(R,F,L,Y(U._payload),Q)}if(Hx(U)||wx(U))return R=R.get(L)||null,y(F,R,U,Q,null);Q_(F,U)}return null}function A(R,F,L,U){for(var Q=null,Y=null,Z=F,J=F=0,re=null;Z!==null&&J<L.length;J++){Z.index>J?(re=Z,Z=null):re=Z.sibling;var he=w(R,Z,L[J],U);if(he===null){Z===null&&(Z=re);break}t&&Z&&he.alternate===null&&e(R,Z),F=s(he,F,J),Y===null?Q=he:Y.sibling=he,Y=he,Z=re}if(J===L.length)return r(R,Z),gi&&Kf(R,J),Q;if(Z===null){for(;J<L.length;J++)Z=b(R,L[J],U),Z!==null&&(F=s(Z,F,J),Y===null?Q=Z:Y.sibling=Z,Y=Z);return gi&&Kf(R,J),Q}for(Z=n(R,Z);J<L.length;J++)re=O(Z,R,J,L[J],U),re!==null&&(t&&re.alternate!==null&&Z.delete(re.key===null?J:re.key),F=s(re,F,J),Y===null?Q=re:Y.sibling=re,Y=re);return t&&Z.forEach(function(le){return e(R,le)}),gi&&Kf(R,J),Q}function E(R,F,L,U){var Q=wx(L);if(typeof Q!="function")throw Error(jt(150));if(L=Q.call(L),L==null)throw Error(jt(151));for(var Y=Q=null,Z=F,J=F=0,re=null,he=L.next();Z!==null&&!he.done;J++,he=L.next()){Z.index>J?(re=Z,Z=null):re=Z.sibling;var le=w(R,Z,he.value,U);if(le===null){Z===null&&(Z=re);break}t&&Z&&le.alternate===null&&e(R,Z),F=s(le,F,J),Y===null?Q=le:Y.sibling=le,Y=le,Z=re}if(he.done)return r(R,Z),gi&&Kf(R,J),Q;if(Z===null){for(;!he.done;J++,he=L.next())he=b(R,he.value,U),he!==null&&(F=s(he,F,J),Y===null?Q=he:Y.sibling=he,Y=he);return gi&&Kf(R,J),Q}for(Z=n(R,Z);!he.done;J++,he=L.next())he=O(Z,R,J,he.value,U),he!==null&&(t&&he.alternate!==null&&Z.delete(he.key===null?J:he.key),F=s(he,F,J),Y===null?Q=he:Y.sibling=he,Y=he);return t&&Z.forEach(function(Ze){return e(R,Ze)}),gi&&Kf(R,J),Q}function $(R,F,L,U){if(typeof L=="object"&&L!==null&&L.type===yg&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case D_:e:{for(var Q=L.key,Y=F;Y!==null;){if(Y.key===Q){if(Q=L.type,Q===yg){if(Y.tag===7){r(R,Y.sibling),F=i(Y,L.props.children),F.return=R,R=F;break e}}else if(Y.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===cd&&NR(Q)===Y.type){r(R,Y.sibling),F=i(Y,L.props),F.ref=Ox(R,Y,L),F.return=R,R=F;break e}r(R,Y);break}else e(R,Y);Y=Y.sibling}L.type===yg?(F=Cp(L.props.children,R.mode,U,L.key),F.return=R,R=F):(U=Zw(L.type,L.key,L.props,null,R.mode,U),U.ref=Ox(R,F,L),U.return=R,R=U)}return a(R);case gg:e:{for(Y=L.key;F!==null;){if(F.key===Y)if(F.tag===4&&F.stateNode.containerInfo===L.containerInfo&&F.stateNode.implementation===L.implementation){r(R,F.sibling),F=i(F,L.children||[]),F.return=R,R=F;break e}else{r(R,F);break}else e(R,F);F=F.sibling}F=YT(L,R.mode,U),F.return=R,R=F}return a(R);case cd:return Y=L._init,$(R,F,Y(L._payload),U)}if(Hx(L))return A(R,F,L,U);if(wx(L))return E(R,F,L,U);Q_(R,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,F!==null&&F.tag===6?(r(R,F.sibling),F=i(F,L),F.return=R,R=F):(r(R,F),F=ZT(L,R.mode,U),F.return=R,R=F),a(R)):r(R,F)}return $}var Ay=SN(!0),kN=SN(!1),HS=uf(null),GS=null,Cg=null,fz=null;function pz(){fz=Cg=GS=null}function mz(t){var e=HS.current;ci(HS),t._currentValue=e}function mj(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Xg(t,e){GS=t,fz=Cg=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ma=!0),t.firstContext=null)}function Ll(t){var e=t._currentValue;if(fz!==t)if(t={context:t,memoizedValue:e,next:null},Cg===null){if(GS===null)throw Error(jt(308));Cg=t,GS.dependencies={lanes:0,firstContext:t}}else Cg=Cg.next=t;return e}var ap=null;function gz(t){ap===null?ap=[t]:ap.push(t)}function CN(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,gz(e)):(r.next=i.next,i.next=r),e.interleaved=r,ph(t,n)}function ph(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ud=!1;function yz(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sh(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dd(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,vn&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,ph(t,r)}return i=n.interleaved,i===null?(e.next=e,gz(n)):(e.next=i.next,i.next=e),n.interleaved=e,ph(t,r)}function qw(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,rz(t,r)}}function VR(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function XS(t,e,r,n){var i=t.updateQueue;ud=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var d=o,m=d.next;d.next=null,a===null?s=m:a.next=m,a=d;var y=t.alternate;y!==null&&(y=y.updateQueue,o=y.lastBaseUpdate,o!==a&&(o===null?y.firstBaseUpdate=m:o.next=m,y.lastBaseUpdate=d))}if(s!==null){var b=i.baseState;a=0,y=m=d=null,o=s;do{var w=o.lane,O=o.eventTime;if((n&w)===w){y!==null&&(y=y.next={eventTime:O,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var A=t,E=o;switch(w=e,O=r,E.tag){case 1:if(A=E.payload,typeof A=="function"){b=A.call(O,b,w);break e}b=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=E.payload,w=typeof A=="function"?A.call(O,b,w):A,w==null)break e;b=Ti({},b,w);break e;case 2:ud=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,w=i.effects,w===null?i.effects=[o]:w.push(o))}else O={eventTime:O,lane:w,tag:o.tag,payload:o.payload,callback:o.callback,next:null},y===null?(m=y=O,d=b):y=y.next=O,a|=w;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;w=o,o=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(!0);if(y===null&&(d=b),i.baseState=d,i.firstBaseUpdate=m,i.lastBaseUpdate=y,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Up|=a,t.lanes=a,t.memoizedState=b}}function WR(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(jt(191,i));i.call(n)}}}var s1={},lu=uf(s1),tb=uf(s1),rb=uf(s1);function lp(t){if(t===s1)throw Error(jt(174));return t}function xz(t,e){switch(ri(rb,e),ri(tb,t),ri(lu,s1),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:XP(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=XP(e,t)}ci(lu),ri(lu,e)}function Ey(){ci(lu),ci(tb),ci(rb)}function ON(t){lp(rb.current);var e=lp(lu.current),r=XP(e,t.type);e!==r&&(ri(tb,t),ri(lu,r))}function vz(t){tb.current===t&&(ci(lu),ci(tb))}var wi=uf(0);function KS(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qT=[];function bz(){for(var t=0;t<qT.length;t++)qT[t]._workInProgressVersionPrimary=null;qT.length=0}var Qw=wh.ReactCurrentDispatcher,QT=wh.ReactCurrentBatchConfig,Wp=0,Ci=null,cs=null,zs=null,ZS=!1,yv=!1,nb=0,_Z=0;function po(){throw Error(jt(321))}function _z(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!fc(t[r],e[r]))return!1;return!0}function wz(t,e,r,n,i,s){if(Wp=s,Ci=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qw.current=t===null||t.memoizedState===null?CZ:TZ,t=r(n,i),yv){s=0;do{if(yv=!1,nb=0,25<=s)throw Error(jt(301));s+=1,zs=cs=null,e.updateQueue=null,Qw.current=OZ,t=r(n,i)}while(yv)}if(Qw.current=YS,e=cs!==null&&cs.next!==null,Wp=0,zs=cs=Ci=null,ZS=!1,e)throw Error(jt(300));return t}function Sz(){var t=nb!==0;return nb=0,t}function Vc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zs===null?Ci.memoizedState=zs=t:zs=zs.next=t,zs}function Fl(){if(cs===null){var t=Ci.alternate;t=t!==null?t.memoizedState:null}else t=cs.next;var e=zs===null?Ci.memoizedState:zs.next;if(e!==null)zs=e,cs=t;else{if(t===null)throw Error(jt(310));cs=t,t={memoizedState:cs.memoizedState,baseState:cs.baseState,baseQueue:cs.baseQueue,queue:cs.queue,next:null},zs===null?Ci.memoizedState=zs=t:zs=zs.next=t}return zs}function ib(t,e){return typeof e=="function"?e(t):e}function HT(t){var e=Fl(),r=e.queue;if(r===null)throw Error(jt(311));r.lastRenderedReducer=t;var n=cs,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,d=null,m=s;do{var y=m.lane;if((Wp&y)===y)d!==null&&(d=d.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),n=m.hasEagerState?m.eagerState:t(n,m.action);else{var b={lane:y,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};d===null?(o=d=b,a=n):d=d.next=b,Ci.lanes|=y,Up|=y}m=m.next}while(m!==null&&m!==s);d===null?a=n:d.next=o,fc(n,e.memoizedState)||(ma=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=d,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Ci.lanes|=s,Up|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function GT(t){var e=Fl(),r=e.queue;if(r===null)throw Error(jt(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);fc(s,e.memoizedState)||(ma=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function PN(){}function jN(t,e){var r=Ci,n=Fl(),i=e(),s=!fc(n.memoizedState,i);if(s&&(n.memoizedState=i,ma=!0),n=n.queue,kz(zN.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||zs!==null&&zs.memoizedState.tag&1){if(r.flags|=2048,sb(9,EN.bind(null,r,n,i,e),void 0,null),Is===null)throw Error(jt(349));Wp&30||AN(r,e,i)}return i}function AN(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ci.updateQueue,e===null?(e={lastEffect:null,stores:null},Ci.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function EN(t,e,r,n){e.value=r,e.getSnapshot=n,MN(e)&&IN(t)}function zN(t,e,r){return r(function(){MN(e)&&IN(t)})}function MN(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!fc(t,r)}catch{return!0}}function IN(t){var e=ph(t,1);e!==null&&hc(e,t,1,-1)}function UR(t){var e=Vc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ib,lastRenderedState:t},e.queue=t,t=t.dispatch=kZ.bind(null,Ci,t),[e.memoizedState,t]}function sb(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ci.updateQueue,e===null?(e={lastEffect:null,stores:null},Ci.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function DN(){return Fl().memoizedState}function Hw(t,e,r,n){var i=Vc();Ci.flags|=t,i.memoizedState=sb(1|e,r,void 0,n===void 0?null:n)}function ik(t,e,r,n){var i=Fl();n=n===void 0?null:n;var s=void 0;if(cs!==null){var a=cs.memoizedState;if(s=a.destroy,n!==null&&_z(n,a.deps)){i.memoizedState=sb(e,r,s,n);return}}Ci.flags|=t,i.memoizedState=sb(1|e,r,s,n)}function qR(t,e){return Hw(8390656,8,t,e)}function kz(t,e){return ik(2048,8,t,e)}function RN(t,e){return ik(4,2,t,e)}function LN(t,e){return ik(4,4,t,e)}function FN(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function BN(t,e,r){return r=r!=null?r.concat([t]):null,ik(4,4,FN.bind(null,e,t),r)}function Cz(){}function $N(t,e){var r=Fl();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&_z(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function NN(t,e){var r=Fl();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&_z(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function VN(t,e,r){return Wp&21?(fc(r,e)||(r=H$(),Ci.lanes|=r,Up|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ma=!0),t.memoizedState=r)}function wZ(t,e){var r=Vn;Vn=r!==0&&4>r?r:4,t(!0);var n=QT.transition;QT.transition={};try{t(!1),e()}finally{Vn=r,QT.transition=n}}function WN(){return Fl().memoizedState}function SZ(t,e,r){var n=Ld(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},UN(t))qN(e,r);else if(r=CN(t,e,r,n),r!==null){var i=Vo();hc(r,t,n,i),QN(r,e,n)}}function kZ(t,e,r){var n=Ld(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(UN(t))qN(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,fc(o,a)){var d=e.interleaved;d===null?(i.next=i,gz(e)):(i.next=d.next,d.next=i),e.interleaved=i;return}}catch{}finally{}r=CN(t,e,i,n),r!==null&&(i=Vo(),hc(r,t,n,i),QN(r,e,n))}}function UN(t){var e=t.alternate;return t===Ci||e!==null&&e===Ci}function qN(t,e){yv=ZS=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function QN(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,rz(t,r)}}var YS={readContext:Ll,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},CZ={readContext:Ll,useCallback:function(t,e){return Vc().memoizedState=[t,e===void 0?null:e],t},useContext:Ll,useEffect:qR,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Hw(4194308,4,FN.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Hw(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hw(4,2,t,e)},useMemo:function(t,e){var r=Vc();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Vc();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=SZ.bind(null,Ci,t),[n.memoizedState,t]},useRef:function(t){var e=Vc();return t={current:t},e.memoizedState=t},useState:UR,useDebugValue:Cz,useDeferredValue:function(t){return Vc().memoizedState=t},useTransition:function(){var t=UR(!1),e=t[0];return t=wZ.bind(null,t[1]),Vc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ci,i=Vc();if(gi){if(r===void 0)throw Error(jt(407));r=r()}else{if(r=e(),Is===null)throw Error(jt(349));Wp&30||AN(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,qR(zN.bind(null,n,s,t),[t]),n.flags|=2048,sb(9,EN.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Vc(),e=Is.identifierPrefix;if(gi){var r=th,n=eh;r=(n&~(1<<32-uc(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=nb++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=_Z++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},TZ={readContext:Ll,useCallback:$N,useContext:Ll,useEffect:kz,useImperativeHandle:BN,useInsertionEffect:RN,useLayoutEffect:LN,useMemo:NN,useReducer:HT,useRef:DN,useState:function(){return HT(ib)},useDebugValue:Cz,useDeferredValue:function(t){var e=Fl();return VN(e,cs.memoizedState,t)},useTransition:function(){var t=HT(ib)[0],e=Fl().memoizedState;return[t,e]},useMutableSource:PN,useSyncExternalStore:jN,useId:WN,unstable_isNewReconciler:!1},OZ={readContext:Ll,useCallback:$N,useContext:Ll,useEffect:kz,useImperativeHandle:BN,useInsertionEffect:RN,useLayoutEffect:LN,useMemo:NN,useReducer:GT,useRef:DN,useState:function(){return GT(ib)},useDebugValue:Cz,useDeferredValue:function(t){var e=Fl();return cs===null?e.memoizedState=t:VN(e,cs.memoizedState,t)},useTransition:function(){var t=GT(ib)[0],e=Fl().memoizedState;return[t,e]},useMutableSource:PN,useSyncExternalStore:jN,useId:WN,unstable_isNewReconciler:!1};function tc(t,e){if(t&&t.defaultProps){e=Ti({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function gj(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ti({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var sk={isMounted:function(t){return(t=t._reactInternals)?am(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Vo(),i=Ld(t),s=sh(n,i);s.payload=e,r!=null&&(s.callback=r),e=Dd(t,s,i),e!==null&&(hc(e,t,i,n),qw(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Vo(),i=Ld(t),s=sh(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Dd(t,s,i),e!==null&&(hc(e,t,i,n),qw(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Vo(),n=Ld(t),i=sh(r,n);i.tag=2,e!=null&&(i.callback=e),e=Dd(t,i,n),e!==null&&(hc(e,t,n,r),qw(e,t,n))}};function QR(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!Zv(r,n)||!Zv(i,s):!0}function HN(t,e,r){var n=!1,i=qd,s=e.contextType;return typeof s=="object"&&s!==null?s=Ll(s):(i=ba(e)?Np:_o.current,n=e.contextTypes,s=(n=n!=null)?Py(t,i):qd),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sk,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function HR(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&sk.enqueueReplaceState(e,e.state,null)}function yj(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},yz(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ll(s):(s=ba(e)?Np:_o.current,i.context=Py(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(gj(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&sk.enqueueReplaceState(i,i.state,null),XS(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function zy(t,e){try{var r="",n=e;do r+=tK(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function XT(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function xj(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var PZ=typeof WeakMap=="function"?WeakMap:Map;function GN(t,e,r){r=sh(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){e2||(e2=!0,Pj=n),xj(t,e)},r}function XN(t,e,r){r=sh(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){xj(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){xj(t,e),typeof n!="function"&&(Rd===null?Rd=new Set([this]):Rd.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function GR(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new PZ;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=VZ.bind(null,t,e,r),e.then(t,t))}function XR(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function KR(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=sh(-1,1),e.tag=2,Dd(r,e,1))),r.lanes|=1),t)}var jZ=wh.ReactCurrentOwner,ma=!1;function Ro(t,e,r,n){e.child=t===null?kN(e,null,r,n):Ay(e,t.child,r,n)}function ZR(t,e,r,n,i){r=r.render;var s=e.ref;return Xg(e,i),n=wz(t,e,r,n,s,i),r=Sz(),t!==null&&!ma?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mh(t,e,i)):(gi&&r&&uz(e),e.flags|=1,Ro(t,e,n,i),e.child)}function YR(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!Mz(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,KN(t,e,s,n,i)):(t=Zw(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:Zv,r(a,n)&&t.ref===e.ref)return mh(t,e,i)}return e.flags|=1,t=Fd(s,n),t.ref=e.ref,t.return=e,e.child=t}function KN(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Zv(s,n)&&t.ref===e.ref)if(ma=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(ma=!0);else return e.lanes=t.lanes,mh(t,e,i)}return vj(t,e,r,n,i)}function ZN(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ri(Og,Va),Va|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ri(Og,Va),Va|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,ri(Og,Va),Va|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,ri(Og,Va),Va|=n;return Ro(t,e,i,r),e.child}function YN(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function vj(t,e,r,n,i){var s=ba(r)?Np:_o.current;return s=Py(e,s),Xg(e,i),r=wz(t,e,r,n,s,i),n=Sz(),t!==null&&!ma?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mh(t,e,i)):(gi&&n&&uz(e),e.flags|=1,Ro(t,e,r,i),e.child)}function JR(t,e,r,n,i){if(ba(r)){var s=!0;US(e)}else s=!1;if(Xg(e,i),e.stateNode===null)Gw(t,e),HN(e,r,n),yj(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var d=a.context,m=r.contextType;typeof m=="object"&&m!==null?m=Ll(m):(m=ba(r)?Np:_o.current,m=Py(e,m));var y=r.getDerivedStateFromProps,b=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function";b||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||d!==m)&&HR(e,a,n,m),ud=!1;var w=e.memoizedState;a.state=w,XS(e,n,a,i),d=e.memoizedState,o!==n||w!==d||va.current||ud?(typeof y=="function"&&(gj(e,r,y,n),d=e.memoizedState),(o=ud||QR(e,r,o,n,w,d,m))?(b||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=d),a.props=n,a.state=d,a.context=m,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,TN(t,e),o=e.memoizedProps,m=e.type===e.elementType?o:tc(e.type,o),a.props=m,b=e.pendingProps,w=a.context,d=r.contextType,typeof d=="object"&&d!==null?d=Ll(d):(d=ba(r)?Np:_o.current,d=Py(e,d));var O=r.getDerivedStateFromProps;(y=typeof O=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==b||w!==d)&&HR(e,a,n,d),ud=!1,w=e.memoizedState,a.state=w,XS(e,n,a,i);var A=e.memoizedState;o!==b||w!==A||va.current||ud?(typeof O=="function"&&(gj(e,r,O,n),A=e.memoizedState),(m=ud||QR(e,r,m,n,w,A,d)||!1)?(y||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,A,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,A,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=A),a.props=n,a.state=A,a.context=d,n=m):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),n=!1)}return bj(t,e,r,n,s,i)}function bj(t,e,r,n,i,s){YN(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&FR(e,r,!1),mh(t,e,s);n=e.stateNode,jZ.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Ay(e,t.child,null,s),e.child=Ay(e,null,o,s)):Ro(t,e,o,s),e.memoizedState=n.state,i&&FR(e,r,!0),e.child}function JN(t){var e=t.stateNode;e.pendingContext?LR(t,e.pendingContext,e.pendingContext!==e.context):e.context&&LR(t,e.context,!1),xz(t,e.containerInfo)}function e3(t,e,r,n,i){return jy(),dz(i),e.flags|=256,Ro(t,e,r,n),e.child}var _j={dehydrated:null,treeContext:null,retryLane:0};function wj(t){return{baseLanes:t,cachePool:null,transitions:null}}function e8(t,e,r){var n=e.pendingProps,i=wi.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ri(wi,i&1),t===null)return pj(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=lk(a,n,0,null),t=Cp(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=wj(r),e.memoizedState=_j,t):Tz(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return AZ(t,e,a,n,o,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,o=i.sibling;var d={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=d,e.deletions=null):(n=Fd(i,d),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Fd(o,s):(s=Cp(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?wj(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=_j,n}return s=t.child,t=s.sibling,n=Fd(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Tz(t,e){return e=lk({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function H_(t,e,r,n){return n!==null&&dz(n),Ay(e,t.child,null,r),t=Tz(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function AZ(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=XT(Error(jt(422))),H_(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=lk({mode:"visible",children:n.children},i,0,null),s=Cp(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Ay(e,t.child,null,a),e.child.memoizedState=wj(a),e.memoizedState=_j,s);if(!(e.mode&1))return H_(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(jt(419)),n=XT(s,n,void 0),H_(t,e,a,n)}if(o=(a&t.childLanes)!==0,ma||o){if(n=Is,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ph(t,i),hc(n,t,i,-1))}return zz(),n=XT(Error(jt(421))),H_(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=WZ.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,qa=Id(i.nextSibling),Ga=e,gi=!0,sc=null,t!==null&&(_l[wl++]=eh,_l[wl++]=th,_l[wl++]=Vp,eh=t.id,th=t.overflow,Vp=e),e=Tz(e,n.children),e.flags|=4096,e)}function t3(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),mj(t.return,e,r)}function KT(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function t8(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Ro(t,e,n.children,r),n=wi.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&t3(t,r,e);else if(t.tag===19)t3(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ri(wi,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&KS(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),KT(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&KS(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}KT(e,!0,r,null,s);break;case"together":KT(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gw(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mh(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Up|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(jt(153));if(e.child!==null){for(t=e.child,r=Fd(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Fd(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function EZ(t,e,r){switch(e.tag){case 3:JN(e),jy();break;case 5:ON(e);break;case 1:ba(e.type)&&US(e);break;case 4:xz(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;ri(HS,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ri(wi,wi.current&1),e.flags|=128,null):r&e.child.childLanes?e8(t,e,r):(ri(wi,wi.current&1),t=mh(t,e,r),t!==null?t.sibling:null);ri(wi,wi.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return t8(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ri(wi,wi.current),n)break;return null;case 22:case 23:return e.lanes=0,ZN(t,e,r)}return mh(t,e,r)}var r8,Sj,n8,i8;r8=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Sj=function(){};n8=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,lp(lu.current);var s=null;switch(r){case"input":i=qP(t,i),n=qP(t,n),s=[];break;case"select":i=Ti({},i,{value:void 0}),n=Ti({},n,{value:void 0}),s=[];break;case"textarea":i=GP(t,i),n=GP(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=VS)}KP(r,n);var a;r=null;for(m in i)if(!n.hasOwnProperty(m)&&i.hasOwnProperty(m)&&i[m]!=null)if(m==="style"){var o=i[m];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Uv.hasOwnProperty(m)?s||(s=[]):(s=s||[]).push(m,null));for(m in n){var d=n[m];if(o=i!=null?i[m]:void 0,n.hasOwnProperty(m)&&d!==o&&(d!=null||o!=null))if(m==="style")if(o){for(a in o)!o.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in d)d.hasOwnProperty(a)&&o[a]!==d[a]&&(r||(r={}),r[a]=d[a])}else r||(s||(s=[]),s.push(m,r)),r=d;else m==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,o=o?o.__html:void 0,d!=null&&o!==d&&(s=s||[]).push(m,d)):m==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(m,""+d):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Uv.hasOwnProperty(m)?(d!=null&&m==="onScroll"&&ai("scroll",t),s||o===d||(s=[])):(s=s||[]).push(m,d))}r&&(s=s||[]).push("style",r);var m=s;(e.updateQueue=m)&&(e.flags|=4)}};i8=function(t,e,r,n){r!==n&&(e.flags|=4)};function Px(t,e){if(!gi)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function mo(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function zZ(t,e,r){var n=e.pendingProps;switch(hz(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mo(e),null;case 1:return ba(e.type)&&WS(),mo(e),null;case 3:return n=e.stateNode,Ey(),ci(va),ci(_o),bz(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(q_(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sc!==null&&(Ej(sc),sc=null))),Sj(t,e),mo(e),null;case 5:vz(e);var i=lp(rb.current);if(r=e.type,t!==null&&e.stateNode!=null)n8(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(jt(166));return mo(e),null}if(t=lp(lu.current),q_(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Kc]=e,n[eb]=s,t=(e.mode&1)!==0,r){case"dialog":ai("cancel",n),ai("close",n);break;case"iframe":case"object":case"embed":ai("load",n);break;case"video":case"audio":for(i=0;i<Xx.length;i++)ai(Xx[i],n);break;case"source":ai("error",n);break;case"img":case"image":case"link":ai("error",n),ai("load",n);break;case"details":ai("toggle",n);break;case"input":uR(n,s),ai("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},ai("invalid",n);break;case"textarea":dR(n,s),ai("invalid",n)}KP(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&U_(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&U_(n.textContent,o,t),i=["children",""+o]):Uv.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ai("scroll",n)}switch(r){case"input":R_(n),hR(n,s,!0);break;case"textarea":R_(n),fR(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=VS)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=z$(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Kc]=e,t[eb]=n,r8(t,e,!1,!1),e.stateNode=t;e:{switch(a=ZP(r,n),r){case"dialog":ai("cancel",t),ai("close",t),i=n;break;case"iframe":case"object":case"embed":ai("load",t),i=n;break;case"video":case"audio":for(i=0;i<Xx.length;i++)ai(Xx[i],t);i=n;break;case"source":ai("error",t),i=n;break;case"img":case"image":case"link":ai("error",t),ai("load",t),i=n;break;case"details":ai("toggle",t),i=n;break;case"input":uR(t,n),i=qP(t,n),ai("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Ti({},n,{value:void 0}),ai("invalid",t);break;case"textarea":dR(t,n),i=GP(t,n),ai("invalid",t);break;default:i=n}KP(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var d=o[s];s==="style"?D$(t,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&M$(t,d)):s==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&qv(t,d):typeof d=="number"&&qv(t,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uv.hasOwnProperty(s)?d!=null&&s==="onScroll"&&ai("scroll",t):d!=null&&KE(t,s,d,a))}switch(r){case"input":R_(t),hR(t,n,!1);break;case"textarea":R_(t),fR(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ud(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?qg(t,!!n.multiple,s,!1):n.defaultValue!=null&&qg(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=VS)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mo(e),null;case 6:if(t&&e.stateNode!=null)i8(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(jt(166));if(r=lp(rb.current),lp(lu.current),q_(e)){if(n=e.stateNode,r=e.memoizedProps,n[Kc]=e,(s=n.nodeValue!==r)&&(t=Ga,t!==null))switch(t.tag){case 3:U_(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&U_(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Kc]=e,e.stateNode=n}return mo(e),null;case 13:if(ci(wi),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(gi&&qa!==null&&e.mode&1&&!(e.flags&128))wN(),jy(),e.flags|=98560,s=!1;else if(s=q_(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(jt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(jt(317));s[Kc]=e}else jy(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mo(e),s=!1}else sc!==null&&(Ej(sc),sc=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||wi.current&1?ds===0&&(ds=3):zz())),e.updateQueue!==null&&(e.flags|=4),mo(e),null);case 4:return Ey(),Sj(t,e),t===null&&Yv(e.stateNode.containerInfo),mo(e),null;case 10:return mz(e.type._context),mo(e),null;case 17:return ba(e.type)&&WS(),mo(e),null;case 19:if(ci(wi),s=e.memoizedState,s===null)return mo(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Px(s,!1);else{if(ds!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=KS(t),a!==null){for(e.flags|=128,Px(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ri(wi,wi.current&1|2),e.child}t=t.sibling}s.tail!==null&&Fi()>My&&(e.flags|=128,n=!0,Px(s,!1),e.lanes=4194304)}else{if(!n)if(t=KS(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Px(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!gi)return mo(e),null}else 2*Fi()-s.renderingStartTime>My&&r!==1073741824&&(e.flags|=128,n=!0,Px(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Fi(),e.sibling=null,r=wi.current,ri(wi,n?r&1|2:r&1),e):(mo(e),null);case 22:case 23:return Ez(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Va&1073741824&&(mo(e),e.subtreeFlags&6&&(e.flags|=8192)):mo(e),null;case 24:return null;case 25:return null}throw Error(jt(156,e.tag))}function MZ(t,e){switch(hz(e),e.tag){case 1:return ba(e.type)&&WS(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ey(),ci(va),ci(_o),bz(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vz(e),null;case 13:if(ci(wi),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(jt(340));jy()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ci(wi),null;case 4:return Ey(),null;case 10:return mz(e.type._context),null;case 22:case 23:return Ez(),null;case 24:return null;default:return null}}var G_=!1,bo=!1,IZ=typeof WeakSet=="function"?WeakSet:Set,mr=null;function Tg(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){zi(t,e,n)}else r.current=null}function kj(t,e,r){try{r()}catch(n){zi(t,e,n)}}var r3=!1;function DZ(t,e){if(aj=BS,t=cN(),cz(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,d=-1,m=0,y=0,b=t,w=null;t:for(;;){for(var O;b!==r||i!==0&&b.nodeType!==3||(o=a+i),b!==s||n!==0&&b.nodeType!==3||(d=a+n),b.nodeType===3&&(a+=b.nodeValue.length),(O=b.firstChild)!==null;)w=b,b=O;for(;;){if(b===t)break t;if(w===r&&++m===i&&(o=a),w===s&&++y===n&&(d=a),(O=b.nextSibling)!==null)break;b=w,w=b.parentNode}b=O}r=o===-1||d===-1?null:{start:o,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(lj={focusedElem:t,selectionRange:r},BS=!1,mr=e;mr!==null;)if(e=mr,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,mr=t;else for(;mr!==null;){e=mr;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var E=A.memoizedProps,$=A.memoizedState,R=e.stateNode,F=R.getSnapshotBeforeUpdate(e.elementType===e.type?E:tc(e.type,E),$);R.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var L=e.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jt(163))}}catch(U){zi(e,e.return,U)}if(t=e.sibling,t!==null){t.return=e.return,mr=t;break}mr=e.return}return A=r3,r3=!1,A}function xv(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&kj(e,r,s)}i=i.next}while(i!==n)}}function ok(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Cj(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function s8(t){var e=t.alternate;e!==null&&(t.alternate=null,s8(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Kc],delete e[eb],delete e[hj],delete e[yZ],delete e[xZ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function o8(t){return t.tag===5||t.tag===3||t.tag===4}function n3(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||o8(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tj(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=VS));else if(n!==4&&(t=t.child,t!==null))for(Tj(t,e,r),t=t.sibling;t!==null;)Tj(t,e,r),t=t.sibling}function Oj(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Oj(t,e,r),t=t.sibling;t!==null;)Oj(t,e,r),t=t.sibling}var Qs=null,ic=!1;function nd(t,e,r){for(r=r.child;r!==null;)a8(t,e,r),r=r.sibling}function a8(t,e,r){if(au&&typeof au.onCommitFiberUnmount=="function")try{au.onCommitFiberUnmount(Y2,r)}catch{}switch(r.tag){case 5:bo||Tg(r,e);case 6:var n=Qs,i=ic;Qs=null,nd(t,e,r),Qs=n,ic=i,Qs!==null&&(ic?(t=Qs,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Qs.removeChild(r.stateNode));break;case 18:Qs!==null&&(ic?(t=Qs,r=r.stateNode,t.nodeType===8?WT(t.parentNode,r):t.nodeType===1&&WT(t,r),Xv(t)):WT(Qs,r.stateNode));break;case 4:n=Qs,i=ic,Qs=r.stateNode.containerInfo,ic=!0,nd(t,e,r),Qs=n,ic=i;break;case 0:case 11:case 14:case 15:if(!bo&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&kj(r,e,a),i=i.next}while(i!==n)}nd(t,e,r);break;case 1:if(!bo&&(Tg(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){zi(r,e,o)}nd(t,e,r);break;case 21:nd(t,e,r);break;case 22:r.mode&1?(bo=(n=bo)||r.memoizedState!==null,nd(t,e,r),bo=n):nd(t,e,r);break;default:nd(t,e,r)}}function i3(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new IZ),e.forEach(function(n){var i=UZ.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Yl(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Qs=o.stateNode,ic=!1;break e;case 3:Qs=o.stateNode.containerInfo,ic=!0;break e;case 4:Qs=o.stateNode.containerInfo,ic=!0;break e}o=o.return}if(Qs===null)throw Error(jt(160));a8(s,a,i),Qs=null,ic=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(m){zi(i,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)l8(e,t),e=e.sibling}function l8(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yl(e,t),Ic(t),n&4){try{xv(3,t,t.return),ok(3,t)}catch(E){zi(t,t.return,E)}try{xv(5,t,t.return)}catch(E){zi(t,t.return,E)}}break;case 1:Yl(e,t),Ic(t),n&512&&r!==null&&Tg(r,r.return);break;case 5:if(Yl(e,t),Ic(t),n&512&&r!==null&&Tg(r,r.return),t.flags&32){var i=t.stateNode;try{qv(i,"")}catch(E){zi(t,t.return,E)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,o=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&A$(i,s),ZP(o,a);var m=ZP(o,s);for(a=0;a<d.length;a+=2){var y=d[a],b=d[a+1];y==="style"?D$(i,b):y==="dangerouslySetInnerHTML"?M$(i,b):y==="children"?qv(i,b):KE(i,y,b,m)}switch(o){case"input":QP(i,s);break;case"textarea":E$(i,s);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var O=s.value;O!=null?qg(i,!!s.multiple,O,!1):w!==!!s.multiple&&(s.defaultValue!=null?qg(i,!!s.multiple,s.defaultValue,!0):qg(i,!!s.multiple,s.multiple?[]:"",!1))}i[eb]=s}catch(E){zi(t,t.return,E)}}break;case 6:if(Yl(e,t),Ic(t),n&4){if(t.stateNode===null)throw Error(jt(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){zi(t,t.return,E)}}break;case 3:if(Yl(e,t),Ic(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Xv(e.containerInfo)}catch(E){zi(t,t.return,E)}break;case 4:Yl(e,t),Ic(t);break;case 13:Yl(e,t),Ic(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(jz=Fi())),n&4&&i3(t);break;case 22:if(y=r!==null&&r.memoizedState!==null,t.mode&1?(bo=(m=bo)||y,Yl(e,t),bo=m):Yl(e,t),Ic(t),n&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!y&&t.mode&1)for(mr=t,y=t.child;y!==null;){for(b=mr=y;mr!==null;){switch(w=mr,O=w.child,w.tag){case 0:case 11:case 14:case 15:xv(4,w,w.return);break;case 1:Tg(w,w.return);var A=w.stateNode;if(typeof A.componentWillUnmount=="function"){n=w,r=w.return;try{e=n,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(E){zi(n,r,E)}}break;case 5:Tg(w,w.return);break;case 22:if(w.memoizedState!==null){o3(b);continue}}O!==null?(O.return=w,mr=O):o3(b)}y=y.sibling}e:for(y=null,b=t;;){if(b.tag===5){if(y===null){y=b;try{i=b.stateNode,m?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=b.stateNode,d=b.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,o.style.display=I$("display",a))}catch(E){zi(t,t.return,E)}}}else if(b.tag===6){if(y===null)try{b.stateNode.nodeValue=m?"":b.memoizedProps}catch(E){zi(t,t.return,E)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===t)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;y===b&&(y=null),b=b.return}y===b&&(y=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Yl(e,t),Ic(t),n&4&&i3(t);break;case 21:break;default:Yl(e,t),Ic(t)}}function Ic(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(o8(r)){var n=r;break e}r=r.return}throw Error(jt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(qv(i,""),n.flags&=-33);var s=n3(t);Oj(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=n3(t);Tj(t,o,a);break;default:throw Error(jt(161))}}catch(d){zi(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function RZ(t,e,r){mr=t,c8(t)}function c8(t,e,r){for(var n=(t.mode&1)!==0;mr!==null;){var i=mr,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||G_;if(!a){var o=i.alternate,d=o!==null&&o.memoizedState!==null||bo;o=G_;var m=bo;if(G_=a,(bo=d)&&!m)for(mr=i;mr!==null;)a=mr,d=a.child,a.tag===22&&a.memoizedState!==null?a3(i):d!==null?(d.return=a,mr=d):a3(i);for(;s!==null;)mr=s,c8(s),s=s.sibling;mr=i,G_=o,bo=m}s3(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,mr=s):s3(t)}}function s3(t){for(;mr!==null;){var e=mr;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bo||ok(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!bo)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:tc(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&WR(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}WR(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var y=m.memoizedState;if(y!==null){var b=y.dehydrated;b!==null&&Xv(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jt(163))}bo||e.flags&512&&Cj(e)}catch(w){zi(e,e.return,w)}}if(e===t){mr=null;break}if(r=e.sibling,r!==null){r.return=e.return,mr=r;break}mr=e.return}}function o3(t){for(;mr!==null;){var e=mr;if(e===t){mr=null;break}var r=e.sibling;if(r!==null){r.return=e.return,mr=r;break}mr=e.return}}function a3(t){for(;mr!==null;){var e=mr;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ok(4,e)}catch(d){zi(e,r,d)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(d){zi(e,i,d)}}var s=e.return;try{Cj(e)}catch(d){zi(e,s,d)}break;case 5:var a=e.return;try{Cj(e)}catch(d){zi(e,a,d)}}}catch(d){zi(e,e.return,d)}if(e===t){mr=null;break}var o=e.sibling;if(o!==null){o.return=e.return,mr=o;break}mr=e.return}}var LZ=Math.ceil,JS=wh.ReactCurrentDispatcher,Oz=wh.ReactCurrentOwner,Ml=wh.ReactCurrentBatchConfig,vn=0,Is=null,Zi=null,Js=0,Va=0,Og=uf(0),ds=0,ob=null,Up=0,ak=0,Pz=0,vv=null,ca=null,jz=0,My=1/0,Vu=null,e2=!1,Pj=null,Rd=null,X_=!1,jd=null,t2=0,bv=0,jj=null,Xw=-1,Kw=0;function Vo(){return vn&6?Fi():Xw!==-1?Xw:Xw=Fi()}function Ld(t){return t.mode&1?vn&2&&Js!==0?Js&-Js:bZ.transition!==null?(Kw===0&&(Kw=H$()),Kw):(t=Vn,t!==0||(t=window.event,t=t===void 0?16:eN(t.type)),t):1}function hc(t,e,r,n){if(50<bv)throw bv=0,jj=null,Error(jt(185));r1(t,r,n),(!(vn&2)||t!==Is)&&(t===Is&&(!(vn&2)&&(ak|=r),ds===4&&gd(t,Js)),_a(t,n),r===1&&vn===0&&!(e.mode&1)&&(My=Fi()+500,nk&&hf()))}function _a(t,e){var r=t.callbackNode;bK(t,e);var n=FS(t,t===Is?Js:0);if(n===0)r!==null&&gR(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&gR(r),e===1)t.tag===0?vZ(l3.bind(null,t)):vN(l3.bind(null,t)),mZ(function(){!(vn&6)&&hf()}),r=null;else{switch(G$(n)){case 1:r=tz;break;case 4:r=q$;break;case 16:r=LS;break;case 536870912:r=Q$;break;default:r=LS}r=y8(r,u8.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function u8(t,e){if(Xw=-1,Kw=0,vn&6)throw Error(jt(327));var r=t.callbackNode;if(Kg()&&t.callbackNode!==r)return null;var n=FS(t,t===Is?Js:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=r2(t,n);else{e=n;var i=vn;vn|=2;var s=d8();(Is!==t||Js!==e)&&(Vu=null,My=Fi()+500,kp(t,e));do try{$Z();break}catch(o){h8(t,o)}while(!0);pz(),JS.current=s,vn=i,Zi!==null?e=0:(Is=null,Js=0,e=ds)}if(e!==0){if(e===2&&(i=rj(t),i!==0&&(n=i,e=Aj(t,i))),e===1)throw r=ob,kp(t,0),gd(t,n),_a(t,Fi()),r;if(e===6)gd(t,n);else{if(i=t.current.alternate,!(n&30)&&!FZ(i)&&(e=r2(t,n),e===2&&(s=rj(t),s!==0&&(n=s,e=Aj(t,s))),e===1))throw r=ob,kp(t,0),gd(t,n),_a(t,Fi()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(jt(345));case 2:Zf(t,ca,Vu);break;case 3:if(gd(t,n),(n&130023424)===n&&(e=jz+500-Fi(),10<e)){if(FS(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Vo(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=uj(Zf.bind(null,t,ca,Vu),e);break}Zf(t,ca,Vu);break;case 4:if(gd(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-uc(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=Fi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*LZ(n/1960))-n,10<n){t.timeoutHandle=uj(Zf.bind(null,t,ca,Vu),n);break}Zf(t,ca,Vu);break;case 5:Zf(t,ca,Vu);break;default:throw Error(jt(329))}}}return _a(t,Fi()),t.callbackNode===r?u8.bind(null,t):null}function Aj(t,e){var r=vv;return t.current.memoizedState.isDehydrated&&(kp(t,e).flags|=256),t=r2(t,e),t!==2&&(e=ca,ca=r,e!==null&&Ej(e)),t}function Ej(t){ca===null?ca=t:ca.push.apply(ca,t)}function FZ(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!fc(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gd(t,e){for(e&=~Pz,e&=~ak,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-uc(e),n=1<<r;t[r]=-1,e&=~n}}function l3(t){if(vn&6)throw Error(jt(327));Kg();var e=FS(t,0);if(!(e&1))return _a(t,Fi()),null;var r=r2(t,e);if(t.tag!==0&&r===2){var n=rj(t);n!==0&&(e=n,r=Aj(t,n))}if(r===1)throw r=ob,kp(t,0),gd(t,e),_a(t,Fi()),r;if(r===6)throw Error(jt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zf(t,ca,Vu),_a(t,Fi()),null}function Az(t,e){var r=vn;vn|=1;try{return t(e)}finally{vn=r,vn===0&&(My=Fi()+500,nk&&hf())}}function qp(t){jd!==null&&jd.tag===0&&!(vn&6)&&Kg();var e=vn;vn|=1;var r=Ml.transition,n=Vn;try{if(Ml.transition=null,Vn=1,t)return t()}finally{Vn=n,Ml.transition=r,vn=e,!(vn&6)&&hf()}}function Ez(){Va=Og.current,ci(Og)}function kp(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,pZ(r)),Zi!==null)for(r=Zi.return;r!==null;){var n=r;switch(hz(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&WS();break;case 3:Ey(),ci(va),ci(_o),bz();break;case 5:vz(n);break;case 4:Ey();break;case 13:ci(wi);break;case 19:ci(wi);break;case 10:mz(n.type._context);break;case 22:case 23:Ez()}r=r.return}if(Is=t,Zi=t=Fd(t.current,null),Js=Va=e,ds=0,ob=null,Pz=ak=Up=0,ca=vv=null,ap!==null){for(e=0;e<ap.length;e++)if(r=ap[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}ap=null}return t}function h8(t,e){do{var r=Zi;try{if(pz(),Qw.current=YS,ZS){for(var n=Ci.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ZS=!1}if(Wp=0,zs=cs=Ci=null,yv=!1,nb=0,Oz.current=null,r===null||r.return===null){ds=1,ob=e,Zi=null;break}e:{var s=t,a=r.return,o=r,d=e;if(e=Js,o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var m=d,y=o,b=y.tag;if(!(y.mode&1)&&(b===0||b===11||b===15)){var w=y.alternate;w?(y.updateQueue=w.updateQueue,y.memoizedState=w.memoizedState,y.lanes=w.lanes):(y.updateQueue=null,y.memoizedState=null)}var O=XR(a);if(O!==null){O.flags&=-257,KR(O,a,o,s,e),O.mode&1&&GR(s,m,e),e=O,d=m;var A=e.updateQueue;if(A===null){var E=new Set;E.add(d),e.updateQueue=E}else A.add(d);break e}else{if(!(e&1)){GR(s,m,e),zz();break e}d=Error(jt(426))}}else if(gi&&o.mode&1){var $=XR(a);if($!==null){!($.flags&65536)&&($.flags|=256),KR($,a,o,s,e),dz(zy(d,o));break e}}s=d=zy(d,o),ds!==4&&(ds=2),vv===null?vv=[s]:vv.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var R=GN(s,d,e);VR(s,R);break e;case 1:o=d;var F=s.type,L=s.stateNode;if(!(s.flags&128)&&(typeof F.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Rd===null||!Rd.has(L)))){s.flags|=65536,e&=-e,s.lanes|=e;var U=XN(s,o,e);VR(s,U);break e}}s=s.return}while(s!==null)}p8(r)}catch(Q){e=Q,Zi===r&&r!==null&&(Zi=r=r.return);continue}break}while(!0)}function d8(){var t=JS.current;return JS.current=YS,t===null?YS:t}function zz(){(ds===0||ds===3||ds===2)&&(ds=4),Is===null||!(Up&268435455)&&!(ak&268435455)||gd(Is,Js)}function r2(t,e){var r=vn;vn|=2;var n=d8();(Is!==t||Js!==e)&&(Vu=null,kp(t,e));do try{BZ();break}catch(i){h8(t,i)}while(!0);if(pz(),vn=r,JS.current=n,Zi!==null)throw Error(jt(261));return Is=null,Js=0,ds}function BZ(){for(;Zi!==null;)f8(Zi)}function $Z(){for(;Zi!==null&&!hK();)f8(Zi)}function f8(t){var e=g8(t.alternate,t,Va);t.memoizedProps=t.pendingProps,e===null?p8(t):Zi=e,Oz.current=null}function p8(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=MZ(r,e),r!==null){r.flags&=32767,Zi=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ds=6,Zi=null;return}}else if(r=zZ(r,e,Va),r!==null){Zi=r;return}if(e=e.sibling,e!==null){Zi=e;return}Zi=e=t}while(e!==null);ds===0&&(ds=5)}function Zf(t,e,r){var n=Vn,i=Ml.transition;try{Ml.transition=null,Vn=1,NZ(t,e,r,n)}finally{Ml.transition=i,Vn=n}return null}function NZ(t,e,r,n){do Kg();while(jd!==null);if(vn&6)throw Error(jt(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(jt(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(_K(t,s),t===Is&&(Zi=Is=null,Js=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||X_||(X_=!0,y8(LS,function(){return Kg(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Ml.transition,Ml.transition=null;var a=Vn;Vn=1;var o=vn;vn|=4,Oz.current=null,DZ(t,r),l8(r,t),aZ(lj),BS=!!aj,lj=aj=null,t.current=r,RZ(r),dK(),vn=o,Vn=a,Ml.transition=s}else t.current=r;if(X_&&(X_=!1,jd=t,t2=i),s=t.pendingLanes,s===0&&(Rd=null),mK(r.stateNode),_a(t,Fi()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(e2)throw e2=!1,t=Pj,Pj=null,t;return t2&1&&t.tag!==0&&Kg(),s=t.pendingLanes,s&1?t===jj?bv++:(bv=0,jj=t):bv=0,hf(),null}function Kg(){if(jd!==null){var t=G$(t2),e=Ml.transition,r=Vn;try{if(Ml.transition=null,Vn=16>t?16:t,jd===null)var n=!1;else{if(t=jd,jd=null,t2=0,vn&6)throw Error(jt(331));var i=vn;for(vn|=4,mr=t.current;mr!==null;){var s=mr,a=s.child;if(mr.flags&16){var o=s.deletions;if(o!==null){for(var d=0;d<o.length;d++){var m=o[d];for(mr=m;mr!==null;){var y=mr;switch(y.tag){case 0:case 11:case 15:xv(8,y,s)}var b=y.child;if(b!==null)b.return=y,mr=b;else for(;mr!==null;){y=mr;var w=y.sibling,O=y.return;if(s8(y),y===m){mr=null;break}if(w!==null){w.return=O,mr=w;break}mr=O}}}var A=s.alternate;if(A!==null){var E=A.child;if(E!==null){A.child=null;do{var $=E.sibling;E.sibling=null,E=$}while(E!==null)}}mr=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,mr=a;else e:for(;mr!==null;){if(s=mr,s.flags&2048)switch(s.tag){case 0:case 11:case 15:xv(9,s,s.return)}var R=s.sibling;if(R!==null){R.return=s.return,mr=R;break e}mr=s.return}}var F=t.current;for(mr=F;mr!==null;){a=mr;var L=a.child;if(a.subtreeFlags&2064&&L!==null)L.return=a,mr=L;else e:for(a=F;mr!==null;){if(o=mr,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ok(9,o)}}catch(Q){zi(o,o.return,Q)}if(o===a){mr=null;break e}var U=o.sibling;if(U!==null){U.return=o.return,mr=U;break e}mr=o.return}}if(vn=i,hf(),au&&typeof au.onPostCommitFiberRoot=="function")try{au.onPostCommitFiberRoot(Y2,t)}catch{}n=!0}return n}finally{Vn=r,Ml.transition=e}}return!1}function c3(t,e,r){e=zy(r,e),e=GN(t,e,1),t=Dd(t,e,1),e=Vo(),t!==null&&(r1(t,1,e),_a(t,e))}function zi(t,e,r){if(t.tag===3)c3(t,t,r);else for(;e!==null;){if(e.tag===3){c3(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Rd===null||!Rd.has(n))){t=zy(r,t),t=XN(e,t,1),e=Dd(e,t,1),t=Vo(),e!==null&&(r1(e,1,t),_a(e,t));break}}e=e.return}}function VZ(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Vo(),t.pingedLanes|=t.suspendedLanes&r,Is===t&&(Js&r)===r&&(ds===4||ds===3&&(Js&130023424)===Js&&500>Fi()-jz?kp(t,0):Pz|=r),_a(t,e)}function m8(t,e){e===0&&(t.mode&1?(e=B_,B_<<=1,!(B_&130023424)&&(B_=4194304)):e=1);var r=Vo();t=ph(t,e),t!==null&&(r1(t,e,r),_a(t,r))}function WZ(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),m8(t,r)}function UZ(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(jt(314))}n!==null&&n.delete(e),m8(t,r)}var g8;g8=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||va.current)ma=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return ma=!1,EZ(t,e,r);ma=!!(t.flags&131072)}else ma=!1,gi&&e.flags&1048576&&bN(e,QS,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Gw(t,e),t=e.pendingProps;var i=Py(e,_o.current);Xg(e,r),i=wz(null,e,n,t,i,r);var s=Sz();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ba(n)?(s=!0,US(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,yz(e),i.updater=sk,e.stateNode=i,i._reactInternals=e,yj(e,n,t,r),e=bj(null,e,n,!0,s,r)):(e.tag=0,gi&&s&&uz(e),Ro(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Gw(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=QZ(n),t=tc(n,t),i){case 0:e=vj(null,e,n,t,r);break e;case 1:e=JR(null,e,n,t,r);break e;case 11:e=ZR(null,e,n,t,r);break e;case 14:e=YR(null,e,n,tc(n.type,t),r);break e}throw Error(jt(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:tc(n,i),vj(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:tc(n,i),JR(t,e,n,i,r);case 3:e:{if(JN(e),t===null)throw Error(jt(387));n=e.pendingProps,s=e.memoizedState,i=s.element,TN(t,e),XS(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=zy(Error(jt(423)),e),e=e3(t,e,n,r,i);break e}else if(n!==i){i=zy(Error(jt(424)),e),e=e3(t,e,n,r,i);break e}else for(qa=Id(e.stateNode.containerInfo.firstChild),Ga=e,gi=!0,sc=null,r=kN(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(jy(),n===i){e=mh(t,e,r);break e}Ro(t,e,n,r)}e=e.child}return e;case 5:return ON(e),t===null&&pj(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,cj(n,i)?a=null:s!==null&&cj(n,s)&&(e.flags|=32),YN(t,e),Ro(t,e,a,r),e.child;case 6:return t===null&&pj(e),null;case 13:return e8(t,e,r);case 4:return xz(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ay(e,null,n,r):Ro(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:tc(n,i),ZR(t,e,n,i,r);case 7:return Ro(t,e,e.pendingProps,r),e.child;case 8:return Ro(t,e,e.pendingProps.children,r),e.child;case 12:return Ro(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,ri(HS,n._currentValue),n._currentValue=a,s!==null)if(fc(s.value,a)){if(s.children===i.children&&!va.current){e=mh(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var d=o.firstContext;d!==null;){if(d.context===n){if(s.tag===1){d=sh(-1,r&-r),d.tag=2;var m=s.updateQueue;if(m!==null){m=m.shared;var y=m.pending;y===null?d.next=d:(d.next=y.next,y.next=d),m.pending=d}}s.lanes|=r,d=s.alternate,d!==null&&(d.lanes|=r),mj(s.return,r,e),o.lanes|=r;break}d=d.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(jt(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),mj(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Ro(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Xg(e,r),i=Ll(i),n=n(i),e.flags|=1,Ro(t,e,n,r),e.child;case 14:return n=e.type,i=tc(n,e.pendingProps),i=tc(n.type,i),YR(t,e,n,i,r);case 15:return KN(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:tc(n,i),Gw(t,e),e.tag=1,ba(n)?(t=!0,US(e)):t=!1,Xg(e,r),HN(e,n,i),yj(e,n,i,r),bj(null,e,n,!0,t,r);case 19:return t8(t,e,r);case 22:return ZN(t,e,r)}throw Error(jt(156,e.tag))};function y8(t,e){return U$(t,e)}function qZ(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(t,e,r,n){return new qZ(t,e,r,n)}function Mz(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QZ(t){if(typeof t=="function")return Mz(t)?1:0;if(t!=null){if(t=t.$$typeof,t===YE)return 11;if(t===JE)return 14}return 2}function Fd(t,e){var r=t.alternate;return r===null?(r=Pl(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Zw(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")Mz(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case yg:return Cp(r.children,i,s,e);case ZE:a=8,i|=8;break;case NP:return t=Pl(12,r,e,i|2),t.elementType=NP,t.lanes=s,t;case VP:return t=Pl(13,r,e,i),t.elementType=VP,t.lanes=s,t;case WP:return t=Pl(19,r,e,i),t.elementType=WP,t.lanes=s,t;case O$:return lk(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C$:a=10;break e;case T$:a=9;break e;case YE:a=11;break e;case JE:a=14;break e;case cd:a=16,n=null;break e}throw Error(jt(130,t==null?t:typeof t,""))}return e=Pl(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function Cp(t,e,r,n){return t=Pl(7,t,n,e),t.lanes=r,t}function lk(t,e,r,n){return t=Pl(22,t,n,e),t.elementType=O$,t.lanes=r,t.stateNode={isHidden:!1},t}function ZT(t,e,r){return t=Pl(6,t,null,e),t.lanes=r,t}function YT(t,e,r){return e=Pl(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function HZ(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zT(0),this.expirationTimes=zT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zT(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Iz(t,e,r,n,i,s,a,o,d){return t=new HZ(t,e,r,o,d),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pl(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},yz(s),t}function GZ(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gg,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function x8(t){if(!t)return qd;t=t._reactInternals;e:{if(am(t)!==t||t.tag!==1)throw Error(jt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ba(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(jt(171))}if(t.tag===1){var r=t.type;if(ba(r))return xN(t,r,e)}return e}function v8(t,e,r,n,i,s,a,o,d){return t=Iz(r,n,!0,t,i,s,a,o,d),t.context=x8(null),r=t.current,n=Vo(),i=Ld(r),s=sh(n,i),s.callback=e??null,Dd(r,s,i),t.current.lanes=i,r1(t,i,n),_a(t,n),t}function ck(t,e,r,n){var i=e.current,s=Vo(),a=Ld(i);return r=x8(r),e.context===null?e.context=r:e.pendingContext=r,e=sh(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Dd(i,e,a),t!==null&&(hc(t,i,a,s),qw(t,i,a)),a}function n2(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function u3(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Dz(t,e){u3(t,e),(t=t.alternate)&&u3(t,e)}function XZ(){return null}var b8=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rz(t){this._internalRoot=t}uk.prototype.render=Rz.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(jt(409));ck(t,e,null,null)};uk.prototype.unmount=Rz.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qp(function(){ck(null,t,null,null)}),e[fh]=null}};function uk(t){this._internalRoot=t}uk.prototype.unstable_scheduleHydration=function(t){if(t){var e=Z$();t={blockedOn:null,target:t,priority:e};for(var r=0;r<md.length&&e!==0&&e<md[r].priority;r++);md.splice(r,0,t),r===0&&J$(t)}};function Lz(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function h3(){}function KZ(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var m=n2(a);s.call(m)}}var a=v8(e,n,t,0,null,!1,!1,"",h3);return t._reactRootContainer=a,t[fh]=a.current,Yv(t.nodeType===8?t.parentNode:t),qp(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var m=n2(d);o.call(m)}}var d=Iz(t,0,!1,null,null,!1,!1,"",h3);return t._reactRootContainer=d,t[fh]=d.current,Yv(t.nodeType===8?t.parentNode:t),qp(function(){ck(e,d,r,n)}),d}function dk(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var d=n2(a);o.call(d)}}ck(e,a,t,i)}else a=KZ(r,e,t,i,n);return n2(a)}X$=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Gx(e.pendingLanes);r!==0&&(rz(e,r|1),_a(e,Fi()),!(vn&6)&&(My=Fi()+500,hf()))}break;case 13:qp(function(){var n=ph(t,1);if(n!==null){var i=Vo();hc(n,t,1,i)}}),Dz(t,1)}};nz=function(t){if(t.tag===13){var e=ph(t,134217728);if(e!==null){var r=Vo();hc(e,t,134217728,r)}Dz(t,134217728)}};K$=function(t){if(t.tag===13){var e=Ld(t),r=ph(t,e);if(r!==null){var n=Vo();hc(r,t,e,n)}Dz(t,e)}};Z$=function(){return Vn};Y$=function(t,e){var r=Vn;try{return Vn=t,e()}finally{Vn=r}};JP=function(t,e,r){switch(e){case"input":if(QP(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=rk(n);if(!i)throw Error(jt(90));j$(n),QP(n,i)}}}break;case"textarea":E$(t,r);break;case"select":e=r.value,e!=null&&qg(t,!!r.multiple,e,!1)}};F$=Az;B$=qp;var ZZ={usingClientEntryPoint:!1,Events:[i1,_g,rk,R$,L$,Az]},jx={findFiberByHostInstance:op,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YZ={bundleType:jx.bundleType,version:jx.version,rendererPackageName:jx.rendererPackageName,rendererConfig:jx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wh.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=V$(t),t===null?null:t.stateNode},findFiberByHostInstance:jx.findFiberByHostInstance||XZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var K_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!K_.isDisabled&&K_.supportsFiber)try{Y2=K_.inject(YZ),au=K_}catch{}}tl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZZ;tl.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lz(e))throw Error(jt(200));return GZ(t,e,null,r)};tl.createRoot=function(t,e){if(!Lz(t))throw Error(jt(299));var r=!1,n="",i=b8;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Iz(t,1,!1,null,null,r,!1,n,i),t[fh]=e.current,Yv(t.nodeType===8?t.parentNode:t),new Rz(e)};tl.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(jt(188)):(t=Object.keys(t).join(","),Error(jt(268,t)));return t=V$(e),t=t===null?null:t.stateNode,t};tl.flushSync=function(t){return qp(t)};tl.hydrate=function(t,e,r){if(!hk(e))throw Error(jt(200));return dk(null,t,e,!0,r)};tl.hydrateRoot=function(t,e,r){if(!Lz(t))throw Error(jt(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=b8;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=v8(e,null,t,1,r??null,i,!1,s,a),t[fh]=e.current,Yv(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new uk(e)};tl.render=function(t,e,r){if(!hk(e))throw Error(jt(200));return dk(null,t,e,!1,r)};tl.unmountComponentAtNode=function(t){if(!hk(t))throw Error(jt(40));return t._reactRootContainer?(qp(function(){dk(null,null,t,!1,function(){t._reactRootContainer=null,t[fh]=null})}),!0):!1};tl.unstable_batchedUpdates=Az;tl.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!hk(r))throw Error(jt(200));if(t==null||t._reactInternals===void 0)throw Error(jt(38));return dk(t,e,r,!1,n)};tl.version="18.3.1-next-f1338f8080-20240426";function _8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_8)}catch(t){console.error(t)}}_8(),_$.exports=tl;var Fz=_$.exports,d3=Fz;BP.createRoot=d3.createRoot,BP.hydrateRoot=d3.hydrateRoot;function JZ(t,e,r,n){return t.addEventListener(e,r,n),()=>{t.removeEventListener(e,r,n)}}function fk(t){return t!=null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}function eY(){return!!(globalThis!=null&&globalThis.document)}function w8(t){return t.parentElement&&w8(t.parentElement)?!0:t.hidden}function tY(t){const e=t.getAttribute("contenteditable");return e!=="false"&&e!=null}function rY(t){return!!t.getAttribute("disabled")||!!t.getAttribute("aria-disabled")}function nY(t){var e;return((e=S8(t))==null?void 0:e.defaultView)??window}function S8(t){return fk(t)?t.ownerDocument:document}function iY(t){return t.view??window}function sY(t){return S8(t).activeElement}function oY(t){const e=iY(t);return typeof e.PointerEvent<"u"&&t instanceof e.PointerEvent?t.pointerType==="mouse":t instanceof e.MouseEvent}function k8(t){return!!t.touches}function aY(t){return k8(t)&&t.touches.length>1}function lY(t,e="page"){const r=t.touches[0]||t.changedTouches[0];return{x:r[`${e}X`],y:r[`${e}Y`]}}function cY(t,e="page"){return{x:t[`${e}X`],y:t[`${e}Y`]}}function C8(t,e="page"){return k8(t)?lY(t,e):cY(t,e)}function uY(t){return e=>{const r=oY(e);(!r||r&&e.button===0)&&t(e)}}function hY(t,e=!1){function r(i){t(i,{point:C8(i)})}return e?uY(r):r}function Yw(t,e,r,n){return JZ(t,e,hY(r,e==="pointerdown"),n)}function dY(t,...e){if(t==null)throw new TypeError("Cannot convert undefined or null to object");const r={...t};for(const n of e)if(n!=null)for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(i in r&&delete r[i],r[i]=n[i]);return r}const _r=t=>t?"":void 0,Il=t=>t?!0:void 0;function zj(t){return Array.isArray(t)}function eo(t){const e=typeof t;return t!=null&&(e==="object"||e==="function")&&!zj(t)}function fY(t){const e=t==null?0:t.length;return e?t[e-1]:void 0}function pY(t){const e=parseFloat(t.toString()),r=t.toString().replace(String(e),"");return{unitless:!r,value:e,unit:r}}function Mj(t){if(t==null)return t;const{unitless:e}=pY(t);return e||typeof t=="number"?`${t}px`:t}const T8=(t,e)=>parseInt(t[1],10)>parseInt(e[1],10)?1:-1,Bz=t=>Object.fromEntries(Object.entries(t).sort(T8));function f3(t){const e=Bz(t);return Object.assign(Object.values(e),e)}function mY(t){const e=Object.keys(Bz(t));return new Set(e)}function p3(t){if(!t)return t;t=Mj(t)??t;const e=-.02;return typeof t=="number"?`${t+e}`:t.replace(/(\d+\.?\d*)/u,r=>`${parseFloat(r)+e}`)}function Kx(t,e){const r=["@media screen"];return t&&r.push("and",`(min-width: ${Mj(t)})`),e&&r.push("and",`(max-width: ${Mj(e)})`),r.join(" ")}function gY(t){if(!t)return null;t.base=t.base??"0px";const e=f3(t),r=Object.entries(t).sort(T8).map(([s,a],o,d)=>{let[,m]=d[o+1]??[];return m=parseFloat(m)>0?p3(m):void 0,{_minW:p3(a),breakpoint:s,minW:a,maxW:m,maxWQuery:Kx(null,m),minWQuery:Kx(a),minMaxQuery:Kx(a,m)}}),n=mY(t),i=Array.from(n.values());return{keys:n,normalized:e,isResponsive(s){const a=Object.keys(s);return a.length>0&&a.every(o=>n.has(o))},asObject:Bz(t),asArray:f3(t),details:r,get(s){return r.find(a=>a.breakpoint===s)},media:[null,...e.map(s=>Kx(s)).slice(1)],toArrayValue(s){if(!eo(s))throw new Error("toArrayValue: value must be an object");const a=i.map(o=>s[o]??null);for(;fY(a)===null;)a.pop();return a},toObjectValue(s){if(!Array.isArray(s))throw new Error("toObjectValue: value must be an array");return s.reduce((a,o,d)=>{const m=i[d];return m!=null&&o!=null&&(a[m]=o),a},{})}}}function $z(...t){return function(...r){t.forEach(n=>n==null?void 0:n(...r))}}function kr(...t){return function(r){t.some(n=>(n==null||n(r),r==null?void 0:r.defaultPrevented))}}function pk(t){return I.Children.toArray(t).filter(e=>I.isValidElement(e))}function mk(t){const e=Object.assign({},t);for(let r in e)e[r]===void 0&&delete e[r];return e}function yY(t,e){return`${t} returned \`undefined\`. Seems you forgot to wrap component within ${e}`}function _n(t={}){const{name:e,strict:r=!0,hookName:n="useContext",providerName:i="Provider",errorMessage:s,defaultValue:a}=t,o=I.createContext(a);o.displayName=e;function d(){var y;const m=I.useContext(o);if(!m&&r){const b=new Error(s??yY(n,i));throw b.name="ContextError",(y=Error.captureStackTrace)==null||y.call(Error,b,d),b}return m}return[o.Provider,d,o]}const sr=(...t)=>t.filter(Boolean).join(" "),O8=t=>t.hasAttribute("tabindex"),xY=t=>O8(t)&&t.tabIndex===-1;function P8(t){if(!fk(t)||w8(t)||rY(t))return!1;const{localName:e}=t;if(["input","select","textarea","button"].indexOf(e)>=0)return!0;const n={a:()=>t.hasAttribute("href"),audio:()=>t.hasAttribute("controls"),video:()=>t.hasAttribute("controls")};return e in n?n[e]():tY(t)?!0:O8(t)}function vY(t){return t?fk(t)&&P8(t)&&!xY(t):!1}const bY=["input:not(:disabled):not([disabled])","select:not(:disabled):not([disabled])","textarea:not(:disabled):not([disabled])","embed","iframe","object","a[href]","area[href]","button:not(:disabled):not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"],_Y=bY.join(),wY=t=>t.offsetWidth>0&&t.offsetHeight>0;function SY(t){const e=Array.from(t.querySelectorAll(_Y));return e.unshift(t),e.filter(r=>P8(r)&&wY(r))}function kY(t,e,r,n){const i=typeof e=="string"?e.split("."):[e];for(n=0;n<i.length&&t;n+=1)t=t[i[n]];return t===void 0?r:t}const CY=t=>{const e=new WeakMap;return(n,i,s,a)=>{if(typeof n>"u")return t(n,i,s);e.has(n)||e.set(n,new Map);const o=e.get(n);if(o.has(i))return o.get(i);const d=t(n,i,s,a);return o.set(i,d),d}},j8=CY(kY),TY=t=>t.default||t;function A8(t){const{wasSelected:e,enabled:r,isSelected:n,mode:i="unmount"}=t;return!!(!r||n||i==="keepMounted"&&e)}function OY(t){const e=parseFloat(t);return typeof e!="number"||Number.isNaN(e)?0:e}function Nz(t,e){let r=OY(t);const n=10**(e??10);return r=Math.round(r*n)/n,e?r.toFixed(e):r.toString()}function Ij(t){if(!Number.isFinite(t))return 0;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r+=1;return r}function m3(t,e,r){return(t-e)*100/(r-e)}function PY(t,e,r){return(r-e)*t+e}function g3(t,e,r){const n=Math.round((t-e)/r)*r+e,i=Ij(r);return Nz(n,i)}function Jw(t,e,r){return t==null?t:(r<e&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(t,e),r))}function gk(t,e=[]){const r=Object.assign({},t);for(const n of e)n in r&&delete r[n];return r}function E8(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function Vz(t,e){return Array.isArray(t)?t.map(r=>r===null?null:e(r)):eo(t)?Object.keys(t).reduce((r,n)=>(r[n]=e(t[n]),r),{}):t!=null?e(t):null}const jY=t=>typeof t=="function";function Qa(t,...e){return jY(t)?t(...e):t}function AY(t){const e=t.ownerDocument.defaultView||window,{overflow:r,overflowX:n,overflowY:i}=e.getComputedStyle(t);return/auto|scroll|overlay|hidden/.test(r+i+n)}function EY(t){return t.localName==="html"?t:t.assignedSlot||t.parentElement||t.ownerDocument.documentElement}function z8(t){return["html","body","#document"].includes(t.localName)?t.ownerDocument.body:fk(t)&&AY(t)?t:z8(EY(t))}function M8(t,e){const r={},n={};for(const[i,s]of Object.entries(t))e.includes(i)?r[i]=s:n[i]=s;return[r,n]}function zY(t,...e){const r=Object.getOwnPropertyDescriptors(t),n=Object.keys(r),i=a=>{const o={};for(let d=0;d<a.length;d++){const m=a[d];r[m]&&(Object.defineProperty(o,m,r[m]),delete r[m])}return o},s=a=>i(Array.isArray(a)?a:n.filter(a));return e.map(s).concat(i(n))}function y3(t,e,r={}){const{stop:n,getKey:i}=r;function s(a,o=[]){if(eo(a)||Array.isArray(a)){const d={};for(const[m,y]of Object.entries(a)){const b=(i==null?void 0:i(m))??m,w=[...o,b];if(n!=null&&n(a,w))return e(a,o);d[b]=s(y,w)}return d}return e(a,o)}return s(t)}const o1=t=>{const{condition:e,message:r}=t};var i2={exports:{}};i2.exports;(function(t,e){var r=200,n="__lodash_hash_undefined__",i=800,s=16,a=9007199254740991,o="[object Arguments]",d="[object Array]",m="[object AsyncFunction]",y="[object Boolean]",b="[object Date]",w="[object Error]",O="[object Function]",A="[object GeneratorFunction]",E="[object Map]",$="[object Number]",R="[object Null]",F="[object Object]",L="[object Proxy]",U="[object RegExp]",Q="[object Set]",Y="[object String]",Z="[object Undefined]",J="[object WeakMap]",re="[object ArrayBuffer]",he="[object DataView]",le="[object Float32Array]",Ze="[object Float64Array]",Ee="[object Int8Array]",qe="[object Int16Array]",et="[object Int32Array]",at="[object Uint8Array]",Be="[object Uint8ClampedArray]",Me="[object Uint16Array]",Ge="[object Uint32Array]",Le=/[\\^$.*+?()[\]{}|]/g,Ie=/^\[object .+?Constructor\]$/,Oe=/^(?:0|[1-9]\d*)$/,Re={};Re[le]=Re[Ze]=Re[Ee]=Re[qe]=Re[et]=Re[at]=Re[Be]=Re[Me]=Re[Ge]=!0,Re[o]=Re[d]=Re[re]=Re[y]=Re[he]=Re[b]=Re[w]=Re[O]=Re[E]=Re[$]=Re[F]=Re[U]=Re[Q]=Re[Y]=Re[J]=!1;var nt=typeof qx=="object"&&qx&&qx.Object===Object&&qx,ze=typeof self=="object"&&self&&self.Object===Object&&self,rt=nt||ze||Function("return this")(),Xe=e&&!e.nodeType&&e,_t=Xe&&!0&&t&&!t.nodeType&&t,Mt=_t&&_t.exports===Xe,Et=Mt&&nt.process,yt=function(){try{var ge=_t&&_t.require&&_t.require("util").types;return ge||Et&&Et.binding&&Et.binding("util")}catch{}}(),Je=yt&&yt.isTypedArray;function Kt(ge,$e,ot){switch(ot.length){case 0:return ge.call($e);case 1:return ge.call($e,ot[0]);case 2:return ge.call($e,ot[0],ot[1]);case 3:return ge.call($e,ot[0],ot[1],ot[2])}return ge.apply($e,ot)}function vt(ge,$e){for(var ot=-1,Zt=Array(ge);++ot<ge;)Zt[ot]=$e(ot);return Zt}function st(ge){return function($e){return ge($e)}}function Te(ge,$e){return ge==null?void 0:ge[$e]}function lt(ge,$e){return function(ot){return ge($e(ot))}}var Nt=Array.prototype,Tt=Function.prototype,Vt=Object.prototype,tn=rt["__core-js_shared__"],hn=Tt.toString,on=Vt.hasOwnProperty,kn=function(){var ge=/[^.]+$/.exec(tn&&tn.keys&&tn.keys.IE_PROTO||"");return ge?"Symbol(src)_1."+ge:""}(),yn=Vt.toString,ui=hn.call(Object),Oi=RegExp("^"+hn.call(on).replace(Le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qe=Mt?rt.Buffer:void 0,Br=rt.Symbol,kt=rt.Uint8Array;Qe&&Qe.allocUnsafe;var Wt=lt(Object.getPrototypeOf,Object),wn=Object.create,xt=Vt.propertyIsEnumerable,yr=Nt.splice,Jt=Br?Br.toStringTag:void 0,Zn=function(){try{var ge=kc(Object,"defineProperty");return ge({},"",{}),ge}catch{}}(),vi=Qe?Qe.isBuffer:void 0,pr=Math.max,Ii=Date.now,xs=kc(rt,"Map"),Di=kc(Object,"create"),is=function(){function ge(){}return function($e){if(!ll($e))return{};if(wn)return wn($e);ge.prototype=$e;var ot=new ge;return ge.prototype=void 0,ot}}();function me(ge){var $e=-1,ot=ge==null?0:ge.length;for(this.clear();++$e<ot;){var Zt=ge[$e];this.set(Zt[0],Zt[1])}}function W(){this.__data__=Di?Di(null):{},this.size=0}function H(ge){var $e=this.has(ge)&&delete this.__data__[ge];return this.size-=$e?1:0,$e}function ee(ge){var $e=this.__data__;if(Di){var ot=$e[ge];return ot===n?void 0:ot}return on.call($e,ge)?$e[ge]:void 0}function de(ge){var $e=this.__data__;return Di?$e[ge]!==void 0:on.call($e,ge)}function ve(ge,$e){var ot=this.__data__;return this.size+=this.has(ge)?0:1,ot[ge]=Di&&$e===void 0?n:$e,this}me.prototype.clear=W,me.prototype.delete=H,me.prototype.get=ee,me.prototype.has=de,me.prototype.set=ve;function Se(ge){var $e=-1,ot=ge==null?0:ge.length;for(this.clear();++$e<ot;){var Zt=ge[$e];this.set(Zt[0],Zt[1])}}function Fe(){this.__data__=[],this.size=0}function be(ge){var $e=this.__data__,ot=ja($e,ge);if(ot<0)return!1;var Zt=$e.length-1;return ot==Zt?$e.pop():yr.call($e,ot,1),--this.size,!0}function tt(ge){var $e=this.__data__,ot=ja($e,ge);return ot<0?void 0:$e[ot][1]}function ht(ge){return ja(this.__data__,ge)>-1}function xe(ge,$e){var ot=this.__data__,Zt=ja(ot,ge);return Zt<0?(++this.size,ot.push([ge,$e])):ot[Zt][1]=$e,this}Se.prototype.clear=Fe,Se.prototype.delete=be,Se.prototype.get=tt,Se.prototype.has=ht,Se.prototype.set=xe;function ct(ge){var $e=-1,ot=ge==null?0:ge.length;for(this.clear();++$e<ot;){var Zt=ge[$e];this.set(Zt[0],Zt[1])}}function Rt(){this.size=0,this.__data__={hash:new me,map:new(xs||Se),string:new me}}function rr(ge){var $e=kh(this,ge).delete(ge);return this.size-=$e?1:0,$e}function Nr(ge){return kh(this,ge).get(ge)}function Mr(ge){return kh(this,ge).has(ge)}function Kr(ge,$e){var ot=kh(this,ge),Zt=ot.size;return ot.set(ge,$e),this.size+=ot.size==Zt?0:1,this}ct.prototype.clear=Rt,ct.prototype.delete=rr,ct.prototype.get=Nr,ct.prototype.has=Mr,ct.prototype.set=Kr;function Dr(ge){var $e=this.__data__=new Se(ge);this.size=$e.size}function hi(){this.__data__=new Se,this.size=0}function Yn(ge){var $e=this.__data__,ot=$e.delete(ge);return this.size=$e.size,ot}function Rr(ge){return this.__data__.get(ge)}function mn(ge){return this.__data__.has(ge)}function Fn(ge,$e){var ot=this.__data__;if(ot instanceof Se){var Zt=ot.__data__;if(!xs||Zt.length<r-1)return Zt.push([ge,$e]),this.size=++ot.size,this;ot=this.__data__=new ct(Zt)}return ot.set(ge,$e),this.size=ot.size,this}Dr.prototype.clear=hi,Dr.prototype.delete=Yn,Dr.prototype.get=Rr,Dr.prototype.has=mn,Dr.prototype.set=Fn;function Pi(ge,$e){var ot=Ql(ge),Zt=!ot&&Aa(ge),Yr=!ot&&!Zt&&ku(ge),xn=!ot&&!Zt&&!Yr&&_f(ge),gn=ot||Zt||Yr||xn,Ur=gn?vt(ge.length,String):[],xr=Ur.length;for(var ws in ge)gn&&(ws=="length"||Yr&&(ws=="offset"||ws=="parent")||xn&&(ws=="buffer"||ws=="byteLength"||ws=="byteOffset")||Zr(ws,xr))||Ur.push(ws);return Ur}function bi(ge,$e,ot){(ot!==void 0&&!Ph(ge[$e],ot)||ot===void 0&&!($e in ge))&&an(ge,$e,ot)}function ss(ge,$e,ot){var Zt=ge[$e];(!(on.call(ge,$e)&&Ph(Zt,ot))||ot===void 0&&!($e in ge))&&an(ge,$e,ot)}function ja(ge,$e){for(var ot=ge.length;ot--;)if(Ph(ge[ot][0],$e))return ot;return-1}function an(ge,$e,ot){$e=="__proto__"&&Zn?Zn(ge,$e,{configurable:!0,enumerable:!0,value:ot,writable:!0}):ge[$e]=ot}var yf=Oo();function wc(ge){return ge==null?ge===void 0?Z:R:Jt&&Jt in Object(ge)?ql(ge):Su(ge)}function vs(ge){return Xo(ge)&&wc(ge)==o}function $s(ge){if(!ll(ge)||Cc(ge))return!1;var $e=Tc(ge)?Oi:Ie;return $e.test(pm(ge))}function b0(ge){return Xo(ge)&&Cu(ge.length)&&!!Re[wc(ge)]}function oo(ge){if(!ll(ge))return Th(ge);var $e=Ch(ge),ot=[];for(var Zt in ge)Zt=="constructor"&&($e||!on.call(ge,Zt))||ot.push(Zt);return ot}function bs(ge,$e,ot,Zt,Yr){ge!==$e&&yf($e,function(xn,gn){if(Yr||(Yr=new Dr),ll(xn))Sc(ge,$e,gn,ot,bs,Zt,Yr);else{var Ur=Zt?Zt(al(ge,gn),xn,gn+"",ge,$e,Yr):void 0;Ur===void 0&&(Ur=xn),bi(ge,gn,Ur)}},gm)}function Sc(ge,$e,ot,Zt,Yr,xn,gn){var Ur=al(ge,ot),xr=al($e,ot),ws=gn.get(xr);if(ws){bi(ge,ot,ws);return}var Ns=xn?xn(Ur,xr,ot+"",ge,$e,gn):void 0,Ko=Ns===void 0;if(Ko){var Sf=Ql(xr),jh=!Sf&&ku(xr),xm=!Sf&&!jh&&_f(xr);Ns=xr,Sf||jh||xm?Ql(Ur)?Ns=Ur:_s(Ur)?Ns=Sh(Ur):jh?(Ko=!1,Ns=wu(xr)):xm?(Ko=!1,Ns=si(xr)):Ns=[]:w0(xr)||Aa(xr)?(Ns=Ur,Aa(Ur)?Ns=mm(Ur):(!ll(Ur)||Tc(Ur))&&(Ns=ol(xr))):Ko=!1}Ko&&(gn.set(xr,Ns),Yr(Ns,xr,Zt,xn,gn),gn.delete(xr)),bi(ge,ot,Ns)}function Ul(ge,$e){return fm(Oh(ge,$e,Oc),ge+"")}var di=Zn?function(ge,$e){return Zn(ge,"toString",{configurable:!0,enumerable:!1,value:ym($e),writable:!0})}:Oc;function wu(ge,$e){return ge.slice()}function Co(ge){var $e=new ge.constructor(ge.byteLength);return new kt($e).set(new kt(ge)),$e}function si(ge,$e){var ot=Co(ge.buffer);return new ge.constructor(ot,ge.byteOffset,ge.length)}function Sh(ge,$e){var ot=-1,Zt=ge.length;for($e||($e=Array(Zt));++ot<Zt;)$e[ot]=ge[ot];return $e}function To(ge,$e,ot,Zt){var Yr=!ot;ot||(ot={});for(var xn=-1,gn=$e.length;++xn<gn;){var Ur=$e[xn],xr=void 0;xr===void 0&&(xr=ge[Ur]),Yr?an(ot,Ur,xr):ss(ot,Ur,xr)}return ot}function xf(ge){return Ul(function($e,ot){var Zt=-1,Yr=ot.length,xn=Yr>1?ot[Yr-1]:void 0,gn=Yr>2?ot[2]:void 0;for(xn=ge.length>3&&typeof xn=="function"?(Yr--,xn):void 0,gn&&vf(ot[0],ot[1],gn)&&(xn=Yr<3?void 0:xn,Yr=1),$e=Object($e);++Zt<Yr;){var Ur=ot[Zt];Ur&&ge($e,Ur,Zt,xn)}return $e})}function Oo(ge){return function($e,ot,Zt){for(var Yr=-1,xn=Object($e),gn=Zt($e),Ur=gn.length;Ur--;){var xr=gn[++Yr];if(ot(xn[xr],xr,xn)===!1)break}return $e}}function kh(ge,$e){var ot=ge.__data__;return bf($e)?ot[typeof $e=="string"?"string":"hash"]:ot.map}function kc(ge,$e){var ot=Te(ge,$e);return $s(ot)?ot:void 0}function ql(ge){var $e=on.call(ge,Jt),ot=ge[Jt];try{ge[Jt]=void 0;var Zt=!0}catch{}var Yr=yn.call(ge);return Zt&&($e?ge[Jt]=ot:delete ge[Jt]),Yr}function ol(ge){return typeof ge.constructor=="function"&&!Ch(ge)?is(Wt(ge)):{}}function Zr(ge,$e){var ot=typeof ge;return $e=$e??a,!!$e&&(ot=="number"||ot!="symbol"&&Oe.test(ge))&&ge>-1&&ge%1==0&&ge<$e}function vf(ge,$e,ot){if(!ll(ot))return!1;var Zt=typeof $e;return(Zt=="number"?qi(ot)&&Zr($e,ot.length):Zt=="string"&&$e in ot)?Ph(ot[$e],ge):!1}function bf(ge){var $e=typeof ge;return $e=="string"||$e=="number"||$e=="symbol"||$e=="boolean"?ge!=="__proto__":ge===null}function Cc(ge){return!!kn&&kn in ge}function Ch(ge){var $e=ge&&ge.constructor,ot=typeof $e=="function"&&$e.prototype||Vt;return ge===ot}function Th(ge){var $e=[];if(ge!=null)for(var ot in Object(ge))$e.push(ot);return $e}function Su(ge){return yn.call(ge)}function Oh(ge,$e,ot){return $e=pr($e===void 0?ge.length-1:$e,0),function(){for(var Zt=arguments,Yr=-1,xn=pr(Zt.length-$e,0),gn=Array(xn);++Yr<xn;)gn[Yr]=Zt[$e+Yr];Yr=-1;for(var Ur=Array($e+1);++Yr<$e;)Ur[Yr]=Zt[Yr];return Ur[$e]=ot(gn),Kt(ge,this,Ur)}}function al(ge,$e){if(!($e==="constructor"&&typeof ge[$e]=="function")&&$e!="__proto__")return ge[$e]}var fm=_0(di);function _0(ge){var $e=0,ot=0;return function(){var Zt=Ii(),Yr=s-(Zt-ot);if(ot=Zt,Yr>0){if(++$e>=i)return arguments[0]}else $e=0;return ge.apply(void 0,arguments)}}function pm(ge){if(ge!=null){try{return hn.call(ge)}catch{}try{return ge+""}catch{}}return""}function Ph(ge,$e){return ge===$e||ge!==ge&&$e!==$e}var Aa=vs(function(){return arguments}())?vs:function(ge){return Xo(ge)&&on.call(ge,"callee")&&!xt.call(ge,"callee")},Ql=Array.isArray;function qi(ge){return ge!=null&&Cu(ge.length)&&!Tc(ge)}function _s(ge){return Xo(ge)&&qi(ge)}var ku=vi||wf;function Tc(ge){if(!ll(ge))return!1;var $e=wc(ge);return $e==O||$e==A||$e==m||$e==L}function Cu(ge){return typeof ge=="number"&&ge>-1&&ge%1==0&&ge<=a}function ll(ge){var $e=typeof ge;return ge!=null&&($e=="object"||$e=="function")}function Xo(ge){return ge!=null&&typeof ge=="object"}function w0(ge){if(!Xo(ge)||wc(ge)!=F)return!1;var $e=Wt(ge);if($e===null)return!0;var ot=on.call($e,"constructor")&&$e.constructor;return typeof ot=="function"&&ot instanceof ot&&hn.call(ot)==ui}var _f=Je?st(Je):b0;function mm(ge){return To(ge,gm(ge))}function gm(ge){return qi(ge)?Pi(ge):oo(ge)}var S0=xf(function(ge,$e,ot,Zt){bs(ge,$e,ot,Zt)});function ym(ge){return function(){return ge}}function Oc(ge){return ge}function wf(){return!1}t.exports=S0})(i2,i2.exports);var MY=i2.exports;const jl=e1(MY);function Bi(t,e=[]){const r=I.useRef(t);return I.useEffect(()=>{r.current=t}),I.useCallback((...n)=>{var i;return(i=r.current)==null?void 0:i.call(r,...n)},e)}function _v(t,e,r,n){const i=Bi(r);return I.useEffect(()=>{const s=typeof t=="function"?t():t??document;if(!(!r||!s))return s.addEventListener(e,i,n),()=>{s.removeEventListener(e,i,n)}},[e,t,n,i,r]),()=>{const s=typeof t=="function"?t():t??document;s==null||s.removeEventListener(e,i,n)}}function IY(t){const{isOpen:e,ref:r}=t,[n,i]=I.useState(e),[s,a]=I.useState(!1);return I.useEffect(()=>{s||(i(e),a(!0))},[e,s,n]),_v(()=>r.current,"animationend",()=>{i(e)}),{present:!(e?!1:!n),onComplete(){var y;const d=nY(r.current),m=new d.CustomEvent("animationend",{bubbles:!0});(y=r.current)==null||y.dispatchEvent(m)}}}function Wz(t){const{value:e,defaultValue:r,onChange:n,shouldUpdate:i=(w,O)=>w!==O}=t,s=Bi(n),a=Bi(i),[o,d]=I.useState(r),m=e!==void 0,y=m?e:o,b=Bi(w=>{const A=typeof w=="function"?w(y):w;a(y,A)&&(m||d(A),s(A))},[m,s,y,a]);return[y,b]}function DY(t={}){const{onChange:e,precision:r,defaultValue:n,value:i,step:s=1,min:a=Number.MIN_SAFE_INTEGER,max:o=Number.MAX_SAFE_INTEGER,keepWithinRange:d=!0}=t,m=Bi(e),[y,b]=I.useState(()=>n==null?"":JT(n,s,r)??""),w=typeof i<"u",O=w?i:y,A=I8(od(O),s),E=r??A,$=I.useCallback(he=>{he!==O&&(w||b(he.toString()),m==null||m(he.toString(),od(he)))},[m,w,O]),R=I.useCallback(he=>{let le=he;return d&&(le=Jw(le,a,o)),Nz(le,E)},[E,d,o,a]),F=I.useCallback((he=s)=>{let le;O===""?le=od(he):le=od(O)+he,le=R(le),$(le)},[R,s,$,O]),L=I.useCallback((he=s)=>{let le;O===""?le=od(-he):le=od(O)-he,le=R(le),$(le)},[R,s,$,O]),U=I.useCallback(()=>{let he;n==null?he="":he=JT(n,s,r)??a,$(he)},[n,r,s,$,a]),Q=I.useCallback(he=>{const le=JT(he,s,E)??a;$(le)},[E,s,$,a]),Y=od(O);return{isOutOfRange:Y>o||Y<a,isAtMax:Y===o,isAtMin:Y===a,precision:E,value:O,valueAsNumber:Y,update:$,reset:U,increment:F,decrement:L,clamp:R,cast:Q,setValue:b}}function od(t){return parseFloat(t.toString().replace(/[^\w.-]+/g,""))}function I8(t,e){return Math.max(Ij(e),Ij(t))}function JT(t,e,r){const n=od(t);if(Number.isNaN(n))return;const i=I8(n,e);return Nz(n,r??i)}function Qp(t={}){const{onClose:e,onOpen:r,isOpen:n,id:i}=t,s=Bi(r),a=Bi(e),[o,d]=I.useState(t.defaultIsOpen||!1),m=n!==void 0?n:o,y=n!==void 0,b=I.useId(),w=i??`disclosure-${b}`,O=I.useCallback(()=>{y||d(!1),a==null||a()},[y,a]),A=I.useCallback(()=>{y||d(!0),s==null||s()},[y,s]),E=I.useCallback(()=>{m?O():A()},[m,A,O]);function $(F={}){return{...F,"aria-expanded":m,"aria-controls":w,onClick(L){var U;(U=F.onClick)==null||U.call(F,L),E()}}}function R(F={}){return{...F,hidden:!m,id:w}}return{isOpen:m,onOpen:A,onClose:O,onToggle:E,isControlled:y,getButtonProps:$,getDisclosureProps:R}}const Tp=globalThis!=null&&globalThis.document?I.useLayoutEffect:I.useEffect,Qd=(t,e)=>{const r=I.useRef(!1),n=I.useRef(!1);I.useEffect(()=>{if(r.current&&n.current)return t();n.current=!0},e),I.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[])};function RY(t){const e=t.current;if(!e)return!1;const r=sY(e);return!r||e.contains(r)?!1:!!vY(r)}function LY(t,e){const{visible:r,focusRef:n}=e,i=!r;Qd(()=>{if(!i||RY(t))return;const s=(n==null?void 0:n.current)||t.current;let a;if(s)return a=requestAnimationFrame(()=>{s.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(a)}},[i,t,n])}function FY(t,e){const r=I.useId();return I.useMemo(()=>t||[e,r].filter(Boolean).join("-"),[t,e,r])}function BY(t,...e){const r=FY(t);return I.useMemo(()=>e.map(n=>`${n}-${r}`),[r,e])}function $Y(t,e){const r=Bi(t);I.useEffect(()=>{let n=null;const i=()=>r();return e!==null&&(n=window.setInterval(i,e)),()=>{n&&window.clearInterval(n)}},[e,r])}function D8(t){const e=I.useRef(null);return e.current=t,e}function NY(t,e){if(t!=null){if(typeof t=="function"){t(e);return}try{t.current=e}catch{throw new Error(`Cannot assign value '${e}' to ref '${t}'`)}}}function xi(...t){return e=>{t.forEach(r=>{NY(r,e)})}}function VY(...t){return I.useMemo(()=>xi(...t),t)}function WY(t){const{ref:e,handler:r,enabled:n=!0}=t,i=Bi(r),a=I.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;I.useEffect(()=>{if(!n)return;const o=b=>{eO(b,e)&&(a.isPointerDown=!0)},d=b=>{if(a.ignoreEmulatedMouseEvents){a.ignoreEmulatedMouseEvents=!1;return}a.isPointerDown&&r&&eO(b,e)&&(a.isPointerDown=!1,i(b))},m=b=>{a.ignoreEmulatedMouseEvents=!0,r&&a.isPointerDown&&eO(b,e)&&(a.isPointerDown=!1,i(b))},y=R8(e.current);return y.addEventListener("mousedown",o,!0),y.addEventListener("mouseup",d,!0),y.addEventListener("touchstart",o,!0),y.addEventListener("touchend",m,!0),()=>{y.removeEventListener("mousedown",o,!0),y.removeEventListener("mouseup",d,!0),y.removeEventListener("touchstart",o,!0),y.removeEventListener("touchend",m,!0)}},[r,e,i,a,n])}function eO(t,e){var n,i;const r=((n=t.composedPath)==null?void 0:n.call(t)[0])??t.target;return r&&!R8(r).contains(r)?!1:!((i=e.current)!=null&&i.contains(r))}function R8(t){return(t==null?void 0:t.ownerDocument)??document}function UY(t,e){const r=Bi(t);I.useEffect(()=>{if(e==null)return;let n=null;return n=window.setTimeout(()=>{r()},e),()=>{n&&window.clearTimeout(n)}},[e,r])}const L8=1/60*1e3,qY=typeof performance<"u"?()=>performance.now():()=>Date.now(),F8=typeof window<"u"?t=>window.requestAnimationFrame(t):t=>setTimeout(()=>t(qY()),L8);function QY(t){let e=[],r=[],n=0,i=!1,s=!1;const a=new WeakSet,o={schedule:(d,m=!1,y=!1)=>{const b=y&&i,w=b?e:r;return m&&a.add(d),w.indexOf(d)===-1&&(w.push(d),b&&i&&(n=e.length)),d},cancel:d=>{const m=r.indexOf(d);m!==-1&&r.splice(m,1),a.delete(d)},process:d=>{if(i){s=!0;return}if(i=!0,[e,r]=[r,e],r.length=0,n=e.length,n)for(let m=0;m<n;m++){const y=e[m];y(d),a.has(y)&&(o.schedule(y),t())}i=!1,s&&(s=!1,o.process(d))}};return o}const HY=40;let Dj=!0,ab=!1,Rj=!1;const Zg={delta:0,timestamp:0},a1=["read","update","preRender","render","postRender"],yk=a1.reduce((t,e)=>(t[e]=QY(()=>ab=!0),t),{}),GY=a1.reduce((t,e)=>{const r=yk[e];return t[e]=(n,i=!1,s=!1)=>(ab||ZY(),r.schedule(n,i,s)),t},{}),XY=a1.reduce((t,e)=>(t[e]=yk[e].cancel,t),{});a1.reduce((t,e)=>(t[e]=()=>yk[e].process(Zg),t),{});const KY=t=>yk[t].process(Zg),B8=t=>{ab=!1,Zg.delta=Dj?L8:Math.max(Math.min(t-Zg.timestamp,HY),1),Zg.timestamp=t,Rj=!0,a1.forEach(KY),Rj=!1,ab&&(Dj=!1,F8(B8))},ZY=()=>{ab=!0,Dj=!0,Rj||F8(B8)},x3=()=>Zg;var YY=Object.defineProperty,JY=(t,e,r)=>e in t?YY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Jl=(t,e,r)=>(JY(t,typeof e!="symbol"?e+"":e,r),r);class eJ{constructor(e,r,n){if(Jl(this,"history",[]),Jl(this,"startEvent",null),Jl(this,"lastEvent",null),Jl(this,"lastEventInfo",null),Jl(this,"handlers",{}),Jl(this,"removeListeners",()=>{}),Jl(this,"threshold",3),Jl(this,"win"),Jl(this,"updatePoint",()=>{if(!(this.lastEvent&&this.lastEventInfo))return;const o=tO(this.lastEventInfo,this.history),d=this.startEvent!==null,m=iJ(o.offset,{x:0,y:0})>=this.threshold;if(!d&&!m)return;const{timestamp:y}=x3();this.history.push({...o.point,timestamp:y});const{onStart:b,onMove:w}=this.handlers;d||(b==null||b(this.lastEvent,o),this.startEvent=this.lastEvent),w==null||w(this.lastEvent,o)}),Jl(this,"onPointerMove",(o,d)=>{this.lastEvent=o,this.lastEventInfo=d,GY.update(this.updatePoint,!0)}),Jl(this,"onPointerUp",(o,d)=>{const m=tO(d,this.history),{onEnd:y,onSessionEnd:b}=this.handlers;b==null||b(o,m),this.end(),!(!y||!this.startEvent)&&(y==null||y(o,m))}),this.win=e.view??window,aY(e))return;this.handlers=r,n&&(this.threshold=n),e.stopPropagation(),e.preventDefault();const i={point:C8(e)},{timestamp:s}=x3();this.history=[{...i.point,timestamp:s}];const{onSessionStart:a}=r;a==null||a(e,tO(i,this.history)),this.removeListeners=nJ(Yw(this.win,"pointermove",this.onPointerMove),Yw(this.win,"pointerup",this.onPointerUp),Yw(this.win,"pointercancel",this.onPointerUp))}updateHandlers(e){this.handlers=e}end(){var e;(e=this.removeListeners)==null||e.call(this),XY.update(this.updatePoint)}}function v3(t,e){return{x:t.x-e.x,y:t.y-e.y}}function tO(t,e){return{point:t.point,delta:v3(t.point,e[e.length-1]),offset:v3(t.point,e[0]),velocity:rJ(e,.1)}}const tJ=t=>t*1e3;function rJ(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const i=t[t.length-1];for(;r>=0&&(n=t[r],!(i.timestamp-n.timestamp>tJ(e)));)r--;if(!n)return{x:0,y:0};const s=(i.timestamp-n.timestamp)/1e3;if(s===0)return{x:0,y:0};const a={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function nJ(...t){return e=>t.reduce((r,n)=>n(r),e)}function rO(t,e){return Math.abs(t-e)}function b3(t){return"x"in t&&"y"in t}function iJ(t,e){if(typeof t=="number"&&typeof e=="number")return rO(t,e);if(b3(t)&&b3(e)){const r=rO(t.x,e.x),n=rO(t.y,e.y);return Math.sqrt(r**2+n**2)}return 0}function sJ(t,e){const{onPan:r,onPanStart:n,onPanEnd:i,onPanSessionStart:s,onPanSessionEnd:a,threshold:o}=e,d=!!(r||n||i||s||a),m=I.useRef(null),y=D8({onSessionStart:s,onSessionEnd:a,onStart:n,onMove:r,onEnd(b,w){m.current=null,i==null||i(b,w)}});I.useEffect(()=>{var b;(b=m.current)==null||b.updateHandlers(y.current)}),I.useEffect(()=>{const b=t.current;if(!b||!d)return;function w(O){m.current=new eJ(O,y.current,o)}return Yw(b,"pointerdown",w)},[t,d,y,o]),I.useEffect(()=>()=>{var b;(b=m.current)==null||b.end(),m.current=null},[])}const ls={open:(t,e)=>`${t}[data-open], ${t}[open], ${t}[data-state=open] ${e}`,closed:(t,e)=>`${t}[data-closed], ${t}[data-state=closed] ${e}`,hover:(t,e)=>`${t}:hover ${e}, ${t}[data-hover] ${e}`,focus:(t,e)=>`${t}:focus ${e}, ${t}[data-focus] ${e}`,focusVisible:(t,e)=>`${t}:focus-visible ${e}`,focusWithin:(t,e)=>`${t}:focus-within ${e}`,active:(t,e)=>`${t}:active ${e}, ${t}[data-active] ${e}`,disabled:(t,e)=>`${t}:disabled ${e}, ${t}[data-disabled] ${e}`,invalid:(t,e)=>`${t}:invalid ${e}, ${t}[data-invalid] ${e}`,checked:(t,e)=>`${t}:checked ${e}, ${t}[data-checked] ${e}`,placeholderShown:(t,e)=>`${t}:placeholder-shown ${e}`},Dc=t=>$8(e=>t(e,"&"),"[role=group]","[data-group]",".group"),Bu=t=>$8(e=>t(e,"~ &"),"[data-peer]",".peer"),$8=(t,...e)=>e.map(t).join(", "),Yg={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within, &[data-focus-within]",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty, &[data-empty]",_expanded:"&[aria-expanded=true], &[data-expanded], &[data-state=expanded]",_checked:"&[aria-checked=true], &[data-checked], &[data-state=checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate], &[data-state=indeterminate]",_groupOpen:Dc(ls.open),_groupClosed:Dc(ls.closed),_groupHover:Dc(ls.hover),_peerHover:Bu(ls.hover),_groupFocus:Dc(ls.focus),_peerFocus:Bu(ls.focus),_groupFocusVisible:Dc(ls.focusVisible),_peerFocusVisible:Bu(ls.focusVisible),_groupActive:Dc(ls.active),_peerActive:Bu(ls.active),_groupDisabled:Dc(ls.disabled),_peerDisabled:Bu(ls.disabled),_groupInvalid:Dc(ls.invalid),_peerInvalid:Bu(ls.invalid),_groupChecked:Dc(ls.checked),_peerChecked:Bu(ls.checked),_groupFocusWithin:Dc(ls.focusWithin),_peerFocusWithin:Bu(ls.focusWithin),_peerPlaceholderShown:Bu(ls.placeholderShown),_placeholder:"&::placeholder, &[data-placeholder]",_placeholderShown:"&:placeholder-shown, &[data-placeholder-shown]",_fullScreen:"&:fullscreen, &[data-fullscreen]",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]",_open:"&[data-open], &[open], &[data-state=open]",_closed:"&[data-closed], &[data-state=closed]",_complete:"&[data-complete]",_incomplete:"&[data-incomplete]",_current:"&[data-current]"},N8=Object.keys(Yg),oJ=t=>/!(important)?$/.test(t),_3=t=>typeof t=="string"?t.replace(/!(important)?$/,"").trim():t,aJ=(t,e)=>r=>{const n=String(e),i=oJ(n),s=_3(n),a=t?`${t}.${s}`:s;let o=eo(r.__cssMap)&&a in r.__cssMap?r.__cssMap[a].varRef:e;return o=_3(o),i?`${o} !important`:o};function Uz(t){const{scale:e,transform:r,compose:n}=t;return(s,a)=>{const o=aJ(e,s)(a);let d=(r==null?void 0:r(o,a))??o;return n&&(d=n(d,a)),d}}const Z_=(...t)=>e=>t.reduce((r,n)=>n(r),e);function pl(t,e){return r=>{const n={property:r,scale:t};return n.transform=Uz({scale:t,transform:e}),n}}const lJ=({rtl:t,ltr:e})=>r=>r.direction==="rtl"?t:e;function cJ(t){const{property:e,scale:r,transform:n}=t;return{scale:r,property:lJ(e),transform:r?Uz({scale:r,compose:n}):n}}const V8=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function uJ(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...V8].join(" ")}function hJ(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...V8].join(" ")}const dJ={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},fJ={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function pJ(t){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":t,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}const mJ={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},Lj={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},gJ=new Set(Object.values(Lj)),Fj=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),yJ=t=>t.trim();function xJ(t,e){if(t==null||Fj.has(t))return t;if(!(Bj(t)||Fj.has(t)))return`url('${t}')`;const i=/(^[a-z-A-Z]+)\((.*)\)/g.exec(t),s=i==null?void 0:i[1],a=i==null?void 0:i[2];if(!s||!a)return t;const o=s.includes("-gradient")?s:`${s}-gradient`,[d,...m]=a.split(",").map(yJ).filter(Boolean);if((m==null?void 0:m.length)===0)return t;const y=d in Lj?Lj[d]:d;m.unshift(y);const b=m.map(w=>{if(gJ.has(w))return w;const O=w.indexOf(" "),[A,E]=O!==-1?[w.substr(0,O),w.substr(O+1)]:[w],$=Bj(E)?E:E&&E.split(" "),R=`colors.${A}`,F=R in e.__cssMap?e.__cssMap[R].varRef:A;return $?[F,...Array.isArray($)?$:[$]].join(" "):F});return`${o}(${b.join(", ")})`}const Bj=t=>typeof t=="string"&&t.includes("(")&&t.includes(")"),vJ=(t,e)=>xJ(t,e??{});function bJ(t){return/^var\(--.+\)$/.test(t)}const _J=t=>{const e=parseFloat(t.toString()),r=t.toString().replace(String(e),"");return{unitless:!r,value:e,unit:r}},Rc=t=>e=>`${t}(${e})`,fn={filter(t){return t!=="auto"?t:dJ},backdropFilter(t){return t!=="auto"?t:fJ},ring(t){return pJ(fn.px(t))},bgClip(t){return t==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:t}},transform(t){return t==="auto"?uJ():t==="auto-gpu"?hJ():t},vh(t){return t==="$100vh"?"var(--chakra-vh)":t},px(t){if(t==null)return t;const{unitless:e}=_J(t);return e||typeof t=="number"?`${t}px`:t},fraction(t){return typeof t!="number"||t>1?t:`${t*100}%`},float(t,e){const r={left:"right",right:"left"};return e.direction==="rtl"?r[t]:t},degree(t){if(bJ(t)||t==null)return t;const e=typeof t=="string"&&!t.endsWith("deg");return typeof t=="number"||e?`${t}deg`:t},gradient:vJ,blur:Rc("blur"),opacity:Rc("opacity"),brightness:Rc("brightness"),contrast:Rc("contrast"),dropShadow:Rc("drop-shadow"),grayscale:Rc("grayscale"),hueRotate:t=>Rc("hue-rotate")(fn.degree(t)),invert:Rc("invert"),saturate:Rc("saturate"),sepia:Rc("sepia"),bgImage(t){return t==null||Bj(t)||Fj.has(t)?t:`url(${t})`},outline(t){const e=String(t)==="0"||String(t)==="none";return t!==null&&e?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:t}},flexDirection(t){const{space:e,divide:r}=mJ[t]??{},n={flexDirection:t};return e&&(n[e]=1),r&&(n[r]=1),n}},We={borderWidths:pl("borderWidths"),borderStyles:pl("borderStyles"),colors:pl("colors"),borders:pl("borders"),gradients:pl("gradients",fn.gradient),radii:pl("radii",fn.px),space:pl("space",Z_(fn.vh,fn.px)),spaceT:pl("space",Z_(fn.vh,fn.px)),degreeT(t){return{property:t,transform:fn.degree}},prop(t,e,r){return{property:t,scale:e,...e&&{transform:Uz({scale:e,transform:r})}}},propT(t,e){return{property:t,transform:e}},sizes:pl("sizes",Z_(fn.vh,fn.px)),sizesT:pl("sizes",Z_(fn.vh,fn.fraction)),shadows:pl("shadows"),logical:cJ,blur:pl("blur",fn.blur)},eS={background:We.colors("background"),backgroundColor:We.colors("backgroundColor"),backgroundImage:We.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:fn.bgClip},bgSize:We.prop("backgroundSize"),bgPosition:We.prop("backgroundPosition"),bg:We.colors("background"),bgColor:We.colors("backgroundColor"),bgPos:We.prop("backgroundPosition"),bgRepeat:We.prop("backgroundRepeat"),bgAttachment:We.prop("backgroundAttachment"),bgGradient:We.gradients("backgroundImage"),bgClip:{transform:fn.bgClip}};Object.assign(eS,{bgImage:eS.backgroundImage,bgImg:eS.backgroundImage});const Pn={border:We.borders("border"),borderWidth:We.borderWidths("borderWidth"),borderStyle:We.borderStyles("borderStyle"),borderColor:We.colors("borderColor"),borderRadius:We.radii("borderRadius"),borderTop:We.borders("borderTop"),borderBlockStart:We.borders("borderBlockStart"),borderTopLeftRadius:We.radii("borderTopLeftRadius"),borderStartStartRadius:We.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:We.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:We.radii("borderTopRightRadius"),borderStartEndRadius:We.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:We.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:We.borders("borderRight"),borderInlineEnd:We.borders("borderInlineEnd"),borderBottom:We.borders("borderBottom"),borderBlockEnd:We.borders("borderBlockEnd"),borderBottomLeftRadius:We.radii("borderBottomLeftRadius"),borderBottomRightRadius:We.radii("borderBottomRightRadius"),borderLeft:We.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:We.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:We.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:We.borders(["borderLeft","borderRight"]),borderInline:We.borders("borderInline"),borderY:We.borders(["borderTop","borderBottom"]),borderBlock:We.borders("borderBlock"),borderTopWidth:We.borderWidths("borderTopWidth"),borderBlockStartWidth:We.borderWidths("borderBlockStartWidth"),borderTopColor:We.colors("borderTopColor"),borderBlockStartColor:We.colors("borderBlockStartColor"),borderTopStyle:We.borderStyles("borderTopStyle"),borderBlockStartStyle:We.borderStyles("borderBlockStartStyle"),borderBottomWidth:We.borderWidths("borderBottomWidth"),borderBlockEndWidth:We.borderWidths("borderBlockEndWidth"),borderBottomColor:We.colors("borderBottomColor"),borderBlockEndColor:We.colors("borderBlockEndColor"),borderBottomStyle:We.borderStyles("borderBottomStyle"),borderBlockEndStyle:We.borderStyles("borderBlockEndStyle"),borderLeftWidth:We.borderWidths("borderLeftWidth"),borderInlineStartWidth:We.borderWidths("borderInlineStartWidth"),borderLeftColor:We.colors("borderLeftColor"),borderInlineStartColor:We.colors("borderInlineStartColor"),borderLeftStyle:We.borderStyles("borderLeftStyle"),borderInlineStartStyle:We.borderStyles("borderInlineStartStyle"),borderRightWidth:We.borderWidths("borderRightWidth"),borderInlineEndWidth:We.borderWidths("borderInlineEndWidth"),borderRightColor:We.colors("borderRightColor"),borderInlineEndColor:We.colors("borderInlineEndColor"),borderRightStyle:We.borderStyles("borderRightStyle"),borderInlineEndStyle:We.borderStyles("borderInlineEndStyle"),borderTopRadius:We.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:We.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:We.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:We.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(Pn,{rounded:Pn.borderRadius,roundedTop:Pn.borderTopRadius,roundedTopLeft:Pn.borderTopLeftRadius,roundedTopRight:Pn.borderTopRightRadius,roundedTopStart:Pn.borderStartStartRadius,roundedTopEnd:Pn.borderStartEndRadius,roundedBottom:Pn.borderBottomRadius,roundedBottomLeft:Pn.borderBottomLeftRadius,roundedBottomRight:Pn.borderBottomRightRadius,roundedBottomStart:Pn.borderEndStartRadius,roundedBottomEnd:Pn.borderEndEndRadius,roundedLeft:Pn.borderLeftRadius,roundedRight:Pn.borderRightRadius,roundedStart:Pn.borderInlineStartRadius,roundedEnd:Pn.borderInlineEndRadius,borderStart:Pn.borderInlineStart,borderEnd:Pn.borderInlineEnd,borderTopStartRadius:Pn.borderStartStartRadius,borderTopEndRadius:Pn.borderStartEndRadius,borderBottomStartRadius:Pn.borderEndStartRadius,borderBottomEndRadius:Pn.borderEndEndRadius,borderStartRadius:Pn.borderInlineStartRadius,borderEndRadius:Pn.borderInlineEndRadius,borderStartWidth:Pn.borderInlineStartWidth,borderEndWidth:Pn.borderInlineEndWidth,borderStartColor:Pn.borderInlineStartColor,borderEndColor:Pn.borderInlineEndColor,borderStartStyle:Pn.borderInlineStartStyle,borderEndStyle:Pn.borderInlineEndStyle});const wJ={color:We.colors("color"),textColor:We.colors("color"),fill:We.colors("fill"),stroke:We.colors("stroke"),accentColor:We.colors("accentColor"),textFillColor:We.colors("textFillColor")},s2={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:fn.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:We.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:We.space("gap"),rowGap:We.space("rowGap"),columnGap:We.space("columnGap")};Object.assign(s2,{flexDir:s2.flexDirection});const gl={width:We.sizesT("width"),inlineSize:We.sizesT("inlineSize"),height:We.sizes("height"),blockSize:We.sizes("blockSize"),boxSize:We.sizes(["width","height"]),minWidth:We.sizes("minWidth"),minInlineSize:We.sizes("minInlineSize"),minHeight:We.sizes("minHeight"),minBlockSize:We.sizes("minBlockSize"),maxWidth:We.sizes("maxWidth"),maxInlineSize:We.sizes("maxInlineSize"),maxHeight:We.sizes("maxHeight"),maxBlockSize:We.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(t,e)=>{var i,s;return{[`@media screen and (min-width: ${((s=(i=e.__breakpoints)==null?void 0:i.get(t))==null?void 0:s.minW)??t})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(t,e)=>{var i,s;return{[`@media screen and (max-width: ${((s=(i=e.__breakpoints)==null?void 0:i.get(t))==null?void 0:s._minW)??t})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:We.propT("float",fn.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(gl,{w:gl.width,h:gl.height,minW:gl.minWidth,maxW:gl.maxWidth,minH:gl.minHeight,maxH:gl.maxHeight,overscroll:gl.overscrollBehavior,overscrollX:gl.overscrollBehaviorX,overscrollY:gl.overscrollBehaviorY});const SJ={filter:{transform:fn.filter},blur:We.blur("--chakra-blur"),brightness:We.propT("--chakra-brightness",fn.brightness),contrast:We.propT("--chakra-contrast",fn.contrast),hueRotate:We.propT("--chakra-hue-rotate",fn.hueRotate),invert:We.propT("--chakra-invert",fn.invert),saturate:We.propT("--chakra-saturate",fn.saturate),dropShadow:We.propT("--chakra-drop-shadow",fn.dropShadow),backdropFilter:{transform:fn.backdropFilter},backdropBlur:We.blur("--chakra-backdrop-blur"),backdropBrightness:We.propT("--chakra-backdrop-brightness",fn.brightness),backdropContrast:We.propT("--chakra-backdrop-contrast",fn.contrast),backdropHueRotate:We.propT("--chakra-backdrop-hue-rotate",fn.hueRotate),backdropInvert:We.propT("--chakra-backdrop-invert",fn.invert),backdropSaturate:We.propT("--chakra-backdrop-saturate",fn.saturate)},kJ={ring:{transform:fn.ring},ringColor:We.colors("--chakra-ring-color"),ringOffset:We.prop("--chakra-ring-offset-width"),ringOffsetColor:We.colors("--chakra-ring-offset-color"),ringInset:We.prop("--chakra-ring-inset")},CJ={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:fn.outline},outlineOffset:!0,outlineColor:We.colors("outlineColor")},W8={gridGap:We.space("gridGap"),gridColumnGap:We.space("gridColumnGap"),gridRowGap:We.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0};function TJ(t,e,r,n){const i=typeof e=="string"?e.split("."):[e];for(n=0;n<i.length&&t;n+=1)t=t[i[n]];return t===void 0?r:t}const OJ=t=>{const e=new WeakMap;return(n,i,s,a)=>{if(typeof n>"u")return t(n,i,s);e.has(n)||e.set(n,new Map);const o=e.get(n);if(o.has(i))return o.get(i);const d=t(n,i,s,a);return o.set(i,d),d}},PJ=OJ(TJ),jJ={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},AJ={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},nO=(t,e,r)=>{const n={},i=PJ(t,e,{});for(const s in i)s in r&&r[s]!=null||(n[s]=i[s]);return n},EJ={srOnly:{transform(t){return t===!0?jJ:t==="focusable"?AJ:{}}},layerStyle:{processResult:!0,transform:(t,e,r)=>nO(e,`layerStyles.${t}`,r)},textStyle:{processResult:!0,transform:(t,e,r)=>nO(e,`textStyles.${t}`,r)},apply:{processResult:!0,transform:(t,e,r)=>nO(e,t,r)}},wv={position:!0,pos:We.prop("position"),zIndex:We.prop("zIndex","zIndices"),inset:We.spaceT("inset"),insetX:We.spaceT(["left","right"]),insetInline:We.spaceT("insetInline"),insetY:We.spaceT(["top","bottom"]),insetBlock:We.spaceT("insetBlock"),top:We.spaceT("top"),insetBlockStart:We.spaceT("insetBlockStart"),bottom:We.spaceT("bottom"),insetBlockEnd:We.spaceT("insetBlockEnd"),left:We.spaceT("left"),insetInlineStart:We.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:We.spaceT("right"),insetInlineEnd:We.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(wv,{insetStart:wv.insetInlineStart,insetEnd:wv.insetInlineEnd});const $j={boxShadow:We.shadows("boxShadow"),mixBlendMode:!0,blendMode:We.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:We.prop("backgroundBlendMode"),opacity:!0};Object.assign($j,{shadow:$j.boxShadow});const li={margin:We.spaceT("margin"),marginTop:We.spaceT("marginTop"),marginBlockStart:We.spaceT("marginBlockStart"),marginRight:We.spaceT("marginRight"),marginInlineEnd:We.spaceT("marginInlineEnd"),marginBottom:We.spaceT("marginBottom"),marginBlockEnd:We.spaceT("marginBlockEnd"),marginLeft:We.spaceT("marginLeft"),marginInlineStart:We.spaceT("marginInlineStart"),marginX:We.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:We.spaceT("marginInline"),marginY:We.spaceT(["marginTop","marginBottom"]),marginBlock:We.spaceT("marginBlock"),padding:We.space("padding"),paddingTop:We.space("paddingTop"),paddingBlockStart:We.space("paddingBlockStart"),paddingRight:We.space("paddingRight"),paddingBottom:We.space("paddingBottom"),paddingBlockEnd:We.space("paddingBlockEnd"),paddingLeft:We.space("paddingLeft"),paddingInlineStart:We.space("paddingInlineStart"),paddingInlineEnd:We.space("paddingInlineEnd"),paddingX:We.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:We.space("paddingInline"),paddingY:We.space(["paddingTop","paddingBottom"]),paddingBlock:We.space("paddingBlock")};Object.assign(li,{m:li.margin,mt:li.marginTop,mr:li.marginRight,me:li.marginInlineEnd,marginEnd:li.marginInlineEnd,mb:li.marginBottom,ml:li.marginLeft,ms:li.marginInlineStart,marginStart:li.marginInlineStart,mx:li.marginX,my:li.marginY,p:li.padding,pt:li.paddingTop,py:li.paddingY,px:li.paddingX,pb:li.paddingBottom,pl:li.paddingLeft,ps:li.paddingInlineStart,paddingStart:li.paddingInlineStart,pr:li.paddingRight,pe:li.paddingInlineEnd,paddingEnd:li.paddingInlineEnd});const zJ={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:We.spaceT("scrollMargin"),scrollMarginTop:We.spaceT("scrollMarginTop"),scrollMarginBottom:We.spaceT("scrollMarginBottom"),scrollMarginLeft:We.spaceT("scrollMarginLeft"),scrollMarginRight:We.spaceT("scrollMarginRight"),scrollMarginX:We.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:We.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:We.spaceT("scrollPadding"),scrollPaddingTop:We.spaceT("scrollPaddingTop"),scrollPaddingBottom:We.spaceT("scrollPaddingBottom"),scrollPaddingLeft:We.spaceT("scrollPaddingLeft"),scrollPaddingRight:We.spaceT("scrollPaddingRight"),scrollPaddingX:We.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:We.spaceT(["scrollPaddingTop","scrollPaddingBottom"])},MJ={fontFamily:We.prop("fontFamily","fonts"),fontSize:We.prop("fontSize","fontSizes",fn.px),fontWeight:We.prop("fontWeight","fontWeights"),lineHeight:We.prop("lineHeight","lineHeights"),letterSpacing:We.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(t){if(t===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},IJ={textDecorationColor:We.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:We.shadows("textShadow")},DJ={clipPath:!0,transform:We.propT("transform",fn.transform),transformOrigin:!0,translateX:We.spaceT("--chakra-translate-x"),translateY:We.spaceT("--chakra-translate-y"),skewX:We.degreeT("--chakra-skew-x"),skewY:We.degreeT("--chakra-skew-y"),scaleX:We.prop("--chakra-scale-x"),scaleY:We.prop("--chakra-scale-y"),scale:We.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:We.degreeT("--chakra-rotate")},RJ={listStyleType:!0,listStylePosition:!0,listStylePos:We.prop("listStylePosition"),listStyleImage:!0,listStyleImg:We.prop("listStyleImage")},LJ={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:We.prop("transitionDuration","transition.duration"),transitionProperty:We.prop("transitionProperty","transition.property"),transitionTimingFunction:We.prop("transitionTimingFunction","transition.easing")},qz=jl({},eS,Pn,wJ,s2,gl,SJ,kJ,CJ,W8,EJ,wv,$j,li,zJ,MJ,IJ,DJ,RJ,LJ),FJ=Object.assign({},li,gl,s2,W8,wv),U8=Object.keys(FJ),BJ=[...Object.keys(qz),...N8],$J={...qz,...Yg},NJ=t=>t in $J,VJ=t=>e=>{if(!e.__breakpoints)return t;const{isResponsive:r,toArrayValue:n,media:i}=e.__breakpoints,s={};for(const a in t){let o=Qa(t[a],e);if(o==null)continue;if(o=eo(o)&&r(o)?n(o):o,!Array.isArray(o)){s[a]=o;continue}const d=o.slice(0,i.length).length;for(let m=0;m<d;m+=1){const y=i==null?void 0:i[m];if(!y){s[a]=o[m];continue}s[y]=s[y]||{},o[m]!=null&&(s[y][a]=o[m])}}return s};function WJ(t){const e=[];let r="",n=!1;for(let i=0;i<t.length;i++){const s=t[i];s==="("?(n=!0,r+=s):s===")"?(n=!1,r+=s):s===","&&!n?(e.push(r),r=""):r+=s}return r=r.trim(),r&&e.push(r),e}function UJ(t){return/^var\(--.+\)$/.test(t)}const qJ=(t,e)=>t.startsWith("--")&&typeof e=="string"&&!UJ(e),QJ=(t,e)=>{if(e==null)return e;const r=a=>{var o,d;return(d=(o=t.__cssMap)==null?void 0:o[a])==null?void 0:d.varRef},n=a=>r(a)??a,[i,s]=WJ(e);return e=r(i)??n(s)??n(e),e};function HJ(t){const{configs:e={},pseudos:r={},theme:n}=t,i=(s,a=!1)=>{var y;const o=Qa(s,n),d=VJ(o)(n);let m={};for(let b in d){const w=d[b];let O=Qa(w,n);b in r&&(b=r[b]),qJ(b,O)&&(O=QJ(n,O));let A=e[b];if(A===!0&&(A={property:b}),eo(O)){m[b]=m[b]??{},m[b]=jl({},m[b],i(O,!0));continue}let E=((y=A==null?void 0:A.transform)==null?void 0:y.call(A,O,n,o))??O;E=A!=null&&A.processResult?i(E,!0):E;const $=Qa(A==null?void 0:A.property,n);if(!a&&(A!=null&&A.static)){const R=Qa(A.static,n);m=jl({},m,R)}if($&&Array.isArray($)){for(const R of $)m[R]=E;continue}if($){$==="&"&&eo(E)?m=jl({},m,E):m[$]=E;continue}if(eo(E)){m=jl({},m,E);continue}m[b]=E}return m};return i}const q8=t=>e=>HJ({theme:e,pseudos:Yg,configs:qz})(t);function ii(t){return{definePartsStyle(e){return e},defineMultiStyleConfig(e){return{parts:t,...e}}}}function GJ(t,e,r){var n,i;return((i=(n=t.__cssMap)==null?void 0:n[`${e}.${r}`])==null?void 0:i.varRef)??r}function XJ(t,e){if(Array.isArray(t))return t;if(eo(t))return e(t);if(t!=null)return[t]}function KJ(t,e){for(let r=e+1;r<t.length;r++)if(t[r]!=null)return r;return-1}function ZJ(t){const e=t.__breakpoints;return function(n,i,s,a){var w,O;if(!e)return;const o={},d=XJ(s,e.toArrayValue);if(!d)return o;const m=d.length,y=m===1,b=!!n.parts;for(let A=0;A<m;A++){const E=e.details[A],$=e.details[KJ(d,A)],R=Kx(E.minW,$==null?void 0:$._minW),F=Qa((w=n[i])==null?void 0:w[d[A]],a);if(F){if(b){(O=n.parts)==null||O.forEach(L=>{jl(o,{[L]:y?F[L]:{[R]:F[L]}})});continue}if(!b){y?jl(o,F):o[R]=F;continue}o[R]=F}}return o}}function YJ(t){return e=>{const{variant:r,size:n,theme:i}=e,s=ZJ(i);return jl({},Qa(t.baseStyle??{},e),s(t,"sizes",n,e),s(t,"variants",r,e))}}function Mn(t){return gk(t,["styleConfig","size","variant","colorScheme"])}function Q8(t){return eo(t)&&t.reference?t.reference:String(t)}const xk=(t,...e)=>e.map(Q8).join(` ${t} `).replace(/calc/g,""),w3=(...t)=>`calc(${xk("+",...t)})`,S3=(...t)=>`calc(${xk("-",...t)})`,Nj=(...t)=>`calc(${xk("*",...t)})`,k3=(...t)=>`calc(${xk("/",...t)})`,C3=t=>{const e=Q8(t);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:Nj(e,-1)},Xu=Object.assign(t=>({add:(...e)=>Xu(w3(t,...e)),subtract:(...e)=>Xu(S3(t,...e)),multiply:(...e)=>Xu(Nj(t,...e)),divide:(...e)=>Xu(k3(t,...e)),negate:()=>Xu(C3(t)),toString:()=>t.toString()}),{add:w3,subtract:S3,multiply:Nj,divide:k3,negate:C3});function JJ(t,e="-"){return t.replace(/\s+/g,e)}function eee(t){const e=JJ(t.toString());return ree(tee(e))}function tee(t){return t.includes("\\.")?t:!Number.isInteger(parseFloat(t.toString()))?t.replace(".","\\."):t}function ree(t){return t.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function nee(t,e=""){return[e,t].filter(Boolean).join("-")}function iee(t,e){return`var(${t}${e?`, ${e}`:""})`}function see(t,e=""){return eee(`--${nee(t,e)}`)}function zr(t,e,r){const n=see(t,r);return{variable:n,reference:iee(n,e)}}function oee(t,e){const r={};for(const n of e){if(Array.isArray(n)){const[i,s]=n;r[i]=zr(`${t}-${i}`,s);continue}r[n]=zr(`${t}-${n}`)}return r}const aee=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function lee(t){return E8(t,aee)}function cee(t){return t.semanticTokens}function uee(t){const{__cssMap:e,__cssVars:r,__breakpoints:n,...i}=t;return i}function hee(t){const e=lee(t),r=cee(t),n=s=>N8.includes(s)||s==="default",i={};return y3(e,(s,a)=>{s!=null&&(i[a.join(".")]={isSemantic:!1,value:s})}),y3(r,(s,a)=>{s!=null&&(i[a.join(".")]={isSemantic:!0,value:s})},{stop:s=>Object.keys(s).every(n)}),i}function T3(t,e){return zr(String(t).replace(/\./g,"-"),void 0,e)}function dee(t){var a;const e=hee(t),r=(a=t.config)==null?void 0:a.cssVarPrefix;let n={};const i={};function s(o,d){const y=[String(o).split(".")[0],d].join(".");if(!e[y])return d;const{reference:w}=T3(y,r);return w}for(const[o,d]of Object.entries(e)){const{isSemantic:m,value:y}=d,{variable:b,reference:w}=T3(o,r);if(!m){if(o.startsWith("space")){const A=o.split("."),[E,...$]=A,R=`${E}.-${$.join(".")}`,F=Xu.negate(y),L=Xu.negate(w);i[R]={value:F,var:b,varRef:L}}n[b]=y,i[o]={value:y,var:b,varRef:w};continue}const O=eo(y)?y:{default:y};n=jl(n,Object.entries(O).reduce((A,[E,$])=>{if(!$)return A;const R=s(o,`${$}`);if(E==="default")return A[b]=R,A;const F=(Yg==null?void 0:Yg[E])??E;return A[F]={[b]:R},A},{})),i[o]={value:w,var:b,varRef:w}}return{cssVars:n,cssMap:i}}function fee(t){const e=uee(t),{cssMap:r,cssVars:n}=dee(e);return Object.assign(e,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...n},__cssMap:r,__breakpoints:gY(e.breakpoints)}),e}function zn(t,e={}){let r=!1;function n(){if(!r){r=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function i(...y){n();for(const b of y)e[b]=d(b);return zn(t,e)}function s(...y){for(const b of y)b in e||(e[b]=d(b));return zn(t,e)}function a(){return Object.fromEntries(Object.entries(e).map(([b,w])=>[b,w.selector]))}function o(){return Object.fromEntries(Object.entries(e).map(([b,w])=>[b,w.className]))}function d(y){const O=`chakra-${(["container","root"].includes(y??"")?[t]:[t,y]).filter(Boolean).join("__")}`;return{className:O,selector:`.${O}`,toString:()=>y}}return{parts:i,toPart:d,extend:s,selectors:a,classnames:o,get keys(){return Object.keys(e)},__type:{}}}const pee=zn("accordion").parts("root","container","button","panel","icon"),mee=zn("alert").parts("title","description","container","icon","spinner"),gee=zn("avatar").parts("label","badge","container","excessLabel","group"),yee=zn("breadcrumb").parts("link","item","container","separator");zn("button").parts();const xee=zn("checkbox").parts("control","icon","container","label");zn("progress").parts("track","filledTrack","label");const vee=zn("drawer").parts("overlay","dialogContainer","dialog","header","closeButton","body","footer"),bee=zn("editable").parts("preview","input","textarea"),_ee=zn("form").parts("container","requiredIndicator","helperText"),wee=zn("formError").parts("text","icon"),See=zn("input").parts("addon","field","element","group"),kee=zn("list").parts("container","item","icon"),Cee=zn("menu").parts("button","list","item","groupTitle","icon","command","divider"),Tee=zn("modal").parts("overlay","dialogContainer","dialog","header","closeButton","body","footer"),Oee=zn("numberinput").parts("root","field","stepperGroup","stepper");zn("pininput").parts("field");const Pee=zn("popover").parts("content","header","body","footer","popper","arrow","closeButton"),jee=zn("progress").parts("label","filledTrack","track"),Aee=zn("radio").parts("container","control","label"),Eee=zn("select").parts("field","icon"),zee=zn("slider").parts("container","track","thumb","filledTrack","mark"),Mee=zn("stat").parts("container","label","helpText","number","icon"),Iee=zn("switch").parts("container","track","thumb","label"),Dee=zn("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),Ree=zn("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),Lee=zn("tag").parts("container","label","closeButton"),Fee=zn("card").parts("container","header","body","footer");zn("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");const{definePartsStyle:Bee,defineMultiStyleConfig:$ee}=ii(pee.keys),Nee={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},Vee={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},Wee={pt:"2",px:"4",pb:"5"},Uee={fontSize:"1.25em"},qee=Bee({container:Nee,button:Vee,panel:Wee,icon:Uee}),Qee=$ee({baseStyle:qee});function cp(t,e,r){return Math.min(Math.max(t,r),e)}class Hee extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}}var Zx=Hee;function Qz(t){if(typeof t!="string")throw new Zx(t);if(t.trim().toLowerCase()==="transparent")return[0,0,0,0];let e=t.trim();e=tte.test(t)?Kee(t):t;const r=Zee.exec(e);if(r){const a=Array.from(r).slice(1);return[...a.slice(0,3).map(o=>parseInt(lb(o,2),16)),parseInt(lb(a[3]||"f",2),16)/255]}const n=Yee.exec(e);if(n){const a=Array.from(n).slice(1);return[...a.slice(0,3).map(o=>parseInt(o,16)),parseInt(a[3]||"ff",16)/255]}const i=Jee.exec(e);if(i){const a=Array.from(i).slice(1);return[...a.slice(0,3).map(o=>parseInt(o,10)),parseFloat(a[3]||"1")]}const s=ete.exec(e);if(s){const[a,o,d,m]=Array.from(s).slice(1).map(parseFloat);if(cp(0,100,o)!==o)throw new Zx(t);if(cp(0,100,d)!==d)throw new Zx(t);return[...rte(a,o,d),Number.isNaN(m)?1:m]}throw new Zx(t)}function Gee(t){let e=5381,r=t.length;for(;r;)e=e*33^t.charCodeAt(--r);return(e>>>0)%2341}const O3=t=>parseInt(t.replace(/_/g,""),36),Xee="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((t,e)=>{const r=O3(e.substring(0,3)),n=O3(e.substring(3)).toString(16);let i="";for(let s=0;s<6-n.length;s++)i+="0";return t[r]=`${i}${n}`,t},{});function Kee(t){const e=t.toLowerCase().trim(),r=Xee[Gee(e)];if(!r)throw new Zx(t);return`#${r}`}const lb=(t,e)=>Array.from(Array(e)).map(()=>t).join(""),Zee=new RegExp(`^#${lb("([a-f0-9])",3)}([a-f0-9])?$`,"i"),Yee=new RegExp(`^#${lb("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),Jee=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${lb(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),ete=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,tte=/^[a-z]+$/i,P3=t=>Math.round(t*255),rte=(t,e,r)=>{let n=r/100;if(e===0)return[n,n,n].map(P3);const i=(t%360+360)%360/60,s=(1-Math.abs(2*n-1))*(e/100),a=s*(1-Math.abs(i%2-1));let o=0,d=0,m=0;i>=0&&i<1?(o=s,d=a):i>=1&&i<2?(o=a,d=s):i>=2&&i<3?(d=s,m=a):i>=3&&i<4?(d=a,m=s):i>=4&&i<5?(o=a,m=s):i>=5&&i<6&&(o=s,m=a);const y=n-s/2,b=o+y,w=d+y,O=m+y;return[b,w,O].map(P3)};function nte(t,e,r,n){return`rgba(${cp(0,255,t).toFixed()}, ${cp(0,255,e).toFixed()}, ${cp(0,255,r).toFixed()}, ${parseFloat(cp(0,1,n).toFixed(3))})`}function ite(t,e){const[r,n,i,s]=Qz(t);return nte(r,n,i,s-e)}function ste(t){const[e,r,n,i]=Qz(t);let s=a=>{const o=cp(0,255,a).toString(16);return o.length===1?`0${o}`:o};return`#${s(e)}${s(r)}${s(n)}${i<1?s(Math.round(i*255)):""}`}const ote=t=>Object.keys(t).length===0;function ate(t,e,r,n,i){for(e=e.split?e.split("."):e,n=0;n<e.length;n++)t=t?t[e[n]]:i;return t===i?r:t}const No=(t,e,r)=>{const n=ate(t,`colors.${e}`,e);try{return ste(n),n}catch{return"#000000"}},lte=t=>{const[e,r,n]=Qz(t);return(e*299+r*587+n*114)/1e3},cte=t=>e=>{const r=No(e,t);return lte(r)<128?"dark":"light"},ute=t=>e=>cte(t)(e)==="dark",Iy=(t,e)=>r=>{const n=No(r,t);return ite(n,1-e)};function j3(t="1rem",e="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${e} 25%,
    transparent 25%,
    transparent 50%,
    ${e} 50%,
    ${e} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${t} ${t}`}}const hte=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function dte(t){const e=hte();return!t||ote(t)?e:t.string&&t.colors?pte(t.string,t.colors):t.string&&!t.colors?fte(t.string):t.colors&&!t.string?mte(t.colors):e}function fte(t){let e=0;if(t.length===0)return e.toString();for(let n=0;n<t.length;n+=1)e=t.charCodeAt(n)+((e<<5)-e),e=e&e;let r="#";for(let n=0;n<3;n+=1){const i=e>>n*8&255;r+=`00${i.toString(16)}`.substr(-2)}return r}function pte(t,e){let r=0;if(t.length===0)return e[0];for(let n=0;n<t.length;n+=1)r=t.charCodeAt(n)+((r<<5)-r),r=r&r;return r=(r%e.length+e.length)%e.length,e[r]}function mte(t){return t[Math.floor(Math.random()*t.length)]}function jr(t,e){return r=>r.colorMode==="dark"?e:t}function Hz(t){const{orientation:e,vertical:r,horizontal:n}=t;return e?e==="vertical"?r:n:{}}function H8(t){return eo(t)&&t.reference?t.reference:String(t)}const vk=(t,...e)=>e.map(H8).join(` ${t} `).replace(/calc/g,""),A3=(...t)=>`calc(${vk("+",...t)})`,E3=(...t)=>`calc(${vk("-",...t)})`,Vj=(...t)=>`calc(${vk("*",...t)})`,z3=(...t)=>`calc(${vk("/",...t)})`,M3=t=>{const e=H8(t);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:Vj(e,-1)},Ku=Object.assign(t=>({add:(...e)=>Ku(A3(t,...e)),subtract:(...e)=>Ku(E3(t,...e)),multiply:(...e)=>Ku(Vj(t,...e)),divide:(...e)=>Ku(z3(t,...e)),negate:()=>Ku(M3(t)),toString:()=>t.toString()}),{add:A3,subtract:E3,multiply:Vj,divide:z3,negate:M3});function gte(t){return!Number.isInteger(parseFloat(t.toString()))}function yte(t,e="-"){return t.replace(/\s+/g,e)}function G8(t){const e=yte(t.toString());return e.includes("\\.")?t:gte(t)?e.replace(".","\\."):t}function xte(t,e=""){return[e,G8(t)].filter(Boolean).join("-")}function vte(t,e){return`var(${G8(t)}${e?`, ${e}`:""})`}function bte(t,e=""){return`--${xte(t,e)}`}function ys(t,e){const r=bte(t,e==null?void 0:e.prefix);return{variable:r,reference:vte(r,_te(e==null?void 0:e.fallback))}}function _te(t){return t==null?void 0:t.reference}const{definePartsStyle:l1,defineMultiStyleConfig:wte}=ii(mee.keys),Xa=zr("alert-fg"),gh=zr("alert-bg"),Ste=l1({container:{bg:gh.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:Xa.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:Xa.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function Gz(t){const{theme:e,colorScheme:r}=t,n=Iy(`${r}.200`,.16)(e);return{light:`colors.${r}.100`,dark:n}}const kte=l1(t=>{const{colorScheme:e}=t,r=Gz(t);return{container:{[Xa.variable]:`colors.${e}.600`,[gh.variable]:r.light,_dark:{[Xa.variable]:`colors.${e}.200`,[gh.variable]:r.dark}}}}),Cte=l1(t=>{const{colorScheme:e}=t,r=Gz(t);return{container:{[Xa.variable]:`colors.${e}.600`,[gh.variable]:r.light,_dark:{[Xa.variable]:`colors.${e}.200`,[gh.variable]:r.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:Xa.reference}}}),Tte=l1(t=>{const{colorScheme:e}=t,r=Gz(t);return{container:{[Xa.variable]:`colors.${e}.600`,[gh.variable]:r.light,_dark:{[Xa.variable]:`colors.${e}.200`,[gh.variable]:r.dark},pt:"2",borderTopWidth:"4px",borderTopColor:Xa.reference}}}),Ote=l1(t=>{const{colorScheme:e}=t;return{container:{[Xa.variable]:"colors.white",[gh.variable]:`colors.${e}.600`,_dark:{[Xa.variable]:"colors.gray.900",[gh.variable]:`colors.${e}.200`},color:Xa.reference}}}),Pte={subtle:kte,"left-accent":Cte,"top-accent":Tte,solid:Ote},jte=wte({baseStyle:Ste,variants:Pte,defaultProps:{variant:"subtle",colorScheme:"blue"}}),X8={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},Ate={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},Ete={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},K8={...X8,...Ate,container:Ete},zte=t=>typeof t=="function";function Wo(t,...e){return zte(t)?t(...e):t}const{definePartsStyle:Z8,defineMultiStyleConfig:Mte}=ii(gee.keys),Jg=zr("avatar-border-color"),Sv=zr("avatar-bg"),cb=zr("avatar-font-size"),Dy=zr("avatar-size"),Ite={borderRadius:"full",border:"0.2em solid",borderColor:Jg.reference,[Jg.variable]:"white",_dark:{[Jg.variable]:"colors.gray.800"}},Dte={bg:Sv.reference,fontSize:cb.reference,width:Dy.reference,height:Dy.reference,lineHeight:"1",[Sv.variable]:"colors.gray.200",_dark:{[Sv.variable]:"colors.whiteAlpha.400"}},Rte=t=>{const{name:e,theme:r}=t,n=e?dte({string:e}):"colors.gray.400",i=ute(n)(r);let s="white";return i||(s="gray.800"),{bg:Sv.reference,fontSize:cb.reference,color:s,borderColor:Jg.reference,verticalAlign:"top",width:Dy.reference,height:Dy.reference,"&:not([data-loaded])":{[Sv.variable]:n},[Jg.variable]:"colors.white",_dark:{[Jg.variable]:"colors.gray.800"}}},Lte={fontSize:cb.reference,lineHeight:"1"},Fte=Z8(t=>({badge:Wo(Ite,t),excessLabel:Wo(Dte,t),container:Wo(Rte,t),label:Lte}));function id(t){const e=t!=="100%"?K8[t]:void 0;return Z8({container:{[Dy.variable]:e??t,[cb.variable]:`calc(${e??t} / 2.5)`},excessLabel:{[Dy.variable]:e??t,[cb.variable]:`calc(${e??t} / 2.5)`}})}const Bte={"2xs":id(4),xs:id(6),sm:id(8),md:id(12),lg:id(16),xl:id(24),"2xl":id(32),full:id("100%")},$te=Mte({baseStyle:Fte,sizes:Bte,defaultProps:{size:"md"}}),Ni=oee("badge",["bg","color","shadow"]),Nte={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:Ni.bg.reference,color:Ni.color.reference,boxShadow:Ni.shadow.reference},Vte=t=>{const{colorScheme:e,theme:r}=t,n=Iy(`${e}.500`,.6)(r);return{[Ni.bg.variable]:`colors.${e}.500`,[Ni.color.variable]:"colors.white",_dark:{[Ni.bg.variable]:n,[Ni.color.variable]:"colors.whiteAlpha.800"}}},Wte=t=>{const{colorScheme:e,theme:r}=t,n=Iy(`${e}.200`,.16)(r);return{[Ni.bg.variable]:`colors.${e}.100`,[Ni.color.variable]:`colors.${e}.800`,_dark:{[Ni.bg.variable]:n,[Ni.color.variable]:`colors.${e}.200`}}},Ute=t=>{const{colorScheme:e,theme:r}=t,n=Iy(`${e}.200`,.8)(r);return{[Ni.color.variable]:`colors.${e}.500`,_dark:{[Ni.color.variable]:n},[Ni.shadow.variable]:`inset 0 0 0px 1px ${Ni.color.reference}`}},qte={solid:Vte,subtle:Wte,outline:Ute},kv={baseStyle:Nte,variants:qte,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:Qte,definePartsStyle:Hte}=ii(yee.keys),iO=zr("breadcrumb-link-decor"),Gte={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:iO.reference,[iO.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[iO.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},Xte=Hte({link:Gte}),Kte=Qte({baseStyle:Xte}),Zte={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},Y8=t=>{const{colorScheme:e,theme:r}=t;if(e==="gray")return{color:jr("gray.800","whiteAlpha.900")(t),_hover:{bg:jr("gray.100","whiteAlpha.200")(t)},_active:{bg:jr("gray.200","whiteAlpha.300")(t)}};const n=Iy(`${e}.200`,.12)(r),i=Iy(`${e}.200`,.24)(r);return{color:jr(`${e}.600`,`${e}.200`)(t),bg:"transparent",_hover:{bg:jr(`${e}.50`,n)(t)},_active:{bg:jr(`${e}.100`,i)(t)}}},Yte=t=>{const{colorScheme:e}=t,r=jr("gray.200","whiteAlpha.300")(t);return{border:"1px solid",borderColor:e==="gray"?r:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...Wo(Y8,t)}},Jte={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},ere=t=>{const{colorScheme:e}=t;if(e==="gray"){const o=jr("gray.100","whiteAlpha.200")(t);return{bg:o,color:jr("gray.800","whiteAlpha.900")(t),_hover:{bg:jr("gray.200","whiteAlpha.300")(t),_disabled:{bg:o}},_active:{bg:jr("gray.300","whiteAlpha.400")(t)}}}const{bg:r=`${e}.500`,color:n="white",hoverBg:i=`${e}.600`,activeBg:s=`${e}.700`}=Jte[e]??{},a=jr(r,`${e}.200`)(t);return{bg:a,color:jr(n,"gray.800")(t),_hover:{bg:jr(i,`${e}.300`)(t),_disabled:{bg:a}},_active:{bg:jr(s,`${e}.400`)(t)}}},tre=t=>{const{colorScheme:e}=t;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:jr(`${e}.500`,`${e}.200`)(t),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:jr(`${e}.700`,`${e}.500`)(t)}}},rre={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},nre={ghost:Y8,outline:Yte,solid:ere,link:tre,unstyled:rre},ire={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},sre={baseStyle:Zte,variants:nre,sizes:ire,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:Op,defineMultiStyleConfig:ore}=ii(Fee.keys),o2=zr("card-bg"),oh=zr("card-padding"),J8=zr("card-shadow"),tS=zr("card-radius"),eV=zr("card-border-width","0"),tV=zr("card-border-color"),are=Op({container:{[o2.variable]:"colors.chakra-body-bg",backgroundColor:o2.reference,boxShadow:J8.reference,borderRadius:tS.reference,color:"chakra-body-text",borderWidth:eV.reference,borderColor:tV.reference},body:{padding:oh.reference,flex:"1 1 0%"},header:{padding:oh.reference},footer:{padding:oh.reference}}),lre={sm:Op({container:{[tS.variable]:"radii.base",[oh.variable]:"space.3"}}),md:Op({container:{[tS.variable]:"radii.md",[oh.variable]:"space.5"}}),lg:Op({container:{[tS.variable]:"radii.xl",[oh.variable]:"space.7"}})},cre={elevated:Op({container:{[J8.variable]:"shadows.base",_dark:{[o2.variable]:"colors.gray.700"}}}),outline:Op({container:{[eV.variable]:"1px",[tV.variable]:"colors.chakra-border-color"}}),filled:Op({container:{[o2.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[oh.variable]:0},header:{[oh.variable]:0},footer:{[oh.variable]:0}}},ure=ore({baseStyle:are,variants:cre,sizes:lre,defaultProps:{variant:"elevated",size:"md"}}),{definePartsStyle:rS,defineMultiStyleConfig:hre}=ii(xee.keys),Cv=zr("checkbox-size"),dre=t=>{const{colorScheme:e}=t;return{w:Cv.reference,h:Cv.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:jr(`${e}.500`,`${e}.200`)(t),borderColor:jr(`${e}.500`,`${e}.200`)(t),color:jr("white","gray.900")(t),_hover:{bg:jr(`${e}.600`,`${e}.300`)(t),borderColor:jr(`${e}.600`,`${e}.300`)(t)},_disabled:{borderColor:jr("gray.200","transparent")(t),bg:jr("gray.200","whiteAlpha.300")(t),color:jr("gray.500","whiteAlpha.500")(t)}},_indeterminate:{bg:jr(`${e}.500`,`${e}.200`)(t),borderColor:jr(`${e}.500`,`${e}.200`)(t),color:jr("white","gray.900")(t)},_disabled:{bg:jr("gray.100","whiteAlpha.100")(t),borderColor:jr("gray.100","transparent")(t)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:jr("red.500","red.300")(t)}}},fre={_disabled:{cursor:"not-allowed"}},pre={userSelect:"none",_disabled:{opacity:.4}},mre={transitionProperty:"transform",transitionDuration:"normal"},gre=rS(t=>({icon:mre,container:fre,control:Wo(dre,t),label:pre})),yre={sm:rS({control:{[Cv.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:rS({control:{[Cv.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:rS({control:{[Cv.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},hd=hre({baseStyle:gre,sizes:yre,defaultProps:{size:"md",colorScheme:"blue"}}),Tv=ys("close-button-size"),Ax=ys("close-button-bg"),xre={w:[Tv.reference],h:[Tv.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[Ax.variable]:"colors.blackAlpha.100",_dark:{[Ax.variable]:"colors.whiteAlpha.100"}},_active:{[Ax.variable]:"colors.blackAlpha.200",_dark:{[Ax.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:Ax.reference},vre={lg:{[Tv.variable]:"sizes.10",fontSize:"md"},md:{[Tv.variable]:"sizes.8",fontSize:"xs"},sm:{[Tv.variable]:"sizes.6",fontSize:"2xs"}},bre={baseStyle:xre,sizes:vre,defaultProps:{size:"md"}},{variants:_re,defaultProps:wre}=kv,Sre={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:Ni.bg.reference,color:Ni.color.reference,boxShadow:Ni.shadow.reference},kre={baseStyle:Sre,variants:_re,defaultProps:wre},Cre={w:"100%",mx:"auto",maxW:"prose",px:"4"},Tre={baseStyle:Cre},Ore={opacity:.6,borderColor:"inherit"},Pre={borderStyle:"solid"},jre={borderStyle:"dashed"},Are={solid:Pre,dashed:jre},Ere={baseStyle:Ore,variants:Are,defaultProps:{variant:"solid"}},{definePartsStyle:Wj,defineMultiStyleConfig:zre}=ii(vee.keys),sO=zr("drawer-bg"),oO=zr("drawer-box-shadow");function sg(t){return Wj(t==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:t}})}const Mre={bg:"blackAlpha.600",zIndex:"modal"},Ire={display:"flex",zIndex:"modal",justifyContent:"center"},Dre=t=>{const{isFullHeight:e}=t;return{...e&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[sO.variable]:"colors.white",[oO.variable]:"shadows.lg",_dark:{[sO.variable]:"colors.gray.700",[oO.variable]:"shadows.dark-lg"},bg:sO.reference,boxShadow:oO.reference}},Rre={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},Lre={position:"absolute",top:"2",insetEnd:"3"},Fre={px:"6",py:"2",flex:"1",overflow:"auto"},Bre={px:"6",py:"4"},$re=Wj(t=>({overlay:Mre,dialogContainer:Ire,dialog:Wo(Dre,t),header:Rre,closeButton:Lre,body:Fre,footer:Bre})),Nre={xs:sg("xs"),sm:sg("md"),md:sg("lg"),lg:sg("2xl"),xl:sg("4xl"),full:sg("full")},Vre=zre({baseStyle:$re,sizes:Nre,defaultProps:{size:"xs"}}),{definePartsStyle:Wre,defineMultiStyleConfig:Ure}=ii(bee.keys),qre={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},Qre={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},Hre={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},Gre=Wre({preview:qre,input:Qre,textarea:Hre}),Xre=Ure({baseStyle:Gre}),{definePartsStyle:Kre,defineMultiStyleConfig:Zre}=ii(_ee.keys),ey=zr("form-control-color"),Yre={marginStart:"1",[ey.variable]:"colors.red.500",_dark:{[ey.variable]:"colors.red.300"},color:ey.reference},Jre={mt:"2",[ey.variable]:"colors.gray.600",_dark:{[ey.variable]:"colors.whiteAlpha.600"},color:ey.reference,lineHeight:"normal",fontSize:"sm"},ene=Kre({container:{width:"100%",position:"relative"},requiredIndicator:Yre,helperText:Jre}),tne=Zre({baseStyle:ene}),{definePartsStyle:rne,defineMultiStyleConfig:nne}=ii(wee.keys),ty=zr("form-error-color"),ine={[ty.variable]:"colors.red.500",_dark:{[ty.variable]:"colors.red.300"},color:ty.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},sne={marginEnd:"0.5em",[ty.variable]:"colors.red.500",_dark:{[ty.variable]:"colors.red.300"},color:ty.reference},one=rne({text:ine,icon:sne}),ane=nne({baseStyle:one}),lne={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},cne={baseStyle:lne},une={fontFamily:"heading",fontWeight:"bold"},hne={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},dne={baseStyle:une,sizes:hne,defaultProps:{size:"xl"}},{definePartsStyle:rh,defineMultiStyleConfig:fne}=ii(See.keys),Pg=zr("input-height"),jg=zr("input-font-size"),Ag=zr("input-padding"),Eg=zr("input-border-radius"),pne=rh({addon:{height:Pg.reference,fontSize:jg.reference,px:Ag.reference,borderRadius:Eg.reference},field:{width:"100%",height:Pg.reference,fontSize:jg.reference,px:Ag.reference,borderRadius:Eg.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),sd={lg:{[jg.variable]:"fontSizes.lg",[Ag.variable]:"space.4",[Eg.variable]:"radii.md",[Pg.variable]:"sizes.12"},md:{[jg.variable]:"fontSizes.md",[Ag.variable]:"space.4",[Eg.variable]:"radii.md",[Pg.variable]:"sizes.10"},sm:{[jg.variable]:"fontSizes.sm",[Ag.variable]:"space.3",[Eg.variable]:"radii.sm",[Pg.variable]:"sizes.8"},xs:{[jg.variable]:"fontSizes.xs",[Ag.variable]:"space.2",[Eg.variable]:"radii.sm",[Pg.variable]:"sizes.6"}},mne={lg:rh({field:sd.lg,group:sd.lg}),md:rh({field:sd.md,group:sd.md}),sm:rh({field:sd.sm,group:sd.sm}),xs:rh({field:sd.xs,group:sd.xs})};function Xz(t){const{focusBorderColor:e,errorBorderColor:r}=t;return{focusBorderColor:e||jr("blue.500","blue.300")(t),errorBorderColor:r||jr("red.500","red.300")(t)}}const gne=rh(t=>{const{theme:e}=t,{focusBorderColor:r,errorBorderColor:n}=Xz(t);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:jr("gray.300","whiteAlpha.400")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:No(e,n),boxShadow:`0 0 0 1px ${No(e,n)}`},_focusVisible:{zIndex:1,borderColor:No(e,r),boxShadow:`0 0 0 1px ${No(e,r)}`}},addon:{border:"1px solid",borderColor:jr("inherit","whiteAlpha.50")(t),bg:jr("gray.100","whiteAlpha.300")(t)}}}),yne=rh(t=>{const{theme:e}=t,{focusBorderColor:r,errorBorderColor:n}=Xz(t);return{field:{border:"2px solid",borderColor:"transparent",bg:jr("gray.100","whiteAlpha.50")(t),_hover:{bg:jr("gray.200","whiteAlpha.100")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:No(e,n)},_focusVisible:{bg:"transparent",borderColor:No(e,r)}},addon:{border:"2px solid",borderColor:"transparent",bg:jr("gray.100","whiteAlpha.50")(t)}}}),xne=rh(t=>{const{theme:e}=t,{focusBorderColor:r,errorBorderColor:n}=Xz(t);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:No(e,n),boxShadow:`0px 1px 0px 0px ${No(e,n)}`},_focusVisible:{borderColor:No(e,r),boxShadow:`0px 1px 0px 0px ${No(e,r)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),vne=rh({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),bne={outline:gne,filled:yne,flushed:xne,unstyled:vne},En=fne({baseStyle:pne,sizes:mne,variants:bne,defaultProps:{size:"md",variant:"outline"}}),aO=zr("kbd-bg"),_ne={[aO.variable]:"colors.gray.100",_dark:{[aO.variable]:"colors.whiteAlpha.100"},bg:aO.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},wne={baseStyle:_ne},Sne={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},kne={baseStyle:Sne},{defineMultiStyleConfig:Cne,definePartsStyle:Tne}=ii(kee.keys),One={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},Pne=Tne({icon:One}),jne=Cne({baseStyle:Pne}),{defineMultiStyleConfig:Ane,definePartsStyle:Ene}=ii(Cee.keys),Wc=zr("menu-bg"),lO=zr("menu-shadow"),zne={[Wc.variable]:"#fff",[lO.variable]:"shadows.sm",_dark:{[Wc.variable]:"colors.gray.700",[lO.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:"dropdown",borderRadius:"md",borderWidth:"1px",bg:Wc.reference,boxShadow:lO.reference},Mne={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[Wc.variable]:"colors.gray.100",_dark:{[Wc.variable]:"colors.whiteAlpha.100"}},_active:{[Wc.variable]:"colors.gray.200",_dark:{[Wc.variable]:"colors.whiteAlpha.200"}},_expanded:{[Wc.variable]:"colors.gray.100",_dark:{[Wc.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:Wc.reference},Ine={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},Dne={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},Rne={opacity:.6},Lne={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},Fne={transitionProperty:"common",transitionDuration:"normal"},Bne=Ene({button:Fne,list:zne,item:Mne,groupTitle:Ine,icon:Dne,command:Rne,divider:Lne}),$ne=Ane({baseStyle:Bne}),{defineMultiStyleConfig:Nne,definePartsStyle:Uj}=ii(Tee.keys),cO=zr("modal-bg"),uO=zr("modal-shadow"),Vne={bg:"blackAlpha.600",zIndex:"modal"},Wne=t=>{const{isCentered:e,scrollBehavior:r}=t;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:e?"center":"flex-start",overflow:r==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},Une=t=>{const{isCentered:e,scrollBehavior:r}=t;return{borderRadius:"md",color:"inherit",my:e?"auto":"16",mx:e?"auto":void 0,zIndex:"modal",maxH:r==="inside"?"calc(100% - 7.5rem)":void 0,[cO.variable]:"colors.white",[uO.variable]:"shadows.lg",_dark:{[cO.variable]:"colors.gray.700",[uO.variable]:"shadows.dark-lg"},bg:cO.reference,boxShadow:uO.reference}},qne={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},Qne={position:"absolute",top:"2",insetEnd:"3"},Hne=t=>{const{scrollBehavior:e}=t;return{px:"6",py:"2",flex:"1",overflow:e==="inside"?"auto":void 0}},Gne={px:"6",py:"4"},Xne=Uj(t=>({overlay:Vne,dialogContainer:Wo(Wne,t),dialog:Wo(Une,t),header:qne,closeButton:Qne,body:Wo(Hne,t),footer:Gne}));function ec(t){return Uj(t==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:t}})}const Kne={xs:ec("xs"),sm:ec("sm"),md:ec("md"),lg:ec("lg"),xl:ec("xl"),"2xl":ec("2xl"),"3xl":ec("3xl"),"4xl":ec("4xl"),"5xl":ec("5xl"),"6xl":ec("6xl"),full:ec("full")},Zne=Nne({baseStyle:Xne,sizes:Kne,defaultProps:{size:"md"}}),rV={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},{defineMultiStyleConfig:Yne,definePartsStyle:nV}=ii(Oee.keys),Kz=ys("number-input-stepper-width"),iV=ys("number-input-input-padding"),Jne=Ku(Kz).add("0.5rem").toString(),hO=ys("number-input-bg"),dO=ys("number-input-color"),fO=ys("number-input-border-color"),eie={[Kz.variable]:"sizes.6",[iV.variable]:Jne},tie=t=>{var e;return((e=Wo(En.baseStyle,t))==null?void 0:e.field)??{}},rie={width:Kz.reference},nie={borderStart:"1px solid",borderStartColor:fO.reference,color:dO.reference,bg:hO.reference,[dO.variable]:"colors.chakra-body-text",[fO.variable]:"colors.chakra-border-color",_dark:{[dO.variable]:"colors.whiteAlpha.800",[fO.variable]:"colors.whiteAlpha.300"},_active:{[hO.variable]:"colors.gray.200",_dark:{[hO.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},iie=nV(t=>({root:eie,field:Wo(tie,t)??{},stepperGroup:rie,stepper:nie}));function Y_(t){var s,a;const e=(s=En.sizes)==null?void 0:s[t],r={lg:"md",md:"md",sm:"sm",xs:"sm"},n=((a=e.field)==null?void 0:a.fontSize)??"md",i=rV.fontSizes[n];return nV({field:{...e.field,paddingInlineEnd:iV.reference,verticalAlign:"top"},stepper:{fontSize:Ku(i).multiply(.75).toString(),_first:{borderTopEndRadius:r[t]},_last:{borderBottomEndRadius:r[t],mt:"-1px",borderTopWidth:1}}})}const sie={xs:Y_("xs"),sm:Y_("sm"),md:Y_("md"),lg:Y_("lg")},oie=Yne({baseStyle:iie,sizes:sie,variants:En.variants,defaultProps:En.defaultProps});var R6;const aie={...(R6=En.baseStyle)==null?void 0:R6.field,textAlign:"center"},lie={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}};var L6;const cie={outline:t=>{var e,r;return((r=Wo((e=En.variants)==null?void 0:e.outline,t))==null?void 0:r.field)??{}},flushed:t=>{var e,r;return((r=Wo((e=En.variants)==null?void 0:e.flushed,t))==null?void 0:r.field)??{}},filled:t=>{var e,r;return((r=Wo((e=En.variants)==null?void 0:e.filled,t))==null?void 0:r.field)??{}},unstyled:((L6=En.variants)==null?void 0:L6.unstyled.field)??{}},uie={baseStyle:aie,sizes:lie,variants:cie,defaultProps:En.defaultProps},{defineMultiStyleConfig:hie,definePartsStyle:die}=ii(Pee.keys),J_=ys("popper-bg"),fie=ys("popper-arrow-bg"),I3=ys("popper-arrow-shadow-color"),pie={zIndex:"popover"},mie={[J_.variable]:"colors.white",bg:J_.reference,[fie.variable]:J_.reference,[I3.variable]:"colors.gray.200",_dark:{[J_.variable]:"colors.gray.700",[I3.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},gie={px:3,py:2,borderBottomWidth:"1px"},yie={px:3,py:2},xie={px:3,py:2,borderTopWidth:"1px"},vie={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},bie=die({popper:pie,content:mie,header:gie,body:yie,footer:xie,closeButton:vie}),_ie=hie({baseStyle:bie}),{defineMultiStyleConfig:wie,definePartsStyle:Yx}=ii(jee.keys),Sie=t=>{const{colorScheme:e,theme:r,isIndeterminate:n,hasStripe:i}=t,s=jr(j3(),j3("1rem","rgba(0,0,0,0.1)"))(t),a=jr(`${e}.500`,`${e}.200`)(t),o=`linear-gradient(
    to right,
    transparent 0%,
    ${No(r,a)} 50%,
    transparent 100%
  )`;return{...!n&&i&&s,...n?{bgImage:o}:{bgColor:a}}},kie={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},Cie=t=>({bg:jr("gray.100","whiteAlpha.300")(t)}),Tie=t=>({transitionProperty:"common",transitionDuration:"slow",...Sie(t)}),Oie=Yx(t=>({label:kie,filledTrack:Tie(t),track:Cie(t)})),Pie={xs:Yx({track:{h:"1"}}),sm:Yx({track:{h:"2"}}),md:Yx({track:{h:"3"}}),lg:Yx({track:{h:"4"}})},jie=wie({sizes:Pie,baseStyle:Oie,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Aie,definePartsStyle:nS}=ii(Aee.keys),Eie=t=>{var r;const e=(r=Wo(hd.baseStyle,t))==null?void 0:r.control;return{...e,borderRadius:"full",_checked:{...e==null?void 0:e._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},zie=nS(t=>{var e,r;return{label:(e=hd.baseStyle)==null?void 0:e.call(hd,t).label,container:(r=hd.baseStyle)==null?void 0:r.call(hd,t).container,control:Eie(t)}}),Mie={md:nS({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:nS({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:nS({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},Iie=Aie({baseStyle:zie,sizes:Mie,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Die,definePartsStyle:Rie}=ii(Eee.keys),ew=zr("select-bg");var F6;const Lie={...(F6=En.baseStyle)==null?void 0:F6.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:ew.reference,[ew.variable]:"colors.white",_dark:{[ew.variable]:"colors.gray.700"},"> option, > optgroup":{bg:ew.reference}},Fie={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},Bie=Rie({field:Lie,icon:Fie}),tw={paddingInlineEnd:"8"};var B6,$6,N6,V6,W6,U6,q6,Q6;const $ie={lg:{...(B6=En.sizes)==null?void 0:B6.lg,field:{...($6=En.sizes)==null?void 0:$6.lg.field,...tw}},md:{...(N6=En.sizes)==null?void 0:N6.md,field:{...(V6=En.sizes)==null?void 0:V6.md.field,...tw}},sm:{...(W6=En.sizes)==null?void 0:W6.sm,field:{...(U6=En.sizes)==null?void 0:U6.sm.field,...tw}},xs:{...(q6=En.sizes)==null?void 0:q6.xs,field:{...(Q6=En.sizes)==null?void 0:Q6.xs.field,...tw},icon:{insetEnd:"1"}}},Nie=Die({baseStyle:Bie,sizes:$ie,variants:En.variants,defaultProps:En.defaultProps}),pO=zr("skeleton-start-color"),mO=zr("skeleton-end-color"),Vie={[pO.variable]:"colors.gray.100",[mO.variable]:"colors.gray.400",_dark:{[pO.variable]:"colors.gray.800",[mO.variable]:"colors.gray.600"},background:pO.reference,borderColor:mO.reference,opacity:.7,borderRadius:"sm"},Wie={baseStyle:Vie},gO=zr("skip-link-bg"),Uie={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[gO.variable]:"colors.white",_dark:{[gO.variable]:"colors.gray.700"},bg:gO.reference}},qie={baseStyle:Uie},{defineMultiStyleConfig:Qie,definePartsStyle:bk}=ii(zee.keys),Hp=zr("slider-thumb-size"),ub=zr("slider-track-size"),yd=zr("slider-bg"),Hie=t=>{const{orientation:e}=t;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...Hz({orientation:e,vertical:{h:"100%",px:Xu(Hp.reference).divide(2).toString()},horizontal:{w:"100%",py:Xu(Hp.reference).divide(2).toString()}})}},Gie=t=>({...Hz({orientation:t.orientation,horizontal:{h:ub.reference},vertical:{w:ub.reference}}),overflow:"hidden",borderRadius:"sm",[yd.variable]:"colors.gray.200",_dark:{[yd.variable]:"colors.whiteAlpha.200"},_disabled:{[yd.variable]:"colors.gray.300",_dark:{[yd.variable]:"colors.whiteAlpha.300"}},bg:yd.reference}),Xie=t=>{const{orientation:e}=t;return{...Hz({orientation:e,vertical:{left:"50%"},horizontal:{top:"50%"}}),w:Hp.reference,h:Hp.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_active:{"--slider-thumb-scale":"1.15"},_disabled:{bg:"gray.300"}}},Kie=t=>{const{colorScheme:e}=t;return{width:"inherit",height:"inherit",[yd.variable]:`colors.${e}.500`,_dark:{[yd.variable]:`colors.${e}.200`},bg:yd.reference}},Zie=bk(t=>({container:Hie(t),track:Gie(t),thumb:Xie(t),filledTrack:Kie(t)})),Yie=bk({container:{[Hp.variable]:"sizes.4",[ub.variable]:"sizes.1"}}),Jie=bk({container:{[Hp.variable]:"sizes.3.5",[ub.variable]:"sizes.1"}}),ese=bk({container:{[Hp.variable]:"sizes.2.5",[ub.variable]:"sizes.0.5"}}),tse={lg:Yie,md:Jie,sm:ese},rse=Qie({baseStyle:Zie,sizes:tse,defaultProps:{size:"md",colorScheme:"blue"}}),np=ys("spinner-size"),nse={width:[np.reference],height:[np.reference]},ise={xs:{[np.variable]:"sizes.3"},sm:{[np.variable]:"sizes.4"},md:{[np.variable]:"sizes.6"},lg:{[np.variable]:"sizes.8"},xl:{[np.variable]:"sizes.12"}},sse={baseStyle:nse,sizes:ise,defaultProps:{size:"md"}},{defineMultiStyleConfig:ose,definePartsStyle:sV}=ii(Mee.keys),ase={fontWeight:"medium"},lse={opacity:.8,marginBottom:"2"},cse={verticalAlign:"baseline",fontWeight:"semibold"},use={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},hse=sV({container:{},label:ase,helpText:lse,number:cse,icon:use}),dse={md:sV({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},fse=ose({baseStyle:hse,sizes:dse,defaultProps:{size:"md"}}),{defineMultiStyleConfig:pse,definePartsStyle:Jx}=ii(["stepper","step","title","description","indicator","separator","icon","number"]),Zu=zr("stepper-indicator-size"),zg=zr("stepper-icon-size"),Mg=zr("stepper-title-font-size"),ev=zr("stepper-description-font-size"),Ex=zr("stepper-accent-color"),mse=Jx(({colorScheme:t})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[Ex.variable]:`colors.${t}.500`,_dark:{[Ex.variable]:`colors.${t}.200`}},title:{fontSize:Mg.reference,fontWeight:"medium"},description:{fontSize:ev.reference,color:"chakra-subtle-text"},number:{fontSize:Mg.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:zg.reference,height:zg.reference},indicator:{flexShrink:0,borderRadius:"full",width:Zu.reference,height:Zu.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:Ex.reference},"&[data-status=complete]":{bg:Ex.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:Ex.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${Zu.reference} - 8px)`,top:`calc(${Zu.reference} + 4px)`,insetStart:`calc(${Zu.reference} / 2 - 1px)`}}})),gse=pse({baseStyle:mse,sizes:{xs:Jx({stepper:{[Zu.variable]:"sizes.4",[zg.variable]:"sizes.3",[Mg.variable]:"fontSizes.xs",[ev.variable]:"fontSizes.xs"}}),sm:Jx({stepper:{[Zu.variable]:"sizes.6",[zg.variable]:"sizes.4",[Mg.variable]:"fontSizes.sm",[ev.variable]:"fontSizes.xs"}}),md:Jx({stepper:{[Zu.variable]:"sizes.8",[zg.variable]:"sizes.5",[Mg.variable]:"fontSizes.md",[ev.variable]:"fontSizes.sm"}}),lg:Jx({stepper:{[Zu.variable]:"sizes.10",[zg.variable]:"sizes.6",[Mg.variable]:"fontSizes.lg",[ev.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:yse,definePartsStyle:iS}=ii(Iee.keys),Ov=ys("switch-track-width"),Pp=ys("switch-track-height"),yO=ys("switch-track-diff"),xse=Ku.subtract(Ov,Pp),qj=ys("switch-thumb-x"),zx=ys("switch-bg"),vse=t=>{const{colorScheme:e}=t;return{borderRadius:"full",p:"0.5",width:[Ov.reference],height:[Pp.reference],transitionProperty:"common",transitionDuration:"fast",[zx.variable]:"colors.gray.300",_dark:{[zx.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[zx.variable]:`colors.${e}.500`,_dark:{[zx.variable]:`colors.${e}.200`}},bg:zx.reference}},bse={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[Pp.reference],height:[Pp.reference],_checked:{transform:`translateX(${qj.reference})`}},_se=iS(t=>({container:{[yO.variable]:xse,[qj.variable]:yO.reference,_rtl:{[qj.variable]:Ku(yO).negate().toString()}},track:vse(t),thumb:bse})),wse={sm:iS({container:{[Ov.variable]:"1.375rem",[Pp.variable]:"sizes.3"}}),md:iS({container:{[Ov.variable]:"1.875rem",[Pp.variable]:"sizes.4"}}),lg:iS({container:{[Ov.variable]:"2.875rem",[Pp.variable]:"sizes.6"}})},Sse=yse({baseStyle:_se,sizes:wse,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:kse,definePartsStyle:ry}=ii(Dee.keys),Cse=ry({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),a2={"&[data-is-numeric=true]":{textAlign:"end"}},Tse=ry(t=>{const{colorScheme:e}=t;return{th:{color:jr("gray.600","gray.400")(t),borderBottom:"1px",borderColor:jr(`${e}.100`,`${e}.700`)(t),...a2},td:{borderBottom:"1px",borderColor:jr(`${e}.100`,`${e}.700`)(t),...a2},caption:{color:jr("gray.600","gray.100")(t)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),Ose=ry(t=>{const{colorScheme:e}=t;return{th:{color:jr("gray.600","gray.400")(t),borderBottom:"1px",borderColor:jr(`${e}.100`,`${e}.700`)(t),...a2},td:{borderBottom:"1px",borderColor:jr(`${e}.100`,`${e}.700`)(t),...a2},caption:{color:jr("gray.600","gray.100")(t)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:jr(`${e}.100`,`${e}.700`)(t)},td:{background:jr(`${e}.100`,`${e}.700`)(t)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),Pse={simple:Tse,striped:Ose,unstyled:{}},jse={sm:ry({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:ry({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:ry({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},Ase=kse({baseStyle:Cse,variants:Pse,sizes:jse,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),da=zr("tabs-color"),oc=zr("tabs-bg"),rw=zr("tabs-border-color"),{defineMultiStyleConfig:Ese,definePartsStyle:cu}=ii(Ree.keys),zse=t=>{const{orientation:e}=t;return{display:e==="vertical"?"flex":"block"}},Mse=t=>{const{isFitted:e}=t;return{flex:e?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},Ise=t=>{const{align:e="start",orientation:r}=t;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[e],flexDirection:r==="vertical"?"column":"row"}},Dse={p:4},Rse=cu(t=>({root:zse(t),tab:Mse(t),tablist:Ise(t),tabpanel:Dse})),Lse={sm:cu({tab:{py:1,px:4,fontSize:"sm"}}),md:cu({tab:{fontSize:"md",py:2,px:4}}),lg:cu({tab:{fontSize:"lg",py:3,px:4}})},Fse=cu(t=>{const{colorScheme:e,orientation:r}=t,n=r==="vertical",i=n?"borderStart":"borderBottom",s=n?"marginStart":"marginBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",[s]:"-2px",_selected:{[da.variable]:`colors.${e}.600`,_dark:{[da.variable]:`colors.${e}.300`},borderColor:"currentColor"},_active:{[oc.variable]:"colors.gray.200",_dark:{[oc.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:da.reference,bg:oc.reference}}}),Bse=cu(t=>{const{colorScheme:e}=t;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[rw.variable]:"transparent",_selected:{[da.variable]:`colors.${e}.600`,[rw.variable]:"colors.white",_dark:{[da.variable]:`colors.${e}.300`,[rw.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:rw.reference},color:da.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),$se=cu(t=>{const{colorScheme:e}=t;return{tab:{border:"1px solid",borderColor:"inherit",[oc.variable]:"colors.gray.50",_dark:{[oc.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[oc.variable]:"colors.white",[da.variable]:`colors.${e}.600`,_dark:{[oc.variable]:"colors.gray.800",[da.variable]:`colors.${e}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:da.reference,bg:oc.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),Nse=cu(t=>{const{colorScheme:e,theme:r}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:No(r,`${e}.700`),bg:No(r,`${e}.100`)}}}}),Vse=cu(t=>{const{colorScheme:e}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",[da.variable]:"colors.gray.600",_dark:{[da.variable]:"inherit"},_selected:{[da.variable]:"colors.white",[oc.variable]:`colors.${e}.600`,_dark:{[da.variable]:"colors.gray.800",[oc.variable]:`colors.${e}.300`}},color:da.reference,bg:oc.reference}}}),Wse=cu({}),Use={line:Fse,enclosed:Bse,"enclosed-colored":$se,"soft-rounded":Nse,"solid-rounded":Vse,unstyled:Wse},qse=Ese({baseStyle:Rse,sizes:Lse,variants:Use,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),{defineMultiStyleConfig:Qse,definePartsStyle:jp}=ii(Lee.keys),D3=zr("tag-bg"),R3=zr("tag-color"),xO=zr("tag-shadow"),sS=zr("tag-min-height"),oS=zr("tag-min-width"),aS=zr("tag-font-size"),lS=zr("tag-padding-inline"),Hse={fontWeight:"medium",lineHeight:1.2,outline:0,[R3.variable]:Ni.color.reference,[D3.variable]:Ni.bg.reference,[xO.variable]:Ni.shadow.reference,color:R3.reference,bg:D3.reference,boxShadow:xO.reference,borderRadius:"md",minH:sS.reference,minW:oS.reference,fontSize:aS.reference,px:lS.reference,_focusVisible:{[xO.variable]:"shadows.outline"}},Gse={lineHeight:1.2,overflow:"visible"},Xse={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},Kse=jp({container:Hse,label:Gse,closeButton:Xse}),Zse={sm:jp({container:{[sS.variable]:"sizes.5",[oS.variable]:"sizes.5",[aS.variable]:"fontSizes.xs",[lS.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:jp({container:{[sS.variable]:"sizes.6",[oS.variable]:"sizes.6",[aS.variable]:"fontSizes.sm",[lS.variable]:"space.2"}}),lg:jp({container:{[sS.variable]:"sizes.8",[oS.variable]:"sizes.8",[aS.variable]:"fontSizes.md",[lS.variable]:"space.3"}})},Yse={subtle:jp(t=>{var e;return{container:(e=kv.variants)==null?void 0:e.subtle(t)}}),solid:jp(t=>{var e;return{container:(e=kv.variants)==null?void 0:e.solid(t)}}),outline:jp(t=>{var e;return{container:(e=kv.variants)==null?void 0:e.outline(t)}})},Jse=Qse({variants:Yse,baseStyle:Kse,sizes:Zse,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}});var H6;const eoe={...(H6=En.baseStyle)==null?void 0:H6.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"};var G6;const toe={outline:t=>{var e;return((e=En.variants)==null?void 0:e.outline(t).field)??{}},flushed:t=>{var e;return((e=En.variants)==null?void 0:e.flushed(t).field)??{}},filled:t=>{var e;return((e=En.variants)==null?void 0:e.filled(t).field)??{}},unstyled:((G6=En.variants)==null?void 0:G6.unstyled.field)??{}};var X6,K6,Z6,Y6;const roe={xs:((X6=En.sizes)==null?void 0:X6.xs.field)??{},sm:((K6=En.sizes)==null?void 0:K6.sm.field)??{},md:((Z6=En.sizes)==null?void 0:Z6.md.field)??{},lg:((Y6=En.sizes)==null?void 0:Y6.lg.field)??{}},noe={baseStyle:eoe,sizes:roe,variants:toe,defaultProps:{size:"md",variant:"outline"}},nw=ys("tooltip-bg"),vO=ys("tooltip-fg"),ioe=ys("popper-arrow-bg"),soe={bg:nw.reference,color:vO.reference,[nw.variable]:"colors.gray.700",[vO.variable]:"colors.whiteAlpha.900",_dark:{[nw.variable]:"colors.gray.300",[vO.variable]:"colors.gray.900"},[ioe.variable]:nw.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},ooe={baseStyle:soe},aoe={Accordion:Qee,Alert:jte,Avatar:$te,Badge:kv,Breadcrumb:Kte,Button:sre,Checkbox:hd,CloseButton:bre,Code:kre,Container:Tre,Divider:Ere,Drawer:Vre,Editable:Xre,Form:tne,FormError:ane,FormLabel:cne,Heading:dne,Input:En,Kbd:wne,Link:kne,List:jne,Menu:$ne,Modal:Zne,NumberInput:oie,PinInput:uie,Popover:_ie,Progress:jie,Radio:Iie,Select:Nie,Skeleton:Wie,SkipLink:qie,Slider:rse,Spinner:sse,Stat:fse,Switch:Sse,Table:Ase,Tabs:qse,Tag:Jse,Textarea:noe,Tooltip:ooe,Card:ure,Stepper:gse},loe={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},coe={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},uoe={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"}},hoe={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},doe={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},foe={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},poe={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},moe={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},goe={property:foe,easing:poe,duration:moe},yoe={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},xoe={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},voe={breakpoints:coe,zIndices:yoe,radii:hoe,blur:xoe,colors:uoe,...rV,sizes:K8,shadows:doe,space:X8,borders:loe,transition:goe},boe={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},_oe={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},woe=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function Soe(t){return eo(t)?woe.every(e=>Object.prototype.hasOwnProperty.call(t,e)):!1}const koe="ltr",Coe={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},oV={semanticTokens:boe,direction:koe,...voe,components:aoe,styles:_oe,config:Coe};function Toe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Ooe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Poe=function(){function t(r){var n=this;this._insertTag=function(i){var s;n.tags.length===0?n.insertionPoint?s=n.insertionPoint.nextSibling:n.prepend?s=n.container.firstChild:s=n.before:s=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,s),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Ooe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Toe(i);try{s.insertRule(n,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},t}(),go="-ms-",l2="-moz-",jn="-webkit-",aV="comm",Zz="rule",Yz="decl",joe="@import",lV="@keyframes",Aoe="@layer",Eoe=Math.abs,_k=String.fromCharCode,zoe=Object.assign;function Moe(t,e){return Gs(t,0)^45?(((e<<2^Gs(t,0))<<2^Gs(t,1))<<2^Gs(t,2))<<2^Gs(t,3):0}function cV(t){return t.trim()}function Ioe(t,e){return(t=e.exec(t))?t[0]:t}function An(t,e,r){return t.replace(e,r)}function Qj(t,e){return t.indexOf(e)}function Gs(t,e){return t.charCodeAt(e)|0}function hb(t,e,r){return t.slice(e,r)}function Hc(t){return t.length}function Jz(t){return t.length}function iw(t,e){return e.push(t),t}function Doe(t,e){return t.map(e).join("")}var wk=1,Ry=1,uV=0,Ca=0,Ki=0,u0="";function Sk(t,e,r,n,i,s,a){return{value:t,root:e,parent:r,type:n,props:i,children:s,line:wk,column:Ry,length:a,return:""}}function Mx(t,e){return zoe(Sk("",null,null,"",null,null,0),t,{length:-t.length},e)}function Roe(){return Ki}function Loe(){return Ki=Ca>0?Gs(u0,--Ca):0,Ry--,Ki===10&&(Ry=1,wk--),Ki}function Ka(){return Ki=Ca<uV?Gs(u0,Ca++):0,Ry++,Ki===10&&(Ry=1,wk++),Ki}function uu(){return Gs(u0,Ca)}function cS(){return Ca}function c1(t,e){return hb(u0,t,e)}function db(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function hV(t){return wk=Ry=1,uV=Hc(u0=t),Ca=0,[]}function dV(t){return u0="",t}function uS(t){return cV(c1(Ca-1,Hj(t===91?t+2:t===40?t+1:t)))}function Foe(t){for(;(Ki=uu())&&Ki<33;)Ka();return db(t)>2||db(Ki)>3?"":" "}function Boe(t,e){for(;--e&&Ka()&&!(Ki<48||Ki>102||Ki>57&&Ki<65||Ki>70&&Ki<97););return c1(t,cS()+(e<6&&uu()==32&&Ka()==32))}function Hj(t){for(;Ka();)switch(Ki){case t:return Ca;case 34:case 39:t!==34&&t!==39&&Hj(Ki);break;case 40:t===41&&Hj(t);break;case 92:Ka();break}return Ca}function $oe(t,e){for(;Ka()&&t+Ki!==57;)if(t+Ki===84&&uu()===47)break;return"/*"+c1(e,Ca-1)+"*"+_k(t===47?t:Ka())}function Noe(t){for(;!db(uu());)Ka();return c1(t,Ca)}function Voe(t){return dV(hS("",null,null,null,[""],t=hV(t),0,[0],t))}function hS(t,e,r,n,i,s,a,o,d){for(var m=0,y=0,b=a,w=0,O=0,A=0,E=1,$=1,R=1,F=0,L="",U=i,Q=s,Y=n,Z=L;$;)switch(A=F,F=Ka()){case 40:if(A!=108&&Gs(Z,b-1)==58){Qj(Z+=An(uS(F),"&","&\f"),"&\f")!=-1&&(R=-1);break}case 34:case 39:case 91:Z+=uS(F);break;case 9:case 10:case 13:case 32:Z+=Foe(A);break;case 92:Z+=Boe(cS()-1,7);continue;case 47:switch(uu()){case 42:case 47:iw(Woe($oe(Ka(),cS()),e,r),d);break;default:Z+="/"}break;case 123*E:o[m++]=Hc(Z)*R;case 125*E:case 59:case 0:switch(F){case 0:case 125:$=0;case 59+y:R==-1&&(Z=An(Z,/\f/g,"")),O>0&&Hc(Z)-b&&iw(O>32?F3(Z+";",n,r,b-1):F3(An(Z," ","")+";",n,r,b-2),d);break;case 59:Z+=";";default:if(iw(Y=L3(Z,e,r,m,y,i,o,L,U=[],Q=[],b),s),F===123)if(y===0)hS(Z,e,Y,Y,U,s,b,o,Q);else switch(w===99&&Gs(Z,3)===110?100:w){case 100:case 108:case 109:case 115:hS(t,Y,Y,n&&iw(L3(t,Y,Y,0,0,i,o,L,i,U=[],b),Q),i,Q,b,o,n?U:Q);break;default:hS(Z,Y,Y,Y,[""],Q,0,o,Q)}}m=y=O=0,E=R=1,L=Z="",b=a;break;case 58:b=1+Hc(Z),O=A;default:if(E<1){if(F==123)--E;else if(F==125&&E++==0&&Loe()==125)continue}switch(Z+=_k(F),F*E){case 38:R=y>0?1:(Z+="\f",-1);break;case 44:o[m++]=(Hc(Z)-1)*R,R=1;break;case 64:uu()===45&&(Z+=uS(Ka())),w=uu(),y=b=Hc(L=Z+=Noe(cS())),F++;break;case 45:A===45&&Hc(Z)==2&&(E=0)}}return s}function L3(t,e,r,n,i,s,a,o,d,m,y){for(var b=i-1,w=i===0?s:[""],O=Jz(w),A=0,E=0,$=0;A<n;++A)for(var R=0,F=hb(t,b+1,b=Eoe(E=a[A])),L=t;R<O;++R)(L=cV(E>0?w[R]+" "+F:An(F,/&\f/g,w[R])))&&(d[$++]=L);return Sk(t,e,r,i===0?Zz:o,d,m,y)}function Woe(t,e,r){return Sk(t,e,r,aV,_k(Roe()),hb(t,2,-2),0)}function F3(t,e,r,n){return Sk(t,e,r,Yz,hb(t,0,n),hb(t,n+1,-1),n)}function ny(t,e){for(var r="",n=Jz(t),i=0;i<n;i++)r+=e(t[i],i,t,e)||"";return r}function Uoe(t,e,r,n){switch(t.type){case Aoe:if(t.children.length)break;case joe:case Yz:return t.return=t.return||t.value;case aV:return"";case lV:return t.return=t.value+"{"+ny(t.children,n)+"}";case Zz:t.value=t.props.join(",")}return Hc(r=ny(t.children,n))?t.return=t.value+"{"+r+"}":""}function qoe(t){var e=Jz(t);return function(r,n,i,s){for(var a="",o=0;o<e;o++)a+=t[o](r,n,i,s)||"";return a}}function Qoe(t){return function(e){e.root||(e=e.return)&&t(e)}}var B3=function(e){var r=new WeakMap;return function(n){if(r.has(n))return r.get(n);var i=e(n);return r.set(n,i),i}};function fV(t){var e=Object.create(null);return function(r){return e[r]===void 0&&(e[r]=t(r)),e[r]}}var Hoe=function(e,r,n){for(var i=0,s=0;i=s,s=uu(),i===38&&s===12&&(r[n]=1),!db(s);)Ka();return c1(e,Ca)},Goe=function(e,r){var n=-1,i=44;do switch(db(i)){case 0:i===38&&uu()===12&&(r[n]=1),e[n]+=Hoe(Ca-1,r,n);break;case 2:e[n]+=uS(i);break;case 4:if(i===44){e[++n]=uu()===58?"&\f":"",r[n]=e[n].length;break}default:e[n]+=_k(i)}while(i=Ka());return e},Xoe=function(e,r){return dV(Goe(hV(e),r))},$3=new WeakMap,Koe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var r=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&r.charCodeAt(0)!==58&&!$3.get(n))&&!i){$3.set(e,!0);for(var s=[],a=Xoe(r,s),o=n.props,d=0,m=0;d<a.length;d++)for(var y=0;y<o.length;y++,m++)e.props[m]=s[d]?a[d].replace(/&\f/g,o[y]):o[y]+" "+a[d]}}},Zoe=function(e){if(e.type==="decl"){var r=e.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(e.return="",e.value="")}};function pV(t,e){switch(Moe(t,e)){case 5103:return jn+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return jn+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return jn+t+l2+t+go+t+t;case 6828:case 4268:return jn+t+go+t+t;case 6165:return jn+t+go+"flex-"+t+t;case 5187:return jn+t+An(t,/(\w+).+(:[^]+)/,jn+"box-$1$2"+go+"flex-$1$2")+t;case 5443:return jn+t+go+"flex-item-"+An(t,/flex-|-self/,"")+t;case 4675:return jn+t+go+"flex-line-pack"+An(t,/align-content|flex-|-self/,"")+t;case 5548:return jn+t+go+An(t,"shrink","negative")+t;case 5292:return jn+t+go+An(t,"basis","preferred-size")+t;case 6060:return jn+"box-"+An(t,"-grow","")+jn+t+go+An(t,"grow","positive")+t;case 4554:return jn+An(t,/([^-])(transform)/g,"$1"+jn+"$2")+t;case 6187:return An(An(An(t,/(zoom-|grab)/,jn+"$1"),/(image-set)/,jn+"$1"),t,"")+t;case 5495:case 3959:return An(t,/(image-set\([^]*)/,jn+"$1$`$1");case 4968:return An(An(t,/(.+:)(flex-)?(.*)/,jn+"box-pack:$3"+go+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+jn+t+t;case 4095:case 3583:case 4068:case 2532:return An(t,/(.+)-inline(.+)/,jn+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Hc(t)-1-e>6)switch(Gs(t,e+1)){case 109:if(Gs(t,e+4)!==45)break;case 102:return An(t,/(.+:)(.+)-([^]+)/,"$1"+jn+"$2-$3$1"+l2+(Gs(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Qj(t,"stretch")?pV(An(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Gs(t,e+1)!==115)break;case 6444:switch(Gs(t,Hc(t)-3-(~Qj(t,"!important")&&10))){case 107:return An(t,":",":"+jn)+t;case 101:return An(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+jn+(Gs(t,14)===45?"inline-":"")+"box$3$1"+jn+"$2$3$1"+go+"$2box$3")+t}break;case 5936:switch(Gs(t,e+11)){case 114:return jn+t+go+An(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return jn+t+go+An(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return jn+t+go+An(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return jn+t+go+t+t}return t}var Yoe=function(e,r,n,i){if(e.length>-1&&!e.return)switch(e.type){case Yz:e.return=pV(e.value,e.length);break;case lV:return ny([Mx(e,{value:An(e.value,"@","@"+jn)})],i);case Zz:if(e.length)return Doe(e.props,function(s){switch(Ioe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ny([Mx(e,{props:[An(s,/:(read-\w+)/,":"+l2+"$1")]})],i);case"::placeholder":return ny([Mx(e,{props:[An(s,/:(plac\w+)/,":"+jn+"input-$1")]}),Mx(e,{props:[An(s,/:(plac\w+)/,":"+l2+"$1")]}),Mx(e,{props:[An(s,/:(plac\w+)/,go+"input-$1")]})],i)}return""})}},Joe=[Yoe],eae=function(e){var r=e.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(E){var $=E.getAttribute("data-emotion");$.indexOf(" ")!==-1&&(document.head.appendChild(E),E.setAttribute("data-s",""))})}var i=e.stylisPlugins||Joe,s={},a,o=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(E){for(var $=E.getAttribute("data-emotion").split(" "),R=1;R<$.length;R++)s[$[R]]=!0;o.push(E)});var d,m=[Koe,Zoe];{var y,b=[Uoe,Qoe(function(E){y.insert(E)})],w=qoe(m.concat(i,b)),O=function($){return ny(Voe($),w)};d=function($,R,F,L){y=F,O($?$+"{"+R.styles+"}":R.styles),L&&(A.inserted[R.name]=!0)}}var A={key:r,sheet:new Poe({key:r,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:d};return A.sheet.hydrate(o),A};function Hd(){return Hd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hd.apply(null,arguments)}var mV={exports:{}},Wn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bs=typeof Symbol=="function"&&Symbol.for,eM=Bs?Symbol.for("react.element"):60103,tM=Bs?Symbol.for("react.portal"):60106,kk=Bs?Symbol.for("react.fragment"):60107,Ck=Bs?Symbol.for("react.strict_mode"):60108,Tk=Bs?Symbol.for("react.profiler"):60114,Ok=Bs?Symbol.for("react.provider"):60109,Pk=Bs?Symbol.for("react.context"):60110,rM=Bs?Symbol.for("react.async_mode"):60111,jk=Bs?Symbol.for("react.concurrent_mode"):60111,Ak=Bs?Symbol.for("react.forward_ref"):60112,Ek=Bs?Symbol.for("react.suspense"):60113,tae=Bs?Symbol.for("react.suspense_list"):60120,zk=Bs?Symbol.for("react.memo"):60115,Mk=Bs?Symbol.for("react.lazy"):60116,rae=Bs?Symbol.for("react.block"):60121,nae=Bs?Symbol.for("react.fundamental"):60117,iae=Bs?Symbol.for("react.responder"):60118,sae=Bs?Symbol.for("react.scope"):60119;function nl(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case eM:switch(t=t.type,t){case rM:case jk:case kk:case Tk:case Ck:case Ek:return t;default:switch(t=t&&t.$$typeof,t){case Pk:case Ak:case Mk:case zk:case Ok:return t;default:return e}}case tM:return e}}}function gV(t){return nl(t)===jk}Wn.AsyncMode=rM;Wn.ConcurrentMode=jk;Wn.ContextConsumer=Pk;Wn.ContextProvider=Ok;Wn.Element=eM;Wn.ForwardRef=Ak;Wn.Fragment=kk;Wn.Lazy=Mk;Wn.Memo=zk;Wn.Portal=tM;Wn.Profiler=Tk;Wn.StrictMode=Ck;Wn.Suspense=Ek;Wn.isAsyncMode=function(t){return gV(t)||nl(t)===rM};Wn.isConcurrentMode=gV;Wn.isContextConsumer=function(t){return nl(t)===Pk};Wn.isContextProvider=function(t){return nl(t)===Ok};Wn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===eM};Wn.isForwardRef=function(t){return nl(t)===Ak};Wn.isFragment=function(t){return nl(t)===kk};Wn.isLazy=function(t){return nl(t)===Mk};Wn.isMemo=function(t){return nl(t)===zk};Wn.isPortal=function(t){return nl(t)===tM};Wn.isProfiler=function(t){return nl(t)===Tk};Wn.isStrictMode=function(t){return nl(t)===Ck};Wn.isSuspense=function(t){return nl(t)===Ek};Wn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===kk||t===jk||t===Tk||t===Ck||t===Ek||t===tae||typeof t=="object"&&t!==null&&(t.$$typeof===Mk||t.$$typeof===zk||t.$$typeof===Ok||t.$$typeof===Pk||t.$$typeof===Ak||t.$$typeof===nae||t.$$typeof===iae||t.$$typeof===sae||t.$$typeof===rae)};Wn.typeOf=nl;mV.exports=Wn;var oae=mV.exports,yV=oae,aae={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},lae={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},xV={};xV[yV.ForwardRef]=aae;xV[yV.Memo]=lae;var cae=!0;function vV(t,e,r){var n="";return r.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(n+=i+" ")}),n}var nM=function(e,r,n){var i=e.key+"-"+r.name;(n===!1||cae===!1)&&e.registered[i]===void 0&&(e.registered[i]=r.styles)},iM=function(e,r,n){nM(e,r,n);var i=e.key+"-"+r.name;if(e.inserted[r.name]===void 0){var s=r;do e.insert(r===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function uae(t){for(var e=0,r,n=0,i=t.length;i>=4;++n,i-=4)r=t.charCodeAt(n)&255|(t.charCodeAt(++n)&255)<<8|(t.charCodeAt(++n)&255)<<16|(t.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,e=(r&65535)*1540483477+((r>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(n+2)&255)<<16;case 2:e^=(t.charCodeAt(n+1)&255)<<8;case 1:e^=t.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var hae={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},dae=/[A-Z]|^ms/g,fae=/_EMO_([^_]+?)_([^]*?)_EMO_/g,bV=function(e){return e.charCodeAt(1)===45},N3=function(e){return e!=null&&typeof e!="boolean"},bO=fV(function(t){return bV(t)?t:t.replace(dae,"-$&").toLowerCase()}),V3=function(e,r){switch(e){case"animation":case"animationName":if(typeof r=="string")return r.replace(fae,function(n,i,s){return Gc={name:i,styles:s,next:Gc},i})}return hae[e]!==1&&!bV(e)&&typeof r=="number"&&r!==0?r+"px":r};function fb(t,e,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return Gc={name:i.name,styles:i.styles,next:Gc},i.name;var s=r;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)Gc={name:a.name,styles:a.styles,next:Gc},a=a.next;var o=s.styles+";";return o}return pae(t,e,r)}case"function":{if(t!==void 0){var d=Gc,m=r(t);return Gc=d,fb(t,e,m)}break}}var y=r;if(e==null)return y;var b=e[y];return b!==void 0?b:y}function pae(t,e,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=fb(t,e,r[i])+";";else for(var s in r){var a=r[s];if(typeof a!="object"){var o=a;e!=null&&e[o]!==void 0?n+=s+"{"+e[o]+"}":N3(o)&&(n+=bO(s)+":"+V3(s,o)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var d=0;d<a.length;d++)N3(a[d])&&(n+=bO(s)+":"+V3(s,a[d])+";");else{var m=fb(t,e,a);switch(s){case"animation":case"animationName":{n+=bO(s)+":"+m+";";break}default:n+=s+"{"+m+"}"}}}return n}var W3=/label:\s*([^\s;{]+)\s*(;|$)/g,Gc;function Ik(t,e,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var n=!0,i="";Gc=void 0;var s=t[0];if(s==null||s.raw===void 0)n=!1,i+=fb(r,e,s);else{var a=s;i+=a[0]}for(var o=1;o<t.length;o++)if(i+=fb(r,e,t[o]),n){var d=s;i+=d[o]}W3.lastIndex=0;for(var m="",y;(y=W3.exec(i))!==null;)m+="-"+y[1];var b=uae(i)+m;return{name:b,styles:i,next:Gc}}var mae=function(e){return e()},_V=oR.useInsertionEffect?oR.useInsertionEffect:!1,wV=_V||mae,U3=_V||I.useLayoutEffect,sM=I.createContext(typeof HTMLElement<"u"?eae({key:"css"}):null);sM.Provider;var gae=function(){return I.useContext(sM)},oM=function(e){return I.forwardRef(function(r,n){var i=I.useContext(sM);return e(r,i,n)})},Ly=I.createContext({}),yae=function(e,r){if(typeof r=="function"){var n=r(e);return n}return Hd({},e,r)},xae=B3(function(t){return B3(function(e){return yae(t,e)})}),vae=function(e){var r=I.useContext(Ly);return e.theme!==r&&(r=xae(r)(e.theme)),I.createElement(Ly.Provider,{value:r},e.children)},aM={}.hasOwnProperty,Gj="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",bae=function(e,r){var n={};for(var i in r)aM.call(r,i)&&(n[i]=r[i]);return n[Gj]=e,n},_ae=function(e){var r=e.cache,n=e.serialized,i=e.isStringTag;return nM(r,n,i),wV(function(){return iM(r,n,i)}),null},wae=oM(function(t,e,r){var n=t.css;typeof n=="string"&&e.registered[n]!==void 0&&(n=e.registered[n]);var i=t[Gj],s=[n],a="";typeof t.className=="string"?a=vV(e.registered,s,t.className):t.className!=null&&(a=t.className+" ");var o=Ik(s,void 0,I.useContext(Ly));a+=e.key+"-"+o.name;var d={};for(var m in t)aM.call(t,m)&&m!=="css"&&m!==Gj&&(d[m]=t[m]);return d.className=a,r&&(d.ref=r),I.createElement(I.Fragment,null,I.createElement(_ae,{cache:e,serialized:o,isStringTag:typeof i=="string"}),I.createElement(i,d))}),Sae=wae,q3=function(e,r){var n=arguments;if(r==null||!aM.call(r,"css"))return I.createElement.apply(void 0,n);var i=n.length,s=new Array(i);s[0]=Sae,s[1]=bae(e,r);for(var a=2;a<i;a++)s[a]=n[a];return I.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(q3||(q3={}));var Dk=oM(function(t,e){var r=t.styles,n=Ik([r],void 0,I.useContext(Ly)),i=I.useRef();return U3(function(){var s=e.key+"-global",a=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),o=!1,d=document.querySelector('style[data-emotion="'+s+" "+n.name+'"]');return e.sheet.tags.length&&(a.before=e.sheet.tags[0]),d!==null&&(o=!0,d.setAttribute("data-emotion",s),a.hydrate([d])),i.current=[a,o],function(){a.flush()}},[e]),U3(function(){var s=i.current,a=s[0],o=s[1];if(o){s[1]=!1;return}if(n.next!==void 0&&iM(e,n.next,!0),a.tags.length){var d=a.tags[a.tags.length-1].nextElementSibling;a.before=d,a.flush()}e.insert("",n,a,!1)},[e,n.name]),null});function dc(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return Ik(e)}function So(){var t=dc.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}const lM=I.createContext({});lM.displayName="ColorModeContext";function Rk(){const t=I.useContext(lM);if(t===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return t}function dr(t,e){const{colorMode:r}=Rk();return r==="dark"?e:t}const sw={light:"chakra-ui-light",dark:"chakra-ui-dark"};function kae(t={}){const{preventTransition:e=!0,nonce:r}=t,n={setDataset:i=>{const s=e?n.preventTransition():void 0;document.documentElement.dataset.theme=i,document.documentElement.style.colorScheme=i,s==null||s()},setClassName(i){document.body.classList.add(i?sw.dark:sw.light),document.body.classList.remove(i?sw.light:sw.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(i){return n.query().matches??i==="dark"?"dark":"light"},addListener(i){const s=n.query(),a=o=>{i(o.matches?"dark":"light")};return typeof s.addListener=="function"?s.addListener(a):s.addEventListener("change",a),()=>{typeof s.removeListener=="function"?s.removeListener(a):s.removeEventListener("change",a)}},preventTransition(){const i=document.createElement("style");return i.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),r!==void 0&&(i.nonce=r),document.head.appendChild(i),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(i)})})}}};return n}const Cae="chakra-ui-color-mode";function Tae(t){return{ssr:!1,type:"localStorage",get(e){if(!(globalThis!=null&&globalThis.document))return e;let r;try{r=localStorage.getItem(t)||e}catch{}return r||e},set(e){try{localStorage.setItem(t,e)}catch{}}}}const Oae=Tae(Cae),Q3=()=>{},Pae=eY()?I.useLayoutEffect:I.useEffect;function H3(t,e){return t.type==="cookie"&&t.ssr?t.get(e):e}const SV=function(e){const{value:r,children:n,options:{useSystemColorMode:i,initialColorMode:s,disableTransitionOnChange:a}={},colorModeManager:o=Oae}=e,d=gae(),m=s==="dark"?"dark":"light",[y,b]=I.useState(()=>H3(o,m)),[w,O]=I.useState(()=>H3(o)),{getSystemTheme:A,setClassName:E,setDataset:$,addListener:R}=I.useMemo(()=>kae({preventTransition:a,nonce:d==null?void 0:d.nonce}),[a,d==null?void 0:d.nonce]),F=s==="system"&&!y?w:y,L=I.useCallback(Y=>{const Z=Y==="system"?A():Y;b(Z),E(Z==="dark"),$(Z),o.set(Z)},[o,A,E,$]);Pae(()=>{s==="system"&&O(A())},[]),I.useEffect(()=>{const Y=o.get();if(Y){L(Y);return}if(s==="system"){L("system");return}L(m)},[o,m,s,L]);const U=I.useCallback(()=>{L(F==="dark"?"light":"dark")},[F,L]);I.useEffect(()=>{if(i)return R(L)},[i,R,L]);const Q=I.useMemo(()=>({colorMode:r??F,toggleColorMode:r?Q3:U,setColorMode:r?Q3:L,forced:r!==void 0}),[F,U,L,r]);return u.jsx(lM.Provider,{value:Q,children:n})};SV.displayName="ColorModeProvider";const kV=String.raw,CV=kV`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,jae=()=>u.jsx(Dk,{styles:CV}),Aae=({scope:t=""})=>u.jsx(Dk,{styles:kV`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${t} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${t} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${t} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${t} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${t} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${t} :where(b, strong) {
        font-weight: bold;
      }

      ${t} small {
        font-size: 80%;
      }

      ${t} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${t} sub {
        bottom: -0.25em;
      }

      ${t} sup {
        top: -0.5em;
      }

      ${t} img {
        border-style: none;
      }

      ${t} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${t} :where(button, input) {
        overflow: visible;
      }

      ${t} :where(button, select) {
        text-transform: none;
      }

      ${t} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${t} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${t} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${t} progress {
        vertical-align: baseline;
      }

      ${t} textarea {
        overflow: auto;
      }

      ${t} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${t} input[type="number"]::-webkit-inner-spin-button,
      ${t} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${t} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${t} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${t} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${t} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${t} details {
        display: block;
      }

      ${t} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${t} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${t} button {
        background: transparent;
        padding: 0;
      }

      ${t} fieldset {
        margin: 0;
        padding: 0;
      }

      ${t} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${t} textarea {
        resize: vertical;
      }

      ${t} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${t} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${t} table {
        border-collapse: collapse;
      }

      ${t} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${t} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${t} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${t} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${t} select::-ms-expand {
        display: none;
      }

      ${CV}
    `});function Eae(t){const{cssVarsRoot:e,theme:r,children:n}=t,i=I.useMemo(()=>fee(r),[r]);return u.jsxs(vae,{theme:i,children:[u.jsx(zae,{root:e}),n]})}function zae({root:t=":host, :root"}){const e=[t,"[data-theme]"].join(",");return u.jsx(Dk,{styles:r=>({[e]:r.__cssVars})})}_n({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function Mae(t){return _n({name:`${t}StylesContext`,errorMessage:`useStyles: "styles" is undefined. Seems you forgot to wrap the components in "<${t} />" `})}function Iae(){const{colorMode:t}=Rk();return u.jsx(Dk,{styles:e=>{const r=j8(e,"styles.global"),n=Qa(r,{theme:e,colorMode:t});return n?q8(n)(e):void 0}})}const[Dae,Rae]=_n({strict:!1,name:"PortalManagerContext"});function TV(t){const{children:e,zIndex:r}=t;return u.jsx(Dae,{value:{zIndex:r},children:e})}TV.displayName="PortalManager";const OV=I.createContext({getDocument(){return document},getWindow(){return window}});OV.displayName="EnvironmentContext";function PV(t){const{children:e,environment:r,disabled:n}=t,i=I.useRef(null),s=I.useMemo(()=>r||{getDocument:()=>{var o;return((o=i.current)==null?void 0:o.ownerDocument)??document},getWindow:()=>{var o;return((o=i.current)==null?void 0:o.ownerDocument.defaultView)??window}},[r]),a=!n||!r;return u.jsxs(OV.Provider,{value:s,children:[e,a&&u.jsx("span",{id:"__chakra_env",hidden:!0,ref:i})]})}PV.displayName="EnvironmentProvider";const Lae=t=>{const{children:e,colorModeManager:r,portalZIndex:n,resetScope:i,resetCSS:s=!0,theme:a={},environment:o,cssVarsRoot:d,disableEnvironment:m,disableGlobalStyle:y}=t,b=u.jsx(PV,{environment:o,disabled:m,children:e});return u.jsx(Eae,{theme:a,cssVarsRoot:d,children:u.jsxs(SV,{colorModeManager:r,options:a.config,children:[s?u.jsx(Aae,{scope:i}):u.jsx(jae,{}),!y&&u.jsx(Iae,{}),n?u.jsx(TV,{zIndex:n,children:b}):b]})})},jV=I.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Lk=I.createContext({}),u1=I.createContext(null),Fk=typeof document<"u",cM=Fk?I.useLayoutEffect:I.useEffect,AV=I.createContext({strict:!1}),uM=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Fae="framerAppearId",EV="data-"+uM(Fae);function Bae(t,e,r,n){const{visualElement:i}=I.useContext(Lk),s=I.useContext(AV),a=I.useContext(u1),o=I.useContext(jV).reducedMotion,d=I.useRef();n=n||s.renderer,!d.current&&n&&(d.current=n(t,{visualState:e,parent:i,props:r,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:o}));const m=d.current;I.useInsertionEffect(()=>{m&&m.update(r,a)});const y=I.useRef(!!(r[EV]&&!window.HandoffComplete));return cM(()=>{m&&(m.render(),y.current&&m.animationState&&m.animationState.animateChanges())}),I.useEffect(()=>{m&&(m.updateFeatures(),!y.current&&m.animationState&&m.animationState.animateChanges(),y.current&&(y.current=!1,window.HandoffComplete=!0))}),m}function Ig(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function $ae(t,e,r){return I.useCallback(n=>{n&&t.mount&&t.mount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):Ig(r)&&(r.current=n))},[e])}function pb(t){return typeof t=="string"||Array.isArray(t)}function Bk(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const hM=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dM=["initial",...hM];function $k(t){return Bk(t.animate)||dM.some(e=>pb(t[e]))}function zV(t){return!!($k(t)||t.variants)}function Nae(t,e){if($k(t)){const{initial:r,animate:n}=t;return{initial:r===!1||pb(r)?r:void 0,animate:pb(n)?n:void 0}}return t.inherit!==!1?e:{}}function Vae(t){const{initial:e,animate:r}=Nae(t,I.useContext(Lk));return I.useMemo(()=>({initial:e,animate:r}),[G3(e),G3(r)])}function G3(t){return Array.isArray(t)?t.join(" "):t}const X3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},mb={};for(const t in X3)mb[t]={isEnabled:e=>X3[t].some(r=>!!e[r])};function Wae(t){for(const e in t)mb[e]={...mb[e],...t[e]}}const fM=I.createContext({}),MV=I.createContext({}),Uae=Symbol.for("motionComponentSymbol");function qae({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:i}){t&&Wae(t);function s(o,d){let m;const y={...I.useContext(jV),...o,layoutId:Qae(o)},{isStatic:b}=y,w=Vae(o),O=n(o,b);if(!b&&Fk){w.visualElement=Bae(i,O,y,e);const A=I.useContext(MV),E=I.useContext(AV).strict;w.visualElement&&(m=w.visualElement.loadFeatures(y,E,t,A))}return I.createElement(Lk.Provider,{value:w},m&&w.visualElement?I.createElement(m,{visualElement:w.visualElement,...y}):null,r(i,o,$ae(O,w.visualElement,d),O,b,w.visualElement))}const a=I.forwardRef(s);return a[Uae]=i,a}function Qae({layoutId:t}){const e=I.useContext(fM).id;return e&&t!==void 0?e+"-"+t:t}function Hae(t){function e(n,i={}){return qae(t(n,i))}if(typeof Proxy>"u")return e;const r=new Map;return new Proxy(e,{get:(n,i)=>(r.has(i)||r.set(i,e(i)),r.get(i))})}const Gae=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pM(t){return typeof t!="string"||t.includes("-")?!1:!!(Gae.indexOf(t)>-1||/[A-Z]/.test(t))}const c2={};function Xae(t){Object.assign(c2,t)}const h1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],lm=new Set(h1);function IV(t,{layout:e,layoutId:r}){return lm.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!c2[t]||t==="opacity")}const Ta=t=>!!(t&&t.getVelocity),Kae={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Zae=h1.length;function Yae(t,{enableHardwareAcceleration:e=!0,allowTransformNone:r=!0},n,i){let s="";for(let a=0;a<Zae;a++){const o=h1[a];if(t[o]!==void 0){const d=Kae[o]||o;s+=`${d}(${t[o]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,n?"":s):r&&n&&(s="none"),s}const DV=t=>e=>typeof e=="string"&&e.startsWith(t),RV=DV("--"),Xj=DV("var(--"),Jae=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,ele=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Gd=(t,e,r)=>Math.min(Math.max(r,t),e),cm={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Pv={...cm,transform:t=>Gd(0,1,t)},ow={...cm,default:1},jv=t=>Math.round(t*1e5)/1e5,Nk=/(-)?([\d]*\.?[\d])+/g,LV=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,tle=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function d1(t){return typeof t=="string"}const f1=t=>({test:e=>d1(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ad=f1("deg"),hu=f1("%"),Ir=f1("px"),rle=f1("vh"),nle=f1("vw"),K3={...hu,parse:t=>hu.parse(t)/100,transform:t=>hu.transform(t*100)},Z3={...cm,transform:Math.round},FV={borderWidth:Ir,borderTopWidth:Ir,borderRightWidth:Ir,borderBottomWidth:Ir,borderLeftWidth:Ir,borderRadius:Ir,radius:Ir,borderTopLeftRadius:Ir,borderTopRightRadius:Ir,borderBottomRightRadius:Ir,borderBottomLeftRadius:Ir,width:Ir,maxWidth:Ir,height:Ir,maxHeight:Ir,size:Ir,top:Ir,right:Ir,bottom:Ir,left:Ir,padding:Ir,paddingTop:Ir,paddingRight:Ir,paddingBottom:Ir,paddingLeft:Ir,margin:Ir,marginTop:Ir,marginRight:Ir,marginBottom:Ir,marginLeft:Ir,rotate:ad,rotateX:ad,rotateY:ad,rotateZ:ad,scale:ow,scaleX:ow,scaleY:ow,scaleZ:ow,skew:ad,skewX:ad,skewY:ad,distance:Ir,translateX:Ir,translateY:Ir,translateZ:Ir,x:Ir,y:Ir,z:Ir,perspective:Ir,transformPerspective:Ir,opacity:Pv,originX:K3,originY:K3,originZ:Ir,zIndex:Z3,fillOpacity:Pv,strokeOpacity:Pv,numOctaves:Z3};function mM(t,e,r,n){const{style:i,vars:s,transform:a,transformOrigin:o}=t;let d=!1,m=!1,y=!0;for(const b in e){const w=e[b];if(RV(b)){s[b]=w;continue}const O=FV[b],A=ele(w,O);if(lm.has(b)){if(d=!0,a[b]=A,!y)continue;w!==(O.default||0)&&(y=!1)}else b.startsWith("origin")?(m=!0,o[b]=A):i[b]=A}if(e.transform||(d||n?i.transform=Yae(t.transform,r,y,n):i.transform&&(i.transform="none")),m){const{originX:b="50%",originY:w="50%",originZ:O=0}=o;i.transformOrigin=`${b} ${w} ${O}`}}const gM=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function BV(t,e,r){for(const n in e)!Ta(e[n])&&!IV(n,r)&&(t[n]=e[n])}function ile({transformTemplate:t},e,r){return I.useMemo(()=>{const n=gM();return mM(n,e,{enableHardwareAcceleration:!r},t),Object.assign({},n.vars,n.style)},[e])}function sle(t,e,r){const n=t.style||{},i={};return BV(i,n,t),Object.assign(i,ile(t,e,r)),t.transformValues?t.transformValues(i):i}function ole(t,e,r){const n={},i=sle(t,e,r);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const ale=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function u2(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ale.has(t)}let $V=t=>!u2(t);function lle(t){t&&($V=e=>e.startsWith("on")?!u2(e):t(e))}try{lle(require("@emotion/is-prop-valid").default)}catch{}function cle(t,e,r){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||($V(i)||r===!0&&u2(i)||!e&&!u2(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}function Y3(t,e,r){return typeof t=="string"?t:Ir.transform(e+r*t)}function ule(t,e,r){const n=Y3(e,t.x,t.width),i=Y3(r,t.y,t.height);return`${n} ${i}`}const hle={offset:"stroke-dashoffset",array:"stroke-dasharray"},dle={offset:"strokeDashoffset",array:"strokeDasharray"};function fle(t,e,r=1,n=0,i=!0){t.pathLength=1;const s=i?hle:dle;t[s.offset]=Ir.transform(-n);const a=Ir.transform(e),o=Ir.transform(r);t[s.array]=`${a} ${o}`}function yM(t,{attrX:e,attrY:r,attrScale:n,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:d=0,...m},y,b,w){if(mM(t,m,y,w),b){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:O,style:A,dimensions:E}=t;O.transform&&(E&&(A.transform=O.transform),delete O.transform),E&&(i!==void 0||s!==void 0||A.transform)&&(A.transformOrigin=ule(E,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(O.x=e),r!==void 0&&(O.y=r),n!==void 0&&(O.scale=n),a!==void 0&&fle(O,a,o,d,!1)}const NV=()=>({...gM(),attrs:{}}),xM=t=>typeof t=="string"&&t.toLowerCase()==="svg";function ple(t,e,r,n){const i=I.useMemo(()=>{const s=NV();return yM(s,e,{enableHardwareAcceleration:!1},xM(n),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};BV(s,t.style,t),i.style={...s,...i.style}}return i}function mle(t=!1){return(r,n,i,{latestValues:s},a)=>{const d=(pM(r)?ple:ole)(n,s,a,r),y={...cle(n,typeof r=="string",t),...d,ref:i},{children:b}=n,w=I.useMemo(()=>Ta(b)?b.get():b,[b]);return I.createElement(r,{...y,children:w})}}function VV(t,{style:e,vars:r},n,i){Object.assign(t.style,e,i&&i.getProjectionStyles(n));for(const s in r)t.style.setProperty(s,r[s])}const WV=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function UV(t,e,r,n){VV(t,e,void 0,n);for(const i in e.attrs)t.setAttribute(WV.has(i)?i:uM(i),e.attrs[i])}function vM(t,e){const{style:r}=t,n={};for(const i in r)(Ta(r[i])||e.style&&Ta(e.style[i])||IV(i,t))&&(n[i]=r[i]);return n}function qV(t,e){const r=vM(t,e);for(const n in t)if(Ta(t[n])||Ta(e[n])){const i=h1.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[i]=t[n]}return r}function bM(t,e,r,n={},i={}){return typeof e=="function"&&(e=e(r!==void 0?r:t.custom,n,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(r!==void 0?r:t.custom,n,i)),e}function QV(t){const e=I.useRef(null);return e.current===null&&(e.current=t()),e.current}const h2=t=>Array.isArray(t),gle=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),yle=t=>h2(t)?t[t.length-1]||0:t;function dS(t){const e=Ta(t)?t.get():t;return gle(e)?e.toValue():e}function xle({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:r},n,i,s){const a={latestValues:vle(n,i,s,t),renderState:e()};return r&&(a.mount=o=>r(n,o,a)),a}const HV=t=>(e,r)=>{const n=I.useContext(Lk),i=I.useContext(u1),s=()=>xle(t,e,n,i);return r?s():QV(s)};function vle(t,e,r,n){const i={},s=n(t,{});for(const w in s)i[w]=dS(s[w]);let{initial:a,animate:o}=t;const d=$k(t),m=zV(t);e&&m&&!d&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let y=r?r.initial===!1:!1;y=y||a===!1;const b=y?o:a;return b&&typeof b!="boolean"&&!Bk(b)&&(Array.isArray(b)?b:[b]).forEach(O=>{const A=bM(t,O);if(!A)return;const{transitionEnd:E,transition:$,...R}=A;for(const F in R){let L=R[F];if(Array.isArray(L)){const U=y?L.length-1:0;L=L[U]}L!==null&&(i[F]=L)}for(const F in E)i[F]=E[F]}),i}const $i=t=>t;class J3{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const r=this.order.indexOf(e);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function ble(t){let e=new J3,r=new J3,n=0,i=!1,s=!1;const a=new WeakSet,o={schedule:(d,m=!1,y=!1)=>{const b=y&&i,w=b?e:r;return m&&a.add(d),w.add(d)&&b&&i&&(n=e.order.length),d},cancel:d=>{r.remove(d),a.delete(d)},process:d=>{if(i){s=!0;return}if(i=!0,[e,r]=[r,e],r.clear(),n=e.order.length,n)for(let m=0;m<n;m++){const y=e.order[m];y(d),a.has(y)&&(o.schedule(y),t())}i=!1,s&&(s=!1,o.process(d))}};return o}const aw=["prepare","read","update","preRender","render","postRender"],_le=40;function wle(t,e){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=aw.reduce((b,w)=>(b[w]=ble(()=>r=!0),b),{}),a=b=>s[b].process(i),o=()=>{const b=performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(b-i.timestamp,_le),1),i.timestamp=b,i.isProcessing=!0,aw.forEach(a),i.isProcessing=!1,r&&e&&(n=!1,t(o))},d=()=>{r=!0,n=!0,i.isProcessing||t(o)};return{schedule:aw.reduce((b,w)=>{const O=s[w];return b[w]=(A,E=!1,$=!1)=>(r||d(),O.schedule(A,E,$)),b},{}),cancel:b=>aw.forEach(w=>s[w].cancel(b)),state:i,steps:s}}const{schedule:ni,cancel:yh,state:xo,steps:_O}=wle(typeof requestAnimationFrame<"u"?requestAnimationFrame:$i,!0),Sle={useVisualState:HV({scrapeMotionValuesFromProps:qV,createRenderState:NV,onMount:(t,e,{renderState:r,latestValues:n})=>{ni.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),ni.render(()=>{yM(r,n,{enableHardwareAcceleration:!1},xM(e.tagName),t.transformTemplate),UV(e,r)})}})},kle={useVisualState:HV({scrapeMotionValuesFromProps:vM,createRenderState:gM})};function Cle(t,{forwardMotionProps:e=!1},r,n){return{...pM(t)?Sle:kle,preloadedFeatures:r,useRender:mle(e),createVisualElement:n,Component:t}}function nh(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}const GV=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Vk(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const Tle=t=>e=>GV(e)&&t(e,Vk(e));function ah(t,e,r,n){return nh(t,e,Tle(r),n)}const Ole=(t,e)=>r=>e(t(r)),Bd=(...t)=>t.reduce(Ole);function XV(t){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=t,r):!1}}const eL=XV("dragHorizontal"),tL=XV("dragVertical");function KV(t){let e=!1;if(t==="y")e=tL();else if(t==="x")e=eL();else{const r=eL(),n=tL();r&&n?e=()=>{r(),n()}:(r&&r(),n&&n())}return e}function ZV(){const t=KV(!0);return t?(t(),!1):!0}class df{constructor(e){this.isMounted=!1,this.node=e}update(){}}function rL(t,e){const r="pointer"+(e?"enter":"leave"),n="onHover"+(e?"Start":"End"),i=(s,a)=>{if(s.pointerType==="touch"||ZV())return;const o=t.getProps();t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",e),o[n]&&ni.update(()=>o[n](s,a))};return ah(t.current,r,i,{passive:!t.getProps()[n]})}class Ple extends df{mount(){this.unmount=Bd(rL(this.node,!0),rL(this.node,!1))}unmount(){}}class jle extends df{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Bd(nh(this.node.current,"focus",()=>this.onFocus()),nh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const YV=(t,e)=>e?t===e?!0:YV(t,e.parentElement):!1;function wO(t,e){if(!e)return;const r=new PointerEvent("pointer"+t);e(r,Vk(r))}class Ale extends df{constructor(){super(...arguments),this.removeStartListeners=$i,this.removeEndListeners=$i,this.removeAccessibleListeners=$i,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),s=ah(window,"pointerup",(o,d)=>{if(!this.checkPressEnd())return;const{onTap:m,onTapCancel:y,globalTapTarget:b}=this.node.getProps();ni.update(()=>{!b&&!YV(this.node.current,o.target)?y&&y(o,d):m&&m(o,d)})},{passive:!(n.onTap||n.onPointerUp)}),a=ah(window,"pointercancel",(o,d)=>this.cancelPress(o,d),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Bd(s,a),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=o=>{o.key!=="Enter"||!this.checkPressEnd()||wO("up",(d,m)=>{const{onTap:y}=this.node.getProps();y&&ni.update(()=>y(d,m))})};this.removeEndListeners(),this.removeEndListeners=nh(this.node.current,"keyup",a),wO("down",(o,d)=>{this.startPress(o,d)})},r=nh(this.node.current,"keydown",e),n=()=>{this.isPressing&&wO("cancel",(s,a)=>this.cancelPress(s,a))},i=nh(this.node.current,"blur",n);this.removeAccessibleListeners=Bd(r,i)}}startPress(e,r){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&ni.update(()=>n(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!ZV()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&ni.update(()=>n(e,r))}mount(){const e=this.node.getProps(),r=ah(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=nh(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Bd(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Kj=new WeakMap,SO=new WeakMap,Ele=t=>{const e=Kj.get(t.target);e&&e(t)},zle=t=>{t.forEach(Ele)};function Mle({root:t,...e}){const r=t||document;SO.has(r)||SO.set(r,{});const n=SO.get(r),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(zle,{root:t,...e})),n[i]}function Ile(t,e,r){const n=Mle(e);return Kj.set(t,r),n.observe(t),()=>{Kj.delete(t),n.unobserve(t)}}const Dle={some:0,all:1};class Rle extends df{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:s}=e,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:Dle[i]},o=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,s&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:y,onViewportLeave:b}=this.node.getProps(),w=m?y:b;w&&w(d)};return Ile(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(Lle(e,r))&&this.startObserver()}unmount(){}}function Lle({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const Fle={inView:{Feature:Rle},tap:{Feature:Ale},focus:{Feature:jle},hover:{Feature:Ple}};function JV(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Ble(t){const e={};return t.values.forEach((r,n)=>e[n]=r.get()),e}function $le(t){const e={};return t.values.forEach((r,n)=>e[n]=r.getVelocity()),e}function Wk(t,e,r){const n=t.getProps();return bM(n,e,r!==void 0?r:n.custom,Ble(t),$le(t))}let _M=$i;const Ap=t=>t*1e3,lh=t=>t/1e3,Nle={current:!1},e9=t=>Array.isArray(t)&&typeof t[0]=="number";function t9(t){return!!(!t||typeof t=="string"&&r9[t]||e9(t)||Array.isArray(t)&&t.every(t9))}const tv=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,r9={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:tv([0,.65,.55,1]),circOut:tv([.55,0,1,.45]),backIn:tv([.31,.01,.66,-.59]),backOut:tv([.33,1.53,.69,.99])};function n9(t){if(t)return e9(t)?tv(t):Array.isArray(t)?t.map(n9):r9[t]}function Vle(t,e,r,{delay:n=0,duration:i,repeat:s=0,repeatType:a="loop",ease:o,times:d}={}){const m={[e]:r};d&&(m.offset=d);const y=n9(o);return Array.isArray(y)&&(m.easing=y),t.animate(m,{delay:n,duration:i,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function Wle(t,{repeat:e,repeatType:r="loop"}){const n=e&&r!=="loop"&&e%2===1?0:t.length-1;return t[n]}const i9=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,Ule=1e-7,qle=12;function Qle(t,e,r,n,i){let s,a,o=0;do a=e+(r-e)/2,s=i9(a,n,i)-t,s>0?r=a:e=a;while(Math.abs(s)>Ule&&++o<qle);return a}function p1(t,e,r,n){if(t===e&&r===n)return $i;const i=s=>Qle(s,0,1,t,r);return s=>s===0||s===1?s:i9(i(s),e,n)}const Hle=p1(.42,0,1,1),Gle=p1(0,0,.58,1),s9=p1(.42,0,.58,1),Xle=t=>Array.isArray(t)&&typeof t[0]!="number",o9=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,a9=t=>e=>1-t(1-e),wM=t=>1-Math.sin(Math.acos(t)),l9=a9(wM),Kle=o9(wM),c9=p1(.33,1.53,.69,.99),SM=a9(c9),Zle=o9(SM),Yle=t=>(t*=2)<1?.5*SM(t):.5*(2-Math.pow(2,-10*(t-1))),Jle={linear:$i,easeIn:Hle,easeInOut:s9,easeOut:Gle,circIn:wM,circInOut:Kle,circOut:l9,backIn:SM,backInOut:Zle,backOut:c9,anticipate:Yle},nL=t=>{if(Array.isArray(t)){_M(t.length===4);const[e,r,n,i]=t;return p1(e,r,n,i)}else if(typeof t=="string")return Jle[t];return t},kM=(t,e)=>r=>!!(d1(r)&&tle.test(r)&&r.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(r,e)),u9=(t,e,r)=>n=>{if(!d1(n))return n;const[i,s,a,o]=n.match(Nk);return{[t]:parseFloat(i),[e]:parseFloat(s),[r]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},ece=t=>Gd(0,255,t),kO={...cm,transform:t=>Math.round(ece(t))},up={test:kM("rgb","red"),parse:u9("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+kO.transform(t)+", "+kO.transform(e)+", "+kO.transform(r)+", "+jv(Pv.transform(n))+")"};function tce(t){let e="",r="",n="",i="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,r+=r,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Zj={test:kM("#"),parse:tce,transform:up.transform},Dg={test:kM("hsl","hue"),parse:u9("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+hu.transform(jv(e))+", "+hu.transform(jv(r))+", "+jv(Pv.transform(n))+")"},Do={test:t=>up.test(t)||Zj.test(t)||Dg.test(t),parse:t=>up.test(t)?up.parse(t):Dg.test(t)?Dg.parse(t):Zj.parse(t),transform:t=>d1(t)?t:t.hasOwnProperty("red")?up.transform(t):Dg.transform(t)},ki=(t,e,r)=>-r*t+r*e+t;function CO(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function rce({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let i=0,s=0,a=0;if(!e)i=s=a=r;else{const o=r<.5?r*(1+e):r+e-r*e,d=2*r-o;i=CO(d,o,t+1/3),s=CO(d,o,t),a=CO(d,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:n}}const TO=(t,e,r)=>{const n=t*t;return Math.sqrt(Math.max(0,r*(e*e-n)+n))},nce=[Zj,up,Dg],ice=t=>nce.find(e=>e.test(t));function iL(t){const e=ice(t);let r=e.parse(t);return e===Dg&&(r=rce(r)),r}const h9=(t,e)=>{const r=iL(t),n=iL(e),i={...r};return s=>(i.red=TO(r.red,n.red,s),i.green=TO(r.green,n.green,s),i.blue=TO(r.blue,n.blue,s),i.alpha=ki(r.alpha,n.alpha,s),up.transform(i))};function sce(t){var e,r;return isNaN(t)&&d1(t)&&(((e=t.match(Nk))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(LV))===null||r===void 0?void 0:r.length)||0)>0}const d9={regex:Jae,countKey:"Vars",token:"${v}",parse:$i},f9={regex:LV,countKey:"Colors",token:"${c}",parse:Do.parse},p9={regex:Nk,countKey:"Numbers",token:"${n}",parse:cm.parse};function OO(t,{regex:e,countKey:r,token:n,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+r]=s.length,t.tokenised=t.tokenised.replace(e,n),t.values.push(...s.map(i)))}function d2(t){const e=t.toString(),r={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&OO(r,d9),OO(r,f9),OO(r,p9),r}function m9(t){return d2(t).values}function g9(t){const{values:e,numColors:r,numVars:n,tokenised:i}=d2(t),s=e.length;return a=>{let o=i;for(let d=0;d<s;d++)d<n?o=o.replace(d9.token,a[d]):d<n+r?o=o.replace(f9.token,Do.transform(a[d])):o=o.replace(p9.token,jv(a[d]));return o}}const oce=t=>typeof t=="number"?0:t;function ace(t){const e=m9(t);return g9(t)(e.map(oce))}const Xd={test:sce,parse:m9,createTransformer:g9,getAnimatableNone:ace},y9=(t,e)=>r=>`${r>0?e:t}`;function x9(t,e){return typeof t=="number"?r=>ki(t,e,r):Do.test(t)?h9(t,e):t.startsWith("var(")?y9(t,e):b9(t,e)}const v9=(t,e)=>{const r=[...t],n=r.length,i=t.map((s,a)=>x9(s,e[a]));return s=>{for(let a=0;a<n;a++)r[a]=i[a](s);return r}},lce=(t,e)=>{const r={...t,...e},n={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(n[i]=x9(t[i],e[i]));return i=>{for(const s in n)r[s]=n[s](i);return r}},b9=(t,e)=>{const r=Xd.createTransformer(e),n=d2(t),i=d2(e);return n.numVars===i.numVars&&n.numColors===i.numColors&&n.numNumbers>=i.numNumbers?Bd(v9(n.values,i.values),r):y9(t,e)},gb=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},sL=(t,e)=>r=>ki(t,e,r);function cce(t){return typeof t=="number"?sL:typeof t=="string"?Do.test(t)?h9:b9:Array.isArray(t)?v9:typeof t=="object"?lce:sL}function uce(t,e,r){const n=[],i=r||cce(t[0]),s=t.length-1;for(let a=0;a<s;a++){let o=i(t[a],t[a+1]);if(e){const d=Array.isArray(e)?e[a]||$i:e;o=Bd(d,o)}n.push(o)}return n}function _9(t,e,{clamp:r=!0,ease:n,mixer:i}={}){const s=t.length;if(_M(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=uce(e,n,i),o=a.length,d=m=>{let y=0;if(o>1)for(;y<t.length-2&&!(m<t[y+1]);y++);const b=gb(t[y],t[y+1],m);return a[y](b)};return r?m=>d(Gd(t[0],t[s-1],m)):d}function hce(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=gb(0,e,n);t.push(ki(r,1,i))}}function dce(t){const e=[0];return hce(e,t.length-1),e}function fce(t,e){return t.map(r=>r*e)}function pce(t,e){return t.map(()=>e||s9).splice(0,t.length-1)}function f2({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const i=Xle(n)?n.map(nL):nL(n),s={done:!1,value:e[0]},a=fce(r&&r.length===e.length?r:dce(e),t),o=_9(a,e,{ease:Array.isArray(i)?i:pce(e,i)});return{calculatedDuration:t,next:d=>(s.value=o(d),s.done=d>=t,s)}}function w9(t,e){return e?t*(1e3/e):0}const mce=5;function S9(t,e,r){const n=Math.max(e-mce,0);return w9(r-t(n),e-n)}const PO=.001,gce=.01,yce=10,xce=.05,vce=1;function bce({duration:t=800,bounce:e=.25,velocity:r=0,mass:n=1}){let i,s,a=1-e;a=Gd(xce,vce,a),t=Gd(gce,yce,lh(t)),a<1?(i=m=>{const y=m*a,b=y*t,w=y-r,O=Yj(m,a),A=Math.exp(-b);return PO-w/O*A},s=m=>{const b=m*a*t,w=b*r+r,O=Math.pow(a,2)*Math.pow(m,2)*t,A=Math.exp(-b),E=Yj(Math.pow(m,2),a);return(-i(m)+PO>0?-1:1)*((w-O)*A)/E}):(i=m=>{const y=Math.exp(-m*t),b=(m-r)*t+1;return-PO+y*b},s=m=>{const y=Math.exp(-m*t),b=(r-m)*(t*t);return y*b});const o=5/t,d=wce(i,s,o);if(t=Ap(t),isNaN(d))return{stiffness:100,damping:10,duration:t};{const m=Math.pow(d,2)*n;return{stiffness:m,damping:a*2*Math.sqrt(n*m),duration:t}}}const _ce=12;function wce(t,e,r){let n=r;for(let i=1;i<_ce;i++)n=n-t(n)/e(n);return n}function Yj(t,e){return t*Math.sqrt(1-e*e)}const Sce=["duration","bounce"],kce=["stiffness","damping","mass"];function oL(t,e){return e.some(r=>t[r]!==void 0)}function Cce(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!oL(t,kce)&&oL(t,Sce)){const r=bce(t);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function k9({keyframes:t,restDelta:e,restSpeed:r,...n}){const i=t[0],s=t[t.length-1],a={done:!1,value:i},{stiffness:o,damping:d,mass:m,duration:y,velocity:b,isResolvedFromDuration:w}=Cce({...n,velocity:-lh(n.velocity||0)}),O=b||0,A=d/(2*Math.sqrt(o*m)),E=s-i,$=lh(Math.sqrt(o/m)),R=Math.abs(E)<5;r||(r=R?.01:2),e||(e=R?.005:.5);let F;if(A<1){const L=Yj($,A);F=U=>{const Q=Math.exp(-A*$*U);return s-Q*((O+A*$*E)/L*Math.sin(L*U)+E*Math.cos(L*U))}}else if(A===1)F=L=>s-Math.exp(-$*L)*(E+(O+$*E)*L);else{const L=$*Math.sqrt(A*A-1);F=U=>{const Q=Math.exp(-A*$*U),Y=Math.min(L*U,300);return s-Q*((O+A*$*E)*Math.sinh(Y)+L*E*Math.cosh(Y))/L}}return{calculatedDuration:w&&y||null,next:L=>{const U=F(L);if(w)a.done=L>=y;else{let Q=O;L!==0&&(A<1?Q=S9(F,L,U):Q=0);const Y=Math.abs(Q)<=r,Z=Math.abs(s-U)<=e;a.done=Y&&Z}return a.value=a.done?s:U,a}}}function aL({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:d,restDelta:m=.5,restSpeed:y}){const b=t[0],w={done:!1,value:b},O=J=>o!==void 0&&J<o||d!==void 0&&J>d,A=J=>o===void 0?d:d===void 0||Math.abs(o-J)<Math.abs(d-J)?o:d;let E=r*e;const $=b+E,R=a===void 0?$:a($);R!==$&&(E=R-b);const F=J=>-E*Math.exp(-J/n),L=J=>R+F(J),U=J=>{const re=F(J),he=L(J);w.done=Math.abs(re)<=m,w.value=w.done?R:he};let Q,Y;const Z=J=>{O(w.value)&&(Q=J,Y=k9({keyframes:[w.value,A(w.value)],velocity:S9(L,J,w.value),damping:i,stiffness:s,restDelta:m,restSpeed:y}))};return Z(0),{calculatedDuration:null,next:J=>{let re=!1;return!Y&&Q===void 0&&(re=!0,U(J),Z(J)),Q!==void 0&&J>Q?Y.next(J-Q):(!re&&U(J),w)}}}const Tce=t=>{const e=({timestamp:r})=>t(r);return{start:()=>ni.update(e,!0),stop:()=>yh(e),now:()=>xo.isProcessing?xo.timestamp:performance.now()}},lL=2e4;function cL(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<lL;)e+=r,n=t.next(e);return e>=lL?1/0:e}const Oce={decay:aL,inertia:aL,tween:f2,keyframes:f2,spring:k9};function p2({autoplay:t=!0,delay:e=0,driver:r=Tce,keyframes:n,type:i="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o="loop",onPlay:d,onStop:m,onComplete:y,onUpdate:b,...w}){let O=1,A=!1,E,$;const R=()=>{$=new Promise(Ie=>{E=Ie})};R();let F;const L=Oce[i]||f2;let U;L!==f2&&typeof n[0]!="number"&&(U=_9([0,100],n,{clamp:!1}),n=[0,100]);const Q=L({...w,keyframes:n});let Y;o==="mirror"&&(Y=L({...w,keyframes:[...n].reverse(),velocity:-(w.velocity||0)}));let Z="idle",J=null,re=null,he=null;Q.calculatedDuration===null&&s&&(Q.calculatedDuration=cL(Q));const{calculatedDuration:le}=Q;let Ze=1/0,Ee=1/0;le!==null&&(Ze=le+a,Ee=Ze*(s+1)-a);let qe=0;const et=Ie=>{if(re===null)return;O>0&&(re=Math.min(re,Ie)),O<0&&(re=Math.min(Ie-Ee/O,re)),J!==null?qe=J:qe=Math.round(Ie-re)*O;const Oe=qe-e*(O>=0?1:-1),Re=O>=0?Oe<0:Oe>Ee;qe=Math.max(Oe,0),Z==="finished"&&J===null&&(qe=Ee);let nt=qe,ze=Q;if(s){const Mt=Math.min(qe,Ee)/Ze;let Et=Math.floor(Mt),yt=Mt%1;!yt&&Mt>=1&&(yt=1),yt===1&&Et--,Et=Math.min(Et,s+1),!!(Et%2)&&(o==="reverse"?(yt=1-yt,a&&(yt-=a/Ze)):o==="mirror"&&(ze=Y)),nt=Gd(0,1,yt)*Ze}const rt=Re?{done:!1,value:n[0]}:ze.next(nt);U&&(rt.value=U(rt.value));let{done:Xe}=rt;!Re&&le!==null&&(Xe=O>=0?qe>=Ee:qe<=0);const _t=J===null&&(Z==="finished"||Z==="running"&&Xe);return b&&b(rt.value),_t&&Me(),rt},at=()=>{F&&F.stop(),F=void 0},Be=()=>{Z="idle",at(),E(),R(),re=he=null},Me=()=>{Z="finished",y&&y(),at(),E()},Ge=()=>{if(A)return;F||(F=r(et));const Ie=F.now();d&&d(),J!==null?re=Ie-J:(!re||Z==="finished")&&(re=Ie),Z==="finished"&&R(),he=re,J=null,Z="running",F.start()};t&&Ge();const Le={then(Ie,Oe){return $.then(Ie,Oe)},get time(){return lh(qe)},set time(Ie){Ie=Ap(Ie),qe=Ie,J!==null||!F||O===0?J=Ie:re=F.now()-Ie/O},get duration(){const Ie=Q.calculatedDuration===null?cL(Q):Q.calculatedDuration;return lh(Ie)},get speed(){return O},set speed(Ie){Ie===O||!F||(O=Ie,Le.time=lh(qe))},get state(){return Z},play:Ge,pause:()=>{Z="paused",J=qe},stop:()=>{A=!0,Z!=="idle"&&(Z="idle",m&&m(),Be())},cancel:()=>{he!==null&&et(he),Be()},complete:()=>{Z="finished"},sample:Ie=>(re=0,et(Ie))};return Le}function Pce(t){let e;return()=>(e===void 0&&(e=t()),e)}const jce=Pce(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ace=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),lw=10,Ece=2e4,zce=(t,e)=>e.type==="spring"||t==="backgroundColor"||!t9(e.ease);function Mce(t,e,{onUpdate:r,onComplete:n,...i}){if(!(jce()&&Ace.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let a=!1,o,d,m=!1;const y=()=>{d=new Promise(L=>{o=L})};y();let{keyframes:b,duration:w=300,ease:O,times:A}=i;if(zce(e,i)){const L=p2({...i,repeat:0,delay:0});let U={done:!1,value:b[0]};const Q=[];let Y=0;for(;!U.done&&Y<Ece;)U=L.sample(Y),Q.push(U.value),Y+=lw;A=void 0,b=Q,w=Y-lw,O="linear"}const E=Vle(t.owner.current,e,b,{...i,duration:w,ease:O,times:A}),$=()=>{m=!1,E.cancel()},R=()=>{m=!0,ni.update($),o(),y()};return E.onfinish=()=>{m||(t.set(Wle(b,i)),n&&n(),R())},{then(L,U){return d.then(L,U)},attachTimeline(L){return E.timeline=L,E.onfinish=null,$i},get time(){return lh(E.currentTime||0)},set time(L){E.currentTime=Ap(L)},get speed(){return E.playbackRate},set speed(L){E.playbackRate=L},get duration(){return lh(w)},play:()=>{a||(E.play(),yh($))},pause:()=>E.pause(),stop:()=>{if(a=!0,E.playState==="idle")return;const{currentTime:L}=E;if(L){const U=p2({...i,autoplay:!1});t.setWithVelocity(U.sample(L-lw).value,U.sample(L).value,lw)}R()},complete:()=>{m||E.finish()},cancel:R}}function Ice({keyframes:t,delay:e,onUpdate:r,onComplete:n}){const i=()=>(r&&r(t[t.length-1]),n&&n(),{time:0,speed:1,duration:0,play:$i,pause:$i,stop:$i,then:s=>(s(),Promise.resolve()),cancel:$i,complete:$i});return e?p2({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const Dce={type:"spring",stiffness:500,damping:25,restSpeed:10},Rce=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Lce={type:"keyframes",duration:.8},Fce={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Bce=(t,{keyframes:e})=>e.length>2?Lce:lm.has(t)?t.startsWith("scale")?Rce(e[1]):Dce:Fce,Jj=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Xd.test(e)||e==="0")&&!e.startsWith("url(")),$ce=new Set(["brightness","contrast","saturate","opacity"]);function Nce(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(Nk)||[];if(!n)return t;const i=r.replace(n,"");let s=$ce.has(e)?1:0;return n!==r&&(s*=100),e+"("+s+i+")"}const Vce=/([a-z-]*)\(.*?\)/g,eA={...Xd,getAnimatableNone:t=>{const e=t.match(Vce);return e?e.map(Nce).join(" "):t}},Wce={...FV,color:Do,backgroundColor:Do,outlineColor:Do,fill:Do,stroke:Do,borderColor:Do,borderTopColor:Do,borderRightColor:Do,borderBottomColor:Do,borderLeftColor:Do,filter:eA,WebkitFilter:eA},CM=t=>Wce[t];function C9(t,e){let r=CM(t);return r!==eA&&(r=Xd),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const T9=t=>/^0[^.\s]+$/.test(t);function Uce(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||T9(t)}function qce(t,e,r,n){const i=Jj(e,r);let s;Array.isArray(r)?s=[...r]:s=[null,r];const a=n.from!==void 0?n.from:t.get();let o;const d=[];for(let m=0;m<s.length;m++)s[m]===null&&(s[m]=m===0?a:s[m-1]),Uce(s[m])&&d.push(m),typeof s[m]=="string"&&s[m]!=="none"&&s[m]!=="0"&&(o=s[m]);if(i&&d.length&&o)for(let m=0;m<d.length;m++){const y=d[m];s[y]=C9(e,o)}return s}function Qce({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:d,elapsed:m,...y}){return!!Object.keys(y).length}function TM(t,e){return t[e]||t.default||t}const Hce={skipAnimations:!1},OM=(t,e,r,n={})=>i=>{const s=TM(n,t)||{},a=s.delay||n.delay||0;let{elapsed:o=0}=n;o=o-Ap(a);const d=qce(e,t,r,s),m=d[0],y=d[d.length-1],b=Jj(t,m),w=Jj(t,y);let O={keyframes:d,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-o,onUpdate:A=>{e.set(A),s.onUpdate&&s.onUpdate(A)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(Qce(s)||(O={...O,...Bce(t,O)}),O.duration&&(O.duration=Ap(O.duration)),O.repeatDelay&&(O.repeatDelay=Ap(O.repeatDelay)),!b||!w||Nle.current||s.type===!1||Hce.skipAnimations)return Ice(O);if(!n.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const A=Mce(e,t,O);if(A)return A}return p2(O)};function m2(t){return!!(Ta(t)&&t.add)}const O9=t=>/^\-?\d*\.?\d+$/.test(t);function PM(t,e){t.indexOf(e)===-1&&t.push(e)}function jM(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class AM{constructor(){this.subscriptions=[]}add(e){return PM(this.subscriptions,e),()=>jM(this.subscriptions,e)}notify(e,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,n);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gce=t=>!isNaN(parseFloat(t));class Xce{constructor(e,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,i=!0)=>{this.prev=this.current,this.current=n;const{delta:s,timestamp:a}=xo;this.lastUpdated!==a&&(this.timeDelta=s,this.lastUpdated=a,ni.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ni.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=Gce(this.current),this.owner=r.owner}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new AM);const n=this.events[e].add(r);return e==="change"?()=>{n(),ni.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?w9(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fy(t,e){return new Xce(t,e)}const P9=t=>e=>e.test(t),Kce={test:t=>t==="auto",parse:t=>t},j9=[cm,Ir,hu,ad,nle,rle,Kce],Ix=t=>j9.find(P9(t)),Zce=[...j9,Do,Xd],Yce=t=>Zce.find(P9(t));function Jce(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Fy(r))}function eue(t,e){const r=Wk(t,e);let{transitionEnd:n={},transition:i={},...s}=r?t.makeTargetAnimatable(r,!1):{};s={...s,...n};for(const a in s){const o=yle(s[a]);Jce(t,a,o)}}function tue(t,e,r){var n,i;const s=Object.keys(e).filter(o=>!t.hasValue(o)),a=s.length;if(a)for(let o=0;o<a;o++){const d=s[o],m=e[d];let y=null;Array.isArray(m)&&(y=m[0]),y===null&&(y=(i=(n=r[d])!==null&&n!==void 0?n:t.readValue(d))!==null&&i!==void 0?i:e[d]),y!=null&&(typeof y=="string"&&(O9(y)||T9(y))?y=parseFloat(y):!Yce(y)&&Xd.test(m)&&(y=C9(d,m)),t.addValue(d,Fy(y,{owner:t})),r[d]===void 0&&(r[d]=y),y!==null&&t.setBaseTarget(d,y))}}function rue(t,e){return e?(e[t]||e.default||e).from:void 0}function nue(t,e,r){const n={};for(const i in t){const s=rue(i,e);if(s!==void 0)n[i]=s;else{const a=r.getValue(i);a&&(n[i]=a.get())}}return n}function iue({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function sue(t,e){const r=t.get();if(Array.isArray(e)){for(let n=0;n<e.length;n++)if(e[n]!==r)return!0}else return r!==e}function A9(t,e,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:a,...o}=t.makeTargetAnimatable(e);const d=t.getValue("willChange");n&&(s=n);const m=[],y=i&&t.animationState&&t.animationState.getState()[i];for(const b in o){const w=t.getValue(b),O=o[b];if(!w||O===void 0||y&&iue(y,b))continue;const A={delay:r,elapsed:0,...TM(s||{},b)};if(window.HandoffAppearAnimations){const R=t.getProps()[EV];if(R){const F=window.HandoffAppearAnimations(R,b,w,ni);F!==null&&(A.elapsed=F,A.isHandoff=!0)}}let E=!A.isHandoff&&!sue(w,O);if(A.type==="spring"&&(w.getVelocity()||A.velocity)&&(E=!1),w.animation&&(E=!1),E)continue;w.start(OM(b,w,O,t.shouldReduceMotion&&lm.has(b)?{type:!1}:A));const $=w.animation;m2(d)&&(d.add(b),$.then(()=>d.remove(b))),m.push($)}return a&&Promise.all(m).then(()=>{a&&eue(t,a)}),m}function tA(t,e,r={}){const n=Wk(t,e,r.custom);let{transition:i=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);const s=n?()=>Promise.all(A9(t,n,r)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:m=0,staggerChildren:y,staggerDirection:b}=i;return oue(t,e,m+d,y,b,r)}:()=>Promise.resolve(),{when:o}=i;if(o){const[d,m]=o==="beforeChildren"?[s,a]:[a,s];return d().then(()=>m())}else return Promise.all([s(),a(r.delay)])}function oue(t,e,r=0,n=0,i=1,s){const a=[],o=(t.variantChildren.size-1)*n,d=i===1?(m=0)=>m*n:(m=0)=>o-m*n;return Array.from(t.variantChildren).sort(aue).forEach((m,y)=>{m.notify("AnimationStart",e),a.push(tA(m,e,{...s,delay:r+d(y)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(a)}function aue(t,e){return t.sortNodePosition(e)}function lue(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>tA(t,s,r));n=Promise.all(i)}else if(typeof e=="string")n=tA(t,e,r);else{const i=typeof e=="function"?Wk(t,e,r.custom):e;n=Promise.all(A9(t,i,r))}return n.then(()=>t.notify("AnimationComplete",e))}const cue=[...hM].reverse(),uue=hM.length;function hue(t){return e=>Promise.all(e.map(({animation:r,options:n})=>lue(t,r,n)))}function due(t){let e=hue(t);const r=pue();let n=!0;const i=(d,m)=>{const y=Wk(t,m);if(y){const{transition:b,transitionEnd:w,...O}=y;d={...d,...O,...w}}return d};function s(d){e=d(t)}function a(d,m){const y=t.getProps(),b=t.getVariantContext(!0)||{},w=[],O=new Set;let A={},E=1/0;for(let R=0;R<uue;R++){const F=cue[R],L=r[F],U=y[F]!==void 0?y[F]:b[F],Q=pb(U),Y=F===m?L.isActive:null;Y===!1&&(E=R);let Z=U===b[F]&&U!==y[F]&&Q;if(Z&&n&&t.manuallyAnimateOnMount&&(Z=!1),L.protectedKeys={...A},!L.isActive&&Y===null||!U&&!L.prevProp||Bk(U)||typeof U=="boolean")continue;let re=fue(L.prevProp,U)||F===m&&L.isActive&&!Z&&Q||R>E&&Q,he=!1;const le=Array.isArray(U)?U:[U];let Ze=le.reduce(i,{});Y===!1&&(Ze={});const{prevResolvedValues:Ee={}}=L,qe={...Ee,...Ze},et=at=>{re=!0,O.has(at)&&(he=!0,O.delete(at)),L.needsAnimating[at]=!0};for(const at in qe){const Be=Ze[at],Me=Ee[at];if(A.hasOwnProperty(at))continue;let Ge=!1;h2(Be)&&h2(Me)?Ge=!JV(Be,Me):Ge=Be!==Me,Ge?Be!==void 0?et(at):O.add(at):Be!==void 0&&O.has(at)?et(at):L.protectedKeys[at]=!0}L.prevProp=U,L.prevResolvedValues=Ze,L.isActive&&(A={...A,...Ze}),n&&t.blockInitialAnimation&&(re=!1),re&&(!Z||he)&&w.push(...le.map(at=>({animation:at,options:{type:F,...d}})))}if(O.size){const R={};O.forEach(F=>{const L=t.getBaseTarget(F);L!==void 0&&(R[F]=L)}),w.push({animation:R})}let $=!!w.length;return n&&(y.initial===!1||y.initial===y.animate)&&!t.manuallyAnimateOnMount&&($=!1),n=!1,$?e(w):Promise.resolve()}function o(d,m,y){var b;if(r[d].isActive===m)return Promise.resolve();(b=t.variantChildren)===null||b===void 0||b.forEach(O=>{var A;return(A=O.animationState)===null||A===void 0?void 0:A.setActive(d,m)}),r[d].isActive=m;const w=a(y,d);for(const O in r)r[O].protectedKeys={};return w}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>r}}function fue(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!JV(e,t):!1}function Hf(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function pue(){return{animate:Hf(!0),whileInView:Hf(),whileHover:Hf(),whileTap:Hf(),whileDrag:Hf(),whileFocus:Hf(),exit:Hf()}}class mue extends df{constructor(e){super(e),e.animationState||(e.animationState=due(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Bk(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let gue=0;class yue extends df{constructor(){super(...arguments),this.id=gue++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:n??this.node.getProps().custom});r&&!e&&s.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const xue={animation:{Feature:mue},exit:{Feature:yue}},uL=(t,e)=>Math.abs(t-e);function vue(t,e){const r=uL(t.x,e.x),n=uL(t.y,e.y);return Math.sqrt(r**2+n**2)}class E9{constructor(e,r,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=AO(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,O=vue(b.offset,{x:0,y:0})>=3;if(!w&&!O)return;const{point:A}=b,{timestamp:E}=xo;this.history.push({...A,timestamp:E});const{onStart:$,onMove:R}=this.handlers;w||($&&$(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,b)},this.handlePointerMove=(b,w)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=jO(w,this.transformPagePoint),ni.update(this.updatePoint,!0)},this.handlePointerUp=(b,w)=>{this.end();const{onEnd:O,onSessionEnd:A,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const $=AO(b.type==="pointercancel"?this.lastMoveEventInfo:jO(w,this.transformPagePoint),this.history);this.startEvent&&O&&O(b,$),A&&A(b,$)},!GV(e))return;this.dragSnapToOrigin=s,this.handlers=r,this.transformPagePoint=n,this.contextWindow=i||window;const a=Vk(e),o=jO(a,this.transformPagePoint),{point:d}=o,{timestamp:m}=xo;this.history=[{...d,timestamp:m}];const{onSessionStart:y}=r;y&&y(e,AO(o,this.history)),this.removeListeners=Bd(ah(this.contextWindow,"pointermove",this.handlePointerMove),ah(this.contextWindow,"pointerup",this.handlePointerUp),ah(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),yh(this.updatePoint)}}function jO(t,e){return e?{point:e(t.point)}:t}function hL(t,e){return{x:t.x-e.x,y:t.y-e.y}}function AO({point:t},e){return{point:t,delta:hL(t,z9(e)),offset:hL(t,bue(e)),velocity:_ue(e,.1)}}function bue(t){return t[0]}function z9(t){return t[t.length-1]}function _ue(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const i=z9(t);for(;r>=0&&(n=t[r],!(i.timestamp-n.timestamp>Ap(e)));)r--;if(!n)return{x:0,y:0};const s=lh(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Ya(t){return t.max-t.min}function rA(t,e=0,r=.01){return Math.abs(t-e)<=r}function dL(t,e,r,n=.5){t.origin=n,t.originPoint=ki(e.min,e.max,t.origin),t.scale=Ya(r)/Ya(e),(rA(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ki(r.min,r.max,t.origin)-t.originPoint,(rA(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Av(t,e,r,n){dL(t.x,e.x,r.x,n?n.originX:void 0),dL(t.y,e.y,r.y,n?n.originY:void 0)}function fL(t,e,r){t.min=r.min+e.min,t.max=t.min+Ya(e)}function wue(t,e,r){fL(t.x,e.x,r.x),fL(t.y,e.y,r.y)}function pL(t,e,r){t.min=e.min-r.min,t.max=t.min+Ya(e)}function Ev(t,e,r){pL(t.x,e.x,r.x),pL(t.y,e.y,r.y)}function Sue(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?ki(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?ki(r,t,n.max):Math.min(t,r)),t}function mL(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function kue(t,{top:e,left:r,bottom:n,right:i}){return{x:mL(t.x,r,i),y:mL(t.y,e,n)}}function gL(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function Cue(t,e){return{x:gL(t.x,e.x),y:gL(t.y,e.y)}}function Tue(t,e){let r=.5;const n=Ya(t),i=Ya(e);return i>n?r=gb(e.min,e.max-n,t.min):n>i&&(r=gb(t.min,t.max-i,e.min)),Gd(0,1,r)}function Oue(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const nA=.35;function Pue(t=nA){return t===!1?t=0:t===!0&&(t=nA),{x:yL(t,"left","right"),y:yL(t,"top","bottom")}}function yL(t,e,r){return{min:xL(t,e),max:xL(t,r)}}function xL(t,e){return typeof t=="number"?t:t[e]||0}const vL=()=>({translate:0,scale:1,origin:0,originPoint:0}),Rg=()=>({x:vL(),y:vL()}),bL=()=>({min:0,max:0}),Xi=()=>({x:bL(),y:bL()});function yl(t){return[t("x"),t("y")]}function M9({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function jue({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Aue(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function EO(t){return t===void 0||t===1}function iA({scale:t,scaleX:e,scaleY:r}){return!EO(t)||!EO(e)||!EO(r)}function Yf(t){return iA(t)||I9(t)||t.z||t.rotate||t.rotateX||t.rotateY}function I9(t){return _L(t.x)||_L(t.y)}function _L(t){return t&&t!=="0%"}function g2(t,e,r){const n=t-r,i=e*n;return r+i}function wL(t,e,r,n,i){return i!==void 0&&(t=g2(t,i,n)),g2(t,r,n)+e}function sA(t,e=0,r=1,n,i){t.min=wL(t.min,e,r,n,i),t.max=wL(t.max,e,r,n,i)}function D9(t,{x:e,y:r}){sA(t.x,e.translate,e.scale,e.originPoint),sA(t.y,r.translate,r.scale,r.originPoint)}function Eue(t,e,r,n=!1){const i=r.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=r[o],a=s.projectionDelta;const d=s.instance;d&&d.style&&d.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Lg(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,D9(t,a)),n&&Yf(s.latestValues)&&Lg(t,s.latestValues))}e.x=SL(e.x),e.y=SL(e.y)}function SL(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function dd(t,e){t.min=t.min+e,t.max=t.max+e}function kL(t,e,[r,n,i]){const s=e[i]!==void 0?e[i]:.5,a=ki(t.min,t.max,s);sA(t,e[r],e[n],a,e.scale)}const zue=["x","scaleX","originX"],Mue=["y","scaleY","originY"];function Lg(t,e){kL(t.x,e,zue),kL(t.y,e,Mue)}function R9(t,e){return M9(Aue(t.getBoundingClientRect(),e))}function Iue(t,e,r){const n=R9(t,r),{scroll:i}=e;return i&&(dd(n.x,i.offset.x),dd(n.y,i.offset.y)),n}const L9=({current:t})=>t?t.ownerDocument.defaultView:null,Due=new WeakMap;class Rue{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xi(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=y=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Vk(y,"page").point)},s=(y,b)=>{const{drag:w,dragPropagation:O,onDragStart:A}=this.getProps();if(w&&!O&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=KV(w),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),yl($=>{let R=this.getAxisMotionValue($).get()||0;if(hu.test(R)){const{projection:F}=this.visualElement;if(F&&F.layout){const L=F.layout.layoutBox[$];L&&(R=Ya(L)*(parseFloat(R)/100))}}this.originPoint[$]=R}),A&&ni.update(()=>A(y,b),!1,!0);const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},a=(y,b)=>{const{dragPropagation:w,dragDirectionLock:O,onDirectionLock:A,onDrag:E}=this.getProps();if(!w&&!this.openGlobalLock)return;const{offset:$}=b;if(O&&this.currentDirection===null){this.currentDirection=Lue($),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",b.point,$),this.updateAxis("y",b.point,$),this.visualElement.render(),E&&E(y,b)},o=(y,b)=>this.stop(y,b),d=()=>yl(y=>{var b;return this.getAnimationState(y)==="paused"&&((b=this.getAxisMotionValue(y).animation)===null||b===void 0?void 0:b.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new E9(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:L9(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&ni.update(()=>s(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:i}=this.getProps();if(!n||!cw(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=Sue(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;r&&Ig(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=kue(i.layoutBox,r):this.constraints=!1,this.elastic=Pue(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&yl(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=Oue(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Ig(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Iue(n,i.root,this.visualElement.getTransformPagePoint());let a=Cue(i.layout.layoutBox,s);if(r){const o=r(jue(a));this.hasMutatedConstraints=!!o,o&&(a=M9(o))}return a}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),d=this.constraints||{},m=yl(y=>{if(!cw(y,r,this.currentDirection))return;let b=d&&d[y]||{};a&&(b={min:0,max:0});const w=i?200:1e6,O=i?40:1e7,A={type:"inertia",velocity:n?e[y]:0,bounceStiffness:w,bounceDamping:O,timeConstant:750,restDelta:1,restSpeed:10,...s,...b};return this.startAxisValueAnimation(y,A)});return Promise.all(m).then(o)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return n.start(OM(e,n,0,r))}stopAnimation(){yl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){yl(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){yl(r=>{const{drag:n}=this.getProps();if(!cw(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(r);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[r];s.set(e[r]-ki(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Ig(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};yl(a=>{const o=this.getAxisMotionValue(a);if(o){const d=o.get();i[a]=Tue({min:d,max:d},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),yl(a=>{if(!cw(a,e,null))return;const o=this.getAxisMotionValue(a),{min:d,max:m}=this.constraints[a];o.set(ki(d,m,i[a]))})}addListeners(){if(!this.visualElement.current)return;Due.set(this.visualElement,this);const e=this.visualElement.current,r=ah(e,"pointerdown",d=>{const{drag:m,dragListener:y=!0}=this.getProps();m&&y&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();Ig(d)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),n();const a=nh(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m})=>{this.isDragging&&m&&(yl(y=>{const b=this.getAxisMotionValue(y);b&&(this.originPoint[y]+=d[y].translate,b.set(b.get()+d[y].translate))}),this.visualElement.render())});return()=>{a(),r(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=nA,dragMomentum:o=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function cw(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function Lue(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class Fue extends df{constructor(e){super(e),this.removeGroupControls=$i,this.removeListeners=$i,this.controls=new Rue(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$i}unmount(){this.removeGroupControls(),this.removeListeners()}}const CL=t=>(e,r)=>{t&&ni.update(()=>t(e,r))};class Bue extends df{constructor(){super(...arguments),this.removePointerDownListener=$i}onPointerDown(e){this.session=new E9(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:L9(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:CL(e),onStart:CL(r),onMove:n,onEnd:(s,a)=>{delete this.session,i&&ni.update(()=>i(s,a))}}}mount(){this.removePointerDownListener=ah(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function F9(){const t=I.useContext(u1);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:n}=t,i=I.useId();return I.useEffect(()=>n(i),[]),!e&&r?[!1,()=>r&&r(i)]:[!0]}function $ue(){return Nue(I.useContext(u1))}function Nue(t){return t===null?!0:t.isPresent}const fS={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function TL(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Dx={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ir.test(t))t=parseFloat(t);else return t;const r=TL(t,e.target.x),n=TL(t,e.target.y);return`${r}% ${n}%`}},Vue={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,i=Xd.parse(t);if(i.length>5)return n;const s=Xd.createTransformer(t),a=typeof i[0]!="number"?1:0,o=r.x.scale*e.x,d=r.y.scale*e.y;i[0+a]/=o,i[1+a]/=d;const m=ki(o,d,.5);return typeof i[2+a]=="number"&&(i[2+a]/=m),typeof i[3+a]=="number"&&(i[3+a]/=m),s(i)}};class Wue extends Mi.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;Xae(Uue),s&&(r.group&&r.group.add(s),n&&n.register&&i&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),fS.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:i,isPresent:s}=this.props,a=n.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==r||r===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||ni.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function B9(t){const[e,r]=F9(),n=I.useContext(fM);return Mi.createElement(Wue,{...t,layoutGroup:n,switchLayoutGroup:I.useContext(MV),isPresent:e,safeToRemove:r})}const Uue={borderRadius:{...Dx,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dx,borderTopRightRadius:Dx,borderBottomLeftRadius:Dx,borderBottomRightRadius:Dx,boxShadow:Vue},$9=["TopLeft","TopRight","BottomLeft","BottomRight"],que=$9.length,OL=t=>typeof t=="string"?parseFloat(t):t,PL=t=>typeof t=="number"||Ir.test(t);function Que(t,e,r,n,i,s){i?(t.opacity=ki(0,r.opacity!==void 0?r.opacity:1,Hue(n)),t.opacityExit=ki(e.opacity!==void 0?e.opacity:1,0,Gue(n))):s&&(t.opacity=ki(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let a=0;a<que;a++){const o=`border${$9[a]}Radius`;let d=jL(e,o),m=jL(r,o);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||PL(d)===PL(m)?(t[o]=Math.max(ki(OL(d),OL(m),n),0),(hu.test(m)||hu.test(d))&&(t[o]+="%")):t[o]=m}(e.rotate||r.rotate)&&(t.rotate=ki(e.rotate||0,r.rotate||0,n))}function jL(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Hue=N9(0,.5,l9),Gue=N9(.5,.95,$i);function N9(t,e,r){return n=>n<t?0:n>e?1:r(gb(t,e,n))}function AL(t,e){t.min=e.min,t.max=e.max}function ml(t,e){AL(t.x,e.x),AL(t.y,e.y)}function EL(t,e,r,n,i){return t-=e,t=g2(t,1/r,n),i!==void 0&&(t=g2(t,1/i,n)),t}function Xue(t,e=0,r=1,n=.5,i,s=t,a=t){if(hu.test(e)&&(e=parseFloat(e),e=ki(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=ki(s.min,s.max,n);t===s&&(o-=e),t.min=EL(t.min,e,r,o,i),t.max=EL(t.max,e,r,o,i)}function zL(t,e,[r,n,i],s,a){Xue(t,e[r],e[n],e[i],e.scale,s,a)}const Kue=["x","scaleX","originX"],Zue=["y","scaleY","originY"];function ML(t,e,r,n){zL(t.x,e,Kue,r?r.x:void 0,n?n.x:void 0),zL(t.y,e,Zue,r?r.y:void 0,n?n.y:void 0)}function IL(t){return t.translate===0&&t.scale===1}function V9(t){return IL(t.x)&&IL(t.y)}function Yue(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function W9(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function DL(t){return Ya(t.x)/Ya(t.y)}class Jue{constructor(){this.members=[]}add(e){PM(this.members,e),e.scheduleRender()}remove(e){if(jM(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function RL(t,e,r){let n="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(n=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{rotate:d,rotateX:m,rotateY:y}=r;d&&(n+=`rotate(${d}deg) `),m&&(n+=`rotateX(${m}deg) `),y&&(n+=`rotateY(${y}deg) `)}const a=t.x.scale*e.x,o=t.y.scale*e.y;return(a!==1||o!==1)&&(n+=`scale(${a}, ${o})`),n||"none"}const ehe=(t,e)=>t.depth-e.depth;class the{constructor(){this.children=[],this.isDirty=!1}add(e){PM(this.children,e),this.isDirty=!0}remove(e){jM(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ehe),this.isDirty=!1,this.children.forEach(e)}}function rhe(t,e){const r=performance.now(),n=({timestamp:i})=>{const s=i-r;s>=e&&(yh(n),t(s-e))};return ni.read(n,!0),()=>yh(n)}function nhe(t){window.MotionDebug&&window.MotionDebug.record(t)}function ihe(t){return t instanceof SVGElement&&t.tagName!=="svg"}function she(t,e,r){const n=Ta(t)?t:Fy(t);return n.start(OM("",n,e,r)),n.animation}const LL=["","X","Y","Z"],ohe={visibility:"hidden"},FL=1e3;let ahe=0;const Jf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function U9({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=ahe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Jf.totalNodes=Jf.resolvedTargetDeltas=Jf.recalculatedProjection=0,this.nodes.forEach(uhe),this.nodes.forEach(mhe),this.nodes.forEach(ghe),this.nodes.forEach(hhe),nhe(Jf)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new the)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new AM),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const d=this.eventHandlers.get(a);d&&d.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=ihe(a),this.instance=a;const{layoutId:d,layout:m,visualElement:y}=this.options;if(y&&!y.current&&y.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(m||d)&&(this.isLayoutDirty=!0),t){let b;const w=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,b&&b(),b=rhe(w,250),fS.hasAnimatedSinceResize&&(fS.hasAnimatedSinceResize=!1,this.nodes.forEach($L))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&y&&(d||m)&&this.addEventListener("didUpdate",({delta:b,hasLayoutChanged:w,hasRelativeTargetChanged:O,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||y.getDefaultTransition()||_he,{onLayoutAnimationStart:$,onLayoutAnimationComplete:R}=y.getProps(),F=!this.targetLayout||!W9(this.targetLayout,A)||O,L=!w&&O;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||L||w&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(b,L);const U={...TM(E,"layout"),onPlay:$,onComplete:R};(y.shouldReduceMotion||this.options.layoutRoot)&&(U.delay=0,U.type=!1),this.startAnimation(U)}else w||$L(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,yh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(yhe),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const b=this.path[y];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:o,layout:d}=this.options;if(o===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(BL);return}this.isUpdating||this.nodes.forEach(fhe),this.isUpdating=!1,this.nodes.forEach(phe),this.nodes.forEach(lhe),this.nodes.forEach(che),this.clearAllSnapshots();const o=performance.now();xo.delta=Gd(0,1e3/60,o-xo.timestamp),xo.timestamp=o,xo.isProcessing=!0,_O.update.process(xo),_O.preRender.process(xo),_O.render.process(xo),xo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(dhe),this.sharedNodes.forEach(xhe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ni.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ni.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform,o=this.projectionDelta&&!V9(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,y=m!==this.prevTransformTemplateValue;a&&(o||Yf(this.latestValues)||y)&&(i(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let d=this.removeElementScroll(o);return a&&(d=this.removeTransform(d)),whe(d),{animationId:this.root.animationId,measuredBox:o,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Xi();const o=a.measureViewportBox(),{scroll:d}=this.root;return d&&(dd(o.x,d.offset.x),dd(o.y,d.offset.y)),o}removeElementScroll(a){const o=Xi();ml(o,a);for(let d=0;d<this.path.length;d++){const m=this.path[d],{scroll:y,options:b}=m;if(m!==this.root&&y&&b.layoutScroll){if(y.isRoot){ml(o,a);const{scroll:w}=this.root;w&&(dd(o.x,-w.offset.x),dd(o.y,-w.offset.y))}dd(o.x,y.offset.x),dd(o.y,y.offset.y)}}return o}applyTransform(a,o=!1){const d=Xi();ml(d,a);for(let m=0;m<this.path.length;m++){const y=this.path[m];!o&&y.options.layoutScroll&&y.scroll&&y!==y.root&&Lg(d,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),Yf(y.latestValues)&&Lg(d,y.latestValues)}return Yf(this.latestValues)&&Lg(d,this.latestValues),d}removeTransform(a){const o=Xi();ml(o,a);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!Yf(m.latestValues))continue;iA(m.latestValues)&&m.updateSnapshot();const y=Xi(),b=m.measurePageBox();ml(y,b),ML(o,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,y)}return Yf(this.latestValues)&&ML(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==d;if(!(a||m&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:b,layoutId:w}=this.options;if(!(!this.layout||!(b||w))){if(this.resolvedRelativeTargetAt=xo.timestamp,!this.targetDelta&&!this.relativeTarget){const O=this.getClosestProjectingParent();O&&O.layout&&this.animationProgress!==1?(this.relativeParent=O,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xi(),this.relativeTargetOrigin=Xi(),Ev(this.relativeTargetOrigin,this.layout.layoutBox,O.layout.layoutBox),ml(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Xi(),this.targetWithTransforms=Xi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wue(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ml(this.target,this.layout.layoutBox),D9(this.target,this.targetDelta)):ml(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const O=this.getClosestProjectingParent();O&&!!O.resumingFrom==!!this.resumingFrom&&!O.options.layoutScroll&&O.target&&this.animationProgress!==1?(this.relativeParent=O,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xi(),this.relativeTargetOrigin=Xi(),Ev(this.relativeTargetOrigin,this.target,O.target),ml(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Jf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||iA(this.parent.latestValues)||I9(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),d=!!this.resumingFrom||this!==o;let m=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(m=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===xo.timestamp&&(m=!1),m)return;const{layout:y,layoutId:b}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||b))return;ml(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,O=this.treeScale.y;Eue(this.layoutCorrected,this.treeScale,this.path,d),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox);const{target:A}=o;if(!A){this.projectionTransform&&(this.projectionDelta=Rg(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Rg(),this.projectionDeltaWithTransform=Rg());const E=this.projectionTransform;Av(this.projectionDelta,this.layoutCorrected,A,this.latestValues),this.projectionTransform=RL(this.projectionDelta,this.treeScale),(this.projectionTransform!==E||this.treeScale.x!==w||this.treeScale.y!==O)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),Jf.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,o=!1){const d=this.snapshot,m=d?d.latestValues:{},y={...this.latestValues},b=Rg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const w=Xi(),O=d?d.source:void 0,A=this.layout?this.layout.source:void 0,E=O!==A,$=this.getStack(),R=!$||$.members.length<=1,F=!!(E&&!R&&this.options.crossfade===!0&&!this.path.some(bhe));this.animationProgress=0;let L;this.mixTargetDelta=U=>{const Q=U/1e3;NL(b.x,a.x,Q),NL(b.y,a.y,Q),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ev(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),vhe(this.relativeTarget,this.relativeTargetOrigin,w,Q),L&&Yue(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=Xi()),ml(L,this.relativeTarget)),E&&(this.animationValues=y,Que(y,m,this.latestValues,Q,F,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(yh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ni.update(()=>{fS.hasAnimatedSinceResize=!0,this.currentAnimation=she(0,FL,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(FL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:d,layout:m,latestValues:y}=a;if(!(!o||!d||!m)){if(this!==a&&this.layout&&m&&q9(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||Xi();const b=Ya(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+b;const w=Ya(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+w}ml(o,d),Lg(o,y),Av(this.projectionDeltaWithTransform,this.layoutCorrected,o,y)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Jue),this.sharedNodes.get(a).add(o);const m=o.options.initialPromotionConfig;o.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:d}=a;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(o=!0),!o)return;const m={};for(let y=0;y<LL.length;y++){const b="rotate"+LL[y];d[b]&&(m[b]=d[b],a.setStaticValue(b,0))}a.render();for(const y in m)a.setStaticValue(y,m[y]);a.scheduleRender()}getProjectionStyles(a){var o,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ohe;const m={visibility:""},y=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,m.opacity="",m.pointerEvents=dS(a==null?void 0:a.pointerEvents)||"",m.transform=y?y(this.latestValues,""):"none",m;const b=this.getLead();if(!this.projectionDelta||!this.layout||!b.target){const E={};return this.options.layoutId&&(E.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,E.pointerEvents=dS(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Yf(this.latestValues)&&(E.transform=y?y({},""):"none",this.hasProjected=!1),E}const w=b.animationValues||b.latestValues;this.applyTransformsToTarget(),m.transform=RL(this.projectionDeltaWithTransform,this.treeScale,w),y&&(m.transform=y(w,m.transform));const{x:O,y:A}=this.projectionDelta;m.transformOrigin=`${O.origin*100}% ${A.origin*100}% 0`,b.animationValues?m.opacity=b===this?(d=(o=w.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:m.opacity=b===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const E in c2){if(w[E]===void 0)continue;const{correct:$,applyTo:R}=c2[E],F=m.transform==="none"?w[E]:$(w[E],b);if(R){const L=R.length;for(let U=0;U<L;U++)m[R[U]]=F}else m[E]=F}return this.options.layoutId&&(m.pointerEvents=b===this?dS(a==null?void 0:a.pointerEvents)||"":"none"),m}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(BL),this.root.sharedNodes.clear()}}}function lhe(t){t.updateLayout()}function che(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:s}=t.options,a=r.source!==t.layout.source;s==="size"?yl(b=>{const w=a?r.measuredBox[b]:r.layoutBox[b],O=Ya(w);w.min=n[b].min,w.max=w.min+O}):q9(s,r.layoutBox,n)&&yl(b=>{const w=a?r.measuredBox[b]:r.layoutBox[b],O=Ya(n[b]);w.max=w.min+O,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[b].max=t.relativeTarget[b].min+O)});const o=Rg();Av(o,n,r.layoutBox);const d=Rg();a?Av(d,t.applyTransform(i,!0),r.measuredBox):Av(d,n,r.layoutBox);const m=!V9(o);let y=!1;if(!t.resumeFrom){const b=t.getClosestProjectingParent();if(b&&!b.resumeFrom){const{snapshot:w,layout:O}=b;if(w&&O){const A=Xi();Ev(A,r.layoutBox,w.layoutBox);const E=Xi();Ev(E,n,O.layoutBox),W9(A,E)||(y=!0),b.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=A,t.relativeParent=b)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:d,layoutDelta:o,hasLayoutChanged:m,hasRelativeTargetChanged:y})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function uhe(t){Jf.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function hhe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function dhe(t){t.clearSnapshot()}function BL(t){t.clearMeasurements()}function fhe(t){t.isLayoutDirty=!1}function phe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function $L(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function mhe(t){t.resolveTargetDelta()}function ghe(t){t.calcProjection()}function yhe(t){t.resetRotation()}function xhe(t){t.removeLeadSnapshot()}function NL(t,e,r){t.translate=ki(e.translate,0,r),t.scale=ki(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function VL(t,e,r,n){t.min=ki(e.min,r.min,n),t.max=ki(e.max,r.max,n)}function vhe(t,e,r,n){VL(t.x,e.x,r.x,n),VL(t.y,e.y,r.y,n)}function bhe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const _he={duration:.45,ease:[.4,0,.1,1]},WL=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),UL=WL("applewebkit/")&&!WL("chrome/")?Math.round:$i;function qL(t){t.min=UL(t.min),t.max=UL(t.max)}function whe(t){qL(t.x),qL(t.y)}function q9(t,e,r){return t==="position"||t==="preserve-aspect"&&!rA(DL(e),DL(r),.2)}const She=U9({attachResizeListener:(t,e)=>nh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),zO={current:void 0},Q9=U9({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!zO.current){const t=new She({});t.mount(window),t.setOptions({layoutScroll:!0}),zO.current=t}return zO.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),khe={pan:{Feature:Bue},drag:{Feature:Fue,ProjectionNode:Q9,MeasureLayout:B9}},Che=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function The(t){const e=Che.exec(t);if(!e)return[,];const[,r,n]=e;return[r,n]}function oA(t,e,r=1){const[n,i]=The(t);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const a=s.trim();return O9(a)?parseFloat(a):a}else return Xj(i)?oA(i,e,r+1):i}function Ohe(t,{...e},r){const n=t.current;if(!(n instanceof Element))return{target:e,transitionEnd:r};r&&(r={...r}),t.values.forEach(i=>{const s=i.get();if(!Xj(s))return;const a=oA(s,n);a&&i.set(a)});for(const i in e){const s=e[i];if(!Xj(s))continue;const a=oA(s,n);a&&(e[i]=a,r||(r={}),r[i]===void 0&&(r[i]=s))}return{target:e,transitionEnd:r}}const Phe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),H9=t=>Phe.has(t),jhe=t=>Object.keys(t).some(H9),QL=t=>t===cm||t===Ir,HL=(t,e)=>parseFloat(t.split(", ")[e]),GL=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/);if(i)return HL(i[1],e);{const s=n.match(/^matrix\((.+)\)$/);return s?HL(s[1],t):0}},Ahe=new Set(["x","y","z"]),Ehe=h1.filter(t=>!Ahe.has(t));function zhe(t){const e=[];return Ehe.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e.length&&t.render(),e}const By={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:GL(4,13),y:GL(5,14)};By.translateX=By.x;By.translateY=By.y;const Mhe=(t,e,r)=>{const n=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:a}=s,o={};a==="none"&&e.setStaticValue("display",t.display||"block"),r.forEach(m=>{o[m]=By[m](n,s)}),e.render();const d=e.measureViewportBox();return r.forEach(m=>{const y=e.getValue(m);y&&y.jump(o[m]),t[m]=By[m](d,s)}),t},Ihe=(t,e,r={},n={})=>{e={...e},n={...n};const i=Object.keys(e).filter(H9);let s=[],a=!1;const o=[];if(i.forEach(d=>{const m=t.getValue(d);if(!t.hasValue(d))return;let y=r[d],b=Ix(y);const w=e[d];let O;if(h2(w)){const A=w.length,E=w[0]===null?1:0;y=w[E],b=Ix(y);for(let $=E;$<A&&w[$]!==null;$++)O?_M(Ix(w[$])===O):O=Ix(w[$])}else O=Ix(w);if(b!==O)if(QL(b)&&QL(O)){const A=m.get();typeof A=="string"&&m.set(parseFloat(A)),typeof w=="string"?e[d]=parseFloat(w):Array.isArray(w)&&O===Ir&&(e[d]=w.map(parseFloat))}else b!=null&&b.transform&&(O!=null&&O.transform)&&(y===0||w===0)?y===0?m.set(O.transform(y)):e[d]=b.transform(w):(a||(s=zhe(t),a=!0),o.push(d),n[d]=n[d]!==void 0?n[d]:e[d],m.jump(w))}),o.length){const d=o.indexOf("height")>=0?window.pageYOffset:null,m=Mhe(e,t,o);return s.length&&s.forEach(([y,b])=>{t.getValue(y).set(b)}),t.render(),Fk&&d!==null&&window.scrollTo({top:d}),{target:m,transitionEnd:n}}else return{target:e,transitionEnd:n}};function Dhe(t,e,r,n){return jhe(e)?Ihe(t,e,r,n):{target:e,transitionEnd:n}}const Rhe=(t,e,r,n)=>{const i=Ohe(t,e,n);return e=i.target,n=i.transitionEnd,Dhe(t,e,r,n)},aA={current:null},G9={current:!1};function Lhe(){if(G9.current=!0,!!Fk)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>aA.current=t.matches;t.addListener(e),e()}else aA.current=!1}function Fhe(t,e,r){const{willChange:n}=e;for(const i in e){const s=e[i],a=r[i];if(Ta(s))t.addValue(i,s),m2(n)&&n.add(i);else if(Ta(a))t.addValue(i,Fy(s,{owner:t})),m2(n)&&n.remove(i);else if(a!==s)if(t.hasValue(i)){const o=t.getValue(i);!o.hasAnimated&&o.set(s)}else{const o=t.getStaticValue(i);t.addValue(i,Fy(o!==void 0?o:s,{owner:t}))}}for(const i in r)e[i]===void 0&&t.removeValue(i);return e}const XL=new WeakMap,X9=Object.keys(mb),Bhe=X9.length,KL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],$he=dM.length;class Nhe{constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:i,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ni.render(this.render,!1,!0);const{latestValues:o,renderState:d}=s;this.latestValues=o,this.baseTarget={...o},this.initialValues=r.initial?{...o}:{},this.renderState=d,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=$k(r),this.isVariantNode=zV(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...y}=this.scrapeMotionValuesFromProps(r,{});for(const b in y){const w=y[b];o[b]!==void 0&&Ta(w)&&(w.set(o[b],!1),m2(m)&&m.add(b))}}scrapeMotionValuesFromProps(e,r){return{}}mount(e){this.current=e,XL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),G9.current||Lhe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:aA.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){XL.delete(this.current),this.projection&&this.projection.unmount(),yh(this.notifyUpdate),yh(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,r){const n=lm.has(e),i=r.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&ni.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...r},n,i,s){let a,o;for(let d=0;d<Bhe;d++){const m=X9[d],{isEnabled:y,Feature:b,ProjectionNode:w,MeasureLayout:O}=mb[m];w&&(a=w),y(r)&&(!this.features[m]&&b&&(this.features[m]=new b(this)),O&&(o=O))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:m,drag:y,dragConstraints:b,layoutScroll:w,layoutRoot:O}=r;this.projection.setOptions({layoutId:d,layout:m,alwaysMeasureLayout:!!y||b&&Ig(b),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof m=="string"?m:"both",initialPromotionConfig:s,layoutScroll:w,layoutRoot:O})}return o}updateFeatures(){for(const e in this.features){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}makeTargetAnimatable(e,r=!0){return this.makeTargetAnimatableFromInstance(e,this.props,r)}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<KL.length;n++){const i=KL[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Fhe(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<$he;n++){const i=dM[n],s=this.props[i];(pb(s)||s===!1)&&(r[i]=s)}return r}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){r!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,r)),this.values.set(e,r),this.latestValues[e]=r.get()}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Fy(r,{owner:this}),this.addValue(e,n)),n}readValue(e){var r;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props,i=typeof n=="string"||typeof n=="object"?(r=bM(this.props,n))===null||r===void 0?void 0:r[e]:void 0;if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ta(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new AM),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class K9 extends Nhe{sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:r,...n},{transformValues:i},s){let a=nue(n,e||{},this);if(i&&(r&&(r=i(r)),n&&(n=i(n)),a&&(a=i(a))),s){tue(this,n,a);const o=Rhe(this,n,a,r);r=o.transitionEnd,n=o.target}return{transition:e,transitionEnd:r,...n}}}function Vhe(t){return window.getComputedStyle(t)}class Whe extends K9{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,r){if(lm.has(r)){const n=CM(r);return n&&n.default||0}else{const n=Vhe(e),i=(RV(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:r}){return R9(e,r)}build(e,r,n,i){mM(e,r,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,r){return vM(e,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ta(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(e,r,n,i){VV(e,r,n,i)}}class Uhe extends K9{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(lm.has(r)){const n=CM(r);return n&&n.default||0}return r=WV.has(r)?r:uM(r),e.getAttribute(r)}measureInstanceViewportBox(){return Xi()}scrapeMotionValuesFromProps(e,r){return qV(e,r)}build(e,r,n,i){yM(e,r,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,r,n,i){UV(e,r,n,i)}mount(e){this.isSVGTag=xM(e.tagName),super.mount(e)}}const qhe=(t,e)=>pM(t)?new Uhe(e,{enableHardwareAcceleration:!1}):new Whe(e,{enableHardwareAcceleration:!0}),Qhe={layout:{ProjectionNode:Q9,MeasureLayout:B9}},Hhe={...xue,...Fle,...khe,...Qhe},Dn=Hae((t,e)=>Cle(t,e,Hhe,qhe));function Z9(){const t=I.useRef(!1);return cM(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function Ghe(){const t=Z9(),[e,r]=I.useState(0),n=I.useCallback(()=>{t.current&&r(e+1)},[e]);return[I.useCallback(()=>ni.postRender(n),[n]),e]}class Xhe extends I.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Khe({children:t,isPresent:e}){const r=I.useId(),n=I.useRef(null),i=I.useRef({width:0,height:0,top:0,left:0});return I.useInsertionEffect(()=>{const{width:s,height:a,top:o,left:d}=i.current;if(e||!n.current||!s||!a)return;n.current.dataset.motionPopId=r;const m=document.createElement("style");return document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${a}px !important;
            top: ${o}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),I.createElement(Xhe,{isPresent:e,childRef:n,sizeRef:i},I.cloneElement(t,{ref:n}))}const MO=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:s,mode:a})=>{const o=QV(Zhe),d=I.useId(),m=I.useMemo(()=>({id:d,initial:e,isPresent:r,custom:i,onExitComplete:y=>{o.set(y,!0);for(const b of o.values())if(!b)return;n&&n()},register:y=>(o.set(y,!1),()=>o.delete(y))}),s?void 0:[r]);return I.useMemo(()=>{o.forEach((y,b)=>o.set(b,!1))},[r]),I.useEffect(()=>{!r&&!o.size&&n&&n()},[r]),a==="popLayout"&&(t=I.createElement(Khe,{isPresent:r},t)),I.createElement(u1.Provider,{value:m},t)};function Zhe(){return new Map}function Yhe(t){return I.useEffect(()=>()=>t(),[])}const ep=t=>t.key||"";function Jhe(t,e){t.forEach(r=>{const n=ep(r);e.set(n,r)})}function ede(t){const e=[];return I.Children.forEach(t,r=>{I.isValidElement(r)&&e.push(r)}),e}const pc=({children:t,custom:e,initial:r=!0,onExitComplete:n,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:a="sync"})=>{const o=I.useContext(fM).forceRender||Ghe()[0],d=Z9(),m=ede(t);let y=m;const b=I.useRef(new Map).current,w=I.useRef(y),O=I.useRef(new Map).current,A=I.useRef(!0);if(cM(()=>{A.current=!1,Jhe(m,O),w.current=y}),Yhe(()=>{A.current=!0,O.clear(),b.clear()}),A.current)return I.createElement(I.Fragment,null,y.map(F=>I.createElement(MO,{key:ep(F),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:s,mode:a},F)));y=[...y];const E=w.current.map(ep),$=m.map(ep),R=E.length;for(let F=0;F<R;F++){const L=E[F];$.indexOf(L)===-1&&!b.has(L)&&b.set(L,void 0)}return a==="wait"&&b.size&&(y=[]),b.forEach((F,L)=>{if($.indexOf(L)!==-1)return;const U=O.get(L);if(!U)return;const Q=E.indexOf(L);let Y=F;if(!Y){const Z=()=>{b.delete(L);const J=Array.from(O.keys()).filter(re=>!$.includes(re));if(J.forEach(re=>O.delete(re)),w.current=m.filter(re=>{const he=ep(re);return he===L||J.includes(he)}),!b.size){if(d.current===!1)return;o(),n&&n()}};Y=I.createElement(MO,{key:ep(U),isPresent:!1,onExitComplete:Z,custom:e,presenceAffectsLayout:s,mode:a},U),b.set(L,Y)}y.splice(Q,0,Y)}),y=y.map(F=>{const L=F.key;return b.has(L)?F:I.createElement(MO,{key:ep(F),isPresent:!0,presenceAffectsLayout:s,mode:a},F)}),I.createElement(I.Fragment,null,b.size?y:y.map(F=>I.cloneElement(F)))},tde=(t,e)=>t.find(r=>r.id===e);function ZL(t,e){const r=Y9(t,e),n=r?t[r].findIndex(i=>i.id===e):-1;return{position:r,index:n}}function Y9(t,e){for(const[r,n]of Object.entries(t))if(tde(n,e))return r}function rde(t){const e=t.includes("right"),r=t.includes("left");let n="center";return e&&(n="flex-end"),r&&(n="flex-start"),{display:"flex",flexDirection:"column",alignItems:n}}function nde(t){const r=t==="top"||t==="bottom"?"0 auto":void 0,n=t.includes("top")?"env(safe-area-inset-top, 0px)":void 0,i=t.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,s=t.includes("left")?void 0:"env(safe-area-inset-right, 0px)",a=t.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:r,top:n,bottom:i,right:s,left:a}}var ide=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,sde=fV(function(t){return ide.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),ode=sde,ade=function(e){return e!=="theme"},YL=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?ode:ade},JL=function(e,r,n){var i;if(r){var s=r.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(a){return e.__emotion_forwardProp(a)&&s(a)}:s}return typeof i!="function"&&n&&(i=e.__emotion_forwardProp),i},lde=function(e){var r=e.cache,n=e.serialized,i=e.isStringTag;return nM(r,n,i),wV(function(){return iM(r,n,i)}),null},cde=function t(e,r){var n=e.__emotion_real===e,i=n&&e.__emotion_base||e,s,a;r!==void 0&&(s=r.label,a=r.target);var o=JL(e,r,n),d=o||YL(i),m=!d("as");return function(){var y=arguments,b=n&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&b.push("label:"+s+";"),y[0]==null||y[0].raw===void 0)b.push.apply(b,y);else{var w=y[0];b.push(w[0]);for(var O=y.length,A=1;A<O;A++)b.push(y[A],w[A])}var E=oM(function($,R,F){var L=m&&$.as||i,U="",Q=[],Y=$;if($.theme==null){Y={};for(var Z in $)Y[Z]=$[Z];Y.theme=I.useContext(Ly)}typeof $.className=="string"?U=vV(R.registered,Q,$.className):$.className!=null&&(U=$.className+" ");var J=Ik(b.concat(Q),R.registered,Y);U+=R.key+"-"+J.name,a!==void 0&&(U+=" "+a);var re=m&&o===void 0?YL(L):d,he={};for(var le in $)m&&le==="as"||re(le)&&(he[le]=$[le]);return he.className=U,F&&(he.ref=F),I.createElement(I.Fragment,null,I.createElement(lde,{cache:R,serialized:J,isStringTag:typeof L=="string"}),I.createElement(L,he))});return E.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",E.defaultProps=e.defaultProps,E.__emotion_real=E,E.__emotion_base=i,E.__emotion_styles=b,E.__emotion_forwardProp=o,Object.defineProperty(E,"toString",{value:function(){return"."+a}}),E.withComponent=function($,R){var F=t($,Hd({},r,R,{shouldForwardProp:JL(E,R,!0)}));return F.apply(void 0,b)},E}},ude=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],lA=cde.bind(null);ude.forEach(function(t){lA[t]=lA(t)});const hde=new Set([...BJ,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),dde=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function fde(t){return(dde.has(t)||!hde.has(t))&&t[0]!=="_"}const pde=TY(lA),mde=({baseStyle:t})=>e=>{const{theme:r,css:n,__css:i,sx:s,...a}=e,[o]=zY(a,NJ),d=Qa(t,e),m=dY({},i,d,mk(o),s),y=q8(m)(e.theme);return n?[y,n]:y};function IO(t,e){const{baseStyle:r,...n}=e??{};n.shouldForwardProp||(n.shouldForwardProp=fde);const i=mde({baseStyle:r}),s=pde(t,n)(i);return I.forwardRef(function(d,m){const{children:y,...b}=d,{colorMode:w,forced:O}=Rk(),A=O?w:void 0;return I.createElement(s,{ref:m,"data-theme":A,...b},y)})}function gde(){const t=new Map;return new Proxy(IO,{apply(e,r,n){return IO(...n)},get(e,r){return t.has(r)||t.set(r,IO(r)),t.get(r)}})}const mt=gde(),yde={initial:t=>{const{position:e}=t,r=["top","bottom"].includes(e)?"y":"x";let n=["top-right","bottom-right"].includes(e)?1:-1;return e==="bottom"&&(n=1),{opacity:0,[r]:n*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},J9=I.memo(t=>{const{id:e,message:r,onCloseComplete:n,onRequestRemove:i,requestClose:s=!1,position:a="bottom",duration:o=5e3,containerStyle:d,motionVariants:m=yde,toastSpacing:y="0.5rem"}=t,[b,w]=I.useState(o),O=$ue();Qd(()=>{O||n==null||n()},[O]),Qd(()=>{w(o)},[o]);const A=()=>w(null),E=()=>w(o),$=()=>{O&&i()};I.useEffect(()=>{O&&s&&i()},[O,s,i]),UY($,b);const R=I.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:y,...d}),[d,y]),F=I.useMemo(()=>rde(a),[a]);return u.jsx(Dn.div,{layout:!0,className:"chakra-toast",variants:m,initial:"initial",animate:"animate",exit:"exit",onHoverStart:A,onHoverEnd:E,custom:{position:a},style:F,children:u.jsx(mt.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:R,children:Qa(r,{id:e,onClose:$})})})});J9.displayName="ToastComponent";function Ct(t){return I.forwardRef(t)}var xde=typeof Element<"u",vde=typeof Map=="function",bde=typeof Set=="function",_de=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function pS(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var r,n,i;if(Array.isArray(t)){if(r=t.length,r!=e.length)return!1;for(n=r;n--!==0;)if(!pS(t[n],e[n]))return!1;return!0}var s;if(vde&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(s=t.entries();!(n=s.next()).done;)if(!e.has(n.value[0]))return!1;for(s=t.entries();!(n=s.next()).done;)if(!pS(n.value[1],e.get(n.value[0])))return!1;return!0}if(bde&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(s=t.entries();!(n=s.next()).done;)if(!e.has(n.value[0]))return!1;return!0}if(_de&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(r=t.length,r!=e.length)return!1;for(n=r;n--!==0;)if(t[n]!==e[n])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[n]))return!1;if(xde&&t instanceof Element)return!1;for(n=r;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&t.$$typeof)&&!pS(t[i[n]],e[i[n]]))return!1;return!0}return t!==t&&e!==e}var wde=function(e,r){try{return pS(e,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Sde=e1(wde);function m1(){const t=I.useContext(Ly);if(!t)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return t}function eW(){const t=Rk(),e=m1();return{...t,theme:e}}function kde(t,e,r){if(e==null)return e;const n=i=>{var s,a;return(a=(s=t.__cssMap)==null?void 0:s[i])==null?void 0:a.value};return n(e)??n(r)??r}function Cde(t,e,r){const n=Array.isArray(e)?e:[e],i=Array.isArray(r)?r:[r];return s=>{const a=i.filter(Boolean),o=n.map((d,m)=>{const y=`${t}.${d}`;return kde(s,y,a[m]??d)});return Array.isArray(e)?o:o[0]}}function Tde(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>r!==void 0&&e!=="children"&&!I.isValidElement(r)))}function tW(t,e={}){const{styleConfig:r,...n}=e,{theme:i,colorMode:s}=eW(),a=t?j8(i,`components.${t}`):void 0,o=r||a,d=jl({theme:i,colorMode:s},(o==null?void 0:o.defaultProps)??{},Tde(n),(y,b)=>y?void 0:b),m=I.useRef({});if(o){const b=YJ(o)(d);Sde(m.current,b)||(m.current=b)}return m.current}function il(t,e={}){return tW(t,e)}function ns(t,e={}){return tW(t,e)}const e4={path:u.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),u.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),u.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},He=Ct((t,e)=>{const{as:r,viewBox:n,color:i="currentColor",focusable:s=!1,children:a,className:o,__css:d,...m}=t,y=sr("chakra-icon",o),b=il("Icon",t),w={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i,...d,...b},O={ref:e,focusable:s,className:y,__css:w},A=n??e4.viewBox;if(r&&typeof r!="string")return u.jsx(mt.svg,{as:r,...O,...m});const E=a??e4.path;return u.jsx(mt.svg,{verticalAlign:"middle",viewBox:A,...O,...m,children:E})});He.displayName="Icon";function Ode(t){return u.jsx(He,{viewBox:"0 0 24 24",...t,children:u.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function Pde(t){return u.jsx(He,{viewBox:"0 0 24 24",...t,children:u.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function t4(t){return u.jsx(He,{viewBox:"0 0 24 24",...t,children:u.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}const jde=So({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),Nn=Ct((t,e)=>{const r=il("Spinner",t),{label:n="Loading...",thickness:i="2px",speed:s="0.45s",emptyColor:a="transparent",className:o,...d}=Mn(t),m=sr("chakra-spinner",o),y={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:a,borderLeftColor:a,animation:`${jde} ${s} linear infinite`,...r};return u.jsx(mt.div,{ref:e,__css:y,className:m,...d,children:n&&u.jsx(mt.span,{srOnly:!0,children:n})})});Nn.displayName="Spinner";const[Ade,EM]=_n({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[Ede,zM]=_n({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),rW={info:{icon:Pde,colorScheme:"blue"},warning:{icon:t4,colorScheme:"orange"},success:{icon:Ode,colorScheme:"green"},error:{icon:t4,colorScheme:"red"},loading:{icon:Nn,colorScheme:"blue"}};function zde(t){return rW[t].colorScheme}function Mde(t){return rW[t].icon}const to=Ct(function(e,r){const{status:n="info",addRole:i=!0,...s}=Mn(e),a=e.colorScheme??zde(n),o=ns("Alert",{...e,colorScheme:a}),d={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...o.container};return u.jsx(Ade,{value:{status:n},children:u.jsx(Ede,{value:o,children:u.jsx(mt.div,{"data-status":n,role:i?"alert":void 0,ref:r,...s,className:sr("chakra-alert",e.className),__css:d})})})});to.displayName="Alert";function ro(t){const{status:e}=EM(),r=Mde(e),n=zM(),i=e==="loading"?n.spinner:n.icon;return u.jsx(mt.span,{display:"inherit","data-status":e,...t,className:sr("chakra-alert__icon",t.className),__css:i,children:t.children||u.jsx(r,{h:"100%",w:"100%"})})}ro.displayName="AlertIcon";const g1=Ct(function(e,r){const n=zM(),{status:i}=EM();return u.jsx(mt.div,{ref:r,"data-status":i,...e,className:sr("chakra-alert__title",e.className),__css:n.title})});g1.displayName="AlertTitle";const $y=Ct(function(e,r){const{status:n}=EM(),i=zM(),s={display:"inline",...i.description};return u.jsx(mt.div,{ref:r,"data-status":n,...e,className:sr("chakra-alert__desc",e.className),__css:s})});$y.displayName="AlertDescription";function Ide(t){return u.jsx(He,{focusable:"false","aria-hidden":!0,...t,children:u.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}const yb=Ct(function(e,r){const n=il("CloseButton",e),{children:i,isDisabled:s,__css:a,...o}=Mn(e),d={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return u.jsx(mt.button,{type:"button","aria-label":"Close",ref:r,disabled:s,__css:{...d,...n,...a},...o,children:i||u.jsx(Ide,{width:"1em",height:"1em"})})});yb.displayName="CloseButton";const Dde=t=>{const{status:e,variant:r="solid",id:n,title:i,isClosable:s,onClose:a,description:o,colorScheme:d,icon:m}=t,y=n?{root:`toast-${n}`,title:`toast-${n}-title`,description:`toast-${n}-description`}:void 0;return u.jsxs(to,{addRole:!1,status:e,variant:r,id:y==null?void 0:y.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:d,children:[u.jsx(ro,{children:m}),u.jsxs(mt.div,{flex:"1",maxWidth:"100%",children:[i&&u.jsx(g1,{id:y==null?void 0:y.title,children:i}),o&&u.jsx($y,{id:y==null?void 0:y.description,display:"block",children:o})]}),s&&u.jsx(yb,{size:"sm",onClick:a,position:"absolute",insetEnd:1,top:1})]})};function nW(t={}){const{render:e,toastComponent:r=Dde}=t;return i=>typeof e=="function"?e({...i,...t}):u.jsx(r,{...i,...t})}const Rde={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},Zc=Lde(Rde);function Lde(t){let e=t;const r=new Set,n=i=>{e=i(e),r.forEach(s=>s())};return{getState:()=>e,subscribe:i=>(r.add(i),()=>{n(()=>t),r.delete(i)}),removeToast:(i,s)=>{n(a=>({...a,[s]:a[s].filter(o=>o.id!=i)}))},notify:(i,s)=>{const a=Fde(i,s),{position:o,id:d}=a;return n(m=>{const b=o.includes("top")?[a,...m[o]??[]]:[...m[o]??[],a];return{...m,[o]:b}}),d},update:(i,s)=>{i&&n(a=>{const o={...a},{position:d,index:m}=ZL(o,i);return d&&m!==-1&&(o[d][m]={...o[d][m],...s,message:nW(s)}),o})},closeAll:({positions:i}={})=>{n(s=>(i??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((d,m)=>(d[m]=s[m].map(y=>({...y,requestClose:!0})),d),{...s}))},close:i=>{n(s=>{const a=Y9(s,i);return a?{...s,[a]:s[a].map(o=>o.id==i?{...o,requestClose:!0}:o)}:s})},isActive:i=>!!ZL(Zc.getState(),i).position}}let r4=0;function Fde(t,e={}){r4+=1;const r=e.id??r4,n=e.position??"bottom";return{id:r,message:t,position:n,duration:e.duration,onCloseComplete:e.onCloseComplete,onRequestRemove:()=>Zc.removeToast(String(r),n),status:e.status,requestClose:!1,containerStyle:e.containerStyle}}const[iW,Bde]=_n({strict:!1,name:"PortalContext"}),MM="chakra-portal",$de=".chakra-portal",Nde=t=>u.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:t.zIndex,top:0,left:0,right:0},children:t.children}),Vde=t=>{const{appendToParentPortal:e,children:r}=t,[n,i]=I.useState(null),s=I.useRef(null),[,a]=I.useState({});I.useEffect(()=>a({}),[]);const o=Bde(),d=Rae();Tp(()=>{if(!n)return;const y=n.ownerDocument,b=e?o??y.body:y.body;if(!b)return;s.current=y.createElement("div"),s.current.className=MM,b.appendChild(s.current),a({});const w=s.current;return()=>{b.contains(w)&&b.removeChild(w)}},[n]);const m=d!=null&&d.zIndex?u.jsx(Nde,{zIndex:d==null?void 0:d.zIndex,children:r}):r;return s.current?Fz.createPortal(u.jsx(iW,{value:s.current,children:m}),s.current):u.jsx("span",{ref:y=>{y&&i(y)}})},Wde=t=>{const{children:e,containerRef:r,appendToParentPortal:n}=t,i=r.current,s=i??(typeof window<"u"?document.body:void 0),a=I.useMemo(()=>{const d=i==null?void 0:i.ownerDocument.createElement("div");return d&&(d.className=MM),d},[i]),[,o]=I.useState({});return Tp(()=>o({}),[]),Tp(()=>{if(!(!a||!s))return s.appendChild(a),()=>{s.removeChild(a)}},[a,s]),s&&a?Fz.createPortal(u.jsx(iW,{value:n?a:null,children:e}),a):null};function h0(t){const e={appendToParentPortal:!0,...t},{containerRef:r,...n}=e;return r?u.jsx(Wde,{containerRef:r,...n}):u.jsx(Vde,{...n})}h0.className=MM;h0.selector=$de;h0.displayName="Portal";const[Ude,qde]=_n({name:"ToastOptionsContext",strict:!1}),Qde=t=>{const e=I.useSyncExternalStore(Zc.subscribe,Zc.getState,Zc.getState),{motionVariants:r,component:n=J9,portalProps:i,animatePresenceProps:s}=t,o=Object.keys(e).map(d=>{const m=e[d];return u.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${d}`,id:`chakra-toast-manager-${d}`,style:nde(d),children:u.jsx(pc,{...s,initial:!1,children:m.map(y=>u.jsx(n,{motionVariants:r,...y},y.id))})},d)});return u.jsx(h0,{...i,children:o})},Hde=t=>function({children:r,theme:n=t,toastOptions:i,...s}){return u.jsxs(Lae,{theme:n,...s,children:[u.jsx(Ude,{value:i==null?void 0:i.defaultOptions,children:r}),u.jsx(Qde,{...i})]})},Gde=Hde(oV);function n4(t){return t.sort((e,r)=>{const n=e.compareDocumentPosition(r);if(n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(n&Node.DOCUMENT_POSITION_DISCONNECTED||n&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}const Xde=t=>typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE;function i4(t,e,r){let n=t+1;return r&&n>=e&&(n=0),n}function s4(t,e,r){let n=t-1;return r&&n<0&&(n=e),n}const DO=typeof window<"u"?I.useLayoutEffect:I.useEffect,o4=t=>t;var Kde=Object.defineProperty,Zde=(t,e,r)=>e in t?Kde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ai=(t,e,r)=>(Zde(t,typeof e!="symbol"?e+"":e,r),r);class Yde{constructor(){Ai(this,"descendants",new Map),Ai(this,"register",e=>{if(e!=null)return Xde(e)?this.registerNode(e):r=>{this.registerNode(r,e)}}),Ai(this,"unregister",e=>{this.descendants.delete(e);const r=n4(Array.from(this.descendants.keys()));this.assignIndex(r)}),Ai(this,"destroy",()=>{this.descendants.clear()}),Ai(this,"assignIndex",e=>{this.descendants.forEach(r=>{const n=e.indexOf(r.node);r.index=n,r.node.dataset.index=r.index.toString()})}),Ai(this,"count",()=>this.descendants.size),Ai(this,"enabledCount",()=>this.enabledValues().length),Ai(this,"values",()=>Array.from(this.descendants.values()).sort((r,n)=>r.index-n.index)),Ai(this,"enabledValues",()=>this.values().filter(e=>!e.disabled)),Ai(this,"item",e=>{if(this.count()!==0)return this.values()[e]}),Ai(this,"enabledItem",e=>{if(this.enabledCount()!==0)return this.enabledValues()[e]}),Ai(this,"first",()=>this.item(0)),Ai(this,"firstEnabled",()=>this.enabledItem(0)),Ai(this,"last",()=>this.item(this.descendants.size-1)),Ai(this,"lastEnabled",()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)}),Ai(this,"indexOf",e=>{var r;return e?((r=this.descendants.get(e))==null?void 0:r.index)??-1:-1}),Ai(this,"enabledIndexOf",e=>e==null?-1:this.enabledValues().findIndex(r=>r.node.isSameNode(e))),Ai(this,"next",(e,r=!0)=>{const n=i4(e,this.count(),r);return this.item(n)}),Ai(this,"nextEnabled",(e,r=!0)=>{const n=this.item(e);if(!n)return;const i=this.enabledIndexOf(n.node),s=i4(i,this.enabledCount(),r);return this.enabledItem(s)}),Ai(this,"prev",(e,r=!0)=>{const n=s4(e,this.count()-1,r);return this.item(n)}),Ai(this,"prevEnabled",(e,r=!0)=>{const n=this.item(e);if(!n)return;const i=this.enabledIndexOf(n.node),s=s4(i,this.enabledCount()-1,r);return this.enabledItem(s)}),Ai(this,"registerNode",(e,r)=>{if(!e||this.descendants.has(e))return;const n=Array.from(this.descendants.keys()).concat(e),i=n4(n);r!=null&&r.disabled&&(r.disabled=!!r.disabled);const s={node:e,index:-1,...r};this.descendants.set(e,s),this.assignIndex(i)})}}function IM(){const[t,e]=_n({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});return[t,e,()=>{const i=I.useRef(new Yde);return DO(()=>()=>i.current.destroy()),i.current},i=>{const s=e(),[a,o]=I.useState(-1),d=I.useRef(null);DO(()=>()=>{d.current&&s.unregister(d.current)},[]),DO(()=>{if(!d.current)return;const y=Number(d.current.dataset.index);a!=y&&!Number.isNaN(y)&&o(y)});const m=o4(i?s.register(i):s.register);return{descendants:s,index:a,enabledIndex:s.enabledIndexOf(d.current),register:xi(m,d)}}]}const[Jde,Uk]=_n({name:"AccordionStylesContext",hookName:"useAccordionStyles",providerName:"<Accordion />"}),[efe,DM]=_n({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItem />"}),[tfe,vAe,rfe,nfe]=IM();function ife(t){const{onChange:e,defaultIndex:r,index:n,allowMultiple:i,allowToggle:s,...a}=t;afe(t),lfe(t);const o=rfe(),[d,m]=I.useState(-1);I.useEffect(()=>()=>{m(-1)},[]);const[y,b]=Wz({value:n,defaultValue(){return i?r??[]:r??-1},onChange:e});return{index:y,setIndex:b,htmlProps:a,getAccordionItemProps:O=>{let A=!1;return O!==null&&(A=Array.isArray(y)?y.includes(O):y===O),{isOpen:A,onChange:$=>{if(O!==null)if(i&&Array.isArray(y)){const R=$?y.concat(O):y.filter(F=>F!==O);b(R)}else $?b(O):s&&b(-1)}}},focusedIndex:d,setFocusedIndex:m,descendants:o}}const[sfe,RM]=_n({name:"AccordionContext",hookName:"useAccordionContext",providerName:"Accordion"});function ofe(t){const{isDisabled:e,isFocusable:r,id:n,...i}=t,{getAccordionItemProps:s,setFocusedIndex:a}=RM(),o=I.useRef(null),d=I.useId(),m=n??d,y=`accordion-button-${m}`,b=`accordion-panel-${m}`;cfe(t);const{register:w,index:O,descendants:A}=nfe({disabled:e&&!r}),{isOpen:E,onChange:$}=s(O===-1?null:O);ufe({isOpen:E,isDisabled:e});const R=()=>{$==null||$(!0)},F=()=>{$==null||$(!1)},L=I.useCallback(()=>{$==null||$(!E),a(O)},[O,a,E,$]),U=I.useCallback(J=>{const he={ArrowDown:()=>{const le=A.nextEnabled(O);le==null||le.node.focus()},ArrowUp:()=>{const le=A.prevEnabled(O);le==null||le.node.focus()},Home:()=>{const le=A.firstEnabled();le==null||le.node.focus()},End:()=>{const le=A.lastEnabled();le==null||le.node.focus()}}[J.key];he&&(J.preventDefault(),he(J))},[A,O]),Q=I.useCallback(()=>{a(O)},[a,O]),Y=I.useCallback(function(re={},he=null){return{...re,type:"button",ref:xi(w,o,he),id:y,disabled:!!e,"aria-expanded":!!E,"aria-controls":b,onClick:kr(re.onClick,L),onFocus:kr(re.onFocus,Q),onKeyDown:kr(re.onKeyDown,U)}},[y,e,E,L,Q,U,b,w]),Z=I.useCallback(function(re={},he=null){return{...re,ref:he,role:"region",id:b,"aria-labelledby":y,hidden:!E}},[y,E,b]);return{isOpen:E,isDisabled:e,isFocusable:r,onOpen:R,onClose:F,getButtonProps:Y,getPanelProps:Z,htmlProps:i}}function afe(t){const e=t.index||t.defaultIndex,r=e!=null&&!Array.isArray(e)&&t.allowMultiple;o1({condition:!!r,message:`If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ${typeof e},`})}function lfe(t){o1({condition:!!(t.allowMultiple&&t.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}function cfe(t){o1({condition:!!(t.isFocusable&&!t.isDisabled),message:`Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.
    `})}function ufe(t){o1({condition:t.isOpen&&!!t.isDisabled,message:"Cannot open a disabled accordion item"})}const LM=Ct(function({children:e,reduceMotion:r,...n},i){const s=ns("Accordion",n),a=Mn(n),{htmlProps:o,descendants:d,...m}=ife(a),y=I.useMemo(()=>({...m,reduceMotion:!!r}),[m,r]);return u.jsx(tfe,{value:d,children:u.jsx(sfe,{value:y,children:u.jsx(Jde,{value:s,children:u.jsx(mt.div,{ref:i,...o,className:sr("chakra-accordion",n.className),__css:s.root,children:e})})})})});LM.displayName="Accordion";const FM=Ct(function(e,r){const{getButtonProps:n}=DM(),i=n(e,r),a={display:"flex",alignItems:"center",width:"100%",outline:0,...Uk().button};return u.jsx(mt.button,{...i,className:sr("chakra-accordion__button",e.className),__css:a})});FM.displayName="AccordionButton";function BM(t){const{isOpen:e,isDisabled:r}=DM(),{reduceMotion:n}=RM(),i=sr("chakra-accordion__icon",t.className),s=Uk(),a={opacity:r?.4:1,transform:e?"rotate(-180deg)":void 0,transition:n?void 0:"transform 0.2s",transformOrigin:"center",...s.icon};return u.jsx(He,{viewBox:"0 0 24 24","aria-hidden":!0,className:i,__css:a,...t,children:u.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})}BM.displayName="AccordionIcon";const $M=Ct(function(e,r){const{children:n,className:i}=e,{htmlProps:s,...a}=ofe(e),o=Uk(),d={...o.container,overflowAnchor:"none"},m=I.useMemo(()=>a,[a]);return u.jsx(efe,{value:m,children:u.jsx(mt.div,{ref:r,...s,className:sr("chakra-accordion__item",i),__css:d,children:typeof n=="function"?n({isExpanded:!!a.isOpen,isDisabled:!!a.isDisabled}):n})})});$M.displayName="AccordionItem";const Fg={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1]},Ep={enter:{duration:.2,ease:Fg.easeOut},exit:{duration:.1,ease:Fg.easeIn}},ch={enter:(t,e)=>({...t,delay:typeof e=="number"?e:e==null?void 0:e.enter}),exit:(t,e)=>({...t,delay:typeof e=="number"?e:e==null?void 0:e.exit})},hfe=t=>t!=null&&parseInt(t.toString(),10)>0,a4={exit:{height:{duration:.2,ease:Fg.ease},opacity:{duration:.3,ease:Fg.ease}},enter:{height:{duration:.3,ease:Fg.ease},opacity:{duration:.4,ease:Fg.ease}}},dfe={exit:({animateOpacity:t,startingHeight:e,transition:r,transitionEnd:n,delay:i})=>({...t&&{opacity:hfe(e)?1:0},height:e,transitionEnd:n==null?void 0:n.exit,transition:(r==null?void 0:r.exit)??ch.exit(a4.exit,i)}),enter:({animateOpacity:t,endingHeight:e,transition:r,transitionEnd:n,delay:i})=>({...t&&{opacity:1},height:e,transitionEnd:n==null?void 0:n.enter,transition:(r==null?void 0:r.enter)??ch.enter(a4.enter,i)})},mc=I.forwardRef((t,e)=>{const{in:r,unmountOnExit:n,animateOpacity:i=!0,startingHeight:s=0,endingHeight:a="auto",style:o,className:d,transition:m,transitionEnd:y,animatePresenceProps:b,...w}=t,[O,A]=I.useState(!1);I.useEffect(()=>{const L=setTimeout(()=>{A(!0)});return()=>clearTimeout(L)},[]),o1({condition:Number(s)>0&&!!n,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const E=parseFloat(s.toString())>0,$={startingHeight:s,endingHeight:a,animateOpacity:i,transition:O?m:{enter:{duration:0}},transitionEnd:{enter:y==null?void 0:y.enter,exit:n?y==null?void 0:y.exit:{...y==null?void 0:y.exit,display:E?"block":"none"}}},R=n?r:!0,F=r||n?"enter":"exit";return u.jsx(pc,{...b,initial:!1,custom:$,children:R&&u.jsx(Dn.div,{ref:e,...w,className:sr("chakra-collapse",d),style:{overflow:"hidden",display:"block",...o},custom:$,variants:dfe,initial:n?"exit":!1,animate:F,exit:"exit"})})});mc.displayName="Collapse";const NM=Ct(function(e,r){const{className:n,motionProps:i,...s}=e,{reduceMotion:a}=RM(),{getPanelProps:o,isOpen:d}=DM(),m=o(s,r),y=sr("chakra-accordion__panel",n),b=Uk();a||delete m.hidden;const w=u.jsx(mt.div,{...m,__css:b.panel,className:y});return a?w:u.jsx(mc,{in:d,...i,children:w})});NM.displayName="AccordionPanel";const er=Ct(function(e,r){const n=il("Badge",e),{className:i,...s}=Mn(e);return u.jsx(mt.span,{ref:r,className:sr("chakra-badge",e.className),...s,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...n}})});er.displayName="Badge";const ue=mt("div");ue.displayName="Box";const[ffe,pfe]=_n({strict:!1,name:"ButtonGroupContext"});function rv(t){const{children:e,className:r,...n}=t,i=I.isValidElement(e)?I.cloneElement(e,{"aria-hidden":!0,focusable:!1}):e,s=sr("chakra-button__icon",r);return u.jsx(mt.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...n,className:s,children:i})}rv.displayName="ButtonIcon";function cA(t){const{label:e,placement:r,spacing:n="0.5rem",children:i=u.jsx(Nn,{color:"currentColor",width:"1em",height:"1em"}),className:s,__css:a,...o}=t,d=sr("chakra-button__spinner",s),m=r==="start"?"marginEnd":"marginStart",y=I.useMemo(()=>({display:"flex",alignItems:"center",position:e?"relative":"absolute",[m]:e?n:0,fontSize:"1em",lineHeight:"normal",...a}),[a,e,m,n]);return u.jsx(mt.div,{className:d,...o,__css:y,children:i})}cA.displayName="ButtonSpinner";function mfe(t){const[e,r]=I.useState(!t);return{ref:I.useCallback(s=>{s&&r(s.tagName==="BUTTON")},[]),type:e?"button":void 0}}const St=Ct((t,e)=>{const r=pfe(),n=il("Button",{...r,...t}),{isDisabled:i=r==null?void 0:r.isDisabled,isLoading:s,isActive:a,children:o,leftIcon:d,rightIcon:m,loadingText:y,iconSpacing:b="0.5rem",type:w,spinner:O,spinnerPlacement:A="start",className:E,as:$,shouldWrapChildren:R,...F}=Mn(t),L=I.useMemo(()=>{const Z={...n==null?void 0:n._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...n,...!!r&&{_focus:Z}}},[n,r]),{ref:U,type:Q}=mfe($),Y={rightIcon:m,leftIcon:d,iconSpacing:b,children:o,shouldWrapChildren:R};return u.jsxs(mt.button,{disabled:i||s,ref:VY(e,U),as:$,type:w??Q,"data-active":_r(a),"data-loading":_r(s),__css:L,className:sr("chakra-button",E),...F,children:[s&&A==="start"&&u.jsx(cA,{className:"chakra-button__spinner--start",label:y,placement:"start",spacing:b,children:O}),s?y||u.jsx(mt.span,{opacity:0,children:u.jsx(l4,{...Y})}):u.jsx(l4,{...Y}),s&&A==="end"&&u.jsx(cA,{className:"chakra-button__spinner--end",label:y,placement:"end",spacing:b,children:O})]})});St.displayName="Button";function l4(t){const{leftIcon:e,rightIcon:r,children:n,iconSpacing:i,shouldWrapChildren:s}=t;return s?u.jsxs("span",{style:{display:"contents"},children:[e&&u.jsx(rv,{marginEnd:i,children:e}),n,r&&u.jsx(rv,{marginStart:i,children:r})]}):u.jsxs(u.Fragment,{children:[e&&u.jsx(rv,{marginEnd:i,children:e}),n,r&&u.jsx(rv,{marginStart:i,children:r})]})}const gfe={horizontal:{"> *:first-of-type:not(:last-of-type)":{borderEndRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0}},vertical:{"> *:first-of-type:not(:last-of-type)":{borderBottomRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderTopRadius:0}}},yfe={horizontal:t=>({"& > *:not(style) ~ *:not(style)":{marginStart:t}}),vertical:t=>({"& > *:not(style) ~ *:not(style)":{marginTop:t}})},qk=Ct(function(e,r){const{size:n,colorScheme:i,variant:s,className:a,spacing:o="0.5rem",isAttached:d,isDisabled:m,orientation:y="horizontal",...b}=e,w=sr("chakra-button__group",a),O=I.useMemo(()=>({size:n,colorScheme:i,variant:s,isDisabled:m}),[n,i,s,m]);let A={display:"inline-flex",...d?gfe[y]:yfe[y](o)};const E=y==="vertical";return u.jsx(ffe,{value:O,children:u.jsx(mt.div,{ref:r,role:"group",__css:A,className:w,"data-attached":d?"":void 0,"data-orientation":y,flexDir:E?"column":void 0,...b})})});qk.displayName="ButtonGroup";const br=Ct((t,e)=>{const{icon:r,children:n,isRound:i,"aria-label":s,...a}=t,o=r||n,d=I.isValidElement(o)?I.cloneElement(o,{"aria-hidden":!0,focusable:!1}):null;return u.jsx(St,{px:"0",py:"0",borderRadius:i?"full":void 0,ref:e,"aria-label":s,...a,children:d})});br.displayName="IconButton";const[xfe,vfe]=Mae("Card"),Jr=Ct(function(e,r){const{className:n,children:i,direction:s="column",justify:a,align:o,...d}=Mn(e),m=ns("Card",e);return u.jsx(mt.div,{ref:r,className:sr("chakra-card",n),__css:{display:"flex",flexDirection:s,justifyContent:a,alignItems:o,position:"relative",minWidth:0,wordWrap:"break-word",...m.container},...d,children:u.jsx(xfe,{value:m,children:i})})}),un=Ct(function(e,r){const{className:n,...i}=e,s=vfe();return u.jsx(mt.div,{ref:r,className:sr("chakra-card__body",n),__css:s.body,...i})}),uA=mt("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});uA.displayName="Center";const bfe={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};Ct(function(e,r){const{axis:n="both",...i}=e;return u.jsx(mt.div,{ref:r,__css:bfe[n],...i,position:"absolute"})});const[bAe,_fe]=_n({name:"CheckboxGroupContext",strict:!1});function wfe(t){return u.jsx(mt.svg,{width:"1.2em",viewBox:"0 0 12 10",style:{fill:"none",strokeWidth:2,stroke:"currentColor",strokeDasharray:16},...t,children:u.jsx("polyline",{points:"1.5 6 4.5 9 10.5 1"})})}function Sfe(t){return u.jsx(mt.svg,{width:"1.2em",viewBox:"0 0 24 24",style:{stroke:"currentColor",strokeWidth:4},...t,children:u.jsx("line",{x1:"21",x2:"3",y1:"12",y2:"12"})})}function kfe(t){const{isIndeterminate:e,isChecked:r,...n}=t,i=e?Sfe:wfe;return r||e?u.jsx(mt.div,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:u.jsx(i,{...n})}):null}var Cfe=()=>typeof document<"u",c4=!1,y1=null,Gp=!1,hA=!1,dA=new Set;function VM(t,e){dA.forEach(r=>r(t,e))}var Tfe=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function Ofe(t){return!(t.metaKey||!Tfe&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function u4(t){Gp=!0,Ofe(t)&&(y1="keyboard",VM("keyboard",t))}function og(t){if(y1="pointer",t.type==="mousedown"||t.type==="pointerdown"){Gp=!0;const e=t.composedPath?t.composedPath()[0]:t.target;let r=!1;try{r=e.matches(":focus-visible")}catch{}if(r)return;VM("pointer",t)}}function Pfe(t){return t.mozInputSource===0&&t.isTrusted?!0:t.detail===0&&!t.pointerType}function jfe(t){Pfe(t)&&(Gp=!0,y1="virtual")}function Afe(t){t.target===window||t.target===document||t.target instanceof Element&&t.target.hasAttribute("tabindex")||(!Gp&&!hA&&(y1="virtual",VM("virtual",t)),Gp=!1,hA=!1)}function Efe(){Gp=!1,hA=!0}function h4(){return y1!=="pointer"}function zfe(){if(!Cfe()||c4)return;const{focus:t}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...r){Gp=!0,t.apply(this,r)},document.addEventListener("keydown",u4,!0),document.addEventListener("keyup",u4,!0),document.addEventListener("click",jfe,!0),window.addEventListener("focus",Afe,!0),window.addEventListener("blur",Efe,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",og,!0),document.addEventListener("pointermove",og,!0),document.addEventListener("pointerup",og,!0)):(document.addEventListener("mousedown",og,!0),document.addEventListener("mousemove",og,!0),document.addEventListener("mouseup",og,!0)),c4=!0}function sW(t){zfe(),t(h4());const e=()=>t(h4());return dA.add(e),()=>{dA.delete(e)}}const[Mfe,oW]=_n({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[Ife,x1]=_n({strict:!1,name:"FormControlContext"});function Dfe(t){const{id:e,isRequired:r,isInvalid:n,isDisabled:i,isReadOnly:s,...a}=t,o=I.useId(),d=e||`field-${o}`,m=`${d}-label`,y=`${d}-feedback`,b=`${d}-helptext`,[w,O]=I.useState(!1),[A,E]=I.useState(!1),[$,R]=I.useState(!1),F=I.useCallback((Z={},J=null)=>({id:b,...Z,ref:xi(J,re=>{re&&E(!0)})}),[b]),L=I.useCallback((Z={},J=null)=>({...Z,ref:J,"data-focus":_r($),"data-disabled":_r(i),"data-invalid":_r(n),"data-readonly":_r(s),id:Z.id!==void 0?Z.id:m,htmlFor:Z.htmlFor!==void 0?Z.htmlFor:d}),[d,i,$,n,s,m]),U=I.useCallback((Z={},J=null)=>({id:y,...Z,ref:xi(J,re=>{re&&O(!0)}),"aria-live":"polite"}),[y]),Q=I.useCallback((Z={},J=null)=>({...Z,...a,ref:J,role:"group","data-focus":_r($),"data-disabled":_r(i),"data-invalid":_r(n),"data-readonly":_r(s)}),[a,i,$,n,s]),Y=I.useCallback((Z={},J=null)=>({...Z,ref:J,role:"presentation","aria-hidden":!0,children:Z.children||"*"}),[]);return{isRequired:!!r,isInvalid:!!n,isReadOnly:!!s,isDisabled:!!i,isFocused:!!$,onFocus:()=>R(!0),onBlur:()=>R(!1),hasFeedbackText:w,setHasFeedbackText:O,hasHelpText:A,setHasHelpText:E,id:d,labelId:m,feedbackId:y,helpTextId:b,htmlProps:a,getHelpTextProps:F,getErrorMessageProps:U,getRootProps:Q,getLabelProps:L,getRequiredIndicatorProps:Y}}const Ot=Ct(function(e,r){const n=ns("Form",e),i=Mn(e),{getRootProps:s,htmlProps:a,...o}=Dfe(i),d=sr("chakra-form-control",e.className);return u.jsx(Ife,{value:o,children:u.jsx(Mfe,{value:n,children:u.jsx(mt.div,{...s({},r),className:d,__css:n.container})})})});Ot.displayName="FormControl";const Rfe=Ct(function(e,r){const n=x1(),i=oW(),s=sr("chakra-form__helper-text",e.className);return u.jsx(mt.div,{...n==null?void 0:n.getHelpTextProps(e,r),__css:i.helperText,className:s})});Rfe.displayName="FormHelperText";function WM(t){const{isDisabled:e,isInvalid:r,isReadOnly:n,isRequired:i,...s}=UM(t);return{...s,disabled:e,readOnly:n,required:i,"aria-invalid":Il(r),"aria-required":Il(i),"aria-readonly":Il(n)}}function UM(t){const e=x1(),{id:r,disabled:n,readOnly:i,required:s,isRequired:a,isInvalid:o,isReadOnly:d,isDisabled:m,onFocus:y,onBlur:b,...w}=t,O=t["aria-describedby"]?[t["aria-describedby"]]:[];return e!=null&&e.hasFeedbackText&&(e!=null&&e.isInvalid)&&O.push(e.feedbackId),e!=null&&e.hasHelpText&&O.push(e.helpTextId),{...w,"aria-describedby":O.join(" ")||void 0,id:r??(e==null?void 0:e.id),isDisabled:n??m??(e==null?void 0:e.isDisabled),isReadOnly:i??d??(e==null?void 0:e.isReadOnly),isRequired:s??a??(e==null?void 0:e.isRequired),isInvalid:o??(e==null?void 0:e.isInvalid),onFocus:kr(e==null?void 0:e.onFocus,y),onBlur:kr(e==null?void 0:e.onBlur,b)}}const aW={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};function lW(t={}){const e=UM(t),{isDisabled:r,isReadOnly:n,isRequired:i,isInvalid:s,id:a,onBlur:o,onFocus:d,"aria-describedby":m}=e,{defaultChecked:y,isChecked:b,isFocusable:w,onChange:O,isIndeterminate:A,name:E,value:$,tabIndex:R=void 0,"aria-label":F,"aria-labelledby":L,"aria-invalid":U,...Q}=t,Y=gk(Q,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),Z=Bi(O),J=Bi(o),re=Bi(d),[he,le]=I.useState(!1),[Ze,Ee]=I.useState(!1),[qe,et]=I.useState(!1),at=I.useRef(!1);I.useEffect(()=>sW(vt=>{at.current=vt}),[]);const Be=I.useRef(null),[Me,Ge]=I.useState(!0),[Le,Ie]=I.useState(!!y),Oe=b!==void 0,Re=Oe?b:Le,nt=I.useCallback(vt=>{if(n||r){vt.preventDefault();return}Oe||Ie(Re?vt.currentTarget.checked:A?!0:vt.currentTarget.checked),Z==null||Z(vt)},[n,r,Re,Oe,A,Z]);Tp(()=>{Be.current&&(Be.current.indeterminate=!!A)},[A]),Qd(()=>{r&&le(!1)},[r,le]),Tp(()=>{const vt=Be.current;if(!(vt!=null&&vt.form))return;const st=()=>{Ie(!!y)};return vt.form.addEventListener("reset",st),()=>{var Te;return(Te=vt.form)==null?void 0:Te.removeEventListener("reset",st)}},[]);const ze=r&&!w,rt=I.useCallback(vt=>{vt.key===" "&&et(!0)},[et]),Xe=I.useCallback(vt=>{vt.key===" "&&et(!1)},[et]);Tp(()=>{if(!Be.current)return;Be.current.checked!==Re&&Ie(Be.current.checked)},[Be.current]);const _t=I.useCallback((vt={},st=null)=>{const Te=lt=>{he&&lt.preventDefault(),et(!0)};return{...vt,ref:st,"data-active":_r(qe),"data-hover":_r(Ze),"data-checked":_r(Re),"data-focus":_r(he),"data-focus-visible":_r(he&&at.current),"data-indeterminate":_r(A),"data-disabled":_r(r),"data-invalid":_r(s),"data-readonly":_r(n),"aria-hidden":!0,onMouseDown:kr(vt.onMouseDown,Te),onMouseUp:kr(vt.onMouseUp,()=>et(!1)),onMouseEnter:kr(vt.onMouseEnter,()=>Ee(!0)),onMouseLeave:kr(vt.onMouseLeave,()=>Ee(!1))}},[qe,Re,r,he,Ze,A,s,n]),Mt=I.useCallback((vt={},st=null)=>({...vt,ref:st,"data-active":_r(qe),"data-hover":_r(Ze),"data-checked":_r(Re),"data-focus":_r(he),"data-focus-visible":_r(he&&at.current),"data-indeterminate":_r(A),"data-disabled":_r(r),"data-invalid":_r(s),"data-readonly":_r(n)}),[qe,Re,r,he,Ze,A,s,n]),Et=I.useCallback((vt={},st=null)=>({...Y,...vt,ref:xi(st,Te=>{Te&&Ge(Te.tagName==="LABEL")}),onClick:kr(vt.onClick,()=>{var Te;Me||((Te=Be.current)==null||Te.click(),requestAnimationFrame(()=>{var lt;(lt=Be.current)==null||lt.focus({preventScroll:!0})}))}),"data-disabled":_r(r),"data-checked":_r(Re),"data-invalid":_r(s)}),[Y,r,Re,s,Me]),yt=I.useCallback((vt={},st=null)=>({...vt,ref:xi(Be,st),type:"checkbox",name:E,value:$,id:a,tabIndex:R,onChange:kr(vt.onChange,nt),onBlur:kr(vt.onBlur,J,()=>le(!1)),onFocus:kr(vt.onFocus,re,()=>le(!0)),onKeyDown:kr(vt.onKeyDown,rt),onKeyUp:kr(vt.onKeyUp,Xe),required:i,checked:Re,disabled:ze,readOnly:n,"aria-label":F,"aria-labelledby":L,"aria-invalid":U?!!U:s,"aria-describedby":m,"aria-disabled":r,"aria-checked":A?"mixed":Re,style:aW}),[E,$,a,R,nt,J,re,rt,Xe,i,Re,ze,n,F,L,U,s,m,r,A]),Je=I.useCallback((vt={},st=null)=>({...vt,ref:st,onMouseDown:kr(vt.onMouseDown,Lfe),"data-disabled":_r(r),"data-checked":_r(Re),"data-invalid":_r(s)}),[Re,r,s]);return{state:{isInvalid:s,isFocused:he,isChecked:Re,isActive:qe,isHovered:Ze,isIndeterminate:A,isDisabled:r,isReadOnly:n,isRequired:i},getRootProps:Et,getCheckboxProps:_t,getIndicatorProps:Mt,getInputProps:yt,getLabelProps:Je,htmlProps:Y}}function Lfe(t){t.preventDefault(),t.stopPropagation()}function Ffe(t){const[e,r]=I.useState(t),[n,i]=I.useState(!1);return t!==e&&(i(!0),r(t)),n}const Bfe={display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",userSelect:"none",flexShrink:0},$fe={cursor:"pointer",display:"inline-flex",alignItems:"center",verticalAlign:"top",position:"relative"},Nfe=So({from:{opacity:0,strokeDashoffset:16,transform:"scale(0.95)"},to:{opacity:1,strokeDashoffset:0,transform:"scale(1)"}}),Vfe=So({from:{opacity:0},to:{opacity:1}}),Wfe=So({from:{transform:"scaleX(0.65)"},to:{transform:"scaleX(1)"}}),Ua=Ct(function(e,r){const n=_fe(),i={...n,...e},s=ns("Checkbox",i),a=Mn(e),{spacing:o="0.5rem",className:d,children:m,iconColor:y,iconSize:b,icon:w=u.jsx(kfe,{}),isChecked:O,isDisabled:A=n==null?void 0:n.isDisabled,onChange:E,inputProps:$,...R}=a;let F=O;n!=null&&n.value&&a.value&&(F=n.value.includes(a.value));let L=E;n!=null&&n.onChange&&a.value&&(L=$z(n.onChange,E));const{state:U,getInputProps:Q,getCheckboxProps:Y,getLabelProps:Z,getRootProps:J}=lW({...R,isDisabled:A,isChecked:F,onChange:L}),re=Ffe(U.isChecked),he=I.useMemo(()=>({animation:re?U.isIndeterminate?`${Vfe} 20ms linear, ${Wfe} 200ms linear`:`${Nfe} 200ms linear`:void 0,...s.icon,...mk({fontSize:b,color:y})}),[y,b,re,U.isIndeterminate,s.icon]),le=I.cloneElement(w,{__css:he,isIndeterminate:U.isIndeterminate,isChecked:U.isChecked});return u.jsxs(mt.label,{__css:{...$fe,...s.container},className:sr("chakra-checkbox",d),...J(),children:[u.jsx("input",{className:"chakra-checkbox__input",...Q($,r)}),u.jsx(mt.span,{__css:{...Bfe,...s.control},className:"chakra-checkbox__control",...Y(),children:le}),m&&u.jsx(mt.span,{className:"chakra-checkbox__label",...Z(),__css:{marginStart:o,...s.label},children:m})]})});Ua.displayName="Checkbox";const Yu=Ct(function(e,r){const n=il("Code",e),{className:i,...s}=Mn(e);return u.jsx(mt.code,{ref:r,className:sr("chakra-code",e.className),...s,__css:{display:"inline-block",...n}})});Yu.displayName="Code";const Fr=Ct(function(e,r){const{borderLeftWidth:n,borderBottomWidth:i,borderTopWidth:s,borderRightWidth:a,borderWidth:o,borderStyle:d,borderColor:m,...y}=il("Divider",e),{className:b,orientation:w="horizontal",__css:O,...A}=Mn(e),E={vertical:{borderLeftWidth:n||a||o||"1px",height:"100%"},horizontal:{borderBottomWidth:i||s||o||"1px",width:"100%"}};return u.jsx(mt.hr,{ref:r,"aria-orientation":w,...A,__css:{...y,border:"0",borderColor:m,borderStyle:d,...E[w],...O},className:sr("chakra-divider",b)})});Fr.displayName="Divider";function nv(t){return typeof t=="function"}function Ufe(...t){return e=>t.reduce((r,n)=>n(r),e)}const qfe=t=>function(...r){let n=[...r],i=r[r.length-1];return Soe(i)&&n.length>1?n=n.slice(0,n.length-1):i=t,Ufe(...n.map(s=>a=>nv(s)?s(a):Hfe(a,s)))(i)},Qfe=qfe(oV);function Hfe(...t){return jl({},...t,cW)}function cW(t,e,r,n){if((nv(t)||nv(e))&&Object.prototype.hasOwnProperty.call(n,r))return(...i)=>{const s=nv(t)?t(...i):t,a=nv(e)?e(...i):e;return jl({},s,a,cW)};if(eo(t)&&zj(e)||zj(t)&&eo(e))return e}const Sr=Ct(function(e,r){const{direction:n,align:i,justify:s,wrap:a,basis:o,grow:d,shrink:m,...y}=e,b={display:"flex",flexDirection:n,alignItems:i,justifyContent:s,flexWrap:a,flexBasis:o,flexGrow:d,flexShrink:m};return u.jsx(mt.div,{ref:r,__css:b,...y})});Sr.displayName="Flex";function uW(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var fA="data-focus-lock",hW="data-focus-lock-disabled",Gfe="data-no-focus-lock",Xfe="data-autofocus-inside",Kfe="data-no-autofocus";function RO(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Zfe(t,e){var r=I.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=e,r.facade}var Yfe=typeof window<"u"?I.useLayoutEffect:I.useEffect,d4=new WeakMap;function dW(t,e){var r=Zfe(null,function(n){return t.forEach(function(i){return RO(i,n)})});return Yfe(function(){var n=d4.get(r);if(n){var i=new Set(n),s=new Set(t),a=r.current;i.forEach(function(o){s.has(o)||RO(o,null)}),s.forEach(function(o){i.has(o)||RO(o,a)})}d4.set(r,t)},[t]),r}var LO={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},Yc=function(){return Yc=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Yc.apply(this,arguments)};function fW(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Jfe(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function pW(t){return t}function mW(t,e){e===void 0&&(e=pW);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(s){var a=e(s,n);return r.push(a),function(){r=r.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(n=!0;r.length;){var a=r;r=[],a.forEach(s)}r={push:function(o){return s(o)},filter:function(){return r}}},assignMedium:function(s){n=!0;var a=[];if(r.length){var o=r;r=[],o.forEach(s),a=r}var d=function(){var y=a;a=[],y.forEach(s)},m=function(){return Promise.resolve().then(d)};m(),r={push:function(y){a.push(y),m()},filter:function(y){return a=a.filter(y),r}}}};return i}function qM(t,e){return e===void 0&&(e=pW),mW(t,e)}function gW(t){t===void 0&&(t={});var e=mW(null);return e.options=Yc({async:!0,ssr:!1},t),e}var yW=function(t){var e=t.sideCar,r=fW(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return I.createElement(n,Yc({},r))};yW.isSideCarExport=!0;function epe(t,e){return t.useMedium(e),yW}var xW=qM({},function(t){var e=t.target,r=t.currentTarget;return{target:e,currentTarget:r}}),vW=qM(),tpe=qM(),rpe=gW({async:!0,ssr:typeof document<"u"}),npe=I.createContext(void 0),ipe=[],QM=I.forwardRef(function(e,r){var n,i=I.useState(),s=i[0],a=i[1],o=I.useRef(),d=I.useRef(!1),m=I.useRef(null),y=I.useState({}),b=y[1],w=e.children,O=e.disabled,A=O===void 0?!1:O,E=e.noFocusGuards,$=E===void 0?!1:E,R=e.persistentFocus,F=R===void 0?!1:R,L=e.crossFrame,U=L===void 0?!0:L,Q=e.autoFocus,Y=Q===void 0?!0:Q;e.allowTextSelection;var Z=e.group,J=e.className,re=e.whiteList,he=e.hasPositiveIndices,le=e.shards,Ze=le===void 0?ipe:le,Ee=e.as,qe=Ee===void 0?"div":Ee,et=e.lockProps,at=et===void 0?{}:et,Be=e.sideCar,Me=e.returnFocus,Ge=Me===void 0?!1:Me,Le=e.focusOptions,Ie=e.onActivation,Oe=e.onDeactivation,Re=I.useState({}),nt=Re[0],ze=I.useCallback(function(Te){var lt=Te.captureFocusRestore;if(!m.current){var Nt,Tt=(Nt=document)==null?void 0:Nt.activeElement;m.current=Tt,Tt!==document.body&&(m.current=lt(Tt))}o.current&&Ie&&Ie(o.current),d.current=!0,b()},[Ie]),rt=I.useCallback(function(){d.current=!1,Oe&&Oe(o.current),b()},[Oe]),Xe=I.useCallback(function(Te){var lt=m.current;if(lt){var Nt=(typeof lt=="function"?lt():lt)||document.body,Tt=typeof Ge=="function"?Ge(Nt):Ge;if(Tt){var Vt=typeof Tt=="object"?Tt:void 0;m.current=null,Te?Promise.resolve().then(function(){return Nt.focus(Vt)}):Nt.focus(Vt)}}},[Ge]),_t=I.useCallback(function(Te){d.current&&xW.useMedium(Te)},[]),Mt=vW.useMedium,Et=I.useCallback(function(Te){o.current!==Te&&(o.current=Te,a(Te))},[]),yt=Hd((n={},n[hW]=A&&"disabled",n[fA]=Z,n),at),Je=$!==!0,Kt=Je&&$!=="tail",vt=dW([r,Et]),st=I.useMemo(function(){return{observed:o,shards:Ze,enabled:!A,get active(){return d.current}}},[A,d,Ze,o]);return Mi.createElement(I.Fragment,null,Je&&[Mi.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:A?-1:0,style:LO}),he?Mi.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:A?-1:1,style:LO}):null],!A&&Mi.createElement(Be,{id:nt,sideCar:rpe,observed:s,disabled:A,persistentFocus:F,crossFrame:U,autoFocus:Y,whiteList:re,shards:Ze,onActivation:ze,onDeactivation:rt,returnFocus:Xe,focusOptions:Le,noFocusGuards:$}),Mi.createElement(qe,Hd({ref:vt},yt,{className:J,onBlur:Mt,onFocus:_t}),Mi.createElement(npe.Provider,{value:st},w)),Kt&&Mi.createElement("div",{"data-focus-guard":!0,tabIndex:A?-1:0,style:LO}))});QM.propTypes={};function pA(t,e){return pA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},pA(t,e)}function spe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,pA(t,e)}function xb(t){"@babel/helpers - typeof";return xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xb(t)}function ope(t,e){if(xb(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ape(t){var e=ope(t,"string");return xb(e)=="symbol"?e:e+""}function lpe(t,e,r){return(e=ape(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cpe(t,e){function r(n){return n.displayName||n.name||"Component"}return function(i){var s=[],a;function o(){a=t(s.map(function(m){return m.props})),e(a)}var d=function(m){spe(y,m);function y(){return m.apply(this,arguments)||this}y.peek=function(){return a};var b=y.prototype;return b.componentDidMount=function(){s.push(this),o()},b.componentDidUpdate=function(){o()},b.componentWillUnmount=function(){var O=s.indexOf(this);s.splice(O,1),o()},b.render=function(){return Mi.createElement(i,this.props)},y}(I.PureComponent);return lpe(d,"displayName","SideEffect("+r(i)+")"),d}}var yu=function(t){for(var e=Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e},Xp=function(t){return Array.isArray(t)?t:[t]},bW=function(t){return Array.isArray(t)?t[0]:t},upe=function(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(t,null);return!e||!e.getPropertyValue?!1:e.getPropertyValue("display")==="none"||e.getPropertyValue("visibility")==="hidden"},_W=function(t){return t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode},wW=function(t){return t===document||t&&t.nodeType===Node.DOCUMENT_NODE},hpe=function(t){return t.hasAttribute("inert")},dpe=function(t,e){return!t||wW(t)||!upe(t)&&!hpe(t)&&e(_W(t))},SW=function(t,e){var r=t.get(e);if(r!==void 0)return r;var n=dpe(e,SW.bind(void 0,t));return t.set(e,n),n},fpe=function(t,e){return t&&!wW(t)?gpe(t)?e(_W(t)):!1:!0},kW=function(t,e){var r=t.get(e);if(r!==void 0)return r;var n=fpe(e,kW.bind(void 0,t));return t.set(e,n),n},CW=function(t){return t.dataset},ppe=function(t){return t.tagName==="BUTTON"},TW=function(t){return t.tagName==="INPUT"},OW=function(t){return TW(t)&&t.type==="radio"},mpe=function(t){return!((TW(t)||ppe(t))&&(t.type==="hidden"||t.disabled))},gpe=function(t){var e=t.getAttribute(Kfe);return![!0,"true",""].includes(e)},HM=function(t){var e;return!!(t&&(!((e=CW(t))===null||e===void 0)&&e.focusGuard))},mA=function(t){return!HM(t)},ype=function(t){return!!t},xpe=function(t,e){var r=Math.max(0,t.tabIndex),n=Math.max(0,e.tabIndex),i=r-n,s=t.index-e.index;if(i){if(!r)return 1;if(!n)return-1}return i||s},vpe=function(t){return t.tabIndex<0&&!t.hasAttribute("tabindex")?0:t.tabIndex},GM=function(t,e,r){return yu(t).map(function(n,i){var s=vpe(n);return{node:n,index:i,tabIndex:r&&s===-1?(n.dataset||{}).focusGuard?0:-1:s}}).filter(function(n){return!e||n.tabIndex>=0}).sort(xpe)},bpe=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],XM=bpe.join(","),_pe="".concat(XM,", [data-focus-guard]"),PW=function(t,e){return yu((t.shadowRoot||t).children).reduce(function(r,n){return r.concat(n.matches(e?_pe:XM)?[n]:[],PW(n))},[])},wpe=function(t,e){var r;return t instanceof HTMLIFrameElement&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?Ny([t.contentDocument.body],e):[t]},Ny=function(t,e){return t.reduce(function(r,n){var i,s=PW(n,e),a=(i=[]).concat.apply(i,s.map(function(o){return wpe(o,e)}));return r.concat(a,n.parentNode?yu(n.parentNode.querySelectorAll(XM)).filter(function(o){return o===n}):[])},[])},Spe=function(t){var e=t.querySelectorAll("[".concat(Xfe,"]"));return yu(e).map(function(r){return Ny([r])}).reduce(function(r,n){return r.concat(n)},[])},KM=function(t,e){return yu(t).filter(function(r){return SW(e,r)}).filter(function(r){return mpe(r)})},f4=function(t,e){return e===void 0&&(e=new Map),yu(t).filter(function(r){return kW(e,r)})},ZM=function(t,e,r){return GM(KM(Ny(t,r),e),!0,r)},vb=function(t,e){return GM(KM(Ny(t),e),!1)},kpe=function(t,e){return KM(Spe(t),e)},zp=function(t,e){return t.shadowRoot?zp(t.shadowRoot,e):Object.getPrototypeOf(t).contains!==void 0&&Object.getPrototypeOf(t).contains.call(t,e)?!0:yu(t.children).some(function(r){var n;if(r instanceof HTMLIFrameElement){var i=(n=r.contentDocument)===null||n===void 0?void 0:n.body;return i?zp(i,e):!1}return zp(r,e)})},Cpe=function(t){for(var e=new Set,r=t.length,n=0;n<r;n+=1)for(var i=n+1;i<r;i+=1){var s=t[n].compareDocumentPosition(t[i]);(s&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&e.add(i),(s&Node.DOCUMENT_POSITION_CONTAINS)>0&&e.add(n)}return t.filter(function(a,o){return!e.has(o)})},jW=function(t){return t.parentNode?jW(t.parentNode):t},YM=function(t){var e=Xp(t);return e.filter(Boolean).reduce(function(r,n){var i=n.getAttribute(fA);return r.push.apply(r,i?Cpe(yu(jW(n).querySelectorAll("[".concat(fA,'="').concat(i,'"]:not([').concat(hW,'="disabled"])')))):[n]),r},[])},Tpe=function(t){try{return t()}catch{return}},bb=function(t){if(t===void 0&&(t=document),!(!t||!t.activeElement)){var e=t.activeElement;return e.shadowRoot?bb(e.shadowRoot):e instanceof HTMLIFrameElement&&Tpe(function(){return e.contentWindow.document})?bb(e.contentWindow.document):e}},Ope=function(t,e){return t===e},Ppe=function(t,e){return!!yu(t.querySelectorAll("iframe")).some(function(r){return Ope(r,e)})},AW=function(t,e){return e===void 0&&(e=bb(bW(t).ownerDocument)),!e||e.dataset&&e.dataset.focusGuard?!1:YM(t).some(function(r){return zp(r,e)||Ppe(r,e)})},jpe=function(t){t===void 0&&(t=document);var e=bb(t);return e?yu(t.querySelectorAll("[".concat(Gfe,"]"))).some(function(r){return zp(r,e)}):!1},Ape=function(t,e){return e.filter(OW).filter(function(r){return r.name===t.name}).filter(function(r){return r.checked})[0]||t},JM=function(t,e){return OW(t)&&t.name?Ape(t,e):t},Epe=function(t){var e=new Set;return t.forEach(function(r){return e.add(JM(r,t))}),t.filter(function(r){return e.has(r)})},p4=function(t){return t[0]&&t.length>1?JM(t[0],t):t[0]},m4=function(t,e){return t.indexOf(JM(e,t))},gA="NEW_FOCUS",zpe=function(t,e,r,n,i){var s=t.length,a=t[0],o=t[s-1],d=HM(n);if(!(n&&t.indexOf(n)>=0)){var m=n!==void 0?r.indexOf(n):-1,y=i?r.indexOf(i):m,b=i?t.indexOf(i):-1;if(m===-1)return b!==-1?b:gA;if(b===-1)return gA;var w=m-y,O=r.indexOf(a),A=r.indexOf(o),E=Epe(r),$=n!==void 0?E.indexOf(n):-1,R=i?E.indexOf(i):$,F=E.filter(function(J){return J.tabIndex>=0}),L=n!==void 0?F.indexOf(n):-1,U=i?F.indexOf(i):L,Q=L>=0&&U>=0?U-L:R-$;if(!w&&b>=0||e.length===0)return b;var Y=m4(t,e[0]),Z=m4(t,e[e.length-1]);if(m<=O&&d&&Math.abs(w)>1)return Z;if(m>=A&&d&&Math.abs(w)>1)return Y;if(w&&Math.abs(Q)>1)return b;if(m<=O)return Z;if(m>A)return Y;if(w)return Math.abs(w)>1?b:(s+b+w)%s}},Mpe=function(t){return function(e){var r,n=(r=CW(e))===null||r===void 0?void 0:r.autofocus;return e.autofocus||n!==void 0&&n!=="false"||t.indexOf(e)>=0}},g4=function(t,e,r){var n=t.map(function(s){var a=s.node;return a}),i=f4(n.filter(Mpe(r)));return i&&i.length?p4(i):p4(f4(e))},yA=function(t,e){return e===void 0&&(e=[]),e.push(t),t.parentNode&&yA(t.parentNode.host||t.parentNode,e),e},FO=function(t,e){for(var r=yA(t),n=yA(e),i=0;i<r.length;i+=1){var s=r[i];if(n.indexOf(s)>=0)return s}return!1},EW=function(t,e,r){var n=Xp(t),i=Xp(e),s=n[0],a=!1;return i.filter(Boolean).forEach(function(o){a=FO(a||o,o)||a,r.filter(Boolean).forEach(function(d){var m=FO(s,d);m&&(!a||zp(m,a)?a=m:a=FO(m,a))})}),a},y4=function(t,e){return t.reduce(function(r,n){return r.concat(kpe(n,e))},[])},Ipe=function(t,e){var r=new Map;return e.forEach(function(n){return r.set(n.node,n)}),t.map(function(n){return r.get(n)}).filter(ype)},Dpe=function(t,e){var r=bb(Xp(t).length>0?document:bW(t).ownerDocument),n=YM(t).filter(mA),i=EW(r||t,t,n),s=new Map,a=vb(n,s),o=a.filter(function(A){var E=A.node;return mA(E)});if(o[0]){var d=vb([i],s).map(function(A){var E=A.node;return E}),m=Ipe(d,o),y=m.map(function(A){var E=A.node;return E}),b=m.filter(function(A){var E=A.tabIndex;return E>=0}).map(function(A){var E=A.node;return E}),w=zpe(y,b,d,r,e);if(w===gA){var O=g4(a,b,y4(n,s))||g4(a,y,y4(n,s));if(O)return{node:O};console.warn("focus-lock: cannot find any node to move focus into");return}return w===void 0?w:m[w]}},Rpe=function(t){var e=YM(t).filter(mA),r=EW(t,t,e),n=GM(Ny([r],!0),!0,!0),i=Ny(e,!1);return n.map(function(s){var a=s.node,o=s.index;return{node:a,index:o,lockItem:i.indexOf(a)>=0,guard:HM(a)}})},eI=function(t,e){t&&("focus"in t&&t.focus(e),"contentWindow"in t&&t.contentWindow&&t.contentWindow.focus())},BO=0,$O=!1,zW=function(t,e,r){r===void 0&&(r={});var n=Dpe(t,e);if(!$O&&n){if(BO>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),$O=!0,setTimeout(function(){$O=!1},1);return}BO++,eI(n.node,r.focusOptions),BO--}};function Rx(t){if(!t)return null;if(typeof WeakRef>"u")return function(){return t||null};var e=t?new WeakRef(t):null;return function(){return(e==null?void 0:e.deref())||null}}var Lpe=function(t){if(!t)return null;for(var e=[],r=t;r&&r!==document.body;)e.push({current:Rx(r),parent:Rx(r.parentElement),left:Rx(r.previousElementSibling),right:Rx(r.nextElementSibling)}),r=r.parentElement;return{element:Rx(t),stack:e,ownerDocument:t.ownerDocument}},Fpe=function(t){var e,r,n,i,s;if(t)for(var a=t.stack,o=t.ownerDocument,d=new Map,m=0,y=a;m<y.length;m++){var b=y[m],w=(e=b.parent)===null||e===void 0?void 0:e.call(b);if(w&&o.contains(w)){for(var O=(r=b.left)===null||r===void 0?void 0:r.call(b),A=b.current(),E=w.contains(A)?A:void 0,$=(n=b.right)===null||n===void 0?void 0:n.call(b),R=ZM([w],d),F=(s=(i=E??(O==null?void 0:O.nextElementSibling))!==null&&i!==void 0?i:$)!==null&&s!==void 0?s:O;F;){for(var L=0,U=R;L<U.length;L++){var Q=U[L];if(F!=null&&F.contains(Q.node))return Q.node}F=F.nextElementSibling}if(R.length)return R[0].node}}},MW=function(t){var e=Lpe(t);return function(){return Fpe(e)}},Bpe=function(t,e,r){if(!t||!e)return console.error("no element or scope given"),{};var n=Xp(e);if(n.every(function(a){return!zp(a,t)}))return console.error("Active element is not contained in the scope"),{};var i=r?ZM(n,new Map):vb(n,new Map),s=i.findIndex(function(a){var o=a.node;return o===t});if(s!==-1)return{prev:i[s-1],next:i[s+1],first:i[0],last:i[i.length-1]}},$pe=function(t,e){var r=e?ZM(Xp(t),new Map):vb(Xp(t),new Map);return{first:r[0],last:r[r.length-1]}},Npe=function(t){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},t)},IW=function(t,e,r){e===void 0&&(e={});var n=Npe(e),i=Bpe(t,n.scope,n.onlyTabbable);if(i){var s=r(i,n.cycle);s&&eI(s.node,n.focusOptions)}},Vpe=function(t,e){e===void 0&&(e={}),IW(t,e,function(r,n){var i=r.next,s=r.first;return i||n&&s})},Wpe=function(t,e){e===void 0&&(e={}),IW(t,e,function(r,n){var i=r.prev,s=r.last;return i||n&&s})},DW=function(t,e,r){var n,i=$pe(t,(n=e.onlyTabbable)!==null&&n!==void 0?n:!0),s=i[r];s&&eI(s.node,e.focusOptions)},Upe=function(t,e){e===void 0&&(e={}),DW(t,e,"first")},qpe=function(t,e){e===void 0&&(e={}),DW(t,e,"last")};function tI(t){setTimeout(t,1)}var Qpe=function(e){return e&&"current"in e?e.current:e},RW=function(){return document&&document.activeElement===document.body},Hpe=function(){return RW()||jpe()},iy=null,ia=null,x4=function(){return null},sy=null,_b=!1,rI=!1,Gpe=function(){return!0},Xpe=function(e){return(iy.whiteList||Gpe)(e)},Kpe=function(e,r){sy={observerNode:e,portaledElement:r}},Zpe=function(e){return sy&&sy.portaledElement===e};function v4(t,e,r,n){var i=null,s=t;do{var a=n[s];if(a.guard)a.node.dataset.focusAutoGuard&&(i=a);else if(a.lockItem){if(s!==t)return;i=null}else break}while((s+=r)!==e);i&&(i.node.tabIndex=0)}var Ype=function(e){return e?!!_b:_b==="meanwhile"},Jpe=function t(e,r,n){return r&&(r.host===e&&(!r.activeElement||n.contains(r.activeElement))||r.parentNode&&t(e,r.parentNode,n))},eme=function(e,r){return r.some(function(n){return Jpe(e,n,n)})},LW=function(e){return vb(e,new Map)},tme=function(e){return!LW([e.parentNode]).some(function(r){return r.node===e})},y2=function(){var e=!1;if(iy){var r=iy,n=r.observed,i=r.persistentFocus,s=r.autoFocus,a=r.shards,o=r.crossFrame,d=r.focusOptions,m=r.noFocusGuards,y=n||sy&&sy.portaledElement;if(RW()&&ia&&ia!==document.body&&(!document.body.contains(ia)||tme(ia))){var b=x4();b&&b.focus()}var w=document&&document.activeElement;if(y){var O=[y].concat(a.map(Qpe).filter(Boolean)),A=function(){if(!Ype(o)||!m||!ia||rI)return!1;var L=LW(O),U=L.findIndex(function(Q){var Y=Q.node;return Y===ia});return U===0||U===L.length-1};if((!w||Xpe(w))&&(i||A()||!Hpe()||!ia&&s)&&(y&&!(AW(O)||w&&eme(w,O)||Zpe(w))&&(document&&!ia&&w&&!s?(w.blur&&w.blur(),document.body.focus()):(e=zW(O,ia,{focusOptions:d}),sy={})),ia=document&&document.activeElement,ia!==document.body&&(x4=MW(ia)),_b=!1),document&&w!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var E=document&&document.activeElement,$=Rpe(O),R=$.map(function(F){var L=F.node;return L}).indexOf(E);R>-1&&($.filter(function(F){var L=F.guard,U=F.node;return L&&U.dataset.focusAutoGuard}).forEach(function(F){var L=F.node;return L.removeAttribute("tabIndex")}),v4(R,$.length,1,$),v4(R,-1,-1,$))}}}return e},FW=function(e){y2()&&e&&(e.stopPropagation(),e.preventDefault())},nI=function(){return tI(y2)},rme=function(e){var r=e.target,n=e.currentTarget;n.contains(r)||Kpe(n,r)},nme=function(){return null},BW=function(){rI=!0},$W=function(){rI=!1,_b="just",tI(function(){_b="meanwhile"})},ime=function(){document.addEventListener("focusin",FW),document.addEventListener("focusout",nI),window.addEventListener("focus",BW),window.addEventListener("blur",$W)},sme=function(){document.removeEventListener("focusin",FW),document.removeEventListener("focusout",nI),window.removeEventListener("focus",BW),window.removeEventListener("blur",$W)};function ome(t){return t.filter(function(e){var r=e.disabled;return!r})}var NW={moveFocusInside:zW,focusInside:AW,focusNextElement:Vpe,focusPrevElement:Wpe,focusFirstElement:Upe,focusLastElement:qpe,captureFocusRestore:MW};function ame(t){var e=t.slice(-1)[0];e&&!iy&&ime();var r=iy,n=r&&e&&e.id===r.id;iy=e,r&&!n&&(r.onDeactivation(),t.filter(function(i){var s=i.id;return s===r.id}).length||r.returnFocus(!e)),e?(ia=null,(!n||r.observed!==e.observed)&&e.onActivation(NW),y2(),tI(y2)):(sme(),ia=null)}xW.assignSyncMedium(rme);vW.assignMedium(nI);tpe.assignMedium(function(t){return t(NW)});const lme=cpe(ome,ame)(nme);var xA=I.forwardRef(function(e,r){return Mi.createElement(QM,Hd({sideCar:lme,ref:r},e))}),VW=QM.propTypes||{};VW.sideCar;uW(VW,["sideCar"]);xA.propTypes={};const cme=xA.default??xA,WW=t=>{const{initialFocusRef:e,finalFocusRef:r,contentRef:n,restoreFocus:i,children:s,isDisabled:a,autoFocus:o,persistentFocus:d,lockFocusAcrossFrames:m}=t,y=I.useCallback(()=>{e!=null&&e.current?e.current.focus():n!=null&&n.current&&SY(n.current).length===0&&requestAnimationFrame(()=>{var A;(A=n.current)==null||A.focus()})},[e,n]),b=I.useCallback(()=>{var O;(O=r==null?void 0:r.current)==null||O.focus()},[r]),w=i&&!r;return u.jsx(cme,{crossFrame:m,persistentFocus:d,autoFocus:o,disabled:a,onActivation:y,onDeactivation:b,returnFocus:w,children:s})};WW.displayName="FocusLock";const Pt=Ct(function(e,r){const n=il("FormLabel",e),i=Mn(e),{className:s,children:a,requiredIndicator:o=u.jsx(UW,{}),optionalIndicator:d=null,...m}=i,y=x1(),b=(y==null?void 0:y.getLabelProps(m,r))??{ref:r,...m};return u.jsxs(mt.label,{...b,className:sr("chakra-form__label",i.className),__css:{display:"block",textAlign:"start",...n},children:[a,y!=null&&y.isRequired?o:d]})});Pt.displayName="FormLabel";const UW=Ct(function(e,r){const n=x1(),i=oW();if(!(n!=null&&n.isRequired))return null;const s=sr("chakra-form__required-indicator",e.className);return u.jsx(mt.span,{...n==null?void 0:n.getRequiredIndicatorProps(e,r),__css:i.requiredIndicator,className:s})});UW.displayName="RequiredIndicator";const qW=Ct(function(e,r){const{templateAreas:n,gap:i,rowGap:s,columnGap:a,column:o,row:d,autoFlow:m,autoRows:y,templateRows:b,autoColumns:w,templateColumns:O,...A}=e,E={display:"grid",gridTemplateAreas:n,gridGap:i,gridRowGap:s,gridColumnGap:a,gridAutoColumns:w,gridColumn:o,gridRow:d,gridAutoFlow:m,gridAutoRows:y,gridTemplateRows:b,gridTemplateColumns:O};return u.jsx(mt.div,{ref:r,__css:E,...A})});qW.displayName="Grid";const nn=Ct(function(e,r){const{columns:n,spacingX:i,spacingY:s,spacing:a,minChildWidth:o,...d}=e,m=m1(),y=o?hme(o,m):dme(n);return u.jsx(qW,{ref:r,gap:a,columnGap:i,rowGap:s,templateColumns:y,...d})});nn.displayName="SimpleGrid";function ume(t){return typeof t=="number"?`${t}px`:t}function hme(t,e){return Vz(t,r=>{const n=Cde("sizes",r,ume(r))(e);return r===null?null:`repeat(auto-fit, minmax(${n}, 1fr))`})}function dme(t){return Vz(t,e=>e===null?null:`repeat(${e}, minmax(0, 1fr))`)}const Ar=Ct(function(e,r){const{htmlSize:n,...i}=e,s=ns("Input",i),a=Mn(i),o=WM(a),d=sr("chakra-input",e.className);return u.jsx(mt.input,{size:n,...o,__css:s.field,ref:r,className:d})});Ar.displayName="Input";Ar.id="Input";const[fme,pme]=_n({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),aa=Ct(function(e,r){const n=ns("Input",e),{children:i,className:s,...a}=Mn(e),o=sr("chakra-input__group",s),d={},m=pk(i),y=n.field;m.forEach(w=>{n&&(y&&w.type.id==="InputLeftElement"&&(d.paddingStart=y.height??y.h),y&&w.type.id==="InputRightElement"&&(d.paddingEnd=y.height??y.h),w.type.id==="InputRightAddon"&&(d.borderEndRadius=0),w.type.id==="InputLeftAddon"&&(d.borderStartRadius=0))});const b=m.map(w=>{var A,E;const O=mk({size:((A=w.props)==null?void 0:A.size)||e.size,variant:((E=w.props)==null?void 0:E.variant)||e.variant});return w.type.id!=="Input"?I.cloneElement(w,O):I.cloneElement(w,Object.assign(O,d,w.props))});return u.jsx(mt.div,{className:o,ref:r,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...n.group},"data-group":!0,...a,children:u.jsx(fme,{value:n,children:b})})});aa.displayName="InputGroup";const mme=mt("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),Qk=Ct(function(e,r){const{placement:n="left",...i}=e,s=pme(),a=s.field,d={[n==="left"?"insetStart":"insetEnd"]:"0",width:(a==null?void 0:a.height)??(a==null?void 0:a.h),height:(a==null?void 0:a.height)??(a==null?void 0:a.h),fontSize:a==null?void 0:a.fontSize,...s.element};return u.jsx(mme,{ref:r,__css:d,...i})});Qk.id="InputElement";Qk.displayName="InputElement";const vl=Ct(function(e,r){const{className:n,...i}=e,s=sr("chakra-input__left-element",n);return u.jsx(Qk,{ref:r,placement:"left",className:s,...i})});vl.id="InputLeftElement";vl.displayName="InputLeftElement";const wb=Ct(function(e,r){const{className:n,...i}=e,s=sr("chakra-input__right-element",n);return u.jsx(Qk,{ref:r,placement:"right",className:s,...i})});wb.id="InputRightElement";wb.displayName="InputRightElement";const Xc=Ct(function(e,r){const n=il("Kbd",e),{className:i,...s}=Mn(e);return u.jsx(mt.kbd,{ref:r,className:sr("chakra-kbd",i),...s,__css:{fontFamily:"mono",...n}})});Xc.displayName="Kbd";const[gme,QW]=_n({name:"ListStylesContext",errorMessage:`useListStyles returned is 'undefined'. Seems you forgot to wrap the components in "<List />" `}),v1=Ct(function(e,r){const n=ns("List",e),{children:i,styleType:s="none",stylePosition:a,spacing:o,...d}=Mn(e),m=pk(i),b=o?{["& > *:not(style) ~ *:not(style)"]:{mt:o}}:{};return u.jsx(gme,{value:n,children:u.jsx(mt.ul,{ref:r,listStyleType:s,listStylePosition:a,role:"list",__css:{...n.container,...b},...d,children:m})})});v1.displayName="List";const yme=Ct((t,e)=>{const{as:r,...n}=t;return u.jsx(v1,{ref:e,as:"ol",styleType:"decimal",marginStart:"1em",...n})});yme.displayName="OrderedList";const xme=Ct(function(e,r){const{as:n,...i}=e;return u.jsx(v1,{ref:r,as:"ul",styleType:"initial",marginStart:"1em",...i})});xme.displayName="UnorderedList";const iI=Ct(function(e,r){const n=QW();return u.jsx(mt.li,{ref:r,...e,__css:n.item})});iI.displayName="ListItem";const sI=Ct(function(e,r){const n=QW();return u.jsx(He,{ref:r,role:"presentation",...e,__css:n.icon})});sI.displayName="ListIcon";function vme(t,e,r,n){if(e==null)return n;if(!n)return t.find(a=>r(a).toLowerCase().startsWith(e.toLowerCase()));const i=t.filter(s=>r(s).toLowerCase().startsWith(e.toLowerCase()));if(i.length>0){let s;return i.includes(n)?(s=i.indexOf(n)+1,s===i.length&&(s=0),i[s]):(s=t.indexOf(i[0]),t[s])}return n}function bme(t){const{key:e}=t;return e.length===1||e.length>1&&/[^a-zA-Z0-9]/.test(e)}function _me(t={}){const{timeout:e=300,preventDefault:r=()=>!0}=t,[n,i]=I.useState([]),s=I.useRef(void 0),a=()=>{s.current&&(clearTimeout(s.current),s.current=null)},o=()=>{a(),s.current=setTimeout(()=>{i([]),s.current=null},e)};I.useEffect(()=>a,[]);function d(m){return y=>{if(y.key==="Backspace"){const b=[...n];b.pop(),i(b);return}if(bme(y)){const b=n.concat(y.key);r(y)&&(y.preventDefault(),y.stopPropagation()),i(b),m(b.join("")),o()}}}return d}var wa="top",Bl="bottom",$l="right",Sa="left",oI="auto",b1=[wa,Bl,$l,Sa],Vy="start",Sb="end",wme="clippingParents",HW="viewport",Lx="popper",Sme="reference",b4=b1.reduce(function(t,e){return t.concat([e+"-"+Vy,e+"-"+Sb])},[]),GW=[].concat(b1,[oI]).reduce(function(t,e){return t.concat([e,e+"-"+Vy,e+"-"+Sb])},[]),kme="beforeRead",Cme="read",Tme="afterRead",Ome="beforeMain",Pme="main",jme="afterMain",Ame="beforeWrite",Eme="write",zme="afterWrite",Mme=[kme,Cme,Tme,Ome,Pme,jme,Ame,Eme,zme];function pu(t){return t?(t.nodeName||"").toLowerCase():null}function Ja(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Kp(t){var e=Ja(t).Element;return t instanceof e||t instanceof Element}function Dl(t){var e=Ja(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function aI(t){if(typeof ShadowRoot>"u")return!1;var e=Ja(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Ime(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},i=e.attributes[r]||{},s=e.elements[r];!Dl(s)||!pu(s)||(Object.assign(s.style,n),Object.keys(i).forEach(function(a){var o=i[a];o===!1?s.removeAttribute(a):s.setAttribute(a,o===!0?"":o)}))})}function Dme(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],s=e.attributes[n]||{},a=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),o=a.reduce(function(d,m){return d[m]="",d},{});!Dl(i)||!pu(i)||(Object.assign(i.style,o),Object.keys(s).forEach(function(d){i.removeAttribute(d)}))})}}const Rme={name:"applyStyles",enabled:!0,phase:"write",fn:Ime,effect:Dme,requires:["computeStyles"]};function du(t){return t.split("-")[0]}var Mp=Math.max,x2=Math.min,Wy=Math.round;function vA(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function XW(){return!/^((?!chrome|android).)*safari/i.test(vA())}function Uy(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var n=t.getBoundingClientRect(),i=1,s=1;e&&Dl(t)&&(i=t.offsetWidth>0&&Wy(n.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Wy(n.height)/t.offsetHeight||1);var a=Kp(t)?Ja(t):window,o=a.visualViewport,d=!XW()&&r,m=(n.left+(d&&o?o.offsetLeft:0))/i,y=(n.top+(d&&o?o.offsetTop:0))/s,b=n.width/i,w=n.height/s;return{width:b,height:w,top:y,right:m+b,bottom:y+w,left:m,x:m,y}}function lI(t){var e=Uy(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function KW(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&aI(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function xh(t){return Ja(t).getComputedStyle(t)}function Lme(t){return["table","td","th"].indexOf(pu(t))>=0}function ff(t){return((Kp(t)?t.ownerDocument:t.document)||window.document).documentElement}function Hk(t){return pu(t)==="html"?t:t.assignedSlot||t.parentNode||(aI(t)?t.host:null)||ff(t)}function _4(t){return!Dl(t)||xh(t).position==="fixed"?null:t.offsetParent}function Fme(t){var e=/firefox/i.test(vA()),r=/Trident/i.test(vA());if(r&&Dl(t)){var n=xh(t);if(n.position==="fixed")return null}var i=Hk(t);for(aI(i)&&(i=i.host);Dl(i)&&["html","body"].indexOf(pu(i))<0;){var s=xh(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function _1(t){for(var e=Ja(t),r=_4(t);r&&Lme(r)&&xh(r).position==="static";)r=_4(r);return r&&(pu(r)==="html"||pu(r)==="body"&&xh(r).position==="static")?e:r||Fme(t)||e}function cI(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function zv(t,e,r){return Mp(t,x2(e,r))}function Bme(t,e,r){var n=zv(t,e,r);return n>r?r:n}function ZW(){return{top:0,right:0,bottom:0,left:0}}function YW(t){return Object.assign({},ZW(),t)}function JW(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var $me=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,YW(typeof e!="number"?e:JW(e,b1))};function Nme(t){var e,r=t.state,n=t.name,i=t.options,s=r.elements.arrow,a=r.modifiersData.popperOffsets,o=du(r.placement),d=cI(o),m=[Sa,$l].indexOf(o)>=0,y=m?"height":"width";if(!(!s||!a)){var b=$me(i.padding,r),w=lI(s),O=d==="y"?wa:Sa,A=d==="y"?Bl:$l,E=r.rects.reference[y]+r.rects.reference[d]-a[d]-r.rects.popper[y],$=a[d]-r.rects.reference[d],R=_1(s),F=R?d==="y"?R.clientHeight||0:R.clientWidth||0:0,L=E/2-$/2,U=b[O],Q=F-w[y]-b[A],Y=F/2-w[y]/2+L,Z=zv(U,Y,Q),J=d;r.modifiersData[n]=(e={},e[J]=Z,e.centerOffset=Z-Y,e)}}function Vme(t){var e=t.state,r=t.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||KW(e.elements.popper,i)&&(e.elements.arrow=i))}const Wme={name:"arrow",enabled:!0,phase:"main",fn:Nme,effect:Vme,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qy(t){return t.split("-")[1]}var Ume={top:"auto",right:"auto",bottom:"auto",left:"auto"};function qme(t,e){var r=t.x,n=t.y,i=e.devicePixelRatio||1;return{x:Wy(r*i)/i||0,y:Wy(n*i)/i||0}}function w4(t){var e,r=t.popper,n=t.popperRect,i=t.placement,s=t.variation,a=t.offsets,o=t.position,d=t.gpuAcceleration,m=t.adaptive,y=t.roundOffsets,b=t.isFixed,w=a.x,O=w===void 0?0:w,A=a.y,E=A===void 0?0:A,$=typeof y=="function"?y({x:O,y:E}):{x:O,y:E};O=$.x,E=$.y;var R=a.hasOwnProperty("x"),F=a.hasOwnProperty("y"),L=Sa,U=wa,Q=window;if(m){var Y=_1(r),Z="clientHeight",J="clientWidth";if(Y===Ja(r)&&(Y=ff(r),xh(Y).position!=="static"&&o==="absolute"&&(Z="scrollHeight",J="scrollWidth")),Y=Y,i===wa||(i===Sa||i===$l)&&s===Sb){U=Bl;var re=b&&Y===Q&&Q.visualViewport?Q.visualViewport.height:Y[Z];E-=re-n.height,E*=d?1:-1}if(i===Sa||(i===wa||i===Bl)&&s===Sb){L=$l;var he=b&&Y===Q&&Q.visualViewport?Q.visualViewport.width:Y[J];O-=he-n.width,O*=d?1:-1}}var le=Object.assign({position:o},m&&Ume),Ze=y===!0?qme({x:O,y:E},Ja(r)):{x:O,y:E};if(O=Ze.x,E=Ze.y,d){var Ee;return Object.assign({},le,(Ee={},Ee[U]=F?"0":"",Ee[L]=R?"0":"",Ee.transform=(Q.devicePixelRatio||1)<=1?"translate("+O+"px, "+E+"px)":"translate3d("+O+"px, "+E+"px, 0)",Ee))}return Object.assign({},le,(e={},e[U]=F?E+"px":"",e[L]=R?O+"px":"",e.transform="",e))}function Qme(t){var e=t.state,r=t.options,n=r.gpuAcceleration,i=n===void 0?!0:n,s=r.adaptive,a=s===void 0?!0:s,o=r.roundOffsets,d=o===void 0?!0:o,m={placement:du(e.placement),variation:qy(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,w4(Object.assign({},m,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,w4(Object.assign({},m,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Hme={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Qme,data:{}};var uw={passive:!0};function Gme(t){var e=t.state,r=t.instance,n=t.options,i=n.scroll,s=i===void 0?!0:i,a=n.resize,o=a===void 0?!0:a,d=Ja(e.elements.popper),m=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&m.forEach(function(y){y.addEventListener("scroll",r.update,uw)}),o&&d.addEventListener("resize",r.update,uw),function(){s&&m.forEach(function(y){y.removeEventListener("scroll",r.update,uw)}),o&&d.removeEventListener("resize",r.update,uw)}}const Xme={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Gme,data:{}};var Kme={left:"right",right:"left",bottom:"top",top:"bottom"};function mS(t){return t.replace(/left|right|bottom|top/g,function(e){return Kme[e]})}var Zme={start:"end",end:"start"};function S4(t){return t.replace(/start|end/g,function(e){return Zme[e]})}function uI(t){var e=Ja(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function hI(t){return Uy(ff(t)).left+uI(t).scrollLeft}function Yme(t,e){var r=Ja(t),n=ff(t),i=r.visualViewport,s=n.clientWidth,a=n.clientHeight,o=0,d=0;if(i){s=i.width,a=i.height;var m=XW();(m||!m&&e==="fixed")&&(o=i.offsetLeft,d=i.offsetTop)}return{width:s,height:a,x:o+hI(t),y:d}}function Jme(t){var e,r=ff(t),n=uI(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Mp(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Mp(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-n.scrollLeft+hI(t),d=-n.scrollTop;return xh(i||r).direction==="rtl"&&(o+=Mp(r.clientWidth,i?i.clientWidth:0)-s),{width:s,height:a,x:o,y:d}}function dI(t){var e=xh(t),r=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function e7(t){return["html","body","#document"].indexOf(pu(t))>=0?t.ownerDocument.body:Dl(t)&&dI(t)?t:e7(Hk(t))}function Mv(t,e){var r;e===void 0&&(e=[]);var n=e7(t),i=n===((r=t.ownerDocument)==null?void 0:r.body),s=Ja(n),a=i?[s].concat(s.visualViewport||[],dI(n)?n:[]):n,o=e.concat(a);return i?o:o.concat(Mv(Hk(a)))}function bA(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ege(t,e){var r=Uy(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function k4(t,e,r){return e===HW?bA(Yme(t,r)):Kp(e)?ege(e,r):bA(Jme(ff(t)))}function tge(t){var e=Mv(Hk(t)),r=["absolute","fixed"].indexOf(xh(t).position)>=0,n=r&&Dl(t)?_1(t):t;return Kp(n)?e.filter(function(i){return Kp(i)&&KW(i,n)&&pu(i)!=="body"}):[]}function rge(t,e,r,n){var i=e==="clippingParents"?tge(t):[].concat(e),s=[].concat(i,[r]),a=s[0],o=s.reduce(function(d,m){var y=k4(t,m,n);return d.top=Mp(y.top,d.top),d.right=x2(y.right,d.right),d.bottom=x2(y.bottom,d.bottom),d.left=Mp(y.left,d.left),d},k4(t,a,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function t7(t){var e=t.reference,r=t.element,n=t.placement,i=n?du(n):null,s=n?qy(n):null,a=e.x+e.width/2-r.width/2,o=e.y+e.height/2-r.height/2,d;switch(i){case wa:d={x:a,y:e.y-r.height};break;case Bl:d={x:a,y:e.y+e.height};break;case $l:d={x:e.x+e.width,y:o};break;case Sa:d={x:e.x-r.width,y:o};break;default:d={x:e.x,y:e.y}}var m=i?cI(i):null;if(m!=null){var y=m==="y"?"height":"width";switch(s){case Vy:d[m]=d[m]-(e[y]/2-r[y]/2);break;case Sb:d[m]=d[m]+(e[y]/2-r[y]/2);break}}return d}function kb(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=n===void 0?t.placement:n,s=r.strategy,a=s===void 0?t.strategy:s,o=r.boundary,d=o===void 0?wme:o,m=r.rootBoundary,y=m===void 0?HW:m,b=r.elementContext,w=b===void 0?Lx:b,O=r.altBoundary,A=O===void 0?!1:O,E=r.padding,$=E===void 0?0:E,R=YW(typeof $!="number"?$:JW($,b1)),F=w===Lx?Sme:Lx,L=t.rects.popper,U=t.elements[A?F:w],Q=rge(Kp(U)?U:U.contextElement||ff(t.elements.popper),d,y,a),Y=Uy(t.elements.reference),Z=t7({reference:Y,element:L,placement:i}),J=bA(Object.assign({},L,Z)),re=w===Lx?J:Y,he={top:Q.top-re.top+R.top,bottom:re.bottom-Q.bottom+R.bottom,left:Q.left-re.left+R.left,right:re.right-Q.right+R.right},le=t.modifiersData.offset;if(w===Lx&&le){var Ze=le[i];Object.keys(he).forEach(function(Ee){var qe=[$l,Bl].indexOf(Ee)>=0?1:-1,et=[wa,Bl].indexOf(Ee)>=0?"y":"x";he[Ee]+=Ze[et]*qe})}return he}function nge(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=r.boundary,s=r.rootBoundary,a=r.padding,o=r.flipVariations,d=r.allowedAutoPlacements,m=d===void 0?GW:d,y=qy(n),b=y?o?b4:b4.filter(function(A){return qy(A)===y}):b1,w=b.filter(function(A){return m.indexOf(A)>=0});w.length===0&&(w=b);var O=w.reduce(function(A,E){return A[E]=kb(t,{placement:E,boundary:i,rootBoundary:s,padding:a})[du(E)],A},{});return Object.keys(O).sort(function(A,E){return O[A]-O[E]})}function ige(t){if(du(t)===oI)return[];var e=mS(t);return[S4(t),e,S4(e)]}function sge(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var i=r.mainAxis,s=i===void 0?!0:i,a=r.altAxis,o=a===void 0?!0:a,d=r.fallbackPlacements,m=r.padding,y=r.boundary,b=r.rootBoundary,w=r.altBoundary,O=r.flipVariations,A=O===void 0?!0:O,E=r.allowedAutoPlacements,$=e.options.placement,R=du($),F=R===$,L=d||(F||!A?[mS($)]:ige($)),U=[$].concat(L).reduce(function(nt,ze){return nt.concat(du(ze)===oI?nge(e,{placement:ze,boundary:y,rootBoundary:b,padding:m,flipVariations:A,allowedAutoPlacements:E}):ze)},[]),Q=e.rects.reference,Y=e.rects.popper,Z=new Map,J=!0,re=U[0],he=0;he<U.length;he++){var le=U[he],Ze=du(le),Ee=qy(le)===Vy,qe=[wa,Bl].indexOf(Ze)>=0,et=qe?"width":"height",at=kb(e,{placement:le,boundary:y,rootBoundary:b,altBoundary:w,padding:m}),Be=qe?Ee?$l:Sa:Ee?Bl:wa;Q[et]>Y[et]&&(Be=mS(Be));var Me=mS(Be),Ge=[];if(s&&Ge.push(at[Ze]<=0),o&&Ge.push(at[Be]<=0,at[Me]<=0),Ge.every(function(nt){return nt})){re=le,J=!1;break}Z.set(le,Ge)}if(J)for(var Le=A?3:1,Ie=function(ze){var rt=U.find(function(Xe){var _t=Z.get(Xe);if(_t)return _t.slice(0,ze).every(function(Mt){return Mt})});if(rt)return re=rt,"break"},Oe=Le;Oe>0;Oe--){var Re=Ie(Oe);if(Re==="break")break}e.placement!==re&&(e.modifiersData[n]._skip=!0,e.placement=re,e.reset=!0)}}const oge={name:"flip",enabled:!0,phase:"main",fn:sge,requiresIfExists:["offset"],data:{_skip:!1}};function C4(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function T4(t){return[wa,$l,Bl,Sa].some(function(e){return t[e]>=0})}function age(t){var e=t.state,r=t.name,n=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,a=kb(e,{elementContext:"reference"}),o=kb(e,{altBoundary:!0}),d=C4(a,n),m=C4(o,i,s),y=T4(d),b=T4(m);e.modifiersData[r]={referenceClippingOffsets:d,popperEscapeOffsets:m,isReferenceHidden:y,hasPopperEscaped:b},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":y,"data-popper-escaped":b})}const lge={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:age};function cge(t,e,r){var n=du(t),i=[Sa,wa].indexOf(n)>=0?-1:1,s=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,a=s[0],o=s[1];return a=a||0,o=(o||0)*i,[Sa,$l].indexOf(n)>=0?{x:o,y:a}:{x:a,y:o}}function uge(t){var e=t.state,r=t.options,n=t.name,i=r.offset,s=i===void 0?[0,0]:i,a=GW.reduce(function(y,b){return y[b]=cge(b,e.rects,s),y},{}),o=a[e.placement],d=o.x,m=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=m),e.modifiersData[n]=a}const hge={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:uge};function dge(t){var e=t.state,r=t.name;e.modifiersData[r]=t7({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const fge={name:"popperOffsets",enabled:!0,phase:"read",fn:dge,data:{}};function pge(t){return t==="x"?"y":"x"}function mge(t){var e=t.state,r=t.options,n=t.name,i=r.mainAxis,s=i===void 0?!0:i,a=r.altAxis,o=a===void 0?!1:a,d=r.boundary,m=r.rootBoundary,y=r.altBoundary,b=r.padding,w=r.tether,O=w===void 0?!0:w,A=r.tetherOffset,E=A===void 0?0:A,$=kb(e,{boundary:d,rootBoundary:m,padding:b,altBoundary:y}),R=du(e.placement),F=qy(e.placement),L=!F,U=cI(R),Q=pge(U),Y=e.modifiersData.popperOffsets,Z=e.rects.reference,J=e.rects.popper,re=typeof E=="function"?E(Object.assign({},e.rects,{placement:e.placement})):E,he=typeof re=="number"?{mainAxis:re,altAxis:re}:Object.assign({mainAxis:0,altAxis:0},re),le=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Ze={x:0,y:0};if(Y){if(s){var Ee,qe=U==="y"?wa:Sa,et=U==="y"?Bl:$l,at=U==="y"?"height":"width",Be=Y[U],Me=Be+$[qe],Ge=Be-$[et],Le=O?-J[at]/2:0,Ie=F===Vy?Z[at]:J[at],Oe=F===Vy?-J[at]:-Z[at],Re=e.elements.arrow,nt=O&&Re?lI(Re):{width:0,height:0},ze=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:ZW(),rt=ze[qe],Xe=ze[et],_t=zv(0,Z[at],nt[at]),Mt=L?Z[at]/2-Le-_t-rt-he.mainAxis:Ie-_t-rt-he.mainAxis,Et=L?-Z[at]/2+Le+_t+Xe+he.mainAxis:Oe+_t+Xe+he.mainAxis,yt=e.elements.arrow&&_1(e.elements.arrow),Je=yt?U==="y"?yt.clientTop||0:yt.clientLeft||0:0,Kt=(Ee=le==null?void 0:le[U])!=null?Ee:0,vt=Be+Mt-Kt-Je,st=Be+Et-Kt,Te=zv(O?x2(Me,vt):Me,Be,O?Mp(Ge,st):Ge);Y[U]=Te,Ze[U]=Te-Be}if(o){var lt,Nt=U==="x"?wa:Sa,Tt=U==="x"?Bl:$l,Vt=Y[Q],tn=Q==="y"?"height":"width",hn=Vt+$[Nt],on=Vt-$[Tt],kn=[wa,Sa].indexOf(R)!==-1,yn=(lt=le==null?void 0:le[Q])!=null?lt:0,ui=kn?hn:Vt-Z[tn]-J[tn]-yn+he.altAxis,Oi=kn?Vt+Z[tn]+J[tn]-yn-he.altAxis:on,Qe=O&&kn?Bme(ui,Vt,Oi):zv(O?ui:hn,Vt,O?Oi:on);Y[Q]=Qe,Ze[Q]=Qe-Vt}e.modifiersData[n]=Ze}}const gge={name:"preventOverflow",enabled:!0,phase:"main",fn:mge,requiresIfExists:["offset"]};function yge(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function xge(t){return t===Ja(t)||!Dl(t)?uI(t):yge(t)}function vge(t){var e=t.getBoundingClientRect(),r=Wy(e.width)/t.offsetWidth||1,n=Wy(e.height)/t.offsetHeight||1;return r!==1||n!==1}function bge(t,e,r){r===void 0&&(r=!1);var n=Dl(e),i=Dl(e)&&vge(e),s=ff(e),a=Uy(t,i,r),o={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(n||!n&&!r)&&((pu(e)!=="body"||dI(s))&&(o=xge(e)),Dl(e)?(d=Uy(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):s&&(d.x=hI(s))),{x:a.left+o.scrollLeft-d.x,y:a.top+o.scrollTop-d.y,width:a.width,height:a.height}}function _ge(t){var e=new Map,r=new Set,n=[];t.forEach(function(s){e.set(s.name,s)});function i(s){r.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(o){if(!r.has(o)){var d=e.get(o);d&&i(d)}}),n.push(s)}return t.forEach(function(s){r.has(s.name)||i(s)}),n}function wge(t){var e=_ge(t);return Mme.reduce(function(r,n){return r.concat(e.filter(function(i){return i.phase===n}))},[])}function Sge(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function kge(t){var e=t.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var O4={placement:"bottom",modifiers:[],strategy:"absolute"};function P4(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Cge(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,i=e.defaultOptions,s=i===void 0?O4:i;return function(o,d,m){m===void 0&&(m=s);var y={placement:"bottom",orderedModifiers:[],options:Object.assign({},O4,s),modifiersData:{},elements:{reference:o,popper:d},attributes:{},styles:{}},b=[],w=!1,O={state:y,setOptions:function(R){var F=typeof R=="function"?R(y.options):R;E(),y.options=Object.assign({},s,y.options,F),y.scrollParents={reference:Kp(o)?Mv(o):o.contextElement?Mv(o.contextElement):[],popper:Mv(d)};var L=wge(kge([].concat(n,y.options.modifiers)));return y.orderedModifiers=L.filter(function(U){return U.enabled}),A(),O.update()},forceUpdate:function(){if(!w){var R=y.elements,F=R.reference,L=R.popper;if(P4(F,L)){y.rects={reference:bge(F,_1(L),y.options.strategy==="fixed"),popper:lI(L)},y.reset=!1,y.placement=y.options.placement,y.orderedModifiers.forEach(function(he){return y.modifiersData[he.name]=Object.assign({},he.data)});for(var U=0;U<y.orderedModifiers.length;U++){if(y.reset===!0){y.reset=!1,U=-1;continue}var Q=y.orderedModifiers[U],Y=Q.fn,Z=Q.options,J=Z===void 0?{}:Z,re=Q.name;typeof Y=="function"&&(y=Y({state:y,options:J,name:re,instance:O})||y)}}}},update:Sge(function(){return new Promise(function($){O.forceUpdate(),$(y)})}),destroy:function(){E(),w=!0}};if(!P4(o,d))return O;O.setOptions(m).then(function($){!w&&m.onFirstUpdate&&m.onFirstUpdate($)});function A(){y.orderedModifiers.forEach(function($){var R=$.name,F=$.options,L=F===void 0?{}:F,U=$.effect;if(typeof U=="function"){var Q=U({state:y,name:R,instance:O,options:L}),Y=function(){};b.push(Q||Y)}})}function E(){b.forEach(function($){return $()}),b=[]}return O}}var Tge=[Xme,fge,Hme,Rme,hge,oge,gge,Wme,lge],Oge=Cge({defaultModifiers:Tge});const ag=(t,e)=>({var:t,varRef:e?`var(${t}, ${e})`:`var(${t})`}),Xs={arrowShadowColor:ag("--popper-arrow-shadow-color"),arrowSize:ag("--popper-arrow-size","8px"),arrowSizeHalf:ag("--popper-arrow-size-half"),arrowBg:ag("--popper-arrow-bg"),transformOrigin:ag("--popper-transform-origin"),arrowOffset:ag("--popper-arrow-offset")};function Pge(t){if(t.includes("top"))return"1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("bottom"))return"-1px -1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("right"))return"-1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("left"))return"1px -1px 0px 0 var(--popper-arrow-shadow-color)"}const jge={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},Age=t=>jge[t],j4={scroll:!0,resize:!0};function Ege(t){let e;return typeof t=="object"?e={enabled:!0,options:{...j4,...t}}:e={enabled:t,options:j4},e}const zge={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:t})=>{t.styles.popper.width=`${t.rects.reference.width}px`},effect:({state:t})=>()=>{const e=t.elements.reference;t.elements.popper.style.width=`${e.offsetWidth}px`}},Mge={name:"transformOrigin",enabled:!0,phase:"write",fn:({state:t})=>{A4(t)},effect:({state:t})=>()=>{A4(t)}},A4=t=>{t.elements.popper.style.setProperty(Xs.transformOrigin.var,Age(t.placement))},Ige={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:({state:t})=>{Dge(t)}},Dge=t=>{var r;if(!t.placement)return;const e=Rge(t.placement);if((r=t.elements)!=null&&r.arrow&&e){Object.assign(t.elements.arrow.style,{[e.property]:e.value,width:Xs.arrowSize.varRef,height:Xs.arrowSize.varRef,zIndex:-1});const n={[Xs.arrowSizeHalf.var]:`calc(${Xs.arrowSize.varRef} / 2 - 1px)`,[Xs.arrowOffset.var]:`calc(${Xs.arrowSizeHalf.varRef} * -1)`};for(const i in n)t.elements.arrow.style.setProperty(i,n[i])}},Rge=t=>{if(t.startsWith("top"))return{property:"bottom",value:Xs.arrowOffset.varRef};if(t.startsWith("bottom"))return{property:"top",value:Xs.arrowOffset.varRef};if(t.startsWith("left"))return{property:"right",value:Xs.arrowOffset.varRef};if(t.startsWith("right"))return{property:"left",value:Xs.arrowOffset.varRef}},Lge={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:({state:t})=>{E4(t)},effect:({state:t})=>()=>{E4(t)}},E4=t=>{if(!t.elements.arrow)return;const e=t.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!e)return;const r=Pge(t.placement);r&&e.style.setProperty("--popper-arrow-default-shadow",r),Object.assign(e.style,{transform:"rotate(45deg)",background:Xs.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},Fge={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},Bge={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function $ge(t,e="ltr"){var n;const r=((n=Fge[t])==null?void 0:n[e])||t;return e==="ltr"?r:Bge[t]??r}function r7(t={}){const{enabled:e=!0,modifiers:r,placement:n="bottom",strategy:i="absolute",arrowPadding:s=8,eventListeners:a=!0,offset:o,gutter:d=8,flip:m=!0,boundary:y="clippingParents",preventOverflow:b=!0,matchWidth:w,direction:O="ltr"}=t,A=I.useRef(null),E=I.useRef(null),$=I.useRef(null),R=$ge(n,O),F=I.useRef(()=>{}),L=I.useCallback(()=>{var he;!e||!A.current||!E.current||((he=F.current)==null||he.call(F),$.current=Oge(A.current,E.current,{placement:R,modifiers:[Lge,Ige,Mge,{...zge,enabled:!!w},{name:"eventListeners",...Ege(a)},{name:"arrow",options:{padding:s}},{name:"offset",options:{offset:o??[0,d]}},{name:"flip",enabled:!!m,options:{padding:8}},{name:"preventOverflow",enabled:!!b,options:{boundary:y}},...r??[]],strategy:i}),$.current.forceUpdate(),F.current=$.current.destroy)},[R,e,r,w,a,s,o,d,m,b,y,i]);I.useEffect(()=>()=>{var he;!A.current&&!E.current&&((he=$.current)==null||he.destroy(),$.current=null)},[]);const U=I.useCallback(he=>{A.current=he,L()},[L]),Q=I.useCallback((he={},le=null)=>({...he,ref:xi(U,le)}),[U]),Y=I.useCallback(he=>{E.current=he,L()},[L]),Z=I.useCallback((he={},le=null)=>({...he,ref:xi(Y,le),style:{...he.style,position:i,minWidth:w?void 0:"max-content",inset:"0 auto auto 0"}}),[i,Y,w]),J=I.useCallback((he={},le=null)=>{const{size:Ze,shadowColor:Ee,bg:qe,style:et,...at}=he;return{...at,ref:le,"data-popper-arrow":"",style:Nge(he)}},[]),re=I.useCallback((he={},le=null)=>({...he,ref:le,"data-popper-arrow-inner":""}),[]);return{update(){var he;(he=$.current)==null||he.update()},forceUpdate(){var he;(he=$.current)==null||he.forceUpdate()},transformOrigin:Xs.transformOrigin.varRef,referenceRef:U,popperRef:Y,getPopperProps:Z,getArrowProps:J,getArrowInnerProps:re,getReferenceProps:Q}}function Nge(t){const{size:e,shadowColor:r,bg:n,style:i}=t,s={...i,position:"absolute"};return e&&(s["--popper-arrow-size"]=e),r&&(s["--popper-arrow-shadow-color"]=r),n&&(s["--popper-arrow-bg"]=n),s}function Vge(){const t=I.useRef(new Map),e=t.current,r=I.useCallback((i,s,a,o)=>{t.current.set(a,{type:s,el:i,options:o}),i.addEventListener(s,a,o)},[]),n=I.useCallback((i,s,a,o)=>{i.removeEventListener(s,a,o),t.current.delete(a)},[]);return I.useEffect(()=>()=>{e.forEach((i,s)=>{n(i.el,i.type,s,i.options)})},[n,e]),{add:r,remove:n}}function NO(t){var i,s;const e=((s=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:s[0])??t.target,{tagName:r,isContentEditable:n}=e;return r!=="INPUT"&&r!=="TEXTAREA"&&n!==!0}function n7(t={}){const{ref:e,isDisabled:r,isFocusable:n,clickOnEnter:i=!0,clickOnSpace:s=!0,onMouseDown:a,onMouseUp:o,onClick:d,onKeyDown:m,onKeyUp:y,tabIndex:b,onMouseOver:w,onMouseLeave:O,...A}=t,[E,$]=I.useState(!0),[R,F]=I.useState(!1),L=Vge(),U=Be=>{Be&&Be.tagName!=="BUTTON"&&$(!1)},Q=E?b:b||0,Y=r&&!n,Z=I.useCallback(Be=>{if(r){Be.stopPropagation(),Be.preventDefault();return}Be.currentTarget.focus(),d==null||d(Be)},[r,d]),J=I.useCallback(Be=>{R&&NO(Be)&&(Be.preventDefault(),Be.stopPropagation(),F(!1),L.remove(document,"keyup",J,!1))},[R,L]),re=I.useCallback(Be=>{if(m==null||m(Be),r||Be.defaultPrevented||Be.metaKey||!NO(Be.nativeEvent)||E)return;const Me=i&&Be.key==="Enter";s&&Be.key===" "&&(Be.preventDefault(),F(!0)),Me&&(Be.preventDefault(),Be.currentTarget.click()),L.add(document,"keyup",J,!1)},[r,E,m,i,s,L,J]),he=I.useCallback(Be=>{if(y==null||y(Be),r||Be.defaultPrevented||Be.metaKey||!NO(Be.nativeEvent)||E)return;s&&Be.key===" "&&(Be.preventDefault(),F(!1),Be.currentTarget.click())},[s,E,r,y]),le=I.useCallback(Be=>{Be.button===0&&(F(!1),L.remove(document,"mouseup",le,!1))},[L]),Ze=I.useCallback(Be=>{if(Be.button!==0)return;if(r){Be.stopPropagation(),Be.preventDefault();return}E||F(!0),Be.currentTarget.focus({preventScroll:!0}),L.add(document,"mouseup",le,!1),a==null||a(Be)},[r,E,a,L,le]),Ee=I.useCallback(Be=>{Be.button===0&&(E||F(!1),o==null||o(Be))},[o,E]),qe=I.useCallback(Be=>{if(r){Be.preventDefault();return}w==null||w(Be)},[r,w]),et=I.useCallback(Be=>{R&&(Be.preventDefault(),F(!1)),O==null||O(Be)},[R,O]),at=xi(e,U);return E?{...A,ref:at,type:"button","aria-disabled":Y?void 0:r,disabled:Y,onClick:Z,onMouseDown:a,onMouseUp:o,onKeyUp:y,onKeyDown:m,onMouseOver:w,onMouseLeave:O}:{...A,ref:at,role:"button","data-active":_r(R),"aria-disabled":r?"true":void 0,tabIndex:Y?void 0:Q,onClick:Z,onMouseDown:Ze,onMouseUp:Ee,onKeyUp:he,onKeyDown:re,onMouseOver:qe,onMouseLeave:et}}const[Wge,Uge,qge,Qge]=IM(),[Hge,w1]=_n({strict:!1,name:"MenuContext"});function i7(t){return(t==null?void 0:t.ownerDocument)??document}function Gge(t){return i7(t).activeElement===t}function Xge(t={}){const{id:e,closeOnSelect:r=!0,closeOnBlur:n=!0,initialFocusRef:i,autoSelect:s=!0,isLazy:a,isOpen:o,defaultIsOpen:d,onClose:m,onOpen:y,placement:b="bottom-start",lazyBehavior:w="unmount",direction:O,computePositionOnMount:A=!1,...E}=t,$=I.useRef(null),R=I.useRef(null),F=I.useRef(!0),L=qge(),U=I.useCallback(()=>{requestAnimationFrame(()=>{var Re;(Re=$.current)==null||Re.focus({preventScroll:!1})})},[]),Q=I.useCallback(()=>{const Re=setTimeout(()=>{var nt,ze;if(i)(nt=i.current)==null||nt.focus();else if(!L.count())(ze=$.current)==null||ze.focus({preventScroll:!1});else{const rt=L.firstEnabled();rt&&qe(rt.index)}});Ge.current.add(Re)},[L,i]),Y=I.useCallback(()=>{const Re=setTimeout(()=>{var nt;if(!L.count())(nt=$.current)==null||nt.focus({preventScroll:!1});else{const ze=L.lastEnabled();ze&&qe(ze.index)}});Ge.current.add(Re)},[L]),Z=I.useCallback(()=>{y==null||y(),s?Q():U()},[s,Q,U,y]),{isOpen:J,onOpen:re,onClose:he,onToggle:le}=Qp({isOpen:o,defaultIsOpen:d,onClose:m,onOpen:Z});WY({enabled:J&&n,ref:$,handler:Re=>{var ze,rt,Xe;const nt=((rt=(ze=Re.composedPath)==null?void 0:ze.call(Re))==null?void 0:rt[0])??Re.target;(Xe=R.current)!=null&&Xe.contains(nt)||he()}});const Ze=r7({...E,enabled:J||A,placement:b,direction:O}),[Ee,qe]=I.useState(-1);LY($,{focusRef:R,visible:J});const et=IY({isOpen:J,ref:$}),[at,Be]=BY(e,"menu-button","menu-list"),Me=I.useCallback(()=>{re(),U()},[re,U]),Ge=I.useRef(new Set([]));I.useEffect(()=>{const Re=Ge.current;return()=>{Re.forEach(nt=>clearTimeout(nt)),Re.clear()}},[]),Qd(()=>{var Re;J||(qe(-1),(Re=$.current)==null||Re.scrollTo(0,0))},[J]),Qd(()=>{J&&Ee===-1&&U()},[Ee,J]),I.useEffect(()=>{var nt;if(!J)return;const Re=L.item(Ee);(nt=Re==null?void 0:Re.node)==null||nt.focus({preventScroll:!F.current})},[L,Ee,J]);const Le=I.useCallback(()=>{re(),Q()},[Q,re]),Ie=I.useCallback(()=>{F.current=!0,re(),Y()},[re,Y]),Oe=I.useCallback(()=>{var Xe,_t;const Re=i7($.current),nt=(Xe=$.current)==null?void 0:Xe.contains(Re.activeElement);if(!(J&&!nt))return;const rt=(_t=L.item(Ee))==null?void 0:_t.node;rt==null||rt.focus({preventScroll:!F.current})},[J,Ee,L]);return{openAndFocusMenu:Me,openAndFocusFirstItem:Le,openAndFocusLastItem:Ie,onTransitionEnd:Oe,unstable__animationState:et,descendants:L,popper:Ze,buttonId:at,menuId:Be,forceUpdate:Ze.forceUpdate,orientation:"vertical",isOpen:J,onToggle:le,onOpen:re,onClose:he,menuRef:$,buttonRef:R,focusedIndex:Ee,closeOnSelect:r,closeOnBlur:n,autoSelect:s,setFocusedIndex:qe,isLazy:a,lazyBehavior:w,initialFocusRef:i,scrollIntoViewRef:F}}function Kge(t={},e=null){const r=w1(),{onToggle:n,popper:i,openAndFocusFirstItem:s,openAndFocusLastItem:a,scrollIntoViewRef:o}=r,d=I.useCallback(m=>{const y=m.key,w={Enter:s,ArrowDown:s,ArrowUp:a}[y];w&&(o.current=!0,m.preventDefault(),m.stopPropagation(),w(m))},[s,a,o]);return{...t,ref:xi(r.buttonRef,e,i.referenceRef),id:r.buttonId,"data-active":_r(r.isOpen),"aria-expanded":r.isOpen,"aria-haspopup":"menu","aria-controls":r.menuId,onClick:kr(t.onClick,n),onKeyDown:kr(t.onKeyDown,d)}}function _A(t){var e;return eye(t)&&!!((e=t==null?void 0:t.getAttribute("role"))!=null&&e.startsWith("menuitem"))}function Zge(t={},e=null){const r=w1();if(!r)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:n,setFocusedIndex:i,menuRef:s,isOpen:a,onClose:o,menuId:d,isLazy:m,lazyBehavior:y,scrollIntoViewRef:b,unstable__animationState:w}=r,O=Uge(),A=_me({preventDefault:F=>F.key!==" "&&_A(F.target)}),E=I.useCallback(F=>{if(!F.currentTarget.contains(F.target))return;const L=F.key,Q={Tab:Z=>Z.preventDefault(),Escape:Z=>{Z.stopPropagation(),o()},ArrowDown:()=>{b.current=!0;const Z=O.nextEnabled(n)??O.firstEnabled();Z&&i(Z.index)},ArrowUp:()=>{b.current=!0;const Z=O.prevEnabled(n)??O.firstEnabled();Z&&i(Z.index)}}[L];if(Q){F.preventDefault(),Q(F);return}const Y=A(Z=>{const J=vme(O.values(),Z,re=>{var he;return((he=re==null?void 0:re.node)==null?void 0:he.textContent)??""},O.item(n));if(J){const re=O.indexOf(J.node);i(re)}});_A(F.target)&&Y(F)},[O,n,A,o,i,b]),$=I.useRef(!1);a&&($.current=!0);const R=A8({wasSelected:$.current,enabled:m,mode:y,isSelected:w.present});return{...t,ref:xi(s,e),children:R?t.children:null,tabIndex:-1,role:"menu",id:d,style:{...t.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:kr(t.onKeyDown,E)}}function Yge(t={}){const{popper:e,isOpen:r}=w1();return e.getPopperProps({...t,style:{visibility:r?"visible":"hidden",...t.style}})}function Jge(t={},e=null){const{onMouseEnter:r,onMouseMove:n,onMouseLeave:i,onClick:s,onFocus:a,isDisabled:o,isFocusable:d,closeOnSelect:m,type:y,...b}=t,w=w1(),{setFocusedIndex:O,focusedIndex:A,closeOnSelect:E,onClose:$,menuId:R,scrollIntoViewRef:F}=w,L=I.useRef(null),U=`${R}-menuitem-${I.useId()}`,{index:Q,register:Y}=Qge({disabled:o&&!d}),Z=I.useCallback(qe=>{r==null||r(qe),!o&&(F.current=!1,O(Q))},[O,Q,o,r,F]),J=I.useCallback(qe=>{n==null||n(qe),L.current&&!Gge(L.current)&&Z(qe)},[Z,n]),re=I.useCallback(qe=>{i==null||i(qe),!o&&O(-1)},[O,o,i]),he=I.useCallback(qe=>{s==null||s(qe),_A(qe.currentTarget)&&(m??E)&&$()},[$,s,E,m]),le=I.useCallback(qe=>{a==null||a(qe),O(Q)},[O,a,Q]),Ze=Q===A,Ee=n7({onClick:he,onFocus:le,onMouseEnter:Z,onMouseMove:J,onMouseLeave:re,ref:xi(Y,L,e),isDisabled:o,isFocusable:d});return{...b,...Ee,type:y??Ee.type,id:U,role:"menuitem",tabIndex:Ze?0:-1}}function eye(t){if(!tye(t))return!1;const e=t.ownerDocument.defaultView??window;return t instanceof e.HTMLElement}function tye(t){return t!=null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}const[rye,S1]=_n({name:"MenuStylesContext",errorMessage:`useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />" `}),Kd=t=>{const{children:e}=t,r=ns("Menu",t),n=Mn(t),{direction:i}=m1(),{descendants:s,...a}=Xge({...n,direction:i}),o=I.useMemo(()=>a,[a]),{isOpen:d,onClose:m,forceUpdate:y}=o;return u.jsx(Wge,{value:s,children:u.jsx(Hge,{value:o,children:u.jsx(rye,{value:r,children:Qa(e,{isOpen:d,onClose:m,forceUpdate:y})})})})};Kd.displayName="Menu";const nye=Ct((t,e)=>{const r=S1();return u.jsx(mt.button,{ref:e,...t,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...r.button}})}),Zd=Ct((t,e)=>{const{children:r,as:n,...i}=t,s=Kge(i,e),a=n||nye;return u.jsx(a,{...s,className:sr("chakra-menu__menu-button",t.className),children:u.jsx(mt.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:t.children})})});Zd.displayName="MenuButton";const s7=Ct((t,e)=>{const r=S1();return u.jsx(mt.span,{ref:e,...t,__css:r.command,className:"chakra-menu__command"})});s7.displayName="MenuCommand";const o7=t=>{const{className:e,children:r,...n}=t,i=S1(),s=I.Children.only(r),a=I.isValidElement(s)?I.cloneElement(s,{focusable:"false","aria-hidden":!0,className:sr("chakra-menu__icon",s.props.className)}):null,o=sr("chakra-menu__icon-wrapper",e);return u.jsx(mt.span,{className:o,...n,__css:i.icon,children:a})};o7.displayName="MenuIcon";const iye=Ct((t,e)=>{const{type:r,...n}=t,i=S1(),s=n.as||r?r??void 0:"button",a=I.useMemo(()=>({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,...i.item}),[i.item]);return u.jsx(mt.button,{ref:e,type:s,...n,__css:a})}),fa=Ct((t,e)=>{const{icon:r,iconSpacing:n="0.75rem",command:i,commandSpacing:s="0.75rem",children:a,...o}=t,d=Jge(o,e),y=r||i?u.jsx("span",{style:{pointerEvents:"none",flex:1},children:a}):a;return u.jsxs(iye,{...d,className:sr("chakra-menu__menuitem",d.className),children:[r&&u.jsx(o7,{fontSize:"0.8em",marginEnd:n,children:r}),y,i&&u.jsx(s7,{marginStart:s,children:i})]})});fa.displayName="MenuItem";const sye={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},oye=mt(Dn.div),Yd=Ct(function(e,r){var w;const{rootProps:n,motionProps:i,...s}=e,{isOpen:a,onTransitionEnd:o,unstable__animationState:d}=w1(),m=Zge(s,r),y=Yge(n),b=S1();return u.jsx(mt.div,{...y,__css:{zIndex:e.zIndex??((w=b.list)==null?void 0:w.zIndex)},children:u.jsx(oye,{variants:sye,initial:!1,animate:a?"enter":"exit",__css:{outline:0,...b.list},...i,...m,className:sr("chakra-menu__menu-list",m.className),onUpdate:o,onAnimationComplete:$z(d.onComplete,m.onAnimationComplete)})})});Yd.displayName="MenuList";var aye=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},lg=new WeakMap,hw=new WeakMap,dw={},VO=0,a7=function(t){return t&&(t.host||a7(t.parentNode))},lye=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=a7(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},cye=function(t,e,r,n){var i=lye(e,Array.isArray(t)?t:[t]);dw[r]||(dw[r]=new WeakMap);var s=dw[r],a=[],o=new Set,d=new Set(i),m=function(b){!b||o.has(b)||(o.add(b),m(b.parentNode))};i.forEach(m);var y=function(b){!b||d.has(b)||Array.prototype.forEach.call(b.children,function(w){if(o.has(w))y(w);else try{var O=w.getAttribute(n),A=O!==null&&O!=="false",E=(lg.get(w)||0)+1,$=(s.get(w)||0)+1;lg.set(w,E),s.set(w,$),a.push(w),E===1&&A&&hw.set(w,!0),$===1&&w.setAttribute(r,"true"),A||w.setAttribute(n,"true")}catch(R){console.error("aria-hidden: cannot operate on ",w,R)}})};return y(e),o.clear(),VO++,function(){a.forEach(function(b){var w=lg.get(b)-1,O=s.get(b)-1;lg.set(b,w),s.set(b,O),w||(hw.has(b)||b.removeAttribute(n),hw.delete(b)),O||b.removeAttribute(r)}),VO--,VO||(lg=new WeakMap,lg=new WeakMap,hw=new WeakMap,dw={})}},uye=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),i=aye(t);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),cye(n,i,r,"aria-hidden")):function(){return null}},hye=Object.defineProperty,dye=(t,e,r)=>e in t?hye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,fye=(t,e,r)=>(dye(t,e+"",r),r);class pye{constructor(){fye(this,"modals"),this.modals=new Set}add(e){return this.modals.add(e),this.modals.size}remove(e){this.modals.delete(e)}isTopModal(e){if(!e)return!1;const r=Array.from(this.modals)[this.modals.size-1];return e===r}}const wA=new pye;function l7(t,e){const[r,n]=I.useState(0);return I.useEffect(()=>{const i=t.current;if(i){if(e){const s=wA.add(i);n(s)}return()=>{wA.remove(i),n(0)}}},[e,t]),r}function mye(t){const{isOpen:e,onClose:r,id:n,closeOnOverlayClick:i=!0,closeOnEsc:s=!0,useInert:a=!0,onOverlayClick:o,onEsc:d}=t,m=I.useRef(null),y=I.useRef(null),[b,w,O]=yye(n,"chakra-modal","chakra-modal--header","chakra-modal--body");gye(m,e&&a);const A=l7(m,e),E=I.useRef(null),$=I.useCallback(re=>{E.current=re.target},[]),R=I.useCallback(re=>{re.key==="Escape"&&(re.stopPropagation(),s&&(r==null||r()),d==null||d())},[s,r,d]),[F,L]=I.useState(!1),[U,Q]=I.useState(!1),Y=I.useCallback((re={},he=null)=>({role:"dialog",...re,ref:xi(he,m),id:b,tabIndex:-1,"aria-modal":!0,"aria-labelledby":F?w:void 0,"aria-describedby":U?O:void 0,onClick:kr(re.onClick,le=>le.stopPropagation())}),[O,U,b,w,F]),Z=I.useCallback(re=>{re.stopPropagation(),E.current===re.target&&wA.isTopModal(m.current)&&(i&&(r==null||r()),o==null||o())},[r,i,o]),J=I.useCallback((re={},he=null)=>({...re,ref:xi(he,y),onClick:kr(re.onClick,Z),onKeyDown:kr(re.onKeyDown,R),onMouseDown:kr(re.onMouseDown,$)}),[R,$,Z]);return{isOpen:e,onClose:r,headerId:w,bodyId:O,setBodyMounted:Q,setHeaderMounted:L,dialogRef:m,overlayRef:y,getDialogProps:Y,getDialogContainerProps:J,index:A}}function gye(t,e){const r=t.current;I.useEffect(()=>{if(!(!t.current||!e))return uye(t.current)},[e,t,r])}function yye(t,...e){const r=I.useId(),n=t||r;return I.useMemo(()=>e.map(i=>`${i}-${n}`),[n,e])}const[xye,d0]=_n({name:"ModalStylesContext",errorMessage:`useModalStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Modal />" `}),[vye,Zp]=_n({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),es=t=>{const e={scrollBehavior:"outside",autoFocus:!0,trapFocus:!0,returnFocusOnClose:!0,blockScrollOnMount:!0,allowPinchZoom:!1,preserveScrollBarGap:!0,motionPreset:"scale",...t,lockFocusAcrossFrames:t.lockFocusAcrossFrames??!0},{portalProps:r,children:n,autoFocus:i,trapFocus:s,initialFocusRef:a,finalFocusRef:o,returnFocusOnClose:d,blockScrollOnMount:m,allowPinchZoom:y,preserveScrollBarGap:b,motionPreset:w,lockFocusAcrossFrames:O,animatePresenceProps:A,onCloseComplete:E}=e,$=ns("Modal",e),F={...mye(e),autoFocus:i,trapFocus:s,initialFocusRef:a,finalFocusRef:o,returnFocusOnClose:d,blockScrollOnMount:m,allowPinchZoom:y,preserveScrollBarGap:b,motionPreset:w,lockFocusAcrossFrames:O};return u.jsx(vye,{value:F,children:u.jsx(xye,{value:$,children:u.jsx(pc,{...A,onExitComplete:E,children:F.isOpen&&u.jsx(h0,{...r,children:n})})})})};es.displayName="Modal";var gS="right-scroll-bar-position",yS="width-before-scroll-bar",bye="with-scroll-bars-hidden",_ye="--removed-body-scroll-bar-size",c7=gW(),WO=function(){},Gk=I.forwardRef(function(t,e){var r=I.useRef(null),n=I.useState({onScrollCapture:WO,onWheelCapture:WO,onTouchMoveCapture:WO}),i=n[0],s=n[1],a=t.forwardProps,o=t.children,d=t.className,m=t.removeScrollBar,y=t.enabled,b=t.shards,w=t.sideCar,O=t.noRelative,A=t.noIsolation,E=t.inert,$=t.allowPinchZoom,R=t.as,F=R===void 0?"div":R,L=t.gapMode,U=fW(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Q=w,Y=dW([r,e]),Z=Yc(Yc({},U),i);return I.createElement(I.Fragment,null,y&&I.createElement(Q,{sideCar:c7,removeScrollBar:m,shards:b,noRelative:O,noIsolation:A,inert:E,setCallbacks:s,allowPinchZoom:!!$,lockRef:r,gapMode:L}),a?I.cloneElement(I.Children.only(o),Yc(Yc({},Z),{ref:Y})):I.createElement(F,Yc({},Z,{className:d,ref:Y}),o))});Gk.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Gk.classNames={fullWidth:yS,zeroRight:gS};var wye=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Sye(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=wye();return e&&t.setAttribute("nonce",e),t}function kye(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Cye(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Tye=function(){var t=0,e=null;return{add:function(r){t==0&&(e=Sye())&&(kye(e,r),Cye(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Oye=function(){var t=Tye();return function(e,r){I.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},u7=function(){var t=Oye(),e=function(r){var n=r.styles,i=r.dynamic;return t(n,i),null};return e},Pye={left:0,top:0,right:0,gap:0},UO=function(t){return parseInt(t||"",10)||0},jye=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[UO(r),UO(n),UO(i)]},Aye=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Pye;var e=jye(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},Eye=u7(),oy="data-scroll-locked",zye=function(t,e,r,n){var i=t.left,s=t.top,a=t.right,o=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(bye,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(oy,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(gS,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(yS,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(gS," .").concat(gS,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(yS," .").concat(yS,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(oy,`] {
    `).concat(_ye,": ").concat(o,`px;
  }
`)},z4=function(){var t=parseInt(document.body.getAttribute(oy)||"0",10);return isFinite(t)?t:0},Mye=function(){I.useEffect(function(){return document.body.setAttribute(oy,(z4()+1).toString()),function(){var t=z4()-1;t<=0?document.body.removeAttribute(oy):document.body.setAttribute(oy,t.toString())}},[])},Iye=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,i=n===void 0?"margin":n;Mye();var s=I.useMemo(function(){return Aye(i)},[i]);return I.createElement(Eye,{styles:zye(s,!e,i,r?"":"!important")})},SA=!1;if(typeof window<"u")try{var fw=Object.defineProperty({},"passive",{get:function(){return SA=!0,!0}});window.addEventListener("test",fw,fw),window.removeEventListener("test",fw,fw)}catch{SA=!1}var cg=SA?{passive:!1}:!1,Dye=function(t){return t.tagName==="TEXTAREA"},h7=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!Dye(t)&&r[e]==="visible")},Rye=function(t){return h7(t,"overflowY")},Lye=function(t){return h7(t,"overflowX")},M4=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=d7(t,n);if(i){var s=f7(t,n),a=s[1],o=s[2];if(a>o)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Fye=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},Bye=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},d7=function(t,e){return t==="v"?Rye(e):Lye(e)},f7=function(t,e){return t==="v"?Fye(e):Bye(e)},$ye=function(t,e){return t==="h"&&e==="rtl"?-1:1},Nye=function(t,e,r,n,i){var s=$ye(t,window.getComputedStyle(e).direction),a=s*n,o=r.target,d=e.contains(o),m=!1,y=a>0,b=0,w=0;do{if(!o)break;var O=f7(t,o),A=O[0],E=O[1],$=O[2],R=E-$-s*A;(A||R)&&d7(t,o)&&(b+=R,w+=A);var F=o.parentNode;o=F&&F.nodeType===Node.DOCUMENT_FRAGMENT_NODE?F.host:F}while(!d&&o!==document.body||d&&(e.contains(o)||e===o));return(y&&Math.abs(b)<1||!y&&Math.abs(w)<1)&&(m=!0),m},pw=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},I4=function(t){return[t.deltaX,t.deltaY]},D4=function(t){return t&&"current"in t?t.current:t},Vye=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Wye=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Uye=0,ug=[];function qye(t){var e=I.useRef([]),r=I.useRef([0,0]),n=I.useRef(),i=I.useState(Uye++)[0],s=I.useState(u7)[0],a=I.useRef(t);I.useEffect(function(){a.current=t},[t]),I.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var E=Jfe([t.lockRef.current],(t.shards||[]).map(D4),!0).filter(Boolean);return E.forEach(function($){return $.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),E.forEach(function($){return $.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var o=I.useCallback(function(E,$){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!a.current.allowPinchZoom;var R=pw(E),F=r.current,L="deltaX"in E?E.deltaX:F[0]-R[0],U="deltaY"in E?E.deltaY:F[1]-R[1],Q,Y=E.target,Z=Math.abs(L)>Math.abs(U)?"h":"v";if("touches"in E&&Z==="h"&&Y.type==="range")return!1;var J=window.getSelection(),re=J&&J.anchorNode,he=re?re===Y||re.contains(Y):!1;if(he)return!1;var le=M4(Z,Y);if(!le)return!0;if(le?Q=Z:(Q=Z==="v"?"h":"v",le=M4(Z,Y)),!le)return!1;if(!n.current&&"changedTouches"in E&&(L||U)&&(n.current=Q),!Q)return!0;var Ze=n.current||Q;return Nye(Ze,$,E,Ze==="h"?L:U)},[]),d=I.useCallback(function(E){var $=E;if(!(!ug.length||ug[ug.length-1]!==s)){var R="deltaY"in $?I4($):pw($),F=e.current.filter(function(Q){return Q.name===$.type&&(Q.target===$.target||$.target===Q.shadowParent)&&Vye(Q.delta,R)})[0];if(F&&F.should){$.cancelable&&$.preventDefault();return}if(!F){var L=(a.current.shards||[]).map(D4).filter(Boolean).filter(function(Q){return Q.contains($.target)}),U=L.length>0?o($,L[0]):!a.current.noIsolation;U&&$.cancelable&&$.preventDefault()}}},[]),m=I.useCallback(function(E,$,R,F){var L={name:E,delta:$,target:R,should:F,shadowParent:Qye(R)};e.current.push(L),setTimeout(function(){e.current=e.current.filter(function(U){return U!==L})},1)},[]),y=I.useCallback(function(E){r.current=pw(E),n.current=void 0},[]),b=I.useCallback(function(E){m(E.type,I4(E),E.target,o(E,t.lockRef.current))},[]),w=I.useCallback(function(E){m(E.type,pw(E),E.target,o(E,t.lockRef.current))},[]);I.useEffect(function(){return ug.push(s),t.setCallbacks({onScrollCapture:b,onWheelCapture:b,onTouchMoveCapture:w}),document.addEventListener("wheel",d,cg),document.addEventListener("touchmove",d,cg),document.addEventListener("touchstart",y,cg),function(){ug=ug.filter(function(E){return E!==s}),document.removeEventListener("wheel",d,cg),document.removeEventListener("touchmove",d,cg),document.removeEventListener("touchstart",y,cg)}},[]);var O=t.removeScrollBar,A=t.inert;return I.createElement(I.Fragment,null,A?I.createElement(s,{styles:Wye(i)}):null,O?I.createElement(Iye,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Qye(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Hye=epe(c7,qye);var p7=I.forwardRef(function(t,e){return I.createElement(Gk,Yc({},t,{ref:e,sideCar:Hye}))});p7.classNames=Gk.classNames;function Gye(t){const{autoFocus:e,trapFocus:r,dialogRef:n,initialFocusRef:i,blockScrollOnMount:s,allowPinchZoom:a,finalFocusRef:o,returnFocusOnClose:d,preserveScrollBarGap:m,lockFocusAcrossFrames:y,isOpen:b}=Zp(),[w,O]=F9();I.useEffect(()=>{!w&&O&&setTimeout(O)},[w,O]);const A=l7(n,b);return u.jsx(WW,{autoFocus:e,isDisabled:!r,initialFocusRef:i,finalFocusRef:o,restoreFocus:d,contentRef:n,lockFocusAcrossFrames:y,children:u.jsx(p7,{removeScrollBar:!m,allowPinchZoom:a,enabled:A===1&&s,forwardProps:!0,children:t.children})})}const Xye={initial:({offsetX:t,offsetY:e,transition:r,transitionEnd:n,delay:i})=>({opacity:0,x:t,y:e,transition:(r==null?void 0:r.exit)??ch.exit(Ep.exit,i),transitionEnd:n==null?void 0:n.exit}),enter:({transition:t,transitionEnd:e,delay:r})=>({opacity:1,x:0,y:0,transition:(t==null?void 0:t.enter)??ch.enter(Ep.enter,r),transitionEnd:e==null?void 0:e.enter}),exit:({offsetY:t,offsetX:e,transition:r,transitionEnd:n,reverse:i,delay:s})=>{const a={x:e,y:t};return{opacity:0,transition:(r==null?void 0:r.exit)??ch.exit(Ep.exit,s),...i?{...a,transitionEnd:n==null?void 0:n.exit}:{transitionEnd:{...a,...n==null?void 0:n.exit}}}}},iv={initial:"initial",animate:"enter",exit:"exit",variants:Xye},Kye=I.forwardRef(function(e,r){const{unmountOnExit:n,in:i,reverse:s=!0,className:a,offsetX:o=0,offsetY:d=8,transition:m,transitionEnd:y,delay:b,animatePresenceProps:w,...O}=e,A=n?i&&n:!0,E=i||n?"enter":"exit",$={offsetX:o,offsetY:d,reverse:s,transition:m,transitionEnd:y,delay:b};return u.jsx(pc,{...w,custom:$,children:A&&u.jsx(Dn.div,{ref:r,className:sr("chakra-offset-slide",a),custom:$,...iv,animate:E,...O})})});Kye.displayName="SlideFade";const Zye={exit:({reverse:t,initialScale:e,transition:r,transitionEnd:n,delay:i})=>({opacity:0,...t?{scale:e,transitionEnd:n==null?void 0:n.exit}:{transitionEnd:{scale:e,...n==null?void 0:n.exit}},transition:(r==null?void 0:r.exit)??ch.exit(Ep.exit,i)}),enter:({transitionEnd:t,transition:e,delay:r})=>({opacity:1,scale:1,transition:(e==null?void 0:e.enter)??ch.enter(Ep.enter,r),transitionEnd:t==null?void 0:t.enter})},m7={initial:"exit",animate:"enter",exit:"exit",variants:Zye},Yye=I.forwardRef(function(e,r){const{unmountOnExit:n,in:i,reverse:s=!0,initialScale:a=.95,className:o,transition:d,transitionEnd:m,delay:y,animatePresenceProps:b,...w}=e,O=n?i&&n:!0,A=i||n?"enter":"exit",E={initialScale:a,reverse:s,transition:d,transitionEnd:m,delay:y};return u.jsx(pc,{...b,custom:E,children:O&&u.jsx(Dn.div,{ref:r,className:sr("chakra-offset-slide",o),...m7,animate:A,custom:E,...w})})});Yye.displayName="ScaleFade";const Jye={slideInBottom:{...iv,custom:{offsetY:16,reverse:!0}},slideInRight:{...iv,custom:{offsetX:16,reverse:!0}},slideInTop:{...iv,custom:{offsetY:-16,reverse:!0}},slideInLeft:{...iv,custom:{offsetX:-16,reverse:!0}},scale:{...m7,custom:{initialScale:.95,reverse:!0}},none:{}},e0e=mt(Dn.section),t0e=t=>Jye[t||"none"],g7=I.forwardRef((t,e)=>{const{preset:r,motionProps:n=t0e(r),...i}=t;return u.jsx(e0e,{ref:e,...n,...i})});g7.displayName="ModalTransition";const ts=Ct((t,e)=>{const{className:r,children:n,containerProps:i,motionProps:s,...a}=t,{getDialogProps:o,getDialogContainerProps:d}=Zp(),m=o(a,e),y=d(i),b=sr("chakra-modal__content",r),w=d0(),O={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...w.dialog},A={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...w.dialogContainer},{motionPreset:E}=Zp();return u.jsx(Gye,{children:u.jsx(mt.div,{...y,className:"chakra-modal__content-container",tabIndex:-1,__css:A,children:u.jsx(g7,{preset:E,motionProps:s,className:b,...m,__css:O,children:n})})})});ts.displayName="ModalContent";const gs=Ct((t,e)=>{const{className:r,...n}=t,{bodyId:i,setBodyMounted:s}=Zp();I.useEffect(()=>(s(!0),()=>s(!1)),[s]);const a=sr("chakra-modal__body",r),o=d0();return u.jsx(mt.div,{ref:e,className:a,id:i,...n,__css:o.body})});gs.displayName="ModalBody";const Fs=Ct((t,e)=>{const{onClick:r,className:n,...i}=t,{onClose:s}=Zp(),a=sr("chakra-modal__close-btn",n),o=d0();return u.jsx(yb,{ref:e,__css:o.closeButton,className:a,onClick:kr(r,d=>{d.stopPropagation(),s()}),...i})});Fs.displayName="ModalCloseButton";const qo=Ct((t,e)=>{const{className:r,...n}=t,i=sr("chakra-modal__footer",r),s=d0(),a={display:"flex",alignItems:"center",justifyContent:"flex-end",...s.footer};return u.jsx(mt.footer,{ref:e,...n,__css:a,className:i})});qo.displayName="ModalFooter";const f0=Ct((t,e)=>{const{className:r,...n}=t,{headerId:i,setHeaderMounted:s}=Zp();I.useEffect(()=>(s(!0),()=>s(!1)),[s]);const a=sr("chakra-modal__header",r),o=d0(),d={flex:0,...o.header};return u.jsx(mt.header,{ref:e,className:a,id:i,...n,__css:d})});f0.displayName="ModalHeader";const r0e={enter:({transition:t,transitionEnd:e,delay:r}={})=>({opacity:1,transition:(t==null?void 0:t.enter)??ch.enter(Ep.enter,r),transitionEnd:e==null?void 0:e.enter}),exit:({transition:t,transitionEnd:e,delay:r}={})=>({opacity:0,transition:(t==null?void 0:t.exit)??ch.exit(Ep.exit,r),transitionEnd:e==null?void 0:e.exit})},y7={initial:"exit",animate:"enter",exit:"exit",variants:r0e},n0e=I.forwardRef(function(e,r){const{unmountOnExit:n,in:i,className:s,transition:a,transitionEnd:o,delay:d,animatePresenceProps:m,...y}=e,b=i||n?"enter":"exit",w=n?i&&n:!0,O={transition:a,transitionEnd:o,delay:d};return u.jsx(pc,{...m,custom:O,children:w&&u.jsx(Dn.div,{ref:r,className:sr("chakra-fade",s),custom:O,...y7,animate:b,...y})})});n0e.displayName="Fade";const i0e=mt(Dn.div),rs=Ct((t,e)=>{const{className:r,transition:n,motionProps:i,...s}=t,a=sr("chakra-modal__overlay",r),d={pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh",...d0().overlay},{motionPreset:m}=Zp(),b=i||(m==="none"?{}:y7);return u.jsx(i0e,{...b,__css:d,ref:e,className:a,...s})});rs.displayName="ModalOverlay";const s0e=t=>u.jsx(He,{viewBox:"0 0 24 24",...t,children:u.jsx("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"})}),o0e=t=>u.jsx(He,{viewBox:"0 0 24 24",...t,children:u.jsx("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"})});function R4(t,e,r,n){I.useEffect(()=>{if(!t.current||!n)return;const i=t.current.ownerDocument.defaultView??window,s=Array.isArray(e)?e:[e],a=new i.MutationObserver(o=>{for(const d of o)d.type==="attributes"&&d.attributeName&&s.includes(d.attributeName)&&r(d)});return a.observe(t.current,{attributes:!0,attributeFilter:s}),()=>a.disconnect()})}const a0e=50,L4=300;function l0e(t,e){const[r,n]=I.useState(!1),[i,s]=I.useState(null),[a,o]=I.useState(!0),d=I.useRef(null),m=()=>clearTimeout(d.current);$Y(()=>{i==="increment"&&t(),i==="decrement"&&e()},r?a0e:null);const y=I.useCallback(()=>{a&&t(),d.current=setTimeout(()=>{o(!1),n(!0),s("increment")},L4)},[t,a]),b=I.useCallback(()=>{a&&e(),d.current=setTimeout(()=>{o(!1),n(!0),s("decrement")},L4)},[e,a]),w=I.useCallback(()=>{o(!0),n(!1),m()},[]);return I.useEffect(()=>()=>m(),[]),{up:y,down:b,stop:w,isSpinning:r}}const c0e=/^[Ee0-9+\-.]$/;function u0e(t){return c0e.test(t)}function h0e(t,e){if(t.key==null)return!0;const r=t.ctrlKey||t.altKey||t.metaKey;return!(t.key.length===1)||r?!0:e(t.key)}function d0e(t={}){const{focusInputOnChange:e=!0,clampValueOnBlur:r=!0,keepWithinRange:n=!0,min:i=Number.MIN_SAFE_INTEGER,max:s=Number.MAX_SAFE_INTEGER,step:a=1,isReadOnly:o,isDisabled:d,isRequired:m,isInvalid:y,pattern:b="[0-9]*(.[0-9]+)?",inputMode:w="decimal",allowMouseWheel:O,id:A,onChange:E,precision:$,name:R,"aria-describedby":F,"aria-label":L,"aria-labelledby":U,onFocus:Q,onBlur:Y,onInvalid:Z,getAriaValueText:J,isValidCharacter:re,format:he,parse:le,...Ze}=t,Ee=Bi(Q),qe=Bi(Y),et=Bi(Z),at=Bi(re??u0e),Be=Bi(J),Me=DY(t),{update:Ge,increment:Le,decrement:Ie}=Me,[Oe,Re]=I.useState(!1),nt=!(o||d),ze=I.useRef(null),rt=I.useRef(null),Xe=I.useRef(null),_t=I.useRef(null),Mt=I.useCallback(Qe=>Qe.split("").filter(at).join(""),[at]),Et=I.useCallback(Qe=>(le==null?void 0:le(Qe))??Qe,[le]),yt=I.useCallback(Qe=>((he==null?void 0:he(Qe))??Qe).toString(),[he]);Qd(()=>{(Me.valueAsNumber>s||Me.valueAsNumber<i)&&(et==null||et("rangeOverflow",yt(Me.value),Me.valueAsNumber))},[Me.valueAsNumber,Me.value,yt,et]),Tp(()=>{if(!ze.current)return;if(ze.current.value!=Me.value){const Br=Et(ze.current.value);Me.setValue(Mt(Br))}},[Et,Mt]);const Je=I.useCallback((Qe=a)=>{nt&&Le(Qe)},[Le,nt,a]),Kt=I.useCallback((Qe=a)=>{nt&&Ie(Qe)},[Ie,nt,a]),vt=l0e(Je,Kt);R4(Xe,"disabled",vt.stop,vt.isSpinning),R4(_t,"disabled",vt.stop,vt.isSpinning);const st=I.useCallback(Qe=>{if(Qe.nativeEvent.isComposing)return;const kt=Et(Qe.currentTarget.value);Ge(Mt(kt)),rt.current={start:Qe.currentTarget.selectionStart,end:Qe.currentTarget.selectionEnd}},[Ge,Mt,Et]),Te=I.useCallback(Qe=>{var Br;Ee==null||Ee(Qe),rt.current&&(Qe.currentTarget.selectionStart=rt.current.start??((Br=Qe.currentTarget.value)==null?void 0:Br.length),Qe.currentTarget.selectionEnd=rt.current.end??Qe.currentTarget.selectionStart)},[Ee]),lt=I.useCallback(Qe=>{if(Qe.nativeEvent.isComposing)return;h0e(Qe,at)||Qe.preventDefault();const Br=Nt(Qe)*a,kt=Qe.key,wn={ArrowUp:()=>Je(Br),ArrowDown:()=>Kt(Br),Home:()=>Ge(i),End:()=>Ge(s)}[kt];wn&&(Qe.preventDefault(),wn(Qe))},[at,a,Je,Kt,Ge,i,s]),Nt=Qe=>{let Br=1;return(Qe.metaKey||Qe.ctrlKey)&&(Br=.1),Qe.shiftKey&&(Br=10),Br},Tt=I.useMemo(()=>{const Qe=Be==null?void 0:Be(Me.value);if(Qe!=null)return Qe;const Br=Me.value.toString();return Br||void 0},[Me.value,Be]),Vt=I.useCallback(()=>{let Qe=Me.value;if(Me.value==="")return;/^[eE]/.test(Me.value.toString())?Me.setValue(""):(Me.valueAsNumber<i&&(Qe=i),Me.valueAsNumber>s&&(Qe=s),Me.cast(Qe))},[Me,s,i]),tn=I.useCallback(()=>{Re(!1),r&&Vt()},[r,Re,Vt]),hn=I.useCallback(()=>{e&&requestAnimationFrame(()=>{var Qe;(Qe=ze.current)==null||Qe.focus()})},[e]),on=I.useCallback(Qe=>{Qe.preventDefault(),vt.up(),hn()},[hn,vt]),kn=I.useCallback(Qe=>{Qe.preventDefault(),vt.down(),hn()},[hn,vt]);_v(()=>ze.current,"wheel",Qe=>{var xt;const kt=(((xt=ze.current)==null?void 0:xt.ownerDocument)??document).activeElement===ze.current;if(!O||!kt)return;Qe.preventDefault();const Wt=Nt(Qe)*a,wn=Math.sign(Qe.deltaY);wn===-1?Je(Wt):wn===1&&Kt(Wt)},{passive:!1});const yn=I.useCallback((Qe={},Br=null)=>{const kt=d||n&&Me.isAtMax;return{...Qe,ref:xi(Br,Xe),role:"button",tabIndex:-1,onPointerDown:kr(Qe.onPointerDown,Wt=>{Wt.button!==0||kt||on(Wt)}),onPointerLeave:kr(Qe.onPointerLeave,vt.stop),onPointerUp:kr(Qe.onPointerUp,vt.stop),disabled:kt,"aria-disabled":Il(kt)}},[Me.isAtMax,n,on,vt.stop,d]),ui=I.useCallback((Qe={},Br=null)=>{const kt=d||n&&Me.isAtMin;return{...Qe,ref:xi(Br,_t),role:"button",tabIndex:-1,onPointerDown:kr(Qe.onPointerDown,Wt=>{Wt.button!==0||kt||kn(Wt)}),onPointerLeave:kr(Qe.onPointerLeave,vt.stop),onPointerUp:kr(Qe.onPointerUp,vt.stop),disabled:kt,"aria-disabled":Il(kt)}},[Me.isAtMin,n,kn,vt.stop,d]),Oi=I.useCallback((Qe={},Br=null)=>({name:R,inputMode:w,type:"text",pattern:b,"aria-labelledby":U,"aria-label":L,"aria-describedby":F,id:A,disabled:d,role:"spinbutton",...Qe,readOnly:Qe.readOnly??o,"aria-readonly":Qe.readOnly??o,"aria-required":Qe.required??m,required:Qe.required??m,ref:xi(ze,Br),value:yt(Me.value),"aria-valuemin":i,"aria-valuemax":s,"aria-valuenow":Number.isNaN(Me.valueAsNumber)?void 0:Me.valueAsNumber,"aria-invalid":Il(y??Me.isOutOfRange),"aria-valuetext":Tt,autoComplete:"off",autoCorrect:"off",onChange:kr(Qe.onChange,st),onKeyDown:kr(Qe.onKeyDown,lt),onFocus:kr(Qe.onFocus,Te,()=>Re(!0)),onBlur:kr(Qe.onBlur,qe,tn)}),[R,w,b,U,L,yt,F,A,d,m,o,y,Me.value,Me.valueAsNumber,Me.isOutOfRange,i,s,Tt,st,lt,Te,qe,tn]);return{value:yt(Me.value),valueAsNumber:Me.valueAsNumber,isFocused:Oe,isDisabled:d,isReadOnly:o,getIncrementButtonProps:yn,getDecrementButtonProps:ui,getInputProps:Oi,htmlProps:Ze}}const[f0e,Xk]=_n({name:"NumberInputStylesContext",errorMessage:`useNumberInputStyles returned is 'undefined'. Seems you forgot to wrap the components in "<NumberInput />" `}),[p0e,fI]=_n({name:"NumberInputContext",errorMessage:"useNumberInputContext: `context` is undefined. Seems you forgot to wrap number-input's components within <NumberInput />"}),Ip=Ct(function(e,r){const n=ns("NumberInput",e),i=Mn(e),s=UM(i),{htmlProps:a,...o}=d0e(s),d=I.useMemo(()=>o,[o]);return u.jsx(p0e,{value:d,children:u.jsx(f0e,{value:n,children:u.jsx(mt.div,{...a,ref:r,className:sr("chakra-numberinput",e.className),__css:{position:"relative",zIndex:0,...n.root}})})})});Ip.displayName="NumberInput";const Dp=Ct(function(e,r){const n=Xk();return u.jsx(mt.div,{"aria-hidden":!0,ref:r,...e,__css:{display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",height:"calc(100% - 2px)",zIndex:1,...n.stepperGroup}})});Dp.displayName="NumberInputStepper";const Rp=Ct(function(e,r){const{getInputProps:n}=fI(),i=n(e,r),s=Xk();return u.jsx(mt.input,{...i,className:sr("chakra-numberinput__field",e.className),__css:{width:"100%",...s.field}})});Rp.displayName="NumberInputField";const x7=mt("div",{baseStyle:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,transitionProperty:"common",transitionDuration:"normal",userSelect:"none",cursor:"pointer",lineHeight:"normal"}}),Lp=Ct(function(e,r){const n=Xk(),{getDecrementButtonProps:i}=fI(),s=i(e,r);return u.jsx(x7,{...s,__css:n.stepper,children:e.children??u.jsx(s0e,{})})});Lp.displayName="NumberDecrementStepper";const Fp=Ct(function(e,r){const{getIncrementButtonProps:n}=fI(),i=n(e,r),s=Xk();return u.jsx(x7,{...i,__css:s.stepper,children:e.children??u.jsx(o0e,{})})});Fp.displayName="NumberIncrementStepper";function m0e(t){var r;const e=I.version;return typeof e!="string"||e.startsWith("18.")?t==null?void 0:t.ref:(r=t==null?void 0:t.props)==null?void 0:r.ref}function g0e(t,e,r){return(t-e)*100/(r-e)}So({"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260"}});So({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}});const y0e=So({"0%":{left:"-40%"},"100%":{left:"100%"}}),x0e=So({from:{backgroundPosition:"1rem 0"},to:{backgroundPosition:"0 0"}});function v0e(t){const{value:e=0,min:r,max:n,valueText:i,getValueText:s,isIndeterminate:a,role:o="progressbar"}=t,d=g0e(e,r,n);return{bind:{"data-indeterminate":a?"":void 0,"aria-valuemax":n,"aria-valuemin":r,"aria-valuenow":a?void 0:e,"aria-valuetext":(()=>{if(e!=null)return typeof s=="function"?s(e,d):i})(),role:o},percent:d,value:e}}const[b0e,_0e]=_n({name:"ProgressStylesContext",errorMessage:`useProgressStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Progress />" `}),w0e=Ct((t,e)=>{const{min:r,max:n,value:i,isIndeterminate:s,role:a,...o}=t,d=v0e({value:i,min:r,max:n,isIndeterminate:s,role:a}),y={height:"100%",..._0e().filledTrack};return u.jsx(mt.div,{ref:e,style:{width:`${d.percent}%`,...o.style},...d.bind,...o,__css:y})}),um=Ct((t,e)=>{var Z;const{value:r,min:n=0,max:i=100,hasStripe:s,isAnimated:a,children:o,borderRadius:d,isIndeterminate:m,"aria-label":y,"aria-labelledby":b,"aria-valuetext":w,title:O,role:A,...E}=Mn(t),$=ns("Progress",t),R=d??((Z=$.track)==null?void 0:Z.borderRadius),F={animation:`${x0e} 1s linear infinite`},Q={...!m&&s&&a&&F,...m&&{position:"absolute",willChange:"left",minWidth:"50%",animation:`${y0e} 1s ease infinite normal none running`}},Y={overflow:"hidden",position:"relative",...$.track};return u.jsx(mt.div,{ref:e,borderRadius:R,__css:Y,...E,children:u.jsxs(b0e,{value:$,children:[u.jsx(w0e,{"aria-label":y,"aria-labelledby":b,"aria-valuetext":w,min:n,max:i,value:r,isIndeterminate:m,css:Q,borderRadius:R,title:O,role:A}),o]})})});um.displayName="Progress";function S0e(t){return t&&eo(t)&&eo(t.target)}function k0e(t={}){const{onChange:e,value:r,defaultValue:n,name:i,isDisabled:s,isFocusable:a,isNative:o,...d}=t,[m,y]=I.useState(n||""),b=typeof r<"u",w=b?r:m,O=I.useRef(null),A=I.useCallback(()=>{const Q=O.current;if(!Q)return;let Y="input:not(:disabled):checked";const Z=Q.querySelector(Y);if(Z){Z.focus();return}Y="input:not(:disabled)";const J=Q.querySelector(Y);J==null||J.focus()},[]),$=`radio-${I.useId()}`,R=i||$,F=I.useCallback(Q=>{const Y=S0e(Q)?Q.target.value:Q;b||y(Y),e==null||e(String(Y))},[e,b]),L=I.useCallback((Q={},Y=null)=>({...Q,ref:xi(Y,O),role:"radiogroup"}),[]),U=I.useCallback((Q={},Y=null)=>({...Q,ref:Y,name:R,[o?"checked":"isChecked"]:w!=null?Q.value===w:void 0,onChange(J){F(J)},"data-radiogroup":!0}),[o,R,F,w]);return{getRootProps:L,getRadioProps:U,name:R,ref:O,focus:A,setValue:y,value:w,onChange:F,isDisabled:s,isFocusable:a,htmlProps:d}}const[C0e,v7]=_n({name:"RadioGroupContext",strict:!1}),b7=Ct((t,e)=>{const{colorScheme:r,size:n,variant:i,children:s,className:a,isDisabled:o,isFocusable:d,...m}=t,{value:y,onChange:b,getRootProps:w,name:O,htmlProps:A}=k0e(m),E=I.useMemo(()=>({name:O,size:n,onChange:b,colorScheme:r,value:y,variant:i,isDisabled:o,isFocusable:d}),[O,n,b,r,y,i,o,d]);return u.jsx(C0e,{value:E,children:u.jsx(mt.div,{...w(A,e),className:sr("chakra-radio-group",a),children:s})})});b7.displayName="RadioGroup";function T0e(t={}){const{defaultChecked:e,isChecked:r,isFocusable:n,isDisabled:i,isReadOnly:s,isRequired:a,onChange:o,isInvalid:d,name:m,value:y,id:b,"data-radiogroup":w,"aria-describedby":O,...A}=t,E=`radio-${I.useId()}`,$=x1(),F=!!v7()||!!w;let U=!!$&&!F?$.id:E;U=b??U;const Q=i??($==null?void 0:$.isDisabled),Y=s??($==null?void 0:$.isReadOnly),Z=a??($==null?void 0:$.isRequired),J=d??($==null?void 0:$.isInvalid),[re,he]=I.useState(!1),[le,Ze]=I.useState(!1),[Ee,qe]=I.useState(!1),[et,at]=I.useState(!!e),Be=typeof r<"u",Me=Be?r:et,Ge=I.useRef(!1);I.useEffect(()=>sW(Et=>{Ge.current=Et}),[]);const Le=I.useCallback(Et=>{if(Y||Q){Et.preventDefault();return}Be||at(Et.currentTarget.checked),o==null||o(Et)},[Be,Q,Y,o]),Ie=I.useCallback(Et=>{Et.key===" "&&qe(!0)},[qe]),Oe=I.useCallback(Et=>{Et.key===" "&&qe(!1)},[qe]),Re=I.useCallback((Et={},yt=null)=>({...Et,ref:yt,"data-active":_r(Ee),"data-hover":_r(le),"data-disabled":_r(Q),"data-invalid":_r(J),"data-checked":_r(Me),"data-focus":_r(re),"data-focus-visible":_r(re&&Ge.current),"data-readonly":_r(Y),"aria-hidden":!0,onMouseDown:kr(Et.onMouseDown,()=>qe(!0)),onMouseUp:kr(Et.onMouseUp,()=>qe(!1)),onMouseEnter:kr(Et.onMouseEnter,()=>Ze(!0)),onMouseLeave:kr(Et.onMouseLeave,()=>Ze(!1))}),[Ee,le,Q,J,Me,re,Y]),{onFocus:nt,onBlur:ze}=$??{},rt=I.useCallback((Et={},yt=null)=>{const Je=Q&&!n;return{...Et,id:U,ref:yt,type:"radio",name:m,value:y,onChange:kr(Et.onChange,Le),onBlur:kr(ze,Et.onBlur,()=>he(!1)),onFocus:kr(nt,Et.onFocus,()=>he(!0)),onKeyDown:kr(Et.onKeyDown,Ie),onKeyUp:kr(Et.onKeyUp,Oe),checked:Me,disabled:Je,readOnly:Y,required:Z,"aria-invalid":Il(J),"aria-disabled":Il(Je),"aria-required":Il(Z),"data-readonly":_r(Y),"aria-describedby":O,style:aW}},[Q,n,U,m,y,Le,ze,nt,Ie,Oe,Me,Y,Z,J,O]);return{state:{isInvalid:J,isFocused:re,isChecked:Me,isActive:Ee,isHovered:le,isDisabled:Q,isReadOnly:Y,isRequired:Z},getRadioProps:Re,getInputProps:rt,getLabelProps:(Et={},yt=null)=>({...Et,ref:yt,onMouseDown:kr(Et.onMouseDown,O0e),"data-disabled":_r(Q),"data-checked":_r(Me),"data-invalid":_r(J)}),getRootProps:(Et,yt=null)=>({htmlFor:U,...Et,ref:yt,"data-disabled":_r(Q),"data-checked":_r(Me),"data-invalid":_r(J)}),htmlProps:A}}function O0e(t){t.preventDefault(),t.stopPropagation()}const _7=Ct((t,e)=>{const r=v7(),{onChange:n,value:i}=t,s=ns("Radio",{...r,...t}),a=Mn(t),{spacing:o="0.5rem",children:d,isDisabled:m=r==null?void 0:r.isDisabled,isFocusable:y=r==null?void 0:r.isFocusable,inputProps:b,...w}=a;let O=t.isChecked;(r==null?void 0:r.value)!=null&&i!=null&&(O=r.value===i);let A=n;r!=null&&r.onChange&&i!=null&&(A=$z(r.onChange,n));const E=(t==null?void 0:t.name)??(r==null?void 0:r.name),{getInputProps:$,getRadioProps:R,getLabelProps:F,getRootProps:L,htmlProps:U}=T0e({...w,isChecked:O,isFocusable:y,isDisabled:m,onChange:A,name:E}),[Q,Y]=M8(U,U8),Z=R(Y),J=$(b,e),re=F(),he=Object.assign({},Q,L()),le={display:"inline-flex",alignItems:"center",verticalAlign:"top",cursor:"pointer",position:"relative",...s.container},Ze={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,...s.control},Ee={userSelect:"none",marginStart:o,...s.label};return u.jsxs(mt.label,{className:"chakra-radio",...he,__css:le,children:[u.jsx("input",{className:"chakra-radio__input",...J}),u.jsx(mt.span,{className:"chakra-radio__control",...Z,__css:Ze}),d&&u.jsx(mt.span,{className:"chakra-radio__label",...re,__css:Ee,children:d})]})});_7.displayName="Radio";const w7=Ct(function(e,r){const{children:n,placeholder:i,className:s,...a}=e;return u.jsxs(mt.select,{...a,ref:r,className:sr("chakra-select",s),children:[i&&u.jsx("option",{value:"",children:i}),n]})});w7.displayName="SelectField";const Rn=Ct((t,e)=>{var L;const r=ns("Select",t),{rootProps:n,placeholder:i,icon:s,color:a,height:o,h:d,minH:m,minHeight:y,iconColor:b,iconSize:w,...O}=Mn(t),[A,E]=M8(O,U8),$=WM(E),R={width:"100%",height:"fit-content",position:"relative",color:a},F={paddingEnd:"2rem",...r.field,_focus:{zIndex:"unset",...(L=r.field)==null?void 0:L._focus}};return u.jsxs(mt.div,{className:"chakra-select__wrapper",__css:R,...A,...n,children:[u.jsx(w7,{ref:e,height:d??o,minH:m??y,placeholder:i,...$,__css:F,children:t.children}),u.jsx(S7,{"data-disabled":_r($.disabled),...(b||a)&&{color:b||a},__css:r.icon,...w&&{fontSize:w},children:s})]})});Rn.displayName="Select";const P0e=t=>u.jsx("svg",{viewBox:"0 0 24 24",...t,children:u.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),j0e=mt("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),S7=t=>{const{children:e=u.jsx(P0e,{}),...r}=t,n=I.cloneElement(e,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return u.jsx(j0e,{...r,className:"chakra-select__icon-wrapper",children:I.isValidElement(e)?n:null})};S7.displayName="SelectIcon";function qO(t){const{orientation:e,vertical:r,horizontal:n}=t;return e==="vertical"?r:n}function A0e(t){const{orientation:e,thumbPercents:r,isReversed:n}=t,i=O=>({position:"absolute",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none",...qO({orientation:e,vertical:{bottom:`${r[O]}%`,transform:"translate(-50%, 50%) scale(var(--slider-thumb-scale, 1))"},horizontal:{left:`${r[O]}%`,transform:"translate(-50%, -50%) scale(var(--slider-thumb-scale, 1))"}})}),s={position:"relative",touchAction:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",userSelect:"none",outline:0},a={position:"absolute",...qO({orientation:e,vertical:{left:"50%",transform:"translateX(-50%)",height:"100%"},horizontal:{top:"50%",transform:"translateY(-50%)",width:"100%"}})},o=r.length===1,d=[0,n?100-r[0]:r[0]],m=o?d:r;let y=m[0];!o&&n&&(y=100-y);const b=Math.abs(m[m.length-1]-m[0]),w={...a,...qO({orientation:e,vertical:n?{height:`${b}%`,top:`${y}%`}:{height:`${b}%`,bottom:`${y}%`},horizontal:n?{width:`${b}%`,right:`${y}%`}:{width:`${b}%`,left:`${y}%`}})};return{trackStyle:a,innerTrackStyle:w,rootStyle:s,getThumbStyle:i}}function E0e(t){const{isReversed:e,direction:r,orientation:n}=t;return r==="ltr"||n==="vertical"?e:!e}function z0e(t){const{min:e=0,max:r=100,onChange:n,value:i,defaultValue:s,isReversed:a,direction:o="ltr",orientation:d="horizontal",id:m,isDisabled:y,isReadOnly:b,onChangeStart:w,onChangeEnd:O,step:A=1,getAriaValueText:E,"aria-valuetext":$,"aria-label":R,"aria-labelledby":F,name:L,focusThumbOnChange:U=!0,...Q}=t,Y=Bi(w),Z=Bi(O),J=Bi(E),re=E0e({isReversed:a,direction:o,orientation:d}),[he,le]=Wz({value:i,defaultValue:s??I0e(e,r),onChange:n}),[Ze,Ee]=I.useState(!1),[qe,et]=I.useState(!1),at=!(y||b),Be=(r-e)/10,Me=A||(r-e)/100,Ge=Jw(he,e,r),Le=r-Ge+e,Oe=m3(re?Le:Ge,e,r),Re=d==="vertical",nt=D8({min:e,max:r,step:A,isDisabled:y,value:Ge,isInteractive:at,isReversed:re,isVertical:Re,eventSource:null,focusThumbOnChange:U,orientation:d}),ze=I.useRef(null),rt=I.useRef(null),Xe=I.useRef(null),_t=I.useId(),Mt=m??_t,[Et,yt]=[`slider-thumb-${Mt}`,`slider-track-${Mt}`],Je=I.useCallback(kt=>{var Ii;if(!ze.current)return;const Wt=nt.current;Wt.eventSource="pointer";const wn=ze.current.getBoundingClientRect(),{clientX:xt,clientY:yr}=((Ii=kt.touches)==null?void 0:Ii[0])??kt,Jt=Re?wn.bottom-yr:xt-wn.left,Zn=Re?wn.height:wn.width;let vi=Jt/Zn;re&&(vi=1-vi);let pr=PY(vi,Wt.min,Wt.max);return Wt.step&&(pr=parseFloat(g3(pr,Wt.min,Wt.step))),pr=Jw(pr,Wt.min,Wt.max),pr},[Re,re,nt]),Kt=I.useCallback(kt=>{const Wt=nt.current;Wt.isInteractive&&(kt=parseFloat(g3(kt,Wt.min,Me)),kt=Jw(kt,Wt.min,Wt.max),le(kt))},[Me,le,nt]),vt=I.useMemo(()=>({stepUp(kt=Me){const Wt=re?Ge-kt:Ge+kt;Kt(Wt)},stepDown(kt=Me){const Wt=re?Ge+kt:Ge-kt;Kt(Wt)},reset(){Kt(s||0)},stepTo(kt){Kt(kt)}}),[Kt,re,Ge,Me,s]),st=I.useCallback(kt=>{const Wt=nt.current,xt={ArrowRight:()=>vt.stepUp(),ArrowUp:()=>vt.stepUp(),ArrowLeft:()=>vt.stepDown(),ArrowDown:()=>vt.stepDown(),PageUp:()=>vt.stepUp(Be),PageDown:()=>vt.stepDown(Be),Home:()=>Kt(Wt.min),End:()=>Kt(Wt.max)}[kt.key];xt&&(kt.preventDefault(),kt.stopPropagation(),xt(kt),Wt.eventSource="keyboard")},[vt,Kt,Be,nt]),Te=(J==null?void 0:J(Ge))??$,{getThumbStyle:lt,rootStyle:Nt,trackStyle:Tt,innerTrackStyle:Vt}=I.useMemo(()=>{const kt=nt.current;return A0e({isReversed:re,orientation:kt.orientation,thumbPercents:[Oe]})},[re,Oe,nt]),tn=I.useCallback(()=>{nt.current.focusThumbOnChange&&setTimeout(()=>{var Wt;return(Wt=rt.current)==null?void 0:Wt.focus()})},[nt]);Qd(()=>{const kt=nt.current;tn(),kt.eventSource==="keyboard"&&(Z==null||Z(kt.value))},[Ge,Z]);function hn(kt){const Wt=Je(kt);Wt!=null&&Wt!==nt.current.value&&le(Wt)}sJ(Xe,{onPanSessionStart(kt){const Wt=nt.current;Wt.isInteractive&&(Ee(!0),tn(),hn(kt),Y==null||Y(Wt.value))},onPanSessionEnd(){const kt=nt.current;kt.isInteractive&&(Ee(!1),Z==null||Z(kt.value))},onPan(kt){nt.current.isInteractive&&hn(kt)}});const on=I.useCallback((kt={},Wt=null)=>({...kt,...Q,ref:xi(Wt,Xe),tabIndex:-1,"aria-disabled":Il(y),"data-focused":_r(qe),style:{...kt.style,...Nt}}),[Q,y,qe,Nt]),kn=I.useCallback((kt={},Wt=null)=>({...kt,ref:xi(Wt,ze),id:yt,"data-disabled":_r(y),style:{...kt.style,...Tt}}),[y,yt,Tt]),yn=I.useCallback((kt={},Wt=null)=>({...kt,ref:Wt,style:{...kt.style,...Vt}}),[Vt]),ui=I.useCallback((kt={},Wt=null)=>({...kt,ref:xi(Wt,rt),role:"slider",tabIndex:at?0:void 0,id:Et,"data-active":_r(Ze),"aria-valuetext":Te,"aria-valuemin":e,"aria-valuemax":r,"aria-valuenow":Ge,"aria-orientation":d,"aria-disabled":Il(y),"aria-readonly":Il(b),"aria-label":R,"aria-labelledby":R?void 0:F,style:{...kt.style,...lt(0)},onKeyDown:kr(kt.onKeyDown,st),onFocus:kr(kt.onFocus,()=>et(!0)),onBlur:kr(kt.onBlur,()=>et(!1))}),[at,Et,Ze,Te,e,r,Ge,d,y,b,R,F,lt,st]),Oi=I.useCallback((kt,Wt=null)=>{const wn=!(kt.value<e||kt.value>r),xt=Ge>=kt.value,yr=m3(kt.value,e,r),Jt={position:"absolute",pointerEvents:"none",...M0e({orientation:d,vertical:{bottom:re?`${100-yr}%`:`${yr}%`},horizontal:{left:re?`${100-yr}%`:`${yr}%`}})};return{...kt,ref:Wt,role:"presentation","aria-hidden":!0,"data-disabled":_r(y),"data-invalid":_r(!wn),"data-highlighted":_r(xt),style:{...kt.style,...Jt}}},[y,re,r,e,d,Ge]),Qe=I.useCallback((kt={},Wt=null)=>({...kt,ref:Wt,type:"hidden",value:Ge,name:L}),[L,Ge]);return{state:{value:Ge,isFocused:qe,isDragging:Ze},actions:vt,getRootProps:on,getTrackProps:kn,getInnerTrackProps:yn,getThumbProps:ui,getMarkerProps:Oi,getInputProps:Qe}}function M0e(t){const{orientation:e,vertical:r,horizontal:n}=t;return e==="vertical"?r:n}function I0e(t,e){return e<t?t:t+(e-t)/2}const[D0e,Kk]=_n({name:"SliderContext",hookName:"useSliderContext",providerName:"<Slider />"}),[R0e,Zk]=_n({name:"SliderStylesContext",hookName:"useSliderStyles",providerName:"<Slider />"}),Sl=Ct((t,e)=>{const r={...t,orientation:(t==null?void 0:t.orientation)??"horizontal"},n=ns("Slider",r),i=Mn(r),{direction:s}=m1();i.direction=s;const{getInputProps:a,getRootProps:o,...d}=z0e(i),m=o(),y=a({},e);return u.jsx(D0e,{value:d,children:u.jsx(R0e,{value:n,children:u.jsxs(mt.div,{...m,className:sr("chakra-slider",r.className),__css:n.container,children:[r.children,u.jsx("input",{...y})]})})})});Sl.displayName="Slider";const kl=Ct((t,e)=>{const{getThumbProps:r}=Kk(),n=Zk(),i=r(t,e);return u.jsx(mt.div,{...i,className:sr("chakra-slider__thumb",t.className),__css:n.thumb})});kl.displayName="SliderThumb";const Cl=Ct((t,e)=>{const{getTrackProps:r}=Kk(),n=Zk(),i=r(t,e);return u.jsx(mt.div,{...i,className:sr("chakra-slider__track",t.className),__css:n.track})});Cl.displayName="SliderTrack";const Tl=Ct((t,e)=>{const{getInnerTrackProps:r}=Kk(),n=Zk(),i=r(t,e);return u.jsx(mt.div,{...i,className:sr("chakra-slider__filled-track",t.className),__css:n.filledTrack})});Tl.displayName="SliderFilledTrack";const L0e=Ct((t,e)=>{const{getMarkerProps:r}=Kk(),n=Zk(),i=r(t,e);return u.jsx(mt.div,{...i,className:sr("chakra-slider__marker",t.className),__css:n.mark})});L0e.displayName="SliderMark";const sl=mt("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});sl.displayName="Spacer";const k7=t=>u.jsx(mt.div,{className:"chakra-stack__item",...t,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...t.__css}});k7.displayName="StackItem";function F0e(t){const{spacing:e,direction:r}=t,n={column:{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":Vz(r,i=>n[i])}}const k1=Ct((t,e)=>{const{isInline:r,direction:n,align:i,justify:s,spacing:a="0.5rem",wrap:o,children:d,divider:m,className:y,shouldWrapChildren:b,...w}=t,O=r?"row":n??"column",A=I.useMemo(()=>F0e({spacing:a,direction:O}),[a,O]),E=!!m,$=!b&&!E,R=I.useMemo(()=>{const L=pk(d);return $?L:L.map((U,Q)=>{const Y=typeof U.key<"u"?U.key:Q,Z=Q+1===L.length,re=b?u.jsx(k7,{children:U},Y):U;if(!E)return re;const he=I.cloneElement(m,{__css:A}),le=Z?null:he;return u.jsxs(I.Fragment,{children:[re,le]},Y)})},[m,A,E,$,b,d]),F=sr("chakra-stack",y);return u.jsx(mt.div,{ref:e,display:"flex",alignItems:i,justifyContent:s,flexDirection:O,flexWrap:o,gap:E?void 0:a,className:F,...w,children:R})});k1.displayName="Stack";const Ce=Ct((t,e)=>u.jsx(k1,{align:"center",...t,direction:"row",ref:e}));Ce.displayName="HStack";const ft=Ct((t,e)=>u.jsx(k1,{align:"center",...t,direction:"column",ref:e}));ft.displayName="VStack";const[B0e,pI]=_n({name:"StatStylesContext",errorMessage:`useStatStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Stat />" `}),Ds=Ct(function(e,r){const n=ns("Stat",e),i={position:"relative",flex:"1 1 0%",...n.container},{className:s,children:a,...o}=Mn(e);return u.jsx(B0e,{value:n,children:u.jsx(mt.div,{ref:r,...o,className:sr("chakra-stat",s),__css:i,children:u.jsx("dl",{children:a})})})});Ds.displayName="Stat";const ay=Ct(function(e,r){const n=pI();return u.jsx(mt.dd,{ref:r,...e,className:sr("chakra-stat__help-text",e.className),__css:n.helpText})});ay.displayName="StatHelpText";const Rs=Ct(function(e,r){const n=pI();return u.jsx(mt.dt,{ref:r,...e,className:sr("chakra-stat__label",e.className),__css:n.label})});Rs.displayName="StatLabel";const Ls=Ct(function(e,r){const n=pI();return u.jsx(mt.dd,{ref:r,...e,className:sr("chakra-stat__number",e.className),__css:{...n.number,fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"}})});Ls.displayName="StatNumber";const la=Ct(function(e,r){const n=ns("Switch",e),{spacing:i="0.5rem",children:s,...a}=Mn(e),{getIndicatorProps:o,getInputProps:d,getCheckboxProps:m,getRootProps:y,getLabelProps:b}=lW(a),w=I.useMemo(()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...n.container}),[n.container]),O=I.useMemo(()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...n.track}),[n.track]),A=I.useMemo(()=>({userSelect:"none",marginStart:i,...n.label}),[i,n.label]);return u.jsxs(mt.label,{...y(),className:sr("chakra-switch",e.className),__css:w,children:[u.jsx("input",{className:"chakra-switch__input",...d({},r)}),u.jsx(mt.span,{...m(),className:"chakra-switch__track",__css:O,children:u.jsx(mt.span,{__css:n.thumb,className:"chakra-switch__thumb",...o()})}),s&&u.jsx(mt.span,{className:"chakra-switch__label",...b(),__css:A,children:s})]})});la.displayName="Switch";const[$0e,C1]=_n({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),mI=Ct((t,e)=>{const r=ns("Table",t),{className:n,layout:i,...s}=Mn(t);return u.jsx($0e,{value:r,children:u.jsx(mt.table,{ref:e,__css:{tableLayout:i,...r.table},className:sr("chakra-table",n),...s})})});mI.displayName="Table";const C7=Ct((t,e)=>{const r=C1();return u.jsx(mt.tbody,{...t,ref:e,__css:r.tbody})}),Bg=Ct(({isNumeric:t,...e},r)=>{const n=C1();return u.jsx(mt.td,{...e,ref:r,__css:n.td,"data-is-numeric":t})}),$g=Ct(({isNumeric:t,...e},r)=>{const n=C1();return u.jsx(mt.th,{...e,ref:r,__css:n.th,"data-is-numeric":t})}),T7=Ct((t,e)=>{const r=C1();return u.jsx(mt.thead,{...t,ref:e,__css:r.thead})}),v2=Ct((t,e)=>{const r=C1();return u.jsx(mt.tr,{...t,ref:e,__css:r.tr})}),[N0e,V0e,W0e,U0e]=IM();function q0e(t){const{defaultIndex:e,onChange:r,index:n,isManual:i,isLazy:s,lazyBehavior:a="unmount",orientation:o="horizontal",direction:d="ltr",...m}=t,[y,b]=I.useState(e??0),[w,O]=Wz({defaultValue:e??0,value:n,onChange:r});I.useEffect(()=>{n!=null&&b(n)},[n]);const A=W0e(),E=I.useId();return{id:`tabs-${t.id??E}`,selectedIndex:w,focusedIndex:y,setSelectedIndex:O,setFocusedIndex:b,isManual:i,isLazy:s,lazyBehavior:a,orientation:o,descendants:A,direction:d,htmlProps:m}}const[Q0e,Yk]=_n({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function H0e(t){const{focusedIndex:e,orientation:r,direction:n}=Yk(),i=V0e(),s=I.useCallback(a=>{const o=()=>{var L;const F=i.nextEnabled(e);F&&((L=F.node)==null||L.focus())},d=()=>{var L;const F=i.prevEnabled(e);F&&((L=F.node)==null||L.focus())},m=()=>{var L;const F=i.firstEnabled();F&&((L=F.node)==null||L.focus())},y=()=>{var L;const F=i.lastEnabled();F&&((L=F.node)==null||L.focus())},b=r==="horizontal",w=r==="vertical",O=a.key,A=n==="ltr"?"ArrowLeft":"ArrowRight",E=n==="ltr"?"ArrowRight":"ArrowLeft",R={[A]:()=>b&&d(),[E]:()=>b&&o(),ArrowDown:()=>w&&o(),ArrowUp:()=>w&&d(),Home:m,End:y}[O];R&&(a.preventDefault(),R(a))},[i,e,r,n]);return{...t,role:"tablist","aria-orientation":r,onKeyDown:kr(t.onKeyDown,s)}}function G0e(t){const{isDisabled:e=!1,isFocusable:r=!1,...n}=t,{setSelectedIndex:i,isManual:s,id:a,setFocusedIndex:o,selectedIndex:d}=Yk(),{index:m,register:y}=U0e({disabled:e&&!r}),b=m===d,w=()=>{i(m)},O=()=>{o(m),!s&&!(e&&r)&&i(m)};return{...n7({...n,ref:xi(y,t.ref),isDisabled:e,isFocusable:r,onClick:kr(t.onClick,w)}),id:O7(a,m),role:"tab",tabIndex:b?0:-1,type:"button","aria-selected":b,"aria-controls":P7(a,m),onFocus:e?void 0:kr(t.onFocus,O)}}const[X0e,K0e]=_n({});function Z0e(t){const e=Yk(),{id:r,selectedIndex:n}=e,s=pk(t.children).map((a,o)=>I.createElement(X0e,{key:a.key??o,value:{isSelected:o===n,id:P7(r,o),tabId:O7(r,o),selectedIndex:n}},a));return{...t,children:s}}function Y0e(t){const{children:e,...r}=t,{isLazy:n,lazyBehavior:i}=Yk(),{isSelected:s,id:a,tabId:o}=K0e(),d=I.useRef(!1);s&&(d.current=!0);const m=A8({wasSelected:d.current,isSelected:s,enabled:n,mode:i});return{tabIndex:0,...r,children:m?e:null,role:"tabpanel","aria-labelledby":o,hidden:!s,id:a}}function O7(t,e){return`${t}--tab-${e}`}function P7(t,e){return`${t}--tabpanel-${e}`}const[J0e,Jk]=_n({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),p0=Ct(function(e,r){const n=ns("Tabs",e),{children:i,className:s,...a}=Mn(e),{htmlProps:o,descendants:d,...m}=q0e(a),y=I.useMemo(()=>m,[m]),{isFitted:b,...w}=o,O={position:"relative",...n.root};return u.jsx(N0e,{value:d,children:u.jsx(Q0e,{value:y,children:u.jsx(J0e,{value:n,children:u.jsx(mt.div,{className:sr("chakra-tabs",s),ref:r,...w,__css:O,children:i})})})})});p0.displayName="Tabs";const Ys=Ct(function(e,r){const n=Jk(),i=G0e({...e,ref:r}),s={outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...n.tab};return u.jsx(mt.button,{...i,className:sr("chakra-tabs__tab",e.className),__css:s})});Ys.displayName="Tab";const m0=Ct(function(e,r){const n=H0e({...e,ref:r}),i=Jk(),s={display:"flex",...i.tablist};return u.jsx(mt.div,{...n,className:sr("chakra-tabs__tablist",e.className),__css:s})});m0.displayName="TabList";const ga=Ct(function(e,r){const n=Y0e({...e,ref:r}),i=Jk();return u.jsx(mt.div,{outline:"0",...n,className:sr("chakra-tabs__tab-panel",e.className),__css:i.tabpanel})});ga.displayName="TabPanel";const T1=Ct(function(e,r){const n=Z0e(e),i=Jk();return u.jsx(mt.div,{...n,width:"100%",ref:r,className:sr("chakra-tabs__tab-panels",e.className),__css:i.tabpanels})});T1.displayName="TabPanels";const[exe,j7]=_n({name:"TagStylesContext",errorMessage:`useTagStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tag />" `}),Qy=Ct((t,e)=>{const r=ns("Tag",t),n=Mn(t),i={display:"inline-flex",verticalAlign:"top",alignItems:"center",maxWidth:"100%",...r.container};return u.jsx(exe,{value:r,children:u.jsx(mt.span,{ref:e,...n,__css:i})})});Qy.displayName="Tag";const Cb=Ct((t,e)=>{const r=j7();return u.jsx(mt.span,{ref:e,noOfLines:1,...t,__css:r.label})});Cb.displayName="TagLabel";const txe=Ct((t,e)=>u.jsx(He,{ref:e,verticalAlign:"top",marginEnd:"0.5rem",...t}));txe.displayName="TagLeftIcon";const rxe=Ct((t,e)=>u.jsx(He,{ref:e,verticalAlign:"top",marginStart:"0.5rem",...t}));rxe.displayName="TagRightIcon";const A7=t=>u.jsx(He,{verticalAlign:"inherit",viewBox:"0 0 512 512",...t,children:u.jsx("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})});A7.displayName="TagCloseIcon";const E7=Ct((t,e)=>{const{isDisabled:r,children:n,...i}=t,a={display:"flex",alignItems:"center",justifyContent:"center",outline:"0",...j7().closeButton};return u.jsx(mt.button,{ref:e,"aria-label":"close",...i,type:"button",disabled:r,__css:a,children:n||u.jsx(A7,{})})});E7.displayName="TagCloseButton";const nxe=["h","minH","height","minHeight"],eC=Ct((t,e)=>{const r=il("Textarea",t),{className:n,rows:i,...s}=Mn(t),a=WM(s),o=i?gk(r,nxe):r;return u.jsx(mt.textarea,{ref:e,rows:i,...a,className:sr("chakra-textarea",n),__css:o})});eC.displayName="Textarea";function ixe(t,e){const r=t??"bottom",i={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[r];return(i==null?void 0:i[e])??r}function sxe(t,e){const r=i=>({...e,...i,position:ixe((i==null?void 0:i.position)??(e==null?void 0:e.position),t)}),n=i=>{const s=r(i),a=nW(s);return Zc.notify(a,s)};return n.update=(i,s)=>{Zc.update(i,r(s))},n.promise=(i,s)=>{const a=n({...s.loading,status:"loading",duration:null});i.then(o=>n.update(a,{status:"success",duration:5e3,...Qa(s.success,o)})).catch(o=>n.update(a,{status:"error",duration:5e3,...Qa(s.error,o)}))},n.closeAll=Zc.closeAll,n.close=Zc.close,n.isActive=Zc.isActive,n}function Go(t){const{theme:e}=eW(),r=qde();return I.useMemo(()=>sxe(e.direction,{...r,...t}),[t,e.direction,r])}const oxe={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}},kA=t=>{var e;return((e=t.current)==null?void 0:e.ownerDocument)||document},xS=t=>{var e,r;return((r=(e=t.current)==null?void 0:e.ownerDocument)==null?void 0:r.defaultView)||window};function axe(t={}){const{openDelay:e=0,closeDelay:r=0,closeOnClick:n=!0,closeOnMouseDown:i,closeOnScroll:s,closeOnPointerDown:a=i,closeOnEsc:o=!0,onOpen:d,onClose:m,placement:y,id:b,isOpen:w,defaultIsOpen:O,arrowSize:A=10,arrowShadowColor:E,arrowPadding:$,modifiers:R,isDisabled:F,gutter:L,offset:U,direction:Q,...Y}=t,{isOpen:Z,onOpen:J,onClose:re}=Qp({isOpen:w,defaultIsOpen:O,onOpen:d,onClose:m}),{referenceRef:he,getPopperProps:le,getArrowInnerProps:Ze,getArrowProps:Ee}=r7({enabled:Z,placement:y,arrowPadding:$,modifiers:R,gutter:L,offset:U,direction:Q}),qe=I.useId(),at=`tooltip-${b??qe}`,Be=I.useRef(null),Me=I.useRef(void 0),Ge=I.useCallback(()=>{Me.current&&(clearTimeout(Me.current),Me.current=void 0)},[]),Le=I.useRef(void 0),Ie=I.useCallback(()=>{Le.current&&(clearTimeout(Le.current),Le.current=void 0)},[]),Oe=I.useCallback(()=>{Ie(),re()},[re,Ie]),Re=lxe(Be,Oe),nt=I.useCallback(()=>{if(!F&&!Me.current){Z&&Re();const Je=xS(Be);Me.current=Je.setTimeout(J,e)}},[Re,F,Z,J,e]),ze=I.useCallback(()=>{Ge();const Je=xS(Be);Le.current=Je.setTimeout(Oe,r)},[r,Oe,Ge]),rt=I.useCallback(()=>{Z&&n&&ze()},[n,ze,Z]),Xe=I.useCallback(()=>{Z&&a&&ze()},[a,ze,Z]),_t=I.useCallback(Je=>{Z&&Je.key==="Escape"&&ze()},[Z,ze]);_v(()=>kA(Be),"keydown",o?_t:void 0),_v(()=>{if(!s)return null;const Je=Be.current;if(!Je)return null;const Kt=z8(Je);return Kt.localName==="body"?xS(Be):Kt},"scroll",()=>{Z&&s&&Oe()},{passive:!0,capture:!0}),I.useEffect(()=>{F&&(Ge(),Z&&re())},[F,Z,re,Ge]),I.useEffect(()=>()=>{Ge(),Ie()},[Ge,Ie]),_v(()=>Be.current,"pointerleave",ze);const Mt=I.useCallback((Je={},Kt=null)=>({...Je,ref:xi(Be,Kt,he),onPointerEnter:kr(Je.onPointerEnter,st=>{st.pointerType!=="touch"&&nt()}),onClick:kr(Je.onClick,rt),onPointerDown:kr(Je.onPointerDown,Xe),onFocus:kr(Je.onFocus,nt),onBlur:kr(Je.onBlur,ze),"aria-describedby":Z?at:void 0}),[nt,ze,Xe,Z,at,rt,he]),Et=I.useCallback((Je={},Kt=null)=>le({...Je,style:{...Je.style,[Xs.arrowSize.var]:A?`${A}px`:void 0,[Xs.arrowShadowColor.var]:E}},Kt),[le,A,E]),yt=I.useCallback((Je={},Kt=null)=>{const vt={...Je.style,position:"relative",transformOrigin:Xs.transformOrigin.varRef};return{ref:Kt,...Y,...Je,id:at,role:"tooltip",style:vt}},[Y,at]);return{isOpen:Z,show:nt,hide:ze,getTriggerProps:Mt,getTooltipProps:yt,getTooltipPositionerProps:Et,getArrowProps:Ee,getArrowInnerProps:Ze}}const QO="chakra-ui:close-tooltip";function lxe(t,e){return I.useEffect(()=>{const r=kA(t);return r.addEventListener(QO,e),()=>r.removeEventListener(QO,e)},[e,t]),()=>{const r=kA(t),n=xS(t);r.dispatchEvent(new n.CustomEvent(QO))}}const cxe=mt(Dn.div),$r=Ct((t,e)=>{const r=il("Tooltip",t),n=Mn(t),i=m1(),{children:s,label:a,shouldWrapChildren:o,"aria-label":d,hasArrow:m,bg:y,portalProps:b,background:w,backgroundColor:O,bgColor:A,motionProps:E,animatePresenceProps:$,...R}=n,F=w??O??y??A;if(F){r.bg=F;const he=GJ(i,"colors",F);r[Xs.arrowBg.var]=he}const L=axe({...R,direction:i.direction}),U=!I.isValidElement(s)||o;let Q;if(U)Q=u.jsx(mt.span,{display:"inline-block",tabIndex:0,...L.getTriggerProps(),children:s});else{const he=I.Children.only(s);Q=I.cloneElement(he,L.getTriggerProps(he.props,m0e(he)))}const Y=!!d,Z=L.getTooltipProps({},e),J=Y?gk(Z,["role","id"]):Z,re=E8(Z,["role","id"]);return a?u.jsxs(u.Fragment,{children:[Q,u.jsx(pc,{...$,children:L.isOpen&&u.jsx(h0,{...b,children:u.jsx(mt.div,{...L.getTooltipPositionerProps(),__css:{zIndex:r.zIndex,pointerEvents:"none"},children:u.jsxs(cxe,{variants:oxe,initial:"exit",animate:"enter",exit:"exit",...E,...J,__css:r,children:[a,Y&&u.jsx(mt.span,{srOnly:!0,...re,children:d}),m&&u.jsx(mt.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper",children:u.jsx(mt.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:r.bg}})})]})})})})]}):u.jsx(u.Fragment,{children:s})});$r.displayName="Tooltip";const bn=Ct(function(e,r){const n=il("Heading",e),{className:i,...s}=Mn(e);return u.jsx(mt.h2,{ref:r,className:sr("chakra-heading",e.className),...s,__css:n})});bn.displayName="Heading";const ie=Ct(function(e,r){const n=il("Text",e),{className:i,align:s,decoration:a,casing:o,...d}=Mn(e),m=mk({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return u.jsx(mt.p,{ref:r,className:sr("chakra-text",e.className),...m,...d,__css:n})});ie.displayName="Text";const Tb=Ct(function(e,r){const{spacing:n="0.5rem",spacingX:i,spacingY:s,children:a,justify:o,direction:d,align:m,className:y,shouldWrapChildren:b,...w}=e,O=I.useMemo(()=>b?I.Children.map(a,(A,E)=>u.jsx(Hy,{children:A},E)):a,[a,b]);return u.jsx(mt.div,{ref:r,className:sr("chakra-wrap",y),...w,children:u.jsx(mt.ul,{className:"chakra-wrap__list",__css:{display:"flex",flexWrap:"wrap",justifyContent:o,alignItems:m,flexDirection:d,listStyleType:"none",gap:n,columnGap:i,rowGap:s,padding:"0"},children:O})})});Tb.displayName="Wrap";const Hy=Ct(function(e,r){const{className:n,...i}=e;return u.jsx(mt.li,{ref:r,__css:{display:"flex",alignItems:"flex-start"},className:sr("chakra-wrap__listitem",n),...i})});Hy.displayName="WrapItem";var g0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},uxe={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},vd,WE,J6,hxe=(J6=class{constructor(){wr(this,vd,uxe);wr(this,WE,!1)}setTimeoutProvider(t){tr(this,vd,t)}setTimeout(t,e){return je(this,vd).setTimeout(t,e)}clearTimeout(t){je(this,vd).clearTimeout(t)}setInterval(t,e){return je(this,vd).setInterval(t,e)}clearInterval(t){je(this,vd).clearInterval(t)}},vd=new WeakMap,WE=new WeakMap,J6),hp=new hxe;function dxe(t){setTimeout(t,0)}var Yp=typeof window>"u"||"Deno"in globalThis;function Lo(){}function fxe(t,e){return typeof t=="function"?t(e):t}function CA(t){return typeof t=="number"&&t>=0&&t!==1/0}function z7(t,e){return Math.max(t+(e||0)-Date.now(),0)}function $d(t,e){return typeof t=="function"?t(e):t}function bl(t,e){return typeof t=="function"?t(e):t}function F4(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:a,stale:o}=t;if(a){if(n){if(e.queryHash!==gI(a,e.options))return!1}else if(!Ob(e.queryKey,a))return!1}if(r!=="all"){const d=e.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||i&&i!==e.state.fetchStatus||s&&!s(e))}function B4(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(Jp(e.options.mutationKey)!==Jp(s))return!1}else if(!Ob(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function gI(t,e){return((e==null?void 0:e.queryKeyHashFn)||Jp)(t)}function Jp(t){return JSON.stringify(t,(e,r)=>TA(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Ob(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Ob(t[r],e[r])):!1}var pxe=Object.prototype.hasOwnProperty;function M7(t,e,r=0){if(t===e)return t;if(r>500)return e;const n=$4(t)&&$4(e);if(!n&&!(TA(t)&&TA(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),o=a.length,d=n?new Array(o):{};let m=0;for(let y=0;y<o;y++){const b=n?y:a[y],w=t[b],O=e[b];if(w===O){d[b]=w,(n?y<s:pxe.call(t,b))&&m++;continue}if(w===null||O===null||typeof w!="object"||typeof O!="object"){d[b]=O;continue}const A=M7(w,O,r+1);d[b]=A,A===w&&m++}return s===o&&m===s?t:d}function b2(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function $4(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function TA(t){if(!N4(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!N4(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function N4(t){return Object.prototype.toString.call(t)==="[object Object]"}function mxe(t){return new Promise(e=>{hp.setTimeout(e,t)})}function OA(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?M7(t,e):e}function gxe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function yxe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var yI=Symbol();function I7(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===yI?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function xI(t,e){return typeof t=="function"?t(...e):!!t}function xxe(t,e,r){let n=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),n||(n=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),t}var mp,bd,my,e$,vxe=(e$=class extends g0{constructor(){super();wr(this,mp);wr(this,bd);wr(this,my);tr(this,my,e=>{if(!Yp&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){je(this,bd)||this.setEventListener(je(this,my))}onUnsubscribe(){var e;this.hasListeners()||((e=je(this,bd))==null||e.call(this),tr(this,bd,void 0))}setEventListener(e){var r;tr(this,my,e),(r=je(this,bd))==null||r.call(this),tr(this,bd,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){je(this,mp)!==e&&(tr(this,mp,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof je(this,mp)=="boolean"?je(this,mp):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},mp=new WeakMap,bd=new WeakMap,my=new WeakMap,e$),vI=new vxe;function PA(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var bxe=dxe;function _xe(){let t=[],e=0,r=o=>{o()},n=o=>{o()},i=bxe;const s=o=>{e?t.push(o):i(()=>{r(o)})},a=()=>{const o=t;t=[],o.length&&i(()=>{n(()=>{o.forEach(d=>{r(d)})})})};return{batch:o=>{let d;e++;try{d=o()}finally{e--,e||a()}return d},batchCalls:o=>(...d)=>{s(()=>{o(...d)})},schedule:s,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{i=o}}}var hs=_xe(),gy,_d,yy,t$,wxe=(t$=class extends g0{constructor(){super();wr(this,gy,!0);wr(this,_d);wr(this,yy);tr(this,yy,e=>{if(!Yp&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){je(this,_d)||this.setEventListener(je(this,yy))}onUnsubscribe(){var e;this.hasListeners()||((e=je(this,_d))==null||e.call(this),tr(this,_d,void 0))}setEventListener(e){var r;tr(this,yy,e),(r=je(this,_d))==null||r.call(this),tr(this,_d,e(this.setOnline.bind(this)))}setOnline(e){je(this,gy)!==e&&(tr(this,gy,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return je(this,gy)}},gy=new WeakMap,_d=new WeakMap,yy=new WeakMap,t$),_2=new wxe;function Sxe(t){return Math.min(1e3*2**t,3e4)}function D7(t){return(t??"online")==="online"?_2.isOnline():!0}var jA=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function R7(t){let e=!1,r=0,n;const i=PA(),s=()=>i.status!=="pending",a=E=>{var $;if(!s()){const R=new jA(E);w(R),($=t.onCancel)==null||$.call(t,R)}},o=()=>{e=!0},d=()=>{e=!1},m=()=>vI.isFocused()&&(t.networkMode==="always"||_2.isOnline())&&t.canRun(),y=()=>D7(t.networkMode)&&t.canRun(),b=E=>{s()||(n==null||n(),i.resolve(E))},w=E=>{s()||(n==null||n(),i.reject(E))},O=()=>new Promise(E=>{var $;n=R=>{(s()||m())&&E(R)},($=t.onPause)==null||$.call(t)}).then(()=>{var E;n=void 0,s()||(E=t.onContinue)==null||E.call(t)}),A=()=>{if(s())return;let E;const $=r===0?t.initialPromise:void 0;try{E=$??t.fn()}catch(R){E=Promise.reject(R)}Promise.resolve(E).then(b).catch(R=>{var Y;if(s())return;const F=t.retry??(Yp?0:3),L=t.retryDelay??Sxe,U=typeof L=="function"?L(r,R):L,Q=F===!0||typeof F=="number"&&r<F||typeof F=="function"&&F(r,R);if(e||!Q){w(R);return}r++,(Y=t.onFail)==null||Y.call(t,r,R),mxe(U).then(()=>m()?void 0:O()).then(()=>{e?w(R):A()})})};return{promise:i,status:()=>i.status,cancel:a,continue:()=>(n==null||n(),i),cancelRetry:o,continueRetry:d,canStart:y,start:()=>(y()?A():O().then(A),i)}}var gp,r$,L7=(r$=class{constructor(){wr(this,gp)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),CA(this.gcTime)&&tr(this,gp,hp.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Yp?1/0:5*60*1e3))}clearGcTimeout(){je(this,gp)&&(hp.clearTimeout(je(this,gp)),tr(this,gp,void 0))}},gp=new WeakMap,r$),yp,xy,xl,xp,Es,Xb,vp,rc,Nu,n$,kxe=(n$=class extends L7{constructor(e){super();wr(this,rc);wr(this,yp);wr(this,xy);wr(this,xl);wr(this,xp);wr(this,Es);wr(this,Xb);wr(this,vp);tr(this,vp,!1),tr(this,Xb,e.defaultOptions),this.setOptions(e.options),this.observers=[],tr(this,xp,e.client),tr(this,xl,je(this,xp).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,tr(this,yp,W4(this.options)),this.state=e.state??je(this,yp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=je(this,Es))==null?void 0:e.promise}setOptions(e){if(this.options={...je(this,Xb),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=W4(this.options);r.data!==void 0&&(this.setState(V4(r.data,r.dataUpdatedAt)),tr(this,yp,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&je(this,xl).remove(this)}setData(e,r){const n=OA(this.state.data,e,this.options);return Xr(this,rc,Nu).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Xr(this,rc,Nu).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=je(this,Es))==null?void 0:n.promise;return(i=je(this,Es))==null||i.cancel(e),r?r.then(Lo).catch(Lo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(je(this,yp))}isActive(){return this.observers.some(e=>bl(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yI||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>$d(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!z7(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=je(this,Es))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=je(this,Es))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),je(this,xl).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(je(this,Es)&&(je(this,vp)?je(this,Es).cancel({revert:!0}):je(this,Es).cancelRetry()),this.scheduleGc()),je(this,xl).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Xr(this,rc,Nu).call(this,{type:"invalidate"})}async fetch(e,r){var d,m,y,b,w,O,A,E,$,R,F,L;if(this.state.fetchStatus!=="idle"&&((d=je(this,Es))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(je(this,Es))return je(this,Es).continueRetry(),je(this,Es).promise}if(e&&this.setOptions(e),!this.options.queryFn){const U=this.observers.find(Q=>Q.options.queryFn);U&&this.setOptions(U.options)}const n=new AbortController,i=U=>{Object.defineProperty(U,"signal",{enumerable:!0,get:()=>(tr(this,vp,!0),n.signal)})},s=()=>{const U=I7(this.options,r),Y=(()=>{const Z={client:je(this,xp),queryKey:this.queryKey,meta:this.meta};return i(Z),Z})();return tr(this,vp,!1),this.options.persister?this.options.persister(U,Y,this):U(Y)},o=(()=>{const U={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:je(this,xp),state:this.state,fetchFn:s};return i(U),U})();(m=this.options.behavior)==null||m.onFetch(o,this),tr(this,xy,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=o.fetchOptions)==null?void 0:y.meta))&&Xr(this,rc,Nu).call(this,{type:"fetch",meta:(b=o.fetchOptions)==null?void 0:b.meta}),tr(this,Es,R7({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:U=>{U instanceof jA&&U.revert&&this.setState({...je(this,xy),fetchStatus:"idle"}),n.abort()},onFail:(U,Q)=>{Xr(this,rc,Nu).call(this,{type:"failed",failureCount:U,error:Q})},onPause:()=>{Xr(this,rc,Nu).call(this,{type:"pause"})},onContinue:()=>{Xr(this,rc,Nu).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const U=await je(this,Es).start();if(U===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(U),(O=(w=je(this,xl).config).onSuccess)==null||O.call(w,U,this),(E=(A=je(this,xl).config).onSettled)==null||E.call(A,U,this.state.error,this),U}catch(U){if(U instanceof jA){if(U.silent)return je(this,Es).promise;if(U.revert){if(this.state.data===void 0)throw U;return this.state.data}}throw Xr(this,rc,Nu).call(this,{type:"error",error:U}),(R=($=je(this,xl).config).onError)==null||R.call($,U,this),(L=(F=je(this,xl).config).onSettled)==null||L.call(F,this.state.data,U,this),U}finally{this.scheduleGc()}}},yp=new WeakMap,xy=new WeakMap,xl=new WeakMap,xp=new WeakMap,Es=new WeakMap,Xb=new WeakMap,vp=new WeakMap,rc=new WeakSet,Nu=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...F7(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...V4(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return tr(this,xy,e.manual?i:void 0),i;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),hs.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),je(this,xl).notify({query:this,type:"updated",action:e})})},n$);function F7(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:D7(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function V4(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function W4(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var sa,dn,Kb,Io,bp,vy,qu,wd,Zb,by,_y,_p,wp,Sd,wy,Ln,sv,AA,EA,zA,MA,IA,DA,RA,B7,i$,Cxe=(i$=class extends g0{constructor(e,r){super();wr(this,Ln);wr(this,sa);wr(this,dn);wr(this,Kb);wr(this,Io);wr(this,bp);wr(this,vy);wr(this,qu);wr(this,wd);wr(this,Zb);wr(this,by);wr(this,_y);wr(this,_p);wr(this,wp);wr(this,Sd);wr(this,wy,new Set);this.options=r,tr(this,sa,e),tr(this,wd,null),tr(this,qu,PA()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(je(this,dn).addObserver(this),U4(je(this,dn),this.options)?Xr(this,Ln,sv).call(this):this.updateResult(),Xr(this,Ln,MA).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return LA(je(this,dn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return LA(je(this,dn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Xr(this,Ln,IA).call(this),Xr(this,Ln,DA).call(this),je(this,dn).removeObserver(this)}setOptions(e){const r=this.options,n=je(this,dn);if(this.options=je(this,sa).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof bl(this.options.enabled,je(this,dn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Xr(this,Ln,RA).call(this),je(this,dn).setOptions(this.options),r._defaulted&&!b2(this.options,r)&&je(this,sa).getQueryCache().notify({type:"observerOptionsUpdated",query:je(this,dn),observer:this});const i=this.hasListeners();i&&q4(je(this,dn),n,this.options,r)&&Xr(this,Ln,sv).call(this),this.updateResult(),i&&(je(this,dn)!==n||bl(this.options.enabled,je(this,dn))!==bl(r.enabled,je(this,dn))||$d(this.options.staleTime,je(this,dn))!==$d(r.staleTime,je(this,dn)))&&Xr(this,Ln,AA).call(this);const s=Xr(this,Ln,EA).call(this);i&&(je(this,dn)!==n||bl(this.options.enabled,je(this,dn))!==bl(r.enabled,je(this,dn))||s!==je(this,Sd))&&Xr(this,Ln,zA).call(this,s)}getOptimisticResult(e){const r=je(this,sa).getQueryCache().build(je(this,sa),e),n=this.createResult(r,e);return Oxe(this,n)&&(tr(this,Io,n),tr(this,vy,this.options),tr(this,bp,je(this,dn).state)),n}getCurrentResult(){return je(this,Io)}trackResult(e,r){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&je(this,qu).status==="pending"&&je(this,qu).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){je(this,wy).add(e)}getCurrentQuery(){return je(this,dn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=je(this,sa).defaultQueryOptions(e),n=je(this,sa).getQueryCache().build(je(this,sa),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Xr(this,Ln,sv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),je(this,Io)))}createResult(e,r){var re;const n=je(this,dn),i=this.options,s=je(this,Io),a=je(this,bp),o=je(this,vy),m=e!==n?e.state:je(this,Kb),{state:y}=e;let b={...y},w=!1,O;if(r._optimisticResults){const he=this.hasListeners(),le=!he&&U4(e,r),Ze=he&&q4(e,n,r,i);(le||Ze)&&(b={...b,...F7(y.data,e.options)}),r._optimisticResults==="isRestoring"&&(b.fetchStatus="idle")}let{error:A,errorUpdatedAt:E,status:$}=b;O=b.data;let R=!1;if(r.placeholderData!==void 0&&O===void 0&&$==="pending"){let he;s!=null&&s.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(he=s.data,R=!0):he=typeof r.placeholderData=="function"?r.placeholderData((re=je(this,_y))==null?void 0:re.state.data,je(this,_y)):r.placeholderData,he!==void 0&&($="success",O=OA(s==null?void 0:s.data,he,r),w=!0)}if(r.select&&O!==void 0&&!R)if(s&&O===(a==null?void 0:a.data)&&r.select===je(this,Zb))O=je(this,by);else try{tr(this,Zb,r.select),O=r.select(O),O=OA(s==null?void 0:s.data,O,r),tr(this,by,O),tr(this,wd,null)}catch(he){tr(this,wd,he)}je(this,wd)&&(A=je(this,wd),O=je(this,by),E=Date.now(),$="error");const F=b.fetchStatus==="fetching",L=$==="pending",U=$==="error",Q=L&&F,Y=O!==void 0,J={status:$,fetchStatus:b.fetchStatus,isPending:L,isSuccess:$==="success",isError:U,isInitialLoading:Q,isLoading:Q,data:O,dataUpdatedAt:b.dataUpdatedAt,error:A,errorUpdatedAt:E,failureCount:b.fetchFailureCount,failureReason:b.fetchFailureReason,errorUpdateCount:b.errorUpdateCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>m.dataUpdateCount||b.errorUpdateCount>m.errorUpdateCount,isFetching:F,isRefetching:F&&!L,isLoadingError:U&&!Y,isPaused:b.fetchStatus==="paused",isPlaceholderData:w,isRefetchError:U&&Y,isStale:bI(e,r),refetch:this.refetch,promise:je(this,qu),isEnabled:bl(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const he=J.data!==void 0,le=J.status==="error"&&!he,Ze=et=>{le?et.reject(J.error):he&&et.resolve(J.data)},Ee=()=>{const et=tr(this,qu,J.promise=PA());Ze(et)},qe=je(this,qu);switch(qe.status){case"pending":e.queryHash===n.queryHash&&Ze(qe);break;case"fulfilled":(le||J.data!==qe.value)&&Ee();break;case"rejected":(!le||J.error!==qe.reason)&&Ee();break}}return J}updateResult(){const e=je(this,Io),r=this.createResult(je(this,dn),this.options);if(tr(this,bp,je(this,dn).state),tr(this,vy,this.options),je(this,bp).data!==void 0&&tr(this,_y,je(this,dn)),b2(r,e))return;tr(this,Io,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!je(this,wy).size)return!0;const a=new Set(s??je(this,wy));return this.options.throwOnError&&a.add("error"),Object.keys(je(this,Io)).some(o=>{const d=o;return je(this,Io)[d]!==e[d]&&a.has(d)})};Xr(this,Ln,B7).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Xr(this,Ln,MA).call(this)}},sa=new WeakMap,dn=new WeakMap,Kb=new WeakMap,Io=new WeakMap,bp=new WeakMap,vy=new WeakMap,qu=new WeakMap,wd=new WeakMap,Zb=new WeakMap,by=new WeakMap,_y=new WeakMap,_p=new WeakMap,wp=new WeakMap,Sd=new WeakMap,wy=new WeakMap,Ln=new WeakSet,sv=function(e){Xr(this,Ln,RA).call(this);let r=je(this,dn).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(Lo)),r},AA=function(){Xr(this,Ln,IA).call(this);const e=$d(this.options.staleTime,je(this,dn));if(Yp||je(this,Io).isStale||!CA(e))return;const n=z7(je(this,Io).dataUpdatedAt,e)+1;tr(this,_p,hp.setTimeout(()=>{je(this,Io).isStale||this.updateResult()},n))},EA=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(je(this,dn)):this.options.refetchInterval)??!1},zA=function(e){Xr(this,Ln,DA).call(this),tr(this,Sd,e),!(Yp||bl(this.options.enabled,je(this,dn))===!1||!CA(je(this,Sd))||je(this,Sd)===0)&&tr(this,wp,hp.setInterval(()=>{(this.options.refetchIntervalInBackground||vI.isFocused())&&Xr(this,Ln,sv).call(this)},je(this,Sd)))},MA=function(){Xr(this,Ln,AA).call(this),Xr(this,Ln,zA).call(this,Xr(this,Ln,EA).call(this))},IA=function(){je(this,_p)&&(hp.clearTimeout(je(this,_p)),tr(this,_p,void 0))},DA=function(){je(this,wp)&&(hp.clearInterval(je(this,wp)),tr(this,wp,void 0))},RA=function(){const e=je(this,sa).getQueryCache().build(je(this,sa),this.options);if(e===je(this,dn))return;const r=je(this,dn);tr(this,dn,e),tr(this,Kb,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},B7=function(e){hs.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(je(this,Io))}),je(this,sa).getQueryCache().notify({query:je(this,dn),type:"observerResultsUpdated"})})},i$);function Txe(t,e){return bl(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function U4(t,e){return Txe(t,e)||t.state.data!==void 0&&LA(t,e,e.refetchOnMount)}function LA(t,e,r){if(bl(e.enabled,t)!==!1&&$d(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&bI(t,e)}return!1}function q4(t,e,r,n){return(t!==e||bl(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&bI(t,r)}function bI(t,e){return bl(e.enabled,t)!==!1&&t.isStaleByTime($d(e.staleTime,t))}function Oxe(t,e){return!b2(t.getCurrentResult(),e)}function Q4(t){return{onFetch:(e,r)=>{var y,b,w,O,A;const n=e.options,i=(w=(b=(y=e.fetchOptions)==null?void 0:y.meta)==null?void 0:b.fetchMore)==null?void 0:w.direction,s=((O=e.state.data)==null?void 0:O.pages)||[],a=((A=e.state.data)==null?void 0:A.pageParams)||[];let o={pages:[],pageParams:[]},d=0;const m=async()=>{let E=!1;const $=L=>{xxe(L,()=>e.signal,()=>E=!0)},R=I7(e.options,e.fetchOptions),F=async(L,U,Q)=>{if(E)return Promise.reject();if(U==null&&L.pages.length)return Promise.resolve(L);const Z=(()=>{const le={client:e.client,queryKey:e.queryKey,pageParam:U,direction:Q?"backward":"forward",meta:e.options.meta};return $(le),le})(),J=await R(Z),{maxPages:re}=e.options,he=Q?yxe:gxe;return{pages:he(L.pages,J,re),pageParams:he(L.pageParams,U,re)}};if(i&&s.length){const L=i==="backward",U=L?Pxe:H4,Q={pages:s,pageParams:a},Y=U(n,Q);o=await F(Q,Y,L)}else{const L=t??s.length;do{const U=d===0?a[0]??n.initialPageParam:H4(n,o);if(d>0&&U==null)break;o=await F(o,U),d++}while(d<L)}return o};e.options.persister?e.fetchFn=()=>{var E,$;return($=(E=e.options).persister)==null?void 0:$.call(E,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=m}}}function H4(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function Pxe(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Yb,Uc,yo,Sp,qc,ld,s$,jxe=(s$=class extends L7{constructor(e){super();wr(this,qc);wr(this,Yb);wr(this,Uc);wr(this,yo);wr(this,Sp);tr(this,Yb,e.client),this.mutationId=e.mutationId,tr(this,yo,e.mutationCache),tr(this,Uc,[]),this.state=e.state||$7(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){je(this,Uc).includes(e)||(je(this,Uc).push(e),this.clearGcTimeout(),je(this,yo).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){tr(this,Uc,je(this,Uc).filter(r=>r!==e)),this.scheduleGc(),je(this,yo).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){je(this,Uc).length||(this.state.status==="pending"?this.scheduleGc():je(this,yo).remove(this))}continue(){var e;return((e=je(this,Sp))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,o,d,m,y,b,w,O,A,E,$,R,F,L,U,Q,Y,Z;const r=()=>{Xr(this,qc,ld).call(this,{type:"continue"})},n={client:je(this,Yb),meta:this.options.meta,mutationKey:this.options.mutationKey};tr(this,Sp,R7({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(J,re)=>{Xr(this,qc,ld).call(this,{type:"failed",failureCount:J,error:re})},onPause:()=>{Xr(this,qc,ld).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>je(this,yo).canRun(this)}));const i=this.state.status==="pending",s=!je(this,Sp).canStart();try{if(i)r();else{Xr(this,qc,ld).call(this,{type:"pending",variables:e,isPaused:s}),je(this,yo).config.onMutate&&await je(this,yo).config.onMutate(e,this,n);const re=await((o=(a=this.options).onMutate)==null?void 0:o.call(a,e,n));re!==this.state.context&&Xr(this,qc,ld).call(this,{type:"pending",context:re,variables:e,isPaused:s})}const J=await je(this,Sp).start();return await((m=(d=je(this,yo).config).onSuccess)==null?void 0:m.call(d,J,e,this.state.context,this,n)),await((b=(y=this.options).onSuccess)==null?void 0:b.call(y,J,e,this.state.context,n)),await((O=(w=je(this,yo).config).onSettled)==null?void 0:O.call(w,J,null,this.state.variables,this.state.context,this,n)),await((E=(A=this.options).onSettled)==null?void 0:E.call(A,J,null,e,this.state.context,n)),Xr(this,qc,ld).call(this,{type:"success",data:J}),J}catch(J){try{await((R=($=je(this,yo).config).onError)==null?void 0:R.call($,J,e,this.state.context,this,n))}catch(re){Promise.reject(re)}try{await((L=(F=this.options).onError)==null?void 0:L.call(F,J,e,this.state.context,n))}catch(re){Promise.reject(re)}try{await((Q=(U=je(this,yo).config).onSettled)==null?void 0:Q.call(U,void 0,J,this.state.variables,this.state.context,this,n))}catch(re){Promise.reject(re)}try{await((Z=(Y=this.options).onSettled)==null?void 0:Z.call(Y,void 0,J,e,this.state.context,n))}catch(re){Promise.reject(re)}throw Xr(this,qc,ld).call(this,{type:"error",error:J}),J}finally{je(this,yo).runNext(this)}}},Yb=new WeakMap,Uc=new WeakMap,yo=new WeakMap,Sp=new WeakMap,qc=new WeakSet,ld=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),hs.batch(()=>{je(this,Uc).forEach(n=>{n.onMutationUpdate(e)}),je(this,yo).notify({mutation:this,type:"updated",action:e})})},s$);function $7(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qu,nc,Jb,o$,Axe=(o$=class extends g0{constructor(e={}){super();wr(this,Qu);wr(this,nc);wr(this,Jb);this.config=e,tr(this,Qu,new Set),tr(this,nc,new Map),tr(this,Jb,0)}build(e,r,n){const i=new jxe({client:e,mutationCache:this,mutationId:++M_(this,Jb)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){je(this,Qu).add(e);const r=mw(e);if(typeof r=="string"){const n=je(this,nc).get(r);n?n.push(e):je(this,nc).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(je(this,Qu).delete(e)){const r=mw(e);if(typeof r=="string"){const n=je(this,nc).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&je(this,nc).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=mw(e);if(typeof r=="string"){const n=je(this,nc).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=mw(e);if(typeof r=="string"){const i=(n=je(this,nc).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){hs.batch(()=>{je(this,Qu).forEach(e=>{this.notify({type:"removed",mutation:e})}),je(this,Qu).clear(),je(this,nc).clear()})}getAll(){return Array.from(je(this,Qu))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>B4(r,n))}findAll(e={}){return this.getAll().filter(r=>B4(e,r))}notify(e){hs.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return hs.batch(()=>Promise.all(e.map(r=>r.continue().catch(Lo))))}},Qu=new WeakMap,nc=new WeakMap,Jb=new WeakMap,o$);function mw(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Hu,kd,oa,Gu,hh,vS,FA,a$,Exe=(a$=class extends g0{constructor(r,n){super();wr(this,hh);wr(this,Hu);wr(this,kd);wr(this,oa);wr(this,Gu);tr(this,Hu,r),this.setOptions(n),this.bindMethods(),Xr(this,hh,vS).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var i;const n=this.options;this.options=je(this,Hu).defaultMutationOptions(r),b2(this.options,n)||je(this,Hu).getMutationCache().notify({type:"observerOptionsUpdated",mutation:je(this,oa),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Jp(n.mutationKey)!==Jp(this.options.mutationKey)?this.reset():((i=je(this,oa))==null?void 0:i.state.status)==="pending"&&je(this,oa).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=je(this,oa))==null||r.removeObserver(this)}onMutationUpdate(r){Xr(this,hh,vS).call(this),Xr(this,hh,FA).call(this,r)}getCurrentResult(){return je(this,kd)}reset(){var r;(r=je(this,oa))==null||r.removeObserver(this),tr(this,oa,void 0),Xr(this,hh,vS).call(this),Xr(this,hh,FA).call(this)}mutate(r,n){var i;return tr(this,Gu,n),(i=je(this,oa))==null||i.removeObserver(this),tr(this,oa,je(this,Hu).getMutationCache().build(je(this,Hu),this.options)),je(this,oa).addObserver(this),je(this,oa).execute(r)}},Hu=new WeakMap,kd=new WeakMap,oa=new WeakMap,Gu=new WeakMap,hh=new WeakSet,vS=function(){var n;const r=((n=je(this,oa))==null?void 0:n.state)??$7();tr(this,kd,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},FA=function(r){hs.batch(()=>{var n,i,s,a,o,d,m,y;if(je(this,Gu)&&this.hasListeners()){const b=je(this,kd).variables,w=je(this,kd).context,O={client:je(this,Hu),meta:this.options.meta,mutationKey:this.options.mutationKey};if((r==null?void 0:r.type)==="success"){try{(i=(n=je(this,Gu)).onSuccess)==null||i.call(n,r.data,b,w,O)}catch(A){Promise.reject(A)}try{(a=(s=je(this,Gu)).onSettled)==null||a.call(s,r.data,null,b,w,O)}catch(A){Promise.reject(A)}}else if((r==null?void 0:r.type)==="error"){try{(d=(o=je(this,Gu)).onError)==null||d.call(o,r.error,b,w,O)}catch(A){Promise.reject(A)}try{(y=(m=je(this,Gu)).onSettled)==null||y.call(m,void 0,r.error,b,w,O)}catch(A){Promise.reject(A)}}}this.listeners.forEach(b=>{b(je(this,kd))})})},a$),Qc,l$,zxe=(l$=class extends g0{constructor(e={}){super();wr(this,Qc);this.config=e,tr(this,Qc,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??gI(i,r);let a=this.get(s);return a||(a=new kxe({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){je(this,Qc).has(e.queryHash)||(je(this,Qc).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=je(this,Qc).get(e.queryHash);r&&(e.destroy(),r===e&&je(this,Qc).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){hs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return je(this,Qc).get(e)}getAll(){return[...je(this,Qc).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>F4(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>F4(e,n)):r}notify(e){hs.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){hs.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){hs.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Qc=new WeakMap,l$),Ei,Cd,Td,Sy,ky,Od,Cy,Ty,c$,Mxe=(c$=class{constructor(t={}){wr(this,Ei);wr(this,Cd);wr(this,Td);wr(this,Sy);wr(this,ky);wr(this,Od);wr(this,Cy);wr(this,Ty);tr(this,Ei,t.queryCache||new zxe),tr(this,Cd,t.mutationCache||new Axe),tr(this,Td,t.defaultOptions||{}),tr(this,Sy,new Map),tr(this,ky,new Map),tr(this,Od,0)}mount(){M_(this,Od)._++,je(this,Od)===1&&(tr(this,Cy,vI.subscribe(async t=>{t&&(await this.resumePausedMutations(),je(this,Ei).onFocus())})),tr(this,Ty,_2.subscribe(async t=>{t&&(await this.resumePausedMutations(),je(this,Ei).onOnline())})))}unmount(){var t,e;M_(this,Od)._--,je(this,Od)===0&&((t=je(this,Cy))==null||t.call(this),tr(this,Cy,void 0),(e=je(this,Ty))==null||e.call(this),tr(this,Ty,void 0))}isFetching(t){return je(this,Ei).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return je(this,Cd).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=je(this,Ei).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=je(this,Ei).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime($d(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return je(this,Ei).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=je(this,Ei).get(n.queryHash),s=i==null?void 0:i.state.data,a=fxe(e,s);if(a!==void 0)return je(this,Ei).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return hs.batch(()=>je(this,Ei).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=je(this,Ei).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=je(this,Ei);hs.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=je(this,Ei);return hs.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=hs.batch(()=>je(this,Ei).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(Lo).catch(Lo)}invalidateQueries(t,e={}){return hs.batch(()=>(je(this,Ei).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=hs.batch(()=>je(this,Ei).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(Lo)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(Lo)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=je(this,Ei).build(this,e);return r.isStaleByTime($d(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Lo).catch(Lo)}fetchInfiniteQuery(t){return t.behavior=Q4(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Lo).catch(Lo)}ensureInfiniteQueryData(t){return t.behavior=Q4(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return _2.isOnline()?je(this,Cd).resumePausedMutations():Promise.resolve()}getQueryCache(){return je(this,Ei)}getMutationCache(){return je(this,Cd)}getDefaultOptions(){return je(this,Td)}setDefaultOptions(t){tr(this,Td,t)}setQueryDefaults(t,e){je(this,Sy).set(Jp(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...je(this,Sy).values()],r={};return e.forEach(n=>{Ob(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){je(this,ky).set(Jp(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...je(this,ky).values()],r={};return e.forEach(n=>{Ob(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...je(this,Td).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=gI(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===yI&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...je(this,Td).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){je(this,Ei).clear(),je(this,Cd).clear()}},Ei=new WeakMap,Cd=new WeakMap,Td=new WeakMap,Sy=new WeakMap,ky=new WeakMap,Od=new WeakMap,Cy=new WeakMap,Ty=new WeakMap,c$),N7=I.createContext(void 0),Pa=t=>{const e=I.useContext(N7);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Ixe=({client:t,children:e})=>(I.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),u.jsx(N7.Provider,{value:t,children:e})),V7=I.createContext(!1),Dxe=()=>I.useContext(V7);V7.Provider;function Rxe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Lxe=I.createContext(Rxe()),Fxe=()=>I.useContext(Lxe),Bxe=(t,e,r)=>{const n=r!=null&&r.state.error&&typeof t.throwOnError=="function"?xI(t.throwOnError,[r.state.error,r]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(e.isReset()||(t.retryOnMount=!1))},$xe=t=>{I.useEffect(()=>{t.clearReset()},[t])},Nxe=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(i&&t.data===void 0||xI(r,[t.error,n])),Vxe=t=>{if(t.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Wxe=(t,e)=>t.isLoading&&t.isFetching&&!e,Uxe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,G4=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function qxe(t,e,r){var w,O,A,E;const n=Dxe(),i=Fxe(),s=Pa(),a=s.defaultQueryOptions(t);(O=(w=s.getDefaultOptions().queries)==null?void 0:w._experimental_beforeQuery)==null||O.call(w,a);const o=s.getQueryCache().get(a.queryHash);a._optimisticResults=n?"isRestoring":"optimistic",Vxe(a),Bxe(a,i,o),$xe(i);const d=!s.getQueryCache().get(a.queryHash),[m]=I.useState(()=>new e(s,a)),y=m.getOptimisticResult(a),b=!n&&t.subscribed!==!1;if(I.useSyncExternalStore(I.useCallback($=>{const R=b?m.subscribe(hs.batchCalls($)):Lo;return m.updateResult(),R},[m,b]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),I.useEffect(()=>{m.setOptions(a)},[a,m]),Uxe(a,y))throw G4(a,m,i);if(Nxe({result:y,errorResetBoundary:i,throwOnError:a.throwOnError,query:o,suspense:a.suspense}))throw y.error;if((E=(A=s.getDefaultOptions().queries)==null?void 0:A._experimental_afterQuery)==null||E.call(A,a,y),a.experimental_prefetchInRender&&!Yp&&Wxe(y,n)){const $=d?G4(a,m,i):o==null?void 0:o.promise;$==null||$.catch(Lo).finally(()=>{m.updateResult()})}return a.notifyOnChangeProps?y:m.trackResult(y)}function Qr(t,e){return qxe(t,Cxe)}function Jc(t,e){const r=Pa(),[n]=I.useState(()=>new Exe(r,t));I.useEffect(()=>{n.setOptions(t)},[n,t]);const i=I.useSyncExternalStore(I.useCallback(a=>n.subscribe(hs.batchCalls(a)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=I.useCallback((a,o)=>{n.mutate(a,o).catch(Lo)},[n]);if(i.error&&xI(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}var W7={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},X4=Mi.createContext&&Mi.createContext(W7),Qxe=["attr","size","title"];function Hxe(t,e){if(t==null)return{};var r=Gxe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Gxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function w2(){return w2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},w2.apply(this,arguments)}function K4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function S2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?K4(Object(r),!0).forEach(function(n){Xxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xxe(t,e,r){return e=Kxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kxe(t){var e=Zxe(t,"string");return typeof e=="symbol"?e:e+""}function Zxe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U7(t){return t&&t.map((e,r)=>Mi.createElement(e.tag,S2({key:r},e.attr),U7(e.child)))}function or(t){return e=>Mi.createElement(Yxe,w2({attr:S2({},t.attr)},e),U7(t.child))}function Yxe(t){var e=r=>{var{attr:n,size:i,title:s}=t,a=Hxe(t,Qxe),o=i||r.size||"1em",d;return r.className&&(d=r.className),t.className&&(d=(d?d+" ":"")+t.className),Mi.createElement("svg",w2({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:d,style:S2(S2({color:t.color||r.color},r.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&Mi.createElement("title",null,s),t.children)};return X4!==void 0?Mi.createElement(X4.Consumer,null,r=>e(r)):e(W7)}function _I(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(t)}function Z4(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function q7(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"},child:[]},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(t)}function Jxe(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"polyline",attr:{points:"19 12 12 19 5 12"},child:[]}]})(t)}function eve(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function ov(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(t)}function tve(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(t)}function wI(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function Y4(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(t)}function em(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(t)}function SI(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function Nl(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function rve(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(t)}function Gy(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function nve(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]}]})(t)}function kI(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function ive(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"},child:[]}]})(t)}function Pb(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 18 22 12 16 6"},child:[]},{tag:"polyline",attr:{points:"8 6 2 12 8 18"},child:[]}]})(t)}function Q7(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"},child:[]}]})(t)}function J4(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(t)}function sve(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"},child:[]},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"},child:[]},{tag:"line",attr:{x1:"9",y1:"1",x2:"9",y2:"4"},child:[]},{tag:"line",attr:{x1:"15",y1:"1",x2:"15",y2:"4"},child:[]},{tag:"line",attr:{x1:"9",y1:"20",x2:"9",y2:"23"},child:[]},{tag:"line",attr:{x1:"15",y1:"20",x2:"15",y2:"23"},child:[]},{tag:"line",attr:{x1:"20",y1:"9",x2:"23",y2:"9"},child:[]},{tag:"line",attr:{x1:"20",y1:"14",x2:"23",y2:"14"},child:[]},{tag:"line",attr:{x1:"1",y1:"9",x2:"4",y2:"9"},child:[]},{tag:"line",attr:{x1:"1",y1:"14",x2:"4",y2:"14"},child:[]}]})(t)}function Kn(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},child:[]}]})(t)}function Iv(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(t)}function Bo(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"},child:[]}]})(t)}function ove(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function gc(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(t)}function ave(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},child:[]},{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"},child:[]}]})(t)}function Jd(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(t)}function wo(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function H7(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(t)}function G7(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"},child:[]},{tag:"polyline",attr:{points:"13 2 13 9 20 9"},child:[]}]})(t)}function lve(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function uh(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"},child:[]}]})(t)}function Rl(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(t)}function ef(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function X7(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"12",x2:"2",y2:"12"},child:[]},{tag:"path",attr:{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"},child:[]},{tag:"line",attr:{x1:"6",y1:"16",x2:"6.01",y2:"16"},child:[]},{tag:"line",attr:{x1:"10",y1:"16",x2:"10.01",y2:"16"},child:[]}]})(t)}function K7(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(t)}function cve(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function mu(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(t)}function O1(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(t)}function Yi(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"},child:[]},{tag:"polyline",attr:{points:"2 17 12 22 22 17"},child:[]},{tag:"polyline",attr:{points:"2 12 12 17 22 12"},child:[]}]})(t)}function uve(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},child:[]},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},child:[]}]})(t)}function hve(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}function BA(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function yc(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"18"},child:[]},{tag:"line",attr:{x1:"16",y1:"6",x2:"16",y2:"22"},child:[]}]})(t)}function dve(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"polyline",attr:{points:"9 21 3 21 3 15"},child:[]},{tag:"line",attr:{x1:"21",y1:"3",x2:"14",y2:"10"},child:[]},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"},child:[]}]})(t)}function Z7(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function fve(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function eF(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(t)}function CI(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"},child:[]}]})(t)}function pve(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"16"},child:[]},{tag:"line",attr:{x1:"8",y1:"12",x2:"16",y2:"12"},child:[]}]})(t)}function fs(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function mve(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"1 4 1 10 7 10"},child:[]},{tag:"polyline",attr:{points:"23 20 23 14 17 14"},child:[]},{tag:"path",attr:{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"},child:[]}]})(t)}function pf(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function bS(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(t)}function jb(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function gu(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"8",rx:"2",ry:"2"},child:[]},{tag:"rect",attr:{x:"2",y:"14",width:"20",height:"8",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"6.01",y2:"6"},child:[]},{tag:"line",attr:{x1:"6",y1:"18",x2:"6.01",y2:"18"},child:[]}]})(t)}function P1(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function Y7(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]}]})(t)}function gve(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(t)}function yve(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"},child:[]}]})(t)}function tm(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"},child:[]}]})(t)}function Nd(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function Dv(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]},{tag:"line",attr:{x1:"12",y1:"12",x2:"12",y2:"21"},child:[]},{tag:"path",attr:{d:"M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"},child:[]},{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]}]})(t)}function xu(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(t)}function tF(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function rF(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function tC(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(t)}function tf(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}function _S(t){return or({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(t)}const xve={},nF=t=>{let e;const r=new Set,n=(y,b)=>{const w=typeof y=="function"?y(e):y;if(!Object.is(w,e)){const O=e;e=b??(typeof w!="object"||w===null)?w:Object.assign({},e,w),r.forEach(A=>A(e,O))}},i=()=>e,d={setState:n,getState:i,getInitialState:()=>m,subscribe:y=>(r.add(y),()=>r.delete(y)),destroy:()=>{(xve?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},m=e=t(n,i,d);return d},vve=t=>t?nF(t):nF;var J7={exports:{}},eU={},tU={exports:{}},rU={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy=I;function bve(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _ve=typeof Object.is=="function"?Object.is:bve,wve=Xy.useState,Sve=Xy.useEffect,kve=Xy.useLayoutEffect,Cve=Xy.useDebugValue;function Tve(t,e){var r=e(),n=wve({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return kve(function(){i.value=r,i.getSnapshot=e,HO(i)&&s({inst:i})},[t,r,e]),Sve(function(){return HO(i)&&s({inst:i}),t(function(){HO(i)&&s({inst:i})})},[t]),Cve(r),r}function HO(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!_ve(t,r)}catch{return!0}}function Ove(t,e){return e()}var Pve=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ove:Tve;rU.useSyncExternalStore=Xy.useSyncExternalStore!==void 0?Xy.useSyncExternalStore:Pve;tU.exports=rU;var jve=tU.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rC=I,Ave=jve;function Eve(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zve=typeof Object.is=="function"?Object.is:Eve,Mve=Ave.useSyncExternalStore,Ive=rC.useRef,Dve=rC.useEffect,Rve=rC.useMemo,Lve=rC.useDebugValue;eU.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=Ive(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=Rve(function(){function d(O){if(!m){if(m=!0,y=O,O=n(O),i!==void 0&&a.hasValue){var A=a.value;if(i(A,O))return b=A}return b=O}if(A=b,zve(y,O))return A;var E=n(O);return i!==void 0&&i(A,E)?(y=O,A):(y=O,b=E)}var m=!1,y,b,w=r===void 0?null:r;return[function(){return d(e())},w===null?void 0:function(){return d(w())}]},[e,r,n,i]);var o=Mve(t,s[0],s[1]);return Dve(function(){a.hasValue=!0,a.value=o},[o]),Lve(o),o};J7.exports=eU;var Fve=J7.exports;const Bve=e1(Fve),nU={},{useDebugValue:$ve}=Mi,{useSyncExternalStoreWithSelector:Nve}=Bve;let iF=!1;const Vve=t=>t;function Wve(t,e=Vve,r){(nU?"production":void 0)!=="production"&&r&&!iF&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),iF=!0);const n=Nve(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return $ve(n),n}const sF=t=>{(nU?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?vve(t):t,r=(n,i)=>Wve(e,n,i);return Object.assign(r,e),r},TI=t=>t?sF(t):sF,Uve=()=>{try{const t=localStorage.getItem("cloudbench-settings");if(t)return JSON.parse(t)}catch{}return{showHiddenPGServices:!1}},qve=t=>{try{localStorage.setItem("cloudbench-settings",JSON.stringify(t))}catch{}},bt=TI(t=>({activeDialog:null,dialogData:null,activePreview:null,previewMode:"2d",statusMessage:"Ready",errorMessage:null,successMessage:null,isLoading:!1,sidebarWidth:420,settings:Uve(),openDialog:(e,r)=>{t({activeDialog:e,dialogData:r??null})},closeDialog:()=>{t({activeDialog:null,dialogData:null})},setPreview:e=>{t({activePreview:e})},setPreviewMode:e=>{t({previewMode:e})},setStatus:e=>{t({statusMessage:e})},setError:e=>{t({errorMessage:e}),e&&setTimeout(()=>{t(r=>r.errorMessage===e?{errorMessage:null}:r)},5e3)},setSuccess:e=>{t({successMessage:e}),e&&setTimeout(()=>{t(r=>r.successMessage===e?{successMessage:null}:r)},3e3)},setLoading:e=>{t({isLoading:e})},setSidebarWidth:e=>{t({sidebarWidth:Math.max(200,Math.min(600,e))})},clearMessages:()=>{t({errorMessage:null,successMessage:null})},setShowHiddenPGServices:e=>{t(r=>{const n={...r.settings,showHiddenPGServices:e};return qve(n),{settings:n}})}})),Xt="/api";async function cr(t){if(!t.ok){const e=await t.json().catch(()=>({error:"Unknown error"}));throw new Error(e.error||`HTTP ${t.status}`)}if(t.status!==204)return t.json()}async function Qve(){const t=await fetch(`${Xt}/connections`);return cr(t)}async function Hve(t){const e=await fetch(`${Xt}/connections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return cr(e)}async function Gve(t,e){const r=await fetch(`${Xt}/connections/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return cr(r)}async function Xve(t){const e=await fetch(`${Xt}/connections/${t}`,{method:"DELETE"});return cr(e)}async function Kve(t){const e=await fetch(`${Xt}/connections/${t}/test`,{method:"POST"});return cr(e)}async function Zve(t){const e=await fetch(`${Xt}/connections/${t}/info`);return cr(e)}async function iU(t){const e=await fetch(`${Xt}/workspaces/${t}`);return cr(e)}async function sU(t,e){const r=await fetch(`${Xt}/workspaces/${t}/${e}`);return cr(r)}async function Yve(t,e){const r=await fetch(`${Xt}/workspaces/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return cr(r)}async function Jve(t,e,r){const n=await fetch(`${Xt}/workspaces/${t}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});return cr(n)}async function ebe(t,e,r=!1){const i=await fetch(`${Xt}/workspaces/${t}/${e}${r?"?recurse=true":""}`,{method:"DELETE"});return cr(i)}async function OI(t,e){const r=await fetch(`${Xt}/datastores/${t}/${e}`);return cr(r)}async function oU(t,e,r){const n=await fetch(`${Xt}/datastores/${t}/${e}/${r}`);return cr(n)}async function tbe(t,e,r,n=!1){const s=await fetch(`${Xt}/datastores/${t}/${e}/${r}${n?"?recurse=true":""}`,{method:"DELETE"});return cr(s)}async function aU(t,e,r){const n=await fetch(`${Xt}/datastores/${t}/${e}/${r}/available`);return(await cr(n)).available||[]}async function lU(t,e,r,n){const i=await fetch(`${Xt}/datastores/${t}/${e}/${r}/publish`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({featureTypes:n})});return cr(i)}async function PI(t,e){const r=await fetch(`${Xt}/coveragestores/${t}/${e}`);return cr(r)}async function cU(t,e,r){const n=await fetch(`${Xt}/coveragestores/${t}/${e}/${r}`);return cr(n)}async function rbe(t,e,r,n=!1){const s=await fetch(`${Xt}/coveragestores/${t}/${e}/${r}${n?"?recurse=true":""}`,{method:"DELETE"});return cr(s)}async function j1(t,e){const r=await fetch(`${Xt}/layers/${t}/${e}`);return cr(r)}async function uU(t,e,r){const n=await fetch(`${Xt}/layers/${t}/${e}/${r}`);return cr(n)}async function nbe(t,e,r){const n=await fetch(`${Xt}/layers/${t}/${e}/${r}`,{method:"DELETE"});return cr(n)}async function ibe(t,e,r){const n=await fetch(`${Xt}/layermetadata/${t}/${e}/${r}`);return cr(n)}async function sbe(t,e,r){const n=await fetch(`${Xt}/layers/${t}/${e}/${r}/count`);return(await cr(n)).count}async function obe(t,e,r,n){const i=await fetch(`${Xt}/layermetadata/${t}/${e}/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return cr(i)}async function jI(t,e){const r=await fetch(`${Xt}/styles/${t}/${e}`);return cr(r)}async function abe(t,e,r,n=!1){const s=await fetch(`${Xt}/styles/${t}/${e}/${r}${n?"?purge=true":""}`,{method:"DELETE"});return cr(s)}async function hU(t,e,r){const n=await fetch(`${Xt}/layerstyles/${t}/${e}/${r}`);return cr(n)}async function lbe(t,e,r,n,i){const s=await fetch(`${Xt}/layerstyles/${t}/${e}/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({defaultStyle:n,additionalStyles:i})});return cr(s)}async function dU(t,e,r){const n=await fetch(`${Xt}/styles/${t}/${e}/${r}`);return cr(n)}async function cbe(t,e,r,n,i="sld"){const s=await fetch(`${Xt}/styles/${t}/${e}/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:n,format:i})});return cr(s)}async function ube(t,e,r,n,i="sld"){const s=await fetch(`${Xt}/styles/${t}/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,content:n,format:i})});return cr(s)}async function fU(t,e){const r=await fetch(`${Xt}/layergroups/${t}/${e}`);return cr(r)}async function hbe(t,e,r){const n=await fetch(`${Xt}/layergroups/${t}/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});return cr(n)}async function pU(t,e,r){const n=await fetch(`${Xt}/layergroups/${t}/${e}/${r}`);return cr(n)}async function dbe(t,e,r,n){const i=await fetch(`${Xt}/layergroups/${t}/${e}/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return cr(i)}async function fbe(t,e,r){const n=await fetch(`${Xt}/layergroups/${t}/${e}/${r}`,{method:"DELETE"});return cr(n)}async function pbe(t,e,r){const n=await fetch(`${Xt}/featuretypes/${t}/${e}/${r}`);return cr(n)}async function mbe(t,e,r,n){const i=await fetch(`${Xt}/featuretypes/${t}/${e}/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n})});return cr(i)}async function gbe(t,e,r){const n=await fetch(`${Xt}/coverages/${t}/${e}/${r}`);return cr(n)}async function ybe(t,e,r,n){const i=new FormData;return i.append("file",r),new Promise((s,a)=>{const o=new XMLHttpRequest;o.upload.addEventListener("progress",d=>{if(d.lengthComputable&&n){const m=Math.round(d.loaded/d.total*100);n(m)}}),o.addEventListener("load",()=>{o.status>=200&&o.status<300?s(JSON.parse(o.responseText)):a(new Error(JSON.parse(o.responseText).error||"Upload failed"))}),o.addEventListener("error",()=>{a(new Error("Network error"))}),o.open("POST",`${Xt}/upload?connId=${encodeURIComponent(t)}&workspace=${encodeURIComponent(e)}`),o.send(i)})}async function el(t){const e=await fetch(`${Xt}/preview`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return cr(e)}async function xbe(t,e){const r=await fetch(`${Xt}/gwc/layers/${t}/${e}`);return cr(r)}async function vbe(t,e){const r=await fetch(`${Xt}/gwc/seed/${t}/${e}`);return cr(r)}async function bbe(t,e,r){const n=await fetch(`${Xt}/gwc/seed/${t}/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});return cr(n)}async function _be(t,e){const r=await fetch(`${Xt}/gwc/seed/${t}/${e}`,{method:"DELETE"});return cr(r)}async function wbe(t,e,r){const n=await fetch(`${Xt}/gwc/truncate/${t}/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r||{})});return cr(n)}async function Sbe(t){const e=await fetch(`${Xt}/settings/${t}`);return cr(e)}async function kbe(t,e){const r=await fetch(`${Xt}/settings/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return cr(r)}async function Cbe(){const t=await fetch(`${Xt}/sync/configs`);return cr(t)}async function Tbe(t){const e=await fetch(`${Xt}/sync/configs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return cr(e)}async function Obe(t){const e=await fetch(`${Xt}/sync/configs/${t}`,{method:"DELETE"});return cr(e)}async function Pbe(t){const e=await fetch(`${Xt}/sync/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return cr(e)}async function jbe(){const t=await fetch(`${Xt}/sync/status`);return cr(t)}async function Abe(t){const e=await fetch(`${Xt}/sync/stop/${t}`,{method:"POST"});return cr(e)}async function Ebe(){const t=await fetch(`${Xt}/sync/stop`,{method:"POST"});return cr(t)}async function zbe(){const t=await fetch(`${Xt}/dashboard`);return cr(t)}function mU(t,e,r,n){let i=`${Xt}/download/${t}/${e}/${r}`;n&&(i+=`/${n}`),window.open(i,"_blank")}function Mbe(t,e,r){const n=`${Xt}/download/${t}/shapefile/${e}/${r}`;window.open(n,"_blank")}function Ibe(t,e,r){const n=`${Xt}/download/${t}/geotiff/${e}/${r}`;window.open(n,"_blank")}function Dbe(t){const e=`${Xt}/download/logs/${t}`;window.open(e,"_blank")}async function Rbe(t,e){let r=`${Xt}/search?q=${encodeURIComponent(t)}`;const n=await fetch(r);return cr(n)}async function Lbe(){const t=await fetch(`${Xt}/search/suggestions`);return cr(t)}async function AI(){const t=await fetch(`${Xt}/pg/services`);return cr(t)}async function oF(t){const e=await fetch(`${Xt}/pg/services`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return cr(e)}async function Fbe(t){const e=await fetch(`${Xt}/pg/services/${encodeURIComponent(t)}`,{method:"DELETE"});return cr(e)}async function gU(t){const e=await fetch(`${Xt}/pg/services/${encodeURIComponent(t)}/test`,{method:"POST"});return cr(e)}async function yU(t){const e=await fetch(`${Xt}/pg/services/${encodeURIComponent(t)}/parse`,{method:"POST"});return cr(e)}async function Bbe(t,e){const r=await fetch(`${Xt}/pg/services/${encodeURIComponent(t)}/hide`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hidden:e})});return cr(r)}async function $be(t){const e=await fetch(`${Xt}/pg/services/${encodeURIComponent(t)}/stats`);return cr(e)}async function Nbe(){const t=await fetch(`${Xt}/pg/ogr2ogr/status`);return cr(t)}async function Vbe(t,e){const r=new FormData;return r.append("file",t),new Promise((n,i)=>{const s=new XMLHttpRequest;s.upload.addEventListener("progress",a=>{if(a.lengthComputable&&e){const o=Math.round(a.loaded/a.total*100);e(o)}}),s.addEventListener("load",()=>{s.status>=200&&s.status<300?n(JSON.parse(s.responseText)):i(new Error(JSON.parse(s.responseText).error||"Upload failed"))}),s.addEventListener("error",()=>{i(new Error("Network error"))}),s.open("POST",`${Xt}/pg/import/upload`),s.send(r)})}async function Wbe(t){const e=await fetch(`${Xt}/pg/detect-layers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:t})});return cr(e)}async function Ube(t){const e=await fetch(`${Xt}/pg/import`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return cr(e)}async function qbe(t){const e=await fetch(`${Xt}/pg/import/raster`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return cr(e)}async function Qbe(t){const e=await fetch(`${Xt}/pg/import/${t}`);return cr(e)}const Ks=TI(t=>({connections:[],pgServices:[],activeConnectionId:null,isLoading:!1,error:null,fetchConnections:async()=>{t({isLoading:!0,error:null});try{const e=await Qve(),r=e.find(n=>n.isActive);t({connections:e,activeConnectionId:(r==null?void 0:r.id)??null,isLoading:!1})}catch(e){t({error:e.message,isLoading:!1})}},addConnection:async e=>{t({isLoading:!0,error:null});try{const r=await Hve(e);return t(n=>({connections:[...n.connections,r],isLoading:!1})),r}catch(r){throw t({error:r.message,isLoading:!1}),r}},updateConnection:async(e,r)=>{t({isLoading:!0,error:null});try{const n=await Gve(e,r);t(i=>({connections:i.connections.map(s=>s.id===e?n:s),isLoading:!1}))}catch(n){throw t({error:n.message,isLoading:!1}),n}},removeConnection:async e=>{t({isLoading:!0,error:null});try{await Xve(e),t(r=>({connections:r.connections.filter(n=>n.id!==e),activeConnectionId:r.activeConnectionId===e?null:r.activeConnectionId,isLoading:!1}))}catch(r){throw t({error:r.message,isLoading:!1}),r}},setActiveConnection:e=>{t({activeConnectionId:e})},testConnection:async e=>{try{const r=await Kve(e);return{success:r.success,message:r.message}}catch(r){return{success:!1,message:r.message}}},clearError:()=>t({error:null}),refreshPGServices:async()=>{try{const e=await AI();t({pgServices:e})}catch(e){console.error("Failed to fetch PG services:",e)}}})),Er=TI((t,e)=>({expandedNodes:new Set,selectedNode:null,toggleNode:r=>{t(n=>{const i=new Set(n.expandedNodes);return i.has(r)?i.delete(r):i.add(r),{expandedNodes:i}})},expandNode:r=>{t(n=>{const i=new Set(n.expandedNodes);return i.add(r),{expandedNodes:i}})},collapseNode:r=>{t(n=>{const i=new Set(n.expandedNodes);return i.delete(r),{expandedNodes:i}})},selectNode:r=>{t({selectedNode:r})},isExpanded:r=>e().expandedNodes.has(r),clearSelection:()=>{t({selectedNode:null})},reset:()=>{t({expandedNodes:new Set,selectedNode:null})}}));function mf(t,e,r,n){const i=[t];return e&&i.push(e),r&&i.push(r),n&&i.push(n),i.join(":")}function Hbe({onSearchClick:t}){const e=dr("kartoza.700","gray.800"),r=bt(d=>d.openDialog),n=Ks(d=>d.fetchConnections),i=Er(d=>d.selectedNode),s=()=>{r("connection",{mode:"create"})},a=()=>{if(!(i!=null&&i.workspace)){bt.getState().setError("Select a workspace first");return}r("upload",{mode:"create"})},o=()=>{n(),bt.getState().setStatus("Refreshing...")};return u.jsx(ue,{bg:e,px:4,py:2,children:u.jsxs(Sr,{align:"center",children:[u.jsx(bn,{size:"md",color:"white",fontWeight:"bold",children:"Kartoza GeoServer Client"}),u.jsx(ue,{mx:8,flex:"1",maxW:"400px",onClick:t,cursor:"pointer",children:u.jsxs(aa,{size:"sm",children:[u.jsx(vl,{pointerEvents:"none",children:u.jsx(jb,{color:"gray.400"})}),u.jsx(Ar,{placeholder:"Search...",bg:"whiteAlpha.100",border:"1px solid",borderColor:"whiteAlpha.200",color:"white",_placeholder:{color:"whiteAlpha.500"},_hover:{borderColor:"whiteAlpha.400",bg:"whiteAlpha.200"},borderRadius:"md",readOnly:!0,cursor:"pointer"}),u.jsxs(Ce,{position:"absolute",right:2,top:"50%",transform:"translateY(-50%)",spacing:1,children:[u.jsx(Xc,{size:"xs",bg:"whiteAlpha.200",color:"whiteAlpha.700",borderColor:"whiteAlpha.300",children:""}),u.jsx(Xc,{size:"xs",bg:"whiteAlpha.200",color:"whiteAlpha.700",borderColor:"whiteAlpha.300",children:"K"})]})]})}),u.jsx(sl,{}),u.jsxs(Sr,{gap:2,children:[u.jsx($r,{label:"Add Connection",placement:"bottom",children:u.jsx(br,{"aria-label":"Add connection",icon:u.jsx(fs,{}),variant:"ghost",color:"white",_hover:{bg:"kartoza.600"},onClick:s})}),u.jsx($r,{label:"Upload Files",placement:"bottom",children:u.jsx(br,{"aria-label":"Upload files",icon:u.jsx(xu,{}),variant:"ghost",color:"white",_hover:{bg:"kartoza.600"},onClick:a})}),u.jsx($r,{label:"Refresh",placement:"bottom",children:u.jsx(br,{"aria-label":"Refresh",icon:u.jsx(pf,{}),variant:"ghost",color:"white",_hover:{bg:"kartoza.600"},onClick:o})}),u.jsxs(Kd,{children:[u.jsx(Zd,{as:br,"aria-label":"Settings",icon:u.jsx(P1,{}),variant:"ghost",color:"white",_hover:{bg:"kartoza.600"}}),u.jsxs(Yd,{children:[u.jsx(fa,{icon:u.jsx(mve,{}),onClick:()=>r("sync",{mode:"create"}),children:"Sync Server(s)"}),u.jsx(fa,{icon:u.jsx(K7,{}),children:"Help"}),u.jsx(fa,{icon:u.jsx(fs,{}),onClick:()=>r("workspace",{mode:"create"}),children:"New Workspace"}),u.jsx(fa,{icon:u.jsx(fs,{}),onClick:()=>r("datastore",{mode:"create"}),children:"New Data Store"}),u.jsx(fa,{icon:u.jsx(fs,{}),onClick:()=>r("coveragestore",{mode:"create"}),children:"New Coverage Store"})]})]})]})]})})}function Ky(t){return or({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M23.5594 14.7228a.5269.5269 0 0 0-.0563-.1191c-.139-.2632-.4768-.3418-1.0074-.2321-1.6533.3411-2.2935.1312-2.5256-.0191 1.342-2.0482 2.445-4.522 3.0411-6.8297.2714-1.0507.7982-3.5237.1222-4.7316a1.5641 1.5641 0 0 0-.1509-.235C21.6931.9086 19.8007.0248 17.5099.0005c-1.4947-.0158-2.7705.3461-3.1161.4794a9.449 9.449 0 0 0-.5159-.0816 8.044 8.044 0 0 0-1.3114-.1278c-1.1822-.0184-2.2038.2642-3.0498.8406-.8573-.3211-4.7888-1.645-7.2219.0788C.9359 2.1526.3086 3.8733.4302 6.3043c.0409.818.5069 3.334 1.2423 5.7436.4598 1.5065.9387 2.7019 1.4334 3.582.553.9942 1.1259 1.5933 1.7143 1.7895.4474.1491 1.1327.1441 1.8581-.7279.8012-.9635 1.5903-1.8258 1.9446-2.2069.4351.2355.9064.3625 1.39.3772a.0569.0569 0 0 0 .0004.0041 11.0312 11.0312 0 0 0-.2472.3054c-.3389.4302-.4094.5197-1.5002.7443-.3102.064-1.1344.2339-1.1464.8115-.0025.1224.0329.2309.0919.3268.2269.4231.9216.6097 1.015.6331 1.3345.3335 2.5044.092 3.3714-.6787-.017 2.231.0775 4.4174.3454 5.0874.2212.5529.7618 1.9045 2.4692 1.9043.2505 0 .5263-.0291.8296-.0941 1.7819-.3821 2.5557-1.1696 2.855-2.9059.1503-.8707.4016-2.8753.5388-4.1012.0169-.0703.0357-.1207.057-.1362.0007-.0005.0697-.0471.4272.0307a.3673.3673 0 0 0 .0443.0068l.2539.0223.0149.001c.8468.0384 1.9114-.1426 2.5312-.4308.6438-.2988 1.8057-1.0323 1.5951-1.6698zM2.371 11.8765c-.7435-2.4358-1.1779-4.8851-1.2123-5.5719-.1086-2.1714.4171-3.6829 1.5623-4.4927 1.8367-1.2986 4.8398-.5408 6.108-.13-.0032.0032-.0066.0061-.0098.0094-2.0238 2.044-1.9758 5.536-1.9708 5.7495-.0002.0823.0066.1989.0162.3593.0348.5873.0996 1.6804-.0735 2.9184-.1609 1.1504.1937 2.2764.9728 3.0892.0806.0841.1648.1631.2518.2374-.3468.3714-1.1004 1.1926-1.9025 2.1576-.5677.6825-.9597.5517-1.0886.5087-.3919-.1307-.813-.5871-1.2381-1.3223-.4796-.839-.9635-2.0317-1.4155-3.5126zm6.0072 5.0871c-.1711-.0428-.3271-.1132-.4322-.1772.0889-.0394.2374-.0902.4833-.1409 1.2833-.2641 1.4815-.4506 1.9143-1.0002.0992-.126.2116-.2687.3673-.4426a.3549.3549 0 0 0 .0737-.1298c.1708-.1513.2724-.1099.4369-.0417.156.0646.3078.26.3695.4752.0291.1016.0619.2945-.0452.4444-.9043 1.2658-2.2216 1.2494-3.1676 1.0128zm2.094-3.988-.0525.141c-.133.3566-.2567.6881-.3334 1.003-.6674-.0021-1.3168-.2872-1.8105-.8024-.6279-.6551-.9131-1.5664-.7825-2.5004.1828-1.3079.1153-2.4468.079-3.0586-.005-.0857-.0095-.1607-.0122-.2199.2957-.2621 1.6659-.9962 2.6429-.7724.4459.1022.7176.4057.8305.928.5846 2.7038.0774 3.8307-.3302 4.7363-.084.1866-.1633.3629-.2311.5454zm7.3637 4.5725c-.0169.1768-.0358.376-.0618.5959l-.146.4383a.3547.3547 0 0 0-.0182.1077c-.0059.4747-.054.6489-.115.8693-.0634.2292-.1353.4891-.1794 1.0575-.11 1.4143-.8782 2.2267-2.4172 2.5565-1.5155.3251-1.7843-.4968-2.0212-1.2217a6.5824 6.5824 0 0 0-.0769-.2266c-.2154-.5858-.1911-1.4119-.1574-2.5551.0165-.5612-.0249-1.9013-.3302-2.6462.0044-.2932.0106-.5909.019-.8918a.3529.3529 0 0 0-.0153-.1126 1.4927 1.4927 0 0 0-.0439-.208c-.1226-.4283-.4213-.7866-.7797-.9351-.1424-.059-.4038-.1672-.7178-.0869.067-.276.1831-.5875.309-.9249l.0529-.142c.0595-.16.134-.3257.213-.5012.4265-.9476 1.0106-2.2453.3766-5.1772-.2374-1.0981-1.0304-1.6343-2.2324-1.5098-.7207.0746-1.3799.3654-1.7088.5321a5.6716 5.6716 0 0 0-.1958.1041c.0918-1.1064.4386-3.1741 1.7357-4.4823a4.0306 4.0306 0 0 1 .3033-.276.3532.3532 0 0 0 .1447-.0644c.7524-.5706 1.6945-.8506 2.802-.8325.4091.0067.8017.0339 1.1742.081 1.939.3544 3.2439 1.4468 4.0359 2.3827.8143.9623 1.2552 1.9315 1.4312 2.4543-1.3232-.1346-2.2234.1268-2.6797.779-.9926 1.4189.543 4.1729 1.2811 5.4964.1353.2426.2522.4522.2889.5413.2403.5825.5515.9713.7787 1.2552.0696.087.1372.1714.1885.245-.4008.1155-1.1208.3825-1.0552 1.717-.0123.1563-.0423.4469-.0834.8148-.0461.2077-.0702.4603-.0994.7662zm.8905-1.6211c-.0405-.8316.2691-.9185.5967-1.0105a2.8566 2.8566 0 0 0 .135-.0406 1.202 1.202 0 0 0 .1342.103c.5703.3765 1.5823.4213 3.0068.1344-.2016.1769-.5189.3994-.9533.6011-.4098.1903-1.0957.333-1.7473.3636-.7197.0336-1.0859-.0807-1.1721-.151zm.5695-9.2712c-.0059.3508-.0542.6692-.1054 1.0017-.055.3576-.112.7274-.1264 1.1762-.0142.4368.0404.8909.0932 1.3301.1066.887.216 1.8003-.2075 2.7014a3.5272 3.5272 0 0 1-.1876-.3856c-.0527-.1276-.1669-.3326-.3251-.6162-.6156-1.1041-2.0574-3.6896-1.3193-4.7446.3795-.5427 1.3408-.5661 2.1781-.463zm.2284 7.0137a12.3762 12.3762 0 0 0-.0853-.1074l-.0355-.0444c.7262-1.1995.5842-2.3862.4578-3.4385-.0519-.4318-.1009-.8396-.0885-1.2226.0129-.4061.0666-.7543.1185-1.0911.0639-.415.1288-.8443.1109-1.3505.0134-.0531.0188-.1158.0118-.1902-.0457-.4855-.5999-1.938-1.7294-3.253-.6076-.7073-1.4896-1.4972-2.6889-2.0395.5251-.1066 1.2328-.2035 2.0244-.1859 2.0515.0456 3.6746.8135 4.8242 2.2824a.908.908 0 0 1 .0667.1002c.7231 1.3556-.2762 6.2751-2.9867 10.5405zm-8.8166-6.1162c-.025.1794-.3089.4225-.6211.4225a.5821.5821 0 0 1-.0809-.0056c-.1873-.026-.3765-.144-.5059-.3156-.0458-.0605-.1203-.178-.1055-.2844.0055-.0401.0261-.0985.0925-.1488.1182-.0894.3518-.1226.6096-.0867.3163.0441.6426.1938.6113.4186zm7.9305-.4114c.0111.0792-.049.201-.1531.3102-.0683.0717-.212.1961-.4079.2232a.5456.5456 0 0 1-.075.0052c-.2935 0-.5414-.2344-.5607-.3717-.024-.1765.2641-.3106.5611-.352.297-.0414.6111.0088.6356.1851z"},child:[]}]})(t)}function xU(t){switch(t){case"cloudbench":return ive;case"geoserver":return Rl;case"postgresql":return Ky;case"connection":return gu;case"pgservice":return Kn;case"pgschema":return uh;case"pgtable":return tm;case"pgview":return wo;case"pgcolumn":return Q7;case"workspace":return uh;case"datastores":case"datastore":return Kn;case"coveragestores":case"coveragestore":return mu;case"layers":case"layer":return Yi;case"styles":case"style":return Bo;case"layergroups":case"layergroup":return ef;case"featuretype":return H7;case"coverage":return yc;default:return uh}}function vU(t){switch(t){case"cloudbench":return"kartoza.500";case"geoserver":return"blue.500";case"postgresql":return"blue.600";case"connection":return"kartoza.500";case"pgservice":return"blue.500";case"pgschema":return"cyan.500";case"pgtable":return"green.500";case"pgview":return"purple.500";case"pgcolumn":return"gray.500";case"workspace":return"accent.400";case"datastores":case"datastore":return"green.500";case"coveragestores":case"coveragestore":return"purple.500";case"layers":case"layer":return"blue.500";case"styles":case"style":return"pink.500";case"layergroups":case"layergroup":return"cyan.500";case"featuretype":return"teal.500";case"coverage":return"orange.500";default:return"gray.500"}}function Gbe(){const t=Ks(r=>r.connections),e=Ks(r=>r.fetchConnections);return I.useEffect(()=>{e()},[e]),u.jsx(ue,{children:u.jsx(Xbe,{connections:t})})}function Xbe({connections:t}){const e="cloudbench-root",r=Er(m=>m.isExpanded(e)),n=Er(m=>m.toggleNode),i=Er(m=>m.selectNode),s=Er(m=>m.selectedNode);I.useEffect(()=>{r||n(e)},[]);const a={id:e,name:"Kartoza CloudBench",type:"cloudbench"},o=(s==null?void 0:s.id)===e,d=()=>{i(a),n(e)};return u.jsxs(ue,{children:[u.jsx(vc,{node:a,isExpanded:r,isSelected:o,isLoading:!1,onClick:d,level:0}),r&&u.jsxs(ue,{pl:4,children:[u.jsx(Kbe,{connections:t}),u.jsx(Zbe,{})]})]})}function Kbe({connections:t}){const e="geoserver-root",r=Er(m=>m.isExpanded(e)),n=Er(m=>m.toggleNode),i=Er(m=>m.selectNode),s=Er(m=>m.selectedNode);I.useEffect(()=>{r||n(e)},[]);const a={id:e,name:"GeoServer",type:"geoserver"},o=(s==null?void 0:s.id)===e,d=()=>{i(a),n(e)};return u.jsxs(ue,{children:[u.jsx(vc,{node:a,isExpanded:r,isSelected:o,isLoading:!1,onClick:d,level:1,count:t.length}),r&&u.jsx(ue,{pl:4,children:t.length===0?u.jsx(ue,{px:2,py:3,children:u.jsx(ie,{color:"gray.500",fontSize:"sm",children:"No connections yet. Click + to add one."})}):t.map(m=>u.jsx(r1e,{connectionId:m.id,name:m.name,url:m.url},m.id))})]})}function Zbe(){const t="postgresql-root",e=Er(w=>w.isExpanded(t)),r=Er(w=>w.toggleNode),n=Er(w=>w.selectNode),i=Er(w=>w.selectedNode),s=bt(w=>w.settings.showHiddenPGServices),{data:a,isLoading:o}=Qr({queryKey:["pgservices"],queryFn:()=>AI(),staleTime:3e4}),d=a==null?void 0:a.filter(w=>s||!w.hidden);I.useEffect(()=>{e||r(t)},[]);const m={id:t,name:"PostgreSQL",type:"postgresql"},y=(i==null?void 0:i.id)===t,b=()=>{n(m),r(t)};return u.jsxs(ue,{children:[u.jsx(vc,{node:m,isExpanded:e,isSelected:y,isLoading:o,onClick:b,level:1,count:d==null?void 0:d.length}),e&&u.jsx(ue,{pl:4,children:!d||d.length===0?u.jsx(ue,{px:2,py:3,children:u.jsx(ie,{color:"gray.500",fontSize:"sm",children:"No PostgreSQL services. Click + to add one."})}):d.map(w=>u.jsx(Ybe,{service:w},w.name))})]})}function Ybe({service:t}){var U;const e=mf("pgservice",t.name),r=Er(Q=>Q.isExpanded(e)),n=Er(Q=>Q.toggleNode),i=Er(Q=>Q.selectNode),s=Er(Q=>Q.selectedNode),a=bt(Q=>Q.openDialog),o=Go(),d=Pa(),{data:m,isLoading:y}=Qr({queryKey:["pgschemas",t.name],queryFn:async()=>{const Q=await fetch(`/api/pg/services/${encodeURIComponent(t.name)}/schemas`);if(!Q.ok)throw new Error("Failed to fetch schemas");return Q.json()},enabled:r&&t.is_parsed,staleTime:6e4}),b={id:e,name:t.name,type:"pgservice",serviceName:t.name},w=(s==null?void 0:s.id)===e,O=()=>{i(b),n(e)},A=async Q=>{Q.stopPropagation();try{await yU(t.name),o({title:"Schema Parsed",description:`Successfully parsed schema for ${t.name}`,status:"success",duration:3e3}),d.invalidateQueries({queryKey:["pgservices"]}),d.invalidateQueries({queryKey:["pgschemas",t.name]})}catch(Y){o({title:"Parse Failed",description:Y.message,status:"error",duration:5e3})}},E=Q=>{Q.stopPropagation(),a("confirm",{mode:"delete",title:"Delete PostgreSQL Service",message:`Are you sure you want to remove "${t.name}" from pg_service.conf?`,data:{pgServiceName:t.name}})},$=Q=>{Q.stopPropagation(),a("query",{mode:"view",data:{serviceName:t.name}})},R=Q=>{Q.stopPropagation(),a("pgdashboard",{mode:"view",data:{serviceName:t.name}})},F=Q=>{Q.stopPropagation(),a("pgupload",{mode:"create",data:{serviceName:t.name}})},L=t.host?`${t.host}:${t.port||"5432"}/${t.dbname||""}`:"";return u.jsxs(ue,{children:[u.jsx(vc,{node:{...b,name:t.name},isExpanded:r,isSelected:w,isLoading:y,onClick:O,onDelete:E,onQuery:t.is_parsed?$:void 0,onPreview:R,onUpload:F,level:2,count:(U=m==null?void 0:m.schemas)==null?void 0:U.length}),r&&!t.is_parsed&&u.jsxs(ue,{pl:8,py:2,children:[u.jsx(St,{size:"sm",colorScheme:"blue",variant:"outline",leftIcon:u.jsx(Kn,{size:14}),onClick:A,children:"Parse Schema"}),u.jsx(ie,{fontSize:"xs",color:"gray.500",mt:1,children:L})]}),r&&t.is_parsed&&(m==null?void 0:m.schemas)&&u.jsx(ue,{pl:4,children:m.schemas.map(Q=>u.jsx(Jbe,{serviceName:t.name,schema:Q},Q.name))})]})}function Jbe({serviceName:t,schema:e}){const r=mf("pgschema",t,e.name),n=Er(w=>w.isExpanded(r)),i=Er(w=>w.toggleNode),s=Er(w=>w.selectNode),a=Er(w=>w.selectedNode),o=bt(w=>w.openDialog),d={id:r,name:e.name,type:"pgschema",serviceName:t,schemaName:e.name},m=(a==null?void 0:a.id)===r,y=()=>{s(d),i(r)},b=w=>{w.stopPropagation(),o("pgupload",{mode:"create",data:{serviceName:t,schemaName:e.name}})};return u.jsxs(ue,{children:[u.jsx(vc,{node:d,isExpanded:n,isSelected:m,isLoading:!1,onClick:y,onUpload:b,level:3,count:e.tables.length}),n&&u.jsx(ue,{pl:4,children:e.tables.map(w=>u.jsx(e1e,{serviceName:t,schemaName:e.name,table:w},w.name))})]})}function e1e({serviceName:t,schemaName:e,table:r}){const n=r.is_view?"pgview":"pgtable",i=mf(n,t,e,r.name),s=Er(E=>E.isExpanded(i)),a=Er(E=>E.toggleNode),o=Er(E=>E.selectNode),d=Er(E=>E.selectedNode),m=bt(E=>E.openDialog),y={id:i,name:r.name,type:n,serviceName:t,schemaName:e,tableName:r.name},b=(d==null?void 0:d.id)===i,w=()=>{o(y),a(i)},O=E=>{E.stopPropagation(),m("dataviewer",{mode:"view",data:{serviceName:t,schemaName:e,tableName:r.name,isView:r.is_view}})},A=E=>{E.stopPropagation(),m("query",{mode:"view",data:{serviceName:t,schemaName:e,tableName:r.name,initialSQL:`SELECT * FROM "${e}"."${r.name}" LIMIT 100`}})};return u.jsxs(ue,{children:[u.jsx(vc,{node:y,isExpanded:s,isSelected:b,isLoading:!1,onClick:w,level:4,count:r.columns.length,onShowData:O,onQuery:A}),s&&u.jsx(ue,{pl:4,children:r.columns.map(E=>u.jsx(t1e,{serviceName:t,schemaName:e,tableName:r.name,column:E},E.name))})]})}function t1e({serviceName:t,schemaName:e,tableName:r,column:n}){const i=mf("pgcolumn",t,e,`${r}:${n.name}`),s=Er(y=>y.selectNode),a=Er(y=>y.selectedNode),o={id:i,name:`${n.name} (${n.type}${n.nullable?", nullable":""})`,type:"pgcolumn",serviceName:t,schemaName:e,tableName:r},d=(a==null?void 0:a.id)===i,m=()=>{s(o)};return u.jsx(vc,{node:o,isExpanded:!1,isSelected:d,isLoading:!1,onClick:m,level:5,isLeaf:!0})}function r1e({connectionId:t,name:e,url:r}){const n=mf("connection",t),i=Er(R=>R.isExpanded(n)),s=Er(R=>R.toggleNode),a=Er(R=>R.selectNode),o=Er(R=>R.selectedNode),d=bt(R=>R.openDialog),{data:m,isLoading:y}=Qr({queryKey:["workspaces",t],queryFn:()=>iU(t),staleTime:3e4}),b={id:n,name:e,type:"connection",connectionId:t},w=(o==null?void 0:o.id)===n,O=()=>{a(b),s(n)},A=R=>{R.stopPropagation(),d("connection",{mode:"edit",data:{connectionId:t}})},E=R=>{R.stopPropagation(),d("confirm",{mode:"delete",title:"Delete Connection",message:`Are you sure you want to delete connection "${e}"?`,data:{connectionId:t}})},$=R=>{R.stopPropagation();const F=r.replace(/\/rest\/?$/,"/web");window.open(F,"_blank","noopener,noreferrer")};return u.jsxs(ue,{children:[u.jsx(vc,{node:b,isExpanded:i,isSelected:w,isLoading:y,onClick:O,onEdit:A,onDelete:E,onOpenAdmin:$,level:2,count:m==null?void 0:m.length}),i&&m&&u.jsx(ue,{pl:4,children:m.map(R=>u.jsx(n1e,{connectionId:t,workspace:R.name},R.name))})]})}function n1e({connectionId:t,workspace:e}){const r=mf("workspace",t,e),n=Er(A=>A.isExpanded(r)),i=Er(A=>A.toggleNode),s=Er(A=>A.selectNode),a=Er(A=>A.selectedNode),o=bt(A=>A.openDialog),d={id:r,name:e,type:"workspace",connectionId:t,workspace:e},m=(a==null?void 0:a.id)===r,y=()=>{s(d),i(r)},b=A=>{A.stopPropagation(),o("workspace",{mode:"edit",data:{connectionId:t,workspace:e}})},w=A=>{A.stopPropagation(),o("confirm",{mode:"delete",title:"Delete Workspace",message:`Are you sure you want to delete workspace "${e}"?`,data:{connectionId:t,workspace:e}})},O=A=>{A.stopPropagation(),mU(t,"workspace",e)};return u.jsxs(ue,{children:[u.jsx(vc,{node:d,isExpanded:n,isSelected:m,isLoading:!1,onClick:y,onEdit:b,onDownloadConfig:O,onDelete:w,level:3}),n&&u.jsxs(ue,{pl:4,children:[u.jsx(Fx,{connectionId:t,workspace:e,category:"datastores",label:"Data Stores"}),u.jsx(Fx,{connectionId:t,workspace:e,category:"coveragestores",label:"Coverage Stores"}),u.jsx(Fx,{connectionId:t,workspace:e,category:"layers",label:"Layers"}),u.jsx(Fx,{connectionId:t,workspace:e,category:"styles",label:"Styles"}),u.jsx(Fx,{connectionId:t,workspace:e,category:"layergroups",label:"Layer Groups"})]})]})}function Fx({connectionId:t,workspace:e,category:r,label:n}){const i=mf(r,t,e),s=Er(E=>E.isExpanded(i)),a=Er(E=>E.toggleNode),o=Er(E=>E.selectNode),d=Er(E=>E.selectedNode),{data:m,isLoading:y}=Qr({queryKey:[r,t,e],queryFn:async()=>{switch(r){case"datastores":return OI(t,e);case"coveragestores":return PI(t,e);case"layers":return j1(t,e);case"styles":return jI(t,e);case"layergroups":return fU(t,e)}},staleTime:3e4}),b={id:i,name:n,type:r,connectionId:t,workspace:e},w=(d==null?void 0:d.id)===i,O=()=>{o(b),a(i)},A=()=>{switch(r){case"datastores":return"datastore";case"coveragestores":return"coveragestore";case"layers":return"layer";case"styles":return"style";case"layergroups":return"layergroup"}};return u.jsxs(ue,{children:[u.jsx(vc,{node:b,isExpanded:s,isSelected:w,isLoading:y,onClick:O,level:4,count:m==null?void 0:m.length}),s&&m&&u.jsx(ue,{pl:4,children:m.map(E=>u.jsx(i1e,{connectionId:t,workspace:e,name:E.name,type:A(),storeType:r==="coveragestores"?"coveragestore":r==="datastores"?"datastore":void 0},E.name))})]})}function i1e({connectionId:t,workspace:e,name:r,type:n,storeType:i}){const s=mf(n,t,e,r),a=Er(Oe=>Oe.isExpanded(s)),o=Er(Oe=>Oe.toggleNode),d=Er(Oe=>Oe.selectNode),m=Er(Oe=>Oe.selectedNode),y=bt(Oe=>Oe.openDialog),b=bt(Oe=>Oe.setPreview),w=bt(Oe=>Oe.setPreviewMode),O=n==="datastore"||n==="coveragestore",{data:A,isLoading:E,error:$}=Qr({queryKey:["featuretypes",t,e,r],queryFn:()=>pbe(t,e,r),enabled:O&&n==="datastore"&&a,staleTime:3e4}),{data:R,isLoading:F,error:L}=Qr({queryKey:["coverages",t,e,r],queryFn:()=>gbe(t,e,r),enabled:O&&n==="coveragestore"&&a,staleTime:3e4}),{data:U,error:Q}=Qr({queryKey:["available-featuretypes",t,e,r],queryFn:()=>aU(t,e,r),enabled:O&&n==="datastore"&&a,staleTime:3e4}),Y=(m==null?void 0:m.id)===s,{data:Z}=Qr({queryKey:["feature-count",t,e,r],queryFn:()=>sbe(t,e,r),enabled:n==="layer"&&Y,staleTime:5*60*1e3,gcTime:10*60*1e3,retry:!1});$&&console.error("Feature types error:",$),L&&console.error("Coverages error:",L),Q&&console.error("Available feature types error:",Q);const J={id:s,name:r,type:n,connectionId:t,workspace:e,storeName:n==="layer"?void 0:r,storeType:i},re=E||F,he=()=>{d(J),O&&o(s)},le=Oe=>{Oe.stopPropagation();const Re=i==="coveragestore"?"raster":"vector";el({connId:t,workspace:e,layerName:r,storeName:r,storeType:i,layerType:Re}).then(({url:nt})=>{b({url:nt,layerName:r,workspace:e,connectionId:t,storeName:r,storeType:i,layerType:Re})}).catch(nt=>{bt.getState().setError(nt.message)})},Ze=Oe=>{Oe.stopPropagation();const Re=i==="coveragestore"?"raster":"vector";w("3d"),b({url:"",layerName:r,workspace:e,connectionId:t,storeName:r,storeType:i,layerType:Re,nodeType:n})},Ee=async Oe=>{var Re;if(Oe.stopPropagation(),n==="style")y("style",{mode:"edit",data:{connectionId:t,workspace:e,name:r}});else if(n==="layer")y("layer",{mode:"edit",data:{connectionId:t,workspace:e,layerName:r,storeType:i}});else if(n==="layergroup")try{const nt=await pU(t,e,r),ze=((Re=nt.layers)==null?void 0:Re.map(rt=>{const Xe=rt.name.split(":");return Xe.length>1?Xe[1]:rt.name}))||[];y("layergroup",{mode:"edit",data:{connectionId:t,workspace:e,name:nt.name,title:nt.title||"",mode:nt.mode,layers:ze}})}catch(nt){bt.getState().setError(nt.message)}},qe=Oe=>{Oe.stopPropagation(),y("confirm",{mode:"delete",title:`Delete ${n}`,message:`Are you sure you want to delete "${r}"?`,data:{connectionId:t,workspace:e,name:r,type:n}})},et=Oe=>{Oe.stopPropagation();const nt={datastore:"datastore",coveragestore:"coveragestore",layer:"layer",style:"style",layergroup:"layergroup"}[n];nt&&mU(t,nt,e,r)},at=Oe=>{Oe.stopPropagation(),n==="layer"||i==="datastore"?Mbe(t,e,r):i==="coveragestore"&&Ibe(t,e,r)},Be=["datastore","coveragestore","layer","style","layergroup"].includes(n),Me=n==="layer",Ge=i==="coveragestore"?"GeoTIFF":"Shapefile",Le=n==="style"||n==="layer"||n==="layergroup",Ie=n==="datastore"?((A==null?void 0:A.length)||0)+((U==null?void 0:U.length)||0):n==="coveragestore"?R==null?void 0:R.length:n==="layer"&&Z!==void 0&&Z>=0?Z:void 0;return u.jsxs(ue,{children:[u.jsx(vc,{node:J,isExpanded:a,isSelected:Y,isLoading:re,onClick:he,onEdit:Le?Ee:void 0,onPreview:n==="layer"||n==="datastore"||n==="coveragestore"?le:void 0,onTerria:n==="layer"||n==="layergroup"?Ze:void 0,onDownloadConfig:Be?et:void 0,onDownloadData:Me?at:void 0,downloadDataLabel:Ge,onDelete:qe,level:5,isLeaf:!O,count:Ie}),a&&n==="datastore"&&u.jsx(ue,{pl:4,children:$?u.jsxs(ie,{fontSize:"xs",color:"red.500",px:2,py:2,children:["Error loading datasets: ",$.message]}):u.jsx(s1e,{connectionId:t,workspace:e,storeName:r,featureTypes:A||[],availableFeatureTypes:U||[]})}),a&&n==="coveragestore"&&u.jsx(ue,{pl:4,children:L?u.jsxs(ie,{fontSize:"xs",color:"red.500",px:2,py:2,children:["Error loading coverages: ",L.message]}):u.jsx(o1e,{connectionId:t,workspace:e,storeName:r,coverages:R||[]})})]})}function s1e({connectionId:t,workspace:e,storeName:r,featureTypes:n,availableFeatureTypes:i}){const s=Go(),a=Pa(),[o,d]=I.useState(new Set),[m,y]=I.useState(!1),b=bt(L=>L.setPreview),w=L=>{const U=new Set(o);U.has(L)?U.delete(L):U.add(L),d(U)},O=()=>{d(new Set(i))},A=async()=>{if(o.size!==0){y(!0);try{const L=await lU(t,e,r,Array.from(o));L.published.length>0&&(s({title:"Layers Published",description:`Successfully published ${L.published.length} layer(s)`,status:"success",duration:3e3}),a.invalidateQueries({queryKey:["featuretypes",t,e,r]}),a.invalidateQueries({queryKey:["available-featuretypes",t,e,r]}),a.invalidateQueries({queryKey:["layers",t,e]}),d(new Set)),L.errors.length>0&&s({title:"Some layers failed to publish",description:L.errors.join(", "),status:"warning",duration:5e3})}catch(L){s({title:"Failed to publish layers",description:L instanceof Error?L.message:"Unknown error",status:"error",duration:5e3})}finally{y(!1)}}},E=async L=>{try{await mbe(t,e,r,L),s({title:"Layer Published",description:`Successfully published ${L}`,status:"success",duration:3e3}),a.invalidateQueries({queryKey:["featuretypes",t,e,r]}),a.invalidateQueries({queryKey:["available-featuretypes",t,e,r]}),a.invalidateQueries({queryKey:["layers",t,e]})}catch(U){s({title:"Failed to publish layer",description:U instanceof Error?U.message:"Unknown error",status:"error",duration:5e3})}},$=L=>{el({connId:t,workspace:e,layerName:L,storeName:r,storeType:"datastore",layerType:"vector"}).then(({url:U})=>{b({url:U,layerName:L,workspace:e,connectionId:t,storeName:r,storeType:"datastore",layerType:"vector"})}).catch(U=>{s({title:"Preview failed",description:U.message,status:"error",duration:3e3})})},R=dr("yellow.50","yellow.900"),F=dr("green.50","green.900");return u.jsxs(ue,{children:[n.length>0&&u.jsxs(ue,{mb:2,children:[u.jsxs(ie,{fontSize:"xs",fontWeight:"600",color:"gray.500",px:2,py:1,children:["Published (",n.length,")"]}),n.map(L=>u.jsx($A,{name:L.name,isPublished:!0,bg:F,onPreview:()=>$(L.name)},L.name))]}),i.length>0&&u.jsxs(ue,{children:[u.jsxs(Sr,{align:"center",justify:"space-between",px:2,py:1,children:[u.jsxs(ie,{fontSize:"xs",fontWeight:"600",color:"gray.500",children:["Available to Publish (",i.length,")"]}),u.jsxs(Sr,{gap:1,children:[u.jsx(St,{size:"xs",variant:"ghost",onClick:O,isDisabled:o.size===i.length,children:"Select All"}),o.size>0&&u.jsxs(St,{size:"xs",colorScheme:"kartoza",leftIcon:u.jsx(xu,{size:12}),onClick:A,isLoading:m,children:["Publish (",o.size,")"]})]})]}),i.map(L=>u.jsx($A,{name:L,isPublished:!1,bg:R,isSelected:o.has(L),onToggleSelect:()=>w(L),onPublish:()=>E(L)},L))]}),n.length===0&&i.length===0&&u.jsx(ie,{fontSize:"xs",color:"gray.500",px:2,py:2,fontStyle:"italic",children:"No datasets in this store"})]})}function o1e({connectionId:t,workspace:e,storeName:r,coverages:n}){const i=bt(d=>d.setPreview),s=Go(),a=d=>{el({connId:t,workspace:e,layerName:d,storeName:r,storeType:"coveragestore",layerType:"raster"}).then(({url:m})=>{i({url:m,layerName:d,workspace:e,connectionId:t,storeName:r,storeType:"coveragestore",layerType:"raster"})}).catch(m=>{s({title:"Preview failed",description:m.message,status:"error",duration:3e3})})},o=dr("purple.50","purple.900");return u.jsxs(ue,{children:[n.length>0&&u.jsxs(ue,{children:[u.jsxs(ie,{fontSize:"xs",fontWeight:"600",color:"gray.500",px:2,py:1,children:["Coverages (",n.length,")"]}),n.map(d=>u.jsx($A,{name:d.name,isPublished:!0,isCoverage:!0,bg:o,onPreview:()=>a(d.name)},d.name))]}),n.length===0&&u.jsx(ie,{fontSize:"xs",color:"gray.500",px:2,py:2,fontStyle:"italic",children:"No coverages in this store"})]})}function $A({name:t,isPublished:e,isCoverage:r=!1,bg:n,isSelected:i,onToggleSelect:s,onPublish:a,onPreview:o}){const d=dr("gray.100","gray.600"),m=r?"coverage":"featuretype",y=xU(m),b=vU(m);return u.jsxs(Sr,{align:"center",py:1.5,px:2,pl:6,bg:n,_hover:{bg:d},borderRadius:"md",mx:1,my:.5,role:"group",children:[!e&&s&&u.jsx(Ua,{size:"sm",isChecked:i,onChange:s,mr:2,colorScheme:"kartoza"}),u.jsx(ue,{p:1,borderRadius:"md",mr:2,children:u.jsx(He,{as:y,boxSize:3.5,color:b})}),u.jsx(ie,{flex:"1",fontSize:"sm",noOfLines:1,children:t}),e&&u.jsx(er,{colorScheme:"green",fontSize:"2xs",mr:2,children:"Published"}),u.jsxs(Sr,{gap:1,opacity:0,_groupHover:{opacity:1},transition:"opacity 0.15s",children:[o&&u.jsx($r,{label:"Preview",fontSize:"xs",children:u.jsx(br,{"aria-label":"Preview",icon:u.jsx(wo,{size:12}),size:"xs",variant:"ghost",colorScheme:"kartoza",onClick:w=>{w.stopPropagation(),o()}})}),!e&&a&&u.jsx($r,{label:"Publish as Layer",fontSize:"xs",children:u.jsx(br,{"aria-label":"Publish",icon:u.jsx(fs,{size:12}),size:"xs",variant:"ghost",colorScheme:"green",onClick:w=>{w.stopPropagation(),a()}})})]})]})}function vc({node:t,isExpanded:e,isSelected:r,isLoading:n,onClick:i,onEdit:s,onDelete:a,onPreview:o,onTerria:d,onOpenAdmin:m,onQuery:y,onShowData:b,onUpload:w,onDownloadConfig:O,onDownloadData:A,downloadDataLabel:E,level:$,isLeaf:R,count:F}){const L=dr(r?"kartoza.50":"transparent",r?"kartoza.900":"transparent"),U=dr("gray.50","gray.700"),Q=dr("gray.800","gray.100"),Y=dr("kartoza.700","kartoza.200"),Z=dr("kartoza.500","kartoza.400"),J=dr("gray.500","gray.400"),re=vU(t.type),he=xU(t.type);return u.jsxs(Sr,{align:"center",py:2,px:2,pl:$*4+2,cursor:"pointer",bg:L,borderLeft:r?"3px solid":"3px solid transparent",borderLeftColor:r?Z:"transparent",_hover:{bg:r?L:U,"& .chevron-icon":{color:"kartoza.500"}},borderRadius:"md",transition:"all 0.15s ease",onClick:i,role:"group",mx:1,my:.5,children:[!R&&u.jsx(ue,{w:4,mr:2,color:J,className:"chevron-icon",transition:"color 0.15s",children:n?u.jsx(Nn,{size:"xs",color:"kartoza.500"}):e?u.jsx(Nl,{size:14}):u.jsx(rve,{size:14})}),R&&u.jsx(ue,{w:4,mr:2}),u.jsx(ue,{p:1.5,borderRadius:"md",bg:r?`${re.split(".")[0]}.100`:"transparent",mr:2,transition:"background 0.15s",_groupHover:{bg:`${re.split(".")[0]}.50`},children:u.jsx(He,{as:he,boxSize:4,color:re})}),u.jsx(ie,{flex:"1",fontSize:"sm",color:r?Y:Q,fontWeight:r?"600":"normal",noOfLines:1,letterSpacing:r?"-0.01em":"normal",children:t.name}),F!==void 0&&F>=0&&u.jsx(er,{colorScheme:re.split(".")[0],variant:"subtle",fontSize:"xs",borderRadius:"full",px:2,mr:2,fontWeight:"600",children:F}),m&&u.jsx($r,{label:"Open GeoServer Admin",fontSize:"xs",children:u.jsx(br,{"aria-label":"Open Admin",icon:u.jsx(ave,{size:14}),size:"xs",variant:"ghost",colorScheme:"blue",onClick:m,_hover:{bg:"blue.50"},mr:1})}),u.jsxs(Sr,{gap:1,opacity:0,_groupHover:{opacity:1},transition:"opacity 0.15s",children:[(O||A)&&u.jsxs(Kd,{isLazy:!0,placement:"bottom-end",children:[u.jsx($r,{label:"Download",fontSize:"xs",children:u.jsx(Zd,{as:br,"aria-label":"Download",icon:u.jsx(Iv,{size:14}),size:"xs",variant:"ghost",colorScheme:"kartoza",onClick:le=>le.stopPropagation(),_hover:{bg:"kartoza.100"}})}),u.jsxs(Yd,{minW:"180px",fontSize:"sm",children:[O&&u.jsx(fa,{icon:u.jsx(H7,{}),onClick:O,children:"Download Config (JSON)"}),A&&u.jsxs(fa,{icon:u.jsx(yc,{}),onClick:A,children:["Download ",E||"Data"]})]})]}),o&&u.jsx($r,{label:"Preview",fontSize:"xs",children:u.jsx(br,{"aria-label":"Preview",icon:u.jsx(wo,{size:14}),size:"xs",variant:"ghost",colorScheme:"kartoza",onClick:o,_hover:{bg:"kartoza.100"}})}),w&&u.jsx($r,{label:"Import Data",fontSize:"xs",children:u.jsx(br,{"aria-label":"Import Data",icon:u.jsx(xu,{size:14}),size:"xs",variant:"ghost",colorScheme:"green",onClick:w,_hover:{bg:"green.50"}})}),b&&u.jsx($r,{label:"View Data",fontSize:"xs",children:u.jsx(br,{"aria-label":"View Data",icon:u.jsx(tm,{size:14}),size:"xs",variant:"ghost",colorScheme:"blue",onClick:b,_hover:{bg:"blue.50"}})}),y&&u.jsx($r,{label:"Query",fontSize:"xs",children:u.jsx(br,{"aria-label":"Query",icon:u.jsx(Pb,{size:14}),size:"xs",variant:"ghost",colorScheme:"purple",onClick:y,_hover:{bg:"purple.50"}})}),d&&u.jsx($r,{label:"Open in Terria 3D",fontSize:"xs",children:u.jsx(br,{"aria-label":"Open in Terria 3D",icon:u.jsx(Rl,{size:14}),size:"xs",variant:"ghost",colorScheme:"teal",onClick:d,_hover:{bg:"teal.50"}})}),s&&u.jsx($r,{label:"Edit",fontSize:"xs",children:u.jsx(br,{"aria-label":"Edit",icon:u.jsx(ove,{size:14}),size:"xs",variant:"ghost",colorScheme:"kartoza",onClick:s,_hover:{bg:"kartoza.100"}})}),a&&u.jsx($r,{label:"Delete",fontSize:"xs",children:u.jsx(br,{"aria-label":"Delete",icon:u.jsx(Nd,{size:14}),size:"xs",variant:"ghost",colorScheme:"red",onClick:a,_hover:{bg:"red.50"}})})]})]})}function a1e(){const t=dr("gray.100","gray.700");return u.jsxs(ue,{h:"100%",children:[u.jsx(ue,{bg:t,px:3,py:2,children:u.jsx(bn,{size:"sm",color:"gray.700",children:"GeoServer Explorer"})}),u.jsx(ue,{p:2,children:u.jsx(Gbe,{})})]})}function l1e(){const t=dr("gray.100","gray.800"),e=dr("gray.200","gray.700"),r=bt(y=>y.statusMessage),n=bt(y=>y.errorMessage),i=bt(y=>y.successMessage),s=bt(y=>y.setError),a=bt(y=>y.setSuccess),o=Ks(y=>y.connections),d=Ks(y=>y.activeConnectionId),m=o.find(y=>y.id===d);return u.jsxs(ue,{children:[n&&u.jsxs(to,{status:"error",variant:"solid",children:[u.jsx(ro,{}),u.jsx(ie,{flex:"1",children:n}),u.jsx(yb,{onClick:()=>s(null)})]}),i&&u.jsxs(to,{status:"success",variant:"solid",children:[u.jsx(ro,{}),u.jsx(ie,{flex:"1",children:i}),u.jsx(yb,{onClick:()=>a(null)})]}),u.jsx(ue,{bg:t,borderTop:"1px",borderColor:e,px:4,py:1,children:u.jsxs(Sr,{justify:"space-between",align:"center",children:[u.jsx(ie,{fontSize:"sm",color:"gray.600",children:r}),u.jsxs(Sr,{gap:4,children:[u.jsxs(ie,{fontSize:"sm",color:"gray.600",children:["Connections: ",o.length]}),m&&u.jsxs(ie,{fontSize:"sm",color:"kartoza.500",fontWeight:"medium",children:["Active: ",m.name]})]})]})})]})}function c1e({children:t,onSearchClick:e}){const r=bt(w=>w.sidebarWidth),n=bt(w=>w.setSidebarWidth),i=dr("gray.50","gray.900"),s=dr("gray.200","gray.700"),a=dr("gray.300","gray.600"),o=dr("kartoza.400","kartoza.500"),[d,m]=I.useState(!1),y=I.useRef(null),b=I.useCallback(w=>{w.preventDefault(),m(!0);const O=E=>{if(y.current){const $=y.current.getBoundingClientRect(),R=E.clientX-$.left;n(R)}},A=()=>{m(!1),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",A),document.body.style.cursor="",document.body.style.userSelect=""};document.addEventListener("mousemove",O),document.addEventListener("mouseup",A),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[n]);return u.jsxs(Sr,{direction:"column",h:"100vh",bg:i,children:[u.jsx(Hbe,{onSearchClick:e}),u.jsxs(Sr,{flex:"1",overflow:"hidden",ref:y,children:[u.jsx(ue,{w:`${r}px`,borderRight:"1px",borderColor:s,overflow:"auto",flexShrink:0,position:"relative",children:u.jsx(a1e,{})}),u.jsx(ue,{w:"6px",cursor:"col-resize",bg:d?o:"transparent",_hover:{bg:o},transition:"background 0.15s",flexShrink:0,position:"relative",onMouseDown:b,ml:"-3px",zIndex:10,children:u.jsx(ue,{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",h:"40px",w:"4px",borderRadius:"full",bg:d?"white":a,opacity:d?1:0,_groupHover:{opacity:.8},transition:"opacity 0.15s",sx:{"[data-resize-handle]:hover &":{opacity:.8}}})}),u.jsx(ue,{flex:"1",overflow:"auto",p:4,display:"flex",flexDirection:"column",children:t})]}),u.jsx(l1e,{})]})}var bU={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(t,e){(function(r,n){t.exports=n()})(qx,function(){var r={},n={};function i(a,o,d){if(n[a]=d,a==="index"){var m="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",y={};return n.shared(y),n.index(r,y),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([m],{type:"text/javascript"}))),r}}i("shared",["exports"],function(a){function o(h,c,f,g){return new(f||(f=Promise))(function(_,C){function T(B){try{z(g.next(B))}catch(N){C(N)}}function P(B){try{z(g.throw(B))}catch(N){C(N)}}function z(B){var N;B.done?_(B.value):(N=B.value,N instanceof f?N:new f(function(q){q(N)})).then(T,P)}z((g=g.apply(h,c||[])).next())})}function d(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}typeof SuppressedError=="function"&&SuppressedError;var m=y;function y(h,c){this.x=h,this.y=c}y.prototype={clone:function(){return new y(this.x,this.y)},add:function(h){return this.clone()._add(h)},sub:function(h){return this.clone()._sub(h)},multByPoint:function(h){return this.clone()._multByPoint(h)},divByPoint:function(h){return this.clone()._divByPoint(h)},mult:function(h){return this.clone()._mult(h)},div:function(h){return this.clone()._div(h)},rotate:function(h){return this.clone()._rotate(h)},rotateAround:function(h,c){return this.clone()._rotateAround(h,c)},matMult:function(h){return this.clone()._matMult(h)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(h){return this.x===h.x&&this.y===h.y},dist:function(h){return Math.sqrt(this.distSqr(h))},distSqr:function(h){var c=h.x-this.x,f=h.y-this.y;return c*c+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith:function(h){return this.angleWithSep(h.x,h.y)},angleWithSep:function(h,c){return Math.atan2(this.x*c-this.y*h,this.x*h+this.y*c)},_matMult:function(h){var c=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=c,this},_add:function(h){return this.x+=h.x,this.y+=h.y,this},_sub:function(h){return this.x-=h.x,this.y-=h.y,this},_mult:function(h){return this.x*=h,this.y*=h,this},_div:function(h){return this.x/=h,this.y/=h,this},_multByPoint:function(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint:function(h){return this.x/=h.x,this.y/=h.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var h=this.y;return this.y=this.x,this.x=-h,this},_rotate:function(h){var c=Math.cos(h),f=Math.sin(h),g=f*this.x+c*this.y;return this.x=c*this.x-f*this.y,this.y=g,this},_rotateAround:function(h,c){var f=Math.cos(h),g=Math.sin(h),_=c.y+g*(this.x-c.x)+f*(this.y-c.y);return this.x=c.x+f*(this.x-c.x)-g*(this.y-c.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},y.convert=function(h){return h instanceof y?h:Array.isArray(h)?new y(h[0],h[1]):h};var b=d(m),w=O;function O(h,c,f,g){this.cx=3*h,this.bx=3*(f-h)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(g-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=h,this.p1y=c,this.p2x=f,this.p2y=g}O.prototype={sampleCurveX:function(h){return((this.ax*h+this.bx)*h+this.cx)*h},sampleCurveY:function(h){return((this.ay*h+this.by)*h+this.cy)*h},sampleCurveDerivativeX:function(h){return(3*this.ax*h+2*this.bx)*h+this.cx},solveCurveX:function(h,c){if(c===void 0&&(c=1e-6),h<0)return 0;if(h>1)return 1;for(var f=h,g=0;g<8;g++){var _=this.sampleCurveX(f)-h;if(Math.abs(_)<c)return f;var C=this.sampleCurveDerivativeX(f);if(Math.abs(C)<1e-6)break;f-=_/C}var T=0,P=1;for(f=h,g=0;g<20&&(_=this.sampleCurveX(f),!(Math.abs(_-h)<c));g++)h>_?T=f:P=f,f=.5*(P-T)+T;return f},solve:function(h,c){return this.sampleCurveY(this.solveCurveX(h,c))}};var A=d(w);let E,$;function R(){return E==null&&(E=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),E}function F(){if($==null&&($=!1,R())){const c=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(c){for(let g=0;g<5*5;g++){const _=4*g;c.fillStyle=`rgb(${_},${_+1},${_+2})`,c.fillRect(g%5,Math.floor(g/5),1,1)}const f=c.getImageData(0,0,5,5).data;for(let g=0;g<5*5*4;g++)if(g%4!=3&&f[g]!==g){$=!0;break}}}return $||!1}function L(h,c,f,g){const _=new A(h,c,f,g);return C=>_.solve(C)}const U=L(.25,.1,.25,1);function Q(h,c,f){return Math.min(f,Math.max(c,h))}function Y(h,c,f){const g=f-c,_=((h-c)%g+g)%g+c;return _===c?f:_}function Z(h,...c){for(const f of c)for(const g in f)h[g]=f[g];return h}let J=1;function re(h,c,f){const g={};for(const _ in h)g[_]=c.call(this,h[_],_,h);return g}function he(h,c,f){const g={};for(const _ in h)c.call(this,h[_],_,h)&&(g[_]=h[_]);return g}function le(h){return Array.isArray(h)?h.map(le):typeof h=="object"&&h?re(h,le):h}const Ze={};function Ee(h){Ze[h]||(typeof console<"u"&&console.warn(h),Ze[h]=!0)}function qe(h,c,f){return(f.y-h.y)*(c.x-h.x)>(c.y-h.y)*(f.x-h.x)}function et(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let at=null;function Be(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const Me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ge(h,c,f,g,_){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const C=new VideoFrame(h,{timestamp:0});try{const T=C==null?void 0:C.format;if(!T||!T.startsWith("BGR")&&!T.startsWith("RGB"))throw new Error(`Unrecognized format ${T}`);const P=T.startsWith("BGR"),z=new Uint8ClampedArray(g*_*4);if(yield C.copyTo(z,function(B,N,q,K,te){const se=4*Math.max(-N,0),oe=(Math.max(0,q)-q)*K*4+se,pe=4*K,_e=Math.max(0,N),Ke=Math.max(0,q);return{rect:{x:_e,y:Ke,width:Math.min(B.width,N+K)-_e,height:Math.min(B.height,q+te)-Ke},layout:[{offset:oe,stride:pe}]}}(h,c,f,g,_)),P)for(let B=0;B<z.length;B+=4){const N=z[B];z[B]=z[B+2],z[B+2]=N}return z}finally{C.close()}})}let Le,Ie;const Oe="AbortError";function Re(){return new Error(Oe)}const nt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ze(h){return nt.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const rt="global-dispatcher";class Xe extends Error{constructor(c,f,g,_){super(`AJAXError: ${f} (${c}): ${g}`),this.status=c,this.statusText=f,this.url=g,this.body=_}}const _t=()=>et(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Mt=function(h,c){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){const g=ze(h.url);if(g)return g(h,c);if(et(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,targetMapId:rt},c)}if(!(/^file:/.test(f=h.url)||/^file:/.test(_t())&&!/^\w+:/.test(f))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(g,_){return o(this,void 0,void 0,function*(){const C=new Request(g.url,{method:g.method||"GET",body:g.body,credentials:g.credentials,headers:g.headers,cache:g.cache,referrer:_t(),signal:_.signal});g.type!=="json"||C.headers.has("Accept")||C.headers.set("Accept","application/json");const T=yield fetch(C);if(!T.ok){const B=yield T.blob();throw new Xe(T.status,T.statusText,g.url,B)}let P;P=g.type==="arrayBuffer"||g.type==="image"?T.arrayBuffer():g.type==="json"?T.json():T.text();const z=yield P;if(_.signal.aborted)throw Re();return{data:z,cacheControl:T.headers.get("Cache-Control"),expires:T.headers.get("Expires")}})}(h,c);if(et(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,mustQueue:!0,targetMapId:rt},c)}var f;return function(g,_){return new Promise((C,T)=>{var P;const z=new XMLHttpRequest;z.open(g.method||"GET",g.url,!0),g.type!=="arrayBuffer"&&g.type!=="image"||(z.responseType="arraybuffer");for(const B in g.headers)z.setRequestHeader(B,g.headers[B]);g.type==="json"&&(z.responseType="text",!((P=g.headers)===null||P===void 0)&&P.Accept||z.setRequestHeader("Accept","application/json")),z.withCredentials=g.credentials==="include",z.onerror=()=>{T(new Error(z.statusText))},z.onload=()=>{if(!_.signal.aborted)if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let B=z.response;if(g.type==="json")try{B=JSON.parse(z.response)}catch(N){return void T(N)}C({data:B,cacheControl:z.getResponseHeader("Cache-Control"),expires:z.getResponseHeader("Expires")})}else{const B=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});T(new Xe(z.status,z.statusText,g.url,B))}},_.signal.addEventListener("abort",()=>{z.abort(),T(Re())}),z.send(g.body)})}(h,c)};function Et(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const c=new URL(h),f=window.location;return c.protocol===f.protocol&&c.host===f.host}function yt(h,c,f){f[h]&&f[h].indexOf(c)!==-1||(f[h]=f[h]||[],f[h].push(c))}function Je(h,c,f){if(f&&f[h]){const g=f[h].indexOf(c);g!==-1&&f[h].splice(g,1)}}class Kt{constructor(c,f={}){Z(this,f),this.type=c}}class vt extends Kt{constructor(c,f={}){super("error",Z({error:c},f))}}class st{on(c,f){return this._listeners=this._listeners||{},yt(c,f,this._listeners),this}off(c,f){return Je(c,f,this._listeners),Je(c,f,this._oneTimeListeners),this}once(c,f){return f?(this._oneTimeListeners=this._oneTimeListeners||{},yt(c,f,this._oneTimeListeners),this):new Promise(g=>this.once(c,g))}fire(c,f){typeof c=="string"&&(c=new Kt(c,f||{}));const g=c.type;if(this.listens(g)){c.target=this;const _=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const P of _)P.call(this,c);const C=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const P of C)Je(g,P,this._oneTimeListeners),P.call(this,c);const T=this._eventedParent;T&&(Z(c,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(c))}else c instanceof vt&&console.error(c.error);return this}listens(c){return this._listeners&&this._listeners[c]&&this._listeners[c].length>0||this._oneTimeListeners&&this._oneTimeListeners[c]&&this._oneTimeListeners[c].length>0||this._eventedParent&&this._eventedParent.listens(c)}setEventedParent(c,f){return this._eventedParent=c,this._eventedParentData=f,this}}var Te={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const lt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Nt(h,c){const f={};for(const g in h)g!=="ref"&&(f[g]=h[g]);return lt.forEach(g=>{g in c&&(f[g]=c[g])}),f}function Tt(h,c){if(Array.isArray(h)){if(!Array.isArray(c)||h.length!==c.length)return!1;for(let f=0;f<h.length;f++)if(!Tt(h[f],c[f]))return!1;return!0}if(typeof h=="object"&&h!==null&&c!==null){if(typeof c!="object"||Object.keys(h).length!==Object.keys(c).length)return!1;for(const f in h)if(!Tt(h[f],c[f]))return!1;return!0}return h===c}function Vt(h,c){h.push(c)}function tn(h,c,f){Vt(f,{command:"addSource",args:[h,c[h]]})}function hn(h,c,f){Vt(c,{command:"removeSource",args:[h]}),f[h]=!0}function on(h,c,f,g){hn(h,f,g),tn(h,c,f)}function kn(h,c,f){let g;for(g in h[f])if(Object.prototype.hasOwnProperty.call(h[f],g)&&g!=="data"&&!Tt(h[f][g],c[f][g]))return!1;for(g in c[f])if(Object.prototype.hasOwnProperty.call(c[f],g)&&g!=="data"&&!Tt(h[f][g],c[f][g]))return!1;return!0}function yn(h,c,f,g,_,C){h=h||{},c=c||{};for(const T in h)Object.prototype.hasOwnProperty.call(h,T)&&(Tt(h[T],c[T])||f.push({command:C,args:[g,T,c[T],_]}));for(const T in c)Object.prototype.hasOwnProperty.call(c,T)&&!Object.prototype.hasOwnProperty.call(h,T)&&(Tt(h[T],c[T])||f.push({command:C,args:[g,T,c[T],_]}))}function ui(h){return h.id}function Oi(h,c){return h[c.id]=c,h}class Qe{constructor(c,f,g,_){this.message=(c?`${c}: `:"")+g,_&&(this.identifier=_),f!=null&&f.__line__&&(this.line=f.__line__)}}function Br(h,...c){for(const f of c)for(const g in f)h[g]=f[g];return h}class kt extends Error{constructor(c,f){super(f),this.message=f,this.key=c}}class Wt{constructor(c,f=[]){this.parent=c,this.bindings={};for(const[g,_]of f)this.bindings[g]=_}concat(c){return new Wt(this,c)}get(c){if(this.bindings[c])return this.bindings[c];if(this.parent)return this.parent.get(c);throw new Error(`${c} not found in scope.`)}has(c){return!!this.bindings[c]||!!this.parent&&this.parent.has(c)}}const wn={kind:"null"},xt={kind:"number"},yr={kind:"string"},Jt={kind:"boolean"},Zn={kind:"color"},vi={kind:"object"},pr={kind:"value"},Ii={kind:"collator"},xs={kind:"formatted"},Di={kind:"padding"},is={kind:"resolvedImage"},me={kind:"variableAnchorOffsetCollection"};function W(h,c){return{kind:"array",itemType:h,N:c}}function H(h){if(h.kind==="array"){const c=H(h.itemType);return typeof h.N=="number"?`array<${c}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${c}>`}return h.kind}const ee=[wn,xt,yr,Jt,Zn,xs,vi,W(pr),Di,is,me];function de(h,c){if(c.kind==="error")return null;if(h.kind==="array"){if(c.kind==="array"&&(c.N===0&&c.itemType.kind==="value"||!de(h.itemType,c.itemType))&&(typeof h.N!="number"||h.N===c.N))return null}else{if(h.kind===c.kind)return null;if(h.kind==="value"){for(const f of ee)if(!de(f,c))return null}}return`Expected ${H(h)} but found ${H(c)} instead.`}function ve(h,c){return c.some(f=>f.kind===h.kind)}function Se(h,c){return c.some(f=>f==="null"?h===null:f==="array"?Array.isArray(h):f==="object"?h&&!Array.isArray(h)&&typeof h=="object":f===typeof h)}function Fe(h,c){return h.kind==="array"&&c.kind==="array"?h.itemType.kind===c.itemType.kind&&typeof h.N=="number":h.kind===c.kind}const be=.96422,tt=.82521,ht=4/29,xe=6/29,ct=3*xe*xe,Rt=xe*xe*xe,rr=Math.PI/180,Nr=180/Math.PI;function Mr(h){return(h%=360)<0&&(h+=360),h}function Kr([h,c,f,g]){let _,C;const T=hi((.2225045*(h=Dr(h))+.7168786*(c=Dr(c))+.0606169*(f=Dr(f)))/1);h===c&&c===f?_=C=T:(_=hi((.4360747*h+.3850649*c+.1430804*f)/be),C=hi((.0139322*h+.0971045*c+.7141733*f)/tt));const P=116*T-16;return[P<0?0:P,500*(_-T),200*(T-C),g]}function Dr(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function hi(h){return h>Rt?Math.pow(h,1/3):h/ct+ht}function Yn([h,c,f,g]){let _=(h+16)/116,C=isNaN(c)?_:_+c/500,T=isNaN(f)?_:_-f/200;return _=1*mn(_),C=be*mn(C),T=tt*mn(T),[Rr(3.1338561*C-1.6168667*_-.4906146*T),Rr(-.9787684*C+1.9161415*_+.033454*T),Rr(.0719453*C-.2289914*_+1.4052427*T),g]}function Rr(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function mn(h){return h>xe?h*h*h:ct*(h-ht)}function Fn(h){return parseInt(h.padEnd(2,h),16)/255}function Pi(h,c){return bi(c?h/100:h,0,1)}function bi(h,c,f){return Math.min(Math.max(c,h),f)}function ss(h){return!h.some(Number.isNaN)}const ja={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class an{constructor(c,f,g,_=1,C=!0){this.r=c,this.g=f,this.b=g,this.a=_,C||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[c,f,g,_]))}static parse(c){if(c instanceof an)return c;if(typeof c!="string")return;const f=function(g){if((g=g.toLowerCase().trim())==="transparent")return[0,0,0,0];const _=ja[g];if(_){const[T,P,z]=_;return[T/255,P/255,z/255,1]}if(g.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(g)){const T=g.length<6?1:2;let P=1;return[Fn(g.slice(P,P+=T)),Fn(g.slice(P,P+=T)),Fn(g.slice(P,P+=T)),Fn(g.slice(P,P+T)||"ff")]}if(g.startsWith("rgb")){const T=g.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[P,z,B,N,q,K,te,se,oe,pe,_e,Ke]=T,Ae=[N||" ",te||" ",pe].join("");if(Ae==="  "||Ae==="  /"||Ae===",,"||Ae===",,,"){const Ue=[B,K,oe].join(""),it=Ue==="%%%"?100:Ue===""?255:0;if(it){const gt=[bi(+z/it,0,1),bi(+q/it,0,1),bi(+se/it,0,1),_e?Pi(+_e,Ke):1];if(ss(gt))return gt}}return}}const C=g.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[T,P,z,B,N,q,K,te,se]=C,oe=[z||" ",N||" ",K].join("");if(oe==="  "||oe==="  /"||oe===",,"||oe===",,,"){const pe=[+P,bi(+B,0,100),bi(+q,0,100),te?Pi(+te,se):1];if(ss(pe))return function([_e,Ke,Ae,Ue]){function it(gt){const $t=(gt+_e/30)%12,gr=Ke*Math.min(Ae,1-Ae);return Ae-gr*Math.max(-1,Math.min($t-3,9-$t,1))}return _e=Mr(_e),Ke/=100,Ae/=100,[it(0),it(8),it(4),Ue]}(pe)}}}(c);return f?new an(...f,!1):void 0}get rgb(){const{r:c,g:f,b:g,a:_}=this,C=_||1/0;return this.overwriteGetter("rgb",[c/C,f/C,g/C,_])}get hcl(){return this.overwriteGetter("hcl",function(c){const[f,g,_,C]=Kr(c),T=Math.sqrt(g*g+_*_);return[Math.round(1e4*T)?Mr(Math.atan2(_,g)*Nr):NaN,T,f,C]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Kr(this.rgb))}overwriteGetter(c,f){return Object.defineProperty(this,c,{value:f}),f}toString(){const[c,f,g,_]=this.rgb;return`rgba(${[c,f,g].map(C=>Math.round(255*C)).join(",")},${_})`}}an.black=new an(0,0,0,1),an.white=new an(1,1,1,1),an.transparent=new an(0,0,0,0),an.red=new an(1,0,0,1);class yf{constructor(c,f,g){this.sensitivity=c?f?"variant":"case":f?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(c,f){return this.collator.compare(c,f)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class wc{constructor(c,f,g,_,C){this.text=c,this.image=f,this.scale=g,this.fontStack=_,this.textColor=C}}class vs{constructor(c){this.sections=c}static fromString(c){return new vs([new wc(c,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(c=>c.text.length!==0||c.image&&c.image.name.length!==0)}static factory(c){return c instanceof vs?c:vs.fromString(c)}toString(){return this.sections.length===0?"":this.sections.map(c=>c.text).join("")}}class $s{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof $s)return c;if(typeof c=="number")return new $s([c,c,c,c]);if(Array.isArray(c)&&!(c.length<1||c.length>4)){for(const f of c)if(typeof f!="number")return;switch(c.length){case 1:c=[c[0],c[0],c[0],c[0]];break;case 2:c=[c[0],c[1],c[0],c[1]];break;case 3:c=[c[0],c[1],c[2],c[1]]}return new $s(c)}}toString(){return JSON.stringify(this.values)}}const b0=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class oo{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof oo)return c;if(Array.isArray(c)&&!(c.length<1)&&c.length%2==0){for(let f=0;f<c.length;f+=2){const g=c[f],_=c[f+1];if(typeof g!="string"||!b0.has(g)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new oo(c)}}toString(){return JSON.stringify(this.values)}}class bs{constructor(c){this.name=c.name,this.available=c.available}toString(){return this.name}static fromString(c){return c?new bs({name:c,available:!1}):null}}function Sc(h,c,f,g){return typeof h=="number"&&h>=0&&h<=255&&typeof c=="number"&&c>=0&&c<=255&&typeof f=="number"&&f>=0&&f<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[h,c,f,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[h,c,f,g]:[h,c,f]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ul(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof an||h instanceof yf||h instanceof vs||h instanceof $s||h instanceof oo||h instanceof bs)return!0;if(Array.isArray(h)){for(const c of h)if(!Ul(c))return!1;return!0}if(typeof h=="object"){for(const c in h)if(!Ul(h[c]))return!1;return!0}return!1}function di(h){if(h===null)return wn;if(typeof h=="string")return yr;if(typeof h=="boolean")return Jt;if(typeof h=="number")return xt;if(h instanceof an)return Zn;if(h instanceof yf)return Ii;if(h instanceof vs)return xs;if(h instanceof $s)return Di;if(h instanceof oo)return me;if(h instanceof bs)return is;if(Array.isArray(h)){const c=h.length;let f;for(const g of h){const _=di(g);if(f){if(f===_)continue;f=pr;break}f=_}return W(f||pr,c)}return vi}function wu(h){const c=typeof h;return h===null?"":c==="string"||c==="number"||c==="boolean"?String(h):h instanceof an||h instanceof vs||h instanceof $s||h instanceof oo||h instanceof bs?h.toString():JSON.stringify(h)}class Co{constructor(c,f){this.type=c,this.value=f}static parse(c,f){if(c.length!==2)return f.error(`'literal' expression requires exactly one argument, but found ${c.length-1} instead.`);if(!Ul(c[1]))return f.error("invalid value");const g=c[1];let _=di(g);const C=f.expectedType;return _.kind!=="array"||_.N!==0||!C||C.kind!=="array"||typeof C.N=="number"&&C.N!==0||(_=C),new Co(_,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class si{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}}const Sh={string:yr,number:xt,boolean:Jt,object:vi};class To{constructor(c,f){this.type=c,this.args=f}static parse(c,f){if(c.length<2)return f.error("Expected at least one argument.");let g,_=1;const C=c[0];if(C==="array"){let P,z;if(c.length>2){const B=c[1];if(typeof B!="string"||!(B in Sh)||B==="object")return f.error('The item type argument of "array" must be one of string, number, boolean',1);P=Sh[B],_++}else P=pr;if(c.length>3){if(c[2]!==null&&(typeof c[2]!="number"||c[2]<0||c[2]!==Math.floor(c[2])))return f.error('The length argument to "array" must be a positive integer literal',2);z=c[2],_++}g=W(P,z)}else{if(!Sh[C])throw new Error(`Types doesn't contain name = ${C}`);g=Sh[C]}const T=[];for(;_<c.length;_++){const P=f.parse(c[_],_,pr);if(!P)return null;T.push(P)}return new To(g,T)}evaluate(c){for(let f=0;f<this.args.length;f++){const g=this.args[f].evaluate(c);if(!de(this.type,di(g)))return g;if(f===this.args.length-1)throw new si(`Expected value to be of type ${H(this.type)}, but found ${H(di(g))} instead.`)}throw new Error}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const xf={"to-boolean":Jt,"to-color":Zn,"to-number":xt,"to-string":yr};class Oo{constructor(c,f){this.type=c,this.args=f}static parse(c,f){if(c.length<2)return f.error("Expected at least one argument.");const g=c[0];if(!xf[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if((g==="to-boolean"||g==="to-string")&&c.length!==2)return f.error("Expected one argument.");const _=xf[g],C=[];for(let T=1;T<c.length;T++){const P=f.parse(c[T],T,pr);if(!P)return null;C.push(P)}return new Oo(_,C)}evaluate(c){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(c);case"color":{let f,g;for(const _ of this.args){if(f=_.evaluate(c),g=null,f instanceof an)return f;if(typeof f=="string"){const C=c.parseColor(f);if(C)return C}else if(Array.isArray(f)&&(g=f.length<3||f.length>4?`Invalid rbga value ${JSON.stringify(f)}: expected an array containing either three or four numeric values.`:Sc(f[0],f[1],f[2],f[3]),!g))return new an(f[0]/255,f[1]/255,f[2]/255,f[3])}throw new si(g||`Could not parse color from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"padding":{let f;for(const g of this.args){f=g.evaluate(c);const _=$s.parse(f);if(_)return _}throw new si(`Could not parse padding from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"variableAnchorOffsetCollection":{let f;for(const g of this.args){f=g.evaluate(c);const _=oo.parse(f);if(_)return _}throw new si(`Could not parse variableAnchorOffsetCollection from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"number":{let f=null;for(const g of this.args){if(f=g.evaluate(c),f===null)return 0;const _=Number(f);if(!isNaN(_))return _}throw new si(`Could not convert ${JSON.stringify(f)} to number.`)}case"formatted":return vs.fromString(wu(this.args[0].evaluate(c)));case"resolvedImage":return bs.fromString(wu(this.args[0].evaluate(c)));default:return wu(this.args[0].evaluate(c))}}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const kh=["Unknown","Point","LineString","Polygon"];class kc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?kh[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(c){let f=this._parseColorCache[c];return f||(f=this._parseColorCache[c]=an.parse(c)),f}}class ql{constructor(c,f,g=[],_,C=new Wt,T=[]){this.registry=c,this.path=g,this.key=g.map(P=>`[${P}]`).join(""),this.scope=C,this.errors=T,this.expectedType=_,this._isConstant=f}parse(c,f,g,_,C={}){return f?this.concat(f,g,_)._parse(c,C):this._parse(c,C)}_parse(c,f){function g(_,C,T){return T==="assert"?new To(C,[_]):T==="coerce"?new Oo(C,[_]):_}if(c!==null&&typeof c!="string"&&typeof c!="boolean"&&typeof c!="number"||(c=["literal",c]),Array.isArray(c)){if(c.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=c[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const C=this.registry[_];if(C){let T=C.parse(c,this);if(!T)return null;if(this.expectedType){const P=this.expectedType,z=T.type;if(P.kind!=="string"&&P.kind!=="number"&&P.kind!=="boolean"&&P.kind!=="object"&&P.kind!=="array"||z.kind!=="value")if(P.kind!=="color"&&P.kind!=="formatted"&&P.kind!=="resolvedImage"||z.kind!=="value"&&z.kind!=="string")if(P.kind!=="padding"||z.kind!=="value"&&z.kind!=="number"&&z.kind!=="array")if(P.kind!=="variableAnchorOffsetCollection"||z.kind!=="value"&&z.kind!=="array"){if(this.checkSubtype(P,z))return null}else T=g(T,P,f.typeAnnotation||"coerce");else T=g(T,P,f.typeAnnotation||"coerce");else T=g(T,P,f.typeAnnotation||"coerce");else T=g(T,P,f.typeAnnotation||"assert")}if(!(T instanceof Co)&&T.type.kind!=="resolvedImage"&&this._isConstant(T)){const P=new kc;try{T=new Co(T.type,T.evaluate(P))}catch(z){return this.error(z.message),null}}return T}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(c===void 0?"'undefined' value invalid. Use null instead.":typeof c=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof c} instead.`)}concat(c,f,g){const _=typeof c=="number"?this.path.concat(c):this.path,C=g?this.scope.concat(g):this.scope;return new ql(this.registry,this._isConstant,_,f||null,C,this.errors)}error(c,...f){const g=`${this.key}${f.map(_=>`[${_}]`).join("")}`;this.errors.push(new kt(g,c))}checkSubtype(c,f){const g=de(c,f);return g&&this.error(g),g}}class ol{constructor(c,f){this.type=f.type,this.bindings=[].concat(c),this.result=f}evaluate(c){return this.result.evaluate(c)}eachChild(c){for(const f of this.bindings)c(f[1]);c(this.result)}static parse(c,f){if(c.length<4)return f.error(`Expected at least 3 arguments, but found ${c.length-1} instead.`);const g=[];for(let C=1;C<c.length-1;C+=2){const T=c[C];if(typeof T!="string")return f.error(`Expected string, but found ${typeof T} instead.`,C);if(/[^a-zA-Z0-9_]/.test(T))return f.error("Variable names must contain only alphanumeric characters or '_'.",C);const P=f.parse(c[C+1],C+1);if(!P)return null;g.push([T,P])}const _=f.parse(c[c.length-1],c.length-1,f.expectedType,g);return _?new ol(g,_):null}outputDefined(){return this.result.outputDefined()}}class Zr{constructor(c,f){this.type=f.type,this.name=c,this.boundExpression=f}static parse(c,f){if(c.length!==2||typeof c[1]!="string")return f.error("'var' expression requires exactly one string literal argument.");const g=c[1];return f.scope.has(g)?new Zr(g,f.scope.get(g)):f.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(c){return this.boundExpression.evaluate(c)}eachChild(){}outputDefined(){return!1}}class vf{constructor(c,f,g){this.type=c,this.index=f,this.input=g}static parse(c,f){if(c.length!==3)return f.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const g=f.parse(c[1],1,xt),_=f.parse(c[2],2,W(f.expectedType||pr));return g&&_?new vf(_.type.itemType,g,_):null}evaluate(c){const f=this.index.evaluate(c),g=this.input.evaluate(c);if(f<0)throw new si(`Array index out of bounds: ${f} < 0.`);if(f>=g.length)throw new si(`Array index out of bounds: ${f} > ${g.length-1}.`);if(f!==Math.floor(f))throw new si(`Array index must be an integer, but found ${f} instead.`);return g[f]}eachChild(c){c(this.index),c(this.input)}outputDefined(){return!1}}class bf{constructor(c,f){this.type=Jt,this.needle=c,this.haystack=f}static parse(c,f){if(c.length!==3)return f.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const g=f.parse(c[1],1,pr),_=f.parse(c[2],2,pr);return g&&_?ve(g.type,[Jt,yr,xt,wn,pr])?new bf(g,_):f.error(`Expected first argument to be of type boolean, string, number or null, but found ${H(g.type)} instead`):null}evaluate(c){const f=this.needle.evaluate(c),g=this.haystack.evaluate(c);if(!g)return!1;if(!Se(f,["boolean","string","number","null"]))throw new si(`Expected first argument to be of type boolean, string, number or null, but found ${H(di(f))} instead.`);if(!Se(g,["string","array"]))throw new si(`Expected second argument to be of type array or string, but found ${H(di(g))} instead.`);return g.indexOf(f)>=0}eachChild(c){c(this.needle),c(this.haystack)}outputDefined(){return!0}}class Cc{constructor(c,f,g){this.type=xt,this.needle=c,this.haystack=f,this.fromIndex=g}static parse(c,f){if(c.length<=2||c.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const g=f.parse(c[1],1,pr),_=f.parse(c[2],2,pr);if(!g||!_)return null;if(!ve(g.type,[Jt,yr,xt,wn,pr]))return f.error(`Expected first argument to be of type boolean, string, number or null, but found ${H(g.type)} instead`);if(c.length===4){const C=f.parse(c[3],3,xt);return C?new Cc(g,_,C):null}return new Cc(g,_)}evaluate(c){const f=this.needle.evaluate(c),g=this.haystack.evaluate(c);if(!Se(f,["boolean","string","number","null"]))throw new si(`Expected first argument to be of type boolean, string, number or null, but found ${H(di(f))} instead.`);let _;if(this.fromIndex&&(_=this.fromIndex.evaluate(c)),Se(g,["string"])){const C=g.indexOf(f,_);return C===-1?-1:[...g.slice(0,C)].length}if(Se(g,["array"]))return g.indexOf(f,_);throw new si(`Expected second argument to be of type array or string, but found ${H(di(g))} instead.`)}eachChild(c){c(this.needle),c(this.haystack),this.fromIndex&&c(this.fromIndex)}outputDefined(){return!1}}class Ch{constructor(c,f,g,_,C,T){this.inputType=c,this.type=f,this.input=g,this.cases=_,this.outputs=C,this.otherwise=T}static parse(c,f){if(c.length<5)return f.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if(c.length%2!=1)return f.error("Expected an even number of arguments.");let g,_;f.expectedType&&f.expectedType.kind!=="value"&&(_=f.expectedType);const C={},T=[];for(let B=2;B<c.length-1;B+=2){let N=c[B];const q=c[B+1];Array.isArray(N)||(N=[N]);const K=f.concat(B);if(N.length===0)return K.error("Expected at least one branch label.");for(const se of N){if(typeof se!="number"&&typeof se!="string")return K.error("Branch labels must be numbers or strings.");if(typeof se=="number"&&Math.abs(se)>Number.MAX_SAFE_INTEGER)return K.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof se=="number"&&Math.floor(se)!==se)return K.error("Numeric branch labels must be integer values.");if(g){if(K.checkSubtype(g,di(se)))return null}else g=di(se);if(C[String(se)]!==void 0)return K.error("Branch labels must be unique.");C[String(se)]=T.length}const te=f.parse(q,B,_);if(!te)return null;_=_||te.type,T.push(te)}const P=f.parse(c[1],1,pr);if(!P)return null;const z=f.parse(c[c.length-1],c.length-1,_);return z?P.type.kind!=="value"&&f.concat(1).checkSubtype(g,P.type)?null:new Ch(g,_,P,C,T,z):null}evaluate(c){const f=this.input.evaluate(c);return(di(f)===this.inputType&&this.outputs[this.cases[f]]||this.otherwise).evaluate(c)}eachChild(c){c(this.input),this.outputs.forEach(c),c(this.otherwise)}outputDefined(){return this.outputs.every(c=>c.outputDefined())&&this.otherwise.outputDefined()}}class Th{constructor(c,f,g){this.type=c,this.branches=f,this.otherwise=g}static parse(c,f){if(c.length<4)return f.error(`Expected at least 3 arguments, but found only ${c.length-1}.`);if(c.length%2!=0)return f.error("Expected an odd number of arguments.");let g;f.expectedType&&f.expectedType.kind!=="value"&&(g=f.expectedType);const _=[];for(let T=1;T<c.length-1;T+=2){const P=f.parse(c[T],T,Jt);if(!P)return null;const z=f.parse(c[T+1],T+1,g);if(!z)return null;_.push([P,z]),g=g||z.type}const C=f.parse(c[c.length-1],c.length-1,g);if(!C)return null;if(!g)throw new Error("Can't infer output type");return new Th(g,_,C)}evaluate(c){for(const[f,g]of this.branches)if(f.evaluate(c))return g.evaluate(c);return this.otherwise.evaluate(c)}eachChild(c){for(const[f,g]of this.branches)c(f),c(g);c(this.otherwise)}outputDefined(){return this.branches.every(([c,f])=>f.outputDefined())&&this.otherwise.outputDefined()}}class Su{constructor(c,f,g,_){this.type=c,this.input=f,this.beginIndex=g,this.endIndex=_}static parse(c,f){if(c.length<=2||c.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const g=f.parse(c[1],1,pr),_=f.parse(c[2],2,xt);if(!g||!_)return null;if(!ve(g.type,[W(pr),yr,pr]))return f.error(`Expected first argument to be of type array or string, but found ${H(g.type)} instead`);if(c.length===4){const C=f.parse(c[3],3,xt);return C?new Su(g.type,g,_,C):null}return new Su(g.type,g,_)}evaluate(c){const f=this.input.evaluate(c),g=this.beginIndex.evaluate(c);let _;if(this.endIndex&&(_=this.endIndex.evaluate(c)),Se(f,["string"]))return[...f].slice(g,_).join("");if(Se(f,["array"]))return f.slice(g,_);throw new si(`Expected first argument to be of type array or string, but found ${H(di(f))} instead.`)}eachChild(c){c(this.input),c(this.beginIndex),this.endIndex&&c(this.endIndex)}outputDefined(){return!1}}function Oh(h,c){const f=h.length-1;let g,_,C=0,T=f,P=0;for(;C<=T;)if(P=Math.floor((C+T)/2),g=h[P],_=h[P+1],g<=c){if(P===f||c<_)return P;C=P+1}else{if(!(g>c))throw new si("Input is not a number.");T=P-1}return 0}class al{constructor(c,f,g){this.type=c,this.input=f,this.labels=[],this.outputs=[];for(const[_,C]of g)this.labels.push(_),this.outputs.push(C)}static parse(c,f){if(c.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return f.error("Expected an even number of arguments.");const g=f.parse(c[1],1,xt);if(!g)return null;const _=[];let C=null;f.expectedType&&f.expectedType.kind!=="value"&&(C=f.expectedType);for(let T=1;T<c.length;T+=2){const P=T===1?-1/0:c[T],z=c[T+1],B=T,N=T+1;if(typeof P!="number")return f.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(_.length&&_[_.length-1][0]>=P)return f.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',B);const q=f.parse(z,N,C);if(!q)return null;C=C||q.type,_.push([P,q])}return new al(C,g,_)}evaluate(c){const f=this.labels,g=this.outputs;if(f.length===1)return g[0].evaluate(c);const _=this.input.evaluate(c);if(_<=f[0])return g[0].evaluate(c);const C=f.length;return _>=f[C-1]?g[C-1].evaluate(c):g[Oh(f,_)].evaluate(c)}eachChild(c){c(this.input);for(const f of this.outputs)c(f)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function fm(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var _0=pm;function pm(h,c,f,g){this.cx=3*h,this.bx=3*(f-h)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(g-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=h,this.p1y=c,this.p2x=f,this.p2y=g}pm.prototype={sampleCurveX:function(h){return((this.ax*h+this.bx)*h+this.cx)*h},sampleCurveY:function(h){return((this.ay*h+this.by)*h+this.cy)*h},sampleCurveDerivativeX:function(h){return(3*this.ax*h+2*this.bx)*h+this.cx},solveCurveX:function(h,c){if(c===void 0&&(c=1e-6),h<0)return 0;if(h>1)return 1;for(var f=h,g=0;g<8;g++){var _=this.sampleCurveX(f)-h;if(Math.abs(_)<c)return f;var C=this.sampleCurveDerivativeX(f);if(Math.abs(C)<1e-6)break;f-=_/C}var T=0,P=1;for(f=h,g=0;g<20&&(_=this.sampleCurveX(f),!(Math.abs(_-h)<c));g++)h>_?T=f:P=f,f=.5*(P-T)+T;return f},solve:function(h,c){return this.sampleCurveY(this.solveCurveX(h,c))}};var Ph=fm(_0);function Aa(h,c,f){return h+f*(c-h)}function Ql(h,c,f){return h.map((g,_)=>Aa(g,c[_],f))}const qi={number:Aa,color:function(h,c,f,g="rgb"){switch(g){case"rgb":{const[_,C,T,P]=Ql(h.rgb,c.rgb,f);return new an(_,C,T,P,!1)}case"hcl":{const[_,C,T,P]=h.hcl,[z,B,N,q]=c.hcl;let K,te;if(isNaN(_)||isNaN(z))isNaN(_)?isNaN(z)?K=NaN:(K=z,T!==1&&T!==0||(te=B)):(K=_,N!==1&&N!==0||(te=C));else{let Ke=z-_;z>_&&Ke>180?Ke-=360:z<_&&_-z>180&&(Ke+=360),K=_+f*Ke}const[se,oe,pe,_e]=function([Ke,Ae,Ue,it]){return Ke=isNaN(Ke)?0:Ke*rr,Yn([Ue,Math.cos(Ke)*Ae,Math.sin(Ke)*Ae,it])}([K,te??Aa(C,B,f),Aa(T,N,f),Aa(P,q,f)]);return new an(se,oe,pe,_e,!1)}case"lab":{const[_,C,T,P]=Yn(Ql(h.lab,c.lab,f));return new an(_,C,T,P,!1)}}},array:Ql,padding:function(h,c,f){return new $s(Ql(h.values,c.values,f))},variableAnchorOffsetCollection:function(h,c,f){const g=h.values,_=c.values;if(g.length!==_.length)throw new si(`Cannot interpolate values of different length. from: ${h.toString()}, to: ${c.toString()}`);const C=[];for(let T=0;T<g.length;T+=2){if(g[T]!==_[T])throw new si(`Cannot interpolate values containing mismatched anchors. from[${T}]: ${g[T]}, to[${T}]: ${_[T]}`);C.push(g[T]);const[P,z]=g[T+1],[B,N]=_[T+1];C.push([Aa(P,B,f),Aa(z,N,f)])}return new oo(C)}};class _s{constructor(c,f,g,_,C){this.type=c,this.operator=f,this.interpolation=g,this.input=_,this.labels=[],this.outputs=[];for(const[T,P]of C)this.labels.push(T),this.outputs.push(P)}static interpolationFactor(c,f,g,_){let C=0;if(c.name==="exponential")C=ku(f,c.base,g,_);else if(c.name==="linear")C=ku(f,1,g,_);else if(c.name==="cubic-bezier"){const T=c.controlPoints;C=new Ph(T[0],T[1],T[2],T[3]).solve(ku(f,1,g,_))}return C}static parse(c,f){let[g,_,C,...T]=c;if(!Array.isArray(_)||_.length===0)return f.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const B=_[1];if(typeof B!="number")return f.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:B}}else{if(_[0]!=="cubic-bezier")return f.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const B=_.slice(1);if(B.length!==4||B.some(N=>typeof N!="number"||N<0||N>1))return f.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:B}}}if(c.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return f.error("Expected an even number of arguments.");if(C=f.parse(C,2,xt),!C)return null;const P=[];let z=null;g==="interpolate-hcl"||g==="interpolate-lab"?z=Zn:f.expectedType&&f.expectedType.kind!=="value"&&(z=f.expectedType);for(let B=0;B<T.length;B+=2){const N=T[B],q=T[B+1],K=B+3,te=B+4;if(typeof N!="number")return f.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',K);if(P.length&&P[P.length-1][0]>=N)return f.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',K);const se=f.parse(q,te,z);if(!se)return null;z=z||se.type,P.push([N,se])}return Fe(z,xt)||Fe(z,Zn)||Fe(z,Di)||Fe(z,me)||Fe(z,W(xt))?new _s(z,g,_,C,P):f.error(`Type ${H(z)} is not interpolatable.`)}evaluate(c){const f=this.labels,g=this.outputs;if(f.length===1)return g[0].evaluate(c);const _=this.input.evaluate(c);if(_<=f[0])return g[0].evaluate(c);const C=f.length;if(_>=f[C-1])return g[C-1].evaluate(c);const T=Oh(f,_),P=_s.interpolationFactor(this.interpolation,_,f[T],f[T+1]),z=g[T].evaluate(c),B=g[T+1].evaluate(c);switch(this.operator){case"interpolate":return qi[this.type.kind](z,B,P);case"interpolate-hcl":return qi.color(z,B,P,"hcl");case"interpolate-lab":return qi.color(z,B,P,"lab")}}eachChild(c){c(this.input);for(const f of this.outputs)c(f)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function ku(h,c,f,g){const _=g-f,C=h-f;return _===0?0:c===1?C/_:(Math.pow(c,C)-1)/(Math.pow(c,_)-1)}class Tc{constructor(c,f){this.type=c,this.args=f}static parse(c,f){if(c.length<2)return f.error("Expectected at least one argument.");let g=null;const _=f.expectedType;_&&_.kind!=="value"&&(g=_);const C=[];for(const P of c.slice(1)){const z=f.parse(P,1+C.length,g,void 0,{typeAnnotation:"omit"});if(!z)return null;g=g||z.type,C.push(z)}if(!g)throw new Error("No output type");const T=_&&C.some(P=>de(_,P.type));return new Tc(T?pr:g,C)}evaluate(c){let f,g=null,_=0;for(const C of this.args)if(_++,g=C.evaluate(c),g&&g instanceof bs&&!g.available&&(f||(f=g.name),g=null,_===this.args.length&&(g=f)),g!==null)break;return g}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}function Cu(h,c){return h==="=="||h==="!="?c.kind==="boolean"||c.kind==="string"||c.kind==="number"||c.kind==="null"||c.kind==="value":c.kind==="string"||c.kind==="number"||c.kind==="value"}function ll(h,c,f,g){return g.compare(c,f)===0}function Xo(h,c,f){const g=h!=="=="&&h!=="!=";return class _U{constructor(C,T,P){this.type=Jt,this.lhs=C,this.rhs=T,this.collator=P,this.hasUntypedArgument=C.type.kind==="value"||T.type.kind==="value"}static parse(C,T){if(C.length!==3&&C.length!==4)return T.error("Expected two or three arguments.");const P=C[0];let z=T.parse(C[1],1,pr);if(!z)return null;if(!Cu(P,z.type))return T.concat(1).error(`"${P}" comparisons are not supported for type '${H(z.type)}'.`);let B=T.parse(C[2],2,pr);if(!B)return null;if(!Cu(P,B.type))return T.concat(2).error(`"${P}" comparisons are not supported for type '${H(B.type)}'.`);if(z.type.kind!==B.type.kind&&z.type.kind!=="value"&&B.type.kind!=="value")return T.error(`Cannot compare types '${H(z.type)}' and '${H(B.type)}'.`);g&&(z.type.kind==="value"&&B.type.kind!=="value"?z=new To(B.type,[z]):z.type.kind!=="value"&&B.type.kind==="value"&&(B=new To(z.type,[B])));let N=null;if(C.length===4){if(z.type.kind!=="string"&&B.type.kind!=="string"&&z.type.kind!=="value"&&B.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(N=T.parse(C[3],3,Ii),!N)return null}return new _U(z,B,N)}evaluate(C){const T=this.lhs.evaluate(C),P=this.rhs.evaluate(C);if(g&&this.hasUntypedArgument){const z=di(T),B=di(P);if(z.kind!==B.kind||z.kind!=="string"&&z.kind!=="number")throw new si(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${z.kind}, ${B.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const z=di(T),B=di(P);if(z.kind!=="string"||B.kind!=="string")return c(C,T,P)}return this.collator?f(C,T,P,this.collator.evaluate(C)):c(C,T,P)}eachChild(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)}outputDefined(){return!0}}}const w0=Xo("==",function(h,c,f){return c===f},ll),_f=Xo("!=",function(h,c,f){return c!==f},function(h,c,f,g){return!ll(0,c,f,g)}),mm=Xo("<",function(h,c,f){return c<f},function(h,c,f,g){return g.compare(c,f)<0}),gm=Xo(">",function(h,c,f){return c>f},function(h,c,f,g){return g.compare(c,f)>0}),S0=Xo("<=",function(h,c,f){return c<=f},function(h,c,f,g){return g.compare(c,f)<=0}),ym=Xo(">=",function(h,c,f){return c>=f},function(h,c,f,g){return g.compare(c,f)>=0});class Oc{constructor(c,f,g){this.type=Ii,this.locale=g,this.caseSensitive=c,this.diacriticSensitive=f}static parse(c,f){if(c.length!==2)return f.error("Expected one argument.");const g=c[1];if(typeof g!="object"||Array.isArray(g))return f.error("Collator options argument must be an object.");const _=f.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,Jt);if(!_)return null;const C=f.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,Jt);if(!C)return null;let T=null;return g.locale&&(T=f.parse(g.locale,1,yr),!T)?null:new Oc(_,C,T)}evaluate(c){return new yf(this.caseSensitive.evaluate(c),this.diacriticSensitive.evaluate(c),this.locale?this.locale.evaluate(c):null)}eachChild(c){c(this.caseSensitive),c(this.diacriticSensitive),this.locale&&c(this.locale)}outputDefined(){return!1}}class wf{constructor(c,f,g,_,C){this.type=yr,this.number=c,this.locale=f,this.currency=g,this.minFractionDigits=_,this.maxFractionDigits=C}static parse(c,f){if(c.length!==3)return f.error("Expected two arguments.");const g=f.parse(c[1],1,xt);if(!g)return null;const _=c[2];if(typeof _!="object"||Array.isArray(_))return f.error("NumberFormat options argument must be an object.");let C=null;if(_.locale&&(C=f.parse(_.locale,1,yr),!C))return null;let T=null;if(_.currency&&(T=f.parse(_.currency,1,yr),!T))return null;let P=null;if(_["min-fraction-digits"]&&(P=f.parse(_["min-fraction-digits"],1,xt),!P))return null;let z=null;return _["max-fraction-digits"]&&(z=f.parse(_["max-fraction-digits"],1,xt),!z)?null:new wf(g,C,T,P,z)}evaluate(c){return new Intl.NumberFormat(this.locale?this.locale.evaluate(c):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(c):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(c):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(c):void 0}).format(this.number.evaluate(c))}eachChild(c){c(this.number),this.locale&&c(this.locale),this.currency&&c(this.currency),this.minFractionDigits&&c(this.minFractionDigits),this.maxFractionDigits&&c(this.maxFractionDigits)}outputDefined(){return!1}}class ge{constructor(c){this.type=xs,this.sections=c}static parse(c,f){if(c.length<2)return f.error("Expected at least one argument.");const g=c[1];if(!Array.isArray(g)&&typeof g=="object")return f.error("First argument must be an image or text section.");const _=[];let C=!1;for(let T=1;T<=c.length-1;++T){const P=c[T];if(C&&typeof P=="object"&&!Array.isArray(P)){C=!1;let z=null;if(P["font-scale"]&&(z=f.parse(P["font-scale"],1,xt),!z))return null;let B=null;if(P["text-font"]&&(B=f.parse(P["text-font"],1,W(yr)),!B))return null;let N=null;if(P["text-color"]&&(N=f.parse(P["text-color"],1,Zn),!N))return null;const q=_[_.length-1];q.scale=z,q.font=B,q.textColor=N}else{const z=f.parse(c[T],1,pr);if(!z)return null;const B=z.type.kind;if(B!=="string"&&B!=="value"&&B!=="null"&&B!=="resolvedImage")return f.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,_.push({content:z,scale:null,font:null,textColor:null})}}return new ge(_)}evaluate(c){return new vs(this.sections.map(f=>{const g=f.content.evaluate(c);return di(g)===is?new wc("",g,null,null,null):new wc(wu(g),null,f.scale?f.scale.evaluate(c):null,f.font?f.font.evaluate(c).join(","):null,f.textColor?f.textColor.evaluate(c):null)}))}eachChild(c){for(const f of this.sections)c(f.content),f.scale&&c(f.scale),f.font&&c(f.font),f.textColor&&c(f.textColor)}outputDefined(){return!1}}class $e{constructor(c){this.type=is,this.input=c}static parse(c,f){if(c.length!==2)return f.error("Expected two arguments.");const g=f.parse(c[1],1,yr);return g?new $e(g):f.error("No image name provided.")}evaluate(c){const f=this.input.evaluate(c),g=bs.fromString(f);return g&&c.availableImages&&(g.available=c.availableImages.indexOf(f)>-1),g}eachChild(c){c(this.input)}outputDefined(){return!1}}class ot{constructor(c){this.type=xt,this.input=c}static parse(c,f){if(c.length!==2)return f.error(`Expected 1 argument, but found ${c.length-1} instead.`);const g=f.parse(c[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?f.error(`Expected argument of type string or array, but found ${H(g.type)} instead.`):new ot(g):null}evaluate(c){const f=this.input.evaluate(c);if(typeof f=="string")return[...f].length;if(Array.isArray(f))return f.length;throw new si(`Expected value to be of type string or array, but found ${H(di(f))} instead.`)}eachChild(c){c(this.input)}outputDefined(){return!1}}const Zt=8192;function Yr(h,c){const f=(180+h[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,_=Math.pow(2,c.z);return[Math.round(f*_*Zt),Math.round(g*_*Zt)]}function xn(h,c){const f=Math.pow(2,c.z);return[(_=(h[0]/Zt+c.x)/f,360*_-180),(g=(h[1]/Zt+c.y)/f,360/Math.PI*Math.atan(Math.exp((180-360*g)*Math.PI/180))-90)];var g,_}function gn(h,c){h[0]=Math.min(h[0],c[0]),h[1]=Math.min(h[1],c[1]),h[2]=Math.max(h[2],c[0]),h[3]=Math.max(h[3],c[1])}function Ur(h,c){return!(h[0]<=c[0]||h[2]>=c[2]||h[1]<=c[1]||h[3]>=c[3])}function xr(h,c,f){const g=h[0]-c[0],_=h[1]-c[1],C=h[0]-f[0],T=h[1]-f[1];return g*T-C*_==0&&g*C<=0&&_*T<=0}function ws(h,c,f,g){return(_=[g[0]-f[0],g[1]-f[1]])[0]*(C=[c[0]-h[0],c[1]-h[1]])[1]-_[1]*C[0]!=0&&!(!F1(h,c,f,g)||!F1(f,g,h,c));var _,C}function Ns(h,c,f){for(const g of f)for(let _=0;_<g.length-1;++_)if(ws(h,c,g[_],g[_+1]))return!0;return!1}function Ko(h,c,f=!1){let g=!1;for(const P of c)for(let z=0;z<P.length-1;z++){if(xr(h,P[z],P[z+1]))return f;(C=P[z])[1]>(_=h)[1]!=(T=P[z+1])[1]>_[1]&&_[0]<(T[0]-C[0])*(_[1]-C[1])/(T[1]-C[1])+C[0]&&(g=!g)}var _,C,T;return g}function Sf(h,c){for(const f of c)if(Ko(h,f))return!0;return!1}function jh(h,c){for(const f of h)if(!Ko(f,c))return!1;for(let f=0;f<h.length-1;++f)if(Ns(h[f],h[f+1],c))return!1;return!0}function xm(h,c){for(const f of c)if(jh(h,f))return!0;return!1}function F1(h,c,f,g){const _=g[0]-f[0],C=g[1]-f[1],T=(h[0]-f[0])*C-_*(h[1]-f[1]),P=(c[0]-f[0])*C-_*(c[1]-f[1]);return T>0&&P<0||T<0&&P>0}function k0(h,c,f){const g=[];for(let _=0;_<h.length;_++){const C=[];for(let T=0;T<h[_].length;T++){const P=Yr(h[_][T],f);gn(c,P),C.push(P)}g.push(C)}return g}function B1(h,c,f){const g=[];for(let _=0;_<h.length;_++){const C=k0(h[_],c,f);g.push(C)}return g}function $1(h,c,f,g){if(h[0]<f[0]||h[0]>f[2]){const _=.5*g;let C=h[0]-f[0]>_?-g:f[0]-h[0]>_?g:0;C===0&&(C=h[0]-f[2]>_?-g:f[2]-h[0]>_?g:0),h[0]+=C}gn(c,h)}function N1(h,c,f,g){const _=Math.pow(2,g.z)*Zt,C=[g.x*Zt,g.y*Zt],T=[];for(const P of h)for(const z of P){const B=[z.x+C[0],z.y+C[1]];$1(B,c,f,_),T.push(B)}return T}function V1(h,c,f,g){const _=Math.pow(2,g.z)*Zt,C=[g.x*Zt,g.y*Zt],T=[];for(const z of h){const B=[];for(const N of z){const q=[N.x+C[0],N.y+C[1]];gn(c,q),B.push(q)}T.push(B)}if(c[2]-c[0]<=_/2){(P=c)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(const z of T)for(const B of z)$1(B,c,f,_)}var P;return T}class Tu{constructor(c,f){this.type=Jt,this.geojson=c,this.geometries=f}static parse(c,f){if(c.length!==2)return f.error(`'within' expression requires exactly one argument, but found ${c.length-1} instead.`);if(Ul(c[1])){const g=c[1];if(g.type==="FeatureCollection"){const _=[];for(const C of g.features){const{type:T,coordinates:P}=C.geometry;T==="Polygon"&&_.push(P),T==="MultiPolygon"&&_.push(...P)}if(_.length)return new Tu(g,{type:"MultiPolygon",coordinates:_})}else if(g.type==="Feature"){const _=g.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Tu(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new Tu(g,g)}return f.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return function(f,g){const _=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],T=f.canonicalID();if(g.type==="Polygon"){const P=k0(g.coordinates,C,T),z=N1(f.geometry(),_,C,T);if(!Ur(_,C))return!1;for(const B of z)if(!Ko(B,P))return!1}if(g.type==="MultiPolygon"){const P=B1(g.coordinates,C,T),z=N1(f.geometry(),_,C,T);if(!Ur(_,C))return!1;for(const B of z)if(!Sf(B,P))return!1}return!0}(c,this.geometries);if(c.geometryType()==="LineString")return function(f,g){const _=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],T=f.canonicalID();if(g.type==="Polygon"){const P=k0(g.coordinates,C,T),z=V1(f.geometry(),_,C,T);if(!Ur(_,C))return!1;for(const B of z)if(!jh(B,P))return!1}if(g.type==="MultiPolygon"){const P=B1(g.coordinates,C,T),z=V1(f.geometry(),_,C,T);if(!Ur(_,C))return!1;for(const B of z)if(!xm(B,P))return!1}return!0}(c,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let W1=class{constructor(h=[],c=(f,g)=>f<g?-1:f>g?1:0){if(this.data=h,this.length=this.data.length,this.compare=c,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(h){this.data.push(h),this._up(this.length++)}pop(){if(this.length===0)return;const h=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),h}peek(){return this.data[0]}_up(h){const{data:c,compare:f}=this,g=c[h];for(;h>0;){const _=h-1>>1,C=c[_];if(f(g,C)>=0)break;c[h]=C,h=_}c[h]=g}_down(h){const{data:c,compare:f}=this,g=this.length>>1,_=c[h];for(;h<g;){let C=1+(h<<1);const T=C+1;if(T<this.length&&f(c[T],c[C])<0&&(C=T),f(c[C],_)>=0)break;c[h]=c[C],h=C}c[h]=_}};function wC(h,c,f,g,_){U1(h,c,f,g||h.length-1,_||SC)}function U1(h,c,f,g,_){for(;g>f;){if(g-f>600){var C=g-f+1,T=c-f+1,P=Math.log(C),z=.5*Math.exp(2*P/3),B=.5*Math.sqrt(P*z*(C-z)/C)*(T-C/2<0?-1:1);U1(h,c,Math.max(f,Math.floor(c-T*z/C+B)),Math.min(g,Math.floor(c+(C-T)*z/C+B)),_)}var N=h[c],q=f,K=g;for(kf(h,f,c),_(h[g],N)>0&&kf(h,f,g);q<K;){for(kf(h,q,K),q++,K--;_(h[q],N)<0;)q++;for(;_(h[K],N)>0;)K--}_(h[f],N)===0?kf(h,f,K):kf(h,++K,g),K<=c&&(f=K+1),c<=K&&(g=K-1)}}function kf(h,c,f){var g=h[c];h[c]=h[f],h[f]=g}function SC(h,c){return h<c?-1:h>c?1:0}function vm(h,c){if(h.length<=1)return[h];const f=[];let g,_;for(const C of h){const T=CC(C);T!==0&&(C.area=Math.abs(T),_===void 0&&(_=T<0),_===T<0?(g&&f.push(g),g=[C]):g.push(C))}if(g&&f.push(g),c>1)for(let C=0;C<f.length;C++)f[C].length<=c||(wC(f[C],c,1,f[C].length-1,kC),f[C]=f[C].slice(0,c));return f}function kC(h,c){return c.area-h.area}function CC(h){let c=0;for(let f,g,_=0,C=h.length,T=C-1;_<C;T=_++)f=h[_],g=h[T],c+=(g.x-f.x)*(f.y+g.y);return c}const q1=1/298.257223563,Q1=q1*(2-q1),H1=Math.PI/180;class C0{constructor(c){const f=6378.137*H1*1e3,g=Math.cos(c*H1),_=1/(1-Q1*(1-g*g)),C=Math.sqrt(_);this.kx=f*C*g,this.ky=f*C*_*(1-Q1)}distance(c,f){const g=this.wrap(c[0]-f[0])*this.kx,_=(c[1]-f[1])*this.ky;return Math.sqrt(g*g+_*_)}pointOnLine(c,f){let g,_,C,T,P=1/0;for(let z=0;z<c.length-1;z++){let B=c[z][0],N=c[z][1],q=this.wrap(c[z+1][0]-B)*this.kx,K=(c[z+1][1]-N)*this.ky,te=0;q===0&&K===0||(te=(this.wrap(f[0]-B)*this.kx*q+(f[1]-N)*this.ky*K)/(q*q+K*K),te>1?(B=c[z+1][0],N=c[z+1][1]):te>0&&(B+=q/this.kx*te,N+=K/this.ky*te)),q=this.wrap(f[0]-B)*this.kx,K=(f[1]-N)*this.ky;const se=q*q+K*K;se<P&&(P=se,g=B,_=N,C=z,T=te)}return{point:[g,_],index:C,t:Math.max(0,Math.min(1,T))}}wrap(c){for(;c<-180;)c+=360;for(;c>180;)c-=360;return c}}function G1(h,c){return c[0]-h[0]}function bm(h){return h[1]-h[0]+1}function Hl(h,c){return h[1]>=h[0]&&h[1]<c}function T0(h,c){if(h[0]>h[1])return[null,null];const f=bm(h);if(c){if(f===2)return[h,null];const _=Math.floor(f/2);return[[h[0],h[0]+_],[h[0]+_,h[1]]]}if(f===1)return[h,null];const g=Math.floor(f/2)-1;return[[h[0],h[0]+g],[h[0]+g+1,h[1]]]}function O0(h,c){if(!Hl(c,h.length))return[1/0,1/0,-1/0,-1/0];const f=[1/0,1/0,-1/0,-1/0];for(let g=c[0];g<=c[1];++g)gn(f,h[g]);return f}function P0(h){const c=[1/0,1/0,-1/0,-1/0];for(const f of h)for(const g of f)gn(c,g);return c}function _m(h){return h[0]!==-1/0&&h[1]!==-1/0&&h[2]!==1/0&&h[3]!==1/0}function j0(h,c,f){if(!_m(h)||!_m(c))return NaN;let g=0,_=0;return h[2]<c[0]&&(g=c[0]-h[2]),h[0]>c[2]&&(g=h[0]-c[2]),h[1]>c[3]&&(_=h[1]-c[3]),h[3]<c[1]&&(_=c[1]-h[3]),f.distance([0,0],[g,_])}function Ou(h,c,f){const g=f.pointOnLine(c,h);return f.distance(h,g.point)}function A0(h,c,f,g,_){const C=Math.min(Ou(h,[f,g],_),Ou(c,[f,g],_)),T=Math.min(Ou(f,[h,c],_),Ou(g,[h,c],_));return Math.min(C,T)}function TC(h,c,f,g,_){if(!Hl(c,h.length)||!Hl(g,f.length))return 1/0;let C=1/0;for(let T=c[0];T<c[1];++T){const P=h[T],z=h[T+1];for(let B=g[0];B<g[1];++B){const N=f[B],q=f[B+1];if(ws(P,z,N,q))return 0;C=Math.min(C,A0(P,z,N,q,_))}}return C}function fi(h,c,f,g,_){if(!Hl(c,h.length)||!Hl(g,f.length))return NaN;let C=1/0;for(let T=c[0];T<=c[1];++T)for(let P=g[0];P<=g[1];++P)if(C=Math.min(C,_.distance(h[T],f[P])),C===0)return C;return C}function OC(h,c,f){if(Ko(h,c,!0))return 0;let g=1/0;for(const _ of c){const C=_[0],T=_[_.length-1];if(C!==T&&(g=Math.min(g,Ou(h,[T,C],f)),g===0))return g;const P=f.pointOnLine(_,h);if(g=Math.min(g,f.distance(h,P.point)),g===0)return g}return g}function Vr(h,c,f,g){if(!Hl(c,h.length))return NaN;for(let C=c[0];C<=c[1];++C)if(Ko(h[C],f,!0))return 0;let _=1/0;for(let C=c[0];C<c[1];++C){const T=h[C],P=h[C+1];for(const z of f)for(let B=0,N=z.length,q=N-1;B<N;q=B++){const K=z[q],te=z[B];if(ws(T,P,K,te))return 0;_=Math.min(_,A0(T,P,K,te,g))}}return _}function wm(h,c){for(const f of h)for(const g of f)if(Ko(g,c,!0))return!0;return!1}function Bn(h,c,f,g=1/0){const _=P0(h),C=P0(c);if(g!==1/0&&j0(_,C,f)>=g)return g;if(Ur(_,C)){if(wm(h,c))return 0}else if(wm(c,h))return 0;let T=1/0;for(const P of h)for(let z=0,B=P.length,N=B-1;z<B;N=z++){const q=P[N],K=P[z];for(const te of c)for(let se=0,oe=te.length,pe=oe-1;se<oe;pe=se++){const _e=te[pe],Ke=te[se];if(ws(q,K,_e,Ke))return 0;T=Math.min(T,A0(q,K,_e,Ke,f))}}return T}function Cn(h,c,f,g,_,C){if(!C)return;const T=j0(O0(g,C),_,f);T<c&&h.push([T,C,[0,0]])}function Pu(h,c,f,g,_,C,T){if(!C||!T)return;const P=j0(O0(g,C),O0(_,T),f);P<c&&h.push([P,C,T])}function Cf(h,c,f,g,_=1/0){let C=Math.min(g.distance(h[0],f[0][0]),_);if(C===0)return C;const T=new W1([[0,[0,h.length-1],[0,0]]],G1),P=P0(f);for(;T.length>0;){const z=T.pop();if(z[0]>=C)continue;const B=z[1],N=c?50:100;if(bm(B)<=N){if(!Hl(B,h.length))return NaN;if(c){const q=Vr(h,B,f,g);if(isNaN(q)||q===0)return q;C=Math.min(C,q)}else for(let q=B[0];q<=B[1];++q){const K=OC(h[q],f,g);if(C=Math.min(C,K),C===0)return 0}}else{const q=T0(B,c);Cn(T,C,g,h,P,q[0]),Cn(T,C,g,h,P,q[1])}}return C}function Tf(h,c,f,g,_,C=1/0){let T=Math.min(C,_.distance(h[0],f[0]));if(T===0)return T;const P=new W1([[0,[0,h.length-1],[0,f.length-1]]],G1);for(;P.length>0;){const z=P.pop();if(z[0]>=T)continue;const B=z[1],N=z[2],q=c?50:100,K=g?50:100;if(bm(B)<=q&&bm(N)<=K){if(!Hl(B,h.length)&&Hl(N,f.length))return NaN;let te;if(c&&g)te=TC(h,B,f,N,_),T=Math.min(T,te);else if(c&&!g){const se=h.slice(B[0],B[1]+1);for(let oe=N[0];oe<=N[1];++oe)if(te=Ou(f[oe],se,_),T=Math.min(T,te),T===0)return T}else if(!c&&g){const se=f.slice(N[0],N[1]+1);for(let oe=B[0];oe<=B[1];++oe)if(te=Ou(h[oe],se,_),T=Math.min(T,te),T===0)return T}else te=fi(h,B,f,N,_),T=Math.min(T,te)}else{const te=T0(B,c),se=T0(N,g);Pu(P,T,_,h,f,te[0],se[0]),Pu(P,T,_,h,f,te[0],se[1]),Pu(P,T,_,h,f,te[1],se[0]),Pu(P,T,_,h,f,te[1],se[1])}}return T}function E0(h){return h.type==="MultiPolygon"?h.coordinates.map(c=>({type:"Polygon",coordinates:c})):h.type==="MultiLineString"?h.coordinates.map(c=>({type:"LineString",coordinates:c})):h.type==="MultiPoint"?h.coordinates.map(c=>({type:"Point",coordinates:c})):[h]}class ju{constructor(c,f){this.type=xt,this.geojson=c,this.geometries=f}static parse(c,f){if(c.length!==2)return f.error(`'distance' expression requires exactly one argument, but found ${c.length-1} instead.`);if(Ul(c[1])){const g=c[1];if(g.type==="FeatureCollection")return new ju(g,g.features.map(_=>E0(_.geometry)).flat());if(g.type==="Feature")return new ju(g,E0(g.geometry));if("type"in g&&"coordinates"in g)return new ju(g,E0(g))}return f.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return function(f,g){const _=f.geometry(),C=_.flat().map(z=>xn([z.x,z.y],f.canonical));if(_.length===0)return NaN;const T=new C0(C[0][1]);let P=1/0;for(const z of g){switch(z.type){case"Point":P=Math.min(P,Tf(C,!1,[z.coordinates],!1,T,P));break;case"LineString":P=Math.min(P,Tf(C,!1,z.coordinates,!0,T,P));break;case"Polygon":P=Math.min(P,Cf(C,!1,z.coordinates,T,P))}if(P===0)return P}return P}(c,this.geometries);if(c.geometryType()==="LineString")return function(f,g){const _=f.geometry(),C=_.flat().map(z=>xn([z.x,z.y],f.canonical));if(_.length===0)return NaN;const T=new C0(C[0][1]);let P=1/0;for(const z of g){switch(z.type){case"Point":P=Math.min(P,Tf(C,!0,[z.coordinates],!1,T,P));break;case"LineString":P=Math.min(P,Tf(C,!0,z.coordinates,!0,T,P));break;case"Polygon":P=Math.min(P,Cf(C,!0,z.coordinates,T,P))}if(P===0)return P}return P}(c,this.geometries);if(c.geometryType()==="Polygon")return function(f,g){const _=f.geometry();if(_.length===0||_[0].length===0)return NaN;const C=vm(_,0).map(z=>z.map(B=>B.map(N=>xn([N.x,N.y],f.canonical)))),T=new C0(C[0][0][0][1]);let P=1/0;for(const z of g)for(const B of C){switch(z.type){case"Point":P=Math.min(P,Cf([z.coordinates],!1,B,T,P));break;case"LineString":P=Math.min(P,Cf(z.coordinates,!0,B,T,P));break;case"Polygon":P=Math.min(P,Bn(B,z.coordinates,T,P))}if(P===0)return P}return P}(c,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Ah={"==":w0,"!=":_f,">":gm,"<":mm,">=":ym,"<=":S0,array:To,at:vf,boolean:To,case:Th,coalesce:Tc,collator:Oc,format:ge,image:$e,in:bf,"index-of":Cc,interpolate:_s,"interpolate-hcl":_s,"interpolate-lab":_s,length:ot,let:ol,literal:Co,match:Ch,number:To,"number-format":wf,object:To,slice:Su,step:al,string:To,"to-boolean":Oo,"to-color":Oo,"to-number":Oo,"to-string":Oo,var:Zr,within:Tu,distance:ju};class Zo{constructor(c,f,g,_){this.name=c,this.type=f,this._evaluate=g,this.args=_}evaluate(c){return this._evaluate(c,this.args)}eachChild(c){this.args.forEach(c)}outputDefined(){return!1}static parse(c,f){const g=c[0],_=Zo.definitions[g];if(!_)return f.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const C=Array.isArray(_)?_[0]:_.type,T=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,P=T.filter(([B])=>!Array.isArray(B)||B.length===c.length-1);let z=null;for(const[B,N]of P){z=new ql(f.registry,Of,f.path,null,f.scope);const q=[];let K=!1;for(let te=1;te<c.length;te++){const se=c[te],oe=Array.isArray(B)?B[te-1]:B.type,pe=z.parse(se,1+q.length,oe);if(!pe){K=!0;break}q.push(pe)}if(!K)if(Array.isArray(B)&&B.length!==q.length)z.error(`Expected ${B.length} arguments, but found ${q.length} instead.`);else{for(let te=0;te<q.length;te++){const se=Array.isArray(B)?B[te]:B.type,oe=q[te];z.concat(te+1).checkSubtype(se,oe.type)}if(z.errors.length===0)return new Zo(g,C,N,q)}}if(P.length===1)f.errors.push(...z.errors);else{const B=(P.length?P:T).map(([q])=>{return K=q,Array.isArray(K)?`(${K.map(H).join(", ")})`:`(${H(K.type)}...)`;var K}).join(" | "),N=[];for(let q=1;q<c.length;q++){const K=f.parse(c[q],1+N.length);if(!K)return null;N.push(H(K.type))}f.error(`Expected arguments of type ${B}, but found (${N.join(", ")}) instead.`)}return null}static register(c,f){Zo.definitions=f;for(const g in f)c[g]=Zo}}function z0(h,[c,f,g,_]){c=c.evaluate(h),f=f.evaluate(h),g=g.evaluate(h);const C=_?_.evaluate(h):1,T=Sc(c,f,g,C);if(T)throw new si(T);return new an(c/255,f/255,g/255,C,!1)}function M0(h,c){return h in c}function I0(h,c){const f=c[h];return f===void 0?null:f}function Au(h){return{type:h}}function Of(h){if(h instanceof Zr)return Of(h.boundExpression);if(h instanceof Zo&&h.name==="error"||h instanceof Oc||h instanceof Tu||h instanceof ju)return!1;const c=h instanceof Oo||h instanceof To;let f=!0;return h.eachChild(g=>{f=c?f&&Of(g):f&&g instanceof Co}),!!f&&Pf(h)&&jf(h,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Pf(h){if(h instanceof Zo&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof Tu||h instanceof ju)return!1;let c=!0;return h.eachChild(f=>{c&&!Pf(f)&&(c=!1)}),c}function Eh(h){if(h instanceof Zo&&h.name==="feature-state")return!1;let c=!0;return h.eachChild(f=>{c&&!Eh(f)&&(c=!1)}),c}function jf(h,c){if(h instanceof Zo&&c.indexOf(h.name)>=0)return!1;let f=!0;return h.eachChild(g=>{f&&!jf(g,c)&&(f=!1)}),f}function Sm(h){return{result:"success",value:h}}function zh(h){return{result:"error",value:h}}function Mh(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function X1(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function D0(h){return!!h.expression&&h.expression.interpolated}function ln(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function km(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function PC(h){return h}function K1(h,c){const f=c.type==="color",g=h.stops&&typeof h.stops[0][0]=="object",_=g||!(g||h.property!==void 0),C=h.type||(D0(c)?"exponential":"interval");if(f||c.type==="padding"){const N=f?an.parse:$s.parse;(h=Br({},h)).stops&&(h.stops=h.stops.map(q=>[q[0],N(q[1])])),h.default=N(h.default?h.default:c.default)}if(h.colorSpace&&(T=h.colorSpace)!=="rgb"&&T!=="hcl"&&T!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var T;let P,z,B;if(C==="exponential")P=Y1;else if(C==="interval")P=Cm;else if(C==="categorical"){P=Z1,z=Object.create(null);for(const N of h.stops)z[N[0]]=N[1];B=typeof h.stops[0][0]}else{if(C!=="identity")throw new Error(`Unknown function type "${C}"`);P=J1}if(g){const N={},q=[];for(let se=0;se<h.stops.length;se++){const oe=h.stops[se],pe=oe[0].zoom;N[pe]===void 0&&(N[pe]={zoom:pe,type:h.type,property:h.property,default:h.default,stops:[]},q.push(pe)),N[pe].stops.push([oe[0].value,oe[1]])}const K=[];for(const se of q)K.push([N[se].zoom,K1(N[se],c)]);const te={name:"linear"};return{kind:"composite",interpolationType:te,interpolationFactor:_s.interpolationFactor.bind(void 0,te),zoomStops:K.map(se=>se[0]),evaluate:({zoom:se},oe)=>Y1({stops:K,base:h.base},c,se).evaluate(se,oe)}}if(_){const N=C==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:N,interpolationFactor:_s.interpolationFactor.bind(void 0,N),zoomStops:h.stops.map(q=>q[0]),evaluate:({zoom:q})=>P(h,c,q,z,B)}}return{kind:"source",evaluate(N,q){const K=q&&q.properties?q.properties[h.property]:void 0;return K===void 0?Ih(h.default,c.default):P(h,c,K,z,B)}}}function Ih(h,c,f){return h!==void 0?h:c!==void 0?c:f!==void 0?f:void 0}function Z1(h,c,f,g,_){return Ih(typeof f===_?g[f]:void 0,h.default,c.default)}function Cm(h,c,f){if(ln(f)!=="number")return Ih(h.default,c.default);const g=h.stops.length;if(g===1||f<=h.stops[0][0])return h.stops[0][1];if(f>=h.stops[g-1][0])return h.stops[g-1][1];const _=Oh(h.stops.map(C=>C[0]),f);return h.stops[_][1]}function Y1(h,c,f){const g=h.base!==void 0?h.base:1;if(ln(f)!=="number")return Ih(h.default,c.default);const _=h.stops.length;if(_===1||f<=h.stops[0][0])return h.stops[0][1];if(f>=h.stops[_-1][0])return h.stops[_-1][1];const C=Oh(h.stops.map(N=>N[0]),f),T=function(N,q,K,te){const se=te-K,oe=N-K;return se===0?0:q===1?oe/se:(Math.pow(q,oe)-1)/(Math.pow(q,se)-1)}(f,g,h.stops[C][0],h.stops[C+1][0]),P=h.stops[C][1],z=h.stops[C+1][1],B=qi[c.type]||PC;return typeof P.evaluate=="function"?{evaluate(...N){const q=P.evaluate.apply(void 0,N),K=z.evaluate.apply(void 0,N);if(q!==void 0&&K!==void 0)return B(q,K,T,h.colorSpace)}}:B(P,z,T,h.colorSpace)}function J1(h,c,f){switch(c.type){case"color":f=an.parse(f);break;case"formatted":f=vs.fromString(f.toString());break;case"resolvedImage":f=bs.fromString(f.toString());break;case"padding":f=$s.parse(f);break;default:ln(f)===c.type||c.type==="enum"&&c.values[f]||(f=void 0)}return Ih(f,h.default,c.default)}Zo.register(Ah,{error:[{kind:"error"},[yr],(h,[c])=>{throw new si(c.evaluate(h))}],typeof:[yr,[pr],(h,[c])=>H(di(c.evaluate(h)))],"to-rgba":[W(xt,4),[Zn],(h,[c])=>{const[f,g,_,C]=c.evaluate(h).rgb;return[255*f,255*g,255*_,C]}],rgb:[Zn,[xt,xt,xt],z0],rgba:[Zn,[xt,xt,xt,xt],z0],has:{type:Jt,overloads:[[[yr],(h,[c])=>M0(c.evaluate(h),h.properties())],[[yr,vi],(h,[c,f])=>M0(c.evaluate(h),f.evaluate(h))]]},get:{type:pr,overloads:[[[yr],(h,[c])=>I0(c.evaluate(h),h.properties())],[[yr,vi],(h,[c,f])=>I0(c.evaluate(h),f.evaluate(h))]]},"feature-state":[pr,[yr],(h,[c])=>I0(c.evaluate(h),h.featureState||{})],properties:[vi,[],h=>h.properties()],"geometry-type":[yr,[],h=>h.geometryType()],id:[pr,[],h=>h.id()],zoom:[xt,[],h=>h.globals.zoom],"heatmap-density":[xt,[],h=>h.globals.heatmapDensity||0],"line-progress":[xt,[],h=>h.globals.lineProgress||0],accumulated:[pr,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[xt,Au(xt),(h,c)=>{let f=0;for(const g of c)f+=g.evaluate(h);return f}],"*":[xt,Au(xt),(h,c)=>{let f=1;for(const g of c)f*=g.evaluate(h);return f}],"-":{type:xt,overloads:[[[xt,xt],(h,[c,f])=>c.evaluate(h)-f.evaluate(h)],[[xt],(h,[c])=>-c.evaluate(h)]]},"/":[xt,[xt,xt],(h,[c,f])=>c.evaluate(h)/f.evaluate(h)],"%":[xt,[xt,xt],(h,[c,f])=>c.evaluate(h)%f.evaluate(h)],ln2:[xt,[],()=>Math.LN2],pi:[xt,[],()=>Math.PI],e:[xt,[],()=>Math.E],"^":[xt,[xt,xt],(h,[c,f])=>Math.pow(c.evaluate(h),f.evaluate(h))],sqrt:[xt,[xt],(h,[c])=>Math.sqrt(c.evaluate(h))],log10:[xt,[xt],(h,[c])=>Math.log(c.evaluate(h))/Math.LN10],ln:[xt,[xt],(h,[c])=>Math.log(c.evaluate(h))],log2:[xt,[xt],(h,[c])=>Math.log(c.evaluate(h))/Math.LN2],sin:[xt,[xt],(h,[c])=>Math.sin(c.evaluate(h))],cos:[xt,[xt],(h,[c])=>Math.cos(c.evaluate(h))],tan:[xt,[xt],(h,[c])=>Math.tan(c.evaluate(h))],asin:[xt,[xt],(h,[c])=>Math.asin(c.evaluate(h))],acos:[xt,[xt],(h,[c])=>Math.acos(c.evaluate(h))],atan:[xt,[xt],(h,[c])=>Math.atan(c.evaluate(h))],min:[xt,Au(xt),(h,c)=>Math.min(...c.map(f=>f.evaluate(h)))],max:[xt,Au(xt),(h,c)=>Math.max(...c.map(f=>f.evaluate(h)))],abs:[xt,[xt],(h,[c])=>Math.abs(c.evaluate(h))],round:[xt,[xt],(h,[c])=>{const f=c.evaluate(h);return f<0?-Math.round(-f):Math.round(f)}],floor:[xt,[xt],(h,[c])=>Math.floor(c.evaluate(h))],ceil:[xt,[xt],(h,[c])=>Math.ceil(c.evaluate(h))],"filter-==":[Jt,[yr,pr],(h,[c,f])=>h.properties()[c.value]===f.value],"filter-id-==":[Jt,[pr],(h,[c])=>h.id()===c.value],"filter-type-==":[Jt,[yr],(h,[c])=>h.geometryType()===c.value],"filter-<":[Jt,[yr,pr],(h,[c,f])=>{const g=h.properties()[c.value],_=f.value;return typeof g==typeof _&&g<_}],"filter-id-<":[Jt,[pr],(h,[c])=>{const f=h.id(),g=c.value;return typeof f==typeof g&&f<g}],"filter->":[Jt,[yr,pr],(h,[c,f])=>{const g=h.properties()[c.value],_=f.value;return typeof g==typeof _&&g>_}],"filter-id->":[Jt,[pr],(h,[c])=>{const f=h.id(),g=c.value;return typeof f==typeof g&&f>g}],"filter-<=":[Jt,[yr,pr],(h,[c,f])=>{const g=h.properties()[c.value],_=f.value;return typeof g==typeof _&&g<=_}],"filter-id-<=":[Jt,[pr],(h,[c])=>{const f=h.id(),g=c.value;return typeof f==typeof g&&f<=g}],"filter->=":[Jt,[yr,pr],(h,[c,f])=>{const g=h.properties()[c.value],_=f.value;return typeof g==typeof _&&g>=_}],"filter-id->=":[Jt,[pr],(h,[c])=>{const f=h.id(),g=c.value;return typeof f==typeof g&&f>=g}],"filter-has":[Jt,[pr],(h,[c])=>c.value in h.properties()],"filter-has-id":[Jt,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[Jt,[W(yr)],(h,[c])=>c.value.indexOf(h.geometryType())>=0],"filter-id-in":[Jt,[W(pr)],(h,[c])=>c.value.indexOf(h.id())>=0],"filter-in-small":[Jt,[yr,W(pr)],(h,[c,f])=>f.value.indexOf(h.properties()[c.value])>=0],"filter-in-large":[Jt,[yr,W(pr)],(h,[c,f])=>function(g,_,C,T){for(;C<=T;){const P=C+T>>1;if(_[P]===g)return!0;_[P]>g?T=P-1:C=P+1}return!1}(h.properties()[c.value],f.value,0,f.value.length-1)],all:{type:Jt,overloads:[[[Jt,Jt],(h,[c,f])=>c.evaluate(h)&&f.evaluate(h)],[Au(Jt),(h,c)=>{for(const f of c)if(!f.evaluate(h))return!1;return!0}]]},any:{type:Jt,overloads:[[[Jt,Jt],(h,[c,f])=>c.evaluate(h)||f.evaluate(h)],[Au(Jt),(h,c)=>{for(const f of c)if(f.evaluate(h))return!0;return!1}]]},"!":[Jt,[Jt],(h,[c])=>!c.evaluate(h)],"is-supported-script":[Jt,[yr],(h,[c])=>{const f=h.globals&&h.globals.isSupportedScript;return!f||f(c.evaluate(h))}],upcase:[yr,[yr],(h,[c])=>c.evaluate(h).toUpperCase()],downcase:[yr,[yr],(h,[c])=>c.evaluate(h).toLowerCase()],concat:[yr,Au(pr),(h,c)=>c.map(f=>wu(f.evaluate(h))).join("")],"resolved-locale":[yr,[Ii],(h,[c])=>c.evaluate(h).resolvedLocale()]});class Tm{constructor(c,f){var g;this.expression=c,this._warningHistory={},this._evaluator=new kc,this._defaultValue=f?(g=f).type==="color"&&km(g.default)?new an(0,0,0,0):g.type==="color"?an.parse(g.default)||null:g.type==="padding"?$s.parse(g.default)||null:g.type==="variableAnchorOffsetCollection"?oo.parse(g.default)||null:g.default===void 0?null:g.default:null,this._enumValues=f&&f.type==="enum"?f.values:null}evaluateWithoutErrorHandling(c,f,g,_,C,T){return this._evaluator.globals=c,this._evaluator.feature=f,this._evaluator.featureState=g,this._evaluator.canonical=_,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(c,f,g,_,C,T){this._evaluator.globals=c,this._evaluator.feature=f||null,this._evaluator.featureState=g||null,this._evaluator.canonical=_,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=T||null;try{const P=this.expression.evaluate(this._evaluator);if(P==null||typeof P=="number"&&P!=P)return this._defaultValue;if(this._enumValues&&!(P in this._enumValues))throw new si(`Expected value to be one of ${Object.keys(this._enumValues).map(z=>JSON.stringify(z)).join(", ")}, but found ${JSON.stringify(P)} instead.`);return P}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof console<"u"&&console.warn(P.message)),this._defaultValue}}}function Om(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in Ah}function Dh(h,c){const f=new ql(Ah,Of,[],c?function(_){const C={color:Zn,string:yr,number:xt,enum:yr,boolean:Jt,formatted:xs,padding:Di,resolvedImage:is,variableAnchorOffsetCollection:me};return _.type==="array"?W(C[_.value]||pr,_.length):C[_.type]}(c):void 0),g=f.parse(h,void 0,void 0,void 0,c&&c.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?Sm(new Tm(g,c)):zh(f.errors)}class Rh{constructor(c,f){this.kind=c,this._styleExpression=f,this.isStateDependent=c!=="constant"&&!Eh(f.expression)}evaluateWithoutErrorHandling(c,f,g,_,C,T){return this._styleExpression.evaluateWithoutErrorHandling(c,f,g,_,C,T)}evaluate(c,f,g,_,C,T){return this._styleExpression.evaluate(c,f,g,_,C,T)}}class Lh{constructor(c,f,g,_){this.kind=c,this.zoomStops=g,this._styleExpression=f,this.isStateDependent=c!=="camera"&&!Eh(f.expression),this.interpolationType=_}evaluateWithoutErrorHandling(c,f,g,_,C,T){return this._styleExpression.evaluateWithoutErrorHandling(c,f,g,_,C,T)}evaluate(c,f,g,_,C,T){return this._styleExpression.evaluate(c,f,g,_,C,T)}interpolationFactor(c,f,g){return this.interpolationType?_s.interpolationFactor(this.interpolationType,c,f,g):0}}function R0(h,c){const f=Dh(h,c);if(f.result==="error")return f;const g=f.value.expression,_=Pf(g);if(!_&&!Mh(c))return zh([new kt("","data expressions not supported")]);const C=jf(g,["zoom"]);if(!C&&!X1(c))return zh([new kt("","zoom expressions not supported")]);const T=Af(g);return T||C?T instanceof kt?zh([T]):T instanceof _s&&!D0(c)?zh([new kt("",'"interpolate" expressions cannot be used with this property')]):Sm(T?new Lh(_?"camera":"composite",f.value,T.labels,T instanceof _s?T.interpolation:void 0):new Rh(_?"constant":"source",f.value)):zh([new kt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Fh{constructor(c,f){this._parameters=c,this._specification=f,Br(this,K1(this._parameters,this._specification))}static deserialize(c){return new Fh(c._parameters,c._specification)}static serialize(c){return{_parameters:c._parameters,_specification:c._specification}}}function Af(h){let c=null;if(h instanceof ol)c=Af(h.result);else if(h instanceof Tc){for(const f of h.args)if(c=Af(f),c)break}else(h instanceof al||h instanceof _s)&&h.input instanceof Zo&&h.input.name==="zoom"&&(c=h);return c instanceof kt||h.eachChild(f=>{const g=Af(f);g instanceof kt?c=g:!c&&g?c=new kt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):c&&g&&c!==g&&(c=new kt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),c}function Pm(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const c of h.slice(1))if(!Pm(c)&&typeof c!="boolean")return!1;return!0;default:return!0}}const jm={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function L0(h){if(h==null)return{filter:()=>!0,needGeometry:!1};Pm(h)||(h=Am(h));const c=Dh(h,jm);if(c.result==="error")throw new Error(c.value.map(f=>`${f.key}: ${f.message}`).join(", "));return{filter:(f,g,_)=>c.value.evaluate(f,g,{},_),needGeometry:e_(h)}}function jC(h,c){return h<c?-1:h>c?1:0}function e_(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let c=1;c<h.length;c++)if(e_(h[c]))return!0;return!1}function Am(h){if(!h)return!0;const c=h[0];return h.length<=1?c!=="any":c==="=="?F0(h[1],h[2],"=="):c==="!="?Ss(F0(h[1],h[2],"==")):c==="<"||c===">"||c==="<="||c===">="?F0(h[1],h[2],c):c==="any"?(f=h.slice(1),["any"].concat(f.map(Am))):c==="all"?["all"].concat(h.slice(1).map(Am)):c==="none"?["all"].concat(h.slice(1).map(Am).map(Ss)):c==="in"?Ef(h[1],h.slice(2)):c==="!in"?Ss(Ef(h[1],h.slice(2))):c==="has"?zf(h[1]):c!=="!has"||Ss(zf(h[1]));var f}function F0(h,c,f){switch(h){case"$type":return[`filter-type-${f}`,c];case"$id":return[`filter-id-${f}`,c];default:return[`filter-${f}`,h,c]}}function Ef(h,c){if(c.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some(f=>typeof f!=typeof c[0])?["filter-in-large",h,["literal",c.sort(jC)]]:["filter-in-small",h,["literal",c]]}}function zf(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function Ss(h){return["!",h]}function Eu(h){const c=typeof h;if(c==="number"||c==="boolean"||c==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let _="[";for(const C of h)_+=`${Eu(C)},`;return`${_}]`}const f=Object.keys(h).sort();let g="{";for(let _=0;_<f.length;_++)g+=`${JSON.stringify(f[_])}:${Eu(h[f[_]])},`;return`${g}}`}function t_(h){let c="";for(const f of lt)c+=`/${Eu(h[f])}`;return c}function r_(h){const c=h.value;return c?[new Qe(h.key,c,"constants have been deprecated as of v8")]:[]}function pi(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function Ea(h){if(Array.isArray(h))return h.map(Ea);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const c={};for(const f in h)c[f]=Ea(h[f]);return c}return pi(h)}function Po(h){const c=h.key,f=h.value,g=h.valueSpec||{},_=h.objectElementValidators||{},C=h.style,T=h.styleSpec,P=h.validateSpec;let z=[];const B=ln(f);if(B!=="object")return[new Qe(c,f,`object expected, ${B} found`)];for(const N in f){const q=N.split(".")[0],K=g[q]||g["*"];let te;if(_[q])te=_[q];else if(g[q])te=P;else if(_["*"])te=_["*"];else{if(!g["*"]){z.push(new Qe(c,f[N],`unknown property "${N}"`));continue}te=P}z=z.concat(te({key:(c&&`${c}.`)+N,value:f[N],valueSpec:K,style:C,styleSpec:T,object:f,objectKey:N,validateSpec:P},f))}for(const N in g)_[N]||g[N].required&&g[N].default===void 0&&f[N]===void 0&&z.push(new Qe(c,f,`missing required property "${N}"`));return z}function Mf(h){const c=h.value,f=h.valueSpec,g=h.style,_=h.styleSpec,C=h.key,T=h.arrayElementValidator||h.validateSpec;if(ln(c)!=="array")return[new Qe(C,c,`array expected, ${ln(c)} found`)];if(f.length&&c.length!==f.length)return[new Qe(C,c,`array length ${f.length} expected, length ${c.length} found`)];if(f["min-length"]&&c.length<f["min-length"])return[new Qe(C,c,`array length at least ${f["min-length"]} expected, length ${c.length} found`)];let P={type:f.value,values:f.values};_.$version<7&&(P.function=f.function),ln(f.value)==="object"&&(P=f.value);let z=[];for(let B=0;B<c.length;B++)z=z.concat(T({array:c,arrayIndex:B,value:c[B],valueSpec:P,validateSpec:h.validateSpec,style:g,styleSpec:_,key:`${C}[${B}]`}));return z}function B0(h){const c=h.key,f=h.value,g=h.valueSpec;let _=ln(f);return _==="number"&&f!=f&&(_="NaN"),_!=="number"?[new Qe(c,f,`number expected, ${_} found`)]:"minimum"in g&&f<g.minimum?[new Qe(c,f,`${f} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&f>g.maximum?[new Qe(c,f,`${f} is greater than the maximum value ${g.maximum}`)]:[]}function Em(h){const c=h.valueSpec,f=pi(h.value.type);let g,_,C,T={};const P=f!=="categorical"&&h.value.property===void 0,z=!P,B=ln(h.value.stops)==="array"&&ln(h.value.stops[0])==="array"&&ln(h.value.stops[0][0])==="object",N=Po({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(te){if(f==="identity")return[new Qe(te.key,te.value,'identity function may not have a "stops" property')];let se=[];const oe=te.value;return se=se.concat(Mf({key:te.key,value:oe,valueSpec:te.valueSpec,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec,arrayElementValidator:q})),ln(oe)==="array"&&oe.length===0&&se.push(new Qe(te.key,oe,"array must have at least one stop")),se},default:function(te){return te.validateSpec({key:te.key,value:te.value,valueSpec:c,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec})}}});return f==="identity"&&P&&N.push(new Qe(h.key,h.value,'missing required property "property"')),f==="identity"||h.value.stops||N.push(new Qe(h.key,h.value,'missing required property "stops"')),f==="exponential"&&h.valueSpec.expression&&!D0(h.valueSpec)&&N.push(new Qe(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(z&&!Mh(h.valueSpec)?N.push(new Qe(h.key,h.value,"property functions not supported")):P&&!X1(h.valueSpec)&&N.push(new Qe(h.key,h.value,"zoom functions not supported"))),f!=="categorical"&&!B||h.value.property!==void 0||N.push(new Qe(h.key,h.value,'"property" property is required')),N;function q(te){let se=[];const oe=te.value,pe=te.key;if(ln(oe)!=="array")return[new Qe(pe,oe,`array expected, ${ln(oe)} found`)];if(oe.length!==2)return[new Qe(pe,oe,`array length 2 expected, length ${oe.length} found`)];if(B){if(ln(oe[0])!=="object")return[new Qe(pe,oe,`object expected, ${ln(oe[0])} found`)];if(oe[0].zoom===void 0)return[new Qe(pe,oe,"object stop key must have zoom")];if(oe[0].value===void 0)return[new Qe(pe,oe,"object stop key must have value")];if(C&&C>pi(oe[0].zoom))return[new Qe(pe,oe[0].zoom,"stop zoom values must appear in ascending order")];pi(oe[0].zoom)!==C&&(C=pi(oe[0].zoom),_=void 0,T={}),se=se.concat(Po({key:`${pe}[0]`,value:oe[0],valueSpec:{zoom:{}},validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec,objectElementValidators:{zoom:B0,value:K}}))}else se=se.concat(K({key:`${pe}[0]`,value:oe[0],validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec},oe));return Om(Ea(oe[1]))?se.concat([new Qe(`${pe}[1]`,oe[1],"expressions are not allowed in function stops.")]):se.concat(te.validateSpec({key:`${pe}[1]`,value:oe[1],valueSpec:c,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec}))}function K(te,se){const oe=ln(te.value),pe=pi(te.value),_e=te.value!==null?te.value:se;if(g){if(oe!==g)return[new Qe(te.key,_e,`${oe} stop domain type must match previous stop domain type ${g}`)]}else g=oe;if(oe!=="number"&&oe!=="string"&&oe!=="boolean")return[new Qe(te.key,_e,"stop domain value must be a number, string, or boolean")];if(oe!=="number"&&f!=="categorical"){let Ke=`number expected, ${oe} found`;return Mh(c)&&f===void 0&&(Ke+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Qe(te.key,_e,Ke)]}return f!=="categorical"||oe!=="number"||isFinite(pe)&&Math.floor(pe)===pe?f!=="categorical"&&oe==="number"&&_!==void 0&&pe<_?[new Qe(te.key,_e,"stop domain values must appear in ascending order")]:(_=pe,f==="categorical"&&pe in T?[new Qe(te.key,_e,"stop domain values must be unique")]:(T[pe]=!0,[])):[new Qe(te.key,_e,`integer expected, found ${pe}`)]}}function Bh(h){const c=(h.expressionContext==="property"?R0:Dh)(Ea(h.value),h.valueSpec);if(c.result==="error")return c.value.map(g=>new Qe(`${h.key}${g.key}`,h.value,g.message));const f=c.value.expression||c.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!f.outputDefined())return[new Qe(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!Eh(f))return[new Qe(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!Eh(f))return[new Qe(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!jf(f,["zoom","feature-state"]))return[new Qe(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!Pf(f))return[new Qe(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Gl(h){const c=h.key,f=h.value,g=h.valueSpec,_=[];return Array.isArray(g.values)?g.values.indexOf(pi(f))===-1&&_.push(new Qe(c,f,`expected one of [${g.values.join(", ")}], ${JSON.stringify(f)} found`)):Object.keys(g.values).indexOf(pi(f))===-1&&_.push(new Qe(c,f,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(f)} found`)),_}function $0(h){return Pm(Ea(h.value))?Bh(Br({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):zm(h)}function zm(h){const c=h.value,f=h.key;if(ln(c)!=="array")return[new Qe(f,c,`array expected, ${ln(c)} found`)];const g=h.styleSpec;let _,C=[];if(c.length<1)return[new Qe(f,c,"filter array must have at least 1 element")];switch(C=C.concat(Gl({key:`${f}[0]`,value:c[0],valueSpec:g.filter_operator,style:h.style,styleSpec:h.styleSpec})),pi(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&pi(c[1])==="$type"&&C.push(new Qe(f,c,`"$type" cannot be use with operator "${c[0]}"`));case"==":case"!=":c.length!==3&&C.push(new Qe(f,c,`filter array for operator "${c[0]}" must have 3 elements`));case"in":case"!in":c.length>=2&&(_=ln(c[1]),_!=="string"&&C.push(new Qe(`${f}[1]`,c[1],`string expected, ${_} found`)));for(let T=2;T<c.length;T++)_=ln(c[T]),pi(c[1])==="$type"?C=C.concat(Gl({key:`${f}[${T}]`,value:c[T],valueSpec:g.geometry_type,style:h.style,styleSpec:h.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&C.push(new Qe(`${f}[${T}]`,c[T],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let T=1;T<c.length;T++)C=C.concat(zm({key:`${f}[${T}]`,value:c[T],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":_=ln(c[1]),c.length!==2?C.push(new Qe(f,c,`filter array for "${c[0]}" operator must have 2 elements`)):_!=="string"&&C.push(new Qe(`${f}[1]`,c[1],`string expected, ${_} found`))}return C}function N0(h,c){const f=h.key,g=h.validateSpec,_=h.style,C=h.styleSpec,T=h.value,P=h.objectKey,z=C[`${c}_${h.layerType}`];if(!z)return[];const B=P.match(/^(.*)-transition$/);if(c==="paint"&&B&&z[B[1]]&&z[B[1]].transition)return g({key:f,value:T,valueSpec:C.transition,style:_,styleSpec:C});const N=h.valueSpec||z[P];if(!N)return[new Qe(f,T,`unknown property "${P}"`)];let q;if(ln(T)==="string"&&Mh(N)&&!N.tokens&&(q=/^{([^}]+)}$/.exec(T)))return[new Qe(f,T,`"${P}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(q[1])} }\`.`)];const K=[];return h.layerType==="symbol"&&(P==="text-field"&&_&&!_.glyphs&&K.push(new Qe(f,T,'use of "text-field" requires a style "glyphs" property')),P==="text-font"&&km(Ea(T))&&pi(T.type)==="identity"&&K.push(new Qe(f,T,'"text-font" does not support identity functions'))),K.concat(g({key:h.key,value:T,valueSpec:N,style:_,styleSpec:C,expressionContext:"property",propertyType:c,propertyKey:P}))}function Mm(h){return N0(h,"paint")}function V0(h){return N0(h,"layout")}function W0(h){let c=[];const f=h.value,g=h.key,_=h.style,C=h.styleSpec;f.type||f.ref||c.push(new Qe(g,f,'either "type" or "ref" is required'));let T=pi(f.type);const P=pi(f.ref);if(f.id){const z=pi(f.id);for(let B=0;B<h.arrayIndex;B++){const N=_.layers[B];pi(N.id)===z&&c.push(new Qe(g,f.id,`duplicate layer id "${f.id}", previously used at line ${N.id.__line__}`))}}if("ref"in f){let z;["type","source","source-layer","filter","layout"].forEach(B=>{B in f&&c.push(new Qe(g,f[B],`"${B}" is prohibited for ref layers`))}),_.layers.forEach(B=>{pi(B.id)===P&&(z=B)}),z?z.ref?c.push(new Qe(g,f.ref,"ref cannot reference another ref layer")):T=pi(z.type):c.push(new Qe(g,f.ref,`ref layer "${P}" not found`))}else if(T!=="background")if(f.source){const z=_.sources&&_.sources[f.source],B=z&&pi(z.type);z?B==="vector"&&T==="raster"?c.push(new Qe(g,f.source,`layer "${f.id}" requires a raster source`)):B!=="raster-dem"&&T==="hillshade"?c.push(new Qe(g,f.source,`layer "${f.id}" requires a raster-dem source`)):B==="raster"&&T!=="raster"?c.push(new Qe(g,f.source,`layer "${f.id}" requires a vector source`)):B!=="vector"||f["source-layer"]?B==="raster-dem"&&T!=="hillshade"?c.push(new Qe(g,f.source,"raster-dem source can only be used with layer type 'hillshade'.")):T!=="line"||!f.paint||!f.paint["line-gradient"]||B==="geojson"&&z.lineMetrics||c.push(new Qe(g,f,`layer "${f.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):c.push(new Qe(g,f,`layer "${f.id}" must specify a "source-layer"`)):c.push(new Qe(g,f.source,`source "${f.source}" not found`))}else c.push(new Qe(g,f,'missing required property "source"'));return c=c.concat(Po({key:g,value:f,valueSpec:C.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${g}.type`,value:f.type,valueSpec:C.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:f,objectKey:"type"}),filter:$0,layout:z=>Po({layer:f,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,validateSpec:z.validateSpec,objectElementValidators:{"*":B=>V0(Br({layerType:T},B))}}),paint:z=>Po({layer:f,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,validateSpec:z.validateSpec,objectElementValidators:{"*":B=>Mm(Br({layerType:T},B))}})}})),c}function zu(h){const c=h.value,f=h.key,g=ln(c);return g!=="string"?[new Qe(f,c,`string expected, ${g} found`)]:[]}const Im={promoteId:function({key:h,value:c}){if(ln(c)==="string")return zu({key:h,value:c});{const f=[];for(const g in c)f.push(...zu({key:`${h}.${g}`,value:c[g]}));return f}}};function If(h){const c=h.value,f=h.key,g=h.styleSpec,_=h.style,C=h.validateSpec;if(!c.type)return[new Qe(f,c,'"type" is required')];const T=pi(c.type);let P;switch(T){case"vector":case"raster":return P=Po({key:f,value:c,valueSpec:g[`source_${T.replace("-","_")}`],style:h.style,styleSpec:g,objectElementValidators:Im,validateSpec:C}),P;case"raster-dem":return P=function(z){var B;const N=(B=z.sourceName)!==null&&B!==void 0?B:"",q=z.value,K=z.styleSpec,te=K.source_raster_dem,se=z.style;let oe=[];const pe=ln(q);if(q===void 0)return oe;if(pe!=="object")return oe.push(new Qe("source_raster_dem",q,`object expected, ${pe} found`)),oe;const _e=pi(q.encoding)==="custom",Ke=["redFactor","greenFactor","blueFactor","baseShift"],Ae=z.value.encoding?`"${z.value.encoding}"`:"Default";for(const Ue in q)!_e&&Ke.includes(Ue)?oe.push(new Qe(Ue,q[Ue],`In "${N}": "${Ue}" is only valid when "encoding" is set to "custom". ${Ae} encoding found`)):te[Ue]?oe=oe.concat(z.validateSpec({key:Ue,value:q[Ue],valueSpec:te[Ue],validateSpec:z.validateSpec,style:se,styleSpec:K})):oe.push(new Qe(Ue,q[Ue],`unknown property "${Ue}"`));return oe}({sourceName:f,value:c,style:h.style,styleSpec:g,validateSpec:C}),P;case"geojson":if(P=Po({key:f,value:c,valueSpec:g.source_geojson,style:_,styleSpec:g,validateSpec:C,objectElementValidators:Im}),c.cluster)for(const z in c.clusterProperties){const[B,N]=c.clusterProperties[z],q=typeof B=="string"?[B,["accumulated"],["get",z]]:B;P.push(...Bh({key:`${f}.${z}.map`,value:N,expressionContext:"cluster-map"})),P.push(...Bh({key:`${f}.${z}.reduce`,value:q,expressionContext:"cluster-reduce"}))}return P;case"video":return Po({key:f,value:c,valueSpec:g.source_video,style:_,validateSpec:C,styleSpec:g});case"image":return Po({key:f,value:c,valueSpec:g.source_image,style:_,validateSpec:C,styleSpec:g});case"canvas":return[new Qe(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Gl({key:`${f}.type`,value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function U0(h){const c=h.value,f=h.styleSpec,g=f.light,_=h.style;let C=[];const T=ln(c);if(c===void 0)return C;if(T!=="object")return C=C.concat([new Qe("light",c,`object expected, ${T} found`)]),C;for(const P in c){const z=P.match(/^(.*)-transition$/);C=C.concat(z&&g[z[1]]&&g[z[1]].transition?h.validateSpec({key:P,value:c[P],valueSpec:f.transition,validateSpec:h.validateSpec,style:_,styleSpec:f}):g[P]?h.validateSpec({key:P,value:c[P],valueSpec:g[P],validateSpec:h.validateSpec,style:_,styleSpec:f}):[new Qe(P,c[P],`unknown property "${P}"`)])}return C}function q0(h){const c=h.value,f=h.styleSpec,g=f.sky,_=h.style,C=ln(c);if(c===void 0)return[];if(C!=="object")return[new Qe("sky",c,`object expected, ${C} found`)];let T=[];for(const P in c)T=T.concat(g[P]?h.validateSpec({key:P,value:c[P],valueSpec:g[P],style:_,styleSpec:f}):[new Qe(P,c[P],`unknown property "${P}"`)]);return T}function Q0(h){const c=h.value,f=h.styleSpec,g=f.terrain,_=h.style;let C=[];const T=ln(c);if(c===void 0)return C;if(T!=="object")return C=C.concat([new Qe("terrain",c,`object expected, ${T} found`)]),C;for(const P in c)C=C.concat(g[P]?h.validateSpec({key:P,value:c[P],valueSpec:g[P],validateSpec:h.validateSpec,style:_,styleSpec:f}):[new Qe(P,c[P],`unknown property "${P}"`)]);return C}function H0(h){let c=[];const f=h.value,g=h.key;if(Array.isArray(f)){const _=[],C=[];for(const T in f)f[T].id&&_.includes(f[T].id)&&c.push(new Qe(g,f,`all the sprites' ids must be unique, but ${f[T].id} is duplicated`)),_.push(f[T].id),f[T].url&&C.includes(f[T].url)&&c.push(new Qe(g,f,`all the sprites' URLs must be unique, but ${f[T].url} is duplicated`)),C.push(f[T].url),c=c.concat(Po({key:`${g}[${T}]`,value:f[T],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return c}return zu({key:g,value:f})}const Dm={"*":()=>[],array:Mf,boolean:function(h){const c=h.value,f=h.key,g=ln(c);return g!=="boolean"?[new Qe(f,c,`boolean expected, ${g} found`)]:[]},number:B0,color:function(h){const c=h.key,f=h.value,g=ln(f);return g!=="string"?[new Qe(c,f,`color expected, ${g} found`)]:an.parse(String(f))?[]:[new Qe(c,f,`color expected, "${f}" found`)]},constants:r_,enum:Gl,filter:$0,function:Em,layer:W0,object:Po,source:If,light:U0,sky:q0,terrain:Q0,projection:function(h){const c=h.value,f=h.styleSpec,g=f.projection,_=h.style,C=ln(c);if(c===void 0)return[];if(C!=="object")return[new Qe("projection",c,`object expected, ${C} found`)];let T=[];for(const P in c)T=T.concat(g[P]?h.validateSpec({key:P,value:c[P],valueSpec:g[P],style:_,styleSpec:f}):[new Qe(P,c[P],`unknown property "${P}"`)]);return T},string:zu,formatted:function(h){return zu(h).length===0?[]:Bh(h)},resolvedImage:function(h){return zu(h).length===0?[]:Bh(h)},padding:function(h){const c=h.key,f=h.value;if(ln(f)==="array"){if(f.length<1||f.length>4)return[new Qe(c,f,`padding requires 1 to 4 values; ${f.length} values found`)];const g={type:"number"};let _=[];for(let C=0;C<f.length;C++)_=_.concat(h.validateSpec({key:`${c}[${C}]`,value:f[C],validateSpec:h.validateSpec,valueSpec:g}));return _}return B0({key:c,value:f,valueSpec:{}})},variableAnchorOffsetCollection:function(h){const c=h.key,f=h.value,g=ln(f),_=h.styleSpec;if(g!=="array"||f.length<1||f.length%2!=0)return[new Qe(c,f,"variableAnchorOffsetCollection requires a non-empty array of even length")];let C=[];for(let T=0;T<f.length;T+=2)C=C.concat(Gl({key:`${c}[${T}]`,value:f[T],valueSpec:_.layout_symbol["text-anchor"]})),C=C.concat(Mf({key:`${c}[${T+1}]`,value:f[T+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:_}));return C},sprite:H0};function Df(h){const c=h.value,f=h.valueSpec,g=h.styleSpec;return h.validateSpec=Df,f.expression&&km(pi(c))?Em(h):f.expression&&Om(Ea(c))?Bh(h):f.type&&Dm[f.type]?Dm[f.type](h):Po(Br({},h,{valueSpec:f.type?g[f.type]:f}))}function n_(h){const c=h.value,f=h.key,g=zu(h);return g.length||(c.indexOf("{fontstack}")===-1&&g.push(new Qe(f,c,'"glyphs" url must include a "{fontstack}" token')),c.indexOf("{range}")===-1&&g.push(new Qe(f,c,'"glyphs" url must include a "{range}" token'))),g}function Yo(h,c=Te){let f=[];return f=f.concat(Df({key:"",value:h,valueSpec:c.$root,styleSpec:c,style:h,validateSpec:Df,objectElementValidators:{glyphs:n_,"*":()=>[]}})),h.constants&&(f=f.concat(r_({key:"constants",value:h.constants}))),G0(f)}function cl(h){return function(c){return h({...c,validateSpec:Df})}}function G0(h){return[].concat(h).sort((c,f)=>c.line-f.line)}function za(h){return function(...c){return G0(h.apply(this,c))}}Yo.source=za(cl(If)),Yo.sprite=za(cl(H0)),Yo.glyphs=za(cl(n_)),Yo.light=za(cl(U0)),Yo.sky=za(cl(q0)),Yo.terrain=za(cl(Q0)),Yo.layer=za(cl(W0)),Yo.filter=za(cl($0)),Yo.paintProperty=za(cl(Mm)),Yo.layoutProperty=za(cl(V0));const Mu=Yo,AC=Mu.light,EC=Mu.sky,i_=Mu.paintProperty,s_=Mu.layoutProperty;function X0(h,c){let f=!1;if(c&&c.length)for(const g of c)h.fire(new vt(new Error(g.message))),f=!0;return f}class $h{constructor(c,f,g){const _=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;const T=new Int32Array(this.arrayBuffer);c=T[0],this.d=(f=T[1])+2*(g=T[2]);for(let z=0;z<this.d*this.d;z++){const B=T[3+z],N=T[3+z+1];_.push(B===N?null:T.subarray(B,N))}const P=T[3+_.length+1];this.keys=T.subarray(T[3+_.length],P),this.bboxes=T.subarray(P),this.insert=this._insertReadonly}else{this.d=f+2*g;for(let T=0;T<this.d*this.d;T++)_.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=c,this.padding=g,this.scale=f/c,this.uid=0;const C=g/f*c;this.min=-C,this.max=c+C}insert(c,f,g,_,C){this._forEachCell(f,g,_,C,this._insertCell,this.uid++,void 0,void 0),this.keys.push(c),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(_),this.bboxes.push(C)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(c,f,g,_,C,T){this.cells[C].push(T)}query(c,f,g,_,C){const T=this.min,P=this.max;if(c<=T&&f<=T&&P<=g&&P<=_&&!C)return Array.prototype.slice.call(this.keys);{const z=[];return this._forEachCell(c,f,g,_,this._queryCell,z,{},C),z}}_queryCell(c,f,g,_,C,T,P,z){const B=this.cells[C];if(B!==null){const N=this.keys,q=this.bboxes;for(let K=0;K<B.length;K++){const te=B[K];if(P[te]===void 0){const se=4*te;(z?z(q[se+0],q[se+1],q[se+2],q[se+3]):c<=q[se+2]&&f<=q[se+3]&&g>=q[se+0]&&_>=q[se+1])?(P[te]=!0,T.push(N[te])):P[te]=!1}}}}_forEachCell(c,f,g,_,C,T,P,z){const B=this._convertToCellCoord(c),N=this._convertToCellCoord(f),q=this._convertToCellCoord(g),K=this._convertToCellCoord(_);for(let te=B;te<=q;te++)for(let se=N;se<=K;se++){const oe=this.d*se+te;if((!z||z(this._convertFromCellCoord(te),this._convertFromCellCoord(se),this._convertFromCellCoord(te+1),this._convertFromCellCoord(se+1)))&&C.call(this,c,f,g,_,oe,T,P,z))return}}_convertFromCellCoord(c){return(c-this.padding)/this.scale}_convertToCellCoord(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const c=this.cells,f=3+this.cells.length+1+1;let g=0;for(let T=0;T<this.cells.length;T++)g+=this.cells[T].length;const _=new Int32Array(f+g+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let C=f;for(let T=0;T<c.length;T++){const P=c[T];_[3+T]=C,_.set(P,C),C+=P.length}return _[3+c.length]=C,_.set(this.keys,C),C+=this.keys.length,_[3+c.length+1]=C,_.set(this.bboxes,C),C+=this.bboxes.length,_.buffer}static serialize(c,f){const g=c.toArrayBuffer();return f&&f.push(g),{buffer:g}}static deserialize(c){return new $h(c.buffer)}}const Jo={};function Ht(h,c,f={}){if(Jo[h])throw new Error(`${h} is already registered.`);Object.defineProperty(c,"_classRegistryKey",{value:h,writeable:!1}),Jo[h]={klass:c,omit:f.omit||[],shallow:f.shallow||[]}}Ht("Object",Object),Ht("TransferableGridIndex",$h),Ht("Color",an),Ht("Error",Error),Ht("AJAXError",Xe),Ht("ResolvedImage",bs),Ht("StylePropertyFunction",Fh),Ht("StyleExpression",Tm,{omit:["_evaluator"]}),Ht("ZoomDependentExpression",Lh),Ht("ZoomConstantExpression",Rh),Ht("CompoundExpression",Zo,{omit:["_evaluate"]});for(const h in Ah)Ah[h]._classRegistryKey||Ht(`Expression_${h}`,Ah[h]);function Rm(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function K0(h){return h.$name||h.constructor._classRegistryKey}function o_(h){return!function(c){if(c===null||typeof c!="object")return!1;const f=K0(c);return!(!f||f==="Object")}(h)&&(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||Rm(h)||Be(h)||ArrayBuffer.isView(h)||h instanceof ImageData)}function Nh(h,c){if(o_(h))return(Rm(h)||Be(h))&&c&&c.push(h),ArrayBuffer.isView(h)&&c&&c.push(h.buffer),h instanceof ImageData&&c&&c.push(h.data.buffer),h;if(Array.isArray(h)){const C=[];for(const T of h)C.push(Nh(T,c));return C}if(typeof h!="object")throw new Error("can't serialize object of type "+typeof h);const f=K0(h);if(!f)throw new Error(`can't serialize object of unregistered class ${h.constructor.name}`);if(!Jo[f])throw new Error(`${f} is not registered.`);const{klass:g}=Jo[f],_=g.serialize?g.serialize(h,c):{};if(g.serialize){if(c&&_===c[c.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const C in h){if(!h.hasOwnProperty(C)||Jo[f].omit.indexOf(C)>=0)continue;const T=h[C];_[C]=Jo[f].shallow.indexOf(C)>=0?T:Nh(T,c)}h instanceof Error&&(_.message=h.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(_.$name=f),_}function Vh(h){if(o_(h))return h;if(Array.isArray(h))return h.map(Vh);if(typeof h!="object")throw new Error("can't deserialize object of type "+typeof h);const c=K0(h)||"Object";if(!Jo[c])throw new Error(`can't deserialize unregistered class ${c}`);const{klass:f}=Jo[c];if(!f)throw new Error(`can't deserialize unregistered class ${c}`);if(f.deserialize)return f.deserialize(h);const g=Object.create(f.prototype);for(const _ of Object.keys(h)){if(_==="$name")continue;const C=h[_];g[_]=Jo[c].shallow.indexOf(_)>=0?C:Vh(C)}return g}class Z0{constructor(){this.first=!0}update(c,f){const g=Math.floor(c);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=c,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=f):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=f),c!==this.lastZoom&&(this.lastZoom=c,this.lastFloorZoom=g,!0))}}const Hr={"Latin-1 Supplement":h=>h>=128&&h<=255,"Hangul Jamo":h=>h>=4352&&h<=4607,Khmer:h=>h>=6016&&h<=6143,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Katakana:h=>h>=12448&&h<=12543,Kanbun:h=>h>=12688&&h<=12703,"CJK Strokes":h=>h>=12736&&h<=12783,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"Private Use Area":h=>h>=57344&&h<=63743,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519};function Y0(h){for(const c of h)if(ex(c.charCodeAt(0)))return!0;return!1}function zC(h){for(const c of h)if(!Wh(c.charCodeAt(0)))return!1;return!0}function J0(h){const c=h.map(f=>{try{return new RegExp(`\\p{sc=${f}}`,"u").source}catch{return null}}).filter(f=>f);return new RegExp(c.join("|"),"u")}const MC=J0(["Arab","Dupl","Mong","Ougr","Syrc"]);function Wh(h){return!MC.test(String.fromCodePoint(h))}const a_=J0(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function ex(h){return!(h!==746&&h!==747&&(h<4352||!(Hr["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||Hr["CJK Compatibility"](h)||Hr["CJK Strokes"](h)||!(!Hr["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||Hr["Enclosed CJK Letters and Months"](h)||Hr["Ideographic Description Characters"](h)||Hr.Kanbun(h)||Hr.Katakana(h)&&h!==12540||!(!Hr["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!Hr["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||Hr["Vertical Forms"](h)||Hr["Yijing Hexagram Symbols"](h)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(h))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(h))||a_.test(String.fromCodePoint(h)))))}function l_(h){return!(ex(h)||function(c){return!!(Hr["Latin-1 Supplement"](c)&&(c===167||c===169||c===174||c===177||c===188||c===189||c===190||c===215||c===247)||Hr["General Punctuation"](c)&&(c===8214||c===8224||c===8225||c===8240||c===8241||c===8251||c===8252||c===8258||c===8263||c===8264||c===8265||c===8273)||Hr["Letterlike Symbols"](c)||Hr["Number Forms"](c)||Hr["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||c===9003||c>=9085&&c<=9114||c>=9150&&c<=9165||c===9167||c>=9169&&c<=9179||c>=9186&&c<=9215)||Hr["Control Pictures"](c)&&c!==9251||Hr["Optical Character Recognition"](c)||Hr["Enclosed Alphanumerics"](c)||Hr["Geometric Shapes"](c)||Hr["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||Hr["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||Hr["CJK Symbols and Punctuation"](c)||Hr.Katakana(c)||Hr["Private Use Area"](c)||Hr["CJK Compatibility Forms"](c)||Hr["Small Form Variants"](c)||Hr["Halfwidth and Fullwidth Forms"](c)||c===8734||c===8756||c===8757||c>=9984&&c<=10087||c>=10102&&c<=10131||c===65532||c===65533)}(h))}const IC=J0(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function tx(h){return IC.test(String.fromCodePoint(h))}function DC(h,c){return!(!c&&tx(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||Hr.Khmer(h))}function RC(h){for(const c of h)if(tx(c.charCodeAt(0)))return!0;return!1}const jo=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Un{constructor(c,f){this.zoom=c,f?(this.now=f.now,this.fadeDuration=f.fadeDuration,this.zoomHistory=f.zoomHistory,this.transition=f.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Z0,this.transition={})}isSupportedScript(c){return function(f,g){for(const _ of f)if(!DC(_.charCodeAt(0),g))return!1;return!0}(c,jo.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const c=this.zoom,f=c-Math.floor(c),g=this.crossFadingFactor();return c>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:f+(1-f)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*f}}}class Uh{constructor(c,f){this.property=c,this.value=f,this.expression=function(g,_){if(km(g))return new Fh(g,_);if(Om(g)){const C=R0(g,_);if(C.result==="error")throw new Error(C.value.map(T=>`${T.key}: ${T.message}`).join(", "));return C.value}{let C=g;return _.type==="color"&&typeof g=="string"?C=an.parse(g):_.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(g)&&(C=oo.parse(g)):C=$s.parse(g),{kind:"constant",evaluate:()=>C}}}(f===void 0?c.specification.default:f,c.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(c,f,g){return this.property.possiblyEvaluate(this,c,f,g)}}class Lm{constructor(c){this.property=c,this.value=new Uh(c,void 0)}transitioned(c,f){return new c_(this.property,this.value,f,Z({},c.transition,this.transition),c.now)}untransitioned(){return new c_(this.property,this.value,null,{},0)}}class Fm{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitionablePropertyValues)}getValue(c){return le(this._values[c].value.value)}setValue(c,f){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Lm(this._values[c].property)),this._values[c].value=new Uh(this._values[c].property,f===null?void 0:le(f))}getTransition(c){return le(this._values[c].transition)}setTransition(c,f){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Lm(this._values[c].property)),this._values[c].transition=le(f)||void 0}serialize(){const c={};for(const f of Object.keys(this._values)){const g=this.getValue(f);g!==void 0&&(c[f]=g);const _=this.getTransition(f);_!==void 0&&(c[`${f}-transition`]=_)}return c}transitioned(c,f){const g=new Rf(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].transitioned(c,f._values[_]);return g}untransitioned(){const c=new Rf(this._properties);for(const f of Object.keys(this._values))c._values[f]=this._values[f].untransitioned();return c}}class c_{constructor(c,f,g,_,C){this.property=c,this.value=f,this.begin=C+_.delay||0,this.end=this.begin+_.duration||0,c.specification.transition&&(_.delay||_.duration)&&(this.prior=g)}possiblyEvaluate(c,f,g){const _=c.now||0,C=this.value.possiblyEvaluate(c,f,g),T=this.prior;if(T){if(_>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(_<this.begin)return T.possiblyEvaluate(c,f,g);{const P=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(c,f,g),C,function(z){if(z<=0)return 0;if(z>=1)return 1;const B=z*z,N=B*z;return 4*(z<.5?N:3*(z-B)+N-.75)}(P))}}return C}}class Rf{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitioningPropertyValues)}possiblyEvaluate(c,f,g){const _=new Ff(this._properties);for(const C of Object.keys(this._values))_._values[C]=this._values[C].possiblyEvaluate(c,f,g);return _}hasTransition(){for(const c of Object.keys(this._values))if(this._values[c].prior)return!0;return!1}}class Lf{constructor(c){this._properties=c,this._values=Object.create(c.defaultPropertyValues)}hasValue(c){return this._values[c].value!==void 0}getValue(c){return le(this._values[c].value)}setValue(c,f){this._values[c]=new Uh(this._values[c].property,f===null?void 0:le(f))}serialize(){const c={};for(const f of Object.keys(this._values)){const g=this.getValue(f);g!==void 0&&(c[f]=g)}return c}possiblyEvaluate(c,f,g){const _=new Ff(this._properties);for(const C of Object.keys(this._values))_._values[C]=this._values[C].possiblyEvaluate(c,f,g);return _}}class ul{constructor(c,f,g){this.property=c,this.value=f,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(c){return this.value.kind==="constant"?this.value.value:c}evaluate(c,f,g,_){return this.property.evaluate(this.value,this.parameters,c,f,g,_)}}class Ff{constructor(c){this._properties=c,this._values=Object.create(c.defaultPossiblyEvaluatedValues)}get(c){return this._values[c]}}class nr{constructor(c){this.specification=c}possiblyEvaluate(c,f){if(c.isDataDriven())throw new Error("Value should not be data driven");return c.expression.evaluate(f)}interpolate(c,f,g){const _=qi[this.specification.type];return _?_(c,f,g):c}}class vr{constructor(c,f){this.specification=c,this.overrides=f}possiblyEvaluate(c,f,g,_){return new ul(this,c.expression.kind==="constant"||c.expression.kind==="camera"?{kind:"constant",value:c.expression.evaluate(f,null,{},g,_)}:c.expression,f)}interpolate(c,f,g){if(c.value.kind!=="constant"||f.value.kind!=="constant")return c;if(c.value.value===void 0||f.value.value===void 0)return new ul(this,{kind:"constant",value:void 0},c.parameters);const _=qi[this.specification.type];if(_){const C=_(c.value.value,f.value.value,g);return new ul(this,{kind:"constant",value:C},c.parameters)}return c}evaluate(c,f,g,_,C,T){return c.kind==="constant"?c.value:c.evaluate(f,g,_,C,T)}}class Bm extends vr{possiblyEvaluate(c,f,g,_){if(c.value===void 0)return new ul(this,{kind:"constant",value:void 0},f);if(c.expression.kind==="constant"){const C=c.expression.evaluate(f,null,{},g,_),T=c.property.specification.type==="resolvedImage"&&typeof C!="string"?C.name:C,P=this._calculate(T,T,T,f);return new ul(this,{kind:"constant",value:P},f)}if(c.expression.kind==="camera"){const C=this._calculate(c.expression.evaluate({zoom:f.zoom-1}),c.expression.evaluate({zoom:f.zoom}),c.expression.evaluate({zoom:f.zoom+1}),f);return new ul(this,{kind:"constant",value:C},f)}return new ul(this,c.expression,f)}evaluate(c,f,g,_,C,T){if(c.kind==="source"){const P=c.evaluate(f,g,_,C,T);return this._calculate(P,P,P,f)}return c.kind==="composite"?this._calculate(c.evaluate({zoom:Math.floor(f.zoom)-1},g,_),c.evaluate({zoom:Math.floor(f.zoom)},g,_),c.evaluate({zoom:Math.floor(f.zoom)+1},g,_),f):c.value}_calculate(c,f,g,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:c,to:f}:{from:g,to:f}}interpolate(c){return c}}class $m{constructor(c){this.specification=c}possiblyEvaluate(c,f,g,_){if(c.value!==void 0){if(c.expression.kind==="constant"){const C=c.expression.evaluate(f,null,{},g,_);return this._calculate(C,C,C,f)}return this._calculate(c.expression.evaluate(new Un(Math.floor(f.zoom-1),f)),c.expression.evaluate(new Un(Math.floor(f.zoom),f)),c.expression.evaluate(new Un(Math.floor(f.zoom+1),f)),f)}}_calculate(c,f,g,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:c,to:f}:{from:g,to:f}}interpolate(c){return c}}class rx{constructor(c){this.specification=c}possiblyEvaluate(c,f,g,_){return!!c.expression.evaluate(f,null,{},g,_)}interpolate(){return!1}}class k{constructor(c){this.properties=c,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const f in c){const g=c[f];g.specification.overridable&&this.overridableProperties.push(f);const _=this.defaultPropertyValues[f]=new Uh(g,void 0),C=this.defaultTransitionablePropertyValues[f]=new Lm(g);this.defaultTransitioningPropertyValues[f]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=_.possiblyEvaluate({})}}}Ht("DataDrivenProperty",vr),Ht("DataConstantProperty",nr),Ht("CrossFadedDataDrivenProperty",Bm),Ht("CrossFadedProperty",$m),Ht("ColorRampProperty",rx);const l="-transition";class p extends st{constructor(c,f){if(super(),this.id=c.id,this.type=c.type,this._featureFilter={filter:()=>!0,needGeometry:!1},c.type!=="custom"&&(this.metadata=c.metadata,this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,c.type!=="background"&&(this.source=c.source,this.sourceLayer=c["source-layer"],this.filter=c.filter),f.layout&&(this._unevaluatedLayout=new Lf(f.layout)),f.paint)){this._transitionablePaint=new Fm(f.paint);for(const g in c.paint)this.setPaintProperty(g,c.paint[g],{validate:!1});for(const g in c.layout)this.setLayoutProperty(g,c.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ff(f.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(c){return c==="visibility"?this.visibility:this._unevaluatedLayout.getValue(c)}setLayoutProperty(c,f,g={}){f!=null&&this._validate(s_,`layers.${this.id}.layout.${c}`,c,f,g)||(c!=="visibility"?this._unevaluatedLayout.setValue(c,f):this.visibility=f)}getPaintProperty(c){return c.endsWith(l)?this._transitionablePaint.getTransition(c.slice(0,-11)):this._transitionablePaint.getValue(c)}setPaintProperty(c,f,g={}){if(f!=null&&this._validate(i_,`layers.${this.id}.paint.${c}`,c,f,g))return!1;if(c.endsWith(l))return this._transitionablePaint.setTransition(c.slice(0,-11),f||void 0),!1;{const _=this._transitionablePaint._values[c],C=_.property.specification["property-type"]==="cross-faded-data-driven",T=_.value.isDataDriven(),P=_.value;this._transitionablePaint.setValue(c,f),this._handleSpecialPaintPropertyUpdate(c);const z=this._transitionablePaint._values[c].value;return z.isDataDriven()||T||C||this._handleOverridablePaintPropertyUpdate(c,P,z)}}_handleSpecialPaintPropertyUpdate(c){}_handleOverridablePaintPropertyUpdate(c,f,g){return!1}isHidden(c){return!!(this.minzoom&&c<this.minzoom)||!!(this.maxzoom&&c>=this.maxzoom)||this.visibility==="none"}updateTransitions(c){this._transitioningPaint=this._transitionablePaint.transitioned(c,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(c,f){c.getCrossfadeParameters&&(this._crossfadeParameters=c.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(c,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(c,void 0,f)}serialize(){const c={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(c.layout=c.layout||{},c.layout.visibility=this.visibility),he(c,(f,g)=>!(f===void 0||g==="layout"&&!Object.keys(f).length||g==="paint"&&!Object.keys(f).length))}_validate(c,f,g,_,C={}){return(!C||C.validate!==!1)&&X0(this,c.call(Mu,{key:f,layerType:this.type,objectKey:g,value:_,styleSpec:Te,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const c in this.paint._values){const f=this.paint.get(c);if(f instanceof ul&&Mh(f.property.specification)&&(f.value.kind==="source"||f.value.kind==="composite")&&f.value.isStateDependent)return!0}return!1}}const x={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class v{constructor(c,f){this._structArray=c,this._pos1=f*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class S{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(c,f){return c._trim(),f&&(c.isTransferred=!0,f.push(c.arrayBuffer)),{length:c.length,arrayBuffer:c.arrayBuffer}}static deserialize(c){const f=Object.create(this.prototype);return f.arrayBuffer=c.arrayBuffer,f.length=c.length,f.capacity=c.arrayBuffer.byteLength/f.bytesPerElement,f._refreshViews(),f}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(c){this.reserve(c),this.length=c}reserve(c){if(c>this.capacity){this.capacity=Math.max(c,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const f=this.uint8;this._refreshViews(),f&&this.uint8.set(f)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function j(h,c=1){let f=0,g=0;return{members:h.map(_=>{const C=x[_.type].BYTES_PER_ELEMENT,T=f=M(f,Math.max(c,C)),P=_.components||1;return g=Math.max(g,C),f+=C*P,{name:_.name,type:_.type,components:P,offset:T}}),size:M(f,Math.max(g,c)),alignment:c}}function M(h,c){return Math.ceil(h/c)*c}class D extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,f){const g=this.length;return this.resize(g+1),this.emplace(g,c,f)}emplace(c,f,g){const _=2*c;return this.int16[_+0]=f,this.int16[_+1]=g,c}}D.prototype.bytesPerElement=4,Ht("StructArrayLayout2i4",D);class V extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,f,g){const _=this.length;return this.resize(_+1),this.emplace(_,c,f,g)}emplace(c,f,g,_){const C=3*c;return this.int16[C+0]=f,this.int16[C+1]=g,this.int16[C+2]=_,c}}V.prototype.bytesPerElement=6,Ht("StructArrayLayout3i6",V);class G extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,f,g,_){const C=this.length;return this.resize(C+1),this.emplace(C,c,f,g,_)}emplace(c,f,g,_,C){const T=4*c;return this.int16[T+0]=f,this.int16[T+1]=g,this.int16[T+2]=_,this.int16[T+3]=C,c}}G.prototype.bytesPerElement=8,Ht("StructArrayLayout4i8",G);class X extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,f,g,_,C,T){const P=this.length;return this.resize(P+1),this.emplace(P,c,f,g,_,C,T)}emplace(c,f,g,_,C,T,P){const z=6*c;return this.int16[z+0]=f,this.int16[z+1]=g,this.int16[z+2]=_,this.int16[z+3]=C,this.int16[z+4]=T,this.int16[z+5]=P,c}}X.prototype.bytesPerElement=12,Ht("StructArrayLayout2i4i12",X);class ne extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,f,g,_,C,T){const P=this.length;return this.resize(P+1),this.emplace(P,c,f,g,_,C,T)}emplace(c,f,g,_,C,T,P){const z=4*c,B=8*c;return this.int16[z+0]=f,this.int16[z+1]=g,this.uint8[B+4]=_,this.uint8[B+5]=C,this.uint8[B+6]=T,this.uint8[B+7]=P,c}}ne.prototype.bytesPerElement=8,Ht("StructArrayLayout2i4ub8",ne);class ae extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,f){const g=this.length;return this.resize(g+1),this.emplace(g,c,f)}emplace(c,f,g){const _=2*c;return this.float32[_+0]=f,this.float32[_+1]=g,c}}ae.prototype.bytesPerElement=8,Ht("StructArrayLayout2f8",ae);class ce extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,f,g,_,C,T,P,z,B,N){const q=this.length;return this.resize(q+1),this.emplace(q,c,f,g,_,C,T,P,z,B,N)}emplace(c,f,g,_,C,T,P,z,B,N,q){const K=10*c;return this.uint16[K+0]=f,this.uint16[K+1]=g,this.uint16[K+2]=_,this.uint16[K+3]=C,this.uint16[K+4]=T,this.uint16[K+5]=P,this.uint16[K+6]=z,this.uint16[K+7]=B,this.uint16[K+8]=N,this.uint16[K+9]=q,c}}ce.prototype.bytesPerElement=20,Ht("StructArrayLayout10ui20",ce);class ye extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,f,g,_,C,T,P,z,B,N,q,K){const te=this.length;return this.resize(te+1),this.emplace(te,c,f,g,_,C,T,P,z,B,N,q,K)}emplace(c,f,g,_,C,T,P,z,B,N,q,K,te){const se=12*c;return this.int16[se+0]=f,this.int16[se+1]=g,this.int16[se+2]=_,this.int16[se+3]=C,this.uint16[se+4]=T,this.uint16[se+5]=P,this.uint16[se+6]=z,this.uint16[se+7]=B,this.int16[se+8]=N,this.int16[se+9]=q,this.int16[se+10]=K,this.int16[se+11]=te,c}}ye.prototype.bytesPerElement=24,Ht("StructArrayLayout4i4ui4i24",ye);class we extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,f,g){const _=this.length;return this.resize(_+1),this.emplace(_,c,f,g)}emplace(c,f,g,_){const C=3*c;return this.float32[C+0]=f,this.float32[C+1]=g,this.float32[C+2]=_,c}}we.prototype.bytesPerElement=12,Ht("StructArrayLayout3f12",we);class ke extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(c){const f=this.length;return this.resize(f+1),this.emplace(f,c)}emplace(c,f){return this.uint32[1*c+0]=f,c}}ke.prototype.bytesPerElement=4,Ht("StructArrayLayout1ul4",ke);class Pe extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,f,g,_,C,T,P,z,B){const N=this.length;return this.resize(N+1),this.emplace(N,c,f,g,_,C,T,P,z,B)}emplace(c,f,g,_,C,T,P,z,B,N){const q=10*c,K=5*c;return this.int16[q+0]=f,this.int16[q+1]=g,this.int16[q+2]=_,this.int16[q+3]=C,this.int16[q+4]=T,this.int16[q+5]=P,this.uint32[K+3]=z,this.uint16[q+8]=B,this.uint16[q+9]=N,c}}Pe.prototype.bytesPerElement=20,Ht("StructArrayLayout6i1ul2ui20",Pe);class fe extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,f,g,_,C,T){const P=this.length;return this.resize(P+1),this.emplace(P,c,f,g,_,C,T)}emplace(c,f,g,_,C,T,P){const z=6*c;return this.int16[z+0]=f,this.int16[z+1]=g,this.int16[z+2]=_,this.int16[z+3]=C,this.int16[z+4]=T,this.int16[z+5]=P,c}}fe.prototype.bytesPerElement=12,Ht("StructArrayLayout2i2i2i12",fe);class De extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,f,g,_,C){const T=this.length;return this.resize(T+1),this.emplace(T,c,f,g,_,C)}emplace(c,f,g,_,C,T){const P=4*c,z=8*c;return this.float32[P+0]=f,this.float32[P+1]=g,this.float32[P+2]=_,this.int16[z+6]=C,this.int16[z+7]=T,c}}De.prototype.bytesPerElement=16,Ht("StructArrayLayout2f1f2i16",De);class Ve extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,f,g,_,C,T){const P=this.length;return this.resize(P+1),this.emplace(P,c,f,g,_,C,T)}emplace(c,f,g,_,C,T,P){const z=16*c,B=4*c,N=8*c;return this.uint8[z+0]=f,this.uint8[z+1]=g,this.float32[B+1]=_,this.float32[B+2]=C,this.int16[N+6]=T,this.int16[N+7]=P,c}}Ve.prototype.bytesPerElement=16,Ht("StructArrayLayout2ub2f2i16",Ve);class Ye extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,f,g){const _=this.length;return this.resize(_+1),this.emplace(_,c,f,g)}emplace(c,f,g,_){const C=3*c;return this.uint16[C+0]=f,this.uint16[C+1]=g,this.uint16[C+2]=_,c}}Ye.prototype.bytesPerElement=6,Ht("StructArrayLayout3ui6",Ye);class dt extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,f,g,_,C,T,P,z,B,N,q,K,te,se,oe,pe,_e){const Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,c,f,g,_,C,T,P,z,B,N,q,K,te,se,oe,pe,_e)}emplace(c,f,g,_,C,T,P,z,B,N,q,K,te,se,oe,pe,_e,Ke){const Ae=24*c,Ue=12*c,it=48*c;return this.int16[Ae+0]=f,this.int16[Ae+1]=g,this.uint16[Ae+2]=_,this.uint16[Ae+3]=C,this.uint32[Ue+2]=T,this.uint32[Ue+3]=P,this.uint32[Ue+4]=z,this.uint16[Ae+10]=B,this.uint16[Ae+11]=N,this.uint16[Ae+12]=q,this.float32[Ue+7]=K,this.float32[Ue+8]=te,this.uint8[it+36]=se,this.uint8[it+37]=oe,this.uint8[it+38]=pe,this.uint32[Ue+10]=_e,this.int16[Ae+22]=Ke,c}}dt.prototype.bytesPerElement=48,Ht("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",dt);class wt extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,f,g,_,C,T,P,z,B,N,q,K,te,se,oe,pe,_e,Ke,Ae,Ue,it,gt,$t,gr,Ft,Dt,hr,Yt){const qt=this.length;return this.resize(qt+1),this.emplace(qt,c,f,g,_,C,T,P,z,B,N,q,K,te,se,oe,pe,_e,Ke,Ae,Ue,it,gt,$t,gr,Ft,Dt,hr,Yt)}emplace(c,f,g,_,C,T,P,z,B,N,q,K,te,se,oe,pe,_e,Ke,Ae,Ue,it,gt,$t,gr,Ft,Dt,hr,Yt,qt){const ut=32*c,fr=16*c;return this.int16[ut+0]=f,this.int16[ut+1]=g,this.int16[ut+2]=_,this.int16[ut+3]=C,this.int16[ut+4]=T,this.int16[ut+5]=P,this.int16[ut+6]=z,this.int16[ut+7]=B,this.uint16[ut+8]=N,this.uint16[ut+9]=q,this.uint16[ut+10]=K,this.uint16[ut+11]=te,this.uint16[ut+12]=se,this.uint16[ut+13]=oe,this.uint16[ut+14]=pe,this.uint16[ut+15]=_e,this.uint16[ut+16]=Ke,this.uint16[ut+17]=Ae,this.uint16[ut+18]=Ue,this.uint16[ut+19]=it,this.uint16[ut+20]=gt,this.uint16[ut+21]=$t,this.uint16[ut+22]=gr,this.uint32[fr+12]=Ft,this.float32[fr+13]=Dt,this.float32[fr+14]=hr,this.uint16[ut+30]=Yt,this.uint16[ut+31]=qt,c}}wt.prototype.bytesPerElement=64,Ht("StructArrayLayout8i15ui1ul2f2ui64",wt);class Lt extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c){const f=this.length;return this.resize(f+1),this.emplace(f,c)}emplace(c,f){return this.float32[1*c+0]=f,c}}Lt.prototype.bytesPerElement=4,Ht("StructArrayLayout1f4",Lt);class Ut extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,f,g){const _=this.length;return this.resize(_+1),this.emplace(_,c,f,g)}emplace(c,f,g,_){const C=3*c;return this.uint16[6*c+0]=f,this.float32[C+1]=g,this.float32[C+2]=_,c}}Ut.prototype.bytesPerElement=12,Ht("StructArrayLayout1ui2f12",Ut);class zt extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,f,g){const _=this.length;return this.resize(_+1),this.emplace(_,c,f,g)}emplace(c,f,g,_){const C=4*c;return this.uint32[2*c+0]=f,this.uint16[C+2]=g,this.uint16[C+3]=_,c}}zt.prototype.bytesPerElement=8,Ht("StructArrayLayout1ul2ui8",zt);class At extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,f){const g=this.length;return this.resize(g+1),this.emplace(g,c,f)}emplace(c,f,g){const _=2*c;return this.uint16[_+0]=f,this.uint16[_+1]=g,c}}At.prototype.bytesPerElement=4,Ht("StructArrayLayout2ui4",At);class ir extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c){const f=this.length;return this.resize(f+1),this.emplace(f,c)}emplace(c,f){return this.uint16[1*c+0]=f,c}}ir.prototype.bytesPerElement=2,Ht("StructArrayLayout1ui2",ir);class Pr extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,f,g,_){const C=this.length;return this.resize(C+1),this.emplace(C,c,f,g,_)}emplace(c,f,g,_,C){const T=4*c;return this.float32[T+0]=f,this.float32[T+1]=g,this.float32[T+2]=_,this.float32[T+3]=C,c}}Pr.prototype.bytesPerElement=16,Ht("StructArrayLayout4f16",Pr);class It extends v{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new b(this.anchorPointX,this.anchorPointY)}}It.prototype.size=20;class Bt extends Pe{get(c){return new It(this,c)}}Ht("CollisionBoxArray",Bt);class Cr extends v{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(c){this._structArray.uint8[this._pos1+37]=c}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(c){this._structArray.uint8[this._pos1+38]=c}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(c){this._structArray.uint32[this._pos4+10]=c}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Cr.prototype.size=48;class qn extends dt{get(c){return new Cr(this,c)}}Ht("PlacedSymbolArray",qn);class Lr extends v{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(c){this._structArray.uint32[this._pos4+12]=c}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Lr.prototype.size=64;class qr extends wt{get(c){return new Lr(this,c)}}Ht("SymbolInstanceArray",qr);class Qn extends Lt{getoffsetX(c){return this.float32[1*c+0]}}Ht("GlyphOffsetArray",Qn);class ks extends V{getx(c){return this.int16[3*c+0]}gety(c){return this.int16[3*c+1]}gettileUnitDistanceFromAnchor(c){return this.int16[3*c+2]}}Ht("SymbolLineVertexArray",ks);class Ma extends v{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ma.prototype.size=12;class Hn extends Ut{get(c){return new Ma(this,c)}}Ht("TextAnchorOffsetArray",Hn);class ao extends v{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ao.prototype.size=8;class Vs extends zt{get(c){return new ao(this,c)}}Ht("FeatureIndexArray",Vs);class Cs extends D{}class Ws extends D{}class hl extends D{}class qh extends X{}class Nm extends ne{}class Qh extends ae{}class ea extends ce{}class Vm extends ye{}class nx extends we{}class ta extends ke{}class ra extends fe{}class Pc extends Ve{}class Ia extends Ye{}class os extends At{}const Ts=j([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ao}=Ts;class Gr{constructor(c=[]){this.segments=c}prepareSegment(c,f,g,_){let C=this.segments[this.segments.length-1];return c>Gr.MAX_VERTEX_ARRAY_LENGTH&&Ee(`Max vertices per segment is ${Gr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${c}`),(!C||C.vertexLength+c>Gr.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==_)&&(C={vertexOffset:f.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},_!==void 0&&(C.sortKey=_),this.segments.push(C)),C}get(){return this.segments}destroy(){for(const c of this.segments)for(const f in c.vaos)c.vaos[f].destroy()}static simpleSegment(c,f,g,_){return new Gr([{vertexOffset:c,primitiveOffset:f,vertexLength:g,primitiveLength:_,vaos:{},sortKey:0}])}}function Iu(h,c){return 256*(h=Q(Math.floor(h),0,255))+Q(Math.floor(c),0,255)}Gr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ht("SegmentVector",Gr);const Hh=j([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Gh={exports:{}},u_={exports:{}};u_.exports=function(h,c){var f,g,_,C,T,P,z,B;for(g=h.length-(f=3&h.length),_=c,T=3432918353,P=461845907,B=0;B<g;)z=255&h.charCodeAt(B)|(255&h.charCodeAt(++B))<<8|(255&h.charCodeAt(++B))<<16|(255&h.charCodeAt(++B))<<24,++B,_=27492+(65535&(C=5*(65535&(_=(_^=z=(65535&(z=(z=(65535&z)*T+(((z>>>16)*T&65535)<<16)&4294967295)<<15|z>>>17))*P+(((z>>>16)*P&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(z=0,f){case 3:z^=(255&h.charCodeAt(B+2))<<16;case 2:z^=(255&h.charCodeAt(B+1))<<8;case 1:_^=z=(65535&(z=(z=(65535&(z^=255&h.charCodeAt(B)))*T+(((z>>>16)*T&65535)<<16)&4294967295)<<15|z>>>17))*P+(((z>>>16)*P&65535)<<16)&4294967295}return _^=h.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0};var LC=u_.exports,h_={exports:{}};h_.exports=function(h,c){for(var f,g=h.length,_=c^g,C=0;g>=4;)f=1540483477*(65535&(f=255&h.charCodeAt(C)|(255&h.charCodeAt(++C))<<8|(255&h.charCodeAt(++C))<<16|(255&h.charCodeAt(++C))<<24))+((1540483477*(f>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),g-=4,++C;switch(g){case 3:_^=(255&h.charCodeAt(C+2))<<16;case 2:_^=(255&h.charCodeAt(C+1))<<8;case 1:_=1540483477*(65535&(_^=255&h.charCodeAt(C)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0};var jc=LC,d_=h_.exports;Gh.exports=jc,Gh.exports.murmur3=jc,Gh.exports.murmur2=d_;var Wm=d(Gh.exports);class Bf{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(c,f,g,_){this.ids.push(Um(c)),this.positions.push(f,g,_)}getPositions(c){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const f=Um(c);let g=0,_=this.ids.length-1;for(;g<_;){const T=g+_>>1;this.ids[T]>=f?_=T:g=T+1}const C=[];for(;this.ids[g]===f;)C.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return C}static serialize(c,f){const g=new Float64Array(c.ids),_=new Uint32Array(c.positions);return qm(g,_,0,g.length-1),f&&f.push(g.buffer,_.buffer),{ids:g,positions:_}}static deserialize(c){const f=new Bf;return f.ids=c.ids,f.positions=c.positions,f.indexed=!0,f}}function Um(h){const c=+h;return!isNaN(c)&&c<=Number.MAX_SAFE_INTEGER?c:Wm(String(h))}function qm(h,c,f,g){for(;f<g;){const _=h[f+g>>1];let C=f-1,T=g+1;for(;;){do C++;while(h[C]<_);do T--;while(h[T]>_);if(C>=T)break;Xh(h,C,T),Xh(c,3*C,3*T),Xh(c,3*C+1,3*T+1),Xh(c,3*C+2,3*T+2)}T-f<g-T?(qm(h,c,f,T),f=T+1):(qm(h,c,T+1,g),g=T)}}function Xh(h,c,f){const g=h[c];h[c]=h[f],h[f]=g}Ht("FeaturePositionMap",Bf);class $f{constructor(c,f){this.gl=c.gl,this.location=f}}class f_ extends $f{constructor(c,f){super(c,f),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class v5 extends $f{constructor(c,f){super(c,f),this.current=[0,0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3]))}}class b5 extends $f{constructor(c,f){super(c,f),this.current=an.transparent}set(c){c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a))}}const DH=new Float32Array(16);function FC(h){return[Iu(255*h.r,255*h.g),Iu(255*h.b,255*h.a)]}class ix{constructor(c,f,g){this.value=c,this.uniformNames=f.map(_=>`u_${_}`),this.type=g}setUniform(c,f,g){c.set(g.constantOr(this.value))}getBinding(c,f,g){return this.type==="color"?new b5(c,f):new f_(c,f)}}class Qm{constructor(c,f){this.uniformNames=f.map(g=>`u_${g}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(c,f){this.pixelRatioFrom=f.pixelRatio,this.pixelRatioTo=c.pixelRatio,this.patternFrom=f.tlbr,this.patternTo=c.tlbr}setUniform(c,f,g,_){const C=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;C&&c.set(C)}getBinding(c,f,g){return g.substr(0,9)==="u_pattern"?new v5(c,f):new f_(c,f)}}class Du{constructor(c,f,g,_){this.expression=c,this.type=g,this.maxValue=0,this.paintVertexAttributes=f.map(C=>({name:`a_${C}`,type:"Float32",components:g==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(c,f,g,_,C){const T=this.paintVertexArray.length,P=this.expression.evaluate(new Un(0),f,{},_,[],C);this.paintVertexArray.resize(c),this._setPaintValue(T,c,P)}updatePaintArray(c,f,g,_){const C=this.expression.evaluate({zoom:0},g,_);this._setPaintValue(c,f,C)}_setPaintValue(c,f,g){if(this.type==="color"){const _=FC(g);for(let C=c;C<f;C++)this.paintVertexArray.emplace(C,_[0],_[1])}else{for(let _=c;_<f;_++)this.paintVertexArray.emplace(_,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Xl{constructor(c,f,g,_,C,T){this.expression=c,this.uniformNames=f.map(P=>`u_${P}_t`),this.type=g,this.useIntegerZoom=_,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=f.map(P=>({name:`a_${P}`,type:"Float32",components:g==="color"?4:2,offset:0})),this.paintVertexArray=new T}populatePaintArray(c,f,g,_,C){const T=this.expression.evaluate(new Un(this.zoom),f,{},_,[],C),P=this.expression.evaluate(new Un(this.zoom+1),f,{},_,[],C),z=this.paintVertexArray.length;this.paintVertexArray.resize(c),this._setPaintValue(z,c,T,P)}updatePaintArray(c,f,g,_){const C=this.expression.evaluate({zoom:this.zoom},g,_),T=this.expression.evaluate({zoom:this.zoom+1},g,_);this._setPaintValue(c,f,C,T)}_setPaintValue(c,f,g,_){if(this.type==="color"){const C=FC(g),T=FC(_);for(let P=c;P<f;P++)this.paintVertexArray.emplace(P,C[0],C[1],T[0],T[1])}else{for(let C=c;C<f;C++)this.paintVertexArray.emplace(C,g,_);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(_))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(c,f){const g=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,_=Q(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);c.set(_)}getBinding(c,f,g){return new f_(c,f)}}class Kh{constructor(c,f,g,_,C,T){this.expression=c,this.type=f,this.useIntegerZoom=g,this.zoom=_,this.layerId=T,this.zoomInPaintVertexArray=new C,this.zoomOutPaintVertexArray=new C}populatePaintArray(c,f,g){const _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(c),this.zoomOutPaintVertexArray.resize(c),this._setPaintValues(_,c,f.patterns&&f.patterns[this.layerId],g)}updatePaintArray(c,f,g,_,C){this._setPaintValues(c,f,g.patterns&&g.patterns[this.layerId],C)}_setPaintValues(c,f,g,_){if(!_||!g)return;const{min:C,mid:T,max:P}=g,z=_[C],B=_[T],N=_[P];if(z&&B&&N)for(let q=c;q<f;q++)this.zoomInPaintVertexArray.emplace(q,B.tl[0],B.tl[1],B.br[0],B.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],B.pixelRatio,z.pixelRatio),this.zoomOutPaintVertexArray.emplace(q,B.tl[0],B.tl[1],B.br[0],B.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],B.pixelRatio,N.pixelRatio)}upload(c){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=c.createVertexBuffer(this.zoomInPaintVertexArray,Hh.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=c.createVertexBuffer(this.zoomOutPaintVertexArray,Hh.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class _5{constructor(c,f,g){this.binders={},this._buffers=[];const _=[];for(const C in c.paint._values){if(!g(C))continue;const T=c.paint.get(C);if(!(T instanceof ul&&Mh(T.property.specification)))continue;const P=RH(C,c.type),z=T.value,B=T.property.specification.type,N=T.property.useIntegerZoom,q=T.property.specification["property-type"],K=q==="cross-faded"||q==="cross-faded-data-driven";if(z.kind==="constant")this.binders[C]=K?new Qm(z.value,P):new ix(z.value,P,B),_.push(`/u_${C}`);else if(z.kind==="source"||K){const te=w5(C,B,"source");this.binders[C]=K?new Kh(z,B,N,f,te,c.id):new Du(z,P,B,te),_.push(`/a_${C}`)}else{const te=w5(C,B,"composite");this.binders[C]=new Xl(z,P,B,N,f,te),_.push(`/z_${C}`)}}this.cacheKey=_.sort().join("")}getMaxValue(c){const f=this.binders[c];return f instanceof Du||f instanceof Xl?f.maxValue:0}populatePaintArrays(c,f,g,_,C){for(const T in this.binders){const P=this.binders[T];(P instanceof Du||P instanceof Xl||P instanceof Kh)&&P.populatePaintArray(c,f,g,_,C)}}setConstantPatternPositions(c,f){for(const g in this.binders){const _=this.binders[g];_ instanceof Qm&&_.setConstantPatternPositions(c,f)}}updatePaintArrays(c,f,g,_,C){let T=!1;for(const P in c){const z=f.getPositions(P);for(const B of z){const N=g.feature(B.index);for(const q in this.binders){const K=this.binders[q];if((K instanceof Du||K instanceof Xl||K instanceof Kh)&&K.expression.isStateDependent===!0){const te=_.paint.get(q);K.expression=te.value,K.updatePaintArray(B.start,B.end,N,c[P],C),T=!0}}}}return T}defines(){const c=[];for(const f in this.binders){const g=this.binders[f];(g instanceof ix||g instanceof Qm)&&c.push(...g.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return c}getBinderAttributes(){const c=[];for(const f in this.binders){const g=this.binders[f];if(g instanceof Du||g instanceof Xl)for(let _=0;_<g.paintVertexAttributes.length;_++)c.push(g.paintVertexAttributes[_].name);else if(g instanceof Kh)for(let _=0;_<Hh.members.length;_++)c.push(Hh.members[_].name)}return c}getBinderUniforms(){const c=[];for(const f in this.binders){const g=this.binders[f];if(g instanceof ix||g instanceof Qm||g instanceof Xl)for(const _ of g.uniformNames)c.push(_)}return c}getPaintVertexBuffers(){return this._buffers}getUniforms(c,f){const g=[];for(const _ in this.binders){const C=this.binders[_];if(C instanceof ix||C instanceof Qm||C instanceof Xl){for(const T of C.uniformNames)if(f[T]){const P=C.getBinding(c,f[T],T);g.push({name:T,property:_,binding:P})}}}return g}setUniforms(c,f,g,_){for(const{name:C,property:T,binding:P}of f)this.binders[T].setUniform(P,_,g.get(T),C)}updatePaintBuffers(c){this._buffers=[];for(const f in this.binders){const g=this.binders[f];if(c&&g instanceof Kh){const _=c.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(g instanceof Du||g instanceof Xl)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(c){for(const f in this.binders){const g=this.binders[f];(g instanceof Du||g instanceof Xl||g instanceof Kh)&&g.upload(c)}this.updatePaintBuffers()}destroy(){for(const c in this.binders){const f=this.binders[c];(f instanceof Du||f instanceof Xl||f instanceof Kh)&&f.destroy()}}}class Nf{constructor(c,f,g=()=>!0){this.programConfigurations={};for(const _ of c)this.programConfigurations[_.id]=new _5(_,f,g);this.needsUpload=!1,this._featureMap=new Bf,this._bufferOffset=0}populatePaintArrays(c,f,g,_,C,T){for(const P in this.programConfigurations)this.programConfigurations[P].populatePaintArrays(c,f,_,C,T);f.id!==void 0&&this._featureMap.add(f.id,g,this._bufferOffset,c),this._bufferOffset=c,this.needsUpload=!0}updatePaintArrays(c,f,g,_){for(const C of g)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(c,this._featureMap,f,C,_)||this.needsUpload}get(c){return this.programConfigurations[c]}upload(c){if(this.needsUpload){for(const f in this.programConfigurations)this.programConfigurations[f].upload(c);this.needsUpload=!1}}destroy(){for(const c in this.programConfigurations)this.programConfigurations[c].destroy()}}function RH(h,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${c}-`,"").replace(/-/g,"_")]}function w5(h,c,f){const g={color:{source:ae,composite:Pr},number:{source:Lt,composite:ae}},_=function(C){return{"line-pattern":{source:ea,composite:ea},"fill-pattern":{source:ea,composite:ea},"fill-extrusion-pattern":{source:ea,composite:ea}}[C]}(h);return _&&_[f]||g[c][f]}Ht("ConstantBinder",ix),Ht("CrossFadedConstantBinder",Qm),Ht("SourceExpressionBinder",Du),Ht("CrossFadedCompositeBinder",Kh),Ht("CompositeExpressionBinder",Xl),Ht("ProgramConfiguration",_5,{omit:["_buffers"]}),Ht("ProgramConfigurationSet",Nf);const ji=8192,BC=Math.pow(2,14)-1,S5=-BC-1;function Vf(h){const c=ji/h.extent,f=h.loadGeometry();for(let g=0;g<f.length;g++){const _=f[g];for(let C=0;C<_.length;C++){const T=_[C],P=Math.round(T.x*c),z=Math.round(T.y*c);T.x=Q(P,S5,BC),T.y=Q(z,S5,BC),(P<T.x||P>T.x+1||z<T.y||z>T.y+1)&&Ee("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return f}function Wf(h,c){return{type:h.type,id:h.id,properties:h.properties,geometry:c?Vf(h):[]}}function p_(h,c,f,g,_){h.emplaceBack(2*c+(g+1)/2,2*f+(_+1)/2)}class $C{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(f=>f.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new Ws,this.indexArray=new Ia,this.segments=new Gr,this.programConfigurations=new Nf(c.layers,c.zoom),this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(c,f,g){const _=this.layers[0],C=[];let T=null,P=!1;_.type==="circle"&&(T=_.layout.get("circle-sort-key"),P=!T.isConstant());for(const{feature:z,id:B,index:N,sourceLayerIndex:q}of c){const K=this.layers[0]._featureFilter.needGeometry,te=Wf(z,K);if(!this.layers[0]._featureFilter.filter(new Un(this.zoom),te,g))continue;const se=P?T.evaluate(te,{},g):void 0,oe={id:B,properties:z.properties,type:z.type,sourceLayerIndex:q,index:N,geometry:K?te.geometry:Vf(z),patterns:{},sortKey:se};C.push(oe)}P&&C.sort((z,B)=>z.sortKey-B.sortKey);for(const z of C){const{geometry:B,index:N,sourceLayerIndex:q}=z,K=c[N].feature;this.addFeature(z,B,N,g),f.featureIndex.insert(K,B,N,q,this.index)}}update(c,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,f,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Ao),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(c,f,g,_){for(const C of f)for(const T of C){const P=T.x,z=T.y;if(P<0||P>=ji||z<0||z>=ji)continue;const B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,c.sortKey),N=B.vertexLength;p_(this.layoutVertexArray,P,z,-1,-1),p_(this.layoutVertexArray,P,z,1,-1),p_(this.layoutVertexArray,P,z,1,1),p_(this.layoutVertexArray,P,z,-1,1),this.indexArray.emplaceBack(N,N+1,N+2),this.indexArray.emplaceBack(N,N+3,N+2),B.vertexLength+=4,B.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,g,{},_)}}function k5(h,c){for(let f=0;f<h.length;f++)if(Hm(c,h[f]))return!0;for(let f=0;f<c.length;f++)if(Hm(h,c[f]))return!0;return!!NC(h,c)}function LH(h,c,f){return!!Hm(h,c)||!!VC(c,h,f)}function C5(h,c){if(h.length===1)return O5(c,h[0]);for(let f=0;f<c.length;f++){const g=c[f];for(let _=0;_<g.length;_++)if(Hm(h,g[_]))return!0}for(let f=0;f<h.length;f++)if(O5(c,h[f]))return!0;for(let f=0;f<c.length;f++)if(NC(h,c[f]))return!0;return!1}function FH(h,c,f){if(h.length>1){if(NC(h,c))return!0;for(let g=0;g<c.length;g++)if(VC(c[g],h,f))return!0}for(let g=0;g<h.length;g++)if(VC(h[g],c,f))return!0;return!1}function NC(h,c){if(h.length===0||c.length===0)return!1;for(let f=0;f<h.length-1;f++){const g=h[f],_=h[f+1];for(let C=0;C<c.length-1;C++)if(BH(g,_,c[C],c[C+1]))return!0}return!1}function BH(h,c,f,g){return qe(h,f,g)!==qe(c,f,g)&&qe(h,c,f)!==qe(h,c,g)}function VC(h,c,f){const g=f*f;if(c.length===1)return h.distSqr(c[0])<g;for(let _=1;_<c.length;_++)if(T5(h,c[_-1],c[_])<g)return!0;return!1}function T5(h,c,f){const g=c.distSqr(f);if(g===0)return h.distSqr(c);const _=((h.x-c.x)*(f.x-c.x)+(h.y-c.y)*(f.y-c.y))/g;return h.distSqr(_<0?c:_>1?f:f.sub(c)._mult(_)._add(c))}function O5(h,c){let f,g,_,C=!1;for(let T=0;T<h.length;T++){f=h[T];for(let P=0,z=f.length-1;P<f.length;z=P++)g=f[P],_=f[z],g.y>c.y!=_.y>c.y&&c.x<(_.x-g.x)*(c.y-g.y)/(_.y-g.y)+g.x&&(C=!C)}return C}function Hm(h,c){let f=!1;for(let g=0,_=h.length-1;g<h.length;_=g++){const C=h[g],T=h[_];C.y>c.y!=T.y>c.y&&c.x<(T.x-C.x)*(c.y-C.y)/(T.y-C.y)+C.x&&(f=!f)}return f}function $H(h,c,f){const g=f[0],_=f[2];if(h.x<g.x&&c.x<g.x||h.x>_.x&&c.x>_.x||h.y<g.y&&c.y<g.y||h.y>_.y&&c.y>_.y)return!1;const C=qe(h,c,f[0]);return C!==qe(h,c,f[1])||C!==qe(h,c,f[2])||C!==qe(h,c,f[3])}function sx(h,c,f){const g=c.paint.get(h).value;return g.kind==="constant"?g.value:f.programConfigurations.get(c.id).getMaxValue(h)}function m_(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function g_(h,c,f,g,_){if(!c[0]&&!c[1])return h;const C=b.convert(c)._mult(_);f==="viewport"&&C._rotate(-g);const T=[];for(let P=0;P<h.length;P++)T.push(h[P].sub(C));return T}let P5,j5;Ht("CircleBucket",$C,{omit:["layers"]});var NH={get paint(){return j5=j5||new k({"circle-radius":new vr(Te.paint_circle["circle-radius"]),"circle-color":new vr(Te.paint_circle["circle-color"]),"circle-blur":new vr(Te.paint_circle["circle-blur"]),"circle-opacity":new vr(Te.paint_circle["circle-opacity"]),"circle-translate":new nr(Te.paint_circle["circle-translate"]),"circle-translate-anchor":new nr(Te.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new nr(Te.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new nr(Te.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vr(Te.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vr(Te.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vr(Te.paint_circle["circle-stroke-opacity"])})},get layout(){return P5=P5||new k({"circle-sort-key":new vr(Te.layout_circle["circle-sort-key"])})}},lo=1e-6,Gm=typeof Float32Array<"u"?Float32Array:Array;function WC(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function A5(h,c,f){var g=c[0],_=c[1],C=c[2],T=c[3],P=c[4],z=c[5],B=c[6],N=c[7],q=c[8],K=c[9],te=c[10],se=c[11],oe=c[12],pe=c[13],_e=c[14],Ke=c[15],Ae=f[0],Ue=f[1],it=f[2],gt=f[3];return h[0]=Ae*g+Ue*P+it*q+gt*oe,h[1]=Ae*_+Ue*z+it*K+gt*pe,h[2]=Ae*C+Ue*B+it*te+gt*_e,h[3]=Ae*T+Ue*N+it*se+gt*Ke,h[4]=(Ae=f[4])*g+(Ue=f[5])*P+(it=f[6])*q+(gt=f[7])*oe,h[5]=Ae*_+Ue*z+it*K+gt*pe,h[6]=Ae*C+Ue*B+it*te+gt*_e,h[7]=Ae*T+Ue*N+it*se+gt*Ke,h[8]=(Ae=f[8])*g+(Ue=f[9])*P+(it=f[10])*q+(gt=f[11])*oe,h[9]=Ae*_+Ue*z+it*K+gt*pe,h[10]=Ae*C+Ue*B+it*te+gt*_e,h[11]=Ae*T+Ue*N+it*se+gt*Ke,h[12]=(Ae=f[12])*g+(Ue=f[13])*P+(it=f[14])*q+(gt=f[15])*oe,h[13]=Ae*_+Ue*z+it*K+gt*pe,h[14]=Ae*C+Ue*B+it*te+gt*_e,h[15]=Ae*T+Ue*N+it*se+gt*Ke,h}Math.hypot||(Math.hypot=function(){for(var h=0,c=arguments.length;c--;)h+=arguments[c]*arguments[c];return Math.sqrt(h)});var ox,VH=A5;function y_(h,c,f){var g=c[0],_=c[1],C=c[2],T=c[3];return h[0]=f[0]*g+f[4]*_+f[8]*C+f[12]*T,h[1]=f[1]*g+f[5]*_+f[9]*C+f[13]*T,h[2]=f[2]*g+f[6]*_+f[10]*C+f[14]*T,h[3]=f[3]*g+f[7]*_+f[11]*C+f[15]*T,h}ox=new Gm(4),Gm!=Float32Array&&(ox[0]=0,ox[1]=0,ox[2]=0,ox[3]=0);class WH extends p{constructor(c){super(c,NH)}createBucket(c){return new $C(c)}queryRadius(c){const f=c;return sx("circle-radius",this,f)+sx("circle-stroke-width",this,f)+m_(this.paint.get("circle-translate"))}queryIntersectsFeature(c,f,g,_,C,T,P,z){const B=g_(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),T.angle,P),N=this.paint.get("circle-radius").evaluate(f,g)+this.paint.get("circle-stroke-width").evaluate(f,g),q=this.paint.get("circle-pitch-alignment")==="map",K=q?B:function(se,oe){return se.map(pe=>E5(pe,oe))}(B,z),te=q?N*P:N;for(const se of _)for(const oe of se){const pe=q?oe:E5(oe,z);let _e=te;const Ke=y_([],[oe.x,oe.y,0,1],z);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?_e*=Ke[3]/T.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(_e*=T.cameraToCenterDistance/Ke[3]),LH(K,pe,_e))return!0}return!1}}function E5(h,c){const f=y_([],[h.x,h.y,0,1],c);return new b(f[0]/f[3],f[1]/f[3])}class z5 extends $C{}let M5;Ht("HeatmapBucket",z5,{omit:["layers"]});var UH={get paint(){return M5=M5||new k({"heatmap-radius":new vr(Te.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vr(Te.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new nr(Te.paint_heatmap["heatmap-intensity"]),"heatmap-color":new rx(Te.paint_heatmap["heatmap-color"]),"heatmap-opacity":new nr(Te.paint_heatmap["heatmap-opacity"])})}};function UC(h,{width:c,height:f},g,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==c*f*g)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${c*f*g}`)}else _=new Uint8Array(c*f*g);return h.width=c,h.height=f,h.data=_,h}function I5(h,{width:c,height:f},g){if(c===h.width&&f===h.height)return;const _=UC({},{width:c,height:f},g);qC(h,_,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,c),height:Math.min(h.height,f)},g),h.width=c,h.height=f,h.data=_.data}function qC(h,c,f,g,_,C){if(_.width===0||_.height===0)return c;if(_.width>h.width||_.height>h.height||f.x>h.width-_.width||f.y>h.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>c.width||_.height>c.height||g.x>c.width-_.width||g.y>c.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const T=h.data,P=c.data;if(T===P)throw new Error("srcData equals dstData, so image is already copied");for(let z=0;z<_.height;z++){const B=((f.y+z)*h.width+f.x)*C,N=((g.y+z)*c.width+g.x)*C;for(let q=0;q<_.width*C;q++)P[N+q]=T[B+q]}return c}class ax{constructor(c,f){UC(this,c,1,f)}resize(c){I5(this,c,1)}clone(){return new ax({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,f,g,_,C){qC(c,f,g,_,C,1)}}class Da{constructor(c,f){UC(this,c,4,f)}resize(c){I5(this,c,4)}replace(c,f){f?this.data.set(c):this.data=c instanceof Uint8ClampedArray?new Uint8Array(c.buffer):c}clone(){return new Da({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,f,g,_,C){qC(c,f,g,_,C,4)}}function D5(h){const c={},f=h.resolution||256,g=h.clips?h.clips.length:1,_=h.image||new Da({width:f,height:g});if(Math.log(f)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${f}`);const C=(T,P,z)=>{c[h.evaluationKey]=z;const B=h.expression.evaluate(c);_.data[T+P+0]=Math.floor(255*B.r/B.a),_.data[T+P+1]=Math.floor(255*B.g/B.a),_.data[T+P+2]=Math.floor(255*B.b/B.a),_.data[T+P+3]=Math.floor(255*B.a)};if(h.clips)for(let T=0,P=0;T<g;++T,P+=4*f)for(let z=0,B=0;z<f;z++,B+=4){const N=z/(f-1),{start:q,end:K}=h.clips[T];C(P,B,q*(1-N)+K*N)}else for(let T=0,P=0;T<f;T++,P+=4)C(0,P,T/(f-1));return _}Ht("AlphaImage",ax),Ht("RGBAImage",Da);const QC="big-fb";class qH extends p{createBucket(c){return new z5(c)}constructor(c){super(c,UH),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=D5({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(QC)&&this.heatmapFbos.delete(QC)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let R5;var QH={get paint(){return R5=R5||new k({"hillshade-illumination-direction":new nr(Te.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new nr(Te.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new nr(Te.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new nr(Te.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new nr(Te.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new nr(Te.paint_hillshade["hillshade-accent-color"])})}};class HH extends p{constructor(c){super(c,QH)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const GH=j([{name:"a_pos",components:2,type:"Int16"}],4),{members:XH}=GH;function L5(h,c,f=2){const g=c&&c.length,_=g?c[0]*f:h.length;let C=F5(h,0,_,f,!0);const T=[];if(!C||C.next===C.prev)return T;let P,z,B;if(g&&(C=function(N,q,K,te){const se=[];for(let oe=0,pe=q.length;oe<pe;oe++){const _e=F5(N,q[oe]*te,oe<pe-1?q[oe+1]*te:N.length,te,!1);_e===_e.next&&(_e.steiner=!0),se.push(nG(_e))}se.sort(eG);for(let oe=0;oe<se.length;oe++)K=tG(se[oe],K);return K}(h,c,C,f)),h.length>80*f){P=1/0,z=1/0;let N=-1/0,q=-1/0;for(let K=f;K<_;K+=f){const te=h[K],se=h[K+1];te<P&&(P=te),se<z&&(z=se),te>N&&(N=te),se>q&&(q=se)}B=Math.max(N-P,q-z),B=B!==0?32767/B:0}return lx(C,T,f,P,z,B,0),T}function F5(h,c,f,g,_){let C;if(_===function(T,P,z,B){let N=0;for(let q=P,K=z-B;q<z;q+=B)N+=(T[K]-T[q])*(T[q+1]+T[K+1]),K=q;return N}(h,c,f,g)>0)for(let T=c;T<f;T+=g)C=N5(T/g|0,h[T],h[T+1],C);else for(let T=f-g;T>=c;T-=g)C=N5(T/g|0,h[T],h[T+1],C);return C&&x_(C,C.next)&&(ux(C),C=C.next),C}function Uf(h,c){if(!h)return h;c||(c=h);let f,g=h;do if(f=!1,g.steiner||!x_(g,g.next)&&_i(g.prev,g,g.next)!==0)g=g.next;else{if(ux(g),g=c=g.prev,g===g.next)break;f=!0}while(f||g!==c);return c}function lx(h,c,f,g,_,C,T){if(!h)return;!T&&C&&function(z,B,N,q){let K=z;do K.z===0&&(K.z=HC(K.x,K.y,B,N,q)),K.prevZ=K.prev,K.nextZ=K.next,K=K.next;while(K!==z);K.prevZ.nextZ=null,K.prevZ=null,function(te){let se,oe=1;do{let pe,_e=te;te=null;let Ke=null;for(se=0;_e;){se++;let Ae=_e,Ue=0;for(let gt=0;gt<oe&&(Ue++,Ae=Ae.nextZ,Ae);gt++);let it=oe;for(;Ue>0||it>0&&Ae;)Ue!==0&&(it===0||!Ae||_e.z<=Ae.z)?(pe=_e,_e=_e.nextZ,Ue--):(pe=Ae,Ae=Ae.nextZ,it--),Ke?Ke.nextZ=pe:te=pe,pe.prevZ=Ke,Ke=pe;_e=Ae}Ke.nextZ=null,oe*=2}while(se>1)}(K)}(h,g,_,C);let P=h;for(;h.prev!==h.next;){const z=h.prev,B=h.next;if(C?ZH(h,g,_,C):KH(h))c.push(z.i,h.i,B.i),ux(h),h=B.next,P=B.next;else if((h=B)===P){T?T===1?lx(h=YH(Uf(h),c),c,f,g,_,C,2):T===2&&JH(h,c,f,g,_,C):lx(Uf(h),c,f,g,_,C,1);break}}}function KH(h){const c=h.prev,f=h,g=h.next;if(_i(c,f,g)>=0)return!1;const _=c.x,C=f.x,T=g.x,P=c.y,z=f.y,B=g.y,N=_<C?_<T?_:T:C<T?C:T,q=P<z?P<B?P:B:z<B?z:B,K=_>C?_>T?_:T:C>T?C:T,te=P>z?P>B?P:B:z>B?z:B;let se=g.next;for(;se!==c;){if(se.x>=N&&se.x<=K&&se.y>=q&&se.y<=te&&Xm(_,P,C,z,T,B,se.x,se.y)&&_i(se.prev,se,se.next)>=0)return!1;se=se.next}return!0}function ZH(h,c,f,g){const _=h.prev,C=h,T=h.next;if(_i(_,C,T)>=0)return!1;const P=_.x,z=C.x,B=T.x,N=_.y,q=C.y,K=T.y,te=P<z?P<B?P:B:z<B?z:B,se=N<q?N<K?N:K:q<K?q:K,oe=P>z?P>B?P:B:z>B?z:B,pe=N>q?N>K?N:K:q>K?q:K,_e=HC(te,se,c,f,g),Ke=HC(oe,pe,c,f,g);let Ae=h.prevZ,Ue=h.nextZ;for(;Ae&&Ae.z>=_e&&Ue&&Ue.z<=Ke;){if(Ae.x>=te&&Ae.x<=oe&&Ae.y>=se&&Ae.y<=pe&&Ae!==_&&Ae!==T&&Xm(P,N,z,q,B,K,Ae.x,Ae.y)&&_i(Ae.prev,Ae,Ae.next)>=0||(Ae=Ae.prevZ,Ue.x>=te&&Ue.x<=oe&&Ue.y>=se&&Ue.y<=pe&&Ue!==_&&Ue!==T&&Xm(P,N,z,q,B,K,Ue.x,Ue.y)&&_i(Ue.prev,Ue,Ue.next)>=0))return!1;Ue=Ue.nextZ}for(;Ae&&Ae.z>=_e;){if(Ae.x>=te&&Ae.x<=oe&&Ae.y>=se&&Ae.y<=pe&&Ae!==_&&Ae!==T&&Xm(P,N,z,q,B,K,Ae.x,Ae.y)&&_i(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.prevZ}for(;Ue&&Ue.z<=Ke;){if(Ue.x>=te&&Ue.x<=oe&&Ue.y>=se&&Ue.y<=pe&&Ue!==_&&Ue!==T&&Xm(P,N,z,q,B,K,Ue.x,Ue.y)&&_i(Ue.prev,Ue,Ue.next)>=0)return!1;Ue=Ue.nextZ}return!0}function YH(h,c){let f=h;do{const g=f.prev,_=f.next.next;!x_(g,_)&&B5(g,f,f.next,_)&&cx(g,_)&&cx(_,g)&&(c.push(g.i,f.i,_.i),ux(f),ux(f.next),f=h=_),f=f.next}while(f!==h);return Uf(f)}function JH(h,c,f,g,_,C){let T=h;do{let P=T.next.next;for(;P!==T.prev;){if(T.i!==P.i&&iG(T,P)){let z=$5(T,P);return T=Uf(T,T.next),z=Uf(z,z.next),lx(T,c,f,g,_,C,0),void lx(z,c,f,g,_,C,0)}P=P.next}T=T.next}while(T!==h)}function eG(h,c){return h.x-c.x}function tG(h,c){const f=function(_,C){let T=C;const P=_.x,z=_.y;let B,N=-1/0;do{if(z<=T.y&&z>=T.next.y&&T.next.y!==T.y){const oe=T.x+(z-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(oe<=P&&oe>N&&(N=oe,B=T.x<T.next.x?T:T.next,oe===P))return B}T=T.next}while(T!==C);if(!B)return null;const q=B,K=B.x,te=B.y;let se=1/0;T=B;do{if(P>=T.x&&T.x>=K&&P!==T.x&&Xm(z<te?P:N,z,K,te,z<te?N:P,z,T.x,T.y)){const oe=Math.abs(z-T.y)/(P-T.x);cx(T,_)&&(oe<se||oe===se&&(T.x>B.x||T.x===B.x&&rG(B,T)))&&(B=T,se=oe)}T=T.next}while(T!==q);return B}(h,c);if(!f)return c;const g=$5(f,h);return Uf(g,g.next),Uf(f,f.next)}function rG(h,c){return _i(h.prev,h,c.prev)<0&&_i(c.next,h,h.next)<0}function HC(h,c,f,g,_){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-f)*_|0)|h<<8))|h<<4))|h<<2))|h<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-g)*_|0)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function nG(h){let c=h,f=h;do(c.x<f.x||c.x===f.x&&c.y<f.y)&&(f=c),c=c.next;while(c!==h);return f}function Xm(h,c,f,g,_,C,T,P){return(_-T)*(c-P)>=(h-T)*(C-P)&&(h-T)*(g-P)>=(f-T)*(c-P)&&(f-T)*(C-P)>=(_-T)*(g-P)}function iG(h,c){return h.next.i!==c.i&&h.prev.i!==c.i&&!function(f,g){let _=f;do{if(_.i!==f.i&&_.next.i!==f.i&&_.i!==g.i&&_.next.i!==g.i&&B5(_,_.next,f,g))return!0;_=_.next}while(_!==f);return!1}(h,c)&&(cx(h,c)&&cx(c,h)&&function(f,g){let _=f,C=!1;const T=(f.x+g.x)/2,P=(f.y+g.y)/2;do _.y>P!=_.next.y>P&&_.next.y!==_.y&&T<(_.next.x-_.x)*(P-_.y)/(_.next.y-_.y)+_.x&&(C=!C),_=_.next;while(_!==f);return C}(h,c)&&(_i(h.prev,h,c.prev)||_i(h,c.prev,c))||x_(h,c)&&_i(h.prev,h,h.next)>0&&_i(c.prev,c,c.next)>0)}function _i(h,c,f){return(c.y-h.y)*(f.x-c.x)-(c.x-h.x)*(f.y-c.y)}function x_(h,c){return h.x===c.x&&h.y===c.y}function B5(h,c,f,g){const _=b_(_i(h,c,f)),C=b_(_i(h,c,g)),T=b_(_i(f,g,h)),P=b_(_i(f,g,c));return _!==C&&T!==P||!(_!==0||!v_(h,f,c))||!(C!==0||!v_(h,g,c))||!(T!==0||!v_(f,h,g))||!(P!==0||!v_(f,c,g))}function v_(h,c,f){return c.x<=Math.max(h.x,f.x)&&c.x>=Math.min(h.x,f.x)&&c.y<=Math.max(h.y,f.y)&&c.y>=Math.min(h.y,f.y)}function b_(h){return h>0?1:h<0?-1:0}function cx(h,c){return _i(h.prev,h,h.next)<0?_i(h,c,h.next)>=0&&_i(h,h.prev,c)>=0:_i(h,c,h.prev)<0||_i(h,h.next,c)<0}function $5(h,c){const f=GC(h.i,h.x,h.y),g=GC(c.i,c.x,c.y),_=h.next,C=c.prev;return h.next=c,c.prev=h,f.next=_,_.prev=f,g.next=f,f.prev=g,C.next=g,g.prev=C,g}function N5(h,c,f,g){const _=GC(h,c,f);return g?(_.next=g.next,_.prev=g,g.next.prev=_,g.next=_):(_.prev=_,_.next=_),_}function ux(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function GC(h,c,f){return{i:h,x:c,y:f,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function XC(h,c,f){const g=f.patternDependencies;let _=!1;for(const C of c){const T=C.paint.get(`${h}-pattern`);T.isConstant()||(_=!0);const P=T.constantOr(null);P&&(_=!0,g[P.to]=!0,g[P.from]=!0)}return _}function KC(h,c,f,g,_){const C=_.patternDependencies;for(const T of c){const P=T.paint.get(`${h}-pattern`).value;if(P.kind!=="constant"){let z=P.evaluate({zoom:g-1},f,{},_.availableImages),B=P.evaluate({zoom:g},f,{},_.availableImages),N=P.evaluate({zoom:g+1},f,{},_.availableImages);z=z&&z.name?z.name:z,B=B&&B.name?B.name:B,N=N&&N.name?N.name:N,C[z]=!0,C[B]=!0,C[N]=!0,f.patterns[T.id]={min:z,mid:B,max:N}}}return f}class ZC{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(f=>f.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new hl,this.indexArray=new Ia,this.indexArray2=new os,this.programConfigurations=new Nf(c.layers,c.zoom),this.segments=new Gr,this.segments2=new Gr,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(c,f,g){this.hasPattern=XC("fill",this.layers,f);const _=this.layers[0].layout.get("fill-sort-key"),C=!_.isConstant(),T=[];for(const{feature:P,id:z,index:B,sourceLayerIndex:N}of c){const q=this.layers[0]._featureFilter.needGeometry,K=Wf(P,q);if(!this.layers[0]._featureFilter.filter(new Un(this.zoom),K,g))continue;const te=C?_.evaluate(K,{},g,f.availableImages):void 0,se={id:z,properties:P.properties,type:P.type,sourceLayerIndex:N,index:B,geometry:q?K.geometry:Vf(P),patterns:{},sortKey:te};T.push(se)}C&&T.sort((P,z)=>P.sortKey-z.sortKey);for(const P of T){const{geometry:z,index:B,sourceLayerIndex:N}=P;if(this.hasPattern){const q=KC("fill",this.layers,P,this.zoom,f);this.patternFeatures.push(q)}else this.addFeature(P,z,B,g,{});f.featureIndex.insert(c[B].feature,z,B,N,this.index)}}update(c,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,f,this.stateDependentLayers,g)}addFeatures(c,f,g){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,XH),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.indexBuffer2=c.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(c,f,g,_,C){for(const T of vm(f,500)){let P=0;for(const te of T)P+=te.length;const z=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray),B=z.vertexLength,N=[],q=[];for(const te of T){if(te.length===0)continue;te!==T[0]&&q.push(N.length/2);const se=this.segments2.prepareSegment(te.length,this.layoutVertexArray,this.indexArray2),oe=se.vertexLength;this.layoutVertexArray.emplaceBack(te[0].x,te[0].y),this.indexArray2.emplaceBack(oe+te.length-1,oe),N.push(te[0].x),N.push(te[0].y);for(let pe=1;pe<te.length;pe++)this.layoutVertexArray.emplaceBack(te[pe].x,te[pe].y),this.indexArray2.emplaceBack(oe+pe-1,oe+pe),N.push(te[pe].x),N.push(te[pe].y);se.vertexLength+=te.length,se.primitiveLength+=te.length}const K=L5(N,q);for(let te=0;te<K.length;te+=3)this.indexArray.emplaceBack(B+K[te],B+K[te+1],B+K[te+2]);z.vertexLength+=P,z.primitiveLength+=K.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,g,C,_)}}let V5,W5;Ht("FillBucket",ZC,{omit:["layers","patternFeatures"]});var sG={get paint(){return W5=W5||new k({"fill-antialias":new nr(Te.paint_fill["fill-antialias"]),"fill-opacity":new vr(Te.paint_fill["fill-opacity"]),"fill-color":new vr(Te.paint_fill["fill-color"]),"fill-outline-color":new vr(Te.paint_fill["fill-outline-color"]),"fill-translate":new nr(Te.paint_fill["fill-translate"]),"fill-translate-anchor":new nr(Te.paint_fill["fill-translate-anchor"]),"fill-pattern":new Bm(Te.paint_fill["fill-pattern"])})},get layout(){return V5=V5||new k({"fill-sort-key":new vr(Te.layout_fill["fill-sort-key"])})}};class oG extends p{constructor(c){super(c,sG)}recalculate(c,f){super.recalculate(c,f);const g=this.paint._values["fill-outline-color"];g.value.kind==="constant"&&g.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new ZC(c)}queryRadius(){return m_(this.paint.get("fill-translate"))}queryIntersectsFeature(c,f,g,_,C,T,P){return C5(g_(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),T.angle,P),_)}isTileClipped(){return!0}}const aG=j([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),lG=j([{name:"a_centroid",components:2,type:"Int16"}],4),{members:cG}=aG;var Zh={},uG=m,U5=Km;function Km(h,c,f,g,_){this.properties={},this.extent=f,this.type=0,this._pbf=h,this._geometry=-1,this._keys=g,this._values=_,h.readFields(hG,this,c)}function hG(h,c,f){h==1?c.id=f.readVarint():h==2?function(g,_){for(var C=g.readVarint()+g.pos;g.pos<C;){var T=_._keys[g.readVarint()],P=_._values[g.readVarint()];_.properties[T]=P}}(f,c):h==3?c.type=f.readVarint():h==4&&(c._geometry=f.pos)}function dG(h){for(var c,f,g=0,_=0,C=h.length,T=C-1;_<C;T=_++)g+=((f=h[T]).x-(c=h[_]).x)*(c.y+f.y);return g}Km.types=["Unknown","Point","LineString","Polygon"],Km.prototype.loadGeometry=function(){var h=this._pbf;h.pos=this._geometry;for(var c,f=h.readVarint()+h.pos,g=1,_=0,C=0,T=0,P=[];h.pos<f;){if(_<=0){var z=h.readVarint();g=7&z,_=z>>3}if(_--,g===1||g===2)C+=h.readSVarint(),T+=h.readSVarint(),g===1&&(c&&P.push(c),c=[]),c.push(new uG(C,T));else{if(g!==7)throw new Error("unknown command "+g);c&&c.push(c[0].clone())}}return c&&P.push(c),P},Km.prototype.bbox=function(){var h=this._pbf;h.pos=this._geometry;for(var c=h.readVarint()+h.pos,f=1,g=0,_=0,C=0,T=1/0,P=-1/0,z=1/0,B=-1/0;h.pos<c;){if(g<=0){var N=h.readVarint();f=7&N,g=N>>3}if(g--,f===1||f===2)(_+=h.readSVarint())<T&&(T=_),_>P&&(P=_),(C+=h.readSVarint())<z&&(z=C),C>B&&(B=C);else if(f!==7)throw new Error("unknown command "+f)}return[T,z,P,B]},Km.prototype.toGeoJSON=function(h,c,f){var g,_,C=this.extent*Math.pow(2,f),T=this.extent*h,P=this.extent*c,z=this.loadGeometry(),B=Km.types[this.type];function N(te){for(var se=0;se<te.length;se++){var oe=te[se];te[se]=[360*(oe.x+T)/C-180,360/Math.PI*Math.atan(Math.exp((180-360*(oe.y+P)/C)*Math.PI/180))-90]}}switch(this.type){case 1:var q=[];for(g=0;g<z.length;g++)q[g]=z[g][0];N(z=q);break;case 2:for(g=0;g<z.length;g++)N(z[g]);break;case 3:for(z=function(te){var se=te.length;if(se<=1)return[te];for(var oe,pe,_e=[],Ke=0;Ke<se;Ke++){var Ae=dG(te[Ke]);Ae!==0&&(pe===void 0&&(pe=Ae<0),pe===Ae<0?(oe&&_e.push(oe),oe=[te[Ke]]):oe.push(te[Ke]))}return oe&&_e.push(oe),_e}(z),g=0;g<z.length;g++)for(_=0;_<z[g].length;_++)N(z[g][_])}z.length===1?z=z[0]:B="Multi"+B;var K={type:"Feature",geometry:{type:B,coordinates:z},properties:this.properties};return"id"in this&&(K.id=this.id),K};var fG=U5,q5=Q5;function Q5(h,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(pG,this,c),this.length=this._features.length}function pG(h,c,f){h===15?c.version=f.readVarint():h===1?c.name=f.readString():h===5?c.extent=f.readVarint():h===2?c._features.push(f.pos):h===3?c._keys.push(f.readString()):h===4&&c._values.push(function(g){for(var _=null,C=g.readVarint()+g.pos;g.pos<C;){var T=g.readVarint()>>3;_=T===1?g.readString():T===2?g.readFloat():T===3?g.readDouble():T===4?g.readVarint64():T===5?g.readVarint():T===6?g.readSVarint():T===7?g.readBoolean():null}return _}(f))}Q5.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var c=this._pbf.readVarint()+this._pbf.pos;return new fG(this._pbf,c,this.extent,this._keys,this._values)};var mG=q5;function gG(h,c,f){if(h===3){var g=new mG(f,f.readVarint()+f.pos);g.length&&(c[g.name]=g)}}Zh.VectorTile=function(h,c){this.layers=h.readFields(gG,{},c)},Zh.VectorTileFeature=U5,Zh.VectorTileLayer=q5;const yG=Zh.VectorTileFeature.types,YC=Math.pow(2,13);function hx(h,c,f,g,_,C,T,P){h.emplaceBack(c,f,2*Math.floor(g*YC)+T,_*YC*2,C*YC*2,Math.round(P))}class JC{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(f=>f.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new qh,this.centroidVertexArray=new Cs,this.indexArray=new Ia,this.programConfigurations=new Nf(c.layers,c.zoom),this.segments=new Gr,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(c,f,g){this.features=[],this.hasPattern=XC("fill-extrusion",this.layers,f);for(const{feature:_,id:C,index:T,sourceLayerIndex:P}of c){const z=this.layers[0]._featureFilter.needGeometry,B=Wf(_,z);if(!this.layers[0]._featureFilter.filter(new Un(this.zoom),B,g))continue;const N={id:C,sourceLayerIndex:P,index:T,geometry:z?B.geometry:Vf(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(KC("fill-extrusion",this.layers,N,this.zoom,f)):this.addFeature(N,N.geometry,T,g,{}),f.featureIndex.insert(_,N.geometry,T,P,this.index,!0)}}addFeatures(c,f,g){for(const _ of this.features){const{geometry:C}=_;this.addFeature(_,C,_.index,f,g)}}update(c,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,f,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,cG),this.centroidVertexBuffer=c.createVertexBuffer(this.centroidVertexArray,lG.members,!0),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(c,f,g,_,C){for(const T of vm(f,500)){const P={x:0,y:0,vertexCount:0};let z=0;for(const se of T)z+=se.length;let B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const se of T){if(se.length===0||vG(se))continue;let oe=0;for(let pe=0;pe<se.length;pe++){const _e=se[pe];if(pe>=1){const Ke=se[pe-1];if(!xG(_e,Ke)){B.vertexLength+4>Gr.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ae=_e.sub(Ke)._perp()._unit(),Ue=Ke.dist(_e);oe+Ue>32768&&(oe=0),hx(this.layoutVertexArray,_e.x,_e.y,Ae.x,Ae.y,0,0,oe),hx(this.layoutVertexArray,_e.x,_e.y,Ae.x,Ae.y,0,1,oe),P.x+=2*_e.x,P.y+=2*_e.y,P.vertexCount+=2,oe+=Ue,hx(this.layoutVertexArray,Ke.x,Ke.y,Ae.x,Ae.y,0,0,oe),hx(this.layoutVertexArray,Ke.x,Ke.y,Ae.x,Ae.y,0,1,oe),P.x+=2*Ke.x,P.y+=2*Ke.y,P.vertexCount+=2;const it=B.vertexLength;this.indexArray.emplaceBack(it,it+2,it+1),this.indexArray.emplaceBack(it+1,it+2,it+3),B.vertexLength+=4,B.primitiveLength+=2}}}}if(B.vertexLength+z>Gr.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(z,this.layoutVertexArray,this.indexArray)),yG[c.type]!=="Polygon")continue;const N=[],q=[],K=B.vertexLength;for(const se of T)if(se.length!==0){se!==T[0]&&q.push(N.length/2);for(let oe=0;oe<se.length;oe++){const pe=se[oe];hx(this.layoutVertexArray,pe.x,pe.y,0,0,1,1,0),P.x+=pe.x,P.y+=pe.y,P.vertexCount+=1,N.push(pe.x),N.push(pe.y)}}const te=L5(N,q);for(let se=0;se<te.length;se+=3)this.indexArray.emplaceBack(K+te[se],K+te[se+2],K+te[se+1]);B.primitiveLength+=te.length/3,B.vertexLength+=z;for(let se=0;se<P.vertexCount;se++){const oe=Math.floor(P.x/P.vertexCount),pe=Math.floor(P.y/P.vertexCount);this.centroidVertexArray.emplaceBack(oe,pe)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,g,C,_)}}function xG(h,c){return h.x===c.x&&(h.x<0||h.x>ji)||h.y===c.y&&(h.y<0||h.y>ji)}function vG(h){return h.every(c=>c.x<0)||h.every(c=>c.x>ji)||h.every(c=>c.y<0)||h.every(c=>c.y>ji)}let H5;Ht("FillExtrusionBucket",JC,{omit:["layers","features"]});var bG={get paint(){return H5=H5||new k({"fill-extrusion-opacity":new nr(Te["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vr(Te["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new nr(Te["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new nr(Te["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Bm(Te["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vr(Te["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vr(Te["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new nr(Te["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class _G extends p{constructor(c){super(c,bG)}createBucket(c){return new JC(c)}queryRadius(){return m_(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,f,g,_,C,T,P,z){const B=g_(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),T.angle,P),N=this.paint.get("fill-extrusion-height").evaluate(f,g),q=this.paint.get("fill-extrusion-base").evaluate(f,g),K=function(se,oe,pe,_e){const Ke=[];for(const Ae of se){const Ue=[Ae.x,Ae.y,0,1];y_(Ue,Ue,oe),Ke.push(new b(Ue[0]/Ue[3],Ue[1]/Ue[3]))}return Ke}(B,z),te=function(se,oe,pe,_e){const Ke=[],Ae=[],Ue=_e[8]*oe,it=_e[9]*oe,gt=_e[10]*oe,$t=_e[11]*oe,gr=_e[8]*pe,Ft=_e[9]*pe,Dt=_e[10]*pe,hr=_e[11]*pe;for(const Yt of se){const qt=[],ut=[];for(const fr of Yt){const ar=fr.x,Tr=fr.y,In=_e[0]*ar+_e[4]*Tr+_e[12],On=_e[1]*ar+_e[5]*Tr+_e[13],Qi=_e[2]*ar+_e[6]*Tr+_e[14],dl=_e[3]*ar+_e[7]*Tr+_e[15],Ps=Qi+gt,Hi=dl+$t,co=In+gr,uo=On+Ft,ho=Qi+Dt,mi=dl+hr,Gi=new b((In+Ue)/Hi,(On+it)/Hi);Gi.z=Ps/Hi,qt.push(Gi);const Us=new b(co/mi,uo/mi);Us.z=ho/mi,ut.push(Us)}Ke.push(qt),Ae.push(ut)}return[Ke,Ae]}(_,q,N,z);return function(se,oe,pe){let _e=1/0;C5(pe,oe)&&(_e=G5(pe,oe[0]));for(let Ke=0;Ke<oe.length;Ke++){const Ae=oe[Ke],Ue=se[Ke];for(let it=0;it<Ae.length-1;it++){const gt=Ae[it],$t=[gt,Ae[it+1],Ue[it+1],Ue[it],gt];k5(pe,$t)&&(_e=Math.min(_e,G5(pe,$t)))}}return _e!==1/0&&_e}(te[0],te[1],K)}}function dx(h,c){return h.x*c.x+h.y*c.y}function G5(h,c){if(h.length===1){let f=0;const g=c[f++];let _;for(;!_||g.equals(_);)if(_=c[f++],!_)return 1/0;for(;f<c.length;f++){const C=c[f],T=h[0],P=_.sub(g),z=C.sub(g),B=T.sub(g),N=dx(P,P),q=dx(P,z),K=dx(z,z),te=dx(B,P),se=dx(B,z),oe=N*K-q*q,pe=(K*te-q*se)/oe,_e=(N*se-q*te)/oe,Ke=g.z*(1-pe-_e)+_.z*pe+C.z*_e;if(isFinite(Ke))return Ke}return 1/0}{let f=1/0;for(const g of c)f=Math.min(f,g.z);return f}}const wG=j([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:SG}=wG,kG=j([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:CG}=kG,TG=Zh.VectorTileFeature.types,OG=Math.cos(Math.PI/180*37.5),X5=Math.pow(2,14)/.5;class eT{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(f=>f.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(f=>{this.gradients[f.id]={}}),this.layoutVertexArray=new Nm,this.layoutVertexArray2=new Qh,this.indexArray=new Ia,this.programConfigurations=new Nf(c.layers,c.zoom),this.segments=new Gr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(c,f,g){this.hasPattern=XC("line",this.layers,f);const _=this.layers[0].layout.get("line-sort-key"),C=!_.isConstant(),T=[];for(const{feature:P,id:z,index:B,sourceLayerIndex:N}of c){const q=this.layers[0]._featureFilter.needGeometry,K=Wf(P,q);if(!this.layers[0]._featureFilter.filter(new Un(this.zoom),K,g))continue;const te=C?_.evaluate(K,{},g):void 0,se={id:z,properties:P.properties,type:P.type,sourceLayerIndex:N,index:B,geometry:q?K.geometry:Vf(P),patterns:{},sortKey:te};T.push(se)}C&&T.sort((P,z)=>P.sortKey-z.sortKey);for(const P of T){const{geometry:z,index:B,sourceLayerIndex:N}=P;if(this.hasPattern){const q=KC("line",this.layers,P,this.zoom,f);this.patternFeatures.push(q)}else this.addFeature(P,z,B,g,{});f.featureIndex.insert(c[B].feature,z,B,N,this.index)}}update(c,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,f,this.stateDependentLayers,g)}addFeatures(c,f,g){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=c.createVertexBuffer(this.layoutVertexArray2,CG)),this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,SG),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(c){if(c.properties&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_end"))return{start:+c.properties.mapbox_clip_start,end:+c.properties.mapbox_clip_end}}addFeature(c,f,g,_,C){const T=this.layers[0].layout,P=T.get("line-join").evaluate(c,{}),z=T.get("line-cap"),B=T.get("line-miter-limit"),N=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(c);for(const q of f)this.addLine(q,c,P,z,B,N);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,g,C,_)}addLine(c,f,g,_,C,T){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let _e=0;_e<c.length-1;_e++)this.totalDistance+=c[_e].dist(c[_e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const P=TG[f.type]==="Polygon";let z=c.length;for(;z>=2&&c[z-1].equals(c[z-2]);)z--;let B=0;for(;B<z-1&&c[B].equals(c[B+1]);)B++;if(z<(P?3:2))return;g==="bevel"&&(C=1.05);const N=this.overscaling<=16?15*ji/(512*this.overscaling):0,q=this.segments.prepareSegment(10*z,this.layoutVertexArray,this.indexArray);let K,te,se,oe,pe;this.e1=this.e2=-1,P&&(K=c[z-2],pe=c[B].sub(K)._unit()._perp());for(let _e=B;_e<z;_e++){if(se=_e===z-1?P?c[B+1]:void 0:c[_e+1],se&&c[_e].equals(se))continue;pe&&(oe=pe),K&&(te=K),K=c[_e],pe=se?se.sub(K)._unit()._perp():oe,oe=oe||pe;let Ke=oe.add(pe);Ke.x===0&&Ke.y===0||Ke._unit();const Ae=oe.x*pe.x+oe.y*pe.y,Ue=Ke.x*pe.x+Ke.y*pe.y,it=Ue!==0?1/Ue:1/0,gt=2*Math.sqrt(2-2*Ue),$t=Ue<OG&&te&&se,gr=oe.x*pe.y-oe.y*pe.x>0;if($t&&_e>B){const hr=K.dist(te);if(hr>2*N){const Yt=K.sub(K.sub(te)._mult(N/hr)._round());this.updateDistance(te,Yt),this.addCurrentVertex(Yt,oe,0,0,q),te=Yt}}const Ft=te&&se;let Dt=Ft?g:P?"butt":_;if(Ft&&Dt==="round"&&(it<T?Dt="miter":it<=2&&(Dt="fakeround")),Dt==="miter"&&it>C&&(Dt="bevel"),Dt==="bevel"&&(it>2&&(Dt="flipbevel"),it<C&&(Dt="miter")),te&&this.updateDistance(te,K),Dt==="miter")Ke._mult(it),this.addCurrentVertex(K,Ke,0,0,q);else if(Dt==="flipbevel"){if(it>100)Ke=pe.mult(-1);else{const hr=it*oe.add(pe).mag()/oe.sub(pe).mag();Ke._perp()._mult(hr*(gr?-1:1))}this.addCurrentVertex(K,Ke,0,0,q),this.addCurrentVertex(K,Ke.mult(-1),0,0,q)}else if(Dt==="bevel"||Dt==="fakeround"){const hr=-Math.sqrt(it*it-1),Yt=gr?hr:0,qt=gr?0:hr;if(te&&this.addCurrentVertex(K,oe,Yt,qt,q),Dt==="fakeround"){const ut=Math.round(180*gt/Math.PI/20);for(let fr=1;fr<ut;fr++){let ar=fr/ut;if(ar!==.5){const In=ar-.5;ar+=ar*In*(ar-1)*((1.0904+Ae*(Ae*(3.55645-1.43519*Ae)-3.2452))*In*In+(.848013+Ae*(.215638*Ae-1.06021)))}const Tr=pe.sub(oe)._mult(ar)._add(oe)._unit()._mult(gr?-1:1);this.addHalfVertex(K,Tr.x,Tr.y,!1,gr,0,q)}}se&&this.addCurrentVertex(K,pe,-Yt,-qt,q)}else if(Dt==="butt")this.addCurrentVertex(K,Ke,0,0,q);else if(Dt==="square"){const hr=te?1:-1;this.addCurrentVertex(K,Ke,hr,hr,q)}else Dt==="round"&&(te&&(this.addCurrentVertex(K,oe,0,0,q),this.addCurrentVertex(K,oe,1,1,q,!0)),se&&(this.addCurrentVertex(K,pe,-1,-1,q,!0),this.addCurrentVertex(K,pe,0,0,q)));if($t&&_e<z-1){const hr=K.dist(se);if(hr>2*N){const Yt=K.add(se.sub(K)._mult(N/hr)._round());this.updateDistance(K,Yt),this.addCurrentVertex(Yt,pe,0,0,q),K=Yt}}}}addCurrentVertex(c,f,g,_,C,T=!1){const P=f.y*_-f.x,z=-f.y-f.x*_;this.addHalfVertex(c,f.x+f.y*g,f.y-f.x*g,T,!1,g,C),this.addHalfVertex(c,P,z,T,!0,-_,C),this.distance>X5/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(c,f,g,_,C,T))}addHalfVertex({x:c,y:f},g,_,C,T,P,z){const B=.5*(this.lineClips?this.scaledDistance*(X5-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((c<<1)+(C?1:0),(f<<1)+(T?1:0),Math.round(63*g)+128,Math.round(63*_)+128,1+(P===0?0:P<0?-1:1)|(63&B)<<2,B>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const N=z.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,N),z.primitiveLength++),T?this.e2=N:this.e1=N}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(c,f){this.distance+=c.dist(f),this.updateScaledDistance()}}let K5,Z5;Ht("LineBucket",eT,{omit:["layers","patternFeatures"]});var Y5={get paint(){return Z5=Z5||new k({"line-opacity":new vr(Te.paint_line["line-opacity"]),"line-color":new vr(Te.paint_line["line-color"]),"line-translate":new nr(Te.paint_line["line-translate"]),"line-translate-anchor":new nr(Te.paint_line["line-translate-anchor"]),"line-width":new vr(Te.paint_line["line-width"]),"line-gap-width":new vr(Te.paint_line["line-gap-width"]),"line-offset":new vr(Te.paint_line["line-offset"]),"line-blur":new vr(Te.paint_line["line-blur"]),"line-dasharray":new $m(Te.paint_line["line-dasharray"]),"line-pattern":new Bm(Te.paint_line["line-pattern"]),"line-gradient":new rx(Te.paint_line["line-gradient"])})},get layout(){return K5=K5||new k({"line-cap":new nr(Te.layout_line["line-cap"]),"line-join":new vr(Te.layout_line["line-join"]),"line-miter-limit":new nr(Te.layout_line["line-miter-limit"]),"line-round-limit":new nr(Te.layout_line["line-round-limit"]),"line-sort-key":new vr(Te.layout_line["line-sort-key"])})}};class PG extends vr{possiblyEvaluate(c,f){return f=new Un(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),super.possiblyEvaluate(c,f)}evaluate(c,f,g,_){return f=Z({},f,{zoom:Math.floor(f.zoom)}),super.evaluate(c,f,g,_)}}let __;class jG extends p{constructor(c){super(c,Y5),this.gradientVersion=0,__||(__=new PG(Y5.paint.properties["line-width"].specification),__.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(c){if(c==="line-gradient"){const f=this.gradientExpression();this.stepInterpolant=!!function(g){return g._styleExpression!==void 0}(f)&&f._styleExpression.expression instanceof al,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,f){super.recalculate(c,f),this.paint._values["line-floorwidth"]=__.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new eT(c)}queryRadius(c){const f=c,g=J5(sx("line-width",this,f),sx("line-gap-width",this,f)),_=sx("line-offset",this,f);return g/2+Math.abs(_)+m_(this.paint.get("line-translate"))}queryIntersectsFeature(c,f,g,_,C,T,P){const z=g_(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),T.angle,P),B=P/2*J5(this.paint.get("line-width").evaluate(f,g),this.paint.get("line-gap-width").evaluate(f,g)),N=this.paint.get("line-offset").evaluate(f,g);return N&&(_=function(q,K){const te=[];for(let se=0;se<q.length;se++){const oe=q[se],pe=[];for(let _e=0;_e<oe.length;_e++){const Ke=oe[_e-1],Ae=oe[_e],Ue=oe[_e+1],it=_e===0?new b(0,0):Ae.sub(Ke)._unit()._perp(),gt=_e===oe.length-1?new b(0,0):Ue.sub(Ae)._unit()._perp(),$t=it._add(gt)._unit(),gr=$t.x*gt.x+$t.y*gt.y;gr!==0&&$t._mult(1/gr),pe.push($t._mult(K)._add(Ae))}te.push(pe)}return te}(_,N*P)),function(q,K,te){for(let se=0;se<K.length;se++){const oe=K[se];if(q.length>=3){for(let pe=0;pe<oe.length;pe++)if(Hm(q,oe[pe]))return!0}if(FH(q,oe,te))return!0}return!1}(z,_,B)}isTileClipped(){return!0}}function J5(h,c){return c>0?c+2*h:h}const AG=j([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),EG=j([{name:"a_projected_pos",components:3,type:"Float32"}],4);j([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const zG=j([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);j([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const eD=j([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),MG=j([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function IG(h,c,f){return h.sections.forEach(g=>{g.text=function(_,C,T){const P=C.layout.get("text-transform").evaluate(T,{});return P==="uppercase"?_=_.toLocaleUpperCase():P==="lowercase"&&(_=_.toLocaleLowerCase()),jo.applyArabicShaping&&(_=jo.applyArabicShaping(_)),_}(g.text,c,f)}),h}j([{name:"triangle",components:3,type:"Uint16"}]),j([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),j([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),j([{type:"Float32",name:"offsetX"}]),j([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),j([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const fx={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Ri=24,tD=Tn,rD=function(h,c,f,g,_){var C,T,P=8*_-g-1,z=(1<<P)-1,B=z>>1,N=-7,q=_-1,K=-1,te=h[c+q];for(q+=K,C=te&(1<<-N)-1,te>>=-N,N+=P;N>0;C=256*C+h[c+q],q+=K,N-=8);for(T=C&(1<<-N)-1,C>>=-N,N+=g;N>0;T=256*T+h[c+q],q+=K,N-=8);if(C===0)C=1-B;else{if(C===z)return T?NaN:1/0*(te?-1:1);T+=Math.pow(2,g),C-=B}return(te?-1:1)*T*Math.pow(2,C-g)},nD=function(h,c,f,g,_,C){var T,P,z,B=8*C-_-1,N=(1<<B)-1,q=N>>1,K=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,te=0,se=1,oe=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(P=isNaN(c)?1:0,T=N):(T=Math.floor(Math.log(c)/Math.LN2),c*(z=Math.pow(2,-T))<1&&(T--,z*=2),(c+=T+q>=1?K/z:K*Math.pow(2,1-q))*z>=2&&(T++,z/=2),T+q>=N?(P=0,T=N):T+q>=1?(P=(c*z-1)*Math.pow(2,_),T+=q):(P=c*Math.pow(2,q-1)*Math.pow(2,_),T=0));_>=8;h[f+te]=255&P,te+=se,P/=256,_-=8);for(T=T<<_|P,B+=_;B>0;h[f+te]=255&T,te+=se,T/=256,B-=8);h[f+te-se]|=128*oe};function Tn(h){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(h)?h:new Uint8Array(h||0),this.pos=0,this.type=0,this.length=this.buf.length}Tn.Varint=0,Tn.Fixed64=1,Tn.Bytes=2,Tn.Fixed32=5;var tT=4294967296,iD=1/tT,sD=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Ru(h){return h.type===Tn.Bytes?h.readVarint()+h.pos:h.pos+1}function Zm(h,c,f){return f?4294967296*c+(h>>>0):4294967296*(c>>>0)+(h>>>0)}function oD(h,c,f){var g=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));f.realloc(g);for(var _=f.pos-1;_>=h;_--)f.buf[_+g]=f.buf[_]}function DG(h,c){for(var f=0;f<h.length;f++)c.writeVarint(h[f])}function RG(h,c){for(var f=0;f<h.length;f++)c.writeSVarint(h[f])}function LG(h,c){for(var f=0;f<h.length;f++)c.writeFloat(h[f])}function FG(h,c){for(var f=0;f<h.length;f++)c.writeDouble(h[f])}function BG(h,c){for(var f=0;f<h.length;f++)c.writeBoolean(h[f])}function $G(h,c){for(var f=0;f<h.length;f++)c.writeFixed32(h[f])}function NG(h,c){for(var f=0;f<h.length;f++)c.writeSFixed32(h[f])}function VG(h,c){for(var f=0;f<h.length;f++)c.writeFixed64(h[f])}function WG(h,c){for(var f=0;f<h.length;f++)c.writeSFixed64(h[f])}function w_(h,c){return(h[c]|h[c+1]<<8|h[c+2]<<16)+16777216*h[c+3]}function Ym(h,c,f){h[f]=c,h[f+1]=c>>>8,h[f+2]=c>>>16,h[f+3]=c>>>24}function aD(h,c){return(h[c]|h[c+1]<<8|h[c+2]<<16)+(h[c+3]<<24)}Tn.prototype={destroy:function(){this.buf=null},readFields:function(h,c,f){for(f=f||this.length;this.pos<f;){var g=this.readVarint(),_=g>>3,C=this.pos;this.type=7&g,h(_,c,this),this.pos===C&&this.skip(g)}return c},readMessage:function(h,c){return this.readFields(h,c,this.readVarint()+this.pos)},readFixed32:function(){var h=w_(this.buf,this.pos);return this.pos+=4,h},readSFixed32:function(){var h=aD(this.buf,this.pos);return this.pos+=4,h},readFixed64:function(){var h=w_(this.buf,this.pos)+w_(this.buf,this.pos+4)*tT;return this.pos+=8,h},readSFixed64:function(){var h=w_(this.buf,this.pos)+aD(this.buf,this.pos+4)*tT;return this.pos+=8,h},readFloat:function(){var h=rD(this.buf,this.pos,!0,23,4);return this.pos+=4,h},readDouble:function(){var h=rD(this.buf,this.pos,!0,52,8);return this.pos+=8,h},readVarint:function(h){var c,f,g=this.buf;return c=127&(f=g[this.pos++]),f<128?c:(c|=(127&(f=g[this.pos++]))<<7,f<128?c:(c|=(127&(f=g[this.pos++]))<<14,f<128?c:(c|=(127&(f=g[this.pos++]))<<21,f<128?c:function(_,C,T){var P,z,B=T.buf;if(P=(112&(z=B[T.pos++]))>>4,z<128||(P|=(127&(z=B[T.pos++]))<<3,z<128)||(P|=(127&(z=B[T.pos++]))<<10,z<128)||(P|=(127&(z=B[T.pos++]))<<17,z<128)||(P|=(127&(z=B[T.pos++]))<<24,z<128)||(P|=(1&(z=B[T.pos++]))<<31,z<128))return Zm(_,P,C);throw new Error("Expected varint not more than 10 bytes")}(c|=(15&(f=g[this.pos]))<<28,h,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var h=this.readVarint();return h%2==1?(h+1)/-2:h/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var h=this.readVarint()+this.pos,c=this.pos;return this.pos=h,h-c>=12&&sD?function(f,g,_){return sD.decode(f.subarray(g,_))}(this.buf,c,h):function(f,g,_){for(var C="",T=g;T<_;){var P,z,B,N=f[T],q=null,K=N>239?4:N>223?3:N>191?2:1;if(T+K>_)break;K===1?N<128&&(q=N):K===2?(192&(P=f[T+1]))==128&&(q=(31&N)<<6|63&P)<=127&&(q=null):K===3?(z=f[T+2],(192&(P=f[T+1]))==128&&(192&z)==128&&((q=(15&N)<<12|(63&P)<<6|63&z)<=2047||q>=55296&&q<=57343)&&(q=null)):K===4&&(z=f[T+2],B=f[T+3],(192&(P=f[T+1]))==128&&(192&z)==128&&(192&B)==128&&((q=(15&N)<<18|(63&P)<<12|(63&z)<<6|63&B)<=65535||q>=1114112)&&(q=null)),q===null?(q=65533,K=1):q>65535&&(q-=65536,C+=String.fromCharCode(q>>>10&1023|55296),q=56320|1023&q),C+=String.fromCharCode(q),T+=K}return C}(this.buf,c,h)},readBytes:function(){var h=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,h);return this.pos=h,c},readPackedVarint:function(h,c){if(this.type!==Tn.Bytes)return h.push(this.readVarint(c));var f=Ru(this);for(h=h||[];this.pos<f;)h.push(this.readVarint(c));return h},readPackedSVarint:function(h){if(this.type!==Tn.Bytes)return h.push(this.readSVarint());var c=Ru(this);for(h=h||[];this.pos<c;)h.push(this.readSVarint());return h},readPackedBoolean:function(h){if(this.type!==Tn.Bytes)return h.push(this.readBoolean());var c=Ru(this);for(h=h||[];this.pos<c;)h.push(this.readBoolean());return h},readPackedFloat:function(h){if(this.type!==Tn.Bytes)return h.push(this.readFloat());var c=Ru(this);for(h=h||[];this.pos<c;)h.push(this.readFloat());return h},readPackedDouble:function(h){if(this.type!==Tn.Bytes)return h.push(this.readDouble());var c=Ru(this);for(h=h||[];this.pos<c;)h.push(this.readDouble());return h},readPackedFixed32:function(h){if(this.type!==Tn.Bytes)return h.push(this.readFixed32());var c=Ru(this);for(h=h||[];this.pos<c;)h.push(this.readFixed32());return h},readPackedSFixed32:function(h){if(this.type!==Tn.Bytes)return h.push(this.readSFixed32());var c=Ru(this);for(h=h||[];this.pos<c;)h.push(this.readSFixed32());return h},readPackedFixed64:function(h){if(this.type!==Tn.Bytes)return h.push(this.readFixed64());var c=Ru(this);for(h=h||[];this.pos<c;)h.push(this.readFixed64());return h},readPackedSFixed64:function(h){if(this.type!==Tn.Bytes)return h.push(this.readSFixed64());var c=Ru(this);for(h=h||[];this.pos<c;)h.push(this.readSFixed64());return h},skip:function(h){var c=7&h;if(c===Tn.Varint)for(;this.buf[this.pos++]>127;);else if(c===Tn.Bytes)this.pos=this.readVarint()+this.pos;else if(c===Tn.Fixed32)this.pos+=4;else{if(c!==Tn.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(h,c){this.writeVarint(h<<3|c)},realloc:function(h){for(var c=this.length||16;c<this.pos+h;)c*=2;if(c!==this.length){var f=new Uint8Array(c);f.set(this.buf),this.buf=f,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(h){this.realloc(4),Ym(this.buf,h,this.pos),this.pos+=4},writeSFixed32:function(h){this.realloc(4),Ym(this.buf,h,this.pos),this.pos+=4},writeFixed64:function(h){this.realloc(8),Ym(this.buf,-1&h,this.pos),Ym(this.buf,Math.floor(h*iD),this.pos+4),this.pos+=8},writeSFixed64:function(h){this.realloc(8),Ym(this.buf,-1&h,this.pos),Ym(this.buf,Math.floor(h*iD),this.pos+4),this.pos+=8},writeVarint:function(h){(h=+h||0)>268435455||h<0?function(c,f){var g,_;if(c>=0?(g=c%4294967296|0,_=c/4294967296|0):(_=~(-c/4294967296),4294967295^(g=~(-c%4294967296))?g=g+1|0:(g=0,_=_+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),function(C,T,P){P.buf[P.pos++]=127&C|128,C>>>=7,P.buf[P.pos++]=127&C|128,C>>>=7,P.buf[P.pos++]=127&C|128,C>>>=7,P.buf[P.pos++]=127&C|128,P.buf[P.pos]=127&(C>>>=7)}(g,0,f),function(C,T){var P=(7&C)<<4;T.buf[T.pos++]|=P|((C>>>=3)?128:0),C&&(T.buf[T.pos++]=127&C|((C>>>=7)?128:0),C&&(T.buf[T.pos++]=127&C|((C>>>=7)?128:0),C&&(T.buf[T.pos++]=127&C|((C>>>=7)?128:0),C&&(T.buf[T.pos++]=127&C|((C>>>=7)?128:0),C&&(T.buf[T.pos++]=127&C)))))}(_,f)}(h,this):(this.realloc(4),this.buf[this.pos++]=127&h|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=h>>>7&127))))},writeSVarint:function(h){this.writeVarint(h<0?2*-h-1:2*h)},writeBoolean:function(h){this.writeVarint(!!h)},writeString:function(h){h=String(h),this.realloc(4*h.length),this.pos++;var c=this.pos;this.pos=function(g,_,C){for(var T,P,z=0;z<_.length;z++){if((T=_.charCodeAt(z))>55295&&T<57344){if(!P){T>56319||z+1===_.length?(g[C++]=239,g[C++]=191,g[C++]=189):P=T;continue}if(T<56320){g[C++]=239,g[C++]=191,g[C++]=189,P=T;continue}T=P-55296<<10|T-56320|65536,P=null}else P&&(g[C++]=239,g[C++]=191,g[C++]=189,P=null);T<128?g[C++]=T:(T<2048?g[C++]=T>>6|192:(T<65536?g[C++]=T>>12|224:(g[C++]=T>>18|240,g[C++]=T>>12&63|128),g[C++]=T>>6&63|128),g[C++]=63&T|128)}return C}(this.buf,h,this.pos);var f=this.pos-c;f>=128&&oD(c,f,this),this.pos=c-1,this.writeVarint(f),this.pos+=f},writeFloat:function(h){this.realloc(4),nD(this.buf,h,this.pos,!0,23,4),this.pos+=4},writeDouble:function(h){this.realloc(8),nD(this.buf,h,this.pos,!0,52,8),this.pos+=8},writeBytes:function(h){var c=h.length;this.writeVarint(c),this.realloc(c);for(var f=0;f<c;f++)this.buf[this.pos++]=h[f]},writeRawMessage:function(h,c){this.pos++;var f=this.pos;h(c,this);var g=this.pos-f;g>=128&&oD(f,g,this),this.pos=f-1,this.writeVarint(g),this.pos+=g},writeMessage:function(h,c,f){this.writeTag(h,Tn.Bytes),this.writeRawMessage(c,f)},writePackedVarint:function(h,c){c.length&&this.writeMessage(h,DG,c)},writePackedSVarint:function(h,c){c.length&&this.writeMessage(h,RG,c)},writePackedBoolean:function(h,c){c.length&&this.writeMessage(h,BG,c)},writePackedFloat:function(h,c){c.length&&this.writeMessage(h,LG,c)},writePackedDouble:function(h,c){c.length&&this.writeMessage(h,FG,c)},writePackedFixed32:function(h,c){c.length&&this.writeMessage(h,$G,c)},writePackedSFixed32:function(h,c){c.length&&this.writeMessage(h,NG,c)},writePackedFixed64:function(h,c){c.length&&this.writeMessage(h,VG,c)},writePackedSFixed64:function(h,c){c.length&&this.writeMessage(h,WG,c)},writeBytesField:function(h,c){this.writeTag(h,Tn.Bytes),this.writeBytes(c)},writeFixed32Field:function(h,c){this.writeTag(h,Tn.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(h,c){this.writeTag(h,Tn.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(h,c){this.writeTag(h,Tn.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(h,c){this.writeTag(h,Tn.Fixed64),this.writeSFixed64(c)},writeVarintField:function(h,c){this.writeTag(h,Tn.Varint),this.writeVarint(c)},writeSVarintField:function(h,c){this.writeTag(h,Tn.Varint),this.writeSVarint(c)},writeStringField:function(h,c){this.writeTag(h,Tn.Bytes),this.writeString(c)},writeFloatField:function(h,c){this.writeTag(h,Tn.Fixed32),this.writeFloat(c)},writeDoubleField:function(h,c){this.writeTag(h,Tn.Fixed64),this.writeDouble(c)},writeBooleanField:function(h,c){this.writeVarintField(h,!!c)}};var rT=d(tD);const nT=3;function UG(h,c,f){h===1&&f.readMessage(qG,c)}function qG(h,c,f){if(h===3){const{id:g,bitmap:_,width:C,height:T,left:P,top:z,advance:B}=f.readMessage(QG,{});c.push({id:g,bitmap:new ax({width:C+2*nT,height:T+2*nT},_),metrics:{width:C,height:T,left:P,top:z,advance:B}})}}function QG(h,c,f){h===1?c.id=f.readVarint():h===2?c.bitmap=f.readBytes():h===3?c.width=f.readVarint():h===4?c.height=f.readVarint():h===5?c.left=f.readSVarint():h===6?c.top=f.readSVarint():h===7&&(c.advance=f.readVarint())}const lD=nT;function cD(h){let c=0,f=0;for(const T of h)c+=T.w*T.h,f=Math.max(f,T.w);h.sort((T,P)=>P.h-T.h);const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),f),h:1/0}];let _=0,C=0;for(const T of h)for(let P=g.length-1;P>=0;P--){const z=g[P];if(!(T.w>z.w||T.h>z.h)){if(T.x=z.x,T.y=z.y,C=Math.max(C,T.y+T.h),_=Math.max(_,T.x+T.w),T.w===z.w&&T.h===z.h){const B=g.pop();P<g.length&&(g[P]=B)}else T.h===z.h?(z.x+=T.w,z.w-=T.w):T.w===z.w?(z.y+=T.h,z.h-=T.h):(g.push({x:z.x+T.w,y:z.y,w:z.w-T.w,h:T.h}),z.y+=T.h,z.h-=T.h);break}}return{w:_,h:C,fill:c/(_*C)||0}}const Eo=1;class iT{constructor(c,{pixelRatio:f,version:g,stretchX:_,stretchY:C,content:T,textFitWidth:P,textFitHeight:z}){this.paddedRect=c,this.pixelRatio=f,this.stretchX=_,this.stretchY=C,this.content=T,this.version=g,this.textFitWidth=P,this.textFitHeight=z}get tl(){return[this.paddedRect.x+Eo,this.paddedRect.y+Eo]}get br(){return[this.paddedRect.x+this.paddedRect.w-Eo,this.paddedRect.y+this.paddedRect.h-Eo]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Eo)/this.pixelRatio,(this.paddedRect.h-2*Eo)/this.pixelRatio]}}class uD{constructor(c,f){const g={},_={};this.haveRenderCallbacks=[];const C=[];this.addImages(c,g,C),this.addImages(f,_,C);const{w:T,h:P}=cD(C),z=new Da({width:T||1,height:P||1});for(const B in c){const N=c[B],q=g[B].paddedRect;Da.copy(N.data,z,{x:0,y:0},{x:q.x+Eo,y:q.y+Eo},N.data)}for(const B in f){const N=f[B],q=_[B].paddedRect,K=q.x+Eo,te=q.y+Eo,se=N.data.width,oe=N.data.height;Da.copy(N.data,z,{x:0,y:0},{x:K,y:te},N.data),Da.copy(N.data,z,{x:0,y:oe-1},{x:K,y:te-1},{width:se,height:1}),Da.copy(N.data,z,{x:0,y:0},{x:K,y:te+oe},{width:se,height:1}),Da.copy(N.data,z,{x:se-1,y:0},{x:K-1,y:te},{width:1,height:oe}),Da.copy(N.data,z,{x:0,y:0},{x:K+se,y:te},{width:1,height:oe})}this.image=z,this.iconPositions=g,this.patternPositions=_}addImages(c,f,g){for(const _ in c){const C=c[_],T={x:0,y:0,w:C.data.width+2*Eo,h:C.data.height+2*Eo};g.push(T),f[_]=new iT(T,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(c,f){c.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in c.updatedImages)this.patchUpdatedImage(this.iconPositions[g],c.getImage(g),f),this.patchUpdatedImage(this.patternPositions[g],c.getImage(g),f)}patchUpdatedImage(c,f,g){if(!c||!f||c.version===f.version)return;c.version=f.version;const[_,C]=c.tl;g.update(f.data,void 0,{x:_,y:C})}}var Yh;Ht("ImagePosition",iT),Ht("ImageAtlas",uD),a.ah=void 0,(Yh=a.ah||(a.ah={}))[Yh.none=0]="none",Yh[Yh.horizontal=1]="horizontal",Yh[Yh.vertical=2]="vertical",Yh[Yh.horizontalOnly=3]="horizontalOnly";const px=-17;class mx{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(c,f){const g=new mx;return g.scale=c||1,g.fontStack=f,g}static forImage(c){const f=new mx;return f.imageName=c,f}}class Jm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(c,f){const g=new Jm;for(let _=0;_<c.sections.length;_++){const C=c.sections[_];C.image?g.addImageSection(C):g.addTextSection(C,f)}return g}length(){return this.text.length}getSection(c){return this.sections[this.sectionIndex[c]]}getSectionIndex(c){return this.sectionIndex[c]}getCharCode(c){return this.text.charCodeAt(c)}verticalizePunctuation(){this.text=function(c){let f="";for(let g=0;g<c.length;g++){const _=c.charCodeAt(g+1)||null,C=c.charCodeAt(g-1)||null;f+=_&&l_(_)&&!fx[c[g+1]]||C&&l_(C)&&!fx[c[g-1]]||!fx[c[g]]?c[g]:fx[c[g]]}return f}(this.text)}trim(){let c=0;for(let g=0;g<this.text.length&&k_[this.text.charCodeAt(g)];g++)c++;let f=this.text.length;for(let g=this.text.length-1;g>=0&&g>=c&&k_[this.text.charCodeAt(g)];g--)f--;this.text=this.text.substring(c,f),this.sectionIndex=this.sectionIndex.slice(c,f)}substring(c,f){const g=new Jm;return g.text=this.text.substring(c,f),g.sectionIndex=this.sectionIndex.slice(c,f),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((c,f)=>Math.max(c,this.sections[f].scale),0)}addTextSection(c,f){this.text+=c.text,this.sections.push(mx.forText(c.scale,c.fontStack||f));const g=this.sections.length-1;for(let _=0;_<c.text.length;++_)this.sectionIndex.push(g)}addImageSection(c){const f=c.image?c.image.name:"";if(f.length===0)return void Ee("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(mx.forImage(f)),this.sectionIndex.push(this.sections.length-1)):Ee("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function S_(h,c,f,g,_,C,T,P,z,B,N,q,K,te,se){const oe=Jm.fromFeature(h,_);let pe;q===a.ah.vertical&&oe.verticalizePunctuation();const{processBidirectionalText:_e,processStyledBidirectionalText:Ke}=jo;if(_e&&oe.sections.length===1){pe=[];const it=_e(oe.toString(),sT(oe,B,C,c,g,te));for(const gt of it){const $t=new Jm;$t.text=gt,$t.sections=oe.sections;for(let gr=0;gr<gt.length;gr++)$t.sectionIndex.push(0);pe.push($t)}}else if(Ke){pe=[];const it=Ke(oe.text,oe.sectionIndex,sT(oe,B,C,c,g,te));for(const gt of it){const $t=new Jm;$t.text=gt[0],$t.sectionIndex=gt[1],$t.sections=oe.sections,pe.push($t)}}else pe=function(it,gt){const $t=[],gr=it.text;let Ft=0;for(const Dt of gt)$t.push(it.substring(Ft,Dt)),Ft=Dt;return Ft<gr.length&&$t.push(it.substring(Ft,gr.length)),$t}(oe,sT(oe,B,C,c,g,te));const Ae=[],Ue={positionedLines:Ae,text:oe.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:q,iconsInText:!1,verticalizable:!1};return function(it,gt,$t,gr,Ft,Dt,hr,Yt,qt,ut,fr,ar){let Tr=0,In=px,On=0,Qi=0;const dl=Yt==="right"?1:Yt==="left"?0:.5;let Ps=0;for(const mi of Ft){mi.trim();const Gi=mi.getMaxScale(),Us=(Gi-1)*Ri,js={positionedGlyphs:[],lineOffset:0};it.positionedLines[Ps]=js;const fo=js.positionedGlyphs;let As=0;if(!mi.length()){In+=Dt,++Ps;continue}for(let zo=0;zo<mi.length();zo++){const cn=mi.getSection(zo),$n=mi.getSectionIndex(zo),Gn=mi.getCharCode(zo);let na=0,oi=null,ng=null,Ec=null,zc=Ri;const fl=!(qt===a.ah.horizontal||!fr&&!ex(Gn)||fr&&(k_[Gn]||(Hi=Gn,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Hi)))));if(cn.imageName){const Fa=gr[cn.imageName];if(!Fa)continue;Ec=cn.imageName,it.iconsInText=it.iconsInText||!0,ng=Fa.paddedRect;const as=Fa.displaySize;cn.scale=cn.scale*Ri/ar,oi={width:as[0],height:as[1],left:Eo,top:-lD,advance:fl?as[1]:as[0]},na=Us+(Ri-as[1]*cn.scale),zc=oi.advance;const Lu=fl?as[0]*cn.scale-Ri*Gi:as[1]*cn.scale-Ri*Gi;Lu>0&&Lu>As&&(As=Lu)}else{const Fa=$t[cn.fontStack],as=Fa&&Fa[Gn];if(as&&as.rect)ng=as.rect,oi=as.metrics;else{const Lu=gt[cn.fontStack],_x=Lu&&Lu[Gn];if(!_x)continue;oi=_x.metrics}na=(Gi-cn.scale)*Ri}fl?(it.verticalizable=!0,fo.push({glyph:Gn,imageName:Ec,x:Tr,y:In+na,vertical:fl,scale:cn.scale,fontStack:cn.fontStack,sectionIndex:$n,metrics:oi,rect:ng}),Tr+=zc*cn.scale+ut):(fo.push({glyph:Gn,imageName:Ec,x:Tr,y:In+na,vertical:fl,scale:cn.scale,fontStack:cn.fontStack,sectionIndex:$n,metrics:oi,rect:ng}),Tr+=oi.advance*cn.scale+ut)}fo.length!==0&&(On=Math.max(Tr-ut,On),KG(fo,0,fo.length-1,dl,As)),Tr=0;const La=Dt*Gi+As;js.lineOffset=Math.max(As,Us),In+=La,Qi=Math.max(La,Qi),++Ps}var Hi;const co=In-px,{horizontalAlign:uo,verticalAlign:ho}=oT(hr);(function(mi,Gi,Us,js,fo,As,La,zo,cn){const $n=(Gi-Us)*fo;let Gn=0;Gn=As!==La?-zo*js-px:(-js*cn+.5)*La;for(const na of mi)for(const oi of na.positionedGlyphs)oi.x+=$n,oi.y+=Gn})(it.positionedLines,dl,uo,ho,On,Qi,Dt,co,Ft.length),it.top+=-ho*co,it.bottom=it.top+co,it.left+=-uo*On,it.right=it.left+On}(Ue,c,f,g,pe,T,P,z,q,B,K,se),!function(it){for(const gt of it)if(gt.positionedGlyphs.length!==0)return!1;return!0}(Ae)&&Ue}const k_={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},HG={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},GG={40:!0};function hD(h,c,f,g,_,C){if(c.imageName){const T=g[c.imageName];return T?T.displaySize[0]*c.scale*Ri/C+_:0}{const T=f[c.fontStack],P=T&&T[h];return P?P.metrics.advance*c.scale+_:0}}function dD(h,c,f,g){const _=Math.pow(h-c,2);return g?h<c?_/2:2*_:_+Math.abs(f)*f}function XG(h,c,f){let g=0;return h===10&&(g-=1e4),f&&(g+=150),h!==40&&h!==65288||(g+=50),c!==41&&c!==65289||(g+=50),g}function fD(h,c,f,g,_,C){let T=null,P=dD(c,f,_,C);for(const z of g){const B=dD(c-z.x,f,_,C)+z.badness;B<=P&&(T=z,P=B)}return{index:h,x:c,priorBreak:T,badness:P}}function pD(h){return h?pD(h.priorBreak).concat(h.index):[]}function sT(h,c,f,g,_,C){if(!h)return[];const T=[],P=function(q,K,te,se,oe,pe){let _e=0;for(let Ke=0;Ke<q.length();Ke++){const Ae=q.getSection(Ke);_e+=hD(q.getCharCode(Ke),Ae,se,oe,K,pe)}return _e/Math.max(1,Math.ceil(_e/te))}(h,c,f,g,_,C),z=h.text.indexOf("")>=0;let B=0;for(let q=0;q<h.length();q++){const K=h.getSection(q),te=h.getCharCode(q);if(k_[te]||(B+=hD(te,K,g,_,c,C)),q<h.length()-1){const se=!((N=te)<11904)&&(!!Hr["CJK Compatibility Forms"](N)||!!Hr["CJK Compatibility"](N)||!!Hr["CJK Strokes"](N)||!!Hr["CJK Symbols and Punctuation"](N)||!!Hr["Enclosed CJK Letters and Months"](N)||!!Hr["Halfwidth and Fullwidth Forms"](N)||!!Hr["Ideographic Description Characters"](N)||!!Hr["Vertical Forms"](N)||a_.test(String.fromCodePoint(N)));(HG[te]||se||K.imageName||q!==h.length()-2&&GG[h.getCharCode(q+1)])&&T.push(fD(q+1,B,P,T,XG(te,h.getCharCode(q+1),se&&z),!1))}}var N;return pD(fD(h.length(),B,P,T,0,!0))}function oT(h){let c=.5,f=.5;switch(h){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0}return{horizontalAlign:c,verticalAlign:f}}function KG(h,c,f,g,_){if(!g&&!_)return;const C=h[f],T=(h[f].x+C.metrics.advance*C.scale)*g;for(let P=c;P<=f;P++)h[P].x-=T,h[P].y+=_}function ZG(h,c,f){const{horizontalAlign:g,verticalAlign:_}=oT(f),C=c[0]-h.displaySize[0]*g,T=c[1]-h.displaySize[1]*_;return{image:h,top:T,bottom:T+h.displaySize[1],left:C,right:C+h.displaySize[0]}}function mD(h){var c,f;let g=h.left,_=h.top,C=h.right-g,T=h.bottom-_;const P=(c=h.image.textFitWidth)!==null&&c!==void 0?c:"stretchOrShrink",z=(f=h.image.textFitHeight)!==null&&f!==void 0?f:"stretchOrShrink",B=(h.image.content[2]-h.image.content[0])/(h.image.content[3]-h.image.content[1]);if(z==="proportional"){if(P==="stretchOnly"&&C/T<B||P==="proportional"){const N=Math.ceil(T*B);g*=N/C,C=N}}else if(P==="proportional"&&z==="stretchOnly"&&B!==0&&C/T>B){const N=Math.ceil(C/B);_*=N/T,T=N}return{x1:g,y1:_,x2:g+C,y2:_+T}}function gD(h,c,f,g,_,C){const T=h.image;let P;if(T.content){const pe=T.content,_e=T.pixelRatio||1;P=[pe[0]/_e,pe[1]/_e,T.displaySize[0]-pe[2]/_e,T.displaySize[1]-pe[3]/_e]}const z=c.left*C,B=c.right*C;let N,q,K,te;f==="width"||f==="both"?(te=_[0]+z-g[3],q=_[0]+B+g[1]):(te=_[0]+(z+B-T.displaySize[0])/2,q=te+T.displaySize[0]);const se=c.top*C,oe=c.bottom*C;return f==="height"||f==="both"?(N=_[1]+se-g[0],K=_[1]+oe+g[2]):(N=_[1]+(se+oe-T.displaySize[1])/2,K=N+T.displaySize[1]),{image:T,top:N,right:q,bottom:K,left:te,collisionPadding:P}}const gx=255,Ac=128,Jh=gx*Ac;function yD(h,c){const{expression:f}=c;if(f.kind==="constant")return{kind:"constant",layoutSize:f.evaluate(new Un(h+1))};if(f.kind==="source")return{kind:"source"};{const{zoomStops:g,interpolationType:_}=f;let C=0;for(;C<g.length&&g[C]<=h;)C++;C=Math.max(0,C-1);let T=C;for(;T<g.length&&g[T]<h+1;)T++;T=Math.min(g.length-1,T);const P=g[C],z=g[T];return f.kind==="composite"?{kind:"composite",minZoom:P,maxZoom:z,interpolationType:_}:{kind:"camera",minZoom:P,maxZoom:z,minSize:f.evaluate(new Un(P)),maxSize:f.evaluate(new Un(z)),interpolationType:_}}}function aT(h,c,f){let g="never";const _=h.get(c);return _?g=_:h.get(f)&&(g="always"),g}const YG=Zh.VectorTileFeature.types,JG=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function C_(h,c,f,g,_,C,T,P,z,B,N,q,K){const te=P?Math.min(Jh,Math.round(P[0])):0,se=P?Math.min(Jh,Math.round(P[1])):0;h.emplaceBack(c,f,Math.round(32*g),Math.round(32*_),C,T,(te<<1)+(z?1:0),se,16*B,16*N,256*q,256*K)}function lT(h,c,f){h.emplaceBack(c.x,c.y,f),h.emplaceBack(c.x,c.y,f),h.emplaceBack(c.x,c.y,f),h.emplaceBack(c.x,c.y,f)}function eX(h){for(const c of h.sections)if(RC(c.text))return!0;return!1}class cT{constructor(c){this.layoutVertexArray=new Vm,this.indexArray=new Ia,this.programConfigurations=c,this.segments=new Gr,this.dynamicLayoutVertexArray=new nx,this.opacityVertexArray=new ta,this.hasVisibleVertices=!1,this.placedSymbolArray=new qn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(c,f,g,_){this.isEmpty()||(g&&(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,AG.members),this.indexBuffer=c.createIndexBuffer(this.indexArray,f),this.dynamicLayoutVertexBuffer=c.createVertexBuffer(this.dynamicLayoutVertexArray,EG.members,!0),this.opacityVertexBuffer=c.createVertexBuffer(this.opacityVertexArray,JG,!0),this.opacityVertexBuffer.itemSize=1),(g||_)&&this.programConfigurations.upload(c))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ht("SymbolBuffers",cT);class uT{constructor(c,f,g){this.layoutVertexArray=new c,this.layoutAttributes=f,this.indexArray=new g,this.segments=new Gr,this.collisionVertexArray=new Pc}upload(c){this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=c.createVertexBuffer(this.collisionVertexArray,zG.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ht("CollisionBuffers",uT);class eg{constructor(c){this.collisionBoxArray=c.collisionBoxArray,this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(T=>T.id),this.index=c.index,this.pixelRatio=c.pixelRatio,this.sourceLayerIndex=c.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=WC([]),this.placementViewportMatrix=WC([]);const f=this.layers[0]._unevaluatedLayout._values;this.textSizeData=yD(this.zoom,f["text-size"]),this.iconSizeData=yD(this.zoom,f["icon-size"]);const g=this.layers[0].layout,_=g.get("symbol-sort-key"),C=g.get("symbol-z-order");this.canOverlap=aT(g,"text-overlap","text-allow-overlap")!=="never"||aT(g,"icon-overlap","icon-allow-overlap")!=="never"||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(T=>a.ah[T])),this.stateDependentLayerIds=this.layers.filter(T=>T.isStateDependent()).map(T=>T.id),this.sourceID=c.sourceID}createArrays(){this.text=new cT(new Nf(this.layers,this.zoom,c=>/^text/.test(c))),this.icon=new cT(new Nf(this.layers,this.zoom,c=>/^icon/.test(c))),this.glyphOffsetArray=new Qn,this.lineVertexArray=new ks,this.symbolInstances=new qr,this.textAnchorOffsets=new Hn}calculateGlyphDependencies(c,f,g,_,C){for(let T=0;T<c.length;T++)if(f[c.charCodeAt(T)]=!0,(g||_)&&C){const P=fx[c.charAt(T)];P&&(f[P.charCodeAt(0)]=!0)}}populate(c,f,g){const _=this.layers[0],C=_.layout,T=C.get("text-font"),P=C.get("text-field"),z=C.get("icon-image"),B=(P.value.kind!=="constant"||P.value.value instanceof vs&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),N=z.value.kind!=="constant"||!!z.value.value||Object.keys(z.parameters).length>0,q=C.get("symbol-sort-key");if(this.features=[],!B&&!N)return;const K=f.iconDependencies,te=f.glyphDependencies,se=f.availableImages,oe=new Un(this.zoom);for(const{feature:pe,id:_e,index:Ke,sourceLayerIndex:Ae}of c){const Ue=_._featureFilter.needGeometry,it=Wf(pe,Ue);if(!_._featureFilter.filter(oe,it,g))continue;let gt,$t;if(Ue||(it.geometry=Vf(pe)),B){const Ft=_.getValueAndResolveTokens("text-field",it,g,se),Dt=vs.factory(Ft),hr=this.hasRTLText=this.hasRTLText||eX(Dt);(!hr||jo.getRTLTextPluginStatus()==="unavailable"||hr&&jo.isParsed())&&(gt=IG(Dt,_,it))}if(N){const Ft=_.getValueAndResolveTokens("icon-image",it,g,se);$t=Ft instanceof bs?Ft:bs.fromString(Ft)}if(!gt&&!$t)continue;const gr=this.sortFeaturesByKey?q.evaluate(it,{},g):void 0;if(this.features.push({id:_e,text:gt,icon:$t,index:Ke,sourceLayerIndex:Ae,geometry:it.geometry,properties:pe.properties,type:YG[pe.type],sortKey:gr}),$t&&(K[$t.name]=!0),gt){const Ft=T.evaluate(it,{},g).join(","),Dt=C.get("text-rotation-alignment")!=="viewport"&&C.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ah.vertical)>=0;for(const hr of gt.sections)if(hr.image)K[hr.image.name]=!0;else{const Yt=Y0(gt.toString()),qt=hr.fontStack||Ft,ut=te[qt]=te[qt]||{};this.calculateGlyphDependencies(hr.text,ut,Dt,this.allowVerticalPlacement,Yt)}}}C.get("symbol-placement")==="line"&&(this.features=function(pe){const _e={},Ke={},Ae=[];let Ue=0;function it(Ft){Ae.push(pe[Ft]),Ue++}function gt(Ft,Dt,hr){const Yt=Ke[Ft];return delete Ke[Ft],Ke[Dt]=Yt,Ae[Yt].geometry[0].pop(),Ae[Yt].geometry[0]=Ae[Yt].geometry[0].concat(hr[0]),Yt}function $t(Ft,Dt,hr){const Yt=_e[Dt];return delete _e[Dt],_e[Ft]=Yt,Ae[Yt].geometry[0].shift(),Ae[Yt].geometry[0]=hr[0].concat(Ae[Yt].geometry[0]),Yt}function gr(Ft,Dt,hr){const Yt=hr?Dt[0][Dt[0].length-1]:Dt[0][0];return`${Ft}:${Yt.x}:${Yt.y}`}for(let Ft=0;Ft<pe.length;Ft++){const Dt=pe[Ft],hr=Dt.geometry,Yt=Dt.text?Dt.text.toString():null;if(!Yt){it(Ft);continue}const qt=gr(Yt,hr),ut=gr(Yt,hr,!0);if(qt in Ke&&ut in _e&&Ke[qt]!==_e[ut]){const fr=$t(qt,ut,hr),ar=gt(qt,ut,Ae[fr].geometry);delete _e[qt],delete Ke[ut],Ke[gr(Yt,Ae[ar].geometry,!0)]=ar,Ae[fr].geometry=null}else qt in Ke?gt(qt,ut,hr):ut in _e?$t(qt,ut,hr):(it(Ft),_e[qt]=Ue-1,Ke[ut]=Ue-1)}return Ae.filter(Ft=>Ft.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((pe,_e)=>pe.sortKey-_e.sortKey)}update(c,f,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(c,f,this.layers,g),this.icon.programConfigurations.updatePaintArrays(c,f,this.layers,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(c){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(c),this.iconCollisionBox.upload(c)),this.text.upload(c,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(c,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(c,f){const g=this.lineVertexArray.length;if(c.segment!==void 0){let _=c.dist(f[c.segment+1]),C=c.dist(f[c.segment]);const T={};for(let P=c.segment+1;P<f.length;P++)T[P]={x:f[P].x,y:f[P].y,tileUnitDistanceFromAnchor:_},P<f.length-1&&(_+=f[P+1].dist(f[P]));for(let P=c.segment||0;P>=0;P--)T[P]={x:f[P].x,y:f[P].y,tileUnitDistanceFromAnchor:C},P>0&&(C+=f[P-1].dist(f[P]));for(let P=0;P<f.length;P++){const z=T[P];this.lineVertexArray.emplaceBack(z.x,z.y,z.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(c,f,g,_,C,T,P,z,B,N,q,K){const te=c.indexArray,se=c.layoutVertexArray,oe=c.segments.prepareSegment(4*f.length,se,te,this.canOverlap?T.sortKey:void 0),pe=this.glyphOffsetArray.length,_e=oe.vertexLength,Ke=this.allowVerticalPlacement&&P===a.ah.vertical?Math.PI/2:0,Ae=T.text&&T.text.sections;for(let Ue=0;Ue<f.length;Ue++){const{tl:it,tr:gt,bl:$t,br:gr,tex:Ft,pixelOffsetTL:Dt,pixelOffsetBR:hr,minFontScaleX:Yt,minFontScaleY:qt,glyphOffset:ut,isSDF:fr,sectionIndex:ar}=f[Ue],Tr=oe.vertexLength,In=ut[1];C_(se,z.x,z.y,it.x,In+it.y,Ft.x,Ft.y,g,fr,Dt.x,Dt.y,Yt,qt),C_(se,z.x,z.y,gt.x,In+gt.y,Ft.x+Ft.w,Ft.y,g,fr,hr.x,Dt.y,Yt,qt),C_(se,z.x,z.y,$t.x,In+$t.y,Ft.x,Ft.y+Ft.h,g,fr,Dt.x,hr.y,Yt,qt),C_(se,z.x,z.y,gr.x,In+gr.y,Ft.x+Ft.w,Ft.y+Ft.h,g,fr,hr.x,hr.y,Yt,qt),lT(c.dynamicLayoutVertexArray,z,Ke),te.emplaceBack(Tr,Tr+1,Tr+2),te.emplaceBack(Tr+1,Tr+2,Tr+3),oe.vertexLength+=4,oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ut[0]),Ue!==f.length-1&&ar===f[Ue+1].sectionIndex||c.programConfigurations.populatePaintArrays(se.length,T,T.index,{},K,Ae&&Ae[ar])}c.placedSymbolArray.emplaceBack(z.x,z.y,pe,this.glyphOffsetArray.length-pe,_e,B,N,z.segment,g?g[0]:0,g?g[1]:0,_[0],_[1],P,0,!1,0,q)}_addCollisionDebugVertex(c,f,g,_,C,T){return f.emplaceBack(0,0),c.emplaceBack(g.x,g.y,_,C,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(c,f,g,_,C,T,P){const z=C.segments.prepareSegment(4,C.layoutVertexArray,C.indexArray),B=z.vertexLength,N=C.layoutVertexArray,q=C.collisionVertexArray,K=P.anchorX,te=P.anchorY;this._addCollisionDebugVertex(N,q,T,K,te,new b(c,f)),this._addCollisionDebugVertex(N,q,T,K,te,new b(g,f)),this._addCollisionDebugVertex(N,q,T,K,te,new b(g,_)),this._addCollisionDebugVertex(N,q,T,K,te,new b(c,_)),z.vertexLength+=4;const se=C.indexArray;se.emplaceBack(B,B+1),se.emplaceBack(B+1,B+2),se.emplaceBack(B+2,B+3),se.emplaceBack(B+3,B),z.primitiveLength+=4}addDebugCollisionBoxes(c,f,g,_){for(let C=c;C<f;C++){const T=this.collisionBoxArray.get(C);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,_?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new uT(ra,eD.members,os),this.iconCollisionBox=new uT(ra,eD.members,os);for(let c=0;c<this.symbolInstances.length;c++){const f=this.symbolInstances.get(c);this.addDebugCollisionBoxes(f.textBoxStartIndex,f.textBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.iconBoxStartIndex,f.iconBoxEndIndex,f,!1),this.addDebugCollisionBoxes(f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex,f,!1)}}_deserializeCollisionBoxesForSymbol(c,f,g,_,C,T,P,z,B){const N={};for(let q=f;q<g;q++){const K=c.get(q);N.textBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},N.textFeatureIndex=K.featureIndex;break}for(let q=_;q<C;q++){const K=c.get(q);N.verticalTextBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},N.verticalTextFeatureIndex=K.featureIndex;break}for(let q=T;q<P;q++){const K=c.get(q);N.iconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},N.iconFeatureIndex=K.featureIndex;break}for(let q=z;q<B;q++){const K=c.get(q);N.verticalIconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},N.verticalIconFeatureIndex=K.featureIndex;break}return N}deserializeCollisionBoxes(c){this.collisionArrays=[];for(let f=0;f<this.symbolInstances.length;f++){const g=this.symbolInstances.get(f);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(c,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(c,f){const g=c.placedSymbolArray.get(f),_=g.vertexStartIndex+4*g.numGlyphs;for(let C=g.vertexStartIndex;C<_;C+=4)c.indexArray.emplaceBack(C,C+1,C+2),c.indexArray.emplaceBack(C+1,C+2,C+3)}getSortedSymbolIndexes(c){if(this.sortedAngle===c&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const f=Math.sin(c),g=Math.cos(c),_=[],C=[],T=[];for(let P=0;P<this.symbolInstances.length;++P){T.push(P);const z=this.symbolInstances.get(P);_.push(0|Math.round(f*z.anchorX+g*z.anchorY)),C.push(z.featureIndex)}return T.sort((P,z)=>_[P]-_[z]||C[z]-C[P]),T}addToSortKeyRanges(c,f){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===f?g.symbolInstanceEnd=c+1:this.sortKeyRanges.push({sortKey:f,symbolInstanceStart:c,symbolInstanceEnd:c+1})}sortFeatures(c){if(this.sortFeaturesByY&&this.sortedAngle!==c&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(c),this.sortedAngle=c,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const f of this.symbolInstanceIndexes){const g=this.symbolInstances.get(f);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach((_,C,T)=>{_>=0&&T.indexOf(_)===C&&this.addIndicesForPlacedSymbol(this.text,_)}),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let xD,vD;Ht("SymbolBucket",eg,{omit:["layers","collisionBoxArray","features","compareText"]}),eg.MAX_GLYPHS=65535,eg.addDynamicAttributes=lT;var hT={get paint(){return vD=vD||new k({"icon-opacity":new vr(Te.paint_symbol["icon-opacity"]),"icon-color":new vr(Te.paint_symbol["icon-color"]),"icon-halo-color":new vr(Te.paint_symbol["icon-halo-color"]),"icon-halo-width":new vr(Te.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vr(Te.paint_symbol["icon-halo-blur"]),"icon-translate":new nr(Te.paint_symbol["icon-translate"]),"icon-translate-anchor":new nr(Te.paint_symbol["icon-translate-anchor"]),"text-opacity":new vr(Te.paint_symbol["text-opacity"]),"text-color":new vr(Te.paint_symbol["text-color"],{runtimeType:Zn,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new vr(Te.paint_symbol["text-halo-color"]),"text-halo-width":new vr(Te.paint_symbol["text-halo-width"]),"text-halo-blur":new vr(Te.paint_symbol["text-halo-blur"]),"text-translate":new nr(Te.paint_symbol["text-translate"]),"text-translate-anchor":new nr(Te.paint_symbol["text-translate-anchor"])})},get layout(){return xD=xD||new k({"symbol-placement":new nr(Te.layout_symbol["symbol-placement"]),"symbol-spacing":new nr(Te.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new nr(Te.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vr(Te.layout_symbol["symbol-sort-key"]),"symbol-z-order":new nr(Te.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new nr(Te.layout_symbol["icon-allow-overlap"]),"icon-overlap":new nr(Te.layout_symbol["icon-overlap"]),"icon-ignore-placement":new nr(Te.layout_symbol["icon-ignore-placement"]),"icon-optional":new nr(Te.layout_symbol["icon-optional"]),"icon-rotation-alignment":new nr(Te.layout_symbol["icon-rotation-alignment"]),"icon-size":new vr(Te.layout_symbol["icon-size"]),"icon-text-fit":new nr(Te.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new nr(Te.layout_symbol["icon-text-fit-padding"]),"icon-image":new vr(Te.layout_symbol["icon-image"]),"icon-rotate":new vr(Te.layout_symbol["icon-rotate"]),"icon-padding":new vr(Te.layout_symbol["icon-padding"]),"icon-keep-upright":new nr(Te.layout_symbol["icon-keep-upright"]),"icon-offset":new vr(Te.layout_symbol["icon-offset"]),"icon-anchor":new vr(Te.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new nr(Te.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new nr(Te.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new nr(Te.layout_symbol["text-rotation-alignment"]),"text-field":new vr(Te.layout_symbol["text-field"]),"text-font":new vr(Te.layout_symbol["text-font"]),"text-size":new vr(Te.layout_symbol["text-size"]),"text-max-width":new vr(Te.layout_symbol["text-max-width"]),"text-line-height":new nr(Te.layout_symbol["text-line-height"]),"text-letter-spacing":new vr(Te.layout_symbol["text-letter-spacing"]),"text-justify":new vr(Te.layout_symbol["text-justify"]),"text-radial-offset":new vr(Te.layout_symbol["text-radial-offset"]),"text-variable-anchor":new nr(Te.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new vr(Te.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new vr(Te.layout_symbol["text-anchor"]),"text-max-angle":new nr(Te.layout_symbol["text-max-angle"]),"text-writing-mode":new nr(Te.layout_symbol["text-writing-mode"]),"text-rotate":new vr(Te.layout_symbol["text-rotate"]),"text-padding":new nr(Te.layout_symbol["text-padding"]),"text-keep-upright":new nr(Te.layout_symbol["text-keep-upright"]),"text-transform":new vr(Te.layout_symbol["text-transform"]),"text-offset":new vr(Te.layout_symbol["text-offset"]),"text-allow-overlap":new nr(Te.layout_symbol["text-allow-overlap"]),"text-overlap":new nr(Te.layout_symbol["text-overlap"]),"text-ignore-placement":new nr(Te.layout_symbol["text-ignore-placement"]),"text-optional":new nr(Te.layout_symbol["text-optional"])})}};class bD{constructor(c){if(c.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=c.property.overrides?c.property.overrides.runtimeType:wn,this.defaultValue=c}evaluate(c){if(c.formattedSection){const f=this.defaultValue.property.overrides;if(f&&f.hasOverride(c.formattedSection))return f.getOverride(c.formattedSection)}return c.feature&&c.featureState?this.defaultValue.evaluate(c.feature,c.featureState):this.defaultValue.property.specification.default}eachChild(c){this.defaultValue.isConstant()||c(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ht("FormatSectionOverride",bD,{omit:["defaultValue"]});class T_ extends p{constructor(c){super(c,hT)}recalculate(c,f){if(super.recalculate(c,f),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const g=this.layout.get("text-writing-mode");if(g){const _=[];for(const C of g)_.indexOf(C)<0&&_.push(C);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(c,f,g,_){const C=this.layout.get(c).evaluate(f,{},g,_),T=this._unevaluatedLayout._values[c];return T.isDataDriven()||Om(T.value)||!C?C:function(P,z){return z.replace(/{([^{}]+)}/g,(B,N)=>P&&N in P?String(P[N]):"")}(f.properties,C)}createBucket(c){return new eg(c)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const c of hT.paint.overridableProperties){if(!T_.hasPaintOverride(this.layout,c))continue;const f=this.paint.get(c),g=new bD(f),_=new Tm(g,f.property.specification);let C=null;C=f.value.kind==="constant"||f.value.kind==="source"?new Rh("source",_):new Lh("composite",_,f.value.zoomStops),this.paint._values[c]=new ul(f.property,C,f.parameters)}}_handleOverridablePaintPropertyUpdate(c,f,g){return!(!this.layout||f.isDataDriven()||g.isDataDriven())&&T_.hasPaintOverride(this.layout,c)}static hasPaintOverride(c,f){const g=c.get("text-field"),_=hT.paint.properties[f];let C=!1;const T=P=>{for(const z of P)if(_.overrides&&_.overrides.hasOverride(z))return void(C=!0)};if(g.value.kind==="constant"&&g.value.value instanceof vs)T(g.value.value.sections);else if(g.value.kind==="source"){const P=B=>{C||(B instanceof Co&&di(B.value)===xs?T(B.value.sections):B instanceof ge?T(B.sections):B.eachChild(P))},z=g.value;z._styleExpression&&P(z._styleExpression.expression)}return C}}let _D;var tX={get paint(){return _D=_D||new k({"background-color":new nr(Te.paint_background["background-color"]),"background-pattern":new $m(Te.paint_background["background-pattern"]),"background-opacity":new nr(Te.paint_background["background-opacity"])})}};class rX extends p{constructor(c){super(c,tX)}}let wD;var nX={get paint(){return wD=wD||new k({"raster-opacity":new nr(Te.paint_raster["raster-opacity"]),"raster-hue-rotate":new nr(Te.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new nr(Te.paint_raster["raster-brightness-min"]),"raster-brightness-max":new nr(Te.paint_raster["raster-brightness-max"]),"raster-saturation":new nr(Te.paint_raster["raster-saturation"]),"raster-contrast":new nr(Te.paint_raster["raster-contrast"]),"raster-resampling":new nr(Te.paint_raster["raster-resampling"]),"raster-fade-duration":new nr(Te.paint_raster["raster-fade-duration"])})}};class iX extends p{constructor(c){super(c,nX)}}class sX extends p{constructor(c){super(c,{}),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=c}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class oX{constructor(c){this._methodToThrottle=c,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const dT=63710088e-1;class ed{constructor(c,f){if(isNaN(c)||isNaN(f))throw new Error(`Invalid LngLat object: (${c}, ${f})`);if(this.lng=+c,this.lat=+f,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ed(Y(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(c){const f=Math.PI/180,g=this.lat*f,_=c.lat*f,C=Math.sin(g)*Math.sin(_)+Math.cos(g)*Math.cos(_)*Math.cos((c.lng-this.lng)*f);return dT*Math.acos(Math.min(C,1))}static convert(c){if(c instanceof ed)return c;if(Array.isArray(c)&&(c.length===2||c.length===3))return new ed(Number(c[0]),Number(c[1]));if(!Array.isArray(c)&&typeof c=="object"&&c!==null)return new ed(Number("lng"in c?c.lng:c.lon),Number(c.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const SD=2*Math.PI*dT;function kD(h){return SD*Math.cos(h*Math.PI/180)}function CD(h){return(180+h)/360}function TD(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function OD(h,c){return h/kD(c)}function fT(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}class yx{constructor(c,f,g=0){this.x=+c,this.y=+f,this.z=+g}static fromLngLat(c,f=0){const g=ed.convert(c);return new yx(CD(g.lng),TD(g.lat),OD(f,g.lat))}toLngLat(){return new ed(360*this.x-180,fT(this.y))}toAltitude(){return this.z*kD(fT(this.y))}meterInMercatorCoordinateUnits(){return 1/SD*(c=fT(this.y),1/Math.cos(c*Math.PI/180));var c}}function PD(h,c,f){var g=2*Math.PI*6378137/256/Math.pow(2,f);return[h*g-2*Math.PI*6378137/2,c*g-2*Math.PI*6378137/2]}class pT{constructor(c,f,g){if(!function(_,C,T){return!(_<0||_>25||T<0||T>=Math.pow(2,_)||C<0||C>=Math.pow(2,_))}(c,f,g))throw new Error(`x=${f}, y=${g}, z=${c} outside of bounds. 0<=x<${Math.pow(2,c)}, 0<=y<${Math.pow(2,c)} 0<=z<=25 `);this.z=c,this.x=f,this.y=g,this.key=xx(0,c,c,f,g)}equals(c){return this.z===c.z&&this.x===c.x&&this.y===c.y}url(c,f,g){const _=(T=this.y,P=this.z,z=PD(256*(C=this.x),256*(T=Math.pow(2,P)-T-1),P),B=PD(256*(C+1),256*(T+1),P),z[0]+","+z[1]+","+B[0]+","+B[1]);var C,T,P,z,B;const N=function(q,K,te){let se,oe="";for(let pe=q;pe>0;pe--)se=1<<pe-1,oe+=(K&se?1:0)+(te&se?2:0);return oe}(this.z,this.x,this.y);return c[(this.x+this.y)%c.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(g==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,f>1?"@2x":"").replace(/{quadkey}/g,N).replace(/{bbox-epsg-3857}/g,_)}isChildOf(c){const f=this.z-c.z;return f>0&&c.x===this.x>>f&&c.y===this.y>>f}getTilePoint(c){const f=Math.pow(2,this.z);return new b((c.x*f-this.x)*ji,(c.y*f-this.y)*ji)}toString(){return`${this.z}/${this.x}/${this.y}`}}class jD{constructor(c,f){this.wrap=c,this.canonical=f,this.key=xx(c,f.z,f.z,f.x,f.y)}}class Ra{constructor(c,f,g,_,C){if(c<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${c}; z = ${g}`);this.overscaledZ=c,this.wrap=f,this.canonical=new pT(g,+_,+C),this.key=xx(f,c,g,_,C)}clone(){return new Ra(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(c){return this.overscaledZ===c.overscaledZ&&this.wrap===c.wrap&&this.canonical.equals(c.canonical)}scaledTo(c){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-c;return c>this.canonical.z?new Ra(c,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ra(c,this.wrap,c,this.canonical.x>>f,this.canonical.y>>f)}calculateScaledKey(c,f){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-c;return c>this.canonical.z?xx(this.wrap*+f,c,this.canonical.z,this.canonical.x,this.canonical.y):xx(this.wrap*+f,c,c,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(c){if(c.wrap!==this.wrap)return!1;const f=this.canonical.z-c.canonical.z;return c.overscaledZ===0||c.overscaledZ<this.overscaledZ&&c.canonical.x===this.canonical.x>>f&&c.canonical.y===this.canonical.y>>f}children(c){if(this.overscaledZ>=c)return[new Ra(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const f=this.canonical.z+1,g=2*this.canonical.x,_=2*this.canonical.y;return[new Ra(f,this.wrap,f,g,_),new Ra(f,this.wrap,f,g+1,_),new Ra(f,this.wrap,f,g,_+1),new Ra(f,this.wrap,f,g+1,_+1)]}isLessThan(c){return this.wrap<c.wrap||!(this.wrap>c.wrap)&&(this.overscaledZ<c.overscaledZ||!(this.overscaledZ>c.overscaledZ)&&(this.canonical.x<c.canonical.x||!(this.canonical.x>c.canonical.x)&&this.canonical.y<c.canonical.y))}wrapped(){return new Ra(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(c){return new Ra(this.overscaledZ,c,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new jD(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(c){return this.canonical.getTilePoint(new yx(c.x-this.wrap,c.y))}}function xx(h,c,f,g,_){(h*=2)<0&&(h=-1*h-1);const C=1<<f;return(C*C*h+C*_+g).toString(36)+f.toString(36)+c.toString(36)}Ht("CanonicalTileID",pT),Ht("OverscaledTileID",Ra,{omit:["posMatrix"]});class AD{constructor(c,f,g,_=1,C=1,T=1,P=0){if(this.uid=c,f.height!==f.width)throw new RangeError("DEM tiles must be square");if(g&&!["mapbox","terrarium","custom"].includes(g))return void Ee(`"${g}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=f.height;const z=this.dim=f.height-2;switch(this.data=new Uint32Array(f.data.buffer),g){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=C,this.blueFactor=T,this.baseShift=P;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let B=0;B<z;B++)this.data[this._idx(-1,B)]=this.data[this._idx(0,B)],this.data[this._idx(z,B)]=this.data[this._idx(z-1,B)],this.data[this._idx(B,-1)]=this.data[this._idx(B,0)],this.data[this._idx(B,z)]=this.data[this._idx(B,z-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(z,-1)]=this.data[this._idx(z-1,0)],this.data[this._idx(-1,z)]=this.data[this._idx(0,z-1)],this.data[this._idx(z,z)]=this.data[this._idx(z-1,z-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let B=0;B<z;B++)for(let N=0;N<z;N++){const q=this.get(B,N);q>this.max&&(this.max=q),q<this.min&&(this.min=q)}}get(c,f){const g=new Uint8Array(this.data.buffer),_=4*this._idx(c,f);return this.unpack(g[_],g[_+1],g[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(c,f){if(c<-1||c>=this.dim+1||f<-1||f>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(f+1)*this.stride+(c+1)}unpack(c,f,g){return c*this.redFactor+f*this.greenFactor+g*this.blueFactor-this.baseShift}getPixels(){return new Da({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(c,f,g){if(this.dim!==c.dim)throw new Error("dem dimension mismatch");let _=f*this.dim,C=f*this.dim+this.dim,T=g*this.dim,P=g*this.dim+this.dim;switch(f){case-1:_=C-1;break;case 1:C=_+1}switch(g){case-1:T=P-1;break;case 1:P=T+1}const z=-f*this.dim,B=-g*this.dim;for(let N=T;N<P;N++)for(let q=_;q<C;q++)this.data[this._idx(q,N)]=c.data[this._idx(q+z,N+B)]}}Ht("DEMData",AD);class ED{constructor(c){this._stringToNumber={},this._numberToString=[];for(let f=0;f<c.length;f++){const g=c[f];this._stringToNumber[g]=f,this._numberToString[f]=g}}encode(c){return this._stringToNumber[c]}decode(c){if(c>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${c} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[c]}}class zD{constructor(c,f,g,_,C){this.type="Feature",this._vectorTileFeature=c,c._z=f,c._x=g,c._y=_,this.properties=c.properties,this.id=C}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(c){this._geometry=c}toJSON(){const c={geometry:this.geometry};for(const f in this)f!=="_geometry"&&f!=="_vectorTileFeature"&&(c[f]=this[f]);return c}}class MD{constructor(c,f){this.tileID=c,this.x=c.canonical.x,this.y=c.canonical.y,this.z=c.canonical.z,this.grid=new $h(ji,16,0),this.grid3D=new $h(ji,16,0),this.featureIndexArray=new Vs,this.promoteId=f}insert(c,f,g,_,C,T){const P=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,_,C);const z=T?this.grid3D:this.grid;for(let B=0;B<f.length;B++){const N=f[B],q=[1/0,1/0,-1/0,-1/0];for(let K=0;K<N.length;K++){const te=N[K];q[0]=Math.min(q[0],te.x),q[1]=Math.min(q[1],te.y),q[2]=Math.max(q[2],te.x),q[3]=Math.max(q[3],te.y)}q[0]<ji&&q[1]<ji&&q[2]>=0&&q[3]>=0&&z.insert(P,q[0],q[1],q[2],q[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Zh.VectorTile(new rT(this.rawTileData)).layers,this.sourceLayerCoder=new ED(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(c,f,g,_){this.loadVTLayers();const C=c.params||{},T=ji/c.tileSize/c.scale,P=L0(C.filter),z=c.queryGeometry,B=c.queryPadding*T,N=DD(z),q=this.grid.query(N.minX-B,N.minY-B,N.maxX+B,N.maxY+B),K=DD(c.cameraQueryGeometry),te=this.grid3D.query(K.minX-B,K.minY-B,K.maxX+B,K.maxY+B,(pe,_e,Ke,Ae)=>function(Ue,it,gt,$t,gr){for(const Dt of Ue)if(it<=Dt.x&&gt<=Dt.y&&$t>=Dt.x&&gr>=Dt.y)return!0;const Ft=[new b(it,gt),new b(it,gr),new b($t,gr),new b($t,gt)];if(Ue.length>2){for(const Dt of Ft)if(Hm(Ue,Dt))return!0}for(let Dt=0;Dt<Ue.length-1;Dt++)if($H(Ue[Dt],Ue[Dt+1],Ft))return!0;return!1}(c.cameraQueryGeometry,pe-B,_e-B,Ke+B,Ae+B));for(const pe of te)q.push(pe);q.sort(aX);const se={};let oe;for(let pe=0;pe<q.length;pe++){const _e=q[pe];if(_e===oe)continue;oe=_e;const Ke=this.featureIndexArray.get(_e);let Ae=null;this.loadMatchingFeature(se,Ke.bucketIndex,Ke.sourceLayerIndex,Ke.featureIndex,P,C.layers,C.availableImages,f,g,_,(Ue,it,gt)=>(Ae||(Ae=Vf(Ue)),it.queryIntersectsFeature(z,Ue,gt,Ae,this.z,c.transform,T,c.pixelPosMatrix)))}return se}loadMatchingFeature(c,f,g,_,C,T,P,z,B,N,q){const K=this.bucketLayerIDs[f];if(T&&!function(pe,_e){for(let Ke=0;Ke<pe.length;Ke++)if(_e.indexOf(pe[Ke])>=0)return!0;return!1}(T,K))return;const te=this.sourceLayerCoder.decode(g),se=this.vtLayers[te].feature(_);if(C.needGeometry){const pe=Wf(se,!0);if(!C.filter(new Un(this.tileID.overscaledZ),pe,this.tileID.canonical))return}else if(!C.filter(new Un(this.tileID.overscaledZ),se))return;const oe=this.getId(se,te);for(let pe=0;pe<K.length;pe++){const _e=K[pe];if(T&&T.indexOf(_e)<0)continue;const Ke=z[_e];if(!Ke)continue;let Ae={};oe&&N&&(Ae=N.getState(Ke.sourceLayer||"_geojsonTileLayer",oe));const Ue=Z({},B[_e]);Ue.paint=ID(Ue.paint,Ke.paint,se,Ae,P),Ue.layout=ID(Ue.layout,Ke.layout,se,Ae,P);const it=!q||q(se,Ke,Ae);if(!it)continue;const gt=new zD(se,this.z,this.x,this.y,oe);gt.layer=Ue;let $t=c[_e];$t===void 0&&($t=c[_e]=[]),$t.push({featureIndex:_,feature:gt,intersectionZ:it})}}lookupSymbolFeatures(c,f,g,_,C,T,P,z){const B={};this.loadVTLayers();const N=L0(C);for(const q of c)this.loadMatchingFeature(B,g,_,q,N,T,P,z,f);return B}hasLayer(c){for(const f of this.bucketLayerIDs)for(const g of f)if(c===g)return!0;return!1}getId(c,f){let g=c.id;return this.promoteId&&(g=c.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[f]],typeof g=="boolean"&&(g=Number(g))),g}}function ID(h,c,f,g,_){return re(h,(C,T)=>{const P=c instanceof Ff?c.get(T):null;return P&&P.evaluate?P.evaluate(f,g,_):P})}function DD(h){let c=1/0,f=1/0,g=-1/0,_=-1/0;for(const C of h)c=Math.min(c,C.x),f=Math.min(f,C.y),g=Math.max(g,C.x),_=Math.max(_,C.y);return{minX:c,minY:f,maxX:g,maxY:_}}function aX(h,c){return c-h}function RD(h,c,f,g,_){const C=[];for(let T=0;T<h.length;T++){const P=h[T];let z;for(let B=0;B<P.length-1;B++){let N=P[B],q=P[B+1];N.x<c&&q.x<c||(N.x<c?N=new b(c,N.y+(c-N.x)/(q.x-N.x)*(q.y-N.y))._round():q.x<c&&(q=new b(c,N.y+(c-N.x)/(q.x-N.x)*(q.y-N.y))._round()),N.y<f&&q.y<f||(N.y<f?N=new b(N.x+(f-N.y)/(q.y-N.y)*(q.x-N.x),f)._round():q.y<f&&(q=new b(N.x+(f-N.y)/(q.y-N.y)*(q.x-N.x),f)._round()),N.x>=g&&q.x>=g||(N.x>=g?N=new b(g,N.y+(g-N.x)/(q.x-N.x)*(q.y-N.y))._round():q.x>=g&&(q=new b(g,N.y+(g-N.x)/(q.x-N.x)*(q.y-N.y))._round()),N.y>=_&&q.y>=_||(N.y>=_?N=new b(N.x+(_-N.y)/(q.y-N.y)*(q.x-N.x),_)._round():q.y>=_&&(q=new b(N.x+(_-N.y)/(q.y-N.y)*(q.x-N.x),_)._round()),z&&N.equals(z[z.length-1])||(z=[N],C.push(z)),z.push(q)))))}}return C}Ht("FeatureIndex",MD,{omit:["rawTileData","sourceLayerCoder"]});class td extends b{constructor(c,f,g,_){super(c,f),this.angle=g,_!==void 0&&(this.segment=_)}clone(){return new td(this.x,this.y,this.angle,this.segment)}}function LD(h,c,f,g,_){if(c.segment===void 0||f===0)return!0;let C=c,T=c.segment+1,P=0;for(;P>-f/2;){if(T--,T<0)return!1;P-=h[T].dist(C),C=h[T]}P+=h[T].dist(h[T+1]),T++;const z=[];let B=0;for(;P<f/2;){const N=h[T],q=h[T+1];if(!q)return!1;let K=h[T-1].angleTo(N)-N.angleTo(q);for(K=Math.abs((K+3*Math.PI)%(2*Math.PI)-Math.PI),z.push({distance:P,angleDelta:K}),B+=K;P-z[0].distance>g;)B-=z.shift().angleDelta;if(B>_)return!1;T++,P+=N.dist(q)}return!0}function FD(h){let c=0;for(let f=0;f<h.length-1;f++)c+=h[f].dist(h[f+1]);return c}function BD(h,c,f){return h?.6*c*f:0}function $D(h,c){return Math.max(h?h.right-h.left:0,c?c.right-c.left:0)}function lX(h,c,f,g,_,C){const T=BD(f,_,C),P=$D(f,g)*C;let z=0;const B=FD(h)/2;for(let N=0;N<h.length-1;N++){const q=h[N],K=h[N+1],te=q.dist(K);if(z+te>B){const se=(B-z)/te,oe=qi.number(q.x,K.x,se),pe=qi.number(q.y,K.y,se),_e=new td(oe,pe,K.angleTo(q),N);return _e._round(),!T||LD(h,_e,P,T,c)?_e:void 0}z+=te}}function cX(h,c,f,g,_,C,T,P,z){const B=BD(g,C,T),N=$D(g,_),q=N*T,K=h[0].x===0||h[0].x===z||h[0].y===0||h[0].y===z;return c-q<c/4&&(c=q+c/4),ND(h,K?c/2*P%c:(N/2+2*C)*T*P%c,c,B,f,q,K,!1,z)}function ND(h,c,f,g,_,C,T,P,z){const B=C/2,N=FD(h);let q=0,K=c-f,te=[];for(let se=0;se<h.length-1;se++){const oe=h[se],pe=h[se+1],_e=oe.dist(pe),Ke=pe.angleTo(oe);for(;K+f<q+_e;){K+=f;const Ae=(K-q)/_e,Ue=qi.number(oe.x,pe.x,Ae),it=qi.number(oe.y,pe.y,Ae);if(Ue>=0&&Ue<z&&it>=0&&it<z&&K-B>=0&&K+B<=N){const gt=new td(Ue,it,Ke,se);gt._round(),g&&!LD(h,gt,C,g,_)||te.push(gt)}}q+=_e}return P||te.length||T||(te=ND(h,q/2,f,g,_,C,T,!0,z)),te}Ht("Anchor",td);const tg=Eo;function VD(h,c,f,g){const _=[],C=h.image,T=C.pixelRatio,P=C.paddedRect.w-2*tg,z=C.paddedRect.h-2*tg;let B={x1:h.left,y1:h.top,x2:h.right,y2:h.bottom};const N=C.stretchX||[[0,P]],q=C.stretchY||[[0,z]],K=(ut,fr)=>ut+fr[1]-fr[0],te=N.reduce(K,0),se=q.reduce(K,0),oe=P-te,pe=z-se;let _e=0,Ke=te,Ae=0,Ue=se,it=0,gt=oe,$t=0,gr=pe;if(C.content&&g){const ut=C.content,fr=ut[2]-ut[0],ar=ut[3]-ut[1];(C.textFitWidth||C.textFitHeight)&&(B=mD(h)),_e=O_(N,0,ut[0]),Ae=O_(q,0,ut[1]),Ke=O_(N,ut[0],ut[2]),Ue=O_(q,ut[1],ut[3]),it=ut[0]-_e,$t=ut[1]-Ae,gt=fr-Ke,gr=ar-Ue}const Ft=B.x1,Dt=B.y1,hr=B.x2-Ft,Yt=B.y2-Dt,qt=(ut,fr,ar,Tr)=>{const In=P_(ut.stretch-_e,Ke,hr,Ft),On=j_(ut.fixed-it,gt,ut.stretch,te),Qi=P_(fr.stretch-Ae,Ue,Yt,Dt),dl=j_(fr.fixed-$t,gr,fr.stretch,se),Ps=P_(ar.stretch-_e,Ke,hr,Ft),Hi=j_(ar.fixed-it,gt,ar.stretch,te),co=P_(Tr.stretch-Ae,Ue,Yt,Dt),uo=j_(Tr.fixed-$t,gr,Tr.stretch,se),ho=new b(In,Qi),mi=new b(Ps,Qi),Gi=new b(Ps,co),Us=new b(In,co),js=new b(On/T,dl/T),fo=new b(Hi/T,uo/T),As=c*Math.PI/180;if(As){const cn=Math.sin(As),$n=Math.cos(As),Gn=[$n,-cn,cn,$n];ho._matMult(Gn),mi._matMult(Gn),Us._matMult(Gn),Gi._matMult(Gn)}const La=ut.stretch+ut.fixed,zo=fr.stretch+fr.fixed;return{tl:ho,tr:mi,bl:Us,br:Gi,tex:{x:C.paddedRect.x+tg+La,y:C.paddedRect.y+tg+zo,w:ar.stretch+ar.fixed-La,h:Tr.stretch+Tr.fixed-zo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:js,pixelOffsetBR:fo,minFontScaleX:gt/T/hr,minFontScaleY:gr/T/Yt,isSDF:f}};if(g&&(C.stretchX||C.stretchY)){const ut=WD(N,oe,te),fr=WD(q,pe,se);for(let ar=0;ar<ut.length-1;ar++){const Tr=ut[ar],In=ut[ar+1];for(let On=0;On<fr.length-1;On++)_.push(qt(Tr,fr[On],In,fr[On+1]))}}else _.push(qt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:P+1},{fixed:0,stretch:z+1}));return _}function O_(h,c,f){let g=0;for(const _ of h)g+=Math.max(c,Math.min(f,_[1]))-Math.max(c,Math.min(f,_[0]));return g}function WD(h,c,f){const g=[{fixed:-tg,stretch:0}];for(const[_,C]of h){const T=g[g.length-1];g.push({fixed:_-T.stretch,stretch:T.stretch}),g.push({fixed:_-T.stretch,stretch:T.stretch+(C-_)})}return g.push({fixed:c+tg,stretch:f}),g}function P_(h,c,f,g){return h/c*f+g}function j_(h,c,f,g){return h-c*f/g}class A_{constructor(c,f,g,_,C,T,P,z,B,N){var q;if(this.boxStartIndex=c.length,B){let K=T.top,te=T.bottom;const se=T.collisionPadding;se&&(K-=se[1],te+=se[3]);let oe=te-K;oe>0&&(oe=Math.max(10,oe),this.circleDiameter=oe)}else{const K=!((q=T.image)===null||q===void 0)&&q.content&&(T.image.textFitWidth||T.image.textFitHeight)?mD(T):{x1:T.left,y1:T.top,x2:T.right,y2:T.bottom};K.y1=K.y1*P-z[0],K.y2=K.y2*P+z[2],K.x1=K.x1*P-z[3],K.x2=K.x2*P+z[1];const te=T.collisionPadding;if(te&&(K.x1-=te[0]*P,K.y1-=te[1]*P,K.x2+=te[2]*P,K.y2+=te[3]*P),N){const se=new b(K.x1,K.y1),oe=new b(K.x2,K.y1),pe=new b(K.x1,K.y2),_e=new b(K.x2,K.y2),Ke=N*Math.PI/180;se._rotate(Ke),oe._rotate(Ke),pe._rotate(Ke),_e._rotate(Ke),K.x1=Math.min(se.x,oe.x,pe.x,_e.x),K.x2=Math.max(se.x,oe.x,pe.x,_e.x),K.y1=Math.min(se.y,oe.y,pe.y,_e.y),K.y2=Math.max(se.y,oe.y,pe.y,_e.y)}c.emplaceBack(f.x,f.y,K.x1,K.y1,K.x2,K.y2,g,_,C)}this.boxEndIndex=c.length}}class uX{constructor(c=[],f=(g,_)=>g<_?-1:g>_?1:0){if(this.data=c,this.length=this.data.length,this.compare=f,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],f=this.data.pop();return--this.length>0&&(this.data[0]=f,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:f,compare:g}=this,_=f[c];for(;c>0;){const C=c-1>>1,T=f[C];if(g(_,T)>=0)break;f[c]=T,c=C}f[c]=_}_down(c){const{data:f,compare:g}=this,_=this.length>>1,C=f[c];for(;c<_;){let T=1+(c<<1);const P=T+1;if(P<this.length&&g(f[P],f[T])<0&&(T=P),g(f[T],C)>=0)break;f[c]=f[T],c=T}f[c]=C}}function hX(h,c=1,f=!1){let g=1/0,_=1/0,C=-1/0,T=-1/0;const P=h[0];for(let te=0;te<P.length;te++){const se=P[te];(!te||se.x<g)&&(g=se.x),(!te||se.y<_)&&(_=se.y),(!te||se.x>C)&&(C=se.x),(!te||se.y>T)&&(T=se.y)}const z=Math.min(C-g,T-_);let B=z/2;const N=new uX([],dX);if(z===0)return new b(g,_);for(let te=g;te<C;te+=z)for(let se=_;se<T;se+=z)N.push(new rg(te+B,se+B,B,h));let q=function(te){let se=0,oe=0,pe=0;const _e=te[0];for(let Ke=0,Ae=_e.length,Ue=Ae-1;Ke<Ae;Ue=Ke++){const it=_e[Ke],gt=_e[Ue],$t=it.x*gt.y-gt.x*it.y;oe+=(it.x+gt.x)*$t,pe+=(it.y+gt.y)*$t,se+=3*$t}return new rg(oe/se,pe/se,0,te)}(h),K=N.length;for(;N.length;){const te=N.pop();(te.d>q.d||!q.d)&&(q=te,f&&console.log("found best %d after %d probes",Math.round(1e4*te.d)/1e4,K)),te.max-q.d<=c||(B=te.h/2,N.push(new rg(te.p.x-B,te.p.y-B,B,h)),N.push(new rg(te.p.x+B,te.p.y-B,B,h)),N.push(new rg(te.p.x-B,te.p.y+B,B,h)),N.push(new rg(te.p.x+B,te.p.y+B,B,h)),K+=4)}return f&&(console.log(`num probes: ${K}`),console.log(`best distance: ${q.d}`)),q.p}function dX(h,c){return c.max-h.max}function rg(h,c,f,g){this.p=new b(h,c),this.h=f,this.d=function(_,C){let T=!1,P=1/0;for(let z=0;z<C.length;z++){const B=C[z];for(let N=0,q=B.length,K=q-1;N<q;K=N++){const te=B[N],se=B[K];te.y>_.y!=se.y>_.y&&_.x<(se.x-te.x)*(_.y-te.y)/(se.y-te.y)+te.x&&(T=!T),P=Math.min(P,T5(_,te,se))}}return(T?1:-1)*Math.sqrt(P)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}var Os;a.aq=void 0,(Os=a.aq||(a.aq={}))[Os.center=1]="center",Os[Os.left=2]="left",Os[Os.right=3]="right",Os[Os.top=4]="top",Os[Os.bottom=5]="bottom",Os[Os["top-left"]=6]="top-left",Os[Os["top-right"]=7]="top-right",Os[Os["bottom-left"]=8]="bottom-left",Os[Os["bottom-right"]=9]="bottom-right";const rd=7,mT=Number.POSITIVE_INFINITY;function UD(h,c){return c[1]!==mT?function(f,g,_){let C=0,T=0;switch(g=Math.abs(g),_=Math.abs(_),f){case"top-right":case"top-left":case"top":T=_-rd;break;case"bottom-right":case"bottom-left":case"bottom":T=-_+rd}switch(f){case"top-right":case"bottom-right":case"right":C=-g;break;case"top-left":case"bottom-left":case"left":C=g}return[C,T]}(h,c[0],c[1]):function(f,g){let _=0,C=0;g<0&&(g=0);const T=g/Math.SQRT2;switch(f){case"top-right":case"top-left":C=T-rd;break;case"bottom-right":case"bottom-left":C=-T+rd;break;case"bottom":C=-g+rd;break;case"top":C=g-rd}switch(f){case"top-right":case"bottom-right":_=-T;break;case"top-left":case"bottom-left":_=T;break;case"left":_=g;break;case"right":_=-g}return[_,C]}(h,c[0])}function qD(h,c,f){var g;const _=h.layout,C=(g=_.get("text-variable-anchor-offset"))===null||g===void 0?void 0:g.evaluate(c,{},f);if(C){const P=C.values,z=[];for(let B=0;B<P.length;B+=2){const N=z[B]=P[B],q=P[B+1].map(K=>K*Ri);N.startsWith("top")?q[1]-=rd:N.startsWith("bottom")&&(q[1]+=rd),z[B+1]=q}return new oo(z)}const T=_.get("text-variable-anchor");if(T){let P;P=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(c,{},f)*Ri,mT]:_.get("text-offset").evaluate(c,{},f).map(B=>B*Ri);const z=[];for(const B of T)z.push(B,UD(B,P));return new oo(z)}return null}function gT(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function fX(h,c,f,g,_,C,T,P,z,B,N){let q=C.textMaxSize.evaluate(c,{});q===void 0&&(q=T);const K=h.layers[0].layout,te=K.get("icon-offset").evaluate(c,{},N),se=HD(f.horizontal),oe=T/24,pe=h.tilePixelRatio*oe,_e=h.tilePixelRatio*q/24,Ke=h.tilePixelRatio*P,Ae=h.tilePixelRatio*K.get("symbol-spacing"),Ue=K.get("text-padding")*h.tilePixelRatio,it=function(ut,fr,ar,Tr=1){const In=ut.get("icon-padding").evaluate(fr,{},ar),On=In&&In.values;return[On[0]*Tr,On[1]*Tr,On[2]*Tr,On[3]*Tr]}(K,c,N,h.tilePixelRatio),gt=K.get("text-max-angle")/180*Math.PI,$t=K.get("text-rotation-alignment")!=="viewport"&&K.get("symbol-placement")!=="point",gr=K.get("icon-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",Ft=K.get("symbol-placement"),Dt=Ae/2,hr=K.get("icon-text-fit");let Yt;g&&hr!=="none"&&(h.allowVerticalPlacement&&f.vertical&&(Yt=gD(g,f.vertical,hr,K.get("icon-text-fit-padding"),te,oe)),se&&(g=gD(g,se,hr,K.get("icon-text-fit-padding"),te,oe)));const qt=(ut,fr)=>{fr.x<0||fr.x>=ji||fr.y<0||fr.y>=ji||function(ar,Tr,In,On,Qi,dl,Ps,Hi,co,uo,ho,mi,Gi,Us,js,fo,As,La,zo,cn,$n,Gn,na,oi,ng){const Ec=ar.addToLineVertexArray(Tr,In);let zc,fl,Fa,as,Lu=0,_x=0,ZD=0,YD=0,kT=-1,CT=-1;const Fu={};let JD=Wm("");if(ar.allowVerticalPlacement&&On.vertical){const qs=Hi.layout.get("text-rotate").evaluate($n,{},oi)+90;Fa=new A_(co,Tr,uo,ho,mi,On.vertical,Gi,Us,js,qs),Ps&&(as=new A_(co,Tr,uo,ho,mi,Ps,As,La,js,qs))}if(Qi){const qs=Hi.layout.get("icon-rotate").evaluate($n,{}),Ba=Hi.layout.get("icon-text-fit")!=="none",qf=VD(Qi,qs,na,Ba),Zl=Ps?VD(Ps,qs,na,Ba):void 0;fl=new A_(co,Tr,uo,ho,mi,Qi,As,La,!1,qs),Lu=4*qf.length;const Qf=ar.iconSizeData;let Mc=null;Qf.kind==="source"?(Mc=[Ac*Hi.layout.get("icon-size").evaluate($n,{})],Mc[0]>Jh&&Ee(`${ar.layerIds[0]}: Value for "icon-size" is >= ${gx}. Reduce your "icon-size".`)):Qf.kind==="composite"&&(Mc=[Ac*Gn.compositeIconSizes[0].evaluate($n,{},oi),Ac*Gn.compositeIconSizes[1].evaluate($n,{},oi)],(Mc[0]>Jh||Mc[1]>Jh)&&Ee(`${ar.layerIds[0]}: Value for "icon-size" is >= ${gx}. Reduce your "icon-size".`)),ar.addSymbols(ar.icon,qf,Mc,cn,zo,$n,a.ah.none,Tr,Ec.lineStartIndex,Ec.lineLength,-1,oi),kT=ar.icon.placedSymbolArray.length-1,Zl&&(_x=4*Zl.length,ar.addSymbols(ar.icon,Zl,Mc,cn,zo,$n,a.ah.vertical,Tr,Ec.lineStartIndex,Ec.lineLength,-1,oi),CT=ar.icon.placedSymbolArray.length-1)}const eR=Object.keys(On.horizontal);for(const qs of eR){const Ba=On.horizontal[qs];if(!zc){JD=Wm(Ba.text);const Zl=Hi.layout.get("text-rotate").evaluate($n,{},oi);zc=new A_(co,Tr,uo,ho,mi,Ba,Gi,Us,js,Zl)}const qf=Ba.positionedLines.length===1;if(ZD+=QD(ar,Tr,Ba,dl,Hi,js,$n,fo,Ec,On.vertical?a.ah.horizontal:a.ah.horizontalOnly,qf?eR:[qs],Fu,kT,Gn,oi),qf)break}On.vertical&&(YD+=QD(ar,Tr,On.vertical,dl,Hi,js,$n,fo,Ec,a.ah.vertical,["vertical"],Fu,CT,Gn,oi));const gX=zc?zc.boxStartIndex:ar.collisionBoxArray.length,yX=zc?zc.boxEndIndex:ar.collisionBoxArray.length,xX=Fa?Fa.boxStartIndex:ar.collisionBoxArray.length,vX=Fa?Fa.boxEndIndex:ar.collisionBoxArray.length,bX=fl?fl.boxStartIndex:ar.collisionBoxArray.length,_X=fl?fl.boxEndIndex:ar.collisionBoxArray.length,wX=as?as.boxStartIndex:ar.collisionBoxArray.length,SX=as?as.boxEndIndex:ar.collisionBoxArray.length;let Kl=-1;const z_=(qs,Ba)=>qs&&qs.circleDiameter?Math.max(qs.circleDiameter,Ba):Ba;Kl=z_(zc,Kl),Kl=z_(Fa,Kl),Kl=z_(fl,Kl),Kl=z_(as,Kl);const tR=Kl>-1?1:0;tR&&(Kl*=ng/Ri),ar.glyphOffsetArray.length>=eg.MAX_GLYPHS&&Ee("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),$n.sortKey!==void 0&&ar.addToSortKeyRanges(ar.symbolInstances.length,$n.sortKey);const kX=qD(Hi,$n,oi),[CX,TX]=function(qs,Ba){const qf=qs.length,Zl=Ba==null?void 0:Ba.values;if((Zl==null?void 0:Zl.length)>0)for(let Qf=0;Qf<Zl.length;Qf+=2){const Mc=Zl[Qf+1];qs.emplaceBack(a.aq[Zl[Qf]],Mc[0],Mc[1])}return[qf,qs.length]}(ar.textAnchorOffsets,kX);ar.symbolInstances.emplaceBack(Tr.x,Tr.y,Fu.right>=0?Fu.right:-1,Fu.center>=0?Fu.center:-1,Fu.left>=0?Fu.left:-1,Fu.vertical||-1,kT,CT,JD,gX,yX,xX,vX,bX,_X,wX,SX,uo,ZD,YD,Lu,_x,tR,0,Gi,Kl,CX,TX)}(h,fr,ut,f,g,_,Yt,h.layers[0],h.collisionBoxArray,c.index,c.sourceLayerIndex,h.index,pe,[Ue,Ue,Ue,Ue],$t,z,Ke,it,gr,te,c,C,B,N,T)};if(Ft==="line")for(const ut of RD(c.geometry,0,0,ji,ji)){const fr=cX(ut,Ae,gt,f.vertical||se,g,24,_e,h.overscaling,ji);for(const ar of fr)se&&pX(h,se.text,Dt,ar)||qt(ut,ar)}else if(Ft==="line-center"){for(const ut of c.geometry)if(ut.length>1){const fr=lX(ut,gt,f.vertical||se,g,24,_e);fr&&qt(ut,fr)}}else if(c.type==="Polygon")for(const ut of vm(c.geometry,0)){const fr=hX(ut,16);qt(ut[0],new td(fr.x,fr.y,0))}else if(c.type==="LineString")for(const ut of c.geometry)qt(ut,new td(ut[0].x,ut[0].y,0));else if(c.type==="Point")for(const ut of c.geometry)for(const fr of ut)qt([fr],new td(fr.x,fr.y,0))}function QD(h,c,f,g,_,C,T,P,z,B,N,q,K,te,se){const oe=function(Ke,Ae,Ue,it,gt,$t,gr,Ft){const Dt=it.layout.get("text-rotate").evaluate($t,{})*Math.PI/180,hr=[];for(const Yt of Ae.positionedLines)for(const qt of Yt.positionedGlyphs){if(!qt.rect)continue;const ut=qt.rect||{};let fr=lD+1,ar=!0,Tr=1,In=0;const On=(gt||Ft)&&qt.vertical,Qi=qt.metrics.advance*qt.scale/2;if(Ft&&Ae.verticalizable&&(In=Yt.lineOffset/2-(qt.imageName?-(Ri-qt.metrics.width*qt.scale)/2:(qt.scale-1)*Ri)),qt.imageName){const cn=gr[qt.imageName];ar=cn.sdf,Tr=cn.pixelRatio,fr=Eo/Tr}const dl=gt?[qt.x+Qi,qt.y]:[0,0];let Ps=gt?[0,0]:[qt.x+Qi+Ue[0],qt.y+Ue[1]-In],Hi=[0,0];On&&(Hi=Ps,Ps=[0,0]);const co=qt.metrics.isDoubleResolution?2:1,uo=(qt.metrics.left-fr)*qt.scale-Qi+Ps[0],ho=(-qt.metrics.top-fr)*qt.scale+Ps[1],mi=uo+ut.w/co*qt.scale/Tr,Gi=ho+ut.h/co*qt.scale/Tr,Us=new b(uo,ho),js=new b(mi,ho),fo=new b(uo,Gi),As=new b(mi,Gi);if(On){const cn=new b(-Qi,Qi-px),$n=-Math.PI/2,Gn=Ri/2-Qi,na=new b(5-px-Gn,-(qt.imageName?Gn:0)),oi=new b(...Hi);Us._rotateAround($n,cn)._add(na)._add(oi),js._rotateAround($n,cn)._add(na)._add(oi),fo._rotateAround($n,cn)._add(na)._add(oi),As._rotateAround($n,cn)._add(na)._add(oi)}if(Dt){const cn=Math.sin(Dt),$n=Math.cos(Dt),Gn=[$n,-cn,cn,$n];Us._matMult(Gn),js._matMult(Gn),fo._matMult(Gn),As._matMult(Gn)}const La=new b(0,0),zo=new b(0,0);hr.push({tl:Us,tr:js,bl:fo,br:As,tex:ut,writingMode:Ae.writingMode,glyphOffset:dl,sectionIndex:qt.sectionIndex,isSDF:ar,pixelOffsetTL:La,pixelOffsetBR:zo,minFontScaleX:0,minFontScaleY:0})}return hr}(0,f,P,_,C,T,g,h.allowVerticalPlacement),pe=h.textSizeData;let _e=null;pe.kind==="source"?(_e=[Ac*_.layout.get("text-size").evaluate(T,{})],_e[0]>Jh&&Ee(`${h.layerIds[0]}: Value for "text-size" is >= ${gx}. Reduce your "text-size".`)):pe.kind==="composite"&&(_e=[Ac*te.compositeTextSizes[0].evaluate(T,{},se),Ac*te.compositeTextSizes[1].evaluate(T,{},se)],(_e[0]>Jh||_e[1]>Jh)&&Ee(`${h.layerIds[0]}: Value for "text-size" is >= ${gx}. Reduce your "text-size".`)),h.addSymbols(h.text,oe,_e,P,C,T,B,c,z.lineStartIndex,z.lineLength,K,se);for(const Ke of N)q[Ke]=h.text.placedSymbolArray.length-1;return 4*oe.length}function HD(h){for(const c in h)return h[c];return null}function pX(h,c,f,g){const _=h.compareText;if(c in _){const C=_[c];for(let T=C.length-1;T>=0;T--)if(g.dist(C[T])<f)return!0}else _[c]=[];return _[c].push(g),!1}const GD=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class yT{static from(c){if(!(c instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[f,g]=new Uint8Array(c,0,2);if(f!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=g>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const C=GD[15&g];if(!C)throw new Error("Unrecognized array type.");const[T]=new Uint16Array(c,2,1),[P]=new Uint32Array(c,4,1);return new yT(P,T,C,c)}constructor(c,f=64,g=Float64Array,_){if(isNaN(c)||c<0)throw new Error(`Unpexpected numItems value: ${c}.`);this.numItems=+c,this.nodeSize=Math.min(Math.max(+f,2),65535),this.ArrayType=g,this.IndexArrayType=c<65536?Uint16Array:Uint32Array;const C=GD.indexOf(this.ArrayType),T=2*c*this.ArrayType.BYTES_PER_ELEMENT,P=c*this.IndexArrayType.BYTES_PER_ELEMENT,z=(8-P%8)%8;if(C<0)throw new Error(`Unexpected typed array class: ${g}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+P+z,2*c),this._pos=2*c,this._finished=!0):(this.data=new ArrayBuffer(8+T+P+z),this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+P+z,2*c),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+C]),new Uint16Array(this.data,2,1)[0]=f,new Uint32Array(this.data,4,1)[0]=c)}add(c,f){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=c,this.coords[this._pos++]=f,g}finish(){const c=this._pos>>1;if(c!==this.numItems)throw new Error(`Added ${c} items when expected ${this.numItems}.`);return xT(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(c,f,g,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:C,coords:T,nodeSize:P}=this,z=[0,C.length-1,0],B=[];for(;z.length;){const N=z.pop()||0,q=z.pop()||0,K=z.pop()||0;if(q-K<=P){for(let pe=K;pe<=q;pe++){const _e=T[2*pe],Ke=T[2*pe+1];_e>=c&&_e<=g&&Ke>=f&&Ke<=_&&B.push(C[pe])}continue}const te=K+q>>1,se=T[2*te],oe=T[2*te+1];se>=c&&se<=g&&oe>=f&&oe<=_&&B.push(C[te]),(N===0?c<=se:f<=oe)&&(z.push(K),z.push(te-1),z.push(1-N)),(N===0?g>=se:_>=oe)&&(z.push(te+1),z.push(q),z.push(1-N))}return B}within(c,f,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:C,nodeSize:T}=this,P=[0,_.length-1,0],z=[],B=g*g;for(;P.length;){const N=P.pop()||0,q=P.pop()||0,K=P.pop()||0;if(q-K<=T){for(let pe=K;pe<=q;pe++)KD(C[2*pe],C[2*pe+1],c,f)<=B&&z.push(_[pe]);continue}const te=K+q>>1,se=C[2*te],oe=C[2*te+1];KD(se,oe,c,f)<=B&&z.push(_[te]),(N===0?c-g<=se:f-g<=oe)&&(P.push(K),P.push(te-1),P.push(1-N)),(N===0?c+g>=se:f+g>=oe)&&(P.push(te+1),P.push(q),P.push(1-N))}return z}}function xT(h,c,f,g,_,C){if(_-g<=f)return;const T=g+_>>1;XD(h,c,T,g,_,C),xT(h,c,f,g,T-1,1-C),xT(h,c,f,T+1,_,1-C)}function XD(h,c,f,g,_,C){for(;_>g;){if(_-g>600){const B=_-g+1,N=f-g+1,q=Math.log(B),K=.5*Math.exp(2*q/3),te=.5*Math.sqrt(q*K*(B-K)/B)*(N-B/2<0?-1:1);XD(h,c,f,Math.max(g,Math.floor(f-N*K/B+te)),Math.min(_,Math.floor(f+(B-N)*K/B+te)),C)}const T=c[2*f+C];let P=g,z=_;for(vx(h,c,g,f),c[2*_+C]>T&&vx(h,c,g,_);P<z;){for(vx(h,c,P,z),P++,z--;c[2*P+C]<T;)P++;for(;c[2*z+C]>T;)z--}c[2*g+C]===T?vx(h,c,g,z):(z++,vx(h,c,z,_)),z<=f&&(g=z+1),f<=z&&(_=z-1)}}function vx(h,c,f,g){vT(h,f,g),vT(c,2*f,2*g),vT(c,2*f+1,2*g+1)}function vT(h,c,f){const g=h[c];h[c]=h[f],h[f]=g}function KD(h,c,f,g){const _=h-f,C=c-g;return _*_+C*C}var bT;a.bg=void 0,(bT=a.bg||(a.bg={})).create="create",bT.load="load",bT.fullLoad="fullLoad";let E_=null,bx=[];const _T=1e3/60,wT="loadTime",ST="fullLoadTime",mX={mark(h){performance.mark(h)},frame(h){const c=h;E_!=null&&bx.push(c-E_),E_=c},clearMetrics(){E_=null,bx=[],performance.clearMeasures(wT),performance.clearMeasures(ST);for(const h in a.bg)performance.clearMarks(a.bg[h])},getPerformanceMetrics(){performance.measure(wT,a.bg.create,a.bg.load),performance.measure(ST,a.bg.create,a.bg.fullLoad);const h=performance.getEntriesByName(wT)[0].duration,c=performance.getEntriesByName(ST)[0].duration,f=bx.length,g=1/(bx.reduce((C,T)=>C+T,0)/f/1e3),_=bx.filter(C=>C>_T).reduce((C,T)=>C+(T-_T)/_T,0);return{loadTime:h,fullLoadTime:c,fps:g,percentDroppedFrames:_/(f+_)*100,totalFrames:f}}};a.$=class extends G{},a.A=Gm,a.B=EC,a.C=function(h){if(at==null){const c=h.navigator?h.navigator.userAgent:null;at=!!h.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return at},a.D=nr,a.E=st,a.F=class{constructor(h,c){this.target=h,this.mapId=c,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new oX(()=>this.process()),this.subscription=function(f,g,_,C){return f.addEventListener(g,_,!1),{unsubscribe:()=>{f.removeEventListener(g,_,!1)}}}(this.target,"message",f=>this.receive(f)),this.globalScope=et(self)?h:window}registerMessageHandler(h,c){this.messageHandlers[h]=c}sendAsync(h,c){return new Promise((f,g)=>{const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[_]={resolve:f,reject:g},c&&c.signal.addEventListener("abort",()=>{delete this.resolveRejects[_];const P={id:_,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(P)},{once:!0});const C=[],T=Object.assign(Object.assign({},h),{id:_,sourceMapId:this.mapId,origin:location.origin,data:Nh(h.data,C)});this.target.postMessage(T,{transfer:C})})}receive(h){const c=h.data,f=c.id;if(!(c.origin!=="file://"&&location.origin!=="file://"&&c.origin!=="resource://android"&&location.origin!=="resource://android"&&c.origin!==location.origin||c.targetMapId&&this.mapId!==c.targetMapId)){if(c.type==="<cancel>"){delete this.tasks[f];const g=this.abortControllers[f];return delete this.abortControllers[f],void(g&&g.abort())}if(et(self)||c.mustQueue)return this.tasks[f]=c,this.taskQueue.push(f),void this.invoker.trigger();this.processTask(f,c)}}process(){if(this.taskQueue.length===0)return;const h=this.taskQueue.shift(),c=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),c&&this.processTask(h,c)}processTask(h,c){return o(this,void 0,void 0,function*(){if(c.type==="<response>"){const _=this.resolveRejects[h];return delete this.resolveRejects[h],_?void(c.error?_.reject(Vh(c.error)):_.resolve(Vh(c.data))):void 0}if(!this.messageHandlers[c.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${c.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const f=Vh(c.data),g=new AbortController;this.abortControllers[h]=g;try{const _=yield this.messageHandlers[c.type](c.sourceMapId,f,g);this.completeTask(h,null,_)}catch(_){this.completeTask(h,_)}})}completeTask(h,c,f){const g=[];delete this.abortControllers[h];const _={id:h,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:c?Nh(c):null,data:Nh(f,g)};this.target.postMessage(_,{transfer:g})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},a.G=rt,a.H=function(){var h=new Gm(16);return Gm!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},a.I=iT,a.J=function(h,c,f){var g,_,C,T,P,z,B,N,q,K,te,se,oe=f[0],pe=f[1],_e=f[2];return c===h?(h[12]=c[0]*oe+c[4]*pe+c[8]*_e+c[12],h[13]=c[1]*oe+c[5]*pe+c[9]*_e+c[13],h[14]=c[2]*oe+c[6]*pe+c[10]*_e+c[14],h[15]=c[3]*oe+c[7]*pe+c[11]*_e+c[15]):(_=c[1],C=c[2],T=c[3],P=c[4],z=c[5],B=c[6],N=c[7],q=c[8],K=c[9],te=c[10],se=c[11],h[0]=g=c[0],h[1]=_,h[2]=C,h[3]=T,h[4]=P,h[5]=z,h[6]=B,h[7]=N,h[8]=q,h[9]=K,h[10]=te,h[11]=se,h[12]=g*oe+P*pe+q*_e+c[12],h[13]=_*oe+z*pe+K*_e+c[13],h[14]=C*oe+B*pe+te*_e+c[14],h[15]=T*oe+N*pe+se*_e+c[15]),h},a.K=function(h,c,f){var g=f[0],_=f[1],C=f[2];return h[0]=c[0]*g,h[1]=c[1]*g,h[2]=c[2]*g,h[3]=c[3]*g,h[4]=c[4]*_,h[5]=c[5]*_,h[6]=c[6]*_,h[7]=c[7]*_,h[8]=c[8]*C,h[9]=c[9]*C,h[10]=c[10]*C,h[11]=c[11]*C,h[12]=c[12],h[13]=c[13],h[14]=c[14],h[15]=c[15],h},a.L=A5,a.M=function(h,c){const f={};for(let g=0;g<c.length;g++){const _=c[g];_ in h&&(f[_]=h[_])}return f},a.N=ed,a.O=CD,a.P=b,a.Q=TD,a.R=Da,a.S=Ra,a.T=Fm,a.U=R,a.V=F,a.W=Ge,a.X=ji,a.Y=j,a.Z=yx,a._=o,a.a=nt,a.a$=function(h,c){var f=h[0],g=h[1],_=h[2],C=h[3],T=h[4],P=h[5],z=h[6],B=h[7],N=h[8],q=h[9],K=h[10],te=h[11],se=h[12],oe=h[13],pe=h[14],_e=h[15],Ke=c[0],Ae=c[1],Ue=c[2],it=c[3],gt=c[4],$t=c[5],gr=c[6],Ft=c[7],Dt=c[8],hr=c[9],Yt=c[10],qt=c[11],ut=c[12],fr=c[13],ar=c[14],Tr=c[15];return Math.abs(f-Ke)<=lo*Math.max(1,Math.abs(f),Math.abs(Ke))&&Math.abs(g-Ae)<=lo*Math.max(1,Math.abs(g),Math.abs(Ae))&&Math.abs(_-Ue)<=lo*Math.max(1,Math.abs(_),Math.abs(Ue))&&Math.abs(C-it)<=lo*Math.max(1,Math.abs(C),Math.abs(it))&&Math.abs(T-gt)<=lo*Math.max(1,Math.abs(T),Math.abs(gt))&&Math.abs(P-$t)<=lo*Math.max(1,Math.abs(P),Math.abs($t))&&Math.abs(z-gr)<=lo*Math.max(1,Math.abs(z),Math.abs(gr))&&Math.abs(B-Ft)<=lo*Math.max(1,Math.abs(B),Math.abs(Ft))&&Math.abs(N-Dt)<=lo*Math.max(1,Math.abs(N),Math.abs(Dt))&&Math.abs(q-hr)<=lo*Math.max(1,Math.abs(q),Math.abs(hr))&&Math.abs(K-Yt)<=lo*Math.max(1,Math.abs(K),Math.abs(Yt))&&Math.abs(te-qt)<=lo*Math.max(1,Math.abs(te),Math.abs(qt))&&Math.abs(se-ut)<=lo*Math.max(1,Math.abs(se),Math.abs(ut))&&Math.abs(oe-fr)<=lo*Math.max(1,Math.abs(oe),Math.abs(fr))&&Math.abs(pe-ar)<=lo*Math.max(1,Math.abs(pe),Math.abs(ar))&&Math.abs(_e-Tr)<=lo*Math.max(1,Math.abs(_e),Math.abs(Tr))},a.a0=Gr,a.a1=pT,a.a2=Qe,a.a3=h=>{const c=window.document.createElement("video");return c.muted=!0,new Promise(f=>{c.onloadstart=()=>{f(c)};for(const g of h){const _=window.document.createElement("source");Et(g)||(c.crossOrigin="Anonymous"),_.src=g,c.appendChild(_)}})},a.a4=function(){return J++},a.a5=Bt,a.a6=eg,a.a7=L0,a.a8=Wf,a.a9=zD,a.aA=function(h){if(h.type==="custom")return new sX(h);switch(h.type){case"background":return new rX(h);case"circle":return new WH(h);case"fill":return new oG(h);case"fill-extrusion":return new _G(h);case"heatmap":return new qH(h);case"hillshade":return new HH(h);case"line":return new jG(h);case"raster":return new iX(h);case"symbol":return new T_(h)}},a.aB=le,a.aC=function(h,c){if(!h)return[{command:"setStyle",args:[c]}];let f=[];try{if(!Tt(h.version,c.version))return[{command:"setStyle",args:[c]}];Tt(h.center,c.center)||f.push({command:"setCenter",args:[c.center]}),Tt(h.zoom,c.zoom)||f.push({command:"setZoom",args:[c.zoom]}),Tt(h.bearing,c.bearing)||f.push({command:"setBearing",args:[c.bearing]}),Tt(h.pitch,c.pitch)||f.push({command:"setPitch",args:[c.pitch]}),Tt(h.sprite,c.sprite)||f.push({command:"setSprite",args:[c.sprite]}),Tt(h.glyphs,c.glyphs)||f.push({command:"setGlyphs",args:[c.glyphs]}),Tt(h.transition,c.transition)||f.push({command:"setTransition",args:[c.transition]}),Tt(h.light,c.light)||f.push({command:"setLight",args:[c.light]}),Tt(h.terrain,c.terrain)||f.push({command:"setTerrain",args:[c.terrain]}),Tt(h.sky,c.sky)||f.push({command:"setSky",args:[c.sky]}),Tt(h.projection,c.projection)||f.push({command:"setProjection",args:[c.projection]});const g={},_=[];(function(T,P,z,B){let N;for(N in P=P||{},T=T||{})Object.prototype.hasOwnProperty.call(T,N)&&(Object.prototype.hasOwnProperty.call(P,N)||hn(N,z,B));for(N in P)Object.prototype.hasOwnProperty.call(P,N)&&(Object.prototype.hasOwnProperty.call(T,N)?Tt(T[N],P[N])||(T[N].type==="geojson"&&P[N].type==="geojson"&&kn(T,P,N)?Vt(z,{command:"setGeoJSONSourceData",args:[N,P[N].data]}):on(N,P,z,B)):tn(N,P,z))})(h.sources,c.sources,_,g);const C=[];h.layers&&h.layers.forEach(T=>{"source"in T&&g[T.source]?f.push({command:"removeLayer",args:[T.id]}):C.push(T)}),f=f.concat(_),function(T,P,z){P=P||[];const B=(T=T||[]).map(ui),N=P.map(ui),q=T.reduce(Oi,{}),K=P.reduce(Oi,{}),te=B.slice(),se=Object.create(null);let oe,pe,_e,Ke,Ae;for(let Ue=0,it=0;Ue<B.length;Ue++)oe=B[Ue],Object.prototype.hasOwnProperty.call(K,oe)?it++:(Vt(z,{command:"removeLayer",args:[oe]}),te.splice(te.indexOf(oe,it),1));for(let Ue=0,it=0;Ue<N.length;Ue++)oe=N[N.length-1-Ue],te[te.length-1-Ue]!==oe&&(Object.prototype.hasOwnProperty.call(q,oe)?(Vt(z,{command:"removeLayer",args:[oe]}),te.splice(te.lastIndexOf(oe,te.length-it),1)):it++,Ke=te[te.length-Ue],Vt(z,{command:"addLayer",args:[K[oe],Ke]}),te.splice(te.length-Ue,0,oe),se[oe]=!0);for(let Ue=0;Ue<N.length;Ue++)if(oe=N[Ue],pe=q[oe],_e=K[oe],!se[oe]&&!Tt(pe,_e))if(Tt(pe.source,_e.source)&&Tt(pe["source-layer"],_e["source-layer"])&&Tt(pe.type,_e.type)){for(Ae in yn(pe.layout,_e.layout,z,oe,null,"setLayoutProperty"),yn(pe.paint,_e.paint,z,oe,null,"setPaintProperty"),Tt(pe.filter,_e.filter)||Vt(z,{command:"setFilter",args:[oe,_e.filter]}),Tt(pe.minzoom,_e.minzoom)&&Tt(pe.maxzoom,_e.maxzoom)||Vt(z,{command:"setLayerZoomRange",args:[oe,_e.minzoom,_e.maxzoom]}),pe)Object.prototype.hasOwnProperty.call(pe,Ae)&&Ae!=="layout"&&Ae!=="paint"&&Ae!=="filter"&&Ae!=="metadata"&&Ae!=="minzoom"&&Ae!=="maxzoom"&&(Ae.indexOf("paint.")===0?yn(pe[Ae],_e[Ae],z,oe,Ae.slice(6),"setPaintProperty"):Tt(pe[Ae],_e[Ae])||Vt(z,{command:"setLayerProperty",args:[oe,Ae,_e[Ae]]}));for(Ae in _e)Object.prototype.hasOwnProperty.call(_e,Ae)&&!Object.prototype.hasOwnProperty.call(pe,Ae)&&Ae!=="layout"&&Ae!=="paint"&&Ae!=="filter"&&Ae!=="metadata"&&Ae!=="minzoom"&&Ae!=="maxzoom"&&(Ae.indexOf("paint.")===0?yn(pe[Ae],_e[Ae],z,oe,Ae.slice(6),"setPaintProperty"):Tt(pe[Ae],_e[Ae])||Vt(z,{command:"setLayerProperty",args:[oe,Ae,_e[Ae]]}))}else Vt(z,{command:"removeLayer",args:[oe]}),Ke=te[te.lastIndexOf(oe)+1],Vt(z,{command:"addLayer",args:[_e,Ke]})}(C,c.layers,f)}catch(g){console.warn("Unable to compute style diff:",g),f=[{command:"setStyle",args:[c]}]}return f},a.aD=function(h){const c=[],f=h.id;return f===void 0&&c.push({message:`layers.${f}: missing required property "id"`}),h.render===void 0&&c.push({message:`layers.${f}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&c.push({message:`layers.${f}: property "renderingMode" must be either "2d" or "3d"`}),c},a.aE=function h(c,f){if(Array.isArray(c)){if(!Array.isArray(f)||c.length!==f.length)return!1;for(let g=0;g<c.length;g++)if(!h(c[g],f[g]))return!1;return!0}if(typeof c=="object"&&c!==null&&f!==null){if(typeof f!="object"||Object.keys(c).length!==Object.keys(f).length)return!1;for(const g in c)if(!h(c[g],f[g]))return!1;return!0}return c===f},a.aF=re,a.aG=he,a.aH=class extends $f{constructor(h,c){super(h,c),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},a.aI=f_,a.aJ=class extends $f{constructor(h,c){super(h,c),this.current=DH}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let c=1;c<16;c++)if(h[c]!==this.current[c]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},a.aK=v5,a.aL=b5,a.aM=an,a.aN=class extends $f{constructor(h,c){super(h,c),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},a.aO=class extends $f{constructor(h,c){super(h,c),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},a.aP=function(h,c,f,g,_,C,T){var P=1/(c-f),z=1/(g-_),B=1/(C-T);return h[0]=-2*P,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*z,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*B,h[11]=0,h[12]=(c+f)*P,h[13]=(_+g)*z,h[14]=(T+C)*B,h[15]=1,h},a.aQ=VH,a.aR=class extends De{},a.aS=MG,a.aT=class extends Ye{},a.aU=QC,a.aV=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},a.aW=D5,a.aX=Cs,a.aY=Ia,a.aZ=class extends ir{},a.a_=function(h,c){return h[0]===c[0]&&h[1]===c[1]&&h[2]===c[2]&&h[3]===c[3]&&h[4]===c[4]&&h[5]===c[5]&&h[6]===c[6]&&h[7]===c[7]&&h[8]===c[8]&&h[9]===c[9]&&h[10]===c[10]&&h[11]===c[11]&&h[12]===c[12]&&h[13]===c[13]&&h[14]===c[14]&&h[15]===c[15]},a.aa=function(h){const c={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(f,g,_,C)=>{const T=_||C;return c[g]=!T||T.toLowerCase(),""}),c["max-age"]){const f=parseInt(c["max-age"],10);isNaN(f)?delete c["max-age"]:c["max-age"]=f}return c},a.ab=function(h,c){const f=[];for(const g in h)g in c||f.push(g);return f},a.ac=Q,a.ad=function(h,c,f){var g=Math.sin(f),_=Math.cos(f),C=c[0],T=c[1],P=c[2],z=c[3],B=c[4],N=c[5],q=c[6],K=c[7];return c!==h&&(h[8]=c[8],h[9]=c[9],h[10]=c[10],h[11]=c[11],h[12]=c[12],h[13]=c[13],h[14]=c[14],h[15]=c[15]),h[0]=C*_+B*g,h[1]=T*_+N*g,h[2]=P*_+q*g,h[3]=z*_+K*g,h[4]=B*_-C*g,h[5]=N*_-T*g,h[6]=q*_-P*g,h[7]=K*_-z*g,h},a.ae=function(h){var c=new Gm(16);return c[0]=h[0],c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=h[6],c[7]=h[7],c[8]=h[8],c[9]=h[9],c[10]=h[10],c[11]=h[11],c[12]=h[12],c[13]=h[13],c[14]=h[14],c[15]=h[15],c},a.af=y_,a.ag=function(h,c){let f=0,g=0;if(h.kind==="constant")g=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:_,minZoom:C,maxZoom:T}=h,P=_?Q(_s.interpolationFactor(_,c,C,T),0,1):0;h.kind==="camera"?g=qi.number(h.minSize,h.maxSize,P):f=P}return{uSizeT:f,uSize:g}},a.ai=function(h,{uSize:c,uSizeT:f},{lowerSize:g,upperSize:_}){return h.kind==="source"?g/Ac:h.kind==="composite"?qi.number(g/Ac,_/Ac,f):c},a.aj=lT,a.ak=function(h,c,f,g){const _=c.y-h.y,C=c.x-h.x,T=g.y-f.y,P=g.x-f.x,z=T*C-P*_;if(z===0)return null;const B=(P*(h.y-f.y)-T*(h.x-f.x))/z;return new b(h.x+B*C,h.y+B*_)},a.al=RD,a.am=k5,a.an=WC,a.ao=function(h){let c=1/0,f=1/0,g=-1/0,_=-1/0;for(const C of h)c=Math.min(c,C.x),f=Math.min(f,C.y),g=Math.max(g,C.x),_=Math.max(_,C.y);return[c,f,g,_]},a.ap=Ri,a.ar=aT,a.as=function(h,c){var f=c[0],g=c[1],_=c[2],C=c[3],T=c[4],P=c[5],z=c[6],B=c[7],N=c[8],q=c[9],K=c[10],te=c[11],se=c[12],oe=c[13],pe=c[14],_e=c[15],Ke=f*P-g*T,Ae=f*z-_*T,Ue=f*B-C*T,it=g*z-_*P,gt=g*B-C*P,$t=_*B-C*z,gr=N*oe-q*se,Ft=N*pe-K*se,Dt=N*_e-te*se,hr=q*pe-K*oe,Yt=q*_e-te*oe,qt=K*_e-te*pe,ut=Ke*qt-Ae*Yt+Ue*hr+it*Dt-gt*Ft+$t*gr;return ut?(h[0]=(P*qt-z*Yt+B*hr)*(ut=1/ut),h[1]=(_*Yt-g*qt-C*hr)*ut,h[2]=(oe*$t-pe*gt+_e*it)*ut,h[3]=(K*gt-q*$t-te*it)*ut,h[4]=(z*Dt-T*qt-B*Ft)*ut,h[5]=(f*qt-_*Dt+C*Ft)*ut,h[6]=(pe*Ue-se*$t-_e*Ae)*ut,h[7]=(N*$t-K*Ue+te*Ae)*ut,h[8]=(T*Yt-P*Dt+B*gr)*ut,h[9]=(g*Dt-f*Yt-C*gr)*ut,h[10]=(se*gt-oe*Ue+_e*Ke)*ut,h[11]=(q*Ue-N*gt-te*Ke)*ut,h[12]=(P*Ft-T*hr-z*gr)*ut,h[13]=(f*hr-g*Ft+_*gr)*ut,h[14]=(oe*Ae-se*it-pe*Ke)*ut,h[15]=(N*it-q*Ae+K*Ke)*ut,h):null},a.at=gT,a.au=oT,a.av=yT,a.aw=function(){const h={},c=Te.$version;for(const f in Te.$root){const g=Te.$root[f];if(g.required){let _=null;_=f==="version"?c:g.type==="array"?[]:{},_!=null&&(h[f]=_)}}return h},a.ax=Z0,a.ay=_t,a.az=function(h){h=h.slice();const c=Object.create(null);for(let f=0;f<h.length;f++)c[h[f].id]=h[f];for(let f=0;f<h.length;f++)"ref"in h[f]&&(h[f]=Nt(h[f],c[h[f].ref]));return h},a.b=Be,a.b0=function(h,c){return h[0]=c[0],h[1]=c[1],h[2]=c[2],h[3]=c[3],h[4]=c[4],h[5]=c[5],h[6]=c[6],h[7]=c[7],h[8]=c[8],h[9]=c[9],h[10]=c[10],h[11]=c[11],h[12]=c[12],h[13]=c[13],h[14]=c[14],h[15]=c[15],h},a.b1=function(h,c,f){return h[0]=c[0]*f[0],h[1]=c[1]*f[1],h[2]=c[2]*f[2],h[3]=c[3]*f[3],h},a.b2=function(h,c){return h[0]*c[0]+h[1]*c[1]+h[2]*c[2]+h[3]*c[3]},a.b3=Y,a.b4=jD,a.b5=OD,a.b6=function(h,c,f,g,_){var C,T=1/Math.tan(c/2);return h[0]=T/f,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=T,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,_!=null&&_!==1/0?(h[10]=(_+g)*(C=1/(g-_)),h[14]=2*_*g*C):(h[10]=-1,h[14]=-2*g),h},a.b7=function(h,c,f){var g=Math.sin(f),_=Math.cos(f),C=c[4],T=c[5],P=c[6],z=c[7],B=c[8],N=c[9],q=c[10],K=c[11];return c!==h&&(h[0]=c[0],h[1]=c[1],h[2]=c[2],h[3]=c[3],h[12]=c[12],h[13]=c[13],h[14]=c[14],h[15]=c[15]),h[4]=C*_+B*g,h[5]=T*_+N*g,h[6]=P*_+q*g,h[7]=z*_+K*g,h[8]=B*_-C*g,h[9]=N*_-T*g,h[10]=q*_-P*g,h[11]=K*_-z*g,h},a.b8=L,a.b9=U,a.bA=tD,a.bB=function(h){return h.message===Oe},a.bC=Dh,a.bD=jo,a.ba=function(h){return h*Math.PI/180},a.bb=function(h,c){const{x:f,y:g}=yx.fromLngLat(c);return!(h<0||h>25||g<0||g>=1||f<0||f>=1)},a.bc=function(h,c){return h[0]=c[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=c[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=c[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},a.bd=class extends V{},a.be=dT,a.bf=mX,a.bh=Xe,a.bi=function(h,c){nt.REGISTERED_PROTOCOLS[h]=c},a.bj=function(h){delete nt.REGISTERED_PROTOCOLS[h]},a.bk=function(h,c){const f={};for(let _=0;_<h.length;_++){const C=c&&c[h[_].id]||t_(h[_]);c&&(c[h[_].id]=C);let T=f[C];T||(T=f[C]=[]),T.push(h[_])}const g=[];for(const _ in f)g.push(f[_]);return g},a.bl=Ht,a.bm=ED,a.bn=MD,a.bo=uD,a.bp=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=ji/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const c=h.bucket.layers[0],f=c.layout,g=c._unevaluatedLayout._values,_={layoutIconSize:g["icon-size"].possiblyEvaluate(new Un(h.bucket.zoom+1),h.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new Un(h.bucket.zoom+1),h.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new Un(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:B,maxZoom:N}=h.bucket.textSizeData;_.compositeTextSizes=[g["text-size"].possiblyEvaluate(new Un(B),h.canonical),g["text-size"].possiblyEvaluate(new Un(N),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:B,maxZoom:N}=h.bucket.iconSizeData;_.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new Un(B),h.canonical),g["icon-size"].possiblyEvaluate(new Un(N),h.canonical)]}const C=f.get("text-line-height")*Ri,T=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",P=f.get("text-keep-upright"),z=f.get("text-size");for(const B of h.bucket.features){const N=f.get("text-font").evaluate(B,{},h.canonical).join(","),q=z.evaluate(B,{},h.canonical),K=_.layoutTextSize.evaluate(B,{},h.canonical),te=_.layoutIconSize.evaluate(B,{},h.canonical),se={horizontal:{},vertical:void 0},oe=B.text;let pe,_e=[0,0];if(oe){const Ue=oe.toString(),it=f.get("text-letter-spacing").evaluate(B,{},h.canonical)*Ri,gt=zC(Ue)?it:0,$t=f.get("text-anchor").evaluate(B,{},h.canonical),gr=qD(c,B,h.canonical);if(!gr){const Yt=f.get("text-radial-offset").evaluate(B,{},h.canonical);_e=Yt?UD($t,[Yt*Ri,mT]):f.get("text-offset").evaluate(B,{},h.canonical).map(qt=>qt*Ri)}let Ft=T?"center":f.get("text-justify").evaluate(B,{},h.canonical);const Dt=f.get("symbol-placement")==="point"?f.get("text-max-width").evaluate(B,{},h.canonical)*Ri:1/0,hr=()=>{h.bucket.allowVerticalPlacement&&Y0(Ue)&&(se.vertical=S_(oe,h.glyphMap,h.glyphPositions,h.imagePositions,N,Dt,C,$t,"left",gt,_e,a.ah.vertical,!0,K,q))};if(!T&&gr){const Yt=new Set;if(Ft==="auto")for(let ut=0;ut<gr.values.length;ut+=2)Yt.add(gT(gr.values[ut]));else Yt.add(Ft);let qt=!1;for(const ut of Yt)if(!se.horizontal[ut])if(qt)se.horizontal[ut]=se.horizontal[0];else{const fr=S_(oe,h.glyphMap,h.glyphPositions,h.imagePositions,N,Dt,C,"center",ut,gt,_e,a.ah.horizontal,!1,K,q);fr&&(se.horizontal[ut]=fr,qt=fr.positionedLines.length===1)}hr()}else{Ft==="auto"&&(Ft=gT($t));const Yt=S_(oe,h.glyphMap,h.glyphPositions,h.imagePositions,N,Dt,C,$t,Ft,gt,_e,a.ah.horizontal,!1,K,q);Yt&&(se.horizontal[Ft]=Yt),hr(),Y0(Ue)&&T&&P&&(se.vertical=S_(oe,h.glyphMap,h.glyphPositions,h.imagePositions,N,Dt,C,$t,Ft,gt,_e,a.ah.vertical,!1,K,q))}}let Ke=!1;if(B.icon&&B.icon.name){const Ue=h.imageMap[B.icon.name];Ue&&(pe=ZG(h.imagePositions[B.icon.name],f.get("icon-offset").evaluate(B,{},h.canonical),f.get("icon-anchor").evaluate(B,{},h.canonical)),Ke=!!Ue.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=Ke:h.bucket.sdfIcons!==Ke&&Ee("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ue.pixelRatio!==h.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const Ae=HD(se.horizontal)||se.vertical;h.bucket.iconsInText=!!Ae&&Ae.iconsInText,(Ae||pe)&&fX(h.bucket,B,se,pe,h.imageMap,_,K,te,_e,Ke,h.canonical)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},a.bq=eT,a.br=ZC,a.bs=JC,a.bt=Zh,a.bu=rT,a.bv=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},a.bw=function(h,c,f,g,_){return o(this,void 0,void 0,function*(){if(F())try{return yield Ge(h,c,f,g,_)}catch{}return function(C,T,P,z,B){const N=C.width,q=C.height;Le&&Ie||(Le=new OffscreenCanvas(N,q),Ie=Le.getContext("2d",{willReadFrequently:!0})),Le.width=N,Le.height=q,Ie.drawImage(C,0,0,N,q);const K=Ie.getImageData(T,P,z,B);return Ie.clearRect(0,0,N,q),K.data}(h,c,f,g,_)})},a.bx=AD,a.by=d,a.bz=m,a.c=Re,a.d=h=>o(void 0,void 0,void 0,function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));const c=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(c)}catch(f){throw new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),a.e=Z,a.f=h=>new Promise((c,f)=>{const g=new Image;g.onload=()=>{c(g),URL.revokeObjectURL(g.src),g.onload=null,window.requestAnimationFrame(()=>{g.src=Me})},g.onerror=()=>f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const _=new Blob([new Uint8Array(h)],{type:"image/png"});g.src=h.byteLength?URL.createObjectURL(_):Me}),a.g=ze,a.h=(h,c)=>Mt(Z(h,{type:"json"}),c),a.i=et,a.j=vt,a.k=Kt,a.l=(h,c)=>Mt(Z(h,{type:"arrayBuffer"}),c),a.m=Mt,a.n=function(h){return new rT(h).readFields(UG,[])},a.o=ax,a.p=cD,a.q=k,a.r=AC,a.s=Et,a.t=X0,a.u=Mu,a.v=Te,a.w=Ee,a.x=function([h,c,f]){return c+=90,c*=Math.PI/180,f*=Math.PI/180,{x:h*Math.cos(c)*Math.sin(f),y:h*Math.sin(c)*Math.sin(f),z:h*Math.cos(f)}},a.y=qi,a.z=Un}),i("worker",["./shared"],function(a){class o{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,H){for(const de of W){this._layerConfigs[de.id]=de;const ve=this._layers[de.id]=a.aA(de);ve._featureFilter=a.a7(ve.filter),this.keyCache[de.id]&&delete this.keyCache[de.id]}for(const de of H)delete this.keyCache[de],delete this._layerConfigs[de],delete this._layers[de];this.familiesBySource={};const ee=a.bk(Object.values(this._layerConfigs),this.keyCache);for(const de of ee){const ve=de.map(xe=>this._layers[xe.id]),Se=ve[0];if(Se.visibility==="none")continue;const Fe=Se.source||"";let be=this.familiesBySource[Fe];be||(be=this.familiesBySource[Fe]={});const tt=Se.sourceLayer||"_geojsonTileLayer";let ht=be[tt];ht||(ht=be[tt]=[]),ht.push(ve)}}}class d{constructor(W){const H={},ee=[];for(const Fe in W){const be=W[Fe],tt=H[Fe]={};for(const ht in be){const xe=be[+ht];if(!xe||xe.bitmap.width===0||xe.bitmap.height===0)continue;const ct={x:0,y:0,w:xe.bitmap.width+2,h:xe.bitmap.height+2};ee.push(ct),tt[ht]={rect:ct,metrics:xe.metrics}}}const{w:de,h:ve}=a.p(ee),Se=new a.o({width:de||1,height:ve||1});for(const Fe in W){const be=W[Fe];for(const tt in be){const ht=be[+tt];if(!ht||ht.bitmap.width===0||ht.bitmap.height===0)continue;const xe=H[Fe][tt].rect;a.o.copy(ht.bitmap,Se,{x:0,y:0},{x:xe.x+1,y:xe.y+1},ht.bitmap)}}this.image=Se,this.positions=H}}a.bl("GlyphAtlas",d);class m{constructor(W){this.tileID=new a.S(W.tileID.overscaledZ,W.tileID.wrap,W.tileID.canonical.z,W.tileID.canonical.x,W.tileID.canonical.y),this.uid=W.uid,this.zoom=W.zoom,this.pixelRatio=W.pixelRatio,this.tileSize=W.tileSize,this.source=W.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=W.showCollisionBoxes,this.collectResourceTiming=!!W.collectResourceTiming,this.returnDependencies=!!W.returnDependencies,this.promoteId=W.promoteId,this.inFlightDependencies=[]}parse(W,H,ee,de){return a._(this,void 0,void 0,function*(){this.status="parsing",this.data=W,this.collisionBoxArray=new a.a5;const ve=new a.bm(Object.keys(W.layers).sort()),Se=new a.bn(this.tileID,this.promoteId);Se.bucketLayerIDs=[];const Fe={},be={featureIndex:Se,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ee},tt=H.familiesBySource[this.source];for(const Rr in tt){const mn=W.layers[Rr];if(!mn)continue;mn.version===1&&a.w(`Vector tile source "${this.source}" layer "${Rr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Fn=ve.encode(Rr),Pi=[];for(let bi=0;bi<mn.length;bi++){const ss=mn.feature(bi),ja=Se.getId(ss,Rr);Pi.push({feature:ss,id:ja,index:bi,sourceLayerIndex:Fn})}for(const bi of tt[Rr]){const ss=bi[0];ss.source!==this.source&&a.w(`layer.source = ${ss.source} does not equal this.source = ${this.source}`),ss.minzoom&&this.zoom<Math.floor(ss.minzoom)||ss.maxzoom&&this.zoom>=ss.maxzoom||ss.visibility!=="none"&&(y(bi,this.zoom,ee),(Fe[ss.id]=ss.createBucket({index:Se.bucketLayerIDs.length,layers:bi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Fn,sourceID:this.source})).populate(Pi,be,this.tileID.canonical),Se.bucketLayerIDs.push(bi.map(ja=>ja.id)))}}const ht=a.aF(be.glyphDependencies,Rr=>Object.keys(Rr).map(Number));this.inFlightDependencies.forEach(Rr=>Rr==null?void 0:Rr.abort()),this.inFlightDependencies=[];let xe=Promise.resolve({});if(Object.keys(ht).length){const Rr=new AbortController;this.inFlightDependencies.push(Rr),xe=de.sendAsync({type:"GG",data:{stacks:ht,source:this.source,tileID:this.tileID,type:"glyphs"}},Rr)}const ct=Object.keys(be.iconDependencies);let Rt=Promise.resolve({});if(ct.length){const Rr=new AbortController;this.inFlightDependencies.push(Rr),Rt=de.sendAsync({type:"GI",data:{icons:ct,source:this.source,tileID:this.tileID,type:"icons"}},Rr)}const rr=Object.keys(be.patternDependencies);let Nr=Promise.resolve({});if(rr.length){const Rr=new AbortController;this.inFlightDependencies.push(Rr),Nr=de.sendAsync({type:"GI",data:{icons:rr,source:this.source,tileID:this.tileID,type:"patterns"}},Rr)}const[Mr,Kr,Dr]=yield Promise.all([xe,Rt,Nr]),hi=new d(Mr),Yn=new a.bo(Kr,Dr);for(const Rr in Fe){const mn=Fe[Rr];mn instanceof a.a6?(y(mn.layers,this.zoom,ee),a.bp({bucket:mn,glyphMap:Mr,glyphPositions:hi.positions,imageMap:Kr,imagePositions:Yn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):mn.hasPattern&&(mn instanceof a.bq||mn instanceof a.br||mn instanceof a.bs)&&(y(mn.layers,this.zoom,ee),mn.addFeatures(be,this.tileID.canonical,Yn.patternPositions))}return this.status="done",{buckets:Object.values(Fe).filter(Rr=>!Rr.isEmpty()),featureIndex:Se,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:hi.image,imageAtlas:Yn,glyphMap:this.returnDependencies?Mr:null,iconMap:this.returnDependencies?Kr:null,glyphPositions:this.returnDependencies?hi.positions:null}})}}function y(me,W,H){const ee=new a.z(W);for(const de of me)de.recalculate(ee,H)}class b{constructor(W,H,ee){this.actor=W,this.layerIndex=H,this.availableImages=ee,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(W,H){return a._(this,void 0,void 0,function*(){const ee=yield a.l(W.request,H);try{return{vectorTile:new a.bt.VectorTile(new a.bu(ee.data)),rawData:ee.data,cacheControl:ee.cacheControl,expires:ee.expires}}catch(de){const ve=new Uint8Array(ee.data);let Se=`Unable to parse the tile at ${W.request.url}, `;throw Se+=ve[0]===31&&ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${de.message}`,new Error(Se)}})}loadTile(W){return a._(this,void 0,void 0,function*(){const H=W.uid,ee=!!(W&&W.request&&W.request.collectResourceTiming)&&new a.bv(W.request),de=new m(W);this.loading[H]=de;const ve=new AbortController;de.abort=ve;try{const Se=yield this.loadVectorTile(W,ve);if(delete this.loading[H],!Se)return null;const Fe=Se.rawData,be={};Se.expires&&(be.expires=Se.expires),Se.cacheControl&&(be.cacheControl=Se.cacheControl);const tt={};if(ee){const xe=ee.finish();xe&&(tt.resourceTiming=JSON.parse(JSON.stringify(xe)))}de.vectorTile=Se.vectorTile;const ht=de.parse(Se.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[H]=de,this.fetching[H]={rawTileData:Fe,cacheControl:be,resourceTiming:tt};try{const xe=yield ht;return a.e({rawTileData:Fe.slice(0)},xe,be,tt)}finally{delete this.fetching[H]}}catch(Se){throw delete this.loading[H],de.status="done",this.loaded[H]=de,Se}})}reloadTile(W){return a._(this,void 0,void 0,function*(){const H=W.uid;if(!this.loaded||!this.loaded[H])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ee=this.loaded[H];if(ee.showCollisionBoxes=W.showCollisionBoxes,ee.status==="parsing"){const de=yield ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor);let ve;if(this.fetching[H]){const{rawTileData:Se,cacheControl:Fe,resourceTiming:be}=this.fetching[H];delete this.fetching[H],ve=a.e({rawTileData:Se.slice(0)},de,Fe,be)}else ve=de;return ve}if(ee.status==="done"&&ee.vectorTile)return ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(W){return a._(this,void 0,void 0,function*(){const H=this.loading,ee=W.uid;H&&H[ee]&&H[ee].abort&&(H[ee].abort.abort(),delete H[ee])})}removeTile(W){return a._(this,void 0,void 0,function*(){this.loaded&&this.loaded[W.uid]&&delete this.loaded[W.uid]})}}class w{constructor(){this.loaded={}}loadTile(W){return a._(this,void 0,void 0,function*(){const{uid:H,encoding:ee,rawImageData:de,redFactor:ve,greenFactor:Se,blueFactor:Fe,baseShift:be}=W,tt=de.width+2,ht=de.height+2,xe=a.b(de)?new a.R({width:tt,height:ht},yield a.bw(de,-1,-1,tt,ht)):de,ct=new a.bx(H,xe,ee,ve,Se,Fe,be);return this.loaded=this.loaded||{},this.loaded[H]=ct,ct})}removeTile(W){const H=this.loaded,ee=W.uid;H&&H[ee]&&delete H[ee]}}function O(me,W){if(me.length!==0){A(me[0],W);for(var H=1;H<me.length;H++)A(me[H],!W)}}function A(me,W){for(var H=0,ee=0,de=0,ve=me.length,Se=ve-1;de<ve;Se=de++){var Fe=(me[de][0]-me[Se][0])*(me[Se][1]+me[de][1]),be=H+Fe;ee+=Math.abs(H)>=Math.abs(Fe)?H-be+Fe:Fe-be+H,H=be}H+ee>=0!=!!W&&me.reverse()}var E=a.by(function me(W,H){var ee,de=W&&W.type;if(de==="FeatureCollection")for(ee=0;ee<W.features.length;ee++)me(W.features[ee],H);else if(de==="GeometryCollection")for(ee=0;ee<W.geometries.length;ee++)me(W.geometries[ee],H);else if(de==="Feature")me(W.geometry,H);else if(de==="Polygon")O(W.coordinates,H);else if(de==="MultiPolygon")for(ee=0;ee<W.coordinates.length;ee++)O(W.coordinates[ee],H);return W});const $=a.bt.VectorTileFeature.prototype.toGeoJSON;var R={exports:{}},F=a.bz,L=a.bt.VectorTileFeature,U=Q;function Q(me,W){this.options=W||{},this.features=me,this.length=me.length}function Y(me,W){this.id=typeof me.id=="number"?me.id:void 0,this.type=me.type,this.rawGeometry=me.type===1?[me.geometry]:me.geometry,this.properties=me.tags,this.extent=W||4096}Q.prototype.feature=function(me){return new Y(this.features[me],this.options.extent)},Y.prototype.loadGeometry=function(){var me=this.rawGeometry;this.geometry=[];for(var W=0;W<me.length;W++){for(var H=me[W],ee=[],de=0;de<H.length;de++)ee.push(new F(H[de][0],H[de][1]));this.geometry.push(ee)}return this.geometry},Y.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var me=this.geometry,W=1/0,H=-1/0,ee=1/0,de=-1/0,ve=0;ve<me.length;ve++)for(var Se=me[ve],Fe=0;Fe<Se.length;Fe++){var be=Se[Fe];W=Math.min(W,be.x),H=Math.max(H,be.x),ee=Math.min(ee,be.y),de=Math.max(de,be.y)}return[W,ee,H,de]},Y.prototype.toGeoJSON=L.prototype.toGeoJSON;var Z=a.bA,J=U;function re(me){var W=new Z;return function(H,ee){for(var de in H.layers)ee.writeMessage(3,he,H.layers[de])}(me,W),W.finish()}function he(me,W){var H;W.writeVarintField(15,me.version||1),W.writeStringField(1,me.name||""),W.writeVarintField(5,me.extent||4096);var ee={keys:[],values:[],keycache:{},valuecache:{}};for(H=0;H<me.length;H++)ee.feature=me.feature(H),W.writeMessage(2,le,ee);var de=ee.keys;for(H=0;H<de.length;H++)W.writeStringField(3,de[H]);var ve=ee.values;for(H=0;H<ve.length;H++)W.writeMessage(4,at,ve[H])}function le(me,W){var H=me.feature;H.id!==void 0&&W.writeVarintField(1,H.id),W.writeMessage(2,Ze,me),W.writeVarintField(3,H.type),W.writeMessage(4,et,H)}function Ze(me,W){var H=me.feature,ee=me.keys,de=me.values,ve=me.keycache,Se=me.valuecache;for(var Fe in H.properties){var be=H.properties[Fe],tt=ve[Fe];if(be!==null){tt===void 0&&(ee.push(Fe),ve[Fe]=tt=ee.length-1),W.writeVarint(tt);var ht=typeof be;ht!=="string"&&ht!=="boolean"&&ht!=="number"&&(be=JSON.stringify(be));var xe=ht+":"+be,ct=Se[xe];ct===void 0&&(de.push(be),Se[xe]=ct=de.length-1),W.writeVarint(ct)}}}function Ee(me,W){return(W<<3)+(7&me)}function qe(me){return me<<1^me>>31}function et(me,W){for(var H=me.loadGeometry(),ee=me.type,de=0,ve=0,Se=H.length,Fe=0;Fe<Se;Fe++){var be=H[Fe],tt=1;ee===1&&(tt=be.length),W.writeVarint(Ee(1,tt));for(var ht=ee===3?be.length-1:be.length,xe=0;xe<ht;xe++){xe===1&&ee!==1&&W.writeVarint(Ee(2,ht-1));var ct=be[xe].x-de,Rt=be[xe].y-ve;W.writeVarint(qe(ct)),W.writeVarint(qe(Rt)),de+=ct,ve+=Rt}ee===3&&W.writeVarint(Ee(7,1))}}function at(me,W){var H=typeof me;H==="string"?W.writeStringField(1,me):H==="boolean"?W.writeBooleanField(7,me):H==="number"&&(me%1!=0?W.writeDoubleField(3,me):me<0?W.writeSVarintField(6,me):W.writeVarintField(5,me))}R.exports=re,R.exports.fromVectorTileJs=re,R.exports.fromGeojsonVt=function(me,W){W=W||{};var H={};for(var ee in me)H[ee]=new J(me[ee].features,W),H[ee].name=ee,H[ee].version=W.version,H[ee].extent=W.extent;return re({layers:H})},R.exports.GeoJSONWrapper=J;var Be=a.by(R.exports);const Me={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:me=>me},Ge=Math.fround||(Le=new Float32Array(1),me=>(Le[0]=+me,Le[0]));var Le;const Ie=3,Oe=5,Re=6;class nt{constructor(W){this.options=Object.assign(Object.create(Me),W),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(W){const{log:H,minZoom:ee,maxZoom:de}=this.options;H&&console.time("total time");const ve=`prepare ${W.length} points`;H&&console.time(ve),this.points=W;const Se=[];for(let be=0;be<W.length;be++){const tt=W[be];if(!tt.geometry)continue;const[ht,xe]=tt.geometry.coordinates,ct=Ge(Xe(ht)),Rt=Ge(_t(xe));Se.push(ct,Rt,1/0,be,-1,1),this.options.reduce&&Se.push(0)}let Fe=this.trees[de+1]=this._createTree(Se);H&&console.timeEnd(ve);for(let be=de;be>=ee;be--){const tt=+Date.now();Fe=this.trees[be]=this._createTree(this._cluster(Fe,be)),H&&console.log("z%d: %d clusters in %dms",be,Fe.numItems,+Date.now()-tt)}return H&&console.timeEnd("total time"),this}getClusters(W,H){let ee=((W[0]+180)%360+360)%360-180;const de=Math.max(-90,Math.min(90,W[1]));let ve=W[2]===180?180:((W[2]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)ee=-180,ve=180;else if(ee>ve){const xe=this.getClusters([ee,de,180,Se],H),ct=this.getClusters([-180,de,ve,Se],H);return xe.concat(ct)}const Fe=this.trees[this._limitZoom(H)],be=Fe.range(Xe(ee),_t(Se),Xe(ve),_t(de)),tt=Fe.data,ht=[];for(const xe of be){const ct=this.stride*xe;ht.push(tt[ct+Oe]>1?ze(tt,ct,this.clusterProps):this.points[tt[ct+Ie]])}return ht}getChildren(W){const H=this._getOriginId(W),ee=this._getOriginZoom(W),de="No cluster with the specified id.",ve=this.trees[ee];if(!ve)throw new Error(de);const Se=ve.data;if(H*this.stride>=Se.length)throw new Error(de);const Fe=this.options.radius/(this.options.extent*Math.pow(2,ee-1)),be=ve.within(Se[H*this.stride],Se[H*this.stride+1],Fe),tt=[];for(const ht of be){const xe=ht*this.stride;Se[xe+4]===W&&tt.push(Se[xe+Oe]>1?ze(Se,xe,this.clusterProps):this.points[Se[xe+Ie]])}if(tt.length===0)throw new Error(de);return tt}getLeaves(W,H,ee){const de=[];return this._appendLeaves(de,W,H=H||10,ee=ee||0,0),de}getTile(W,H,ee){const de=this.trees[this._limitZoom(W)],ve=Math.pow(2,W),{extent:Se,radius:Fe}=this.options,be=Fe/Se,tt=(ee-be)/ve,ht=(ee+1+be)/ve,xe={features:[]};return this._addTileFeatures(de.range((H-be)/ve,tt,(H+1+be)/ve,ht),de.data,H,ee,ve,xe),H===0&&this._addTileFeatures(de.range(1-be/ve,tt,1,ht),de.data,ve,ee,ve,xe),H===ve-1&&this._addTileFeatures(de.range(0,tt,be/ve,ht),de.data,-1,ee,ve,xe),xe.features.length?xe:null}getClusterExpansionZoom(W){let H=this._getOriginZoom(W)-1;for(;H<=this.options.maxZoom;){const ee=this.getChildren(W);if(H++,ee.length!==1)break;W=ee[0].properties.cluster_id}return H}_appendLeaves(W,H,ee,de,ve){const Se=this.getChildren(H);for(const Fe of Se){const be=Fe.properties;if(be&&be.cluster?ve+be.point_count<=de?ve+=be.point_count:ve=this._appendLeaves(W,be.cluster_id,ee,de,ve):ve<de?ve++:W.push(Fe),W.length===ee)break}return ve}_createTree(W){const H=new a.av(W.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ee=0;ee<W.length;ee+=this.stride)H.add(W[ee],W[ee+1]);return H.finish(),H.data=W,H}_addTileFeatures(W,H,ee,de,ve,Se){for(const Fe of W){const be=Fe*this.stride,tt=H[be+Oe]>1;let ht,xe,ct;if(tt)ht=rt(H,be,this.clusterProps),xe=H[be],ct=H[be+1];else{const Nr=this.points[H[be+Ie]];ht=Nr.properties;const[Mr,Kr]=Nr.geometry.coordinates;xe=Xe(Mr),ct=_t(Kr)}const Rt={type:1,geometry:[[Math.round(this.options.extent*(xe*ve-ee)),Math.round(this.options.extent*(ct*ve-de))]],tags:ht};let rr;rr=tt||this.options.generateId?H[be+Ie]:this.points[H[be+Ie]].id,rr!==void 0&&(Rt.id=rr),Se.features.push(Rt)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(Math.floor(+W),this.options.maxZoom+1))}_cluster(W,H){const{radius:ee,extent:de,reduce:ve,minPoints:Se}=this.options,Fe=ee/(de*Math.pow(2,H)),be=W.data,tt=[],ht=this.stride;for(let xe=0;xe<be.length;xe+=ht){if(be[xe+2]<=H)continue;be[xe+2]=H;const ct=be[xe],Rt=be[xe+1],rr=W.within(be[xe],be[xe+1],Fe),Nr=be[xe+Oe];let Mr=Nr;for(const Kr of rr){const Dr=Kr*ht;be[Dr+2]>H&&(Mr+=be[Dr+Oe])}if(Mr>Nr&&Mr>=Se){let Kr,Dr=ct*Nr,hi=Rt*Nr,Yn=-1;const Rr=((xe/ht|0)<<5)+(H+1)+this.points.length;for(const mn of rr){const Fn=mn*ht;if(be[Fn+2]<=H)continue;be[Fn+2]=H;const Pi=be[Fn+Oe];Dr+=be[Fn]*Pi,hi+=be[Fn+1]*Pi,be[Fn+4]=Rr,ve&&(Kr||(Kr=this._map(be,xe,!0),Yn=this.clusterProps.length,this.clusterProps.push(Kr)),ve(Kr,this._map(be,Fn)))}be[xe+4]=Rr,tt.push(Dr/Mr,hi/Mr,1/0,Rr,-1,Mr),ve&&tt.push(Yn)}else{for(let Kr=0;Kr<ht;Kr++)tt.push(be[xe+Kr]);if(Mr>1)for(const Kr of rr){const Dr=Kr*ht;if(!(be[Dr+2]<=H)){be[Dr+2]=H;for(let hi=0;hi<ht;hi++)tt.push(be[Dr+hi])}}}}return tt}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,H,ee){if(W[H+Oe]>1){const Se=this.clusterProps[W[H+Re]];return ee?Object.assign({},Se):Se}const de=this.points[W[H+Ie]].properties,ve=this.options.map(de);return ee&&ve===de?Object.assign({},ve):ve}}function ze(me,W,H){return{type:"Feature",id:me[W+Ie],properties:rt(me,W,H),geometry:{type:"Point",coordinates:[(ee=me[W],360*(ee-.5)),Mt(me[W+1])]}};var ee}function rt(me,W,H){const ee=me[W+Oe],de=ee>=1e4?`${Math.round(ee/1e3)}k`:ee>=1e3?Math.round(ee/100)/10+"k":ee,ve=me[W+Re],Se=ve===-1?{}:Object.assign({},H[ve]);return Object.assign(Se,{cluster:!0,cluster_id:me[W+Ie],point_count:ee,point_count_abbreviated:de})}function Xe(me){return me/360+.5}function _t(me){const W=Math.sin(me*Math.PI/180),H=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return H<0?0:H>1?1:H}function Mt(me){const W=(180-360*me)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function Et(me,W,H,ee){let de=ee;const ve=W+(H-W>>1);let Se,Fe=H-W;const be=me[W],tt=me[W+1],ht=me[H],xe=me[H+1];for(let ct=W+3;ct<H;ct+=3){const Rt=yt(me[ct],me[ct+1],be,tt,ht,xe);if(Rt>de)Se=ct,de=Rt;else if(Rt===de){const rr=Math.abs(ct-ve);rr<Fe&&(Se=ct,Fe=rr)}}de>ee&&(Se-W>3&&Et(me,W,Se,ee),me[Se+2]=de,H-Se>3&&Et(me,Se,H,ee))}function yt(me,W,H,ee,de,ve){let Se=de-H,Fe=ve-ee;if(Se!==0||Fe!==0){const be=((me-H)*Se+(W-ee)*Fe)/(Se*Se+Fe*Fe);be>1?(H=de,ee=ve):be>0&&(H+=Se*be,ee+=Fe*be)}return Se=me-H,Fe=W-ee,Se*Se+Fe*Fe}function Je(me,W,H,ee){const de={id:me??null,type:W,geometry:H,tags:ee,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(W==="Point"||W==="MultiPoint"||W==="LineString")Kt(de,H);else if(W==="Polygon")Kt(de,H[0]);else if(W==="MultiLineString")for(const ve of H)Kt(de,ve);else if(W==="MultiPolygon")for(const ve of H)Kt(de,ve[0]);return de}function Kt(me,W){for(let H=0;H<W.length;H+=3)me.minX=Math.min(me.minX,W[H]),me.minY=Math.min(me.minY,W[H+1]),me.maxX=Math.max(me.maxX,W[H]),me.maxY=Math.max(me.maxY,W[H+1])}function vt(me,W,H,ee){if(!W.geometry)return;const de=W.geometry.coordinates;if(de&&de.length===0)return;const ve=W.geometry.type,Se=Math.pow(H.tolerance/((1<<H.maxZoom)*H.extent),2);let Fe=[],be=W.id;if(H.promoteId?be=W.properties[H.promoteId]:H.generateId&&(be=ee||0),ve==="Point")st(de,Fe);else if(ve==="MultiPoint")for(const tt of de)st(tt,Fe);else if(ve==="LineString")Te(de,Fe,Se,!1);else if(ve==="MultiLineString"){if(H.lineMetrics){for(const tt of de)Fe=[],Te(tt,Fe,Se,!1),me.push(Je(be,"LineString",Fe,W.properties));return}lt(de,Fe,Se,!1)}else if(ve==="Polygon")lt(de,Fe,Se,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(const tt of W.geometry.geometries)vt(me,{id:be,geometry:tt,properties:W.properties},H,ee);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const tt of de){const ht=[];lt(tt,ht,Se,!0),Fe.push(ht)}}me.push(Je(be,ve,Fe,W.properties))}function st(me,W){W.push(Nt(me[0]),Tt(me[1]),0)}function Te(me,W,H,ee){let de,ve,Se=0;for(let be=0;be<me.length;be++){const tt=Nt(me[be][0]),ht=Tt(me[be][1]);W.push(tt,ht,0),be>0&&(Se+=ee?(de*ht-tt*ve)/2:Math.sqrt(Math.pow(tt-de,2)+Math.pow(ht-ve,2))),de=tt,ve=ht}const Fe=W.length-3;W[2]=1,Et(W,0,Fe,H),W[Fe+2]=1,W.size=Math.abs(Se),W.start=0,W.end=W.size}function lt(me,W,H,ee){for(let de=0;de<me.length;de++){const ve=[];Te(me[de],ve,H,ee),W.push(ve)}}function Nt(me){return me/360+.5}function Tt(me){const W=Math.sin(me*Math.PI/180),H=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return H<0?0:H>1?1:H}function Vt(me,W,H,ee,de,ve,Se,Fe){if(ee/=W,ve>=(H/=W)&&Se<ee)return me;if(Se<H||ve>=ee)return null;const be=[];for(const tt of me){const ht=tt.geometry;let xe=tt.type;const ct=de===0?tt.minX:tt.minY,Rt=de===0?tt.maxX:tt.maxY;if(ct>=H&&Rt<ee){be.push(tt);continue}if(Rt<H||ct>=ee)continue;let rr=[];if(xe==="Point"||xe==="MultiPoint")tn(ht,rr,H,ee,de);else if(xe==="LineString")hn(ht,rr,H,ee,de,!1,Fe.lineMetrics);else if(xe==="MultiLineString")kn(ht,rr,H,ee,de,!1);else if(xe==="Polygon")kn(ht,rr,H,ee,de,!0);else if(xe==="MultiPolygon")for(const Nr of ht){const Mr=[];kn(Nr,Mr,H,ee,de,!0),Mr.length&&rr.push(Mr)}if(rr.length){if(Fe.lineMetrics&&xe==="LineString"){for(const Nr of rr)be.push(Je(tt.id,xe,Nr,tt.tags));continue}xe!=="LineString"&&xe!=="MultiLineString"||(rr.length===1?(xe="LineString",rr=rr[0]):xe="MultiLineString"),xe!=="Point"&&xe!=="MultiPoint"||(xe=rr.length===3?"Point":"MultiPoint"),be.push(Je(tt.id,xe,rr,tt.tags))}}return be.length?be:null}function tn(me,W,H,ee,de){for(let ve=0;ve<me.length;ve+=3){const Se=me[ve+de];Se>=H&&Se<=ee&&yn(W,me[ve],me[ve+1],me[ve+2])}}function hn(me,W,H,ee,de,ve,Se){let Fe=on(me);const be=de===0?ui:Oi;let tt,ht,xe=me.start;for(let Mr=0;Mr<me.length-3;Mr+=3){const Kr=me[Mr],Dr=me[Mr+1],hi=me[Mr+2],Yn=me[Mr+3],Rr=me[Mr+4],mn=de===0?Kr:Dr,Fn=de===0?Yn:Rr;let Pi=!1;Se&&(tt=Math.sqrt(Math.pow(Kr-Yn,2)+Math.pow(Dr-Rr,2))),mn<H?Fn>H&&(ht=be(Fe,Kr,Dr,Yn,Rr,H),Se&&(Fe.start=xe+tt*ht)):mn>ee?Fn<ee&&(ht=be(Fe,Kr,Dr,Yn,Rr,ee),Se&&(Fe.start=xe+tt*ht)):yn(Fe,Kr,Dr,hi),Fn<H&&mn>=H&&(ht=be(Fe,Kr,Dr,Yn,Rr,H),Pi=!0),Fn>ee&&mn<=ee&&(ht=be(Fe,Kr,Dr,Yn,Rr,ee),Pi=!0),!ve&&Pi&&(Se&&(Fe.end=xe+tt*ht),W.push(Fe),Fe=on(me)),Se&&(xe+=tt)}let ct=me.length-3;const Rt=me[ct],rr=me[ct+1],Nr=de===0?Rt:rr;Nr>=H&&Nr<=ee&&yn(Fe,Rt,rr,me[ct+2]),ct=Fe.length-3,ve&&ct>=3&&(Fe[ct]!==Fe[0]||Fe[ct+1]!==Fe[1])&&yn(Fe,Fe[0],Fe[1],Fe[2]),Fe.length&&W.push(Fe)}function on(me){const W=[];return W.size=me.size,W.start=me.start,W.end=me.end,W}function kn(me,W,H,ee,de,ve){for(const Se of me)hn(Se,W,H,ee,de,ve,!1)}function yn(me,W,H,ee){me.push(W,H,ee)}function ui(me,W,H,ee,de,ve){const Se=(ve-W)/(ee-W);return yn(me,ve,H+(de-H)*Se,1),Se}function Oi(me,W,H,ee,de,ve){const Se=(ve-H)/(de-H);return yn(me,W+(ee-W)*Se,ve,1),Se}function Qe(me,W){const H=[];for(let ee=0;ee<me.length;ee++){const de=me[ee],ve=de.type;let Se;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")Se=Br(de.geometry,W);else if(ve==="MultiLineString"||ve==="Polygon"){Se=[];for(const Fe of de.geometry)Se.push(Br(Fe,W))}else if(ve==="MultiPolygon"){Se=[];for(const Fe of de.geometry){const be=[];for(const tt of Fe)be.push(Br(tt,W));Se.push(be)}}H.push(Je(de.id,ve,Se,de.tags))}return H}function Br(me,W){const H=[];H.size=me.size,me.start!==void 0&&(H.start=me.start,H.end=me.end);for(let ee=0;ee<me.length;ee+=3)H.push(me[ee]+W,me[ee+1],me[ee+2]);return H}function kt(me,W){if(me.transformed)return me;const H=1<<me.z,ee=me.x,de=me.y;for(const ve of me.features){const Se=ve.geometry,Fe=ve.type;if(ve.geometry=[],Fe===1)for(let be=0;be<Se.length;be+=2)ve.geometry.push(Wt(Se[be],Se[be+1],W,H,ee,de));else for(let be=0;be<Se.length;be++){const tt=[];for(let ht=0;ht<Se[be].length;ht+=2)tt.push(Wt(Se[be][ht],Se[be][ht+1],W,H,ee,de));ve.geometry.push(tt)}}return me.transformed=!0,me}function Wt(me,W,H,ee,de,ve){return[Math.round(H*(me*ee-de)),Math.round(H*(W*ee-ve))]}function wn(me,W,H,ee,de){const ve=W===de.maxZoom?0:de.tolerance/((1<<W)*de.extent),Se={features:[],numPoints:0,numSimplified:0,numFeatures:me.length,source:null,x:H,y:ee,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Fe of me)xt(Se,Fe,ve,de);return Se}function xt(me,W,H,ee){const de=W.geometry,ve=W.type,Se=[];if(me.minX=Math.min(me.minX,W.minX),me.minY=Math.min(me.minY,W.minY),me.maxX=Math.max(me.maxX,W.maxX),me.maxY=Math.max(me.maxY,W.maxY),ve==="Point"||ve==="MultiPoint")for(let Fe=0;Fe<de.length;Fe+=3)Se.push(de[Fe],de[Fe+1]),me.numPoints++,me.numSimplified++;else if(ve==="LineString")yr(Se,de,me,H,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(let Fe=0;Fe<de.length;Fe++)yr(Se,de[Fe],me,H,ve==="Polygon",Fe===0);else if(ve==="MultiPolygon")for(let Fe=0;Fe<de.length;Fe++){const be=de[Fe];for(let tt=0;tt<be.length;tt++)yr(Se,be[tt],me,H,!0,tt===0)}if(Se.length){let Fe=W.tags||null;if(ve==="LineString"&&ee.lineMetrics){Fe={};for(const tt in W.tags)Fe[tt]=W.tags[tt];Fe.mapbox_clip_start=de.start/de.size,Fe.mapbox_clip_end=de.end/de.size}const be={geometry:Se,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:Fe};W.id!==null&&(be.id=W.id),me.features.push(be)}}function yr(me,W,H,ee,de,ve){const Se=ee*ee;if(ee>0&&W.size<(de?Se:ee))return void(H.numPoints+=W.length/3);const Fe=[];for(let be=0;be<W.length;be+=3)(ee===0||W[be+2]>Se)&&(H.numSimplified++,Fe.push(W[be],W[be+1])),H.numPoints++;de&&function(be,tt){let ht=0;for(let xe=0,ct=be.length,Rt=ct-2;xe<ct;Rt=xe,xe+=2)ht+=(be[xe]-be[Rt])*(be[xe+1]+be[Rt+1]);if(ht>0===tt)for(let xe=0,ct=be.length;xe<ct/2;xe+=2){const Rt=be[xe],rr=be[xe+1];be[xe]=be[ct-2-xe],be[xe+1]=be[ct-1-xe],be[ct-2-xe]=Rt,be[ct-1-xe]=rr}}(Fe,ve),me.push(Fe)}const Jt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Zn{constructor(W,H){const ee=(H=this.options=function(ve,Se){for(const Fe in Se)ve[Fe]=Se[Fe];return ve}(Object.create(Jt),H)).debug;if(ee&&console.time("preprocess data"),H.maxZoom<0||H.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(H.promoteId&&H.generateId)throw new Error("promoteId and generateId cannot be used together.");let de=function(ve,Se){const Fe=[];if(ve.type==="FeatureCollection")for(let be=0;be<ve.features.length;be++)vt(Fe,ve.features[be],Se,be);else vt(Fe,ve.type==="Feature"?ve:{geometry:ve},Se);return Fe}(W,H);this.tiles={},this.tileCoords=[],ee&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",H.indexMaxZoom,H.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),de=function(ve,Se){const Fe=Se.buffer/Se.extent;let be=ve;const tt=Vt(ve,1,-1-Fe,Fe,0,-1,2,Se),ht=Vt(ve,1,1-Fe,2+Fe,0,-1,2,Se);return(tt||ht)&&(be=Vt(ve,1,-Fe,1+Fe,0,-1,2,Se)||[],tt&&(be=Qe(tt,1).concat(be)),ht&&(be=be.concat(Qe(ht,-1)))),be}(de,H),de.length&&this.splitTile(de,0,0,0),ee&&(de.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(W,H,ee,de,ve,Se,Fe){const be=[W,H,ee,de],tt=this.options,ht=tt.debug;for(;be.length;){de=be.pop(),ee=be.pop(),H=be.pop(),W=be.pop();const xe=1<<H,ct=vi(H,ee,de);let Rt=this.tiles[ct];if(!Rt&&(ht>1&&console.time("creation"),Rt=this.tiles[ct]=wn(W,H,ee,de,tt),this.tileCoords.push({z:H,x:ee,y:de}),ht)){ht>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",H,ee,de,Rt.numFeatures,Rt.numPoints,Rt.numSimplified),console.timeEnd("creation"));const Pi=`z${H}`;this.stats[Pi]=(this.stats[Pi]||0)+1,this.total++}if(Rt.source=W,ve==null){if(H===tt.indexMaxZoom||Rt.numPoints<=tt.indexMaxPoints)continue}else{if(H===tt.maxZoom||H===ve)continue;if(ve!=null){const Pi=ve-H;if(ee!==Se>>Pi||de!==Fe>>Pi)continue}}if(Rt.source=null,W.length===0)continue;ht>1&&console.time("clipping");const rr=.5*tt.buffer/tt.extent,Nr=.5-rr,Mr=.5+rr,Kr=1+rr;let Dr=null,hi=null,Yn=null,Rr=null,mn=Vt(W,xe,ee-rr,ee+Mr,0,Rt.minX,Rt.maxX,tt),Fn=Vt(W,xe,ee+Nr,ee+Kr,0,Rt.minX,Rt.maxX,tt);W=null,mn&&(Dr=Vt(mn,xe,de-rr,de+Mr,1,Rt.minY,Rt.maxY,tt),hi=Vt(mn,xe,de+Nr,de+Kr,1,Rt.minY,Rt.maxY,tt),mn=null),Fn&&(Yn=Vt(Fn,xe,de-rr,de+Mr,1,Rt.minY,Rt.maxY,tt),Rr=Vt(Fn,xe,de+Nr,de+Kr,1,Rt.minY,Rt.maxY,tt),Fn=null),ht>1&&console.timeEnd("clipping"),be.push(Dr||[],H+1,2*ee,2*de),be.push(hi||[],H+1,2*ee,2*de+1),be.push(Yn||[],H+1,2*ee+1,2*de),be.push(Rr||[],H+1,2*ee+1,2*de+1)}}getTile(W,H,ee){W=+W,H=+H,ee=+ee;const de=this.options,{extent:ve,debug:Se}=de;if(W<0||W>24)return null;const Fe=1<<W,be=vi(W,H=H+Fe&Fe-1,ee);if(this.tiles[be])return kt(this.tiles[be],ve);Se>1&&console.log("drilling down to z%d-%d-%d",W,H,ee);let tt,ht=W,xe=H,ct=ee;for(;!tt&&ht>0;)ht--,xe>>=1,ct>>=1,tt=this.tiles[vi(ht,xe,ct)];return tt&&tt.source?(Se>1&&(console.log("found parent tile z%d-%d-%d",ht,xe,ct),console.time("drilling down")),this.splitTile(tt.source,ht,xe,ct,W,H,ee),Se>1&&console.timeEnd("drilling down"),this.tiles[be]?kt(this.tiles[be],ve):null):null}}function vi(me,W,H){return 32*((1<<me)*H+W)+me}function pr(me,W){return W?me.properties[W]:me.id}function Ii(me,W){if(me==null)return!0;if(me.type==="Feature")return pr(me,W)!=null;if(me.type==="FeatureCollection"){const H=new Set;for(const ee of me.features){const de=pr(ee,W);if(de==null||H.has(de))return!1;H.add(de)}return!0}return!1}function xs(me,W){const H=new Map;if(me!=null)if(me.type==="Feature")H.set(pr(me,W),me);else for(const ee of me.features)H.set(pr(ee,W),ee);return H}class Di extends b{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(W,H){return a._(this,void 0,void 0,function*(){const ee=W.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const de=this._geoJSONIndex.getTile(ee.z,ee.x,ee.y);if(!de)return null;const ve=new class{constructor(Fe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.X,this.length=Fe.length,this._features=Fe}feature(Fe){return new class{constructor(be){this._feature=be,this.extent=a.X,this.type=be.type,this.properties=be.tags,"id"in be&&!isNaN(be.id)&&(this.id=parseInt(be.id,10))}loadGeometry(){if(this._feature.type===1){const be=[];for(const tt of this._feature.geometry)be.push([new a.P(tt[0],tt[1])]);return be}{const be=[];for(const tt of this._feature.geometry){const ht=[];for(const xe of tt)ht.push(new a.P(xe[0],xe[1]));be.push(ht)}return be}}toGeoJSON(be,tt,ht){return $.call(this,be,tt,ht)}}(this._features[Fe])}}(de.features);let Se=Be(ve);return Se.byteOffset===0&&Se.byteLength===Se.buffer.byteLength||(Se=new Uint8Array(Se)),{vectorTile:ve,rawData:Se.buffer}})}loadData(W){return a._(this,void 0,void 0,function*(){var H;(H=this._pendingRequest)===null||H===void 0||H.abort();const ee=!!(W&&W.request&&W.request.collectResourceTiming)&&new a.bv(W.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(W,this._pendingRequest),this._geoJSONIndex=W.cluster?new nt(function({superclusterOptions:Se,clusterProperties:Fe}){if(!Fe||!Se)return Se;const be={},tt={},ht={accumulated:null,zoom:0},xe={properties:null},ct=Object.keys(Fe);for(const Rt of ct){const[rr,Nr]=Fe[Rt],Mr=a.bC(Nr),Kr=a.bC(typeof rr=="string"?[rr,["accumulated"],["get",Rt]]:rr);be[Rt]=Mr.value,tt[Rt]=Kr.value}return Se.map=Rt=>{xe.properties=Rt;const rr={};for(const Nr of ct)rr[Nr]=be[Nr].evaluate(ht,xe);return rr},Se.reduce=(Rt,rr)=>{xe.properties=rr;for(const Nr of ct)ht.accumulated=Rt[Nr],Rt[Nr]=tt[Nr].evaluate(ht,xe)},Se}(W)).load((yield this._pendingData).features):(de=yield this._pendingData,new Zn(de,W.geojsonVtOptions)),this.loaded={};const ve={};if(ee){const Se=ee.finish();Se&&(ve.resourceTiming={},ve.resourceTiming[W.source]=JSON.parse(JSON.stringify(Se)))}return ve}catch(ve){if(delete this._pendingRequest,a.bB(ve))return{abandoned:!0};throw ve}var de})}getData(){return a._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(W){const H=this.loaded;return H&&H[W.uid]?super.reloadTile(W):this.loadTile(W)}loadAndProcessGeoJSON(W,H){return a._(this,void 0,void 0,function*(){let ee=yield this.loadGeoJSON(W,H);if(delete this._pendingRequest,typeof ee!="object")throw new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`);if(E(ee,!0),W.filter){const de=a.bC(W.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(de.result==="error")throw new Error(de.value.map(Se=>`${Se.key}: ${Se.message}`).join(", "));ee={type:"FeatureCollection",features:ee.features.filter(Se=>de.value.evaluate({zoom:0},Se))}}return ee})}loadGeoJSON(W,H){return a._(this,void 0,void 0,function*(){const{promoteId:ee}=W;if(W.request){const de=yield a.h(W.request,H);return this._dataUpdateable=Ii(de.data,ee)?xs(de.data,ee):void 0,de.data}if(typeof W.data=="string")try{const de=JSON.parse(W.data);return this._dataUpdateable=Ii(de,ee)?xs(de,ee):void 0,de}catch{throw new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`)}if(!W.dataDiff)throw new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${W.source}`);return function(de,ve,Se){var Fe,be,tt,ht;if(ve.removeAll&&de.clear(),ve.remove)for(const xe of ve.remove)de.delete(xe);if(ve.add)for(const xe of ve.add){const ct=pr(xe,Se);ct!=null&&de.set(ct,xe)}if(ve.update)for(const xe of ve.update){let ct=de.get(xe.id);if(ct==null)continue;const Rt=!xe.removeAllProperties&&(((Fe=xe.removeProperties)===null||Fe===void 0?void 0:Fe.length)>0||((be=xe.addOrUpdateProperties)===null||be===void 0?void 0:be.length)>0);if((xe.newGeometry||xe.removeAllProperties||Rt)&&(ct=Object.assign({},ct),de.set(xe.id,ct),Rt&&(ct.properties=Object.assign({},ct.properties))),xe.newGeometry&&(ct.geometry=xe.newGeometry),xe.removeAllProperties)ct.properties={};else if(((tt=xe.removeProperties)===null||tt===void 0?void 0:tt.length)>0)for(const rr of xe.removeProperties)Object.prototype.hasOwnProperty.call(ct.properties,rr)&&delete ct.properties[rr];if(((ht=xe.addOrUpdateProperties)===null||ht===void 0?void 0:ht.length)>0)for(const{key:rr,value:Nr}of xe.addOrUpdateProperties)ct.properties[rr]=Nr}}(this._dataUpdateable,W.dataDiff,ee),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(W){return a._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(W){return this._geoJSONIndex.getClusterExpansionZoom(W.clusterId)}getClusterChildren(W){return this._geoJSONIndex.getChildren(W.clusterId)}getClusterLeaves(W){return this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset)}}class is{constructor(W){this.self=W,this.actor=new a.F(W),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(H,ee)=>{if(this.externalWorkerSourceTypes[H])throw new Error(`Worker source with name "${H}" already registered.`);this.externalWorkerSourceTypes[H]=ee},this.self.addProtocol=a.bi,this.self.removeProtocol=a.bj,this.self.registerRTLTextPlugin=H=>{if(a.bD.isParsed())throw new Error("RTL text plugin already registered.");a.bD.setMethods(H)},this.actor.registerMessageHandler("LDT",(H,ee)=>this._getDEMWorkerSource(H,ee.source).loadTile(ee)),this.actor.registerMessageHandler("RDT",(H,ee)=>a._(this,void 0,void 0,function*(){this._getDEMWorkerSource(H,ee.source).removeTile(ee)})),this.actor.registerMessageHandler("GCEZ",(H,ee)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(H,ee.type,ee.source).getClusterExpansionZoom(ee)})),this.actor.registerMessageHandler("GCC",(H,ee)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(H,ee.type,ee.source).getClusterChildren(ee)})),this.actor.registerMessageHandler("GCL",(H,ee)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(H,ee.type,ee.source).getClusterLeaves(ee)})),this.actor.registerMessageHandler("LD",(H,ee)=>this._getWorkerSource(H,ee.type,ee.source).loadData(ee)),this.actor.registerMessageHandler("GD",(H,ee)=>this._getWorkerSource(H,ee.type,ee.source).getData()),this.actor.registerMessageHandler("LT",(H,ee)=>this._getWorkerSource(H,ee.type,ee.source).loadTile(ee)),this.actor.registerMessageHandler("RT",(H,ee)=>this._getWorkerSource(H,ee.type,ee.source).reloadTile(ee)),this.actor.registerMessageHandler("AT",(H,ee)=>this._getWorkerSource(H,ee.type,ee.source).abortTile(ee)),this.actor.registerMessageHandler("RMT",(H,ee)=>this._getWorkerSource(H,ee.type,ee.source).removeTile(ee)),this.actor.registerMessageHandler("RS",(H,ee)=>a._(this,void 0,void 0,function*(){if(!this.workerSources[H]||!this.workerSources[H][ee.type]||!this.workerSources[H][ee.type][ee.source])return;const de=this.workerSources[H][ee.type][ee.source];delete this.workerSources[H][ee.type][ee.source],de.removeSource!==void 0&&de.removeSource(ee)})),this.actor.registerMessageHandler("RM",H=>a._(this,void 0,void 0,function*(){delete this.layerIndexes[H],delete this.availableImages[H],delete this.workerSources[H],delete this.demWorkerSources[H]})),this.actor.registerMessageHandler("SR",(H,ee)=>a._(this,void 0,void 0,function*(){this.referrer=ee})),this.actor.registerMessageHandler("SRPS",(H,ee)=>this._syncRTLPluginState(H,ee)),this.actor.registerMessageHandler("IS",(H,ee)=>a._(this,void 0,void 0,function*(){this.self.importScripts(ee)})),this.actor.registerMessageHandler("SI",(H,ee)=>this._setImages(H,ee)),this.actor.registerMessageHandler("UL",(H,ee)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(H).update(ee.layers,ee.removedIds)})),this.actor.registerMessageHandler("SL",(H,ee)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(H).replace(ee)}))}_setImages(W,H){return a._(this,void 0,void 0,function*(){this.availableImages[W]=H;for(const ee in this.workerSources[W]){const de=this.workerSources[W][ee];for(const ve in de)de[ve].availableImages=H}})}_syncRTLPluginState(W,H){return a._(this,void 0,void 0,function*(){if(a.bD.isParsed())return a.bD.getState();if(H.pluginStatus!=="loading")return a.bD.setState(H),H;const ee=H.pluginURL;if(this.self.importScripts(ee),a.bD.isParsed()){const de={pluginStatus:"loaded",pluginURL:ee};return a.bD.setState(de),de}throw a.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${ee}`)})}_getAvailableImages(W){let H=this.availableImages[W];return H||(H=[]),H}_getLayerIndex(W){let H=this.layerIndexes[W];return H||(H=this.layerIndexes[W]=new o),H}_getWorkerSource(W,H,ee){if(this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][H]||(this.workerSources[W][H]={}),!this.workerSources[W][H][ee]){const de={sendAsync:(ve,Se)=>(ve.targetMapId=W,this.actor.sendAsync(ve,Se))};switch(H){case"vector":this.workerSources[W][H][ee]=new b(de,this._getLayerIndex(W),this._getAvailableImages(W));break;case"geojson":this.workerSources[W][H][ee]=new Di(de,this._getLayerIndex(W),this._getAvailableImages(W));break;default:this.workerSources[W][H][ee]=new this.externalWorkerSourceTypes[H](de,this._getLayerIndex(W),this._getAvailableImages(W))}}return this.workerSources[W][H][ee]}_getDEMWorkerSource(W,H){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][H]||(this.demWorkerSources[W][H]=new w),this.demWorkerSources[W][H]}}return a.i(self)&&(self.worker=new is(self)),is}),i("index",["exports","./shared"],function(a,o){var d="4.7.1";let m,y;const b={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:k=>new Promise((l,p)=>{const x=requestAnimationFrame(l);k.signal.addEventListener("abort",()=>{cancelAnimationFrame(x),p(o.c())})}),getImageData(k,l=0){return this.getImageCanvasContext(k).getImageData(-l,-l,k.width+2*l,k.height+2*l)},getImageCanvasContext(k){const l=window.document.createElement("canvas"),p=l.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return l.width=k.width,l.height=k.height,p.drawImage(k,0,0,k.width,k.height),p},resolveURL:k=>(m||(m=document.createElement("a")),m.href=k,m.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(y==null&&(y=matchMedia("(prefers-reduced-motion: reduce)")),y.matches)}};class w{static testProp(l){if(!w.docStyle)return l[0];for(let p=0;p<l.length;p++)if(l[p]in w.docStyle)return l[p];return l[0]}static create(l,p,x){const v=window.document.createElement(l);return p!==void 0&&(v.className=p),x&&x.appendChild(v),v}static createNS(l,p){return window.document.createElementNS(l,p)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(l,p){l.style[w.transformProp]=p}static addEventListener(l,p,x,v={}){l.addEventListener(p,x,"passive"in v?v:v.capture)}static removeEventListener(l,p,x,v={}){l.removeEventListener(p,x,"passive"in v?v:v.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static getScale(l){const p=l.getBoundingClientRect();return{x:p.width/l.offsetWidth||1,y:p.height/l.offsetHeight||1,boundingClientRect:p}}static getPoint(l,p,x){const v=p.boundingClientRect;return new o.P((x.clientX-v.left)/p.x-l.clientLeft,(x.clientY-v.top)/p.y-l.clientTop)}static mousePos(l,p){const x=w.getScale(l);return w.getPoint(l,x,p)}static touchPos(l,p){const x=[],v=w.getScale(l);for(let S=0;S<p.length;S++)x.push(w.getPoint(l,v,p[S]));return x}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const O={supported:!1,testSupport:function(k){!$&&E&&(R?F(k):A=k)}};let A,E,$=!1,R=!1;function F(k){const l=k.createTexture();k.bindTexture(k.TEXTURE_2D,l);try{if(k.texImage2D(k.TEXTURE_2D,0,k.RGBA,k.RGBA,k.UNSIGNED_BYTE,E),k.isContextLost())return;O.supported=!0}catch{}k.deleteTexture(l),$=!0}var L;typeof document<"u"&&(E=document.createElement("img"),E.onload=()=>{A&&F(A),A=null,R=!0},E.onerror=()=>{$=!0,A=null},E.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(k){let l,p,x,v;k.resetRequestQueue=()=>{l=[],p=0,x=0,v={}},k.addThrottleControl=D=>{const V=x++;return v[V]=D,V},k.removeThrottleControl=D=>{delete v[D],j()},k.getImage=(D,V,G=!0)=>new Promise((X,ne)=>{O.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*"),o.e(D,{type:"image"}),l.push({abortController:V,requestParameters:D,supportImageRefresh:G,state:"queued",onError:ae=>{ne(ae)},onSuccess:ae=>{X(ae)}}),j()});const S=D=>o._(this,void 0,void 0,function*(){D.state="running";const{requestParameters:V,supportImageRefresh:G,onError:X,onSuccess:ne,abortController:ae}=D,ce=G===!1&&!o.i(self)&&!o.g(V.url)&&(!V.headers||Object.keys(V.headers).reduce((ke,Pe)=>ke&&Pe==="accept",!0));p++;const ye=ce?M(V,ae):o.m(V,ae);try{const ke=yield ye;delete D.abortController,D.state="completed",ke.data instanceof HTMLImageElement||o.b(ke.data)?ne(ke):ke.data&&ne({data:yield(we=ke.data,typeof createImageBitmap=="function"?o.d(we):o.f(we)),cacheControl:ke.cacheControl,expires:ke.expires})}catch(ke){delete D.abortController,X(ke)}finally{p--,j()}var we}),j=()=>{const D=(()=>{for(const V of Object.keys(v))if(v[V]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let V=p;V<D&&l.length>0;V++){const G=l.shift();G.abortController.signal.aborted?V--:S(G)}},M=(D,V)=>new Promise((G,X)=>{const ne=new Image,ae=D.url,ce=D.credentials;ce&&ce==="include"?ne.crossOrigin="use-credentials":(ce&&ce==="same-origin"||!o.s(ae))&&(ne.crossOrigin="anonymous"),V.signal.addEventListener("abort",()=>{ne.src="",X(o.c())}),ne.fetchPriority="high",ne.onload=()=>{ne.onerror=ne.onload=null,G({data:ne})},ne.onerror=()=>{ne.onerror=ne.onload=null,V.signal.aborted||X(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ne.src=ae})}(L||(L={})),L.resetRequestQueue();class U{constructor(l){this._transformRequestFn=l}transformRequest(l,p){return this._transformRequestFn&&this._transformRequestFn(l,p)||{url:l}}setTransformRequest(l){this._transformRequestFn=l}}function Q(k){var l=new o.A(3);return l[0]=k[0],l[1]=k[1],l[2]=k[2],l}var Y,Z=function(k,l,p){return k[0]=l[0]-p[0],k[1]=l[1]-p[1],k[2]=l[2]-p[2],k};Y=new o.A(3),o.A!=Float32Array&&(Y[0]=0,Y[1]=0,Y[2]=0);var J=function(k){var l=k[0],p=k[1];return l*l+p*p};function re(k){const l=[];if(typeof k=="string")l.push({id:"default",url:k});else if(k&&k.length>0){const p=[];for(const{id:x,url:v}of k){const S=`${x}${v}`;p.indexOf(S)===-1&&(p.push(S),l.push({id:x,url:v}))}}return l}function he(k,l,p){const x=k.split("?");return x[0]+=`${l}${p}`,x.join("?")}(function(){var k=new o.A(2);o.A!=Float32Array&&(k[0]=0,k[1]=0)})();class le{constructor(l,p,x,v){this.context=l,this.format=x,this.texture=l.gl.createTexture(),this.update(p,v)}update(l,p,x){const{width:v,height:S}=l,j=!(this.size&&this.size[0]===v&&this.size[1]===S||x),{context:M}=this,{gl:D}=M;if(this.useMipmap=!!(p&&p.useMipmap),D.bindTexture(D.TEXTURE_2D,this.texture),M.pixelStoreUnpackFlipY.set(!1),M.pixelStoreUnpack.set(1),M.pixelStoreUnpackPremultiplyAlpha.set(this.format===D.RGBA&&(!p||p.premultiply!==!1)),j)this.size=[v,S],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||o.b(l)?D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,D.UNSIGNED_BYTE,l):D.texImage2D(D.TEXTURE_2D,0,this.format,v,S,0,this.format,D.UNSIGNED_BYTE,l.data);else{const{x:V,y:G}=x||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||o.b(l)?D.texSubImage2D(D.TEXTURE_2D,0,V,G,D.RGBA,D.UNSIGNED_BYTE,l):D.texSubImage2D(D.TEXTURE_2D,0,V,G,v,S,D.RGBA,D.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&D.generateMipmap(D.TEXTURE_2D)}bind(l,p,x){const{context:v}=this,{gl:S}=v;S.bindTexture(S.TEXTURE_2D,this.texture),x!==S.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(x=S.LINEAR),l!==this.filter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,l),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,x||l),this.filter=l),p!==this.wrap&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,p),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,p),this.wrap=p)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function Ze(k){const{userImage:l}=k;return!!(l&&l.render&&l.render())&&(k.data.replace(new Uint8Array(l.data.buffer)),!0)}class Ee extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:p,promiseResolve:x}of this.requestors)x(this._getImagesForIds(p));this.requestors=[]}}getImage(l){const p=this.images[l];if(p&&!p.data&&p.spriteData){const x=p.spriteData;p.data=new o.R({width:x.width,height:x.height},x.context.getImageData(x.x,x.y,x.width,x.height).data),p.spriteData=null}return p}addImage(l,p){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,p)&&(this.images[l]=p)}_validate(l,p){let x=!0;const v=p.data||p.spriteData;return this._validateStretch(p.stretchX,v&&v.width)||(this.fire(new o.j(new Error(`Image "${l}" has invalid "stretchX" value`))),x=!1),this._validateStretch(p.stretchY,v&&v.height)||(this.fire(new o.j(new Error(`Image "${l}" has invalid "stretchY" value`))),x=!1),this._validateContent(p.content,p)||(this.fire(new o.j(new Error(`Image "${l}" has invalid "content" value`))),x=!1),x}_validateStretch(l,p){if(!l)return!0;let x=0;for(const v of l){if(v[0]<x||v[1]<v[0]||p<v[1])return!1;x=v[1]}return!0}_validateContent(l,p){if(!l)return!0;if(l.length!==4)return!1;const x=p.spriteData,v=x&&x.width||p.data.width,S=x&&x.height||p.data.height;return!(l[0]<0||v<l[0]||l[1]<0||S<l[1]||l[2]<0||v<l[2]||l[3]<0||S<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,p,x=!0){const v=this.getImage(l);if(x&&(v.data.width!==p.data.width||v.data.height!==p.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=v.version+1,this.images[l]=p,this.updatedImages[l]=!0}removeImage(l){const p=this.images[l];delete this.images[l],delete this.patterns[l],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l){return new Promise((p,x)=>{let v=!0;if(!this.isLoaded())for(const S of l)this.images[S]||(v=!1);this.isLoaded()||v?p(this._getImagesForIds(l)):this.requestors.push({ids:l,promiseResolve:p})})}_getImagesForIds(l){const p={};for(const x of l){let v=this.getImage(x);v||(this.fire(new o.k("styleimagemissing",{id:x})),v=this.getImage(x)),v?p[x]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,textFitWidth:v.textFitWidth,textFitHeight:v.textFitHeight,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:o.w(`Image "${x}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){const{width:l,height:p}=this.atlasImage;return{width:l,height:p}}getPattern(l){const p=this.patterns[l],x=this.getImage(l);if(!x)return null;if(p&&p.position.version===x.version)return p.position;if(p)p.position.version=x.version;else{const v={w:x.data.width+2,h:x.data.height+2,x:0,y:0},S=new o.I(v,x);this.patterns[l]={bin:v,position:S}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const p=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new le(l,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const S in this.patterns)l.push(this.patterns[S].bin);const{w:p,h:x}=o.p(l),v=this.atlasImage;v.resize({width:p||1,height:x||1});for(const S in this.patterns){const{bin:j}=this.patterns[S],M=j.x+1,D=j.y+1,V=this.getImage(S).data,G=V.width,X=V.height;o.R.copy(V,v,{x:0,y:0},{x:M,y:D},{width:G,height:X}),o.R.copy(V,v,{x:0,y:X-1},{x:M,y:D-1},{width:G,height:1}),o.R.copy(V,v,{x:0,y:0},{x:M,y:D+X},{width:G,height:1}),o.R.copy(V,v,{x:G-1,y:0},{x:M-1,y:D},{width:1,height:X}),o.R.copy(V,v,{x:0,y:0},{x:M+G,y:D},{width:1,height:X})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const p of l){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const x=this.getImage(p);x||o.w(`Image with ID: "${p}" was not found`),Ze(x)&&this.updateImage(p,x)}}}const qe=1e20;function et(k,l,p,x,v,S,j,M,D){for(let V=l;V<l+x;V++)at(k,p*S+V,S,v,j,M,D);for(let V=p;V<p+v;V++)at(k,V*S+l,1,x,j,M,D)}function at(k,l,p,x,v,S,j){S[0]=0,j[0]=-qe,j[1]=qe,v[0]=k[l];for(let M=1,D=0,V=0;M<x;M++){v[M]=k[l+M*p];const G=M*M;do{const X=S[D];V=(v[M]-v[X]+G-X*X)/(M-X)/2}while(V<=j[D]&&--D>-1);D++,S[D]=M,j[D]=V,j[D+1]=qe}for(let M=0,D=0;M<x;M++){for(;j[D+1]<M;)D++;const V=S[D],G=M-V;k[l+M*p]=v[V]+G*G}}class Be{constructor(l,p){this.requestManager=l,this.localIdeographFontFamily=p,this.entries={}}setURL(l){this.url=l}getGlyphs(l){return o._(this,void 0,void 0,function*(){const p=[];for(const S in l)for(const j of l[S])p.push(this._getAndCacheGlyphsPromise(S,j));const x=yield Promise.all(p),v={};for(const{stack:S,id:j,glyph:M}of x)v[S]||(v[S]={}),v[S][j]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics};return v})}_getAndCacheGlyphsPromise(l,p){return o._(this,void 0,void 0,function*(){let x=this.entries[l];x||(x=this.entries[l]={glyphs:{},requests:{},ranges:{}});let v=x.glyphs[p];if(v!==void 0)return{stack:l,id:p,glyph:v};if(v=this._tinySDF(x,l,p),v)return x.glyphs[p]=v,{stack:l,id:p,glyph:v};const S=Math.floor(p/256);if(256*S>65535)throw new Error("glyphs > 65535 not supported");if(x.ranges[S])return{stack:l,id:p,glyph:v};if(!this.url)throw new Error("glyphsUrl is not set");if(!x.requests[S]){const M=Be.loadGlyphRange(l,S,this.url,this.requestManager);x.requests[S]=M}const j=yield x.requests[S];for(const M in j)this._doesCharSupportLocalGlyph(+M)||(x.glyphs[+M]=j[+M]);return x.ranges[S]=!0,{stack:l,id:p,glyph:j[p]||null}})}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(l))}_tinySDF(l,p,x){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(x))return;let S=l.tinySDF;if(!S){let M="400";/bold/i.test(p)?M="900":/medium/i.test(p)?M="500":/light/i.test(p)&&(M="200"),S=l.tinySDF=new Be.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:v,fontWeight:M})}const j=S.draw(String.fromCharCode(x));return{id:x,bitmap:new o.o({width:j.width||60,height:j.height||60},j.data),metrics:{width:j.glyphWidth/2||24,height:j.glyphHeight/2||24,left:j.glyphLeft/2+.5||0,top:j.glyphTop/2-27.5||-8,advance:j.glyphAdvance/2||24,isDoubleResolution:!0}}}}Be.loadGlyphRange=function(k,l,p,x){return o._(this,void 0,void 0,function*(){const v=256*l,S=v+255,j=x.transformRequest(p.replace("{fontstack}",k).replace("{range}",`${v}-${S}`),"Glyphs"),M=yield o.l(j,new AbortController);if(!M||!M.data)throw new Error(`Could not load glyph range. range: ${l}, ${v}-${S}`);const D={};for(const V of o.n(M.data))D[V.id]=V;return D})},Be.TinySDF=class{constructor({fontSize:k=24,buffer:l=3,radius:p=8,cutoff:x=.25,fontFamily:v="sans-serif",fontWeight:S="normal",fontStyle:j="normal"}={}){this.buffer=l,this.cutoff=x,this.radius=p;const M=this.size=k+4*l,D=this._createCanvas(M),V=this.ctx=D.getContext("2d",{willReadFrequently:!0});V.font=`${j} ${S} ${k}px ${v}`,V.textBaseline="alphabetic",V.textAlign="left",V.fillStyle="black",this.gridOuter=new Float64Array(M*M),this.gridInner=new Float64Array(M*M),this.f=new Float64Array(M),this.z=new Float64Array(M+1),this.v=new Uint16Array(M)}_createCanvas(k){const l=document.createElement("canvas");return l.width=l.height=k,l}draw(k){const{width:l,actualBoundingBoxAscent:p,actualBoundingBoxDescent:x,actualBoundingBoxLeft:v,actualBoundingBoxRight:S}=this.ctx.measureText(k),j=Math.ceil(p),M=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(S-v))),D=Math.min(this.size-this.buffer,j+Math.ceil(x)),V=M+2*this.buffer,G=D+2*this.buffer,X=Math.max(V*G,0),ne=new Uint8ClampedArray(X),ae={data:ne,width:V,height:G,glyphWidth:M,glyphHeight:D,glyphTop:j,glyphLeft:0,glyphAdvance:l};if(M===0||D===0)return ae;const{ctx:ce,buffer:ye,gridInner:we,gridOuter:ke}=this;ce.clearRect(ye,ye,M,D),ce.fillText(k,ye,ye+j);const Pe=ce.getImageData(ye,ye,M,D);ke.fill(qe,0,X),we.fill(0,0,X);for(let fe=0;fe<D;fe++)for(let De=0;De<M;De++){const Ve=Pe.data[4*(fe*M+De)+3]/255;if(Ve===0)continue;const Ye=(fe+ye)*V+De+ye;if(Ve===1)ke[Ye]=0,we[Ye]=qe;else{const dt=.5-Ve;ke[Ye]=dt>0?dt*dt:0,we[Ye]=dt<0?dt*dt:0}}et(ke,0,0,V,G,V,this.f,this.v,this.z),et(we,ye,ye,M,D,V,this.f,this.v,this.z);for(let fe=0;fe<X;fe++){const De=Math.sqrt(ke[fe])-Math.sqrt(we[fe]);ne[fe]=Math.round(255-255*(De/this.radius+this.cutoff))}return ae}};class Me{constructor(){this.specification=o.v.light.position}possiblyEvaluate(l,p){return o.x(l.expression.evaluate(p))}interpolate(l,p,x){return{x:o.y.number(l.x,p.x,x),y:o.y.number(l.y,p.y,x),z:o.y.number(l.z,p.z,x)}}}let Ge;class Le extends o.E{constructor(l){super(),Ge=Ge||new o.q({anchor:new o.D(o.v.light.anchor),position:new Me,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(Ge),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,p={}){if(!this._validate(o.r,l,p))for(const x in l){const v=l[x];x.endsWith("-transition")?this._transitionable.setTransition(x.slice(0,-11),v):this._transitionable.setValue(x,v)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,p,x){return(!x||x.validate!==!1)&&o.t(this,l.call(o.u,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const Ie=new o.q({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class Oe extends o.E{constructor(l){super(),this._transitionable=new o.T(Ie),this.setSky(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.z(0))}setSky(l,p={}){if(!this._validate(o.B,l,p)){l||(l={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const x in l){const v=l[x];x.endsWith("-transition")?this._transitionable.setTransition(x.slice(0,-11),v):this._transitionable.setValue(x,v)}}}getSky(){return this._transitionable.serialize()}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,p,x={}){return(x==null?void 0:x.validate)!==!1&&o.t(this,l.call(o.u,o.e({value:p,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(l){return l<60?0:l<70?(l-60)/10:1}}class Re{constructor(l,p){this.width=l,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,p){const x=l.join(",")+String(p);return this.dashEntry[x]||(this.dashEntry[x]=this.addDash(l,p)),this.dashEntry[x]}getDashRanges(l,p,x){const v=[];let S=l.length%2==1?-l[l.length-1]*x:0,j=l[0]*x,M=!0;v.push({left:S,right:j,isDash:M,zeroLength:l[0]===0});let D=l[0];for(let V=1;V<l.length;V++){M=!M;const G=l[V];S=D*x,D+=G,j=D*x,v.push({left:S,right:j,isDash:M,zeroLength:G===0})}return v}addRoundDash(l,p,x){const v=p/2;for(let S=-x;S<=x;S++){const j=this.width*(this.nextRow+x+S);let M=0,D=l[M];for(let V=0;V<this.width;V++){V/D.right>1&&(D=l[++M]);const G=Math.abs(V-D.left),X=Math.abs(V-D.right),ne=Math.min(G,X);let ae;const ce=S/x*(v+1);if(D.isDash){const ye=v-Math.abs(ce);ae=Math.sqrt(ne*ne+ye*ye)}else ae=v-Math.sqrt(ne*ne+ce*ce);this.data[j+V]=Math.max(0,Math.min(255,ae+128))}}}addRegularDash(l){for(let M=l.length-1;M>=0;--M){const D=l[M],V=l[M+1];D.zeroLength?l.splice(M,1):V&&V.isDash===D.isDash&&(V.left=D.left,l.splice(M,1))}const p=l[0],x=l[l.length-1];p.isDash===x.isDash&&(p.left=x.left-this.width,x.right=p.right+this.width);const v=this.width*this.nextRow;let S=0,j=l[S];for(let M=0;M<this.width;M++){M/j.right>1&&(j=l[++S]);const D=Math.abs(M-j.left),V=Math.abs(M-j.right),G=Math.min(D,V);this.data[v+M]=Math.max(0,Math.min(255,(j.isDash?G:-G)+128))}}addDash(l,p){const x=p?7:0,v=2*x+1;if(this.nextRow+v>this.height)return o.w("LineAtlas out of space"),null;let S=0;for(let M=0;M<l.length;M++)S+=l[M];if(S!==0){const M=this.width/S,D=this.getDashRanges(l,this.width,M);p?this.addRoundDash(D,M,x):this.addRegularDash(D)}const j={y:(this.nextRow+x+.5)/this.height,height:2*x/this.height,width:S};return this.nextRow+=v,this.dirty=!0,j}bind(l){const p=l.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}const nt="maplibre_preloaded_worker_pool";class ze{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<ze.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[nt]}numActive(){return Object.keys(this.active).length}}const rt=Math.floor(b.hardwareConcurrency/2);let Xe,_t;function Mt(){return Xe||(Xe=new ze),Xe}ze.workerCount=o.C(globalThis)?Math.max(Math.min(rt,3),1):1;class Et{constructor(l,p){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=p;const x=this.workerPool.acquire(p);for(let v=0;v<x.length;v++){const S=new o.F(x[v],p);S.name=`Worker ${v}`,this.actors.push(S)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,p){const x=[];for(const v of this.actors)x.push(v.sendAsync({type:l,data:p}));return Promise.all(x)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach(p=>{p.remove()}),this.actors=[],l&&this.workerPool.release(this.id)}registerMessageHandler(l,p){for(const x of this.actors)x.registerMessageHandler(l,p)}}function yt(){return _t||(_t=new Et(Mt(),o.G),_t.registerMessageHandler("GR",(k,l,p)=>o.m(l,p))),_t}function Je(k,l){const p=o.H();return o.J(p,p,[1,1,0]),o.K(p,p,[.5*k.width,.5*k.height,1]),o.L(p,p,k.calculatePosMatrix(l.toUnwrapped()))}function Kt(k,l,p,x,v,S){const j=function(X,ne,ae){if(X)for(const ce of X){const ye=ne[ce];if(ye&&ye.source===ae&&ye.type==="fill-extrusion")return!0}else for(const ce in ne){const ye=ne[ce];if(ye.source===ae&&ye.type==="fill-extrusion")return!0}return!1}(v&&v.layers,l,k.id),M=S.maxPitchScaleFactor(),D=k.tilesIn(x,M,j);D.sort(vt);const V=[];for(const X of D)V.push({wrappedTileID:X.tileID.wrapped().key,queryResults:X.tile.queryRenderedFeatures(l,p,k._state,X.queryGeometry,X.cameraQueryGeometry,X.scale,v,S,M,Je(k.transform,X.tileID))});const G=function(X){const ne={},ae={};for(const ce of X){const ye=ce.queryResults,we=ce.wrappedTileID,ke=ae[we]=ae[we]||{};for(const Pe in ye){const fe=ye[Pe],De=ke[Pe]=ke[Pe]||{},Ve=ne[Pe]=ne[Pe]||[];for(const Ye of fe)De[Ye.featureIndex]||(De[Ye.featureIndex]=!0,Ve.push(Ye))}}return ne}(V);for(const X in G)G[X].forEach(ne=>{const ae=ne.feature,ce=k.getFeatureState(ae.layer["source-layer"],ae.id);ae.source=ae.layer.source,ae.layer["source-layer"]&&(ae.sourceLayer=ae.layer["source-layer"]),ae.state=ce});return G}function vt(k,l){const p=k.tileID,x=l.tileID;return p.overscaledZ-x.overscaledZ||p.canonical.y-x.canonical.y||p.wrap-x.wrap||p.canonical.x-x.canonical.x}function st(k,l,p){return o._(this,void 0,void 0,function*(){let x=k;if(k.url?x=(yield o.h(l.transformRequest(k.url,"Source"),p)).data:yield b.frameAsync(p),!x)return null;const v=o.M(o.e(x,k),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in x&&x.vector_layers&&(v.vectorLayerIds=x.vector_layers.map(S=>S.id)),v})}class Te{constructor(l,p){l&&(p?this.setSouthWest(l).setNorthEast(p):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof o.N?new o.N(l.lng,l.lat):o.N.convert(l),this}setSouthWest(l){return this._sw=l instanceof o.N?new o.N(l.lng,l.lat):o.N.convert(l),this}extend(l){const p=this._sw,x=this._ne;let v,S;if(l instanceof o.N)v=l,S=l;else{if(!(l instanceof Te))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(Te.convert(l)):this.extend(o.N.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(o.N.convert(l)):this;if(v=l._sw,S=l._ne,!v||!S)return this}return p||x?(p.lng=Math.min(v.lng,p.lng),p.lat=Math.min(v.lat,p.lat),x.lng=Math.max(S.lng,x.lng),x.lat=Math.max(S.lat,x.lat)):(this._sw=new o.N(v.lng,v.lat),this._ne=new o.N(S.lng,S.lat)),this}getCenter(){return new o.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.N(this.getWest(),this.getNorth())}getSouthEast(){return new o.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:p,lat:x}=o.N.convert(l);let v=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=x&&x<=this._ne.lat&&v}static convert(l){return l instanceof Te?l:l&&new Te(l)}static fromLngLat(l,p=0){const x=360*p/40075017,v=x/Math.cos(Math.PI/180*l.lat);return new Te(new o.N(l.lng-v,l.lat-x),new o.N(l.lng+v,l.lat+x))}adjustAntiMeridian(){const l=new o.N(this._sw.lng,this._sw.lat),p=new o.N(this._ne.lng,this._ne.lat);return new Te(l,l.lng>p.lng?new o.N(p.lng+360,p.lat):p)}}class lt{constructor(l,p,x){this.bounds=Te.convert(this.validateBounds(l)),this.minzoom=p||0,this.maxzoom=x||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const p=Math.pow(2,l.z),x=Math.floor(o.O(this.bounds.getWest())*p),v=Math.floor(o.Q(this.bounds.getNorth())*p),S=Math.ceil(o.O(this.bounds.getEast())*p),j=Math.ceil(o.Q(this.bounds.getSouth())*p);return l.x>=x&&l.x<S&&l.y>=v&&l.y<j}}class Nt extends o.E{constructor(l,p,x,v){if(super(),this.id=l,this.dispatcher=x,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.M(p,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield st(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l&&(o.e(this,l),l.bounds&&(this.tileBounds=new lt(l.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this.fire(new o.j(l))}})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.abort(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(l){return o._(this,void 0,void 0,function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),x={request:this.map._requestManager.transformRequest(p,"Tile"),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};x.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(l.actor&&l.state!=="expired"){if(l.state==="loading")return new Promise((S,j)=>{l.reloadPromise={resolve:S,reject:j}})}else l.actor=this.dispatcher.getActor(),v="LT";l.abortController=new AbortController;try{const S=yield l.actor.sendAsync({type:v,data:x},l.abortController);if(delete l.abortController,l.aborted)return;this._afterTileLoadWorkerResponse(l,S)}catch(S){if(delete l.abortController,l.aborted)return;if(S&&S.status!==404)throw S;this._afterTileLoadWorkerResponse(l,null)}})}_afterTileLoadWorkerResponse(l,p){if(p&&p.resourceTiming&&(l.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&l.setExpiryData(p),l.loadVectorData(p,this.map.painter),l.reloadPromise){const x=l.reloadPromise;l.reloadPromise=null,this.loadTile(l).then(x.resolve).catch(x.reject)}}abortTile(l){return o._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.actor&&(yield l.actor.sendAsync({type:"AT",data:{uid:l.uid,type:this.type,source:this.id}}))})}unloadTile(l){return o._(this,void 0,void 0,function*(){l.unloadVectorData(),l.actor&&(yield l.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Tt extends o.E{constructor(l,p,x,v){super(),this.id=l,this.dispatcher=x,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},p),o.e(this,o.M(p,["url","scheme","tileSize"]))}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield st(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,l&&(o.e(this,l),l.bounds&&(this.tileBounds=new lt(l.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this.fire(new o.j(l))}})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}serialize(){return o.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l){return o._(this,void 0,void 0,function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.abortController=new AbortController;try{const x=yield L.getImage(this.map._requestManager.transformRequest(p,"Tile"),l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(x&&x.data){this.map._refreshExpiredTiles&&x.cacheControl&&x.expires&&l.setExpiryData({cacheControl:x.cacheControl,expires:x.expires});const v=this.map.painter.context,S=v.gl,j=x.data;l.texture=this.map.painter.getTileTexture(j.width),l.texture?l.texture.update(j,{useMipmap:!0}):(l.texture=new le(v,j,S.RGBA,{useMipmap:!0}),l.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST)),l.state="loaded"}}catch(x){if(delete l.abortController,l.aborted)l.state="unloaded";else if(x)throw l.state="errored",x}})}abortTile(l){return o._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController)})}unloadTile(l){return o._(this,void 0,void 0,function*(){l.texture&&this.map.painter.saveTileTexture(l.texture)})}hasTransition(){return!1}}class Vt extends Tt{constructor(l,p,x,v){super(l,p,x,v),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(l){return o._(this,void 0,void 0,function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),x=this.map._requestManager.transformRequest(p,"Tile");l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.abortController=new AbortController;try{const v=yield L.getImage(x,l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(v&&v.data){const S=v.data;this.map._refreshExpiredTiles&&v.cacheControl&&v.expires&&l.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const j=o.b(S)&&o.U()?S:yield this.readImageNow(S),M={type:this.type,uid:l.uid,source:this.id,rawImageData:j,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!l.actor||l.state==="expired"){l.actor=this.dispatcher.getActor();const D=yield l.actor.sendAsync({type:"LDT",data:M});l.dem=D,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded"}}}catch(v){if(delete l.abortController,l.aborted)l.state="unloaded";else if(v)throw l.state="errored",v}})}readImageNow(l){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.V()){const p=l.width+2,x=l.height+2;try{return new o.R({width:p,height:x},yield o.W(l,-1,-1,p,x))}catch{}}return b.getImageData(l,1)})}_getNeighboringTiles(l){const p=l.canonical,x=Math.pow(2,p.z),v=(p.x-1+x)%x,S=p.x===0?l.wrap-1:l.wrap,j=(p.x+1+x)%x,M=p.x+1===x?l.wrap+1:l.wrap,D={};return D[new o.S(l.overscaledZ,S,p.z,v,p.y).key]={backfilled:!1},D[new o.S(l.overscaledZ,M,p.z,j,p.y).key]={backfilled:!1},p.y>0&&(D[new o.S(l.overscaledZ,S,p.z,v,p.y-1).key]={backfilled:!1},D[new o.S(l.overscaledZ,l.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},D[new o.S(l.overscaledZ,M,p.z,j,p.y-1).key]={backfilled:!1}),p.y+1<x&&(D[new o.S(l.overscaledZ,S,p.z,v,p.y+1).key]={backfilled:!1},D[new o.S(l.overscaledZ,l.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},D[new o.S(l.overscaledZ,M,p.z,j,p.y+1).key]={backfilled:!1}),D}unloadTile(l){return o._(this,void 0,void 0,function*(){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&(yield l.actor.sendAsync({type:"RDT",data:{type:this.type,uid:l.uid,source:this.id}}))})}}class tn extends o.E{constructor(l,p,x,v){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=x.getActor(),this.setEventedParent(v),this._data=p.data,this._options=o.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId;const S=o.X/this.tileSize;p.clusterMaxZoom!==void 0&&this.maxzoom<=p.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${p.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:(p.buffer!==void 0?p.buffer:128)*S,tolerance:(p.tolerance!==void 0?p.tolerance:.375)*S,extent:o.X,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:p.clusterMaxZoom!==void 0?p.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,p.clusterMinPoints||2),extent:o.X,radius:(p.clusterRadius||50)*S,log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData(),this}updateData(l){return this._updateWorkerData(l),this}getData(){return o._(this,void 0,void 0,function*(){const l=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:l})})}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l&&(l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=l.clusterRadius),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=l.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(l){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:l,source:this.id}})}getClusterChildren(l){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:l,source:this.id}})}getClusterLeaves(l,p,x){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:l,limit:p,offset:x}})}_updateWorkerData(l){return o._(this,void 0,void 0,function*(){const p=o.e({type:this.type},this.workerOptions);l?p.dataDiff=l:typeof this._data=="string"?(p.request=this.map._requestManager.transformRequest(b.resolveURL(this._data),"Source"),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"}));try{const x=yield this.actor.sendAsync({type:"LD",data:p});if(this._pendingLoads--,this._removed||x.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let v=null;x.resourceTiming&&x.resourceTiming[this.id]&&(v=x.resourceTiming[this.id].slice(0));const S={dataType:"source"};this._collectResourceTiming&&v&&v.length>0&&o.e(S,{resourceTiming:v}),this.fire(new o.k("data",Object.assign(Object.assign({},S),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},S),{sourceDataType:"content"})))}catch(x){if(this._pendingLoads--,this._removed)return void this.fire(new o.k("dataabort",{dataType:"source"}));this.fire(new o.j(x))}})}loaded(){return this._pendingLoads===0}loadTile(l){return o._(this,void 0,void 0,function*(){const p=l.actor?"RT":"LT";l.actor=this.actor;const x={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};l.abortController=new AbortController;const v=yield this.actor.sendAsync({type:p,data:x},l.abortController);delete l.abortController,l.unloadVectorData(),l.aborted||l.loadVectorData(v,this.map.painter,p==="RT")})}abortTile(l){return o._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.aborted=!0})}unloadTile(l){return o._(this,void 0,void 0,function*(){l.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var hn=o.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class on extends o.E{constructor(l,p,x,v){super(),this.id=l,this.dispatcher=x,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=p}load(l){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const p=yield L.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,l&&(this.coordinates=l),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,this.fire(new o.j(p))}})}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=l.url,this.load(l.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(l){this.coordinates=l;const p=l.map(o.Z.fromLngLat);this.tileID=function(v){let S=1/0,j=1/0,M=-1/0,D=-1/0;for(const ne of v)S=Math.min(S,ne.x),j=Math.min(j,ne.y),M=Math.max(M,ne.x),D=Math.max(D,ne.y);const V=Math.max(M-S,D-j),G=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),X=Math.pow(2,G);return new o.a1(G,Math.floor((S+M)/2*X),Math.floor((j+D)/2*X))}(p),this.minzoom=this.maxzoom=this.tileID.z;const x=p.map(v=>this.tileID.getTilePoint(v)._round());return this._boundsArray=new o.$,this._boundsArray.emplaceBack(x[0].x,x[0].y,0,0),this._boundsArray.emplaceBack(x[1].x,x[1].y,o.X,0),this._boundsArray.emplaceBack(x[3].x,x[3].y,0,o.X),this._boundsArray.emplaceBack(x[2].x,x[2].y,o.X,o.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,p=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,hn.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new le(l,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let x=!1;for(const v in this.tiles){const S=this.tiles[v];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,x=!0)}x&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(l){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={}):l.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class kn extends on{constructor(l,p,x,v){super(l,p,x,v),this.roundZoom=!0,this.type="video",this.options=p}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const l=this.options;this.urls=[];for(const p of l.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{const p=yield o.a3(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new o.j(p))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const p=this.video.seekable;l<p.start(0)||l>p.end(0)?this.fire(new o.j(new o.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,p=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,hn.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new le(l,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let x=!1;for(const v in this.tiles){const S=this.tiles[v];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,x=!0)}x&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class yn extends on{constructor(l,p,x,v){super(l,p,x,v),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(S=>!Array.isArray(S)||S.length!==2||S.some(j=>typeof j!="number"))||this.fire(new o.j(new o.a2(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.j(new o.a2(`sources.${l}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new o.j(new o.a2(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.a2(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.j(new o.a2(`sources.${l}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,x=p.gl;this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,hn.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new le(p,this.canvas,x.RGBA,{premultiply:!0});let v=!1;for(const S in this.tiles){const j=this.tiles[S];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture,v=!0)}v&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const ui={},Oi=k=>{switch(k){case"geojson":return tn;case"image":return on;case"raster":return Tt;case"raster-dem":return Vt;case"vector":return Nt;case"video":return kn;case"canvas":return yn}return ui[k]},Qe="RTLPluginLoaded";class Br extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=yt()}_syncState(l){return this.status=l,this.dispatcher.broadcast("SRPS",{pluginStatus:l,pluginURL:this.url}).catch(p=>{throw this.status="error",p})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(l){return o._(this,arguments,void 0,function*(p,x=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=b.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!x)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.k(Qe))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let kt=null;function Wt(){return kt||(kt=new Br),kt}class wn{constructor(l,p){this.timeAdded=0,this.fadeEndTime=0,this.tileID=l,this.uid=o.a4(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const p=l+this.timeAdded;p<this.fadeEndTime||(this.fadeEndTime=p)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,p,x){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(v,S){const j={};if(!S)return j;for(const M of v){const D=M.layerIds.map(V=>S.getLayer(V)).filter(Boolean);if(D.length!==0){M.layers=D,M.stateDependentLayerIds&&(M.stateDependentLayers=M.stateDependentLayerIds.map(V=>D.filter(G=>G.id===V)[0]));for(const V of D)j[V.id]=M}}return j}(l.buckets,p.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const S=this.buckets[v];if(S instanceof o.a6){if(this.hasSymbolBuckets=!0,!x)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const S=this.buckets[v];if(S instanceof o.a6&&S.hasRTLText){this.hasRTLText=!0,Wt().lazyLoad();break}}this.queryPadding=0;for(const v in this.buckets){const S=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(v).queryRadius(S))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new o.a5}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const x in this.buckets){const v=this.buckets[x];v.uploadPending()&&v.upload(l)}const p=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new le(l,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new le(l,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,p,x,v,S,j,M,D,V,G){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:S,scale:j,tileSize:this.tileSize,pixelPosMatrix:G,transform:D,params:M,queryPadding:this.queryPadding*V},l,p,x):{}}querySourceFeatures(l,p){const x=this.latestFeatureIndex;if(!x||!x.rawTileData)return;const v=x.loadVTLayers(),S=p&&p.sourceLayer?p.sourceLayer:"",j=v._geojsonTileLayer||v[S];if(!j)return;const M=o.a7(p&&p.filter),{z:D,x:V,y:G}=this.tileID.canonical,X={z:D,x:V,y:G};for(let ne=0;ne<j.length;ne++){const ae=j.feature(ne);if(M.needGeometry){const we=o.a8(ae,!0);if(!M.filter(new o.z(this.tileID.overscaledZ),we,this.tileID.canonical))continue}else if(!M.filter(new o.z(this.tileID.overscaledZ),ae))continue;const ce=x.getId(ae,S),ye=new o.a9(ae,D,V,G,ce);ye.tile=X,l.push(ye)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const p=this.expirationTime;if(l.cacheControl){const x=o.aa(l.cacheControl);x["max-age"]&&(this.expirationTime=Date.now()+1e3*x["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const x=Date.now();let v=!1;if(this.expirationTime>x)v=!1;else if(p)if(this.expirationTime<p)v=!0;else{const S=this.expirationTime-p;S?this.expirationTime=x+Math.max(S,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const x=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!p.style.hasLayer(v))continue;const S=this.buckets[v],j=S.layers[0].sourceLayer||"_geojsonTileLayer",M=x[j],D=l[j];if(!M||!D||Object.keys(D).length===0)continue;S.update(D,M,this.imageAtlas&&this.imageAtlas.patternPositions||{});const V=p&&p.style&&p.style.getLayer(v);V&&(this.queryPadding=Math.max(this.queryPadding,V.queryRadius(S)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<b.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=b.now()+l}setDependencies(l,p){const x={};for(const v of p)x[v]=!0;this.dependencies[l]=x}hasDependency(l,p){for(const x of l){const v=this.dependencies[x];if(v){for(const S of p)if(v[S])return!0}}return!1}}class xt{constructor(l,p){this.max=l,this.onRemove=p,this.reset()}reset(){for(const l in this.data)for(const p of this.data[l])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(l,p,x){const v=l.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const S={value:p,timeout:void 0};if(x!==void 0&&(S.timeout=setTimeout(()=>{this.remove(l,S)},x)),this.data[v].push(S),this.order.push(v),this.order.length>this.max){const j=this._getAndRemoveByKey(this.order[0]);j&&this.onRemove(j)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const p=this.data[l].shift();return p.timeout&&clearTimeout(p.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),p.value}getByKey(l){const p=this.data[l];return p?p[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,p){if(!this.has(l))return this;const x=l.wrapped().key,v=p===void 0?0:this.data[x].indexOf(p),S=this.data[x][v];return this.data[x].splice(v,1),S.timeout&&clearTimeout(S.timeout),this.data[x].length===0&&delete this.data[x],this.onRemove(S.value),this.order.splice(this.order.indexOf(x),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(l){const p=[];for(const x in this.data)for(const v of this.data[x])l(v.value)||p.push(v);for(const x of p)this.remove(x.value.tileID,x)}}class yr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,p,x){const v=String(p);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][v]=this.stateChanges[l][v]||{},o.e(this.stateChanges[l][v],x),this.deletedStates[l]===null){this.deletedStates[l]={};for(const S in this.state[l])S!==v&&(this.deletedStates[l][S]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][v]===null){this.deletedStates[l][v]={};for(const S in this.state[l][v])x[S]||(this.deletedStates[l][v][S]=null)}else for(const S in x)this.deletedStates[l]&&this.deletedStates[l][v]&&this.deletedStates[l][v][S]===null&&delete this.deletedStates[l][v][S]}removeFeatureState(l,p,x){if(this.deletedStates[l]===null)return;const v=String(p);if(this.deletedStates[l]=this.deletedStates[l]||{},x&&p!==void 0)this.deletedStates[l][v]!==null&&(this.deletedStates[l][v]=this.deletedStates[l][v]||{},this.deletedStates[l][v][x]=null);else if(p!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][v])for(x in this.deletedStates[l][v]={},this.stateChanges[l][v])this.deletedStates[l][v][x]=null;else this.deletedStates[l][v]=null;else this.deletedStates[l]=null}getState(l,p){const x=String(p),v=o.e({},(this.state[l]||{})[x],(this.stateChanges[l]||{})[x]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const S=this.deletedStates[l][p];if(S===null)return{};for(const j in S)delete v[j]}return v}initializeTileState(l,p){l.setFeatureState(this.state,p)}coalesceChanges(l,p){const x={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const S={};for(const j in this.stateChanges[v])this.state[v][j]||(this.state[v][j]={}),o.e(this.state[v][j],this.stateChanges[v][j]),S[j]=this.state[v][j];x[v]=S}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const S={};if(this.deletedStates[v]===null)for(const j in this.state[v])S[j]={},this.state[v][j]={};else for(const j in this.deletedStates[v]){if(this.deletedStates[v][j]===null)this.state[v][j]={};else for(const M of Object.keys(this.deletedStates[v][j]))delete this.state[v][j][M];S[j]=this.state[v][j]}x[v]=x[v]||{},o.e(x[v],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(x).length!==0)for(const v in l)l[v].setFeatureState(x,p)}}class Jt extends o.E{constructor(l,p,x){super(),this.id=l,this.dispatcher=x,this.on("data",v=>this._dataHandler(v)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((v,S,j,M)=>{const D=new(Oi(S.type))(v,S,j,M);if(D.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${D.id}`);return D})(l,p,x,this),this._tiles={},this._cache=new xt(0,v=>this._unloadTile(v)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new yr,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const p=this._tiles[l];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,p,x){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(l),this._tileLoaded(l,p,x)}catch(v){l.state="errored",v.status!==404?this._source.fire(new o.j(v,{tile:l})):this.update(this.transform,this.terrain)}})}_unloadTile(l){this._source.unloadTile&&this._source.unloadTile(l)}_abortTile(l){this._source.abortTile&&this._source.abortTile(l),this._source.fire(new o.k("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const x=this._tiles[p];x.upload(l),x.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(Zn).map(l=>l.key)}getRenderableIds(l){const p=[];for(const x in this._tiles)this._isIdRenderable(x,l)&&p.push(this._tiles[x]);return l?p.sort((x,v)=>{const S=x.tileID,j=v.tileID,M=new o.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle),D=new o.P(j.canonical.x,j.canonical.y)._rotate(this.transform.angle);return S.overscaledZ-j.overscaledZ||D.y-M.y||D.x-M.x}).map(x=>x.tileID.key):p.map(x=>x.tileID).sort(Zn).map(x=>x.key)}hasRenderableParent(l){const p=this.findLoadedParent(l,0);return!!p&&this._isIdRenderable(p.tileID.key)}_isIdRenderable(l,p){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(p||!this._tiles[l].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(l,"reloading")}}_reloadTile(l,p){return o._(this,void 0,void 0,function*(){const x=this._tiles[l];x&&(x.state!=="loading"&&(x.state=p),yield this._loadTile(x,l,p))})}_tileLoaded(l,p,x){l.timeAdded=b.now(),x==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(p,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const p=this.getRenderableIds();for(let v=0;v<p.length;v++){const S=p[v];if(l.neighboringTiles&&l.neighboringTiles[S]){const j=this.getTileByID(S);x(l,j),x(j,l)}}function x(v,S){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let j=S.tileID.canonical.x-v.tileID.canonical.x;const M=S.tileID.canonical.y-v.tileID.canonical.y,D=Math.pow(2,v.tileID.canonical.z),V=S.tileID.key;j===0&&M===0||Math.abs(M)>1||(Math.abs(j)>1&&(Math.abs(j+D)===1?j+=D:Math.abs(j-D)===1&&(j-=D)),S.dem&&v.dem&&(v.dem.backfillBorder(S.dem,j,M),v.neighboringTiles&&v.neighboringTiles[V]&&(v.neighboringTiles[V].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,p,x,v){for(const S in this._tiles){let j=this._tiles[S];if(v[S]||!j.hasData()||j.tileID.overscaledZ<=p||j.tileID.overscaledZ>x)continue;let M=j.tileID;for(;j&&j.tileID.overscaledZ>p+1;){const V=j.tileID.scaledTo(j.tileID.overscaledZ-1);j=this._tiles[V.key],j&&j.hasData()&&(M=V)}let D=M;for(;D.overscaledZ>p;)if(D=D.scaledTo(D.overscaledZ-1),l[D.key]){v[M.key]=M;break}}}findLoadedParent(l,p){if(l.key in this._loadedParentTiles){const x=this._loadedParentTiles[l.key];return x&&x.tileID.overscaledZ>=p?x:null}for(let x=l.overscaledZ-1;x>=p;x--){const v=l.scaledTo(x),S=this._getLoadedTile(v);if(S)return S}}findLoadedSibling(l){return this._getLoadedTile(l)}_getLoadedTile(l){const p=this._tiles[l.key];return p&&p.hasData()?p:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const p=Math.ceil(l.width/this._source.tileSize)+1,x=Math.ceil(l.height/this._source.tileSize)+1,v=Math.floor(p*x*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(S)}handleWrapJump(l){const p=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,p){const x={};for(const v in this._tiles){const S=this._tiles[v];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+p),x[S.tileID.key]=S}this._tiles=x;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}_updateCoveredAndRetainedTiles(l,p,x,v,S,j){const M={},D={},V=Object.keys(l),G=b.now();for(const X of V){const ne=l[X],ae=this._tiles[X];if(!ae||ae.fadeEndTime!==0&&ae.fadeEndTime<=G)continue;const ce=this.findLoadedParent(ne,p),ye=this.findLoadedSibling(ne),we=ce||ye||null;we&&(this._addTile(we.tileID),M[we.tileID.key]=we.tileID),D[X]=ne}this._retainLoadedChildren(D,v,x,l);for(const X in M)l[X]||(this._coveredTiles[X]=!0,l[X]=M[X]);if(j){const X={},ne={};for(const ae of S)this._tiles[ae.key].hasData()?X[ae.key]=ae:ne[ae.key]=ae;for(const ae in ne){const ce=ne[ae].children(this._source.maxzoom);this._tiles[ce[0].key]&&this._tiles[ce[1].key]&&this._tiles[ce[2].key]&&this._tiles[ce[3].key]&&(X[ce[0].key]=l[ce[0].key]=ce[0],X[ce[1].key]=l[ce[1].key]=ce[1],X[ce[2].key]=l[ce[2].key]=ce[2],X[ce[3].key]=l[ce[3].key]=ce[3],delete ne[ae])}for(const ae in ne){const ce=ne[ae],ye=this.findLoadedParent(ce,this._source.minzoom),we=this.findLoadedSibling(ce),ke=ye||we||null;if(ke){X[ke.tileID.key]=l[ke.tileID.key]=ke.tileID;for(const Pe in X)X[Pe].isChildOf(ke.tileID)&&delete X[Pe]}}for(const ae in this._tiles)X[ae]||(this._coveredTiles[ae]=!0)}}update(l,p){if(!this._sourceLoaded||this._paused)return;let x;this.transform=l,this.terrain=p,this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?x=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(G=>new o.S(G.canonical.z,G.wrap,G.canonical.z,G.canonical.x,G.canonical.y)):(x=l.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p}),this._source.hasTile&&(x=x.filter(G=>this._source.hasTile(G)))):x=[];const v=l.coveringZoomLevel(this._source),S=Math.max(v-Jt.maxOverzooming,this._source.minzoom),j=Math.max(v+Jt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const G={};for(const X of x)if(X.canonical.z>this._source.minzoom){const ne=X.scaledTo(X.canonical.z-1);G[ne.key]=ne;const ae=X.scaledTo(Math.max(this._source.minzoom,Math.min(X.canonical.z,5)));G[ae.key]=ae}x=x.concat(Object.values(G))}const M=x.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,M&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const D=this._updateRetainedTiles(x,v);vi(this._source.type)&&this._updateCoveredAndRetainedTiles(D,S,j,v,x,p);for(const G in D)this._tiles[G].clearFadeHold();const V=o.ab(this._tiles,D);for(const G of V){const X=this._tiles[G];X.hasSymbolBuckets&&!X.holdingForFade()?X.setHoldDuration(this.map._fadeDuration):X.hasSymbolBuckets&&!X.symbolFadeFinished()||this._removeTile(G)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,p){var x;const v={},S={},j=Math.max(p-Jt.maxOverzooming,this._source.minzoom),M=Math.max(p+Jt.maxUnderzooming,this._source.minzoom),D={};for(const V of l){const G=this._addTile(V);v[V.key]=V,G.hasData()||p<this._source.maxzoom&&(D[V.key]=V)}this._retainLoadedChildren(D,p,M,v);for(const V of l){let G=this._tiles[V.key];if(G.hasData())continue;if(p+1>this._source.maxzoom){const ne=V.children(this._source.maxzoom)[0],ae=this.getTile(ne);if(ae&&ae.hasData()){v[ne.key]=ne;continue}}else{const ne=V.children(this._source.maxzoom);if(v[ne[0].key]&&v[ne[1].key]&&v[ne[2].key]&&v[ne[3].key])continue}let X=G.wasRequested();for(let ne=V.overscaledZ-1;ne>=j;--ne){const ae=V.scaledTo(ne);if(S[ae.key])break;if(S[ae.key]=!0,G=this.getTile(ae),!G&&X&&(G=this._addTile(ae)),G){const ce=G.hasData();if((ce||!(!((x=this.map)===null||x===void 0)&&x.cancelPendingTileRequestsWhileZooming)||X)&&(v[ae.key]=ae),X=G.wasRequested(),ce)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const p=[];let x,v=this._tiles[l].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){x=this._loadedParentTiles[v.key];break}p.push(v.key);const S=v.scaledTo(v.overscaledZ-1);if(x=this._getLoadedTile(S),x)break;v=S}for(const S of p)this._loadedParentTiles[S]=x}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const l in this._tiles){const p=this._tiles[l].tileID,x=this._getLoadedTile(p);this._loadedSiblingTiles[p.key]=x}}_addTile(l){let p=this._tiles[l.key];if(p)return p;p=this._cache.getAndRemove(l),p&&(this._setTileReloadTimer(l.key,p),p.tileID=l,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,p)));const x=p;return p||(p=new wn(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(p,l.key,p.state)),p.uses++,this._tiles[l.key]=p,x||this._source.fire(new o.k("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(l,p){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const x=p.getExpiryTimeout();x&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},x))}_removeTile(l){const p=this._tiles[l];p&&(p.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(l){const p=l.sourceDataType;l.dataType==="source"&&p==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&l.dataType==="source"&&p==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,p,x){const v=[],S=this.transform;if(!S)return v;const j=x?S.getCameraQueryGeometry(l):l,M=l.map(ce=>S.pointCoordinate(ce,this.terrain)),D=j.map(ce=>S.pointCoordinate(ce,this.terrain)),V=this.getIds();let G=1/0,X=1/0,ne=-1/0,ae=-1/0;for(const ce of D)G=Math.min(G,ce.x),X=Math.min(X,ce.y),ne=Math.max(ne,ce.x),ae=Math.max(ae,ce.y);for(let ce=0;ce<V.length;ce++){const ye=this._tiles[V[ce]];if(ye.holdingForFade())continue;const we=ye.tileID,ke=Math.pow(2,S.zoom-ye.tileID.overscaledZ),Pe=p*ye.queryPadding*o.X/ye.tileSize/ke,fe=[we.getTilePoint(new o.Z(G,X)),we.getTilePoint(new o.Z(ne,ae))];if(fe[0].x-Pe<o.X&&fe[0].y-Pe<o.X&&fe[1].x+Pe>=0&&fe[1].y+Pe>=0){const De=M.map(Ye=>we.getTilePoint(Ye)),Ve=D.map(Ye=>we.getTilePoint(Ye));v.push({tile:ye,tileID:we,queryGeometry:De,cameraQueryGeometry:Ve,scale:ke})}}return v}getVisibleCoordinates(l){const p=this.getRenderableIds(l).map(x=>this._tiles[x].tileID);for(const x of p)x.posMatrix=this.transform.calculatePosMatrix(x.toUnwrapped());return p}hasTransition(){if(this._source.hasTransition())return!0;if(vi(this._source.type)){const l=b.now();for(const p in this._tiles)if(this._tiles[p].fadeEndTime>=l)return!0}return!1}setFeatureState(l,p,x){this._state.updateState(l=l||"_geojsonTileLayer",p,x)}removeFeatureState(l,p,x){this._state.removeFeatureState(l=l||"_geojsonTileLayer",p,x)}getFeatureState(l,p){return this._state.getState(l=l||"_geojsonTileLayer",p)}setDependencies(l,p,x){const v=this._tiles[l];v&&v.setDependencies(p,x)}reloadTilesForDependencies(l,p){for(const x in this._tiles)this._tiles[x].hasDependency(l,p)&&this._reloadTile(x,"reloading");this._cache.filter(x=>!x.hasDependency(l,p))}}function Zn(k,l){const p=Math.abs(2*k.wrap)-+(k.wrap<0),x=Math.abs(2*l.wrap)-+(l.wrap<0);return k.overscaledZ-l.overscaledZ||x-p||l.canonical.y-k.canonical.y||l.canonical.x-k.canonical.x}function vi(k){return k==="raster"||k==="image"||k==="video"}Jt.maxOverzooming=10,Jt.maxUnderzooming=3;class pr{constructor(l,p){this.reset(l,p)}reset(l,p){this.points=l||[],this._distances=[0];for(let x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=o.ac(l,0,1);let p=1,x=this._distances[p];const v=l*this.paddedLength+this.padding;for(;x<v&&p<this._distances.length;)x=this._distances[++p];const S=p-1,j=this._distances[S],M=x-j,D=M>0?(v-j)/M:0;return this.points[S].mult(1-D).add(this.points[p].mult(D))}}function Ii(k,l){let p=!0;return k==="always"||k!=="never"&&l!=="never"||(p=!1),p}class xs{constructor(l,p,x){const v=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(l/x),this.yCellCount=Math.ceil(p/x);for(let j=0;j<this.xCellCount*this.yCellCount;j++)v.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=p,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,p,x,v,S){this._forEachCell(p,x,v,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(p),this.bboxes.push(x),this.bboxes.push(v),this.bboxes.push(S)}insertCircle(l,p,x,v){this._forEachCell(p-v,x-v,p+v,x+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(p),this.circles.push(x),this.circles.push(v)}_insertBoxCell(l,p,x,v,S,j){this.boxCells[S].push(j)}_insertCircleCell(l,p,x,v,S,j){this.circleCells[S].push(j)}_query(l,p,x,v,S,j,M){if(x<0||l>this.width||v<0||p>this.height)return[];const D=[];if(l<=0&&p<=0&&this.width<=x&&this.height<=v){if(S)return[{key:null,x1:l,y1:p,x2:x,y2:v}];for(let V=0;V<this.boxKeys.length;V++)D.push({key:this.boxKeys[V],x1:this.bboxes[4*V],y1:this.bboxes[4*V+1],x2:this.bboxes[4*V+2],y2:this.bboxes[4*V+3]});for(let V=0;V<this.circleKeys.length;V++){const G=this.circles[3*V],X=this.circles[3*V+1],ne=this.circles[3*V+2];D.push({key:this.circleKeys[V],x1:G-ne,y1:X-ne,x2:G+ne,y2:X+ne})}}else this._forEachCell(l,p,x,v,this._queryCell,D,{hitTest:S,overlapMode:j,seenUids:{box:{},circle:{}}},M);return D}query(l,p,x,v){return this._query(l,p,x,v,!1,null)}hitTest(l,p,x,v,S,j){return this._query(l,p,x,v,!0,S,j).length>0}hitTestCircle(l,p,x,v,S){const j=l-x,M=l+x,D=p-x,V=p+x;if(M<0||j>this.width||V<0||D>this.height)return!1;const G=[];return this._forEachCell(j,D,M,V,this._queryCellCircle,G,{hitTest:!0,overlapMode:v,circle:{x:l,y:p,radius:x},seenUids:{box:{},circle:{}}},S),G.length>0}_queryCell(l,p,x,v,S,j,M,D){const{seenUids:V,hitTest:G,overlapMode:X}=M,ne=this.boxCells[S];if(ne!==null){const ce=this.bboxes;for(const ye of ne)if(!V.box[ye]){V.box[ye]=!0;const we=4*ye,ke=this.boxKeys[ye];if(l<=ce[we+2]&&p<=ce[we+3]&&x>=ce[we+0]&&v>=ce[we+1]&&(!D||D(ke))&&(!G||!Ii(X,ke.overlapMode))&&(j.push({key:ke,x1:ce[we],y1:ce[we+1],x2:ce[we+2],y2:ce[we+3]}),G))return!0}}const ae=this.circleCells[S];if(ae!==null){const ce=this.circles;for(const ye of ae)if(!V.circle[ye]){V.circle[ye]=!0;const we=3*ye,ke=this.circleKeys[ye];if(this._circleAndRectCollide(ce[we],ce[we+1],ce[we+2],l,p,x,v)&&(!D||D(ke))&&(!G||!Ii(X,ke.overlapMode))){const Pe=ce[we],fe=ce[we+1],De=ce[we+2];if(j.push({key:ke,x1:Pe-De,y1:fe-De,x2:Pe+De,y2:fe+De}),G)return!0}}}return!1}_queryCellCircle(l,p,x,v,S,j,M,D){const{circle:V,seenUids:G,overlapMode:X}=M,ne=this.boxCells[S];if(ne!==null){const ce=this.bboxes;for(const ye of ne)if(!G.box[ye]){G.box[ye]=!0;const we=4*ye,ke=this.boxKeys[ye];if(this._circleAndRectCollide(V.x,V.y,V.radius,ce[we+0],ce[we+1],ce[we+2],ce[we+3])&&(!D||D(ke))&&!Ii(X,ke.overlapMode))return j.push(!0),!0}}const ae=this.circleCells[S];if(ae!==null){const ce=this.circles;for(const ye of ae)if(!G.circle[ye]){G.circle[ye]=!0;const we=3*ye,ke=this.circleKeys[ye];if(this._circlesCollide(ce[we],ce[we+1],ce[we+2],V.x,V.y,V.radius)&&(!D||D(ke))&&!Ii(X,ke.overlapMode))return j.push(!0),!0}}}_forEachCell(l,p,x,v,S,j,M,D){const V=this._convertToXCellCoord(l),G=this._convertToYCellCoord(p),X=this._convertToXCellCoord(x),ne=this._convertToYCellCoord(v);for(let ae=V;ae<=X;ae++)for(let ce=G;ce<=ne;ce++)if(S.call(this,l,p,x,v,this.xCellCount*ce+ae,j,M,D))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,p,x,v,S,j){const M=v-l,D=S-p,V=x+j;return V*V>M*M+D*D}_circleAndRectCollide(l,p,x,v,S,j,M){const D=(j-v)/2,V=Math.abs(l-(v+D));if(V>D+x)return!1;const G=(M-S)/2,X=Math.abs(p-(S+G));if(X>G+x)return!1;if(V<=D||X<=G)return!0;const ne=V-D,ae=X-G;return ne*ne+ae*ae<=x*x}}function Di(k,l,p,x,v){const S=o.H();return l?(o.K(S,S,[1/v,1/v,1]),p||o.ad(S,S,x.angle)):o.L(S,x.labelPlaneMatrix,k),S}function is(k,l,p,x,v){if(l){const S=o.ae(k);return o.K(S,S,[v,v,1]),p||o.ad(S,S,-x.angle),S}return x.glCoordMatrix}function me(k,l,p,x){let v;x?(v=[k,l,x(k,l),1],o.af(v,v,p)):(v=[k,l,0,1],Nr(v,v,p));const S=v[3];return{point:new o.P(v[0]/S,v[1]/S),signedDistanceFromCamera:S,isOccluded:!1}}function W(k,l){return .5+k/l*.5}function H(k,l){return k.x>=-l[0]&&k.x<=l[0]&&k.y>=-l[1]&&k.y<=l[1]}function ee(k,l,p,x,v,S,j,M,D,V,G,X,ne,ae,ce){const ye=x?k.textSizeData:k.iconSizeData,we=o.ag(ye,p.transform.zoom),ke=[256/p.width*2+1,256/p.height*2+1],Pe=x?k.text.dynamicLayoutVertexArray:k.icon.dynamicLayoutVertexArray;Pe.clear();const fe=k.lineVertexArray,De=x?k.text.placedSymbolArray:k.icon.placedSymbolArray,Ve=p.transform.width/p.transform.height;let Ye=!1;for(let dt=0;dt<De.length;dt++){const wt=De.get(dt);if(wt.hidden||wt.writingMode===o.ah.vertical&&!Ye){rr(wt.numGlyphs,Pe);continue}Ye=!1;const Lt=me(wt.anchorX,wt.anchorY,l,ce);if(!H(Lt.point,ke)){rr(wt.numGlyphs,Pe);continue}const Ut=W(p.transform.cameraToCenterDistance,Lt.signedDistanceFromCamera),zt=o.ai(ye,we,wt),At=j?zt/Ut:zt*Ut,ir={getElevation:ce,labelPlaneMatrix:v,lineVertexArray:fe,pitchWithMap:j,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:V,tileAnchorPoint:new o.P(wt.anchorX,wt.anchorY),unwrappedTileID:G,width:X,height:ne,translation:ae},Pr=Se(ir,wt,At,!1,M,l,S,k.glyphOffsetArray,Pe,Ve,D);Ye=Pr.useVertical,(Pr.notEnoughRoom||Ye||Pr.needsFlipping&&Se(ir,wt,At,!0,M,l,S,k.glyphOffsetArray,Pe,Ve,D).notEnoughRoom)&&rr(wt.numGlyphs,Pe)}x?k.text.dynamicLayoutVertexBuffer.updateData(Pe):k.icon.dynamicLayoutVertexBuffer.updateData(Pe)}function de(k,l,p,x,v,S,j,M){const D=S.glyphStartIndex+S.numGlyphs,V=S.lineStartIndex,G=S.lineStartIndex+S.lineLength,X=l.getoffsetX(S.glyphStartIndex),ne=l.getoffsetX(D-1),ae=ct(k*X,p,x,v,S.segment,V,G,M,j);if(!ae)return null;const ce=ct(k*ne,p,x,v,S.segment,V,G,M,j);return ce?M.projectionCache.anyProjectionOccluded?null:{first:ae,last:ce}:null}function ve(k,l,p,x){return k===o.ah.horizontal&&Math.abs(p.y-l.y)>Math.abs(p.x-l.x)*x?{useVertical:!0}:(k===o.ah.vertical?l.y<p.y:l.x>p.x)?{needsFlipping:!0}:null}function Se(k,l,p,x,v,S,j,M,D,V,G){const X=p/24,ne=l.lineOffsetX*X,ae=l.lineOffsetY*X;let ce;if(l.numGlyphs>1){const ye=l.glyphStartIndex+l.numGlyphs,we=l.lineStartIndex,ke=l.lineStartIndex+l.lineLength,Pe=de(X,M,ne,ae,x,l,G,k);if(!Pe)return{notEnoughRoom:!0};const fe=me(Pe.first.point.x,Pe.first.point.y,j,k.getElevation).point,De=me(Pe.last.point.x,Pe.last.point.y,j,k.getElevation).point;if(v&&!x){const Ve=ve(l.writingMode,fe,De,V);if(Ve)return Ve}ce=[Pe.first];for(let Ve=l.glyphStartIndex+1;Ve<ye-1;Ve++)ce.push(ct(X*M.getoffsetX(Ve),ne,ae,x,l.segment,we,ke,k,G));ce.push(Pe.last)}else{if(v&&!x){const we=me(k.tileAnchorPoint.x,k.tileAnchorPoint.y,S,k.getElevation).point,ke=l.lineStartIndex+l.segment+1,Pe=new o.P(k.lineVertexArray.getx(ke),k.lineVertexArray.gety(ke)),fe=me(Pe.x,Pe.y,S,k.getElevation),De=fe.signedDistanceFromCamera>0?fe.point:function(Ye,dt,wt,Lt,Ut,zt){return Fe(Ye,dt,wt,1,Ut,zt)}(k.tileAnchorPoint,Pe,we,0,S,k),Ve=ve(l.writingMode,we,De,V);if(Ve)return Ve}const ye=ct(X*M.getoffsetX(l.glyphStartIndex),ne,ae,x,l.segment,l.lineStartIndex,l.lineStartIndex+l.lineLength,k,G);if(!ye||k.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ce=[ye]}for(const ye of ce)o.aj(D,ye.point,ye.angle);return{}}function Fe(k,l,p,x,v,S){const j=k.add(k.sub(l)._unit()),M=v!==void 0?me(j.x,j.y,v,S.getElevation).point:tt(j.x,j.y,S).point,D=p.sub(M);return p.add(D._mult(x/D.mag()))}function be(k,l,p){const x=l.projectionCache;if(x.projections[k])return x.projections[k];const v=new o.P(l.lineVertexArray.getx(k),l.lineVertexArray.gety(k)),S=tt(v.x,v.y,l);if(S.signedDistanceFromCamera>0)return x.projections[k]=S.point,x.anyProjectionOccluded=x.anyProjectionOccluded||S.isOccluded,S.point;const j=k-p.direction;return function(M,D,V,G,X){return Fe(M,D,V,G,void 0,X)}(p.distanceFromAnchor===0?l.tileAnchorPoint:new o.P(l.lineVertexArray.getx(j),l.lineVertexArray.gety(j)),v,p.previousVertex,p.absOffsetX-p.distanceFromAnchor+1,l)}function tt(k,l,p){const x=k+p.translation[0],v=l+p.translation[1];let S;return!p.pitchWithMap&&p.projection.useSpecialProjectionForSymbols?(S=p.projection.projectTileCoordinates(x,v,p.unwrappedTileID,p.getElevation),S.point.x=(.5*S.point.x+.5)*p.width,S.point.y=(.5*-S.point.y+.5)*p.height):(S=me(x,v,p.labelPlaneMatrix,p.getElevation),S.isOccluded=!1),S}function ht(k,l,p){return k._unit()._perp()._mult(l*p)}function xe(k,l,p,x,v,S,j,M,D){if(M.projectionCache.offsets[k])return M.projectionCache.offsets[k];const V=p.add(l);if(k+D.direction<x||k+D.direction>=v)return M.projectionCache.offsets[k]=V,V;const G=be(k+D.direction,M,D),X=ht(G.sub(p),j,D.direction),ne=p.add(X),ae=G.add(X);return M.projectionCache.offsets[k]=o.ak(S,V,ne,ae)||V,M.projectionCache.offsets[k]}function ct(k,l,p,x,v,S,j,M,D){const V=x?k-l:k+l;let G=V>0?1:-1,X=0;x&&(G*=-1,X=Math.PI),G<0&&(X+=Math.PI);let ne,ae=G>0?S+v:S+v+1;M.projectionCache.cachedAnchorPoint?ne=M.projectionCache.cachedAnchorPoint:(ne=tt(M.tileAnchorPoint.x,M.tileAnchorPoint.y,M).point,M.projectionCache.cachedAnchorPoint=ne);let ce,ye,we=ne,ke=ne,Pe=0,fe=0;const De=Math.abs(V),Ve=[];let Ye;for(;Pe+fe<=De;){if(ae+=G,ae<S||ae>=j)return null;Pe+=fe,ke=we,ye=ce;const Lt={absOffsetX:De,direction:G,distanceFromAnchor:Pe,previousVertex:ke};if(we=be(ae,M,Lt),p===0)Ve.push(ke),Ye=we.sub(ke);else{let Ut;const zt=we.sub(ke);Ut=zt.mag()===0?ht(be(ae+G,M,Lt).sub(we),p,G):ht(zt,p,G),ye||(ye=ke.add(Ut)),ce=xe(ae,Ut,we,S,j,ye,p,M,Lt),Ve.push(ye),Ye=ce.sub(ye)}fe=Ye.mag()}const dt=Ye._mult((De-Pe)/fe)._add(ye||ke),wt=X+Math.atan2(we.y-ke.y,we.x-ke.x);return Ve.push(dt),{point:dt,angle:D?wt:0,path:Ve}}const Rt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function rr(k,l){for(let p=0;p<k;p++){const x=l.length;l.resize(x+4),l.float32.set(Rt,3*x)}}function Nr(k,l,p){const x=l[0],v=l[1];return k[0]=p[0]*x+p[4]*v+p[12],k[1]=p[1]*x+p[5]*v+p[13],k[3]=p[3]*x+p[7]*v+p[15],k}const Mr=100;class Kr{constructor(l,p,x=new xs(l.width+200,l.height+200,25),v=new xs(l.width+200,l.height+200,25)){this.transform=l,this.mapProjection=p,this.grid=x,this.ignoredGrid=v,this.pitchFactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Mr,this.screenBottomBoundary=l.height+Mr,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,p,x,v,S,j,M,D,V,G,X){const ne=l.anchorPointX+D[0],ae=l.anchorPointY+D[1],ce=this.projectAndGetPerspectiveRatio(v,ne,ae,S,G),ye=x*ce.perspectiveRatio;let we;if(j||M)we=this._projectCollisionBox(l,ye,v,S,j,M,D,ce,G,X);else{const Ve=ce.point.x+(X?X.x*ye:0),Ye=ce.point.y+(X?X.y*ye:0);we={allPointsOccluded:!1,box:[Ve+l.x1*ye,Ye+l.y1*ye,Ve+l.x2*ye,Ye+l.y2*ye]}}const[ke,Pe,fe,De]=we.box;return this.mapProjection.useSpecialProjectionForSymbols&&(j?we.allPointsOccluded:this.mapProjection.isOccluded(ne,ae,S))||ce.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(ke,Pe,fe,De)||p!=="always"&&this.grid.hitTest(ke,Pe,fe,De,p,V)?{box:[ke,Pe,fe,De],placeable:!1,offscreen:!1}:{box:[ke,Pe,fe,De],placeable:!0,offscreen:this.isOffscreen(ke,Pe,fe,De)}}placeCollisionCircles(l,p,x,v,S,j,M,D,V,G,X,ne,ae,ce,ye,we){const ke=[],Pe=new o.P(p.anchorX,p.anchorY),fe=this.getPerspectiveRatio(j,Pe.x,Pe.y,M,we),De=(X?S/fe:S*fe)/o.ap,Ve={getElevation:we,labelPlaneMatrix:D,lineVertexArray:x,pitchWithMap:X,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Pe,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:ye},Ye=de(De,v,p.lineOffsetX*De,p.lineOffsetY*De,!1,p,!1,Ve);let dt=!1,wt=!1,Lt=!0;if(Ye){const Ut=.5*ae*fe+ce,zt=new o.P(-100,-100),At=new o.P(this.screenRightBoundary,this.screenBottomBoundary),ir=new pr,Pr=Ye.first,It=Ye.last;let Bt=[];for(let Lr=Pr.path.length-1;Lr>=1;Lr--)Bt.push(Pr.path[Lr]);for(let Lr=1;Lr<It.path.length;Lr++)Bt.push(It.path[Lr]);const Cr=2.5*Ut;if(V){const Lr=this.projectPathToScreenSpace(Bt,Ve,V);Bt=Lr.some(qr=>qr.signedDistanceFromCamera<=0)?[]:Lr.map(qr=>qr.point)}let qn=[];if(Bt.length>0){const Lr=Bt[0].clone(),qr=Bt[0].clone();for(let Qn=1;Qn<Bt.length;Qn++)Lr.x=Math.min(Lr.x,Bt[Qn].x),Lr.y=Math.min(Lr.y,Bt[Qn].y),qr.x=Math.max(qr.x,Bt[Qn].x),qr.y=Math.max(qr.y,Bt[Qn].y);qn=Lr.x>=zt.x&&qr.x<=At.x&&Lr.y>=zt.y&&qr.y<=At.y?[Bt]:qr.x<zt.x||Lr.x>At.x||qr.y<zt.y||Lr.y>At.y?[]:o.al([Bt],zt.x,zt.y,At.x,At.y)}for(const Lr of qn){ir.reset(Lr,.25*Ut);let qr=0;qr=ir.length<=.5*Ut?1:Math.ceil(ir.paddedLength/Cr)+1;for(let Qn=0;Qn<qr;Qn++){const ks=Qn/Math.max(qr-1,1),Ma=ir.lerp(ks),Hn=Ma.x+Mr,ao=Ma.y+Mr;ke.push(Hn,ao,Ut,0);const Vs=Hn-Ut,Cs=ao-Ut,Ws=Hn+Ut,hl=ao+Ut;if(Lt=Lt&&this.isOffscreen(Vs,Cs,Ws,hl),wt=wt||this.isInsideGrid(Vs,Cs,Ws,hl),l!=="always"&&this.grid.hitTestCircle(Hn,ao,Ut,l,ne)&&(dt=!0,!G))return{circles:[],offscreen:!1,collisionDetected:dt}}}}return{circles:!G&&dt||!wt||fe<this.perspectiveRatioCutoff?[]:ke,offscreen:Lt,collisionDetected:dt}}projectPathToScreenSpace(l,p,x){return l.map(v=>me(v.x,v.y,x,p.getElevation))}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[];let x=1/0,v=1/0,S=-1/0,j=-1/0;for(const G of l){const X=new o.P(G.x+Mr,G.y+Mr);x=Math.min(x,X.x),v=Math.min(v,X.y),S=Math.max(S,X.x),j=Math.max(j,X.y),p.push(X)}const M=this.grid.query(x,v,S,j).concat(this.ignoredGrid.query(x,v,S,j)),D={},V={};for(const G of M){const X=G.key;if(D[X.bucketInstanceId]===void 0&&(D[X.bucketInstanceId]={}),D[X.bucketInstanceId][X.featureIndex])continue;const ne=[new o.P(G.x1,G.y1),new o.P(G.x2,G.y1),new o.P(G.x2,G.y2),new o.P(G.x1,G.y2)];o.am(p,ne)&&(D[X.bucketInstanceId][X.featureIndex]=!0,V[X.bucketInstanceId]===void 0&&(V[X.bucketInstanceId]=[]),V[X.bucketInstanceId].push(X.featureIndex))}return V}insertCollisionBox(l,p,x,v,S,j){(x?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:S,collisionGroupID:j,overlapMode:p},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,p,x,v,S,j){const M=x?this.ignoredGrid:this.grid,D={bucketInstanceId:v,featureIndex:S,collisionGroupID:j,overlapMode:p};for(let V=0;V<l.length;V+=4)M.insertCircle(D,l[V],l[V+1],l[V+2])}projectAndGetPerspectiveRatio(l,p,x,v,S){let j;S?(j=[p,x,S(p,x),1],o.af(j,j,l)):(j=[p,x,0,1],Nr(j,j,l));const M=j[3];return{point:new o.P((j[0]/M+1)/2*this.transform.width+Mr,(-j[1]/M+1)/2*this.transform.height+Mr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/M*.5,isOccluded:!1,signedDistanceFromCamera:M}}getPerspectiveRatio(l,p,x,v,S){const j=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(p,x,v,S):me(p,x,l,S);return .5+this.transform.cameraToCenterDistance/j.signedDistanceFromCamera*.5}isOffscreen(l,p,x,v){return x<Mr||l>=this.screenRightBoundary||v<Mr||p>this.screenBottomBoundary}isInsideGrid(l,p,x,v){return x>=0&&l<this.gridRightBoundary&&v>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const l=o.an([]);return o.J(l,l,[-100,-100,0]),l}_projectCollisionBox(l,p,x,v,S,j,M,D,V,G){let X=new o.P(1,0),ne=new o.P(0,1);const ae=new o.P(l.anchorPointX+M[0],l.anchorPointY+M[1]);if(j&&!S){const Lt=this.projectAndGetPerspectiveRatio(x,ae.x+1,ae.y,v,V).point.sub(D.point).unit(),Ut=Math.atan(Lt.y/Lt.x)+(Lt.x<0?Math.PI:0),zt=Math.sin(Ut),At=Math.cos(Ut);X=new o.P(At,zt),ne=new o.P(-zt,At)}else if(!j&&S){const Lt=-this.transform.angle,Ut=Math.sin(Lt),zt=Math.cos(Lt);X=new o.P(zt,Ut),ne=new o.P(-Ut,zt)}let ce=D.point,ye=p;if(S){ce=ae;const Lt=this.transform.zoom-Math.floor(this.transform.zoom);ye=Math.pow(2,-Lt),ye*=this.mapProjection.getPitchedTextCorrection(this.transform,ae,v),G||(ye*=o.ac(.5+D.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}G&&(ce=ce.add(X.mult(G.x*ye)).add(ne.mult(G.y*ye)));const we=l.x1*ye,ke=l.x2*ye,Pe=(we+ke)/2,fe=l.y1*ye,De=l.y2*ye,Ve=(fe+De)/2,Ye=[{offsetX:we,offsetY:fe},{offsetX:Pe,offsetY:fe},{offsetX:ke,offsetY:fe},{offsetX:ke,offsetY:Ve},{offsetX:ke,offsetY:De},{offsetX:Pe,offsetY:De},{offsetX:we,offsetY:De},{offsetX:we,offsetY:Ve}];let dt=[];for(const{offsetX:Lt,offsetY:Ut}of Ye)dt.push(new o.P(ce.x+X.x*Lt+ne.x*Ut,ce.y+X.y*Lt+ne.y*Ut));let wt=!1;if(S){const Lt=dt.map(Ut=>this.projectAndGetPerspectiveRatio(x,Ut.x,Ut.y,v,V));wt=Lt.some(Ut=>!Ut.isOccluded),dt=Lt.map(Ut=>Ut.point)}else wt=!0;return{box:o.ao(dt),allPointsOccluded:!wt}}}function Dr(k,l,p){return l*(o.X/(k.tileSize*Math.pow(2,p-k.tileID.overscaledZ)))}class hi{constructor(l,p,x,v){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?p:-p))):v&&x?1:0,this.placed=x}isHidden(){return this.opacity===0&&!this.placed}}class Yn{constructor(l,p,x,v,S){this.text=new hi(l?l.text:null,p,x,S),this.icon=new hi(l?l.icon:null,p,v,S)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Rr{constructor(l,p,x){this.text=l,this.icon=p,this.skipFade=x}}class mn{constructor(){this.invProjMatrix=o.H(),this.viewportMatrix=o.H(),this.circles=[]}}class Fn{constructor(l,p,x,v,S){this.bucketInstanceId=l,this.featureIndex=p,this.sourceLayerIndex=x,this.bucketIndex=v,this.tileID=S}}class Pi{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const p=++this.maxGroupID;this.collisionGroups[l]={ID:p,predicate:x=>x.collisionGroupID===p}}return this.collisionGroups[l]}}function bi(k,l,p,x,v){const{horizontalAlign:S,verticalAlign:j}=o.au(k);return new o.P(-(S-.5)*l+x[0]*v,-(j-.5)*p+x[1]*v)}class ss{constructor(l,p,x,v,S,j){this.transform=l.clone(),this.terrain=x,this.collisionIndex=new Kr(this.transform,p),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new Pi(S),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=j,j&&(j.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(l){const p=this.terrain;return p?(x,v)=>p.getElevation(l,x,v):null}getBucketParts(l,p,x,v){const S=x.getBucket(p),j=x.latestFeatureIndex;if(!S||!j||p.id!==S.layerIds[0])return;const M=x.collisionBoxArray,D=S.layers[0].layout,V=S.layers[0].paint,G=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),X=x.tileSize/o.X,ne=x.tileID.toUnwrapped(),ae=this.transform.calculatePosMatrix(ne),ce=D.get("text-pitch-alignment")==="map",ye=D.get("text-rotation-alignment")==="map",we=Dr(x,1,this.transform.zoom),ke=this.collisionIndex.mapProjection.translatePosition(this.transform,x,V.get("text-translate"),V.get("text-translate-anchor")),Pe=this.collisionIndex.mapProjection.translatePosition(this.transform,x,V.get("icon-translate"),V.get("icon-translate-anchor")),fe=Di(ae,ce,ye,this.transform,we);let De=null;if(ce){const Ye=is(ae,ce,ye,this.transform,we);De=o.L([],this.transform.labelPlaneMatrix,Ye)}this.retainedQueryData[S.bucketInstanceId]=new Fn(S.bucketInstanceId,j,S.sourceLayerIndex,S.index,x.tileID);const Ve={bucket:S,layout:D,translationText:ke,translationIcon:Pe,posMatrix:ae,unwrappedTileID:ne,textLabelPlaneMatrix:fe,labelToScreenMatrix:De,scale:G,textPixelRatio:X,holdingForFade:x.holdingForFade(),collisionBoxArray:M,partiallyEvaluatedTextSize:o.ag(S.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(v)for(const Ye of S.sortKeyRanges){const{sortKey:dt,symbolInstanceStart:wt,symbolInstanceEnd:Lt}=Ye;l.push({sortKey:dt,symbolInstanceStart:wt,symbolInstanceEnd:Lt,parameters:Ve})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:Ve})}attemptAnchorPlacement(l,p,x,v,S,j,M,D,V,G,X,ne,ae,ce,ye,we,ke,Pe,fe){const De=o.aq[l.textAnchor],Ve=[l.textOffset0,l.textOffset1],Ye=bi(De,x,v,Ve,S),dt=this.collisionIndex.placeCollisionBox(p,ne,D,V,G,M,j,we,X.predicate,fe,Ye);if((!Pe||this.collisionIndex.placeCollisionBox(Pe,ne,D,V,G,M,j,ke,X.predicate,fe,Ye).placeable)&&dt.placeable){let wt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ae.crossTileID]&&this.prevPlacement.placements[ae.crossTileID]&&this.prevPlacement.placements[ae.crossTileID].text&&(wt=this.prevPlacement.variableOffsets[ae.crossTileID].anchor),ae.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ae.crossTileID]={textOffset:Ve,width:x,height:v,anchor:De,textBoxScale:S,prevAnchor:wt},this.markUsedJustification(ce,De,ae,ye),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,ye,ae),this.placedOrientations[ae.crossTileID]=ye),{shift:Ye,placedGlyphBoxes:dt}}}placeLayerBucketPart(l,p,x){const{bucket:v,layout:S,translationText:j,translationIcon:M,posMatrix:D,unwrappedTileID:V,textLabelPlaneMatrix:G,labelToScreenMatrix:X,textPixelRatio:ne,holdingForFade:ae,collisionBoxArray:ce,partiallyEvaluatedTextSize:ye,collisionGroup:we}=l.parameters,ke=S.get("text-optional"),Pe=S.get("icon-optional"),fe=o.ar(S,"text-overlap","text-allow-overlap"),De=fe==="always",Ve=o.ar(S,"icon-overlap","icon-allow-overlap"),Ye=Ve==="always",dt=S.get("text-rotation-alignment")==="map",wt=S.get("text-pitch-alignment")==="map",Lt=S.get("icon-text-fit")!=="none",Ut=S.get("symbol-z-order")==="viewport-y",zt=De&&(Ye||!v.hasIconData()||Pe),At=Ye&&(De||!v.hasTextData()||ke);!v.collisionArrays&&ce&&v.deserializeCollisionBoxes(ce);const ir=this._getTerrainElevationFunc(this.retainedQueryData[v.bucketInstanceId].tileID),Pr=(It,Bt,Cr)=>{var qn,Lr;if(p[It.crossTileID])return;if(ae)return void(this.placements[It.crossTileID]=new Rr(!1,!1,!1));let qr=!1,Qn=!1,ks=!0,Ma=null,Hn={box:null,placeable:!1,offscreen:null},ao={placeable:!1},Vs=null,Cs=null,Ws=null,hl=0,qh=0,Nm=0;Bt.textFeatureIndex?hl=Bt.textFeatureIndex:It.useRuntimeCollisionCircles&&(hl=It.featureIndex),Bt.verticalTextFeatureIndex&&(qh=Bt.verticalTextFeatureIndex);const Qh=Bt.textBox;if(Qh){const ta=os=>{let Ts=o.ah.horizontal;if(v.allowVerticalPlacement&&!os&&this.prevPlacement){const Ao=this.prevPlacement.placedOrientations[It.crossTileID];Ao&&(this.placedOrientations[It.crossTileID]=Ao,Ts=Ao,this.markUsedOrientation(v,Ts,It))}return Ts},ra=(os,Ts)=>{if(v.allowVerticalPlacement&&It.numVerticalGlyphVertices>0&&Bt.verticalTextBox){for(const Ao of v.writingModes)if(Ao===o.ah.vertical?(Hn=Ts(),ao=Hn):Hn=os(),Hn&&Hn.placeable)break}else Hn=os()},Pc=It.textAnchorOffsetStartIndex,Ia=It.textAnchorOffsetEndIndex;if(Ia===Pc){const os=(Ts,Ao)=>{const Gr=this.collisionIndex.placeCollisionBox(Ts,fe,ne,D,V,wt,dt,j,we.predicate,ir);return Gr&&Gr.placeable&&(this.markUsedOrientation(v,Ao,It),this.placedOrientations[It.crossTileID]=Ao),Gr};ra(()=>os(Qh,o.ah.horizontal),()=>{const Ts=Bt.verticalTextBox;return v.allowVerticalPlacement&&It.numVerticalGlyphVertices>0&&Ts?os(Ts,o.ah.vertical):{box:null,offscreen:null}}),ta(Hn&&Hn.placeable)}else{let os=o.aq[(Lr=(qn=this.prevPlacement)===null||qn===void 0?void 0:qn.variableOffsets[It.crossTileID])===null||Lr===void 0?void 0:Lr.anchor];const Ts=(Gr,Iu,Hh)=>{const Gh=Gr.x2-Gr.x1,u_=Gr.y2-Gr.y1,LC=It.textBoxScale,h_=Lt&&Ve==="never"?Iu:null;let jc=null,d_=fe==="never"?1:2,Wm="never";os&&d_++;for(let Bf=0;Bf<d_;Bf++){for(let Um=Pc;Um<Ia;Um++){const qm=v.textAnchorOffsets.get(Um);if(os&&qm.textAnchor!==os)continue;const Xh=this.attemptAnchorPlacement(qm,Gr,Gh,u_,LC,dt,wt,ne,D,V,we,Wm,It,v,Hh,j,M,h_,ir);if(Xh&&(jc=Xh.placedGlyphBoxes,jc&&jc.placeable))return qr=!0,Ma=Xh.shift,jc}os?os=null:Wm=fe}return x&&!jc&&(jc={box:this.collisionIndex.placeCollisionBox(Qh,"always",ne,D,V,wt,dt,j,we.predicate,ir,new o.P(0,0)).box,offscreen:!1,placeable:!1}),jc};ra(()=>Ts(Qh,Bt.iconBox,o.ah.horizontal),()=>{const Gr=Bt.verticalTextBox;return v.allowVerticalPlacement&&(!Hn||!Hn.placeable)&&It.numVerticalGlyphVertices>0&&Gr?Ts(Gr,Bt.verticalIconBox,o.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Hn&&(qr=Hn.placeable,ks=Hn.offscreen);const Ao=ta(Hn&&Hn.placeable);if(!qr&&this.prevPlacement){const Gr=this.prevPlacement.variableOffsets[It.crossTileID];Gr&&(this.variableOffsets[It.crossTileID]=Gr,this.markUsedJustification(v,Gr.anchor,It,Ao))}}}if(Vs=Hn,qr=Vs&&Vs.placeable,ks=Vs&&Vs.offscreen,It.useRuntimeCollisionCircles){const ta=v.text.placedSymbolArray.get(It.centerJustifiedTextSymbolIndex),ra=o.ai(v.textSizeData,ye,ta),Pc=S.get("text-padding");Cs=this.collisionIndex.placeCollisionCircles(fe,ta,v.lineVertexArray,v.glyphOffsetArray,ra,D,V,G,X,x,wt,we.predicate,It.collisionCircleDiameter,Pc,j,ir),Cs.circles.length&&Cs.collisionDetected&&!x&&o.w("Collisions detected, but collision boxes are not shown"),qr=De||Cs.circles.length>0&&!Cs.collisionDetected,ks=ks&&Cs.offscreen}if(Bt.iconFeatureIndex&&(Nm=Bt.iconFeatureIndex),Bt.iconBox){const ta=ra=>this.collisionIndex.placeCollisionBox(ra,Ve,ne,D,V,wt,dt,M,we.predicate,ir,Lt&&Ma?Ma:void 0);ao&&ao.placeable&&Bt.verticalIconBox?(Ws=ta(Bt.verticalIconBox),Qn=Ws.placeable):(Ws=ta(Bt.iconBox),Qn=Ws.placeable),ks=ks&&Ws.offscreen}const ea=ke||It.numHorizontalGlyphVertices===0&&It.numVerticalGlyphVertices===0,Vm=Pe||It.numIconVertices===0;ea||Vm?Vm?ea||(Qn=Qn&&qr):qr=Qn&&qr:Qn=qr=Qn&&qr;const nx=Qn&&Ws.placeable;if(qr&&Vs.placeable&&this.collisionIndex.insertCollisionBox(Vs.box,fe,S.get("text-ignore-placement"),v.bucketInstanceId,ao&&ao.placeable&&qh?qh:hl,we.ID),nx&&this.collisionIndex.insertCollisionBox(Ws.box,Ve,S.get("icon-ignore-placement"),v.bucketInstanceId,Nm,we.ID),Cs&&qr&&this.collisionIndex.insertCollisionCircles(Cs.circles,fe,S.get("text-ignore-placement"),v.bucketInstanceId,hl,we.ID),x&&this.storeCollisionData(v.bucketInstanceId,Cr,Bt,Vs,Ws,Cs),It.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[It.crossTileID]=new Rr(qr||zt,Qn||At,ks||v.justReloaded),p[It.crossTileID]=!0};if(Ut){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const It=v.getSortedSymbolIndexes(this.transform.angle);for(let Bt=It.length-1;Bt>=0;--Bt){const Cr=It[Bt];Pr(v.symbolInstances.get(Cr),v.collisionArrays[Cr],Cr)}}else for(let It=l.symbolInstanceStart;It<l.symbolInstanceEnd;It++)Pr(v.symbolInstances.get(It),v.collisionArrays[It],It);if(x&&v.bucketInstanceId in this.collisionCircleArrays){const It=this.collisionCircleArrays[v.bucketInstanceId];o.as(It.invProjMatrix,D),It.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}storeCollisionData(l,p,x,v,S,j){if(x.textBox||x.iconBox){let M,D;this.collisionBoxArrays.has(l)?M=this.collisionBoxArrays.get(l):(M=new Map,this.collisionBoxArrays.set(l,M)),M.has(p)?D=M.get(p):(D={text:null,icon:null},M.set(p,D)),x.textBox&&(D.text=v.box),x.iconBox&&(D.icon=S.box)}if(j){let M=this.collisionCircleArrays[l];M===void 0&&(M=this.collisionCircleArrays[l]=new mn);for(let D=0;D<j.circles.length;D+=4)M.circles.push(j.circles[D+0]),M.circles.push(j.circles[D+1]),M.circles.push(j.circles[D+2]),M.circles.push(j.collisionDetected?1:0)}}markUsedJustification(l,p,x,v){let S;S=v===o.ah.vertical?x.verticalPlacedTextSymbolIndex:{left:x.leftJustifiedTextSymbolIndex,center:x.centerJustifiedTextSymbolIndex,right:x.rightJustifiedTextSymbolIndex}[o.at(p)];const j=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex,x.verticalPlacedTextSymbolIndex];for(const M of j)M>=0&&(l.text.placedSymbolArray.get(M).crossTileID=S>=0&&M!==S?0:x.crossTileID)}markUsedOrientation(l,p,x){const v=p===o.ah.horizontal||p===o.ah.horizontalOnly?p:0,S=p===o.ah.vertical?p:0,j=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex];for(const M of j)l.text.placedSymbolArray.get(M).placedOrientation=v;x.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(x.verticalPlacedTextSymbolIndex).placedOrientation=S)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let x=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const v=p?p.symbolFadeChange(l):1,S=p?p.opacities:{},j=p?p.variableOffsets:{},M=p?p.placedOrientations:{};for(const D in this.placements){const V=this.placements[D],G=S[D];G?(this.opacities[D]=new Yn(G,v,V.text,V.icon),x=x||V.text!==G.text.placed||V.icon!==G.icon.placed):(this.opacities[D]=new Yn(null,v,V.text,V.icon,V.skipFade),x=x||V.text||V.icon)}for(const D in S){const V=S[D];if(!this.opacities[D]){const G=new Yn(V,v,!1,!1);G.isHidden()||(this.opacities[D]=G,x=x||V.text.placed||V.icon.placed)}}for(const D in j)this.variableOffsets[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.variableOffsets[D]=j[D]);for(const D in M)this.placedOrientations[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.placedOrientations[D]=M[D]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");x?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:l)}updateLayerOpacities(l,p){const x={};for(const v of p){const S=v.getBucket(l);S&&v.latestFeatureIndex&&l.id===S.layerIds[0]&&this.updateBucketOpacities(S,v.tileID,x,v.collisionBoxArray)}}updateBucketOpacities(l,p,x,v){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const S=l.layers[0],j=S.layout,M=new Yn(null,0,!1,!1,!0),D=j.get("text-allow-overlap"),V=j.get("icon-allow-overlap"),G=S._unevaluatedLayout.hasValue("text-variable-anchor")||S._unevaluatedLayout.hasValue("text-variable-anchor-offset"),X=j.get("text-rotation-alignment")==="map",ne=j.get("text-pitch-alignment")==="map",ae=j.get("icon-text-fit")!=="none",ce=new Yn(null,0,D&&(V||!l.hasIconData()||j.get("icon-optional")),V&&(D||!l.hasTextData()||j.get("text-optional")),!0);!l.collisionArrays&&v&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(v);const ye=(ke,Pe,fe)=>{for(let De=0;De<Pe/4;De++)ke.opacityVertexArray.emplaceBack(fe);ke.hasVisibleVertices=ke.hasVisibleVertices||fe!==Sc},we=this.collisionBoxArrays.get(l.bucketInstanceId);for(let ke=0;ke<l.symbolInstances.length;ke++){const Pe=l.symbolInstances.get(ke),{numHorizontalGlyphVertices:fe,numVerticalGlyphVertices:De,crossTileID:Ve}=Pe;let Ye=this.opacities[Ve];x[Ve]?Ye=M:Ye||(Ye=ce,this.opacities[Ve]=Ye),x[Ve]=!0;const dt=Pe.numIconVertices>0,wt=this.placedOrientations[Pe.crossTileID],Lt=wt===o.ah.vertical,Ut=wt===o.ah.horizontal||wt===o.ah.horizontalOnly;if(fe>0||De>0){const At=bs(Ye.text);ye(l.text,fe,Lt?Sc:At),ye(l.text,De,Ut?Sc:At);const ir=Ye.text.isHidden();[Pe.rightJustifiedTextSymbolIndex,Pe.centerJustifiedTextSymbolIndex,Pe.leftJustifiedTextSymbolIndex].forEach(Bt=>{Bt>=0&&(l.text.placedSymbolArray.get(Bt).hidden=ir||Lt?1:0)}),Pe.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(Pe.verticalPlacedTextSymbolIndex).hidden=ir||Ut?1:0);const Pr=this.variableOffsets[Pe.crossTileID];Pr&&this.markUsedJustification(l,Pr.anchor,Pe,wt);const It=this.placedOrientations[Pe.crossTileID];It&&(this.markUsedJustification(l,"left",Pe,It),this.markUsedOrientation(l,It,Pe))}if(dt){const At=bs(Ye.icon),ir=!(ae&&Pe.verticalPlacedIconSymbolIndex&&Lt);Pe.placedIconSymbolIndex>=0&&(ye(l.icon,Pe.numIconVertices,ir?At:Sc),l.icon.placedSymbolArray.get(Pe.placedIconSymbolIndex).hidden=Ye.icon.isHidden()),Pe.verticalPlacedIconSymbolIndex>=0&&(ye(l.icon,Pe.numVerticalIconVertices,ir?Sc:At),l.icon.placedSymbolArray.get(Pe.verticalPlacedIconSymbolIndex).hidden=Ye.icon.isHidden())}const zt=we&&we.has(ke)?we.get(ke):{text:null,icon:null};if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const At=l.collisionArrays[ke];if(At){let ir=new o.P(0,0);if(At.textBox||At.verticalTextBox){let Pr=!0;if(G){const It=this.variableOffsets[Ve];It?(ir=bi(It.anchor,It.width,It.height,It.textOffset,It.textBoxScale),X&&ir._rotate(ne?this.transform.angle:-this.transform.angle)):Pr=!1}if(At.textBox||At.verticalTextBox){let It;At.textBox&&(It=Lt),At.verticalTextBox&&(It=Ut),ja(l.textCollisionBox.collisionVertexArray,Ye.text.placed,!Pr||It,zt.text,ir.x,ir.y)}}if(At.iconBox||At.verticalIconBox){const Pr=!!(!Ut&&At.verticalIconBox);let It;At.iconBox&&(It=Pr),At.verticalIconBox&&(It=!Pr),ja(l.iconCollisionBox.collisionVertexArray,Ye.icon.placed,It,zt.icon,ae?ir.x:0,ae?ir.y:0)}}}}if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);if(l.bucketInstanceId in this.collisionCircleArrays){const ke=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=ke.invProjMatrix,l.placementViewportMatrix=ke.viewportMatrix,l.collisionCircleArray=ke.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,p){const x=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*x>l}setStale(){this.stale=!0}}function ja(k,l,p,x,v,S){x&&x.length!==0||(x=[0,0,0,0]);const j=x[0]-Mr,M=x[1]-Mr,D=x[2]-Mr,V=x[3]-Mr;k.emplaceBack(l?1:0,p?1:0,v||0,S||0,j,M),k.emplaceBack(l?1:0,p?1:0,v||0,S||0,D,M),k.emplaceBack(l?1:0,p?1:0,v||0,S||0,D,V),k.emplaceBack(l?1:0,p?1:0,v||0,S||0,j,V)}const an=Math.pow(2,25),yf=Math.pow(2,24),wc=Math.pow(2,17),vs=Math.pow(2,16),$s=Math.pow(2,9),b0=Math.pow(2,8),oo=Math.pow(2,1);function bs(k){if(k.opacity===0&&!k.placed)return 0;if(k.opacity===1&&k.placed)return 4294967295;const l=k.placed?1:0,p=Math.floor(127*k.opacity);return p*an+l*yf+p*wc+l*vs+p*$s+l*b0+p*oo+l}const Sc=0;function Ul(){return{isOccluded:(k,l,p)=>!1,getPitchedTextCorrection:(k,l,p)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(k,l,p,x){throw new Error("Not implemented.")},translatePosition:(k,l,p,x)=>function(v,S,j,M,D=!1){if(!j[0]&&!j[1])return[0,0];const V=D?M==="map"?v.angle:0:M==="viewport"?-v.angle:0;if(V){const G=Math.sin(V),X=Math.cos(V);j=[j[0]*X-j[1]*G,j[0]*G+j[1]*X]}return[D?j[0]:Dr(S,j[0],v.zoom),D?j[1]:Dr(S,j[1],v.zoom)]}(k,l,p,x),getCircleRadiusCorrection:k=>1}}class di{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,p,x,v,S){const j=this._bucketParts;for(;this._currentTileIndex<l.length;)if(p.getBucketParts(j,v,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,j.sort((M,D)=>M.sortKey-D.sortKey));this._currentPartIndex<j.length;)if(p.placeLayerBucketPart(j[this._currentPartIndex],this._seenCrossTileIDs,x),this._currentPartIndex++,S())return!0;return!1}}class wu{constructor(l,p,x,v,S,j,M,D){this.placement=new ss(l,Ul(),p,j,M,D),this._currentPlacementIndex=x.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(l,p,x){const v=b.now(),S=()=>!this._forceFullPlacement&&b.now()-v>2;for(;this._currentPlacementIndex>=0;){const j=p[l[this._currentPlacementIndex]],M=this.placement.collisionIndex.transform.zoom;if(j.type==="symbol"&&(!j.minzoom||j.minzoom<=M)&&(!j.maxzoom||j.maxzoom>M)){if(this._inProgressLayer||(this._inProgressLayer=new di(j)),this._inProgressLayer.continuePlacement(x[j.source],this.placement,this._showCollisionBoxes,j,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Co=512/o.X/2;class si{constructor(l,p,x){this.tileID=l,this.bucketInstanceId=x,this._symbolsByKey={};const v=new Map;for(let S=0;S<p.length;S++){const j=p.get(S),M=j.key,D=v.get(M);D?D.push(j):v.set(M,[j])}for(const[S,j]of v){const M={positions:j.map(D=>({x:Math.floor(D.anchorX*Co),y:Math.floor(D.anchorY*Co)})),crossTileIDs:j.map(D=>D.crossTileID)};if(M.positions.length>128){const D=new o.av(M.positions.length,16,Uint16Array);for(const{x:V,y:G}of M.positions)D.add(V,G);D.finish(),delete M.positions,M.index=D}this._symbolsByKey[S]=M}}getScaledCoordinates(l,p){const{x,y:v,z:S}=this.tileID.canonical,{x:j,y:M,z:D}=p.canonical,V=Co/Math.pow(2,D-S),G=(M*o.X+l.anchorY)*V,X=v*o.X*Co;return{x:Math.floor((j*o.X+l.anchorX)*V-x*o.X*Co),y:Math.floor(G-X)}}findMatches(l,p,x){const v=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let S=0;S<l.length;S++){const j=l.get(S);if(j.crossTileID)continue;const M=this._symbolsByKey[j.key];if(!M)continue;const D=this.getScaledCoordinates(j,p);if(M.index){const V=M.index.range(D.x-v,D.y-v,D.x+v,D.y+v).sort();for(const G of V){const X=M.crossTileIDs[G];if(!x[X]){x[X]=!0,j.crossTileID=X;break}}}else if(M.positions)for(let V=0;V<M.positions.length;V++){const G=M.positions[V],X=M.crossTileIDs[V];if(Math.abs(G.x-D.x)<=v&&Math.abs(G.y-D.y)<=v&&!x[X]){x[X]=!0,j.crossTileID=X;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:l})=>l)}}class Sh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class To{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const p=Math.round((l-this.lng)/360);if(p!==0)for(const x in this.indexes){const v=this.indexes[x],S={};for(const j in v){const M=v[j];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+p),S[M.tileID.key]=M}this.indexes[x]=S}this.lng=l}addBucket(l,p,x){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let S=0;S<p.symbolInstances.length;S++)p.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const v=this.usedCrossTileIDs[l.overscaledZ];for(const S in this.indexes){const j=this.indexes[S];if(Number(S)>l.overscaledZ)for(const M in j){const D=j[M];D.tileID.isChildOf(l)&&D.findMatches(p.symbolInstances,l,v)}else{const M=j[l.scaledTo(Number(S)).key];M&&M.findMatches(p.symbolInstances,l,v)}}for(let S=0;S<p.symbolInstances.length;S++){const j=p.symbolInstances.get(S);j.crossTileID||(j.crossTileID=x.generate(),v[j.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new si(l,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(l,p){for(const x of p.getCrossTileIDsLists())for(const v of x)delete this.usedCrossTileIDs[l][v]}removeStaleBuckets(l){let p=!1;for(const x in this.indexes){const v=this.indexes[x];for(const S in v)l[v[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,v[S]),delete v[S],p=!0)}return p}}class xf{constructor(){this.layerIndexes={},this.crossTileIDs=new Sh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,p,x){let v=this.layerIndexes[l.id];v===void 0&&(v=this.layerIndexes[l.id]=new To);let S=!1;const j={};v.handleWrapJump(x);for(const M of p){const D=M.getBucket(l);D&&l.id===D.layerIds[0]&&(D.bucketInstanceId||(D.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(M.tileID,D,this.crossTileIDs)&&(S=!0),j[D.bucketInstanceId]=!0)}return v.removeStaleBuckets(j)&&(S=!0),S}pruneUnusedLayers(l){const p={};l.forEach(x=>{p[x]=!0});for(const x in this.layerIndexes)p[x]||delete this.layerIndexes[x]}}const Oo=(k,l)=>o.t(k,l&&l.filter(p=>p.identifier!=="source.canvas")),kh=o.aw();class kc extends o.E{constructor(l,p={}){super(),this._rtlPluginLoaded=()=>{for(const x in this.sourceCaches){const v=this.sourceCaches[x].getSource().type;v!=="vector"&&v!=="geojson"||this.sourceCaches[x].reload()}},this.map=l,this.dispatcher=new Et(Mt(),l._getMapId()),this.dispatcher.registerMessageHandler("GG",(x,v)=>this.getGlyphs(x,v)),this.dispatcher.registerMessageHandler("GI",(x,v)=>this.getImages(x,v)),this.imageManager=new Ee,this.imageManager.setEventedParent(this),this.glyphManager=new Be(l._requestManager,p.localIdeographFontFamily),this.lineAtlas=new Re(256,512),this.crossTileSymbolIndex=new xf,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.ay()),Wt().on(Qe,this._rtlPluginLoaded),this.on("data",x=>{if(x.dataType!=="source"||x.sourceDataType!=="metadata")return;const v=this.sourceCaches[x.sourceId];if(!v)return;const S=v.getSource();if(S&&S.vectorLayerIds)for(const j in this._layers){const M=this._layers[j];M.source===S.id&&this._validateLayer(M)}})}loadURL(l,p={},x){this.fire(new o.k("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const v=this.map._requestManager.transformRequest(l,"Style");this._loadStyleRequest=new AbortController;const S=this._loadStyleRequest;o.h(v,this._loadStyleRequest).then(j=>{this._loadStyleRequest=null,this._load(j.data,p,x)}).catch(j=>{this._loadStyleRequest=null,j&&!S.signal.aborted&&this.fire(new o.j(j))})}loadJSON(l,p={},x){this.fire(new o.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(l,p,x)}).catch(()=>{})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(kh,{validate:!1})}_load(l,p,x){var v;const S=p.transformStyle?p.transformStyle(x,l):l;if(!p.validate||!Oo(this,o.u(S))){this._loaded=!0,this.stylesheet=S;for(const j in S.sources)this.addSource(j,S.sources[j],{validate:!1});S.sprite?this._loadSprite(S.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(S.glyphs),this._createLayers(),this.light=new Le(this.stylesheet.light),this.sky=new Oe(this.stylesheet.sky),this.map.setTerrain((v=this.stylesheet.terrain)!==null&&v!==void 0?v:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){const l=o.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",l),this._order=l.map(p=>p.id),this._layers={},this._serializedLayers=null;for(const p of l){const x=o.aA(p);x.setEventedParent(this,{layer:{id:p.id}}),this._layers[p.id]=x}}_loadSprite(l,p=!1,x=void 0){let v;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(S,j,M,D){return o._(this,void 0,void 0,function*(){const V=re(S),G=M>1?"@2x":"",X={},ne={};for(const{id:ae,url:ce}of V){const ye=j.transformRequest(he(ce,G,".json"),"SpriteJSON");X[ae]=o.h(ye,D);const we=j.transformRequest(he(ce,G,".png"),"SpriteImage");ne[ae]=L.getImage(we,D)}return yield Promise.all([...Object.values(X),...Object.values(ne)]),function(ae,ce){return o._(this,void 0,void 0,function*(){const ye={};for(const we in ae){ye[we]={};const ke=b.getImageCanvasContext((yield ce[we]).data),Pe=(yield ae[we]).data;for(const fe in Pe){const{width:De,height:Ve,x:Ye,y:dt,sdf:wt,pixelRatio:Lt,stretchX:Ut,stretchY:zt,content:At,textFitWidth:ir,textFitHeight:Pr}=Pe[fe];ye[we][fe]={data:null,pixelRatio:Lt,sdf:wt,stretchX:Ut,stretchY:zt,content:At,textFitWidth:ir,textFitHeight:Pr,spriteData:{width:De,height:Ve,x:Ye,y:dt,context:ke}}}}return ye})}(X,ne)})}(l,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(S=>{if(this._spriteRequest=null,S)for(const j in S){this._spritesImagesIds[j]=[];const M=this._spritesImagesIds[j]?this._spritesImagesIds[j].filter(D=>!(D in S)):[];for(const D of M)this.imageManager.removeImage(D),this._changedImages[D]=!0;for(const D in S[j]){const V=j==="default"?D:`${j}:${D}`;this._spritesImagesIds[j].push(V),V in this.imageManager.images?this.imageManager.updateImage(V,S[j][D],!1):this.imageManager.addImage(V,S[j][D]),p&&(this._changedImages[V]=!0)}}}).catch(S=>{this._spriteRequest=null,v=S,this.fire(new o.j(v))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),x&&x(v)})}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(l){const p=this.sourceCaches[l.source];if(!p)return;const x=l.sourceLayer;if(!x)return;const v=p.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(x)===-1)&&this.fire(new o.j(new Error(`Source layer "${x}" does not exist on source "${v.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l,p=!1){const x=this._serializedAllLayers();if(!l||l.length===0)return Object.values(p?o.aB(x):x);const v=[];for(const S of l)if(x[S]){const j=p?o.aB(x[S]):x[S];v.push(j)}return v}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const p=Object.keys(this._layers);for(const x of p){const v=this._layers[x];v.type!=="custom"&&(l[x]=v.serialize())}return l}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const l in this.sourceCaches)if(this.sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const p=this._changed;if(p){const v=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(v.length||S.length)&&this._updateWorkerLayers(v,S);for(const j in this._updatedSources){const M=this._updatedSources[j];if(M==="reload")this._reloadSource(j);else{if(M!=="clear")throw new Error(`Invalid action ${M}`);this._clearSource(j)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const j in this._updatedPaintProps)this._layers[j].updateTransitions(l);this.light.updateTransitions(l),this.sky.updateTransitions(l),this._resetUpdates()}const x={};for(const v in this.sourceCaches){const S=this.sourceCaches[v];x[v]=S.used,S.used=!1}for(const v of this._order){const S=this._layers[v];S.recalculate(l,this._availableImages),!S.isHidden(l.zoom)&&S.source&&(this.sourceCaches[S.source].used=!0)}for(const v in x){const S=this.sourceCaches[v];!!x[v]!=!!S.used&&S.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(l),this.sky.recalculate(l),this.z=l.zoom,p&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(l,!1),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,p={}){var x;this._checkLoaded();const v=this.serialize();if(l=p.transformStyle?p.transformStyle(v,l):l,((x=p.validate)===null||x===void 0||x)&&Oo(this,o.u(l)))return!1;(l=o.aB(l)).layers=o.az(l.layers);const S=o.aC(v,l),j=this._getOperationsToPerform(S);if(j.unimplemented.length>0)throw new Error(`Unimplemented: ${j.unimplemented.join(", ")}.`);if(j.operations.length===0)return!1;for(const M of j.operations)M();return this.stylesheet=l,this._serializedLayers=null,!0}_getOperationsToPerform(l){const p=[],x=[];for(const v of l)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":p.push(()=>this.addLayer.apply(this,v.args));break;case"removeLayer":p.push(()=>this.removeLayer.apply(this,v.args));break;case"setPaintProperty":p.push(()=>this.setPaintProperty.apply(this,v.args));break;case"setLayoutProperty":p.push(()=>this.setLayoutProperty.apply(this,v.args));break;case"setFilter":p.push(()=>this.setFilter.apply(this,v.args));break;case"addSource":p.push(()=>this.addSource.apply(this,v.args));break;case"removeSource":p.push(()=>this.removeSource.apply(this,v.args));break;case"setLayerZoomRange":p.push(()=>this.setLayerZoomRange.apply(this,v.args));break;case"setLight":p.push(()=>this.setLight.apply(this,v.args));break;case"setGeoJSONSourceData":p.push(()=>this.setGeoJSONSourceData.apply(this,v.args));break;case"setGlyphs":p.push(()=>this.setGlyphs.apply(this,v.args));break;case"setSprite":p.push(()=>this.setSprite.apply(this,v.args));break;case"setSky":p.push(()=>this.setSky.apply(this,v.args));break;case"setTerrain":p.push(()=>this.map.setTerrain.apply(this,v.args));break;case"setTransition":p.push(()=>{});break;default:x.push(v.command)}return{operations:p,unimplemented:x}}addImage(l,p){if(this.getImage(l))return this.fire(new o.j(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,p),this._afterImageUpdated(l)}updateImage(l,p){this.imageManager.updateImage(l,p)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new o.j(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,p,x={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(o.u.source,`sources.${l}`,p,null,x))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const v=this.sourceCaches[l]=new Jt(l,p,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:l})),v.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const x in this._layers)if(this._layers[x].source===l)return this.fire(new o.j(new Error(`Source "${l}" cannot be removed while layer "${x}" is using it.`)));const p=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],p.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,p){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const x=this.sourceCaches[l].getSource();if(x.type!=="geojson")throw new Error(`geojsonSource.type is ${x.type}, which is !== 'geojson`);x.setData(p),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,p,x={}){this._checkLoaded();const v=l.id;if(this.getLayer(v))return void this.fire(new o.j(new Error(`Layer "${v}" already exists on this map.`)));let S;if(l.type==="custom"){if(Oo(this,o.aD(l)))return;S=o.aA(l)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(v,l.source),l=o.aB(l),l=o.e(l,{source:v})),this._validate(o.u.layer,`layers.${v}`,l,{arrayIndex:-1},x))return;S=o.aA(l),this._validateLayer(S),S.setEventedParent(this,{layer:{id:v}})}const j=p?this._order.indexOf(p):this._order.length;if(p&&j===-1)this.fire(new o.j(new Error(`Cannot add layer "${v}" before non-existing layer "${p}".`)));else{if(this._order.splice(j,0,v),this._layerOrderChanged=!0,this._layers[v]=S,this._removedLayers[v]&&S.source&&S.type!=="custom"){const M=this._removedLayers[v];delete this._removedLayers[v],M.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.sourceCaches[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}moveLayer(l,p){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new o.j(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===p)return;const x=this._order.indexOf(l);this._order.splice(x,1);const v=p?this._order.indexOf(p):this._order.length;p&&v===-1?this.fire(new o.j(new Error(`Cannot move layer "${l}" before non-existing layer "${p}".`))):(this._order.splice(v,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const p=this._layers[l];if(!p)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${l}".`)));p.setEventedParent(null);const x=this._order.indexOf(l);this._order.splice(x,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=p,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],p.onRemove&&p.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,p,x){this._checkLoaded();const v=this.getLayer(l);v?v.minzoom===p&&v.maxzoom===x||(p!=null&&(v.minzoom=p),x!=null&&(v.maxzoom=x),this._updateLayer(v)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,p,x={}){this._checkLoaded();const v=this.getLayer(l);if(v){if(!o.aE(v.filter,p))return p==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(o.u.filter,`layers.${v.id}.filter`,p,null,x)||(v.filter=o.aB(p),this._updateLayer(v)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return o.aB(this.getLayer(l).filter)}setLayoutProperty(l,p,x,v={}){this._checkLoaded();const S=this.getLayer(l);S?o.aE(S.getLayoutProperty(p),x)||(S.setLayoutProperty(p,x,v),this._updateLayer(S)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,p){const x=this.getLayer(l);if(x)return x.getLayoutProperty(p);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,p,x,v={}){this._checkLoaded();const S=this.getLayer(l);S?o.aE(S.getPaintProperty(p),x)||(S.setPaintProperty(p,x,v)&&this._updateLayer(S),this._changed=!0,this._updatedPaintProps[l]=!0,this._serializedLayers=null):this.fire(new o.j(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,p){return this.getLayer(l).getPaintProperty(p)}setFeatureState(l,p){this._checkLoaded();const x=l.source,v=l.sourceLayer,S=this.sourceCaches[x];if(S===void 0)return void this.fire(new o.j(new Error(`The source '${x}' does not exist in the map's style.`)));const j=S.getSource().type;j==="geojson"&&v?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):j!=="vector"||v?(l.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),S.setFeatureState(v,l.id,p)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,p){this._checkLoaded();const x=l.source,v=this.sourceCaches[x];if(v===void 0)return void this.fire(new o.j(new Error(`The source '${x}' does not exist in the map's style.`)));const S=v.getSource().type,j=S==="vector"?l.sourceLayer:void 0;S!=="vector"||j?p&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(j,l.id,p):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const p=l.source,x=l.sourceLayer,v=this.sourceCaches[p];if(v!==void 0)return v.getSource().type!=="vector"||x?(l.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),v.getFeatureState(x,l.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=o.aF(this.sourceCaches,S=>S.serialize()),p=this._serializeByIds(this._order,!0),x=this.map.getTerrain()||void 0,v=this.stylesheet;return o.aG({version:v.version,name:v.name,metadata:v.metadata,light:v.light,sky:v.sky,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,sources:l,layers:p,terrain:x},S=>S!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const p=j=>this._layers[j].type==="fill-extrusion",x={},v=[];for(let j=this._order.length-1;j>=0;j--){const M=this._order[j];if(p(M)){x[M]=j;for(const D of l){const V=D[M];if(V)for(const G of V)v.push(G)}}}v.sort((j,M)=>M.intersectionZ-j.intersectionZ);const S=[];for(let j=this._order.length-1;j>=0;j--){const M=this._order[j];if(p(M))for(let D=v.length-1;D>=0;D--){const V=v[D].feature;if(x[V.layer.id]<j)break;S.push(V),v.pop()}else for(const D of l){const V=D[M];if(V)for(const G of V)S.push(G.feature)}}return S}queryRenderedFeatures(l,p,x){p&&p.filter&&this._validate(o.u.filter,"queryRenderedFeatures.filter",p.filter,null,p);const v={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new o.j(new Error("parameters.layers must be an Array."))),[];for(const M of p.layers){const D=this._layers[M];if(!D)return this.fire(new o.j(new Error(`The layer '${M}' does not exist in the map's style and cannot be queried for features.`))),[];v[D.source]=!0}}const S=[];p.availableImages=this._availableImages;const j=this._serializedAllLayers();for(const M in this.sourceCaches)p.layers&&!v[M]||S.push(Kt(this.sourceCaches[M],this._layers,j,l,p,x));return this.placement&&S.push(function(M,D,V,G,X,ne,ae){const ce={},ye=ne.queryRenderedSymbols(G),we=[];for(const ke of Object.keys(ye).map(Number))we.push(ae[ke]);we.sort(vt);for(const ke of we){const Pe=ke.featureIndex.lookupSymbolFeatures(ye[ke.bucketInstanceId],D,ke.bucketIndex,ke.sourceLayerIndex,X.filter,X.layers,X.availableImages,M);for(const fe in Pe){const De=ce[fe]=ce[fe]||[],Ve=Pe[fe];Ve.sort((Ye,dt)=>{const wt=ke.featureSortOrder;if(wt){const Lt=wt.indexOf(Ye.featureIndex);return wt.indexOf(dt.featureIndex)-Lt}return dt.featureIndex-Ye.featureIndex});for(const Ye of Ve)De.push(Ye)}}for(const ke in ce)ce[ke].forEach(Pe=>{const fe=Pe.feature,De=V[M[ke].source].getFeatureState(fe.layer["source-layer"],fe.id);fe.source=fe.layer.source,fe.layer["source-layer"]&&(fe.sourceLayer=fe.layer["source-layer"]),fe.state=De});return ce}(this._layers,j,this.sourceCaches,l,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(l,p){p&&p.filter&&this._validate(o.u.filter,"querySourceFeatures.filter",p.filter,null,p);const x=this.sourceCaches[l];return x?function(v,S){const j=v.getRenderableIds().map(V=>v.getTileByID(V)),M=[],D={};for(let V=0;V<j.length;V++){const G=j[V],X=G.tileID.canonical.key;D[X]||(D[X]=!0,G.querySourceFeatures(M,S))}return M}(x,p):[]}getLight(){return this.light.getLight()}setLight(l,p={}){this._checkLoaded();const x=this.light.getLight();let v=!1;for(const j in l)if(!o.aE(l[j],x[j])){v=!0;break}if(!v)return;const S={now:b.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,p),this.light.updateTransitions(S)}getSky(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.sky}setSky(l,p={}){const x=this.getSky();let v=!1;if(!l&&!x)return;if(l&&!x)v=!0;else if(!l&&x)v=!0;else for(const j in l)if(!o.aE(l[j],x[j])){v=!0;break}if(!v)return;const S={now:b.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=l,this.sky.setSky(l,p),this.sky.updateTransitions(S)}_validate(l,p,x,v,S={}){return(!S||S.validate!==!1)&&Oo(this,l.call(o.u,o.e({key:p,style:this.serialize(),value:x,styleSpec:o.v},v)))}_remove(l=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Wt().off(Qe,this._rtlPluginLoaded);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.sourceCaches){const x=this.sourceCaches[p];x.setEventedParent(null),x.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),l&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(l)}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const p in this.sourceCaches)this.sourceCaches[p].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,p,x,v,S=!1){let j=!1,M=!1;const D={};for(const V of this._order){const G=this._layers[V];if(G.type!=="symbol")continue;if(!D[G.source]){const ne=this.sourceCaches[G.source];D[G.source]=ne.getRenderableIds(!0).map(ae=>ne.getTileByID(ae)).sort((ae,ce)=>ce.tileID.overscaledZ-ae.tileID.overscaledZ||(ae.tileID.isLessThan(ce.tileID)?-1:1))}const X=this.crossTileSymbolIndex.addLayer(G,D[G.source],l.center.lng);j=j||X}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||x===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.now(),l.zoom))&&(this.pauseablePlacement=new wu(l,this.map.terrain,this._order,S,p,x,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,D),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.now()),M=!0),j&&this.pauseablePlacement.placement.setStale()),M||j)for(const V of this._order){const G=this._layers[V];G.type==="symbol"&&this.placement.updateLayerOpacities(G,D[G.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,p){return o._(this,void 0,void 0,function*(){const x=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();const v=this.sourceCaches[p.source];return v&&v.setDependencies(p.tileID.key,p.type,p.icons),x})}getGlyphs(l,p){return o._(this,void 0,void 0,function*(){const x=yield this.glyphManager.getGlyphs(p.stacks),v=this.sourceCaches[p.source];return v&&v.setDependencies(p.tileID.key,p.type,[""]),x})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,p={}){this._checkLoaded(),l&&this._validate(o.u.glyphs,"glyphs",l,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}addSprite(l,p,x={},v){this._checkLoaded();const S=[{id:l,url:p}],j=[...re(this.stylesheet.sprite),...S];this._validate(o.u.sprite,"sprite",j,null,x)||(this.stylesheet.sprite=j,this._loadSprite(S,!0,v))}removeSprite(l){this._checkLoaded();const p=re(this.stylesheet.sprite);if(p.find(x=>x.id===l)){if(this._spritesImagesIds[l])for(const x of this._spritesImagesIds[l])this.imageManager.removeImage(x),this._changedImages[x]=!0;p.splice(p.findIndex(x=>x.id===l),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return re(this.stylesheet.sprite)}setSprite(l,p={},x){this._checkLoaded(),l&&this._validate(o.u.sprite,"sprite",l,null,p)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,x):(this._unloadSprite(),x&&x(null)))}}var ql=o.Y([{name:"a_pos",type:"Int16",components:2}]);const ol={prelude:Zr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Zr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Zr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Zr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Zr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Zr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Zr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Zr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Zr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Zr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Zr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Zr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Zr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Zr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Zr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Zr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Zr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Zr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Zr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Zr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Zr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Zr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Zr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Zr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Zr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Zr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Zr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Zr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Zr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Zr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Zr(k,l){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,x=l.match(/attribute ([\w]+) ([\w]+)/g),v=k.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),j=S?S.concat(v):v,M={};return{fragmentSource:k=k.replace(p,(D,V,G,X,ne)=>(M[ne]=!0,V==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
varying ${G} ${X} ${ne};
#else
uniform ${G} ${X} u_${ne};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ne}
    ${G} ${X} ${ne} = u_${ne};
#endif
`)),vertexSource:l=l.replace(p,(D,V,G,X,ne)=>{const ae=X==="float"?"vec2":"vec4",ce=ne.match(/color/)?"color":ae;return M[ne]?V==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
attribute ${G} ${ae} a_${ne};
varying ${G} ${X} ${ne};
#else
uniform ${G} ${X} u_${ne};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = a_${ne};
#else
    ${G} ${X} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = unpack_mix_${ce}(a_${ne}, u_${ne}_t);
#else
    ${G} ${X} ${ne} = u_${ne};
#endif
`:V==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
attribute ${G} ${ae} a_${ne};
#else
uniform ${G} ${X} u_${ne};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${G} ${X} ${ne} = a_${ne};
#else
    ${G} ${X} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${G} ${X} ${ne} = unpack_mix_${ce}(a_${ne}, u_${ne}_t);
#else
    ${G} ${X} ${ne} = u_${ne};
#endif
`}),staticAttributes:x,staticUniforms:j}}class vf{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,p,x,v,S,j,M,D,V){this.context=l;let G=this.boundPaintVertexBuffers.length!==v.length;for(let X=0;!G&&X<v.length;X++)this.boundPaintVertexBuffers[X]!==v[X]&&(G=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==x||G||this.boundIndexBuffer!==S||this.boundVertexOffset!==j||this.boundDynamicVertexBuffer!==M||this.boundDynamicVertexBuffer2!==D||this.boundDynamicVertexBuffer3!==V?this.freshBind(p,x,v,S,j,M,D,V):(l.bindVertexArray.set(this.vao),M&&M.bind(),S&&S.dynamicDraw&&S.bind(),D&&D.bind(),V&&V.bind())}freshBind(l,p,x,v,S,j,M,D){const V=l.numAttributes,G=this.context,X=G.gl;this.vao&&this.destroy(),this.vao=G.createVertexArray(),G.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=v,this.boundVertexOffset=S,this.boundDynamicVertexBuffer=j,this.boundDynamicVertexBuffer2=M,this.boundDynamicVertexBuffer3=D,p.enableAttributes(X,l);for(const ne of x)ne.enableAttributes(X,l);j&&j.enableAttributes(X,l),M&&M.enableAttributes(X,l),D&&D.enableAttributes(X,l),p.bind(),p.setVertexAttribPointers(X,l,S);for(const ne of x)ne.bind(),ne.setVertexAttribPointers(X,l,S);j&&(j.bind(),j.setVertexAttribPointers(X,l,S)),v&&v.bind(),M&&(M.bind(),M.setVertexAttribPointers(X,l,S)),D&&(D.bind(),D.setVertexAttribPointers(X,l,S)),G.currentNumAttributes=V}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const bf=(k,l,p,x,v)=>({u_matrix:k,u_texture:0,u_ele_delta:l,u_fog_matrix:p,u_fog_color:x?x.properties.get("fog-color"):o.aM.white,u_fog_ground_blend:x?x.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:x?x.calculateFogBlendOpacity(v):0,u_horizon_color:x?x.properties.get("horizon-color"):o.aM.white,u_horizon_fog_blend:x?x.properties.get("horizon-fog-blend"):1});function Cc(k){const l=[];for(let p=0;p<k.length;p++){if(k[p]===null)continue;const x=k[p].split(" ");l.push(x.pop())}return l}class Ch{constructor(l,p,x,v,S,j){const M=l.gl;this.program=M.createProgram();const D=Cc(p.staticAttributes),V=x?x.getBinderAttributes():[],G=D.concat(V),X=ol.prelude.staticUniforms?Cc(ol.prelude.staticUniforms):[],ne=p.staticUniforms?Cc(p.staticUniforms):[],ae=x?x.getBinderUniforms():[],ce=X.concat(ne).concat(ae),ye=[];for(const Ye of ce)ye.indexOf(Ye)<0&&ye.push(Ye);const we=x?x.defines():[];S&&we.push("#define OVERDRAW_INSPECTOR;"),j&&we.push("#define TERRAIN3D;");const ke=we.concat(ol.prelude.fragmentSource,p.fragmentSource).join(`
`),Pe=we.concat(ol.prelude.vertexSource,p.vertexSource).join(`
`),fe=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(fe,ke),M.compileShader(fe),!M.getShaderParameter(fe,M.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${M.getShaderInfoLog(fe)}`);M.attachShader(this.program,fe);const De=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(De,Pe),M.compileShader(De),!M.getShaderParameter(De,M.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${M.getShaderInfoLog(De)}`);M.attachShader(this.program,De),this.attributes={};const Ve={};this.numAttributes=G.length;for(let Ye=0;Ye<this.numAttributes;Ye++)G[Ye]&&(M.bindAttribLocation(this.program,Ye,G[Ye]),this.attributes[G[Ye]]=Ye);if(M.linkProgram(this.program),!M.getProgramParameter(this.program,M.LINK_STATUS))throw new Error(`Program failed to link: ${M.getProgramInfoLog(this.program)}`);M.deleteShader(De),M.deleteShader(fe);for(let Ye=0;Ye<ye.length;Ye++){const dt=ye[Ye];if(dt&&!Ve[dt]){const wt=M.getUniformLocation(this.program,dt);wt&&(Ve[dt]=wt)}}this.fixedUniforms=v(l,Ve),this.terrainUniforms=((Ye,dt)=>({u_depth:new o.aH(Ye,dt.u_depth),u_terrain:new o.aH(Ye,dt.u_terrain),u_terrain_dim:new o.aI(Ye,dt.u_terrain_dim),u_terrain_matrix:new o.aJ(Ye,dt.u_terrain_matrix),u_terrain_unpack:new o.aK(Ye,dt.u_terrain_unpack),u_terrain_exaggeration:new o.aI(Ye,dt.u_terrain_exaggeration)}))(l,Ve),this.binderUniforms=x?x.getUniforms(l,Ve):[]}draw(l,p,x,v,S,j,M,D,V,G,X,ne,ae,ce,ye,we,ke,Pe){const fe=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(x),l.setStencilMode(v),l.setColorMode(S),l.setCullFace(j),D){l.activeTexture.set(fe.TEXTURE2),fe.bindTexture(fe.TEXTURE_2D,D.depthTexture),l.activeTexture.set(fe.TEXTURE3),fe.bindTexture(fe.TEXTURE_2D,D.texture);for(const Ve in this.terrainUniforms)this.terrainUniforms[Ve].set(D[Ve])}for(const Ve in this.fixedUniforms)this.fixedUniforms[Ve].set(M[Ve]);ye&&ye.setUniforms(l,this.binderUniforms,ae,{zoom:ce});let De=0;switch(p){case fe.LINES:De=2;break;case fe.TRIANGLES:De=3;break;case fe.LINE_STRIP:De=1}for(const Ve of ne.get()){const Ye=Ve.vaos||(Ve.vaos={});(Ye[V]||(Ye[V]=new vf)).bind(l,this,G,ye?ye.getPaintVertexBuffers():[],X,Ve.vertexOffset,we,ke,Pe),fe.drawElements(p,Ve.primitiveLength*De,fe.UNSIGNED_SHORT,Ve.primitiveOffset*De*2)}}}function Th(k,l,p){const x=1/Dr(p,1,l.transform.tileZoom),v=Math.pow(2,p.tileID.overscaledZ),S=p.tileSize*Math.pow(2,l.transform.tileZoom)/v,j=S*(p.tileID.canonical.x+p.tileID.wrap*v),M=S*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[x,k.fromScale,k.toScale],u_fade:k.t,u_pixel_coord_upper:[j>>16,M>>16],u_pixel_coord_lower:[65535&j,65535&M]}}const Su=(k,l,p,x)=>{const v=l.style.light,S=v.properties.get("position"),j=[S.x,S.y,S.z],M=function(){var V=new o.A(9);return o.A!=Float32Array&&(V[1]=0,V[2]=0,V[3]=0,V[5]=0,V[6]=0,V[7]=0),V[0]=1,V[4]=1,V[8]=1,V}();v.properties.get("anchor")==="viewport"&&function(V,G){var X=Math.sin(G),ne=Math.cos(G);V[0]=ne,V[1]=X,V[2]=0,V[3]=-X,V[4]=ne,V[5]=0,V[6]=0,V[7]=0,V[8]=1}(M,-l.transform.angle),function(V,G,X){var ne=G[0],ae=G[1],ce=G[2];V[0]=ne*X[0]+ae*X[3]+ce*X[6],V[1]=ne*X[1]+ae*X[4]+ce*X[7],V[2]=ne*X[2]+ae*X[5]+ce*X[8]}(j,j,M);const D=v.properties.get("color");return{u_matrix:k,u_lightpos:j,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[D.r,D.g,D.b],u_vertical_gradient:+p,u_opacity:x}},Oh=(k,l,p,x,v,S,j)=>o.e(Su(k,l,p,x),Th(S,l,j),{u_height_factor:-Math.pow(2,v.overscaledZ)/j.tileSize/8}),al=k=>({u_matrix:k}),fm=(k,l,p,x)=>o.e(al(k),Th(p,l,x)),_0=(k,l)=>({u_matrix:k,u_world:l}),pm=(k,l,p,x,v)=>o.e(fm(k,l,p,x),{u_world:v}),Ph=(k,l,p,x)=>{const v=k.transform;let S,j;if(x.paint.get("circle-pitch-alignment")==="map"){const M=Dr(p,1,v.zoom);S=!0,j=[M,M]}else S=!1,j=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(x.paint.get("circle-pitch-scale")==="map"),u_matrix:k.translatePosMatrix(l.posMatrix,p,x.paint.get("circle-translate"),x.paint.get("circle-translate-anchor")),u_pitch_with_map:+S,u_device_pixel_ratio:k.pixelRatio,u_extrude_scale:j}},Aa=(k,l,p)=>({u_matrix:k,u_inv_matrix:l,u_camera_to_center_distance:p.cameraToCenterDistance,u_viewport_size:[p.width,p.height]}),Ql=(k,l,p=1)=>({u_matrix:k,u_color:l,u_overlay:0,u_overlay_scale:p}),qi=k=>({u_matrix:k}),_s=(k,l,p,x)=>({u_matrix:k,u_extrude_scale:Dr(l,1,p),u_intensity:x}),ku=(k,l,p,x)=>{const v=o.H();o.aP(v,0,k.width,k.height,0,0,1);const S=k.context.gl;return{u_matrix:v,u_world:[S.drawingBufferWidth,S.drawingBufferHeight],u_image:p,u_color_ramp:x,u_opacity:l.paint.get("heatmap-opacity")}};function Tc(k,l){const p=Math.pow(2,l.canonical.z),x=l.canonical.y;return[new o.Z(0,x/p).toLngLat().lat,new o.Z(0,(x+1)/p).toLngLat().lat]}const Cu=(k,l,p,x)=>{const v=k.transform;return{u_matrix:mm(k,l,p,x),u_ratio:1/Dr(l,1,v.zoom),u_device_pixel_ratio:k.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},ll=(k,l,p,x,v)=>o.e(Cu(k,l,p,v),{u_image:0,u_image_height:x}),Xo=(k,l,p,x,v)=>{const S=k.transform,j=_f(l,S);return{u_matrix:mm(k,l,p,v),u_texsize:l.imageAtlasTexture.size,u_ratio:1/Dr(l,1,S.zoom),u_device_pixel_ratio:k.pixelRatio,u_image:0,u_scale:[j,x.fromScale,x.toScale],u_fade:x.t,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},w0=(k,l,p,x,v,S)=>{const j=k.lineAtlas,M=_f(l,k.transform),D=p.layout.get("line-cap")==="round",V=j.getDash(x.from,D),G=j.getDash(x.to,D),X=V.width*v.fromScale,ne=G.width*v.toScale;return o.e(Cu(k,l,p,S),{u_patternscale_a:[M/X,-V.height/2],u_patternscale_b:[M/ne,-G.height/2],u_sdfgamma:j.width/(256*Math.min(X,ne)*k.pixelRatio)/2,u_image:0,u_tex_y_a:V.y,u_tex_y_b:G.y,u_mix:v.t})};function _f(k,l){return 1/Dr(k,1,l.tileZoom)}function mm(k,l,p,x){return k.translatePosMatrix(x?x.posMatrix:l.tileID.posMatrix,l,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const gm=(k,l,p,x,v)=>{return{u_matrix:k,u_tl_parent:l,u_scale_parent:p,u_buffer_scale:1,u_fade_t:x.mix,u_opacity:x.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(j=v.paint.get("raster-saturation"),j>0?1-1/(1.001-j):-j),u_contrast_factor:(S=v.paint.get("raster-contrast"),S>0?1/(1-S):1+S),u_spin_weights:S0(v.paint.get("raster-hue-rotate"))};var S,j};function S0(k){k*=Math.PI/180;const l=Math.sin(k),p=Math.cos(k);return[(2*p+1)/3,(-Math.sqrt(3)*l-p+1)/3,(Math.sqrt(3)*l-p+1)/3]}const ym=(k,l,p,x,v,S,j,M,D,V,G,X,ne,ae)=>{const ce=j.transform;return{u_is_size_zoom_constant:+(k==="constant"||k==="source"),u_is_size_feature_constant:+(k==="constant"||k==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:ce.cameraToCenterDistance,u_pitch:ce.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:ce.width/ce.height,u_fade_change:j.options.fadeDuration?j.symbolFadeChange:1,u_matrix:M,u_label_plane_matrix:D,u_coord_matrix:V,u_is_text:+X,u_pitch_with_map:+x,u_is_along_line:v,u_is_variable_anchor:S,u_texsize:ne,u_texture:0,u_translation:G,u_pitched_scale:ae}},Oc=(k,l,p,x,v,S,j,M,D,V,G,X,ne,ae,ce)=>{const ye=j.transform;return o.e(ym(k,l,p,x,v,S,j,M,D,V,G,X,ne,ce),{u_gamma_scale:x?Math.cos(ye._pitch)*ye.cameraToCenterDistance:1,u_device_pixel_ratio:j.pixelRatio,u_is_halo:1})},wf=(k,l,p,x,v,S,j,M,D,V,G,X,ne,ae)=>o.e(Oc(k,l,p,x,v,S,j,M,D,V,G,!0,X,!0,ae),{u_texsize_icon:ne,u_texture_icon:1}),ge=(k,l,p)=>({u_matrix:k,u_opacity:l,u_color:p}),$e=(k,l,p,x,v,S)=>o.e(function(j,M,D,V){const G=D.imageManager.getPattern(j.from.toString()),X=D.imageManager.getPattern(j.to.toString()),{width:ne,height:ae}=D.imageManager.getPixelSize(),ce=Math.pow(2,V.tileID.overscaledZ),ye=V.tileSize*Math.pow(2,D.transform.tileZoom)/ce,we=ye*(V.tileID.canonical.x+V.tileID.wrap*ce),ke=ye*V.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:G.tl,u_pattern_br_a:G.br,u_pattern_tl_b:X.tl,u_pattern_br_b:X.br,u_texsize:[ne,ae],u_mix:M.t,u_pattern_size_a:G.displaySize,u_pattern_size_b:X.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/Dr(V,1,D.transform.tileZoom),u_pixel_coord_upper:[we>>16,ke>>16],u_pixel_coord_lower:[65535&we,65535&ke]}}(x,S,p,v),{u_matrix:k,u_opacity:l}),ot={fillExtrusion:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_lightpos:new o.aN(k,l.u_lightpos),u_lightintensity:new o.aI(k,l.u_lightintensity),u_lightcolor:new o.aN(k,l.u_lightcolor),u_vertical_gradient:new o.aI(k,l.u_vertical_gradient),u_opacity:new o.aI(k,l.u_opacity)}),fillExtrusionPattern:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_lightpos:new o.aN(k,l.u_lightpos),u_lightintensity:new o.aI(k,l.u_lightintensity),u_lightcolor:new o.aN(k,l.u_lightcolor),u_vertical_gradient:new o.aI(k,l.u_vertical_gradient),u_height_factor:new o.aI(k,l.u_height_factor),u_image:new o.aH(k,l.u_image),u_texsize:new o.aO(k,l.u_texsize),u_pixel_coord_upper:new o.aO(k,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(k,l.u_pixel_coord_lower),u_scale:new o.aN(k,l.u_scale),u_fade:new o.aI(k,l.u_fade),u_opacity:new o.aI(k,l.u_opacity)}),fill:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix)}),fillPattern:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_image:new o.aH(k,l.u_image),u_texsize:new o.aO(k,l.u_texsize),u_pixel_coord_upper:new o.aO(k,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(k,l.u_pixel_coord_lower),u_scale:new o.aN(k,l.u_scale),u_fade:new o.aI(k,l.u_fade)}),fillOutline:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_world:new o.aO(k,l.u_world)}),fillOutlinePattern:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_world:new o.aO(k,l.u_world),u_image:new o.aH(k,l.u_image),u_texsize:new o.aO(k,l.u_texsize),u_pixel_coord_upper:new o.aO(k,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(k,l.u_pixel_coord_lower),u_scale:new o.aN(k,l.u_scale),u_fade:new o.aI(k,l.u_fade)}),circle:(k,l)=>({u_camera_to_center_distance:new o.aI(k,l.u_camera_to_center_distance),u_scale_with_map:new o.aH(k,l.u_scale_with_map),u_pitch_with_map:new o.aH(k,l.u_pitch_with_map),u_extrude_scale:new o.aO(k,l.u_extrude_scale),u_device_pixel_ratio:new o.aI(k,l.u_device_pixel_ratio),u_matrix:new o.aJ(k,l.u_matrix)}),collisionBox:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_pixel_extrude_scale:new o.aO(k,l.u_pixel_extrude_scale)}),collisionCircle:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_inv_matrix:new o.aJ(k,l.u_inv_matrix),u_camera_to_center_distance:new o.aI(k,l.u_camera_to_center_distance),u_viewport_size:new o.aO(k,l.u_viewport_size)}),debug:(k,l)=>({u_color:new o.aL(k,l.u_color),u_matrix:new o.aJ(k,l.u_matrix),u_overlay:new o.aH(k,l.u_overlay),u_overlay_scale:new o.aI(k,l.u_overlay_scale)}),clippingMask:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix)}),heatmap:(k,l)=>({u_extrude_scale:new o.aI(k,l.u_extrude_scale),u_intensity:new o.aI(k,l.u_intensity),u_matrix:new o.aJ(k,l.u_matrix)}),heatmapTexture:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_world:new o.aO(k,l.u_world),u_image:new o.aH(k,l.u_image),u_color_ramp:new o.aH(k,l.u_color_ramp),u_opacity:new o.aI(k,l.u_opacity)}),hillshade:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_image:new o.aH(k,l.u_image),u_latrange:new o.aO(k,l.u_latrange),u_light:new o.aO(k,l.u_light),u_shadow:new o.aL(k,l.u_shadow),u_highlight:new o.aL(k,l.u_highlight),u_accent:new o.aL(k,l.u_accent)}),hillshadePrepare:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_image:new o.aH(k,l.u_image),u_dimension:new o.aO(k,l.u_dimension),u_zoom:new o.aI(k,l.u_zoom),u_unpack:new o.aK(k,l.u_unpack)}),line:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_ratio:new o.aI(k,l.u_ratio),u_device_pixel_ratio:new o.aI(k,l.u_device_pixel_ratio),u_units_to_pixels:new o.aO(k,l.u_units_to_pixels)}),lineGradient:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_ratio:new o.aI(k,l.u_ratio),u_device_pixel_ratio:new o.aI(k,l.u_device_pixel_ratio),u_units_to_pixels:new o.aO(k,l.u_units_to_pixels),u_image:new o.aH(k,l.u_image),u_image_height:new o.aI(k,l.u_image_height)}),linePattern:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_texsize:new o.aO(k,l.u_texsize),u_ratio:new o.aI(k,l.u_ratio),u_device_pixel_ratio:new o.aI(k,l.u_device_pixel_ratio),u_image:new o.aH(k,l.u_image),u_units_to_pixels:new o.aO(k,l.u_units_to_pixels),u_scale:new o.aN(k,l.u_scale),u_fade:new o.aI(k,l.u_fade)}),lineSDF:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_ratio:new o.aI(k,l.u_ratio),u_device_pixel_ratio:new o.aI(k,l.u_device_pixel_ratio),u_units_to_pixels:new o.aO(k,l.u_units_to_pixels),u_patternscale_a:new o.aO(k,l.u_patternscale_a),u_patternscale_b:new o.aO(k,l.u_patternscale_b),u_sdfgamma:new o.aI(k,l.u_sdfgamma),u_image:new o.aH(k,l.u_image),u_tex_y_a:new o.aI(k,l.u_tex_y_a),u_tex_y_b:new o.aI(k,l.u_tex_y_b),u_mix:new o.aI(k,l.u_mix)}),raster:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_tl_parent:new o.aO(k,l.u_tl_parent),u_scale_parent:new o.aI(k,l.u_scale_parent),u_buffer_scale:new o.aI(k,l.u_buffer_scale),u_fade_t:new o.aI(k,l.u_fade_t),u_opacity:new o.aI(k,l.u_opacity),u_image0:new o.aH(k,l.u_image0),u_image1:new o.aH(k,l.u_image1),u_brightness_low:new o.aI(k,l.u_brightness_low),u_brightness_high:new o.aI(k,l.u_brightness_high),u_saturation_factor:new o.aI(k,l.u_saturation_factor),u_contrast_factor:new o.aI(k,l.u_contrast_factor),u_spin_weights:new o.aN(k,l.u_spin_weights)}),symbolIcon:(k,l)=>({u_is_size_zoom_constant:new o.aH(k,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(k,l.u_is_size_feature_constant),u_size_t:new o.aI(k,l.u_size_t),u_size:new o.aI(k,l.u_size),u_camera_to_center_distance:new o.aI(k,l.u_camera_to_center_distance),u_pitch:new o.aI(k,l.u_pitch),u_rotate_symbol:new o.aH(k,l.u_rotate_symbol),u_aspect_ratio:new o.aI(k,l.u_aspect_ratio),u_fade_change:new o.aI(k,l.u_fade_change),u_matrix:new o.aJ(k,l.u_matrix),u_label_plane_matrix:new o.aJ(k,l.u_label_plane_matrix),u_coord_matrix:new o.aJ(k,l.u_coord_matrix),u_is_text:new o.aH(k,l.u_is_text),u_pitch_with_map:new o.aH(k,l.u_pitch_with_map),u_is_along_line:new o.aH(k,l.u_is_along_line),u_is_variable_anchor:new o.aH(k,l.u_is_variable_anchor),u_texsize:new o.aO(k,l.u_texsize),u_texture:new o.aH(k,l.u_texture),u_translation:new o.aO(k,l.u_translation),u_pitched_scale:new o.aI(k,l.u_pitched_scale)}),symbolSDF:(k,l)=>({u_is_size_zoom_constant:new o.aH(k,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(k,l.u_is_size_feature_constant),u_size_t:new o.aI(k,l.u_size_t),u_size:new o.aI(k,l.u_size),u_camera_to_center_distance:new o.aI(k,l.u_camera_to_center_distance),u_pitch:new o.aI(k,l.u_pitch),u_rotate_symbol:new o.aH(k,l.u_rotate_symbol),u_aspect_ratio:new o.aI(k,l.u_aspect_ratio),u_fade_change:new o.aI(k,l.u_fade_change),u_matrix:new o.aJ(k,l.u_matrix),u_label_plane_matrix:new o.aJ(k,l.u_label_plane_matrix),u_coord_matrix:new o.aJ(k,l.u_coord_matrix),u_is_text:new o.aH(k,l.u_is_text),u_pitch_with_map:new o.aH(k,l.u_pitch_with_map),u_is_along_line:new o.aH(k,l.u_is_along_line),u_is_variable_anchor:new o.aH(k,l.u_is_variable_anchor),u_texsize:new o.aO(k,l.u_texsize),u_texture:new o.aH(k,l.u_texture),u_gamma_scale:new o.aI(k,l.u_gamma_scale),u_device_pixel_ratio:new o.aI(k,l.u_device_pixel_ratio),u_is_halo:new o.aH(k,l.u_is_halo),u_translation:new o.aO(k,l.u_translation),u_pitched_scale:new o.aI(k,l.u_pitched_scale)}),symbolTextAndIcon:(k,l)=>({u_is_size_zoom_constant:new o.aH(k,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(k,l.u_is_size_feature_constant),u_size_t:new o.aI(k,l.u_size_t),u_size:new o.aI(k,l.u_size),u_camera_to_center_distance:new o.aI(k,l.u_camera_to_center_distance),u_pitch:new o.aI(k,l.u_pitch),u_rotate_symbol:new o.aH(k,l.u_rotate_symbol),u_aspect_ratio:new o.aI(k,l.u_aspect_ratio),u_fade_change:new o.aI(k,l.u_fade_change),u_matrix:new o.aJ(k,l.u_matrix),u_label_plane_matrix:new o.aJ(k,l.u_label_plane_matrix),u_coord_matrix:new o.aJ(k,l.u_coord_matrix),u_is_text:new o.aH(k,l.u_is_text),u_pitch_with_map:new o.aH(k,l.u_pitch_with_map),u_is_along_line:new o.aH(k,l.u_is_along_line),u_is_variable_anchor:new o.aH(k,l.u_is_variable_anchor),u_texsize:new o.aO(k,l.u_texsize),u_texsize_icon:new o.aO(k,l.u_texsize_icon),u_texture:new o.aH(k,l.u_texture),u_texture_icon:new o.aH(k,l.u_texture_icon),u_gamma_scale:new o.aI(k,l.u_gamma_scale),u_device_pixel_ratio:new o.aI(k,l.u_device_pixel_ratio),u_is_halo:new o.aH(k,l.u_is_halo),u_translation:new o.aO(k,l.u_translation),u_pitched_scale:new o.aI(k,l.u_pitched_scale)}),background:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_opacity:new o.aI(k,l.u_opacity),u_color:new o.aL(k,l.u_color)}),backgroundPattern:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_opacity:new o.aI(k,l.u_opacity),u_image:new o.aH(k,l.u_image),u_pattern_tl_a:new o.aO(k,l.u_pattern_tl_a),u_pattern_br_a:new o.aO(k,l.u_pattern_br_a),u_pattern_tl_b:new o.aO(k,l.u_pattern_tl_b),u_pattern_br_b:new o.aO(k,l.u_pattern_br_b),u_texsize:new o.aO(k,l.u_texsize),u_mix:new o.aI(k,l.u_mix),u_pattern_size_a:new o.aO(k,l.u_pattern_size_a),u_pattern_size_b:new o.aO(k,l.u_pattern_size_b),u_scale_a:new o.aI(k,l.u_scale_a),u_scale_b:new o.aI(k,l.u_scale_b),u_pixel_coord_upper:new o.aO(k,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(k,l.u_pixel_coord_lower),u_tile_units_to_pixels:new o.aI(k,l.u_tile_units_to_pixels)}),terrain:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_texture:new o.aH(k,l.u_texture),u_ele_delta:new o.aI(k,l.u_ele_delta),u_fog_matrix:new o.aJ(k,l.u_fog_matrix),u_fog_color:new o.aL(k,l.u_fog_color),u_fog_ground_blend:new o.aI(k,l.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.aI(k,l.u_fog_ground_blend_opacity),u_horizon_color:new o.aL(k,l.u_horizon_color),u_horizon_fog_blend:new o.aI(k,l.u_horizon_fog_blend)}),terrainDepth:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_ele_delta:new o.aI(k,l.u_ele_delta)}),terrainCoords:(k,l)=>({u_matrix:new o.aJ(k,l.u_matrix),u_texture:new o.aH(k,l.u_texture),u_terrain_coords_id:new o.aI(k,l.u_terrain_coords_id),u_ele_delta:new o.aI(k,l.u_ele_delta)}),sky:(k,l)=>({u_sky_color:new o.aL(k,l.u_sky_color),u_horizon_color:new o.aL(k,l.u_horizon_color),u_horizon:new o.aI(k,l.u_horizon),u_sky_horizon_blend:new o.aI(k,l.u_sky_horizon_blend)})};class Zt{constructor(l,p,x){this.context=l;const v=l.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!x,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Yr={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class xn{constructor(l,p,x,v){this.length=p.length,this.attributes=x,this.itemSize=p.bytesPerElement,this.dynamicDraw=v,this.context=l;const S=l.gl;this.buffer=S.createBuffer(),l.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,p){for(let x=0;x<this.attributes.length;x++){const v=p.attributes[this.attributes[x].name];v!==void 0&&l.enableVertexAttribArray(v)}}setVertexAttribPointers(l,p,x){for(let v=0;v<this.attributes.length;v++){const S=this.attributes[v],j=p.attributes[S.name];j!==void 0&&l.vertexAttribPointer(j,S.components,l[Yr[S.type]],!1,this.itemSize,S.offset+this.itemSize*(x||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const gn=new WeakMap;function Ur(k){var l;if(gn.has(k))return gn.get(k);{const p=(l=k.getParameter(k.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return gn.set(k,p),p}}class xr{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ws extends xr{getDefault(){return o.aM.transparent}set(l){const p=this.current;(l.r!==p.r||l.g!==p.g||l.b!==p.b||l.a!==p.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Ns extends xr{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Ko extends xr{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Sf extends xr{getDefault(){return[!0,!0,!0,!0]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==p[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class jh extends xr{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class xm extends xr{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class F1 extends xr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const p=this.current;(l.func!==p.func||l.ref!==p.ref||l.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class k0 extends xr{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class B1 extends xr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=l,this.dirty=!1}}class $1 extends xr{getDefault(){return[0,1]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class N1 extends xr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=l,this.dirty=!1}}class V1 extends xr{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Tu extends xr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.BLEND):p.disable(p.BLEND),this.current=l,this.dirty=!1}}class W1 extends xr{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class wC extends xr{getDefault(){return o.aM.transparent}set(l){const p=this.current;(l.r!==p.r||l.g!==p.g||l.b!==p.b||l.a!==p.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class U1 extends xr{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class kf extends xr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=l,this.dirty=!1}}class SC extends xr{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class vm extends xr{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class kC extends xr{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class CC extends xr{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class q1 extends xr{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==p[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Q1 extends xr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class H1 extends xr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class C0 extends xr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class G1 extends xr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class bm extends xr{getDefault(){return null}set(l){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Hl extends xr{getDefault(){return null}set(l){var p;if(l===this.current&&!this.dirty)return;const x=this.gl;Ur(x)?x.bindVertexArray(l):(p=x.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class T0 extends xr{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class O0 extends xr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class P0 extends xr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class _m extends xr{constructor(l,p){super(l),this.context=l,this.parent=p}getDefault(){return null}}class j0 extends _m{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Ou extends _m{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class A0 extends _m{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class TC{constructor(l,p,x,v,S){this.context=l,this.width=p,this.height=x;const j=l.gl,M=this.framebuffer=j.createFramebuffer();if(this.colorAttachment=new j0(l,M),v)this.depthAttachment=S?new A0(l,M):new Ou(l,M);else if(S)throw new Error("Stencil cannot be set without depth");if(j.checkFramebufferStatus(j.FRAMEBUFFER)!==j.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const l=this.context.gl,p=this.colorAttachment.get();if(p&&l.deleteTexture(p),this.depthAttachment){const x=this.depthAttachment.get();x&&l.deleteRenderbuffer(x)}l.deleteFramebuffer(this.framebuffer)}}class fi{constructor(l,p,x){this.blendFunction=l,this.blendColor=p,this.mask=x}}fi.Replace=[1,0],fi.disabled=new fi(fi.Replace,o.aM.transparent,[!1,!1,!1,!1]),fi.unblended=new fi(fi.Replace,o.aM.transparent,[!0,!0,!0,!0]),fi.alphaBlended=new fi([1,771],o.aM.transparent,[!0,!0,!0,!0]);class OC{constructor(l){var p,x;if(this.gl=l,this.clearColor=new ws(this),this.clearDepth=new Ns(this),this.clearStencil=new Ko(this),this.colorMask=new Sf(this),this.depthMask=new jh(this),this.stencilMask=new xm(this),this.stencilFunc=new F1(this),this.stencilOp=new k0(this),this.stencilTest=new B1(this),this.depthRange=new $1(this),this.depthTest=new N1(this),this.depthFunc=new V1(this),this.blend=new Tu(this),this.blendFunc=new W1(this),this.blendColor=new wC(this),this.blendEquation=new U1(this),this.cullFace=new kf(this),this.cullFaceSide=new SC(this),this.frontFace=new vm(this),this.program=new kC(this),this.activeTexture=new CC(this),this.viewport=new q1(this),this.bindFramebuffer=new Q1(this),this.bindRenderbuffer=new H1(this),this.bindTexture=new C0(this),this.bindVertexBuffer=new G1(this),this.bindElementBuffer=new bm(this),this.bindVertexArray=new Hl(this),this.pixelStoreUnpack=new T0(this),this.pixelStoreUnpackPremultiplyAlpha=new O0(this),this.pixelStoreUnpackFlipY=new P0(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),Ur(l)){this.HALF_FLOAT=l.HALF_FLOAT;const v=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=l.RGBA16F)!==null&&p!==void 0?p:v==null?void 0:v.RGBA16F_EXT,this.RGB16F=(x=l.RGB16F)!==null&&x!==void 0?x:v==null?void 0:v.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const v=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=v==null?void 0:v.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,p){return new Zt(this,l,p)}createVertexBuffer(l,p,x){return new xn(this,l,p,x)}createRenderbuffer(l,p,x){const v=this.gl,S=v.createRenderbuffer();return this.bindRenderbuffer.set(S),v.renderbufferStorage(v.RENDERBUFFER,l,p,x),this.bindRenderbuffer.set(null),S}createFramebuffer(l,p,x,v){return new TC(this,l,p,x,v)}clear({color:l,depth:p,stencil:x}){const v=this.gl;let S=0;l&&(S|=v.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(S|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),x!==void 0&&(S|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(x),this.stencilMask.set(255)),v.clear(S)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){o.aE(l.blendFunction,fi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return Ur(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var p;return Ur(this.gl)?this.gl.deleteVertexArray(l):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}class Vr{constructor(l,p,x){this.func=l,this.mask=p,this.range=x}}Vr.ReadOnly=!1,Vr.ReadWrite=!0,Vr.disabled=new Vr(519,Vr.ReadOnly,[0,1]);const wm=7680;class Bn{constructor(l,p,x,v,S,j){this.test=l,this.ref=p,this.mask=x,this.fail=v,this.depthFail=S,this.pass=j}}Bn.disabled=new Bn({func:519,mask:0},0,0,wm,wm,wm);class Cn{constructor(l,p,x){this.enable=l,this.mode=p,this.frontFace=x}}let Pu;function Cf(k,l,p,x,v){const S=k.context,j=S.gl,M=k.useProgram("collisionBox"),D=[];let V=0,G=0;for(let ke=0;ke<x.length;ke++){const Pe=x[ke],fe=l.getTile(Pe).getBucket(p);if(!fe)continue;const De=v?fe.textCollisionBox:fe.iconCollisionBox,Ve=fe.collisionCircleArray;if(Ve.length>0){const Ye=o.H();o.aQ(Ye,fe.placementInvProjMatrix,k.transform.glCoordMatrix),o.aQ(Ye,Ye,fe.placementViewportMatrix),D.push({circleArray:Ve,circleOffset:G,transform:Pe.posMatrix,invTransform:Ye,coord:Pe}),V+=Ve.length/4,G=V}De&&M.draw(S,j.LINES,Vr.disabled,Bn.disabled,k.colorModeForRenderPass(),Cn.disabled,{u_matrix:Pe.posMatrix,u_pixel_extrude_scale:[1/(X=k.transform).width,1/X.height]},k.style.map.terrain&&k.style.map.terrain.getTerrainData(Pe),p.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,null,k.transform.zoom,null,null,De.collisionVertexBuffer)}var X;if(!v||!D.length)return;const ne=k.useProgram("collisionCircle"),ae=new o.aR;ae.resize(4*V),ae._trim();let ce=0;for(const ke of D)for(let Pe=0;Pe<ke.circleArray.length/4;Pe++){const fe=4*Pe,De=ke.circleArray[fe+0],Ve=ke.circleArray[fe+1],Ye=ke.circleArray[fe+2],dt=ke.circleArray[fe+3];ae.emplace(ce++,De,Ve,Ye,dt,0),ae.emplace(ce++,De,Ve,Ye,dt,1),ae.emplace(ce++,De,Ve,Ye,dt,2),ae.emplace(ce++,De,Ve,Ye,dt,3)}(!Pu||Pu.length<2*V)&&(Pu=function(ke){const Pe=2*ke,fe=new o.aT;fe.resize(Pe),fe._trim();for(let De=0;De<Pe;De++){const Ve=6*De;fe.uint16[Ve+0]=4*De+0,fe.uint16[Ve+1]=4*De+1,fe.uint16[Ve+2]=4*De+2,fe.uint16[Ve+3]=4*De+2,fe.uint16[Ve+4]=4*De+3,fe.uint16[Ve+5]=4*De+0}return fe}(V));const ye=S.createIndexBuffer(Pu,!0),we=S.createVertexBuffer(ae,o.aS.members,!0);for(const ke of D){const Pe=Aa(ke.transform,ke.invTransform,k.transform);ne.draw(S,j.TRIANGLES,Vr.disabled,Bn.disabled,k.colorModeForRenderPass(),Cn.disabled,Pe,k.style.map.terrain&&k.style.map.terrain.getTerrainData(ke.coord),p.id,we,ye,o.a0.simpleSegment(0,2*ke.circleOffset,ke.circleArray.length,ke.circleArray.length/2),null,k.transform.zoom,null,null,null)}we.destroy(),ye.destroy()}Cn.disabled=new Cn(!1,1029,2305),Cn.backCCW=new Cn(!0,1029,2305);const Tf=o.an(new Float32Array(16));function E0(k,l,p,x,v,S){const{horizontalAlign:j,verticalAlign:M}=o.au(k);return new o.P((-(j-.5)*l/v+x[0])*S,(-(M-.5)*p/v+x[1])*S)}function ju(k,l,p,x,v,S){const j=l.tileAnchorPoint.add(new o.P(l.translation[0],l.translation[1]));if(l.pitchWithMap){let M=x.mult(S);p||(M=M.rotate(-v));const D=j.add(M);return me(D.x,D.y,l.labelPlaneMatrix,l.getElevation).point}if(p){const M=tt(l.tileAnchorPoint.x+1,l.tileAnchorPoint.y,l).point.sub(k),D=Math.atan(M.y/M.x)+(M.x<0?Math.PI:0);return k.add(x.rotate(D))}return k.add(x)}function Ah(k,l,p,x,v,S,j,M,D,V,G,X,ne,ae){const ce=k.text.placedSymbolArray,ye=k.text.dynamicLayoutVertexArray,we=k.icon.dynamicLayoutVertexArray,ke={};ye.clear();for(let Pe=0;Pe<ce.length;Pe++){const fe=ce.get(Pe),De=fe.hidden||!fe.crossTileID||k.allowVerticalPlacement&&!fe.placedOrientation?null:x[fe.crossTileID];if(De){const Ve=new o.P(fe.anchorX,fe.anchorY),Ye={getElevation:ae,width:v.width,height:v.height,labelPlaneMatrix:S,pitchWithMap:p,projection:G,tileAnchorPoint:Ve,translation:X,unwrappedTileID:ne},dt=p?me(Ve.x,Ve.y,j,ae):tt(Ve.x,Ve.y,Ye),wt=W(v.cameraToCenterDistance,dt.signedDistanceFromCamera);let Lt=o.ai(k.textSizeData,D,fe)*wt/o.ap;p&&(Lt*=k.tilePixelRatio/M);const{width:Ut,height:zt,anchor:At,textOffset:ir,textBoxScale:Pr}=De,It=E0(At,Ut,zt,ir,Pr,Lt),Bt=G.getPitchedTextCorrection(v,Ve.add(new o.P(X[0],X[1])),ne),Cr=ju(dt.point,Ye,l,It,v.angle,Bt),qn=k.allowVerticalPlacement&&fe.placedOrientation===o.ah.vertical?Math.PI/2:0;for(let Lr=0;Lr<fe.numGlyphs;Lr++)o.aj(ye,Cr,qn);V&&fe.associatedIconIndex>=0&&(ke[fe.associatedIconIndex]={shiftedAnchor:Cr,angle:qn})}else rr(fe.numGlyphs,ye)}if(V){we.clear();const Pe=k.icon.placedSymbolArray;for(let fe=0;fe<Pe.length;fe++){const De=Pe.get(fe);if(De.hidden)rr(De.numGlyphs,we);else{const Ve=ke[fe];if(Ve)for(let Ye=0;Ye<De.numGlyphs;Ye++)o.aj(we,Ve.shiftedAnchor,Ve.angle);else rr(De.numGlyphs,we)}}k.icon.dynamicLayoutVertexBuffer.updateData(we)}k.text.dynamicLayoutVertexBuffer.updateData(ye)}function Zo(k,l,p){return p.iconsInText&&l?"symbolTextAndIcon":k?"symbolSDF":"symbolIcon"}function z0(k,l,p,x,v,S,j,M,D,V,G,X){const ne=k.context,ae=ne.gl,ce=k.transform,ye=Ul(),we=M==="map",ke=D==="map",Pe=M!=="viewport"&&p.layout.get("symbol-placement")!=="point",fe=we&&!ke&&!Pe,De=!ke&&Pe,Ve=!p.layout.get("symbol-sort-key").isConstant();let Ye=!1;const dt=k.depthModeForSublayer(0,Vr.ReadOnly),wt=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Lt=[],Ut=ye.getCircleRadiusCorrection(ce);for(const zt of x){const At=l.getTile(zt),ir=At.getBucket(p);if(!ir)continue;const Pr=v?ir.text:ir.icon;if(!Pr||!Pr.segments.get().length||!Pr.hasVisibleVertices)continue;const It=Pr.programConfigurations.get(p.id),Bt=v||ir.sdfIcons,Cr=v?ir.textSizeData:ir.iconSizeData,qn=ke||ce.pitch!==0,Lr=k.useProgram(Zo(Bt,v,ir),It),qr=o.ag(Cr,ce.zoom),Qn=k.style.map.terrain&&k.style.map.terrain.getTerrainData(zt);let ks,Ma,Hn,ao,Vs=[0,0],Cs=null;if(v)Ma=At.glyphAtlasTexture,Hn=ae.LINEAR,ks=At.glyphAtlasTexture.size,ir.iconsInText&&(Vs=At.imageAtlasTexture.size,Cs=At.imageAtlasTexture,ao=qn||k.options.rotating||k.options.zooming||Cr.kind==="composite"||Cr.kind==="camera"?ae.LINEAR:ae.NEAREST);else{const Gr=p.layout.get("icon-size").constantOr(0)!==1||ir.iconsNeedLinear;Ma=At.imageAtlasTexture,Hn=Bt||k.options.rotating||k.options.zooming||Gr||qn?ae.LINEAR:ae.NEAREST,ks=At.imageAtlasTexture.size}const Ws=Dr(At,1,k.transform.zoom),hl=De?zt.posMatrix:Tf,qh=Di(hl,ke,we,k.transform,Ws),Nm=is(hl,ke,we,k.transform,Ws),Qh=is(zt.posMatrix,ke,we,k.transform,Ws),ea=ye.translatePosition(k.transform,At,S,j),Vm=wt&&ir.hasTextData(),nx=p.layout.get("icon-text-fit")!=="none"&&Vm&&ir.hasIconData();if(Pe){const Gr=k.style.map.terrain?(Hh,Gh)=>k.style.map.terrain.getElevation(zt,Hh,Gh):null,Iu=p.layout.get("text-rotation-alignment")==="map";ee(ir,zt.posMatrix,k,v,qh,Qh,ke,V,Iu,ye,zt.toUnwrapped(),ce.width,ce.height,ea,Gr)}const ta=zt.posMatrix,ra=v&&wt||nx,Pc=Pe||ra?Tf:qh,Ia=Nm,os=Bt&&p.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ts;Ts=Bt?ir.iconsInText?wf(Cr.kind,qr,fe,ke,Pe,ra,k,ta,Pc,Ia,ea,ks,Vs,Ut):Oc(Cr.kind,qr,fe,ke,Pe,ra,k,ta,Pc,Ia,ea,v,ks,!0,Ut):ym(Cr.kind,qr,fe,ke,Pe,ra,k,ta,Pc,Ia,ea,v,ks,Ut);const Ao={program:Lr,buffers:Pr,uniformValues:Ts,atlasTexture:Ma,atlasTextureIcon:Cs,atlasInterpolation:Hn,atlasInterpolationIcon:ao,isSDF:Bt,hasHalo:os};if(Ve&&ir.canOverlap){Ye=!0;const Gr=Pr.segments.get();for(const Iu of Gr)Lt.push({segments:new o.a0([Iu]),sortKey:Iu.sortKey,state:Ao,terrainData:Qn})}else Lt.push({segments:Pr.segments,sortKey:0,state:Ao,terrainData:Qn})}Ye&&Lt.sort((zt,At)=>zt.sortKey-At.sortKey);for(const zt of Lt){const At=zt.state;if(ne.activeTexture.set(ae.TEXTURE0),At.atlasTexture.bind(At.atlasInterpolation,ae.CLAMP_TO_EDGE),At.atlasTextureIcon&&(ne.activeTexture.set(ae.TEXTURE1),At.atlasTextureIcon&&At.atlasTextureIcon.bind(At.atlasInterpolationIcon,ae.CLAMP_TO_EDGE)),At.isSDF){const ir=At.uniformValues;At.hasHalo&&(ir.u_is_halo=1,M0(At.buffers,zt.segments,p,k,At.program,dt,G,X,ir,zt.terrainData)),ir.u_is_halo=0}M0(At.buffers,zt.segments,p,k,At.program,dt,G,X,At.uniformValues,zt.terrainData)}}function M0(k,l,p,x,v,S,j,M,D,V){const G=x.context;v.draw(G,G.gl.TRIANGLES,S,j,M,Cn.disabled,D,V,p.id,k.layoutVertexBuffer,k.indexBuffer,l,p.paint,x.transform.zoom,k.programConfigurations.get(p.id),k.dynamicLayoutVertexBuffer,k.opacityVertexBuffer)}function I0(k,l,p,x){const v=k.context,S=v.gl,j=Bn.disabled,M=new fi([S.ONE,S.ONE],o.aM.transparent,[!0,!0,!0,!0]),D=l.getBucket(p);if(!D)return;const V=x.key;let G=p.heatmapFbos.get(V);G||(G=Of(v,l.tileSize,l.tileSize),p.heatmapFbos.set(V,G)),v.bindFramebuffer.set(G.framebuffer),v.viewport.set([0,0,l.tileSize,l.tileSize]),v.clear({color:o.aM.transparent});const X=D.programConfigurations.get(p.id),ne=k.useProgram("heatmap",X),ae=k.style.map.terrain.getTerrainData(x);ne.draw(v,S.TRIANGLES,Vr.disabled,j,M,Cn.disabled,_s(x.posMatrix,l,k.transform.zoom,p.paint.get("heatmap-intensity")),ae,p.id,D.layoutVertexBuffer,D.indexBuffer,D.segments,p.paint,k.transform.zoom,X)}function Au(k,l,p){const x=k.context,v=x.gl;x.setColorMode(k.colorModeForRenderPass());const S=Pf(x,l),j=p.key,M=l.heatmapFbos.get(j);M&&(x.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,M.colorAttachment.get()),x.activeTexture.set(v.TEXTURE1),S.bind(v.LINEAR,v.CLAMP_TO_EDGE),k.useProgram("heatmapTexture").draw(x,v.TRIANGLES,Vr.disabled,Bn.disabled,k.colorModeForRenderPass(),Cn.disabled,ku(k,l,0,1),null,l.id,k.rasterBoundsBuffer,k.quadTriangleIndexBuffer,k.rasterBoundsSegments,l.paint,k.transform.zoom),M.destroy(),l.heatmapFbos.delete(j))}function Of(k,l,p){var x,v;const S=k.gl,j=S.createTexture();S.bindTexture(S.TEXTURE_2D,j),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR);const M=(x=k.HALF_FLOAT)!==null&&x!==void 0?x:S.UNSIGNED_BYTE,D=(v=k.RGBA16F)!==null&&v!==void 0?v:S.RGBA;S.texImage2D(S.TEXTURE_2D,0,D,l,p,0,S.RGBA,M,null);const V=k.createFramebuffer(l,p,!1,!1);return V.colorAttachment.set(j),V}function Pf(k,l){return l.colorRampTexture||(l.colorRampTexture=new le(k,l.colorRamp,k.gl.RGBA)),l.colorRampTexture}function Eh(k,l,p,x,v){if(!p||!x||!x.imageAtlas)return;const S=x.imageAtlas.patternPositions;let j=S[p.to.toString()],M=S[p.from.toString()];if(!j&&M&&(j=M),!M&&j&&(M=j),!j||!M){const D=v.getPaintProperty(l);j=S[D],M=S[D]}j&&M&&k.setConstantPatternPositions(j,M)}function jf(k,l,p,x,v,S,j){const M=k.context.gl,D="fill-pattern",V=p.paint.get(D),G=V&&V.constantOr(1),X=p.getCrossfadeParameters();let ne,ae,ce,ye,we;j?(ae=G&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ne=M.LINES):(ae=G?"fillPattern":"fill",ne=M.TRIANGLES);const ke=V.constantOr(null);for(const Pe of x){const fe=l.getTile(Pe);if(G&&!fe.patternsLoaded())continue;const De=fe.getBucket(p);if(!De)continue;const Ve=De.programConfigurations.get(p.id),Ye=k.useProgram(ae,Ve),dt=k.style.map.terrain&&k.style.map.terrain.getTerrainData(Pe);G&&(k.context.activeTexture.set(M.TEXTURE0),fe.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),Ve.updatePaintBuffers(X)),Eh(Ve,D,ke,fe,p);const wt=dt?Pe:null,Lt=k.translatePosMatrix(wt?wt.posMatrix:Pe.posMatrix,fe,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(j){ye=De.indexBuffer2,we=De.segments2;const Ut=[M.drawingBufferWidth,M.drawingBufferHeight];ce=ae==="fillOutlinePattern"&&G?pm(Lt,k,X,fe,Ut):_0(Lt,Ut)}else ye=De.indexBuffer,we=De.segments,ce=G?fm(Lt,k,X,fe):al(Lt);Ye.draw(k.context,ne,v,k.stencilModeForClipping(Pe),S,Cn.disabled,ce,dt,p.id,De.layoutVertexBuffer,ye,we,p.paint,k.transform.zoom,Ve)}}function Sm(k,l,p,x,v,S,j){const M=k.context,D=M.gl,V="fill-extrusion-pattern",G=p.paint.get(V),X=G.constantOr(1),ne=p.getCrossfadeParameters(),ae=p.paint.get("fill-extrusion-opacity"),ce=G.constantOr(null);for(const ye of x){const we=l.getTile(ye),ke=we.getBucket(p);if(!ke)continue;const Pe=k.style.map.terrain&&k.style.map.terrain.getTerrainData(ye),fe=ke.programConfigurations.get(p.id),De=k.useProgram(X?"fillExtrusionPattern":"fillExtrusion",fe);X&&(k.context.activeTexture.set(D.TEXTURE0),we.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),fe.updatePaintBuffers(ne)),Eh(fe,V,ce,we,p);const Ve=k.translatePosMatrix(ye.posMatrix,we,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Ye=p.paint.get("fill-extrusion-vertical-gradient"),dt=X?Oh(Ve,k,Ye,ae,ye,ne,we):Su(Ve,k,Ye,ae);De.draw(M,M.gl.TRIANGLES,v,S,j,Cn.backCCW,dt,Pe,p.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,p.paint,k.transform.zoom,fe,k.style.map.terrain&&ke.centroidVertexBuffer)}}function zh(k,l,p,x,v,S,j){const M=k.context,D=M.gl,V=p.fbo;if(!V)return;const G=k.useProgram("hillshade"),X=k.style.map.terrain&&k.style.map.terrain.getTerrainData(l);M.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,V.colorAttachment.get()),G.draw(M,D.TRIANGLES,v,S,j,Cn.disabled,((ne,ae,ce,ye)=>{const we=ce.paint.get("hillshade-shadow-color"),ke=ce.paint.get("hillshade-highlight-color"),Pe=ce.paint.get("hillshade-accent-color");let fe=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(fe-=ne.transform.angle);const De=!ne.options.moving;return{u_matrix:ye?ye.posMatrix:ne.transform.calculatePosMatrix(ae.tileID.toUnwrapped(),De),u_image:0,u_latrange:Tc(0,ae.tileID),u_light:[ce.paint.get("hillshade-exaggeration"),fe],u_shadow:we,u_highlight:ke,u_accent:Pe}})(k,p,x,X?l:null),X,x.id,k.rasterBoundsBuffer,k.quadTriangleIndexBuffer,k.rasterBoundsSegments)}function Mh(k,l,p,x,v,S){const j=k.context,M=j.gl,D=l.dem;if(D&&D.data){const V=D.dim,G=D.stride,X=D.getPixels();if(j.activeTexture.set(M.TEXTURE1),j.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||k.getTileTexture(G),l.demTexture){const ae=l.demTexture;ae.update(X,{premultiply:!1}),ae.bind(M.NEAREST,M.CLAMP_TO_EDGE)}else l.demTexture=new le(j,X,M.RGBA,{premultiply:!1}),l.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE);j.activeTexture.set(M.TEXTURE0);let ne=l.fbo;if(!ne){const ae=new le(j,{width:V,height:V,data:null},M.RGBA);ae.bind(M.LINEAR,M.CLAMP_TO_EDGE),ne=l.fbo=j.createFramebuffer(V,V,!0,!1),ne.colorAttachment.set(ae.texture)}j.bindFramebuffer.set(ne.framebuffer),j.viewport.set([0,0,V,V]),k.useProgram("hillshadePrepare").draw(j,M.TRIANGLES,x,v,S,Cn.disabled,((ae,ce)=>{const ye=ce.stride,we=o.H();return o.aP(we,0,o.X,-o.X,0,0,1),o.J(we,we,[0,-o.X,0]),{u_matrix:we,u_image:1,u_dimension:[ye,ye],u_zoom:ae.overscaledZ,u_unpack:ce.getUnpackVector()}})(l.tileID,D),null,p.id,k.rasterBoundsBuffer,k.quadTriangleIndexBuffer,k.rasterBoundsSegments),l.needsHillshadePrepare=!1}}function X1(k,l,p,x,v,S){const j=x.paint.get("raster-fade-duration");if(!S&&j>0){const M=b.now(),D=(M-k.timeAdded)/j,V=l?(M-l.timeAdded)/j:-1,G=p.getSource(),X=v.coveringZoomLevel({tileSize:G.tileSize,roundZoom:G.roundZoom}),ne=!l||Math.abs(l.tileID.overscaledZ-X)>Math.abs(k.tileID.overscaledZ-X),ae=ne&&k.refreshedUponExpiration?1:o.ac(ne?D:1-V,0,1);return k.refreshedUponExpiration&&D>=1&&(k.refreshedUponExpiration=!1),l?{opacity:1,mix:1-ae}:{opacity:ae,mix:0}}return{opacity:1,mix:0}}const D0=new o.aM(1,0,0,1),ln=new o.aM(0,1,0,1),km=new o.aM(0,0,1,1),PC=new o.aM(1,0,1,1),K1=new o.aM(0,1,1,1);function Ih(k,l,p,x){Cm(k,0,l+p/2,k.transform.width,p,x)}function Z1(k,l,p,x){Cm(k,l-p/2,0,p,k.transform.height,x)}function Cm(k,l,p,x,v,S){const j=k.context,M=j.gl;M.enable(M.SCISSOR_TEST),M.scissor(l*k.pixelRatio,p*k.pixelRatio,x*k.pixelRatio,v*k.pixelRatio),j.clear({color:S}),M.disable(M.SCISSOR_TEST)}function Y1(k,l,p){const x=k.context,v=x.gl,S=p.posMatrix,j=k.useProgram("debug"),M=Vr.disabled,D=Bn.disabled,V=k.colorModeForRenderPass(),G="$debug",X=k.style.map.terrain&&k.style.map.terrain.getTerrainData(p);x.activeTexture.set(v.TEXTURE0);const ne=l.getTileByID(p.key).latestRawTileData,ae=Math.floor((ne&&ne.byteLength||0)/1024),ce=l.getTile(p).tileSize,ye=512/Math.min(ce,512)*(p.overscaledZ/k.transform.zoom)*.5;let we=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(we+=` => ${p.overscaledZ}`),function(ke,Pe){ke.initDebugOverlayCanvas();const fe=ke.debugOverlayCanvas,De=ke.context.gl,Ve=ke.debugOverlayCanvas.getContext("2d");Ve.clearRect(0,0,fe.width,fe.height),Ve.shadowColor="white",Ve.shadowBlur=2,Ve.lineWidth=1.5,Ve.strokeStyle="white",Ve.textBaseline="top",Ve.font="bold 36px Open Sans, sans-serif",Ve.fillText(Pe,5,5),Ve.strokeText(Pe,5,5),ke.debugOverlayTexture.update(fe),ke.debugOverlayTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE)}(k,`${we} ${ae}kB`),j.draw(x,v.TRIANGLES,M,D,fi.alphaBlended,Cn.disabled,Ql(S,o.aM.transparent,ye),null,G,k.debugBuffer,k.quadTriangleIndexBuffer,k.debugSegments),j.draw(x,v.LINE_STRIP,M,D,V,Cn.disabled,Ql(S,o.aM.red),X,G,k.debugBuffer,k.tileBorderIndexBuffer,k.debugSegments)}function J1(k,l,p){const x=k.context,v=x.gl,S=k.colorModeForRenderPass(),j=new Vr(v.LEQUAL,Vr.ReadWrite,k.depthRangeFor3D),M=k.useProgram("terrain"),D=l.getTerrainMesh();x.bindFramebuffer.set(null),x.viewport.set([0,0,k.width,k.height]);for(const V of p){const G=k.renderToTexture.getTexture(V),X=l.getTerrainData(V.tileID);x.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,G.texture);const ne=k.transform.calculatePosMatrix(V.tileID.toUnwrapped()),ae=l.getMeshFrameDelta(k.transform.zoom),ce=k.transform.calculateFogMatrix(V.tileID.toUnwrapped()),ye=bf(ne,ae,ce,k.style.sky,k.transform.pitch);M.draw(x,v.TRIANGLES,j,Bn.disabled,S,Cn.backCCW,ye,X,"terrain",D.vertexBuffer,D.indexBuffer,D.segments)}}class Tm{constructor(l,p,x){this.vertexBuffer=l,this.indexBuffer=p,this.segments=x}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Om{constructor(l,p){this.context=new OC(l),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Jt.maxUnderzooming+Jt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new xf}resize(l,p,x){if(this.width=Math.floor(l*x),this.height=Math.floor(p*x),this.pixelRatio=x,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const l=this.context,p=new o.aX;p.emplaceBack(0,0),p.emplaceBack(o.X,0),p.emplaceBack(0,o.X),p.emplaceBack(o.X,o.X),this.tileExtentBuffer=l.createVertexBuffer(p,ql.members),this.tileExtentSegments=o.a0.simpleSegment(0,0,4,2);const x=new o.aX;x.emplaceBack(0,0),x.emplaceBack(o.X,0),x.emplaceBack(0,o.X),x.emplaceBack(o.X,o.X),this.debugBuffer=l.createVertexBuffer(x,ql.members),this.debugSegments=o.a0.simpleSegment(0,0,4,5);const v=new o.$;v.emplaceBack(0,0,0,0),v.emplaceBack(o.X,0,o.X,0),v.emplaceBack(0,o.X,0,o.X),v.emplaceBack(o.X,o.X,o.X,o.X),this.rasterBoundsBuffer=l.createVertexBuffer(v,hn.members),this.rasterBoundsSegments=o.a0.simpleSegment(0,0,4,2);const S=new o.aX;S.emplaceBack(0,0),S.emplaceBack(1,0),S.emplaceBack(0,1),S.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(S,ql.members),this.viewportSegments=o.a0.simpleSegment(0,0,4,2);const j=new o.aZ;j.emplaceBack(0),j.emplaceBack(1),j.emplaceBack(3),j.emplaceBack(2),j.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(j);const M=new o.aY;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(M);const D=this.context.gl;this.stencilClearMode=new Bn({func:D.ALWAYS,mask:0},0,255,D.ZERO,D.ZERO,D.ZERO)}clearStencil(){const l=this.context,p=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const x=o.H();o.aP(x,0,this.width,this.height,0,0,1),o.K(x,x,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,p.TRIANGLES,Vr.disabled,this.stencilClearMode,fi.disabled,Cn.disabled,qi(x),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,p){if(this.currentStencilSource===l.source||!l.isTileClipped()||!p||!p.length)return;this.currentStencilSource=l.source;const x=this.context,v=x.gl;this.nextStencilID+p.length>256&&this.clearStencil(),x.setColorMode(fi.disabled),x.setDepthMode(Vr.disabled);const S=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const j of p){const M=this._tileClippingMaskIDs[j.key]=this.nextStencilID++,D=this.style.map.terrain&&this.style.map.terrain.getTerrainData(j);S.draw(x,v.TRIANGLES,Vr.disabled,new Bn({func:v.ALWAYS,mask:0},M,255,v.KEEP,v.KEEP,v.REPLACE),fi.disabled,Cn.disabled,qi(j.posMatrix),D,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,p=this.context.gl;return new Bn({func:p.NOTEQUAL,mask:255},l,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(l){const p=this.context.gl;return new Bn({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(l){const p=this.context.gl,x=l.sort((j,M)=>M.overscaledZ-j.overscaledZ),v=x[x.length-1].overscaledZ,S=x[0].overscaledZ-v+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const j={};for(let M=0;M<S;M++)j[M+v]=new Bn({func:p.GEQUAL,mask:255},M+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=S,[j,x]}return[{[v]:Bn.disabled},x]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new fi([l.CONSTANT_COLOR,l.ONE],new o.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?fi.unblended:fi.alphaBlended}depthModeForSublayer(l,p,x){if(!this.opaquePassEnabledForLayer())return Vr.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Vr(x||this.context.gl.LEQUAL,p,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,p){this.style=l,this.options=p,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(b.now()),this.imageManager.beginFrame();const x=this.style._order,v=this.style.sourceCaches,S={},j={},M={};for(const D in v){const V=v[D];V.used&&V.prepare(this.context),S[D]=V.getVisibleCoordinates(),j[D]=S[D].slice().reverse(),M[D]=V.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let D=0;D<x.length;D++)if(this.style._layers[x[D]].is3D()){this.opaquePassCutoff=D;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const D of x){const V=this.style._layers[D];if(!V.hasOffscreenPass()||V.isHidden(this.transform.zoom))continue;const G=j[V.source];(V.type==="custom"||G.length)&&this.renderLayer(this,v[V.source],V,G)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?o.aM.black:o.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(D,V){const G=D.context,X=G.gl,ne=((ke,Pe,fe)=>({u_sky_color:ke.properties.get("sky-color"),u_horizon_color:ke.properties.get("horizon-color"),u_horizon:(Pe.height/2+Pe.getHorizon())*fe,u_sky_horizon_blend:ke.properties.get("sky-horizon-blend")*Pe.height/2*fe}))(V,D.style.map.transform,D.pixelRatio),ae=new Vr(X.LEQUAL,Vr.ReadWrite,[0,1]),ce=Bn.disabled,ye=D.colorModeForRenderPass(),we=D.useProgram("sky");if(!V.mesh){const ke=new o.aX;ke.emplaceBack(-1,-1),ke.emplaceBack(1,-1),ke.emplaceBack(1,1),ke.emplaceBack(-1,1);const Pe=new o.aY;Pe.emplaceBack(0,1,2),Pe.emplaceBack(0,2,3),V.mesh=new Tm(G.createVertexBuffer(ke,ql.members),G.createIndexBuffer(Pe),o.a0.simpleSegment(0,0,ke.length,Pe.length))}we.draw(G,X.TRIANGLES,ae,ce,ye,Cn.disabled,ne,void 0,"sky",V.mesh.vertexBuffer,V.mesh.indexBuffer,V.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=x.length-1;this.currentLayer>=0;this.currentLayer--){const D=this.style._layers[x[this.currentLayer]],V=v[D.source],G=S[D.source];this._renderTileClippingMasks(D,G),this.renderLayer(this,V,D,G)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<x.length;this.currentLayer++){const D=this.style._layers[x[this.currentLayer]],V=v[D.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(D))continue;const G=(D.type==="symbol"?M:j)[D.source];this._renderTileClippingMasks(D,S[D.source]),this.renderLayer(this,V,D,G)}if(this.options.showTileBoundaries){const D=function(V,G){let X=null;const ne=Object.values(V._layers).flatMap(we=>we.source&&!we.isHidden(G)?[V.sourceCaches[we.source]]:[]),ae=ne.filter(we=>we.getSource().type==="vector"),ce=ne.filter(we=>we.getSource().type!=="vector"),ye=we=>{(!X||X.getSource().maxzoom<we.getSource().maxzoom)&&(X=we)};return ae.forEach(we=>ye(we)),X||ce.forEach(we=>ye(we)),X}(this.style,this.transform.zoom);D&&function(V,G,X){for(let ne=0;ne<X.length;ne++)Y1(V,G,X[ne])}(this,D,D.getVisibleCoordinates())}this.options.showPadding&&function(D){const V=D.transform.padding;Ih(D,D.transform.height-(V.top||0),3,D0),Ih(D,V.bottom||0,3,ln),Z1(D,V.left||0,3,km),Z1(D,D.transform.width-(V.right||0),3,PC);const G=D.transform.centerPoint;(function(X,ne,ae,ce){Cm(X,ne-1,ae-10,2,20,ce),Cm(X,ne-10,ae-1,20,2,ce)})(D,G.x,D.transform.height-G.y,K1)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(l){if(!this.style||!this.style.map||!this.style.map.terrain)return;const p=this.terrainFacilitator.matrix,x=this.transform.modelViewProjectionMatrix;let v=this.terrainFacilitator.dirty;v||(v=l?!o.a_(p,x):!o.a$(p,x)),v||(v=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),v&&(o.b0(p,x),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(S,j){const M=S.context,D=M.gl,V=fi.unblended,G=new Vr(D.LEQUAL,Vr.ReadWrite,[0,1]),X=j.getTerrainMesh(),ne=j.sourceCache.getRenderableTiles(),ae=S.useProgram("terrainDepth");M.bindFramebuffer.set(j.getFramebuffer("depth").framebuffer),M.viewport.set([0,0,S.width/devicePixelRatio,S.height/devicePixelRatio]),M.clear({color:o.aM.transparent,depth:1});for(const ce of ne){const ye=j.getTerrainData(ce.tileID),we={u_matrix:S.transform.calculatePosMatrix(ce.tileID.toUnwrapped()),u_ele_delta:j.getMeshFrameDelta(S.transform.zoom)};ae.draw(M,D.TRIANGLES,G,Bn.disabled,V,Cn.backCCW,we,ye,"terrain",X.vertexBuffer,X.indexBuffer,X.segments)}M.bindFramebuffer.set(null),M.viewport.set([0,0,S.width,S.height])}(this,this.style.map.terrain),function(S,j){const M=S.context,D=M.gl,V=fi.unblended,G=new Vr(D.LEQUAL,Vr.ReadWrite,[0,1]),X=j.getTerrainMesh(),ne=j.getCoordsTexture(),ae=j.sourceCache.getRenderableTiles(),ce=S.useProgram("terrainCoords");M.bindFramebuffer.set(j.getFramebuffer("coords").framebuffer),M.viewport.set([0,0,S.width/devicePixelRatio,S.height/devicePixelRatio]),M.clear({color:o.aM.transparent,depth:1}),j.coordsIndex=[];for(const ye of ae){const we=j.getTerrainData(ye.tileID);M.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,ne.texture);const ke={u_matrix:S.transform.calculatePosMatrix(ye.tileID.toUnwrapped()),u_terrain_coords_id:(255-j.coordsIndex.length)/255,u_texture:0,u_ele_delta:j.getMeshFrameDelta(S.transform.zoom)};ce.draw(M,D.TRIANGLES,G,Bn.disabled,V,Cn.backCCW,ke,we,"terrain",X.vertexBuffer,X.indexBuffer,X.segments),j.coordsIndex.push(ye.tileID.key)}M.bindFramebuffer.set(null),M.viewport.set([0,0,S.width,S.height])}(this,this.style.map.terrain))}renderLayer(l,p,x,v){if(!x.isHidden(this.transform.zoom)&&(x.type==="background"||x.type==="custom"||(v||[]).length))switch(this.id=x.id,x.type){case"symbol":(function(S,j,M,D,V){if(S.renderPass!=="translucent")return;const G=Bn.disabled,X=S.colorModeForRenderPass();(M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ne,ae,ce,ye,we,ke,Pe,fe,De){const Ve=ae.transform,Ye=Ul(),dt=we==="map",wt=ke==="map";for(const Lt of ne){const Ut=ye.getTile(Lt),zt=Ut.getBucket(ce);if(!zt||!zt.text||!zt.text.segments.get().length)continue;const At=o.ag(zt.textSizeData,Ve.zoom),ir=Dr(Ut,1,ae.transform.zoom),Pr=Di(Lt.posMatrix,wt,dt,ae.transform,ir),It=ce.layout.get("icon-text-fit")!=="none"&&zt.hasIconData();if(At){const Bt=Math.pow(2,Ve.zoom-Ut.tileID.overscaledZ),Cr=ae.style.map.terrain?(Lr,qr)=>ae.style.map.terrain.getElevation(Lt,Lr,qr):null,qn=Ye.translatePosition(Ve,Ut,Pe,fe);Ah(zt,dt,wt,De,Ve,Pr,Lt.posMatrix,Bt,At,It,Ye,qn,Lt.toUnwrapped(),Cr)}}}(D,S,M,j,M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),V),M.paint.get("icon-opacity").constantOr(1)!==0&&z0(S,j,M,D,!1,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),M.layout.get("icon-rotation-alignment"),M.layout.get("icon-pitch-alignment"),M.layout.get("icon-keep-upright"),G,X),M.paint.get("text-opacity").constantOr(1)!==0&&z0(S,j,M,D,!0,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.layout.get("text-keep-upright"),G,X),j.map.showCollisionBoxes&&(Cf(S,j,M,D,!0),Cf(S,j,M,D,!1))})(l,p,x,v,this.style.placement.variableOffsets);break;case"circle":(function(S,j,M,D){if(S.renderPass!=="translucent")return;const V=M.paint.get("circle-opacity"),G=M.paint.get("circle-stroke-width"),X=M.paint.get("circle-stroke-opacity"),ne=!M.layout.get("circle-sort-key").isConstant();if(V.constantOr(1)===0&&(G.constantOr(1)===0||X.constantOr(1)===0))return;const ae=S.context,ce=ae.gl,ye=S.depthModeForSublayer(0,Vr.ReadOnly),we=Bn.disabled,ke=S.colorModeForRenderPass(),Pe=[];for(let fe=0;fe<D.length;fe++){const De=D[fe],Ve=j.getTile(De),Ye=Ve.getBucket(M);if(!Ye)continue;const dt=Ye.programConfigurations.get(M.id),wt=S.useProgram("circle",dt),Lt=Ye.layoutVertexBuffer,Ut=Ye.indexBuffer,zt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(De),At={programConfiguration:dt,program:wt,layoutVertexBuffer:Lt,indexBuffer:Ut,uniformValues:Ph(S,De,Ve,M),terrainData:zt};if(ne){const ir=Ye.segments.get();for(const Pr of ir)Pe.push({segments:new o.a0([Pr]),sortKey:Pr.sortKey,state:At})}else Pe.push({segments:Ye.segments,sortKey:0,state:At})}ne&&Pe.sort((fe,De)=>fe.sortKey-De.sortKey);for(const fe of Pe){const{programConfiguration:De,program:Ve,layoutVertexBuffer:Ye,indexBuffer:dt,uniformValues:wt,terrainData:Lt}=fe.state;Ve.draw(ae,ce.TRIANGLES,ye,we,ke,Cn.disabled,wt,Lt,M.id,Ye,dt,fe.segments,M.paint,S.transform.zoom,De)}})(l,p,x,v);break;case"heatmap":(function(S,j,M,D){if(M.paint.get("heatmap-opacity")===0)return;const V=S.context;if(S.style.map.terrain){for(const G of D){const X=j.getTile(G);j.hasRenderableParent(G)||(S.renderPass==="offscreen"?I0(S,X,M,G):S.renderPass==="translucent"&&Au(S,M,G))}V.viewport.set([0,0,S.width,S.height])}else S.renderPass==="offscreen"?function(G,X,ne,ae){const ce=G.context,ye=ce.gl,we=Bn.disabled,ke=new fi([ye.ONE,ye.ONE],o.aM.transparent,[!0,!0,!0,!0]);(function(Pe,fe,De){const Ve=Pe.gl;Pe.activeTexture.set(Ve.TEXTURE1),Pe.viewport.set([0,0,fe.width/4,fe.height/4]);let Ye=De.heatmapFbos.get(o.aU);Ye?(Ve.bindTexture(Ve.TEXTURE_2D,Ye.colorAttachment.get()),Pe.bindFramebuffer.set(Ye.framebuffer)):(Ye=Of(Pe,fe.width/4,fe.height/4),De.heatmapFbos.set(o.aU,Ye))})(ce,G,ne),ce.clear({color:o.aM.transparent});for(let Pe=0;Pe<ae.length;Pe++){const fe=ae[Pe];if(X.hasRenderableParent(fe))continue;const De=X.getTile(fe),Ve=De.getBucket(ne);if(!Ve)continue;const Ye=Ve.programConfigurations.get(ne.id),dt=G.useProgram("heatmap",Ye),{zoom:wt}=G.transform;dt.draw(ce,ye.TRIANGLES,Vr.disabled,we,ke,Cn.disabled,_s(fe.posMatrix,De,wt,ne.paint.get("heatmap-intensity")),null,ne.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,ne.paint,G.transform.zoom,Ye)}ce.viewport.set([0,0,G.width,G.height])}(S,j,M,D):S.renderPass==="translucent"&&function(G,X){const ne=G.context,ae=ne.gl;ne.setColorMode(G.colorModeForRenderPass());const ce=X.heatmapFbos.get(o.aU);ce&&(ne.activeTexture.set(ae.TEXTURE0),ae.bindTexture(ae.TEXTURE_2D,ce.colorAttachment.get()),ne.activeTexture.set(ae.TEXTURE1),Pf(ne,X).bind(ae.LINEAR,ae.CLAMP_TO_EDGE),G.useProgram("heatmapTexture").draw(ne,ae.TRIANGLES,Vr.disabled,Bn.disabled,G.colorModeForRenderPass(),Cn.disabled,ku(G,X,0,1),null,X.id,G.viewportBuffer,G.quadTriangleIndexBuffer,G.viewportSegments,X.paint,G.transform.zoom))}(S,M)})(l,p,x,v);break;case"line":(function(S,j,M,D){if(S.renderPass!=="translucent")return;const V=M.paint.get("line-opacity"),G=M.paint.get("line-width");if(V.constantOr(1)===0||G.constantOr(1)===0)return;const X=S.depthModeForSublayer(0,Vr.ReadOnly),ne=S.colorModeForRenderPass(),ae=M.paint.get("line-dasharray"),ce=M.paint.get("line-pattern"),ye=ce.constantOr(1),we=M.paint.get("line-gradient"),ke=M.getCrossfadeParameters(),Pe=ye?"linePattern":ae?"lineSDF":we?"lineGradient":"line",fe=S.context,De=fe.gl;let Ve=!0;for(const Ye of D){const dt=j.getTile(Ye);if(ye&&!dt.patternsLoaded())continue;const wt=dt.getBucket(M);if(!wt)continue;const Lt=wt.programConfigurations.get(M.id),Ut=S.context.program.get(),zt=S.useProgram(Pe,Lt),At=Ve||zt.program!==Ut,ir=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Ye),Pr=ce.constantOr(null);if(Pr&&dt.imageAtlas){const Cr=dt.imageAtlas,qn=Cr.patternPositions[Pr.to.toString()],Lr=Cr.patternPositions[Pr.from.toString()];qn&&Lr&&Lt.setConstantPatternPositions(qn,Lr)}const It=ir?Ye:null,Bt=ye?Xo(S,dt,M,ke,It):ae?w0(S,dt,M,ae,ke,It):we?ll(S,dt,M,wt.lineClipsArray.length,It):Cu(S,dt,M,It);if(ye)fe.activeTexture.set(De.TEXTURE0),dt.imageAtlasTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE),Lt.updatePaintBuffers(ke);else if(ae&&(At||S.lineAtlas.dirty))fe.activeTexture.set(De.TEXTURE0),S.lineAtlas.bind(fe);else if(we){const Cr=wt.gradients[M.id];let qn=Cr.texture;if(M.gradientVersion!==Cr.version){let Lr=256;if(M.stepInterpolant){const qr=j.getSource().maxzoom,Qn=Ye.canonical.z===qr?Math.ceil(1<<S.transform.maxZoom-Ye.canonical.z):1;Lr=o.ac(o.aV(wt.maxLineLength/o.X*1024*Qn),256,fe.maxTextureSize)}Cr.gradient=o.aW({expression:M.gradientExpression(),evaluationKey:"lineProgress",resolution:Lr,image:Cr.gradient||void 0,clips:wt.lineClipsArray}),Cr.texture?Cr.texture.update(Cr.gradient):Cr.texture=new le(fe,Cr.gradient,De.RGBA),Cr.version=M.gradientVersion,qn=Cr.texture}fe.activeTexture.set(De.TEXTURE0),qn.bind(M.stepInterpolant?De.NEAREST:De.LINEAR,De.CLAMP_TO_EDGE)}zt.draw(fe,De.TRIANGLES,X,S.stencilModeForClipping(Ye),ne,Cn.disabled,Bt,ir,M.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,M.paint,S.transform.zoom,Lt,wt.layoutVertexBuffer2),Ve=!1}})(l,p,x,v);break;case"fill":(function(S,j,M,D){const V=M.paint.get("fill-color"),G=M.paint.get("fill-opacity");if(G.constantOr(1)===0)return;const X=S.colorModeForRenderPass(),ne=M.paint.get("fill-pattern"),ae=S.opaquePassEnabledForLayer()&&!ne.constantOr(1)&&V.constantOr(o.aM.transparent).a===1&&G.constantOr(0)===1?"opaque":"translucent";if(S.renderPass===ae){const ce=S.depthModeForSublayer(1,S.renderPass==="opaque"?Vr.ReadWrite:Vr.ReadOnly);jf(S,j,M,D,ce,X,!1)}if(S.renderPass==="translucent"&&M.paint.get("fill-antialias")){const ce=S.depthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,Vr.ReadOnly);jf(S,j,M,D,ce,X,!0)}})(l,p,x,v);break;case"fill-extrusion":(function(S,j,M,D){const V=M.paint.get("fill-extrusion-opacity");if(V!==0&&S.renderPass==="translucent"){const G=new Vr(S.context.gl.LEQUAL,Vr.ReadWrite,S.depthRangeFor3D);if(V!==1||M.paint.get("fill-extrusion-pattern").constantOr(1))Sm(S,j,M,D,G,Bn.disabled,fi.disabled),Sm(S,j,M,D,G,S.stencilModeFor3D(),S.colorModeForRenderPass());else{const X=S.colorModeForRenderPass();Sm(S,j,M,D,G,Bn.disabled,X)}}})(l,p,x,v);break;case"hillshade":(function(S,j,M,D){if(S.renderPass!=="offscreen"&&S.renderPass!=="translucent")return;const V=S.context,G=S.depthModeForSublayer(0,Vr.ReadOnly),X=S.colorModeForRenderPass(),[ne,ae]=S.renderPass==="translucent"?S.stencilConfigForOverlap(D):[{},D];for(const ce of ae){const ye=j.getTile(ce);ye.needsHillshadePrepare!==void 0&&ye.needsHillshadePrepare&&S.renderPass==="offscreen"?Mh(S,ye,M,G,Bn.disabled,X):S.renderPass==="translucent"&&zh(S,ce,ye,M,G,ne[ce.overscaledZ],X)}V.viewport.set([0,0,S.width,S.height])})(l,p,x,v);break;case"raster":(function(S,j,M,D){if(S.renderPass!=="translucent"||M.paint.get("raster-opacity")===0||!D.length)return;const V=S.context,G=V.gl,X=j.getSource(),ne=S.useProgram("raster"),ae=S.colorModeForRenderPass(),[ce,ye]=X instanceof on?[{},D]:S.stencilConfigForOverlap(D),we=ye[ye.length-1].overscaledZ,ke=!S.options.moving;for(const Pe of ye){const fe=S.depthModeForSublayer(Pe.overscaledZ-we,M.paint.get("raster-opacity")===1?Vr.ReadWrite:Vr.ReadOnly,G.LESS),De=j.getTile(Pe);De.registerFadeDuration(M.paint.get("raster-fade-duration"));const Ve=j.findLoadedParent(Pe,0),Ye=j.findLoadedSibling(Pe),dt=X1(De,Ve||Ye||null,j,M,S.transform,S.style.map.terrain);let wt,Lt;const Ut=M.paint.get("raster-resampling")==="nearest"?G.NEAREST:G.LINEAR;V.activeTexture.set(G.TEXTURE0),De.texture.bind(Ut,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),V.activeTexture.set(G.TEXTURE1),Ve?(Ve.texture.bind(Ut,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),wt=Math.pow(2,Ve.tileID.overscaledZ-De.tileID.overscaledZ),Lt=[De.tileID.canonical.x*wt%1,De.tileID.canonical.y*wt%1]):De.texture.bind(Ut,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),De.texture.useMipmap&&V.extTextureFilterAnisotropic&&S.transform.pitch>20&&G.texParameterf(G.TEXTURE_2D,V.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,V.extTextureFilterAnisotropicMax);const zt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Pe),At=zt?Pe:null,ir=At?At.posMatrix:S.transform.calculatePosMatrix(Pe.toUnwrapped(),ke),Pr=gm(ir,Lt||[0,0],wt||1,dt,M);X instanceof on?ne.draw(V,G.TRIANGLES,fe,Bn.disabled,ae,Cn.disabled,Pr,zt,M.id,X.boundsBuffer,S.quadTriangleIndexBuffer,X.boundsSegments):ne.draw(V,G.TRIANGLES,fe,ce[Pe.overscaledZ],ae,Cn.disabled,Pr,zt,M.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments)}})(l,p,x,v);break;case"background":(function(S,j,M,D){const V=M.paint.get("background-color"),G=M.paint.get("background-opacity");if(G===0)return;const X=S.context,ne=X.gl,ae=S.transform,ce=ae.tileSize,ye=M.paint.get("background-pattern");if(S.isPatternMissing(ye))return;const we=!ye&&V.a===1&&G===1&&S.opaquePassEnabledForLayer()?"opaque":"translucent";if(S.renderPass!==we)return;const ke=Bn.disabled,Pe=S.depthModeForSublayer(0,we==="opaque"?Vr.ReadWrite:Vr.ReadOnly),fe=S.colorModeForRenderPass(),De=S.useProgram(ye?"backgroundPattern":"background"),Ve=D||ae.coveringTiles({tileSize:ce,terrain:S.style.map.terrain});ye&&(X.activeTexture.set(ne.TEXTURE0),S.imageManager.bind(S.context));const Ye=M.getCrossfadeParameters();for(const dt of Ve){const wt=D?dt.posMatrix:S.transform.calculatePosMatrix(dt.toUnwrapped()),Lt=ye?$e(wt,G,S,ye,{tileID:dt,tileSize:ce},Ye):ge(wt,G,V),Ut=S.style.map.terrain&&S.style.map.terrain.getTerrainData(dt);De.draw(X,ne.TRIANGLES,Pe,ke,fe,Cn.disabled,Lt,Ut,M.id,S.tileExtentBuffer,S.quadTriangleIndexBuffer,S.tileExtentSegments)}})(l,0,x,v);break;case"custom":(function(S,j,M){const D=S.context,V=M.implementation;if(S.renderPass==="offscreen"){const G=V.prerender;G&&(S.setCustomLayerDefaults(),D.setColorMode(S.colorModeForRenderPass()),G.call(V,D.gl,S.transform.customLayerMatrix()),D.setDirty(),S.setBaseState())}else if(S.renderPass==="translucent"){S.setCustomLayerDefaults(),D.setColorMode(S.colorModeForRenderPass()),D.setStencilMode(Bn.disabled);const G=V.renderingMode==="3d"?new Vr(S.context.gl.LEQUAL,Vr.ReadWrite,S.depthRangeFor3D):S.depthModeForSublayer(0,Vr.ReadOnly);D.setDepthMode(G),V.render(D.gl,S.transform.customLayerMatrix(),{farZ:S.transform.farZ,nearZ:S.transform.nearZ,fov:S.transform._fov,modelViewProjectionMatrix:S.transform.modelViewProjectionMatrix,projectionMatrix:S.transform.projectionMatrix}),D.setDirty(),S.setBaseState(),D.bindFramebuffer.set(null)}})(l,0,x)}}translatePosMatrix(l,p,x,v,S){if(!x[0]&&!x[1])return l;const j=S?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(j){const V=Math.sin(j),G=Math.cos(j);x=[x[0]*G-x[1]*V,x[0]*V+x[1]*G]}const M=[S?x[0]:Dr(p,x[0],this.transform.zoom),S?x[1]:Dr(p,x[1],this.transform.zoom),0],D=new Float32Array(16);return o.J(D,l,M),D}saveTileTexture(l){const p=this._tileTextures[l.size[0]];p?p.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const p=this._tileTextures[l];return p&&p.length>0?p.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const p=this.imageManager.getPattern(l.from.toString()),x=this.imageManager.getPattern(l.to.toString());return!p||!x}useProgram(l,p){this.cache=this.cache||{};const x=l+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[x]||(this.cache[x]=new Ch(this.context,ol[l],p,ot[l],this._showOverdrawInspector,this.style.map.terrain)),this.cache[x]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new le(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:p}=this.context.gl;return this.width!==l||this.height!==p}}class Dh{constructor(l,p){this.points=l,this.planes=p}static fromInvProjectionMatrix(l,p,x){const v=Math.pow(2,x),S=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(M=>{const D=1/(M=o.af([],M,l))[3]/p*v;return o.b1(M,M,[D,D,1/M[3],D])}),j=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(M=>{const D=function(ne,ae){var ce=ae[0],ye=ae[1],we=ae[2],ke=ce*ce+ye*ye+we*we;return ke>0&&(ke=1/Math.sqrt(ke)),ne[0]=ae[0]*ke,ne[1]=ae[1]*ke,ne[2]=ae[2]*ke,ne}([],function(ne,ae,ce){var ye=ae[0],we=ae[1],ke=ae[2],Pe=ce[0],fe=ce[1],De=ce[2];return ne[0]=we*De-ke*fe,ne[1]=ke*Pe-ye*De,ne[2]=ye*fe-we*Pe,ne}([],Z([],S[M[0]],S[M[1]]),Z([],S[M[2]],S[M[1]]))),V=-((G=D)[0]*(X=S[M[1]])[0]+G[1]*X[1]+G[2]*X[2]);var G,X;return D.concat(V)});return new Dh(S,j)}}class Rh{constructor(l,p){this.min=l,this.max=p,this.center=function(x,v,S){return x[0]=.5*v[0],x[1]=.5*v[1],x[2]=.5*v[2],x}([],function(x,v,S){return x[0]=v[0]+S[0],x[1]=v[1]+S[1],x[2]=v[2]+S[2],x}([],this.min,this.max))}quadrant(l){const p=[l%2==0,l<2],x=Q(this.min),v=Q(this.max);for(let S=0;S<p.length;S++)x[S]=p[S]?this.min[S]:this.center[S],v[S]=p[S]?this.center[S]:this.max[S];return v[2]=this.max[2],new Rh(x,v)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersects(l){const p=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let x=!0;for(let v=0;v<l.planes.length;v++){const S=l.planes[v];let j=0;for(let M=0;M<p.length;M++)o.b2(S,p[M])>=0&&j++;if(j===0)return 0;j!==p.length&&(x=!1)}if(x)return 2;for(let v=0;v<3;v++){let S=Number.MAX_VALUE,j=-Number.MAX_VALUE;for(let M=0;M<l.points.length;M++){const D=l.points[M][v]-this.min[v];S=Math.min(S,D),j=Math.max(j,D)}if(j<0||S>this.max[v]-this.min[v])return 0}return 1}}class Lh{constructor(l=0,p=0,x=0,v=0){if(isNaN(l)||l<0||isNaN(p)||p<0||isNaN(x)||x<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=p,this.left=x,this.right=v}interpolate(l,p,x){return p.top!=null&&l.top!=null&&(this.top=o.y.number(l.top,p.top,x)),p.bottom!=null&&l.bottom!=null&&(this.bottom=o.y.number(l.bottom,p.bottom,x)),p.left!=null&&l.left!=null&&(this.left=o.y.number(l.left,p.left,x)),p.right!=null&&l.right!=null&&(this.right=o.y.number(l.right,p.right,x)),this}getCenter(l,p){const x=o.ac((this.left+l-this.right)/2,0,l),v=o.ac((this.top+p-this.bottom)/2,0,p);return new o.P(x,v)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Lh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const R0=85.051129;class Fh{constructor(l,p,x,v,S){this.tileSize=512,this._renderWorldCopies=S===void 0||!!S,this._minZoom=l||0,this._maxZoom=p||22,this._minPitch=x??0,this._maxPitch=v??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Lh,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const l=new Fh(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.apply(this),l}apply(l){this.tileSize=l.tileSize,this.latRange=l.latRange,this.lngRange=l.lngRange,this.width=l.width,this.height=l.height,this._center=l._center,this._elevation=l._elevation,this.minElevationForCurrentTile=l.minElevationForCurrentTile,this.zoom=l.zoom,this.angle=l.angle,this._fov=l._fov,this._pitch=l._pitch,this._unmodified=l._unmodified,this._edgeInsets=l._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(l){const p=-o.b3(l,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=function(){var x=new o.A(4);return o.A!=Float32Array&&(x[1]=0,x[2]=0),x[0]=1,x[3]=1,x}(),function(x,v,S){var j=v[0],M=v[1],D=v[2],V=v[3],G=Math.sin(S),X=Math.cos(S);x[0]=j*X+D*G,x[1]=M*X+V*G,x[2]=j*-G+D*X,x[3]=M*-G+V*X}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const p=o.ac(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(l){const p=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.tileZoom=Math.max(0,Math.floor(p)),this.scale=this.zoomScale(p),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,p,x){this._unmodified=!1,this._edgeInsets.interpolate(l,p,x),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const p=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(l){const p=[new o.b4(0,l)];if(this._renderWorldCopies){const x=this.pointCoordinate(new o.P(0,0)),v=this.pointCoordinate(new o.P(this.width,0)),S=this.pointCoordinate(new o.P(this.width,this.height)),j=this.pointCoordinate(new o.P(0,this.height)),M=Math.floor(Math.min(x.x,v.x,S.x,j.x)),D=Math.floor(Math.max(x.x,v.x,S.x,j.x)),V=1;for(let G=M-V;G<=D+V;G++)G!==0&&p.push(new o.b4(G,l))}return p}coveringTiles(l){var p,x;let v=this.coveringZoomLevel(l);const S=v;if(l.minzoom!==void 0&&v<l.minzoom)return[];l.maxzoom!==void 0&&v>l.maxzoom&&(v=l.maxzoom);const j=this.pointCoordinate(this.getCameraPoint()),M=o.Z.fromLngLat(this.center),D=Math.pow(2,v),V=[D*j.x,D*j.y,0],G=[D*M.x,D*M.y,0],X=Dh.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,v);let ne=l.minzoom||0;!l.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ne=v);const ae=l.terrain?2/Math.min(this.tileSize,l.tileSize)*this.tileSize:3,ce=fe=>({aabb:new Rh([fe*D,0,0],[(fe+1)*D,D,0]),zoom:0,x:0,y:0,wrap:fe,fullyVisible:!1}),ye=[],we=[],ke=v,Pe=l.reparseOverscaled?S:v;if(this._renderWorldCopies)for(let fe=1;fe<=3;fe++)ye.push(ce(-fe)),ye.push(ce(fe));for(ye.push(ce(0));ye.length>0;){const fe=ye.pop(),De=fe.x,Ve=fe.y;let Ye=fe.fullyVisible;if(!Ye){const zt=fe.aabb.intersects(X);if(zt===0)continue;Ye=zt===2}const dt=l.terrain?V:G,wt=fe.aabb.distanceX(dt),Lt=fe.aabb.distanceY(dt),Ut=Math.max(Math.abs(wt),Math.abs(Lt));if(fe.zoom===ke||Ut>ae+(1<<ke-fe.zoom)-2&&fe.zoom>=ne){const zt=ke-fe.zoom,At=V[0]-.5-(De<<zt),ir=V[1]-.5-(Ve<<zt);we.push({tileID:new o.S(fe.zoom===ke?Pe:fe.zoom,fe.wrap,fe.zoom,De,Ve),distanceSq:J([G[0]-.5-De,G[1]-.5-Ve]),tileDistanceToCamera:Math.sqrt(At*At+ir*ir)})}else for(let zt=0;zt<4;zt++){const At=(De<<1)+zt%2,ir=(Ve<<1)+(zt>>1),Pr=fe.zoom+1;let It=fe.aabb.quadrant(zt);if(l.terrain){const Bt=new o.S(Pr,fe.wrap,Pr,At,ir),Cr=l.terrain.getMinMaxElevation(Bt),qn=(p=Cr.minElevation)!==null&&p!==void 0?p:this.elevation,Lr=(x=Cr.maxElevation)!==null&&x!==void 0?x:this.elevation;It=new Rh([It.min[0],It.min[1],qn],[It.max[0],It.max[1],Lr])}ye.push({aabb:It,zoom:Pr,x:At,y:ir,wrap:fe.wrap,fullyVisible:Ye})}}return we.sort((fe,De)=>fe.distanceSq-De.distanceSq).map(fe=>fe.tileID)}resize(l,p){this.width=l,this.height=p,this.pixelsToGLUnits=[2/l,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const p=o.ac(l.lat,-85.051129,R0);return new o.P(o.O(l.lng)*this.worldSize,o.Q(p)*this.worldSize)}unproject(l){return new o.Z(l.x/this.worldSize,l.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(l){const p=this.elevation,x=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,v=this.pointLocation(this.centerPoint,l),S=l.getElevationForLngLatZoom(v,this.tileZoom);if(!(this.elevation-S))return;const j=x+p-S,M=Math.cos(this._pitch)*this.cameraToCenterDistance/j/o.b5(1,v.lat),D=this.scaleZoom(M/this.tileSize);this._elevation=S,this._center=v,this.zoom=D}setLocationAtPoint(l,p){const x=this.pointCoordinate(p),v=this.pointCoordinate(this.centerPoint),S=this.locationCoordinate(l),j=new o.Z(S.x-(x.x-v.x),S.y-(x.y-v.y));this.center=this.coordinateLocation(j),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(l,p){return p?this.coordinatePoint(this.locationCoordinate(l),p.getElevationForLngLatZoom(l,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(l))}pointLocation(l,p){return this.coordinateLocation(this.pointCoordinate(l,p))}locationCoordinate(l){return o.Z.fromLngLat(l)}coordinateLocation(l){return l&&l.toLngLat()}pointCoordinate(l,p){if(p){const ne=p.pointCoordinate(l);if(ne!=null)return ne}const x=[l.x,l.y,0,1],v=[l.x,l.y,1,1];o.af(x,x,this.pixelMatrixInverse),o.af(v,v,this.pixelMatrixInverse);const S=x[3],j=v[3],M=x[1]/S,D=v[1]/j,V=x[2]/S,G=v[2]/j,X=V===G?0:(0-V)/(G-V);return new o.Z(o.y.number(x[0]/S,v[0]/j,X)/this.worldSize,o.y.number(M,D,X)/this.worldSize)}coordinatePoint(l,p=0,x=this.pixelMatrix){const v=[l.x*this.worldSize,l.y*this.worldSize,p,1];return o.af(v,v,x),new o.P(v[0]/v[3],v[1]/v[3])}getBounds(){const l=Math.max(0,this.height/2-this.getHorizon());return new Te().extend(this.pointLocation(new o.P(0,l))).extend(this.pointLocation(new o.P(this.width,l))).extend(this.pointLocation(new o.P(this.width,this.height))).extend(this.pointLocation(new o.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Te([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,R0])}calculateTileMatrix(l){const p=l.canonical,x=this.worldSize/this.zoomScale(p.z),v=p.x+Math.pow(2,p.z)*l.wrap,S=o.an(new Float64Array(16));return o.J(S,S,[v*x,p.y*x,0]),o.K(S,S,[x/o.X,x/o.X,1]),S}calculatePosMatrix(l,p=!1){const x=l.key,v=p?this._alignedPosMatrixCache:this._posMatrixCache;if(v[x])return v[x];const S=this.calculateTileMatrix(l);return o.L(S,p?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,S),v[x]=new Float32Array(S),v[x]}calculateFogMatrix(l){const p=l.key,x=this._fogMatrixCache;if(x[p])return x[p];const v=this.calculateTileMatrix(l);return o.L(v,this.fogMatrix,v),x[p]=new Float32Array(v),x[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(l,p){p=o.ac(+p,this.minZoom,this.maxZoom);const x={center:new o.N(l.lng,l.lat),zoom:p};let v=this.lngRange;if(!this._renderWorldCopies&&v===null){const fe=179.9999999999;v=[-fe,fe]}const S=this.tileSize*this.zoomScale(x.zoom);let j=0,M=S,D=0,V=S,G=0,X=0;const{x:ne,y:ae}=this.size;if(this.latRange){const fe=this.latRange;j=o.Q(fe[1])*S,M=o.Q(fe[0])*S,M-j<ae&&(G=ae/(M-j))}v&&(D=o.b3(o.O(v[0])*S,0,S),V=o.b3(o.O(v[1])*S,0,S),V<D&&(V+=S),V-D<ne&&(X=ne/(V-D)));const{x:ce,y:ye}=this.project.call({worldSize:S},l);let we,ke;const Pe=Math.max(X||0,G||0);if(Pe){const fe=new o.P(X?(V+D)/2:ce,G?(M+j)/2:ye);return x.center=this.unproject.call({worldSize:S},fe).wrap(),x.zoom+=this.scaleZoom(Pe),x}if(this.latRange){const fe=ae/2;ye-fe<j&&(ke=j+fe),ye+fe>M&&(ke=M-fe)}if(v){const fe=(D+V)/2;let De=ce;this._renderWorldCopies&&(De=o.b3(ce,fe-S/2,fe+S/2));const Ve=ne/2;De-Ve<D&&(we=D+Ve),De+Ve>V&&(we=V-Ve)}if(we!==void 0||ke!==void 0){const fe=new o.P(we??ce,ke??ye);x.center=this.unproject.call({worldSize:S},fe).wrap()}return x}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this._unmodified,{center:p,zoom:x}=this.getConstrained(this.center,this.zoom);this.center=p,this.zoom=x,this._unmodified=l,this._constraining=!1}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,p=this.point.x,x=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.b5(1,this.center.lat)*this.worldSize;let v=o.an(new Float64Array(16));o.K(v,v,[this.width/2,-this.height/2,1]),o.J(v,v,[1,-1,0]),this.labelPlaneMatrix=v,v=o.an(new Float64Array(16)),o.K(v,v,[1,-1,1]),o.J(v,v,[-1,-1,0]),o.K(v,v,[2/this.width,2/this.height,1]),this.glCoordMatrix=v;const S=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),j=Math.min(this.elevation,this.minElevationForCurrentTile),M=S-j*this._pixelPerMeter/Math.cos(this._pitch),D=j<0?M:S,V=Math.PI/2+this._pitch,G=this._fov*(.5+l.y/this.height),X=Math.sin(G)*D/Math.sin(o.ac(Math.PI-V-G,.01,Math.PI-.01)),ne=this.getHorizon(),ae=2*Math.atan(ne/this.cameraToCenterDistance)*(.5+l.y/(2*ne)),ce=Math.sin(ae)*D/Math.sin(o.ac(Math.PI-V-ae,.01,Math.PI-.01)),ye=Math.min(X,ce);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*ye+D),this.nearZ=this.height/50,v=new Float64Array(16),o.b6(v,this._fov,this.width/this.height,this.nearZ,this.farZ),v[8]=2*-l.x/this.width,v[9]=2*l.y/this.height,this.projectionMatrix=o.ae(v),o.K(v,v,[1,-1,1]),o.J(v,v,[0,0,-this.cameraToCenterDistance]),o.b7(v,v,this._pitch),o.ad(v,v,this.angle),o.J(v,v,[-p,-x,0]),this.mercatorMatrix=o.K([],v,[this.worldSize,this.worldSize,this.worldSize]),o.K(v,v,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.L(new Float64Array(16),this.labelPlaneMatrix,v),o.J(v,v,[0,0,-this.elevation]),this.modelViewProjectionMatrix=v,this.invModelViewProjectionMatrix=o.as([],v),this.fogMatrix=new Float64Array(16),o.b6(this.fogMatrix,this._fov,this.width/this.height,S,this.farZ),this.fogMatrix[8]=2*-l.x/this.width,this.fogMatrix[9]=2*l.y/this.height,o.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),o.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),o.b7(this.fogMatrix,this.fogMatrix,this._pitch),o.ad(this.fogMatrix,this.fogMatrix,this.angle),o.J(this.fogMatrix,this.fogMatrix,[-p,-x,0]),o.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),o.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=o.L(new Float64Array(16),this.labelPlaneMatrix,v);const we=this.width%2/2,ke=this.height%2/2,Pe=Math.cos(this.angle),fe=Math.sin(this.angle),De=p-Math.round(p)+Pe*we+fe*ke,Ve=x-Math.round(x)+Pe*ke+fe*we,Ye=new Float64Array(v);if(o.J(Ye,Ye,[De>.5?De-1:De,Ve>.5?Ve-1:Ve,0]),this.alignedModelViewProjectionMatrix=Ye,v=o.as(new Float64Array(16),this.pixelMatrix),!v)throw new Error("failed to invert matrix");this.pixelMatrixInverse=v,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const l=this.pointCoordinate(new o.P(0,0)),p=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.af(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,l))}getCameraQueryGeometry(l){const p=this.getCameraPoint();if(l.length===1)return[l[0],p];{let x=p.x,v=p.y,S=p.x,j=p.y;for(const M of l)x=Math.min(x,M.x),v=Math.min(v,M.y),S=Math.max(S,M.x),j=Math.max(j,M.y);return[new o.P(x,v),new o.P(S,v),new o.P(S,j),new o.P(x,j),new o.P(x,v)]}}lngLatToCameraDepth(l,p){const x=this.locationCoordinate(l),v=[x.x*this.worldSize,x.y*this.worldSize,p,1];return o.af(v,v,this.modelViewProjectionMatrix),v[2]/v[3]}}function Af(k,l){let p,x=!1,v=null,S=null;const j=()=>{v=null,x&&(k.apply(S,p),v=setTimeout(j,l),x=!1)};return(...M)=>(x=!0,S=this,p=M,v||j(),v)}class Pm{constructor(l){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let x;return p.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(x=v)}),(x&&x[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(p.length>=3&&!p.some(x=>isNaN(x))){const x=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:x,pitch:+(p[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,p)},this._removeHash=()=>{const p=this._getCurrentHash();if(p.length===0)return;const x=p.join("/");let v=x;v.split("&").length>0&&(v=v.split("&")[0]),this._hashName&&(v=`${this._hashName}=${x}`);let S=window.location.hash.replace(v,"");S.startsWith("#&")?S=S.slice(0,1)+S.slice(2):S==="#"&&(S="");let j=window.location.href.replace(/(#.+)?$/,S);j=j.replace("&&","&"),window.history.replaceState(window.history.state,null,j)},this._updateHash=Af(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(l){const p=this._map.getCenter(),x=Math.round(100*this._map.getZoom())/100,v=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,v),j=Math.round(p.lng*S)/S,M=Math.round(p.lat*S)/S,D=this._map.getBearing(),V=this._map.getPitch();let G="";if(G+=l?`/${j}/${M}/${x}`:`${x}/${M}/${j}`,(D||V)&&(G+="/"+Math.round(10*D)/10),V&&(G+=`/${Math.round(V)}`),this._hashName){const X=this._hashName;let ne=!1;const ae=window.location.hash.slice(1).split("&").map(ce=>{const ye=ce.split("=")[0];return ye===X?(ne=!0,`${ye}=${G}`):ce}).filter(ce=>ce);return ne||ae.push(`${X}=${G}`),`#${ae.join("&")}`}return`#${G}`}}const jm={linearity:.3,easing:o.b8(0,0,.3,1)},L0=o.e({deceleration:2500,maxSpeed:1400},jm),jC=o.e({deceleration:20,maxSpeed:1400},jm),e_=o.e({deceleration:1e3,maxSpeed:360},jm),Am=o.e({deceleration:1e3,maxSpeed:90},jm);class F0{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,p=b.now();for(;l.length>0&&p-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)p.zoom+=S.zoomDelta||0,p.bearing+=S.bearingDelta||0,p.pitch+=S.pitchDelta||0,S.panDelta&&p.pan._add(S.panDelta),S.around&&(p.around=S.around),S.pinchAround&&(p.pinchAround=S.pinchAround);const x=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(p.pan.mag()){const S=zf(p.pan.mag(),x,o.e({},L0,l||{}));v.offset=p.pan.mult(S.amount/p.pan.mag()),v.center=this._map.transform.center,Ef(v,S)}if(p.zoom){const S=zf(p.zoom,x,jC);v.zoom=this._map.transform.zoom+S.amount,Ef(v,S)}if(p.bearing){const S=zf(p.bearing,x,e_);v.bearing=this._map.transform.bearing+o.ac(S.amount,-179,179),Ef(v,S)}if(p.pitch){const S=zf(p.pitch,x,Am);v.pitch=this._map.transform.pitch+S.amount,Ef(v,S)}if(v.zoom||v.bearing){const S=p.pinchAround===void 0?p.around:p.pinchAround;v.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),o.e(v,{noMoveStart:!0})}}function Ef(k,l){(!k.duration||k.duration<l.duration)&&(k.duration=l.duration,k.easing=l.easing)}function zf(k,l,p){const{maxSpeed:x,linearity:v,deceleration:S}=p,j=o.ac(k*v/(l/1e3),-x,x),M=Math.abs(j)/(S*v);return{easing:p.easing,duration:1e3*M,amount:j*(M/2)}}class Ss extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,x,v={}){const S=w.mousePos(p.getCanvas(),x),j=p.unproject(S);super(l,o.e({point:S,lngLat:j,originalEvent:x},v)),this._defaultPrevented=!1,this.target=p}}class Eu extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,x){const v=l==="touchend"?x.changedTouches:x.touches,S=w.touchPos(p.getCanvasContainer(),v),j=S.map(D=>p.unproject(D)),M=S.reduce((D,V,G,X)=>D.add(V.div(X.length)),new o.P(0,0));super(l,{points:S,point:M,lngLats:j,lngLat:p.unproject(M),originalEvent:x}),this._defaultPrevented=!1}}class t_ extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,x){super(l,{originalEvent:x}),this._defaultPrevented=!1}}class r_{constructor(l,p){this._map=l,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new t_(l.type,this._map,l))}mousedown(l,p){return this._mousedownPos=p,this._firePreventable(new Ss(l.type,this._map,l))}mouseup(l){this._map.fire(new Ss(l.type,this._map,l))}click(l,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Ss(l.type,this._map,l))}dblclick(l){return this._firePreventable(new Ss(l.type,this._map,l))}mouseover(l){this._map.fire(new Ss(l.type,this._map,l))}mouseout(l){this._map.fire(new Ss(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Eu(l.type,this._map,l))}touchmove(l){this._map.fire(new Eu(l.type,this._map,l))}touchend(l){this._map.fire(new Eu(l.type,this._map,l))}touchcancel(l){this._map.fire(new Eu(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pi{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new Ss(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ss("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new Ss(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ea{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.pointLocation(o.P.convert(l),this._map.terrain)}}class Po{constructor(l,p){this._map=l,this._tr=new Ea(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,p){this.isEnabled()&&l.shiftKey&&l.button===0&&(w.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(l,p){if(!this._active)return;const x=p;if(this._lastPos.equals(x)||!this._box&&x.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=x,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const S=Math.min(v.x,x.x),j=Math.max(v.x,x.x),M=Math.min(v.y,x.y),D=Math.max(v.y,x.y);w.setTransform(this._box,`translate(${S}px,${M}px)`),this._box.style.width=j-S+"px",this._box.style.height=D-M+"px"}mouseupWindow(l,p){if(!this._active||l.button!==0)return;const x=this._startPos,v=p;if(this.reset(),w.suppressClick(),x.x!==v.x||x.y!==v.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:l})),{cameraAnimation:S=>S.fitScreenCoordinates(x,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,p){return this._map.fire(new o.k(l,{originalEvent:p}))}}function Mf(k,l){if(k.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${k.length}, points ${l.length}`);const p={};for(let x=0;x<k.length;x++)p[k[x].identifier]=l[x];return p}class B0{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,p,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),x.length===this.numTouches&&(this.centroid=function(v){const S=new o.P(0,0);for(const j of v)S._add(j);return S.div(v.length)}(p),this.touches=Mf(x,p)))}touchmove(l,p,x){if(this.aborted||!this.centroid)return;const v=Mf(x,p);for(const S in this.touches){const j=v[S];(!j||j.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(l,p,x){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),x.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Em{constructor(l){this.singleTap=new B0(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,p,x){this.singleTap.touchstart(l,p,x)}touchmove(l,p,x){this.singleTap.touchmove(l,p,x)}touchend(l,p,x){const v=this.singleTap.touchend(l,p,x);if(v){const S=l.timeStamp-this.lastTime<500,j=!this.lastTap||this.lastTap.dist(v)<30;if(S&&j||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Bh{constructor(l){this._tr=new Ea(l),this._zoomIn=new Em({numTouches:1,numTaps:2}),this._zoomOut=new Em({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,p,x){this._zoomIn.touchstart(l,p,x),this._zoomOut.touchstart(l,p,x)}touchmove(l,p,x){this._zoomIn.touchmove(l,p,x),this._zoomOut.touchmove(l,p,x)}touchend(l,p,x){const v=this._zoomIn.touchend(l,p,x),S=this._zoomOut.touchend(l,p,x),j=this._tr;return v?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:j.zoom+1,around:j.unproject(v)},{originalEvent:l})}):S?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:j.zoom-1,around:j.unproject(S)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gl{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const p=this._moveFunction(...l);if(p.bearingDelta||p.pitchDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(l,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=p.length?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,p){if(!this.isEnabled())return;const x=this._lastPoint;if(!x)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const v=p.length?p[0]:p;return!this._moved&&v.dist(x)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(x,v))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&w.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const $0={0:1,2:2};class zm{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const p=w.mouseButton(l);this._eventButton=p}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!function(p,x){const v=$0[x];return p.buttons===void 0||(p.buttons&v)!==v}(l,this._eventButton)}isValidEndEvent(l){return w.mouseButton(l)===this._eventButton}}class N0{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}const Mm=k=>{k.mousedown=k.dragStart,k.mousemoveWindow=k.dragMove,k.mouseup=k.dragEnd,k.contextmenu=l=>{l.preventDefault()}},V0=({enable:k,clickTolerance:l,bearingDegreesPerPixelMoved:p=.8})=>{const x=new zm({checkCorrectEvent:v=>w.mouseButton(v)===0&&v.ctrlKey||w.mouseButton(v)===2});return new Gl({clickTolerance:l,move:(v,S)=>({bearingDelta:(S.x-v.x)*p}),moveStateManager:x,enable:k,assignEvents:Mm})},W0=({enable:k,clickTolerance:l,pitchDegreesPerPixelMoved:p=-.5})=>{const x=new zm({checkCorrectEvent:v=>w.mouseButton(v)===0&&v.ctrlKey||w.mouseButton(v)===2});return new Gl({clickTolerance:l,move:(v,S)=>({pitchDelta:(S.y-v.y)*p}),moveStateManager:x,enable:k,assignEvents:Mm})};class zu{constructor(l,p){this._clickTolerance=l.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(l){return l<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(l,p,x){return this._calculateTransform(l,p,x)}touchmove(l,p,x){if(this._active){if(!this._shouldBePrevented(x.length))return l.preventDefault(),this._calculateTransform(l,p,x);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",l)}}touchend(l,p,x){this._calculateTransform(l,p,x),this._active&&this._shouldBePrevented(x.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,p,x){x.length>0&&(this._active=!0);const v=Mf(x,p),S=new o.P(0,0),j=new o.P(0,0);let M=0;for(const V in v){const G=v[V],X=this._touches[V];X&&(S._add(G),j._add(G.sub(X)),M++,v[V]=G)}if(this._touches=v,this._shouldBePrevented(M)||!j.mag())return;const D=j.div(M);return this._sum._add(D),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(M),panDelta:D}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Im{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,p,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([p[0],p[1]]))}touchmove(l,p,x){if(!this._firstTwoTouches)return;l.preventDefault();const[v,S]=this._firstTwoTouches,j=If(x,p,v),M=If(x,p,S);if(!j||!M)return;const D=this._aroundCenter?null:j.add(M).div(2);return this._move([j,M],D,l)}touchend(l,p,x){if(!this._firstTwoTouches)return;const[v,S]=this._firstTwoTouches,j=If(x,p,v),M=If(x,p,S);j&&M||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function If(k,l,p){for(let x=0;x<k.length;x++)if(k[x].identifier===p)return l[x]}function U0(k,l){return Math.log(k/l)/Math.LN2}class q0 extends Im{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,p){const x=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(U0(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:U0(this._distance,x),pinchAround:p}}}function Q0(k,l){return 180*k.angleWith(l)/Math.PI}class H0 extends Im{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,p,x){const v=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Q0(this._vector,v),pinchAround:p}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const p=25/(Math.PI*this._minDiameter)*360,x=Q0(l,this._startVector);return Math.abs(x)<p}}function Dm(k){return Math.abs(k.y)>Math.abs(k.x)}class Df extends Im{constructor(l){super(),this._currentTouchCount=0,this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,p,x){super.touchstart(l,p,x),this._currentTouchCount=x.length}_start(l){this._lastPoints=l,Dm(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,p,x){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const v=l[0].sub(this._lastPoints[0]),S=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,S,x.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(v.y+S.y)/2*-.5}):void 0}gestureBeginsVertically(l,p,x){if(this._valid!==void 0)return this._valid;const v=l.mag()>=2,S=p.mag()>=2;if(!v&&!S)return;if(!v||!S)return this._firstMove===void 0&&(this._firstMove=x),x-this._firstMove<100&&void 0;const j=l.y>0==p.y>0;return Dm(l)&&Dm(p)&&j}}const n_={panStep:100,bearingStep:15,pitchStep:10};class Yo{constructor(l){this._tr=new Ea(l);const p=n_;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let p=0,x=0,v=0,S=0,j=0;switch(l.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:l.shiftKey?x=-1:(l.preventDefault(),S=-1);break;case 39:l.shiftKey?x=1:(l.preventDefault(),S=1);break;case 38:l.shiftKey?v=1:(l.preventDefault(),j=-1);break;case 40:l.shiftKey?v=-1:(l.preventDefault(),j=1);break;default:return}return this._rotationDisabled&&(x=0,v=0),{cameraAnimation:M=>{const D=this._tr;M.easeTo({duration:300,easeId:"keyboardHandler",easing:cl,zoom:p?Math.round(D.zoom)+p*(l.shiftKey?2:1):D.zoom,bearing:D.bearing+x*this._bearingStep,pitch:D.pitch+v*this._pitchStep,offset:[-S*this._panStep,-j*this._panStep],center:D.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function cl(k){return k*(2-k)}const G0=4.000244140625;class za{constructor(l,p){this._onTimeout=x=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(x)},this._map=l,this._tr=new Ea(l),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(l){return!!this._map.cooperativeGestures.isEnabled()&&!(l.ctrlKey||this._map.cooperativeGestures.isBypassed(l))}wheel(l){if(!this.isEnabled())return;if(this._shouldBePrevented(l))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",l);let p=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const x=b.now(),v=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,p!==0&&p%G0==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(v*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),l.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=l,this._delta-=p,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=w.mousePos(this._map.getCanvas(),l),x=this._tr;this._around=p.y>x.transform.height/2-x.transform.getHorizon()?o.N.convert(this._aroundCenter?x.center:x.unproject(p)):o.N.convert(x.center),this._aroundPoint=x.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(this._delta!==0){const D=this._type==="wheel"&&Math.abs(this._delta)>G0?this._wheelZoomRate:this._defaultZoomRate;let V=2/(1+Math.exp(-Math.abs(this._delta*D)));this._delta<0&&V!==0&&(V=1/V);const G=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):l.scale;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(G*V))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom=="number"?this._targetZoom:l.zoom,x=this._startZoom,v=this._easing;let S,j=!1;const M=b.now()-this._lastWheelEventTime;if(this._type==="wheel"&&x&&v&&M){const D=Math.min(M/200,1),V=v(D);S=o.y.number(x,p,V),D<1?this._frameId||(this._frameId=!0):j=!0}else S=p,j=!0;return this._active=!0,j&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!j,zoomDelta:S-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let p=o.b9;if(this._prevEase){const x=this._prevEase,v=(b.now()-x.start)/x.duration,S=x.easing(v+.01)-x.easing(v),j=.27/Math.sqrt(S*S+1e-4)*.01,M=Math.sqrt(.0729-j*j);p=o.b8(j,M,.25,1)}return this._prevEase={start:b.now(),duration:l,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Mu{constructor(l,p){this._clickZoom=l,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class AC{constructor(l){this._tr=new Ea(l),this.reset()}reset(){this._active=!1}dblclick(l,p){return l.preventDefault(),{cameraAnimation:x=>{x.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class EC{constructor(){this._tap=new Em({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,p,x){if(!this._swipePoint)if(this._tapTime){const v=p[0],S=l.timeStamp-this._tapTime<500,j=this._tapPoint.dist(v)<30;S&&j?x.length>0&&(this._swipePoint=v,this._swipeTouch=x[0].identifier):this.reset()}else this._tap.touchstart(l,p,x)}touchmove(l,p,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;const v=p[0],S=v.y-this._swipePoint.y;return this._swipePoint=v,l.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(l,p,x)}touchend(l,p,x){if(this._tapTime)this._swipePoint&&x.length===0&&this.reset();else{const v=this._tap.touchend(l,p,x);v&&(this._tapTime=l.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class i_{constructor(l,p,x){this._el=l,this._mousePan=p,this._touchPan=x}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class s_{constructor(l,p,x){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=p,this._mousePitch=x}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class X0{constructor(l,p,x,v){this._el=l,this._touchZoom=p,this._touchRotate=x,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class $h{constructor(l,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=l,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const l=this._map.getCanvasContainer();l.classList.add("maplibregl-cooperative-gestures"),this._container=w.create("div","maplibregl-cooperative-gesture-screen",l);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const x=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=p,this._container.appendChild(v);const S=document.createElement("div");S.className="maplibregl-mobile-message",S.textContent=x,this._container.appendChild(S),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(w.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(l){return l[this._bypassKey]}notifyGestureBlocked(l,p){this._enabled&&(this._map.fire(new o.k("cooperativegestureprevented",{gestureType:l,originalEvent:p})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Jo=k=>k.zoom||k.drag||k.pitch||k.rotate;class Ht extends o.k{}function Rm(k){return k.panDelta&&k.panDelta.mag()||k.zoomDelta||k.bearingDelta||k.pitchDelta}class K0{constructor(l,p){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,S)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const j=v.type==="renderFrame"?void 0:v,M={needsRenderFrame:!1},D={},V={},G=v.touches,X=G?this._getMapTouches(G):void 0,ne=X?w.touchPos(this._map.getCanvas(),X):w.mousePos(this._map.getCanvas(),v);for(const{handlerName:ye,handler:we,allowed:ke}of this._handlers){if(!we.isEnabled())continue;let Pe;this._blockedByActive(V,ke,ye)?we.reset():we[S||v.type]&&(Pe=we[S||v.type](v,ne,X),this.mergeHandlerResult(M,D,Pe,ye,j),Pe&&Pe.needsRenderFrame&&this._triggerRenderFrame()),(Pe||we.isActive())&&(V[ye]=we)}const ae={};for(const ye in this._previousActiveHandlers)V[ye]||(ae[ye]=j);this._previousActiveHandlers=V,(Object.keys(ae).length||Rm(M))&&(this._changes.push([M,D,ae]),this._triggerRenderFrame()),(Object.keys(V).length||Rm(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ce}=M;ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ce(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new F0(l),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const x=this._el;this._listeners=[[x,"touchstart",{passive:!0}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,S,j]of this._listeners)w.addEventListener(v,S,v===document?this.handleWindowEvent:this.handleEvent,j)}destroy(){for(const[l,p,x]of this._listeners)w.removeEventListener(l,p,l===document?this.handleWindowEvent:this.handleEvent,x)}_addDefaultHandlers(l){const p=this._map,x=p.getCanvasContainer();this._add("mapEvent",new r_(p,l));const v=p.boxZoom=new Po(p,l);this._add("boxZoom",v),l.interactive&&l.boxZoom&&v.enable();const S=p.cooperativeGestures=new $h(p,l.cooperativeGestures);this._add("cooperativeGestures",S),l.cooperativeGestures&&S.enable();const j=new Bh(p),M=new AC(p);p.doubleClickZoom=new Mu(M,j),this._add("tapZoom",j),this._add("clickZoom",M),l.interactive&&l.doubleClickZoom&&p.doubleClickZoom.enable();const D=new EC;this._add("tapDragZoom",D);const V=p.touchPitch=new Df(p);this._add("touchPitch",V),l.interactive&&l.touchPitch&&p.touchPitch.enable(l.touchPitch);const G=V0(l),X=W0(l);p.dragRotate=new s_(l,G,X),this._add("mouseRotate",G,["mousePitch"]),this._add("mousePitch",X,["mouseRotate"]),l.interactive&&l.dragRotate&&p.dragRotate.enable();const ne=(({enable:Pe,clickTolerance:fe})=>{const De=new zm({checkCorrectEvent:Ve=>w.mouseButton(Ve)===0&&!Ve.ctrlKey});return new Gl({clickTolerance:fe,move:(Ve,Ye)=>({around:Ye,panDelta:Ye.sub(Ve)}),activateOnStart:!0,moveStateManager:De,enable:Pe,assignEvents:Mm})})(l),ae=new zu(l,p);p.dragPan=new i_(x,ne,ae),this._add("mousePan",ne),this._add("touchPan",ae,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&p.dragPan.enable(l.dragPan);const ce=new H0,ye=new q0;p.touchZoomRotate=new X0(x,ye,ce,D),this._add("touchRotate",ce,["touchPan","touchZoom"]),this._add("touchZoom",ye,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&p.touchZoomRotate.enable(l.touchZoomRotate);const we=p.scrollZoom=new za(p,()=>this._triggerRenderFrame());this._add("scrollZoom",we,["mousePan"]),l.interactive&&l.scrollZoom&&p.scrollZoom.enable(l.scrollZoom);const ke=p.keyboard=new Yo(p);this._add("keyboard",ke),l.interactive&&l.keyboard&&p.keyboard.enable(),this._add("blockableMapEvent",new pi(p))}_add(l,p,x){this._handlers.push({handlerName:l,handler:p,allowed:x}),this._handlersById[l]=p}stop(l){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Jo(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,p,x){for(const v in l)if(v!==x&&(!p||p.indexOf(v)<0))return!0;return!1}_getMapTouches(l){const p=[];for(const x of l)this._el.contains(x.target)&&p.push(x);return p}mergeHandlerResult(l,p,x,v,S){if(!x)return;o.e(l,x);const j={handlerName:v,originalEvent:x.originalEvent||S};x.zoomDelta!==void 0&&(p.zoom=j),x.panDelta!==void 0&&(p.drag=j),x.pitchDelta!==void 0&&(p.pitch=j),x.bearingDelta!==void 0&&(p.rotate=j)}_applyChanges(){const l={},p={},x={};for(const[v,S,j]of this._changes)v.panDelta&&(l.panDelta=(l.panDelta||new o.P(0,0))._add(v.panDelta)),v.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(l.around=v.around),v.pinchAround!==void 0&&(l.pinchAround=v.pinchAround),v.noInertia&&(l.noInertia=v.noInertia),o.e(p,S),o.e(x,j);this._updateMapTransform(l,p,x),this._changes=[]}_updateMapTransform(l,p,x){const v=this._map,S=v._getTransformForUpdate(),j=v.terrain;if(!(Rm(l)||j&&this._terrainMovement))return this._fireEvents(p,x,!0);let{panDelta:M,zoomDelta:D,bearingDelta:V,pitchDelta:G,around:X,pinchAround:ne}=l;ne!==void 0&&(X=ne),v._stop(!0),X=X||v.transform.centerPoint;const ae=S.pointLocation(M?X.sub(M):X);V&&(S.bearing+=V),G&&(S.pitch+=G),D&&(S.zoom+=D),j?this._terrainMovement||!p.drag&&!p.zoom?p.drag&&this._terrainMovement?S.center=S.pointLocation(S.centerPoint.sub(M)):S.setLocationAtPoint(ae,X):(this._terrainMovement=!0,this._map._elevationFreeze=!0,S.setLocationAtPoint(ae,X)):S.setLocationAtPoint(ae,X),v._applyUpdatedTransform(S),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(p,x,!0)}_fireEvents(l,p,x){const v=Jo(this._eventsInProgress),S=Jo(l),j={};for(const X in l){const{originalEvent:ne}=l[X];this._eventsInProgress[X]||(j[`${X}start`]=ne),this._eventsInProgress[X]=l[X]}!v&&S&&this._fireEvent("movestart",S.originalEvent);for(const X in j)this._fireEvent(X,j[X]);S&&this._fireEvent("move",S.originalEvent);for(const X in l){const{originalEvent:ne}=l[X];this._fireEvent(X,ne)}const M={};let D;for(const X in this._eventsInProgress){const{handlerName:ne,originalEvent:ae}=this._eventsInProgress[X];this._handlersById[ne].isActive()||(delete this._eventsInProgress[X],D=p[ne]||ae,M[`${X}end`]=D)}for(const X in M)this._fireEvent(X,M[X]);const V=Jo(this._eventsInProgress),G=(v||S)&&!V;if(G&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const X=this._map._getTransformForUpdate();X.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(X)}if(x&&G){this._updatingCamera=!0;const X=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ne=ae=>ae!==0&&-this._bearingSnap<ae&&ae<this._bearingSnap;!X||!X.essential&&b.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:D})),ne(this._map.getBearing())&&this._map.resetNorth()):(ne(X.bearing||this._map.getBearing())&&(X.bearing=0),X.freezeElevation=!0,this._map.easeTo(X,{originalEvent:D})),this._updatingCamera=!1}}_fireEvent(l,p){this._map.fire(new o.k(l,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{delete this._frameId,this.handleEvent(new Ht("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class o_ extends o.E{constructor(l,p){super(),this._renderFrameCallback=()=>{const x=Math.min((b.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(x)),x<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=p.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new o.N(this.transform.center.lng,this.transform.center.lat)}setCenter(l,p){return this.jumpTo({center:l},p)}panBy(l,p,x){return l=o.P.convert(l).mult(-1),this.panTo(this.transform.center,o.e({offset:l},p),x)}panTo(l,p,x){return this.easeTo(o.e({center:l},p),x)}getZoom(){return this.transform.zoom}setZoom(l,p){return this.jumpTo({zoom:l},p),this}zoomTo(l,p,x){return this.easeTo(o.e({zoom:l},p),x)}zoomIn(l,p){return this.zoomTo(this.getZoom()+1,l,p),this}zoomOut(l,p){return this.zoomTo(this.getZoom()-1,l,p),this}getBearing(){return this.transform.bearing}setBearing(l,p){return this.jumpTo({bearing:l},p),this}getPadding(){return this.transform.padding}setPadding(l,p){return this.jumpTo({padding:l},p),this}rotateTo(l,p,x){return this.easeTo(o.e({bearing:l},p),x)}resetNorth(l,p){return this.rotateTo(0,o.e({duration:1e3},l),p),this}resetNorthPitch(l,p){return this.easeTo(o.e({bearing:0,pitch:0,duration:1e3},l),p),this}snapToNorth(l,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,p):this}getPitch(){return this.transform.pitch}setPitch(l,p){return this.jumpTo({pitch:l},p),this}cameraForBounds(l,p){l=Te.convert(l).adjustAntiMeridian();const x=p&&p.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),x,p)}_cameraForBoxAndBearing(l,p,x,v){const S={top:0,bottom:0,right:0,left:0};if(typeof(v=o.e({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const zt=v.padding;v.padding={top:zt,bottom:zt,right:zt,left:zt}}v.padding=o.e(S,v.padding);const j=this.transform,M=j.padding,D=new Te(l,p),V=j.project(D.getNorthWest()),G=j.project(D.getNorthEast()),X=j.project(D.getSouthEast()),ne=j.project(D.getSouthWest()),ae=o.ba(-x),ce=V.rotate(ae),ye=G.rotate(ae),we=X.rotate(ae),ke=ne.rotate(ae),Pe=new o.P(Math.max(ce.x,ye.x,ke.x,we.x),Math.max(ce.y,ye.y,ke.y,we.y)),fe=new o.P(Math.min(ce.x,ye.x,ke.x,we.x),Math.min(ce.y,ye.y,ke.y,we.y)),De=Pe.sub(fe),Ve=(j.width-(M.left+M.right+v.padding.left+v.padding.right))/De.x,Ye=(j.height-(M.top+M.bottom+v.padding.top+v.padding.bottom))/De.y;if(Ye<0||Ve<0)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const dt=Math.min(j.scaleZoom(j.scale*Math.min(Ve,Ye)),v.maxZoom),wt=o.P.convert(v.offset),Lt=new o.P((v.padding.left-v.padding.right)/2,(v.padding.top-v.padding.bottom)/2).rotate(o.ba(x)),Ut=wt.add(Lt).mult(j.scale/j.zoomScale(dt));return{center:j.unproject(V.add(X).div(2).sub(Ut)),zoom:dt,bearing:x}}fitBounds(l,p,x){return this._fitInternal(this.cameraForBounds(l,p),p,x)}fitScreenCoordinates(l,p,x,v,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.P.convert(l)),this.transform.pointLocation(o.P.convert(p)),x,v),v,S)}_fitInternal(l,p,x){return l?(delete(p=o.e(l,p)).padding,p.linear?this.easeTo(p,x):this.flyTo(p,x)):this}jumpTo(l,p){this.stop();const x=this._getTransformForUpdate();let v=!1,S=!1,j=!1;return"zoom"in l&&x.zoom!==+l.zoom&&(v=!0,x.zoom=+l.zoom),l.center!==void 0&&(x.center=o.N.convert(l.center)),"bearing"in l&&x.bearing!==+l.bearing&&(S=!0,x.bearing=+l.bearing),"pitch"in l&&x.pitch!==+l.pitch&&(j=!0,x.pitch=+l.pitch),l.padding==null||x.isPaddingEqual(l.padding)||(x.padding=l.padding),this._applyUpdatedTransform(x),this.fire(new o.k("movestart",p)).fire(new o.k("move",p)),v&&this.fire(new o.k("zoomstart",p)).fire(new o.k("zoom",p)).fire(new o.k("zoomend",p)),S&&this.fire(new o.k("rotatestart",p)).fire(new o.k("rotate",p)).fire(new o.k("rotateend",p)),j&&this.fire(new o.k("pitchstart",p)).fire(new o.k("pitch",p)).fire(new o.k("pitchend",p)),this.fire(new o.k("moveend",p))}calculateCameraOptionsFromTo(l,p,x,v=0){const S=o.Z.fromLngLat(l,p),j=o.Z.fromLngLat(x,v),M=j.x-S.x,D=j.y-S.y,V=j.z-S.z,G=Math.hypot(M,D,V);if(G===0)throw new Error("Can't calculate camera options with same From and To");const X=Math.hypot(M,D),ne=this.transform.scaleZoom(this.transform.cameraToCenterDistance/G/this.transform.tileSize),ae=180*Math.atan2(M,-D)/Math.PI;let ce=180*Math.acos(X/G)/Math.PI;return ce=V<0?90-ce:90+ce,{center:j.toLngLat(),zoom:ne,pitch:ce,bearing:ae}}easeTo(l,p){var x;this._stop(!1,l.easeId),((l=o.e({offset:[0,0],duration:500,easing:o.b9},l)).animate===!1||!l.essential&&b.prefersReducedMotion)&&(l.duration=0);const v=this._getTransformForUpdate(),S=v.zoom,j=v.bearing,M=v.pitch,D=v.padding,V="bearing"in l?this._normalizeBearing(l.bearing,j):j,G="pitch"in l?+l.pitch:M,X="padding"in l?l.padding:v.padding,ne=o.P.convert(l.offset);let ae=v.centerPoint.add(ne);const ce=v.pointLocation(ae),{center:ye,zoom:we}=v.getConstrained(o.N.convert(l.center||ce),(x=l.zoom)!==null&&x!==void 0?x:S);this._normalizeCenter(ye,v);const ke=v.project(ce),Pe=v.project(ye).sub(ke),fe=v.zoomScale(we-S);let De,Ve;l.around&&(De=o.N.convert(l.around),Ve=v.locationPoint(De));const Ye={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||we!==S,this._rotating=this._rotating||j!==V,this._pitching=this._pitching||G!==M,this._padding=!v.isPaddingEqual(X),this._easeId=l.easeId,this._prepareEase(p,l.noMoveStart,Ye),this.terrain&&this._prepareElevation(ye),this._ease(dt=>{if(this._zooming&&(v.zoom=o.y.number(S,we,dt)),this._rotating&&(v.bearing=o.y.number(j,V,dt)),this._pitching&&(v.pitch=o.y.number(M,G,dt)),this._padding&&(v.interpolatePadding(D,X,dt),ae=v.centerPoint.add(ne)),this.terrain&&!l.freezeElevation&&this._updateElevation(dt),De)v.setLocationAtPoint(De,Ve);else{const wt=v.zoomScale(v.zoom-S),Lt=we>S?Math.min(2,fe):Math.max(.5,fe),Ut=Math.pow(Lt,1-dt),zt=v.unproject(ke.add(Pe.mult(dt*Ut)).mult(wt));v.setLocationAtPoint(v.renderWorldCopies?zt.wrap():zt,ae)}this._applyUpdatedTransform(v),this._fireMoveEvents(p)},dt=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(p,dt)},l),this}_prepareEase(l,p,x={}){this._moving=!0,p||x.moving||this.fire(new o.k("movestart",l)),this._zooming&&!x.zooming&&this.fire(new o.k("zoomstart",l)),this._rotating&&!x.rotating&&this.fire(new o.k("rotatestart",l)),this._pitching&&!x.pitching&&this.fire(new o.k("pitchstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&p!==this._elevationTarget){const x=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(x-(p-(x*l+this._elevationStart))/(1-l)),this._elevationTarget=p}this.transform.elevation=o.y.number(this._elevationStart,this._elevationTarget,l)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(l){const p=l.getCameraPosition(),x=this.terrain.getElevationForLngLatZoom(p.lngLat,l.zoom);if(p.altitude<x){const v=this.calculateCameraOptionsFromTo(p.lngLat,x,l.center,l.elevation);return{pitch:v.pitch,zoom:v.zoom}}return{}}_applyUpdatedTransform(l){const p=[];if(this.terrain&&p.push(v=>this._elevateCameraIfInsideTerrain(v)),this.transformCameraUpdate&&p.push(v=>this.transformCameraUpdate(v)),!p.length)return;const x=l.clone();for(const v of p){const S=x.clone(),{center:j,zoom:M,pitch:D,bearing:V,elevation:G}=v(S);j&&(S.center=j),M!==void 0&&(S.zoom=M),D!==void 0&&(S.pitch=D),V!==void 0&&(S.bearing=V),G!==void 0&&(S.elevation=G),x.apply(S)}this.transform.apply(x)}_fireMoveEvents(l){this.fire(new o.k("move",l)),this._zooming&&this.fire(new o.k("zoom",l)),this._rotating&&this.fire(new o.k("rotate",l)),this._pitching&&this.fire(new o.k("pitch",l))}_afterEase(l,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const x=this._zooming,v=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,x&&this.fire(new o.k("zoomend",l)),v&&this.fire(new o.k("rotateend",l)),S&&this.fire(new o.k("pitchend",l)),this.fire(new o.k("moveend",l))}flyTo(l,p){var x;if(!l.essential&&b.prefersReducedMotion){const Bt=o.M(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Bt,p)}this.stop(),l=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.b9},l);const v=this._getTransformForUpdate(),S=v.zoom,j=v.bearing,M=v.pitch,D=v.padding,V="bearing"in l?this._normalizeBearing(l.bearing,j):j,G="pitch"in l?+l.pitch:M,X="padding"in l?l.padding:v.padding,ne=o.P.convert(l.offset);let ae=v.centerPoint.add(ne);const ce=v.pointLocation(ae),{center:ye,zoom:we}=v.getConstrained(o.N.convert(l.center||ce),(x=l.zoom)!==null&&x!==void 0?x:S);this._normalizeCenter(ye,v);const ke=v.zoomScale(we-S),Pe=v.project(ce),fe=v.project(ye).sub(Pe);let De=l.curve;const Ve=Math.max(v.width,v.height),Ye=Ve/ke,dt=fe.mag();if("minZoom"in l){const Bt=o.ac(Math.min(l.minZoom,S,we),v.minZoom,v.maxZoom),Cr=Ve/v.zoomScale(Bt-S);De=Math.sqrt(Cr/dt*2)}const wt=De*De;function Lt(Bt){const Cr=(Ye*Ye-Ve*Ve+(Bt?-1:1)*wt*wt*dt*dt)/(2*(Bt?Ye:Ve)*wt*dt);return Math.log(Math.sqrt(Cr*Cr+1)-Cr)}function Ut(Bt){return(Math.exp(Bt)-Math.exp(-Bt))/2}function zt(Bt){return(Math.exp(Bt)+Math.exp(-Bt))/2}const At=Lt(!1);let ir=function(Bt){return zt(At)/zt(At+De*Bt)},Pr=function(Bt){return Ve*((zt(At)*(Ut(Cr=At+De*Bt)/zt(Cr))-Ut(At))/wt)/dt;var Cr},It=(Lt(!0)-At)/De;if(Math.abs(dt)<1e-6||!isFinite(It)){if(Math.abs(Ve-Ye)<1e-6)return this.easeTo(l,p);const Bt=Ye<Ve?-1:1;It=Math.abs(Math.log(Ye/Ve))/De,Pr=()=>0,ir=Cr=>Math.exp(Bt*De*Cr)}return l.duration="duration"in l?+l.duration:1e3*It/("screenSpeed"in l?+l.screenSpeed/De:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=j!==V,this._pitching=G!==M,this._padding=!v.isPaddingEqual(X),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(ye),this._ease(Bt=>{const Cr=Bt*It,qn=1/ir(Cr);v.zoom=Bt===1?we:S+v.scaleZoom(qn),this._rotating&&(v.bearing=o.y.number(j,V,Bt)),this._pitching&&(v.pitch=o.y.number(M,G,Bt)),this._padding&&(v.interpolatePadding(D,X,Bt),ae=v.centerPoint.add(ne)),this.terrain&&!l.freezeElevation&&this._updateElevation(Bt);const Lr=Bt===1?ye:v.unproject(Pe.add(fe.mult(Pr(Cr))).mult(qn));v.setLocationAtPoint(v.renderWorldCopies?Lr.wrap():Lr,ae),this._applyUpdatedTransform(v),this._fireMoveEvents(p)},()=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(p)},l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,p){var x;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,p)}return l||(x=this.handlers)===null||x===void 0||x.stop(!1),this}_ease(l,p,x){x.animate===!1||x.duration===0?(l(1),p()):(this._easeStart=b.now(),this._easeOptions=x,this._onEaseFrame=l,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,p){l=o.b3(l,-180,180);const x=Math.abs(l-p);return Math.abs(l-360-p)<x&&(l-=360),Math.abs(l+360-p)<x&&(l+=360),l}_normalizeCenter(l,p){if(!p.renderWorldCopies||p.lngRange)return;const x=l.lng-p.center.lng;l.lng+=x>180?-360:x<-180?360:0}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(o.N.convert(l),this.transform.tileZoom)-this.transform.elevation:null}}const Nh={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Vh{constructor(l=Nh){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,p){const x=this._map._getUIString(`AttributionControl.${p}`);l.title=x,l.setAttribute("aria-label",x)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(v=>typeof v!="string"?"":v)):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const p=this._map.style.sourceCaches;for(const v in p){const S=p[v];if(S.used||S.usedForTerrain){const j=S.getSource();j.attribution&&l.indexOf(j.attribution)<0&&l.push(j.attribution)}}l=l.filter(v=>String(v).trim()),l.sort((v,S)=>v.length-S.length),l=l.filter((v,S)=>{for(let j=S+1;j<l.length;j++)if(l[j].indexOf(v)>=0)return!1;return!0});const x=l.join(" | ");x!==this._attribHTML&&(this._attribHTML=x,l.length?(this._innerContainer.innerHTML=x,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Z0{constructor(l={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const x=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&x.classList.add("maplibregl-compact"):x.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const p=w.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Hr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const p=++this._id;return this._queue.push({callback:l,id:p,cancelled:!1}),p}remove(l){const p=this._currentlyRunning,x=p?this._queue.concat(p):this._queue;for(const v of x)if(v.id===l)return void(v.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const x of p)if(!x.cancelled&&(x.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Y0=o.Y([{name:"a_pos3d",type:"Int16",components:3}]);class zC extends o.E{constructor(l){super(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,l.usedForTerrain=!0,l.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(l,p){this.sourceCache.update(l,p),this._renderableTilesKeys=[];const x={};for(const v of l.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p}))x[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.posMatrix=new Float64Array(16),o.aP(v.posMatrix,0,o.X,0,o.X,0,1),this._tiles[v.key]=new wn(v,this.tileSize));for(const v in this._tiles)x[v]||delete this._tiles[v]}freeRtt(l){for(const p in this._tiles){const x=this._tiles[p];(!l||x.tileID.equals(l)||x.tileID.isChildOf(l)||l.isChildOf(x.tileID))&&(x.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(l=>this.getTileByID(l))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l){const p={};for(const x of this._renderableTilesKeys){const v=this._tiles[x].tileID;if(v.canonical.equals(l.canonical)){const S=l.clone();S.posMatrix=new Float64Array(16),o.aP(S.posMatrix,0,o.X,0,o.X,0,1),p[x]=S}else if(v.canonical.isChildOf(l.canonical)){const S=l.clone();S.posMatrix=new Float64Array(16);const j=v.canonical.z-l.canonical.z,M=v.canonical.x-(v.canonical.x>>j<<j),D=v.canonical.y-(v.canonical.y>>j<<j),V=o.X>>j;o.aP(S.posMatrix,0,V,0,V,0,1),o.J(S.posMatrix,S.posMatrix,[-M*V,-D*V,0]),p[x]=S}else if(l.canonical.isChildOf(v.canonical)){const S=l.clone();S.posMatrix=new Float64Array(16);const j=l.canonical.z-v.canonical.z,M=l.canonical.x-(l.canonical.x>>j<<j),D=l.canonical.y-(l.canonical.y>>j<<j),V=o.X>>j;o.aP(S.posMatrix,0,o.X,0,o.X,0,1),o.J(S.posMatrix,S.posMatrix,[M*V,D*V,0]),o.K(S.posMatrix,S.posMatrix,[1/2**j,1/2**j,0]),p[x]=S}}return p}getSourceTile(l,p){const x=this.sourceCache._source;let v=l.overscaledZ-this.deltaZoom;if(v>x.maxzoom&&(v=x.maxzoom),v<x.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(v).key);let S=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!S||!S.dem)&&p)for(;v>=x.minzoom&&(!S||!S.dem);)S=this.sourceCache.getTileByID(l.scaledTo(v--).key);return S}tilesAfterTime(l=Date.now()){return Object.values(this._tiles).filter(p=>p.timeAdded>=l)}}class J0{constructor(l,p,x){this.painter=l,this.sourceCache=new zC(p),this.options=x,this.exaggeration=typeof x.exaggeration=="number"?x.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,p,x,v=o.X){var S;if(!(p>=0&&p<v&&x>=0&&x<v))return 0;const j=this.getTerrainData(l),M=(S=j.tile)===null||S===void 0?void 0:S.dem;if(!M)return 0;const D=function(ce,ye,we){var ke=ye[0],Pe=ye[1];return ce[0]=we[0]*ke+we[4]*Pe+we[12],ce[1]=we[1]*ke+we[5]*Pe+we[13],ce}([],[p/v*o.X,x/v*o.X],j.u_terrain_matrix),V=[D[0]*M.dim,D[1]*M.dim],G=Math.floor(V[0]),X=Math.floor(V[1]),ne=V[0]-G,ae=V[1]-X;return M.get(G,X)*(1-ne)*(1-ae)+M.get(G+1,X)*ne*(1-ae)+M.get(G,X+1)*(1-ne)*ae+M.get(G+1,X+1)*ne*ae}getElevationForLngLatZoom(l,p){if(!o.bb(p,l.wrap()))return 0;const{tileID:x,mercatorX:v,mercatorY:S}=this._getOverscaledTileIDFromLngLatZoom(l,p);return this.getElevation(x,v%o.X,S%o.X,o.X)}getElevation(l,p,x,v=o.X){return this.getDEMElevation(l,p,x,v)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const v=this.painter.context,S=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new le(v,S,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new le(v,new o.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.an([])}const p=this.sourceCache.getSourceTile(l,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const v=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new le(v,p.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),p.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const x=p&&p+p.tileID.key+l.key;if(x&&!this._demMatrixCache[x]){const v=this.sourceCache.sourceCache._source.maxzoom;let S=l.canonical.z-p.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=v?S=l.canonical.z-v:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const j=l.canonical.x-(l.canonical.x>>S<<S),M=l.canonical.y-(l.canonical.y>>S<<S),D=o.bc(new Float64Array(16),[1/(o.X<<S),1/(o.X<<S),0]);o.J(D,D,[j*o.X,M*o.X,0]),this._demMatrixCache[l.key]={matrix:D,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:x?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(l){const p=this.painter,x=p.width/devicePixelRatio,v=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===x&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new le(p.context,{width:x,height:v,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new le(p.context,{width:x,height:v,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(x,v,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,x,v))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let S=0,j=0;S<this._coordsTextureSize;S++)for(let M=0;M<this._coordsTextureSize;M++,j+=4)p[j+0]=255&M,p[j+1]=255&S,p[j+2]=M>>8<<4|S>>8,p[j+3]=0;const x=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),v=new le(l,x,l.gl.RGBA,{premultiply:!1});return v.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(l){this.painter.maybeDrawDepthAndCoords(!0);const p=new Uint8Array(4),x=this.painter.context,v=x.gl,S=Math.round(l.x*this.painter.pixelRatio/devicePixelRatio),j=Math.round(l.y*this.painter.pixelRatio/devicePixelRatio),M=Math.round(this.painter.height/devicePixelRatio);x.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(S,M-j-1,1,1,v.RGBA,v.UNSIGNED_BYTE,p),x.bindFramebuffer.set(null);const D=p[0]+(p[2]>>4<<8),V=p[1]+((15&p[2])<<8),G=this.coordsIndex[255-p[3]],X=G&&this.sourceCache.getTileByID(G);if(!X)return null;const ne=this._coordsTextureSize,ae=(1<<X.tileID.canonical.z)*ne;return new o.Z((X.tileID.canonical.x*ne+D)/ae+X.tileID.wrap,(X.tileID.canonical.y*ne+V)/ae,this.getElevation(X.tileID,D,V,ne))}depthAtPoint(l){const p=new Uint8Array(4),x=this.painter.context,v=x.gl;return x.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,p),x.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const l=this.painter.context,p=new o.bd,x=new o.aY,v=this.meshSize,S=o.X/v,j=v*v;for(let X=0;X<=v;X++)for(let ne=0;ne<=v;ne++)p.emplaceBack(ne*S,X*S,0);for(let X=0;X<j;X+=v+1)for(let ne=0;ne<v;ne++)x.emplaceBack(ne+X,v+ne+X+1,v+ne+X+2),x.emplaceBack(ne+X,v+ne+X+2,ne+X+1);const M=p.length,D=M+2*(v+1);for(const X of[0,1])for(let ne=0;ne<=v;ne++)for(const ae of[0,1])p.emplaceBack(ne*S,X*o.X,ae);for(let X=0;X<2*v;X+=2)x.emplaceBack(D+X,D+X+1,D+X+3),x.emplaceBack(D+X,D+X+3,D+X+2),x.emplaceBack(M+X,M+X+3,M+X+1),x.emplaceBack(M+X,M+X+2,M+X+3);const V=p.length,G=V+2*(v+1);for(const X of[0,1])for(let ne=0;ne<=v;ne++)for(const ae of[0,1])p.emplaceBack(X*o.X,ne*S,ae);for(let X=0;X<2*v;X+=2)x.emplaceBack(V+X,V+X+1,V+X+3),x.emplaceBack(V+X,V+X+3,V+X+2),x.emplaceBack(G+X,G+X+3,G+X+1),x.emplaceBack(G+X,G+X+2,G+X+3);return this._mesh=new Tm(l.createVertexBuffer(p,Y0.members),l.createIndexBuffer(x),o.a0.simpleSegment(0,0,p.length,x.length)),this._mesh}getMeshFrameDelta(l){return 2*Math.PI*o.be/Math.pow(2,l)/5}getMinTileElevationForLngLatZoom(l,p){var x;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(l,p);return(x=this.getMinMaxElevation(v).minElevation)!==null&&x!==void 0?x:0}getMinMaxElevation(l){const p=this.getTerrainData(l).tile,x={minElevation:null,maxElevation:null};return p&&p.dem&&(x.minElevation=p.dem.min*this.exaggeration,x.maxElevation=p.dem.max*this.exaggeration),x}_getOverscaledTileIDFromLngLatZoom(l,p){const x=o.Z.fromLngLat(l.wrap()),v=(1<<p)*o.X,S=x.x*v,j=x.y*v,M=Math.floor(S/o.X),D=Math.floor(j/o.X);return{tileID:new o.S(p,0,p,M,D),mercatorX:S,mercatorY:j}}}class MC{constructor(l,p,x){this._context=l,this._size=p,this._tileSize=x,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),x=new le(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return x.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(x.texture),{id:l,fbo:p,texture:x,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(p=>l.id!==p),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(l=>!l.inUse)===!1}}const Wh={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class a_{constructor(l,p){this.painter=l,this.terrain=p,this.pool=new MC(l.context,30,p.sourceCache.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=l._order.filter(x=>!l._layers[x].isHidden(p)),this._coordsDescendingInv={};for(const x in l.sourceCaches){this._coordsDescendingInv[x]={};const v=l.sourceCaches[x].getVisibleCoordinates();for(const S of v){const j=this.terrain.sourceCache.getTerrainCoords(S);for(const M in j)this._coordsDescendingInv[x][M]||(this._coordsDescendingInv[x][M]=[]),this._coordsDescendingInv[x][M].push(j[M])}}this._coordsDescendingInvStr={};for(const x of l._order){const v=l._layers[x],S=v.source;if(Wh[v.type]&&!this._coordsDescendingInvStr[S]){this._coordsDescendingInvStr[S]={};for(const j in this._coordsDescendingInv[S])this._coordsDescendingInvStr[S][j]=this._coordsDescendingInv[S][j].map(M=>M.key).sort().join()}}for(const x of this._renderableTiles)for(const v in this._coordsDescendingInvStr){const S=this._coordsDescendingInvStr[v][x.tileID.key];S&&S!==x.rttCoords[v]&&(x.rtt=[])}}renderLayer(l){if(l.isHidden(this.painter.transform.zoom))return!1;const p=l.type,x=this.painter,v=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(Wh[p]&&(this._prevType&&Wh[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(l.id),!v))return!0;if(Wh[this._prevType]||Wh[p]&&v){this._prevType=p;const S=this._stacks.length-1,j=this._stacks[S]||[];for(const M of this._renderableTiles){if(this.pool.isFull()&&(J1(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(M),M.rtt[S]){const V=this.pool.getObjectForId(M.rtt[S].id);if(V.stamp===M.rtt[S].stamp){this.pool.useObject(V);continue}}const D=this.pool.getOrCreateFreeObject();this.pool.useObject(D),this.pool.stampObject(D),M.rtt[S]={id:D.id,stamp:D.stamp},x.context.bindFramebuffer.set(D.fbo.framebuffer),x.context.clear({color:o.aM.transparent,stencil:0}),x.currentStencilSource=void 0;for(let V=0;V<j.length;V++){const G=x.style._layers[j[V]],X=G.source?this._coordsDescendingInv[G.source][M.tileID.key]:[M.tileID];x.context.viewport.set([0,0,D.fbo.width,D.fbo.height]),x._renderTileClippingMasks(G,X),x.renderLayer(x,x.style.sourceCaches[G.source],G,X),G.source&&(M.rttCoords[G.source]=this._coordsDescendingInvStr[G.source][M.tileID.key])}}return J1(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Wh[p]}return!1}}const ex={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},l_=d,IC={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Nh,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},tx=k=>{k.touchstart=k.dragStart,k.touchmoveWindow=k.dragMove,k.touchend=k.dragEnd},DC={showCompass:!0,showZoom:!0,visualizePitch:!1};class RC{constructor(l,p,x=!1){this.mousedown=j=>{this.startMouse(o.e({},j,{ctrlKey:!0,preventDefault:()=>j.preventDefault()}),w.mousePos(this.element,j)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=j=>{this.moveMouse(j,w.mousePos(this.element,j))},this.mouseup=j=>{this.mouseRotate.dragEnd(j),this.mousePitch&&this.mousePitch.dragEnd(j),this.offTemp()},this.touchstart=j=>{j.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,j.targetTouches)[0],this.startTouch(j,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=j=>{j.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,j.targetTouches)[0],this.moveTouch(j,this._lastPos))},this.touchend=j=>{j.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const v=l.dragRotate._mouseRotate.getClickTolerance(),S=l.dragRotate._mousePitch.getClickTolerance();this.element=p,this.mouseRotate=V0({clickTolerance:v,enable:!0}),this.touchRotate=(({enable:j,clickTolerance:M,bearingDegreesPerPixelMoved:D=.8})=>{const V=new N0;return new Gl({clickTolerance:M,move:(G,X)=>({bearingDelta:(X.x-G.x)*D}),moveStateManager:V,enable:j,assignEvents:tx})})({clickTolerance:v,enable:!0}),this.map=l,x&&(this.mousePitch=W0({clickTolerance:S,enable:!0}),this.touchPitch=(({enable:j,clickTolerance:M,pitchDegreesPerPixelMoved:D=-.5})=>{const V=new N0;return new Gl({clickTolerance:M,move:(G,X)=>({pitchDelta:(X.y-G.y)*D}),moveStateManager:V,enable:j,assignEvents:tx})})({clickTolerance:S,enable:!0})),w.addEventListener(p,"mousedown",this.mousedown),w.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(p,"touchcancel",this.reset)}startMouse(l,p){this.mouseRotate.dragStart(l,p),this.mousePitch&&this.mousePitch.dragStart(l,p),w.disableDrag()}startTouch(l,p){this.touchRotate.dragStart(l,p),this.touchPitch&&this.touchPitch.dragStart(l,p),w.disableDrag()}moveMouse(l,p){const x=this.map,{bearingDelta:v}=this.mouseRotate.dragMove(l,p)||{};if(v&&x.setBearing(x.getBearing()+v),this.mousePitch){const{pitchDelta:S}=this.mousePitch.dragMove(l,p)||{};S&&x.setPitch(x.getPitch()+S)}}moveTouch(l,p){const x=this.map,{bearingDelta:v}=this.touchRotate.dragMove(l,p)||{};if(v&&x.setBearing(x.getBearing()+v),this.touchPitch){const{pitchDelta:S}=this.touchPitch.dragMove(l,p)||{};S&&x.setPitch(x.getPitch()+S)}}off(){const l=this.element;w.removeEventListener(l,"mousedown",this.mousedown),w.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let jo;function Un(k,l,p){const x=new o.N(k.lng,k.lat);if(k=new o.N(k.lng,k.lat),l){const v=new o.N(k.lng-360,k.lat),S=new o.N(k.lng+360,k.lat),j=p.locationPoint(k).distSqr(l);p.locationPoint(v).distSqr(l)<j?k=v:p.locationPoint(S).distSqr(l)<j&&(k=S)}for(;Math.abs(k.lng-p.center.lng)>180;){const v=p.locationPoint(k);if(v.x>=0&&v.y>=0&&v.x<=p.width&&v.y<=p.height)break;k.lng>p.center.lng?k.lng-=360:k.lng+=360}return k.lng!==x.lng&&p.locationPoint(k).y>p.height/2-p.getHorizon()?k:x}const Uh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Lm(k,l,p){const x=k.classList;for(const v in Uh)x.remove(`maplibregl-${p}-anchor-${v}`);x.add(`maplibregl-${p}-anchor-${l}`)}class Fm extends o.E{constructor(l){if(super(),this._onKeyPress=p=>{const x=p.code,v=p.charCode||p.keyCode;x!=="Space"&&x!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=p=>{const x=p.originalEvent.target,v=this._element;this._popup&&(x===v||v.contains(x))&&this.togglePopup()},this._update=p=>{var x;if(!this._map)return;const v=this._map.loaded()&&!this._map.isMoving();((p==null?void 0:p.type)==="terrain"||(p==null?void 0:p.type)==="render"&&!v)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Un(this._lngLat,this._flatPos,this._map.transform):(x=this._lngLat)===null||x===void 0?void 0:x.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let S="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?S=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(S=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let j="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?j="rotateX(0deg)":this._pitchAlignment==="map"&&(j=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||p&&p.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${Uh[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${j} ${S}`),b.frameAsync(new AbortController).then(()=>{this._updateOpacity(p&&p.type==="moveend")}).catch(()=>{})},this._onMove=p=>{if(!this._isDragging){const x=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=x}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._subpixelPositioning=l&&l.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(l==null?void 0:l.opacity,l==null?void 0:l.opacityWhenCovered),l&&l.element)this._element=l.element,this._offset=o.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div");const p=w.createNS("http://www.w3.org/2000/svg","svg"),x=41,v=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${x}px`),p.setAttributeNS(null,"width",`${v}px`),p.setAttributeNS(null,"viewBox",`0 0 ${v} ${x}`);const S=w.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"stroke","none"),S.setAttributeNS(null,"stroke-width","1"),S.setAttributeNS(null,"fill","none"),S.setAttributeNS(null,"fill-rule","evenodd");const j=w.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill-rule","nonzero");const M=w.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(3.0, 29.0)"),M.setAttributeNS(null,"fill","#000000");const D=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ke of D){const Pe=w.createNS("http://www.w3.org/2000/svg","ellipse");Pe.setAttributeNS(null,"opacity","0.04"),Pe.setAttributeNS(null,"cx","10.5"),Pe.setAttributeNS(null,"cy","5.80029008"),Pe.setAttributeNS(null,"rx",ke.rx),Pe.setAttributeNS(null,"ry",ke.ry),M.appendChild(Pe)}const V=w.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"fill",this._color);const G=w.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),V.appendChild(G);const X=w.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"opacity","0.25"),X.setAttributeNS(null,"fill","#000000");const ne=w.createNS("http://www.w3.org/2000/svg","path");ne.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),X.appendChild(ne);const ae=w.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ae.setAttributeNS(null,"fill","#FFFFFF");const ce=w.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ye=w.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#000000"),ye.setAttributeNS(null,"opacity","0.25"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962");const we=w.createNS("http://www.w3.org/2000/svg","circle");we.setAttributeNS(null,"fill","#FFFFFF"),we.setAttributeNS(null,"cx","5.5"),we.setAttributeNS(null,"cy","5.5"),we.setAttributeNS(null,"r","5.4999962"),ce.appendChild(ye),ce.appendChild(we),j.appendChild(M),j.appendChild(V),j.appendChild(X),j.appendChild(ae),j.appendChild(ce),p.appendChild(j),p.setAttributeNS(null,"height",x*this._scale+"px"),p.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(p),this._offset=o.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),Lm(this._element,this._anchor,"marker"),l&&l.className)for(const p of l.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(l){return this.remove(),this._map=l,this._element.setAttribute("aria-label",l._getUIString("Marker.Title")),l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=o.N.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const v=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(l){return this._subpixelPositioning=l,this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:l?(l.isOpen()?l.remove():(l.setLngLat(this._lngLat),l.addTo(this._map)),this):this}_updateOpacity(l=!1){var p,x;if(!(!((p=this._map)===null||p===void 0)&&p.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(l)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const v=this._map,S=v.terrain.depthAtPoint(this._pos),j=v.terrain.getElevationForLngLatZoom(this._lngLat,v.transform.tileZoom);if(v.transform.lngLatToCameraDepth(this._lngLat,j)-S<.006)return void(this._element.style.opacity=this._opacity);const M=-this._offset.y/v.transform._pixelPerMeter,D=Math.sin(v.getPitch()*Math.PI/180)*M,V=v.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),G=v.transform.lngLatToCameraDepth(this._lngLat,j+D)-V>.006;!((x=this._popup)===null||x===void 0)&&x.isOpen()&&G&&this._popup.remove(),this._element.style.opacity=G?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(l){return this._offset=o.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(l,p){return l===void 0&&p===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),l!==void 0&&(this._opacity=l),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}const c_={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Rf=0,Lf=!1;const ul={maxWidth:100,unit:"metric"};function Ff(k,l,p){const x=p&&p.maxWidth||100,v=k._container.clientHeight/2,S=k.unproject([0,v]),j=k.unproject([x,v]),M=S.distanceTo(j);if(p&&p.unit==="imperial"){const D=3.2808*M;D>5280?nr(l,x,D/5280,k._getUIString("ScaleControl.Miles")):nr(l,x,D,k._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?nr(l,x,M/1852,k._getUIString("ScaleControl.NauticalMiles")):M>=1e3?nr(l,x,M/1e3,k._getUIString("ScaleControl.Kilometers")):nr(l,x,M,k._getUIString("ScaleControl.Meters"))}function nr(k,l,p,x){const v=function(S){const j=Math.pow(10,`${Math.floor(S)}`.length-1);let M=S/j;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:function(D){const V=Math.pow(10,Math.ceil(-Math.log(D)/Math.LN10));return Math.round(D*V)/V}(M),j*M}(p);k.style.width=l*(v/p)+"px",k.innerHTML=`${v}&nbsp;${x}`}const vr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Bm=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function $m(k){if(k){if(typeof k=="number"){const l=Math.round(Math.abs(k)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,k),"top-left":new o.P(l,l),"top-right":new o.P(-l,l),bottom:new o.P(0,-k),"bottom-left":new o.P(l,-l),"bottom-right":new o.P(-l,-l),left:new o.P(k,0),right:new o.P(-k,0)}}if(k instanceof o.P||Array.isArray(k)){const l=o.P.convert(k);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:o.P.convert(k.center||[0,0]),top:o.P.convert(k.top||[0,0]),"top-left":o.P.convert(k["top-left"]||[0,0]),"top-right":o.P.convert(k["top-right"]||[0,0]),bottom:o.P.convert(k.bottom||[0,0]),"bottom-left":o.P.convert(k["bottom-left"]||[0,0]),"bottom-right":o.P.convert(k["bottom-right"]||[0,0]),left:o.P.convert(k.left||[0,0]),right:o.P.convert(k.right||[0,0])}}return $m(new o.P(0,0))}const rx=d;a.AJAXError=o.bh,a.Evented=o.E,a.LngLat=o.N,a.MercatorCoordinate=o.Z,a.Point=o.P,a.addProtocol=o.bi,a.config=o.a,a.removeProtocol=o.bj,a.AttributionControl=Vh,a.BoxZoomHandler=Po,a.CanvasSource=yn,a.CooperativeGesturesHandler=$h,a.DoubleClickZoomHandler=Mu,a.DragPanHandler=i_,a.DragRotateHandler=s_,a.EdgeInsets=Lh,a.FullscreenControl=class extends o.E{constructor(k={}){super(),this._onFullscreenChange=()=>{var l;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((l=p==null?void 0:p.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,k&&k.container&&(k.container instanceof HTMLElement?this._container=k.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(k){return this._map=k,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const k=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",k).setAttribute("aria-hidden","true"),k.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const k=this._getTitle();this._fullscreenButton.setAttribute("aria-label",k),this._fullscreenButton.title=k}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},a.GeoJSONSource=tn,a.GeolocateControl=class extends o.E{constructor(k){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",l)),this._finish()}},this._updateCamera=l=>{const p=new o.N(l.coords.longitude,l.coords.latitude),x=l.coords.accuracy,v=this._map.getBearing(),S=o.e({bearing:v},this.options.fitBoundsOptions),j=Te.fromLngLat(p,x);this._map.fitBounds(j,S,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const p=new o.N(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=l.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=l=>{if(this._map){if(this.options.trackUserLocation)if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&Lf)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=l=>{if(this._map){if(l===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Fm({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Fm({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",p=>{p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p.originalEvent&&p.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")),this.fire(new o.k("userlocationlostfocus")))})}},this.options=o.e({},c_,k)}onAdd(k){return this._map=k,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(l=!1){if(jo!==void 0&&!l)return jo;if(window.navigator.permissions===void 0)return jo=!!window.navigator.geolocation,jo;try{jo=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{jo=!!window.navigator.geolocation}return jo})}().then(l=>this._finishSetupUI(l)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Rf=0,Lf=!1}_isOutOfMapMaxBounds(k){const l=this._map.getMaxBounds(),p=k.coords;return l&&(p.longitude<l.getWest()||p.longitude>l.getEast()||p.latitude<l.getSouth()||p.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const k=this._map.getBounds(),l=k.getSouthEast(),p=k.getNorthEast(),x=l.distanceTo(p),v=Math.ceil(this._accuracy/(x/this._map._container.clientHeight)*2);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Rf--,Lf=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart")),this.fire(new o.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let k;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Rf++,Rf>1?(k={maximumAge:6e5,timeout:0},Lf=!0):(k=this.options.positionOptions,Lf=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,k)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},a.Hash=Pm,a.ImageSource=on,a.KeyboardHandler=Yo,a.LngLatBounds=Te,a.LogoControl=Z0,a.Map=class extends o_{constructor(k){o.bf.mark(o.bg.create);const l=Object.assign(Object.assign({},IC),k);if(l.minZoom!=null&&l.maxZoom!=null&&l.minZoom>l.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(l.minPitch!=null&&l.maxPitch!=null&&l.minPitch>l.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(l.minPitch!=null&&l.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(l.maxPitch!=null&&l.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Fh(l.minZoom,l.maxZoom,l.minPitch,l.maxPitch,l.renderWorldCopies),{bearingSnap:l.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Hr,this._controls=[],this._mapId=o.a4(),this._contextLost=p=>{p.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.k("webglcontextlost",{originalEvent:p}))},this._contextRestored=p=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:p}))},this._onMapScroll=p=>{if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=l.interactive,this._maxTileCacheSize=l.maxTileCacheSize,this._maxTileCacheZoomLevels=l.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=l.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=l.preserveDrawingBuffer===!0,this._antialias=l.antialias===!0,this._trackResize=l.trackResize===!0,this._bearingSnap=l.bearingSnap,this._refreshExpiredTiles=l.refreshExpiredTiles===!0,this._fadeDuration=l.fadeDuration,this._crossSourceCollisions=l.crossSourceCollisions===!0,this._collectResourceTiming=l.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},ex),l.locale),this._clickTolerance=l.clickTolerance,this._overridePixelRatio=l.pixelRatio,this._maxCanvasSize=l.maxCanvasSize,this.transformCameraUpdate=l.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=l.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=L.addThrottleControl(()=>this.isMoving()),this._requestManager=new U(l.transformRequest),typeof l.container=="string"){if(this._container=document.getElementById(l.container),!this._container)throw new Error(`Container '${l.container}' not found.`)}else{if(!(l.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=l.container}if(l.maxBounds&&this.setMaxBounds(l.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let p=!1;const x=Af(v=>{this._trackResize&&!this._removed&&(this.resize(v),this.redraw())},50);this._resizeObserver=new ResizeObserver(v=>{p?x(v):p=!0}),this._resizeObserver.observe(this._container)}this.handlers=new K0(this,l),this._hash=l.hash&&new Pm(typeof l.hash=="string"&&l.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:l.center,zoom:l.zoom,bearing:l.bearing,pitch:l.pitch}),l.bounds&&(this.resize(),this.fitBounds(l.bounds,o.e({},l.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=l.localIdeographFontFamily,this._validateStyle=l.validateStyle,l.style&&this.setStyle(l.style,{localIdeographFontFamily:l.localIdeographFontFamily}),l.attributionControl&&this.addControl(new Vh(typeof l.attributionControl=="boolean"?void 0:l.attributionControl)),l.maplibreLogo&&this.addControl(new Z0,l.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",p=>{this._update(p.dataType==="style"),this.fire(new o.k(`${p.dataType}data`,p))}),this.on("dataloading",p=>{this.fire(new o.k(`${p.dataType}dataloading`,p))}),this.on("dataabort",p=>{this.fire(new o.k("sourcedataabort",p))})}_getMapId(){return this._mapId}addControl(k,l){if(l===void 0&&(l=k.getDefaultPosition?k.getDefaultPosition():"top-right"),!k||!k.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=k.onAdd(this);this._controls.push(k);const x=this._controlPositions[l];return l.indexOf("bottom")!==-1?x.insertBefore(p,x.firstChild):x.appendChild(p),this}removeControl(k){if(!k||!k.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(k);return l>-1&&this._controls.splice(l,1),k.onRemove(this),this}hasControl(k){return this._controls.indexOf(k)>-1}calculateCameraOptionsFromTo(k,l,p,x){return x==null&&this.terrain&&(x=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(k,l,p,x)}resize(k){var l;const p=this._containerDimensions(),x=p[0],v=p[1],S=this._getClampedPixelRatio(x,v);if(this._resizeCanvas(x,v,S),this.painter.resize(x,v,S),this.painter.overLimit()){const M=this.painter.context.gl;this._maxCanvasSize=[M.drawingBufferWidth,M.drawingBufferHeight];const D=this._getClampedPixelRatio(x,v);this._resizeCanvas(x,v,D),this.painter.resize(x,v,D)}this.transform.resize(x,v),(l=this._requestedCameraState)===null||l===void 0||l.resize(x,v);const j=!this._moving;return j&&(this.stop(),this.fire(new o.k("movestart",k)).fire(new o.k("move",k))),this.fire(new o.k("resize",k)),j&&this.fire(new o.k("moveend",k)),this}_getClampedPixelRatio(k,l){const{0:p,1:x}=this._maxCanvasSize,v=this.getPixelRatio(),S=k*v,j=l*v;return Math.min(S>p?p/S:1,j>x?x/j:1)*v}getPixelRatio(){var k;return(k=this._overridePixelRatio)!==null&&k!==void 0?k:devicePixelRatio}setPixelRatio(k){this._overridePixelRatio=k,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(k){return this.transform.setMaxBounds(Te.convert(k)),this._update()}setMinZoom(k){if((k=k??-2)>=-2&&k<=this.transform.maxZoom)return this.transform.minZoom=k,this._update(),this.getZoom()<k&&this.setZoom(k),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(k){if((k=k??22)>=this.transform.minZoom)return this.transform.maxZoom=k,this._update(),this.getZoom()>k&&this.setZoom(k),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(k){if((k=k??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(k>=0&&k<=this.transform.maxPitch)return this.transform.minPitch=k,this._update(),this.getPitch()<k&&this.setPitch(k),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(k){if((k=k??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(k>=this.transform.minPitch)return this.transform.maxPitch=k,this._update(),this.getPitch()>k&&this.setPitch(k),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(k){return this.transform.renderWorldCopies=k,this._update()}project(k){return this.transform.locationPoint(o.N.convert(k),this.style&&this.terrain)}unproject(k){return this.transform.pointLocation(o.P.convert(k),this.terrain)}isMoving(){var k;return this._moving||((k=this.handlers)===null||k===void 0?void 0:k.isMoving())}isZooming(){var k;return this._zooming||((k=this.handlers)===null||k===void 0?void 0:k.isZooming())}isRotating(){var k;return this._rotating||((k=this.handlers)===null||k===void 0?void 0:k.isRotating())}_createDelegatedListener(k,l,p){if(k==="mouseenter"||k==="mouseover"){let x=!1;return{layers:l,listener:p,delegates:{mousemove:S=>{const j=l.filter(D=>this.getLayer(D)),M=j.length!==0?this.queryRenderedFeatures(S.point,{layers:j}):[];M.length?x||(x=!0,p.call(this,new Ss(k,this,S.originalEvent,{features:M}))):x=!1},mouseout:()=>{x=!1}}}}if(k==="mouseleave"||k==="mouseout"){let x=!1;return{layers:l,listener:p,delegates:{mousemove:j=>{const M=l.filter(D=>this.getLayer(D));(M.length!==0?this.queryRenderedFeatures(j.point,{layers:M}):[]).length?x=!0:x&&(x=!1,p.call(this,new Ss(k,this,j.originalEvent)))},mouseout:j=>{x&&(x=!1,p.call(this,new Ss(k,this,j.originalEvent)))}}}}{const x=v=>{const S=l.filter(M=>this.getLayer(M)),j=S.length!==0?this.queryRenderedFeatures(v.point,{layers:S}):[];j.length&&(v.features=j,p.call(this,v),delete v.features)};return{layers:l,listener:p,delegates:{[k]:x}}}}_saveDelegatedListener(k,l){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[k]=this._delegatedListeners[k]||[],this._delegatedListeners[k].push(l)}_removeDelegatedListener(k,l,p){if(!this._delegatedListeners||!this._delegatedListeners[k])return;const x=this._delegatedListeners[k];for(let v=0;v<x.length;v++){const S=x[v];if(S.listener===p&&S.layers.length===l.length&&S.layers.every(j=>l.includes(j))){for(const j in S.delegates)this.off(j,S.delegates[j]);return void x.splice(v,1)}}}on(k,l,p){if(p===void 0)return super.on(k,l);const x=this._createDelegatedListener(k,typeof l=="string"?[l]:l,p);this._saveDelegatedListener(k,x);for(const v in x.delegates)this.on(v,x.delegates[v]);return this}once(k,l,p){if(p===void 0)return super.once(k,l);const x=typeof l=="string"?[l]:l,v=this._createDelegatedListener(k,x,p);for(const S in v.delegates){const j=v.delegates[S];v.delegates[S]=(...M)=>{this._removeDelegatedListener(k,x,p),j(...M)}}this._saveDelegatedListener(k,v);for(const S in v.delegates)this.once(S,v.delegates[S]);return this}off(k,l,p){return p===void 0?super.off(k,l):(this._removeDelegatedListener(k,typeof l=="string"?[l]:l,p),this)}queryRenderedFeatures(k,l){if(!this.style)return[];let p;const x=k instanceof o.P||Array.isArray(k),v=x?k:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(x?{}:k)||{},v instanceof o.P||typeof v[0]=="number")p=[o.P.convert(v)];else{const S=o.P.convert(v[0]),j=o.P.convert(v[1]);p=[S,new o.P(j.x,S.y),j,new o.P(S.x,j.y),S]}return this.style.queryRenderedFeatures(p,l,this.transform)}querySourceFeatures(k,l){return this.style.querySourceFeatures(k,l)}setStyle(k,l){return(l=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&k?(this._diffStyle(k,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(k,l))}setTransformRequest(k){return this._requestManager.setTransformRequest(k),this}_getUIString(k){const l=this._locale[k];if(l==null)throw new Error(`Missing UI string '${k}'`);return l}_updateStyle(k,l){if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(k,l));const p=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!k)),k?(this.style=new kc(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof k=="string"?this.style.loadURL(k,l,p):this.style.loadJSON(k,l,p),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new kc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(k,l){if(typeof k=="string"){const p=this._requestManager.transformRequest(k,"Style");o.h(p,new AbortController).then(x=>{this._updateDiff(x.data,l)}).catch(x=>{x&&this.fire(new o.j(x))})}else typeof k=="object"&&this._updateDiff(k,l)}_updateDiff(k,l){try{this.style.setState(k,l)&&this._update(!0)}catch(p){o.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(k,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(k,l){return this._lazyInitEmptyStyle(),this.style.addSource(k,l),this._update(!0)}isSourceLoaded(k){const l=this.style&&this.style.sourceCaches[k];if(l!==void 0)return l.loaded();this.fire(new o.j(new Error(`There is no source with ID '${k}'`)))}setTerrain(k){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),k){const l=this.style.sourceCaches[k.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${k.source}`);this.terrain===null&&l.reload();for(const p in this.style._layers){const x=this.style._layers[p];x.type==="hillshade"&&x.source===k.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new J0(this.painter,l,k),this.painter.renderToTexture=new a_(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=p=>{p.dataType==="style"?this.terrain.sourceCache.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==k.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new o.k("terrain",{terrain:k})),this}getTerrain(){var k,l;return(l=(k=this.terrain)===null||k===void 0?void 0:k.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const k=this.style&&this.style.sourceCaches;for(const l in k){const p=k[l]._tiles;for(const x in p){const v=p[x];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}removeSource(k){return this.style.removeSource(k),this._update(!0)}getSource(k){return this.style.getSource(k)}addImage(k,l,p={}){const{pixelRatio:x=1,sdf:v=!1,stretchX:S,stretchY:j,content:M,textFitWidth:D,textFitHeight:V}=p;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||o.b(l))){if(l.width===void 0||l.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:G,height:X,data:ne}=l,ae=l;return this.style.addImage(k,{data:new o.R({width:G,height:X},new Uint8Array(ne)),pixelRatio:x,stretchX:S,stretchY:j,content:M,textFitWidth:D,textFitHeight:V,sdf:v,version:0,userImage:ae}),ae.onAdd&&ae.onAdd(this,k),this}}{const{width:G,height:X,data:ne}=b.getImageData(l);this.style.addImage(k,{data:new o.R({width:G,height:X},ne),pixelRatio:x,stretchX:S,stretchY:j,content:M,textFitWidth:D,textFitHeight:V,sdf:v,version:0})}}updateImage(k,l){const p=this.style.getImage(k);if(!p)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const x=l instanceof HTMLImageElement||o.b(l)?b.getImageData(l):l,{width:v,height:S,data:j}=x;if(v===void 0||S===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==p.data.width||S!==p.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const M=!(l instanceof HTMLImageElement||o.b(l));return p.data.replace(j,M),this.style.updateImage(k,p),this}getImage(k){return this.style.getImage(k)}hasImage(k){return k?!!this.style.getImage(k):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(k){this.style.removeImage(k)}loadImage(k){return L.getImage(this._requestManager.transformRequest(k,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(k,l){return this._lazyInitEmptyStyle(),this.style.addLayer(k,l),this._update(!0)}moveLayer(k,l){return this.style.moveLayer(k,l),this._update(!0)}removeLayer(k){return this.style.removeLayer(k),this._update(!0)}getLayer(k){return this.style.getLayer(k)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(k,l,p){return this.style.setLayerZoomRange(k,l,p),this._update(!0)}setFilter(k,l,p={}){return this.style.setFilter(k,l,p),this._update(!0)}getFilter(k){return this.style.getFilter(k)}setPaintProperty(k,l,p,x={}){return this.style.setPaintProperty(k,l,p,x),this._update(!0)}getPaintProperty(k,l){return this.style.getPaintProperty(k,l)}setLayoutProperty(k,l,p,x={}){return this.style.setLayoutProperty(k,l,p,x),this._update(!0)}getLayoutProperty(k,l){return this.style.getLayoutProperty(k,l)}setGlyphs(k,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(k,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(k,l,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(k,l,p,x=>{x||this._update(!0)}),this}removeSprite(k){return this._lazyInitEmptyStyle(),this.style.removeSprite(k),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(k,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(k,l,p=>{p||this._update(!0)}),this}setLight(k,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(k,l),this._update(!0)}getLight(){return this.style.getLight()}setSky(k){return this._lazyInitEmptyStyle(),this.style.setSky(k),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(k,l){return this.style.setFeatureState(k,l),this._update()}removeFeatureState(k,l){return this.style.removeFeatureState(k,l),this._update()}getFeatureState(k){return this.style.getFeatureState(k)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let k=0,l=0;return this._container&&(k=this._container.clientWidth||400,l=this._container.clientHeight||300),[k,l]}_setupContainer(){const k=this._container;k.classList.add("maplibregl-map");const l=this._canvasContainer=w.create("div","maplibregl-canvas-container",k);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),x=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],x);const v=this._controlContainer=w.create("div","maplibregl-control-container",k),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(j=>{S[j]=w.create("div",`maplibregl-ctrl-${j} `,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(k,l,p){this._canvas.width=Math.floor(p*k),this._canvas.height=Math.floor(p*l),this._canvas.style.width=`${k}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const k={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let l=null;this._canvas.addEventListener("webglcontextcreationerror",x=>{l={requestedAttributes:k},x&&(l.statusMessage=x.statusMessage,l.type=x.type)},{once:!0});const p=this._canvas.getContext("webgl2",k)||this._canvas.getContext("webgl",k);if(!p){const x="Failed to initialize WebGL";throw l?(l.message=x,new Error(JSON.stringify(l))):new Error(x)}this.painter=new Om(p,this.transform),O.testSupport(p)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(k){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||k,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(k){return this._update(),this._renderTaskQueue.add(k)}_cancelRenderFrame(k){this._renderTaskQueue.remove(k)}_render(k){const l=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(k),this._removed)return;let p=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const v=this.transform.zoom,S=b.now();this.style.zoomHistory.update(v,S);const j=new o.z(v,{now:S,fadeDuration:l,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),M=j.crossFadingFactor();M===1&&M===this._crossFadingFactor||(p=!0,this._crossFadingFactor=M),this.style.update(j)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,l,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:l,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.bf.mark(o.bg.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||p)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const x=this._sourcesDirty||this._styleDirty||this._placementDirty;return x||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||x||(this._fullyLoaded=!0,o.bf.mark(o.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var k;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),L.removeThrottleControl(this._imageQueueHandle),(k=this._resizeObserver)===null||k===void 0||k.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l!=null&&l.loseContext&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),o.bf.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(k=>{o.bf.frame(k),this._frameRequest=null,this._render(k)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(k){this._showTileBoundaries!==k&&(this._showTileBoundaries=k,this._update())}get showPadding(){return!!this._showPadding}set showPadding(k){this._showPadding!==k&&(this._showPadding=k,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(k){this._showCollisionBoxes!==k&&(this._showCollisionBoxes=k,k?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(k){this._showOverdrawInspector!==k&&(this._showOverdrawInspector=k,this._update())}get repaint(){return!!this._repaint}set repaint(k){this._repaint!==k&&(this._repaint=k,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(k){this._vertices=k,this._update()}get version(){return l_}getCameraTargetElevation(){return this.transform.elevation}},a.MapMouseEvent=Ss,a.MapTouchEvent=Eu,a.MapWheelEvent=t_,a.Marker=Fm,a.NavigationControl=class{constructor(k){this._updateZoomButtons=()=>{const l=this._map.getZoom(),p=l===this._map.getMaxZoom(),x=l===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())},this._rotateCompassArrow=()=>{const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=l},this._setButtonTitle=(l,p)=>{const x=this._map._getUIString(`NavigationControl.${p}`);l.title=x,l.setAttribute("aria-label",x)},this.options=o.e({},DC,k),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",l=>this._map.zoomIn({},{originalEvent:l})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",l=>this._map.zoomOut({},{originalEvent:l})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(k){return this._map=k,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new RC(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(k,l){const p=w.create("button",k,this._container);return p.type="button",p.addEventListener("click",l),p}},a.Popup=class extends o.E{constructor(k){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.k("close"))),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{var p;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Un(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._trackPointer&&!l)return;const x=this._flatPos=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&l?l:this._map.transform.locationPoint(this._lngLat));let v=this.options.anchor;const S=$m(this.options.offset);if(!v){const M=this._container.offsetWidth,D=this._container.offsetHeight;let V;V=x.y+S.bottom.y<D?["top"]:x.y>this._map.transform.height-D?["bottom"]:[],x.x<M/2?V.push("left"):x.x>this._map.transform.width-M/2&&V.push("right"),v=V.length===0?"bottom":V.join("-")}let j=x.add(S[v]);this.options.subpixelPositioning||(j=j.round()),w.setTransform(this._container,`${Uh[v]} translate(${j.x}px,${j.y}px)`),Lm(this._container,v,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(vr),k)}addTo(k){return this._map&&this.remove(),this._map=k,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(k){return this._lngLat=o.N.convert(k),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(k){return this.setDOMContent(document.createTextNode(k))}setHTML(k){const l=document.createDocumentFragment(),p=document.createElement("body");let x;for(p.innerHTML=k;x=p.firstChild,x;)l.appendChild(x);return this.setDOMContent(l)}getMaxWidth(){var k;return(k=this._container)===null||k===void 0?void 0:k.style.maxWidth}setMaxWidth(k){return this.options.maxWidth=k,this._update(),this}setDOMContent(k){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(k),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(k){return this._container&&this._container.classList.add(k),this}removeClassName(k){return this._container&&this._container.classList.remove(k),this}setOffset(k){return this.options.offset=k,this._update(),this}toggleClassName(k){if(this._container)return this._container.classList.toggle(k)}setSubpixelPositioning(k){this.options.subpixelPositioning=k}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const k=this._container.querySelector(Bm);k&&k.focus()}},a.RasterDEMTileSource=Vt,a.RasterTileSource=Tt,a.ScaleControl=class{constructor(k){this._onMove=()=>{Ff(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,Ff(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ul),k)}getDefaultPosition(){return"bottom-left"}onAdd(k){return this._map=k,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",k.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},a.ScrollZoomHandler=za,a.Style=kc,a.TerrainControl=class{constructor(k){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=k}onAdd(k){return this._map=k,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},a.TwoFingersTouchPitchHandler=Df,a.TwoFingersTouchRotateHandler=H0,a.TwoFingersTouchZoomHandler=q0,a.TwoFingersTouchZoomRotateHandler=X0,a.VectorTileSource=Nt,a.VideoSource=kn,a.addSourceType=(k,l)=>o._(void 0,void 0,void 0,function*(){if(Oi(k))throw new Error(`A source type called "${k}" already exists.`);((p,x)=>{ui[p]=x})(k,l)}),a.clearPrewarmedResources=function(){const k=Xe;k&&(k.isPreloaded()&&k.numActive()===1?(k.release(nt),Xe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},a.getRTLTextPluginStatus=function(){return Wt().getRTLTextPluginStatus()},a.getVersion=function(){return rx},a.getWorkerCount=function(){return ze.workerCount},a.getWorkerUrl=function(){return o.a.WORKER_URL},a.importScriptInWorkers=function(k){return yt().broadcast("IS",k)},a.prewarm=function(){Mt().acquire(nt)},a.setMaxParallelImageRequests=function(k){o.a.MAX_PARALLEL_IMAGE_REQUESTS=k},a.setRTLTextPlugin=function(k,l){return Wt().setRTLTextPlugin(k,l)},a.setWorkerCount=function(k){ze.workerCount=k},a.setWorkerUrl=function(k){o.a.WORKER_URL=k}});var s=r;return s})})(bU);var u1e=bU.exports;const GO=e1(u1e);function h1e({geoserverUrl:t,workspace:e,layerName:r,styleName:n,size:i=20}){const[s,a]=I.useState(!1),o=`${t}/${e}/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetLegendGraphic&LAYER=${e}:${r}&STYLE=${n}&FORMAT=image/png&WIDTH=${i}&HEIGHT=${i}&LEGEND_OPTIONS=forceLabels:off;fontAntiAliasing:true`;return s?u.jsx(He,{as:Bo,color:"pink.500",boxSize:`${i}px`}):u.jsx(ue,{as:"img",src:o,alt:n,w:`${i}px`,h:`${i}px`,minW:`${i}px`,minH:`${i}px`,borderRadius:"sm",objectFit:"contain",bg:"white",border:"1px solid",borderColor:"gray.200",onError:()=>a(!0)})}function d1e({previewUrl:t,layerName:e,workspace:r,storeName:n,storeType:i,layerType:s,connectionId:a,onClose:o}){const d=I.useRef(null),m=I.useRef(null),y=I.useRef(null),[b,w]=I.useState(!1),[O,A]=I.useState(null),[E,$]=I.useState(null),[R,F]=I.useState(!1),[L,U]=I.useState(!1),[Q,Y]=I.useState("2d"),[Z,J]=I.useState([]),[re,he]=I.useState(""),[le,Ze]=I.useState(""),Ee=dr("white","gray.800"),qe=dr("gray.200","gray.600"),et=dr("gray.50","gray.700"),at=bt(Oe=>Oe.setPreviewMode);I.useEffect(()=>{t&&(console.log("[MapPreview] Fetching layer info from:",`${t}/api/layer`),fetch(`${t}/api/layer`).then(Oe=>Oe.json()).then(Oe=>{console.log("[MapPreview] Received layer info:",Oe),$(Oe)}).catch(Oe=>{console.error("[MapPreview] Failed to fetch layer info:",Oe)}))},[t]),I.useEffect(()=>{t&&(console.log("[MapPreview] Fetching metadata from:",`${t}/api/metadata`),F(!0),fetch(`${t}/api/metadata`).then(Oe=>Oe.json()).then(Oe=>{console.log("[MapPreview] Received metadata:",Oe),A(Oe),F(!1)}).catch(Oe=>{console.error("[MapPreview] Failed to fetch metadata:",Oe),F(!1)}))},[t]),I.useEffect(()=>{a&&r&&e&&hU(a,r,e).then(Oe=>{const Re=[Oe.defaultStyle,...Oe.additionalStyles||[]];J(Re.filter(Boolean)),Ze(Oe.defaultStyle||""),he(Oe.defaultStyle||"")}).catch(Oe=>{console.error("Failed to fetch layer styles:",Oe)})},[a,r,e]);const Be=(Oe,Re)=>!(Oe[2]<Re[0]||Re[2]<Oe[0]||Oe[3]<Re[1]||Re[3]<Oe[1]),Me=Oe=>{if(!m.current)return!1;const Re=m.current.getBounds(),nt=[Re.getWest(),Re.getSouth(),Re.getEast(),Re.getNorth()];return Be(nt,Oe)},Ge=(Oe,Re)=>{const nt=`${Oe.workspace}:${Oe.name}`;if(Oe.use_cache){const Xe=Oe.grid_set||"EPSG:900913",_t=Oe.tile_format||"image/png";return`${Oe.geoserver_url}/gwc/service/wmts/rest/${encodeURIComponent(nt)}/${Xe}/${encodeURIComponent(_t)}/{z}/{y}/{x}`}const ze=`${Oe.geoserver_url}/${Oe.workspace}/wms`,rt=new URLSearchParams({SERVICE:"WMS",VERSION:"1.1.1",REQUEST:"GetMap",LAYERS:nt,FORMAT:"image/png",TRANSPARENT:"true",SRS:"EPSG:3857",WIDTH:"256",HEIGHT:"256"});return Re&&rt.set("STYLES",Re),`${ze}?${rt.toString()}&BBOX={bbox-epsg-3857}`};I.useEffect(()=>{if(!d.current||!E)return;const Oe=O!=null&&O.latlon_bbox?[O.latlon_bbox.minx,O.latlon_bbox.miny,O.latlon_bbox.maxx,O.latlon_bbox.maxy]:[-180,-85,180,85],Re=[(Oe[0]+Oe[2])/2,(Oe[1]+Oe[3])/2];return m.current=new GO.Map({container:d.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:19}]},center:Re,zoom:2}),m.current.addControl(new GO.NavigationControl,"top-right"),m.current.addControl(new GO.ScaleControl,"bottom-left"),m.current.on("load",()=>{U(!0)}),()=>{m.current&&(m.current.remove(),m.current=null,U(!1))}},[E]),I.useEffect(()=>{if(!m.current||!L||!E)return;const Oe=Ge(E,re);if(console.log("[MapPreview] Layer info:",{workspace:E.workspace,name:E.name,geoserver_url:E.geoserver_url,store_type:E.store_type,type:E.type,use_cache:E.use_cache}),console.log("[MapPreview] WMS tile URL template:",Oe),console.log("[MapPreview] Current style:",re||"(default)"),m.current.getLayer("wms-layer")&&m.current.removeLayer("wms-layer"),m.current.getSource("wms-layer")&&m.current.removeSource("wms-layer"),m.current.addSource("wms-layer",{type:"raster",tiles:[Oe],tileSize:256}),m.current.addLayer({id:"wms-layer",type:"raster",source:"wms-layer",paint:{"raster-opacity":1}}),O!=null&&O.latlon_bbox){const Re=[O.latlon_bbox.minx,O.latlon_bbox.miny,O.latlon_bbox.maxx,O.latlon_bbox.maxy];console.log("[MapPreview] Layer bounds (lat/lon):",Re);const nt=!Me(Re);console.log("[MapPreview] Should fit to bounds:",nt),nt&&m.current.fitBounds(Re,{padding:50,maxZoom:15}),y.current=Re}else console.log("[MapPreview] No bounds available in metadata")},[L,E,re,O==null?void 0:O.latlon_bbox]),I.useEffect(()=>{if(!(!m.current||!L))switch(Q){case"2d":m.current.easeTo({pitch:0,bearing:0,duration:500}),m.current.setMaxPitch(0);break;case"3d":m.current.setMaxPitch(85),m.current.easeTo({pitch:45,duration:500});break}},[Q,L]);const Le=()=>{if(!m.current||!L||!E)return;const Oe=Ge(E,re);m.current.getLayer("wms-layer")&&m.current.removeLayer("wms-layer"),m.current.getSource("wms-layer")&&m.current.removeSource("wms-layer");const Re=`&_t=${Date.now()}`;m.current.addSource("wms-layer",{type:"raster",tiles:[Oe+Re],tileSize:256}),m.current.addLayer({id:"wms-layer",type:"raster",source:"wms-layer",paint:{"raster-opacity":1}})},Ie=Oe=>{he(Oe)};return t?u.jsxs(Jr,{bg:Ee,overflow:"hidden",h:"100%",display:"flex",flexDirection:"column",children:[u.jsx(ue,{bg:"linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 100%)",color:"white",px:4,py:3,children:u.jsxs(Ce,{justify:"space-between",children:[u.jsxs(ft,{align:"start",spacing:0,children:[u.jsxs(Ce,{children:[u.jsx(bn,{size:"sm",color:"white",children:"Layer Preview"}),u.jsx(er,{colorScheme:"whiteAlpha",variant:"solid",fontSize:"xs",children:s==="raster"?"Raster":"Vector"})]}),u.jsxs(ie,{fontSize:"xs",color:"whiteAlpha.800",children:[r,":",e]})]}),u.jsxs(Ce,{spacing:2,children:[Z.length>0&&u.jsxs(Kd,{children:[u.jsx(Zd,{as:St,size:"sm",variant:"solid",bg:"whiteAlpha.200",color:"white",_hover:{bg:"whiteAlpha.300"},_active:{bg:"whiteAlpha.400"},rightIcon:u.jsx(Nl,{}),leftIcon:u.jsx(Bo,{}),maxW:"180px",children:u.jsx(ie,{isTruncated:!0,fontSize:"xs",children:re||"Default Style"})}),u.jsx(Yd,{color:"gray.800",zIndex:1e3,children:Z.map(Oe=>u.jsx(fa,{onClick:()=>Ie(Oe),fontWeight:re===Oe?"bold":"normal",bg:re===Oe?"kartoza.50":void 0,children:u.jsxs(Ce,{children:[E!=null&&E.geoserver_url?u.jsx(h1e,{geoserverUrl:E.geoserver_url,workspace:r,layerName:e,styleName:Oe,size:20}):u.jsx(He,{as:Bo,color:"pink.500"}),u.jsx(ie,{children:Oe}),Oe===le&&u.jsx(er,{colorScheme:"kartoza",size:"sm",ml:2,children:"Default"})]})},Oe))})]}),u.jsxs(qk,{size:"sm",isAttached:!0,variant:"ghost",children:[u.jsx($r,{label:"2D View",children:u.jsx(br,{"aria-label":"2D",icon:u.jsx(yc,{}),color:"white",bg:Q==="2d"?"whiteAlpha.300":void 0,_hover:{bg:"whiteAlpha.200"},onClick:()=>Y("2d")})}),u.jsx($r,{label:"3D View (tilt)",children:u.jsx(br,{"aria-label":"3D",icon:u.jsx(wI,{}),color:"white",bg:Q==="3d"?"whiteAlpha.300":void 0,_hover:{bg:"whiteAlpha.200"},onClick:()=>Y("3d")})})]}),u.jsx($r,{label:"3D Globe (Cesium)",children:u.jsx(br,{"aria-label":"3D Globe",icon:u.jsx(Rl,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:()=>at("3d")})}),u.jsx(Fr,{orientation:"vertical",h:"24px",borderColor:"whiteAlpha.400"}),u.jsx($r,{label:"Refresh",children:u.jsx(br,{"aria-label":"Refresh",icon:u.jsx(pf,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:Le})}),u.jsx($r,{label:"Layer Info",children:u.jsx(br,{"aria-label":"Layer Info",icon:u.jsx(O1,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:()=>w(!b),bg:b?"whiteAlpha.200":void 0})}),o&&u.jsx($r,{label:"Close Preview",children:u.jsx(br,{"aria-label":"Close",icon:u.jsx(tf,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:o})})]})]})}),re&&Z.length>1&&u.jsx(ue,{px:4,py:2,bg:"kartoza.50",borderBottom:"1px solid",borderColor:qe,children:u.jsxs(Ce,{fontSize:"sm",children:[u.jsx(He,{as:Bo,color:"pink.500"}),u.jsxs(ie,{color:"gray.600",children:["Style: ",u.jsx(ie,{as:"span",fontWeight:"600",children:re}),re===le&&u.jsx(er,{ml:2,colorScheme:"kartoza",size:"sm",children:"Default"})]}),Z.length>1&&u.jsxs(Kd,{children:[u.jsx(Zd,{as:St,size:"xs",variant:"ghost",rightIcon:u.jsx(Nl,{}),ml:"auto",children:"Change"}),u.jsx(Yd,{children:Z.map(Oe=>u.jsx(fa,{onClick:()=>Ie(Oe),fontWeight:re===Oe?"bold":"normal",children:u.jsxs(Ce,{children:[u.jsx(He,{as:Bo,color:"pink.500"}),u.jsx(ie,{children:Oe}),Oe===le&&u.jsx(er,{colorScheme:"kartoza",size:"sm",children:"Default"})]})},Oe))})]})]})}),u.jsx(mc,{in:b,animateOpacity:!0,children:u.jsx(ue,{bg:et,p:4,borderBottom:"1px solid",borderColor:qe,children:R?u.jsxs(Ce,{justify:"center",py:4,children:[u.jsx(Nn,{size:"sm",color:"kartoza.500"}),u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"Loading metadata..."})]}):O?u.jsxs(nn,{columns:{base:1,md:2,lg:3},spacing:4,children:[O.layer_title&&u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:"Title"}),u.jsx(ie,{fontSize:"sm",children:O.layer_title})]}),O.layer_srs&&u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:"SRS"}),u.jsx(ie,{fontSize:"sm",fontFamily:"mono",children:O.layer_srs})]}),O.store_format&&u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:"Format"}),u.jsx(ie,{fontSize:"sm",children:O.store_format})]}),O.latlon_bbox&&u.jsxs(ue,{gridColumn:{md:"span 2",lg:"span 3"},children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:"Bounding Box (WGS84)"}),u.jsxs(ie,{fontSize:"sm",fontFamily:"mono",children:["[",O.latlon_bbox.minx.toFixed(4),", ",O.latlon_bbox.miny.toFixed(4),"] - [",O.latlon_bbox.maxx.toFixed(4),", ",O.latlon_bbox.maxy.toFixed(4),"]"]})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:"Status"}),u.jsxs(Ce,{spacing:2,mt:1,children:[O.layer_enabled!==void 0&&u.jsx(er,{colorScheme:O.layer_enabled?"green":"gray",size:"sm",children:O.layer_enabled?"Enabled":"Disabled"}),O.layer_queryable!==void 0&&O.layer_queryable&&u.jsx(er,{colorScheme:"blue",size:"sm",children:"Queryable"}),O.layer_advertised!==void 0&&O.layer_advertised&&u.jsx(er,{colorScheme:"purple",size:"sm",children:"Advertised"})]})]}),O.layer_abstract&&u.jsxs(ue,{gridColumn:{md:"span 2",lg:"span 3"},children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:"Abstract"}),u.jsx(ie,{fontSize:"sm",noOfLines:3,children:O.layer_abstract})]})]}):u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"No metadata available"})})}),u.jsxs(ue,{flex:"1",minH:"300px",position:"relative",bg:"gray.100",children:[u.jsx(ue,{ref:d,position:"absolute",top:0,left:0,right:0,bottom:0}),!L&&u.jsxs(ue,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",children:[u.jsx(Nn,{size:"xl",color:"kartoza.500"}),u.jsx(ie,{mt:2,color:"gray.600",children:"Loading map..."})]})]}),u.jsx(ue,{px:4,py:2,bg:et,borderTop:"1px solid",borderColor:qe,children:u.jsxs(Ce,{justify:"space-between",fontSize:"xs",color:"gray.500",children:[u.jsxs(ie,{children:["Store: ",n||"N/A"," (",i||"unknown",")"]}),u.jsxs(Ce,{spacing:4,children:[u.jsxs(er,{colorScheme:Q==="2d"?"blue":Q==="3d"?"purple":"green",children:[Q.toUpperCase()," Mode"]}),u.jsxs(ie,{children:["Zoom with scroll, drag to pan",Q!=="2d"&&", Ctrl+drag to rotate"]})]})]})})]}):null}Cesium.Ion.defaultAccessToken="";function f1e({connectionId:t,workspace:e,layerName:r,nodeType:n="layer",onClose:i}){const s=I.useRef(null),a=I.useRef(null),[o,d]=I.useState(!0),[m,y]=I.useState("3d"),[b,w]=I.useState([]),[O,A]=I.useState(null),[E,$]=I.useState(!1),[R,F]=I.useState(0),L=dr("white","gray.800"),U=dr("gray.200","gray.600"),Q=dr("gray.50","gray.700"),Y=bt(Ee=>Ee.setPreviewMode),Z=bt(Ee=>Ee.setPreview),J=async()=>{try{const Ee=n==="layergroup"?"group":"vector",{url:qe}=await el({connId:t,workspace:e,layerName:r,layerType:Ee});Z({url:qe,layerName:r,workspace:e,connectionId:t,layerType:Ee,nodeType:n}),Y("2d")}catch(Ee){bt.getState().setError(Ee.message)}},re=I.useCallback(()=>!t||!e?null:n==="layergroup"?`/api/terria/story/${t}/${e}/${r}`:`/api/terria/layer/${t}/${e}/${r}`,[t,e,r,n]);I.useEffect(()=>{F(Ee=>Ee+1)},[t,e,r]),I.useEffect(()=>{if(!s.current)return;if(a.current){try{a.current.destroy()}catch(et){console.warn("[Globe3D] Error destroying previous viewer:",et)}a.current=null}d(!0),A(null);let Ee=!0;const qe=setTimeout(async()=>{if(!(!Ee||!s.current))try{console.log("[Globe3D] Initializing Cesium viewer...");const et=new Cesium.Viewer(s.current,{baseLayerPicker:!1,geocoder:!1,homeButton:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,animation:!1,navigationHelpButton:!1,fullscreenButton:!1,vrButton:!1,infoBox:!1,creditContainer:document.createElement("div")});et.imageryLayers.removeAll(),et.terrainProvider=new Cesium.EllipsoidTerrainProvider,console.log("[Globe3D] Viewer created, adding base layer..."),et.imageryLayers.addImageryProvider(new Cesium.UrlTemplateImageryProvider({url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",subdomains:["a","b","c","d"],credit:new Cesium.Credit("Map tiles by CartoDB, under CC BY 3.0. Data by OpenStreetMap, under ODbL.")})),console.log("[Globe3D] CartoDB base layer added"),a.current=et;const at=re();if(at){const Be=await fetch(at);if(!Be.ok)throw new Error(`Failed to fetch catalog: ${Be.status}`);const Me=await Be.json(),Ge=[],Le=Ie=>{if(Ie.type==="wms")try{const Oe=new Cesium.WebMapServiceImageryProvider({url:Ie.url,layers:Ie.layers||Ie.name,parameters:{transparent:!0,format:"image/png"}}),Re=et.imageryLayers.addImageryProvider(Oe);if(Re.alpha=Ie.opacity||1,Ge.push({name:Ie.name,layer:Re,visible:!0,opacity:Re.alpha}),Ie.rectangle){const nt=Ie.rectangle;et.camera.flyTo({destination:Cesium.Rectangle.fromDegrees(nt.west,nt.south,nt.east,nt.north),duration:1.5})}}catch(Oe){console.error("Failed to add WMS layer:",Ie.name,Oe)}else Ie.type==="group"&&Array.isArray(Ie.members)&&Ie.members.forEach(Oe=>Le(Oe))};Me.catalog?Me.catalog.forEach(Ie=>Le(Ie)):(Me.type==="wms"||Me.type==="group")&&Le(Me),Ee&&w(Ge)}Ee&&d(!1)}catch(et){console.error("Failed to initialize Cesium viewer:",et),Ee&&(A(et instanceof Error?et.message:"Failed to initialize viewer"),d(!1))}},200);return()=>{if(Ee=!1,clearTimeout(qe),a.current){try{a.current.destroy()}catch(et){console.warn("[Globe3D] Error destroying viewer:",et)}a.current=null}w([])}},[re,R]),I.useEffect(()=>{if(a.current)switch(m){case"3d":a.current.scene.mode=Cesium.SceneMode.SCENE3D;break;case"2d":a.current.scene.mode=Cesium.SceneMode.SCENE2D;break;case"columbus":a.current.scene.mode=Cesium.SceneMode.COLUMBUS_VIEW;break}},[m]);const he=(Ee,qe)=>{b[Ee]&&(b[Ee].layer.show=qe,w(et=>et.map((at,Be)=>Be===Ee?{...at,visible:qe}:at)))},le=(Ee,qe)=>{b[Ee]&&(b[Ee].layer.alpha=qe,w(et=>et.map((at,Be)=>Be===Ee?{...at,opacity:qe}:at)))},Ze=()=>{if(!a.current)return;const qe=a.current.imageryLayers;for(let et=0;et<qe.length;et++){const at=qe.get(et),Be=at.show;at.show=!1,setTimeout(()=>{at.show=Be},100)}};return u.jsxs(Jr,{bg:L,overflow:"hidden",h:"100%",display:"flex",flexDirection:"column",children:[u.jsx(ue,{bg:"linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 100%)",color:"white",px:4,py:3,children:u.jsxs(Ce,{justify:"space-between",children:[u.jsxs(ft,{align:"start",spacing:0,children:[u.jsxs(Ce,{children:[u.jsx(bn,{size:"sm",color:"white",children:"3D Globe Preview"}),u.jsx(er,{colorScheme:"whiteAlpha",variant:"solid",fontSize:"xs",children:n==="layergroup"?"Layer Group":"Layer"})]}),u.jsxs(ie,{fontSize:"xs",color:"whiteAlpha.800",children:[e,":",r]})]}),u.jsxs(Ce,{spacing:2,children:[b.length>0&&u.jsxs(Kd,{children:[u.jsx(Zd,{as:St,size:"sm",variant:"solid",bg:"whiteAlpha.200",color:"white",_hover:{bg:"whiteAlpha.300"},_active:{bg:"whiteAlpha.400"},rightIcon:u.jsx(Nl,{}),leftIcon:u.jsx(Yi,{}),maxW:"180px",children:u.jsxs(ie,{isTruncated:!0,fontSize:"xs",children:[b.length," Layer",b.length!==1?"s":""]})}),u.jsx(Yd,{color:"gray.800",zIndex:1e3,maxH:"300px",overflowY:"auto",children:b.map((Ee,qe)=>u.jsx(fa,{onClick:()=>he(qe,!Ee.visible),closeOnSelect:!1,children:u.jsxs(Ce,{justify:"space-between",w:"100%",children:[u.jsxs(Ce,{children:[u.jsx(He,{as:Ee.visible?wo:Jd,color:Ee.visible?"green.500":"gray.400"}),u.jsx(ie,{fontSize:"sm",children:Ee.name})]}),u.jsxs(er,{colorScheme:Ee.visible?"green":"gray",size:"sm",children:[Math.round(Ee.opacity*100),"%"]})]})},qe))})]}),u.jsx($r,{label:"2D Map (MapLibre)",children:u.jsx(br,{"aria-label":"2D Map",icon:u.jsx(yc,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:J})}),u.jsxs(qk,{size:"sm",isAttached:!0,variant:"ghost",children:[u.jsx($r,{label:"3D Globe",children:u.jsx(br,{"aria-label":"3D Globe",icon:u.jsx(Rl,{}),color:"white",bg:m==="3d"?"whiteAlpha.300":void 0,_hover:{bg:"whiteAlpha.200"},onClick:()=>y("3d")})}),u.jsx($r,{label:"Columbus View",children:u.jsx(br,{"aria-label":"Columbus View",icon:u.jsx(wI,{}),color:"white",bg:m==="columbus"?"whiteAlpha.300":void 0,_hover:{bg:"whiteAlpha.200"},onClick:()=>y("columbus")})})]}),u.jsx(Fr,{orientation:"vertical",h:"24px",borderColor:"whiteAlpha.400"}),u.jsx($r,{label:"Refresh",children:u.jsx(br,{"aria-label":"Refresh",icon:u.jsx(pf,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:Ze})}),u.jsx($r,{label:"Layer Controls",children:u.jsx(br,{"aria-label":"Layer Controls",icon:u.jsx(O1,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:()=>$(!E),bg:E?"whiteAlpha.200":void 0})}),i&&u.jsx($r,{label:"Close Preview",children:u.jsx(br,{"aria-label":"Close",icon:u.jsx(tf,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:i})})]})]})}),u.jsx(mc,{in:E,animateOpacity:!0,children:u.jsx(ue,{bg:Q,p:4,borderBottom:"1px solid",borderColor:U,children:o?u.jsxs(Ce,{justify:"center",py:4,children:[u.jsx(Nn,{size:"sm",color:"kartoza.500"}),u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"Loading layers..."})]}):b.length>0?u.jsx(nn,{columns:{base:1,md:2,lg:3},spacing:4,children:b.map((Ee,qe)=>u.jsxs(ue,{bg:L,p:3,borderRadius:"md",border:"1px solid",borderColor:U,children:[u.jsx(Ce,{justify:"space-between",mb:2,children:u.jsxs(Ce,{children:[u.jsx(br,{"aria-label":"Toggle visibility",icon:Ee.visible?u.jsx(wo,{}):u.jsx(Jd,{}),size:"xs",variant:"ghost",colorScheme:Ee.visible?"green":"gray",onClick:()=>he(qe,!Ee.visible)}),u.jsx(ie,{fontSize:"sm",fontWeight:"500",noOfLines:1,children:Ee.name})]})}),u.jsxs(Ce,{spacing:2,children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",minW:"50px",children:"Opacity"}),u.jsxs(Sl,{value:Ee.opacity*100,onChange:et=>le(qe,et/100),min:0,max:100,size:"sm",children:[u.jsx(Cl,{bg:"gray.200",children:u.jsx(Tl,{bg:"kartoza.500"})}),u.jsx(kl,{boxSize:3})]}),u.jsxs(ie,{fontSize:"xs",color:"gray.500",minW:"30px",children:[Math.round(Ee.opacity*100),"%"]})]})]},qe))}):u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"No layers loaded"})})}),u.jsxs(ue,{flex:"1",minH:"300px",position:"relative",bg:"gray.900",children:[u.jsx(ue,{ref:s,position:"absolute",top:0,left:0,right:0,bottom:0},`cesium-container-${R}`),o&&u.jsxs(ue,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",bg:"blackAlpha.700",p:6,borderRadius:"lg",children:[u.jsx(Nn,{size:"xl",color:"kartoza.400",thickness:"4px"}),u.jsx(ie,{mt:3,color:"white",children:"Loading 3D viewer..."})]}),O&&u.jsxs(ue,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",bg:"red.600",color:"white",p:6,borderRadius:"lg",maxW:"400px",children:[u.jsx(ie,{fontWeight:"bold",mb:2,children:"Error"}),u.jsx(ie,{fontSize:"sm",children:O})]})]}),u.jsx(ue,{px:4,py:2,bg:Q,borderTop:"1px solid",borderColor:U,children:u.jsxs(Ce,{justify:"space-between",fontSize:"xs",color:"gray.500",children:[u.jsxs(ie,{children:["Connection: ",t==null?void 0:t.slice(0,8),"..."]}),u.jsxs(Ce,{spacing:4,children:[u.jsx(er,{colorScheme:m==="3d"?"green":m==="2d"?"blue":"purple",children:m==="3d"?"3D Globe":m==="2d"?"2D Map":"Columbus View"}),u.jsx(ie,{children:"Scroll to zoom, drag to pan, right-drag to rotate"})]})]})})]})}function p1e({isOpen:t,onClose:e,connectionId:r,connectionName:n}){const i=Go(),s=Pa(),[a,o]=I.useState({}),{data:d,isLoading:m}=Qr({queryKey:["contact",r],queryFn:()=>Sbe(r),enabled:t&&!!r});I.useEffect(()=>{d&&o(d)},[d]);const y=Jc({mutationFn:O=>kbe(r,O),onSuccess:()=>{s.invalidateQueries({queryKey:["contact",r]}),i({title:"Settings saved",description:"Service metadata has been updated successfully.",status:"success",duration:3e3}),e()},onError:O=>{i({title:"Error saving settings",description:O.message,status:"error",duration:5e3})}}),b=(O,A)=>{o(E=>({...E,[O]:A}))},w=()=>{y.mutate(a)};return u.jsxs(es,{isOpen:t,onClose:e,size:"4xl",scrollBehavior:"inside",children:[u.jsx(rs,{backdropFilter:"blur(4px)"}),u.jsxs(ts,{maxH:"90vh",children:[u.jsxs(f0,{bg:"linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 100%)",color:"white",borderTopRadius:"md",children:[u.jsxs(Ce,{children:[u.jsx(He,{as:Y4}),u.jsx(ie,{children:"Service Metadata"})]}),u.jsx(ie,{fontSize:"sm",fontWeight:"normal",opacity:.9,children:n})]}),u.jsx(Fs,{color:"white"}),u.jsx(gs,{py:6,children:m?u.jsxs(ft,{py:10,children:[u.jsx(Nn,{size:"xl",color:"kartoza.500"}),u.jsx(ie,{color:"gray.500",children:"Loading settings..."})]}):u.jsxs(p0,{colorScheme:"kartoza",variant:"enclosed",children:[u.jsxs(m0,{children:[u.jsx(Ys,{children:u.jsxs(Ce,{children:[u.jsx(He,{as:tF}),u.jsx(ie,{children:"Contact"})]})}),u.jsx(Ys,{children:u.jsxs(Ce,{children:[u.jsx(He,{as:BA}),u.jsx(ie,{children:"Address"})]})}),u.jsx(Ys,{children:u.jsxs(Ce,{children:[u.jsx(He,{as:Rl}),u.jsx(ie,{children:"Service"})]})})]}),u.jsxs(T1,{children:[u.jsx(ga,{children:u.jsxs(ft,{spacing:6,align:"stretch",children:[u.jsxs(ue,{children:[u.jsx(ie,{fontWeight:"bold",color:"gray.600",mb:3,children:"Contact Person"}),u.jsxs(nn,{columns:{base:1,md:2},spacing:4,children:[u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",children:"Name"}),u.jsxs(aa,{children:[u.jsx(vl,{pointerEvents:"none",children:u.jsx(He,{as:tF,color:"gray.400"})}),u.jsx(Ar,{placeholder:"John Smith",value:a.contactPerson||"",onChange:O=>b("contactPerson",O.target.value)})]})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",children:"Position"}),u.jsxs(aa,{children:[u.jsx(vl,{pointerEvents:"none",children:u.jsx(He,{as:Y4,color:"gray.400"})}),u.jsx(Ar,{placeholder:"GIS Administrator",value:a.contactPosition||"",onChange:O=>b("contactPosition",O.target.value)})]})]})]})]}),u.jsx(Fr,{}),u.jsxs(ue,{children:[u.jsx(ie,{fontWeight:"bold",color:"gray.600",mb:3,children:"Organization"}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",children:"Organization Name"}),u.jsxs(aa,{children:[u.jsx(vl,{pointerEvents:"none",children:u.jsx(He,{as:cve,color:"gray.400"})}),u.jsx(Ar,{placeholder:"Kartoza (Pty) Ltd",value:a.contactOrganization||"",onChange:O=>b("contactOrganization",O.target.value)})]})]})]}),u.jsx(Fr,{}),u.jsxs(ue,{children:[u.jsx(ie,{fontWeight:"bold",color:"gray.600",mb:3,children:"Contact Details"}),u.jsxs(nn,{columns:{base:1,md:2},spacing:4,children:[u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",children:"Email"}),u.jsxs(aa,{children:[u.jsx(vl,{pointerEvents:"none",children:u.jsx(He,{as:hve,color:"gray.400"})}),u.jsx(Ar,{type:"email",placeholder:"info@example.com",value:a.contactEmail||"",onChange:O=>b("contactEmail",O.target.value)})]})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",children:"Phone"}),u.jsxs(aa,{children:[u.jsx(vl,{pointerEvents:"none",children:u.jsx(He,{as:eF,color:"gray.400"})}),u.jsx(Ar,{placeholder:"+27 21 123 4567",value:a.contactVoice||"",onChange:O=>b("contactVoice",O.target.value)})]})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",children:"Fax"}),u.jsxs(aa,{children:[u.jsx(vl,{pointerEvents:"none",children:u.jsx(He,{as:eF,color:"gray.400"})}),u.jsx(Ar,{placeholder:"+27 21 123 4568",value:a.contactFacsimile||"",onChange:O=>b("contactFacsimile",O.target.value)})]})]})]})]})]})}),u.jsx(ga,{children:u.jsx(ft,{spacing:6,align:"stretch",children:u.jsxs(ue,{children:[u.jsx(ie,{fontWeight:"bold",color:"gray.600",mb:3,children:"Location"}),u.jsxs(nn,{columns:{base:1,md:2},spacing:4,children:[u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",children:"Address Type"}),u.jsx(Ar,{placeholder:"Work",value:a.addressType||"",onChange:O=>b("addressType",O.target.value)})]}),u.jsxs(Ot,{gridColumn:{md:"span 2"},children:[u.jsx(Pt,{fontSize:"sm",children:"Street Address"}),u.jsxs(aa,{children:[u.jsx(vl,{pointerEvents:"none",children:u.jsx(He,{as:BA,color:"gray.400"})}),u.jsx(Ar,{placeholder:"123 Main Street",value:a.address||"",onChange:O=>b("address",O.target.value)})]})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",children:"City"}),u.jsx(Ar,{placeholder:"Cape Town",value:a.addressCity||"",onChange:O=>b("addressCity",O.target.value)})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",children:"State / Province"}),u.jsx(Ar,{placeholder:"Western Cape",value:a.addressState||"",onChange:O=>b("addressState",O.target.value)})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",children:"Postal Code"}),u.jsx(Ar,{placeholder:"8001",value:a.addressPostalCode||"",onChange:O=>b("addressPostalCode",O.target.value)})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",children:"Country"}),u.jsx(Ar,{placeholder:"South Africa",value:a.addressCountry||"",onChange:O=>b("addressCountry",O.target.value)})]})]})]})})}),u.jsx(ga,{children:u.jsxs(ft,{spacing:6,align:"stretch",children:[u.jsxs(ue,{children:[u.jsx(ie,{fontWeight:"bold",color:"gray.600",mb:3,children:"Online Presence"}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",children:"Online Resource (Website)"}),u.jsxs(aa,{children:[u.jsx(vl,{pointerEvents:"none",children:u.jsx(He,{as:Rl,color:"gray.400"})}),u.jsx(Ar,{type:"url",placeholder:"https://www.example.com",value:a.onlineResource||"",onChange:O=>b("onlineResource",O.target.value)})]})]})]}),u.jsx(Fr,{}),u.jsxs(ue,{children:[u.jsx(ie,{fontWeight:"bold",color:"gray.600",mb:3,children:"Welcome Message"}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",children:"Service Welcome Message"}),u.jsx(aa,{children:u.jsx(eC,{placeholder:"Welcome to our GeoServer instance. This service provides access to...",value:a.welcome||"",onChange:O=>b("welcome",O.target.value),rows:6})}),u.jsx(ie,{fontSize:"xs",color:"gray.500",mt:1,children:"This message will be displayed on the GeoServer welcome page"})]})]})]})})]})]})}),u.jsx(qo,{borderTop:"1px",borderColor:"gray.200",children:u.jsxs(Ce,{spacing:3,children:[u.jsx(St,{variant:"ghost",onClick:e,children:"Cancel"}),u.jsx(St,{colorScheme:"kartoza",onClick:w,isLoading:y.isPending,loadingText:"Saving...",children:"Save Changes"})]})})]})]})}const m1e=So`
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
`,g1e=So`
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
`;function aF(t){if(t===0)return"0 B";const e=1024,r=["B","KB","MB","GB","TB"],n=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,n)).toFixed(1))+" "+r[n]}function y1e({data:t,width:e=80,height:r=20,color:n="#38B2AC"}){if(t.length<2)return null;const i=Math.min(...t),a=Math.max(...t)-i||1,o=t.map((d,m)=>{const y=m/(t.length-1)*e,b=r-(d-i)/a*(r-4)-2;return`${y},${b}`}).join(" ");return u.jsx("svg",{width:e,height:r,style:{display:"inline-block",marginLeft:"4px"},children:u.jsx("polyline",{points:o,fill:"none",stroke:n,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}const NA=new Map,x1e=30;function v1e(t,e){const r=NA.get(t)||[];r.push(e),r.length>x1e&&r.shift(),NA.set(t,r)}function b1e(t){return NA.get(t)||[]}const wS=new Map,_1e=6e4;function w1e({service:t,onParse:e,isParsing:r,onToggleHidden:n,isTogglingHidden:i}){const[s,a]=I.useState(null),[o,d]=I.useState(!1);I.useEffect(()=>{const A=wS.get(t.name),E=Date.now();if(A&&E-A.lastChecked<_1e){a(A.online);return}if(t.hidden){a(null);return}(async()=>{d(!0);try{const R=await gU(t.name);a(R.success),wS.set(t.name,{online:R.success,lastChecked:E})}catch{a(!1),wS.set(t.name,{online:!1,lastChecked:E})}finally{d(!1)}})()},[t.name,t.hidden]);const m=t.hidden?"gray.100":t.is_parsed?"white":"gray.50",y=t.hidden?"gray.400":s===!0?"green.400":s===!1?"red.400":t.is_parsed?"blue.400":"gray.300",b=()=>t.hidden?Jd:s===!0?em:s===!1?tC:t.is_parsed?em:Kn,w=()=>t.hidden?"gray.500":s===!0?"green.500":s===!1?"red.500":t.is_parsed?"blue.500":"gray.400",O=()=>t.hidden?"Hidden (disabled)":o?"Checking...":s===!0?"Online":s===!1?"Offline":t.is_parsed?"Schema Parsed":"Not Parsed";return u.jsxs(ue,{bg:m,borderRadius:"xl",border:"2px solid",borderColor:y,p:4,minH:"220px",position:"relative",transition:"all 0.3s ease",opacity:t.hidden?.7:1,_hover:{transform:"translateY(-2px)",boxShadow:"lg"},children:[u.jsxs(Ce,{position:"absolute",top:3,right:3,spacing:2,children:[u.jsx($r,{label:t.hidden?"Show service":"Hide service",children:u.jsx(br,{"aria-label":t.hidden?"Show":"Hide",icon:u.jsx(He,{as:t.hidden?wo:Jd}),size:"xs",variant:"ghost",colorScheme:t.hidden?"blue":"gray",onClick:()=>n(!t.hidden),isLoading:i})}),u.jsx($r,{label:O(),children:u.jsx("span",{children:o?u.jsx(Nn,{size:"sm",color:"blue.500"}):u.jsx(He,{as:b(),color:w(),boxSize:5})})})]}),u.jsxs(ft,{align:"start",spacing:3,children:[u.jsxs(Ce,{children:[u.jsx(He,{as:Ky,color:t.hidden?"gray.400":"blue.600",boxSize:6}),u.jsxs(ft,{align:"start",spacing:0,children:[u.jsx(ie,{fontWeight:"bold",fontSize:"lg",noOfLines:1,color:t.hidden?"gray.500":void 0,children:t.name}),u.jsx(ie,{fontSize:"xs",color:"gray.500",noOfLines:1,children:t.host?`${t.host}:${t.port||"5432"}`:"pg_service.conf entry"})]})]}),t.dbname&&u.jsxs(er,{colorScheme:t.hidden?"gray":"blue",fontSize:"xs",children:["Database: ",t.dbname]}),t.hidden?u.jsxs(to,{status:"info",variant:"subtle",borderRadius:"md",py:2,children:[u.jsx(ro,{boxSize:4}),u.jsx(ie,{fontSize:"sm",children:"This service is hidden"})]}):t.is_parsed?u.jsxs(nn,{columns:2,spacing:2,w:"100%",children:[u.jsxs(Ds,{size:"sm",children:[u.jsx(Rs,{fontSize:"xs",color:"gray.500",children:u.jsxs(Ce,{spacing:1,children:[u.jsx(He,{as:tm,boxSize:3}),u.jsx(ie,{children:"Status"})]})}),u.jsx(Ls,{fontSize:"md",color:s===!0?"green.600":s===!1?"red.600":"blue.600",children:s===!0?"Online":s===!1?"Offline":"Parsed"})]}),u.jsxs(Ds,{size:"sm",children:[u.jsx(Rs,{fontSize:"xs",color:"gray.500",children:u.jsxs(Ce,{spacing:1,children:[u.jsx(He,{as:Kn,boxSize:3}),u.jsx(ie,{children:"User"})]})}),u.jsx(Ls,{fontSize:"md",color:"gray.600",noOfLines:1,children:t.user||"N/A"})]})]}):u.jsx(St,{size:"sm",colorScheme:"blue",variant:"outline",leftIcon:u.jsx(Kn,{}),onClick:e,isLoading:r,loadingText:"Parsing...",w:"100%",children:"Parse Schema"}),t.sslmode&&u.jsx(Ce,{spacing:2,fontSize:"xs",color:"gray.500",w:"100%",children:u.jsxs(ie,{children:["SSL: ",t.sslmode]})})]})]})}function lF({server:t,isAlert:e=!1}){const r=t.online?"green.400":"red.400",n=e?"red.50":t.online?"white":"gray.50",i=t.online?em:tC,s=t.online?"green.500":"red.500",a=b1e(t.connectionId);return u.jsxs(ue,{bg:n,borderRadius:"xl",border:"2px solid",borderColor:r,p:4,minH:"220px",position:"relative",transition:"all 0.3s ease",_hover:{transform:"translateY(-2px)",boxShadow:"lg"},css:t.online?void 0:dc`animation: ${m1e} 2s ease-in-out infinite;`,children:[u.jsx(ue,{position:"absolute",top:3,right:3,children:u.jsx($r,{label:t.online?"Online":t.error||"Offline",children:u.jsx("span",{children:u.jsx(He,{as:i,color:s,boxSize:5})})})}),u.jsxs(ft,{align:"start",spacing:3,children:[u.jsxs(Ce,{children:[u.jsx(He,{as:gu,color:"kartoza.500",boxSize:6}),u.jsxs(ft,{align:"start",spacing:0,children:[u.jsx(ie,{fontWeight:"bold",fontSize:"lg",noOfLines:1,children:t.connectionName}),u.jsx(ie,{fontSize:"xs",color:"gray.500",noOfLines:1,children:t.url})]})]}),t.online?u.jsxs(u.Fragment,{children:[t.geoserverVersion&&u.jsxs(er,{colorScheme:"blue",fontSize:"xs",children:["GeoServer ",t.geoserverVersion]}),u.jsxs(nn,{columns:2,spacing:2,w:"100%",children:[u.jsxs(Ds,{size:"sm",children:[u.jsx(Rs,{fontSize:"xs",color:"gray.500",children:u.jsxs(Ce,{spacing:1,children:[u.jsx(He,{as:Yi,boxSize:3}),u.jsx(ie,{children:"Layers"})]})}),u.jsx(Ls,{fontSize:"xl",color:"purple.600",children:t.layerCount})]}),u.jsxs(Ds,{size:"sm",children:[u.jsx(Rs,{fontSize:"xs",color:"gray.500",children:u.jsxs(Ce,{spacing:1,children:[u.jsx(He,{as:Kn,boxSize:3}),u.jsx(ie,{children:"Stores"})]})}),u.jsx(Ls,{fontSize:"xl",color:"blue.600",children:t.dataStoreCount+t.coverageCount})]})]}),t.memoryTotal>0&&u.jsxs(ue,{w:"100%",children:[u.jsxs(Ce,{justify:"space-between",mb:1,children:[u.jsxs(Ce,{spacing:1,children:[u.jsx(He,{as:X7,boxSize:3,color:"gray.500"}),u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Memory"})]}),u.jsxs(ie,{fontSize:"xs",color:"gray.600",children:[aF(t.memoryUsed)," / ",aF(t.memoryTotal)]})]}),u.jsx(um,{value:t.memoryUsedPct,size:"sm",colorScheme:t.memoryUsedPct>80?"red":t.memoryUsedPct>60?"yellow":"green",borderRadius:"full"})]}),u.jsxs(Ce,{spacing:2,fontSize:"xs",color:"gray.500",w:"100%",children:[u.jsx(He,{as:kI,boxSize:3}),u.jsxs(ie,{children:["Response: ",t.responseTimeMs,"ms"]}),a.length>=2&&u.jsx(y1e,{data:a,width:60,height:16,color:"#38B2AC"})]})]}):u.jsx(ue,{w:"100%",children:u.jsxs(to,{status:"error",variant:"subtle",borderRadius:"md",py:2,children:[u.jsx(ro,{boxSize:4}),u.jsx(ie,{fontSize:"sm",noOfLines:2,children:t.error||"Server is offline"})]})})]})]})}function cF(){const t=I.useRef(30),e=Pa(),[r,n]=I.useState(null),[i,s]=I.useState(null),a=bt(Q=>Q.settings.showHiddenPGServices),o=bt(Q=>Q.openDialog),{data:d,isLoading:m,error:y,refetch:b,isFetching:w}=Qr({queryKey:["dashboard"],queryFn:zbe,refetchInterval:()=>t.current*1e3}),{data:O}=Qr({queryKey:["pgservices"],queryFn:AI,staleTime:3e4}),A=O==null?void 0:O.filter(Q=>a||!Q.hidden),E=async Q=>{n(Q);try{await yU(Q),e.invalidateQueries({queryKey:["pgservices"]})}catch(Y){console.error("Failed to parse service:",Y)}finally{n(null)}},$=async(Q,Y)=>{s(Q);try{await Bbe(Q,Y),wS.delete(Q),e.invalidateQueries({queryKey:["pgservices"]})}catch(Z){console.error("Failed to toggle hidden state:",Z)}finally{s(null)}};if(I.useEffect(()=>{if(d!=null&&d.servers){for(const Q of d.servers)Q.online&&v1e(Q.connectionId,Q.responseTimeMs);d.pingIntervalSecs&&d.pingIntervalSecs>0&&(t.current=d.pingIntervalSecs)}},[d]),m)return u.jsx(Sr,{h:"100%",align:"center",justify:"center",children:u.jsxs(ft,{spacing:4,children:[u.jsx(Nn,{size:"xl",color:"kartoza.500",thickness:"4px"}),u.jsx(ie,{color:"gray.500",children:"Loading server status..."})]})});if(y)return u.jsx(Sr,{h:"100%",align:"center",justify:"center",p:8,children:u.jsxs(to,{status:"error",borderRadius:"lg",children:[u.jsx(ro,{}),u.jsx(g1,{children:"Failed to load dashboard"}),u.jsx($y,{children:y.message})]})});const R=d&&d.servers.length>0,F=A&&A.length>0;if(!R&&!F)return u.jsx(Sr,{h:"100%",align:"center",justify:"center",p:8,children:u.jsxs(ft,{spacing:4,textAlign:"center",children:[u.jsx(He,{as:gu,boxSize:16,color:"gray.300"}),u.jsx(ie,{color:"gray.500",fontSize:"lg",children:"No servers configured"}),u.jsx(ie,{color:"gray.400",fontSize:"sm",children:"Add a GeoServer connection or PostgreSQL service to get started"})]})});const L=(d==null?void 0:d.servers.filter(Q=>Q.online))||[],U=(d==null?void 0:d.servers.filter(Q=>!Q.online))||[];return u.jsxs(Sr,{h:"100%",direction:"column",children:[u.jsxs(Sr,{justify:"space-between",align:"center",p:4,borderBottom:"1px solid",borderColor:"gray.200",bg:"white",flexShrink:0,children:[u.jsxs(Ce,{spacing:3,children:[u.jsx(He,{as:_I,boxSize:6,color:"kartoza.500"}),u.jsx(ie,{fontSize:"xl",fontWeight:"bold",children:"Server Dashboard"})]}),u.jsxs(Ce,{spacing:4,children:[u.jsxs(Ce,{spacing:6,display:{base:"none",md:"flex"},children:[u.jsxs(Ce,{spacing:2,children:[u.jsx(He,{as:em,color:"green.500"}),u.jsx(ie,{fontWeight:"bold",color:"green.600",children:(d==null?void 0:d.onlineCount)||0}),u.jsx(ie,{color:"gray.500",children:"Online"})]}),((d==null?void 0:d.offlineCount)||0)>0&&u.jsxs(Ce,{spacing:2,children:[u.jsx(He,{as:tC,color:"red.500"}),u.jsx(ie,{fontWeight:"bold",color:"red.600",children:(d==null?void 0:d.offlineCount)||0}),u.jsx(ie,{color:"gray.500",children:"Offline"})]}),u.jsxs(Ce,{spacing:2,children:[u.jsx(He,{as:Yi,color:"purple.500"}),u.jsx(ie,{fontWeight:"bold",color:"purple.600",children:(d==null?void 0:d.totalLayers)||0}),u.jsx(ie,{color:"gray.500",children:"Layers"})]}),F&&u.jsxs(Ce,{spacing:2,children:[u.jsx(He,{as:Ky,color:"blue.600"}),u.jsx(ie,{fontWeight:"bold",color:"blue.600",children:(A==null?void 0:A.length)||0}),u.jsx(ie,{color:"gray.500",children:"PG Services"})]}),u.jsxs(Ce,{spacing:2,children:[u.jsx(He,{as:kI,color:"gray.500"}),u.jsxs(ie,{color:"gray.500",children:[(d==null?void 0:d.pingIntervalSecs)||60,"s"]})]})]}),u.jsx($r,{label:"Settings",children:u.jsx(br,{"aria-label":"Settings",icon:u.jsx(P1,{}),variant:"ghost",colorScheme:"gray",onClick:()=>o("settings")})}),u.jsx($r,{label:"Refresh status",children:u.jsx(br,{"aria-label":"Refresh",icon:u.jsx(pf,{}),variant:"ghost",colorScheme:"kartoza",onClick:()=>b(),css:w?dc`animation: ${g1e} 1s linear infinite;`:void 0})})]})]}),u.jsx(Sr,{flex:1,overflowY:"auto",p:6,justify:"center",align:((d==null?void 0:d.servers.length)||0)+((A==null?void 0:A.length)||0)<=3?"center":"flex-start",children:u.jsxs(ft,{spacing:6,maxW:"1400px",w:"100%",children:[R&&u.jsxs(ue,{w:"100%",children:[u.jsxs(Ce,{spacing:2,mb:3,justify:"center",children:[u.jsx(He,{as:gu,color:"kartoza.500"}),u.jsxs(ie,{fontWeight:"bold",color:"gray.700",children:["GeoServer Connections (",(d==null?void 0:d.servers.length)||0,")"]})]}),U.length>0&&u.jsxs(ue,{mb:4,children:[u.jsxs(Ce,{spacing:2,mb:2,justify:"center",children:[u.jsx(He,{as:q7,color:"red.500",boxSize:4}),u.jsxs(ie,{fontSize:"sm",fontWeight:"medium",color:"red.600",children:["Requires Attention (",U.length,")"]})]}),u.jsx(Sr,{wrap:"wrap",gap:4,justify:"center",children:U.map(Q=>u.jsx(ue,{w:{base:"100%",md:"340px"},children:u.jsx(lF,{server:Q,isAlert:!0})},Q.connectionId))})]}),L.length>0&&u.jsx(Sr,{wrap:"wrap",gap:4,justify:"center",children:L.map(Q=>u.jsx(ue,{w:{base:"100%",md:"340px"},children:u.jsx(lF,{server:Q})},Q.connectionId))})]}),F&&u.jsxs(ue,{w:"100%",children:[u.jsxs(Ce,{spacing:2,mb:3,justify:"center",children:[u.jsx(He,{as:Ky,color:"blue.600"}),u.jsxs(ie,{fontWeight:"bold",color:"gray.700",children:["PostgreSQL Services (",(A==null?void 0:A.length)||0,")"]})]}),u.jsx(Sr,{wrap:"wrap",gap:4,justify:"center",children:A==null?void 0:A.map(Q=>u.jsx(ue,{w:{base:"100%",md:"340px"},children:u.jsx(w1e,{service:Q,onParse:()=>E(Q.name),isParsing:r===Q.name,onToggleHidden:Y=>$(Q.name,Y),isTogglingHidden:i===Q.name})},Q.name))})]})]})})]})}function S1e(){const t=Er(s=>s.selectedNode),e=bt(s=>s.activePreview),r=bt(s=>s.previewMode),n=bt(s=>s.setPreview),i=I.useRef(t);if(I.useEffect(()=>{const s=i.current;if(i.current=t,!e||!t||(s==null?void 0:s.id)===t.id||!["layer","layergroup","datastore","coveragestore"].includes(t.type))return;(async()=>{try{const d=t.type==="coveragestore"?"raster":t.type==="layergroup"?"group":"vector",{url:m}=await el({connId:t.connectionId,workspace:t.workspace,layerName:t.name,storeName:t.type==="datastore"||t.type==="coveragestore"?t.name:void 0,storeType:t.type==="datastore"||t.type==="coveragestore"?t.type:void 0,layerType:d});n({url:m,layerName:t.name,workspace:t.workspace,connectionId:t.connectionId,storeName:t.type==="datastore"||t.type==="coveragestore"?t.name:void 0,storeType:t.type==="datastore"||t.type==="coveragestore"?t.type:void 0,layerType:d})}catch(d){bt.getState().setError(d.message)}})()},[t,e,n]),e)return u.jsx(ue,{flex:"1",display:"flex",flexDirection:"column",minH:"0",children:r==="3d"?u.jsx(f1e,{connectionId:e.connectionId,workspace:e.workspace,layerName:e.layerName,nodeType:e.nodeType||(e.layerType==="group"?"layergroup":"layer"),onClose:()=>n(null)},`3d-${e.workspace}:${e.layerName}`):u.jsx(d1e,{previewUrl:e.url,layerName:e.layerName,workspace:e.workspace,connectionId:e.connectionId,storeName:e.storeName,storeType:e.storeType,layerType:e.layerType,onClose:()=>n(null)},`2d-${e.workspace}:${e.layerName}:${e.url}`)});if(!t)return u.jsx(cF,{});switch(t.type){case"connection":return u.jsx(E1e,{connectionId:t.connectionId});case"workspace":return u.jsx(z1e,{connectionId:t.connectionId,workspace:t.workspace});case"datastores":return u.jsx(k1e,{connectionId:t.connectionId,workspace:t.workspace});case"coveragestores":return u.jsx(C1e,{connectionId:t.connectionId,workspace:t.workspace});case"layers":return u.jsx(T1e,{connectionId:t.connectionId,workspace:t.workspace});case"styles":return u.jsx(P1e,{connectionId:t.connectionId,workspace:t.workspace});case"layergroups":return u.jsx(j1e,{connectionId:t.connectionId,workspace:t.workspace});case"datastore":case"coveragestore":return u.jsx(M1e,{connectionId:t.connectionId,workspace:t.workspace,storeName:t.name,storeType:t.type});case"layer":return u.jsx(I1e,{connectionId:t.connectionId,workspace:t.workspace,layerName:t.name});case"style":return u.jsx(R1e,{connectionId:t.connectionId,workspace:t.workspace,styleName:t.name});case"layergroup":return u.jsx(D1e,{connectionId:t.connectionId,workspace:t.workspace,groupName:t.name});default:return u.jsx(cF,{})}}function k1e({connectionId:t,workspace:e}){const r=bt(s=>s.openDialog),n=dr("white","gray.800"),{data:i}=Qr({queryKey:["datastores",t,e],queryFn:()=>OI(t,e)});return u.jsxs(ft,{spacing:6,align:"stretch",children:[u.jsx(Jr,{bg:"linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 100%)",color:"white",children:u.jsx(un,{py:8,px:6,children:u.jsxs(Sr,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(Ce,{spacing:4,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(He,{as:Kn,boxSize:8})}),u.jsxs(ft,{align:"start",spacing:0,children:[u.jsx(bn,{size:"lg",children:"Data Stores"}),u.jsxs(ie,{opacity:.9,children:["Workspace: ",e]})]})]}),u.jsx(sl,{}),u.jsx(ft,{align:"end",spacing:2,children:u.jsxs(Ds,{textAlign:"right",children:[u.jsx(Ls,{fontSize:"3xl",children:(i==null?void 0:i.length)??0}),u.jsx(Rs,{color:"whiteAlpha.800",children:"Total Stores"})]})})]})})}),u.jsxs(nn,{columns:{base:1,md:2},spacing:4,children:[u.jsx(St,{size:"lg",variant:"accent",leftIcon:u.jsx(fs,{}),onClick:()=>r("datastore",{mode:"create",data:{connectionId:t,workspace:e}}),py:8,children:"Create New Data Store"}),u.jsx(St,{size:"lg",variant:"outline",leftIcon:u.jsx(xu,{}),onClick:()=>r("upload",{mode:"create",data:{connectionId:t,workspace:e}}),py:8,children:"Upload Shapefile / GeoPackage"})]}),i&&i.length>0&&u.jsx(Jr,{bg:n,children:u.jsx(un,{children:u.jsxs(ft,{align:"stretch",spacing:4,children:[u.jsx(bn,{size:"sm",color:"gray.600",children:"Existing Data Stores"}),u.jsx(Fr,{}),u.jsx(nn,{columns:{base:1,md:2,lg:3},spacing:4,children:i.map(s=>u.jsx(wU,{name:s.name,type:s.type||"Unknown",enabled:s.enabled,icon:Kn,connectionId:t,workspace:e,storeType:"datastore"},s.name))})]})})})]})}function C1e({connectionId:t,workspace:e}){const r=bt(s=>s.openDialog),n=dr("white","gray.800"),{data:i}=Qr({queryKey:["coveragestores",t,e],queryFn:()=>PI(t,e)});return u.jsxs(ft,{spacing:6,align:"stretch",children:[u.jsx(Jr,{bg:"linear-gradient(135deg, #D4922A 0%, #E8A331 50%, #F0B84D 100%)",color:"white",children:u.jsx(un,{py:8,px:6,children:u.jsxs(Sr,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(Ce,{spacing:4,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(He,{as:mu,boxSize:8})}),u.jsxs(ft,{align:"start",spacing:0,children:[u.jsx(bn,{size:"lg",children:"Coverage Stores"}),u.jsxs(ie,{opacity:.9,children:["Workspace: ",e]})]})]}),u.jsx(sl,{}),u.jsx(ft,{align:"end",spacing:2,children:u.jsxs(Ds,{textAlign:"right",children:[u.jsx(Ls,{fontSize:"3xl",children:(i==null?void 0:i.length)??0}),u.jsx(Rs,{color:"whiteAlpha.800",children:"Total Stores"})]})})]})})}),u.jsxs(nn,{columns:{base:1,md:2},spacing:4,children:[u.jsx(St,{size:"lg",variant:"accent",leftIcon:u.jsx(fs,{}),onClick:()=>r("coveragestore",{mode:"create",data:{connectionId:t,workspace:e}}),py:8,children:"Create New Coverage Store"}),u.jsx(St,{size:"lg",variant:"outline",leftIcon:u.jsx(xu,{}),onClick:()=>r("upload",{mode:"create",data:{connectionId:t,workspace:e}}),py:8,children:"Upload GeoTIFF"})]}),i&&i.length>0&&u.jsx(Jr,{bg:n,children:u.jsx(un,{children:u.jsxs(ft,{align:"stretch",spacing:4,children:[u.jsx(bn,{size:"sm",color:"gray.600",children:"Existing Coverage Stores"}),u.jsx(Fr,{}),u.jsx(nn,{columns:{base:1,md:2,lg:3},spacing:4,children:i.map(s=>u.jsx(wU,{name:s.name,type:s.type||"GeoTIFF",enabled:s.enabled,icon:mu,connectionId:t,workspace:e,storeType:"coveragestore"},s.name))})]})})})]})}function T1e({connectionId:t,workspace:e}){const r=bt(s=>s.openDialog),n=dr("white","gray.800"),{data:i}=Qr({queryKey:["layers",t,e],queryFn:()=>j1(t,e)});return u.jsxs(ft,{spacing:6,align:"stretch",children:[u.jsx(Jr,{bg:"linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 100%)",color:"white",children:u.jsx(un,{py:8,px:6,children:u.jsxs(Sr,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(Ce,{spacing:4,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(He,{as:Yi,boxSize:8})}),u.jsxs(ft,{align:"start",spacing:0,children:[u.jsx(bn,{size:"lg",children:"Layers"}),u.jsxs(ie,{opacity:.9,children:["Workspace: ",e]})]})]}),u.jsx(sl,{}),u.jsx(ft,{align:"end",spacing:2,children:u.jsxs(Ds,{textAlign:"right",children:[u.jsx(Ls,{fontSize:"3xl",children:(i==null?void 0:i.length)??0}),u.jsx(Rs,{color:"whiteAlpha.800",children:"Published Layers"})]})})]})})}),u.jsx(St,{size:"lg",variant:"accent",leftIcon:u.jsx(xu,{}),onClick:()=>r("upload",{mode:"create",data:{connectionId:t,workspace:e}}),py:8,children:"Upload New Layer Data"}),i&&i.length>0&&u.jsx(Jr,{bg:n,children:u.jsx(un,{children:u.jsxs(ft,{align:"stretch",spacing:4,children:[u.jsx(bn,{size:"sm",color:"gray.600",children:"Published Layers"}),u.jsx(Fr,{}),u.jsx(nn,{columns:{base:1,md:2,lg:3},spacing:4,children:i.map(s=>u.jsx(A1e,{name:s.name,connectionId:t,workspace:e,enabled:s.enabled},s.name))})]})})})]})}function O1e({connectionId:t,workspace:e,styleName:r,size:n=24}){const[i,s]=I.useState(!1),o=Ks(w=>w.connections).find(w=>w.id===t),{data:d}=Qr({queryKey:["layers",t,e],queryFn:()=>j1(t,e),staleTime:6e4}),m=d==null?void 0:d.find(w=>w.defaultStyle===r);if(!o||i||!m)return u.jsx(He,{as:Bo,color:"pink.500",boxSize:`${n}px`});const b=`${o.url.replace(/\/rest\/?$/,"")}/${e}/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetLegendGraphic&LAYER=${e}:${m.name}&STYLE=${r}&FORMAT=image/png&WIDTH=${n}&HEIGHT=${n}&LEGEND_OPTIONS=forceLabels:off;fontAntiAliasing:true`;return u.jsx(ue,{as:"img",src:b,alt:r,w:`${n}px`,h:`${n}px`,minW:`${n}px`,minH:`${n}px`,borderRadius:"sm",objectFit:"contain",bg:"white",border:"1px solid",borderColor:"gray.200",onError:()=>s(!0)})}function P1e({connectionId:t,workspace:e}){const r=bt(s=>s.openDialog),n=dr("white","gray.800"),{data:i}=Qr({queryKey:["styles",t,e],queryFn:()=>jI(t,e)});return u.jsxs(ft,{spacing:6,align:"stretch",children:[u.jsx(Jr,{bg:"linear-gradient(135deg, #5BB5E8 0%, #3B9DD9 100%)",color:"white",children:u.jsx(un,{py:8,px:6,children:u.jsxs(Sr,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(Ce,{spacing:4,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(He,{as:gc,boxSize:8})}),u.jsxs(ft,{align:"start",spacing:0,children:[u.jsx(bn,{size:"lg",children:"Styles"}),u.jsxs(ie,{opacity:.9,children:["Workspace: ",e]})]})]}),u.jsx(sl,{}),u.jsx(ft,{align:"end",spacing:2,children:u.jsxs(Ds,{textAlign:"right",children:[u.jsx(Ls,{fontSize:"3xl",children:(i==null?void 0:i.length)??0}),u.jsx(Rs,{color:"whiteAlpha.800",children:"Total Styles"})]})})]})})}),u.jsxs(Ce,{spacing:4,children:[u.jsx(St,{size:"lg",variant:"accent",leftIcon:u.jsx(fs,{}),onClick:()=>r("style",{mode:"create",data:{connectionId:t,workspace:e}}),py:8,flex:1,children:"Create Style"}),u.jsx(St,{size:"lg",variant:"outline",leftIcon:u.jsx(xu,{}),onClick:()=>r("upload",{mode:"create",data:{connectionId:t,workspace:e}}),py:8,flex:1,children:"Upload SLD / CSS"})]}),i&&i.length>0&&u.jsx(Jr,{bg:n,children:u.jsx(un,{children:u.jsxs(ft,{align:"stretch",spacing:4,children:[u.jsx(bn,{size:"sm",color:"gray.600",children:"Existing Styles"}),u.jsx(Fr,{}),u.jsx(nn,{columns:{base:1,md:2,lg:3},spacing:4,children:i.map(s=>u.jsx(Jr,{variant:"outline",size:"sm",cursor:"pointer",_hover:{shadow:"md",borderColor:"kartoza.300"},transition:"all 0.2s",onClick:()=>r("style",{mode:"edit",data:{connectionId:t,workspace:e,name:s.name}}),children:u.jsx(un,{py:3,px:4,children:u.jsxs(Ce,{children:[u.jsx(O1e,{connectionId:t,workspace:e,styleName:s.name,size:24}),u.jsx(ie,{fontWeight:"medium",children:s.name}),s.format&&u.jsx(er,{colorScheme:"blue",size:"sm",children:s.format})]})})},s.name))})]})})})]})}function j1e({connectionId:t,workspace:e}){const r=dr("white","gray.800"),n=bt(s=>s.openDialog),{data:i}=Qr({queryKey:["layergroups",t,e],queryFn:()=>fU(t,e)});return u.jsxs(ft,{spacing:6,align:"stretch",children:[u.jsx(Jr,{bg:"linear-gradient(135deg, #1B6B9B 0%, #155a84 100%)",color:"white",children:u.jsx(un,{py:8,px:6,children:u.jsxs(Sr,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(Ce,{spacing:4,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(He,{as:ef,boxSize:8})}),u.jsxs(ft,{align:"start",spacing:0,children:[u.jsx(bn,{size:"lg",children:"Layer Groups"}),u.jsxs(ie,{opacity:.9,children:["Workspace: ",e]})]})]}),u.jsx(sl,{}),u.jsx(ft,{align:"end",spacing:2,children:u.jsxs(Ds,{textAlign:"right",children:[u.jsx(Ls,{fontSize:"3xl",children:(i==null?void 0:i.length)??0}),u.jsx(Rs,{color:"whiteAlpha.800",children:"Total Groups"})]})})]})})}),u.jsx(St,{size:"lg",variant:"accent",leftIcon:u.jsx(fs,{}),py:8,onClick:()=>n("layergroup",{mode:"create",data:{connectionId:t,workspace:e}}),children:"Create Layer Group"}),i&&i.length>0&&u.jsx(Jr,{bg:r,children:u.jsx(un,{children:u.jsxs(ft,{align:"stretch",spacing:4,children:[u.jsx(bn,{size:"sm",color:"gray.600",children:"Existing Layer Groups"}),u.jsx(Fr,{}),u.jsx(nn,{columns:{base:1,md:2,lg:3},spacing:4,children:i.map(s=>u.jsx(Jr,{variant:"outline",size:"sm",children:u.jsx(un,{py:3,px:4,children:u.jsxs(Ce,{children:[u.jsx(He,{as:ef,color:"kartoza.500"}),u.jsx(ie,{fontWeight:"medium",children:s.name}),s.mode&&u.jsx(er,{colorScheme:"purple",size:"sm",children:s.mode})]})})},s.name))})]})})})]})}function wU({name:t,type:e,enabled:r,icon:n,connectionId:i,workspace:s,storeType:a}){const o=bt(m=>m.setPreview),d=async()=>{try{const{url:m}=await el({connId:i,workspace:s,layerName:t,storeName:t,storeType:a,layerType:a==="coveragestore"?"raster":"vector"});o({url:m,layerName:t,workspace:s,connectionId:i,storeName:t,storeType:a,layerType:a==="coveragestore"?"raster":"vector"})}catch(m){bt.getState().setError(m.message)}};return u.jsx(Jr,{variant:"outline",size:"sm",_hover:{shadow:"md"},transition:"all 0.2s",children:u.jsx(un,{py:4,px:4,children:u.jsxs(ft,{align:"stretch",spacing:3,children:[u.jsxs(Ce,{justify:"space-between",children:[u.jsxs(Ce,{children:[u.jsx(He,{as:n,color:"kartoza.500",boxSize:5}),u.jsx(ie,{fontWeight:"medium",noOfLines:1,children:t})]}),u.jsx(er,{colorScheme:r?"green":"gray",size:"sm",children:r?"Enabled":"Disabled"})]}),u.jsx(ie,{fontSize:"xs",color:"gray.500",children:e}),u.jsx(St,{size:"sm",variant:"outline",leftIcon:u.jsx(wo,{}),onClick:d,children:"Preview"})]})})})}function A1e({name:t,connectionId:e,workspace:r,enabled:n}){const i=bt(o=>o.setPreview),{data:s}=Qr({queryKey:["layer",e,r,t],queryFn:()=>uU(e,r,t)}),a=async()=>{try{const{url:o}=await el({connId:e,workspace:r,layerName:t,storeName:s==null?void 0:s.store,storeType:s==null?void 0:s.storeType,layerType:(s==null?void 0:s.storeType)==="coveragestore"?"raster":"vector"});i({url:o,layerName:t,workspace:r,connectionId:e,storeName:s==null?void 0:s.store,storeType:s==null?void 0:s.storeType,layerType:(s==null?void 0:s.storeType)==="coveragestore"?"raster":"vector"})}catch(o){bt.getState().setError(o.message)}};return u.jsx(Jr,{variant:"outline",size:"sm",_hover:{shadow:"md"},transition:"all 0.2s",children:u.jsx(un,{py:4,px:4,children:u.jsxs(ft,{align:"stretch",spacing:3,children:[u.jsxs(Ce,{justify:"space-between",children:[u.jsxs(Ce,{children:[u.jsx(He,{as:Yi,color:"kartoza.500",boxSize:5}),u.jsx(ie,{fontWeight:"medium",noOfLines:1,children:t})]}),u.jsx(er,{colorScheme:n?"green":"gray",size:"sm",children:n?"Enabled":"Disabled"})]}),(s==null?void 0:s.defaultStyle)&&u.jsxs(ie,{fontSize:"xs",color:"gray.500",children:["Style: ",s.defaultStyle]}),u.jsx(St,{size:"sm",colorScheme:"kartoza",leftIcon:u.jsx(yc,{}),onClick:a,children:"Preview on Map"})]})})})}function E1e({connectionId:t}){const r=Ks(d=>d.connections).find(d=>d.id===t),n=bt(d=>d.openDialog),i=dr("white","gray.800"),s=Qp(),{data:a}=Qr({queryKey:["serverInfo",t],queryFn:()=>Zve(t)}),{data:o}=Qr({queryKey:["workspaces",t],queryFn:()=>iU(t)});return r?u.jsxs(ft,{spacing:6,align:"stretch",children:[u.jsx(Jr,{bg:"linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 100%)",color:"white",children:u.jsx(un,{py:8,px:6,children:u.jsxs(Sr,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(Ce,{spacing:4,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(He,{as:gu,boxSize:8})}),u.jsxs(ft,{align:"start",spacing:0,children:[u.jsx(bn,{size:"lg",children:r.name}),u.jsx(ie,{opacity:.9,children:r.url})]})]}),u.jsx(sl,{}),u.jsxs(Ce,{children:[u.jsx(St,{variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(P1,{}),onClick:s.onOpen,children:"Service Metadata"}),u.jsx(er,{colorScheme:"green",fontSize:"md",px:4,py:2,children:"Connected"})]})]})})}),u.jsx(p1e,{isOpen:s.isOpen,onClose:s.onClose,connectionId:t,connectionName:r.name}),u.jsxs(nn,{columns:{base:1,md:3},spacing:4,children:[u.jsx(Jr,{bg:i,children:u.jsx(un,{children:u.jsxs(Ds,{children:[u.jsx(Rs,{children:"Workspaces"}),u.jsx(Ls,{color:"kartoza.700",children:(o==null?void 0:o.length)??0}),u.jsx(ay,{children:"Total workspaces"})]})})}),a&&u.jsxs(u.Fragment,{children:[u.jsx(Jr,{bg:i,children:u.jsx(un,{children:u.jsxs(Ds,{children:[u.jsx(Rs,{children:"GeoServer"}),u.jsx(Ls,{color:"kartoza.700",fontSize:"xl",children:a.GeoServerVersion}),u.jsx(ay,{children:"Version"})]})})}),u.jsx(Jr,{bg:i,children:u.jsx(un,{children:u.jsxs(Ds,{children:[u.jsx(Rs,{children:"GeoTools"}),u.jsx(Ls,{color:"kartoza.700",fontSize:"xl",children:a.GeoToolsVersion}),u.jsx(ay,{children:"Version"})]})})})]})]}),u.jsxs(nn,{columns:{base:1,md:2},spacing:4,children:[u.jsx(St,{size:"lg",variant:"accent",leftIcon:u.jsx(fs,{}),onClick:()=>n("workspace",{mode:"create",data:{connectionId:t}}),py:8,children:"Create New Workspace"}),u.jsx(St,{size:"lg",variant:"outline",leftIcon:u.jsx(xu,{}),onClick:()=>n("upload",{mode:"create"}),py:8,children:"Upload Data"})]})]}):null}function z1e({connectionId:t,workspace:e}){const r=dr("white","gray.800"),n=bt(d=>d.openDialog),{data:i}=Qr({queryKey:["workspace",t,e],queryFn:()=>sU(t,e)}),{data:s}=Qr({queryKey:["datastores",t,e],queryFn:()=>OI(t,e)}),{data:a}=Qr({queryKey:["coveragestores",t,e],queryFn:()=>PI(t,e)}),{data:o}=Qr({queryKey:["layers",t,e],queryFn:()=>j1(t,e)});return u.jsxs(ft,{spacing:6,align:"stretch",children:[u.jsx(Jr,{bg:"linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 100%)",color:"white",children:u.jsx(un,{py:8,px:6,children:u.jsxs(Sr,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(Ce,{spacing:4,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(He,{as:uh,boxSize:8})}),u.jsxs(ft,{align:"start",spacing:1,children:[u.jsx(bn,{size:"lg",children:e}),u.jsxs(Ce,{children:[(i==null?void 0:i.default)&&u.jsx(er,{colorScheme:"blue",children:"Default"}),(i==null?void 0:i.isolated)&&u.jsx(er,{colorScheme:"purple",children:"Isolated"}),(i==null?void 0:i.enabled)&&u.jsx(er,{colorScheme:"green",children:"Enabled"})]})]})]}),u.jsx(sl,{}),u.jsx(St,{variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},onClick:()=>n("workspace",{mode:"edit",data:{connectionId:t,workspace:e}}),children:"Edit Workspace"})]})})}),u.jsxs(nn,{columns:{base:1,md:3},spacing:4,children:[u.jsx(Jr,{bg:r,variant:"elevated",cursor:"pointer",children:u.jsx(un,{children:u.jsxs(Ds,{children:[u.jsxs(Ce,{children:[u.jsx(He,{as:Kn,color:"kartoza.500",boxSize:6}),u.jsx(Rs,{children:"Data Stores"})]}),u.jsx(Ls,{color:"kartoza.700",children:(s==null?void 0:s.length)??0})]})})}),u.jsx(Jr,{bg:r,variant:"elevated",cursor:"pointer",children:u.jsx(un,{children:u.jsxs(Ds,{children:[u.jsxs(Ce,{children:[u.jsx(He,{as:mu,color:"accent.400",boxSize:6}),u.jsx(Rs,{children:"Coverage Stores"})]}),u.jsx(Ls,{color:"kartoza.700",children:(a==null?void 0:a.length)??0})]})})}),u.jsx(Jr,{bg:r,variant:"elevated",cursor:"pointer",children:u.jsx(un,{children:u.jsxs(Ds,{children:[u.jsxs(Ce,{children:[u.jsx(He,{as:Yi,color:"kartoza.500",boxSize:6}),u.jsx(Rs,{children:"Layers"})]}),u.jsx(Ls,{color:"kartoza.700",children:(o==null?void 0:o.length)??0})]})})})]}),u.jsx(Jr,{bg:r,children:u.jsx(un,{children:u.jsxs(ft,{align:"stretch",spacing:4,children:[u.jsx(bn,{size:"sm",color:"gray.600",children:"Quick Actions"}),u.jsx(Fr,{}),u.jsxs(nn,{columns:{base:1,md:3},spacing:4,children:[u.jsx(St,{variant:"accent",leftIcon:u.jsx(xu,{}),onClick:()=>n("upload",{mode:"create",data:{connectionId:t,workspace:e}}),children:"Upload Data"}),u.jsx(St,{variant:"outline",leftIcon:u.jsx(fs,{}),onClick:()=>n("datastore",{mode:"create",data:{connectionId:t,workspace:e}}),children:"New Data Store"}),u.jsx(St,{variant:"outline",leftIcon:u.jsx(fs,{}),onClick:()=>n("coveragestore",{mode:"create",data:{connectionId:t,workspace:e}}),children:"New Coverage Store"})]})]})})}),i&&u.jsx(Jr,{bg:r,children:u.jsx(un,{children:u.jsxs(ft,{align:"start",spacing:3,children:[u.jsx(bn,{size:"sm",color:"gray.600",children:"OGC Services"}),u.jsx(Fr,{}),u.jsxs(Ce,{wrap:"wrap",gap:2,children:[u.jsx(er,{colorScheme:i.wmsEnabled?"green":"gray",px:3,py:1,children:"WMS"}),u.jsx(er,{colorScheme:i.wfsEnabled?"green":"gray",px:3,py:1,children:"WFS"}),u.jsx(er,{colorScheme:i.wcsEnabled?"green":"gray",px:3,py:1,children:"WCS"}),u.jsx(er,{colorScheme:i.wmtsEnabled?"green":"gray",px:3,py:1,children:"WMTS"}),u.jsx(er,{colorScheme:i.wpsEnabled?"green":"gray",px:3,py:1,children:"WPS"})]})]})})})]})}function M1e({connectionId:t,workspace:e,storeName:r,storeType:n}){const i=dr("white","gray.800"),s=bt(y=>y.setPreview),a=bt(y=>y.openDialog),o=n==="datastore",{data:d}=Qr({queryKey:[n+"s",t,e,r],queryFn:()=>o?oU(t,e,r):cU(t,e,r)}),m=async()=>{try{const{url:y}=await el({connId:t,workspace:e,layerName:r,storeName:r,storeType:n,layerType:o?"vector":"raster"});s({url:y,layerName:r,workspace:e,connectionId:t,storeName:r,storeType:n,layerType:o?"vector":"raster"})}catch(y){bt.getState().setError(y.message)}};return u.jsxs(ft,{spacing:6,align:"stretch",children:[u.jsx(Jr,{bg:o?"linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 100%)":"linear-gradient(135deg, #D4922A 0%, #E8A331 100%)",color:"white",children:u.jsx(un,{py:8,px:6,children:u.jsxs(Sr,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(Ce,{spacing:4,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(He,{as:o?Kn:mu,boxSize:8})}),u.jsxs(ft,{align:"start",spacing:1,children:[u.jsx(bn,{size:"lg",children:r}),u.jsxs(Ce,{children:[u.jsx(er,{colorScheme:o?"blue":"orange",children:o?"Data Store":"Coverage Store"}),(d==null?void 0:d.enabled)&&u.jsx(er,{colorScheme:"green",children:"Enabled"})]})]})]}),u.jsx(sl,{}),u.jsxs(Ce,{wrap:"wrap",gap:2,children:[u.jsx(St,{variant:"solid",bg:"whiteAlpha.200",color:"white",_hover:{bg:"whiteAlpha.300"},leftIcon:u.jsx(yc,{}),onClick:m,children:"Preview on Map"}),u.jsx(St,{variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(gc,{}),onClick:()=>a(n,{mode:"edit",data:{connectionId:t,workspace:e,storeName:r}}),children:"Edit Store"})]})]})})}),u.jsx(Jr,{bg:i,children:u.jsx(un,{children:u.jsxs(ft,{align:"start",spacing:3,children:[u.jsx(bn,{size:"sm",color:"gray.600",children:"Store Details"}),u.jsx(Fr,{}),u.jsxs(nn,{columns:2,spacing:4,w:"100%",children:[u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Workspace"}),u.jsx(ie,{fontWeight:"medium",children:e})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Type"}),u.jsx(ie,{fontWeight:"medium",children:(d==null?void 0:d.type)||"Unknown"})]})]})]})})})]})}function I1e({connectionId:t,workspace:e,layerName:r}){const n=dr("white","gray.800"),i=bt(y=>y.setPreview),s=bt(y=>y.openDialog),{data:a}=Qr({queryKey:["layer",t,e,r],queryFn:()=>uU(t,e,r)}),o=async()=>{try{const{url:y}=await el({connId:t,workspace:e,layerName:r,storeName:a==null?void 0:a.store,storeType:a==null?void 0:a.storeType,layerType:(a==null?void 0:a.storeType)==="coveragestore"?"raster":"vector"});i({url:y,layerName:r,workspace:e,connectionId:t,storeName:a==null?void 0:a.store,storeType:a==null?void 0:a.storeType,layerType:(a==null?void 0:a.storeType)==="coveragestore"?"raster":"vector"})}catch(y){bt.getState().setError(y.message)}},d=()=>{s("info",{mode:"view",title:"Tile Cache",data:{connectionId:t,workspace:e,layerName:r}})},m=async()=>{try{const{url:y}=await el({connId:t,workspace:e,layerName:r,storeName:a==null?void 0:a.store,storeType:a==null?void 0:a.storeType,layerType:(a==null?void 0:a.storeType)==="coveragestore"?"raster":"vector",useCache:!0,gridSet:"EPSG:900913",tileFormat:"image/png"});i({url:y,layerName:r,workspace:e,connectionId:t,storeName:a==null?void 0:a.store,storeType:a==null?void 0:a.storeType,layerType:(a==null?void 0:a.storeType)==="coveragestore"?"raster":"vector"})}catch(y){bt.getState().setError(y.message)}};return u.jsxs(ft,{spacing:6,align:"stretch",children:[u.jsx(Jr,{bg:"linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 100%)",color:"white",children:u.jsx(un,{py:8,px:6,children:u.jsxs(Sr,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(Ce,{spacing:4,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(He,{as:Yi,boxSize:8})}),u.jsxs(ft,{align:"start",spacing:1,children:[u.jsx(bn,{size:"lg",children:r}),u.jsxs(Ce,{children:[u.jsx(er,{colorScheme:"teal",children:"Layer"}),(a==null?void 0:a.enabled)&&u.jsx(er,{colorScheme:"green",children:"Enabled"}),(a==null?void 0:a.advertised)&&u.jsx(er,{colorScheme:"blue",children:"Advertised"})]})]})]}),u.jsx(sl,{}),u.jsxs(Ce,{wrap:"wrap",gap:2,children:[u.jsx(St,{size:"lg",variant:"accent",leftIcon:u.jsx(yc,{}),onClick:o,children:"Preview (WMS)"}),u.jsx(St,{size:"lg",variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(yc,{}),onClick:m,children:"Preview Cache"}),u.jsx(St,{size:"lg",variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(Kn,{}),onClick:d,children:"Manage Cache"}),u.jsx(St,{size:"lg",variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(gc,{}),onClick:()=>s("layer",{mode:"edit",data:{connectionId:t,workspace:e,layerName:r}}),children:"Edit Layer"})]})]})})}),a&&u.jsx(Jr,{bg:n,children:u.jsx(un,{children:u.jsxs(ft,{align:"start",spacing:3,children:[u.jsx(bn,{size:"sm",color:"gray.600",children:"Layer Configuration"}),u.jsx(Fr,{}),u.jsxs(nn,{columns:{base:1,md:2},spacing:4,w:"100%",children:[u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Workspace"}),u.jsx(ie,{fontWeight:"medium",children:e})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Store"}),u.jsx(ie,{fontWeight:"medium",children:a.store||"Unknown"})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Store Type"}),u.jsx(ie,{fontWeight:"medium",children:a.storeType||"Unknown"})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Default Style"}),u.jsx(ie,{fontWeight:"medium",children:a.defaultStyle||"None"})]})]})]})})}),u.jsx(Jr,{bg:n,children:u.jsx(un,{children:u.jsxs(ft,{align:"stretch",spacing:4,children:[u.jsx(bn,{size:"sm",color:"gray.600",children:"Tile Cache"}),u.jsx(Fr,{}),u.jsx(ie,{fontSize:"sm",color:"gray.600",children:"Manage tile cache for this layer. Seed tiles for faster map viewing, or truncate the cache to regenerate tiles."}),u.jsx(nn,{columns:{base:1,md:2},spacing:4,children:u.jsx(St,{colorScheme:"kartoza",leftIcon:u.jsx(Kn,{}),onClick:d,children:"Seed / Truncate Cache"})})]})})})]})}function D1e({connectionId:t,workspace:e,groupName:r}){const n=dr("white","gray.800"),i=bt(b=>b.setPreview),s=bt(b=>b.openDialog),{data:a}=Qr({queryKey:["layergroup",t,e,r],queryFn:()=>pU(t,e,r)}),o=async()=>{try{const{url:b}=await el({connId:t,workspace:e,layerName:r,layerType:"group"});i({url:b,layerName:r,workspace:e,connectionId:t,layerType:"group"})}catch(b){bt.getState().setError(b.message)}},d=()=>{s("info",{mode:"view",title:"Tile Cache",data:{connectionId:t,workspace:e,layerName:r}})},m=async()=>{try{const{url:b}=await el({connId:t,workspace:e,layerName:r,layerType:"group",useCache:!0,gridSet:"EPSG:900913",tileFormat:"image/png"});i({url:b,layerName:r,workspace:e,connectionId:t,layerType:"group"})}catch(b){bt.getState().setError(b.message)}},y=()=>{s("layergroup",{mode:"edit",data:{connectionId:t,workspace:e,name:r,layers:(a==null?void 0:a.layers.map(b=>b.name))||[],mode:a==null?void 0:a.mode,title:a==null?void 0:a.title}})};return u.jsxs(ft,{spacing:6,align:"stretch",children:[u.jsx(Jr,{bg:"linear-gradient(135deg, #1B6B9B 0%, #155a84 100%)",color:"white",children:u.jsx(un,{py:8,px:6,children:u.jsxs(Sr,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(Ce,{spacing:4,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(He,{as:ef,boxSize:8})}),u.jsxs(ft,{align:"start",spacing:1,children:[u.jsx(bn,{size:"lg",children:r}),u.jsxs(Ce,{children:[u.jsx(er,{colorScheme:"purple",children:"Layer Group"}),(a==null?void 0:a.mode)&&u.jsx(er,{colorScheme:"blue",children:a.mode}),(a==null?void 0:a.enabled)&&u.jsx(er,{colorScheme:"green",children:"Enabled"})]})]})]}),u.jsx(sl,{}),u.jsxs(Ce,{wrap:"wrap",gap:2,children:[u.jsx(St,{size:"lg",variant:"accent",leftIcon:u.jsx(yc,{}),onClick:o,children:"Preview (WMS)"}),u.jsx(St,{size:"lg",variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(yc,{}),onClick:m,children:"Preview Cache"}),u.jsx(St,{size:"lg",variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(Kn,{}),onClick:d,children:"Manage Cache"}),u.jsx(St,{size:"lg",variant:"outline",color:"white",borderColor:"whiteAlpha.400",_hover:{bg:"whiteAlpha.200"},leftIcon:u.jsx(gc,{}),onClick:y,children:"Edit Layers"})]})]})})}),a&&u.jsxs(u.Fragment,{children:[u.jsx(Jr,{bg:n,children:u.jsx(un,{children:u.jsxs(ft,{align:"start",spacing:3,children:[u.jsx(bn,{size:"sm",color:"gray.600",children:"Group Configuration"}),u.jsx(Fr,{}),u.jsxs(nn,{columns:{base:1,md:2},spacing:4,w:"100%",children:[u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Workspace"}),u.jsx(ie,{fontWeight:"medium",children:e})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Mode"}),u.jsx(ie,{fontWeight:"medium",children:a.mode||"SINGLE"})]}),a.title&&u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Title"}),u.jsx(ie,{fontWeight:"medium",children:a.title})]}),a.bounds&&u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Bounds"}),u.jsxs(ie,{fontWeight:"medium",fontSize:"xs",children:["[",a.bounds.minX.toFixed(2),", ",a.bounds.minY.toFixed(2),", ",a.bounds.maxX.toFixed(2),", ",a.bounds.maxY.toFixed(2),"]"]})]})]})]})})}),u.jsx(Jr,{bg:n,children:u.jsx(un,{children:u.jsxs(ft,{align:"stretch",spacing:3,children:[u.jsxs(bn,{size:"sm",color:"gray.600",children:["Layers in Group (",a.layers.length,")"]}),u.jsx(Fr,{}),u.jsx(ft,{align:"stretch",spacing:2,children:a.layers.map((b,w)=>u.jsxs(Ce,{p:2,bg:"gray.50",borderRadius:"md",_dark:{bg:"gray.700"},children:[u.jsx(er,{colorScheme:b.type==="layer"?"teal":"purple",children:b.type}),u.jsx(ie,{fontWeight:"medium",children:b.name}),b.styleName&&u.jsxs(ie,{fontSize:"sm",color:"gray.500",children:["(Style: ",b.styleName,")"]})]},w))})]})})}),u.jsx(Jr,{bg:n,children:u.jsx(un,{children:u.jsxs(ft,{align:"stretch",spacing:4,children:[u.jsx(bn,{size:"sm",color:"gray.600",children:"Tile Cache"}),u.jsx(Fr,{}),u.jsx(ie,{fontSize:"sm",color:"gray.600",children:"Manage tile cache for this layer group. Seed tiles for faster map viewing, or truncate the cache to regenerate tiles."}),u.jsxs(nn,{columns:{base:1,md:2},spacing:4,children:[u.jsx(St,{colorScheme:"kartoza",leftIcon:u.jsx(Kn,{}),onClick:d,children:"Seed / Truncate Cache"}),u.jsx(St,{variant:"outline",leftIcon:u.jsx(gc,{}),onClick:y,children:"Modify Layers"})]})]})})})]})]})}function R1e({connectionId:t,workspace:e,styleName:r}){var a;const n=dr("white","gray.800"),i=bt(o=>o.openDialog),{data:s}=Qr({queryKey:["style",t,e,r],queryFn:()=>dU(t,e,r)});return u.jsxs(ft,{spacing:6,align:"stretch",children:[u.jsx(Jr,{bg:"linear-gradient(135deg, #3d9970 0%, #2d7a5a 100%)",color:"white",children:u.jsx(un,{py:8,px:6,children:u.jsxs(Sr,{align:"center",wrap:"wrap",gap:4,children:[u.jsxs(Ce,{spacing:4,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:3,borderRadius:"lg",children:u.jsx(He,{as:gc,boxSize:8})}),u.jsxs(ft,{align:"start",spacing:1,children:[u.jsx(bn,{size:"lg",children:r}),u.jsxs(Ce,{children:[u.jsx(er,{colorScheme:"pink",children:"Style"}),(s==null?void 0:s.format)&&u.jsx(er,{colorScheme:"blue",children:s.format.toUpperCase()})]})]})]}),u.jsx(sl,{}),u.jsx(St,{size:"lg",variant:"accent",leftIcon:u.jsx(gc,{}),onClick:()=>i("style",{mode:"edit",data:{connectionId:t,workspace:e,name:r}}),children:"Edit Style"})]})})}),u.jsx(Jr,{bg:n,children:u.jsx(un,{children:u.jsxs(ft,{align:"start",spacing:3,children:[u.jsx(bn,{size:"sm",color:"gray.600",children:"Style Details"}),u.jsx(Fr,{}),u.jsxs(nn,{columns:{base:1,md:2},spacing:4,w:"100%",children:[u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Workspace"}),u.jsx(ie,{fontWeight:"medium",children:e})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Format"}),u.jsx(ie,{fontWeight:"medium",children:((a=s==null?void 0:s.format)==null?void 0:a.toUpperCase())||"Unknown"})]})]})]})})}),(s==null?void 0:s.content)&&u.jsx(Jr,{bg:n,children:u.jsx(un,{children:u.jsxs(ft,{align:"stretch",spacing:3,children:[u.jsx(bn,{size:"sm",color:"gray.600",children:"Style Content Preview"}),u.jsx(Fr,{}),u.jsxs(ue,{bg:"gray.50",_dark:{bg:"gray.900"},p:4,borderRadius:"md",maxH:"400px",overflowY:"auto",fontFamily:"mono",fontSize:"sm",whiteSpace:"pre-wrap",wordBreak:"break-all",children:[s.content.slice(0,2e3),s.content.length>2e3&&`...
[Content truncated - click Edit Style to see full content]`]})]})})})]})}const nu={default:{type:"spring",stiffness:300,damping:24,mass:1},snappy:{type:"spring",stiffness:400,damping:28,mass:.8},bouncy:{type:"spring",stiffness:500,damping:15,mass:1}},uF={hidden:{opacity:0,x:20,height:0},visible:{opacity:1,x:0,height:"auto",transition:{...nu.snappy,staggerChildren:.05}},exit:{opacity:0,x:-20,height:0,transition:{duration:.2}}},Lc={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:nu.snappy},exit:{opacity:0,y:-10,transition:{duration:.1}}};function L1e(){var Te;const t=bt(lt=>lt.activeDialog),e=bt(lt=>lt.dialogData),r=bt(lt=>lt.closeDialog),n=Ks(lt=>lt.addConnection),i=Ks(lt=>lt.updateConnection),s=Ks(lt=>lt.testConnection),a=Ks(lt=>lt.connections),o=Ks(lt=>lt.refreshPGServices),[d,m]=I.useState("geoserver"),[y,b]=I.useState(""),[w,O]=I.useState(""),[A,E]=I.useState(""),[$,R]=I.useState(""),[F,L]=I.useState(!1),[U,Q]=I.useState(""),[Y,Z]=I.useState("localhost"),[J,re]=I.useState("5432"),[he,le]=I.useState(""),[Ze,Ee]=I.useState(""),[qe,et]=I.useState(""),[at,Be]=I.useState("prefer"),[Me,Ge]=I.useState(!1),[Le,Ie]=I.useState(!1),[Oe,Re]=I.useState(!1),[nt,ze]=I.useState(null),rt=Go(),Xe=t==="connection",_t=(e==null?void 0:e.mode)==="edit",Mt=(Te=e==null?void 0:e.data)==null?void 0:Te.connectionId;I.useEffect(()=>{if(Xe&&_t&&Mt){const lt=a.find(Nt=>Nt.id===Mt);lt&&(m("geoserver"),b(lt.name),O(lt.url),E(lt.username),R(lt.password||""),L(!1))}else Xe&&!_t&&(m("geoserver"),b(""),O(""),E(""),R(""),L(!1),Q(""),Z("localhost"),re("5432"),le(""),Ee(""),et(""),Be("prefer"),Ge(!1));ze(null)},[Xe,_t,Mt,a]);const Et=async()=>{Re(!0),ze(null);try{if(d==="geoserver"){if(!Mt&&!w){rt({title:"URL required",description:"Please enter a GeoServer URL first",status:"warning",duration:3e3}),Re(!1);return}if(Mt){const lt=await s(Mt);ze(lt)}else{const lt=await n({name:y||"Test",url:w,username:A,password:$}),Nt=await s(lt.id);Nt.success||await Ks.getState().removeConnection(lt.id),ze(Nt)}}else{if(!U){rt({title:"Service name required",description:"Please enter a service name first",status:"warning",duration:3e3}),Re(!1);return}await oF({name:U,host:Y,port:J,dbname:he,user:Ze,password:qe,sslmode:at});const Nt=await gU(U);ze(Nt)}}catch(lt){ze({success:!1,message:lt.message})}finally{Re(!1)}},yt=async()=>{Ie(!0);try{if(d==="geoserver"){if(!y||!w){rt({title:"Required fields",description:"Name and URL are required",status:"warning",duration:3e3}),Ie(!1);return}_t&&Mt?(await i(Mt,{name:y,url:w,username:A,password:$||void 0}),rt({title:"Connection updated",status:"success",duration:2e3})):(await n({name:y,url:w,username:A,password:$}),rt({title:"Connection added",status:"success",duration:2e3}))}else{if(!U||!Y||!he){rt({title:"Required fields",description:"Service name, host, and database are required",status:"warning",duration:3e3}),Ie(!1);return}await oF({name:U,host:Y,port:J,dbname:he,user:Ze,password:qe,sslmode:at}),await(o==null?void 0:o()),rt({title:"PostgreSQL service added",description:`Service "${U}" saved to pg_service.conf`,status:"success",duration:3e3})}r()}catch(lt){rt({title:"Error",description:lt.message,status:"error",duration:5e3})}finally{Ie(!1)}},Je=()=>d==="geoserver"?"linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 100%)":"linear-gradient(135deg, #336791 0%, #5B93C5 100%)",Kt=()=>d==="geoserver"?gu:Kn,vt=()=>_t?"Edit Connection":d==="geoserver"?"Add GeoServer":"Add PostgreSQL",st=()=>_t?"Update your connection settings":d==="geoserver"?"Connect to a GeoServer instance":"Add a PostgreSQL service to pg_service.conf";return u.jsxs(es,{isOpen:Xe,onClose:r,size:"lg",isCentered:!0,children:[u.jsx(rs,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(ts,{borderRadius:"xl",overflow:"hidden",children:[u.jsx(Dn.div,{animate:{background:Je()},transition:{duration:.3},style:{padding:"16px 24px"},children:u.jsxs(Ce,{spacing:3,children:[u.jsx(Dn.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:nu.bouncy,children:u.jsx(ue,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(He,{as:Kt(),boxSize:5,color:"white"})})},d),u.jsxs(ue,{children:[u.jsx(Dn.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:nu.snappy,children:u.jsx(ie,{color:"white",fontWeight:"600",fontSize:"lg",children:vt()})},`title-${d}`),u.jsx(Dn.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{...nu.snappy,delay:.1},children:u.jsx(ie,{color:"whiteAlpha.800",fontSize:"sm",children:st()})},`subtitle-${d}`)]})]})}),u.jsx(Fs,{color:"white"}),u.jsx(gs,{py:6,children:u.jsxs(ft,{spacing:4,children:[!_t&&u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Connection Type"}),u.jsxs(Ce,{spacing:3,children:[u.jsx(Dn.div,{style:{flex:1},whileHover:{scale:1.02},whileTap:{scale:.98},children:u.jsx(ue,{as:"button",type:"button",onClick:()=>m("geoserver"),w:"100%",p:4,borderRadius:"lg",border:"2px solid",borderColor:d==="geoserver"?"blue.500":"gray.200",bg:d==="geoserver"?"blue.50":"white",transition:"all 0.2s",_hover:{borderColor:"blue.300"},children:u.jsxs(ft,{spacing:1,children:[u.jsx(He,{as:gu,boxSize:6,color:d==="geoserver"?"blue.500":"gray.400"}),u.jsx(ie,{fontWeight:"500",color:d==="geoserver"?"blue.700":"gray.600",children:"GeoServer"}),u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Web map server"})]})})}),u.jsx(Dn.div,{style:{flex:1},whileHover:{scale:1.02},whileTap:{scale:.98},children:u.jsx(ue,{as:"button",type:"button",onClick:()=>m("postgresql"),w:"100%",p:4,borderRadius:"lg",border:"2px solid",borderColor:d==="postgresql"?"blue.500":"gray.200",bg:d==="postgresql"?"blue.50":"white",transition:"all 0.2s",_hover:{borderColor:"blue.300"},children:u.jsxs(ft,{spacing:1,children:[u.jsx(He,{as:Kn,boxSize:6,color:d==="postgresql"?"blue.500":"gray.400"}),u.jsx(ie,{fontWeight:"500",color:d==="postgresql"?"blue.700":"gray.600",children:"PostgreSQL"}),u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Database service"})]})})})]})]}),u.jsx(Fr,{}),u.jsxs(pc,{mode:"wait",children:[d==="geoserver"&&u.jsx(Dn.div,{variants:uF,initial:"hidden",animate:"visible",exit:"exit",style:{width:"100%"},children:u.jsxs(ft,{spacing:4,w:"100%",children:[u.jsx(Dn.div,{variants:Lc,style:{width:"100%"},children:u.jsxs(Ot,{isRequired:!0,children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Name"}),u.jsx(Ar,{value:y,onChange:lt=>b(lt.target.value),placeholder:"My GeoServer",size:"lg",borderRadius:"lg"})]})}),u.jsx(Dn.div,{variants:Lc,style:{width:"100%"},children:u.jsxs(Ot,{isRequired:!0,children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"URL"}),u.jsx(Ar,{value:w,onChange:lt=>O(lt.target.value),placeholder:"http://localhost:8080/geoserver",size:"lg",borderRadius:"lg"})]})}),u.jsx(Dn.div,{variants:Lc,style:{width:"100%"},children:u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Username"}),u.jsx(Ar,{value:A,onChange:lt=>E(lt.target.value),placeholder:"admin",size:"lg",borderRadius:"lg"})]})}),u.jsx(Dn.div,{variants:Lc,style:{width:"100%"},children:u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Password"}),u.jsxs(aa,{size:"lg",children:[u.jsx(Ar,{type:F?"text":"password",value:$,onChange:lt=>R(lt.target.value),placeholder:_t?"(unchanged)":"password",borderRadius:"lg"}),u.jsx(wb,{h:"full",children:u.jsx(br,{"aria-label":F?"Hide password":"Show password",icon:F?u.jsx(Jd,{}):u.jsx(wo,{}),variant:"ghost",size:"md",onClick:()=>L(!F)})})]})]})})]})},"geoserver-form"),d==="postgresql"&&u.jsx(Dn.div,{variants:uF,initial:"hidden",animate:"visible",exit:"exit",style:{width:"100%"},children:u.jsxs(ft,{spacing:4,w:"100%",children:[u.jsx(Dn.div,{variants:Lc,style:{width:"100%"},children:u.jsxs(Ot,{isRequired:!0,children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Service Name"}),u.jsx(Ar,{value:U,onChange:lt=>Q(lt.target.value),placeholder:"my_database",size:"lg",borderRadius:"lg"}),u.jsx(ie,{fontSize:"xs",color:"gray.500",mt:1,children:"This will be saved to ~/.pg_service.conf"})]})}),u.jsx(Dn.div,{variants:Lc,style:{width:"100%"},children:u.jsxs(Ce,{spacing:4,children:[u.jsxs(Ot,{isRequired:!0,flex:2,children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Host"}),u.jsx(Ar,{value:Y,onChange:lt=>Z(lt.target.value),placeholder:"localhost",size:"lg",borderRadius:"lg"})]}),u.jsxs(Ot,{flex:1,children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Port"}),u.jsx(Ar,{value:J,onChange:lt=>re(lt.target.value),placeholder:"5432",size:"lg",borderRadius:"lg"})]})]})}),u.jsx(Dn.div,{variants:Lc,style:{width:"100%"},children:u.jsxs(Ot,{isRequired:!0,children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Database"}),u.jsx(Ar,{value:he,onChange:lt=>le(lt.target.value),placeholder:"postgres",size:"lg",borderRadius:"lg"})]})}),u.jsx(Dn.div,{variants:Lc,style:{width:"100%"},children:u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Username"}),u.jsx(Ar,{value:Ze,onChange:lt=>Ee(lt.target.value),placeholder:"postgres",size:"lg",borderRadius:"lg"})]})}),u.jsx(Dn.div,{variants:Lc,style:{width:"100%"},children:u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Password"}),u.jsxs(aa,{size:"lg",children:[u.jsx(Ar,{type:Me?"text":"password",value:qe,onChange:lt=>et(lt.target.value),placeholder:"password",borderRadius:"lg"}),u.jsx(wb,{h:"full",children:u.jsx(br,{"aria-label":Me?"Hide password":"Show password",icon:Me?u.jsx(Jd,{}):u.jsx(wo,{}),variant:"ghost",size:"md",onClick:()=>Ge(!Me)})})]})]})}),u.jsx(Dn.div,{variants:Lc,style:{width:"100%"},children:u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"SSL Mode"}),u.jsxs(Rn,{value:at,onChange:lt=>Be(lt.target.value),size:"lg",borderRadius:"lg",children:[u.jsx("option",{value:"disable",children:"disable"}),u.jsx("option",{value:"allow",children:"allow"}),u.jsx("option",{value:"prefer",children:"prefer"}),u.jsx("option",{value:"require",children:"require"}),u.jsx("option",{value:"verify-ca",children:"verify-ca"}),u.jsx("option",{value:"verify-full",children:"verify-full"})]})]})})]})},"postgresql-form")]}),u.jsx(pc,{children:nt&&u.jsx(Dn.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},transition:nu.snappy,style:{width:"100%"},children:u.jsxs(to,{status:nt.success?"success":"error",borderRadius:"lg",variant:"subtle",children:[u.jsx(ro,{}),u.jsx(ie,{fontSize:"sm",children:nt.message})]})})})]})}),u.jsxs(qo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:[u.jsx(St,{variant:"outline",onClick:Et,isLoading:Oe,loadingText:"Testing...",leftIcon:u.jsx(SI,{}),borderRadius:"lg",flexShrink:0,children:"Test Connection"}),u.jsx(St,{variant:"ghost",onClick:r,borderRadius:"lg",children:"Cancel"}),u.jsx(Dn.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:u.jsx(St,{colorScheme:d==="geoserver"?"blue":"purple",onClick:yt,isLoading:Le,borderRadius:"lg",px:6,children:_t?"Save Changes":"Add Connection"})})]})]})]})}const hF={name:"",isolated:!1,default:!1,enabled:!0,wmtsEnabled:!1,wmsEnabled:!0,wcsEnabled:!0,wpsEnabled:!1,wfsEnabled:!0};function F1e(){var F,L;const t=bt(U=>U.activeDialog),e=bt(U=>U.dialogData),r=bt(U=>U.closeDialog),n=Er(U=>U.selectedNode),i=Ks(U=>U.activeConnectionId),s=Pa(),a=Go(),[o,d]=I.useState(hF),[m,y]=I.useState(!1),b=t==="workspace",w=(e==null?void 0:e.mode)==="edit",O=((F=e==null?void 0:e.data)==null?void 0:F.connectionId)||(n==null?void 0:n.connectionId)||i,A=(L=e==null?void 0:e.data)==null?void 0:L.workspace,{data:E}=Qr({queryKey:["workspace",O,A],queryFn:()=>sU(O,A),enabled:b&&w&&!!O&&!!A});I.useEffect(()=>{b&&d(w&&E?E:hF)},[b,w,E]);const $=(U,Q)=>{d(Y=>({...Y,[U]:Q}))},R=async()=>{if(!O){a({title:"No connection selected",description:"Please select a connection first",status:"warning",duration:3e3});return}if(!o.name){a({title:"Name required",description:"Please enter a workspace name",status:"warning",duration:3e3});return}y(!0);try{w&&A?(await Jve(O,A,o),a({title:"Workspace updated",status:"success",duration:2e3})):(await Yve(O,o),a({title:"Workspace created",status:"success",duration:2e3})),s.invalidateQueries({queryKey:["workspaces",O]}),r()}catch(U){a({title:"Error",description:U.message,status:"error",duration:5e3})}finally{y(!1)}};return u.jsxs(es,{isOpen:b,onClose:r,size:"lg",isCentered:!0,children:[u.jsx(rs,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(ts,{borderRadius:"xl",overflow:"hidden",children:[u.jsx(ue,{bg:"linear-gradient(135deg, #E8A331 0%, #F0B84D 100%)",px:6,py:4,children:u.jsxs(Ce,{spacing:3,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(He,{as:uh,boxSize:5,color:"white"})}),u.jsxs(ue,{children:[u.jsx(ie,{color:"white",fontWeight:"600",fontSize:"lg",children:w?"Edit Workspace":"Create Workspace"}),u.jsx(ie,{color:"whiteAlpha.800",fontSize:"sm",children:w?"Update workspace settings":"Create a new GeoServer workspace"})]})]})}),u.jsx(Fs,{color:"white"}),u.jsx(gs,{py:6,children:u.jsxs(ft,{spacing:5,align:"stretch",children:[u.jsxs(Ot,{isRequired:!0,children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Workspace Name"}),u.jsx(Ar,{value:o.name,onChange:U=>$("name",U.target.value),placeholder:"my_workspace",isDisabled:w,size:"lg",borderRadius:"lg"})]}),u.jsxs(ue,{p:4,bg:"gray.50",borderRadius:"lg",children:[u.jsx(bn,{size:"sm",mb:3,color:"gray.700",children:"Workspace Settings"}),u.jsxs(nn,{columns:3,spacing:4,children:[u.jsxs(Ot,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[u.jsx(Pt,{mb:0,fontWeight:"normal",children:"Isolated"}),u.jsx(la,{isChecked:o.isolated,onChange:U=>$("isolated",U.target.checked),colorScheme:"kartoza"})]}),u.jsxs(Ot,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[u.jsx(Pt,{mb:0,fontWeight:"normal",children:"Default"}),u.jsx(la,{isChecked:o.default,onChange:U=>$("default",U.target.checked),colorScheme:"kartoza"})]}),u.jsxs(Ot,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[u.jsx(Pt,{mb:0,fontWeight:"normal",children:"Enabled"}),u.jsx(la,{isChecked:o.enabled,onChange:U=>$("enabled",U.target.checked),colorScheme:"kartoza"})]})]})]}),u.jsxs(ue,{p:4,bg:"gray.50",borderRadius:"lg",children:[u.jsx(bn,{size:"sm",mb:3,color:"gray.700",children:"OGC Services"}),u.jsxs(nn,{columns:5,spacing:4,children:[u.jsxs(Ot,{display:"flex",alignItems:"center",flexDirection:"column",gap:1,children:[u.jsx(Pt,{mb:0,fontSize:"sm",fontWeight:"500",color:"gray.600",children:"WMS"}),u.jsx(la,{isChecked:o.wmsEnabled,onChange:U=>$("wmsEnabled",U.target.checked),colorScheme:"kartoza",size:"md"})]}),u.jsxs(Ot,{display:"flex",alignItems:"center",flexDirection:"column",gap:1,children:[u.jsx(Pt,{mb:0,fontSize:"sm",fontWeight:"500",color:"gray.600",children:"WFS"}),u.jsx(la,{isChecked:o.wfsEnabled,onChange:U=>$("wfsEnabled",U.target.checked),colorScheme:"kartoza",size:"md"})]}),u.jsxs(Ot,{display:"flex",alignItems:"center",flexDirection:"column",gap:1,children:[u.jsx(Pt,{mb:0,fontSize:"sm",fontWeight:"500",color:"gray.600",children:"WCS"}),u.jsx(la,{isChecked:o.wcsEnabled,onChange:U=>$("wcsEnabled",U.target.checked),colorScheme:"kartoza",size:"md"})]}),u.jsxs(Ot,{display:"flex",alignItems:"center",flexDirection:"column",gap:1,children:[u.jsx(Pt,{mb:0,fontSize:"sm",fontWeight:"500",color:"gray.600",children:"WMTS"}),u.jsx(la,{isChecked:o.wmtsEnabled,onChange:U=>$("wmtsEnabled",U.target.checked),colorScheme:"kartoza",size:"md"})]}),u.jsxs(Ot,{display:"flex",alignItems:"center",flexDirection:"column",gap:1,children:[u.jsx(Pt,{mb:0,fontSize:"sm",fontWeight:"500",color:"gray.600",children:"WPS"}),u.jsx(la,{isChecked:o.wpsEnabled,onChange:U=>$("wpsEnabled",U.target.checked),colorScheme:"kartoza",size:"md"})]})]})]})]})}),u.jsxs(qo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:[u.jsx(St,{variant:"ghost",onClick:r,borderRadius:"lg",children:"Cancel"}),u.jsx(St,{colorScheme:"kartoza",onClick:R,isLoading:m,borderRadius:"lg",px:6,children:w?"Save Changes":"Create Workspace"})]})]})]})}function B1e(){const t=bt(O=>O.activeDialog),e=bt(O=>O.dialogData),r=bt(O=>O.closeDialog),n=Ks(O=>O.removeConnection),i=Pa(),s=Go(),[a,o]=I.useState(!1),d=t==="confirm",m=(e==null?void 0:e.title)||"Confirm",y=(e==null?void 0:e.message)||"Are you sure?",b=e==null?void 0:e.data,w=async()=>{o(!0);try{if(b!=null&&b.pgServiceName)await Fbe(b.pgServiceName),i.invalidateQueries({queryKey:["pgservices"]}),s({title:"PostgreSQL service deleted",status:"success",duration:2e3});else if(b!=null&&b.connectionId&&!(b!=null&&b.workspace))await n(b.connectionId),i.invalidateQueries({queryKey:["dashboard"]}),s({title:"Connection deleted",status:"success",duration:2e3});else if(b!=null&&b.connectionId&&(b!=null&&b.workspace)&&!(b!=null&&b.name))await ebe(b.connectionId,b.workspace,!0),i.invalidateQueries({queryKey:["workspaces",b.connectionId]}),s({title:"Workspace deleted",status:"success",duration:2e3});else if(b!=null&&b.connectionId&&(b!=null&&b.workspace)&&(b!=null&&b.name)&&(b!=null&&b.type)){const O=b.connectionId,A=b.workspace,E=b.name,$=b.type;switch($){case"datastore":await tbe(O,A,E,!0),i.invalidateQueries({queryKey:["datastores",O,A]});break;case"coveragestore":await rbe(O,A,E,!0),i.invalidateQueries({queryKey:["coveragestores",O,A]});break;case"layer":await nbe(O,A,E),i.invalidateQueries({queryKey:["layers",O,A]});break;case"style":await abe(O,A,E,!0),i.invalidateQueries({queryKey:["styles",O,A]});break;case"layergroup":await fbe(O,A,E),i.invalidateQueries({queryKey:["layergroups",O,A]});break}s({title:`${$} deleted`,status:"success",duration:2e3})}e!=null&&e.onConfirm&&await e.onConfirm(),r()}catch(O){s({title:"Error",description:O.message,status:"error",duration:5e3})}finally{o(!1)}};return u.jsxs(es,{isOpen:d,onClose:r,size:"md",isCentered:!0,children:[u.jsx(rs,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(ts,{borderRadius:"xl",overflow:"hidden",children:[u.jsx(ue,{bg:"linear-gradient(135deg, #E55B3C 0%, #F0B84D 100%)",px:6,py:4,children:u.jsxs(Ce,{spacing:3,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(He,{as:q7,boxSize:5,color:"white"})}),u.jsxs(ue,{children:[u.jsx(ie,{color:"white",fontWeight:"600",fontSize:"lg",children:m}),u.jsx(ie,{color:"whiteAlpha.800",fontSize:"sm",children:"This action cannot be undone"})]})]})}),u.jsx(Fs,{color:"white"}),u.jsx(gs,{py:6,children:u.jsx(ie,{color:"gray.700",fontSize:"md",children:y})}),u.jsxs(qo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:[u.jsx(St,{variant:"ghost",onClick:r,borderRadius:"lg",children:"Cancel"}),u.jsx(St,{colorScheme:"red",onClick:w,isLoading:a,borderRadius:"lg",px:6,children:"Delete"})]})]})]})}function $1e(){const t=bt(ze=>ze.activeDialog),e=bt(ze=>ze.closeDialog),r=Er(ze=>ze.selectedNode),n=Ks(ze=>ze.activeConnectionId),i=Pa(),s=Go(),[a,o]=I.useState([]),[d,m]=I.useState(!1),[y,b]=I.useState(!1),[w,O]=I.useState([]),[A,E]=I.useState(!1),[$,R]=I.useState(!1),[F,L]=I.useState(null),U=I.useRef(null),Q=dr("gray.50","gray.700"),Y=dr("gray.300","gray.600"),Z=t==="upload",J=(r==null?void 0:r.connectionId)||n,re=r==null?void 0:r.workspace;I.useEffect(()=>{Z&&(o([]),b(!1),O([]),L(null))},[Z]);const he=I.useCallback(ze=>{ze.preventDefault();const rt=Array.from(ze.dataTransfer.files);Ze(rt)},[]),le=ze=>{if(ze.target.files){const rt=Array.from(ze.target.files);Ze(rt)}},Ze=ze=>{const rt=[".shp",".zip",".gpkg",".tif",".tiff",".sld",".css"],Xe=ze.filter(_t=>rt.some(Mt=>_t.name.toLowerCase().endsWith(Mt)));Xe.length<ze.length&&s({title:"Some files skipped",description:"Only shapefiles, GeoPackages, GeoTIFFs, and styles are supported",status:"warning",duration:3e3}),o(_t=>[..._t,...Xe.map(Mt=>({file:Mt,progress:0,status:"pending"}))]),b(!1),O([])},Ee=ze=>{o(rt=>rt.filter((Xe,_t)=>_t!==ze))},qe=async()=>{if(!J||!re){s({title:"No workspace selected",description:"Please select a workspace in the tree first",status:"warning",duration:3e3});return}if(a.length===0){s({title:"No files selected",description:"Please select files to upload",status:"warning",duration:3e3});return}m(!0);let ze=null;for(let Xe=0;Xe<a.length;Xe++)if(a[Xe].status==="pending"){o(_t=>_t.map((Mt,Et)=>Et===Xe?{...Mt,status:"uploading"}:Mt));try{const _t=await ybe(J,re,a[Xe].file,Mt=>{o(Et=>Et.map((yt,Je)=>Je===Xe?{...yt,progress:Mt}:yt))});o(Mt=>Mt.map((Et,yt)=>yt===Xe?{...Et,status:"success",progress:100,storeName:_t.storeName,storeType:_t.storeType}:Et)),a[Xe].file.name.toLowerCase().endsWith(".gpkg")&&_t.storeName&&(ze={name:_t.storeName,type:_t.storeType||"datastore"})}catch(_t){o(Mt=>Mt.map((Et,yt)=>yt===Xe?{...Et,status:"error",error:_t.message}:Et))}}m(!1),b(!0),i.invalidateQueries({queryKey:["datastores",J,re]}),i.invalidateQueries({queryKey:["coveragestores",J,re]}),i.invalidateQueries({queryKey:["styles",J,re]}),i.invalidateQueries({queryKey:["layers",J,re]});const rt=a.filter(Xe=>Xe.status==="success").length;rt>0&&s({title:"Upload complete",description:`${rt} file(s) uploaded successfully`,status:"success",duration:3e3}),ze&&ze.type==="datastore"&&(L(ze),await et(ze.name))},et=async ze=>{if(!(!J||!re)){E(!0);try{const rt=await aU(J,re,ze);rt.length>0&&O(rt.map(Xe=>({name:Xe,selected:!0})))}catch(rt){console.error("Failed to load available layers:",rt)}finally{E(!1)}}},at=ze=>{O(rt=>rt.map((Xe,_t)=>_t===ze?{...Xe,selected:!Xe.selected}:Xe))},Be=()=>{O(ze=>ze.map(rt=>({...rt,selected:!0})))},Me=()=>{O(ze=>ze.map(rt=>({...rt,selected:!1})))},Ge=async()=>{if(!J||!re||!F)return;const ze=w.filter(rt=>rt.selected).map(rt=>rt.name);if(ze.length===0){s({title:"No layers selected",description:"Please select at least one layer to publish",status:"warning",duration:3e3});return}R(!0);try{const rt=await lU(J,re,F.name,ze);rt.published.length>0&&(s({title:"Layers published",description:`${rt.published.length} layer(s) published successfully`,status:"success",duration:3e3}),O(Xe=>Xe.filter(_t=>!rt.published.includes(_t.name))),i.invalidateQueries({queryKey:["layers",J,re]})),rt.errors.length>0&&s({title:"Some layers failed",description:rt.errors.join(", "),status:"error",duration:5e3})}catch(rt){s({title:"Publish failed",description:rt.message,status:"error",duration:5e3})}finally{R(!1)}},Le=()=>{o([]),b(!1),O([]),L(null),e()},Ie=ze=>{switch(ze){case"success":return SI;case"error":return tf;default:return G7}},Oe=ze=>{switch(ze){case"success":return"green.500";case"error":return"red.500";default:return"gray.500"}},Re=a.some(ze=>ze.status==="pending"),nt=w.filter(ze=>ze.selected).length;return u.jsxs(es,{isOpen:Z,onClose:Le,size:"lg",isCentered:!0,children:[u.jsx(rs,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(ts,{borderRadius:"xl",overflow:"hidden",maxH:"85vh",children:[u.jsx(ue,{bg:"linear-gradient(135deg, #3B9DD9 0%, #5BB5E8 100%)",px:6,py:4,children:u.jsxs(Ce,{spacing:3,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(He,{as:Dv,boxSize:5,color:"white"})}),u.jsxs(ue,{flex:"1",children:[u.jsx(ie,{color:"white",fontWeight:"600",fontSize:"lg",children:"Upload Files"}),u.jsxs(Ce,{spacing:2,children:[u.jsx(ie,{color:"whiteAlpha.800",fontSize:"sm",children:"Target:"}),re?u.jsx(er,{bg:"whiteAlpha.200",color:"white",fontSize:"xs",children:re}):u.jsx(ie,{color:"whiteAlpha.600",fontSize:"sm",fontStyle:"italic",children:"No workspace selected"})]})]})]})}),u.jsx(Fs,{color:"white"}),u.jsx(gs,{py:6,overflowY:"auto",children:u.jsxs(ft,{spacing:4,children:[!y&&u.jsxs(ue,{w:"100%",p:8,bg:Q,border:"2px dashed",borderColor:Y,borderRadius:"xl",textAlign:"center",cursor:"pointer",onClick:()=>{var ze;return(ze=U.current)==null?void 0:ze.click()},onDrop:he,onDragOver:ze=>ze.preventDefault(),_hover:{borderColor:"kartoza.500",bg:"kartoza.50"},transition:"all 0.2s",children:[u.jsxs(ft,{spacing:3,children:[u.jsx(ue,{bg:"kartoza.50",p:4,borderRadius:"full",children:u.jsx(He,{as:Dv,boxSize:10,color:"kartoza.500"})}),u.jsxs(ft,{spacing:1,children:[u.jsx(ie,{fontWeight:"600",color:"gray.700",children:"Drop files here or click to browse"}),u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"Shapefile (.zip), GeoPackage (.gpkg), GeoTIFF (.tif), SLD, CSS"})]})]}),u.jsx("input",{ref:U,type:"file",multiple:!0,accept:".zip,.shp,.gpkg,.tif,.tiff,.sld,.css",style:{display:"none"},onChange:le})]}),a.length>0&&u.jsx(v1,{spacing:2,w:"100%",children:a.map((ze,rt)=>u.jsx(iI,{p:3,bg:Q,borderRadius:"lg",border:"1px solid",borderColor:ze.status==="success"?"green.200":ze.status==="error"?"red.200":"gray.200",children:u.jsxs(ft,{align:"stretch",spacing:2,children:[u.jsxs(ue,{display:"flex",alignItems:"center",gap:2,children:[u.jsx(sI,{as:Ie(ze.status),color:Oe(ze.status),boxSize:5}),u.jsx(ie,{flex:"1",fontSize:"sm",noOfLines:1,fontWeight:"500",children:ze.file.name}),ze.status==="pending"&&u.jsx(St,{size:"xs",variant:"ghost",colorScheme:"red",onClick:()=>Ee(rt),borderRadius:"md",children:"Remove"}),ze.status==="success"&&u.jsx(er,{colorScheme:"green",borderRadius:"md",children:"Complete"})]}),ze.status==="uploading"&&u.jsx(um,{value:ze.progress,size:"sm",colorScheme:"kartoza",borderRadius:"full"}),ze.status==="error"&&u.jsx(ie,{fontSize:"xs",color:"red.500",children:ze.error})]})},rt))}),y&&w.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Fr,{}),u.jsxs(ue,{w:"100%",children:[u.jsxs(Ce,{justify:"space-between",mb:3,children:[u.jsxs(Ce,{children:[u.jsx(He,{as:Yi,color:"kartoza.500"}),u.jsxs(ie,{fontWeight:"600",children:["Available Layers in ",F==null?void 0:F.name]})]}),u.jsxs(Ce,{spacing:2,children:[u.jsx(St,{size:"xs",variant:"ghost",onClick:Be,children:"Select All"}),u.jsx(St,{size:"xs",variant:"ghost",onClick:Me,children:"Deselect All"})]})]}),u.jsx(ie,{fontSize:"sm",color:"gray.500",mb:3,children:"The GeoPackage contains multiple layers. Select which layers to publish:"}),u.jsx(ft,{align:"stretch",spacing:2,maxH:"200px",overflowY:"auto",children:w.map((ze,rt)=>u.jsx(ue,{p:2,bg:Q,borderRadius:"md",border:"1px solid",borderColor:ze.selected?"kartoza.200":"gray.200",children:u.jsx(Ua,{isChecked:ze.selected,onChange:()=>at(rt),colorScheme:"kartoza",children:u.jsxs(Ce,{spacing:2,children:[u.jsx(He,{as:Kn,color:"gray.500",boxSize:4}),u.jsx(ie,{fontSize:"sm",children:ze.name})]})})},ze.name))})]})]}),A&&u.jsxs(Ce,{spacing:2,color:"gray.500",children:[u.jsx(Nn,{size:"sm"}),u.jsx(ie,{fontSize:"sm",children:"Checking for available layers..."})]})]})}),u.jsxs(qo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:[u.jsx(St,{variant:"ghost",onClick:Le,borderRadius:"lg",children:y?"Close":"Cancel"}),y&&w.length>0&&u.jsxs(St,{colorScheme:"green",onClick:Ge,isLoading:$,loadingText:"Publishing...",isDisabled:nt===0,leftIcon:u.jsx(Yi,{}),borderRadius:"lg",px:6,children:["Publish ",nt>0&&`(${nt})`]}),(!y||Re)&&u.jsxs(St,{colorScheme:"kartoza",onClick:qe,isLoading:d,loadingText:"Uploading...",isDisabled:a.length===0||!re||!Re,leftIcon:u.jsx(Dv,{}),borderRadius:"lg",px:6,children:["Upload ",a.filter(ze=>ze.status==="pending").length>0&&`(${a.filter(ze=>ze.status==="pending").length})`]})]})]})]})}function N1e(){var re,he;const t=bt(le=>le.activeDialog),e=bt(le=>le.dialogData),r=bt(le=>le.closeDialog),n=Er(le=>le.selectedNode),[i,s]=I.useState(""),[a,o]=I.useState(""),[d,m]=I.useState("SINGLE"),[y,b]=I.useState([]),[w,O]=I.useState(!1),A=Go(),E=Pa(),$=t==="layergroup",R=(e==null?void 0:e.mode)==="edit",F=((re=e==null?void 0:e.data)==null?void 0:re.connectionId)||(n==null?void 0:n.connectionId)||"",L=((he=e==null?void 0:e.data)==null?void 0:he.workspace)||(n==null?void 0:n.workspace)||"",{data:U,isLoading:Q}=Qr({queryKey:["layers",F,L],queryFn:()=>j1(F,L),enabled:$&&!!F&&!!L});I.useEffect(()=>{$&&(R&&(e!=null&&e.data)?(s(e.data.name||""),o(e.data.title||""),m(e.data.mode||"SINGLE"),b(e.data.layers||[])):(s(""),o(""),m("SINGLE"),b([])))},[$,R,e]);const Y=async()=>{if(!i.trim()){A({title:"Name is required",status:"error",duration:3e3});return}if(y.length===0){A({title:"Select at least one layer",status:"error",duration:3e3});return}O(!0);try{const le=y.map(Ze=>`${L}:${Ze}`);R?(await dbe(F,L,i,{title:a.trim()||void 0,mode:d,layers:le,enabled:!0}),A({title:`Layer group "${i}" updated successfully`,status:"success",duration:3e3})):(await hbe(F,L,{name:i.trim(),title:a.trim()||void 0,mode:d,layers:le}),A({title:`Layer group "${i}" created successfully`,status:"success",duration:3e3})),E.invalidateQueries({queryKey:["layergroups",F,L]}),r()}catch(le){A({title:R?"Failed to update layer group":"Failed to create layer group",description:le instanceof Error?le.message:"Unknown error",status:"error",duration:5e3})}finally{O(!1)}},Z=le=>{b(Ze=>Ze.includes(le)?Ze.filter(Ee=>Ee!==le):[...Ze,le])},J=()=>{U&&(y.length===U.length?b([]):b(U.map(le=>le.name)))};return $?u.jsxs(es,{isOpen:$,onClose:r,size:"lg",isCentered:!0,children:[u.jsx(rs,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(ts,{borderRadius:"xl",overflow:"hidden",maxH:"85vh",children:[u.jsx(ue,{bg:"linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 100%)",px:6,py:4,children:u.jsxs(Ce,{spacing:3,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(He,{as:ef,boxSize:5,color:"white"})}),u.jsxs(ue,{children:[u.jsx(ie,{color:"white",fontWeight:"600",fontSize:"lg",children:R?"Edit Layer Group":"Create Layer Group"}),u.jsx(ie,{color:"whiteAlpha.800",fontSize:"sm",children:L?`Workspace: ${L}`:"Select layers to group together"})]})]})}),u.jsx(Fs,{color:"white"}),u.jsx(gs,{py:6,overflowY:"auto",children:u.jsxs(ft,{spacing:5,align:"stretch",children:[u.jsxs(Ot,{isRequired:!0,children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Group Name"}),u.jsx(Ar,{value:i,onChange:le=>s(le.target.value),placeholder:"my_layer_group",size:"lg",borderRadius:"lg",isDisabled:R})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Title (Optional)"}),u.jsx(Ar,{value:a,onChange:le=>o(le.target.value),placeholder:"My Layer Group",size:"lg",borderRadius:"lg"})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Mode"}),u.jsxs(Rn,{value:d,onChange:le=>m(le.target.value),size:"lg",borderRadius:"lg",children:[u.jsx("option",{value:"SINGLE",children:"Single (merged into one layer)"}),u.jsx("option",{value:"NAMED",children:"Named (layers visible separately)"}),u.jsx("option",{value:"CONTAINER",children:"Container (organizational only)"}),u.jsx("option",{value:"EO",children:"EO (Earth Observation)"})]})]}),u.jsxs(Ot,{isRequired:!0,children:[u.jsxs(Ce,{justify:"space-between",mb:2,children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",mb:0,children:"Select Layers"}),u.jsxs(Ce,{children:[u.jsxs(er,{colorScheme:"kartoza",borderRadius:"md",px:2,children:[y.length," selected"]}),u.jsx(St,{size:"xs",variant:"ghost",colorScheme:"kartoza",onClick:J,children:U&&y.length===U.length?"Deselect All":"Select All"})]})]}),u.jsx(ue,{border:"1px solid",borderColor:"gray.200",borderRadius:"lg",maxH:"250px",overflowY:"auto",p:3,children:Q?u.jsxs(Ce,{justify:"center",py:6,children:[u.jsx(Nn,{size:"sm",color:"kartoza.500"}),u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"Loading layers..."})]}):U&&U.length>0?u.jsx(k1,{spacing:2,children:U.map(le=>u.jsx(ue,{p:2,borderRadius:"md",bg:y.includes(le.name)?"kartoza.50":"transparent",_hover:{bg:"gray.50"},transition:"background 0.15s",children:u.jsx(Ua,{isChecked:y.includes(le.name),onChange:()=>Z(le.name),colorScheme:"kartoza",children:u.jsxs(Ce,{spacing:2,children:[u.jsx(He,{as:Yi,color:"blue.500"}),u.jsx(ie,{fontSize:"sm",fontWeight:y.includes(le.name)?"500":"normal",children:le.name}),le.storeType&&u.jsx(er,{size:"sm",colorScheme:le.storeType==="coverage"?"purple":"green",fontSize:"xs",children:le.storeType==="coverage"?"Raster":"Vector"})]})})},le.name))}):u.jsxs(to,{status:"info",borderRadius:"md",children:[u.jsx(ro,{}),u.jsx(ie,{fontSize:"sm",children:"No layers available in this workspace"})]})})]})]})}),u.jsxs(qo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:[u.jsx(St,{variant:"ghost",onClick:r,borderRadius:"lg",children:"Cancel"}),u.jsx(St,{colorScheme:"kartoza",onClick:Y,isLoading:w,isDisabled:!i.trim()||y.length===0,borderRadius:"lg",px:6,children:R?"Save Changes":"Create Layer Group"})]})]})]}):null}function V1e(){var Le,Ie,Oe,Re,nt,ze,rt;const t=bt(Xe=>Xe.activeDialog),e=bt(Xe=>Xe.dialogData),r=bt(Xe=>Xe.closeDialog),n=Er(Xe=>Xe.selectedNode),[i,s]=I.useState(0),[a,o]=I.useState(""),[d,m]=I.useState("image/png"),[y,b]=I.useState(0),[w,O]=I.useState(10),[A,E]=I.useState(2),[$,R]=I.useState("seed"),[F,L]=I.useState(!1),U=Go(),Q=Pa(),Y=t==="info"&&(e==null?void 0:e.title)==="Tile Cache",Z=((Le=e==null?void 0:e.data)==null?void 0:Le.layerName)||"",J=((Ie=e==null?void 0:e.data)==null?void 0:Ie.connectionId)||(n==null?void 0:n.connectionId)||"",re=((Oe=e==null?void 0:e.data)==null?void 0:Oe.workspace)||(n==null?void 0:n.workspace)||"",he=re?`${re}:${Z}`:Z,{data:le,isLoading:Ze}=Qr({queryKey:["gwc-layer",J,he],queryFn:()=>xbe(J,he),enabled:Y&&!!J&&!!he}),{data:Ee,refetch:qe}=Qr({queryKey:["gwc-seed-status",J,he],queryFn:()=>vbe(J,he),enabled:Y&&!!J&&!!he,refetchInterval:i===1?2e3:!1});I.useEffect(()=>{var Xe,_t;(Xe=le==null?void 0:le.gridSubsets)!=null&&Xe[0]&&!a&&o(le.gridSubsets[0]),(_t=le==null?void 0:le.mimeFormats)!=null&&_t[0]&&d==="image/png"&&!le.mimeFormats.includes("image/png")&&le.mimeFormats[0]&&m(le.mimeFormats[0])},[le,a,d]);const et=async()=>{if(!a||!d){U({title:"Select grid set and format",status:"error",duration:3e3});return}L(!0);try{await bbe(J,he,{gridSetId:a,format:d,zoomStart:y,zoomStop:w,type:$,threadCount:A}),U({title:`${$==="seed"?"Seeding":"Reseeding"} started`,description:`Layer: ${Z}`,status:"success",duration:3e3}),s(1),qe()}catch(Xe){U({title:"Failed to start seeding",description:Xe instanceof Error?Xe.message:"Unknown error",status:"error",duration:5e3})}finally{L(!1)}},at=async()=>{L(!0);try{await wbe(J,he,{gridSetId:a||void 0,format:d||void 0,zoomStart:y,zoomStop:w}),U({title:"Cache truncated",description:`Layer: ${Z}`,status:"success",duration:3e3}),Q.invalidateQueries({queryKey:["gwc-layer",J,he]})}catch(Xe){U({title:"Failed to truncate cache",description:Xe instanceof Error?Xe.message:"Unknown error",status:"error",duration:5e3})}finally{L(!1)}},Be=async()=>{try{await _be(J,he),U({title:"Seed tasks terminated",status:"success",duration:3e3}),qe()}catch(Xe){U({title:"Failed to terminate tasks",description:Xe instanceof Error?Xe.message:"Unknown error",status:"error",duration:5e3})}},Me=Xe=>Xe<0?"Unknown":Xe<60?`${Xe}s`:Xe<3600?`${Math.floor(Xe/60)}m ${Xe%60}s`:`${Math.floor(Xe/3600)}h ${Math.floor(Xe%3600/60)}m`,Ge=Xe=>{switch(Xe){case"Running":return"blue";case"Pending":return"yellow";case"Done":return"green";case"Aborted":return"red";default:return"gray"}};return Y?u.jsxs(es,{isOpen:Y,onClose:r,size:"xl",isCentered:!0,children:[u.jsx(rs,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(ts,{borderRadius:"xl",overflow:"hidden",maxH:"85vh",children:[u.jsx(ue,{bg:"linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 100%)",px:6,py:4,children:u.jsxs(Ce,{spacing:3,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(He,{as:Kn,boxSize:5,color:"white"})}),u.jsxs(ue,{children:[u.jsx(ie,{color:"white",fontWeight:"600",fontSize:"lg",children:"Tile Cache Management"}),u.jsx(ie,{color:"whiteAlpha.800",fontSize:"sm",children:he})]})]})}),u.jsx(Fs,{color:"white"}),u.jsx(gs,{py:4,overflowY:"auto",children:Ze?u.jsxs(Ce,{justify:"center",py:6,children:[u.jsx(Nn,{size:"sm",color:"kartoza.500"}),u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"Loading cache info..."})]}):le?u.jsxs(p0,{index:i,onChange:s,colorScheme:"kartoza",children:[u.jsxs(m0,{children:[u.jsx(Ys,{children:"Seed / Truncate"}),u.jsxs(Ys,{children:["Progress",Ee&&Ee.length>0&&u.jsx(er,{ml:2,colorScheme:"blue",borderRadius:"full",children:Ee.length})]}),u.jsx(Ys,{children:"Info"})]}),u.jsxs(T1,{children:[u.jsx(ga,{px:0,children:u.jsxs(ft,{spacing:4,align:"stretch",children:[u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Grid Set"}),u.jsx(Rn,{value:a,onChange:Xe=>o(Xe.target.value),borderRadius:"lg",children:(Re=le.gridSubsets)==null?void 0:Re.map(Xe=>u.jsx("option",{value:Xe,children:Xe},Xe))})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Format"}),u.jsx(Rn,{value:d,onChange:Xe=>m(Xe.target.value),borderRadius:"lg",children:(nt=le.mimeFormats)==null?void 0:nt.map(Xe=>u.jsx("option",{value:Xe,children:Xe},Xe))})]}),u.jsxs(Ce,{spacing:4,children:[u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Zoom Start"}),u.jsxs(Ip,{value:y,onChange:(Xe,_t)=>b(_t||0),min:0,max:w,children:[u.jsx(Rp,{borderRadius:"lg"}),u.jsxs(Dp,{children:[u.jsx(Fp,{}),u.jsx(Lp,{})]})]})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Zoom Stop"}),u.jsxs(Ip,{value:w,onChange:(Xe,_t)=>O(_t||10),min:y,max:25,children:[u.jsx(Rp,{borderRadius:"lg"}),u.jsxs(Dp,{children:[u.jsx(Fp,{}),u.jsx(Lp,{})]})]})]})]}),u.jsxs(Ce,{spacing:4,children:[u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Operation"}),u.jsxs(Rn,{value:$,onChange:Xe=>R(Xe.target.value),borderRadius:"lg",children:[u.jsx("option",{value:"seed",children:"Seed (generate new tiles)"}),u.jsx("option",{value:"reseed",children:"Reseed (regenerate all tiles)"})]})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",color:"gray.700",children:"Threads"}),u.jsxs(Ip,{value:A,onChange:(Xe,_t)=>E(_t||1),min:1,max:16,children:[u.jsx(Rp,{borderRadius:"lg"}),u.jsxs(Dp,{children:[u.jsx(Fp,{}),u.jsx(Lp,{})]})]})]})]}),u.jsxs(Ce,{spacing:3,pt:4,children:[u.jsx(St,{leftIcon:u.jsx(He,{as:CI}),colorScheme:"kartoza",onClick:et,isLoading:F,flex:1,borderRadius:"lg",children:$==="seed"?"Seed Tiles":"Reseed Tiles"}),u.jsx(St,{leftIcon:u.jsx(He,{as:Nd}),colorScheme:"red",variant:"outline",onClick:at,isLoading:F,flex:1,borderRadius:"lg",children:"Truncate Cache"})]})]})}),u.jsx(ga,{px:0,children:u.jsxs(ft,{spacing:4,align:"stretch",children:[u.jsxs(Ce,{justify:"space-between",children:[u.jsx(ie,{fontWeight:"500",color:"gray.700",children:"Running Tasks"}),u.jsxs(Ce,{children:[u.jsx($r,{label:"Refresh status",children:u.jsx(br,{"aria-label":"Refresh",icon:u.jsx(He,{as:pf}),size:"sm",variant:"ghost",onClick:()=>qe()})}),Ee&&Ee.length>0&&u.jsx(St,{leftIcon:u.jsx(He,{as:yve}),size:"sm",colorScheme:"red",variant:"outline",onClick:Be,children:"Stop All"})]})]}),!Ee||Ee.length===0?u.jsxs(to,{status:"info",borderRadius:"md",children:[u.jsx(ro,{}),u.jsx(ie,{fontSize:"sm",children:"No active seeding tasks"})]}):u.jsx(ue,{border:"1px solid",borderColor:"gray.200",borderRadius:"lg",overflow:"hidden",children:u.jsxs(mI,{size:"sm",children:[u.jsx(T7,{bg:"gray.50",children:u.jsxs(v2,{children:[u.jsx($g,{children:"Status"}),u.jsx($g,{children:"Progress"}),u.jsx($g,{children:"Tiles"}),u.jsx($g,{children:"ETA"})]})}),u.jsx(C7,{children:Ee.map(Xe=>u.jsxs(v2,{children:[u.jsx(Bg,{children:u.jsx(er,{colorScheme:Ge(Xe.status),children:Xe.status})}),u.jsx(Bg,{children:u.jsxs(ft,{spacing:1,align:"stretch",children:[u.jsx(um,{value:Xe.progress,size:"sm",colorScheme:"kartoza",borderRadius:"full"}),u.jsxs(ie,{fontSize:"xs",color:"gray.500",children:[Xe.progress.toFixed(1),"%"]})]})}),u.jsx(Bg,{children:u.jsxs(ie,{fontSize:"sm",children:[Xe.tilesDone.toLocaleString()," / ",Xe.tilesTotal.toLocaleString()]})}),u.jsx(Bg,{children:u.jsx(ie,{fontSize:"sm",children:Me(Xe.timeRemaining)})})]},Xe.id))})]})})]})}),u.jsx(ga,{px:0,children:u.jsxs(ft,{spacing:3,align:"stretch",children:[u.jsxs(ue,{p:4,bg:"gray.50",borderRadius:"lg",children:[u.jsx(ie,{fontWeight:"500",mb:2,children:"Cache Status"}),u.jsx(Ce,{children:u.jsx(er,{colorScheme:le.enabled?"green":"red",children:le.enabled?"Enabled":"Disabled"})})]}),u.jsxs(ue,{p:4,bg:"gray.50",borderRadius:"lg",children:[u.jsx(ie,{fontWeight:"500",mb:2,children:"Available Grid Sets"}),u.jsx(Ce,{flexWrap:"wrap",gap:2,children:(ze=le.gridSubsets)==null?void 0:ze.map(Xe=>u.jsx(er,{colorScheme:"blue",variant:"subtle",children:Xe},Xe))})]}),u.jsxs(ue,{p:4,bg:"gray.50",borderRadius:"lg",children:[u.jsx(ie,{fontWeight:"500",mb:2,children:"Supported Formats"}),u.jsx(Ce,{flexWrap:"wrap",gap:2,children:(rt=le.mimeFormats)==null?void 0:rt.map(Xe=>u.jsx(er,{colorScheme:"purple",variant:"subtle",children:Xe},Xe))})]})]})})]})]}):u.jsxs(to,{status:"warning",borderRadius:"md",children:[u.jsx(ro,{}),u.jsx(ie,{fontSize:"sm",children:"No cache configuration found for this layer"})]})}),u.jsx(qo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:u.jsx(St,{variant:"ghost",onClick:r,borderRadius:"lg",children:"Close"})})]})]}):null}function W1e(){var _t,Mt,Et,yt;const t=bt(Je=>Je.activeDialog),e=bt(Je=>Je.dialogData),r=bt(Je=>Je.closeDialog),n=bt(Je=>Je.openDialog),i=Er(Je=>Je.selectedNode),s=Pa(),a=Go(),[o,d]=I.useState({enabled:!0,advertised:!0,queryable:!0}),[m,y]=I.useState(""),[b,w]=I.useState([]),[O,A]=I.useState({type:"text/html",metadataType:"TC211",content:""}),[E,$]=I.useState(""),[R,F]=I.useState([]),[L,U]=I.useState(!1),Q=t==="layer",Y=((_t=e==null?void 0:e.data)==null?void 0:_t.connectionId)||(i==null?void 0:i.connectionId)||"",Z=((Mt=e==null?void 0:e.data)==null?void 0:Mt.workspace)||(i==null?void 0:i.workspace)||"",J=((Et=e==null?void 0:e.data)==null?void 0:Et.layerName)||(i==null?void 0:i.name)||"",{data:re,isLoading:he}=Qr({queryKey:["layerMetadata",Y,Z,J],queryFn:()=>ibe(Y,Z,J),enabled:Q&&!!Y&&!!Z&&!!J}),{data:le}=Qr({queryKey:["styles",Y,Z],queryFn:()=>jI(Y,Z),enabled:Q&&!!Y&&!!Z}),{data:Ze,isLoading:Ee}=Qr({queryKey:["layerStyles",Y,Z,J],queryFn:()=>hU(Y,Z,J),enabled:Q&&!!Y&&!!Z&&!!J});I.useEffect(()=>{re&&(d({title:re.title||"",abstract:re.abstract||"",keywords:re.keywords||[],srs:re.srs||"",enabled:re.enabled,advertised:re.advertised,queryable:re.queryable,attributionTitle:re.attributionTitle||"",attributionHref:re.attributionHref||""}),w(re.metadataLinks||[]))},[re]),I.useEffect(()=>{Ze&&($(Ze.defaultStyle||""),F(Ze.additionalStyles||[]),U(!1))},[Ze]);const qe=Jc({mutationFn:Je=>obe(Y,Z,J,{...Je,metadataLinks:b}),onSuccess:()=>{s.invalidateQueries({queryKey:["layerMetadata",Y,Z,J]}),s.invalidateQueries({queryKey:["layer",Y,Z,J]}),s.invalidateQueries({queryKey:["layers",Y,Z]}),a({title:"Layer updated",description:"Layer metadata has been updated successfully.",status:"success",duration:3e3}),r()},onError:Je=>{a({title:"Error updating layer",description:Je.message,status:"error",duration:5e3})}}),et=Jc({mutationFn:()=>lbe(Y,Z,J,E,R),onSuccess:()=>{s.invalidateQueries({queryKey:["layerStyles",Y,Z,J]}),s.invalidateQueries({queryKey:["layer",Y,Z,J]}),U(!1),a({title:"Styles updated",description:"Layer styles have been updated successfully.",status:"success",duration:3e3})},onError:Je=>{a({title:"Error updating styles",description:Je.message,status:"error",duration:5e3})}}),at=(Je,Kt)=>{d(vt=>({...vt,[Je]:Kt}))},Be=()=>{var Je;m.trim()&&!((Je=o.keywords)!=null&&Je.includes(m.trim()))&&(d(Kt=>({...Kt,keywords:[...Kt.keywords||[],m.trim()]})),y(""))},Me=Je=>{d(Kt=>{var vt;return{...Kt,keywords:((vt=Kt.keywords)==null?void 0:vt.filter(st=>st!==Je))||[]}})},Ge=()=>{O.content.trim()&&(w(Je=>[...Je,{...O}]),A({type:"text/html",metadataType:"TC211",content:""}))},Le=Je=>{w(Kt=>Kt.filter((vt,st)=>st!==Je))},Ie=()=>{qe.mutate(o)},Oe=()=>{et.mutate()},Re=Je=>{U(!0),R.includes(Je)?F(R.filter(Kt=>Kt!==Je)):F([...R,Je])},nt=Je=>{U(!0),$(Je),R.includes(Je)&&F(R.filter(Kt=>Kt!==Je))},ze=()=>{r(),n("style",{mode:"create",data:{connectionId:Y,workspace:Z,forLayer:J}})},rt=Je=>{r(),n("style",{mode:"edit",data:{connectionId:Y,workspace:Z,name:Je}})},Xe=()=>{s.invalidateQueries({queryKey:["styles",Y,Z]}),s.invalidateQueries({queryKey:["layerStyles",Y,Z,J]}),a({title:"Styles refreshed",status:"info",duration:2e3})};return Q?u.jsxs(es,{isOpen:Q,onClose:r,size:"2xl",isCentered:!0,scrollBehavior:"inside",children:[u.jsx(rs,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(ts,{borderRadius:"xl",overflow:"hidden",maxH:"85vh",children:[u.jsx(ue,{bg:"linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 100%)",px:6,py:4,children:u.jsxs(Ce,{spacing:3,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(He,{as:Yi,boxSize:5,color:"white"})}),u.jsxs(ue,{children:[u.jsx(ie,{color:"white",fontWeight:"600",fontSize:"lg",children:"Edit Layer Metadata"}),u.jsx(ie,{color:"whiteAlpha.800",fontSize:"sm",children:J})]}),re&&u.jsx(er,{ml:"auto",colorScheme:re.storeType==="coveragestore"?"orange":"blue",px:2,py:1,borderRadius:"md",children:re.storeType==="coveragestore"?"Raster":"Vector"})]})}),u.jsx(Fs,{color:"white"}),u.jsx(gs,{py:4,overflowY:"auto",children:he?u.jsxs(ft,{py:10,children:[u.jsx(Nn,{size:"xl",color:"kartoza.500"}),u.jsx(ie,{color:"gray.500",children:"Loading layer metadata..."})]}):u.jsxs(p0,{variant:"enclosed",colorScheme:"kartoza",children:[u.jsxs(m0,{children:[u.jsx(Ys,{children:u.jsxs(Ce,{spacing:2,children:[u.jsx(He,{as:O1}),u.jsx(ie,{children:"Basic Info"})]})}),u.jsx(Ys,{children:u.jsxs(Ce,{spacing:2,children:[u.jsx(He,{as:Bo}),u.jsx(ie,{children:"Styles"})]})}),u.jsx(Ys,{children:u.jsxs(Ce,{spacing:2,children:[u.jsx(He,{as:Rl}),u.jsx(ie,{children:"Description"})]})}),u.jsx(Ys,{children:u.jsxs(Ce,{spacing:2,children:[u.jsx(He,{as:uve}),u.jsx(ie,{children:"Attribution"})]})})]}),u.jsxs(T1,{children:[u.jsx(ga,{px:0,py:4,children:u.jsxs(ft,{spacing:4,align:"stretch",children:[u.jsxs(Ot,{display:"flex",alignItems:"center",justifyContent:"space-between",p:3,bg:"gray.50",borderRadius:"lg",children:[u.jsxs(Ce,{children:[u.jsx(He,{as:Yi,color:"green.500"}),u.jsxs(ue,{children:[u.jsx(Pt,{mb:0,fontWeight:"500",children:"Enabled"}),u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Layer is available for use in GeoServer"})]})]}),u.jsx(la,{colorScheme:"green",size:"lg",isChecked:o.enabled,onChange:Je=>at("enabled",Je.target.checked)})]}),u.jsxs(Ot,{display:"flex",alignItems:"center",justifyContent:"space-between",p:3,bg:"gray.50",borderRadius:"lg",children:[u.jsxs(Ce,{children:[u.jsx(He,{as:wo,color:"blue.500"}),u.jsxs(ue,{children:[u.jsx(Pt,{mb:0,fontWeight:"500",children:"Advertised"}),u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Layer appears in GetCapabilities responses"})]})]}),u.jsx(la,{colorScheme:"blue",size:"lg",isChecked:o.advertised,onChange:Je=>at("advertised",Je.target.checked)})]}),u.jsxs(Ot,{display:"flex",alignItems:"center",justifyContent:"space-between",p:3,bg:"gray.50",borderRadius:"lg",children:[u.jsxs(Ce,{children:[u.jsx(He,{as:jb,color:"purple.500"}),u.jsxs(ue,{children:[u.jsx(Pt,{mb:0,fontWeight:"500",children:"Queryable"}),u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Layer supports GetFeatureInfo requests"})]})]}),u.jsx(la,{colorScheme:"purple",size:"lg",isChecked:o.queryable,onChange:Je=>at("queryable",Je.target.checked)})]}),u.jsx(Fr,{}),u.jsx(LM,{allowToggle:!0,children:u.jsxs($M,{border:"none",children:[u.jsxs(FM,{bg:"gray.50",borderRadius:"lg",_hover:{bg:"gray.100"},children:[u.jsx(ue,{flex:"1",textAlign:"left",children:u.jsx(ie,{fontWeight:"500",color:"gray.600",children:"Data Information"})}),u.jsx(BM,{})]}),u.jsxs(NM,{pb:4,children:[u.jsxs(nn,{columns:2,spacing:4,children:[u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Workspace"}),u.jsx(ie,{fontWeight:"medium",children:Z})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Store"}),u.jsx(ie,{fontWeight:"medium",children:(re==null?void 0:re.store)||"Unknown"})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Native Name"}),u.jsx(Yu,{fontSize:"sm",children:(re==null?void 0:re.nativeName)||(re==null?void 0:re.name)})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Default Style"}),u.jsx(ie,{fontWeight:"medium",children:(re==null?void 0:re.defaultStyle)||"None"})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Native CRS"}),u.jsx(Yu,{fontSize:"sm",children:(re==null?void 0:re.nativeCRS)||"Unknown"})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Declared SRS"}),u.jsx(Yu,{fontSize:"sm",children:(re==null?void 0:re.srs)||"Unknown"})]})]}),(re==null?void 0:re.nativeBoundingBox)&&u.jsxs(ue,{mt:4,children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",mb:2,children:"Native Bounding Box"}),u.jsxs(Yu,{display:"block",p:2,borderRadius:"md",fontSize:"xs",children:["(",re.nativeBoundingBox.minx.toFixed(4),", ",re.nativeBoundingBox.miny.toFixed(4),") - (",re.nativeBoundingBox.maxx.toFixed(4),", ",re.nativeBoundingBox.maxy.toFixed(4),")"]})]}),(re==null?void 0:re.latLonBoundingBox)&&u.jsxs(ue,{mt:4,children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",mb:2,children:"Lat/Lon Bounding Box"}),u.jsxs(Yu,{display:"block",p:2,borderRadius:"md",fontSize:"xs",children:["(",re.latLonBoundingBox.minx.toFixed(4),", ",re.latLonBoundingBox.miny.toFixed(4),") - (",re.latLonBoundingBox.maxx.toFixed(4),", ",re.latLonBoundingBox.maxy.toFixed(4),")"]})]})]})]})})]})}),u.jsx(ga,{px:0,py:4,children:u.jsxs(ft,{spacing:4,align:"stretch",children:[u.jsx(ue,{p:4,bg:"blue.50",borderRadius:"lg",borderLeft:"4px solid",borderLeftColor:"blue.400",children:u.jsxs(ie,{fontSize:"sm",color:"blue.700",children:[u.jsx("strong",{children:"Styles"})," control how your layer is rendered on the map. Select a default style and optionally add additional styles that users can choose from."]})}),u.jsxs(Ce,{spacing:2,children:[u.jsx(St,{size:"sm",colorScheme:"kartoza",leftIcon:u.jsx(He,{as:fs}),onClick:ze,children:"Create New Style"}),u.jsx(br,{"aria-label":"Refresh styles",icon:u.jsx(pf,{}),size:"sm",variant:"outline",onClick:Xe})]}),Ee?u.jsxs(ft,{py:6,children:[u.jsx(Nn,{size:"md",color:"kartoza.500"}),u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"Loading styles..."})]}):u.jsx(u.Fragment,{children:!le||le.length===0?u.jsxs(ue,{p:6,bg:"orange.50",borderRadius:"lg",border:"2px dashed",borderColor:"orange.200",textAlign:"center",children:[u.jsx(He,{as:Bo,boxSize:8,color:"orange.400",mb:3}),u.jsx(ie,{fontWeight:"600",color:"orange.700",mb:2,children:"No Styles Available"}),u.jsx(ie,{fontSize:"sm",color:"orange.600",mb:4,children:"This workspace doesn't have any styles yet. Create a new style to customize how your layer appears on the map."}),u.jsx(St,{colorScheme:"orange",leftIcon:u.jsx(He,{as:fs}),onClick:ze,children:"Create Your First Style"})]}):u.jsxs(u.Fragment,{children:[u.jsxs(ue,{children:[u.jsx(ie,{fontWeight:"600",mb:3,children:"Default Style"}),u.jsx(ie,{fontSize:"xs",color:"gray.500",mb:3,children:"The style used when no specific style is requested"}),u.jsx(b7,{value:E,onChange:nt,children:u.jsx(k1,{spacing:2,children:le==null?void 0:le.map(Je=>u.jsx(ue,{p:3,bg:E===Je.name?"kartoza.50":"gray.50",borderRadius:"lg",border:"2px solid",borderColor:E===Je.name?"kartoza.500":"transparent",_hover:{borderColor:"kartoza.300"},transition:"all 0.15s",children:u.jsxs(Ce,{justify:"space-between",children:[u.jsx(_7,{value:Je.name,colorScheme:"kartoza",flex:"1",children:u.jsxs(Ce,{spacing:2,children:[u.jsx(He,{as:Bo,color:"pink.500"}),u.jsx(ie,{fontWeight:E===Je.name?"600":"normal",children:Je.name})]})}),u.jsxs(Ce,{spacing:2,children:[E===Je.name&&u.jsx(er,{colorScheme:"kartoza",children:u.jsxs(Ce,{spacing:1,children:[u.jsx(He,{as:gve,boxSize:3}),u.jsx(ie,{children:"Default"})]})}),u.jsx(br,{"aria-label":"Edit style",icon:u.jsx(gc,{}),size:"xs",variant:"ghost",colorScheme:"blue",onClick:Kt=>{Kt.stopPropagation(),rt(Je.name)}})]})]})},Je.name))})})]}),u.jsx(Fr,{}),u.jsxs(ue,{children:[u.jsx(ie,{fontWeight:"600",mb:3,children:"Additional Styles"}),u.jsx(ie,{fontSize:"xs",color:"gray.500",mb:3,children:"Additional styles that users can choose from when viewing this layer"}),u.jsx(ft,{align:"stretch",spacing:2,children:le==null?void 0:le.filter(Je=>Je.name!==E).map(Je=>u.jsx(ue,{p:3,bg:R.includes(Je.name)?"green.50":"gray.50",borderRadius:"lg",border:"2px solid",borderColor:R.includes(Je.name)?"green.500":"transparent",_hover:{borderColor:"green.300"},transition:"all 0.15s",children:u.jsxs(Ce,{justify:"space-between",children:[u.jsx(Ua,{isChecked:R.includes(Je.name),onChange:()=>Re(Je.name),colorScheme:"green",flex:"1",children:u.jsxs(Ce,{spacing:2,children:[u.jsx(He,{as:Bo,color:"pink.500"}),u.jsx(ie,{children:Je.name})]})}),u.jsx(br,{"aria-label":"Edit style",icon:u.jsx(gc,{}),size:"xs",variant:"ghost",colorScheme:"blue",onClick:Kt=>{Kt.stopPropagation(),rt(Je.name)}})]})},Je.name))}),(le==null?void 0:le.filter(Je=>Je.name!==E).length)===0&&u.jsx(ie,{fontSize:"sm",color:"gray.500",fontStyle:"italic",mt:2,children:"All available styles are either set as default or not yet created"})]}),L&&u.jsx(St,{colorScheme:"kartoza",onClick:Oe,isLoading:et.isPending,leftIcon:u.jsx(He,{as:Bo}),children:"Save Style Changes"})]})})]})}),u.jsx(ga,{px:0,py:4,children:u.jsxs(ft,{spacing:4,align:"stretch",children:[u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",children:"Title"}),u.jsx(Ar,{value:o.title||"",onChange:Je=>at("title",Je.target.value),placeholder:"Human-readable layer title",bg:"gray.50",borderRadius:"lg"}),u.jsx(ie,{fontSize:"xs",color:"gray.500",mt:1,children:"A short descriptive name for the layer"})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",children:"Abstract / Description"}),u.jsx(eC,{value:o.abstract||"",onChange:Je=>at("abstract",Je.target.value),placeholder:"Detailed description of the layer content, purpose, and data source...",bg:"gray.50",borderRadius:"lg",rows:4}),u.jsx(ie,{fontSize:"xs",color:"gray.500",mt:1,children:"A longer description of the layer for metadata and documentation"})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",children:"Keywords"}),u.jsxs(Ce,{children:[u.jsx(Ar,{value:m,onChange:Je=>y(Je.target.value),placeholder:"Add a keyword...",bg:"gray.50",borderRadius:"lg",onKeyPress:Je=>Je.key==="Enter"&&Be()}),u.jsx(br,{"aria-label":"Add keyword",icon:u.jsx(fs,{}),colorScheme:"kartoza",onClick:Be,borderRadius:"lg"})]}),u.jsx(Tb,{mt:2,spacing:2,children:(yt=o.keywords)==null?void 0:yt.map(Je=>u.jsx(Hy,{children:u.jsxs(Qy,{size:"md",colorScheme:"blue",borderRadius:"full",children:[u.jsx(Cb,{children:Je}),u.jsx(E7,{onClick:()=>Me(Je)})]})},Je))}),u.jsx(ie,{fontSize:"xs",color:"gray.500",mt:1,children:"Keywords help users find this layer in searches"})]})]})}),u.jsx(ga,{px:0,py:4,children:u.jsxs(ft,{spacing:4,align:"stretch",children:[u.jsx(ue,{p:4,bg:"blue.50",borderRadius:"lg",borderLeft:"4px solid",borderLeftColor:"blue.400",children:u.jsxs(ie,{fontSize:"sm",color:"blue.700",children:[u.jsx("strong",{children:"Attribution"})," provides credit to the data source and is displayed in WMS GetCapabilities and map clients."]})}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",children:"Attribution Title"}),u.jsx(Ar,{value:o.attributionTitle||"",onChange:Je=>at("attributionTitle",Je.target.value),placeholder:"e.g., Data provided by...",bg:"gray.50",borderRadius:"lg"})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontWeight:"500",children:"Attribution Link (URL)"}),u.jsx(Ar,{value:o.attributionHref||"",onChange:Je=>at("attributionHref",Je.target.value),placeholder:"https://example.com/data-source",bg:"gray.50",borderRadius:"lg"})]}),u.jsx(Fr,{}),u.jsxs(ue,{children:[u.jsx(ie,{fontWeight:"500",mb:3,children:"Metadata Links"}),u.jsx(ie,{fontSize:"xs",color:"gray.500",mb:3,children:"Links to external metadata documents (ISO 19115, FGDC, etc.)"}),b.length>0&&u.jsx(ft,{spacing:2,mb:4,align:"stretch",children:b.map((Je,Kt)=>u.jsxs(Ce,{p:3,bg:"gray.50",borderRadius:"lg",justify:"space-between",children:[u.jsxs(ft,{align:"start",spacing:0,children:[u.jsxs(Ce,{children:[u.jsx(er,{colorScheme:"purple",children:Je.metadataType}),u.jsx(er,{colorScheme:"gray",children:Je.type})]}),u.jsx(ie,{fontSize:"sm",color:"gray.600",isTruncated:!0,maxW:"300px",children:Je.content})]}),u.jsx(br,{"aria-label":"Remove link",icon:u.jsx(Nd,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>Le(Kt)})]},Kt))}),u.jsxs(ue,{p:4,bg:"gray.50",borderRadius:"lg",children:[u.jsx(ie,{fontWeight:"500",fontSize:"sm",mb:3,children:"Add Metadata Link"}),u.jsxs(ft,{spacing:3,children:[u.jsxs(Ce,{w:"100%",children:[u.jsxs(Ot,{flex:1,children:[u.jsx(Pt,{fontSize:"xs",children:"Type"}),u.jsx(Ar,{size:"sm",value:O.type,onChange:Je=>A({...O,type:Je.target.value}),placeholder:"text/html"})]}),u.jsxs(Ot,{flex:1,children:[u.jsx(Pt,{fontSize:"xs",children:"Metadata Type"}),u.jsx(Ar,{size:"sm",value:O.metadataType,onChange:Je=>A({...O,metadataType:Je.target.value}),placeholder:"TC211"})]})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"xs",children:"URL"}),u.jsxs(Ce,{children:[u.jsx(Ar,{size:"sm",value:O.content,onChange:Je=>A({...O,content:Je.target.value}),placeholder:"https://example.com/metadata.xml"}),u.jsx(br,{"aria-label":"Add link",icon:u.jsx(fs,{}),size:"sm",colorScheme:"kartoza",onClick:Ge})]})]})]})]})]})]})})]})]})}),u.jsxs(qo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:[u.jsx(St,{variant:"ghost",onClick:r,borderRadius:"lg",children:"Cancel"}),u.jsx(St,{colorScheme:"kartoza",onClick:Ie,isLoading:qe.isPending,borderRadius:"lg",px:6,children:"Save Changes"})]})]})]}):null}function U1e(){var w,O,A;const t=bt(E=>E.activeDialog),e=bt(E=>E.dialogData),r=bt(E=>E.closeDialog),n=Er(E=>E.selectedNode),i=t==="datastore"||t==="coveragestore",s=t==="datastore",a=(e==null?void 0:e.mode)==="edit",o=((w=e==null?void 0:e.data)==null?void 0:w.connectionId)||(n==null?void 0:n.connectionId)||"",d=((O=e==null?void 0:e.data)==null?void 0:O.workspace)||(n==null?void 0:n.workspace)||"",m=((A=e==null?void 0:e.data)==null?void 0:A.storeName)||(n==null?void 0:n.name)||"",{data:y,isLoading:b}=Qr({queryKey:[s?"datastores":"coveragestores",o,d,m],queryFn:()=>s?oU(o,d,m):cU(o,d,m),enabled:i&&a&&!!o&&!!d&&!!m});return i?u.jsxs(es,{isOpen:i,onClose:r,size:"xl",isCentered:!0,children:[u.jsx(rs,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(ts,{borderRadius:"xl",overflow:"hidden",maxH:"85vh",children:[u.jsx(ue,{bg:s?"linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 100%)":"linear-gradient(135deg, #D4922A 0%, #E8A331 100%)",px:6,py:4,children:u.jsxs(Ce,{spacing:3,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(He,{as:s?Kn:mu,boxSize:5,color:"white"})}),u.jsxs(ue,{children:[u.jsx(ie,{color:"white",fontWeight:"600",fontSize:"lg",children:s?"Data Store Details":"Coverage Store Details"}),u.jsx(ie,{color:"whiteAlpha.800",fontSize:"sm",children:m})]})]})}),u.jsx(Fs,{color:"white"}),u.jsx(gs,{py:6,overflowY:"auto",children:b?u.jsxs(ft,{py:10,children:[u.jsx(Nn,{size:"xl",color:"kartoza.500"}),u.jsx(ie,{color:"gray.500",children:"Loading store details..."})]}):y?u.jsxs(ft,{spacing:6,align:"stretch",children:[u.jsxs(ue,{p:4,bg:"gray.50",borderRadius:"lg",children:[u.jsxs(Ce,{mb:3,children:[u.jsx(He,{as:O1,color:"kartoza.500"}),u.jsx(ie,{fontWeight:"bold",color:"gray.600",children:"Store Information"})]}),u.jsxs(nn,{columns:{base:1,md:2},spacing:4,children:[u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Name"}),u.jsx(ie,{fontWeight:"medium",children:y.name})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Type"}),u.jsxs(Ce,{children:[u.jsx(ie,{fontWeight:"medium",children:y.type||"Unknown"}),u.jsx(er,{colorScheme:s?"blue":"orange",children:s?"Vector":"Raster"})]})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Workspace"}),u.jsxs(Ce,{children:[u.jsx(He,{as:uh,color:"gray.400",boxSize:4}),u.jsx(ie,{fontWeight:"medium",children:d})]})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Status"}),u.jsx(er,{colorScheme:y.enabled?"green":"gray",fontSize:"sm",children:y.enabled?"Enabled":"Disabled"})]})]})]}),!s&&y.description&&u.jsxs(u.Fragment,{children:[u.jsx(Fr,{}),u.jsxs(ue,{children:[u.jsx(ie,{fontWeight:"bold",color:"gray.600",mb:2,children:"Description"}),u.jsx(ie,{color:"gray.600",children:y.description})]})]}),u.jsx(LM,{allowToggle:!0,children:u.jsxs($M,{border:"none",children:[u.jsxs(FM,{bg:"gray.50",borderRadius:"lg",_hover:{bg:"gray.100"},children:[u.jsx(ue,{flex:"1",textAlign:"left",children:u.jsx(ie,{fontWeight:"500",color:"gray.600",children:"Technical Details"})}),u.jsx(BM,{})]}),u.jsx(NM,{pb:4,children:u.jsxs(ft,{align:"stretch",spacing:2,children:[u.jsxs(Ce,{justify:"space-between",children:[u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"Store Type:"}),u.jsx(Yu,{fontSize:"sm",children:y.type||"Unknown"})]}),u.jsxs(Ce,{justify:"space-between",children:[u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"Workspace:"}),u.jsx(Yu,{fontSize:"sm",children:d})]}),u.jsxs(Ce,{justify:"space-between",children:[u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"Enabled:"}),u.jsx(Yu,{fontSize:"sm",children:y.enabled?"true":"false"})]})]})})]})}),u.jsx(ue,{p:4,bg:"blue.50",borderRadius:"lg",borderLeft:"4px solid",borderLeftColor:"blue.400",children:u.jsxs(ie,{fontSize:"sm",color:"blue.700",children:[u.jsx("strong",{children:"Note:"})," Store configuration (connection parameters, file paths, etc.) can be modified through the GeoServer admin interface. This view shows the current store metadata."]})})]}):u.jsx(ft,{py:10,children:u.jsx(ie,{color:"gray.500",children:"Store not found"})})}),u.jsx(qo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:u.jsx(St,{colorScheme:"kartoza",onClick:r,borderRadius:"lg",px:6,children:"Close"})})]})]}):null}function q1e(){const t=bt(s=>s.activeDialog),e=bt(s=>s.closeDialog),r=bt(s=>s.settings),n=bt(s=>s.setShowHiddenPGServices),i=t==="settings";return u.jsxs(es,{isOpen:i,onClose:e,size:"md",isCentered:!0,children:[u.jsx(rs,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(ts,{borderRadius:"xl",overflow:"hidden",children:[u.jsx(ue,{bg:"linear-gradient(135deg, #4A5568 0%, #2D3748 100%)",px:6,py:4,children:u.jsxs(Ce,{spacing:3,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(He,{as:P1,boxSize:5,color:"white"})}),u.jsxs(ue,{children:[u.jsx(ie,{color:"white",fontWeight:"600",fontSize:"lg",children:"Settings"}),u.jsx(ie,{color:"whiteAlpha.800",fontSize:"sm",children:"Configure application preferences"})]})]})}),u.jsx(Fs,{color:"white"}),u.jsx(gs,{py:6,children:u.jsxs(ft,{spacing:6,align:"stretch",children:[u.jsxs(ue,{children:[u.jsxs(Ce,{spacing:2,mb:4,children:[u.jsx(He,{as:Ky,color:"blue.600"}),u.jsx(ie,{fontWeight:"600",color:"gray.700",children:"PostgreSQL Services"})]}),u.jsxs(Ot,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[u.jsxs(Ce,{spacing:3,children:[u.jsx(He,{as:wo,color:"gray.500"}),u.jsxs(ue,{children:[u.jsx(Pt,{htmlFor:"show-hidden-pg",mb:0,cursor:"pointer",children:"Show hidden services"}),u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Display hidden PostgreSQL services in tree and dashboard"})]})]}),u.jsx(la,{id:"show-hidden-pg",colorScheme:"blue",isChecked:r.showHiddenPGServices,onChange:s=>n(s.target.checked)})]})]}),u.jsx(Fr,{}),u.jsx(ue,{children:u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"Hidden services are commented out in your pg_service.conf file. They won't be used by applications but can be restored later."})})]})}),u.jsx(qo,{borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:u.jsx(St,{onClick:e,colorScheme:"blue",borderRadius:"lg",children:"Done"})})]})]})}let VA=[],SU=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,r=0;e<t.length;e++)(e%2?SU:VA).push(r=r+t[e])})();function Q1e(t){if(t<768)return!1;for(let e=0,r=VA.length;;){let n=e+r>>1;if(t<VA[n])r=n;else if(t>=SU[n])e=n+1;else return!0;if(e==r)return!1}}function dF(t){return t>=127462&&t<=127487}const fF=8205;function H1e(t,e,r=!0,n=!0){return(r?kU:G1e)(t,e,n)}function kU(t,e,r){if(e==t.length)return e;e&&CU(t.charCodeAt(e))&&TU(t.charCodeAt(e-1))&&e--;let n=XO(t,e);for(e+=pF(n);e<t.length;){let i=XO(t,e);if(n==fF||i==fF||r&&Q1e(i))e+=pF(i),n=i;else if(dF(i)){let s=0,a=e-2;for(;a>=0&&dF(XO(t,a));)s++,a-=2;if(s%2==0)break;e+=2}else break}return e}function G1e(t,e,r){for(;e>0;){let n=kU(t,e-2,r);if(n<e)return n;e--}return 0}function XO(t,e){let r=t.charCodeAt(e);if(!TU(r)||e+1==t.length)return r;let n=t.charCodeAt(e+1);return CU(n)?(r-55296<<10)+(n-56320)+65536:r}function CU(t){return t>=56320&&t<57344}function TU(t){return t>=55296&&t<56320}function pF(t){return t<65536?1:2}class Sn{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,r,n){[e,r]=Zy(this,e,r);let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(r,this.length,i,1),eu.from(i,this.length-(r-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,r=this.length){[e,r]=Zy(this,e,r);let n=[];return this.decompose(e,r,n,0),eu.from(n,r-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let r=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new Rv(this),s=new Rv(e);for(let a=r,o=r;;){if(i.next(a),s.next(a),a=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=n)return!0}}iter(e=1){return new Rv(this,e)}iterRange(e,r=this.length){return new OU(this,e,r)}iterLines(e,r){let n;if(e==null)n=this.iter();else{r==null&&(r=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,r==this.lines+1?this.length:r<=1?0:this.line(r-1).to))}return new PU(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Sn.empty:e.length<=32?new Li(e):eu.from(Li.split(e,[]))}}class Li extends Sn{constructor(e,r=X1e(e)){super(),this.text=e,this.length=r}get lines(){return this.text.length}get children(){return null}lineInner(e,r,n,i){for(let s=0;;s++){let a=this.text[s],o=i+a.length;if((r?n:o)>=e)return new K1e(i,o,n,a);i=o+1,n++}}decompose(e,r,n,i){let s=e<=0&&r>=this.length?this:new Li(mF(this.text,e,r),Math.min(r,this.length)-Math.max(0,e));if(i&1){let a=n.pop(),o=SS(s.text,a.text.slice(),0,s.length);if(o.length<=32)n.push(new Li(o,a.length+s.length));else{let d=o.length>>1;n.push(new Li(o.slice(0,d)),new Li(o.slice(d)))}}else n.push(s)}replace(e,r,n){if(!(n instanceof Li))return super.replace(e,r,n);[e,r]=Zy(this,e,r);let i=SS(this.text,SS(n.text,mF(this.text,0,e)),r),s=this.length+n.length-(r-e);return i.length<=32?new Li(i,s):eu.from(Li.split(i,[]),s)}sliceString(e,r=this.length,n=`
`){[e,r]=Zy(this,e,r);let i="";for(let s=0,a=0;s<=r&&a<this.text.length;a++){let o=this.text[a],d=s+o.length;s>e&&a&&(i+=n),e<d&&r>s&&(i+=o.slice(Math.max(0,e-s),r-s)),s=d+1}return i}flatten(e){for(let r of this.text)e.push(r)}scanIdentical(){return 0}static split(e,r){let n=[],i=-1;for(let s of e)n.push(s),i+=s.length+1,n.length==32&&(r.push(new Li(n,i)),n=[],i=-1);return i>-1&&r.push(new Li(n,i)),r}}class eu extends Sn{constructor(e,r){super(),this.children=e,this.length=r,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,r,n,i){for(let s=0;;s++){let a=this.children[s],o=i+a.length,d=n+a.lines-1;if((r?d:o)>=e)return a.lineInner(e,r,n,i);i=o+1,n=d+1}}decompose(e,r,n,i){for(let s=0,a=0;a<=r&&s<this.children.length;s++){let o=this.children[s],d=a+o.length;if(e<=d&&r>=a){let m=i&((a<=e?1:0)|(d>=r?2:0));a>=e&&d<=r&&!m?n.push(o):o.decompose(e-a,r-a,n,m)}a=d+1}}replace(e,r,n){if([e,r]=Zy(this,e,r),n.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let a=this.children[i],o=s+a.length;if(e>=s&&r<=o){let d=a.replace(e-s,r-s,n),m=this.lines-a.lines+d.lines;if(d.lines<m>>4&&d.lines>m>>6){let y=this.children.slice();return y[i]=d,new eu(y,this.length-(r-e)+n.length)}return super.replace(s,o,d)}s=o+1}return super.replace(e,r,n)}sliceString(e,r=this.length,n=`
`){[e,r]=Zy(this,e,r);let i="";for(let s=0,a=0;s<this.children.length&&a<=r;s++){let o=this.children[s],d=a+o.length;a>e&&s&&(i+=n),e<d&&r>a&&(i+=o.sliceString(e-a,r-a,n)),a=d+1}return i}flatten(e){for(let r of this.children)r.flatten(e)}scanIdentical(e,r){if(!(e instanceof eu))return 0;let n=0,[i,s,a,o]=r>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=r,s+=r){if(i==a||s==o)return n;let d=this.children[i],m=e.children[s];if(d!=m)return n+d.scanIdentical(m,r);n+=d.length+1}}static from(e,r=e.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let O of e)n+=O.lines;if(n<32){let O=[];for(let A of e)A.flatten(O);return new Li(O,r)}let i=Math.max(32,n>>5),s=i<<1,a=i>>1,o=[],d=0,m=-1,y=[];function b(O){let A;if(O.lines>s&&O instanceof eu)for(let E of O.children)b(E);else O.lines>a&&(d>a||!d)?(w(),o.push(O)):O instanceof Li&&d&&(A=y[y.length-1])instanceof Li&&O.lines+A.lines<=32?(d+=O.lines,m+=O.length+1,y[y.length-1]=new Li(A.text.concat(O.text),A.length+1+O.length)):(d+O.lines>i&&w(),d+=O.lines,m+=O.length+1,y.push(O))}function w(){d!=0&&(o.push(y.length==1?y[0]:eu.from(y,m)),m=-1,d=y.length=0)}for(let O of e)b(O);return w(),o.length==1?o[0]:new eu(o,r)}}Sn.empty=new Li([""],0);function X1e(t){let e=-1;for(let r of t)e+=r.length+1;return e}function SS(t,e,r=0,n=1e9){for(let i=0,s=0,a=!0;s<t.length&&i<=n;s++){let o=t[s],d=i+o.length;d>=r&&(d>n&&(o=o.slice(0,n-i)),i<r&&(o=o.slice(r-i)),a?(e[e.length-1]+=o,a=!1):e.push(o)),i=d+1}return e}function mF(t,e,r){return SS(t,[""],e,r)}class Rv{constructor(e,r=1){this.dir=r,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[r>0?1:(e instanceof Li?e.text.length:e.children.length)<<1]}nextInner(e,r){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],s=this.offsets[n],a=s>>1,o=i instanceof Li?i.text.length:i.children.length;if(a==(r>0?o:0)){if(n==0)return this.done=!0,this.value="",this;r>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(r>0?0:1)){if(this.offsets[n]+=r,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Li){let d=i.text[a+(r<0?-1:0)];if(this.offsets[n]+=r,d.length>Math.max(0,e))return this.value=e==0?d:r>0?d.slice(e):d.slice(0,d.length-e),this;e-=d.length}else{let d=i.children[a+(r<0?-1:0)];e>d.length?(e-=d.length,this.offsets[n]+=r):(r<0&&this.offsets[n]--,this.nodes.push(d),this.offsets.push(r>0?1:(d instanceof Li?d.text.length:d.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class OU{constructor(e,r,n){this.value="",this.done=!1,this.cursor=new Rv(e,r>n?-1:1),this.pos=r>n?e.length:0,this.from=Math.min(r,n),this.to=Math.max(r,n)}nextInner(e,r){if(r<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,r<0?this.pos-this.to:this.from-this.pos);let n=r<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*r,this.value=i.length<=n?i:r<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class PU{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:r,lineBreak:n,value:i}=this.inner.next(e);return r&&this.afterBreak?(this.value="",this.afterBreak=!1):r?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Sn.prototype[Symbol.iterator]=function(){return this.iter()},Rv.prototype[Symbol.iterator]=OU.prototype[Symbol.iterator]=PU.prototype[Symbol.iterator]=function(){return this});class K1e{constructor(e,r,n,i){this.from=e,this.to=r,this.number=n,this.text=i}get length(){return this.to-this.from}}function Zy(t,e,r){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,r))]}function ps(t,e,r=!0,n=!0){return H1e(t,e,r,n)}function Z1e(t){return t>=56320&&t<57344}function Y1e(t){return t>=55296&&t<56320}function ua(t,e){let r=t.charCodeAt(e);if(!Y1e(r)||e+1==t.length)return r;let n=t.charCodeAt(e+1);return Z1e(n)?(r-55296<<10)+(n-56320)+65536:r}function EI(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function tu(t){return t<65536?1:2}const WA=/\r\n?|\n/;var $o=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}($o||($o={}));class fu{constructor(e){this.sections=e}get length(){let e=0;for(let r=0;r<this.sections.length;r+=2)e+=this.sections[r];return e}get newLength(){let e=0;for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r+1];e+=n<0?this.sections[r]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let r=0,n=0,i=0;r<this.sections.length;){let s=this.sections[r++],a=this.sections[r++];a<0?(e(n,i,s),i+=s):i+=a,n+=s}}iterChangedRanges(e,r=!1){UA(this,e,r)}get invertedDesc(){let e=[];for(let r=0;r<this.sections.length;){let n=this.sections[r++],i=this.sections[r++];i<0?e.push(n,i):e.push(i,n)}return new fu(e)}composeDesc(e){return this.empty?e:e.empty?this:jU(this,e)}mapDesc(e,r=!1){return e.empty?this:qA(this,e,r)}mapPos(e,r=-1,n=$o.Simple){let i=0,s=0;for(let a=0;a<this.sections.length;){let o=this.sections[a++],d=this.sections[a++],m=i+o;if(d<0){if(m>e)return s+(e-i);s+=o}else{if(n!=$o.Simple&&m>=e&&(n==$o.TrackDel&&i<e&&m>e||n==$o.TrackBefore&&i<e||n==$o.TrackAfter&&m>e))return null;if(m>e||m==e&&r<0&&!o)return e==i||r<0?s:s+d;s+=d}i=m}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,r=e){for(let n=0,i=0;n<this.sections.length&&i<=r;){let s=this.sections[n++],a=this.sections[n++],o=i+s;if(a>=0&&i<=r&&o>=e)return i<e&&o>r?"cover":!0;i=o}return!1}toString(){let e="";for(let r=0;r<this.sections.length;){let n=this.sections[r++],i=this.sections[r++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(r=>typeof r!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new fu(e)}static create(e){return new fu(e)}}class us extends fu{constructor(e,r){super(e),this.inserted=r}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return UA(this,(r,n,i,s,a)=>e=e.replace(i,i+(n-r),a),!1),e}mapDesc(e,r=!1){return qA(this,e,r,!0)}invert(e){let r=this.sections.slice(),n=[];for(let i=0,s=0;i<r.length;i+=2){let a=r[i],o=r[i+1];if(o>=0){r[i]=o,r[i+1]=a;let d=i>>1;for(;n.length<d;)n.push(Sn.empty);n.push(a?e.slice(s,s+a):Sn.empty)}s+=a}return new us(r,n)}compose(e){return this.empty?e:e.empty?this:jU(this,e,!0)}map(e,r=!1){return e.empty?this:qA(this,e,r,!0)}iterChanges(e,r=!1){UA(this,e,r)}get desc(){return fu.create(this.sections)}filter(e){let r=[],n=[],i=[],s=new Ab(this);e:for(let a=0,o=0;;){let d=a==e.length?1e9:e[a++];for(;o<d||o==d&&s.len==0;){if(s.done)break e;let y=Math.min(s.len,d-o);vo(i,y,-1);let b=s.ins==-1?-1:s.off==0?s.ins:0;vo(r,y,b),b>0&&Ad(n,r,s.text),s.forward(y),o+=y}let m=e[a++];for(;o<m;){if(s.done)break e;let y=Math.min(s.len,m-o);vo(r,y,-1),vo(i,y,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(y),o+=y}}return{changes:new us(r,n),filtered:fu.create(i)}}toJSON(){let e=[];for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r],i=this.sections[r+1];i<0?e.push(n):i==0?e.push([n]):e.push([n].concat(this.inserted[r>>1].toJSON()))}return e}static of(e,r,n){let i=[],s=[],a=0,o=null;function d(y=!1){if(!y&&!i.length)return;a<r&&vo(i,r-a,-1);let b=new us(i,s);o=o?o.compose(b.map(o)):b,i=[],s=[],a=0}function m(y){if(Array.isArray(y))for(let b of y)m(b);else if(y instanceof us){if(y.length!=r)throw new RangeError(`Mismatched change set length (got ${y.length}, expected ${r})`);d(),o=o?o.compose(y.map(o)):y}else{let{from:b,to:w=b,insert:O}=y;if(b>w||b<0||w>r)throw new RangeError(`Invalid change range ${b} to ${w} (in doc of length ${r})`);let A=O?typeof O=="string"?Sn.of(O.split(n||WA)):O:Sn.empty,E=A.length;if(b==w&&E==0)return;b<a&&d(),b>a&&vo(i,b-a,-1),vo(i,w-b,E),Ad(s,i,A),a=w}}return m(e),d(!o),o}static empty(e){return new us(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let r=[],n=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")r.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((a,o)=>o&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)r.push(s[0],0);else{for(;n.length<i;)n.push(Sn.empty);n[i]=Sn.of(s.slice(1)),r.push(s[0],n[i].length)}}}return new us(r,n)}static createSet(e,r){return new us(e,r)}}function vo(t,e,r,n=!1){if(e==0&&r<=0)return;let i=t.length-2;i>=0&&r<=0&&r==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=r:n?(t[i]+=e,t[i+1]+=r):t.push(e,r)}function Ad(t,e,r){if(r.length==0)return;let n=e.length-2>>1;if(n<t.length)t[t.length-1]=t[t.length-1].append(r);else{for(;t.length<n;)t.push(Sn.empty);t.push(r)}}function UA(t,e,r){let n=t.inserted;for(let i=0,s=0,a=0;a<t.sections.length;){let o=t.sections[a++],d=t.sections[a++];if(d<0)i+=o,s+=o;else{let m=i,y=s,b=Sn.empty;for(;m+=o,y+=d,d&&n&&(b=b.append(n[a-2>>1])),!(r||a==t.sections.length||t.sections[a+1]<0);)o=t.sections[a++],d=t.sections[a++];e(i,m,s,y,b),i=m,s=y}}}function qA(t,e,r,n=!1){let i=[],s=n?[]:null,a=new Ab(t),o=new Ab(e);for(let d=-1;;){if(a.done&&o.len||o.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&o.ins==-1){let m=Math.min(a.len,o.len);vo(i,m,-1),a.forward(m),o.forward(m)}else if(o.ins>=0&&(a.ins<0||d==a.i||a.off==0&&(o.len<a.len||o.len==a.len&&!r))){let m=o.len;for(vo(i,o.ins,-1);m;){let y=Math.min(a.len,m);a.ins>=0&&d<a.i&&a.len<=y&&(vo(i,0,a.ins),s&&Ad(s,i,a.text),d=a.i),a.forward(y),m-=y}o.next()}else if(a.ins>=0){let m=0,y=a.len;for(;y;)if(o.ins==-1){let b=Math.min(y,o.len);m+=b,y-=b,o.forward(b)}else if(o.ins==0&&o.len<y)y-=o.len,o.next();else break;vo(i,m,d<a.i?a.ins:0),s&&d<a.i&&Ad(s,i,a.text),d=a.i,a.forward(a.len-y)}else{if(a.done&&o.done)return s?us.createSet(i,s):fu.create(i);throw new Error("Mismatched change set lengths")}}}function jU(t,e,r=!1){let n=[],i=r?[]:null,s=new Ab(t),a=new Ab(e);for(let o=!1;;){if(s.done&&a.done)return i?us.createSet(n,i):fu.create(n);if(s.ins==0)vo(n,s.len,0,o),s.next();else if(a.len==0&&!a.done)vo(n,0,a.ins,o),i&&Ad(i,n,a.text),a.next();else{if(s.done||a.done)throw new Error("Mismatched change set lengths");{let d=Math.min(s.len2,a.len),m=n.length;if(s.ins==-1){let y=a.ins==-1?-1:a.off?0:a.ins;vo(n,d,y,o),i&&y&&Ad(i,n,a.text)}else a.ins==-1?(vo(n,s.off?0:s.len,d,o),i&&Ad(i,n,s.textBit(d))):(vo(n,s.off?0:s.len,a.off?0:a.ins,o),i&&!a.off&&Ad(i,n,a.text));o=(s.ins>d||a.ins>=0&&a.len>d)&&(o||n.length>m),s.forward2(d),a.forward(d)}}}}class Ab{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,r=this.i-2>>1;return r>=e.length?Sn.empty:e[r]}textBit(e){let{inserted:r}=this.set,n=this.i-2>>1;return n>=r.length&&!e?Sn.empty:r[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class dp{constructor(e,r,n){this.from=e,this.to=r,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,r=-1){let n,i;return this.empty?n=i=e.mapPos(this.from,r):(n=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new dp(n,i,this.flags)}extend(e,r=e){if(e<=this.anchor&&r>=this.anchor)return pt.range(e,r);let n=Math.abs(e-this.anchor)>Math.abs(r-this.anchor)?e:r;return pt.range(this.anchor,n)}eq(e,r=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!r||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return pt.range(e.anchor,e.head)}static create(e,r,n){return new dp(e,r,n)}}class pt{constructor(e,r){this.ranges=e,this.mainIndex=r}map(e,r=-1){return e.empty?this:pt.create(this.ranges.map(n=>n.map(e,r)),this.mainIndex)}eq(e,r=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],r))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new pt([this.main],0)}addRange(e,r=!0){return pt.create([e].concat(this.ranges),r?0:this.mainIndex+1)}replaceRange(e,r=this.mainIndex){let n=this.ranges.slice();return n[r]=e,pt.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new pt(e.ranges.map(r=>dp.fromJSON(r)),e.main)}static single(e,r=e){return new pt([pt.range(e,r)],0)}static create(e,r=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=n:s.from<n)return pt.normalized(e.slice(),r);n=s.to}return new pt(e,r)}static cursor(e,r=0,n,i){return dp.create(e,e,(r==0?0:r<0?8:16)|(n==null?7:Math.min(6,n))|(i??16777215)<<6)}static range(e,r,n,i){let s=(n??16777215)<<6|(i==null?7:Math.min(6,i));return r<e?dp.create(r,e,48|s):dp.create(e,r,(r>e?8:0)|s)}static normalized(e,r=0){let n=e[r];e.sort((i,s)=>i.from-s.from),r=e.indexOf(n);for(let i=1;i<e.length;i++){let s=e[i],a=e[i-1];if(s.empty?s.from<=a.to:s.from<a.to){let o=a.from,d=Math.max(s.to,a.to);i<=r&&r--,e.splice(--i,2,s.anchor>s.head?pt.range(d,o):pt.range(o,d))}}return new pt(e,r)}}function AU(t,e){for(let r of t.ranges)if(r.to>e)throw new RangeError("Selection points outside of document")}let zI=0;class ur{constructor(e,r,n,i,s){this.combine=e,this.compareInput=r,this.compare=n,this.isStatic=i,this.id=zI++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new ur(e.combine||(r=>r),e.compareInput||((r,n)=>r===n),e.compare||(e.combine?(r,n)=>r===n:MI),!!e.static,e.enables)}of(e){return new kS([],this,0,e)}compute(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new kS(e,this,1,r)}computeN(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new kS(e,this,2,r)}from(e,r){return r||(r=n=>n),this.compute([e],n=>r(n.field(e)))}}function MI(t,e){return t==e||t.length==e.length&&t.every((r,n)=>r===e[n])}class kS{constructor(e,r,n,i){this.dependencies=e,this.facet=r,this.type=n,this.value=i,this.id=zI++}dynamicSlot(e){var r;let n=this.value,i=this.facet.compareInput,s=this.id,a=e[s]>>1,o=this.type==2,d=!1,m=!1,y=[];for(let b of this.dependencies)b=="doc"?d=!0:b=="selection"?m=!0:((r=e[b.id])!==null&&r!==void 0?r:1)&1||y.push(e[b.id]);return{create(b){return b.values[a]=n(b),1},update(b,w){if(d&&w.docChanged||m&&(w.docChanged||w.selection)||QA(b,y)){let O=n(b);if(o?!gF(O,b.values[a],i):!i(O,b.values[a]))return b.values[a]=O,1}return 0},reconfigure:(b,w)=>{let O,A=w.config.address[s];if(A!=null){let E=C2(w,A);if(this.dependencies.every($=>$ instanceof ur?w.facet($)===b.facet($):$ instanceof so?w.field($,!1)==b.field($,!1):!0)||(o?gF(O=n(b),E,i):i(O=n(b),E)))return b.values[a]=E,0}else O=n(b);return b.values[a]=O,1}}}}function gF(t,e,r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}function QA(t,e){let r=!1;for(let n of e)Lv(t,n)&1&&(r=!0);return r}function J1e(t,e,r){let n=r.map(d=>t[d.id]),i=r.map(d=>d.type),s=n.filter(d=>!(d&1)),a=t[e.id]>>1;function o(d){let m=[];for(let y=0;y<n.length;y++){let b=C2(d,n[y]);if(i[y]==2)for(let w of b)m.push(w);else m.push(b)}return e.combine(m)}return{create(d){for(let m of n)Lv(d,m);return d.values[a]=o(d),1},update(d,m){if(!QA(d,s))return 0;let y=o(d);return e.compare(y,d.values[a])?0:(d.values[a]=y,1)},reconfigure(d,m){let y=QA(d,n),b=m.config.facets[e.id],w=m.facet(e);if(b&&!y&&MI(r,b))return d.values[a]=w,0;let O=o(d);return e.compare(O,w)?(d.values[a]=w,0):(d.values[a]=O,1)}}}const gw=ur.define({static:!0});class so{constructor(e,r,n,i,s){this.id=e,this.createF=r,this.updateF=n,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let r=new so(zI++,e.create,e.update,e.compare||((n,i)=>n===i),e);return e.provide&&(r.provides=e.provide(r)),r}create(e){let r=e.facet(gw).find(n=>n.field==this);return((r==null?void 0:r.create)||this.createF)(e)}slot(e){let r=e[this.id]>>1;return{create:n=>(n.values[r]=this.create(n),1),update:(n,i)=>{let s=n.values[r],a=this.updateF(s,i);return this.compareF(s,a)?0:(n.values[r]=a,1)},reconfigure:(n,i)=>{let s=n.facet(gw),a=i.facet(gw),o;return(o=s.find(d=>d.field==this))&&o!=a.find(d=>d.field==this)?(n.values[r]=o.create(n),1):i.config.address[this.id]!=null?(n.values[r]=i.field(this),0):(n.values[r]=this.create(n),1)}}}init(e){return[this,gw.of({field:this,create:e})]}get extension(){return this}}const ip={lowest:4,low:3,default:2,high:1,highest:0};function Bx(t){return e=>new EU(e,t)}const hm={highest:Bx(ip.highest),high:Bx(ip.high),default:Bx(ip.default),low:Bx(ip.low),lowest:Bx(ip.lowest)};class EU{constructor(e,r){this.inner=e,this.prec=r}}class nC{of(e){return new HA(this,e)}reconfigure(e){return nC.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class HA{constructor(e,r){this.compartment=e,this.inner=r}}class k2{constructor(e,r,n,i,s,a){for(this.base=e,this.compartments=r,this.dynamicSlots=n,this.address=i,this.staticValues=s,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let r=this.address[e.id];return r==null?e.default:this.staticValues[r>>1]}static resolve(e,r,n){let i=[],s=Object.create(null),a=new Map;for(let w of e_e(e,r,a))w instanceof so?i.push(w):(s[w.facet.id]||(s[w.facet.id]=[])).push(w);let o=Object.create(null),d=[],m=[];for(let w of i)o[w.id]=m.length<<1,m.push(O=>w.slot(O));let y=n==null?void 0:n.config.facets;for(let w in s){let O=s[w],A=O[0].facet,E=y&&y[w]||[];if(O.every($=>$.type==0))if(o[A.id]=d.length<<1|1,MI(E,O))d.push(n.facet(A));else{let $=A.combine(O.map(R=>R.value));d.push(n&&A.compare($,n.facet(A))?n.facet(A):$)}else{for(let $ of O)$.type==0?(o[$.id]=d.length<<1|1,d.push($.value)):(o[$.id]=m.length<<1,m.push(R=>$.dynamicSlot(R)));o[A.id]=m.length<<1,m.push($=>J1e($,A,O))}}let b=m.map(w=>w(o));return new k2(e,a,b,o,d,s)}}function e_e(t,e,r){let n=[[],[],[],[],[]],i=new Map;function s(a,o){let d=i.get(a);if(d!=null){if(d<=o)return;let m=n[d].indexOf(a);m>-1&&n[d].splice(m,1),a instanceof HA&&r.delete(a.compartment)}if(i.set(a,o),Array.isArray(a))for(let m of a)s(m,o);else if(a instanceof HA){if(r.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let m=e.get(a.compartment)||a.inner;r.set(a.compartment,m),s(m,o)}else if(a instanceof EU)s(a.inner,a.prec);else if(a instanceof so)n[o].push(a),a.provides&&s(a.provides,o);else if(a instanceof kS)n[o].push(a),a.facet.extensions&&s(a.facet.extensions,ip.default);else{let m=a.extension;if(!m)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(m,o)}}return s(t,ip.default),n.reduce((a,o)=>a.concat(o))}function Lv(t,e){if(e&1)return 2;let r=e>>1,n=t.status[r];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;t.status[r]=4;let i=t.computeSlot(t,t.config.dynamicSlots[r]);return t.status[r]=2|i}function C2(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const zU=ur.define(),GA=ur.define({combine:t=>t.some(e=>e),static:!0}),MU=ur.define({combine:t=>t.length?t[0]:void 0,static:!0}),IU=ur.define(),DU=ur.define(),RU=ur.define(),LU=ur.define({combine:t=>t.length?t[0]:!1});class vu{constructor(e,r){this.type=e,this.value=r}static define(){return new t_e}}class t_e{of(e){return new vu(this,e)}}class r_e{constructor(e){this.map=e}of(e){return new Wr(this,e)}}class Wr{constructor(e,r){this.type=e,this.value=r}map(e){let r=this.type.map(this.value,e);return r===void 0?void 0:r==this.value?this:new Wr(this.type,r)}is(e){return this.type==e}static define(e={}){return new r_e(e.map||(r=>r))}static mapEffects(e,r){if(!e.length)return e;let n=[];for(let i of e){let s=i.map(r);s&&n.push(s)}return n}}Wr.reconfigure=Wr.define();Wr.appendConfig=Wr.define();class ms{constructor(e,r,n,i,s,a){this.startState=e,this.changes=r,this.selection=n,this.effects=i,this.annotations=s,this.scrollIntoView=a,this._doc=null,this._state=null,n&&AU(n,r.newLength),s.some(o=>o.type==ms.time)||(this.annotations=s.concat(ms.time.of(Date.now())))}static create(e,r,n,i,s,a){return new ms(e,r,n,i,s,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let r of this.annotations)if(r.type==e)return r.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let r=this.annotation(ms.userEvent);return!!(r&&(r==e||r.length>e.length&&r.slice(0,e.length)==e&&r[e.length]=="."))}}ms.time=vu.define();ms.userEvent=vu.define();ms.addToHistory=vu.define();ms.remote=vu.define();function n_e(t,e){let r=[];for(let n=0,i=0;;){let s,a;if(n<t.length&&(i==e.length||e[i]>=t[n]))s=t[n++],a=t[n++];else if(i<e.length)s=e[i++],a=e[i++];else return r;!r.length||r[r.length-1]<s?r.push(s,a):r[r.length-1]<a&&(r[r.length-1]=a)}}function FU(t,e,r){var n;let i,s,a;return r?(i=e.changes,s=us.empty(e.changes.length),a=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),a=t.changes.compose(i)),{changes:a,selection:e.selection?e.selection.map(s):(n=t.selection)===null||n===void 0?void 0:n.map(i),effects:Wr.mapEffects(t.effects,i).concat(Wr.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function XA(t,e,r){let n=e.selection,i=ly(e.annotations);return e.userEvent&&(i=i.concat(ms.userEvent.of(e.userEvent))),{changes:e.changes instanceof us?e.changes:us.of(e.changes||[],r,t.facet(MU)),selection:n&&(n instanceof pt?n:pt.single(n.anchor,n.head)),effects:ly(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function BU(t,e,r){let n=XA(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(r=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(r=!1);let a=!!e[s].sequential;n=FU(n,XA(t,e[s],a?n.changes.newLength:t.doc.length),a)}let i=ms.create(t,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return s_e(r?i_e(i):i)}function i_e(t){let e=t.startState,r=!0;for(let i of e.facet(IU)){let s=i(t);if(s===!1){r=!1;break}Array.isArray(s)&&(r=r===!0?s:n_e(r,s))}if(r!==!0){let i,s;if(r===!1)s=t.changes.invertedDesc,i=us.empty(e.doc.length);else{let a=t.changes.filter(r);i=a.changes,s=a.filtered.mapDesc(a.changes).invertedDesc}t=ms.create(e,i,t.selection&&t.selection.map(s),Wr.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let n=e.facet(DU);for(let i=n.length-1;i>=0;i--){let s=n[i](t);s instanceof ms?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof ms?t=s[0]:t=BU(e,ly(s),!1)}return t}function s_e(t){let e=t.startState,r=e.facet(RU),n=t;for(let i=r.length-1;i>=0;i--){let s=r[i](t);s&&Object.keys(s).length&&(n=FU(n,XA(e,s,t.changes.newLength),!0))}return n==t?t:ms.create(e,t.changes,t.selection,n.effects,n.annotations,n.scrollIntoView)}const o_e=[];function ly(t){return t==null?o_e:Array.isArray(t)?t:[t]}var yi=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(yi||(yi={}));const a_e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let KA;try{KA=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function l_e(t){if(KA)return KA.test(t);for(let e=0;e<t.length;e++){let r=t[e];if(/\w/.test(r)||r>""&&(r.toUpperCase()!=r.toLowerCase()||a_e.test(r)))return!0}return!1}function c_e(t){return e=>{if(!/\S/.test(e))return yi.Space;if(l_e(e))return yi.Word;for(let r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return yi.Word;return yi.Other}}class pn{constructor(e,r,n,i,s,a){this.config=e,this.doc=r,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,a&&(a._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)Lv(this,o<<1);this.computeSlot=null}field(e,r=!0){let n=this.config.address[e.id];if(n==null){if(r)throw new RangeError("Field is not present in this state");return}return Lv(this,n),C2(this,n)}update(...e){return BU(this,e,!0)}applyTransaction(e){let r=this.config,{base:n,compartments:i}=r;for(let o of e.effects)o.is(nC.reconfigure)?(r&&(i=new Map,r.compartments.forEach((d,m)=>i.set(m,d)),r=null),i.set(o.value.compartment,o.value.extension)):o.is(Wr.reconfigure)?(r=null,n=o.value):o.is(Wr.appendConfig)&&(r=null,n=ly(n).concat(o.value));let s;r?s=e.startState.values.slice():(r=k2.resolve(n,i,this),s=new pn(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(d,m)=>m.reconfigure(d,this),null).values);let a=e.startState.facet(GA)?e.newSelection:e.newSelection.asSingle();new pn(r,e.newDoc,a,s,(o,d)=>d.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:e},range:pt.cursor(r.from+e.length)}))}changeByRange(e){let r=this.selection,n=e(r.ranges[0]),i=this.changes(n.changes),s=[n.range],a=ly(n.effects);for(let o=1;o<r.ranges.length;o++){let d=e(r.ranges[o]),m=this.changes(d.changes),y=m.map(i);for(let w=0;w<o;w++)s[w]=s[w].map(y);let b=i.mapDesc(m,!0);s.push(d.range.map(b)),i=i.compose(y),a=Wr.mapEffects(a,y).concat(Wr.mapEffects(ly(d.effects),b))}return{changes:i,selection:pt.create(s,r.mainIndex),effects:a}}changes(e=[]){return e instanceof us?e:us.of(e,this.doc.length,this.facet(pn.lineSeparator))}toText(e){return Sn.of(e.split(this.facet(pn.lineSeparator)||WA))}sliceDoc(e=0,r=this.doc.length){return this.doc.sliceString(e,r,this.lineBreak)}facet(e){let r=this.config.address[e.id];return r==null?e.default:(Lv(this,r),C2(this,r))}toJSON(e){let r={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let i=e[n];i instanceof so&&this.config.address[i.id]!=null&&(r[n]=i.spec.toJSON(this.field(e[n]),this))}return r}static fromJSON(e,r={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let s in n)if(Object.prototype.hasOwnProperty.call(e,s)){let a=n[s],o=e[s];i.push(a.init(d=>a.spec.fromJSON(o,d)))}}return pn.create({doc:e.doc,selection:pt.fromJSON(e.selection),extensions:r.extensions?i.concat([r.extensions]):i})}static create(e={}){let r=k2.resolve(e.extensions||[],new Map),n=e.doc instanceof Sn?e.doc:Sn.of((e.doc||"").split(r.staticFacet(pn.lineSeparator)||WA)),i=e.selection?e.selection instanceof pt?e.selection:pt.single(e.selection.anchor,e.selection.head):pt.single(0);return AU(i,n.length),r.staticFacet(GA)||(i=i.asSingle()),new pn(r,n,i,r.dynamicSlots.map(()=>null),(s,a)=>a.create(s),null)}get tabSize(){return this.facet(pn.tabSize)}get lineBreak(){return this.facet(pn.lineSeparator)||`
`}get readOnly(){return this.facet(LU)}phrase(e,...r){for(let n of this.facet(pn.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return r.length&&(e=e.replace(/\$(\$|\d*)/g,(n,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>r.length?n:r[s-1]})),e}languageDataAt(e,r,n=-1){let i=[];for(let s of this.facet(zU))for(let a of s(this,r,n))Object.prototype.hasOwnProperty.call(a,e)&&i.push(a[e]);return i}charCategorizer(e){let r=this.languageDataAt("wordChars",e);return c_e(r.length?r[0]:"")}wordAt(e){let{text:r,from:n,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),a=e-n,o=e-n;for(;a>0;){let d=ps(r,a,!1);if(s(r.slice(d,a))!=yi.Word)break;a=d}for(;o<i;){let d=ps(r,o);if(s(r.slice(o,d))!=yi.Word)break;o=d}return a==o?null:pt.range(a+n,o+n)}}pn.allowMultipleSelections=GA;pn.tabSize=ur.define({combine:t=>t.length?t[0]:4});pn.lineSeparator=MU;pn.readOnly=LU;pn.phrases=ur.define({compare(t,e){let r=Object.keys(t),n=Object.keys(e);return r.length==n.length&&r.every(i=>t[i]==e[i])}});pn.languageData=zU;pn.changeFilter=IU;pn.transactionFilter=DU;pn.transactionExtender=RU;nC.reconfigure=Wr.define();function bu(t,e,r={}){let n={};for(let i of t)for(let s of Object.keys(i)){let a=i[s],o=n[s];if(o===void 0)n[s]=a;else if(!(o===a||a===void 0))if(Object.hasOwnProperty.call(r,s))n[s]=r[s](o,a);else throw new Error("Config merge conflict for field "+s)}for(let i in e)n[i]===void 0&&(n[i]=e[i]);return n}class rf{eq(e){return this==e}range(e,r=e){return ZA.create(e,r,this)}}rf.prototype.startSide=rf.prototype.endSide=0;rf.prototype.point=!1;rf.prototype.mapMode=$o.TrackDel;function II(t,e){return t==e||t.constructor==e.constructor&&t.eq(e)}let ZA=class $U{constructor(e,r,n){this.from=e,this.to=r,this.value=n}static create(e,r,n){return new $U(e,r,n)}};function YA(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class DI{constructor(e,r,n,i){this.from=e,this.to=r,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,r,n,i=0){let s=n?this.to:this.from;for(let a=i,o=s.length;;){if(a==o)return a;let d=a+o>>1,m=s[d]-e||(n?this.value[d].endSide:this.value[d].startSide)-r;if(d==a)return m>=0?a:o;m>=0?o=d:a=d+1}}between(e,r,n,i){for(let s=this.findIndex(r,-1e9,!0),a=this.findIndex(n,1e9,!1,s);s<a;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,r){let n=[],i=[],s=[],a=-1,o=-1;for(let d=0;d<this.value.length;d++){let m=this.value[d],y=this.from[d]+e,b=this.to[d]+e,w,O;if(y==b){let A=r.mapPos(y,m.startSide,m.mapMode);if(A==null||(w=O=A,m.startSide!=m.endSide&&(O=r.mapPos(y,m.endSide),O<w)))continue}else if(w=r.mapPos(y,m.startSide),O=r.mapPos(b,m.endSide),w>O||w==O&&m.startSide>0&&m.endSide<=0)continue;(O-w||m.endSide-m.startSide)<0||(a<0&&(a=w),m.point&&(o=Math.max(o,O-w)),n.push(m),i.push(w-a),s.push(O-a))}return{mapped:n.length?new DI(i,s,n,o):null,pos:a}}}class rn{constructor(e,r,n,i){this.chunkPos=e,this.chunk=r,this.nextLayer=n,this.maxPoint=i}static create(e,r,n,i){return new rn(e,r,n,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let r of this.chunk)e+=r.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:r=[],sort:n=!1,filterFrom:i=0,filterTo:s=this.length}=e,a=e.filter;if(r.length==0&&!a)return this;if(n&&(r=r.slice().sort(YA)),this.isEmpty)return r.length?rn.of(r):this;let o=new NU(this,null,-1).goto(0),d=0,m=[],y=new vh;for(;o.value||d<r.length;)if(d<r.length&&(o.from-r[d].from||o.startSide-r[d].value.startSide)>=0){let b=r[d++];y.addInner(b.from,b.to,b.value)||m.push(b)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(d==r.length||this.chunkEnd(o.chunkIndex)<r[d].from)&&(!a||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&y.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!a||i>o.to||s<o.from||a(o.from,o.to,o.value))&&(y.addInner(o.from,o.to,o.value)||m.push(ZA.create(o.from,o.to,o.value))),o.next());return y.finishInner(this.nextLayer.isEmpty&&!m.length?rn.empty:this.nextLayer.update({add:m,filter:a,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let r=[],n=[],i=-1;for(let a=0;a<this.chunk.length;a++){let o=this.chunkPos[a],d=this.chunk[a],m=e.touchesRange(o,o+d.length);if(m===!1)i=Math.max(i,d.maxPoint),r.push(d),n.push(e.mapPos(o));else if(m===!0){let{mapped:y,pos:b}=d.map(o,e);y&&(i=Math.max(i,y.maxPoint),r.push(y),n.push(b))}}let s=this.nextLayer.map(e);return r.length==0?s:new rn(n,r,s||rn.empty,i)}between(e,r,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],a=this.chunk[i];if(r>=s&&e<=s+a.length&&a.between(s,e-s,r-s,n)===!1)return}this.nextLayer.between(e,r,n)}}iter(e=0){return Eb.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,r=0){return Eb.from(e).goto(r)}static compare(e,r,n,i,s=-1){let a=e.filter(b=>b.maxPoint>0||!b.isEmpty&&b.maxPoint>=s),o=r.filter(b=>b.maxPoint>0||!b.isEmpty&&b.maxPoint>=s),d=yF(a,o,n),m=new $x(a,d,s),y=new $x(o,d,s);n.iterGaps((b,w,O)=>xF(m,b,y,w,O,i)),n.empty&&n.length==0&&xF(m,0,y,0,0,i)}static eq(e,r,n=0,i){i==null&&(i=999999999);let s=e.filter(y=>!y.isEmpty&&r.indexOf(y)<0),a=r.filter(y=>!y.isEmpty&&e.indexOf(y)<0);if(s.length!=a.length)return!1;if(!s.length)return!0;let o=yF(s,a),d=new $x(s,o,0).goto(n),m=new $x(a,o,0).goto(n);for(;;){if(d.to!=m.to||!JA(d.active,m.active)||d.point&&(!m.point||!II(d.point,m.point)))return!1;if(d.to>i)return!0;d.next(),m.next()}}static spans(e,r,n,i,s=-1){let a=new $x(e,null,s).goto(r),o=r,d=a.openStart;for(;;){let m=Math.min(a.to,n);if(a.point){let y=a.activeForPoint(a.to),b=a.pointFrom<r?y.length+1:a.point.startSide<0?y.length:Math.min(y.length,d);i.point(o,m,a.point,y,b,a.pointRank),d=Math.min(a.openEnd(m),y.length)}else m>o&&(i.span(o,m,a.active,d),d=a.openEnd(m));if(a.to>n)return d+(a.point&&a.to>n?1:0);o=a.to,a.next()}}static of(e,r=!1){let n=new vh;for(let i of e instanceof ZA?[e]:r?u_e(e):e)n.add(i.from,i.to,i.value);return n.finish()}static join(e){if(!e.length)return rn.empty;let r=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let i=e[n];i!=rn.empty;i=i.nextLayer)r=new rn(i.chunkPos,i.chunk,r,Math.max(i.maxPoint,r.maxPoint));return r}}rn.empty=new rn([],[],null,-1);function u_e(t){if(t.length>1)for(let e=t[0],r=1;r<t.length;r++){let n=t[r];if(YA(e,n)>0)return t.slice().sort(YA);e=n}return t}rn.empty.nextLayer=rn.empty;class vh{finishChunk(e){this.chunks.push(new DI(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,r,n){this.addInner(e,r,n)||(this.nextLayer||(this.nextLayer=new vh)).add(e,r,n)}addInner(e,r,n){let i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(r-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=r,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,r-e)),!0)}addChunk(e,r){if((e-this.lastTo||r.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,r.maxPoint),this.chunks.push(r),this.chunkPos.push(e);let n=r.value.length-1;return this.last=r.value[n],this.lastFrom=r.from[n]+e,this.lastTo=r.to[n]+e,!0}finish(){return this.finishInner(rn.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let r=rn.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,r}}function yF(t,e,r){let n=new Map;for(let s of t)for(let a=0;a<s.chunk.length;a++)s.chunk[a].maxPoint<=0&&n.set(s.chunk[a],s.chunkPos[a]);let i=new Set;for(let s of e)for(let a=0;a<s.chunk.length;a++){let o=n.get(s.chunk[a]);o!=null&&(r?r.mapPos(o):o)==s.chunkPos[a]&&!(r!=null&&r.touchesRange(o,o+s.chunk[a].length))&&i.add(s.chunk[a])}return i}class NU{constructor(e,r,n,i=0){this.layer=e,this.skip=r,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,r=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,r,!1),this}gotoInner(e,r,n){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],r,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,r){(this.to-e||this.endSide-r)<0&&this.gotoInner(e,r,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],r=this.layer.chunk[this.chunkIndex],n=e+r.from[this.rangeIndex];if(this.from=n,this.to=e+r.to[this.rangeIndex],this.value=r.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Eb{constructor(e){this.heap=e}static from(e,r=null,n=-1){let i=[];for(let s=0;s<e.length;s++)for(let a=e[s];!a.isEmpty;a=a.nextLayer)a.maxPoint>=n&&i.push(new NU(a,r,n,s));return i.length==1?i[0]:new Eb(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,r=-1e9){for(let n of this.heap)n.goto(e,r);for(let n=this.heap.length>>1;n>=0;n--)KO(this.heap,n);return this.next(),this}forward(e,r){for(let n of this.heap)n.forward(e,r);for(let n=this.heap.length>>1;n>=0;n--)KO(this.heap,n);(this.to-e||this.value.endSide-r)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),KO(this.heap,0)}}}function KO(t,e){for(let r=t[e];;){let n=(e<<1)+1;if(n>=t.length)break;let i=t[n];if(n+1<t.length&&i.compare(t[n+1])>=0&&(i=t[n+1],n++),r.compare(i)<0)break;t[n]=r,t[e]=i,e=n}}class $x{constructor(e,r,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Eb.from(e,r,n)}goto(e,r=-1e9){return this.cursor.goto(e,r),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=r,this.openStart=-1,this.next(),this}forward(e,r){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-r)<0;)this.removeActive(this.minActive);this.cursor.forward(e,r)}removeActive(e){yw(this.active,e),yw(this.activeTo,e),yw(this.activeRank,e),this.minActive=vF(this.active,this.activeTo)}addActive(e){let r=0,{value:n,to:i,rank:s}=this.cursor;for(;r<this.activeRank.length&&(s-this.activeRank[r]||i-this.activeTo[r])>0;)r++;xw(this.active,r,n),xw(this.activeTo,r,i),xw(this.activeRank,r,s),e&&xw(e,r,this.cursor.from),this.minActive=vF(this.active,this.activeTo)}next(){let e=this.to,r=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&yw(n,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(n),this.cursor.next();else if(r&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let i=n.length-1;i>=0&&n[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let r=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&r.push(this.active[n]);return r.reverse()}openEnd(e){let r=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)r++;return r}}function xF(t,e,r,n,i,s){t.goto(e),r.goto(n);let a=n+i,o=n,d=n-e,m=!!s.boundChange;for(let y=!1;;){let b=t.to+d-r.to,w=b||t.endSide-r.endSide,O=w<0?t.to+d:r.to,A=Math.min(O,a);if(t.point||r.point?(t.point&&r.point&&II(t.point,r.point)&&JA(t.activeForPoint(t.to),r.activeForPoint(r.to))||s.comparePoint(o,A,t.point,r.point),y=!1):(y&&s.boundChange(o),A>o&&!JA(t.active,r.active)&&s.compareRange(o,A,t.active,r.active),m&&A<a&&(b||t.openEnd(O)!=r.openEnd(O))&&(y=!0)),O>a)break;o=O,w<=0&&t.next(),w>=0&&r.next()}}function JA(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!=e[r]&&!II(t[r],e[r]))return!1;return!0}function yw(t,e){for(let r=e,n=t.length-1;r<n;r++)t[r]=t[r+1];t.pop()}function xw(t,e,r){for(let n=t.length-1;n>=e;n--)t[n+1]=t[n];t[e]=r}function vF(t,e){let r=-1,n=1e9;for(let i=0;i<e.length;i++)(e[i]-n||t[i].endSide-t[r].endSide)<0&&(r=i,n=e[i]);return r}function y0(t,e,r=t.length){let n=0;for(let i=0;i<r&&i<t.length;)t.charCodeAt(i)==9?(n+=e-n%e,i++):(n++,i=ps(t,i));return n}function eE(t,e,r,n){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?r-s%r:1,i=ps(t,i)}return n===!0?-1:t.length}const tE="",bF=typeof Symbol>"u"?"__"+tE:Symbol.for(tE),rE=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),_F=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class nf{constructor(e,r){this.rules=[];let{finish:n}=r||{};function i(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function s(a,o,d,m){let y=[],b=/^@(\w+)\b/.exec(a[0]),w=b&&b[1]=="keyframes";if(b&&o==null)return d.push(a[0]+";");for(let O in o){let A=o[O];if(/&/.test(O))s(O.split(/,\s*/).map(E=>a.map($=>E.replace(/&/,$))).reduce((E,$)=>E.concat($)),A,d);else if(A&&typeof A=="object"){if(!b)throw new RangeError("The value of a property ("+O+") should be a primitive value.");s(i(O),A,y,w)}else A!=null&&y.push(O.replace(/_.*/,"").replace(/[A-Z]/g,E=>"-"+E.toLowerCase())+": "+A+";")}(y.length||w)&&d.push((n&&!b&&!m?a.map(n):a).join(", ")+" {"+y.join(" ")+"}")}for(let a in e)s(i(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=_F[bF]||1;return _F[bF]=e+1,tE+e.toString(36)}static mount(e,r,n){let i=e[rE],s=n&&n.nonce;i?s&&i.setNonce(s):i=new h_e(e,s),i.mount(Array.isArray(r)?r:[r],e)}}let wF=new Map;class h_e{constructor(e,r){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=wF.get(n);if(s)return e[rE]=s;this.sheet=new i.CSSStyleSheet,wF.set(n,this)}else this.styleTag=n.createElement("style"),r&&this.styleTag.setAttribute("nonce",r);this.modules=[],e[rE]=this}mount(e,r){let n=this.sheet,i=0,s=0;for(let a=0;a<e.length;a++){let o=e[a],d=this.modules.indexOf(o);if(d<s&&d>-1&&(this.modules.splice(d,1),s--,d=-1),d==-1){if(this.modules.splice(s++,0,o),n)for(let m=0;m<o.rules.length;m++)n.insertRule(o.rules[m],i++)}else{for(;s<d;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(n)r.adoptedStyleSheets.indexOf(this.sheet)<0&&(r.adoptedStyleSheets=[this.sheet,...r.adoptedStyleSheets]);else{let a="";for(let d=0;d<this.modules.length;d++)a+=this.modules[d].getRules()+`
`;this.styleTag.textContent=a;let o=r.head||r;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var sf={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},zb={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},d_e=typeof navigator<"u"&&/Mac/.test(navigator.platform),f_e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Zs=0;Zs<10;Zs++)sf[48+Zs]=sf[96+Zs]=String(Zs);for(var Zs=1;Zs<=24;Zs++)sf[Zs+111]="F"+Zs;for(var Zs=65;Zs<=90;Zs++)sf[Zs]=String.fromCharCode(Zs+32),zb[Zs]=String.fromCharCode(Zs);for(var ZO in sf)zb.hasOwnProperty(ZO)||(zb[ZO]=sf[ZO]);function p_e(t){var e=d_e&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||f_e&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?zb:sf)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}function Xn(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,r=arguments[1];if(r&&typeof r=="object"&&r.nodeType==null&&!Array.isArray(r)){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n];typeof i=="string"?t.setAttribute(n,i):i!=null&&(t[n]=i)}e++}for(;e<arguments.length;e++)VU(t,arguments[e]);return t}function VU(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var r=0;r<e.length;r++)VU(t,e[r]);else throw new RangeError("Unsupported child node: "+e)}let Fo=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},nE=typeof document<"u"?document:{documentElement:{style:{}}};const iE=/Edge\/(\d+)/.exec(Fo.userAgent),WU=/MSIE \d/.test(Fo.userAgent),sE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Fo.userAgent),iC=!!(WU||sE||iE),SF=!iC&&/gecko\/(\d+)/i.test(Fo.userAgent),YO=!iC&&/Chrome\/(\d+)/.exec(Fo.userAgent),m_e="webkitFontSmoothing"in nE.documentElement.style,oE=!iC&&/Apple Computer/.test(Fo.vendor),kF=oE&&(/Mobile\/\w+/.test(Fo.userAgent)||Fo.maxTouchPoints>2);var lr={mac:kF||/Mac/.test(Fo.platform),windows:/Win/.test(Fo.platform),linux:/Linux|X11/.test(Fo.platform),ie:iC,ie_version:WU?nE.documentMode||6:sE?+sE[1]:iE?+iE[1]:0,gecko:SF,gecko_version:SF?+(/Firefox\/(\d+)/.exec(Fo.userAgent)||[0,0])[1]:0,chrome:!!YO,chrome_version:YO?+YO[1]:0,ios:kF,android:/Android\b/.test(Fo.userAgent),webkit_version:m_e?+(/\bAppleWebKit\/(\d+)/.exec(Fo.userAgent)||[0,0])[1]:0,safari:oE,safari_version:oE?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Fo.userAgent)||[0,0])[1]:0,tabSize:nE.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function RI(t,e){for(let r in t)r=="class"&&e.class?e.class+=" "+t.class:r=="style"&&e.style?e.style+=";"+t.style:e[r]=t[r];return e}const T2=Object.create(null);function LI(t,e,r){if(t==e)return!0;t||(t=T2),e||(e=T2);let n=Object.keys(t),i=Object.keys(e);if(n.length-0!=i.length-0)return!1;for(let s of n)if(s!=r&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function g_e(t,e){for(let r=t.attributes.length-1;r>=0;r--){let n=t.attributes[r].name;e[n]==null&&t.removeAttribute(n)}for(let r in e){let n=e[r];r=="style"?t.style.cssText=n:t.getAttribute(r)!=n&&t.setAttribute(r,n)}}function CF(t,e,r){let n=!1;if(e)for(let i in e)r&&i in r||(n=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(r)for(let i in r)e&&e[i]==r[i]||(n=!0,i=="style"?t.style.cssText=r[i]:t.setAttribute(i,r[i]));return n}function y_e(t){let e=Object.create(null);for(let r=0;r<t.attributes.length;r++){let n=t.attributes[r];e[n.name]=n.value}return e}class _u{eq(e){return!1}updateDOM(e,r){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,r,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var no=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(no||(no={}));class Or extends rf{constructor(e,r,n,i){super(),this.startSide=e,this.endSide=r,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new A1(e)}static widget(e){let r=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return r+=n&&!e.inlineOrder?r>0?3e8:-4e8:r>0?1e8:-1e8,new rm(e,r,r,n,e.widget||null,!1)}static replace(e){let r=!!e.block,n,i;if(e.isBlockGap)n=-5e8,i=4e8;else{let{start:s,end:a}=UU(e,r);n=(s?r?-3e8:-1:5e8)-1,i=(a?r?2e8:1:-6e8)+1}return new rm(e,n,i,r,e.widget||null,!0)}static line(e){return new E1(e)}static set(e,r=!1){return rn.of(e,r)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Or.none=rn.empty;class A1 extends Or{constructor(e){let{start:r,end:n}=UU(e);super(r?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?RI(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||T2}eq(e){return this==e||e instanceof A1&&this.tagName==e.tagName&&LI(this.attrs,e.attrs)}range(e,r=e){if(e>=r)throw new RangeError("Mark decorations may not be empty");return super.range(e,r)}}A1.prototype.point=!1;class E1 extends Or{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof E1&&this.spec.class==e.spec.class&&LI(this.spec.attributes,e.spec.attributes)}range(e,r=e){if(r!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,r)}}E1.prototype.mapMode=$o.TrackBefore;E1.prototype.point=!0;class rm extends Or{constructor(e,r,n,i,s,a){super(r,n,s,e),this.block=i,this.isReplace=a,this.mapMode=i?r<=0?$o.TrackBefore:$o.TrackAfter:$o.TrackDel}get type(){return this.startSide!=this.endSide?no.WidgetRange:this.startSide<=0?no.WidgetBefore:no.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof rm&&x_e(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,r=e){if(this.isReplace&&(e>r||e==r&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&r!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,r)}}rm.prototype.point=!0;function UU(t,e=!1){let{inclusiveStart:r,inclusiveEnd:n}=t;return r==null&&(r=t.inclusive),n==null&&(n=t.inclusive),{start:r??e,end:n??e}}function x_e(t,e){return t==e||!!(t&&e&&t.compare(e))}function cy(t,e,r,n=0){let i=r.length-1;i>=0&&r[i]+n>=t?r[i]=Math.max(r[i],e):r.push(t,e)}class Mb extends rf{constructor(e,r){super(),this.tagName=e,this.attributes=r}eq(e){return e==this||e instanceof Mb&&this.tagName==e.tagName&&LI(this.attributes,e.attributes)}static create(e){return new Mb(e.tagName,e.attributes||T2)}static set(e,r=!1){return rn.of(e,r)}}Mb.prototype.startSide=Mb.prototype.endSide=-1;function Yy(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function aE(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Fv(t,e){if(!e.anchorNode)return!1;try{return aE(t,e.anchorNode)}catch{return!1}}function Bv(t){return t.nodeType==3?Db(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function $v(t,e,r,n){return r?TF(t,e,r,n,-1)||TF(t,e,r,n,1):!1}function of(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function O2(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function TF(t,e,r,n,i){for(;;){if(t==r&&e==n)return!0;if(e==(i<0?0:bh(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=of(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?bh(t):0}else return!1}}function bh(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ib(t,e){let r=e?t.left:t.right;return{left:r,right:r,top:t.top,bottom:t.bottom}}function v_e(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function qU(t,e){let r=e.width/t.offsetWidth,n=e.height/t.offsetHeight;return(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.width-t.offsetWidth)<1)&&(r=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-t.offsetHeight)<1)&&(n=1),{scaleX:r,scaleY:n}}function b_e(t,e,r,n,i,s,a,o){let d=t.ownerDocument,m=d.defaultView||window;for(let y=t,b=!1;y&&!b;)if(y.nodeType==1){let w,O=y==d.body,A=1,E=1;if(O)w=v_e(m);else{if(/^(fixed|sticky)$/.test(getComputedStyle(y).position)&&(b=!0),y.scrollHeight<=y.clientHeight&&y.scrollWidth<=y.clientWidth){y=y.assignedSlot||y.parentNode;continue}let F=y.getBoundingClientRect();({scaleX:A,scaleY:E}=qU(y,F)),w={left:F.left,right:F.left+y.clientWidth*A,top:F.top,bottom:F.top+y.clientHeight*E}}let $=0,R=0;if(i=="nearest")e.top<w.top?(R=e.top-(w.top+a),r>0&&e.bottom>w.bottom+R&&(R=e.bottom-w.bottom+a)):e.bottom>w.bottom&&(R=e.bottom-w.bottom+a,r<0&&e.top-R<w.top&&(R=e.top-(w.top+a)));else{let F=e.bottom-e.top,L=w.bottom-w.top;R=(i=="center"&&F<=L?e.top+F/2-L/2:i=="start"||i=="center"&&r<0?e.top-a:e.bottom-L+a)-w.top}if(n=="nearest"?e.left<w.left?($=e.left-(w.left+s),r>0&&e.right>w.right+$&&($=e.right-w.right+s)):e.right>w.right&&($=e.right-w.right+s,r<0&&e.left<w.left+$&&($=e.left-(w.left+s))):$=(n=="center"?e.left+(e.right-e.left)/2-(w.right-w.left)/2:n=="start"==o?e.left-s:e.right-(w.right-w.left)+s)-w.left,$||R)if(O)m.scrollBy($,R);else{let F=0,L=0;if(R){let U=y.scrollTop;y.scrollTop+=R/E,L=(y.scrollTop-U)*E}if($){let U=y.scrollLeft;y.scrollLeft+=$/A,F=(y.scrollLeft-U)*A}e={left:e.left-F,top:e.top-L,right:e.right-F,bottom:e.bottom-L},F&&Math.abs(F-$)<1&&(n="nearest"),L&&Math.abs(L-R)<1&&(i="nearest")}if(O)break;(e.top<w.top||e.bottom>w.bottom||e.left<w.left||e.right>w.right)&&(e={left:Math.max(e.left,w.left),right:Math.min(e.right,w.right),top:Math.max(e.top,w.top),bottom:Math.min(e.bottom,w.bottom)}),y=y.assignedSlot||y.parentNode}else if(y.nodeType==11)y=y.host;else break}function __e(t){let e=t.ownerDocument,r,n;for(let i=t.parentNode;i&&!(i==e.body||r&&n);)if(i.nodeType==1)!n&&i.scrollHeight>i.clientHeight&&(n=i),!r&&i.scrollWidth>i.clientWidth&&(r=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:r,y:n}}class w_e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:r,focusNode:n}=e;this.set(r,Math.min(e.anchorOffset,r?bh(r):0),n,Math.min(e.focusOffset,n?bh(n):0))}set(e,r,n,i){this.anchorNode=e,this.anchorOffset=r,this.focusNode=n,this.focusOffset=i}}let tp=null;lr.safari&&lr.safari_version>=26&&(tp=!1);function QU(t){if(t.setActive)return t.setActive();if(tp)return t.focus(tp);let e=[];for(let r=t;r&&(e.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(t.focus(tp==null?{get preventScroll(){return tp={preventScroll:!0},!0}}:void 0),!tp){tp=!1;for(let r=0;r<e.length;){let n=e[r++],i=e[r++],s=e[r++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=s&&(n.scrollLeft=s)}}}let OF;function Db(t,e,r=e){let n=OF||(OF=document.createRange());return n.setEnd(t,r),n.setStart(t,e),n}function uy(t,e,r,n){let i={key:e,code:e,keyCode:r,which:r,cancelable:!0};n&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=n);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let a=new KeyboardEvent("keyup",i);return a.synthetic=!0,t.dispatchEvent(a),s.defaultPrevented||a.defaultPrevented}function S_e(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function k_e(t,e){let r=e.focusNode,n=e.focusOffset;if(!r||e.anchorNode!=r||e.anchorOffset!=n)return!1;for(n=Math.min(n,bh(r));;)if(n){if(r.nodeType!=1)return!1;let i=r.childNodes[n-1];i.contentEditable=="false"?n--:(r=i,n=bh(r))}else{if(r==t)return!0;n=of(r),r=r.parentNode}}function HU(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function GU(t,e){for(let r=t,n=e;;){if(r.nodeType==3&&n>0)return{node:r,offset:n};if(r.nodeType==1&&n>0){if(r.contentEditable=="false")return null;r=r.childNodes[n-1],n=bh(r)}else if(r.parentNode&&!O2(r))n=of(r),r=r.parentNode;else return null}}function XU(t,e){for(let r=t,n=e;;){if(r.nodeType==3&&n<r.nodeValue.length)return{node:r,offset:n};if(r.nodeType==1&&n<r.childNodes.length){if(r.contentEditable=="false")return null;r=r.childNodes[n],n=0}else if(r.parentNode&&!O2(r))n=of(r)+1,r=r.parentNode;else return null}}class lc{constructor(e,r,n=!0){this.node=e,this.offset=r,this.precise=n}static before(e,r){return new lc(e.parentNode,of(e),r)}static after(e,r){return new lc(e.parentNode,of(e)+1,r)}}var ei=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(ei||(ei={}));const nm=ei.LTR,FI=ei.RTL;function KU(t){let e=[];for(let r=0;r<t.length;r++)e.push(1<<+t[r]);return e}const C_e=KU("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),T_e=KU("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),lE=Object.create(null),Fc=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),r=t.charCodeAt(1);lE[e]=r,lE[r]=-e}function ZU(t){return t<=247?C_e[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?T_e[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const O_e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ih{get dir(){return this.level%2?FI:nm}constructor(e,r,n){this.from=e,this.to=r,this.level=n}side(e,r){return this.dir==r==e?this.to:this.from}forward(e,r){return e==(this.dir==r)}static find(e,r,n,i){let s=-1;for(let a=0;a<e.length;a++){let o=e[a];if(o.from<=r&&o.to>=r){if(o.level==n)return a;(s<0||(i!=0?i<0?o.from<r:o.to>r:e[s].level>o.level))&&(s=a)}}if(s<0)throw new RangeError("Index out of range");return s}}function YU(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++){let n=t[r],i=e[r];if(n.from!=i.from||n.to!=i.to||n.direction!=i.direction||!YU(n.inner,i.inner))return!1}return!0}const Jn=[];function P_e(t,e,r,n,i){for(let s=0;s<=n.length;s++){let a=s?n[s-1].to:e,o=s<n.length?n[s].from:r,d=s?256:i;for(let m=a,y=d,b=d;m<o;m++){let w=ZU(t.charCodeAt(m));w==512?w=y:w==8&&b==4&&(w=16),Jn[m]=w==4?2:w,w&7&&(b=w),y=w}for(let m=a,y=d,b=d;m<o;m++){let w=Jn[m];if(w==128)m<o-1&&y==Jn[m+1]&&y&24?w=Jn[m]=y:Jn[m]=256;else if(w==64){let O=m+1;for(;O<o&&Jn[O]==64;)O++;let A=m&&y==8||O<r&&Jn[O]==8?b==1?1:8:256;for(let E=m;E<O;E++)Jn[E]=A;m=O-1}else w==8&&b==1&&(Jn[m]=1);y=w,w&7&&(b=w)}}}function j_e(t,e,r,n,i){let s=i==1?2:1;for(let a=0,o=0,d=0;a<=n.length;a++){let m=a?n[a-1].to:e,y=a<n.length?n[a].from:r;for(let b=m,w,O,A;b<y;b++)if(O=lE[w=t.charCodeAt(b)])if(O<0){for(let E=o-3;E>=0;E-=3)if(Fc[E+1]==-O){let $=Fc[E+2],R=$&2?i:$&4?$&1?s:i:0;R&&(Jn[b]=Jn[Fc[E]]=R),o=E;break}}else{if(Fc.length==189)break;Fc[o++]=b,Fc[o++]=w,Fc[o++]=d}else if((A=Jn[b])==2||A==1){let E=A==i;d=E?0:1;for(let $=o-3;$>=0;$-=3){let R=Fc[$+2];if(R&2)break;if(E)Fc[$+2]|=2;else{if(R&4)break;Fc[$+2]|=4}}}}}function A_e(t,e,r,n){for(let i=0,s=n;i<=r.length;i++){let a=i?r[i-1].to:t,o=i<r.length?r[i].from:e;for(let d=a;d<o;){let m=Jn[d];if(m==256){let y=d+1;for(;;)if(y==o){if(i==r.length)break;y=r[i++].to,o=i<r.length?r[i].from:e}else if(Jn[y]==256)y++;else break;let b=s==1,w=(y<e?Jn[y]:n)==1,O=b==w?b?1:2:n;for(let A=y,E=i,$=E?r[E-1].to:t;A>d;)A==$&&(A=r[--E].from,$=E?r[E-1].to:t),Jn[--A]=O;d=y}else s=m,d++}}}function cE(t,e,r,n,i,s,a){let o=n%2?2:1;if(n%2==i%2)for(let d=e,m=0;d<r;){let y=!0,b=!1;if(m==s.length||d<s[m].from){let E=Jn[d];E!=o&&(y=!1,b=E==16)}let w=!y&&o==1?[]:null,O=y?n:n+1,A=d;e:for(;;)if(m<s.length&&A==s[m].from){if(b)break e;let E=s[m];if(!y)for(let $=E.to,R=m+1;;){if($==r)break e;if(R<s.length&&s[R].from==$)$=s[R++].to;else{if(Jn[$]==o)break e;break}}if(m++,w)w.push(E);else{E.from>d&&a.push(new ih(d,E.from,O));let $=E.direction==nm!=!(O%2);uE(t,$?n+1:n,i,E.inner,E.from,E.to,a),d=E.to}A=E.to}else{if(A==r||(y?Jn[A]!=o:Jn[A]==o))break;A++}w?cE(t,d,A,n+1,i,w,a):d<A&&a.push(new ih(d,A,O)),d=A}else for(let d=r,m=s.length;d>e;){let y=!0,b=!1;if(!m||d>s[m-1].to){let E=Jn[d-1];E!=o&&(y=!1,b=E==16)}let w=!y&&o==1?[]:null,O=y?n:n+1,A=d;e:for(;;)if(m&&A==s[m-1].to){if(b)break e;let E=s[--m];if(!y)for(let $=E.from,R=m;;){if($==e)break e;if(R&&s[R-1].to==$)$=s[--R].from;else{if(Jn[$-1]==o)break e;break}}if(w)w.push(E);else{E.to<d&&a.push(new ih(E.to,d,O));let $=E.direction==nm!=!(O%2);uE(t,$?n+1:n,i,E.inner,E.from,E.to,a),d=E.from}A=E.from}else{if(A==e||(y?Jn[A-1]!=o:Jn[A-1]==o))break;A--}w?cE(t,A,d,n+1,i,w,a):A<d&&a.push(new ih(A,d,O)),d=A}}function uE(t,e,r,n,i,s,a){let o=e%2?2:1;P_e(t,i,s,n,o),j_e(t,i,s,n,o),A_e(i,s,n,o),cE(t,i,s,e,r,n,a)}function E_e(t,e,r){if(!t)return[new ih(0,0,e==FI?1:0)];if(e==nm&&!r.length&&!O_e.test(t))return JU(t.length);if(r.length)for(;t.length>Jn.length;)Jn[Jn.length]=256;let n=[],i=e==nm?0:1;return uE(t,i,i,r,0,t.length,n),n}function JU(t){return[new ih(0,t,0)]}let eq="";function z_e(t,e,r,n,i){var s;let a=n.head-t.from,o=ih.find(e,a,(s=n.bidiLevel)!==null&&s!==void 0?s:-1,n.assoc),d=e[o],m=d.side(i,r);if(a==m){let w=o+=i?1:-1;if(w<0||w>=e.length)return null;d=e[o=w],a=d.side(!i,r),m=d.side(i,r)}let y=ps(t.text,a,d.forward(i,r));(y<d.from||y>d.to)&&(y=m),eq=t.text.slice(Math.min(a,y),Math.max(a,y));let b=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return b&&y==m&&b.level+(i?0:1)<d.level?pt.cursor(b.side(!i,r)+t.from,b.forward(i,r)?1:-1,b.level):pt.cursor(y+t.from,d.forward(i,r)?-1:1,d.level)}function M_e(t,e,r){for(let n=e;n<r;n++){let i=ZU(t.charCodeAt(n));if(i==1)return nm;if(i==2||i==4)return FI}return nm}const tq=ur.define(),rq=ur.define(),nq=ur.define(),iq=ur.define(),hE=ur.define(),sq=ur.define(),oq=ur.define(),BI=ur.define(),$I=ur.define(),aq=ur.define({combine:t=>t.some(e=>e)}),lq=ur.define({combine:t=>t.some(e=>e)}),cq=ur.define();class hy{constructor(e,r="nearest",n="nearest",i=5,s=5,a=!1){this.range=e,this.y=r,this.x=n,this.yMargin=i,this.xMargin=s,this.isSnapshot=a}map(e){return e.empty?this:new hy(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new hy(pt.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const vw=Wr.define({map:(t,e)=>t.map(e)}),uq=Wr.define();function ya(t,e,r){let n=t.facet(iq);n.length?n[0](e):window.onerror&&window.onerror(String(e),r,void 0,void 0,e)||(r?console.error(r+":",e):console.error(e))}const Ju=ur.define({combine:t=>t.length?t[0]:!0});let I_e=0;const Ng=ur.define({combine(t){return t.filter((e,r)=>{for(let n=0;n<r;n++)if(t[n].plugin==e.plugin)return!1;return!0})}});class Wi{constructor(e,r,n,i,s){this.id=e,this.create=r,this.domEventHandlers=n,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Ng.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Ng.of({plugin:this,arg:e}))}static define(e,r){const{eventHandlers:n,eventObservers:i,provide:s,decorations:a}=r||{};return new Wi(I_e++,e,n,i,o=>{let d=[];return a&&d.push(sC.of(m=>{let y=m.plugin(o);return y?a(y):Or.none})),s&&d.push(s(o)),d})}static fromClass(e,r){return Wi.define((n,i)=>new e(n,i),r)}}class JO{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let r=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(r)}catch(n){if(ya(r.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(r){ya(e.state,r,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var r;if(!((r=this.value)===null||r===void 0)&&r.destroy)try{this.value.destroy()}catch(n){ya(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const hq=ur.define(),NI=ur.define(),sC=ur.define(),dq=ur.define(),VI=ur.define(),z1=ur.define(),fq=ur.define();function PF(t,e){let r=t.state.facet(fq);if(!r.length)return r;let n=r.map(s=>s instanceof Function?s(t):s),i=[];return rn.spans(n,e.from,e.to,{point(){},span(s,a,o,d){let m=s-e.from,y=a-e.from,b=i;for(let w=o.length-1;w>=0;w--,d--){let O=o[w].spec.bidiIsolate,A;if(O==null&&(O=M_e(e.text,m,y)),d>0&&b.length&&(A=b[b.length-1]).to==m&&A.direction==O)A.to=y,b=A.inner;else{let E={from:m,to:y,direction:O,inner:[]};b.push(E),b=E.inner}}}}),i}const pq=ur.define();function WI(t){let e=0,r=0,n=0,i=0;for(let s of t.state.facet(pq)){let a=s(t);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(r=Math.max(r,a.right)),a.top!=null&&(n=Math.max(n,a.top)),a.bottom!=null&&(i=Math.max(i,a.bottom)))}return{left:e,right:r,top:n,bottom:i}}const av=ur.define();class Al{constructor(e,r,n,i){this.fromA=e,this.toA=r,this.fromB=n,this.toB=i}join(e){return new Al(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let r=e.length,n=this;for(;r>0;r--){let i=e[r-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(r-1,1)}}return e.splice(r,0,n),e}static extendWithRanges(e,r){if(r.length==0)return e;let n=[];for(let i=0,s=0,a=0;;){let o=i<e.length?e[i].fromB:1e9,d=s<r.length?r[s]:1e9,m=Math.min(o,d);if(m==1e9)break;let y=m+a,b=m,w=y;for(;;)if(s<r.length&&r[s]<=b){let O=r[s+1];s+=2,b=Math.max(b,O);for(let A=i;A<e.length&&e[A].fromB<=b;A++)a=e[A].toA-e[A].toB;w=Math.max(w,O+a)}else if(i<e.length&&e[i].fromB<=b){let O=e[i++];b=Math.max(b,O.toB),w=Math.max(w,O.toA),a=O.toA-O.toB}else break;n.push(new Al(y,w,m,b))}return n}}class P2{constructor(e,r,n){this.view=e,this.state=r,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=us.empty(this.startState.doc.length);for(let s of n)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,a,o,d)=>i.push(new Al(s,a,o,d))),this.changedRanges=i}static create(e,r,n){return new P2(e,r,n)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const D_e=[];class Ji{constructor(e,r,n=0){this.dom=e,this.length=r,this.flags=n,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return D_e}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let r=this.domAttrs;r&&g_e(this.dom,r)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,r=this.posAtStart){let n=r;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,r){return null}domPosFor(e,r){let n=of(this.dom),i=this.length?e>0:r>0;return new lc(this.parent.dom,n+(i?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof aC)return e;return null}static get(e){return e.cmTile}}class oC extends Ji{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let r=this.dom,n=null,i,s=(e==null?void 0:e.node)==r?e:null,a=0;for(let o of this.children){if(o.sync(e),a+=o.length+o.breakAfter,i=n?n.nextSibling:r.firstChild,s&&i!=o.dom&&(s.written=!0),o.dom.parentNode==r)for(;i&&i!=o.dom;)i=jF(i);else r.insertBefore(o.dom,i);n=o.dom}for(i=n?n.nextSibling:r.firstChild,s&&i&&(s.written=!0);i;)i=jF(i);this.length=a}}function jF(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class aC extends oC{constructor(e,r){super(r),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let r=Ji.get(e);if(r&&this.owns(r))return r;e=e.parentNode}}blockTiles(e){for(let r=[],n=this,i=0,s=0;;)if(i==n.children.length){if(!r.length)return;n=n.parent,n.breakAfter&&s++,i=r.pop()}else{let a=n.children[i++];if(a instanceof Vd)r.push(i),n=a,i=0;else{let o=s+a.length,d=e(a,s);if(d!==void 0)return d;s=o+a.breakAfter}}}resolveBlock(e,r){let n,i=-1,s,a=-1;if(this.blockTiles((o,d)=>{let m=d+o.length;if(e>=d&&e<=m){if(o.isWidget()&&r>=-1&&r<=1){if(o.flags&32)return!0;o.flags&16&&(n=void 0)}(d<e||e==m&&(r<-1?o.length:o.covers(1)))&&(!n||!o.isWidget()&&n.isWidget())&&(n=o,i=e-d),(m>e||e==d&&(r>1?o.length:o.covers(-1)))&&(!s||!o.isWidget()&&s.isWidget())&&(s=o,a=e-d)}}),!n&&!s)throw new Error("No tile at position "+e);return n&&r<0||!s?{tile:n,offset:i}:{tile:s,offset:a}}}class Vd extends oC{constructor(e,r){super(e),this.wrapper=r}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,r){let n=new Vd(r||document.createElement(e.tagName),e);return r||(n.flags|=4),n}}class Jy extends oC{constructor(e,r){super(e),this.attrs=r}isLine(){return!0}static start(e,r,n){let i=new Jy(r||document.createElement("div"),e);return(!r||!n)&&(i.flags|=4),i}get domAttrs(){return this.attrs}resolveInline(e,r,n){let i=null,s=-1,a=null,o=-1;function d(y,b){for(let w=0,O=0;w<y.children.length&&O<=b;w++){let A=y.children[w],E=O+A.length;E>=b&&(A.isComposite()?d(A,b-O):(!a||a.isHidden&&(r>0||n&&L_e(a,A)))&&(E>b||A.flags&32)?(a=A,o=b-O):(O<b||A.flags&16&&!A.isHidden)&&(i=A,s=b-O)),O=E}}d(this,e);let m=(r<0?i:a)||i||a;return m?{tile:m,offset:m==i?s:o}:null}coordsIn(e,r){let n=this.resolveInline(e,r,!0);return n?n.tile.coordsIn(Math.max(0,n.offset),r):R_e(this)}domIn(e,r){let n=this.resolveInline(e,r);if(n){let{tile:i,offset:s}=n;if(this.dom.contains(i.dom))return i.isText()?new lc(i.dom,Math.min(i.dom.nodeValue.length,s)):i.domPosFor(s,i.flags&16?1:i.flags&32?-1:r);let a=n.tile.parent,o=!1;for(let d of a.children){if(o)return new lc(d.dom,0);d==n.tile&&(o=!0)}}return new lc(this.dom,0)}}function R_e(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let r=Bv(e);return r[r.length-1]||null}function L_e(t,e){let r=t.coordsIn(0,1),n=e.coordsIn(0,1);return r&&n&&n.top<r.bottom}class pa extends oC{constructor(e,r){super(e),this.mark=r}get domAttrs(){return this.mark.attrs}static of(e,r){let n=new pa(r||document.createElement(e.tagName),e);return r||(n.flags|=4),n}}class fp extends Ji{constructor(e,r){super(e,r.length),this.text=r}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,r){let n=this.dom.nodeValue.length;e>n&&(e=n);let i=e,s=e,a=0;e==0&&r<0||e==n&&r>=0?lr.chrome||lr.gecko||(e?(i--,a=1):s<n&&(s++,a=-1)):r<0?i--:s<n&&s++;let o=Db(this.dom,i,s).getClientRects();if(!o.length)return null;let d=o[(a?a<0:r>=0)?0:o.length-1];return lr.safari&&!a&&d.width==0&&(d=Array.prototype.find.call(o,m=>m.width)||d),a?Ib(d,a<0):d||null}static of(e,r){let n=new fp(r||document.createTextNode(e),e);return r||(n.flags|=2),n}}class im extends Ji{constructor(e,r,n,i){super(e,r,i),this.widget=n}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,r){return this.coordsInWidget(e,r,!1)}coordsInWidget(e,r,n){let i=this.widget.coordsAt(this.dom,e,r);if(i)return i;if(n)return Ib(this.dom.getBoundingClientRect(),this.length?e==0:r<=0);{let s=this.dom.getClientRects(),a=null;if(!s.length)return null;let o=this.flags&16?!0:this.flags&32?!1:e>0;for(let d=o?s.length-1:0;a=s[d],!(e>0?d==0:d==s.length-1||a.top<a.bottom);d+=o?-1:1);return Ib(a,!o)}}get overrideDOMText(){if(!this.length)return Sn.empty;let{root:e}=this;if(!e)return Sn.empty;let r=this.posAtStart;return e.view.state.doc.slice(r,r+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,r,n,i,s){return s||(s=e.toDOM(r),e.editable||(s.contentEditable="false")),new im(s,n,e,i)}}class j2 extends Ji{constructor(e){let r=document.createElement("img");r.className="cm-widgetBuffer",r.setAttribute("aria-hidden","true"),super(r,0,e)}get isHidden(){return!0}get overrideDOMText(){return Sn.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class F_e{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,r,n){let{tile:i,index:s,beforeBreak:a,parents:o}=this;for(;e||r>0;)if(i.isComposite())if(a){if(!e)break;n&&n.break(),e--,a=!1}else if(s==i.children.length){if(!e&&!o.length)break;n&&n.leave(i),a=!!i.breakAfter,{tile:i,index:s}=o.pop(),s++}else{let d=i.children[s],m=d.breakAfter;(r>0?d.length<=e:d.length<e)&&(!n||n.skip(d,0,d.length)!==!1||!d.isComposite)?(a=!!m,s++,e-=d.length):(o.push({tile:i,index:s}),i=d,s=0,n&&d.isComposite()&&n.enter(d))}else if(s==i.length)a=!!i.breakAfter,{tile:i,index:s}=o.pop(),s++;else if(e){let d=Math.min(e,i.length-s);n&&n.skip(i,s,s+d),e-=d,s+=d}else break;return this.tile=i,this.index=s,this.beforeBreak=a,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class B_e{constructor(e,r,n,i){this.from=e,this.to=r,this.wrapper=n,this.rank=i}}class $_e{constructor(e,r,n){this.cache=e,this.root=r,this.blockWrappers=n,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,r,n,i){var s;this.flushBuffer();let a=this.ensureMarks(r,n),o=a.lastChild;if(o&&o.isText()&&!(o.flags&8)&&o.length+e.length<512){this.cache.reused.set(o,2);let d=a.children[a.children.length-1]=new fp(o.dom,o.text+e);d.parent=a}else a.append(i||fp.of(e,(s=this.cache.find(fp))===null||s===void 0?void 0:s.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,r){let n=this.curLine;n.dom!=r.line.dom&&(n.setDOM(this.cache.reused.has(r.line)?eP(r.line.dom):r.line.dom),this.cache.reused.set(r.line,2));let i=n;for(let o=r.marks.length-1;o>=0;o--){let d=r.marks[o],m=i.lastChild;if(m instanceof pa&&m.mark.eq(d.mark))m.dom!=d.dom&&m.setDOM(eP(d.dom)),i=m;else{if(this.cache.reused.get(d)){let b=Ji.get(d.dom);b&&b.setDOM(eP(d.dom))}let y=pa.of(d.mark,d.dom);i.append(y),i=y}this.cache.reused.set(d,2)}let s=Ji.get(e.text);s&&this.cache.reused.set(s,2);let a=new fp(e.text,e.text.nodeValue);a.flags|=8,i.append(a)}addInlineWidget(e,r,n){let i=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);i||this.flushBuffer();let s=this.ensureMarks(r,n);!i&&!(e.flags&16)&&s.append(this.getBuffer(1)),s.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,r,n){this.flushBuffer(),this.ensureMarks(r,n).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let r=this.afterWidget||this.lastBlock;r.length+=e,this.pos+=e}addLineStart(e,r){var n;e||(e=mq);let i=Jy.start(e,r||((n=this.cache.find(Jy))===null||n===void 0?void 0:n.dom),!!r);this.getBlockPos().append(this.lastBlock=this.curLine=i)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,r){var n;let i=this.curLine;for(let s=e.length-1;s>=0;s--){let a=e[s],o;if(r>0&&(o=i.lastChild)&&o instanceof pa&&o.mark.eq(a))i=o,r--;else{let d=pa.of(a,(n=this.cache.find(pa,m=>m.mark.eq(a)))===null||n===void 0?void 0:n.dom);i.append(d),i=d,r=0}}return i}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!AF(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(lr.ios&&AF(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(tP,0,32)||new im(tP.toDOM(),0,tP,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let r=new B_e(e.from,e.to,e.value,e.rank),n=this.wrappers.length;for(;n>0&&(this.wrappers[n-1].rank-r.rank||this.wrappers[n-1].to-r.to)<0;)n--;this.wrappers.splice(n,0,r)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let r=this.root;for(let n of this.wrappers){let i=r.lastChild;if(n.from<this.pos&&i instanceof Vd&&i.wrapper.eq(n.wrapper))r=i;else{let s=Vd.of(n.wrapper,(e=this.cache.find(Vd,a=>a.wrapper.eq(n.wrapper)))===null||e===void 0?void 0:e.dom);r.append(s),r=s}}return r}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let r=2|(e<0?16:32),n=this.cache.find(j2,void 0,1);return n&&(n.flags=r),n||new j2(r)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class N_e{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:i,lineBreak:s,done:a}=this.cursor.next(this.skipCount);if(this.skipCount=0,a)throw new Error("Ran out of text content when drawing inline views");this.text=i;let o=this.textOff=Math.min(e,i.length);return s?null:i.slice(0,o)}let r=Math.min(this.text.length,this.textOff+e),n=this.text.slice(this.textOff,r);return this.textOff=r,n}}const A2=[im,Jy,fp,pa,j2,Vd,aC];for(let t=0;t<A2.length;t++)A2[t].bucket=t;class V_e{constructor(e){this.view=e,this.buckets=A2.map(()=>[]),this.index=A2.map(()=>0),this.reused=new Map}add(e){let r=e.constructor.bucket,n=this.buckets[r];n.length<6?n.push(e):n[this.index[r]=(this.index[r]+1)%6]=e}find(e,r,n=2){let i=e.bucket,s=this.buckets[i],a=this.index[i];for(let o=s.length-1;o>=0;o--){let d=(o+a)%s.length,m=s[d];if((!r||r(m))&&!this.reused.has(m))return s.splice(d,1),d<a&&this.index[i]--,this.reused.set(m,n),m}return null}findWidget(e,r,n){let i=this.buckets[0];if(i.length)for(let s=0,a=0;;s++){if(s==i.length){if(a)return null;a=1,s=0}let o=i[s];if(!this.reused.has(o)&&(a==0?o.widget.compare(e):o.widget.constructor==e.constructor&&e.updateDOM(o.dom,this.view)))return i.splice(s,1),s<this.index[0]&&this.index[0]--,o.widget==e&&o.length==r&&(o.flags&497)==n?(this.reused.set(o,1),o):(this.reused.set(o,2),new im(o.dom,r,e,o.flags&-498|n))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,r=2){if(!this.reused.has(e))return this.reused.set(e,r),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class W_e{constructor(e,r,n,i,s){this.view=e,this.decorations=i,this.disallowBlockEffectsFor=s,this.openWidget=!1,this.openMarks=0,this.cache=new V_e(e),this.text=new N_e(e.state.doc),this.builder=new $_e(this.cache,new aC(e,e.contentDOM),rn.iter(n)),this.cache.reused.set(r,2),this.old=new F_e(r),this.reuseWalker={skip:(a,o,d)=>{if(this.cache.add(a),a.isComposite())return!1},enter:a=>this.cache.add(a),leave:()=>{},break:()=>{}}}run(e,r){let n=r&&this.getCompositionContext(r.text);for(let i=0,s=0,a=0;;){let o=a<e.length?e[a++]:null,d=o?o.fromA:this.old.root.length;if(d>i){let m=d-i;this.preserve(m,!a,!o),i=d,s+=m}if(!o)break;r&&o.fromA<=r.range.fromA&&o.toA>=r.range.toA?(this.forward(o.fromA,r.range.fromA,r.range.fromA<r.range.toA?1:-1),this.emit(s,r.range.fromB),this.cache.clear(),this.builder.addComposition(r,n),this.text.skip(r.range.toB-r.range.fromB),this.forward(r.range.fromA,o.toA),this.emit(r.range.toB,o.toB)):(this.forward(o.fromA,o.toA),this.emit(s,o.toB)),s=o.toB,i=o.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,r,n){let i=Q_e(this.old),s=this.openMarks;this.old.advance(e,n?1:-1,{skip:(a,o,d)=>{if(a.isWidget())if(this.openWidget)this.builder.continueWidget(d-o);else{let m=d>0||o<a.length?im.of(a.widget,this.view,d-o,a.flags&496,this.cache.maybeReuse(a)):this.cache.reuse(a);m.flags&256?(m.flags&=-2,this.builder.addBlockWidget(m)):(this.builder.ensureLine(null),this.builder.addInlineWidget(m,i,s),s=i.length)}else if(a.isText())this.builder.ensureLine(null),!o&&d==a.length?this.builder.addText(a.text,i,s,this.cache.reuse(a)):(this.cache.add(a),this.builder.addText(a.text.slice(o,d),i,s)),s=i.length;else if(a.isLine())a.flags&=-2,this.cache.reused.set(a,1),this.builder.addLine(a);else if(a instanceof j2)this.cache.add(a);else if(a instanceof pa)this.builder.ensureLine(null),this.builder.addMark(a,i,s),this.cache.reused.set(a,1),s=i.length;else return!1;this.openWidget=!1},enter:a=>{a.isLine()?this.builder.addLineStart(a.attrs,this.cache.maybeReuse(a)):(this.cache.add(a),a instanceof pa&&i.unshift(a.mark)),this.openWidget=!1},leave:a=>{a.isLine()?i.length&&(i.length=s=0):a instanceof pa&&(i.shift(),s=Math.min(s,i.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,r){let n=null,i=this.builder,s=0,a=rn.spans(this.decorations,e,r,{point:(o,d,m,y,b,w)=>{if(m instanceof rm){if(this.disallowBlockEffectsFor[w]){if(m.block)throw new RangeError("Block decorations may not be specified via plugins");if(d>this.view.state.doc.lineAt(o).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(s=y.length,b>y.length)i.continueWidget(d-o);else{let O=m.widget||(m.block?e0.block:e0.inline),A=U_e(m),E=this.cache.findWidget(O,d-o,A)||im.of(O,this.view,d-o,A);m.block?(m.startSide>0&&i.addLineStartIfNotCovered(n),i.addBlockWidget(E)):(i.ensureLine(n),i.addInlineWidget(E,y,b))}n=null}else n=q_e(n,m);d>o&&this.text.skip(d-o)},span:(o,d,m,y)=>{for(let b=o;b<d;){let w=this.text.next(Math.min(512,d-b));w==null?(i.addLineStartIfNotCovered(n),i.addBreak(),b++):(i.ensureLine(n),i.addText(w,m,b==o?y:m.length),b+=w.length),n=null}}});i.addLineStartIfNotCovered(n),this.openWidget=a>s,this.openMarks=a}forward(e,r,n=1){r-e<=10?this.old.advance(r-e,n,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(r-e-10,-1),this.old.advance(5,n,this.reuseWalker))}getCompositionContext(e){let r=[],n=null;for(let i=e.parentNode;;i=i.parentNode){let s=Ji.get(i);if(i==this.view.contentDOM)break;s instanceof pa?r.push(s):s!=null&&s.isLine()?n=s:i.nodeName=="DIV"&&!n&&i!=this.view.contentDOM?n=new Jy(i,mq):r.push(pa.of(new A1({tagName:i.nodeName.toLowerCase(),attributes:y_e(i)}),i))}return{line:n,marks:r}}}function AF(t,e){let r=n=>{for(let i of n.children)if((e?i.isText():i.length)||r(i))return!0;return!1};return r(t)}function U_e(t){let e=t.isReplace?(t.startSide<0?64:0)|(t.endSide>0?128:0):t.startSide>0?32:16;return t.block&&(e|=256),e}const mq={class:"cm-line"};function q_e(t,e){let r=e.spec.attributes,n=e.spec.class;return!r&&!n||(t||(t={class:"cm-line"}),r&&RI(r,t),n&&(t.class+=" "+n)),t}function Q_e(t){let e=[];for(let r=t.parents.length;r>1;r--){let n=r==t.parents.length?t.tile:t.parents[r].tile;n instanceof pa&&e.push(n.mark)}return e}function eP(t){let e=Ji.get(t);return e&&e.setDOM(t.cloneNode()),t}class e0 extends _u{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}e0.inline=new e0("span");e0.block=new e0("div");const tP=new class extends _u{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class EF{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=Or.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new aC(e,e.contentDOM),this.updateInner([new Al(0,0,0,e.state.doc.length)],null)}update(e){var r;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:y,toA:b})=>b<this.minWidthFrom||y>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((r=this.domChanged)===null||r===void 0)&&r.newSel?i=this.domChanged.newSel.head:!twe(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?G_e(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){let{from:y,to:b}=this.hasComposition;n=new Al(y,b,e.changes.mapPos(y,-1),e.changes.mapPos(b,1)).addToSet(n.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(lr.ie||lr.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,o=this.blockWrappers;this.updateDeco();let d=Z_e(a,this.decorations,e.changes);d.length&&(n=Al.extendWithRanges(n,d));let m=J_e(o,this.blockWrappers,e.changes);return m.length&&(n=Al.extendWithRanges(n,m)),s&&!n.some(y=>y.fromA<=s.range.fromA&&y.toA>=s.range.toA)&&(n=s.range.addToSet(n.slice())),this.tile.flags&2&&n.length==0?!1:(this.updateInner(n,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,r){this.view.viewState.mustMeasureContent=!0;let{observer:n}=this.view;n.ignore(()=>{if(r||e.length){let a=this.tile,o=new W_e(this.view,a,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=o.run(e,r),dE(a,o.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=lr.chrome||lr.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(s),s&&(s.written||n.selectionRange.focusNode!=s.node||!this.tile.dom.contains(s.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.tile.children)s.isWidget()&&s.widget instanceof rP&&i.push(s.dom);n.updateGaps(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let r of e.transactions)for(let n of r.effects)n.is(uq)&&(this.editContextFormatting=n.value)}updateSelection(e=!1,r=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:n}=this.tile,i=this.view.root.activeElement,s=i==n,a=!s&&!(this.view.state.facet(Ju)||n.tabIndex>-1)&&Fv(n,this.view.observer.selectionRange)&&!(i&&n.contains(i));if(!(s||r||a))return;let o=this.forceSelection;this.forceSelection=!1;let d=this.view.state.selection.main,m,y;if(d.empty?y=m=this.inlineDOMNearPos(d.anchor,d.assoc||1):(y=this.inlineDOMNearPos(d.head,d.head==d.from?1:-1),m=this.inlineDOMNearPos(d.anchor,d.anchor==d.from?1:-1)),lr.gecko&&d.empty&&!this.hasComposition&&H_e(m)){let w=document.createTextNode("");this.view.observer.ignore(()=>m.node.insertBefore(w,m.node.childNodes[m.offset]||null)),m=y=new lc(w,0),o=!0}let b=this.view.observer.selectionRange;(o||!b.focusNode||(!$v(m.node,m.offset,b.anchorNode,b.anchorOffset)||!$v(y.node,y.offset,b.focusNode,b.focusOffset))&&!this.suppressWidgetCursorChange(b,d))&&(this.view.observer.ignore(()=>{lr.android&&lr.chrome&&n.contains(b.focusNode)&&ewe(b.focusNode,n)&&(n.blur(),n.focus({preventScroll:!0}));let w=Yy(this.view.root);if(w)if(d.empty){if(lr.gecko){let O=X_e(m.node,m.offset);if(O&&O!=3){let A=(O==1?GU:XU)(m.node,m.offset);A&&(m=new lc(A.node,A.offset))}}w.collapse(m.node,m.offset),d.bidiLevel!=null&&w.caretBidiLevel!==void 0&&(w.caretBidiLevel=d.bidiLevel)}else if(w.extend){w.collapse(m.node,m.offset);try{w.extend(y.node,y.offset)}catch{}}else{let O=document.createRange();d.anchor>d.head&&([m,y]=[y,m]),O.setEnd(y.node,y.offset),O.setStart(m.node,m.offset),w.removeAllRanges(),w.addRange(O)}a&&this.view.root.activeElement==n&&(n.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(m,y)),this.impreciseAnchor=m.precise?null:new lc(b.anchorNode,b.anchorOffset),this.impreciseHead=y.precise?null:new lc(b.focusNode,b.focusOffset)}suppressWidgetCursorChange(e,r){return this.hasComposition&&r.empty&&$v(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==r.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,r=e.state.selection.main,n=Yy(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!n||!r.empty||!r.assoc||!n.modify)return;let a=this.lineAt(r.head,r.assoc);if(!a)return;let o=a.posAtStart;if(r.head==o||r.head==o+a.length)return;let d=this.coordsAt(r.head,-1),m=this.coordsAt(r.head,1);if(!d||!m||d.bottom>m.top)return;let y=this.domAtPos(r.head+r.assoc,r.assoc);n.collapse(y.node,y.offset),n.modify("move",r.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let b=e.observer.selectionRange;e.docView.posFromDOM(b.anchorNode,b.anchorOffset)!=r.from&&n.collapse(i,s)}posFromDOM(e,r){let n=this.tile.nearest(e);if(!n)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let i=n.posAtStart;if(n.isComposite()){let s;if(e==n.dom)s=n.dom.childNodes[r];else{let a=bh(e)==0?0:r==0?-1:1;for(;;){let o=e.parentNode;if(o==n.dom)break;a==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?a=-1:a=1),e=o}a<0?s=e:s=e.nextSibling}if(s==n.dom.firstChild)return i;for(;s&&!Ji.get(s);)s=s.nextSibling;if(!s)return i+n.length;for(let a=0,o=i;;a++){let d=n.children[a];if(d.dom==s)return o;o+=d.length+d.breakAfter}}else return n.isText()?e==n.dom?i+r:i+(r?n.length:0):i}domAtPos(e,r){let{tile:n,offset:i}=this.tile.resolveBlock(e,r);return n.isWidget()?n.domPosFor(e,r):n.domIn(i,r)}inlineDOMNearPos(e,r){let n,i=-1,s=!1,a,o=-1,d=!1;return this.tile.blockTiles((m,y)=>{if(m.isWidget()){if(m.flags&32&&y>=e)return!0;m.flags&16&&(s=!0)}else{let b=y+m.length;if(y<=e&&(n=m,i=e-y,s=b<e),b>=e&&!a&&(a=m,o=e-y,d=y>e),y>e&&a)return!0}}),!n&&!a?this.domAtPos(e,r):(s&&a?n=null:d&&n&&(a=null),n&&r<0||!a?n.domIn(i,r):a.domIn(o,r))}coordsAt(e,r){let{tile:n,offset:i}=this.tile.resolveBlock(e,r);return n.isWidget()?n.widget instanceof rP?null:n.coordsInWidget(i,r,!0):n.coordsIn(i,r)}lineAt(e,r){let{tile:n}=this.tile.resolveBlock(e,r);return n.isLine()?n:null}coordsForChar(e){let{tile:r,offset:n}=this.tile.resolveBlock(e,1);if(!r.isLine())return null;function i(s,a){if(s.isComposite())for(let o of s.children){if(o.length>=a){let d=i(o,a);if(d)return d}if(a-=o.length,a<0)break}else if(s.isText()&&a<s.length){let o=ps(s.text,a);if(o==a)return null;let d=Db(s.dom,a,o).getClientRects();for(let m=0;m<d.length;m++){let y=d[m];if(m==d.length-1||y.top<y.bottom&&y.left<y.right)return y}}return null}return i(r,n)}measureVisibleLineHeights(e){let r=[],{from:n,to:i}=e,s=this.view.contentDOM.clientWidth,a=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,d=this.view.textDirection==ei.LTR,m=0,y=(b,w,O)=>{for(let A=0;A<b.children.length&&!(w>i);A++){let E=b.children[A],$=w+E.length,R=E.dom.getBoundingClientRect(),{height:F}=R;if(O&&!A&&(m+=R.top-O.top),E instanceof Vd)$>n&&y(E,w,R);else if(w>=n&&(m>0&&r.push(-m),r.push(F+m),m=0,a)){let L=E.dom.lastChild,U=L?Bv(L):[];if(U.length){let Q=U[U.length-1],Y=d?Q.right-R.left:R.right-Q.left;Y>o&&(o=Y,this.minWidth=s,this.minWidthFrom=w,this.minWidthTo=$)}}O&&A==b.children.length-1&&(m+=O.bottom-R.bottom),w=$+E.breakAfter}};return y(this.tile,0,null),r}textDirectionAt(e){let{tile:r}=this.tile.resolveBlock(e,1);return getComputedStyle(r.dom).direction=="rtl"?ei.RTL:ei.LTR}measureTextSize(){let e=this.tile.blockTiles(a=>{if(a.isLine()&&a.children.length&&a.length<=20){let o=0,d;for(let m of a.children){if(!m.isText()||/[^ -~]/.test(m.text))return;let y=Bv(m.dom);if(y.length!=1)return;o+=y[0].width,d=y[0].height}if(o)return{lineHeight:a.dom.getBoundingClientRect().height,charWidth:o/a.length,textHeight:d}}});if(e)return e;let r=document.createElement("div"),n,i,s;return r.className="cm-line",r.style.width="99999px",r.style.position="absolute",r.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(r);let a=Bv(r.firstChild)[0];n=r.getBoundingClientRect().height,i=a&&a.width?a.width/27:7,s=a&&a.height?a.height:n,r.remove()}),{lineHeight:n,charWidth:i,textHeight:s}}computeBlockGapDeco(){let e=[],r=this.view.viewState;for(let n=0,i=0;;i++){let s=i==r.viewports.length?null:r.viewports[i],a=s?s.from-1:this.view.state.doc.length;if(a>n){let o=(r.lineBlockAt(a).bottom-r.lineBlockAt(n).top)/this.view.scaleY;e.push(Or.replace({widget:new rP(o),block:!0,inclusive:!0,isBlockGap:!0}).range(n,a))}if(!s)break;n=s.to+1}return Or.set(e)}updateDeco(){let e=1,r=this.view.state.facet(sC).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),n=!1,i=this.view.state.facet(VI).map((s,a)=>{let o=typeof s=="function";return o&&(n=!0),o?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=n,r.push(rn.join(i))),this.decorations=[this.editContextFormatting,...r,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(dq).map(s=>typeof s=="function"?s(this.view):s)}scrollIntoView(e){if(e.isSnapshot){let m=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=m.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let m of this.view.state.facet(cq))try{if(m(this.view,e.range,e))return!0}catch(y){ya(this.view.state,y,"scroll handler")}let{range:r}=e,n=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1),i;if(!n)return;!r.empty&&(i=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(n={left:Math.min(n.left,i.left),top:Math.min(n.top,i.top),right:Math.max(n.right,i.right),bottom:Math.max(n.bottom,i.bottom)});let s=WI(this.view),a={left:n.left-s.left,top:n.top-s.top,right:n.right+s.right,bottom:n.bottom+s.bottom},{offsetWidth:o,offsetHeight:d}=this.view.scrollDOM;b_e(this.view.scrollDOM,a,r.head<r.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,d),-d),this.view.textDirection==ei.LTR)}lineHasWidget(e){let r=n=>n.isWidget()||n.children.some(r);return r(this.tile.resolveBlock(e,1).tile)}destroy(){dE(this.tile)}}function dE(t,e){let r=e==null?void 0:e.get(t);if(r!=1){r==null&&t.destroy();for(let n of t.children)dE(n,e)}}function H_e(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function gq(t,e){let r=t.observer.selectionRange;if(!r.focusNode)return null;let n=GU(r.focusNode,r.focusOffset),i=XU(r.focusNode,r.focusOffset),s=n||i;if(i&&n&&i.node!=n.node){let o=Ji.get(i.node);if(!o||o.isText()&&o.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let d=Ji.get(n.node);!d||d.isText()&&d.text!=n.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=n,!s)return null;let a=e-s.offset;return{from:a,to:a+s.node.nodeValue.length,node:s.node}}function G_e(t,e,r){let n=gq(t,r);if(!n)return null;let{node:i,from:s,to:a}=n,o=i.nodeValue;if(/[\n\r]/.test(o)||t.state.doc.sliceString(n.from,n.to)!=o)return null;let d=e.invertedDesc;return{range:new Al(d.mapPos(s),d.mapPos(a),s,a),text:i}}function X_e(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let K_e=class{constructor(){this.changes=[]}compareRange(e,r){cy(e,r,this.changes)}comparePoint(e,r){cy(e,r,this.changes)}boundChange(e){cy(e,e,this.changes)}};function Z_e(t,e,r){let n=new K_e;return rn.compare(t,e,r,n),n.changes}class Y_e{constructor(){this.changes=[]}compareRange(e,r){cy(e,r,this.changes)}comparePoint(){}boundChange(e){cy(e,e,this.changes)}}function J_e(t,e,r){let n=new Y_e;return rn.compare(t,e,r,n),n.changes}function ewe(t,e){for(let r=t;r&&r!=e;r=r.assignedSlot||r.parentNode)if(r.nodeType==1&&r.contentEditable=="false")return!0;return!1}function twe(t,e){let r=!1;return e&&t.iterChangedRanges((n,i)=>{n<e.to&&i>e.from&&(r=!0)}),r}class rP extends _u{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function rwe(t,e,r=1){let n=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return pt.cursor(e);s==0?r=1:s==i.length&&(r=-1);let a=s,o=s;r<0?a=ps(i.text,s,!1):o=ps(i.text,s);let d=n(i.text.slice(a,o));for(;a>0;){let m=ps(i.text,a,!1);if(n(i.text.slice(m,a))!=d)break;a=m}for(;o<i.length;){let m=ps(i.text,o);if(n(i.text.slice(o,m))!=d)break;o=m}return pt.range(a+i.from,o+i.from)}function nwe(t,e,r,n,i){let s=Math.round((n-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&r.height>t.defaultLineHeight*1.5){let o=t.viewState.heightOracle.textHeight,d=Math.floor((i-r.top-(t.defaultLineHeight-o)*.5)/o);s+=d*t.viewState.heightOracle.lineLength}let a=t.state.sliceDoc(r.from,r.to);return r.from+eE(a,s,t.state.tabSize)}function fE(t,e,r){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){let i;for(let s of n.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==no.Text&&(i.type!=s.type||(r<0?s.from<e:s.to>e)))&&(i=s)}}return i||n}return n}function iwe(t,e,r,n){let i=fE(t,e.head,e.assoc||-1),s=!n||i.type!=no.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let a=t.dom.getBoundingClientRect(),o=t.textDirectionAt(i.from),d=t.posAtCoords({x:r==(o==ei.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(d!=null)return pt.cursor(d,r?-1:1)}return pt.cursor(r?i.to:i.from,r?-1:1)}function zF(t,e,r,n){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),a=t.textDirectionAt(i.from);for(let o=e,d=null;;){let m=z_e(i,s,a,o,r),y=eq;if(!m){if(i.number==(r?t.state.doc.lines:1))return o;y=`
`,i=t.state.doc.line(i.number+(r?1:-1)),s=t.bidiSpans(i),m=t.visualLineSide(i,!r)}if(d){if(!d(y))return o}else{if(!n)return m;d=n(y)}o=m}}function swe(t,e,r){let n=t.state.charCategorizer(e),i=n(r);return s=>{let a=n(s);return i==yi.Space&&(i=a),i==a}}function owe(t,e,r,n){let i=e.head,s=r?1:-1;if(i==(r?t.state.doc.length:0))return pt.cursor(i,e.assoc);let a=e.goalColumn,o,d=t.contentDOM.getBoundingClientRect(),m=t.coordsAtPos(i,(e.empty?e.assoc:0)||(r?1:-1)),y=t.documentTop;if(m)a==null&&(a=m.left-d.left),o=s<0?m.top:m.bottom;else{let A=t.viewState.lineBlockAt(i);a==null&&(a=Math.min(d.right-d.left,t.defaultCharacterWidth*(i-A.from))),o=(s<0?A.top:A.bottom)+y}let b=d.left+a,w=n??t.viewState.heightOracle.textHeight>>1,O=pE(t,{x:b,y:o+w*s},!1,s);return pt.cursor(O.pos,O.assoc,void 0,a)}function Nv(t,e,r){for(;;){let n=0;for(let i of t)i.between(e-1,e+1,(s,a,o)=>{if(e>s&&e<a){let d=n||r||(e-s<a-e?-1:1);e=d<0?s:a,n=d}});if(!n)return e}}function yq(t,e){let r=null;for(let n=0;n<e.ranges.length;n++){let i=e.ranges[n],s=null;if(i.empty){let a=Nv(t,i.from,0);a!=i.from&&(s=pt.cursor(a,-1))}else{let a=Nv(t,i.from,-1),o=Nv(t,i.to,1);(a!=i.from||o!=i.to)&&(s=pt.range(i.from==i.anchor?a:o,i.from==i.head?a:o))}s&&(r||(r=e.ranges.slice()),r[n]=s)}return r?pt.create(r,e.mainIndex):e}function nP(t,e,r){let n=Nv(t.state.facet(z1).map(i=>i(t)),r.from,e.head>r.from?-1:1);return n==r.from?r:pt.cursor(n,n<r.from?1:-1)}class ru{constructor(e,r){this.pos=e,this.assoc=r}}function pE(t,e,r,n){let i=t.contentDOM.getBoundingClientRect(),s=i.top+t.viewState.paddingTop,{x:a,y:o}=e,d=o-s,m;for(;;){if(d<0)return new ru(0,1);if(d>t.viewState.docHeight)return new ru(t.state.doc.length,-1);if(m=t.elementAtHeight(d),n==null)break;if(m.type==no.Text){if(n<0?m.to<t.viewport.from:m.from>t.viewport.to)break;let w=t.docView.coordsAt(n<0?m.from:m.to,n>0?-1:1);if(w&&(n<0?w.top<=d+s:w.bottom>=d+s))break}let b=t.viewState.heightOracle.textHeight/2;d=n>0?m.bottom+b:m.top-b}if(t.viewport.from>=m.to||t.viewport.to<=m.from){if(r)return null;if(m.type==no.Text){let b=nwe(t,i,m,a,o);return new ru(b,b==m.from?1:-1)}}if(m.type!=no.Text)return d<(m.top+m.bottom)/2?new ru(m.from,1):new ru(m.to,-1);let y=t.docView.lineAt(m.from,2);return(!y||y.length!=m.length)&&(y=t.docView.lineAt(m.from,-2)),xq(t,y,m.from,a,o)}function xq(t,e,r,n,i){let s=-1,a=null,o=1e9,d=1e9,m=i,y=i,b=(w,O)=>{for(let A=0;A<w.length;A++){let E=w[A];if(E.top==E.bottom)continue;let $=E.left>n?E.left-n:E.right<n?n-E.right:0,R=E.top>i?E.top-i:E.bottom<i?i-E.bottom:0;E.top<=y&&E.bottom>=m&&(m=Math.min(E.top,m),y=Math.max(E.bottom,y),R=0),(s<0||(R-d||$-o)<0)&&(s>=0&&d&&o<$&&a.top<=y-2&&a.bottom>=m+2?d=0:(s=O,o=$,d=R,a=E))}};if(e.isText()){for(let O=0;O<e.length;){let A=ps(e.text,O);if(b(Db(e.dom,O,A).getClientRects(),O),!o&&!d)break;O=A}return n>(a.left+a.right)/2==(MF(t,s+r)==ei.LTR)?new ru(r+ps(e.text,s),-1):new ru(r+s,1)}else{if(!e.length)return new ru(r,1);for(let E=0;E<e.children.length;E++){let $=e.children[E];if($.flags&48)continue;let R=($.dom.nodeType==1?$.dom:Db($.dom,0,$.length)).getClientRects();if(b(R,E),!o&&!d)break}let w=e.children[s],O=e.posBefore(w,r);return w.isComposite()||w.isText()?xq(t,w,O,Math.max(a.left,Math.min(a.right,n)),i):n>(a.left+a.right)/2==(MF(t,s+r)==ei.LTR)?new ru(O+w.length,-1):new ru(O,1)}}function MF(t,e){let r=t.state.doc.lineAt(e);return t.bidiSpans(r)[ih.find(t.bidiSpans(r),e-r.from,-1,1)].dir}const lv="";class awe{constructor(e,r){this.points=e,this.view=r,this.text="",this.lineSeparator=r.state.facet(pn.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=lv}readRange(e,r){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let s=this.text.length;this.readNode(i);let a=Ji.get(i),o=i.nextSibling;if(o==r){a!=null&&a.breakAfter&&!o&&n!=this.view.contentDOM&&this.lineBreak();break}let d=Ji.get(o);(a&&d?a.breakAfter:(a?a.breakAfter:O2(i))||O2(o)&&(i.nodeName!="BR"||a!=null&&a.isWidget())&&this.text.length>s)&&!cwe(o,r)&&this.lineBreak(),i=o}return this.findPointBefore(n,r),this}readTextNode(e){let r=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,r.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,a=1,o;if(this.lineSeparator?(s=r.indexOf(this.lineSeparator,n),a=this.lineSeparator.length):(o=i.exec(r))&&(s=o.index,a=o[0].length),this.append(r.slice(n,s<0?r.length:s)),s<0)break;if(this.lineBreak(),a>1)for(let d of this.points)d.node==e&&d.pos>this.text.length&&(d.pos-=a-1);n=s+a}}readNode(e){let r=Ji.get(e),n=r&&r.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,r){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==r&&(n.pos=this.text.length)}findPointInside(e,r){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(lwe(e,n.node,n.offset)?r:0))}}function lwe(t,e,r){for(;;){if(!e||r<bh(e))return!1;if(e==t)return!0;r=of(e)+1,e=e.parentNode}}function cwe(t,e){let r;for(;!(t==e||!t);t=t.nextSibling){let n=Ji.get(t);if(!(n!=null&&n.isWidget()))return!1;n&&(r||(r=[])).push(n)}if(r)for(let n of r){let i=n.overrideDOMText;if(i!=null&&i.length)return!1}return!0}class IF{constructor(e,r){this.node=e,this.offset=r,this.pos=-1}}class uwe{constructor(e,r,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=r>-1;let{impreciseHead:s,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&r>-1)this.newSel=null;else if(r>-1&&(this.bounds=vq(e.docView.tile,r,n,0))){let o=s||a?[]:dwe(e),d=new awe(o,e);d.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=d.text,this.newSel=fwe(o,this.bounds.from)}else{let o=e.observer.selectionRange,d=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!aE(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),m=a&&a.node==o.anchorNode&&a.offset==o.anchorOffset||!aE(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),y=e.viewport;if((lr.ios||lr.chrome)&&e.state.selection.main.empty&&d!=m&&(y.from>0||y.to<e.state.doc.length)){let b=Math.min(d,m),w=Math.max(d,m),O=y.from-b,A=y.to-w;(O==0||O==1||b==0)&&(A==0||A==-1||w==e.state.doc.length)&&(d=0,m=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(pt.range(m,d)):this.newSel=pt.single(m,d)}}}function vq(t,e,r,n){if(t.isComposite()){let i=-1,s=-1,a=-1,o=-1;for(let d=0,m=n,y=n;d<t.children.length;d++){let b=t.children[d],w=m+b.length;if(m<e&&w>r)return vq(b,e,r,m);if(w>=e&&i==-1&&(i=d,s=m),m>r&&b.dom.parentNode==t.dom){a=d,o=y;break}y=w,m=w+b.breakAfter}return{from:s,to:o<0?n+t.length:o,startDOM:(i?t.children[i-1].dom.nextSibling:null)||t.dom.firstChild,endDOM:a<t.children.length&&a>=0?t.children[a].dom:null}}else return t.isText()?{from:n,to:n+t.length,startDOM:t.dom,endDOM:t.dom.nextSibling}:null}function bq(t,e){let r,{newSel:n}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:o}=e.bounds,d=i.from,m=null;(s===8||lr.android&&e.text.length<o-a)&&(d=i.to,m="end");let y=_q(t.state.doc.sliceString(a,o,lv),e.text,d-a,m);y&&(lr.chrome&&s==13&&y.toB==y.from+2&&e.text.slice(y.from,y.toB)==lv+lv&&y.toB--,r={from:a+y.from,to:a+y.toA,insert:Sn.of(e.text.slice(y.from,y.toB).split(lv))})}else n&&(!t.hasFocus&&t.state.facet(Ju)||E2(n,i))&&(n=null);if(!r&&!n)return!1;if(!r&&e.typeOver&&!i.empty&&n&&n.main.empty?r={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(lr.mac||lr.android)&&r&&r.from==r.to&&r.from==i.head-1&&/^\. ?$/.test(r.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(n&&r.insert.length==2&&(n=pt.single(n.main.anchor-1,n.main.head-1)),r={from:r.from,to:r.to,insert:Sn.of([r.insert.toString().replace("."," ")])}):r&&r.from>=i.from&&r.to<=i.to&&(r.from!=i.from||r.to!=i.to)&&i.to-i.from-(r.to-r.from)<=4?r={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,r.from).append(r.insert).append(t.state.doc.slice(r.to,i.to))}:t.state.doc.lineAt(i.from).to<i.to&&t.docView.lineHasWidget(i.to)&&t.inputState.insertingTextAt>Date.now()-50?r={from:i.from,to:i.to,insert:t.state.toText(t.inputState.insertingText)}:lr.chrome&&r&&r.from==r.to&&r.from==i.head&&r.insert.toString()==`
 `&&t.lineWrapping&&(n&&(n=pt.single(n.main.anchor-1,n.main.head-1)),r={from:i.from,to:i.to,insert:Sn.of([" "])}),r)return UI(t,r,n,s);if(n&&!E2(n,i)){let a=!1,o="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(a=!0),o=t.inputState.lastSelectionOrigin,o=="select.pointer"&&(n=yq(t.state.facet(z1).map(d=>d(t)),n))),t.dispatch({selection:n,scrollIntoView:a,userEvent:o}),!0}else return!1}function UI(t,e,r,n=-1){if(lr.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(lr.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&uy(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||n==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&uy(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&uy(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a,o=()=>a||(a=hwe(t,e,r));return t.state.facet(sq).some(d=>d(t,e.from,e.to,s,o))||t.dispatch(o()),!0}function hwe(t,e,r){let n,i=t.state,s=i.selection.main,a=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let d=e.from<s.from?-1:1,m=d<0?s.from:s.to,y=Nv(i.facet(z1).map(b=>b(t)),m,d);e.from==y&&(a=y)}if(a>-1)n={changes:e,selection:pt.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!r||r.main.empty&&r.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let d=s.from<e.from?i.sliceDoc(s.from,e.from):"",m=s.to>e.to?i.sliceDoc(e.to,s.to):"";n=i.replaceSelection(t.state.toText(d+e.insert.sliceString(0,void 0,t.state.lineBreak)+m))}else{let d=i.changes(e),m=r&&r.main.to<=d.newLength?r.main:void 0;if(i.selection.ranges.length>1&&(t.inputState.composing>=0||t.inputState.compositionPendingChange)&&e.to<=s.to+10&&e.to>=s.to-10){let y=t.state.sliceDoc(e.from,e.to),b,w=r&&gq(t,r.main.head);if(w){let A=e.insert.length-(e.to-e.from);b={from:w.from,to:w.to-A}}else b=t.state.doc.lineAt(s.head);let O=s.to-e.to;n=i.changeByRange(A=>{if(A.from==s.from&&A.to==s.to)return{changes:d,range:m||A.map(d)};let E=A.to-O,$=E-y.length;if(t.state.sliceDoc($,E)!=y||E>=b.from&&$<=b.to)return{range:A};let R=i.changes({from:$,to:E,insert:e.insert}),F=A.to-s.to;return{changes:R,range:m?pt.range(Math.max(0,m.anchor+F),Math.max(0,m.head+F)):A.map(R)}})}else n={changes:d,selection:m&&i.selection.replaceRange(m)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(n,{userEvent:o,scrollIntoView:!0})}function _q(t,e,r,n){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let a=t.length,o=e.length;for(;a>0&&o>0&&t.charCodeAt(a-1)==e.charCodeAt(o-1);)a--,o--;if(n=="end"){let d=Math.max(0,s-Math.min(a,o));r-=a+d-s}if(a<s&&t.length<e.length){let d=r<=s&&r>=a?s-r:0;s-=d,o=s+(o-a),a=s}else if(o<s){let d=r<=s&&r>=o?s-r:0;s-=d,a=s+(a-o),o=s}return{from:s,toA:a,toB:o}}function dwe(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}=t.observer.selectionRange;return r&&(e.push(new IF(r,n)),(i!=r||s!=n)&&e.push(new IF(i,s))),e}function fwe(t,e){if(t.length==0)return null;let r=t[0].pos,n=t.length==2?t[1].pos:r;return r>-1&&n>-1?pt.single(r+e,n+e):null}function E2(t,e){return e.head==t.main.head&&e.anchor==t.main.anchor}class pwe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,lr.safari&&e.contentDOM.addEventListener("input",()=>null),lr.gecko&&jwe(e.contentDOM.ownerDocument)}handleEvent(e){!wwe(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,r){let n=this.handlers[e];if(n){for(let i of n.observers)i(this.view,r);for(let i of n.handlers){if(r.defaultPrevented)break;if(i(this.view,r)){r.preventDefault();break}}}}ensureHandlers(e){let r=mwe(e),n=this.handlers,i=this.view.contentDOM;for(let s in r)if(s!="scroll"){let a=!r[s].handlers.length,o=n[s];o&&a!=!o.handlers.length&&(i.removeEventListener(s,this.handleEvent),o=null),o||i.addEventListener(s,this.handleEvent,{passive:a})}for(let s in n)s!="scroll"&&!r[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=r}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Sq.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),lr.android&&lr.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let r;return lr.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((r=wq.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||gwe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=r||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let r=this.pendingIOSKey;return!r||r.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,uy(this.view.contentDOM,r.key,r.keyCode,r instanceof KeyboardEvent?r:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:lr.safari&&!lr.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function DF(t,e){return(r,n)=>{try{return e.call(t,n,r)}catch(i){ya(r.state,i)}}}function mwe(t){let e=Object.create(null);function r(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of t){let i=n.spec,s=i&&i.plugin.domEventHandlers,a=i&&i.plugin.domEventObservers;if(s)for(let o in s){let d=s[o];d&&r(o).handlers.push(DF(n.value,d))}if(a)for(let o in a){let d=a[o];d&&r(o).observers.push(DF(n.value,d))}}for(let n in xc)r(n).handlers.push(xc[n]);for(let n in Vl)r(n).observers.push(Vl[n]);return e}const wq=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],gwe="dthko",Sq=[16,17,18,20,91,92,224,225],bw=6;function _w(t){return Math.max(0,t)*.7+8}function ywe(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class xwe{constructor(e,r,n,i){this.view=e,this.startEvent=r,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=r,this.scrollParents=__e(e.contentDOM),this.atoms=e.state.facet(z1).map(a=>a(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=r.shiftKey,this.multiple=e.state.facet(pn.allowMultipleSelections)&&vwe(e,r),this.dragging=_we(e,r)&&Tq(r)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&ywe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,n=0,i=0,s=0,a=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let d=WI(this.view);e.clientX-d.left<=i+bw?r=-_w(i-e.clientX):e.clientX+d.right>=a-bw&&(r=_w(e.clientX-a)),e.clientY-d.top<=s+bw?n=-_w(s-e.clientY):e.clientY+d.bottom>=o-bw&&(n=_w(e.clientY-o)),this.setScrollSpeed(r,n)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,r){this.scrollSpeed={x:e,y:r},e||r?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:r}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),r&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=r,r=0),(e||r)&&this.view.win.scrollBy(e,r),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:r}=this,n=yq(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(r.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(r=>r.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function vwe(t,e){let r=t.state.facet(tq);return r.length?r[0](e):lr.mac?e.metaKey:e.ctrlKey}function bwe(t,e){let r=t.state.facet(rq);return r.length?r[0](e):lr.mac?!e.altKey:!e.ctrlKey}function _we(t,e){let{main:r}=t.state.selection;if(r.empty)return!1;let n=Yy(t.root);if(!n||n.rangeCount==0)return!0;let i=n.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let a=i[s];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function wwe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target,n;r!=t.contentDOM;r=r.parentNode)if(!r||r.nodeType==11||(n=Ji.get(r))&&n.isWidget()&&!n.isHidden&&n.widget.ignoreEvent(e))return!1;return!0}const xc=Object.create(null),Vl=Object.create(null),kq=lr.ie&&lr.ie_version<15||lr.ios&&lr.webkit_version<604;function Swe(t){let e=t.dom.parentNode;if(!e)return;let r=e.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{t.focus(),r.remove(),Cq(t,r.value)},50)}function lC(t,e,r){for(let n of t.facet(e))r=n(r,t);return r}function Cq(t,e){e=lC(t.state,BI,e);let{state:r}=t,n,i=1,s=r.toText(e),a=s.lines==r.selection.ranges.length;if(mE!=null&&r.selection.ranges.every(d=>d.empty)&&mE==s.toString()){let d=-1;n=r.changeByRange(m=>{let y=r.doc.lineAt(m.from);if(y.from==d)return{range:m};d=y.from;let b=r.toText((a?s.line(i++).text:e)+r.lineBreak);return{changes:{from:y.from,insert:b},range:pt.cursor(m.from+b.length)}})}else a?n=r.changeByRange(d=>{let m=s.line(i++);return{changes:{from:d.from,to:d.to,insert:m.text},range:pt.cursor(d.from+m.length)}}):n=r.replaceSelection(s);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Vl.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};xc.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Vl.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Vl.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};xc.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let r=null;for(let n of t.state.facet(nq))if(r=n(t,e),r)break;if(!r&&e.button==0&&(r=Cwe(t,e)),r){let n=!t.hasFocus;t.inputState.startMouseSelection(new xwe(t,e,r,n)),n&&t.observer.ignore(()=>{QU(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function RF(t,e,r,n){if(n==1)return pt.cursor(e,r);if(n==2)return rwe(t.state,e,r);{let i=t.docView.lineAt(e,r),s=t.state.doc.lineAt(i?i.posAtEnd:e),a=i?i.posAtStart:s.from,o=i?i.posAtEnd:s.to;return o<t.state.doc.length&&o==s.to&&o++,pt.range(a,o)}}const kwe=lr.ie&&lr.ie_version<=11;let LF=null,FF=0,BF=0;function Tq(t){if(!kwe)return t.detail;let e=LF,r=BF;return LF=t,BF=Date.now(),FF=!e||r>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(FF+1)%3:1}function Cwe(t,e){let r=t.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),n=Tq(e),i=t.state.selection;return{update(s){s.docChanged&&(r.pos=s.changes.mapPos(r.pos),i=i.map(s.changes))},get(s,a,o){let d=t.posAndSideAtCoords({x:s.clientX,y:s.clientY},!1),m,y=RF(t,d.pos,d.assoc,n);if(r.pos!=d.pos&&!a){let b=RF(t,r.pos,r.assoc,n),w=Math.min(b.from,y.from),O=Math.max(b.to,y.to);y=w<y.from?pt.range(w,O):pt.range(O,w)}return a?i.replaceRange(i.main.extend(y.from,y.to)):o&&n==1&&i.ranges.length>1&&(m=Twe(i,d.pos))?m:o?i.addRange(y):pt.create([y])}}}function Twe(t,e){for(let r=0;r<t.ranges.length;r++){let{from:n,to:i}=t.ranges[r];if(n<=e&&i>=e)return pt.create(t.ranges.slice(0,r).concat(t.ranges.slice(r+1)),t.mainIndex==r?0:t.mainIndex-(t.mainIndex>r?1:0))}return null}xc.dragstart=(t,e)=>{let{selection:{main:r}}=t.state;if(e.target.draggable){let i=t.docView.tile.nearest(e.target);if(i&&i.isWidget()){let s=i.posAtStart,a=s+i.length;(s>=r.to||a<=r.from)&&(r=pt.range(s,a))}}let{inputState:n}=t;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=r,e.dataTransfer&&(e.dataTransfer.setData("Text",lC(t.state,$I,t.state.sliceDoc(r.from,r.to))),e.dataTransfer.effectAllowed="copyMove"),!1};xc.dragend=t=>(t.inputState.draggedContent=null,!1);function $F(t,e,r,n){if(r=lC(t.state,BI,r),!r)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,a=n&&s&&bwe(t,e)?{from:s.from,to:s.to}:null,o={from:i,insert:r},d=t.state.changes(a?[a,o]:o);t.focus(),t.dispatch({changes:d,selection:{anchor:d.mapPos(i,-1),head:d.mapPos(i,1)},userEvent:a?"move.drop":"input.drop"}),t.inputState.draggedContent=null}xc.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let r=e.dataTransfer.files;if(r&&r.length){let n=Array(r.length),i=0,s=()=>{++i==r.length&&$F(t,e,n.filter(a=>a!=null).join(t.state.lineBreak),!1)};for(let a=0;a<r.length;a++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(n[a]=o.result),s()},o.readAsText(r[a])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return $F(t,e,n,!0),!0}return!1};xc.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let r=kq?null:e.clipboardData;return r?(Cq(t,r.getData("text/plain")||r.getData("text/uri-list")),!0):(Swe(t),!1)};function Owe(t,e){let r=t.dom.parentNode;if(!r)return;let n=r.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),t.focus()},50)}function Pwe(t){let e=[],r=[],n=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),r.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let a=t.doc.lineAt(s);a.number>i&&(e.push(a.text),r.push({from:a.from,to:Math.min(t.doc.length,a.to+1)})),i=a.number}n=!0}return{text:lC(t,$I,e.join(t.lineBreak)),ranges:r,linewise:n}}let mE=null;xc.copy=xc.cut=(t,e)=>{let r=Yy(t.root);if(r&&!Fv(t.contentDOM,r))return!1;let{text:n,ranges:i,linewise:s}=Pwe(t.state);if(!n&&!s)return!1;mE=s?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let a=kq?null:e.clipboardData;return a?(a.clearData(),a.setData("text/plain",n),!0):(Owe(t,n),!1)};const Oq=vu.define();function Pq(t,e){let r=[];for(let n of t.facet(oq)){let i=n(t,e);i&&r.push(i)}return r.length?t.update({effects:r,annotations:Oq.of(!0)}):null}function jq(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let r=Pq(t.state,e);r?t.dispatch(r):t.update([])}},10)}Vl.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),jq(t)};Vl.blur=t=>{t.observer.clearSelectionRange(),jq(t)};Vl.compositionstart=Vl.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Vl.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,lr.chrome&&lr.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Vl.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};xc.beforeinput=(t,e)=>{var r,n;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(t.inputState.insertingText=e.data,t.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(r=e.dataTransfer)===null||r===void 0?void 0:r.getData("text/plain"),a=e.getTargetRanges();if(s&&a.length){let o=a[0],d=t.posAtDOM(o.startContainer,o.startOffset),m=t.posAtDOM(o.endContainer,o.endOffset);return UI(t,{from:d,to:m,insert:t.state.toText(s)},null),!0}}let i;if(lr.chrome&&lr.android&&(i=wq.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return lr.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),lr.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Vl.compositionend(t,e),20),!1};const NF=new Set;function jwe(t){NF.has(t)||(NF.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const VF=["pre-wrap","normal","pre-line","break-spaces"];let t0=!1;function WF(){t0=!1}class Awe{constructor(e){this.lineWrapping=e,this.doc=Sn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,r){let n=this.doc.lineAt(r).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((r-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return VF.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let r=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(i*10)]||(r=!0,this.heightSamples[Math.floor(i*10)]=!0)}return r}refresh(e,r,n,i,s,a){let o=VF.indexOf(e)>-1,d=Math.abs(r-this.lineHeight)>.3||this.lineWrapping!=o||Math.abs(n-this.charWidth)>.1;if(this.lineWrapping=o,this.lineHeight=r,this.charWidth=n,this.textHeight=i,this.lineLength=s,d){this.heightSamples={};for(let m=0;m<a.length;m++){let y=a[m];y<0?m++:this.heightSamples[Math.floor(y*10)]=!0}}return d}}class Ewe{constructor(e,r){this.from=e,this.heights=r,this.index=0}get more(){return this.index<this.heights.length}}class ac{constructor(e,r,n,i,s){this.from=e,this.length=r,this.top=n,this.height=i,this._content=s}get type(){return typeof this._content=="number"?no.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof rm?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let r=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ac(this.from,this.length+e.length,this.top,this.height+e.height,r)}}var ti=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(ti||(ti={}));const CS=.001;class Uo{constructor(e,r,n=2){this.length=e,this.height=r,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>CS&&(t0=!0),this.height=e)}replace(e,r,n){return Uo.of(n)}decomposeLeft(e,r){r.push(this)}decomposeRight(e,r){r.push(this)}applyChanges(e,r,n,i){let s=this,a=n.doc;for(let o=i.length-1;o>=0;o--){let{fromA:d,toA:m,fromB:y,toB:b}=i[o],w=s.lineAt(d,ti.ByPosNoHeight,n.setDoc(r),0,0),O=w.to>=m?w:s.lineAt(m,ti.ByPosNoHeight,n,0,0);for(b+=O.to-m,m=O.to;o>0&&w.from<=i[o-1].toA;)d=i[o-1].fromA,y=i[o-1].fromB,o--,d<w.from&&(w=s.lineAt(d,ti.ByPosNoHeight,n,0,0));y+=w.from-d,d=w.from;let A=qI.build(n.setDoc(a),e,y,b);s=z2(s,s.replace(d,m,A))}return s.updateHeight(n,0)}static empty(){return new Wa(0,0,0)}static of(e){if(e.length==1)return e[0];let r=0,n=e.length,i=0,s=0;for(;;)if(r==n)if(i>s*2){let o=e[r-1];o.break?e.splice(--r,1,o.left,null,o.right):e.splice(--r,1,o.left,o.right),n+=1+o.break,i-=o.size}else if(s>i*2){let o=e[n];o.break?e.splice(n,1,o.left,null,o.right):e.splice(n,1,o.left,o.right),n+=2+o.break,s-=o.size}else break;else if(i<s){let o=e[r++];o&&(i+=o.size)}else{let o=e[--n];o&&(s+=o.size)}let a=0;return e[r-1]==null?(a=1,r--):e[r]==null&&(a=1,n++),new Mwe(Uo.of(e.slice(0,r)),a,Uo.of(e.slice(n)))}}function z2(t,e){return t==e?t:(t.constructor!=e.constructor&&(t0=!0),e)}Uo.prototype.size=1;const zwe=Or.replace({});class Aq extends Uo{constructor(e,r,n){super(e,r),this.deco=n,this.spaceAbove=0}mainBlock(e,r){return new ac(r,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,r,n,i){return this.spaceAbove&&e<n+this.spaceAbove?new ac(i,0,n,this.spaceAbove,zwe):this.mainBlock(n,i)}lineAt(e,r,n,i,s){let a=this.mainBlock(i,s);return this.spaceAbove?this.blockAt(0,n,i,s).join(a):a}forEachLine(e,r,n,i,s,a){e<=s+this.length&&r>=s&&a(this.lineAt(0,ti.ByPos,n,i,s))}setMeasuredHeight(e){let r=e.heights[e.index++];r<0?(this.spaceAbove=-r,r=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(r)}updateHeight(e,r=0,n=!1,i){return i&&i.from<=r&&i.more&&this.setMeasuredHeight(i),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Wa extends Aq{constructor(e,r,n){super(e,r,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=n}mainBlock(e,r){return new ac(r,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,r,n){let i=n[0];return n.length==1&&(i instanceof Wa||i instanceof Hs&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Hs?i=new Wa(i.length,this.height,this.spaceAbove):i.height=this.height,this.outdated||(i.outdated=!1),i):Uo.of(n)}updateHeight(e,r=0,n=!1,i){return i&&i.from<=r&&i.more?this.setMeasuredHeight(i):(n||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Hs extends Uo{constructor(e){super(e,0)}heightMetrics(e,r){let n=e.doc.lineAt(r).number,i=e.doc.lineAt(r+this.length).number,s=i-n+1,a,o=0;if(e.lineWrapping){let d=Math.min(this.height,e.lineHeight*s);a=d/s,this.length>s+1&&(o=(this.height-d)/(this.length-s-1))}else a=this.height/s;return{firstLine:n,lastLine:i,perLine:a,perChar:o}}blockAt(e,r,n,i){let{firstLine:s,lastLine:a,perLine:o,perChar:d}=this.heightMetrics(r,i);if(r.lineWrapping){let m=i+(e<r.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),y=r.doc.lineAt(m),b=o+y.length*d,w=Math.max(n,e-b/2);return new ac(y.from,y.length,w,b,0)}else{let m=Math.max(0,Math.min(a-s,Math.floor((e-n)/o))),{from:y,length:b}=r.doc.line(s+m);return new ac(y,b,n+o*m,o,0)}}lineAt(e,r,n,i,s){if(r==ti.ByHeight)return this.blockAt(e,n,i,s);if(r==ti.ByPosNoHeight){let{from:O,to:A}=n.doc.lineAt(e);return new ac(O,A-O,0,0,0)}let{firstLine:a,perLine:o,perChar:d}=this.heightMetrics(n,s),m=n.doc.lineAt(e),y=o+m.length*d,b=m.number-a,w=i+o*b+d*(m.from-s-b);return new ac(m.from,m.length,Math.max(i,Math.min(w,i+this.height-y)),y,0)}forEachLine(e,r,n,i,s,a){e=Math.max(e,s),r=Math.min(r,s+this.length);let{firstLine:o,perLine:d,perChar:m}=this.heightMetrics(n,s);for(let y=e,b=i;y<=r;){let w=n.doc.lineAt(y);if(y==e){let A=w.number-o;b+=d*A+m*(e-s-A)}let O=d+m*w.length;a(new ac(w.from,w.length,b,O,0)),b+=O,y=w.to+1}}replace(e,r,n){let i=this.length-r;if(i>0){let s=n[n.length-1];s instanceof Hs?n[n.length-1]=new Hs(s.length+i):n.push(null,new Hs(i-1))}if(e>0){let s=n[0];s instanceof Hs?n[0]=new Hs(e+s.length):n.unshift(new Hs(e-1),null)}return Uo.of(n)}decomposeLeft(e,r){r.push(new Hs(e-1),null)}decomposeRight(e,r){r.push(null,new Hs(this.length-e-1))}updateHeight(e,r=0,n=!1,i){let s=r+this.length;if(i&&i.from<=r+this.length&&i.more){let a=[],o=Math.max(r,i.from),d=-1;for(i.from>r&&a.push(new Hs(i.from-r-1).updateHeight(e,r));o<=s&&i.more;){let y=e.doc.lineAt(o).length;a.length&&a.push(null);let b=i.heights[i.index++],w=0;b<0&&(w=-b,b=i.heights[i.index++]),d==-1?d=b:Math.abs(b-d)>=CS&&(d=-2);let O=new Wa(y,b,w);O.outdated=!1,a.push(O),o+=y+1}o<=s&&a.push(null,new Hs(s-o).updateHeight(e,o));let m=Uo.of(a);return(d<0||Math.abs(m.height-this.height)>=CS||Math.abs(d-this.heightMetrics(e,r).perLine)>=CS)&&(t0=!0),z2(this,m)}else(n||this.outdated)&&(this.setHeight(e.heightForGap(r,r+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Mwe extends Uo{constructor(e,r,n){super(e.length+r+n.length,e.height+n.height,r|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,r,n,i){let s=n+this.left.height;return e<s?this.left.blockAt(e,r,n,i):this.right.blockAt(e,r,s,i+this.left.length+this.break)}lineAt(e,r,n,i,s){let a=i+this.left.height,o=s+this.left.length+this.break,d=r==ti.ByHeight?e<a:e<o,m=d?this.left.lineAt(e,r,n,i,s):this.right.lineAt(e,r,n,a,o);if(this.break||(d?m.to<o:m.from>o))return m;let y=r==ti.ByPosNoHeight?ti.ByPosNoHeight:ti.ByPos;return d?m.join(this.right.lineAt(o,y,n,a,o)):this.left.lineAt(o,y,n,i,s).join(m)}forEachLine(e,r,n,i,s,a){let o=i+this.left.height,d=s+this.left.length+this.break;if(this.break)e<d&&this.left.forEachLine(e,r,n,i,s,a),r>=d&&this.right.forEachLine(e,r,n,o,d,a);else{let m=this.lineAt(d,ti.ByPos,n,i,s);e<m.from&&this.left.forEachLine(e,m.from-1,n,i,s,a),m.to>=e&&m.from<=r&&a(m),r>m.to&&this.right.forEachLine(m.to+1,r,n,o,d,a)}}replace(e,r,n){let i=this.left.length+this.break;if(r<i)return this.balanced(this.left.replace(e,r,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,r-i,n));let s=[];e>0&&this.decomposeLeft(e,s);let a=s.length;for(let o of n)s.push(o);if(e>0&&UF(s,a-1),r<this.length){let o=s.length;this.decomposeRight(r,s),UF(s,o)}return Uo.of(s)}decomposeLeft(e,r){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,r);r.push(this.left),this.break&&(n++,e>=n&&r.push(null)),e>n&&this.right.decomposeLeft(e-n,r)}decomposeRight(e,r){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,r);e<n&&this.left.decomposeRight(e,r),this.break&&e<i&&r.push(null),r.push(this.right)}balanced(e,r){return e.size>2*r.size||r.size>2*e.size?Uo.of(this.break?[e,null,r]:[e,r]):(this.left=z2(this.left,e),this.right=z2(this.right,r),this.setHeight(e.height+r.height),this.outdated=e.outdated||r.outdated,this.size=e.size+r.size,this.length=e.length+this.break+r.length,this)}updateHeight(e,r=0,n=!1,i){let{left:s,right:a}=this,o=r+s.length+this.break,d=null;return i&&i.from<=r+s.length&&i.more?d=s=s.updateHeight(e,r,n,i):s.updateHeight(e,r,n),i&&i.from<=o+a.length&&i.more?d=a=a.updateHeight(e,o,n,i):a.updateHeight(e,o,n),d?this.balanced(s,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function UF(t,e){let r,n;t[e]==null&&(r=t[e-1])instanceof Hs&&(n=t[e+1])instanceof Hs&&t.splice(e-1,3,new Hs(r.length+1+n.length))}const Iwe=5;class qI{constructor(e,r){this.pos=e,this.oracle=r,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,r){if(this.lineStart>-1){let n=Math.min(r,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Wa?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new Wa(n-this.pos,-1,0)),this.writtenTo=n,r>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=r}point(e,r,n){if(e<r||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,s=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let a=r-e;n.block?this.addBlock(new Aq(a,i,n)):(a||s||i>=Iwe)&&this.addLineDeco(i,s,a)}else r>e&&this.span(e,r);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:r}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=r,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Wa(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,r){let n=new Hs(r-e);return this.oracle.doc.lineAt(e).to==r&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Wa)return e;let r=new Wa(0,-1,0);return this.nodes.push(r),r}addBlock(e){this.enterLine();let r=e.deco;r&&r.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,r&&r.endSide>0&&(this.covering=e)}addLineDeco(e,r,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=r,this.writtenTo=this.pos=this.pos+n}finish(e){let r=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(r instanceof Wa)&&!this.isCovered?this.nodes.push(new Wa(0,-1,0)):(this.writtenTo<this.pos||r==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let i of this.nodes)i instanceof Wa&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(e,r,n,i){let s=new qI(n,e);return rn.spans(r,n,i,s,0),s.finish(n)}}function Dwe(t,e,r){let n=new Rwe;return rn.compare(t,e,r,n,0),n.changes}class Rwe{constructor(){this.changes=[]}compareRange(){}comparePoint(e,r,n,i){(e<r||n&&n.heightRelevant||i&&i.heightRelevant)&&cy(e,r,this.changes,5)}}function Lwe(t,e){let r=t.getBoundingClientRect(),n=t.ownerDocument,i=n.defaultView||window,s=Math.max(0,r.left),a=Math.min(i.innerWidth,r.right),o=Math.max(0,r.top),d=Math.min(i.innerHeight,r.bottom);for(let m=t.parentNode;m&&m!=n.body;)if(m.nodeType==1){let y=m,b=window.getComputedStyle(y);if((y.scrollHeight>y.clientHeight||y.scrollWidth>y.clientWidth)&&b.overflow!="visible"){let w=y.getBoundingClientRect();s=Math.max(s,w.left),a=Math.min(a,w.right),o=Math.max(o,w.top),d=Math.min(m==t.parentNode?i.innerHeight:d,w.bottom)}m=b.position=="absolute"||b.position=="fixed"?y.offsetParent:y.parentNode}else if(m.nodeType==11)m=m.host;else break;return{left:s-r.left,right:Math.max(s,a)-r.left,top:o-(r.top+e),bottom:Math.max(o,d)-(r.top+e)}}function Fwe(t){let e=t.getBoundingClientRect(),r=t.ownerDocument.defaultView||window;return e.left<r.innerWidth&&e.right>0&&e.top<r.innerHeight&&e.bottom>0}function Bwe(t,e){let r=t.getBoundingClientRect();return{left:0,right:r.right-r.left,top:e,bottom:r.bottom-(r.top+e)}}class iP{constructor(e,r,n,i){this.from=e,this.to=r,this.size=n,this.displaySize=i}static same(e,r){if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],s=r[n];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,r){return Or.replace({widget:new $we(this.displaySize*(r?e.scaleY:e.scaleX),r)}).range(this.from,this.to)}}class $we extends _u{constructor(e,r){super(),this.size=e,this.vertical=r}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class qF{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=QF,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ei.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let r=e.facet(NI).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new Awe(r),this.stateDeco=HF(e),this.heightMap=Uo.empty().applyChanges(this.stateDeco,Sn.empty,this.heightOracle.setDoc(e.doc),[new Al(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Or.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:r}=this.state.selection;for(let n=0;n<=1;n++){let i=n?r.head:r.anchor;if(!e.some(({from:s,to:a})=>i>=s&&i<=a)){let{from:s,to:a}=this.lineBlockAt(i);e.push(new ww(s,a))}}return this.viewports=e.sort((n,i)=>n.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?QF:new QI(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(cv(e,this.scaler))})}update(e,r=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=HF(this.state);let i=e.changedRanges,s=Al.extendWithRanges(i,Dwe(n,this.stateDeco,e?e.changes:us.empty(this.state.doc.length))),a=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);WF(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=a||t0)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let d=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(r&&(r.range.head<d.from||r.range.head>d.to)||!this.viewportIsAppropriate(d))&&(d=this.getViewport(0,r));let m=d.from!=this.viewport.from||d.to!=this.viewport.to;this.viewport=d,e.flags|=this.updateForViewport(),(m||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),r&&(this.scrollTarget=r),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(lq)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let r=e.contentDOM,n=window.getComputedStyle(r),i=this.heightOracle,s=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?ei.RTL:ei.LTR;let a=this.heightOracle.mustRefreshForWrapping(s)||this.mustMeasureContent,o=r.getBoundingClientRect(),d=a||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let m=0,y=0;if(o.width&&o.height){let{scaleX:U,scaleY:Q}=qU(r,o);(U>.005&&Math.abs(this.scaleX-U)>.005||Q>.005&&Math.abs(this.scaleY-Q)>.005)&&(this.scaleX=U,this.scaleY=Q,m|=16,a=d=!0)}let b=(parseInt(n.paddingTop)||0)*this.scaleY,w=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=b||this.paddingBottom!=w)&&(this.paddingTop=b,this.paddingBottom=w,m|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(d=!0),this.editorWidth=e.scrollDOM.clientWidth,m|=16);let O=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=O&&(this.scrollAnchorHeight=-1,this.scrollTop=O),this.scrolledToBottom=HU(e.scrollDOM);let A=(this.printing?Bwe:Lwe)(r,this.paddingTop),E=A.top-this.pixelViewport.top,$=A.bottom-this.pixelViewport.bottom;this.pixelViewport=A;let R=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(R!=this.inView&&(this.inView=R,R&&(d=!0)),!this.inView&&!this.scrollTarget&&!Fwe(e.dom))return 0;let F=o.width;if((this.contentDOMWidth!=F||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,m|=16),d){let U=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(U)&&(a=!0),a||i.lineWrapping&&Math.abs(F-this.contentDOMWidth)>i.charWidth){let{lineHeight:Q,charWidth:Y,textHeight:Z}=e.docView.measureTextSize();a=Q>0&&i.refresh(s,Q,Y,Z,Math.max(5,F/Y),U),a&&(e.docView.minWidth=0,m|=16)}E>0&&$>0?y=Math.max(E,$):E<0&&$<0&&(y=Math.min(E,$)),WF();for(let Q of this.viewports){let Y=Q.from==this.viewport.from?U:e.docView.measureVisibleLineHeights(Q);this.heightMap=(a?Uo.empty().applyChanges(this.stateDeco,Sn.empty,this.heightOracle,[new Al(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,a,new Ewe(Q.from,Y))}t0&&(m|=2)}let L=!this.viewportIsAppropriate(this.viewport,y)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return L&&(m&2&&(m|=this.updateScaler()),this.viewport=this.getViewport(y,this.scrollTarget),m|=this.updateForViewport()),(m&2||L)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),m|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),m}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,r){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:a,visibleBottom:o}=this,d=new ww(i.lineAt(a-n*1e3,ti.ByHeight,s,0,0).from,i.lineAt(o+(1-n)*1e3,ti.ByHeight,s,0,0).to);if(r){let{head:m}=r.range;if(m<d.from||m>d.to){let y=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),b=i.lineAt(m,ti.ByPos,s,0,0),w;r.y=="center"?w=(b.top+b.bottom)/2-y/2:r.y=="start"||r.y=="nearest"&&m<d.from?w=b.top:w=b.bottom-y,d=new ww(i.lineAt(w-1e3/2,ti.ByHeight,s,0,0).from,i.lineAt(w+y+1e3/2,ti.ByHeight,s,0,0).to)}}return d}mapViewport(e,r){let n=r.mapPos(e.from,-1),i=r.mapPos(e.to,1);return new ww(this.heightMap.lineAt(n,ti.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,ti.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:r},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,ti.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(r,ti.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:o}=this;return(e==0||i<=a-Math.max(10,Math.min(-n,250)))&&(r==this.state.doc.length||s>=o+Math.max(10,Math.min(n,250)))&&i>a-2*1e3&&s<o+2*1e3}mapLineGaps(e,r){if(!e.length||r.empty)return e;let n=[];for(let i of e)r.touchesRange(i.from,i.to)||n.push(new iP(r.mapPos(i.from),r.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(e,r){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,s=i>>1,a=i<<1;if(this.defaultTextDirection!=ei.LTR&&!n)return[];let o=[],d=(y,b,w,O)=>{if(b-y<s)return;let A=this.state.selection.main,E=[A.from];A.empty||E.push(A.to);for(let R of E)if(R>y&&R<b){d(y,R-10,w,O),d(R+10,b,w,O);return}let $=Vwe(e,R=>R.from>=w.from&&R.to<=w.to&&Math.abs(R.from-y)<s&&Math.abs(R.to-b)<s&&!E.some(F=>R.from<F&&R.to>F));if(!$){if(b<w.to&&r&&n&&r.visibleRanges.some(L=>L.from<=b&&L.to>=b)){let L=r.moveToLineBoundary(pt.cursor(b),!1,!0).head;L>y&&(b=L)}let R=this.gapSize(w,y,b,O),F=n||R<2e6?R:2e6;$=new iP(y,b,R,F)}o.push($)},m=y=>{if(y.length<a||y.type!=no.Text)return;let b=Nwe(y.from,y.to,this.stateDeco);if(b.total<a)return;let w=this.scrollTarget?this.scrollTarget.range.head:null,O,A;if(n){let E=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,$,R;if(w!=null){let F=kw(b,w),L=((this.visibleBottom-this.visibleTop)/2+E)/y.height;$=F-L,R=F+L}else $=(this.visibleTop-y.top-E)/y.height,R=(this.visibleBottom-y.top+E)/y.height;O=Sw(b,$),A=Sw(b,R)}else{let E=b.total*this.heightOracle.charWidth,$=i*this.heightOracle.charWidth,R=0;if(E>2e6)for(let Y of e)Y.from>=y.from&&Y.from<y.to&&Y.size!=Y.displaySize&&Y.from*this.heightOracle.charWidth+R<this.pixelViewport.left&&(R=Y.size-Y.displaySize);let F=this.pixelViewport.left+R,L=this.pixelViewport.right+R,U,Q;if(w!=null){let Y=kw(b,w),Z=((L-F)/2+$)/E;U=Y-Z,Q=Y+Z}else U=(F-$)/E,Q=(L+$)/E;O=Sw(b,U),A=Sw(b,Q)}O>y.from&&d(y.from,O,y,b),A<y.to&&d(A,y.to,y,b)};for(let y of this.viewportLines)Array.isArray(y.type)?y.type.forEach(m):m(y);return o}gapSize(e,r,n,i){let s=kw(i,n)-kw(i,r);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){iP.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Or.set(e.map(r=>r.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let r=this.stateDeco;this.lineGaps.length&&(r=r.concat(this.lineGapDeco));let n=[];rn.spans(r,this.viewport.from,this.viewport.to,{span(s,a){n.push({from:s,to:a})},point(){}},20);let i=0;if(n.length!=this.visibleRanges.length)i=12;else for(let s=0;s<n.length&&!(i&8);s++){let a=this.visibleRanges[s],o=n[s];(a.from!=o.from||a.to!=o.to)&&(i|=4,e&&e.mapPos(a.from,-1)==o.from&&e.mapPos(a.to,1)==o.to||(i|=8))}return this.visibleRanges=n,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(r=>r.from<=e&&r.to>=e)||cv(this.heightMap.lineAt(e,ti.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(r=>r.top<=e&&r.bottom>=e)||cv(this.heightMap.lineAt(this.scaler.fromDOM(e),ti.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let r=this.lineBlockAtHeight(e+8);return r.from>=this.viewport.from||this.viewportLines[0].top-e>200?r:this.viewportLines[0]}elementAtHeight(e){return cv(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ww{constructor(e,r){this.from=e,this.to=r}}function Nwe(t,e,r){let n=[],i=t,s=0;return rn.spans(r,t,e,{span(){},point(a,o){a>i&&(n.push({from:i,to:a}),s+=a-i),i=o}},20),i<e&&(n.push({from:i,to:e}),s+=e-i),{total:s,ranges:n}}function Sw({total:t,ranges:e},r){if(r<=0)return e[0].from;if(r>=1)return e[e.length-1].to;let n=Math.floor(t*r);for(let i=0;;i++){let{from:s,to:a}=e[i],o=a-s;if(n<=o)return s+n;n-=o}}function kw(t,e){let r=0;for(let{from:n,to:i}of t.ranges){if(e<=i){r+=e-n;break}r+=i-n}return r/t.total}function Vwe(t,e){for(let r of t)if(e(r))return r}const QF={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};function HF(t){let e=t.facet(sC).filter(n=>typeof n!="function"),r=t.facet(VI).filter(n=>typeof n!="function");return r.length&&e.push(rn.join(r)),e}class QI{constructor(e,r,n){let i=0,s=0,a=0;this.viewports=n.map(({from:o,to:d})=>{let m=r.lineAt(o,ti.ByPos,e,0,0).top,y=r.lineAt(d,ti.ByPos,e,0,0).bottom;return i+=y-m,{from:o,to:d,top:m,bottom:y,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(r.height-i);for(let o of this.viewports)o.domTop=a+(o.top-s)*this.scale,a=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let r=0,n=0,i=0;;r++){let s=r<this.viewports.length?this.viewports[r]:null;if(!s||e<s.top)return i+(e-n)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);n=s.bottom,i=s.domBottom}}fromDOM(e){for(let r=0,n=0,i=0;;r++){let s=r<this.viewports.length?this.viewports[r]:null;if(!s||e<s.domTop)return n+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);n=s.bottom,i=s.domBottom}}eq(e){return e instanceof QI?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((r,n)=>r.from==e.viewports[n].from&&r.to==e.viewports[n].to):!1}}function cv(t,e){if(e.scale==1)return t;let r=e.toDOM(t.top),n=e.toDOM(t.bottom);return new ac(t.from,t.length,r,n-r,Array.isArray(t._content)?t._content.map(i=>cv(i,e)):t._content)}const Cw=ur.define({combine:t=>t.join(" ")}),gE=ur.define({combine:t=>t.indexOf(!0)>-1}),yE=nf.newName(),Eq=nf.newName(),zq=nf.newName(),Mq={"&light":"."+Eq,"&dark":"."+zq};function xE(t,e,r){return new nf(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,i=>{if(i=="&")return t;if(!r||!r[i])throw new RangeError(`Unsupported selector: ${i}`);return r[i]}):t+" "+n}})}const Wwe=xE("."+yE,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Mq),Uwe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},sP=lr.ie&&lr.ie_version<=11;class qwe{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new w_e,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(r=>{for(let n of r)this.queue.push(n);(lr.ie&&lr.ie_version<=11||lr.ios&&e.composing)&&r.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&lr.android&&e.constructor.EDIT_CONTEXT!==!1&&!(lr.chrome&&lr.chrome_version<126)&&(this.editContext=new Hwe(e),e.state.facet(Ju)&&(e.contentDOM.editContext=this.editContext.editContext)),sP&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var r;((r=this.view.docView)===null||r===void 0?void 0:r.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((r,n)=>r!=e[n]))){this.gapIntersection.disconnect();for(let r of e)this.gapIntersection.observe(r);this.gaps=e}}onSelectionChange(e){let r=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(Ju)?n.root.activeElement!=this.dom:!Fv(this.dom,i))return;let s=i.anchorNode&&n.docView.tile.nearest(i.anchorNode);if(s&&s.isWidget()&&s.widget.ignoreEvent(e)){r||(this.selectionChanged=!1);return}(lr.ie&&lr.ie_version<=11||lr.android&&lr.chrome)&&!n.state.selection.main.empty&&i.focusNode&&$v(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,r=Yy(e.root);if(!r)return!1;let n=lr.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Qwe(this.view,r)||r;if(!n||this.selectionRange.eq(n))return!1;let i=Fv(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&k_e(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,r){this.selectionRange.set(e.node,e.offset,r.node,r.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,r=null;for(let n=this.dom;n;)if(n.nodeType==1)!r&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:r||(r=this.scrollTargets.slice(0,e)),r&&r.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!r&&(r=this.scrollTargets.slice(0,e)),r){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=r)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Uwe),sP&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),sP&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,r){var n;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&uy(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:r,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let r=-1,n=-1,i=!1;for(let s of e){let a=this.readMutation(s);a&&(a.typeOver&&(i=!0),r==-1?{from:r,to:n}=a:(r=Math.min(a.from,r),n=Math.max(a.to,n)))}return{from:r,to:n,typeOver:i}}readChange(){let{from:e,to:r,typeOver:n}=this.processRecords(),i=this.selectionChanged&&Fv(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new uwe(this.view,e,r,n);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let r=this.readChange();if(!r)return this.view.requestMeasure(),!1;let n=this.view.state,i=bq(this.view,r);return this.view.state==n&&(r.domChanged||r.newSel&&!E2(this.view.state.selection,r.newSel.main))&&this.view.update([]),i}readMutation(e){let r=this.view.docView.tile.nearest(e.target);if(!r||r.isWidget())return null;if(r.markDirty(e.type=="attributes"),e.type=="childList"){let n=GF(r,e.previousSibling||e.target.previousSibling,-1),i=GF(r,e.nextSibling||e.target.nextSibling,1);return{from:n?r.posAfter(n):r.posAtStart,to:i?r.posBefore(i):r.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ju)!=e.state.facet(Ju)&&(e.view.contentDOM.editContext=e.state.facet(Ju)?this.editContext.editContext:null))}destroy(){var e,r,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(r=this.gapIntersection)===null||r===void 0||r.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function GF(t,e,r){for(;e;){let n=Ji.get(e);if(n&&n.parent==t)return n;let i=e.parentNode;e=i!=t.dom?i:r>0?e.nextSibling:e.previousSibling}return null}function XF(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor,1);return $v(a.node,a.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function Qwe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return XF(t,i)}let r=null;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),r?XF(t,r):null}class Hwe{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let r=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let i=e.state.selection.main,{anchor:s,head:a}=i,o=this.toEditorPos(n.updateRangeStart),d=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:o,drifted:!1});let m=d-o>n.text.length;o==this.from&&s<this.from?o=s:d==this.to&&s>this.to&&(d=s);let y=_q(e.state.sliceDoc(o,d),n.text,(m?i.from:i.to)-o,m?"end":null);if(!y){let w=pt.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));E2(w,i)||e.dispatch({selection:w,userEvent:"select"});return}let b={from:y.from+o,to:y.toA+o,insert:Sn.of(n.text.slice(y.from,y.toB).split(`
`))};if((lr.mac||lr.android)&&b.from==a-1&&/^\. ?$/.test(n.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(b={from:o,to:d,insert:Sn.of([n.text.replace("."," ")])}),this.pendingContextChange=b,!e.state.readOnly){let w=this.to-this.from+(b.to-b.from+b.insert.length);UI(e,b,pt.single(this.toEditorPos(n.selectionStart,w),this.toEditorPos(n.selectionEnd,w)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),b.from<b.to&&!b.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(r.text.slice(Math.max(0,n.updateRangeStart-1),Math.min(r.text.length,n.updateRangeStart+1)))&&this.handlers.compositionend(n)},this.handlers.characterboundsupdate=n=>{let i=[],s=null;for(let a=this.toEditorPos(n.rangeStart),o=this.toEditorPos(n.rangeEnd);a<o;a++){let d=e.coordsForChar(a);s=d&&new DOMRect(d.left,d.top,d.right-d.left,d.bottom-d.top)||s||new DOMRect,i.push(s)}r.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=n=>{let i=[];for(let s of n.getTextFormats()){let a=s.underlineStyle,o=s.underlineThickness;if(!/none/i.test(a)&&!/none/i.test(o)){let d=this.toEditorPos(s.rangeStart),m=this.toEditorPos(s.rangeEnd);if(d<m){let y=`text-decoration: underline ${/^[a-z]/.test(a)?a+" ":a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${/thin/i.test(o)?1:2}px`;i.push(Or.mark({attributes:{style:y}}).range(d,m))}}}e.dispatch({effects:uq.of(Or.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:n}=this.composing;this.composing=null,n&&this.reset(e.state)}};for(let n in this.handlers)r.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let i=Yy(n.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let r=0,n=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,a,o,d,m)=>{if(n)return;let y=m.length-(a-s);if(i&&a>=i.to)if(i.from==s&&i.to==a&&i.insert.eq(m)){i=this.pendingContextChange=null,r+=y,this.to+=y;return}else i=null,this.revertPending(e.state);if(s+=r,a+=r,a<=this.from)this.from+=y,this.to+=y;else if(s<this.to){if(s<this.from||a>this.to||this.to-this.from+m.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(a),m.toString()),this.to+=y}r+=y}),i&&!n&&this.revertPending(e.state),!n}update(e){let r=this.pendingContextChange,n=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(n.from,n.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||r)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:r}=e.selection.main;this.from=Math.max(0,r-1e4),this.to=Math.min(e.doc.length,r+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let r=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(r.from),this.toContextPos(r.from+r.insert.length),e.doc.sliceString(r.from,r.to))}setSelection(e){let{main:r}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,r.anchor))),i=this.toContextPos(r.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(n,i)}rangeIsValid(e){let{head:r}=e.selection.main;return!(this.from>0&&r-this.from<500||this.to<e.doc.length&&this.to-r<500||this.to-this.from>1e4*3)}toEditorPos(e,r=this.to-this.from){e=Math.min(e,r);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let r=this.composing;return r&&r.drifted?r.contextBase+(e-r.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Gt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var r;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(i=>i.forEach(s=>n(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||S_e(e.parent)||document,this.viewState=new qF(e.state||pn.create(e)),e.scrollTo&&e.scrollTo.is(vw)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Ng).map(i=>new JO(i));for(let i of this.plugins)i.update(this);this.observer=new qwe(this),this.inputState=new pwe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new EF(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((r=document.fonts)===null||r===void 0)&&r.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...e){let r=e.length==1&&e[0]instanceof ms?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(r,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let r=!1,n=!1,i,s=this.state;for(let w of e){if(w.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=w.state}if(this.destroyed){this.viewState.state=s;return}let a=this.hasFocus,o=0,d=null;e.some(w=>w.annotation(Oq))?(this.inputState.notifiedFocused=a,o=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,d=Pq(s,a),d||(o=1));let m=this.observer.delayedAndroidKey,y=null;if(m?(this.observer.clearDelayedAndroidKey(),y=this.observer.readChange(),(y&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(y=null)):this.observer.clear(),s.facet(pn.phrases)!=this.state.facet(pn.phrases))return this.setState(s);i=P2.create(this,s,e),i.flags|=o;let b=this.viewState.scrollTarget;try{this.updateState=2;for(let w of e){if(b&&(b=b.map(w.changes)),w.scrollIntoView){let{main:O}=w.state.selection;b=new hy(O.empty?O:pt.cursor(O.head,O.head>O.anchor?-1:1))}for(let O of w.effects)O.is(vw)&&(b=O.value.clip(this.state))}this.viewState.update(i,b),this.bidiCache=M2.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),r=this.docView.update(i),this.state.facet(av)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(r,e.some(w=>w.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Cw)!=i.state.facet(Cw)&&(this.viewState.mustMeasureContent=!0),(r||n||b||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),r&&this.docViewUpdate(),!i.empty)for(let w of this.state.facet(hE))try{w(i)}catch(O){ya(this.state,O,"update listener")}(d||y)&&Promise.resolve().then(()=>{d&&this.state==d.startState&&this.dispatch(d),y&&!bq(this,y)&&m.force&&uy(this.contentDOM,m.key,m.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let r=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new qF(e),this.plugins=e.facet(Ng).map(n=>new JO(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new EF(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(e){let r=e.startState.facet(Ng),n=e.state.facet(Ng);if(r!=n){let i=[];for(let s of n){let a=r.indexOf(s);if(a<0)i.push(new JO(s));else{let o=this.plugins[a];o.mustUpdate=e,i.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);r!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let r=e.value;if(r&&r.docViewUpdate)try{r.docViewUpdate(this)}catch(n){ya(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let r=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:a}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(a<0)if(HU(n))s=-1,a=this.viewState.heightMap.height;else{let O=this.viewState.scrollAnchorAt(i);s=O.from,a=O.top}this.updateState=1;let d=this.viewState.measure(this);if(!d&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let m=[];d&4||([this.measureRequests,m]=[m,this.measureRequests]);let y=m.map(O=>{try{return O.read(this)}catch(A){return ya(this.state,A),KF}}),b=P2.create(this,this.state,[]),w=!1;b.flags|=d,r?r.flags|=d:r=b,this.updateState=2,b.empty||(this.updatePlugins(b),this.inputState.update(b),this.updateAttrs(),w=this.docView.update(b),w&&this.docViewUpdate());for(let O=0;O<m.length;O++)if(y[O]!=KF)try{let A=m[O];A.write&&A.write(y[O],this)}catch(A){ya(this.state,A)}if(w&&this.docView.updateSelection(!0),!b.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let A=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-a;if(A>1||A<-1){i=i+A,n.scrollTop=i/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let o of this.state.facet(hE))o(r)}get themeClasses(){return yE+" "+(this.state.facet(gE)?zq:Eq)+" "+this.state.facet(Cw)}updateAttrs(){let e=ZF(this,hq,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Ju)?"true":"false",class:"cm-content",style:`${lr.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),ZF(this,NI,r);let n=this.observer.ignore(()=>{let i=CF(this.contentDOM,this.contentAttrs,r),s=CF(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=r,n}showAnnouncements(e){let r=!0;for(let n of e)for(let i of n.effects)if(i.is(Gt.announce)){r&&(this.announceDOM.textContent=""),r=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(av);let e=this.state.facet(Gt.cspNonce);nf.mount(this.root,this.styleModules.concat(Wwe).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===e.key){this.measureRequests[r]=e;return}}this.measureRequests.push(e)}}plugin(e){let r=this.pluginMap.get(e);return(r===void 0||r&&r.plugin!=e)&&this.pluginMap.set(e,r=this.plugins.find(n=>n.plugin==e)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,r,n){return nP(this,e,zF(this,e,r,n))}moveByGroup(e,r){return nP(this,e,zF(this,e,r,n=>swe(this,e.head,n)))}visualLineSide(e,r){let n=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=n[r?n.length-1:0];return pt.cursor(s.side(r,i)+e.from,s.forward(!r,i)?1:-1)}moveToLineBoundary(e,r,n=!0){return iwe(this,e,r,n)}moveVertically(e,r,n){return nP(this,e,owe(this,e,r,n))}domAtPos(e,r=1){return this.docView.domAtPos(e,r)}posAtDOM(e,r=0){return this.docView.posFromDOM(e,r)}posAtCoords(e,r=!0){this.readMeasured();let n=pE(this,e,r);return n&&n.pos}posAndSideAtCoords(e,r=!0){return this.readMeasured(),pE(this,e,r)}coordsAtPos(e,r=1){this.readMeasured();let n=this.docView.coordsAt(e,r);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),a=s[ih.find(s,e-i.from,-1,r)];return Ib(n,a.dir==ei.LTR==r>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(aq)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Gwe)return JU(e.length);let r=this.textDirectionAt(e.from),n;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==r&&(s.fresh||YU(s.isolates,n=PF(this,e))))return s.order;n||(n=PF(this,e));let i=E_e(e.text,r,n);return this.bidiCache.push(new M2(e.from,e.to,r,n,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||lr.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{QU(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,r={}){return vw.of(new hy(typeof e=="number"?pt.cursor(e):e,r.y,r.x,r.yMargin,r.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:r}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return vw.of(new hy(pt.cursor(n.from),"start","start",n.top-e,r,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Wi.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Wi.define(()=>({}),{eventObservers:e})}static theme(e,r){let n=nf.newName(),i=[Cw.of(n),av.of(xE(`.${n}`,e))];return r&&r.dark&&i.push(gE.of(!0)),i}static baseTheme(e){return hm.lowest(av.of(xE("."+yE,e,Mq)))}static findFromDOM(e){var r;let n=e.querySelector(".cm-content"),i=n&&Ji.get(n)||Ji.get(e);return((r=i==null?void 0:i.root)===null||r===void 0?void 0:r.view)||null}}Gt.styleModule=av;Gt.inputHandler=sq;Gt.clipboardInputFilter=BI;Gt.clipboardOutputFilter=$I;Gt.scrollHandler=cq;Gt.focusChangeEffect=oq;Gt.perLineTextDirection=aq;Gt.exceptionSink=iq;Gt.updateListener=hE;Gt.editable=Ju;Gt.mouseSelectionStyle=nq;Gt.dragMovesSelection=rq;Gt.clickAddsSelectionRange=tq;Gt.decorations=sC;Gt.blockWrappers=dq;Gt.outerDecorations=VI;Gt.atomicRanges=z1;Gt.bidiIsolatedRanges=fq;Gt.scrollMargins=pq;Gt.darkTheme=gE;Gt.cspNonce=ur.define({combine:t=>t.length?t[0]:""});Gt.contentAttributes=NI;Gt.editorAttributes=hq;Gt.lineWrapping=Gt.contentAttributes.of({class:"cm-lineWrapping"});Gt.announce=Wr.define();const Gwe=4096,KF={};class M2{constructor(e,r,n,i,s,a){this.from=e,this.to=r,this.dir=n,this.isolates=i,this.fresh=s,this.order=a}static update(e,r){if(r.empty&&!e.some(s=>s.fresh))return e;let n=[],i=e.length?e[e.length-1].dir:ei.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let a=e[s];a.dir==i&&!r.touchesRange(a.from,a.to)&&n.push(new M2(r.mapPos(a.from,1),r.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return n}}function ZF(t,e,r){for(let n=t.state.facet(e),i=n.length-1;i>=0;i--){let s=n[i],a=typeof s=="function"?s(t):s;a&&RI(a,r)}return r}const Xwe=lr.mac?"mac":lr.windows?"win":lr.linux?"linux":"key";function Kwe(t,e){const r=t.split(/-(?!$)/);let n=r[r.length-1];n=="Space"&&(n=" ");let i,s,a,o;for(let d=0;d<r.length-1;++d){const m=r[d];if(/^(cmd|meta|m)$/i.test(m))o=!0;else if(/^a(lt)?$/i.test(m))i=!0;else if(/^(c|ctrl|control)$/i.test(m))s=!0;else if(/^s(hift)?$/i.test(m))a=!0;else if(/^mod$/i.test(m))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+m)}return i&&(n="Alt-"+n),s&&(n="Ctrl-"+n),o&&(n="Meta-"+n),a&&(n="Shift-"+n),n}function Tw(t,e,r){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Zwe=hm.default(Gt.domEventHandlers({keydown(t,e){return Dq(Iq(e.state),t,e,"editor")}})),cC=ur.define({enables:Zwe}),YF=new WeakMap;function Iq(t){let e=t.facet(cC),r=YF.get(e);return r||YF.set(e,r=eSe(e.reduce((n,i)=>n.concat(i),[]))),r}function Ywe(t,e,r){return Dq(Iq(t.state),e,t,r)}let xd=null;const Jwe=4e3;function eSe(t,e=Xwe){let r=Object.create(null),n=Object.create(null),i=(a,o)=>{let d=n[a];if(d==null)n[a]=o;else if(d!=o)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},s=(a,o,d,m,y)=>{var b,w;let O=r[a]||(r[a]=Object.create(null)),A=o.split(/ (?!$)/).map(R=>Kwe(R,e));for(let R=1;R<A.length;R++){let F=A.slice(0,R).join(" ");i(F,!0),O[F]||(O[F]={preventDefault:!0,stopPropagation:!1,run:[L=>{let U=xd={view:L,prefix:F,scope:a};return setTimeout(()=>{xd==U&&(xd=null)},Jwe),!0}]})}let E=A.join(" ");i(E,!1);let $=O[E]||(O[E]={preventDefault:!1,stopPropagation:!1,run:((w=(b=O._any)===null||b===void 0?void 0:b.run)===null||w===void 0?void 0:w.slice())||[]});d&&$.run.push(d),m&&($.preventDefault=!0),y&&($.stopPropagation=!0)};for(let a of t){let o=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let m of o){let y=r[m]||(r[m]=Object.create(null));y._any||(y._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:b}=a;for(let w in y)y[w].run.push(O=>b(O,vE))}let d=a[e]||a.key;if(d)for(let m of o)s(m,d,a.run,a.preventDefault,a.stopPropagation),a.shift&&s(m,"Shift-"+d,a.shift,a.preventDefault,a.stopPropagation)}return r}let vE=null;function Dq(t,e,r,n){vE=e;let i=p_e(e),s=ua(i,0),a=tu(s)==i.length&&i!=" ",o="",d=!1,m=!1,y=!1;xd&&xd.view==r&&xd.scope==n&&(o=xd.prefix+" ",Sq.indexOf(e.keyCode)<0&&(m=!0,xd=null));let b=new Set,w=$=>{if($){for(let R of $.run)if(!b.has(R)&&(b.add(R),R(r)))return $.stopPropagation&&(y=!0),!0;$.preventDefault&&($.stopPropagation&&(y=!0),m=!0)}return!1},O=t[n],A,E;return O&&(w(O[o+Tw(i,e,!a)])?d=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(lr.windows&&e.ctrlKey&&e.altKey)&&!(lr.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(A=sf[e.keyCode])&&A!=i?(w(O[o+Tw(A,e,!0)])||e.shiftKey&&(E=zb[e.keyCode])!=i&&E!=A&&w(O[o+Tw(E,e,!1)]))&&(d=!0):a&&e.shiftKey&&w(O[o+Tw(i,e,!0)])&&(d=!0),!d&&w(O._any)&&(d=!0)),m&&(d=!0),d&&y&&e.stopPropagation(),vE=null,d}class M1{constructor(e,r,n,i,s){this.className=e,this.left=r,this.top=n,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,r){return r.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,r,n){if(n.empty){let i=e.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let s=Rq(e);return[new M1(r,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return tSe(e,r,n)}}function Rq(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==ei.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function JF(t,e,r,n){let i=t.coordsAtPos(e,r*2);if(!i)return n;let s=t.dom.getBoundingClientRect(),a=(i.top+i.bottom)/2,o=t.posAtCoords({x:s.left+1,y:a}),d=t.posAtCoords({x:s.right-1,y:a});return o==null||d==null?n:{from:Math.max(n.from,Math.min(o,d)),to:Math.min(n.to,Math.max(o,d))}}function tSe(t,e,r){if(r.to<=t.viewport.from||r.from>=t.viewport.to)return[];let n=Math.max(r.from,t.viewport.from),i=Math.min(r.to,t.viewport.to),s=t.textDirection==ei.LTR,a=t.contentDOM,o=a.getBoundingClientRect(),d=Rq(t),m=a.querySelector(".cm-line"),y=m&&window.getComputedStyle(m),b=o.left+(y?parseInt(y.paddingLeft)+Math.min(0,parseInt(y.textIndent)):0),w=o.right-(y?parseInt(y.paddingRight):0),O=fE(t,n,1),A=fE(t,i,-1),E=O.type==no.Text?O:null,$=A.type==no.Text?A:null;if(E&&(t.lineWrapping||O.widgetLineBreaks)&&(E=JF(t,n,1,E)),$&&(t.lineWrapping||A.widgetLineBreaks)&&($=JF(t,i,-1,$)),E&&$&&E.from==$.from&&E.to==$.to)return F(L(r.from,r.to,E));{let Q=E?L(r.from,null,E):U(O,!1),Y=$?L(null,r.to,$):U(A,!0),Z=[];return(E||O).to<($||A).from-(E&&$?1:0)||O.widgetLineBreaks>1&&Q.bottom+t.defaultLineHeight/2<Y.top?Z.push(R(b,Q.bottom,w,Y.top)):Q.bottom<Y.top&&t.elementAtHeight((Q.bottom+Y.top)/2).type==no.Text&&(Q.bottom=Y.top=(Q.bottom+Y.top)/2),F(Q).concat(Z).concat(F(Y))}function R(Q,Y,Z,J){return new M1(e,Q-d.left,Y-d.top,Math.max(0,Z-Q),J-Y)}function F({top:Q,bottom:Y,horizontal:Z}){let J=[];for(let re=0;re<Z.length;re+=2)J.push(R(Z[re],Q,Z[re+1],Y));return J}function L(Q,Y,Z){let J=1e9,re=-1e9,he=[];function le(qe,et,at,Be,Me){let Ge=t.coordsAtPos(qe,qe==Z.to?-2:2),Le=t.coordsAtPos(at,at==Z.from?2:-2);!Ge||!Le||(J=Math.min(Ge.top,Le.top,J),re=Math.max(Ge.bottom,Le.bottom,re),Me==ei.LTR?he.push(s&&et?b:Ge.left,s&&Be?w:Le.right):he.push(!s&&Be?b:Le.left,!s&&et?w:Ge.right))}let Ze=Q??Z.from,Ee=Y??Z.to;for(let qe of t.visibleRanges)if(qe.to>Ze&&qe.from<Ee)for(let et=Math.max(qe.from,Ze),at=Math.min(qe.to,Ee);;){let Be=t.state.doc.lineAt(et);for(let Me of t.bidiSpans(Be)){let Ge=Me.from+Be.from,Le=Me.to+Be.from;if(Ge>=at)break;Le>et&&le(Math.max(Ge,et),Q==null&&Ge<=Ze,Math.min(Le,at),Y==null&&Le>=Ee,Me.dir)}if(et=Be.to+1,et>=at)break}return he.length==0&&le(Ze,Q==null,Ee,Y==null,t.textDirection),{top:J,bottom:re,horizontal:he}}function U(Q,Y){let Z=o.top+(Y?Q.top:Q.bottom);return{top:Z,bottom:Z,horizontal:[]}}}function rSe(t,e){return t.constructor==e.constructor&&t.eq(e)}class nSe{constructor(e,r){this.view=e,this.layer=r,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),r.above&&this.dom.classList.add("cm-layer-above"),r.class&&this.dom.classList.add(r.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),r.mount&&r.mount(this.dom,e)}update(e){e.startState.facet(TS)!=e.state.facet(TS)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let r=0,n=e.facet(TS);for(;r<n.length&&n[r]!=this.layer;)r++;this.dom.style.zIndex=String((this.layer.above?150:-1)-r)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:r}=this.view;(e!=this.scaleX||r!=this.scaleY)&&(this.scaleX=e,this.scaleY=r,this.dom.style.transform=`scale(${1/e}, ${1/r})`)}draw(e){if(e.length!=this.drawn.length||e.some((r,n)=>!rSe(r,this.drawn[n]))){let r=this.dom.firstChild,n=0;for(let i of e)i.update&&r&&i.constructor&&this.drawn[n].constructor&&i.update(r,this.drawn[n])?(r=r.nextSibling,n++):this.dom.insertBefore(i.draw(),r);for(;r;){let i=r.nextSibling;r.remove(),r=i}this.drawn=e,lr.safari&&lr.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const TS=ur.define();function Lq(t){return[Wi.define(e=>new nSe(e,t)),TS.of(t)]}const Rb=ur.define({combine(t){return bu(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,r)=>Math.min(e,r),drawRangeCursor:(e,r)=>e||r})}});function iSe(t={}){return[Rb.of(t),sSe,oSe,aSe,lq.of(!0)]}function Fq(t){return t.startState.facet(Rb)!=t.state.facet(Rb)}const sSe=Lq({above:!0,markers(t){let{state:e}=t,r=e.facet(Rb),n=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty||r.drawRangeCursor){let a=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",o=i.empty?i:pt.cursor(i.head,i.head>i.anchor?-1:1);for(let d of M1.forRange(t,a,o))n.push(d)}}return n},update(t,e){t.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let r=Fq(t);return r&&eB(t.state,e),t.docChanged||t.selectionSet||r},mount(t,e){eB(e.state,t)},class:"cm-cursorLayer"});function eB(t,e){e.style.animationDuration=t.facet(Rb).cursorBlinkRate+"ms"}const oSe=Lq({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:M1.forRange(t,"cm-selectionBackground",e)).reduce((e,r)=>e.concat(r))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||Fq(t)},class:"cm-selectionLayer"}),aSe=hm.highest(Gt.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Bq=Wr.define({map(t,e){return t==null?null:e.mapPos(t)}}),uv=so.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((r,n)=>n.is(Bq)?n.value:r,t)}}),lSe=Wi.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let r=t.state.field(uv);r==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(uv)!=r||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(uv),r=e!=null&&t.coordsAtPos(e);if(!r)return null;let n=t.scrollDOM.getBoundingClientRect();return{left:r.left-n.left+t.scrollDOM.scrollLeft*t.scaleX,top:r.top-n.top+t.scrollDOM.scrollTop*t.scaleY,height:r.bottom-r.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:r}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/r+"px",this.cursor.style.height=t.height/r+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(uv)!=t&&this.view.dispatch({effects:Bq.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function cSe(){return[uv,lSe]}function tB(t,e,r,n,i){e.lastIndex=0;for(let s=t.iterRange(r,n),a=r,o;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=e.exec(s.value);)i(a+o.index,o)}function uSe(t,e){let r=t.visibleRanges;if(r.length==1&&r[0].from==t.viewport.from&&r[0].to==t.viewport.to)return r;let n=[];for(let{from:i,to:s}of r)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),n.length&&n[n.length-1].to>=i?n[n.length-1].to=s:n.push({from:i,to:s});return n}class hSe{constructor(e){const{regexp:r,decoration:n,decorate:i,boundary:s,maxLength:a=1e3}=e;if(!r.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=r,i)this.addMatch=(o,d,m,y)=>i(y,m,m+o[0].length,o,d);else if(typeof n=="function")this.addMatch=(o,d,m,y)=>{let b=n(o,d,m);b&&y(m,m+o[0].length,b)};else if(n)this.addMatch=(o,d,m,y)=>y(m,m+o[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=a}createDeco(e){let r=new vh,n=r.add.bind(r);for(let{from:i,to:s}of uSe(e,this.maxLength))tB(e.state.doc,this.regexp,i,s,(a,o)=>this.addMatch(o,e,a,n));return r.finish()}updateDeco(e,r){let n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,a,o,d)=>{d>=e.view.viewport.from&&o<=e.view.viewport.to&&(n=Math.min(o,n),i=Math.max(d,i))}),e.viewportMoved||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,r.map(e.changes),n,i):r}updateRange(e,r,n,i){for(let s of e.visibleRanges){let a=Math.max(s.from,n),o=Math.min(s.to,i);if(o>=a){let d=e.state.doc.lineAt(a),m=d.to<o?e.state.doc.lineAt(o):d,y=Math.max(s.from,d.from),b=Math.min(s.to,m.to);if(this.boundary){for(;a>d.from;a--)if(this.boundary.test(d.text[a-1-d.from])){y=a;break}for(;o<m.to;o++)if(this.boundary.test(m.text[o-m.from])){b=o;break}}let w=[],O,A=(E,$,R)=>w.push(R.range(E,$));if(d==m)for(this.regexp.lastIndex=y-d.from;(O=this.regexp.exec(d.text))&&O.index<b-d.from;)this.addMatch(O,e,O.index+d.from,A);else tB(e.state.doc,this.regexp,y,b,(E,$)=>this.addMatch($,e,E,A));r=r.update({filterFrom:y,filterTo:b,filter:(E,$)=>E<y||$>b,add:w})}}return r}}const bE=/x/.unicode!=null?"gu":"g",dSe=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,bE),fSe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let oP=null;function pSe(){var t;if(oP==null&&typeof document<"u"&&document.body){let e=document.body.style;oP=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return oP||!1}const OS=ur.define({combine(t){let e=bu(t,{render:null,specialChars:dSe,addSpecialChars:null});return(e.replaceTabs=!pSe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,bE)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,bE)),e}});function mSe(t={}){return[OS.of(t),gSe()]}let rB=null;function gSe(){return rB||(rB=Wi.fromClass(class{constructor(t){this.view=t,this.decorations=Or.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(OS)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new hSe({regexp:t.specialChars,decoration:(e,r,n)=>{let{doc:i}=r.state,s=ua(e[0],0);if(s==9){let a=i.lineAt(n),o=r.state.tabSize,d=y0(a.text,o,n-a.from);return Or.replace({widget:new bSe((o-d%o)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Or.replace({widget:new vSe(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(OS);t.startState.facet(OS)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const ySe="";function xSe(t){return t>=32?ySe:t==10?"":String.fromCharCode(9216+t)}class vSe extends _u{constructor(e,r){super(),this.options=e,this.code=r}eq(e){return e.code==this.code}toDOM(e){let r=xSe(this.code),n=e.state.phrase("Control character")+" "+(fSe[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,r);if(i)return i;let s=document.createElement("span");return s.textContent=r,s.title=n,s.setAttribute("aria-label",n),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class bSe extends _u{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function _Se(){return SSe}const wSe=Or.line({class:"cm-activeLine"}),SSe=Wi.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,r=[];for(let n of t.state.selection.ranges){let i=t.lineBlockAt(n.head);i.from>e&&(r.push(wSe.range(i.from)),e=i.from)}return Or.set(r)}},{decorations:t=>t.decorations});class kSe extends _u{constructor(e){super(),this.content=e}toDOM(e){let r=document.createElement("span");return r.className="cm-placeholder",r.style.pointerEvents="none",r.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),r.setAttribute("aria-hidden","true"),r}coordsAt(e){let r=e.firstChild?Bv(e.firstChild):[];if(!r.length)return null;let n=window.getComputedStyle(e.parentNode),i=Ib(r[0],n.direction!="rtl"),s=parseInt(n.lineHeight);return i.bottom-i.top>s*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+s}:i}ignoreEvent(){return!1}}function CSe(t){let e=Wi.fromClass(class{constructor(r){this.view=r,this.placeholder=t?Or.set([Or.widget({widget:new kSe(t),side:1}).range(0)]):Or.none}get decorations(){return this.view.state.doc.length?Or.none:this.placeholder}},{decorations:r=>r.decorations});return typeof t=="string"?[e,Gt.contentAttributes.of({"aria-placeholder":t})]:e}const _E=2e3;function TSe(t,e,r){let n=Math.min(e.line,r.line),i=Math.max(e.line,r.line),s=[];if(e.off>_E||r.off>_E||e.col<0||r.col<0){let a=Math.min(e.off,r.off),o=Math.max(e.off,r.off);for(let d=n;d<=i;d++){let m=t.doc.line(d);m.length<=o&&s.push(pt.range(m.from+a,m.to+o))}}else{let a=Math.min(e.col,r.col),o=Math.max(e.col,r.col);for(let d=n;d<=i;d++){let m=t.doc.line(d),y=eE(m.text,a,t.tabSize,!0);if(y<0)s.push(pt.cursor(m.to));else{let b=eE(m.text,o,t.tabSize);s.push(pt.range(m.from+y,m.from+b))}}}return s}function OSe(t,e){let r=t.coordsAtPos(t.viewport.from);return r?Math.round(Math.abs((r.left-e)/t.defaultCharacterWidth)):-1}function nB(t,e){let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),n=t.state.doc.lineAt(r),i=r-n.from,s=i>_E?-1:i==n.length?OSe(t,e.clientX):y0(n.text,t.state.tabSize,r-n.from);return{line:n.number,col:s,off:i}}function PSe(t,e){let r=nB(t,e),n=t.state.selection;return r?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(r.line).from),a=i.state.doc.lineAt(s);r={line:a.number,col:r.col,off:Math.min(r.off,a.length)},n=n.map(i.changes)}},get(i,s,a){let o=nB(t,i);if(!o)return n;let d=TSe(t.state,r,o);return d.length?a?pt.create(d.concat(n.ranges)):pt.create(d):n}}:null}function jSe(t){let e=r=>r.altKey&&r.button==0;return Gt.mouseSelectionStyle.of((r,n)=>e(n)?PSe(r,n):null)}const ASe={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},ESe={style:"cursor: crosshair"};function zSe(t={}){let[e,r]=ASe[t.key||"Alt"],n=Wi.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||r(i))},keyup(i){(i.keyCode==e||!r(i))&&this.set(!1)},mousemove(i){this.set(r(i))}}});return[n,Gt.contentAttributes.of(i=>{var s;return!((s=i.plugin(n))===null||s===void 0)&&s.isDown?ESe:null})]}const Ow="-10000px";class $q{constructor(e,r,n,i){this.facet=r,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(r),this.tooltips=this.input.filter(a=>a);let s=null;this.tooltipViews=this.tooltips.map(a=>s=n(a,s))}update(e,r){var n;let i=e.state.facet(this.facet),s=i.filter(d=>d);if(i===this.input){for(let d of this.tooltipViews)d.update&&d.update(e);return!1}let a=[],o=r?[]:null;for(let d=0;d<s.length;d++){let m=s[d],y=-1;if(m){for(let b=0;b<this.tooltips.length;b++){let w=this.tooltips[b];w&&w.create==m.create&&(y=b)}if(y<0)a[d]=this.createTooltipView(m,d?a[d-1]:null),o&&(o[d]=!!m.above);else{let b=a[d]=this.tooltipViews[y];o&&(o[d]=r[y]),b.update&&b.update(e)}}}for(let d of this.tooltipViews)a.indexOf(d)<0&&(this.removeTooltipView(d),(n=d.destroy)===null||n===void 0||n.call(d));return r&&(o.forEach((d,m)=>r[m]=d),r.length=o.length),this.input=i,this.tooltips=s,this.tooltipViews=a,!0}}function MSe(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const aP=ur.define({combine:t=>{var e,r,n;return{position:lr.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((r=t.find(i=>i.parent))===null||r===void 0?void 0:r.parent)||null,tooltipSpace:((n=t.find(i=>i.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||MSe}}}),iB=new WeakMap,HI=Wi.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(aP);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new $q(t,GI,(r,n)=>this.createTooltip(r,n),r=>{this.resizeObserver&&this.resizeObserver.unobserve(r.dom),r.dom.remove()}),this.above=this.manager.tooltips.map(r=>!!r.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let r=e||t.geometryChanged,n=t.state.facet(aP);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;r=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(t,e){let r=t.create(this.view),n=e?e.dom:null;if(r.dom.classList.add("cm-tooltip"),t.arrow&&!r.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",r.dom.appendChild(i)}return r.dom.style.position=this.position,r.dom.style.top=Ow,r.dom.style.left="0px",this.container.insertBefore(r.dom,n),r.mount&&r.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(r.dom),r}destroy(){var t,e,r;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(r=this.intersectionObserver)===null||r===void 0||r.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,r=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(lr.safari){let a=s.getBoundingClientRect();r=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}else r=!!s.offsetParent&&s.offsetParent!=this.container.ownerDocument.body}if(r||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),i=WI(this.view);return{visible:{left:n.left+i.left,top:n.top+i.top,right:n.right-i.right,bottom:n.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,a)=>{let o=this.manager.tooltipViews[a];return o.getCoords?o.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(aP).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:r}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let o of this.manager.tooltipViews)o.dom.style.position="absolute"}let{visible:r,space:n,scaleX:i,scaleY:s}=t,a=[];for(let o=0;o<this.manager.tooltips.length;o++){let d=this.manager.tooltips[o],m=this.manager.tooltipViews[o],{dom:y}=m,b=t.pos[o],w=t.size[o];if(!b||d.clip!==!1&&(b.bottom<=Math.max(r.top,n.top)||b.top>=Math.min(r.bottom,n.bottom)||b.right<Math.max(r.left,n.left)-.1||b.left>Math.min(r.right,n.right)+.1)){y.style.top=Ow;continue}let O=d.arrow?m.dom.querySelector(".cm-tooltip-arrow"):null,A=O?7:0,E=w.right-w.left,$=(e=iB.get(m))!==null&&e!==void 0?e:w.bottom-w.top,R=m.offset||DSe,F=this.view.textDirection==ei.LTR,L=w.width>n.right-n.left?F?n.left:n.right-w.width:F?Math.max(n.left,Math.min(b.left-(O?14:0)+R.x,n.right-E)):Math.min(Math.max(n.left,b.left-E+(O?14:0)-R.x),n.right-E),U=this.above[o];!d.strictSide&&(U?b.top-$-A-R.y<n.top:b.bottom+$+A+R.y>n.bottom)&&U==n.bottom-b.bottom>b.top-n.top&&(U=this.above[o]=!U);let Q=(U?b.top-n.top:n.bottom-b.bottom)-A;if(Q<$&&m.resize!==!1){if(Q<this.view.defaultLineHeight){y.style.top=Ow;continue}iB.set(m,$),y.style.height=($=Q)/s+"px"}else y.style.height&&(y.style.height="");let Y=U?b.top-$-A-R.y:b.bottom+A+R.y,Z=L+E;if(m.overlap!==!0)for(let J of a)J.left<Z&&J.right>L&&J.top<Y+$&&J.bottom>Y&&(Y=U?J.top-$-2-A:J.bottom+A+2);if(this.position=="absolute"?(y.style.top=(Y-t.parent.top)/s+"px",sB(y,(L-t.parent.left)/i)):(y.style.top=Y/s+"px",sB(y,L/i)),O){let J=b.left+(F?R.x:-R.x)-(L+14-7);O.style.left=J/i+"px"}m.overlap!==!0&&a.push({left:L,top:Y,right:Z,bottom:Y+$}),y.classList.toggle("cm-tooltip-above",U),y.classList.toggle("cm-tooltip-below",!U),m.positioned&&m.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Ow}},{eventObservers:{scroll(){this.maybeMeasure()}}});function sB(t,e){let r=parseInt(t.style.left,10);(isNaN(r)||Math.abs(e-r)>1)&&(t.style.left=e+"px")}const ISe=Gt.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),DSe={x:0,y:0},GI=ur.define({enables:[HI,ISe]}),I2=ur.define({combine:t=>t.reduce((e,r)=>e.concat(r),[])});class uC{static create(e){return new uC(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new $q(e,I2,(r,n)=>this.createHostedView(r,n),r=>r.dom.remove())}createHostedView(e,r){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,r?r.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let r of this.manager.tooltipViews)r.mount&&r.mount(e);this.mounted=!0}positioned(e){for(let r of this.manager.tooltipViews)r.positioned&&r.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let r of this.manager.tooltipViews)(e=r.destroy)===null||e===void 0||e.call(r)}passProp(e){let r;for(let n of this.manager.tooltipViews){let i=n[e];if(i!==void 0){if(r===void 0)r=i;else if(r!==i)return}}return r}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const RSe=GI.compute([I2],t=>{let e=t.facet(I2);return e.length===0?null:{pos:Math.min(...e.map(r=>r.pos)),end:Math.max(...e.map(r=>{var n;return(n=r.end)!==null&&n!==void 0?n:r.pos})),create:uC.create,above:e[0].above,arrow:e.some(r=>r.arrow)}});class LSe{constructor(e,r,n,i,s){this.view=e,this.source=r,this.field=n,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:r}=this,n=e.docView.tile.nearest(r.target);if(!n)return;let i,s=1;if(n.isWidget())i=n.posAtStart;else{if(i=e.posAtCoords(r),i==null)return;let o=e.coordsAtPos(i);if(!o||r.y<o.top||r.y>o.bottom||r.x<o.left-e.defaultCharacterWidth||r.x>o.right+e.defaultCharacterWidth)return;let d=e.bidiSpans(e.state.doc.lineAt(i)).find(y=>y.from<=i&&y.to>=i),m=d&&d.dir==ei.RTL?-1:1;s=r.x<o.left?-m:m}let a=this.source(e,i,s);if(a!=null&&a.then){let o=this.pending={pos:i};a.then(d=>{this.pending==o&&(this.pending=null,d&&!(Array.isArray(d)&&!d.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(d)?d:[d])}))},d=>ya(e.state,d,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let e=this.view.plugin(HI),r=e?e.manager.tooltips.findIndex(n=>n.create==uC.create):-1;return r>-1?e.manager.tooltipViews[r]:null}mousemove(e){var r,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!FSe(s.dom,e)||this.pending){let{pos:a}=i[0]||this.pending,o=(n=(r=i[0])===null||r===void 0?void 0:r.end)!==null&&n!==void 0?n:a;(a==o?this.view.posAtCoords(this.lastMove)!=a:!BSe(this.view,a,o,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:r}=this;if(r.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let r=n=>{e.removeEventListener("mouseleave",r),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",r)}destroy(){clearTimeout(this.hoverTimeout),clearTimeout(this.restartTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Pw=4;function FSe(t,e){let{left:r,right:n,top:i,bottom:s}=t.getBoundingClientRect(),a;if(a=t.querySelector(".cm-tooltip-arrow")){let o=a.getBoundingClientRect();i=Math.min(o.top,i),s=Math.max(o.bottom,s)}return e.clientX>=r-Pw&&e.clientX<=n+Pw&&e.clientY>=i-Pw&&e.clientY<=s+Pw}function BSe(t,e,r,n,i,s){let a=t.scrollDOM.getBoundingClientRect(),o=t.documentTop+t.documentPadding.top+t.contentHeight;if(a.left>n||a.right<n||a.top>i||Math.min(a.bottom,o)<i)return!1;let d=t.posAtCoords({x:n,y:i},!1);return d>=e&&d<=r}function $Se(t,e={}){let r=Wr.define(),n=so.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(a=>!e.hideOn(s,a))),s.docChanged)){let a=[];for(let o of i){let d=s.changes.mapPos(o.pos,-1,$o.TrackDel);if(d!=null){let m=Object.assign(Object.create(null),o);m.pos=d,m.end!=null&&(m.end=s.changes.mapPos(m.end)),a.push(m)}}i=a}for(let a of s.effects)a.is(r)&&(i=a.value),a.is(NSe)&&(i=[]);return i},provide:i=>I2.from(i)});return{active:n,extension:[n,Wi.define(i=>new LSe(i,t,n,r,e.hoverTime||300)),RSe]}}function Nq(t,e){let r=t.plugin(HI);if(!r)return null;let n=r.manager.tooltips.indexOf(e);return n<0?null:r.manager.tooltipViews[n]}const NSe=Wr.define(),oB=ur.define({combine(t){let e,r;for(let n of t)e=e||n.topContainer,r=r||n.bottomContainer;return{topContainer:e,bottomContainer:r}}});function XI(t,e){let r=t.plugin(Vq),n=r?r.specs.indexOf(e):-1;return n>-1?r.panels[n]:null}const Vq=Wi.fromClass(class{constructor(t){this.input=t.state.facet(Lb),this.specs=this.input.filter(r=>r),this.panels=this.specs.map(r=>r(t));let e=t.state.facet(oB);this.top=new jw(t,!0,e.topContainer),this.bottom=new jw(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(r=>r.top)),this.bottom.sync(this.panels.filter(r=>!r.top));for(let r of this.panels)r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(t){let e=t.state.facet(oB);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new jw(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new jw(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=t.state.facet(Lb);if(r!=this.input){let n=r.filter(d=>d),i=[],s=[],a=[],o=[];for(let d of n){let m=this.specs.indexOf(d),y;m<0?(y=d(t.view),o.push(y)):(y=this.panels[m],y.update&&y.update(t)),i.push(y),(y.top?s:a).push(y)}this.specs=n,this.panels=i,this.top.sync(s),this.bottom.sync(a);for(let d of o)d.dom.classList.add("cm-panel"),d.mount&&d.mount()}else for(let n of this.panels)n.update&&n.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Gt.scrollMargins.of(e=>{let r=e.plugin(t);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});class jw{constructor(e,r,n){this.view=e,this.top=r,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let r of this.panels)r.destroy&&e.indexOf(r)<0&&r.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let r=this.container||this.view.dom;r.insertBefore(this.dom,this.top?r.firstChild:null)}let e=this.dom.firstChild;for(let r of this.panels)if(r.dom.parentNode==this.dom){for(;e!=r.dom;)e=aB(e);e=e.nextSibling}else this.dom.insertBefore(r.dom,e);for(;e;)e=aB(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function aB(t){let e=t.nextSibling;return t.remove(),e}const Lb=ur.define({enables:Vq});function VSe(t,e){let r,n=new Promise(a=>r=a),i=a=>WSe(a,e,r);t.state.field(lP,!1)?t.dispatch({effects:Wq.of(i)}):t.dispatch({effects:Wr.appendConfig.of(lP.init(()=>[i]))});let s=Uq.of(i);return{close:s,result:n.then(a=>((t.win.queueMicrotask||(d=>t.win.setTimeout(d,10)))(()=>{t.state.field(lP).indexOf(i)>-1&&t.dispatch({effects:s})}),a))}}const lP=so.define({create(){return[]},update(t,e){for(let r of e.effects)r.is(Wq)?t=[r.value].concat(t):r.is(Uq)&&(t=t.filter(n=>n!=r.value));return t},provide:t=>Lb.computeN([t],e=>e.field(t))}),Wq=Wr.define(),Uq=Wr.define();function WSe(t,e,r){let n=e.content?e.content(t,()=>a(null)):null;if(!n){if(n=Xn("form"),e.input){let o=Xn("input",e.input);/^(text|password|number|email|tel|url)$/.test(o.type)&&o.classList.add("cm-textfield"),o.name||(o.name="input"),n.appendChild(Xn("label",(e.label||"")+": ",o))}else n.appendChild(document.createTextNode(e.label||""));n.appendChild(document.createTextNode(" ")),n.appendChild(Xn("button",{class:"cm-button",type:"submit"},e.submitLabel||"OK"))}let i=n.nodeName=="FORM"?[n]:n.querySelectorAll("form");for(let o=0;o<i.length;o++){let d=i[o];d.addEventListener("keydown",m=>{m.keyCode==27?(m.preventDefault(),a(null)):m.keyCode==13&&(m.preventDefault(),a(d))}),d.addEventListener("submit",m=>{m.preventDefault(),a(d)})}let s=Xn("div",n,Xn("button",{onclick:()=>a(null),"aria-label":t.state.phrase("close"),class:"cm-dialog-close",type:"button"},[""]));e.class&&(s.className=e.class),s.classList.add("cm-dialog");function a(o){s.contains(s.ownerDocument.activeElement)&&t.focus(),r(o)}return{dom:s,top:e.top,mount:()=>{if(e.focus){let o;typeof e.focus=="string"?o=n.querySelector(e.focus):o=n.querySelector("input")||n.querySelector("button"),o&&"select"in o?o.select():o&&"focus"in o&&o.focus()}}}}class _h extends rf{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}_h.prototype.elementClass="";_h.prototype.toDOM=void 0;_h.prototype.mapMode=$o.TrackBefore;_h.prototype.startSide=_h.prototype.endSide=-1;_h.prototype.point=!0;const PS=ur.define(),USe=ur.define(),qSe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>rn.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Vv=ur.define();function QSe(t){return[qq(),Vv.of({...qSe,...t})]}const lB=ur.define({combine:t=>t.some(e=>e)});function qq(t){return[HSe]}const HSe=Wi.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Vv).map(e=>new uB(t,e)),this.fixed=!t.state.facet(lB);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,r=t.view.viewport,n=Math.min(e.to,r.to)-Math.max(e.from,r.from);this.syncGutters(n<(r.to-r.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(lB)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let r=rn.iter(this.view.state.facet(PS),this.view.viewport.from),n=[],i=this.gutters.map(s=>new GSe(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(s.type)){let a=!0;for(let o of s.type)if(o.type==no.Text&&a){wE(r,n,o.from);for(let d of i)d.line(this.view,o,n);a=!1}else if(o.widget)for(let d of i)d.widget(this.view,o)}else if(s.type==no.Text){wE(r,n,s.from);for(let a of i)a.line(this.view,s,n)}else if(s.widget)for(let a of i)a.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(Vv),r=t.state.facet(Vv),n=t.docChanged||t.heightChanged||t.viewportChanged||!rn.eq(t.startState.facet(PS),t.state.facet(PS),t.view.viewport.from,t.view.viewport.to);if(e==r)for(let i of this.gutters)i.update(t)&&(n=!0);else{n=!0;let i=[];for(let s of r){let a=e.indexOf(s);a<0?i.push(new uB(this.view,s)):(this.gutters[a].update(t),i.push(this.gutters[a]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return n}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Gt.scrollMargins.of(e=>{let r=e.plugin(t);if(!r||r.gutters.length==0||!r.fixed)return null;let n=r.dom.offsetWidth*e.scaleX,i=r.domAfter?r.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==ei.LTR?{left:n,right:i}:{right:n,left:i}})});function cB(t){return Array.isArray(t)?t:[t]}function wE(t,e,r){for(;t.value&&t.from<=r;)t.from==r&&e.push(t.value),t.next()}class GSe{constructor(e,r,n){this.gutter=e,this.height=n,this.i=0,this.cursor=rn.iter(e.markers,r.from)}addElement(e,r,n){let{gutter:i}=this,s=(r.top-this.height)/e.scaleY,a=r.height/e.scaleY;if(this.i==i.elements.length){let o=new Qq(e,a,s,n);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,a,s,n);this.height=r.bottom,this.i++}line(e,r,n){let i=[];wE(this.cursor,i,r.from),n.length&&(i=i.concat(n));let s=this.gutter.config.lineMarker(e,r,i);s&&i.unshift(s);let a=this.gutter;i.length==0&&!a.config.renderEmptyElements||this.addElement(e,r,i)}widget(e,r){let n=this.gutter.config.widgetMarker(e,r.widget,r),i=n?[n]:null;for(let s of e.state.facet(USe)){let a=s(e,r.widget,r);a&&(i||(i=[])).push(a)}i&&this.addElement(e,r,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let r=e.elements.pop();e.dom.removeChild(r.dom),r.destroy()}}}class uB{constructor(e,r){this.view=e,this.config=r,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in r.domEventHandlers)this.dom.addEventListener(n,i=>{let s=i.target,a;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let d=s.getBoundingClientRect();a=(d.top+d.bottom)/2}else a=i.clientY;let o=e.lineBlockAtHeight(a-e.documentTop);r.domEventHandlers[n](e,o,i)&&i.preventDefault()});this.markers=cB(r.markers(e)),r.initialSpacer&&(this.spacer=new Qq(e,0,0,[r.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let r=this.markers;if(this.markers=cB(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let n=e.view.viewport;return!rn.eq(this.markers,r,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Qq{constructor(e,r,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,r,n,i)}update(e,r,n,i){this.height!=r&&(this.height=r,this.dom.style.height=r+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),XSe(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,r){let n="cm-gutterElement",i=this.dom.firstChild;for(let s=0,a=0;;){let o=a,d=s<r.length?r[s++]:null,m=!1;if(d){let y=d.elementClass;y&&(n+=" "+y);for(let b=a;b<this.markers.length;b++)if(this.markers[b].compare(d)){o=b,m=!0;break}}else o=this.markers.length;for(;a<o;){let y=this.markers[a++];if(y.toDOM){y.destroy(i);let b=i.nextSibling;i.remove(),i=b}}if(!d)break;d.toDOM&&(m?i=i.nextSibling:this.dom.insertBefore(d.toDOM(e),i)),m&&a++}this.dom.className=n,this.markers=r}destroy(){this.setMarkers(null,[])}}function XSe(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].compare(e[r]))return!1;return!0}const KSe=ur.define(),ZSe=ur.define(),Vg=ur.define({combine(t){return bu(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,r){let n=Object.assign({},e);for(let i in r){let s=n[i],a=r[i];n[i]=s?(o,d,m)=>s(o,d,m)||a(o,d,m):a}return n}})}});class cP extends _h{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function uP(t,e){return t.state.facet(Vg).formatNumber(e,t.state)}const YSe=Vv.compute([Vg],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(KSe)},lineMarker(e,r,n){return n.some(i=>i.toDOM)?null:new cP(uP(e,e.state.doc.lineAt(r.from).number))},widgetMarker:(e,r,n)=>{for(let i of e.state.facet(ZSe)){let s=i(e,r,n);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Vg)!=e.state.facet(Vg),initialSpacer(e){return new cP(uP(e,hB(e.state.doc.lines)))},updateSpacer(e,r){let n=uP(r.view,hB(r.view.state.doc.lines));return n==e.number?e:new cP(n)},domEventHandlers:t.facet(Vg).domEventHandlers,side:"before"}));function JSe(t={}){return[Vg.of(t),qq(),YSe]}function hB(t){let e=9;for(;e<t;)e=e*10+9;return e}const e2e=new class extends _h{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},t2e=PS.compute(["selection"],t=>{let e=[],r=-1;for(let n of t.selection.ranges){let i=t.doc.lineAt(n.head).from;i>r&&(r=i,e.push(e2e.range(i)))}return rn.of(e)});function r2e(){return t2e}const Hq=1024;let n2e=0;class hP{constructor(e,r){this.from=e,this.to=r}}class en{constructor(e={}){this.id=n2e++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Oa.match(e)),r=>{let n=e(r);return n===void 0?null:[this,n]}}}en.closedBy=new en({deserialize:t=>t.split(" ")});en.openedBy=new en({deserialize:t=>t.split(" ")});en.group=new en({deserialize:t=>t.split(" ")});en.isolate=new en({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});en.contextHash=new en({perNode:!0});en.lookAhead=new en({perNode:!0});en.mounted=new en({perNode:!0});class Wv{constructor(e,r,n,i=!1){this.tree=e,this.overlay=r,this.parser=n,this.bracketed=i}static get(e){return e&&e.props&&e.props[en.mounted.id]}}const i2e=Object.create(null);class Oa{constructor(e,r,n,i=0){this.name=e,this.props=r,this.id=n,this.flags=i}static define(e){let r=e.props&&e.props.length?Object.create(null):i2e,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Oa(e.name||"",r,e.id,n);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");r[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let r=this.prop(en.group);return r?r.indexOf(e)>-1:!1}return this.id==e}static match(e){let r=Object.create(null);for(let n in e)for(let i of n.split(" "))r[i]=e[n];return n=>{for(let i=n.prop(en.group),s=-1;s<(i?i.length:0);s++){let a=r[s<0?n.name:i[s]];if(a)return a}}}}Oa.none=new Oa("",Object.create(null),0,8);class KI{constructor(e){this.types=e;for(let r=0;r<e.length;r++)if(e[r].id!=r)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let r=[];for(let n of this.types){let i=null;for(let s of e){let a=s(n);if(a){i||(i=Object.assign({},n.props));let o=a[1],d=a[0];d.combine&&d.id in i&&(o=d.combine(i[d.id],o)),i[d.id]=o}}r.push(i?new Oa(n.name,i,n.id,n.flags):n)}return new KI(r)}}const Aw=new WeakMap,dB=new WeakMap;var Si;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays",t[t.EnterBracketed=16]="EnterBracketed"})(Si||(Si={}));class Vi{constructor(e,r,n,i,s){if(this.type=e,this.children=r,this.positions=n,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[a,o]of s)this.props[typeof a=="number"?a:a.id]=o}}toString(){let e=Wv.get(this);if(e&&!e.overlay)return e.tree.toString();let r="";for(let n of this.children){let i=n.toString();i&&(r&&(r+=","),r+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(r.length?"("+r+")":""):r}cursor(e=0){return new kE(this.topNode,e)}cursorAt(e,r=0,n=0){let i=Aw.get(this)||this.topNode,s=new kE(i);return s.moveTo(e,r),Aw.set(this,s._tree),s}get topNode(){return new ka(this,0,0,null)}resolve(e,r=0){let n=Fb(Aw.get(this)||this.topNode,e,r,!1);return Aw.set(this,n),n}resolveInner(e,r=0){let n=Fb(dB.get(this)||this.topNode,e,r,!0);return dB.set(this,n),n}resolveStack(e,r=0){return a2e(this,e,r)}iterate(e){let{enter:r,leave:n,from:i=0,to:s=this.length}=e,a=e.mode||0,o=(a&Si.IncludeAnonymous)>0;for(let d=this.cursor(a|Si.IncludeAnonymous);;){let m=!1;if(d.from<=s&&d.to>=i&&(!o&&d.type.isAnonymous||r(d)!==!1)){if(d.firstChild())continue;m=!0}for(;m&&n&&(o||!d.type.isAnonymous)&&n(d),!d.nextSibling();){if(!d.parent())return;m=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let r in this.props)e.push([+r,this.props[r]]);return e}balance(e={}){return this.children.length<=8?this:JI(Oa.none,this.children,this.positions,0,this.children.length,0,this.length,(r,n,i)=>new Vi(this.type,r,n,i,this.propValues),e.makeTree||((r,n,i)=>new Vi(Oa.none,r,n,i)))}static build(e){return l2e(e)}}Vi.empty=new Vi(Oa.none,[],[],0);class ZI{constructor(e,r){this.buffer=e,this.index=r}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ZI(this.buffer,this.index)}}class af{constructor(e,r,n){this.buffer=e,this.length=r,this.set=n}get type(){return Oa.none}toString(){let e=[];for(let r=0;r<this.buffer.length;)e.push(this.childString(r)),r=this.buffer[r+3];return e.join(",")}childString(e){let r=this.buffer[e],n=this.buffer[e+3],i=this.set.types[r],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,n==e)return s;let a=[];for(;e<n;)a.push(this.childString(e)),e=this.buffer[e+3];return s+"("+a.join(",")+")"}findChild(e,r,n,i,s){let{buffer:a}=this,o=-1;for(let d=e;d!=r&&!(Gq(s,i,a[d+1],a[d+2])&&(o=d,n>0));d=a[d+3]);return o}slice(e,r,n){let i=this.buffer,s=new Uint16Array(r-e),a=0;for(let o=e,d=0;o<r;){s[d++]=i[o++],s[d++]=i[o++]-n;let m=s[d++]=i[o++]-n;s[d++]=i[o++]-e,a=Math.max(a,m)}return new af(s,a,this.set)}}function Gq(t,e,r,n){switch(t){case-2:return r<e;case-1:return n>=e&&r<e;case 0:return r<e&&n>e;case 1:return r<=e&&n>e;case 2:return n>e;case 4:return!0}}function Fb(t,e,r,n){for(var i;t.from==t.to||(r<1?t.from>=e:t.from>e)||(r>-1?t.to<=e:t.to<e);){let a=!n&&t instanceof ka&&t.index<0?null:t.parent;if(!a)return t;t=a}let s=n?0:Si.IgnoreOverlays;if(n)for(let a=t,o=a.parent;o;a=o,o=a.parent)a instanceof ka&&a.index<0&&((i=o.enter(e,r,s))===null||i===void 0?void 0:i.from)!=a.from&&(t=o);for(;;){let a=t.enter(e,r,s);if(!a)return t;t=a}}class Xq{cursor(e=0){return new kE(this,e)}getChild(e,r=null,n=null){let i=fB(this,e,r,n);return i.length?i[0]:null}getChildren(e,r=null,n=null){return fB(this,e,r,n)}resolve(e,r=0){return Fb(this,e,r,!1)}resolveInner(e,r=0){return Fb(this,e,r,!0)}matchContext(e){return SE(this.parent,e)}enterUnfinishedNodesBefore(e){let r=this.childBefore(e),n=this;for(;r;){let i=r.lastChild;if(!i||i.to!=r.to)break;i.type.isError&&i.from==i.to?(n=r,r=i.prevSibling):r=i}return n}get node(){return this}get next(){return this.parent}}class ka extends Xq{constructor(e,r,n,i){super(),this._tree=e,this.from=r,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,r,n,i,s=0){for(let a=this;;){for(let{children:o,positions:d}=a._tree,m=r>0?o.length:-1;e!=m;e+=r){let y=o[e],b=d[e]+a.from,w;if(!(!(s&Si.EnterBracketed&&y instanceof Vi&&(w=Wv.get(y))&&!w.overlay&&w.bracketed&&n>=b&&n<=b+y.length)&&!Gq(i,n,b,b+y.length))){if(y instanceof af){if(s&Si.ExcludeBuffers)continue;let O=y.findChild(0,y.buffer.length,r,n-b,i);if(O>-1)return new iu(new s2e(a,y,e,b),null,O)}else if(s&Si.IncludeAnonymous||!y.type.isAnonymous||YI(y)){let O;if(!(s&Si.IgnoreMounts)&&(O=Wv.get(y))&&!O.overlay)return new ka(O.tree,b,e,a);let A=new ka(y,b,e,a);return s&Si.IncludeAnonymous||!A.type.isAnonymous?A:A.nextChild(r<0?y.children.length-1:0,r,n,i,s)}}}if(s&Si.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+r:e=r<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,r,n=0){let i;if(!(n&Si.IgnoreOverlays)&&(i=Wv.get(this._tree))&&i.overlay){let s=e-this.from,a=n&Si.EnterBracketed&&i.bracketed;for(let{from:o,to:d}of i.overlay)if((r>0||a?o<=s:o<s)&&(r<0||a?d>=s:d>s))return new ka(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,r,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function fB(t,e,r,n){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(r!=null){for(let a=!1;!a;)if(a=i.type.is(r),!i.nextSibling())return s}for(;;){if(n!=null&&i.type.is(n))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return n==null?s:[]}}function SE(t,e,r=e.length-1){for(let n=t;r>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[r]&&e[r]!=n.name)return!1;r--}}return!0}class s2e{constructor(e,r,n,i){this.parent=e,this.buffer=r,this.index=n,this.start=i}}class iu extends Xq{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,r,n){super(),this.context=e,this._parent=r,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,r,n){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,r-this.context.start,n);return s<0?null:new iu(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,r,n=0){if(n&Si.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],r>0?1:-1,e-this.context.start,r);return s<0?null:new iu(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,r=e.buffer[this.index+3];return r<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new iu(this.context,this._parent,r):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,r=this._parent?this._parent.index+4:0;return this.index==r?this.externalSibling(-1):new iu(this.context,this._parent,e.findChild(r,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],r=[],{buffer:n}=this.context,i=this.index+4,s=n.buffer[this.index+3];if(s>i){let a=n.buffer[this.index+1];e.push(n.slice(i,s,a)),r.push(0)}return new Vi(this.type,e,r,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Kq(t){if(!t.length)return null;let e=0,r=t[0];for(let s=1;s<t.length;s++){let a=t[s];(a.from>r.from||a.to<r.to)&&(r=a,e=s)}let n=r instanceof ka&&r.index<0?null:r.parent,i=t.slice();return n?i[e]=n:i.splice(e,1),new o2e(i,r)}class o2e{constructor(e,r){this.heads=e,this.node=r}get next(){return Kq(this.heads)}}function a2e(t,e,r){let n=t.resolveInner(e,r),i=null;for(let s=n instanceof ka?n:n.context.parent;s;s=s.parent)if(s.index<0){let a=s.parent;(i||(i=[n])).push(a.resolve(e,r)),s=a}else{let a=Wv.get(s.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let o=new ka(a.tree,a.overlay[0].from+s.from,-1,s);(i||(i=[n])).push(Fb(o,e,r,!1))}}return i?Kq(i):n}class kE{get name(){return this.type.name}constructor(e,r=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=r&~Si.EnterBracketed,e instanceof ka)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,r){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=r||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof ka?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,r,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,r,n,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,r-this.buffer.start,n);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,r,n=this.mode){return this.buffer?n&Si.ExcludeBuffers?!1:this.enterChild(1,e,r):this.yield(this._tree.enter(e,r,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Si.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Si.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:r}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(r.findChild(i,this.index,-1,0,4))}else{let i=r.buffer[this.index+3];if(i<(n<0?r.buffer.length:r.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let r,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:r,parent:n}=i)}else({index:r,_parent:n}=this._tree);for(;n;{index:r,_parent:n}=n)if(r>-1)for(let s=r+e,a=e<0?-1:n._tree.children.length;s!=a;s+=e){let o=n._tree.children[s];if(this.mode&Si.IncludeAnonymous||o instanceof af||!o.type.isAnonymous||YI(o))return!1}return!0}move(e,r){if(r&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,r=0){for(;(this.from==this.to||(r<1?this.from>=e:this.from>e)||(r>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,r););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,r=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let a=e;a;a=a._parent)if(a.index==i){if(i==this.index)return a;r=a,n=s+1;break e}i=this.stack[--s]}for(let i=n;i<this.stack.length;i++)r=new iu(this.buffer,r,this.stack[i]);return this.bufferNode=new iu(this.buffer,r,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,r){for(let n=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&r&&r(this),i=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return SE(this.node.parent,e);let{buffer:r}=this.buffer,{types:n}=r.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return SE(this._tree,e,i);let a=n[r.buffer[this.stack[s]]];if(!a.isAnonymous){if(e[i]&&e[i]!=a.name)return!1;i--}}return!0}}function YI(t){return t.children.some(e=>e instanceof af||!e.type.isAnonymous||YI(e))}function l2e(t){var e;let{buffer:r,nodeSet:n,maxBufferLength:i=Hq,reused:s=[],minRepeatType:a=n.types.length}=t,o=Array.isArray(r)?new ZI(r,r.length):r,d=n.types,m=0,y=0;function b(Q,Y,Z,J,re,he){let{id:le,start:Ze,end:Ee,size:qe}=o,et=y,at=m;if(qe<0)if(o.next(),qe==-1){let Ie=s[le];Z.push(Ie),J.push(Ze-Q);return}else if(qe==-3){m=le;return}else if(qe==-4){y=le;return}else throw new RangeError(`Unrecognized record size: ${qe}`);let Be=d[le],Me,Ge,Le=Ze-Q;if(Ee-Ze<=i&&(Ge=$(o.pos-Y,re))){let Ie=new Uint16Array(Ge.size-Ge.skip),Oe=o.pos-Ge.size,Re=Ie.length;for(;o.pos>Oe;)Re=R(Ge.start,Ie,Re);Me=new af(Ie,Ee-Ge.start,n),Le=Ge.start-Q}else{let Ie=o.pos-qe;o.next();let Oe=[],Re=[],nt=le>=a?le:-1,ze=0,rt=Ee;for(;o.pos>Ie;)nt>=0&&o.id==nt&&o.size>=0?(o.end<=rt-i&&(A(Oe,Re,Ze,ze,o.end,rt,nt,et,at),ze=Oe.length,rt=o.end),o.next()):he>2500?w(Ze,Ie,Oe,Re):b(Ze,Ie,Oe,Re,nt,he+1);if(nt>=0&&ze>0&&ze<Oe.length&&A(Oe,Re,Ze,ze,Ze,rt,nt,et,at),Oe.reverse(),Re.reverse(),nt>-1&&ze>0){let Xe=O(Be,at);Me=JI(Be,Oe,Re,0,Oe.length,0,Ee-Ze,Xe,Xe)}else Me=E(Be,Oe,Re,Ee-Ze,et-Ee,at)}Z.push(Me),J.push(Le)}function w(Q,Y,Z,J){let re=[],he=0,le=-1;for(;o.pos>Y;){let{id:Ze,start:Ee,end:qe,size:et}=o;if(et>4)o.next();else{if(le>-1&&Ee<le)break;le<0&&(le=qe-i),re.push(Ze,Ee,qe),he++,o.next()}}if(he){let Ze=new Uint16Array(he*4),Ee=re[re.length-2];for(let qe=re.length-3,et=0;qe>=0;qe-=3)Ze[et++]=re[qe],Ze[et++]=re[qe+1]-Ee,Ze[et++]=re[qe+2]-Ee,Ze[et++]=et;Z.push(new af(Ze,re[2]-Ee,n)),J.push(Ee-Q)}}function O(Q,Y){return(Z,J,re)=>{let he=0,le=Z.length-1,Ze,Ee;if(le>=0&&(Ze=Z[le])instanceof Vi){if(!le&&Ze.type==Q&&Ze.length==re)return Ze;(Ee=Ze.prop(en.lookAhead))&&(he=J[le]+Ze.length+Ee)}return E(Q,Z,J,re,he,Y)}}function A(Q,Y,Z,J,re,he,le,Ze,Ee){let qe=[],et=[];for(;Q.length>J;)qe.push(Q.pop()),et.push(Y.pop()+Z-re);Q.push(E(n.types[le],qe,et,he-re,Ze-he,Ee)),Y.push(re-Z)}function E(Q,Y,Z,J,re,he,le){if(he){let Ze=[en.contextHash,he];le=le?[Ze].concat(le):[Ze]}if(re>25){let Ze=[en.lookAhead,re];le=le?[Ze].concat(le):[Ze]}return new Vi(Q,Y,Z,J,le)}function $(Q,Y){let Z=o.fork(),J=0,re=0,he=0,le=Z.end-i,Ze={size:0,start:0,skip:0};e:for(let Ee=Z.pos-Q;Z.pos>Ee;){let qe=Z.size;if(Z.id==Y&&qe>=0){Ze.size=J,Ze.start=re,Ze.skip=he,he+=4,J+=4,Z.next();continue}let et=Z.pos-qe;if(qe<0||et<Ee||Z.start<le)break;let at=Z.id>=a?4:0,Be=Z.start;for(Z.next();Z.pos>et;){if(Z.size<0)if(Z.size==-3||Z.size==-4)at+=4;else break e;else Z.id>=a&&(at+=4);Z.next()}re=Be,J+=qe,he+=at}return(Y<0||J==Q)&&(Ze.size=J,Ze.start=re,Ze.skip=he),Ze.size>4?Ze:void 0}function R(Q,Y,Z){let{id:J,start:re,end:he,size:le}=o;if(o.next(),le>=0&&J<a){let Ze=Z;if(le>4){let Ee=o.pos-(le-4);for(;o.pos>Ee;)Z=R(Q,Y,Z)}Y[--Z]=Ze,Y[--Z]=he-Q,Y[--Z]=re-Q,Y[--Z]=J}else le==-3?m=J:le==-4&&(y=J);return Z}let F=[],L=[];for(;o.pos>0;)b(t.start||0,t.bufferStart||0,F,L,-1,0);let U=(e=t.length)!==null&&e!==void 0?e:F.length?L[0]+F[0].length:0;return new Vi(d[t.topID],F.reverse(),L.reverse(),U)}const pB=new WeakMap;function jS(t,e){if(!t.isAnonymous||e instanceof af||e.type!=t)return 1;let r=pB.get(e);if(r==null){r=1;for(let n of e.children){if(n.type!=t||!(n instanceof Vi)){r=1;break}r+=jS(t,n)}pB.set(e,r)}return r}function JI(t,e,r,n,i,s,a,o,d){let m=0;for(let A=n;A<i;A++)m+=jS(t,e[A]);let y=Math.ceil(m*1.5/8),b=[],w=[];function O(A,E,$,R,F){for(let L=$;L<R;){let U=L,Q=E[L],Y=jS(t,A[L]);for(L++;L<R;L++){let Z=jS(t,A[L]);if(Y+Z>=y)break;Y+=Z}if(L==U+1){if(Y>y){let Z=A[U];O(Z.children,Z.positions,0,Z.children.length,E[U]+F);continue}b.push(A[U])}else{let Z=E[L-1]+A[L-1].length-Q;b.push(JI(t,A,E,U,L,Q,Z,null,d))}w.push(Q+F-s)}}return O(e,r,n,i,0),(o||d)(b,w,a)}class c2e{constructor(){this.map=new WeakMap}setBuffer(e,r,n){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(r,n)}getBuffer(e,r){let n=this.map.get(e);return n&&n.get(r)}set(e,r){e instanceof iu?this.setBuffer(e.context.buffer,e.index,r):e instanceof ka&&this.map.set(e.tree,r)}get(e){return e instanceof iu?this.getBuffer(e.context.buffer,e.index):e instanceof ka?this.map.get(e.tree):void 0}cursorSet(e,r){e.buffer?this.setBuffer(e.buffer.buffer,e.index,r):this.map.set(e.tree,r)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Bp{constructor(e,r,n,i,s=!1,a=!1){this.from=e,this.to=r,this.tree=n,this.offset=i,this.open=(s?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,r=[],n=!1){let i=[new Bp(0,e.length,e,0,!1,n)];for(let s of r)s.to>e.length&&i.push(s);return i}static applyChanges(e,r,n=128){if(!r.length)return e;let i=[],s=1,a=e.length?e[0]:null;for(let o=0,d=0,m=0;;o++){let y=o<r.length?r[o]:null,b=y?y.fromA:1e9;if(b-d>=n)for(;a&&a.from<b;){let w=a;if(d>=w.from||b<=w.to||m){let O=Math.max(w.from,d)-m,A=Math.min(w.to,b)-m;w=O>=A?null:new Bp(O,A,w.tree,w.offset+m,o>0,!!y)}if(w&&i.push(w),a.to>b)break;a=s<e.length?e[s++]:null}if(!y)break;d=y.toA,m=y.toA-y.toB}return i}}class Zq{startParse(e,r,n){return typeof e=="string"&&(e=new u2e(e)),n=n?n.length?n.map(i=>new hP(i.from,i.to)):[new hP(0,0)]:[new hP(0,e.length)],this.createParse(e,r||[],n)}parse(e,r,n){let i=this.startParse(e,r,n);for(;;){let s=i.advance();if(s)return s}}}class u2e{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,r){return this.string.slice(e,r)}}new en({perNode:!0});let h2e=0;class Ol{constructor(e,r,n,i){this.name=e,this.set=r,this.base=n,this.modified=i,this.id=h2e++}toString(){let{name:e}=this;for(let r of this.modified)r.name&&(e=`${r.name}(${e})`);return e}static define(e,r){let n=typeof e=="string"?e:"?";if(e instanceof Ol&&(r=e),r!=null&&r.base)throw new Error("Can not derive from a modified tag");let i=new Ol(n,[],null,[]);if(i.set.push(i),r)for(let s of r.set)i.set.push(s);return i}static defineModifier(e){let r=new D2(e);return n=>n.modified.indexOf(r)>-1?n:D2.get(n.base||n,n.modified.concat(r).sort((i,s)=>i.id-s.id))}}let d2e=0;class D2{constructor(e){this.name=e,this.instances=[],this.id=d2e++}static get(e,r){if(!r.length)return e;let n=r[0].instances.find(o=>o.base==e&&f2e(r,o.modified));if(n)return n;let i=[],s=new Ol(e.name,i,e,r);for(let o of r)o.instances.push(s);let a=p2e(r);for(let o of e.set)if(!o.modified.length)for(let d of a)i.push(D2.get(o,d));return s}}function f2e(t,e){return t.length==e.length&&t.every((r,n)=>r==e[n])}function p2e(t){let e=[[]];for(let r=0;r<t.length;r++)for(let n=0,i=e.length;n<i;n++)e.push(e[n].concat(t[r]));return e.sort((r,n)=>n.length-r.length)}function hC(t){let e=Object.create(null);for(let r in t){let n=t[r];Array.isArray(n)||(n=[n]);for(let i of r.split(" "))if(i){let s=[],a=2,o=i;for(let b=0;;){if(o=="..."&&b>0&&b+3==i.length){a=1;break}let w=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!w)throw new RangeError("Invalid path: "+i);if(s.push(w[0]=="*"?"":w[0][0]=='"'?JSON.parse(w[0]):w[0]),b+=w[0].length,b==i.length)break;let O=i[b++];if(b==i.length&&O=="!"){a=0;break}if(O!="/")throw new RangeError("Invalid path: "+i);o=i.slice(b)}let d=s.length-1,m=s[d];if(!m)throw new RangeError("Invalid path: "+i);let y=new Bb(n,a,d>0?s.slice(0,d):null);e[m]=y.sort(e[m])}}return Yq.add(e)}const Yq=new en({combine(t,e){let r,n,i;for(;t||e;){if(!t||e&&t.depth>=e.depth?(i=e,e=e.next):(i=t,t=t.next),r&&r.mode==i.mode&&!i.context&&!r.context)continue;let s=new Bb(i.tags,i.mode,i.context);r?r.next=s:n=s,r=s}return n}});class Bb{constructor(e,r,n,i){this.tags=e,this.mode=r,this.context=n,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Bb.empty=new Bb([],2,null);function Jq(t,e){let r=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))r[s.tag.id]=s.class;else for(let a of s.tag)r[a.id]=s.class;let{scope:n,all:i=null}=e||{};return{style:s=>{let a=i;for(let o of s)for(let d of o.set){let m=r[d.id];if(m){a=a?a+" "+m:m;break}}return a},scope:n}}function m2e(t,e){let r=null;for(let n of t){let i=n.style(e);i&&(r=r?r+" "+i:i)}return r}function g2e(t,e,r,n=0,i=t.length){let s=new y2e(n,Array.isArray(e)?e:[e],r);s.highlightRange(t.cursor(),n,i,"",s.highlighters),s.flush(i)}class y2e{constructor(e,r,n){this.at=e,this.highlighters=r,this.span=n,this.class=""}startSpan(e,r){r!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=r)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,r,n,i,s){let{type:a,from:o,to:d}=e;if(o>=n||d<=r)return;a.isTop&&(s=this.highlighters.filter(O=>!O.scope||O.scope(a)));let m=i,y=x2e(e)||Bb.empty,b=m2e(s,y.tags);if(b&&(m&&(m+=" "),m+=b,y.mode==1&&(i+=(i?" ":"")+b)),this.startSpan(Math.max(r,o),m),y.opaque)return;let w=e.tree&&e.tree.prop(en.mounted);if(w&&w.overlay){let O=e.node.enter(w.overlay[0].from+o,1),A=this.highlighters.filter($=>!$.scope||$.scope(w.tree.type)),E=e.firstChild();for(let $=0,R=o;;$++){let F=$<w.overlay.length?w.overlay[$]:null,L=F?F.from+o:d,U=Math.max(r,R),Q=Math.min(n,L);if(U<Q&&E)for(;e.from<Q&&(this.highlightRange(e,U,Q,i,s),this.startSpan(Math.min(Q,e.to),m),!(e.to>=L||!e.nextSibling())););if(!F||L>n)break;R=F.to+o,R>r&&(this.highlightRange(O.cursor(),Math.max(r,F.from+o),Math.min(n,R),"",A),this.startSpan(Math.min(n,R),m))}E&&e.parent()}else if(e.firstChild()){w&&(i="");do if(!(e.to<=r)){if(e.from>=n)break;this.highlightRange(e,r,n,i,s),this.startSpan(Math.min(n,e.to),m)}while(e.nextSibling());e.parent()}}}function x2e(t){let e=t.type.prop(Yq);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Qt=Ol.define,Ew=Qt(),fd=Qt(),mB=Qt(fd),gB=Qt(fd),pd=Qt(),zw=Qt(pd),dP=Qt(pd),Nc=Qt(),Gf=Qt(Nc),Bc=Qt(),$c=Qt(),CE=Qt(),Nx=Qt(CE),Mw=Qt(),Ne={comment:Ew,lineComment:Qt(Ew),blockComment:Qt(Ew),docComment:Qt(Ew),name:fd,variableName:Qt(fd),typeName:mB,tagName:Qt(mB),propertyName:gB,attributeName:Qt(gB),className:Qt(fd),labelName:Qt(fd),namespace:Qt(fd),macroName:Qt(fd),literal:pd,string:zw,docString:Qt(zw),character:Qt(zw),attributeValue:Qt(zw),number:dP,integer:Qt(dP),float:Qt(dP),bool:Qt(pd),regexp:Qt(pd),escape:Qt(pd),color:Qt(pd),url:Qt(pd),keyword:Bc,self:Qt(Bc),null:Qt(Bc),atom:Qt(Bc),unit:Qt(Bc),modifier:Qt(Bc),operatorKeyword:Qt(Bc),controlKeyword:Qt(Bc),definitionKeyword:Qt(Bc),moduleKeyword:Qt(Bc),operator:$c,derefOperator:Qt($c),arithmeticOperator:Qt($c),logicOperator:Qt($c),bitwiseOperator:Qt($c),compareOperator:Qt($c),updateOperator:Qt($c),definitionOperator:Qt($c),typeOperator:Qt($c),controlOperator:Qt($c),punctuation:CE,separator:Qt(CE),bracket:Nx,angleBracket:Qt(Nx),squareBracket:Qt(Nx),paren:Qt(Nx),brace:Qt(Nx),content:Nc,heading:Gf,heading1:Qt(Gf),heading2:Qt(Gf),heading3:Qt(Gf),heading4:Qt(Gf),heading5:Qt(Gf),heading6:Qt(Gf),contentSeparator:Qt(Nc),list:Qt(Nc),quote:Qt(Nc),emphasis:Qt(Nc),strong:Qt(Nc),link:Qt(Nc),monospace:Qt(Nc),strikethrough:Qt(Nc),inserted:Qt(),deleted:Qt(),changed:Qt(),invalid:Qt(),meta:Mw,documentMeta:Qt(Mw),annotation:Qt(Mw),processingInstruction:Qt(Mw),definition:Ol.defineModifier("definition"),constant:Ol.defineModifier("constant"),function:Ol.defineModifier("function"),standard:Ol.defineModifier("standard"),local:Ol.defineModifier("local"),special:Ol.defineModifier("special")};for(let t in Ne){let e=Ne[t];e instanceof Ol&&(e.name=t)}Jq([{tag:Ne.link,class:"tok-link"},{tag:Ne.heading,class:"tok-heading"},{tag:Ne.emphasis,class:"tok-emphasis"},{tag:Ne.strong,class:"tok-strong"},{tag:Ne.keyword,class:"tok-keyword"},{tag:Ne.atom,class:"tok-atom"},{tag:Ne.bool,class:"tok-bool"},{tag:Ne.url,class:"tok-url"},{tag:Ne.labelName,class:"tok-labelName"},{tag:Ne.inserted,class:"tok-inserted"},{tag:Ne.deleted,class:"tok-deleted"},{tag:Ne.literal,class:"tok-literal"},{tag:Ne.string,class:"tok-string"},{tag:Ne.number,class:"tok-number"},{tag:[Ne.regexp,Ne.escape,Ne.special(Ne.string)],class:"tok-string2"},{tag:Ne.variableName,class:"tok-variableName"},{tag:Ne.local(Ne.variableName),class:"tok-variableName tok-local"},{tag:Ne.definition(Ne.variableName),class:"tok-variableName tok-definition"},{tag:Ne.special(Ne.variableName),class:"tok-variableName2"},{tag:Ne.definition(Ne.propertyName),class:"tok-propertyName tok-definition"},{tag:Ne.typeName,class:"tok-typeName"},{tag:Ne.namespace,class:"tok-namespace"},{tag:Ne.className,class:"tok-className"},{tag:Ne.macroName,class:"tok-macroName"},{tag:Ne.propertyName,class:"tok-propertyName"},{tag:Ne.operator,class:"tok-operator"},{tag:Ne.comment,class:"tok-comment"},{tag:Ne.meta,class:"tok-meta"},{tag:Ne.invalid,class:"tok-invalid"},{tag:Ne.punctuation,class:"tok-punctuation"}]);var fP;const Wg=new en;function v2e(t){return ur.define({combine:t?e=>e.concat(t):void 0})}const b2e=new en;class cc{constructor(e,r,n=[],i=""){this.data=e,this.name=i,pn.prototype.hasOwnProperty("tree")||Object.defineProperty(pn.prototype,"tree",{get(){return Ui(this)}}),this.parser=r,this.extension=[lf.of(this),pn.languageData.of((s,a,o)=>{let d=yB(s,a,o),m=d.type.prop(Wg);if(!m)return[];let y=s.facet(m),b=d.type.prop(b2e);if(b){let w=d.resolve(a-d.from,o);for(let O of b)if(O.test(w,s)){let A=s.facet(O.facet);return O.type=="replace"?A:A.concat(y)}}return y})].concat(n)}isActiveAt(e,r,n=-1){return yB(e,r,n).type.prop(Wg)==this.data}findRegions(e){let r=e.facet(lf);if((r==null?void 0:r.data)==this.data)return[{from:0,to:e.doc.length}];if(!r||!r.allowsNesting)return[];let n=[],i=(s,a)=>{if(s.prop(Wg)==this.data){n.push({from:a,to:a+s.length});return}let o=s.prop(en.mounted);if(o){if(o.tree.prop(Wg)==this.data){if(o.overlay)for(let d of o.overlay)n.push({from:d.from+a,to:d.to+a});else n.push({from:a,to:a+s.length});return}else if(o.overlay){let d=n.length;if(i(o.tree,o.overlay[0].from+a),n.length>d)return}}for(let d=0;d<s.children.length;d++){let m=s.children[d];m instanceof Vi&&i(m,s.positions[d]+a)}};return i(Ui(e),0),n}get allowsNesting(){return!0}}cc.setState=Wr.define();function yB(t,e,r){let n=t.facet(lf),i=Ui(t).topNode;if(!n||n.allowsNesting)for(let s=i;s;s=s.enter(e,r,Si.ExcludeBuffers|Si.EnterBracketed))s.type.isTop&&(i=s);return i}class r0 extends cc{constructor(e,r,n){super(e,r,[],n),this.parser=r}static define(e){let r=v2e(e.languageData);return new r0(r,e.parser.configure({props:[Wg.add(n=>n.isTop?r:void 0)]}),e.name)}configure(e,r){return new r0(this.data,this.parser.configure(e),r||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Ui(t){let e=t.field(cc.state,!1);return e?e.tree:Vi.empty}class _2e{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,r){let n=this.cursorPos-this.string.length;return e<n||r>=this.cursorPos?this.doc.sliceString(e,r):this.string.slice(e-n,r-n)}}let Vx=null;class R2{constructor(e,r,n=[],i,s,a,o,d){this.parser=e,this.state=r,this.fragments=n,this.tree=i,this.treeLen=s,this.viewport=a,this.skipped=o,this.scheduleOn=d,this.parse=null,this.tempSkipped=[]}static create(e,r,n){return new R2(e,r,[],Vi.empty,0,n,[],null)}startParse(){return this.parser.startParse(new _2e(this.state.doc),this.fragments)}work(e,r){return r!=null&&r>=this.state.doc.length&&(r=void 0),this.tree!=Vi.empty&&this.isDone(r??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),r!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>r)&&r<this.state.doc.length&&this.parse.stopAt(r);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Bp.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(r??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,r;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(r=this.parse.advance()););}),this.treeLen=e,this.tree=r,this.fragments=this.withoutTempSkipped(Bp.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let r=Vx;Vx=this;try{return e()}finally{Vx=r}}withoutTempSkipped(e){for(let r;r=this.tempSkipped.pop();)e=xB(e,r.from,r.to);return e}changes(e,r){let{fragments:n,tree:i,treeLen:s,viewport:a,skipped:o}=this;if(this.takeTree(),!e.empty){let d=[];if(e.iterChangedRanges((m,y,b,w)=>d.push({fromA:m,toA:y,fromB:b,toB:w})),n=Bp.applyChanges(n,d),i=Vi.empty,s=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){o=[];for(let m of this.skipped){let y=e.mapPos(m.from,1),b=e.mapPos(m.to,-1);y<b&&o.push({from:y,to:b})}}}return new R2(this.parser,r,n,i,s,a,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let r=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:i,to:s}=this.skipped[n];i<e.to&&s>e.from&&(this.fragments=xB(this.fragments,i,s),this.skipped.splice(n--,1))}return this.skipped.length>=r?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,r){this.skipped.push({from:e,to:r})}static getSkippingParser(e){return new class extends Zq{createParse(r,n,i){let s=i[0].from,a=i[i.length-1].to;return{parsedPos:s,advance(){let d=Vx;if(d){for(let m of i)d.tempSkipped.push(m);e&&(d.scheduleOn=d.scheduleOn?Promise.all([d.scheduleOn,e]):e)}return this.parsedPos=a,new Vi(Oa.none,[],[],a-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let r=this.fragments;return this.treeLen>=e&&r.length&&r[0].from==0&&r[0].to>=e}static get(){return Vx}}function xB(t,e,r){return Bp.applyChanges(t,[{fromA:e,toA:r,fromB:e,toB:r}])}class n0{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let r=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),r.viewport.to);return r.work(20,n)||r.takeTree(),new n0(r)}static init(e){let r=Math.min(3e3,e.doc.length),n=R2.create(e.facet(lf).parser,e,{from:0,to:r});return n.work(20,r)||n.takeTree(),new n0(n)}}cc.state=so.define({create:n0.init,update(t,e){for(let r of e.effects)if(r.is(cc.setState))return r.value;return e.startState.facet(lf)!=e.state.facet(lf)?n0.init(e.state):t.apply(e)}});let eQ=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(eQ=t=>{let e=-1,r=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(r):cancelIdleCallback(e)});const pP=typeof navigator<"u"&&(!((fP=navigator.scheduling)===null||fP===void 0)&&fP.isInputPending)?()=>navigator.scheduling.isInputPending():null,w2e=Wi.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let r=this.view.state.field(cc.state).context;(r.updateViewport(e.view.viewport)||this.view.viewport.to>r.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(r)}scheduleWork(){if(this.working)return;let{state:e}=this.view,r=e.field(cc.state);(r.tree!=r.context.tree||!r.context.isDone(e.doc.length))&&(this.working=eQ(this.work))}work(e){this.working=null;let r=Date.now();if(this.chunkEnd<r&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=r+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,s=n.field(cc.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!pP?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&n.doc.length>i+1e3,d=s.context.work(()=>pP&&pP()||Date.now()>a,i+(o?0:1e5));this.chunkBudget-=Date.now()-r,(d||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:cc.setState.of(new n0(s.context))})),this.chunkBudget>0&&!(d&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(r=>ya(this.view.state,r)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),lf=ur.define({combine(t){return t.length?t[0]:null},enables:t=>[cc.state,w2e,Gt.contentAttributes.compute([t],e=>{let r=e.facet(t);return r&&r.name?{"data-language":r.name}:{}})]});class e5{constructor(e,r=[]){this.language=e,this.support=r,this.extension=[e,r]}}const S2e=ur.define(),dC=ur.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(r=>r!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function L2(t){let e=t.facet(dC);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function $b(t,e){let r="",n=t.tabSize,i=t.facet(dC)[0];if(i=="	"){for(;e>=n;)r+="	",e-=n;i=" "}for(let s=0;s<e;s++)r+=i;return r}function t5(t,e){t instanceof pn&&(t=new fC(t));for(let n of t.state.facet(S2e)){let i=n(t,e);if(i!==void 0)return i}let r=Ui(t.state);return r.length>=e?k2e(t,r,e):null}class fC{constructor(e,r={}){this.state=e,this.options=r,this.unit=L2(e)}lineAt(e,r=1){let n=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=n.from&&i<=n.to?s&&i==e?{text:"",from:e}:(r<0?i<e:i<=e)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(e,r=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(e,r);return n.slice(e-i,Math.min(n.length,e+100-i))}column(e,r=1){let{text:n,from:i}=this.lineAt(e,r),s=this.countColumn(n,e-i),a=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return a>-1&&(s+=a-this.countColumn(n,n.search(/\S|$/))),s}countColumn(e,r=e.length){return y0(e,this.state.tabSize,r)}lineIndent(e,r=1){let{text:n,from:i}=this.lineAt(e,r),s=this.options.overrideIndentation;if(s){let a=s(i);if(a>-1)return a}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const pC=new en;function k2e(t,e,r){let n=e.resolveStack(r),i=e.resolveInner(r,-1).resolve(r,0).enterUnfinishedNodesBefore(r);if(i!=n.node){let s=[];for(let a=i;a&&!(a.from<n.node.from||a.to>n.node.to||a.from==n.node.from&&a.type==n.node.type);a=a.parent)s.push(a);for(let a=s.length-1;a>=0;a--)n={node:s[a],next:n}}return tQ(n,t,r)}function tQ(t,e,r){for(let n=t;n;n=n.next){let i=T2e(n.node);if(i)return i(r5.create(e,r,n))}return 0}function C2e(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function T2e(t){let e=t.type.prop(pC);if(e)return e;let r=t.firstChild,n;if(r&&(n=r.type.prop(en.closedBy))){let i=t.lastChild,s=i&&n.indexOf(i.name)>-1;return a=>A2e(a,!0,1,void 0,s&&!C2e(a)?i.from:void 0)}return t.parent==null?O2e:null}function O2e(){return 0}class r5 extends fC{constructor(e,r,n){super(e.state,e.options),this.base=e,this.pos=r,this.context=n}get node(){return this.context.node}static create(e,r,n){return new r5(e,r,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let r=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(r.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(P2e(n,e))break;r=this.state.doc.lineAt(n.from)}return this.lineIndent(r.from)}continue(){return tQ(this.context.next,this.base,this.pos)}}function P2e(t,e){for(let r=e;r;r=r.parent)if(t==r)return!0;return!1}function j2e(t){let e=t.node,r=e.childAfter(e.from),n=e.lastChild;if(!r)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(r.from),a=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let o=r.to;;){let d=e.childAfter(o);if(!d||d==n)return null;if(!d.type.isSkipped){if(d.from>=a)return null;let m=/^ */.exec(s.text.slice(r.to-s.from))[0].length;return{from:r.from,to:r.to+m}}o=d.to}}function A2e(t,e,r,n,i){let s=t.textAfter,a=s.match(/^\s*/)[0].length,o=n&&s.slice(a,a+n.length)==n||i==t.pos+a,d=j2e(t);return d?o?t.column(d.from):t.column(d.to):t.baseIndent+(o?0:t.unit*r)}function rQ({except:t,units:e=1}={}){return r=>{let n=t&&t.test(r.textAfter);return r.baseIndent+(n?0:e*r.unit)}}const E2e=200;function z2e(){return pn.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let r=t.newDoc,{head:n}=t.newSelection.main,i=r.lineAt(n);if(n>i.from+E2e)return t;let s=r.sliceString(i.from,n);if(!e.some(m=>m.test(s)))return t;let{state:a}=t,o=-1,d=[];for(let{head:m}of a.selection.ranges){let y=a.doc.lineAt(m);if(y.from==o)continue;o=y.from;let b=t5(a,y.from);if(b==null)continue;let w=/^\s*/.exec(y.text)[0],O=$b(a,b);w!=O&&d.push({from:y.from,to:y.from+w.length,insert:O})}return d.length?[t,{changes:d,sequential:!0}]:t})}const M2e=ur.define(),mC=new en;function I2e(t){let e=t.firstChild,r=t.lastChild;return e&&e.to<r.from?{from:e.to,to:r.type.isError?t.to:r.from}:null}function D2e(t,e,r){let n=Ui(t);if(n.length<r)return null;let i=n.resolveStack(r,1),s=null;for(let a=i;a;a=a.next){let o=a.node;if(o.to<=r||o.from>r)continue;if(s&&o.from<e)break;let d=o.type.prop(mC);if(d&&(o.to<n.length-50||n.length==t.doc.length||!R2e(o))){let m=d(o,t);m&&m.from<=r&&m.from>=e&&m.to>r&&(s=m)}}return s}function R2e(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function F2(t,e,r){for(let n of t.facet(M2e)){let i=n(t,e,r);if(i)return i}return D2e(t,e,r)}function nQ(t,e){let r=e.mapPos(t.from,1),n=e.mapPos(t.to,-1);return r>=n?void 0:{from:r,to:n}}const gC=Wr.define({map:nQ}),I1=Wr.define({map:nQ});function iQ(t){let e=[];for(let{head:r}of t.state.selection.ranges)e.some(n=>n.from<=r&&n.to>=r)||e.push(t.lineBlockAt(r));return e}const sm=so.define({create(){return Or.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((r,n)=>t=vB(t,r,n)),t=t.map(e.changes);for(let r of e.effects)if(r.is(gC)&&!L2e(t,r.value.from,r.value.to)){let{preparePlaceholder:n}=e.state.facet(aQ),i=n?Or.replace({widget:new U2e(n(e.state,r.value))}):bB;t=t.update({add:[i.range(r.value.from,r.value.to)]})}else r.is(I1)&&(t=t.update({filter:(n,i)=>r.value.from!=n||r.value.to!=i,filterFrom:r.value.from,filterTo:r.value.to}));return e.selection&&(t=vB(t,e.selection.main.head)),t},provide:t=>Gt.decorations.from(t),toJSON(t,e){let r=[];return t.between(0,e.doc.length,(n,i)=>{r.push(n,i)}),r},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let r=0;r<t.length;){let n=t[r++],i=t[r++];if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(bB.range(n,i))}return Or.set(e,!0)}});function vB(t,e,r=e){let n=!1;return t.between(e,r,(i,s)=>{i<r&&s>e&&(n=!0)}),n?t.update({filterFrom:e,filterTo:r,filter:(i,s)=>i>=r||s<=e}):t}function B2(t,e,r){var n;let i=null;return(n=t.field(sm,!1))===null||n===void 0||n.between(e,r,(s,a)=>{(!i||i.from>s)&&(i={from:s,to:a})}),i}function L2e(t,e,r){let n=!1;return t.between(e,e,(i,s)=>{i==e&&s==r&&(n=!0)}),n}function sQ(t,e){return t.field(sm,!1)?e:e.concat(Wr.appendConfig.of(lQ()))}const F2e=t=>{for(let e of iQ(t)){let r=F2(t.state,e.from,e.to);if(r)return t.dispatch({effects:sQ(t.state,[gC.of(r),oQ(t,r)])}),!0}return!1},B2e=t=>{if(!t.state.field(sm,!1))return!1;let e=[];for(let r of iQ(t)){let n=B2(t.state,r.from,r.to);n&&e.push(I1.of(n),oQ(t,n,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function oQ(t,e,r=!0){let n=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return Gt.announce.of(`${t.state.phrase(r?"Folded lines":"Unfolded lines")} ${n} ${t.state.phrase("to")} ${i}.`)}const $2e=t=>{let{state:e}=t,r=[];for(let n=0;n<e.doc.length;){let i=t.lineBlockAt(n),s=F2(e,i.from,i.to);s&&r.push(gC.of(s)),n=(s?t.lineBlockAt(s.to):i).to+1}return r.length&&t.dispatch({effects:sQ(t.state,r)}),!!r.length},N2e=t=>{let e=t.state.field(sm,!1);if(!e||!e.size)return!1;let r=[];return e.between(0,t.state.doc.length,(n,i)=>{r.push(I1.of({from:n,to:i}))}),t.dispatch({effects:r}),!0},V2e=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:F2e},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:B2e},{key:"Ctrl-Alt-[",run:$2e},{key:"Ctrl-Alt-]",run:N2e}],W2e={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},aQ=ur.define({combine(t){return bu(t,W2e)}});function lQ(t){return[sm,H2e]}function cQ(t,e){let{state:r}=t,n=r.facet(aQ),i=a=>{let o=t.lineBlockAt(t.posAtDOM(a.target)),d=B2(t.state,o.from,o.to);d&&t.dispatch({effects:I1.of(d)}),a.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=n.placeholderText,s.setAttribute("aria-label",r.phrase("folded code")),s.title=r.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const bB=Or.replace({widget:new class extends _u{toDOM(t){return cQ(t,null)}}});class U2e extends _u{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return cQ(e,this.value)}}const q2e={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class mP extends _h{constructor(e,r){super(),this.config=e,this.open=r}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let r=document.createElement("span");return r.textContent=this.open?this.config.openText:this.config.closedText,r.title=e.state.phrase(this.open?"Fold line":"Unfold line"),r}}function Q2e(t={}){let e={...q2e,...t},r=new mP(e,!0),n=new mP(e,!1),i=Wi.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(lf)!=a.state.facet(lf)||a.startState.field(sm,!1)!=a.state.field(sm,!1)||Ui(a.startState)!=Ui(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let o=new vh;for(let d of a.viewportLineBlocks){let m=B2(a.state,d.from,d.to)?n:F2(a.state,d.from,d.to)?r:null;m&&o.add(d.from,d.from,m)}return o.finish()}}),{domEventHandlers:s}=e;return[i,QSe({class:"cm-foldGutter",markers(a){var o;return((o=a.plugin(i))===null||o===void 0?void 0:o.markers)||rn.empty},initialSpacer(){return new mP(e,!1)},domEventHandlers:{...s,click:(a,o,d)=>{if(s.click&&s.click(a,o,d))return!0;let m=B2(a.state,o.from,o.to);if(m)return a.dispatch({effects:I1.of(m)}),!0;let y=F2(a.state,o.from,o.to);return y?(a.dispatch({effects:gC.of(y)}),!0):!1}}}),lQ()]}const H2e=Gt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class D1{constructor(e,r){this.specs=e;let n;function i(o){let d=nf.newName();return(n||(n=Object.create(null)))["."+d]=o,d}const s=typeof r.all=="string"?r.all:r.all?i(r.all):void 0,a=r.scope;this.scope=a instanceof cc?o=>o.prop(Wg)==a.data:a?o=>o==a:void 0,this.style=Jq(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=n?new nf(n):null,this.themeType=r.themeType}static define(e,r){return new D1(e,r||{})}}const TE=ur.define(),uQ=ur.define({combine(t){return t.length?[t[0]]:null}});function gP(t){let e=t.facet(TE);return e.length?e:t.facet(uQ)}function hQ(t,e){let r=[X2e],n;return t instanceof D1&&(t.module&&r.push(Gt.styleModule.of(t.module)),n=t.themeType),e!=null&&e.fallback?r.push(uQ.of(t)):n?r.push(TE.computeN([Gt.darkTheme],i=>i.facet(Gt.darkTheme)==(n=="dark")?[t]:[])):r.push(TE.of(t)),r}class G2e{constructor(e){this.markCache=Object.create(null),this.tree=Ui(e.state),this.decorations=this.buildDeco(e,gP(e.state)),this.decoratedTo=e.viewport.to}update(e){let r=Ui(e.state),n=gP(e.state),i=n!=gP(e.startState),{viewport:s}=e.view,a=e.changes.mapPos(this.decoratedTo,1);r.length<s.to&&!i&&r.type==this.tree.type&&a>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(r!=this.tree||e.viewportChanged||i)&&(this.tree=r,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=s.to)}buildDeco(e,r){if(!r||!this.tree.length)return Or.none;let n=new vh;for(let{from:i,to:s}of e.visibleRanges)g2e(this.tree,r,(a,o,d)=>{n.add(a,o,this.markCache[d]||(this.markCache[d]=Or.mark({class:d})))},i,s);return n.finish()}}const X2e=hm.high(Wi.fromClass(G2e,{decorations:t=>t.decorations})),K2e=D1.define([{tag:Ne.meta,color:"#404740"},{tag:Ne.link,textDecoration:"underline"},{tag:Ne.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ne.emphasis,fontStyle:"italic"},{tag:Ne.strong,fontWeight:"bold"},{tag:Ne.strikethrough,textDecoration:"line-through"},{tag:Ne.keyword,color:"#708"},{tag:[Ne.atom,Ne.bool,Ne.url,Ne.contentSeparator,Ne.labelName],color:"#219"},{tag:[Ne.literal,Ne.inserted],color:"#164"},{tag:[Ne.string,Ne.deleted],color:"#a11"},{tag:[Ne.regexp,Ne.escape,Ne.special(Ne.string)],color:"#e40"},{tag:Ne.definition(Ne.variableName),color:"#00f"},{tag:Ne.local(Ne.variableName),color:"#30a"},{tag:[Ne.typeName,Ne.namespace],color:"#085"},{tag:Ne.className,color:"#167"},{tag:[Ne.special(Ne.variableName),Ne.macroName],color:"#256"},{tag:Ne.definition(Ne.propertyName),color:"#00c"},{tag:Ne.comment,color:"#940"},{tag:Ne.invalid,color:"#f00"}]),Z2e=Gt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),dQ=1e4,fQ="()[]{}",pQ=ur.define({combine(t){return bu(t,{afterCursor:!0,brackets:fQ,maxScanDistance:dQ,renderMatch:eke})}}),Y2e=Or.mark({class:"cm-matchingBracket"}),J2e=Or.mark({class:"cm-nonmatchingBracket"});function eke(t){let e=[],r=t.matched?Y2e:J2e;return e.push(r.range(t.start.from,t.start.to)),t.end&&e.push(r.range(t.end.from,t.end.to)),e}const tke=so.define({create(){return Or.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let r=[],n=e.state.facet(pQ);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=su(e.state,i.head,-1,n)||i.head>0&&su(e.state,i.head-1,1,n)||n.afterCursor&&(su(e.state,i.head,1,n)||i.head<e.state.doc.length&&su(e.state,i.head+1,-1,n));s&&(r=r.concat(n.renderMatch(s,e.state)))}return Or.set(r,!0)},provide:t=>Gt.decorations.from(t)}),rke=[tke,Z2e];function nke(t={}){return[pQ.of(t),rke]}const mQ=new en;function OE(t,e,r){let n=t.prop(e<0?en.openedBy:en.closedBy);if(n)return n;if(t.name.length==1){let i=r.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[r[i+e]]}return null}function PE(t){let e=t.type.prop(mQ);return e?e(t.node):t}function su(t,e,r,n={}){let i=n.maxScanDistance||dQ,s=n.brackets||fQ,a=Ui(t),o=a.resolveInner(e,r);for(let d=o;d;d=d.parent){let m=OE(d.type,r,s);if(m&&d.from<d.to){let y=PE(d);if(y&&(r>0?e>=y.from&&e<y.to:e>y.from&&e<=y.to))return ike(t,e,r,d,y,m,s)}}return ske(t,e,r,a,o.type,i,s)}function ike(t,e,r,n,i,s,a){let o=n.parent,d={from:i.from,to:i.to},m=0,y=o==null?void 0:o.cursor();if(y&&(r<0?y.childBefore(n.from):y.childAfter(n.to)))do if(r<0?y.to<=n.from:y.from>=n.to){if(m==0&&s.indexOf(y.type.name)>-1&&y.from<y.to){let b=PE(y);return{start:d,end:b?{from:b.from,to:b.to}:void 0,matched:!0}}else if(OE(y.type,r,a))m++;else if(OE(y.type,-r,a)){if(m==0){let b=PE(y);return{start:d,end:b&&b.from<b.to?{from:b.from,to:b.to}:void 0,matched:!1}}m--}}while(r<0?y.prevSibling():y.nextSibling());return{start:d,matched:!1}}function ske(t,e,r,n,i,s,a){let o=r<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),d=a.indexOf(o);if(d<0||d%2==0!=r>0)return null;let m={from:r<0?e-1:e,to:r>0?e+1:e},y=t.doc.iterRange(e,r>0?t.doc.length:0),b=0;for(let w=0;!y.next().done&&w<=s;){let O=y.value;r<0&&(w+=O.length);let A=e+w*r;for(let E=r>0?0:O.length-1,$=r>0?O.length:-1;E!=$;E+=r){let R=a.indexOf(O[E]);if(!(R<0||n.resolveInner(A+E,1).type!=i))if(R%2==0==r>0)b++;else{if(b==1)return{start:m,end:{from:A+E,to:A+E+1},matched:R>>1==d>>1};b--}}r>0&&(w+=O.length)}return y.done?{start:m,matched:!1}:null}const oke=Object.create(null),_B=[Oa.none],wB=[],SB=Object.create(null),ake=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])ake[t]=lke(oke,e);function yP(t,e){wB.indexOf(t)>-1||(wB.push(t),console.warn(e))}function lke(t,e){let r=[];for(let o of e.split(" ")){let d=[];for(let m of o.split(".")){let y=t[m]||Ne[m];y?typeof y=="function"?d.length?d=d.map(y):yP(m,`Modifier ${m} used at start of tag`):d.length?yP(m,`Tag ${m} used as modifier`):d=Array.isArray(y)?y:[y]:yP(m,`Unknown highlighting tag ${m}`)}for(let m of d)r.push(m)}if(!r.length)return 0;let n=e.replace(/ /g,"_"),i=n+" "+r.map(o=>o.id),s=SB[i];if(s)return s.id;let a=SB[i]=Oa.define({id:_B.length,name:n,props:[hC({[n]:r})]});return _B.push(a),a.id}ei.RTL,ei.LTR;const cke=t=>{let{state:e}=t,r=e.doc.lineAt(e.selection.main.from),n=i5(t.state,r.from);return n.line?uke(t):n.block?dke(t):!1};function n5(t,e){return({state:r,dispatch:n})=>{if(r.readOnly)return!1;let i=t(e,r);return i?(n(r.update(i)),!0):!1}}const uke=n5(mke,0),hke=n5(gQ,0),dke=n5((t,e)=>gQ(t,e,pke(e)),0);function i5(t,e){let r=t.languageDataAt("commentTokens",e,1);return r.length?r[0]:{}}const Wx=50;function fke(t,{open:e,close:r},n,i){let s=t.sliceDoc(n-Wx,n),a=t.sliceDoc(i,i+Wx),o=/\s*$/.exec(s)[0].length,d=/^\s*/.exec(a)[0].length,m=s.length-o;if(s.slice(m-e.length,m)==e&&a.slice(d,d+r.length)==r)return{open:{pos:n-o,margin:o&&1},close:{pos:i+d,margin:d&&1}};let y,b;i-n<=2*Wx?y=b=t.sliceDoc(n,i):(y=t.sliceDoc(n,n+Wx),b=t.sliceDoc(i-Wx,i));let w=/^\s*/.exec(y)[0].length,O=/\s*$/.exec(b)[0].length,A=b.length-O-r.length;return y.slice(w,w+e.length)==e&&b.slice(A,A+r.length)==r?{open:{pos:n+w+e.length,margin:/\s/.test(y.charAt(w+e.length))?1:0},close:{pos:i-O-r.length,margin:/\s/.test(b.charAt(A-1))?1:0}}:null}function pke(t){let e=[];for(let r of t.selection.ranges){let n=t.doc.lineAt(r.from),i=r.to<=n.to?n:t.doc.lineAt(r.to);i.from>n.from&&i.from==r.to&&(i=r.to==n.to+1?n:t.doc.lineAt(r.to-1));let s=e.length-1;s>=0&&e[s].to>n.from?e[s].to=i.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:i.to})}return e}function gQ(t,e,r=e.selection.ranges){let n=r.map(s=>i5(e,s.from).block);if(!n.every(s=>s))return null;let i=r.map((s,a)=>fke(e,n[a],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(r.map((s,a)=>i[a]?[]:[{from:s.from,insert:n[a].open+" "},{from:s.to,insert:" "+n[a].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let a=0,o;a<i.length;a++)if(o=i[a]){let d=n[a],{open:m,close:y}=o;s.push({from:m.pos-d.open.length,to:m.pos+m.margin},{from:y.pos-y.margin,to:y.pos+d.close.length})}return{changes:s}}return null}function mke(t,e,r=e.selection.ranges){let n=[],i=-1;e:for(let{from:s,to:a}of r){let o=n.length,d=1e9,m;for(let y=s;y<=a;){let b=e.doc.lineAt(y);if(m==null&&(m=i5(e,b.from).line,!m))continue e;if(b.from>i&&(s==a||a>b.from)){i=b.from;let w=/^\s*/.exec(b.text)[0].length,O=w==b.length,A=b.text.slice(w,w+m.length)==m?w:-1;w<b.text.length&&w<d&&(d=w),n.push({line:b,comment:A,token:m,indent:w,empty:O,single:!1})}y=b.to+1}if(d<1e9)for(let y=o;y<n.length;y++)n[y].indent<n[y].line.text.length&&(n[y].indent=d);n.length==o+1&&(n[o].single=!0)}if(t!=2&&n.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:d,indent:m,empty:y,single:b}of n)(b||!y)&&s.push({from:o.from+m,insert:d+" "});let a=e.changes(s);return{changes:a,selection:e.selection.map(a,1)}}else if(t!=1&&n.some(s=>s.comment>=0)){let s=[];for(let{line:a,comment:o,token:d}of n)if(o>=0){let m=a.from+o,y=m+d.length;a.text[y-a.from]==" "&&y++,s.push({from:m,to:y})}return{changes:s}}return null}const jE=vu.define(),gke=vu.define(),yke=ur.define(),yQ=ur.define({combine(t){return bu(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,r)=>r},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,r)=>(n,i)=>e(n,i)||r(n,i)})}}),xQ=so.define({create(){return ou.empty},update(t,e){let r=e.state.facet(yQ),n=e.annotation(jE);if(n){let d=xa.fromTransaction(e,n.selection),m=n.side,y=m==0?t.undone:t.done;return d?y=$2(y,y.length,r.minDepth,d):y=_Q(y,e.startState.selection),new ou(m==0?n.rest:y,m==0?y:n.rest)}let i=e.annotation(gke);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(ms.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=xa.fromTransaction(e),a=e.annotation(ms.time),o=e.annotation(ms.userEvent);return s?t=t.addChanges(s,a,o,r,e):e.selection&&(t=t.addSelection(e.startState.selection,a,o,r.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new ou(t.done.map(xa.fromJSON),t.undone.map(xa.fromJSON))}});function xke(t={}){return[xQ,yQ.of(t),Gt.domEventHandlers({beforeinput(e,r){let n=e.inputType=="historyUndo"?vQ:e.inputType=="historyRedo"?AE:null;return n?(e.preventDefault(),n(r)):!1}})]}function yC(t,e){return function({state:r,dispatch:n}){if(!e&&r.readOnly)return!1;let i=r.field(xQ,!1);if(!i)return!1;let s=i.pop(t,r,e);return s?(n(s),!0):!1}}const vQ=yC(0,!1),AE=yC(1,!1),vke=yC(0,!0),bke=yC(1,!0);class xa{constructor(e,r,n,i,s){this.changes=e,this.effects=r,this.mapped=n,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new xa(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,r,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(r=this.mapped)===null||r===void 0?void 0:r.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new xa(e.changes&&us.fromJSON(e.changes),[],e.mapped&&fu.fromJSON(e.mapped),e.startSelection&&pt.fromJSON(e.startSelection),e.selectionsAfter.map(pt.fromJSON))}static fromTransaction(e,r){let n=El;for(let i of e.startState.facet(yke)){let s=i(e);s.length&&(n=n.concat(s))}return!n.length&&e.changes.empty?null:new xa(e.changes.invert(e.startState.doc),n,void 0,r||e.startState.selection,El)}static selection(e){return new xa(void 0,El,void 0,void 0,e)}}function $2(t,e,r,n){let i=e+1>r+20?e-r-1:0,s=t.slice(i,e);return s.push(n),s}function _ke(t,e){let r=[],n=!1;return t.iterChangedRanges((i,s)=>r.push(i,s)),e.iterChangedRanges((i,s,a,o)=>{for(let d=0;d<r.length;){let m=r[d++],y=r[d++];o>=m&&a<=y&&(n=!0)}}),n}function wke(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((r,n)=>r.empty!=e.ranges[n].empty).length===0}function bQ(t,e){return t.length?e.length?t.concat(e):t:e}const El=[],Ske=200;function _Q(t,e){if(t.length){let r=t[t.length-1],n=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-Ske));return n.length&&n[n.length-1].eq(e)?t:(n.push(e),$2(t,t.length-1,1e9,r.setSelAfter(n)))}else return[xa.selection([e])]}function kke(t){let e=t[t.length-1],r=t.slice();return r[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),r}function xP(t,e){if(!t.length)return t;let r=t.length,n=El;for(;r;){let i=Cke(t[r-1],e,n);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,r);return s[r-1]=i,s}else e=i.mapped,r--,n=i.selectionsAfter}return n.length?[xa.selection(n)]:El}function Cke(t,e,r){let n=bQ(t.selectionsAfter.length?t.selectionsAfter.map(o=>o.map(e)):El,r);if(!t.changes)return xa.selection(n);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),a=t.mapped?t.mapped.composeDesc(s):s;return new xa(i,Wr.mapEffects(t.effects,e),a,t.startSelection.map(s),n)}const Tke=/^(input\.type|delete)($|\.)/;class ou{constructor(e,r,n=0,i=void 0){this.done=e,this.undone=r,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new ou(this.done,this.undone):this}addChanges(e,r,n,i,s){let a=this.done,o=a[a.length-1];return o&&o.changes&&!o.changes.empty&&e.changes&&(!n||Tke.test(n))&&(!o.selectionsAfter.length&&r-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,_ke(o.changes,e.changes))||n=="input.type.compose")?a=$2(a,a.length-1,i.minDepth,new xa(e.changes.compose(o.changes),bQ(Wr.mapEffects(e.effects,o.changes),o.effects),o.mapped,o.startSelection,El)):a=$2(a,a.length,i.minDepth,e),new ou(a,El,r,n)}addSelection(e,r,n,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:El;return s.length>0&&r-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&wke(s[s.length-1],e)?this:new ou(_Q(this.done,e),this.undone,r,n)}addMapping(e){return new ou(xP(this.done,e),xP(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,r,n){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],a=s.selectionsAfter[0]||(s.startSelection?s.startSelection.map(s.changes.invertedDesc,1):r.selection);if(n&&s.selectionsAfter.length)return r.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:jE.of({side:e,rest:kke(i),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=i.length==1?El:i.slice(0,i.length-1);return s.mapped&&(o=xP(o,s.mapped)),r.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:jE.of({side:e,rest:o,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}ou.empty=new ou(El,El);const Oke=[{key:"Mod-z",run:vQ,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:AE,preventDefault:!0},{linux:"Ctrl-Shift-z",run:AE,preventDefault:!0},{key:"Mod-u",run:vke,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:bke,preventDefault:!0}];function x0(t,e){return pt.create(t.ranges.map(e),t.mainIndex)}function bc(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function _c({state:t,dispatch:e},r){let n=x0(t.selection,r);return n.eq(t.selection,!0)?!1:(e(bc(t,n)),!0)}function xC(t,e){return pt.cursor(e?t.to:t.from)}function wQ(t,e){return _c(t,r=>r.empty?t.moveByChar(r,e):xC(r,e))}function ko(t){return t.textDirectionAt(t.state.selection.main.head)==ei.LTR}const SQ=t=>wQ(t,!ko(t)),kQ=t=>wQ(t,ko(t));function CQ(t,e){return _c(t,r=>r.empty?t.moveByGroup(r,e):xC(r,e))}const Pke=t=>CQ(t,!ko(t)),jke=t=>CQ(t,ko(t));function Ake(t,e,r){if(e.type.prop(r))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function vC(t,e,r){let n=Ui(t).resolveInner(e.head),i=r?en.closedBy:en.openedBy;for(let d=e.head;;){let m=r?n.childAfter(d):n.childBefore(d);if(!m)break;Ake(t,m,i)?n=m:d=r?m.to:m.from}let s=n.type.prop(i),a,o;return s&&(a=r?su(t,n.from,1):su(t,n.to,-1))&&a.matched?o=r?a.end.to:a.end.from:o=r?n.to:n.from,pt.cursor(o,r?-1:1)}const Eke=t=>_c(t,e=>vC(t.state,e,!ko(t))),zke=t=>_c(t,e=>vC(t.state,e,ko(t)));function TQ(t,e){return _c(t,r=>{if(!r.empty)return xC(r,e);let n=t.moveVertically(r,e);return n.head!=r.head?n:t.moveToLineBoundary(r,e)})}const OQ=t=>TQ(t,!1),PQ=t=>TQ(t,!0);function jQ(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,r=0,n=0,i;if(e){for(let s of t.state.facet(Gt.scrollMargins)){let a=s(t);a!=null&&a.top&&(r=Math.max(a==null?void 0:a.top,r)),a!=null&&a.bottom&&(n=Math.max(a==null?void 0:a.bottom,n))}i=t.scrollDOM.clientHeight-r-n}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:n,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function AQ(t,e){let r=jQ(t),{state:n}=t,i=x0(n.selection,a=>a.empty?t.moveVertically(a,e,r.height):xC(a,e));if(i.eq(n.selection))return!1;let s;if(r.selfScroll){let a=t.coordsAtPos(n.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),d=o.top+r.marginTop,m=o.bottom-r.marginBottom;a&&a.top>d&&a.bottom<m&&(s=Gt.scrollIntoView(i.main.head,{y:"start",yMargin:a.top-d}))}return t.dispatch(bc(n,i),{effects:s}),!0}const kB=t=>AQ(t,!1),EE=t=>AQ(t,!0);function gf(t,e,r){let n=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,r);if(i.head==e.head&&i.head!=(r?n.to:n.from)&&(i=t.moveToLineBoundary(e,r,!1)),!r&&i.head==n.from&&n.length){let s=/^\s*/.exec(t.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;s&&e.head!=n.from+s&&(i=pt.cursor(n.from+s))}return i}const Mke=t=>_c(t,e=>gf(t,e,!0)),Ike=t=>_c(t,e=>gf(t,e,!1)),Dke=t=>_c(t,e=>gf(t,e,!ko(t))),Rke=t=>_c(t,e=>gf(t,e,ko(t))),Lke=t=>_c(t,e=>pt.cursor(t.lineBlockAt(e.head).from,1)),Fke=t=>_c(t,e=>pt.cursor(t.lineBlockAt(e.head).to,-1));function Bke(t,e,r){let n=!1,i=x0(t.selection,s=>{let a=su(t,s.head,-1)||su(t,s.head,1)||s.head>0&&su(t,s.head-1,1)||s.head<t.doc.length&&su(t,s.head+1,-1);if(!a||!a.end)return s;n=!0;let o=a.start.from==s.head?a.end.to:a.end.from;return pt.cursor(o)});return n?(e(bc(t,i)),!0):!1}const $ke=({state:t,dispatch:e})=>Bke(t,e);function Wl(t,e){let r=x0(t.state.selection,n=>{let i=e(n);return pt.range(n.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return r.eq(t.state.selection)?!1:(t.dispatch(bc(t.state,r)),!0)}function EQ(t,e){return Wl(t,r=>t.moveByChar(r,e))}const zQ=t=>EQ(t,!ko(t)),MQ=t=>EQ(t,ko(t));function IQ(t,e){return Wl(t,r=>t.moveByGroup(r,e))}const Nke=t=>IQ(t,!ko(t)),Vke=t=>IQ(t,ko(t)),Wke=t=>Wl(t,e=>vC(t.state,e,!ko(t))),Uke=t=>Wl(t,e=>vC(t.state,e,ko(t)));function DQ(t,e){return Wl(t,r=>t.moveVertically(r,e))}const RQ=t=>DQ(t,!1),LQ=t=>DQ(t,!0);function FQ(t,e){return Wl(t,r=>t.moveVertically(r,e,jQ(t).height))}const CB=t=>FQ(t,!1),TB=t=>FQ(t,!0),qke=t=>Wl(t,e=>gf(t,e,!0)),Qke=t=>Wl(t,e=>gf(t,e,!1)),Hke=t=>Wl(t,e=>gf(t,e,!ko(t))),Gke=t=>Wl(t,e=>gf(t,e,ko(t))),Xke=t=>Wl(t,e=>pt.cursor(t.lineBlockAt(e.head).from)),Kke=t=>Wl(t,e=>pt.cursor(t.lineBlockAt(e.head).to)),OB=({state:t,dispatch:e})=>(e(bc(t,{anchor:0})),!0),PB=({state:t,dispatch:e})=>(e(bc(t,{anchor:t.doc.length})),!0),jB=({state:t,dispatch:e})=>(e(bc(t,{anchor:t.selection.main.anchor,head:0})),!0),AB=({state:t,dispatch:e})=>(e(bc(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Zke=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Yke=({state:t,dispatch:e})=>{let r=bC(t).map(({from:n,to:i})=>pt.range(n,Math.min(i+1,t.doc.length)));return e(t.update({selection:pt.create(r),userEvent:"select"})),!0},Jke=({state:t,dispatch:e})=>{let r=x0(t.selection,n=>{let i=Ui(t),s=i.resolveStack(n.from,1);if(n.empty){let a=i.resolveStack(n.from,-1);a.node.from>=s.node.from&&a.node.to<=s.node.to&&(s=a)}for(let a=s;a;a=a.next){let{node:o}=a;if((o.from<n.from&&o.to>=n.to||o.to>n.to&&o.from<=n.from)&&a.next)return pt.range(o.to,o.from)}return n});return r.eq(t.selection)?!1:(e(bc(t,r)),!0)};function BQ(t,e){let{state:r}=t,n=r.selection,i=r.selection.ranges.slice();for(let s of r.selection.ranges){let a=r.doc.lineAt(s.head);if(e?a.to<t.state.doc.length:a.from>0)for(let o=s;;){let d=t.moveVertically(o,e);if(d.head<a.from||d.head>a.to){i.some(m=>m.head==d.head)||i.push(d);break}else{if(d.head==o.head)break;o=d}}}return i.length==n.ranges.length?!1:(t.dispatch(bc(r,pt.create(i,i.length-1))),!0)}const eCe=t=>BQ(t,!1),tCe=t=>BQ(t,!0),rCe=({state:t,dispatch:e})=>{let r=t.selection,n=null;return r.ranges.length>1?n=pt.create([r.main]):r.main.empty||(n=pt.create([pt.cursor(r.main.head)])),n?(e(bc(t,n)),!0):!1};function R1(t,e){if(t.state.readOnly)return!1;let r="delete.selection",{state:n}=t,i=n.changeByRange(s=>{let{from:a,to:o}=s;if(a==o){let d=e(s);d<a?(r="delete.backward",d=Iw(t,d,!1)):d>a&&(r="delete.forward",d=Iw(t,d,!0)),a=Math.min(a,d),o=Math.max(o,d)}else a=Iw(t,a,!1),o=Iw(t,o,!0);return a==o?{range:s}:{changes:{from:a,to:o},range:pt.cursor(a,a<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(n.update(i,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?Gt.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function Iw(t,e,r){if(t instanceof Gt)for(let n of t.state.facet(Gt.atomicRanges).map(i=>i(t)))n.between(e,e,(i,s)=>{i<e&&s>e&&(e=r?s:i)});return e}const $Q=(t,e,r)=>R1(t,n=>{let i=n.from,{state:s}=t,a=s.doc.lineAt(i),o,d;if(r&&!e&&i>a.from&&i<a.from+200&&!/[^ \t]/.test(o=a.text.slice(0,i-a.from))){if(o[o.length-1]=="	")return i-1;let m=y0(o,s.tabSize),y=m%L2(s)||L2(s);for(let b=0;b<y&&o[o.length-1-b]==" ";b++)i--;d=i}else d=ps(a.text,i-a.from,e,e)+a.from,d==i&&a.number!=(e?s.doc.lines:1)?d+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(d-a.from,i-a.from))&&(d=ps(a.text,d-a.from,!1,!1)+a.from);return d}),zE=t=>$Q(t,!1,!0),NQ=t=>$Q(t,!0,!1),VQ=(t,e)=>R1(t,r=>{let n=r.head,{state:i}=t,s=i.doc.lineAt(n),a=i.charCategorizer(n);for(let o=null;;){if(n==(e?s.to:s.from)){n==r.head&&s.number!=(e?i.doc.lines:1)&&(n+=e?1:-1);break}let d=ps(s.text,n-s.from,e)+s.from,m=s.text.slice(Math.min(n,d)-s.from,Math.max(n,d)-s.from),y=a(m);if(o!=null&&y!=o)break;(m!=" "||n!=r.head)&&(o=y),n=d}return n}),WQ=t=>VQ(t,!1),nCe=t=>VQ(t,!0),iCe=t=>R1(t,e=>{let r=t.lineBlockAt(e.head).to;return e.head<r?r:Math.min(t.state.doc.length,e.head+1)}),sCe=t=>R1(t,e=>{let r=t.moveToLineBoundary(e,!1).head;return e.head>r?r:Math.max(0,e.head-1)}),oCe=t=>R1(t,e=>{let r=t.moveToLineBoundary(e,!0).head;return e.head<r?r:Math.min(t.state.doc.length,e.head+1)}),aCe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:Sn.of(["",""])},range:pt.cursor(n.from)}));return e(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0},lCe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>{if(!n.empty||n.from==0||n.from==t.doc.length)return{range:n};let i=n.from,s=t.doc.lineAt(i),a=i==s.from?i-1:ps(s.text,i-s.from,!1)+s.from,o=i==s.to?i+1:ps(s.text,i-s.from,!0)+s.from;return{changes:{from:a,to:o,insert:t.doc.slice(i,o).append(t.doc.slice(a,i))},range:pt.cursor(o)}});return r.changes.empty?!1:(e(t.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function bC(t){let e=[],r=-1;for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),s=t.doc.lineAt(n.to);if(!n.empty&&n.to==s.from&&(s=t.doc.lineAt(n.to-1)),r>=i.number){let a=e[e.length-1];a.to=s.to,a.ranges.push(n)}else e.push({from:i.from,to:s.to,ranges:[n]});r=s.number+1}return e}function UQ(t,e,r){if(t.readOnly)return!1;let n=[],i=[];for(let s of bC(t)){if(r?s.to==t.doc.length:s.from==0)continue;let a=t.doc.lineAt(r?s.to+1:s.from-1),o=a.length+1;if(r){n.push({from:s.to,to:a.to},{from:s.from,insert:a.text+t.lineBreak});for(let d of s.ranges)i.push(pt.range(Math.min(t.doc.length,d.anchor+o),Math.min(t.doc.length,d.head+o)))}else{n.push({from:a.from,to:s.from},{from:s.to,insert:t.lineBreak+a.text});for(let d of s.ranges)i.push(pt.range(d.anchor-o,d.head-o))}}return n.length?(e(t.update({changes:n,scrollIntoView:!0,selection:pt.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const cCe=({state:t,dispatch:e})=>UQ(t,e,!1),uCe=({state:t,dispatch:e})=>UQ(t,e,!0);function qQ(t,e,r){if(t.readOnly)return!1;let n=[];for(let s of bC(t))r?n.push({from:s.from,insert:t.doc.slice(s.from,s.to)+t.lineBreak}):n.push({from:s.to,insert:t.lineBreak+t.doc.slice(s.from,s.to)});let i=t.changes(n);return e(t.update({changes:i,selection:t.selection.map(i,r?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const hCe=({state:t,dispatch:e})=>qQ(t,e,!1),dCe=({state:t,dispatch:e})=>qQ(t,e,!0),fCe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,r=e.changes(bC(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),n=x0(e.selection,i=>{let s;if(t.lineWrapping){let a=t.lineBlockAt(i.head),o=t.coordsAtPos(i.head,i.assoc||1);o&&(s=a.bottom+t.documentTop-o.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(r);return t.dispatch({changes:r,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function pCe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let r=Ui(t).resolveInner(e),n=r.childBefore(e),i=r.childAfter(e),s;return n&&i&&n.to<=e&&i.from>=e&&(s=n.type.prop(en.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(n.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(n.to,i.from))?{from:n.to,to:i.from}:null}const EB=QQ(!1),mCe=QQ(!0);function QQ(t){return({state:e,dispatch:r})=>{if(e.readOnly)return!1;let n=e.changeByRange(i=>{let{from:s,to:a}=i,o=e.doc.lineAt(s),d=!t&&s==a&&pCe(e,s);t&&(s=a=(a<=o.to?o:e.doc.lineAt(a)).to);let m=new fC(e,{simulateBreak:s,simulateDoubleBreak:!!d}),y=t5(m,s);for(y==null&&(y=y0(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));a<o.to&&/\s/.test(o.text[a-o.from]);)a++;d?{from:s,to:a}=d:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let b=["",$b(e,y)];return d&&b.push($b(e,m.lineIndent(o.from,-1))),{changes:{from:s,to:a,insert:Sn.of(b)},range:pt.cursor(s+1+b[1].length)}});return r(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function s5(t,e){let r=-1;return t.changeByRange(n=>{let i=[];for(let a=n.from;a<=n.to;){let o=t.doc.lineAt(a);o.number>r&&(n.empty||n.to>o.from)&&(e(o,i,n),r=o.number),a=o.to+1}let s=t.changes(i);return{changes:i,range:pt.range(s.mapPos(n.anchor,1),s.mapPos(n.head,1))}})}const gCe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=Object.create(null),n=new fC(t,{overrideIndentation:s=>{let a=r[s];return a??-1}}),i=s5(t,(s,a,o)=>{let d=t5(n,s.from);if(d==null)return;/\S/.test(s.text)||(d=0);let m=/^\s*/.exec(s.text)[0],y=$b(t,d);(m!=y||o.from<s.from+m.length)&&(r[s.from]=d,a.push({from:s.from,to:s.from+m.length,insert:y}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},HQ=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(s5(t,(r,n)=>{n.push({from:r.from,insert:t.facet(dC)})}),{userEvent:"input.indent"})),!0),GQ=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(s5(t,(r,n)=>{let i=/^\s*/.exec(r.text)[0];if(!i)return;let s=y0(i,t.tabSize),a=0,o=$b(t,Math.max(0,s-L2(t)));for(;a<i.length&&a<o.length&&i.charCodeAt(a)==o.charCodeAt(a);)a++;n.push({from:r.from+a,to:r.from+i.length,insert:o.slice(a)})}),{userEvent:"delete.dedent"})),!0),yCe=t=>(t.setTabFocusMode(),!0),xCe=[{key:"Ctrl-b",run:SQ,shift:zQ,preventDefault:!0},{key:"Ctrl-f",run:kQ,shift:MQ},{key:"Ctrl-p",run:OQ,shift:RQ},{key:"Ctrl-n",run:PQ,shift:LQ},{key:"Ctrl-a",run:Lke,shift:Xke},{key:"Ctrl-e",run:Fke,shift:Kke},{key:"Ctrl-d",run:NQ},{key:"Ctrl-h",run:zE},{key:"Ctrl-k",run:iCe},{key:"Ctrl-Alt-h",run:WQ},{key:"Ctrl-o",run:aCe},{key:"Ctrl-t",run:lCe},{key:"Ctrl-v",run:EE}],vCe=[{key:"ArrowLeft",run:SQ,shift:zQ,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Pke,shift:Nke,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Dke,shift:Hke,preventDefault:!0},{key:"ArrowRight",run:kQ,shift:MQ,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:jke,shift:Vke,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Rke,shift:Gke,preventDefault:!0},{key:"ArrowUp",run:OQ,shift:RQ,preventDefault:!0},{mac:"Cmd-ArrowUp",run:OB,shift:jB},{mac:"Ctrl-ArrowUp",run:kB,shift:CB},{key:"ArrowDown",run:PQ,shift:LQ,preventDefault:!0},{mac:"Cmd-ArrowDown",run:PB,shift:AB},{mac:"Ctrl-ArrowDown",run:EE,shift:TB},{key:"PageUp",run:kB,shift:CB},{key:"PageDown",run:EE,shift:TB},{key:"Home",run:Ike,shift:Qke,preventDefault:!0},{key:"Mod-Home",run:OB,shift:jB},{key:"End",run:Mke,shift:qke,preventDefault:!0},{key:"Mod-End",run:PB,shift:AB},{key:"Enter",run:EB,shift:EB},{key:"Mod-a",run:Zke},{key:"Backspace",run:zE,shift:zE,preventDefault:!0},{key:"Delete",run:NQ,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:WQ,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:nCe,preventDefault:!0},{mac:"Mod-Backspace",run:sCe,preventDefault:!0},{mac:"Mod-Delete",run:oCe,preventDefault:!0}].concat(xCe.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),bCe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Eke,shift:Wke},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:zke,shift:Uke},{key:"Alt-ArrowUp",run:cCe},{key:"Shift-Alt-ArrowUp",run:hCe},{key:"Alt-ArrowDown",run:uCe},{key:"Shift-Alt-ArrowDown",run:dCe},{key:"Mod-Alt-ArrowUp",run:eCe},{key:"Mod-Alt-ArrowDown",run:tCe},{key:"Escape",run:rCe},{key:"Mod-Enter",run:mCe},{key:"Alt-l",mac:"Ctrl-l",run:Yke},{key:"Mod-i",run:Jke,preventDefault:!0},{key:"Mod-[",run:GQ},{key:"Mod-]",run:HQ},{key:"Mod-Alt-\\",run:gCe},{key:"Shift-Mod-k",run:fCe},{key:"Shift-Mod-\\",run:$ke},{key:"Mod-/",run:cke},{key:"Alt-A",run:hke},{key:"Ctrl-m",mac:"Shift-Alt-m",run:yCe}].concat(vCe),_Ce={key:"Tab",run:HQ,shift:GQ},zB=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class i0{constructor(e,r,n=0,i=e.length,s,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=s?o=>s(zB(o)):zB,this.query=this.normalize(r)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ua(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let r=EI(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=tu(e);let i=this.normalize(r);if(i.length)for(let s=0,a=n;;s++){let o=i.charCodeAt(s),d=this.match(o,a,this.bufferPos+this.bufferStart);if(s==i.length-1){if(d)return this.value=d,this;break}a==n&&s<r.length&&r.charCodeAt(s)==o&&a++}}}match(e,r,n){let i=null;for(let s=0;s<this.matches.length;s+=2){let a=this.matches[s],o=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?i={from:this.matches[s+1],to:n}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:r,to:n}:this.matches.push(1,r)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(i0.prototype[Symbol.iterator]=function(){return this});const XQ={from:-1,to:-1,match:/.*/.exec("")},o5="gm"+(/x/.unicode==null?"":"u");class KQ{constructor(e,r,n,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=XQ,/\\[sWDnr]|\n|\r|\[\^/.test(r))return new ZQ(e,r,n,i,s);this.re=new RegExp(r,o5+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=e.iter();let a=e.lineAt(i);this.curLineStart=a.from,this.matchPos=N2(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let r=this.matchPos<=this.to&&this.re.exec(this.curLine);if(r){let n=this.curLineStart+r.index,i=n+r[0].length;if(this.matchPos=N2(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,r)))return this.value={from:n,to:i,match:r},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const vP=new WeakMap;class dy{constructor(e,r){this.from=e,this.text=r}get to(){return this.from+this.text.length}static get(e,r,n){let i=vP.get(e);if(!i||i.from>=n||i.to<=r){let o=new dy(r,e.sliceString(r,n));return vP.set(e,o),o}if(i.from==r&&i.to==n)return i;let{text:s,from:a}=i;return a>r&&(s=e.sliceString(r,a)+s,a=r),i.to<n&&(s+=e.sliceString(i.to,n)),vP.set(e,new dy(a,s)),new dy(r,s.slice(r-a,n-a))}}class ZQ{constructor(e,r,n,i,s){this.text=e,this.to=s,this.done=!1,this.value=XQ,this.matchPos=N2(e,i),this.re=new RegExp(r,o5+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=dy.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,r=this.re.exec(this.flat.text);if(r&&!r[0]&&r.index==e&&(this.re.lastIndex=e+1,r=this.re.exec(this.flat.text)),r){let n=this.flat.from+r.index,i=n+r[0].length;if((this.flat.to>=this.to||r.index+r[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,r)))return this.value={from:n,to:i,match:r},this.matchPos=N2(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=dy.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(KQ.prototype[Symbol.iterator]=ZQ.prototype[Symbol.iterator]=function(){return this});function wCe(t){try{return new RegExp(t,o5),!0}catch{return!1}}function N2(t,e){if(e>=t.length)return e;let r=t.lineAt(e),n;for(;e<r.to&&(n=r.text.charCodeAt(e-r.from))>=56320&&n<57344;)e++;return e}const SCe=t=>{let{state:e}=t,r=String(e.doc.lineAt(t.state.selection.main.head).number),{close:n,result:i}=VSe(t,{label:e.phrase("Go to line"),input:{type:"text",name:"line",value:r},focus:!0,submitLabel:e.phrase("go")});return i.then(s=>{let a=s&&/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(s.elements.line.value);if(!a){t.dispatch({effects:n});return}let o=e.doc.lineAt(e.selection.main.head),[,d,m,y,b]=a,w=y?+y.slice(1):0,O=m?+m:o.number;if(m&&b){let $=O/100;d&&($=$*(d=="-"?-1:1)+o.number/e.doc.lines),O=Math.round(e.doc.lines*$)}else m&&d&&(O=O*(d=="-"?-1:1)+o.number);let A=e.doc.line(Math.max(1,Math.min(e.doc.lines,O))),E=pt.cursor(A.from+Math.max(0,Math.min(w,A.length)));t.dispatch({effects:[n,Gt.scrollIntoView(E.from,{y:"center"})],selection:E})}),!0},kCe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},CCe=ur.define({combine(t){return bu(t,kCe,{highlightWordAroundCursor:(e,r)=>e||r,minSelectionLength:Math.min,maxMatches:Math.min})}});function TCe(t){return[ECe,ACe]}const OCe=Or.mark({class:"cm-selectionMatch"}),PCe=Or.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function MB(t,e,r,n){return(r==0||t(e.sliceDoc(r-1,r))!=yi.Word)&&(n==e.doc.length||t(e.sliceDoc(n,n+1))!=yi.Word)}function jCe(t,e,r,n){return t(e.sliceDoc(r,r+1))==yi.Word&&t(e.sliceDoc(n-1,n))==yi.Word}const ACe=Wi.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(CCe),{state:r}=t,n=r.selection;if(n.ranges.length>1)return Or.none;let i=n.main,s,a=null;if(i.empty){if(!e.highlightWordAroundCursor)return Or.none;let d=r.wordAt(i.head);if(!d)return Or.none;a=r.charCategorizer(i.head),s=r.sliceDoc(d.from,d.to)}else{let d=i.to-i.from;if(d<e.minSelectionLength||d>200)return Or.none;if(e.wholeWords){if(s=r.sliceDoc(i.from,i.to),a=r.charCategorizer(i.head),!(MB(a,r,i.from,i.to)&&jCe(a,r,i.from,i.to)))return Or.none}else if(s=r.sliceDoc(i.from,i.to),!s)return Or.none}let o=[];for(let d of t.visibleRanges){let m=new i0(r.doc,s,d.from,d.to);for(;!m.next().done;){let{from:y,to:b}=m.value;if((!a||MB(a,r,y,b))&&(i.empty&&y<=i.from&&b>=i.to?o.push(PCe.range(y,b)):(y>=i.to||b<=i.from)&&o.push(OCe.range(y,b)),o.length>e.maxMatches))return Or.none}}return Or.set(o)}},{decorations:t=>t.decorations}),ECe=Gt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),zCe=({state:t,dispatch:e})=>{let{selection:r}=t,n=pt.create(r.ranges.map(i=>t.wordAt(i.head)||pt.cursor(i.head)),r.mainIndex);return n.eq(r)?!1:(e(t.update({selection:n})),!0)};function MCe(t,e){let{main:r,ranges:n}=t.selection,i=t.wordAt(r.head),s=i&&i.from==r.from&&i.to==r.to;for(let a=!1,o=new i0(t.doc,e,n[n.length-1].to);;)if(o.next(),o.done){if(a)return null;o=new i0(t.doc,e,0,Math.max(0,n[n.length-1].from-1)),a=!0}else{if(a&&n.some(d=>d.from==o.value.from))continue;if(s){let d=t.wordAt(o.value.from);if(!d||d.from!=o.value.from||d.to!=o.value.to)continue}return o.value}}const ICe=({state:t,dispatch:e})=>{let{ranges:r}=t.selection;if(r.some(s=>s.from===s.to))return zCe({state:t,dispatch:e});let n=t.sliceDoc(r[0].from,r[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=n))return!1;let i=MCe(t,n);return i?(e(t.update({selection:t.selection.addRange(pt.range(i.from,i.to),!1),effects:Gt.scrollIntoView(i.to)})),!0):!1},v0=ur.define({combine(t){return bu(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new GCe(e),scrollToMatch:e=>Gt.scrollIntoView(e)})}});class YQ{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||wCe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord,this.test=e.test}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(r,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord&&this.test==e.test}create(){return this.regexp?new $Ce(this):new LCe(this)}getCursor(e,r=0,n){let i=e.doc?e:pn.create({doc:e});return n==null&&(n=i.doc.length),this.regexp?mg(this,i,r,n):pg(this,i,r,n)}}class JQ{constructor(e){this.spec=e}}function DCe(t,e,r){return(n,i,s,a)=>{if(r&&!r(n,i,s,a))return!1;let o=n>=a&&i<=a+s.length?s.slice(n-a,i-a):e.doc.sliceString(n,i);return t(o,e,n,i)}}function pg(t,e,r,n){let i;return t.wholeWord&&(i=RCe(e.doc,e.charCategorizer(e.selection.main.head))),t.test&&(i=DCe(t.test,e,i)),new i0(e.doc,t.unquoted,r,n,t.caseSensitive?void 0:s=>s.toLowerCase(),i)}function RCe(t,e){return(r,n,i,s)=>((s>r||s+i.length<n)&&(s=Math.max(0,r-2),i=t.sliceString(s,Math.min(t.length,n+2))),(e(V2(i,r-s))!=yi.Word||e(W2(i,r-s))!=yi.Word)&&(e(W2(i,n-s))!=yi.Word||e(V2(i,n-s))!=yi.Word))}class LCe extends JQ{constructor(e){super(e)}nextMatch(e,r,n){let i=pg(this.spec,e,n,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,r+this.spec.unquoted.length);i=pg(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==r&&i.value.to==n?null:i.value}prevMatchInRange(e,r,n){for(let i=n;;){let s=Math.max(r,i-1e4-this.spec.unquoted.length),a=pg(this.spec,e,s,i),o=null;for(;!a.nextOverlapping().done;)o=a.value;if(o)return o;if(s==r)return null;i-=1e4}}prevMatch(e,r,n){let i=this.prevMatchInRange(e,0,r);return i||(i=this.prevMatchInRange(e,Math.max(0,n-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=r||i.to!=n)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,r){let n=pg(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=r)return null;i.push(n.value)}return i}highlight(e,r,n,i){let s=pg(this.spec,e,Math.max(0,r-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function FCe(t,e,r){return(n,i,s)=>(!r||r(n,i,s))&&t(s[0],e,n,i)}function mg(t,e,r,n){let i;return t.wholeWord&&(i=BCe(e.charCategorizer(e.selection.main.head))),t.test&&(i=FCe(t.test,e,i)),new KQ(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:i},r,n)}function V2(t,e){return t.slice(ps(t,e,!1),e)}function W2(t,e){return t.slice(e,ps(t,e))}function BCe(t){return(e,r,n)=>!n[0].length||(t(V2(n.input,n.index))!=yi.Word||t(W2(n.input,n.index))!=yi.Word)&&(t(W2(n.input,n.index+n[0].length))!=yi.Word||t(V2(n.input,n.index+n[0].length))!=yi.Word)}class $Ce extends JQ{nextMatch(e,r,n){let i=mg(this.spec,e,n,e.doc.length).next();return i.done&&(i=mg(this.spec,e,0,r).next()),i.done?null:i.value}prevMatchInRange(e,r,n){for(let i=1;;i++){let s=Math.max(r,n-i*1e4),a=mg(this.spec,e,s,n),o=null;for(;!a.next().done;)o=a.value;if(o&&(s==r||o.from>s+10))return o;if(s==r)return null}}prevMatch(e,r,n){return this.prevMatchInRange(e,0,r)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(r,n)=>{if(n=="&")return e.match[0];if(n=="$")return"$";for(let i=n.length;i>0;i--){let s=+n.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+n.slice(i)}return r})}matchAll(e,r){let n=mg(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=r)return null;i.push(n.value)}return i}highlight(e,r,n,i){let s=mg(this.spec,e,Math.max(0,r-250),Math.min(n+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Nb=Wr.define(),a5=Wr.define(),Wd=so.define({create(t){return new bP(ME(t).create(),null)},update(t,e){for(let r of e.effects)r.is(Nb)?t=new bP(r.value.create(),t.panel):r.is(a5)&&(t=new bP(t.query,r.value?l5:null));return t},provide:t=>Lb.from(t,e=>e.panel)});class bP{constructor(e,r){this.query=e,this.panel=r}}const NCe=Or.mark({class:"cm-searchMatch"}),VCe=Or.mark({class:"cm-searchMatch cm-searchMatch-selected"}),WCe=Wi.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Wd))}update(t){let e=t.state.field(Wd);(e!=t.startState.field(Wd)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Or.none;let{view:r}=this,n=new vh;for(let i=0,s=r.visibleRanges,a=s.length;i<a;i++){let{from:o,to:d}=s[i];for(;i<a-1&&d>s[i+1].from-2*250;)d=s[++i].to;t.highlight(r.state,o,d,(m,y)=>{let b=r.state.selection.ranges.some(w=>w.from==m&&w.to==y);n.add(m,y,b?VCe:NCe)})}return n.finish()}},{decorations:t=>t.decorations});function L1(t){return e=>{let r=e.state.field(Wd,!1);return r&&r.query.spec.valid?t(e,r):rH(e)}}const U2=L1((t,{query:e})=>{let{to:r}=t.state.selection.main,n=e.nextMatch(t.state,r,r);if(!n)return!1;let i=pt.single(n.from,n.to),s=t.state.facet(v0);return t.dispatch({selection:i,effects:[c5(t,n),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),tH(t),!0}),q2=L1((t,{query:e})=>{let{state:r}=t,{from:n}=r.selection.main,i=e.prevMatch(r,n,n);if(!i)return!1;let s=pt.single(i.from,i.to),a=t.state.facet(v0);return t.dispatch({selection:s,effects:[c5(t,i),a.scrollToMatch(s.main,t)],userEvent:"select.search"}),tH(t),!0}),UCe=L1((t,{query:e})=>{let r=e.matchAll(t.state,1e3);return!r||!r.length?!1:(t.dispatch({selection:pt.create(r.map(n=>pt.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),qCe=({state:t,dispatch:e})=>{let r=t.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:n,to:i}=r.main,s=[],a=0;for(let o=new i0(t.doc,t.sliceDoc(n,i));!o.next().done;){if(s.length>1e3)return!1;o.value.from==n&&(a=s.length),s.push(pt.range(o.value.from,o.value.to))}return e(t.update({selection:pt.create(s,a),userEvent:"select.search.matches"})),!0},IB=L1((t,{query:e})=>{let{state:r}=t,{from:n,to:i}=r.selection.main;if(r.readOnly)return!1;let s=e.nextMatch(r,n,n);if(!s)return!1;let a=s,o=[],d,m,y=[];a.from==n&&a.to==i&&(m=r.toText(e.getReplacement(a)),o.push({from:a.from,to:a.to,insert:m}),a=e.nextMatch(r,a.from,a.to),y.push(Gt.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(n).number)+".")));let b=t.state.changes(o);return a&&(d=pt.single(a.from,a.to).map(b),y.push(c5(t,a)),y.push(r.facet(v0).scrollToMatch(d.main,t))),t.dispatch({changes:b,selection:d,effects:y,userEvent:"input.replace"}),!0}),QCe=L1((t,{query:e})=>{if(t.state.readOnly)return!1;let r=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:a}=i;return{from:s,to:a,insert:e.getReplacement(i)}});if(!r.length)return!1;let n=t.state.phrase("replaced $ matches",r.length)+".";return t.dispatch({changes:r,effects:Gt.announce.of(n),userEvent:"input.replace.all"}),!0});function l5(t){return t.state.facet(v0).createPanel(t)}function ME(t,e){var r,n,i,s,a;let o=t.selection.main,d=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!d)return e;let m=t.facet(v0);return new YQ({search:((r=e==null?void 0:e.literal)!==null&&r!==void 0?r:m.literal)?d:d.replace(/\n/g,"\\n"),caseSensitive:(n=e==null?void 0:e.caseSensitive)!==null&&n!==void 0?n:m.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:m.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:m.regexp,wholeWord:(a=e==null?void 0:e.wholeWord)!==null&&a!==void 0?a:m.wholeWord})}function eH(t){let e=XI(t,l5);return e&&e.dom.querySelector("[main-field]")}function tH(t){let e=eH(t);e&&e==t.root.activeElement&&e.select()}const rH=t=>{let e=t.state.field(Wd,!1);if(e&&e.panel){let r=eH(t);if(r&&r!=t.root.activeElement){let n=ME(t.state,e.query.spec);n.valid&&t.dispatch({effects:Nb.of(n)}),r.focus(),r.select()}}else t.dispatch({effects:[a5.of(!0),e?Nb.of(ME(t.state,e.query.spec)):Wr.appendConfig.of(KCe)]});return!0},nH=t=>{let e=t.state.field(Wd,!1);if(!e||!e.panel)return!1;let r=XI(t,l5);return r&&r.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:a5.of(!1)}),!0},HCe=[{key:"Mod-f",run:rH,scope:"editor search-panel"},{key:"F3",run:U2,shift:q2,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:U2,shift:q2,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:nH,scope:"editor search-panel"},{key:"Mod-Shift-l",run:qCe},{key:"Mod-Alt-g",run:SCe},{key:"Mod-d",run:ICe,preventDefault:!0}];class GCe{constructor(e){this.view=e;let r=this.query=e.state.field(Wd).query.spec;this.commit=this.commit.bind(this),this.searchField=Xn("input",{value:r.search,placeholder:$a(e,"Find"),"aria-label":$a(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Xn("input",{value:r.replace,placeholder:$a(e,"Replace"),"aria-label":$a(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Xn("input",{type:"checkbox",name:"case",form:"",checked:r.caseSensitive,onchange:this.commit}),this.reField=Xn("input",{type:"checkbox",name:"re",form:"",checked:r.regexp,onchange:this.commit}),this.wordField=Xn("input",{type:"checkbox",name:"word",form:"",checked:r.wholeWord,onchange:this.commit});function n(i,s,a){return Xn("button",{class:"cm-button",name:i,onclick:s,type:"button"},a)}this.dom=Xn("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,n("next",()=>U2(e),[$a(e,"next")]),n("prev",()=>q2(e),[$a(e,"previous")]),n("select",()=>UCe(e),[$a(e,"all")]),Xn("label",null,[this.caseField,$a(e,"match case")]),Xn("label",null,[this.reField,$a(e,"regexp")]),Xn("label",null,[this.wordField,$a(e,"by word")]),...e.state.readOnly?[]:[Xn("br"),this.replaceField,n("replace",()=>IB(e),[$a(e,"replace")]),n("replaceAll",()=>QCe(e),[$a(e,"replace all")])],Xn("button",{name:"close",onclick:()=>nH(e),"aria-label":$a(e,"close"),type:"button"},[""])])}commit(){let e=new YQ({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Nb.of(e)}))}keydown(e){Ywe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?q2:U2)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),IB(this.view))}update(e){for(let r of e.transactions)for(let n of r.effects)n.is(Nb)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(v0).top}}function $a(t,e){return t.state.phrase(e)}const Dw=30,Rw=/[\s\.,:;?!]/;function c5(t,{from:e,to:r}){let n=t.state.doc.lineAt(e),i=t.state.doc.lineAt(r).to,s=Math.max(n.from,e-Dw),a=Math.min(i,r+Dw),o=t.state.sliceDoc(s,a);if(s!=n.from){for(let d=0;d<Dw;d++)if(!Rw.test(o[d+1])&&Rw.test(o[d])){o=o.slice(d);break}}if(a!=i){for(let d=o.length-1;d>o.length-Dw;d--)if(!Rw.test(o[d-1])&&Rw.test(o[d])){o=o.slice(0,d);break}}return Gt.announce.of(`${t.state.phrase("current match")}. ${o} ${t.state.phrase("on line")} ${n.number}.`)}const XCe=Gt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),KCe=[Wd,hm.low(WCe),XCe];class iH{constructor(e,r,n,i){this.state=e,this.pos=r,this.explicit=n,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let r=Ui(this.state).resolveInner(this.pos,-1);for(;r&&e.indexOf(r.name)<0;)r=r.parent;return r?{from:r.from,to:this.pos,text:this.state.sliceDoc(r.from,this.pos),type:r.type}:null}matchBefore(e){let r=this.state.doc.lineAt(this.pos),n=Math.max(r.from,this.pos-250),i=r.text.slice(n-r.from,this.pos-r.from),s=i.search(oH(e,!1));return s<0?null:{from:n+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,r,n){e=="abort"&&this.abortListeners&&(this.abortListeners.push(r),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function DB(t){let e=Object.keys(t).join(""),r=/\w/.test(e);return r&&(e=e.replace(/\w/g,"")),`[${r?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function ZCe(t){let e=Object.create(null),r=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)r[i[s]]=!0}let n=DB(e)+DB(r)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function sH(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[r,n]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:ZCe(e);return i=>{let s=i.matchBefore(n);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:r}:null}}function YCe(t,e){return r=>{for(let n=Ui(r.state).resolveInner(r.pos,-1);n;n=n.parent){if(t.indexOf(n.name)>-1)return null;if(n.type.isTop)break}return e(r)}}class RB{constructor(e,r,n,i){this.completion=e,this.source=r,this.match=n,this.score=i}}function $p(t){return t.selection.main.from}function oH(t,e){var r;let{source:n}=t,i=e&&n[0]!="^",s=n[n.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${n})${s?"$":""}`,(r=t.flags)!==null&&r!==void 0?r:t.ignoreCase?"i":"")}const aH=vu.define();function JCe(t,e,r,n){let{main:i}=t.selection,s=r-i.from,a=n-i.from;return{...t.changeByRange(o=>{if(o!=i&&r!=n&&t.sliceDoc(o.from+s,o.from+a)!=t.sliceDoc(r,n))return{range:o};let d=t.toText(e);return{changes:{from:o.from+s,to:n==i.from?o.to:o.from+a,insert:d},range:pt.cursor(o.from+s+d.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const LB=new WeakMap;function eTe(t){if(!Array.isArray(t))return t;let e=LB.get(t);return e||LB.set(t,e=sH(t)),e}const Q2=Wr.define(),Vb=Wr.define();class tTe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let r=0;r<e.length;){let n=ua(e,r),i=tu(n);this.chars.push(n);let s=e.slice(r,r+i),a=s.toUpperCase();this.folded.push(ua(a==s?s.toLowerCase():a,0)),r+=i}this.astral=e.length!=this.chars.length}ret(e,r){return this.score=e,this.matched=r,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:r,folded:n,any:i,precise:s,byWord:a}=this;if(r.length==1){let F=ua(e,0),L=tu(F),U=L==e.length?0:-100;if(F!=r[0])if(F==n[0])U+=-200;else return null;return this.ret(U,[0,L])}let o=e.indexOf(this.pattern);if(o==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let d=r.length,m=0;if(o<0){for(let F=0,L=Math.min(e.length,200);F<L&&m<d;){let U=ua(e,F);(U==r[m]||U==n[m])&&(i[m++]=F),F+=tu(U)}if(m<d)return null}let y=0,b=0,w=!1,O=0,A=-1,E=-1,$=/[a-z]/.test(e),R=!0;for(let F=0,L=Math.min(e.length,200),U=0;F<L&&b<d;){let Q=ua(e,F);o<0&&(y<d&&Q==r[y]&&(s[y++]=F),O<d&&(Q==r[O]||Q==n[O]?(O==0&&(A=F),E=F+1,O++):O=0));let Y,Z=Q<255?Q>=48&&Q<=57||Q>=97&&Q<=122?2:Q>=65&&Q<=90?1:0:(Y=EI(Q))!=Y.toLowerCase()?1:Y!=Y.toUpperCase()?2:0;(!F||Z==1&&$||U==0&&Z!=0)&&(r[b]==Q||n[b]==Q&&(w=!0)?a[b++]=F:a.length&&(R=!1)),U=Z,F+=tu(Q)}return b==d&&a[0]==0&&R?this.result(-100+(w?-200:0),a,e):O==d&&A==0?this.ret(-200-e.length+(E==e.length?0:-100),[0,E]):o>-1?this.ret(-700-e.length,[o,o+this.pattern.length]):O==d?this.ret(-900-e.length,[A,E]):b==d?this.result(-100+(w?-200:0)+-700+(R?0:-1100),a,e):r.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,r,n){let i=[],s=0;for(let a of r){let o=a+(this.astral?tu(ua(n,a)):1);s&&i[s-1]==a?i[s-1]=o:(i[s++]=a,i[s++]=o)}return this.ret(e-n.length,i)}}class rTe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let r=e.slice(0,this.pattern.length),n=r==this.pattern?0:r.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,r.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const Ms=ur.define({combine(t){return bu(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:nTe,filterStrict:!1,compareCompletions:(e,r)=>(e.sortText||e.label).localeCompare(r.sortText||r.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,r)=>e&&r,closeOnBlur:(e,r)=>e&&r,icons:(e,r)=>e&&r,tooltipClass:(e,r)=>n=>FB(e(n),r(n)),optionClass:(e,r)=>n=>FB(e(n),r(n)),addToOptions:(e,r)=>e.concat(r),filterStrict:(e,r)=>e||r})}});function FB(t,e){return t?e?t+" "+e:t:e}function nTe(t,e,r,n,i,s){let a=t.textDirection==ei.RTL,o=a,d=!1,m="top",y,b,w=e.left-i.left,O=i.right-e.right,A=n.right-n.left,E=n.bottom-n.top;if(o&&w<Math.min(A,O)?o=!1:!o&&O<Math.min(A,w)&&(o=!0),A<=(o?w:O))y=Math.max(i.top,Math.min(r.top,i.bottom-E))-e.top,b=Math.min(400,o?w:O);else{d=!0,b=Math.min(400,(a?e.right:i.right-e.left)-30);let F=i.bottom-e.bottom;F>=E||F>e.top?y=r.bottom-e.top:(m="bottom",y=e.bottom-r.top)}let $=(e.bottom-e.top)/s.offsetHeight,R=(e.right-e.left)/s.offsetWidth;return{style:`${m}: ${y/$}px; max-width: ${b/R}px`,class:"cm-completionInfo-"+(d?a?"left-narrow":"right-narrow":o?"left":"right")}}function iTe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(r){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),r.type&&n.classList.add(...r.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(r,n,i,s){let a=document.createElement("span");a.className="cm-completionLabel";let o=r.displayLabel||r.label,d=0;for(let m=0;m<s.length;){let y=s[m++],b=s[m++];y>d&&a.appendChild(document.createTextNode(o.slice(d,y)));let w=a.appendChild(document.createElement("span"));w.appendChild(document.createTextNode(o.slice(y,b))),w.className="cm-completionMatchedText",d=b}return d<o.length&&a.appendChild(document.createTextNode(o.slice(d))),a},position:50},{render(r){if(!r.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=r.detail,n},position:80}),e.sort((r,n)=>r.position-n.position).map(r=>r.render)}function _P(t,e,r){if(t<=r)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/r);return{from:i*r,to:(i+1)*r}}let n=Math.floor((t-e)/r);return{from:t-(n+1)*r,to:t-n*r}}class sTe{constructor(e,r,n){this.view=e,this.stateField=r,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:d=>this.placeInfo(d),key:this},this.space=null,this.currentClass="";let i=e.state.field(r),{options:s,selected:a}=i.open,o=e.state.facet(Ms);this.optionContent=iTe(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=_P(s.length,a,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",d=>{let{options:m}=e.state.field(r).open;for(let y=d.target,b;y&&y!=this.dom;y=y.parentNode)if(y.nodeName=="LI"&&(b=/-(\d+)$/.exec(y.id))&&+b[1]<m.length){this.applyCompletion(e,m[+b[1]]),d.preventDefault();return}}),this.dom.addEventListener("focusout",d=>{let m=e.state.field(this.stateField,!1);m&&m.tooltip&&e.state.facet(Ms).closeOnBlur&&d.relatedTarget!=e.contentDOM&&e.dispatch({effects:Vb.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,r){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,r,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var r;let n=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=i){let{options:s,selected:a,disabled:o}=n.open;(!i.open||i.open.options!=s)&&(this.range=_P(s.length,a,e.state.facet(Ms).maxRenderedOptions),this.showOptions(s,n.id)),this.updateSel(),o!=((r=i.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!o)}}updateTooltipClass(e){let r=this.tooltipClass(e);if(r!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of r.split(" "))n&&this.dom.classList.add(n);this.currentClass=r}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),r=e.open;(r.selected>-1&&r.selected<this.range.from||r.selected>=this.range.to)&&(this.range=_P(r.options.length,r.selected,this.view.state.facet(Ms).maxRenderedOptions),this.showOptions(r.options,e.id));let n=this.updateSelectedOption(r.selected);if(n){this.destroyInfo();let{completion:i}=r.options[r.selected],{info:s}=i;if(!s)return;let a=typeof s=="string"?document.createTextNode(s):s(i);if(!a)return;"then"in a?a.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>ya(this.view.state,o,"completion info")):(this.addInfoPane(a,i),n.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,r){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",n.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;n.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let r=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)n.nodeName!="LI"||!n.id?i--:i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),r=n):n.hasAttribute("aria-selected")&&(n.removeAttribute("aria-selected"),n.removeAttribute("aria-describedby"));return r&&aTe(this.list,r),r}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let r=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let a=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:a.clientWidth,bottom:a.clientHeight}}return i.top>Math.min(s.bottom,r.bottom)-10||i.bottom<Math.max(s.top,r.top)+10?null:this.view.state.facet(Ms).positionInfo(this.view,r,i,n,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,r,n){const i=document.createElement("ul");i.id=r,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",a=>{a.target==i&&a.preventDefault()});let s=null;for(let a=n.from;a<n.to;a++){let{completion:o,match:d}=e[a],{section:m}=o;if(m){let w=typeof m=="string"?m:m.name;if(w!=s&&(a>n.from||n.from==0))if(s=w,typeof m!="string"&&m.header)i.appendChild(m.header(m));else{let O=i.appendChild(document.createElement("completion-section"));O.textContent=w}}const y=i.appendChild(document.createElement("li"));y.id=r+"-"+a,y.setAttribute("role","option");let b=this.optionClass(o);b&&(y.className=b);for(let w of this.optionContent){let O=w(o,this.view.state,this.view,d);O&&y.appendChild(O)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function oTe(t,e){return r=>new sTe(r,t,e)}function aTe(t,e){let r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),i=r.height/t.offsetHeight;n.top<r.top?t.scrollTop-=(r.top-n.top)/i:n.bottom>r.bottom&&(t.scrollTop+=(n.bottom-r.bottom)/i)}function BB(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function lTe(t,e){let r=[],n=null,i=null,s=y=>{r.push(y);let{section:b}=y.completion;if(b){n||(n=[]);let w=typeof b=="string"?b:b.name;n.some(O=>O.name==w)||n.push(typeof b=="string"?{name:w}:b)}},a=e.facet(Ms);for(let y of t)if(y.hasResult()){let b=y.result.getMatch;if(y.result.filter===!1)for(let w of y.result.options)s(new RB(w,y.source,b?b(w):[],1e9-r.length));else{let w=e.sliceDoc(y.from,y.to),O,A=a.filterStrict?new rTe(w):new tTe(w);for(let E of y.result.options)if(O=A.match(E.label)){let $=E.displayLabel?b?b(E,O.matched):[]:O.matched,R=O.score+(E.boost||0);if(s(new RB(E,y.source,$,R)),typeof E.section=="object"&&E.section.rank==="dynamic"){let{name:F}=E.section;i||(i=Object.create(null)),i[F]=Math.max(R,i[F]||-1e9)}}}}if(n){let y=Object.create(null),b=0,w=(O,A)=>(O.rank==="dynamic"&&A.rank==="dynamic"?i[A.name]-i[O.name]:0)||(typeof O.rank=="number"?O.rank:1e9)-(typeof A.rank=="number"?A.rank:1e9)||(O.name<A.name?-1:1);for(let O of n.sort(w))b-=1e5,y[O.name]=b;for(let O of r){let{section:A}=O.completion;A&&(O.score+=y[typeof A=="string"?A:A.name])}}let o=[],d=null,m=a.compareCompletions;for(let y of r.sort((b,w)=>w.score-b.score||m(b.completion,w.completion))){let b=y.completion;!d||d.label!=b.label||d.detail!=b.detail||d.type!=null&&b.type!=null&&d.type!=b.type||d.apply!=b.apply||d.boost!=b.boost?o.push(y):BB(y.completion)>BB(d)&&(o[o.length-1]=y),d=y.completion}return o}class Ug{constructor(e,r,n,i,s,a){this.options=e,this.attrs=r,this.tooltip=n,this.timestamp=i,this.selected=s,this.disabled=a}setSelected(e,r){return e==this.selected||e>=this.options.length?this:new Ug(this.options,$B(r,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,r,n,i,s,a){if(i&&!a&&e.some(m=>m.isPending))return i.setDisabled();let o=lTe(e,r);if(!o.length)return i&&e.some(m=>m.isPending)?i.setDisabled():null;let d=r.facet(Ms).selectOnOpen?0:-1;if(i&&i.selected!=d&&i.selected!=-1){let m=i.options[i.selected].completion;for(let y=0;y<o.length;y++)if(o[y].completion==m){d=y;break}}return new Ug(o,$B(n,d),{pos:e.reduce((m,y)=>y.hasResult()?Math.min(m,y.from):m,1e8),create:pTe,above:s.aboveCursor},i?i.timestamp:Date.now(),d,!1)}map(e){return new Ug(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Ug(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class H2{constructor(e,r,n){this.active=e,this.id=r,this.open=n}static start(){return new H2(dTe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:r}=e,n=r.facet(Ms),s=(n.override||r.languageDataAt("autocomplete",$p(r)).map(eTe)).map(d=>(this.active.find(y=>y.source==d)||new zl(d,this.active.some(y=>y.state!=0)?1:0)).update(e,n));s.length==this.active.length&&s.every((d,m)=>d==this.active[m])&&(s=this.active);let a=this.open,o=e.effects.some(d=>d.is(u5));a&&e.docChanged&&(a=a.map(e.changes)),e.selection||s.some(d=>d.hasResult()&&e.changes.touchesRange(d.from,d.to))||!cTe(s,this.active)||o?a=Ug.build(s,r,this.id,a,n,o):a&&a.disabled&&!s.some(d=>d.isPending)&&(a=null),!a&&s.every(d=>!d.isPending)&&s.some(d=>d.hasResult())&&(s=s.map(d=>d.hasResult()?new zl(d.source,0):d));for(let d of e.effects)d.is(cH)&&(a=a&&a.setSelected(d.value,this.id));return s==this.active&&a==this.open?this:new H2(s,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?uTe:hTe}}function cTe(t,e){if(t==e)return!0;for(let r=0,n=0;;){for(;r<t.length&&!t[r].hasResult();)r++;for(;n<e.length&&!e[n].hasResult();)n++;let i=r==t.length,s=n==e.length;if(i||s)return i==s;if(t[r++].result!=e[n++].result)return!1}}const uTe={"aria-autocomplete":"list"},hTe={};function $B(t,e){let r={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(r["aria-activedescendant"]=t+"-"+e),r}const dTe=[];function lH(t,e){if(t.isUserEvent("input.complete")){let n=t.annotation(aH);if(n&&e.activateOnCompletion(n))return 12}let r=t.isUserEvent("input.type");return r&&e.activateOnTyping?5:r?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class zl{constructor(e,r,n=!1){this.source=e,this.state=r,this.explicit=n}hasResult(){return!1}get isPending(){return this.state==1}update(e,r){let n=lH(e,r),i=this;(n&8||n&16&&this.touches(e))&&(i=new zl(i.source,0)),n&4&&i.state==0&&(i=new zl(this.source,1)),i=i.updateFor(e,n);for(let s of e.effects)if(s.is(Q2))i=new zl(i.source,1,s.value);else if(s.is(Vb))i=new zl(i.source,0);else if(s.is(u5))for(let a of s.value)a.source==i.source&&(i=a);return i}updateFor(e,r){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange($p(e.state))}}class fy extends zl{constructor(e,r,n,i,s,a){super(e,3,r),this.limit=n,this.result=i,this.from=s,this.to=a}hasResult(){return!0}updateFor(e,r){var n;if(!(r&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),o=$p(e.state);if(o>a||!i||r&2&&($p(e.startState)==this.from||o<this.limit))return new zl(this.source,r&4?1:0);let d=e.changes.mapPos(this.limit);return fTe(i.validFor,e.state,s,a)?new fy(this.source,this.explicit,d,i,s,a):i.update&&(i=i.update(i,s,a,new iH(e.state,o,!1)))?new fy(this.source,this.explicit,d,i,i.from,(n=i.to)!==null&&n!==void 0?n:$p(e.state)):new zl(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new fy(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new zl(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function fTe(t,e,r,n){if(!t)return!1;let i=e.sliceDoc(r,n);return typeof t=="function"?t(i,r,n,e):oH(t,!0).test(i)}const u5=Wr.define({map(t,e){return t.map(r=>r.map(e))}}),cH=Wr.define(),ha=so.define({create(){return H2.start()},update(t,e){return t.update(e)},provide:t=>[GI.from(t,e=>e.tooltip),Gt.contentAttributes.from(t,e=>e.attrs)]});function h5(t,e){const r=e.completion.apply||e.completion.label;let n=t.state.field(ha).active.find(i=>i.source==e.source);return n instanceof fy?(typeof r=="string"?t.dispatch({...JCe(t.state,r,n.from,n.to),annotations:aH.of(e.completion)}):r(t,e.completion,n.from,n.to),!0):!1}const pTe=oTe(ha,h5);function Lw(t,e="option"){return r=>{let n=r.state.field(ha,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<r.state.facet(Ms).interactionDelay)return!1;let i=1,s;e=="page"&&(s=Nq(r,n.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:a}=n.open.options,o=n.open.selected>-1?n.open.selected+i*(t?1:-1):t?0:a-1;return o<0?o=e=="page"?0:a-1:o>=a&&(o=e=="page"?a-1:0),r.dispatch({effects:cH.of(o)}),!0}}const mTe=t=>{let e=t.state.field(ha,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Ms).interactionDelay?!1:h5(t,e.open.options[e.open.selected])},wP=t=>t.state.field(ha,!1)?(t.dispatch({effects:Q2.of(!0)}),!0):!1,gTe=t=>{let e=t.state.field(ha,!1);return!e||!e.active.some(r=>r.state!=0)?!1:(t.dispatch({effects:Vb.of(null)}),!0)};class yTe{constructor(e,r){this.active=e,this.context=r,this.time=Date.now(),this.updates=[],this.done=void 0}}const xTe=50,vTe=1e3,bTe=Wi.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(ha).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(ha),r=t.state.facet(Ms);if(!t.selectionSet&&!t.docChanged&&t.startState.field(ha)==e)return;let n=t.transactions.some(s=>{let a=lH(s,r);return a&8||(s.selection||s.docChanged)&&!(a&3)});for(let s=0;s<this.running.length;s++){let a=this.running[s];if(n||a.context.abortOnDocChange&&t.docChanged||a.updates.length+t.transactions.length>xTe&&Date.now()-a.time>vTe){for(let o of a.context.abortListeners)try{o()}catch(d){ya(this.view.state,d)}a.context.abortListeners=null,this.running.splice(s--,1)}else a.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(a=>a.is(Q2)))&&(this.pendingStart=!0);let i=this.pendingStart?50:r.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(a=>a.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(ha);for(let r of e.active)r.isPending&&!this.running.some(n=>n.active.source==r.source)&&this.startQuery(r);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ms).updateSyncTime))}startQuery(t){let{state:e}=this.view,r=$p(e),n=new iH(e,r,t.explicit,this.view),i=new yTe(t,n);this.running.push(i),Promise.resolve(t.source(n)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Vb.of(null)}),ya(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ms).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],r=this.view.state.facet(Ms),n=this.view.state.field(ha);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let o=$p(s.updates.length?s.updates[0].startState:this.view.state),d=Math.min(o,s.done.from+(s.active.explicit?0:1)),m=new fy(s.active.source,s.active.explicit,d,s.done,s.done.from,(t=s.done.to)!==null&&t!==void 0?t:o);for(let y of s.updates)m=m.update(y,r);if(m.hasResult()){e.push(m);continue}}let a=n.active.find(o=>o.source==s.active.source);if(a&&a.isPending)if(s.done==null){let o=new zl(s.active.source,0);for(let d of s.updates)o=o.update(d,r);o.isPending||e.push(o)}else this.startQuery(a)}(e.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:u5.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(ha,!1);if(e&&e.tooltip&&this.view.state.facet(Ms).closeOnBlur){let r=e.open&&Nq(this.view,e.open.tooltip);(!r||!r.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Vb.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Q2.of(!1)}),20),this.composing=0}}}),_Te=typeof navigator=="object"&&/Win/.test(navigator.platform),wTe=hm.highest(Gt.domEventHandlers({keydown(t,e){let r=e.state.field(ha,!1);if(!r||!r.open||r.open.disabled||r.open.selected<0||t.key.length>1||t.ctrlKey&&!(_Te&&t.altKey)||t.metaKey)return!1;let n=r.open.options[r.open.selected],i=r.active.find(a=>a.source==n.source),s=n.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&h5(e,n),!1}})),STe=Gt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Wb={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},pp=Wr.define({map(t,e){let r=e.mapPos(t,-1,$o.TrackAfter);return r??void 0}}),d5=new class extends rf{};d5.startSide=1;d5.endSide=-1;const uH=so.define({create(){return rn.empty},update(t,e){if(t=t.map(e.changes),e.selection){let r=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:n=>n>=r.from&&n<=r.to})}for(let r of e.effects)r.is(pp)&&(t=t.update({add:[d5.range(r.value,r.value+1)]}));return t}});function kTe(){return[TTe,uH]}const SP="()[]{}<>";function hH(t){for(let e=0;e<SP.length;e+=2)if(SP.charCodeAt(e)==t)return SP.charAt(e+1);return EI(t<128?t:t+1)}function dH(t,e){return t.languageDataAt("closeBrackets",e)[0]||Wb}const CTe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),TTe=Gt.inputHandler.of((t,e,r,n)=>{if((CTe?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(n.length>2||n.length==2&&tu(ua(n,0))==1||e!=i.from||r!=i.to)return!1;let s=jTe(t.state,n);return s?(t.dispatch(s),!0):!1}),OTe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=dH(t,t.selection.main.head).brackets||Wb.brackets,i=null,s=t.changeByRange(a=>{if(a.empty){let o=ATe(t.doc,a.head);for(let d of n)if(d==o&&_C(t.doc,a.head)==hH(ua(d,0)))return{changes:{from:a.head-d.length,to:a.head+d.length},range:pt.cursor(a.head-d.length)}}return{range:i=a}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},PTe=[{key:"Backspace",run:OTe}];function jTe(t,e){let r=dH(t,t.selection.main.head),n=r.brackets||Wb.brackets;for(let i of n){let s=hH(ua(i,0));if(e==i)return s==i?MTe(t,i,n.indexOf(i+i+i)>-1,r):ETe(t,i,s,r.before||Wb.before);if(e==s&&fH(t,t.selection.main.from))return zTe(t,i,s)}return null}function fH(t,e){let r=!1;return t.field(uH).between(0,t.doc.length,n=>{n==e&&(r=!0)}),r}function _C(t,e){let r=t.sliceString(e,e+2);return r.slice(0,tu(ua(r,0)))}function ATe(t,e){let r=t.sliceString(e-2,e);return tu(ua(r,0))==r.length?r:r.slice(1)}function ETe(t,e,r,n){let i=null,s=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:r,from:a.to}],effects:pp.of(a.to+e.length),range:pt.range(a.anchor+e.length,a.head+e.length)};let o=_C(t.doc,a.head);return!o||/\s/.test(o)||n.indexOf(o)>-1?{changes:{insert:e+r,from:a.head},effects:pp.of(a.head+e.length),range:pt.cursor(a.head+e.length)}:{range:i=a}});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function zTe(t,e,r){let n=null,i=t.changeByRange(s=>s.empty&&_C(t.doc,s.head)==r?{changes:{from:s.head,to:s.head+r.length,insert:r},range:pt.cursor(s.head+r.length)}:n={range:s});return n?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function MTe(t,e,r,n){let i=n.stringPrefixes||Wb.stringPrefixes,s=null,a=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:e,from:o.to}],effects:pp.of(o.to+e.length),range:pt.range(o.anchor+e.length,o.head+e.length)};let d=o.head,m=_C(t.doc,d),y;if(m==e){if(NB(t,d))return{changes:{insert:e+e,from:d},effects:pp.of(d+e.length),range:pt.cursor(d+e.length)};if(fH(t,d)){let w=r&&t.sliceDoc(d,d+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:d,to:d+w.length,insert:w},range:pt.cursor(d+w.length)}}}else{if(r&&t.sliceDoc(d-2*e.length,d)==e+e&&(y=VB(t,d-2*e.length,i))>-1&&NB(t,y))return{changes:{insert:e+e+e+e,from:d},effects:pp.of(d+e.length),range:pt.cursor(d+e.length)};if(t.charCategorizer(d)(m)!=yi.Word&&VB(t,d,i)>-1&&!ITe(t,d,e,i))return{changes:{insert:e+e,from:d},effects:pp.of(d+e.length),range:pt.cursor(d+e.length)}}return{range:s=o}});return s?null:t.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function NB(t,e){let r=Ui(t).resolveInner(e+1);return r.parent&&r.from==e}function ITe(t,e,r,n){let i=Ui(t).resolveInner(e,-1),s=n.reduce((a,o)=>Math.max(a,o.length),0);for(let a=0;a<5;a++){let o=t.sliceDoc(i.from,Math.min(i.to,i.from+r.length+s)),d=o.indexOf(r);if(!d||d>-1&&n.indexOf(o.slice(0,d))>-1){let y=i.firstChild;for(;y&&y.from==i.from&&y.to-y.from>r.length+d;){if(t.sliceDoc(y.to-r.length,y.to)==r)return!1;y=y.firstChild}return!0}let m=i.to==e&&i.parent;if(!m)break;i=m}return!1}function VB(t,e,r){let n=t.charCategorizer(e);if(n(t.sliceDoc(e-1,e))!=yi.Word)return e;for(let i of r){let s=e-i.length;if(t.sliceDoc(s,e)==i&&n(t.sliceDoc(s-1,s))!=yi.Word)return s}return-1}function pH(t={}){return[wTe,ha,Ms.of(t),bTe,DTe,STe]}const mH=[{key:"Ctrl-Space",run:wP},{mac:"Alt-`",run:wP},{mac:"Alt-i",run:wP},{key:"Escape",run:gTe},{key:"ArrowDown",run:Lw(!0)},{key:"ArrowUp",run:Lw(!1)},{key:"PageDown",run:Lw(!0,"page")},{key:"PageUp",run:Lw(!1,"page")},{key:"Enter",run:mTe}],DTe=hm.highest(cC.computeN([Ms],t=>t.facet(Ms).defaultKeymap?[mH]:[]));class WB{constructor(e,r,n){this.from=e,this.to=r,this.diagnostic=n}}class sp{constructor(e,r,n){this.diagnostics=e,this.panel=r,this.selected=n}static init(e,r,n){let i=n.facet(Ub).markerFilter;i&&(e=i(e,n));let s=e.slice().sort((O,A)=>O.from-A.from||O.to-A.to),a=new vh,o=[],d=0,m=n.doc.iter(),y=0,b=n.doc.length;for(let O=0;;){let A=O==s.length?null:s[O];if(!A&&!o.length)break;let E,$;if(o.length)E=d,$=o.reduce((L,U)=>Math.min(L,U.to),A&&A.from>E?A.from:1e8);else{if(E=A.from,E>b)break;$=A.to,o.push(A),O++}for(;O<s.length;){let L=s[O];if(L.from==E&&(L.to>L.from||L.to==E))o.push(L),O++,$=Math.min(L.to,$);else{$=Math.min(L.from,$);break}}$=Math.min($,b);let R=!1;if(o.some(L=>L.from==E&&(L.to==$||$==b))&&(R=E==$,!R&&$-E<10)){let L=E-(y+m.value.length);L>0&&(m.next(L),y=E);for(let U=E;;){if(U>=$){R=!0;break}if(!m.lineBreak&&y+m.value.length>U)break;U=y+m.value.length,y+=m.value.length,m.next()}}let F=GTe(o);if(R)a.add(E,E,Or.widget({widget:new UTe(F),diagnostics:o.slice()}));else{let L=o.reduce((U,Q)=>Q.markClass?U+" "+Q.markClass:U,"");a.add(E,$,Or.mark({class:"cm-lintRange cm-lintRange-"+F+L,diagnostics:o.slice(),inclusiveEnd:o.some(U=>U.to>$)}))}if(d=$,d==b)break;for(let L=0;L<o.length;L++)o[L].to<=d&&o.splice(L--,1)}let w=a.finish();return new sp(w,r,s0(w))}}function s0(t,e=null,r=0){let n=null;return t.between(r,1e9,(i,s,{spec:a})=>{if(!(e&&a.diagnostics.indexOf(e)<0))if(!n)n=new WB(i,s,e||a.diagnostics[0]);else{if(a.diagnostics.indexOf(n.diagnostic)<0)return!1;n=new WB(n.from,s,n.diagnostic)}}),n}function RTe(t,e){let r=e.pos,n=e.end||r,i=t.state.facet(Ub).hideOn(t,r,n);if(i!=null)return i;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(a=>a.is(gH))||t.changes.touchesRange(s.from,Math.max(s.to,n)))}function LTe(t,e){return t.field(Ha,!1)?e:e.concat(Wr.appendConfig.of(XTe))}const gH=Wr.define(),f5=Wr.define(),yH=Wr.define(),Ha=so.define({create(){return new sp(Or.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let r=t.diagnostics.map(e.changes),n=null,i=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);n=s0(r,t.selected.diagnostic,s)||s0(r,null,s)}!r.size&&i&&e.state.facet(Ub).autoPanel&&(i=null),t=new sp(r,i,n)}for(let r of e.effects)if(r.is(gH)){let n=e.state.facet(Ub).autoPanel?r.value.length?qb.open:null:t.panel;t=sp.init(r.value,n,e.state)}else r.is(f5)?t=new sp(t.diagnostics,r.value?qb.open:null,t.selected):r.is(yH)&&(t=new sp(t.diagnostics,t.panel,r.value));return t},provide:t=>[Lb.from(t,e=>e.panel),Gt.decorations.from(t,e=>e.diagnostics)]}),FTe=Or.mark({class:"cm-lintRange cm-lintRange-active"});function BTe(t,e,r){let{diagnostics:n}=t.state.field(Ha),i,s=-1,a=-1;n.between(e-(r<0?1:0),e+(r>0?1:0),(d,m,{spec:y})=>{if(e>=d&&e<=m&&(d==m||(e>d||r>0)&&(e<m||r<0)))return i=y.diagnostics,s=d,a=m,!1});let o=t.state.facet(Ub).tooltipFilter;return i&&o&&(i=o(i,t.state)),i?{pos:s,end:a,above:t.state.doc.lineAt(s).to<a,create(){return{dom:$Te(t,i)}}}:null}function $Te(t,e){return Xn("ul",{class:"cm-tooltip-lint"},e.map(r=>vH(t,r,!1)))}const NTe=t=>{let e=t.state.field(Ha,!1);(!e||!e.panel)&&t.dispatch({effects:LTe(t.state,[f5.of(!0)])});let r=XI(t,qb.open);return r&&r.dom.querySelector(".cm-panel-lint ul").focus(),!0},UB=t=>{let e=t.state.field(Ha,!1);return!e||!e.panel?!1:(t.dispatch({effects:f5.of(!1)}),!0)},VTe=t=>{let e=t.state.field(Ha,!1);if(!e)return!1;let r=t.state.selection.main,n=e.diagnostics.iter(r.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==r.from&&n.to==r.to)?!1:(t.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},WTe=[{key:"Mod-Shift-m",run:NTe,preventDefault:!0},{key:"F8",run:VTe}],Ub=ur.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...bu(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:qB,tooltipFilter:qB,needsRefresh:(e,r)=>e?r?n=>e(n)||r(n):e:r,hideOn:(e,r)=>e?r?(n,i,s)=>e(n,i,s)||r(n,i,s):e:r,autoPanel:(e,r)=>e||r})}}});function qB(t,e){return t?e?(r,n)=>e(t(r,n),n):t:e}function xH(t){let e=[];if(t)e:for(let{name:r}of t){for(let n=0;n<r.length;n++){let i=r[n];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function vH(t,e,r){var n;let i=r?xH(e.actions):[];return Xn("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Xn("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(n=e.actions)===null||n===void 0?void 0:n.map((s,a)=>{let o=!1,d=O=>{if(O.preventDefault(),o)return;o=!0;let A=s0(t.state.field(Ha).diagnostics,e);A&&s.apply(t,A.from,A.to)},{name:m}=s,y=i[a]?m.indexOf(i[a]):-1,b=y<0?m:[m.slice(0,y),Xn("u",m.slice(y,y+1)),m.slice(y+1)],w=s.markClass?" "+s.markClass:"";return Xn("button",{type:"button",class:"cm-diagnosticAction"+w,onclick:d,onmousedown:d,"aria-label":` Action: ${m}${y<0?"":` (access key "${i[a]})"`}.`},b)}),e.source&&Xn("div",{class:"cm-diagnosticSource"},e.source))}class UTe extends _u{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Xn("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class QB{constructor(e,r){this.diagnostic=r,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=vH(e,r,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class qb{constructor(e){this.view=e,this.items=[];let r=i=>{if(!(i.ctrlKey||i.altKey||i.metaKey)){if(i.keyCode==27)UB(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],a=xH(s.actions);for(let o=0;o<a.length;o++)if(a[o].toUpperCase().charCodeAt(0)==i.keyCode){let d=s0(this.view.state.field(Ha).diagnostics,s);d&&s.actions[o].apply(e,d.from,d.to)}}else return;i.preventDefault()}},n=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=Xn("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:r,onclick:n}),this.dom=Xn("div",{class:"cm-panel-lint"},this.list,Xn("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>UB(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Ha).selected;if(!e)return-1;for(let r=0;r<this.items.length;r++)if(this.items[r].diagnostic==e.diagnostic)return r;return-1}update(){let{diagnostics:e,selected:r}=this.view.state.field(Ha),n=0,i=!1,s=null,a=new Set;for(e.between(0,this.view.state.doc.length,(o,d,{spec:m})=>{for(let y of m.diagnostics){if(a.has(y))continue;a.add(y);let b=-1,w;for(let O=n;O<this.items.length;O++)if(this.items[O].diagnostic==y){b=O;break}b<0?(w=new QB(this.view,y),this.items.splice(n,0,w),i=!0):(w=this.items[b],b>n&&(this.items.splice(n,b-n),i=!0)),r&&w.diagnostic==r.diagnostic?w.dom.hasAttribute("aria-selected")||(w.dom.setAttribute("aria-selected","true"),s=w):w.dom.hasAttribute("aria-selected")&&w.dom.removeAttribute("aria-selected"),n++}});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new QB(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:d})=>{let m=d.height/this.list.offsetHeight;o.top<d.top?this.list.scrollTop-=(d.top-o.top)/m:o.bottom>d.bottom&&(this.list.scrollTop+=(o.bottom-d.bottom)/m)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function r(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)r();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)r()}moveSelection(e){if(this.selectedIndex<0)return;let r=this.view.state.field(Ha),n=s0(r.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:yH.of(n)})}static open(e){return new qb(e)}}function qTe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Fw(t){return qTe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const QTe=Gt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Fw("#d11")},".cm-lintRange-warning":{backgroundImage:Fw("orange")},".cm-lintRange-info":{backgroundImage:Fw("#999")},".cm-lintRange-hint":{backgroundImage:Fw("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function HTe(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function GTe(t){let e="hint",r=1;for(let n of t){let i=HTe(n.severity);i>r&&(r=i,e=n.severity)}return e}const XTe=[Ha,Gt.decorations.compute([Ha],t=>{let{selected:e,panel:r}=t.field(Ha);return!e||!r||e.from==e.to?Or.none:Or.set([FTe.range(e.from,e.to)])}),$Se(BTe,{hideOn:RTe}),QTe];var HB=function(e){e===void 0&&(e={});var{crosshairCursor:r=!1}=e,n=[];e.closeBracketsKeymap!==!1&&(n=n.concat(PTe)),e.defaultKeymap!==!1&&(n=n.concat(bCe)),e.searchKeymap!==!1&&(n=n.concat(HCe)),e.historyKeymap!==!1&&(n=n.concat(Oke)),e.foldKeymap!==!1&&(n=n.concat(V2e)),e.completionKeymap!==!1&&(n=n.concat(mH)),e.lintKeymap!==!1&&(n=n.concat(WTe));var i=[];return e.lineNumbers!==!1&&i.push(JSe()),e.highlightActiveLineGutter!==!1&&i.push(r2e()),e.highlightSpecialChars!==!1&&i.push(mSe()),e.history!==!1&&i.push(xke()),e.foldGutter!==!1&&i.push(Q2e()),e.drawSelection!==!1&&i.push(iSe()),e.dropCursor!==!1&&i.push(cSe()),e.allowMultipleSelections!==!1&&i.push(pn.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(z2e()),e.syntaxHighlighting!==!1&&i.push(hQ(K2e,{fallback:!0})),e.bracketMatching!==!1&&i.push(nke()),e.closeBrackets!==!1&&i.push(kTe()),e.autocompletion!==!1&&i.push(pH()),e.rectangularSelection!==!1&&i.push(jSe()),r!==!1&&i.push(zSe()),e.highlightActiveLine!==!1&&i.push(_Se()),e.highlightSelectionMatches!==!1&&i.push(TCe()),e.tabSize&&typeof e.tabSize=="number"&&i.push(dC.of(" ".repeat(e.tabSize))),i.concat([cC.of(n.flat())]).filter(Boolean)};const KTe="#e5c07b",GB="#e06c75",ZTe="#56b6c2",YTe="#ffffff",AS="#abb2bf",IE="#7d8799",JTe="#61afef",eOe="#98c379",XB="#d19a66",tOe="#c678dd",rOe="#21252b",KB="#2c313a",ZB="#282c34",kP="#353a42",nOe="#3E4451",YB="#528bff",iOe=Gt.theme({"&":{color:AS,backgroundColor:ZB},".cm-content":{caretColor:YB},".cm-cursor, .cm-dropCursor":{borderLeftColor:YB},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:nOe},".cm-panels":{backgroundColor:rOe,color:AS},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:ZB,color:IE,border:"none"},".cm-activeLineGutter":{backgroundColor:KB},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:kP},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:kP,borderBottomColor:kP},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:KB,color:AS}}},{dark:!0}),sOe=D1.define([{tag:Ne.keyword,color:tOe},{tag:[Ne.name,Ne.deleted,Ne.character,Ne.propertyName,Ne.macroName],color:GB},{tag:[Ne.function(Ne.variableName),Ne.labelName],color:JTe},{tag:[Ne.color,Ne.constant(Ne.name),Ne.standard(Ne.name)],color:XB},{tag:[Ne.definition(Ne.name),Ne.separator],color:AS},{tag:[Ne.typeName,Ne.className,Ne.number,Ne.changed,Ne.annotation,Ne.modifier,Ne.self,Ne.namespace],color:KTe},{tag:[Ne.operator,Ne.operatorKeyword,Ne.url,Ne.escape,Ne.regexp,Ne.link,Ne.special(Ne.string)],color:ZTe},{tag:[Ne.meta,Ne.comment],color:IE},{tag:Ne.strong,fontWeight:"bold"},{tag:Ne.emphasis,fontStyle:"italic"},{tag:Ne.strikethrough,textDecoration:"line-through"},{tag:Ne.link,color:IE,textDecoration:"underline"},{tag:Ne.heading,fontWeight:"bold",color:GB},{tag:[Ne.atom,Ne.bool,Ne.special(Ne.variableName)],color:XB},{tag:[Ne.processingInstruction,Ne.string,Ne.inserted],color:eOe},{tag:Ne.invalid,color:YTe}]),oOe=[iOe,hQ(sOe)];var aOe=Gt.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),lOe=function(e){e===void 0&&(e={});var{indentWithTab:r=!0,editable:n=!0,readOnly:i=!1,theme:s="light",placeholder:a="",basicSetup:o=!0}=e,d=[];switch(r&&d.unshift(cC.of([_Ce])),o&&(typeof o=="boolean"?d.unshift(HB()):d.unshift(HB(o))),a&&d.unshift(CSe(a)),s){case"light":d.push(aOe);break;case"dark":d.push(oOe);break;case"none":break;default:d.push(s);break}return n===!1&&d.push(Gt.editable.of(!1)),i&&d.push(pn.readOnly.of(!0)),[...d]},cOe=t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map(e=>t.state.sliceDoc(e.from,e.to)),selectedText:t.state.selection.ranges.some(e=>!e.empty)});class uOe{constructor(e,r){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=r,this.timeoutMS=r,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(r=>{try{r()}catch(n){console.error("TimeoutLatch callback error:",n)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class JB{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var CP=null,hOe=()=>typeof window>"u"?new JB:(CP||(CP=new JB),CP),e6=vu.define(),dOe=200,fOe=[];function pOe(t){var{value:e,selection:r,onChange:n,onStatistics:i,onCreateEditor:s,onUpdate:a,extensions:o=fOe,autoFocus:d,theme:m="light",height:y=null,minHeight:b=null,maxHeight:w=null,width:O=null,minWidth:A=null,maxWidth:E=null,placeholder:$="",editable:R=!0,readOnly:F=!1,indentWithTab:L=!0,basicSetup:U=!0,root:Q,initialState:Y}=t,[Z,J]=I.useState(),[re,he]=I.useState(),[le,Ze]=I.useState(),Ee=I.useState(()=>({current:null}))[0],qe=I.useState(()=>({current:null}))[0],et=Gt.theme({"&":{height:y,minHeight:b,maxHeight:w,width:O,minWidth:A,maxWidth:E},"& .cm-scroller":{height:"100% !important"}}),at=Gt.updateListener.of(Ge=>{if(Ge.docChanged&&typeof n=="function"&&!Ge.transactions.some(Oe=>Oe.annotation(e6))){Ee.current?Ee.current.reset():(Ee.current=new uOe(()=>{if(qe.current){var Oe=qe.current;qe.current=null,Oe()}Ee.current=null},dOe),hOe().add(Ee.current));var Le=Ge.state.doc,Ie=Le.toString();n(Ie,Ge)}i&&i(cOe(Ge))}),Be=lOe({theme:m,editable:R,readOnly:F,placeholder:$,indentWithTab:L,basicSetup:U}),Me=[at,et,...Be];return a&&typeof a=="function"&&Me.push(Gt.updateListener.of(a)),Me=Me.concat(o),I.useLayoutEffect(()=>{if(Z&&!le){var Ge={doc:e,selection:r,extensions:Me},Le=Y?pn.fromJSON(Y.json,Ge,Y.fields):pn.create(Ge);if(Ze(Le),!re){var Ie=new Gt({state:Le,parent:Z,root:Q});he(Ie),s&&s(Ie,Le)}}return()=>{re&&(Ze(void 0),he(void 0))}},[Z,le]),I.useEffect(()=>{t.container&&J(t.container)},[t.container]),I.useEffect(()=>()=>{re&&(re.destroy(),he(void 0)),Ee.current&&(Ee.current.cancel(),Ee.current=null)},[re]),I.useEffect(()=>{d&&re&&re.focus()},[d,re]),I.useEffect(()=>{re&&re.dispatch({effects:Wr.reconfigure.of(Me)})},[m,o,y,b,w,O,A,E,$,R,F,L,U,n,a]),I.useEffect(()=>{if(e!==void 0){var Ge=re?re.state.doc.toString():"";if(re&&e!==Ge){var Le=Ee.current&&!Ee.current.isDone,Ie=()=>{re&&e!==re.state.doc.toString()&&re.dispatch({changes:{from:0,to:re.state.doc.toString().length,insert:e||""},annotations:[e6.of(!0)]})};Le?qe.current=Ie:Ie()}}},[e,re]),{state:le,setState:Ze,view:re,setView:he,container:Z,setContainer:J}}var mOe=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],p5=I.forwardRef((t,e)=>{var{className:r,value:n="",selection:i,extensions:s=[],onChange:a,onStatistics:o,onCreateEditor:d,onUpdate:m,autoFocus:y,theme:b="light",height:w,minHeight:O,maxHeight:A,width:E,minWidth:$,maxWidth:R,basicSetup:F,placeholder:L,indentWithTab:U,editable:Q,readOnly:Y,root:Z,initialState:J}=t,re=uW(t,mOe),he=I.useRef(null),{state:le,view:Ze,container:Ee,setContainer:qe}=pOe({root:Z,value:n,autoFocus:y,theme:b,height:w,minHeight:O,maxHeight:A,width:E,minWidth:$,maxWidth:R,basicSetup:F,placeholder:L,indentWithTab:U,editable:Q,readOnly:Y,selection:i,onChange:a,onStatistics:o,onCreateEditor:d,onUpdate:m,extensions:s,initialState:J});I.useImperativeHandle(e,()=>({editor:he.current,state:le,view:Ze}),[he,Ee,le,Ze]);var et=I.useCallback(Be=>{he.current=Be,qe(Be)},[qe]);if(typeof n!="string")throw new Error("value must be typeof string but got "+typeof n);var at=typeof b=="string"?"cm-theme-"+b:"cm-theme";return u.jsx("div",Hd({ref:et,className:""+at+(r?" "+r:"")},re))});p5.displayName="CodeMirror";var t6={};class G2{constructor(e,r,n,i,s,a,o,d,m,y=0,b){this.p=e,this.stack=r,this.state=n,this.reducePos=i,this.pos=s,this.score=a,this.buffer=o,this.bufferBase=d,this.curContext=m,this.lookAhead=y,this.parent=b}toString(){return`[${this.stack.filter((e,r)=>r%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,r,n=0){let i=e.parser.context;return new G2(e,[],r,n,n,0,[],0,i?new r6(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,r){this.stack.push(this.state,r,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var r;let n=e>>19,i=e&65535,{parser:s}=this.p,a=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),o=s.dynamicPrecedence(i);if(o&&(this.score+=o),n==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(i,this.reducePos);return}let d=this.stack.length-(n-1)*3-(e&262144?6:0),m=d?this.stack[d-2]:this.p.ranges[0].from,y=this.reducePos-m;y>=2e3&&!(!((r=this.p.parser.nodeSet.types[i])===null||r===void 0)&&r.isAnonymous)&&(m==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=y):this.p.lastBigReductionSize<y&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=m,this.p.lastBigReductionSize=y));let b=d?this.stack[d-1]:0,w=this.bufferBase+this.buffer.length-b;if(i<s.minRepeatTerm||e&131072){let O=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,m,O,w+4,!0)}if(e&262144)this.state=this.stack[d];else{let O=this.stack[d-3];this.state=s.getGoto(O,i,!0)}for(;this.stack.length>d;)this.stack.pop();this.reduceContext(i,m)}storeNode(e,r,n,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,o=this.buffer.length;if(o==0&&a.parent&&(o=a.bufferBase-a.parent.bufferBase,a=a.parent),o>0&&a.buffer[o-4]==0&&a.buffer[o-1]>-1){if(r==n)return;if(a.buffer[o-2]>=r){a.buffer[o-2]=n;return}}}if(!s||this.pos==n)this.buffer.push(e,r,n,i);else{let a=this.buffer.length;if(a>0&&(this.buffer[a-4]!=0||this.buffer[a-1]<0)){let o=!1;for(let d=a;d>0&&this.buffer[d-2]>n;d-=4)if(this.buffer[d-1]>=0){o=!0;break}if(o)for(;a>0&&this.buffer[a-2]>n;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,i>4&&(i-=4)}this.buffer[a]=e,this.buffer[a+1]=r,this.buffer[a+2]=n,this.buffer[a+3]=i}}shift(e,r,n,i){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=i,this.shiftContext(r,n),r<=this.p.parser.maxNode&&this.buffer.push(r,n,i,4);else{let s=e,{parser:a}=this.p;this.pos=i;let o=a.stateFlag(s,1);!o&&(i>n||r<=a.maxNode)&&(this.reducePos=i),this.pushState(s,o?n:Math.min(n,this.reducePos)),this.shiftContext(r,n),r<=a.maxNode&&this.buffer.push(r,n,i,4)}}apply(e,r,n,i){e&65536?this.reduce(e):this.shift(e,r,n,i)}useNode(e,r){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(r,i),this.buffer.push(n,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,r=e.buffer.length;for(;r>0&&e.buffer[r-2]>e.reducePos;)r-=4;let n=e.buffer.slice(r),i=e.bufferBase+r;for(;e&&i==e.bufferBase;)e=e.parent;return new G2(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,r){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,r,4),this.storeNode(0,this.pos,r,n?8:4),this.pos=this.reducePos=r,this.score-=190}canShift(e){for(let r=new gOe(this);;){let n=this.p.parser.stateSlot(r.state,4)||this.p.parser.hasAction(r.state,e);if(n==0)return!1;if(!(n&65536))return!0;r.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let r=this.p.parser.nextStates(this.state);if(r.length>8||this.stack.length>=120){let i=[];for(let s=0,a;s<r.length;s+=2)(a=r[s+1])!=this.state&&this.p.parser.hasAction(a,e)&&i.push(r[s],a);if(this.stack.length<120)for(let s=0;i.length<8&&s<r.length;s+=2){let a=r[s+1];i.some((o,d)=>d&1&&o==a)||i.push(r[s],a)}r=i}let n=[];for(let i=0;i<r.length&&n.length<4;i+=2){let s=r[i+1];if(s==this.state)continue;let a=this.split();a.pushState(s,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(r[i],this.pos),a.reducePos=this.pos,a.score-=200,n.push(a)}return n}forceReduce(){let{parser:e}=this.p,r=e.stateSlot(this.state,5);if(!(r&65536))return!1;if(!e.validAction(this.state,r)){let n=r>>19,i=r&65535,s=this.stack.length-n*3;if(s<0||e.getGoto(this.stack[s],i,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;r=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(r),!0}findForcedReduction(){let{parser:e}=this.p,r=[],n=(i,s)=>{if(!r.includes(i))return r.push(i),e.allActions(i,a=>{if(!(a&393216))if(a&65536){let o=(a>>19)-s;if(o>1){let d=a&65535,m=this.stack.length-o*3;if(m>=0&&e.getGoto(this.stack[m],d,!1)>=0)return o<<19|65536|d}}else{let o=n(a,s+1);if(o!=null)return o}})};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let r=0;r<this.stack.length;r+=3)if(this.stack[r]!=e.stack[r])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,r){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(r)))}reduceContext(e,r){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(r)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let r=new r6(this.curContext.tracker,e);r.hash!=this.curContext.hash&&this.emitContext(),this.curContext=r}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class r6{constructor(e,r){this.tracker=e,this.context=r,this.hash=e.strict?e.hash(r):0}}class gOe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let r=e&65535,n=e>>19;n==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(n-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],r,!0);this.state=i}}class X2{constructor(e,r,n){this.stack=e,this.pos=r,this.index=n,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,r=e.bufferBase+e.buffer.length){return new X2(e,r,r-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new X2(this.stack,this.pos,this.index)}}function hv(t,e=Uint16Array){if(typeof t!="string")return t;let r=null;for(let n=0,i=0;n<t.length;){let s=0;for(;;){let a=t.charCodeAt(n++),o=!1;if(a==126){s=65535;break}a>=92&&a--,a>=34&&a--;let d=a-32;if(d>=46&&(d-=46,o=!0),s+=d,o)break;s*=46}r?r[i++]=s:r=new e(s)}return r}class ES{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const n6=new ES;class yOe{constructor(e,r){this.input=e,this.ranges=r,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=n6,this.rangeIndex=0,this.pos=this.chunkPos=r[0].from,this.range=r[0],this.end=r[r.length-1].to,this.readNext()}resolveOffset(e,r){let n=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<n.from;){if(!i)return null;let a=this.ranges[--i];s-=n.from-a.to,n=a}for(;r<0?s>n.to:s>=n.to;){if(i==this.ranges.length-1)return null;let a=this.ranges[++i];s+=a.from-n.to,n=a}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let r of this.ranges)if(r.to>e)return Math.max(e,r.from);return this.end}peek(e){let r=this.chunkOff+e,n,i;if(r>=0&&r<this.chunk.length)n=this.pos+e,i=this.chunk.charCodeAt(r);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(n=s,n>=this.chunk2Pos&&n<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(n-this.chunk2Pos);else{let a=this.rangeIndex,o=this.range;for(;o.to<=n;)o=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=n),n+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-n)),i=this.chunk2.charCodeAt(0)}}return n>=this.token.lookAhead&&(this.token.lookAhead=n+1),i}acceptToken(e,r=0){let n=r?this.resolveOffset(r,-1):this.pos;if(n==null||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}acceptTokenTo(e,r){this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:r}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=r,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),r=this.pos+e.length;this.chunk=r>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,r){if(r?(this.token=r,r.start=e,r.lookAhead=e+1,r.value=r.extended=-1):this.token=n6,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,r){if(e>=this.chunkPos&&r<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,r-this.chunkPos);if(e>=this.chunk2Pos&&r<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,r-this.chunk2Pos);if(e>=this.range.from&&r<=this.range.to)return this.input.read(e,r);let n="";for(let i of this.ranges){if(i.from>=r)break;i.to>e&&(n+=this.input.read(Math.max(i.from,e),Math.min(i.to,r)))}return n}}class py{constructor(e,r){this.data=e,this.id=r}token(e,r){let{parser:n}=r.p;_H(this.data,e,r,this.id,n.data,n.tokenPrecTable)}}py.prototype.contextual=py.prototype.fallback=py.prototype.extend=!1;class bH{constructor(e,r,n){this.precTable=r,this.elseToken=n,this.data=typeof e=="string"?hv(e):e}token(e,r){let n=e.pos,i=0;for(;;){let s=e.next<0,a=e.resolveOffset(1,1);if(_H(this.data,e,r,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(s||i++,a==null)break;e.reset(a,e.token)}i&&(e.reset(n,e.token),e.acceptToken(this.elseToken,i))}}bH.prototype.contextual=py.prototype.fallback=py.prototype.extend=!1;class dm{constructor(e,r={}){this.token=e,this.contextual=!!r.contextual,this.fallback=!!r.fallback,this.extend=!!r.extend}}function _H(t,e,r,n,i,s){let a=0,o=1<<n,{dialect:d}=r.p.parser;e:for(;o&t[a];){let m=t[a+1];for(let O=a+3;O<m;O+=2)if((t[O+1]&o)>0){let A=t[O];if(d.allows(A)&&(e.token.value==-1||e.token.value==A||xOe(A,e.token.value,i,s))){e.acceptToken(A);break}}let y=e.next,b=0,w=t[a+2];if(e.next<0&&w>b&&t[m+w*3-3]==65535){a=t[m+w*3-1];continue e}for(;b<w;){let O=b+w>>1,A=m+O+(O<<1),E=t[A],$=t[A+1]||65536;if(y<E)w=O;else if(y>=$)b=O+1;else{a=t[A+2],e.advance();continue e}}break}}function i6(t,e,r){for(let n=e,i;(i=t[n])!=65535;n++)if(i==r)return n-e;return-1}function xOe(t,e,r,n){let i=i6(r,n,e);return i<0||i6(r,n,t)<i}const Na=typeof process<"u"&&t6&&/\bparse\b/.test(t6.LOG);let TP=null;function s6(t,e,r){let n=t.cursor(Si.IncludeAnonymous);for(n.moveTo(e);;)if(!(r<0?n.childBefore(e):n.childAfter(e)))for(;;){if((r<0?n.to<e:n.from>e)&&!n.type.isError)return r<0?Math.max(0,Math.min(n.to-1,e-25)):Math.min(t.length,Math.max(n.from+1,e+25));if(r<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return r<0?0:t.length}}class vOe{constructor(e,r){this.fragments=e,this.nodeSet=r,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?s6(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?s6(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let r=this.trees.length-1;if(r<0)return this.nextFragment(),null;let n=this.trees[r],i=this.index[r];if(i==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=n.children[i],a=this.start[r]+n.positions[i];if(a>e)return this.nextStart=a,null;if(s instanceof Vi){if(a==e){if(a<this.safeFrom)return null;let o=a+s.length;if(o<=this.safeTo){let d=s.prop(en.lookAhead);if(!d||o+d<this.fragment.to)return s}}this.index[r]++,a+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(a),this.index.push(0))}else this.index[r]++,this.nextStart=a+s.length}}}class bOe{constructor(e,r){this.stream=r,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(n=>new ES)}getActions(e){let r=0,n=null,{parser:i}=e.p,{tokenizers:s}=i,a=i.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,d=0;for(let m=0;m<s.length;m++){if(!(1<<m&a))continue;let y=s[m],b=this.tokens[m];if(!(n&&!y.fallback)&&((y.contextual||b.start!=e.pos||b.mask!=a||b.context!=o)&&(this.updateCachedToken(b,y,e),b.mask=a,b.context=o),b.lookAhead>b.end+25&&(d=Math.max(b.lookAhead,d)),b.value!=0)){let w=r;if(b.extended>-1&&(r=this.addActions(e,b.extended,b.end,r)),r=this.addActions(e,b.value,b.end,r),!y.extend&&(n=b,r>w))break}}for(;this.actions.length>r;)this.actions.pop();return d&&e.setLookAhead(d),!n&&e.pos==this.stream.end&&(n=new ES,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,r=this.addActions(e,n.value,n.end,r)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let r=new ES,{pos:n,p:i}=e;return r.start=n,r.end=Math.min(n+1,i.stream.end),r.value=n==i.stream.end?i.parser.eofTerm:0,r}updateCachedToken(e,r,n){let i=this.stream.clipPos(n.pos);if(r.token(this.stream.reset(i,e),n),e.value>-1){let{parser:s}=n.p;for(let a=0;a<s.specialized.length;a++)if(s.specialized[a]==e.value){let o=s.specializers[a](this.stream.read(e.start,e.end),n);if(o>=0&&n.p.parser.dialect.allows(o>>1)){o&1?e.extended=o>>1:e.value=o>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,r,n,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=r,this.actions[i++]=n,i}addActions(e,r,n,i){let{state:s}=e,{parser:a}=e.p,{data:o}=a;for(let d=0;d<2;d++)for(let m=a.stateSlot(s,d?2:1);;m+=3){if(o[m]==65535)if(o[m+1]==1)m=Uu(o,m+2);else{i==0&&o[m+1]==2&&(i=this.putAction(Uu(o,m+2),r,n,i));break}o[m]==r&&(i=this.putAction(Uu(o,m+1),r,n,i))}return i}}class _Oe{constructor(e,r,n,i){this.parser=e,this.input=r,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new yOe(r,i),this.tokens=new bOe(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[G2.start(this,e.top[0],s)],this.fragments=n.length&&this.stream.end-s>e.bufferLength*4?new vOe(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,r=this.minStackPos,n=this.stacks=[],i,s;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let o=e[a];for(;;){if(this.tokens.mainToken=null,o.pos>r)n.push(o);else{if(this.advanceStack(o,n,e))continue;{i||(i=[],s=[]),i.push(o);let d=this.tokens.getMainToken(o);s.push(d.value,d.end)}}break}}if(!n.length){let a=i&&kOe(i);if(a)return Na&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw Na&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&i){let a=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,n);if(a)return Na&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(n.length>a)for(n.sort((o,d)=>d.score-o.score);n.length>a;)n.pop();n.some(o=>o.reducePos>r)&&this.recovering--}else if(n.length>1){e:for(let a=0;a<n.length-1;a++){let o=n[a];for(let d=a+1;d<n.length;d++){let m=n[d];if(o.sameState(m)||o.buffer.length>500&&m.buffer.length>500)if((o.score-m.score||o.buffer.length-m.buffer.length)>0)n.splice(d--,1);else{n.splice(a--,1);continue e}}}n.length>12&&(n.sort((a,o)=>o.score-a.score),n.splice(12,n.length-12))}this.minStackPos=n[0].pos;for(let a=1;a<n.length;a++)n[a].pos<this.minStackPos&&(this.minStackPos=n[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,r,n){let i=e.pos,{parser:s}=this,a=Na?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let m=e.curContext&&e.curContext.tracker.strict,y=m?e.curContext.hash:0;for(let b=this.fragments.nodeAt(i);b;){let w=this.parser.nodeSet.types[b.type.id]==b.type?s.getGoto(e.state,b.type.id):-1;if(w>-1&&b.length&&(!m||(b.prop(en.contextHash)||0)==y))return e.useNode(b,w),Na&&console.log(a+this.stackID(e)+` (via reuse of ${s.getName(b.type.id)})`),!0;if(!(b instanceof Vi)||b.children.length==0||b.positions[0]>0)break;let O=b.children[0];if(O instanceof Vi&&b.positions[0]==0)b=O;else break}}let o=s.stateSlot(e.state,4);if(o>0)return e.reduce(o),Na&&console.log(a+this.stackID(e)+` (via always-reduce ${s.getName(o&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let d=this.tokens.getActions(e);for(let m=0;m<d.length;){let y=d[m++],b=d[m++],w=d[m++],O=m==d.length||!n,A=O?e:e.split(),E=this.tokens.mainToken;if(A.apply(y,b,E?E.start:A.pos,w),Na&&console.log(a+this.stackID(A)+` (via ${y&65536?`reduce of ${s.getName(y&65535)}`:"shift"} for ${s.getName(b)} @ ${i}${A==e?"":", split"})`),O)return!0;A.pos>i?r.push(A):n.push(A)}return!1}advanceFully(e,r){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return o6(e,r),!0}}runRecovery(e,r,n){let i=null,s=!1;for(let a=0;a<e.length;a++){let o=e[a],d=r[a<<1],m=r[(a<<1)+1],y=Na?this.stackID(o)+" -> ":"";if(o.deadEnd&&(s||(s=!0,o.restart(),Na&&console.log(y+this.stackID(o)+" (restarted)"),this.advanceFully(o,n))))continue;let b=o.split(),w=y;for(let O=0;O<10&&b.forceReduce()&&(Na&&console.log(w+this.stackID(b)+" (via force-reduce)"),!this.advanceFully(b,n));O++)Na&&(w=this.stackID(b)+" -> ");for(let O of o.recoverByInsert(d))Na&&console.log(y+this.stackID(O)+" (via recover-insert)"),this.advanceFully(O,n);this.stream.end>o.pos?(m==o.pos&&(m++,d=0),o.recoverByDelete(d,m),Na&&console.log(y+this.stackID(o)+` (via recover-delete ${this.parser.getName(d)})`),o6(o,n)):(!i||i.score<b.score)&&(i=b)}return i}stackToTree(e){return e.close(),Vi.build({buffer:X2.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let r=(TP||(TP=new WeakMap)).get(e);return r||TP.set(e,r=String.fromCodePoint(this.nextStackID++)),r+e}}function o6(t,e){for(let r=0;r<e.length;r++){let n=e[r];if(n.pos==t.pos&&n.sameState(t)){e[r].score<t.score&&(e[r]=t);return}}e.push(t)}class wOe{constructor(e,r,n){this.source=e,this.flags=r,this.disabled=n}allows(e){return!this.disabled||this.disabled[e]==0}}const OP=t=>t;class SOe{constructor(e){this.start=e.start,this.shift=e.shift||OP,this.reduce=e.reduce||OP,this.reuse=e.reuse||OP,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class o0 extends Zq{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let r=e.nodeNames.split(" ");this.minRepeatTerm=r.length;for(let o=0;o<e.repeatNodeCount;o++)r.push("");let n=Object.keys(e.topRules).map(o=>e.topRules[o][1]),i=[];for(let o=0;o<r.length;o++)i.push([]);function s(o,d,m){i[o].push([d,d.deserialize(String(m))])}if(e.nodeProps)for(let o of e.nodeProps){let d=o[0];typeof d=="string"&&(d=en[d]);for(let m=1;m<o.length;){let y=o[m++];if(y>=0)s(y,d,o[m++]);else{let b=o[m+-y];for(let w=-y;w>0;w--)s(o[m++],d,b);m++}}}this.nodeSet=new KI(r.map((o,d)=>Oa.define({name:d>=this.minRepeatTerm?void 0:o,id:d,props:i[d],top:n.indexOf(d)>-1,error:d==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(d)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Hq;let a=hv(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let o=0;o<this.specializerSpecs.length;o++)this.specialized[o]=this.specializerSpecs[o].term;this.specializers=this.specializerSpecs.map(a6),this.states=hv(e.states,Uint32Array),this.data=hv(e.stateData),this.goto=hv(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(o=>typeof o=="number"?new py(a,o):o),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,r,n){let i=new _Oe(this,e,r,n);for(let s of this.wrappers)i=s(i,e,r,n);return i}getGoto(e,r,n=!1){let i=this.goto;if(r>=i[0])return-1;for(let s=i[r+1];;){let a=i[s++],o=a&1,d=i[s++];if(o&&n)return d;for(let m=s+(a>>1);s<m;s++)if(i[s]==e)return d;if(o)return-1}}hasAction(e,r){let n=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),a;;s+=3){if((a=n[s])==65535)if(n[s+1]==1)a=n[s=Uu(n,s+2)];else{if(n[s+1]==2)return Uu(n,s+2);break}if(a==r||a==0)return Uu(n,s+1)}return 0}stateSlot(e,r){return this.states[e*6+r]}stateFlag(e,r){return(this.stateSlot(e,0)&r)>0}validAction(e,r){return!!this.allActions(e,n=>n==r?!0:null)}allActions(e,r){let n=this.stateSlot(e,4),i=n?r(n):void 0;for(let s=this.stateSlot(e,1);i==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=Uu(this.data,s+2);else break;i=r(Uu(this.data,s+1))}return i}nextStates(e){let r=[];for(let n=this.stateSlot(e,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=Uu(this.data,n+2);else break;if(!(this.data[n+2]&1)){let i=this.data[n+1];r.some((s,a)=>a&1&&s==i)||r.push(this.data[n],i)}}return r}configure(e){let r=Object.assign(Object.create(o0.prototype),this);if(e.props&&(r.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);r.top=n}return e.tokenizers&&(r.tokenizers=this.tokenizers.map(n=>{let i=e.tokenizers.find(s=>s.from==n);return i?i.to:n})),e.specializers&&(r.specializers=this.specializers.slice(),r.specializerSpecs=this.specializerSpecs.map((n,i)=>{let s=e.specializers.find(o=>o.from==n.external);if(!s)return n;let a=Object.assign(Object.assign({},n),{external:s.to});return r.specializers[i]=a6(a),a})),e.contextTracker&&(r.context=e.contextTracker),e.dialect&&(r.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(r.strict=e.strict),e.wrap&&(r.wrappers=r.wrappers.concat(e.wrap)),e.bufferLength!=null&&(r.bufferLength=e.bufferLength),r}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let r=this.dynamicPrecedences;return r==null?0:r[e]||0}parseDialect(e){let r=Object.keys(this.dialects),n=r.map(()=>!1);if(e)for(let s of e.split(" ")){let a=r.indexOf(s);a>=0&&(n[a]=!0)}let i=null;for(let s=0;s<r.length;s++)if(!n[s])for(let a=this.dialects[r[s]],o;(o=this.data[a++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[o]=1;return new wOe(e,n,i)}static deserialize(e){return new o0(e)}}function Uu(t,e){return t[e]|t[e+1]<<16}function kOe(t){let e=null;for(let r of t){let n=r.p.stoppedAt;(r.pos==r.p.stream.end||n!=null&&r.pos>n)&&r.p.parser.stateFlag(r.state,2)&&(!e||e.score<r.score)&&(e=r)}return e}function a6(t){if(t.external){let e=t.extend?1:0;return(r,n)=>t.external(r,n)<<1|e}return t.get}const COe=36,l6=1,TOe=2,hg=3,PP=4,OOe=5,POe=6,jOe=7,AOe=8,EOe=9,zOe=10,MOe=11,IOe=12,DOe=13,ROe=14,LOe=15,FOe=16,BOe=17,c6=18,$Oe=19,wH=20,SH=21,u6=22,NOe=23,VOe=24;function DE(t){return t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57}function WOe(t){return t>=48&&t<=57||t>=97&&t<=102||t>=65&&t<=70}function rp(t,e,r){for(let n=!1;;){if(t.next<0)return;if(t.next==e&&!n){t.advance();return}n=r&&!n&&t.next==92,t.advance()}}function UOe(t,e){e:for(;;){if(t.next<0)return;if(t.next==36){t.advance();for(let r=0;r<e.length;r++){if(t.next!=e.charCodeAt(r))continue e;t.advance()}if(t.next==36){t.advance();return}}else t.advance()}}function qOe(t,e){let r="[{<(".indexOf(String.fromCharCode(e)),n=r<0?e:"]}>)".charCodeAt(r);for(;;){if(t.next<0)return;if(t.next==n&&t.peek(1)==39){t.advance(2);return}t.advance()}}function RE(t,e){for(;!(t.next!=95&&!DE(t.next));)e!=null&&(e+=String.fromCharCode(t.next)),t.advance();return e}function QOe(t){if(t.next==39||t.next==34||t.next==96){let e=t.next;t.advance(),rp(t,e,!1)}else RE(t)}function h6(t,e){for(;t.next==48||t.next==49;)t.advance();e&&t.next==e&&t.advance()}function d6(t,e){for(;;){if(t.next==46){if(e)break;e=!0}else if(t.next<48||t.next>57)break;t.advance()}if(t.next==69||t.next==101)for(t.advance(),(t.next==43||t.next==45)&&t.advance();t.next>=48&&t.next<=57;)t.advance()}function f6(t){for(;!(t.next<0||t.next==10);)t.advance()}function Xf(t,e){for(let r=0;r<e.length;r++)if(e.charCodeAt(r)==t)return!0;return!1}const jP=` 	\r
`;function kH(t,e,r){let n=Object.create(null);n.true=n.false=OOe,n.null=n.unknown=POe;for(let i of t.split(" "))i&&(n[i]=wH);for(let i of e.split(" "))i&&(n[i]=SH);for(let i of(r||"").split(" "))i&&(n[i]=VOe);return n}const CH="array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ",TH="absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ",LE={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',caseInsensitiveIdentifiers:!1,words:kH(TH,CH)};function HOe(t,e,r,n){let i={};for(let s in LE)i[s]=(t.hasOwnProperty(s)?t:LE)[s];return e&&(i.words=kH(e,r||"",n)),i}function OH(t){return new dm(e=>{var r;let{next:n}=e;if(e.advance(),Xf(n,jP)){for(;Xf(e.next,jP);)e.advance();e.acceptToken(COe)}else if(n==36&&t.doubleDollarQuotedStrings){let i=RE(e,"");e.next==36&&(e.advance(),UOe(e,i),e.acceptToken(hg))}else if(n==39||n==34&&t.doubleQuotedStrings)rp(e,n,t.backslashEscapes),e.acceptToken(hg);else if(n==35&&t.hashComments||n==47&&e.next==47&&t.slashComments)f6(e),e.acceptToken(l6);else if(n==45&&e.next==45&&(!t.spaceAfterDashes||e.peek(1)==32))f6(e),e.acceptToken(l6);else if(n==47&&e.next==42){e.advance();for(let i=1;;){let s=e.next;if(e.next<0)break;if(e.advance(),s==42&&e.next==47){if(i--,e.advance(),!i)break}else s==47&&e.next==42&&(i++,e.advance())}e.acceptToken(TOe)}else if((n==101||n==69)&&e.next==39)e.advance(),rp(e,39,!0),e.acceptToken(hg);else if((n==110||n==78)&&e.next==39&&t.charSetCasts)e.advance(),rp(e,39,t.backslashEscapes),e.acceptToken(hg);else if(n==95&&t.charSetCasts)for(let i=0;;i++){if(e.next==39&&i>1){e.advance(),rp(e,39,t.backslashEscapes),e.acceptToken(hg);break}if(!DE(e.next))break;e.advance()}else if(t.plsqlQuotingMechanism&&(n==113||n==81)&&e.next==39&&e.peek(1)>0&&!Xf(e.peek(1),jP)){let i=e.peek(1);e.advance(2),qOe(e,i),e.acceptToken(hg)}else if(Xf(n,t.identifierQuotes)){const i=n==91?93:n;rp(e,i,!1),e.acceptToken($Oe)}else if(n==40)e.acceptToken(jOe);else if(n==41)e.acceptToken(AOe);else if(n==123)e.acceptToken(EOe);else if(n==125)e.acceptToken(zOe);else if(n==91)e.acceptToken(MOe);else if(n==93)e.acceptToken(IOe);else if(n==59)e.acceptToken(DOe);else if(t.unquotedBitLiterals&&n==48&&e.next==98)e.advance(),h6(e),e.acceptToken(u6);else if((n==98||n==66)&&(e.next==39||e.next==34)){const i=e.next;e.advance(),t.treatBitsAsBytes?(rp(e,i,t.backslashEscapes),e.acceptToken(NOe)):(h6(e,i),e.acceptToken(u6))}else if(n==48&&(e.next==120||e.next==88)||(n==120||n==88)&&e.next==39){let i=e.next==39;for(e.advance();WOe(e.next);)e.advance();i&&e.next==39&&e.advance(),e.acceptToken(PP)}else if(n==46&&e.next>=48&&e.next<=57)d6(e,!0),e.acceptToken(PP);else if(n==46)e.acceptToken(ROe);else if(n>=48&&n<=57)d6(e,!1),e.acceptToken(PP);else if(Xf(n,t.operatorChars)){for(;Xf(e.next,t.operatorChars);)e.advance();e.acceptToken(LOe)}else if(Xf(n,t.specialVar))e.next==n&&e.advance(),QOe(e),e.acceptToken(BOe);else if(n==58||n==44)e.acceptToken(FOe);else if(DE(n)){let i=RE(e,String.fromCharCode(n));e.acceptToken(e.next==46||e.peek(-i.length-1)==46?c6:(r=t.words[i.toLowerCase()])!==null&&r!==void 0?r:c6)}})}const PH=OH(LE),GOe=o0.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:" LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,nodeProps:[["isolate",-4,1,2,3,19,""]],skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,PH],topRules:{Script:[0,25]},tokenPrec:0});function FE(t){let e=t.cursor().moveTo(t.from,-1);for(;/Comment/.test(e.name);)e.moveTo(e.from,-1);return e.node}function Qb(t,e){let r=t.sliceString(e.from,e.to),n=/^([`'"\[])(.*)([`'"\]])$/.exec(r);return n?n[2]:r}function K2(t){return t&&(t.name=="Identifier"||t.name=="QuotedIdentifier")}function XOe(t,e){if(e.name=="CompositeIdentifier"){let r=[];for(let n=e.firstChild;n;n=n.nextSibling)K2(n)&&r.push(Qb(t,n));return r}return[Qb(t,e)]}function p6(t,e){for(let r=[];;){if(!e||e.name!=".")return r;let n=FE(e);if(!K2(n))return r;r.unshift(Qb(t,n)),e=FE(n)}}function KOe(t,e){let r=Ui(t).resolveInner(e,-1),n=YOe(t.doc,r);return r.name=="Identifier"||r.name=="QuotedIdentifier"||r.name=="Keyword"?{from:r.from,quoted:r.name=="QuotedIdentifier"?t.doc.sliceString(r.from,r.from+1):null,parents:p6(t.doc,FE(r)),aliases:n}:r.name=="."?{from:e,quoted:null,parents:p6(t.doc,r),aliases:n}:{from:e,quoted:null,parents:[],empty:!0,aliases:n}}const ZOe=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" "));function YOe(t,e){let r;for(let i=e;!r;i=i.parent){if(!i)return null;i.name=="Statement"&&(r=i)}let n=null;for(let i=r.firstChild,s=!1,a=null;i;i=i.nextSibling){let o=i.name=="Keyword"?t.sliceString(i.from,i.to).toLowerCase():null,d=null;if(!s)s=o=="from";else if(o=="as"&&a&&K2(i.nextSibling))d=Qb(t,i.nextSibling);else{if(o&&ZOe.has(o))break;a&&K2(i)&&(d=Qb(t,i))}d&&(n||(n=Object.create(null)),n[d]=XOe(t,a)),a=/Identifier$/.test(i.name)?i:null}return n}function JOe(t,e,r){return r.map(n=>({...n,label:n.label[0]==t?n.label:t+n.label+e,apply:void 0}))}const ePe=/^\w*$/,tPe=/^[`'"\[]?\w*[`'"\]]?$/;function m6(t){return t.self&&typeof t.self.label=="string"}class m5{constructor(e,r){this.idQuote=e,this.idCaseInsensitive=r,this.list=[],this.children=void 0}child(e){let r=this.children||(this.children=Object.create(null)),n=r[e];return n||(e&&!this.list.some(i=>i.label==e)&&this.list.push(g6(e,"type",this.idQuote,this.idCaseInsensitive)),r[e]=new m5(this.idQuote,this.idCaseInsensitive))}maybeChild(e){return this.children?this.children[e]:null}addCompletion(e){let r=this.list.findIndex(n=>n.label==e.label);r>-1?this.list[r]=e:this.list.push(e)}addCompletions(e){for(let r of e)this.addCompletion(typeof r=="string"?g6(r,"property",this.idQuote,this.idCaseInsensitive):r)}addNamespace(e){Array.isArray(e)?this.addCompletions(e):m6(e)?this.addNamespace(e.children):this.addNamespaceObject(e)}addNamespaceObject(e){for(let r of Object.keys(e)){let n=e[r],i=null,s=r.replace(/\\?\./g,o=>o=="."?"\0":o).split("\0"),a=this;m6(n)&&(i=n.self,n=n.children);for(let o=0;o<s.length;o++)i&&o==s.length-1&&a.addCompletion(i),a=a.child(s[o].replace(/\\\./g,"."));a.addNamespace(n)}}}function g6(t,e,r,n){return new RegExp("^[a-z_][a-z_\\d]*$",n?"i":"").test(t)?{label:t,type:e}:{label:t,type:e,apply:r+t+jH(r)}}function jH(t){return t==="["?"]":t}function rPe(t,e,r,n,i,s){var a;let o=((a=s==null?void 0:s.spec.identifierQuotes)===null||a===void 0?void 0:a[0])||'"',d=new m5(o,!!(s!=null&&s.spec.caseInsensitiveIdentifiers)),m=i?d.child(i):null;return d.addNamespace(t),e&&(m||d).addCompletions(e),r&&d.addCompletions(r),m&&d.addCompletions(m.list),n&&d.addCompletions((m||d).child(n).list),y=>{let{parents:b,from:w,quoted:O,empty:A,aliases:E}=KOe(y.state,y.pos);if(A&&!y.explicit)return null;E&&b.length==1&&(b=E[b[0]]||b);let $=d;for(let F of b){for(;!$.children||!$.children[F];)if($==d&&m)$=m;else if($==m&&n)$=$.child(n);else return null;let L=$.maybeChild(F);if(!L)return null;$=L}let R=$.list;if($==d&&E&&(R=R.concat(Object.keys(E).map(F=>({label:F,type:"constant"})))),O){let F=O[0],L=jH(F),U=y.state.sliceDoc(y.pos,y.pos+1)==L;return{from:w,to:U?y.pos+1:void 0,options:JOe(F,L,R),validFor:tPe}}else return{from:w,options:R,validFor:ePe}}}function nPe(t){return t==SH?"type":t==wH?"keyword":"variable"}function iPe(t,e,r){let n=Object.keys(t).map(i=>r(e?i.toUpperCase():i,nPe(t[i])));return YCe(["QuotedIdentifier","String","LineComment","BlockComment","."],sH(n))}let sPe=GOe.configure({props:[pC.add({Statement:rQ()}),mC.add({Statement(t,e){return{from:Math.min(t.from+100,e.doc.lineAt(t.from).to),to:t.to}},BlockComment(t){return{from:t.from+2,to:t.to-2}}}),hC({Keyword:Ne.keyword,Type:Ne.typeName,Builtin:Ne.standard(Ne.name),Bits:Ne.number,Bytes:Ne.string,Bool:Ne.bool,Null:Ne.null,Number:Ne.number,String:Ne.string,Identifier:Ne.name,QuotedIdentifier:Ne.special(Ne.string),SpecialVar:Ne.special(Ne.name),LineComment:Ne.lineComment,BlockComment:Ne.blockComment,Operator:Ne.operator,"Semi Punctuation":Ne.punctuation,"( )":Ne.paren,"{ }":Ne.brace,"[ ]":Ne.squareBracket})]});class Hb{constructor(e,r,n){this.dialect=e,this.language=r,this.spec=n}get extension(){return this.language.extension}configureLanguage(e,r){return new Hb(this.dialect,this.language.configure(e,r),this.spec)}static define(e){let r=HOe(e,e.keywords,e.types,e.builtin),n=r0.define({name:"sql",parser:sPe.configure({tokenizers:[{from:PH,to:OH(r)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new Hb(r,n,e)}}function oPe(t,e){return{label:t,type:e,boost:-1}}function aPe(t,e=!1,r){return iPe(t.dialect.words,e,r||oPe)}function lPe(t){return t.schema?rPe(t.schema,t.tables,t.schemas,t.defaultTable,t.defaultSchema,t.dialect||g5):()=>null}function cPe(t){return t.schema?(t.dialect||g5).language.data.of({autocomplete:lPe(t)}):[]}function uPe(t={}){let e=t.dialect||g5;return new e5(e.language,[cPe(t),e.language.data.of({autocomplete:aPe(e,t.upperCaseKeywords,t.keywordCompletion)})])}const g5=Hb.define({}),hPe=Hb.define({charSetCasts:!0,doubleDollarQuotedStrings:!0,operatorChars:"+-*/<>=~!@#%^&|`?",specialVar:"",keywords:TH+"abort abs absent access according ada admin aggregate alias also always analyse analyze array_agg array_max_cardinality asensitive assert assignment asymmetric atomic attach attribute attributes avg backward base64 begin_frame begin_partition bernoulli bit_length blocked bom cache called cardinality catalog_name ceil ceiling chain char_length character_length character_set_catalog character_set_name character_set_schema characteristics characters checkpoint class class_origin cluster coalesce cobol collation_catalog collation_name collation_schema collect column_name columns command_function command_function_code comment comments committed concurrently condition_number configuration conflict connection_name constant constraint_catalog constraint_name constraint_schema contains content control conversion convert copy corr cost covar_pop covar_samp csv cume_dist current_catalog current_row current_schema cursor_name database datalink datatype datetime_interval_code datetime_interval_precision db debug defaults defined definer degree delimiter delimiters dense_rank depends derived detach detail dictionary disable discard dispatch dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue document dump dynamic_function dynamic_function_code element elsif empty enable encoding encrypted end_frame end_partition endexec enforced enum errcode error event every exclude excluding exclusive exp explain expression extension extract family file filter final first_value flag floor following force foreach fortran forward frame_row freeze fs functions fusion generated granted greatest groups handler header hex hierarchy hint id ignore ilike immediately immutable implementation implicit import include including increment indent index indexes info inherit inherits inline insensitive instance instantiable instead integrity intersection invoker isnull key_member key_type label lag last_value lead leakproof least length library like_regex link listen ln load location lock locked log logged lower mapping matched materialized max max_cardinality maxvalue member merge message message_length message_octet_length message_text min minvalue mod mode more move multiset mumps name namespace nfc nfd nfkc nfkd nil normalize normalized nothing notice notify notnull nowait nth_value ntile nullable nullif nulls number occurrences_regex octet_length octets off offset oids operator options ordering others over overlay overriding owned owner parallel parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partition pascal passing passthrough password percent percent_rank percentile_cont percentile_disc perform period permission pg_context pg_datatype_name pg_exception_context pg_exception_detail pg_exception_hint placing plans pli policy portion position position_regex power precedes preceding prepared print_strict_params procedural procedures program publication query quote raise range rank reassign recheck recovery refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex rename repeatable replace replica requiring reset respect restart restore result_oid returned_cardinality returned_length returned_octet_length returned_sqlstate returning reverse routine_catalog routine_name routine_schema routines row_count row_number rowtype rule scale schema_name schemas scope scope_catalog scope_name scope_schema security selective self sensitive sequence sequences serializable server server_name setof share show simple skip slice snapshot source specific_name sqlcode sqlerror sqrt stable stacked standalone statement statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset subscription substring substring_regex succeeds sum symmetric sysid system system_time table_name tables tablesample tablespace temp template ties token top_level_count transaction_active transactions_committed transactions_rolled_back transform transforms translate translate_regex trigger_catalog trigger_name trigger_schema trim trim_array truncate trusted type types uescape unbounded uncommitted unencrypted unlink unlisten unlogged unnamed untyped upper uri use_column use_variable user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema vacuum valid validate validator value_of var_pop var_samp varbinary variable_conflict variadic verbose version versioning views volatile warning whitespace width_bucket window within wrapper xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate yes",types:CH+"bigint int8 bigserial serial8 varbit bool box bytea cidr circle precision float8 inet int4 json jsonb line lseg macaddr macaddr8 money numeric pg_lsn point polygon float4 int2 smallserial serial2 serial serial4 text timetz timestamptz tsquery tsvector txid_snapshot uuid xml"}),dPe=["SELECT","FROM","WHERE","AND","OR","NOT","IN","BETWEEN","LIKE","ILIKE","IS","NULL","TRUE","FALSE","AS","ON","JOIN","LEFT","RIGHT","INNER","OUTER","FULL","CROSS","NATURAL","USING","GROUP","BY","HAVING","ORDER","ASC","DESC","NULLS","FIRST","LAST","LIMIT","OFFSET","DISTINCT","ALL","UNION","INTERSECT","EXCEPT","CASE","WHEN","THEN","ELSE","END","CAST","COALESCE","NULLIF","EXISTS","ANY","SOME","WITH","RECURSIVE","OVER","PARTITION","WINDOW","ROWS","RANGE","UNBOUNDED","PRECEDING","FOLLOWING","CURRENT","ROW","FILTER","WITHIN","LATERAL","FETCH","NEXT","ONLY"],fPe=["COUNT","SUM","AVG","MIN","MAX","ARRAY_AGG","STRING_AGG","BOOL_AND","BOOL_OR","BIT_AND","BIT_OR","EVERY","PERCENTILE_CONT","PERCENTILE_DISC","LENGTH","LOWER","UPPER","TRIM","LTRIM","RTRIM","SUBSTRING","POSITION","REPLACE","CONCAT","CONCAT_WS","SPLIT_PART","REGEXP_REPLACE","REGEXP_MATCHES","LEFT","RIGHT","REVERSE","REPEAT","LPAD","RPAD","INITCAP","FORMAT","ABS","CEIL","CEILING","FLOOR","ROUND","TRUNC","MOD","POWER","SQRT","EXP","LN","LOG","RANDOM","SIGN","GREATEST","LEAST","NOW","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE_PART","DATE_TRUNC","EXTRACT","AGE","INTERVAL","TO_CHAR","TO_DATE","TO_TIMESTAMP","JSON_AGG","JSONB_AGG","JSON_BUILD_OBJECT","JSONB_BUILD_OBJECT","JSON_OBJECT_AGG","JSONB_OBJECT_AGG","ROW_TO_JSON","JSON_ARRAY_LENGTH","ARRAY_LENGTH","ARRAY_TO_STRING","STRING_TO_ARRAY","UNNEST","ARRAY_CAT","CAST","TO_NUMBER","TO_TEXT"],pPe=["ST_Point","ST_MakePoint","ST_MakeLine","ST_MakePolygon","ST_MakeEnvelope","ST_GeomFromText","ST_GeomFromWKB","ST_GeomFromGeoJSON","ST_GeogFromText","ST_SetSRID","ST_Transform","ST_Collect","ST_Union","ST_Buffer","ST_X","ST_Y","ST_Z","ST_M","ST_SRID","ST_GeometryType","ST_Dimension","ST_CoordDim","ST_NPoints","ST_NRings","ST_NumGeometries","ST_NumPoints","ST_ExteriorRing","ST_InteriorRingN","ST_GeometryN","ST_PointN","ST_StartPoint","ST_EndPoint","ST_Centroid","ST_PointOnSurface","ST_Envelope","ST_Boundary","ST_AsText","ST_AsBinary","ST_AsGeoJSON","ST_AsKML","ST_AsSVG","ST_AsGML","ST_AsEWKT","ST_AsEWKB","ST_AsMVT","ST_AsMVTGeom","ST_Intersects","ST_Contains","ST_Within","ST_Overlaps","ST_Touches","ST_Crosses","ST_Disjoint","ST_Equals","ST_Covers","ST_CoveredBy","ST_ContainsProperly","ST_DWithin","ST_Distance","ST_3DDistance","ST_Area","ST_Perimeter","ST_Length","ST_Length2D","ST_3DLength","ST_Distance","ST_MaxDistance","ST_HausdorffDistance","ST_FrechetDistance","ST_Simplify","ST_SimplifyPreserveTopology","ST_SimplifyVW","ST_ChaikinSmoothing","ST_ConvexHull","ST_ConcaveHull","ST_Buffer","ST_OffsetCurve","ST_Difference","ST_Intersection","ST_SymDifference","ST_Split","ST_Subdivide","ST_MakeValid","ST_Snap","ST_SnapToGrid","ST_Segmentize","ST_LineMerge","ST_UnaryUnion","ST_ClusterDBSCAN","ST_ClusterKMeans","ST_ClusterWithin","ST_ClusterIntersecting","ST_Extent","ST_3DExtent","ST_MemUnion","ST_Collect","ST_MakeLine","ST_MakeBox2D","ST_XMin","ST_XMax","ST_YMin","ST_YMax","ST_ZMin","ST_ZMax","ST_Expand","ST_EstimatedExtent","Box2D","Box3D","ST_LineInterpolatePoint","ST_LineInterpolatePoints","ST_LineLocatePoint","ST_LineSubstring","ST_LocateAlong","ST_LocateBetween","ST_AddMeasure","ST_IsValid","ST_IsSimple","ST_IsEmpty","ST_IsClosed","ST_IsRing","ST_IsCollection","ST_HasArc","ST_NumPatches","ST_Force2D","ST_Force3D","ST_ForceRHR","ST_Reverse","ST_FlipCoordinates","ST_OrientedEnvelope"],mPe=["integer","int","int4","bigint","int8","smallint","int2","numeric","decimal","real","float4","double precision","float8","text","varchar","char","character varying","character","boolean","bool","date","time","timestamp","timestamptz","interval","json","jsonb","uuid","bytea","array","point","line","polygon","geometry","geography","box","circle","inet","cidr","macaddr"],y6=({value:t,onChange:e,placeholder:r="Enter SQL query...",height:n="150px",minHeight:i,maxHeight:s,schemas:a=[],serviceName:o,readOnly:d=!1,className:m=""})=>{const[y,b]=I.useState(a);I.useEffect(()=>{a.length>0&&b(a)},[a]),I.useEffect(()=>{o&&a.length===0&&y.length===0&&w(o)},[o,a.length,y.length]);const w=async R=>{try{const F=await fetch(`/api/pg/services/${R}/schemas`);if(F.ok){const L=await F.json();L.schemas&&b(L.schemas)}}catch(F){console.error("Failed to load schema info:",F)}},O=I.useMemo(()=>R=>{const F=R.matchBefore(/[\w.]+/);if(!F||F.from===F.to&&!R.explicit)return null;const L=F.text.toLowerCase(),U=[],Q=L.lastIndexOf(".");if(Q>=0){const Z=L.substring(0,Q),J=L.substring(Q+1);for(const re of y){if(re.name.toLowerCase()===Z)for(const he of re.tables)he.name.toLowerCase().startsWith(J)&&U.push({label:he.name,type:"class",detail:`table in ${re.name}`,boost:10});for(const he of re.tables){const le=`${re.name}.${he.name}`.toLowerCase(),Ze=he.name.toLowerCase();if(Z===le||Z===Ze)for(const Ee of he.columns)Ee.name.toLowerCase().startsWith(J)&&U.push({label:Ee.name,type:"property",detail:Ee.type,boost:15})}}}else{for(const Z of dPe)Z.toLowerCase().startsWith(L)&&U.push({label:Z,type:"keyword",boost:5});for(const Z of fPe)Z.toLowerCase().startsWith(L)&&U.push({label:Z+"()",type:"function",detail:"PostgreSQL",boost:3});for(const Z of pPe)Z.toLowerCase().startsWith(L)&&U.push({label:Z+"()",type:"function",detail:"PostGIS",boost:4});for(const Z of mPe)Z.toLowerCase().startsWith(L)&&U.push({label:Z,type:"type",boost:1});for(const Z of y){Z.name.toLowerCase().startsWith(L)&&U.push({label:Z.name,type:"namespace",detail:"schema",boost:6});for(const J of Z.tables){J.name.toLowerCase().startsWith(L)&&U.push({label:J.name,type:"class",detail:`table in ${Z.name}`,boost:8});const re=`${Z.name}.${J.name}`;re.toLowerCase().startsWith(L)&&U.push({label:re,type:"class",detail:"table",boost:7})}}}U.sort((Z,J)=>(J.boost||0)-(Z.boost||0));const Y=U.slice(0,50);return Y.length===0?null:{from:F.from,options:Y,validFor:/^[\w.]*$/}},[y]),A=I.useMemo(()=>{const R={};for(const F of y)for(const L of F.tables){const U=`${F.name}.${L.name}`;R[U]=L.columns.map(Q=>Q.name),R[L.name]=L.columns.map(Q=>Q.name)}return uPe({dialect:hPe,schema:R,upperCaseKeywords:!0})},[y]),E=I.useMemo(()=>Gt.theme({"&":{fontSize:"14px",fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace'},".cm-content":{padding:"8px 0"},".cm-line":{padding:"0 8px"},".cm-gutters":{backgroundColor:"#f7f7f7",borderRight:"1px solid #e0e0e0"},"&.cm-focused .cm-cursor":{borderLeftColor:"#3b82f6"},".cm-placeholder":{color:"#9ca3af"},".cm-tooltip.cm-tooltip-autocomplete":{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},".cm-tooltip.cm-tooltip-autocomplete > ul":{fontFamily:"inherit"},".cm-tooltip.cm-tooltip-autocomplete > ul > li":{padding:"4px 8px"},".cm-tooltip.cm-tooltip-autocomplete > ul > li[aria-selected]":{backgroundColor:"#3b82f6",color:"#fff"},".cm-completionIcon":{width:"1em",marginRight:"0.5em"},".cm-completionIcon-keyword":{"&::after":{content:'"K"',color:"#9333ea"}},".cm-completionIcon-function":{"&::after":{content:'""',color:"#2563eb"}},".cm-completionIcon-class":{"&::after":{content:'"T"',color:"#059669"}},".cm-completionIcon-property":{"&::after":{content:'"c"',color:"#d97706"}},".cm-completionIcon-namespace":{"&::after":{content:'"S"',color:"#dc2626"}},".cm-completionIcon-type":{"&::after":{content:'"t"',color:"#6366f1"}}}),[]),$=I.useMemo(()=>[A,pH({override:[O],activateOnTyping:!0,maxRenderedOptions:50}),Gt.lineWrapping,E],[A,O,E]);return u.jsx("div",{className:`sql-editor-wrapper border rounded ${m}`,children:u.jsx(p5,{value:t,onChange:e,placeholder:r,height:n,minHeight:i,maxHeight:s,extensions:$,readOnly:d,basicSetup:{lineNumbers:!0,highlightActiveLineGutter:!0,highlightSpecialChars:!0,history:!0,foldGutter:!1,drawSelection:!0,dropCursor:!0,allowMultipleSelections:!0,indentOnInput:!0,syntaxHighlighting:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!1,rectangularSelection:!0,crosshairCursor:!1,highlightActiveLine:!0,highlightSelectionMatches:!0,closeBracketsKeymap:!0,defaultKeymap:!0,searchKeymap:!0,historyKeymap:!0,foldKeymap:!1,completionKeymap:!0,lintKeymap:!0}})})},dg=Dn(ue),gPe=[{value:"=",label:"equals"},{value:"!=",label:"not equals"},{value:"<",label:"less than"},{value:"<=",label:"less or equal"},{value:">",label:"greater than"},{value:">=",label:"greater or equal"},{value:"LIKE",label:"contains"},{value:"ILIKE",label:"contains (case insensitive)"},{value:"IS NULL",label:"is null"},{value:"IS NOT NULL",label:"is not null"},{value:"IN",label:"in list"}],yPe=[{value:"",label:"None"},{value:"COUNT",label:"Count"},{value:"SUM",label:"Sum"},{value:"AVG",label:"Average"},{value:"MIN",label:"Min"},{value:"MAX",label:"Max"},{value:"ST_Extent",label:"Extent (geo)"},{value:"ST_Union",label:"Union (geo)"}],xPe=["Show me all records from the last 30 days","Find the top 10 largest by area","Count records grouped by type",'Show records where name contains "park"',"Find all polygons that intersect with each other"],vPe=({serviceName:t,initialSchema:e="public",initialTable:r="",initialSQL:n="",onClose:i,onPublishToGeoServer:s})=>{const a=Go(),o=dr("white","gray.800"),d=dr("gray.200","gray.600"),m=dr("gray.50","gray.700"),y=dr("gray.50","gray.900"),b=dr("blue.50","blue.900"),[w,O]=I.useState("visual"),[A,E]=I.useState([]),[,$]=I.useState(!0),[R,F]=I.useState(e),[L,U]=I.useState(r),[Q,Y]=I.useState([]),[Z,J]=I.useState([]),[re,he]=I.useState([]),[le,Ze]=I.useState(100),[Ee,qe]=I.useState(0),[et,at]=I.useState(!1),[Be,Me]=I.useState(n),[Ge,Le]=I.useState(""),[Ie,Oe]=I.useState(""),[Re,nt]=I.useState(!1),[ze,rt]=I.useState(null),[Xe,_t]=I.useState(!0),[Mt,Et]=I.useState(!1),[yt,Je]=I.useState(null),[Kt,vt]=I.useState(""),[st,Te]=I.useState(!1),lt=I.useRef(null),[Nt,Tt]=I.useState(()=>{const W=localStorage.getItem("query-panel-split");return W?parseInt(W,10):50}),[Vt,tn]=I.useState(!1),hn=I.useRef(null),on=I.useRef(Nt),kn=I.useMemo(()=>A.find(W=>W.name===R),[A,R]),yn=I.useMemo(()=>kn==null?void 0:kn.tables.find(W=>W.name===L),[kn,L]),ui=I.useMemo(()=>(yn==null?void 0:yn.columns)||[],[yn]);I.useEffect(()=>{$(!0),fetch(`/api/pg/services/${encodeURIComponent(t)}/schemas`).then(W=>W.json()).then(W=>{W.schemas&&(E(W.schemas),W.schemas.length>0&&!R&&F(W.schemas[0].name))}).catch(W=>{console.error("Failed to load schemas:",W),vt("Failed to load database schemas")}).finally(()=>$(!1))},[t]),I.useEffect(()=>{fetch("/api/ai/providers").then(W=>W.json()).then(W=>{var ee;const H=(ee=W.providers)==null?void 0:ee.find(de=>de.active);_t((H==null?void 0:H.available)??!1)}).catch(()=>_t(!1))},[]),I.useEffect(()=>{if(w==="visual")if(L){const W=Oi();Le(W)}else Le("")},[w,R,L,Q,Z,re,le,et]);const Oi=I.useCallback(()=>{if(!L)return"";const W=Q.length>0?Q.map(ve=>ve.aggregate?`${ve.aggregate}(${ve.name})${ve.alias?` AS ${ve.alias}`:""}`:ve.alias?`${ve.name} AS ${ve.alias}`:ve.name).join(", "):"*";let H=`SELECT ${et?"DISTINCT ":""}${W}
FROM ${R}.${L}`;if(Z.length>0){const ve=Z.map((Se,Fe)=>{let be="";return Fe>0&&(be+=` ${Se.logic} `),["IS NULL","IS NOT NULL"].includes(Se.operator)?be+=`${Se.column} ${Se.operator}`:Se.operator==="IN"?be+=`${Se.column} IN (${Se.value})`:["LIKE","ILIKE"].includes(Se.operator)?be+=`${Se.column} ${Se.operator} '%${Se.value}%'`:be+=`${Se.column} ${Se.operator} '${Se.value}'`,be}).join("");H+=`
WHERE ${ve}`}const ee=Q.some(ve=>ve.aggregate),de=Q.filter(ve=>!ve.aggregate);return ee&&de.length>0&&(H+=`
GROUP BY ${de.map(ve=>ve.name).join(", ")}`),re.length>0&&(H+=`
ORDER BY ${re.map(ve=>`${ve.column} ${ve.direction}`).join(", ")}`),H+=`
LIMIT ${le}`,Ee>0&&(H+=` OFFSET ${Ee}`),H},[R,L,Q,Z,re,le,Ee,et]),Qe=I.useCallback(async(W,H=!1)=>{var ee,de;if(!W.trim()){vt("Please enter a query");return}H?Te(!0):(Et(!0),vt(""),Je(null),qe(0));try{const Se=await(await fetch("/api/query/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sql:W,service_name:t,max_rows:le,offset:H&&(yt==null?void 0:yt.rows.length)||0})})).json();if(Se.success){const Fe=((ee=Se.result)==null?void 0:ee.rows)||[],be=((de=Se.result)==null?void 0:de.columns)||[];Je(H&&yt?{...Se.result,columns:be,rows:[...yt.rows||[],...Fe],has_more:Fe.length===le}:{...Se.result,columns:be,rows:Fe,has_more:Fe.length===le}),Le(Se.sql||W)}else vt(Se.error||"Query execution failed")}catch(ve){vt("Failed to execute query: "+ve.message)}finally{Et(!1),Te(!1)}},[t,le,yt]),Br=I.useCallback(async()=>{if(!(!Ie.trim()||Re)){nt(!0),rt(null),vt("");try{const H=await(await fetch("/api/ai/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:Ie.trim(),service_name:t,schema_name:R,max_rows:le,execute:!1})})).json();H.success&&H.sql?(rt({sql:H.sql,explanation:H.explanation,confidence:H.confidence,warnings:H.warnings}),Me(H.sql)):vt(H.error||"AI query generation failed")}catch(W){vt("AI query failed: "+W.message)}finally{nt(!1)}}},[Ie,Re,t,R,le]),kt=I.useCallback(()=>{let W="";switch(w){case"ai":W=(ze==null?void 0:ze.sql)||Be;break;case"visual":W=Ge;break;case"sql":W=Be;break}Qe(W)},[w,ze,Ge,Be,Qe]),Wt=I.useCallback(()=>{if(!(yt!=null&&yt.has_more)||st)return;let W="";switch(w){case"ai":W=(ze==null?void 0:ze.sql)||Be;break;case"visual":W=Ge;break;case"sql":W=Be;break}const H=yt.rows.length,ee=W.replace(/LIMIT \d+(\s+OFFSET \d+)?/i,`LIMIT ${le} OFFSET ${H}`);Qe(ee.includes("OFFSET")?ee:`${W} OFFSET ${H}`,!0)},[yt,st,w,ze,Ge,Be,le,Qe]);I.useEffect(()=>{const W=lt.current;if(!W)return;const H=()=>{const{scrollTop:ee,scrollHeight:de,clientHeight:ve}=W;de-ee-ve<100&&(yt!=null&&yt.has_more)&&!st&&Wt()};return W.addEventListener("scroll",H),()=>W.removeEventListener("scroll",H)},[yt,st,Wt]);const wn=I.useCallback(W=>{W.preventDefault(),tn(!0)},[]);I.useEffect(()=>{on.current=Nt},[Nt]),I.useEffect(()=>{if(!Vt)return;const W=ee=>{if(!hn.current)return;const de=hn.current.getBoundingClientRect(),ve=(ee.clientX-de.left)/de.width*100,Se=Math.max(25,Math.min(75,ve));Tt(Se)},H=()=>{tn(!1),localStorage.setItem("query-panel-split",on.current.toString())};return document.addEventListener("mousemove",W),document.addEventListener("mouseup",H),()=>{document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",H)}},[Vt]);const xt=()=>Y([...Q,{name:""}]),yr=W=>Y(Q.filter((H,ee)=>ee!==W)),Jt=(W,H)=>{const ee=[...Q];ee[W]={...ee[W],...H},Y(ee)},Zn=()=>J([...Z,{column:"",operator:"=",value:"",logic:"AND"}]),vi=W=>J(Z.filter((H,ee)=>ee!==W)),pr=(W,H)=>{const ee=[...Z];ee[W]={...ee[W],...H},J(ee)},Ii=()=>he([...re,{column:"",direction:"ASC"}]),xs=W=>he(re.filter((H,ee)=>ee!==W)),Di=(W,H)=>{const ee=[...re];ee[W]={...ee[W],...H},he(ee)},is=()=>{const W=w==="visual"?Ge:Be;navigator.clipboard.writeText(W),a({title:"Copied",description:"SQL copied to clipboard",status:"success",duration:2e3})},me=W=>{if(!yt)return;let H="",ee="",de="";if(W==="csv"){const be=yt.columns.map(ht=>ht.name).join(","),tt=yt.rows.map(ht=>yt.columns.map(xe=>{const ct=ht[xe.name];return ct===null?"":typeof ct=="string"&&ct.includes(",")?`"${ct}"`:String(ct)}).join(",")).join(`
`);H=`${be}
${tt}`,ee="query-results.csv",de="text/csv"}else H=JSON.stringify(yt.rows,null,2),ee="query-results.json",de="application/json";const ve=new Blob([H],{type:de}),Se=URL.createObjectURL(ve),Fe=document.createElement("a");Fe.href=Se,Fe.download=ee,Fe.click(),URL.revokeObjectURL(Se)};return u.jsxs(dg,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:nu.default,bg:o,borderRadius:"2xl",boxShadow:"2xl",overflow:"hidden",h:"100%",display:"flex",flexDirection:"column",children:[u.jsxs(Sr,{bg:"linear-gradient(135deg, #3182CE 0%, #2B6CB0 100%)",px:6,py:4,align:"center",justify:"space-between",children:[u.jsxs(Ce,{spacing:3,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(He,{as:Kn,boxSize:5,color:"white"})}),u.jsxs(ue,{children:[u.jsx(ie,{color:"white",fontWeight:"600",fontSize:"lg",children:"Query Designer"}),u.jsx(ie,{color:"whiteAlpha.800",fontSize:"sm",children:t})]})]}),u.jsxs(Ce,{spacing:2,children:[u.jsxs(er,{colorScheme:"whiteAlpha",variant:"subtle",px:3,py:1,borderRadius:"full",children:[A.length," schemas"]}),i&&u.jsx(br,{"aria-label":"Close",icon:u.jsx(tf,{}),variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:i})]})]}),u.jsx(p0,{index:w==="ai"?0:w==="visual"?1:2,onChange:W=>O(W===0?"ai":W===1?"visual":"sql"),variant:"soft-rounded",colorScheme:"blue",px:4,py:3,bg:m,children:u.jsxs(m0,{children:[u.jsxs(Ys,{gap:2,children:[u.jsx(He,{as:sve}),"AI Natural Language"]}),u.jsxs(Ys,{gap:2,children:[u.jsx(He,{as:ef}),"Visual Builder"]}),u.jsxs(Ys,{gap:2,children:[u.jsx(He,{as:Pb}),"SQL Editor"]})]})}),u.jsxs(Sr,{ref:hn,flex:1,overflow:"hidden",position:"relative",children:[u.jsxs(Sr,{w:`${Nt}%`,flexDirection:"column",overflow:"hidden",children:[u.jsx(ue,{flex:1,overflow:"auto",p:4,children:u.jsxs(pc,{mode:"wait",children:[w==="ai"&&u.jsx(dg,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:nu.snappy,children:u.jsxs(ft,{spacing:4,align:"stretch",children:[!Xe&&u.jsxs(to,{status:"warning",borderRadius:"lg",children:[u.jsx(ro,{}),u.jsxs(ue,{children:[u.jsx(g1,{children:"Ollama not available"}),u.jsxs($y,{fontSize:"sm",children:["Start Ollama with: ",u.jsx("code",{children:"ollama serve"})]})]})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontWeight:"600",mb:2,fontSize:"sm",color:"gray.600",children:"Ask a question about your data"}),u.jsx(eC,{value:Ie,onChange:W=>Oe(W.target.value),placeholder:"e.g., Show me all records where status is active...",rows:4,borderRadius:"xl",_focus:{borderColor:"purple.400",boxShadow:"0 0 0 3px rgba(159, 122, 234, 0.2)"},onKeyDown:W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),Br())}})]}),u.jsxs(Ce,{children:[u.jsx(Rn,{value:R,onChange:W=>F(W.target.value),size:"sm",borderRadius:"lg",flex:1,children:A.map(W=>u.jsx("option",{value:W.name,children:W.name},W.name))}),u.jsx(St,{colorScheme:"purple",leftIcon:Re?u.jsx(Nn,{size:"sm"}):u.jsx(_S,{}),onClick:Br,isDisabled:!Ie.trim()||Re||!Xe,borderRadius:"xl",children:"Generate SQL"})]}),u.jsxs(ue,{children:[u.jsxs(Ce,{mb:2,children:[u.jsx(He,{as:K7,color:"gray.400"}),u.jsx(ie,{fontSize:"xs",color:"gray.500",children:"Examples"})]}),u.jsx(Tb,{spacing:2,children:xPe.map((W,H)=>u.jsx(Hy,{children:u.jsx(Qy,{size:"sm",variant:"subtle",colorScheme:"purple",cursor:"pointer",onClick:()=>Oe(W),_hover:{bg:"purple.100"},borderRadius:"full",children:u.jsx(Cb,{children:W})})},H))})]}),ze&&u.jsxs(dg,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},bg:"purple.50",p:4,borderRadius:"xl",borderLeft:"4px solid",borderLeftColor:"purple.400",children:[ze.confidence!==void 0&&u.jsx(Ce,{mb:2,children:u.jsxs(er,{colorScheme:ze.confidence>=.8?"green":ze.confidence>=.5?"yellow":"red",children:[Math.round(ze.confidence*100),"% confidence"]})}),ze.explanation&&u.jsx(ie,{fontSize:"sm",color:"purple.700",mb:2,children:ze.explanation}),ze.warnings&&ze.warnings.length>0&&u.jsxs(to,{status:"warning",size:"sm",borderRadius:"md",mb:2,children:[u.jsx(ro,{}),u.jsx(ft,{align:"start",spacing:0,children:ze.warnings.map((W,H)=>u.jsx(ie,{fontSize:"xs",children:W},H))})]})]}),((ze==null?void 0:ze.sql)||Be)&&w==="ai"&&u.jsxs(ue,{children:[u.jsx(ie,{fontWeight:"600",mb:2,fontSize:"sm",color:"gray.600",children:"Generated SQL"}),u.jsx(y6,{value:(ze==null?void 0:ze.sql)||Be,onChange:Me,height:"150px",serviceName:t,schemas:A})]})]})},"ai"),w==="visual"&&u.jsx(dg,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:nu.snappy,children:u.jsxs(ft,{spacing:4,align:"stretch",children:[u.jsxs(Ce,{children:[u.jsxs(ue,{flex:1,children:[u.jsx(ie,{fontSize:"xs",fontWeight:"600",color:"gray.500",mb:1,children:"Schema"}),u.jsx(Rn,{value:R,onChange:W=>{F(W.target.value),U(""),Y([])},size:"sm",borderRadius:"lg",children:A.map(W=>u.jsx("option",{value:W.name,children:W.name},W.name))})]}),u.jsxs(ue,{flex:2,children:[u.jsx(ie,{fontSize:"xs",fontWeight:"600",color:"gray.500",mb:1,children:"Table"}),u.jsx(Rn,{value:L,onChange:W=>{U(W.target.value),Y([])},size:"sm",borderRadius:"lg",placeholder:"Select table...",children:kn==null?void 0:kn.tables.map(W=>u.jsxs("option",{value:W.name,children:[W.name," ",W.has_geometry&&"(geo)"]},W.name))})]})]}),yn&&u.jsxs(ue,{bg:y,p:3,borderRadius:"lg",maxH:"120px",overflowY:"auto",children:[u.jsxs(Ce,{mb:2,children:[u.jsx(He,{as:Q7,color:"gray.500",size:"sm"}),u.jsxs(ie,{fontSize:"xs",fontWeight:"600",color:"gray.500",children:["Available Columns (",ui.length,")"]})]}),u.jsx(Tb,{spacing:1,children:ui.map(W=>u.jsx(Hy,{children:u.jsxs(Qy,{size:"sm",variant:"subtle",colorScheme:"gray",cursor:"pointer",onClick:()=>{Q.find(H=>H.name===W.name)||Y([...Q,{name:W.name}])},children:[u.jsx(Cb,{children:W.name}),u.jsx(ie,{fontSize:"2xs",color:"gray.400",ml:1,children:W.type})]})},W.name))})]}),u.jsxs(ue,{children:[u.jsxs(Sr,{justify:"space-between",align:"center",mb:2,children:[u.jsxs(Ce,{children:[u.jsx(He,{as:tm,color:"blue.500"}),u.jsx(ie,{fontSize:"sm",fontWeight:"600",children:"SELECT Columns"})]}),u.jsx(St,{size:"xs",leftIcon:u.jsx(fs,{}),onClick:xt,variant:"ghost",colorScheme:"blue",children:"Add"})]}),Q.length===0?u.jsx(ie,{fontSize:"sm",color:"gray.500",fontStyle:"italic",children:"All columns (*)"}):u.jsx(ft,{spacing:2,align:"stretch",children:Q.map((W,H)=>u.jsxs(Ce,{children:[u.jsxs(Rn,{value:W.name,onChange:ee=>Jt(H,{name:ee.target.value}),size:"sm",flex:2,borderRadius:"lg",children:[u.jsx("option",{value:"",children:"Select..."}),ui.map(ee=>u.jsx("option",{value:ee.name,children:ee.name},ee.name))]}),u.jsx(Rn,{value:W.aggregate||"",onChange:ee=>Jt(H,{aggregate:ee.target.value}),size:"sm",flex:1,borderRadius:"lg",children:yPe.map(ee=>u.jsx("option",{value:ee.value,children:ee.label},ee.value))}),u.jsx(Ar,{value:W.alias||"",onChange:ee=>Jt(H,{alias:ee.target.value}),placeholder:"alias",size:"sm",flex:1,borderRadius:"lg"}),u.jsx(br,{"aria-label":"Remove",icon:u.jsx(Nd,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>yr(H)})]},H))})]}),u.jsx(Fr,{}),u.jsxs(ue,{children:[u.jsxs(Sr,{justify:"space-between",align:"center",mb:2,children:[u.jsxs(Ce,{children:[u.jsx(He,{as:lve,color:"orange.500"}),u.jsx(ie,{fontSize:"sm",fontWeight:"600",children:"WHERE Conditions"})]}),u.jsx(St,{size:"xs",leftIcon:u.jsx(fs,{}),onClick:Zn,variant:"ghost",colorScheme:"orange",children:"Add"})]}),Z.length===0?u.jsx(ie,{fontSize:"sm",color:"gray.500",fontStyle:"italic",children:"No conditions"}):u.jsx(ft,{spacing:2,align:"stretch",children:Z.map((W,H)=>u.jsxs(Ce,{flexWrap:"wrap",children:[H>0&&u.jsxs(Rn,{value:W.logic,onChange:ee=>pr(H,{logic:ee.target.value}),size:"sm",w:"80px",borderRadius:"lg",children:[u.jsx("option",{value:"AND",children:"AND"}),u.jsx("option",{value:"OR",children:"OR"})]}),u.jsxs(Rn,{value:W.column,onChange:ee=>pr(H,{column:ee.target.value}),size:"sm",flex:1,minW:"100px",borderRadius:"lg",children:[u.jsx("option",{value:"",children:"Column..."}),ui.map(ee=>u.jsx("option",{value:ee.name,children:ee.name},ee.name))]}),u.jsx(Rn,{value:W.operator,onChange:ee=>pr(H,{operator:ee.target.value}),size:"sm",w:"150px",borderRadius:"lg",children:gPe.map(ee=>u.jsx("option",{value:ee.value,children:ee.label},ee.value))}),!["IS NULL","IS NOT NULL"].includes(W.operator)&&u.jsx(Ar,{value:W.value,onChange:ee=>pr(H,{value:ee.target.value}),placeholder:"value",size:"sm",flex:1,minW:"80px",borderRadius:"lg"}),u.jsx(br,{"aria-label":"Remove",icon:u.jsx(Nd,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>vi(H)})]},H))})]}),u.jsx(Fr,{}),u.jsxs(ue,{children:[u.jsxs(Sr,{justify:"space-between",align:"center",mb:2,children:[u.jsxs(Ce,{children:[u.jsx(He,{as:Jxe,color:"green.500"}),u.jsx(ie,{fontSize:"sm",fontWeight:"600",children:"ORDER BY"})]}),u.jsx(St,{size:"xs",leftIcon:u.jsx(fs,{}),onClick:Ii,variant:"ghost",colorScheme:"green",children:"Add"})]}),re.length===0?u.jsx(ie,{fontSize:"sm",color:"gray.500",fontStyle:"italic",children:"No sorting"}):u.jsx(ft,{spacing:2,align:"stretch",children:re.map((W,H)=>u.jsxs(Ce,{children:[u.jsxs(Rn,{value:W.column,onChange:ee=>Di(H,{column:ee.target.value}),size:"sm",flex:2,borderRadius:"lg",children:[u.jsx("option",{value:"",children:"Column..."}),ui.map(ee=>u.jsx("option",{value:ee.name,children:ee.name},ee.name))]}),u.jsxs(Rn,{value:W.direction,onChange:ee=>Di(H,{direction:ee.target.value}),size:"sm",w:"100px",borderRadius:"lg",children:[u.jsx("option",{value:"ASC",children:"ASC"}),u.jsx("option",{value:"DESC",children:"DESC"})]}),u.jsx(br,{"aria-label":"Remove",icon:u.jsx(Nd,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>xs(H)})]},H))})]}),u.jsx(Fr,{}),u.jsxs(Ce,{spacing:4,children:[u.jsx(Ua,{isChecked:et,onChange:W=>at(W.target.checked),size:"sm",children:"DISTINCT"}),u.jsxs(Ce,{children:[u.jsx(ie,{fontSize:"sm",children:"LIMIT:"}),u.jsx(Ar,{type:"number",value:le,onChange:W=>Ze(parseInt(W.target.value)||100),size:"sm",w:"80px",borderRadius:"lg",min:1,max:1e4})]})]}),Ge&&u.jsxs(ue,{children:[u.jsxs(Ce,{justify:"space-between",mb:2,children:[u.jsx(ie,{fontSize:"sm",fontWeight:"600",color:"gray.600",children:"Generated SQL"}),u.jsx(br,{"aria-label":"Copy",icon:u.jsx(J4,{}),size:"xs",variant:"ghost",onClick:is})]}),u.jsx(ue,{bg:"gray.900",color:"gray.100",p:3,borderRadius:"lg",fontSize:"xs",fontFamily:"mono",whiteSpace:"pre-wrap",maxH:"150px",overflow:"auto",children:Ge})]})]})},"visual"),w==="sql"&&u.jsx(dg,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:nu.snappy,h:"100%",children:u.jsxs(ft,{spacing:4,align:"stretch",h:"100%",children:[u.jsxs(Ce,{justify:"space-between",children:[u.jsx(ie,{fontWeight:"600",fontSize:"sm",color:"gray.600",children:"Write your SQL query"}),u.jsx(Ce,{children:u.jsx(br,{"aria-label":"Copy",icon:u.jsx(J4,{}),size:"sm",variant:"ghost",onClick:is})})]}),u.jsx(ue,{flex:1,minH:"300px",children:u.jsx(y6,{value:Be,onChange:Me,height:"100%",serviceName:t,schemas:A,placeholder:"SELECT * FROM schema.table WHERE ..."})})]})},"sql")]})}),u.jsxs(Sr,{p:4,gap:2,borderTop:"1px solid",borderColor:d,bg:o,flexShrink:0,children:[u.jsx(St,{colorScheme:"blue",leftIcon:Mt?u.jsx(Nn,{size:"sm"}):u.jsx(CI,{}),onClick:kt,isDisabled:Mt,flex:1,borderRadius:"xl",size:"lg",children:Mt?"Executing...":"Execute Query"}),s&&yt&&u.jsx($r,{label:"Publish as SQL View Layer to GeoServer",children:u.jsx(St,{colorScheme:"green",leftIcon:u.jsx(xu,{}),onClick:()=>{s(w==="visual"?Ge:Be,"sql_view_"+Date.now())},borderRadius:"xl",size:"lg",children:"Publish"})})]})]}),u.jsx(ue,{w:"4px",cursor:"col-resize",bg:Vt?"blue.400":d,_hover:{bg:"blue.400"},transition:"background 0.2s",onMouseDown:wn,flexShrink:0}),u.jsxs(ue,{w:`calc(${100-Nt}% - 4px)`,display:"flex",flexDirection:"column",overflow:"hidden",children:[u.jsxs(Sr,{px:4,py:3,bg:m,borderBottom:"1px solid",borderColor:d,align:"center",justify:"space-between",children:[u.jsxs(Ce,{children:[u.jsx(He,{as:tm,color:"blue.500"}),u.jsx(ie,{fontWeight:"600",children:"Results"}),yt&&u.jsxs(er,{colorScheme:"blue",borderRadius:"full",children:[yt.rows.length,yt.total_count?` / ${yt.total_count}`:""," rows"]}),yt&&u.jsxs(er,{colorScheme:"gray",borderRadius:"full",children:[yt.duration_ms.toFixed(2),"ms"]})]}),yt&&u.jsxs(Kd,{children:[u.jsx(Zd,{as:St,size:"sm",variant:"ghost",rightIcon:u.jsx(Nl,{}),children:u.jsx(He,{as:Iv})}),u.jsxs(Yd,{children:[u.jsx(fa,{icon:u.jsx(Iv,{}),onClick:()=>me("csv"),children:"Export as CSV"}),u.jsx(fa,{icon:u.jsx(Iv,{}),onClick:()=>me("json"),children:"Export as JSON"})]})]})]}),Kt&&u.jsxs(to,{status:"error",borderRadius:"none",children:[u.jsx(ro,{}),u.jsx($y,{fontSize:"sm",children:Kt})]}),u.jsx(ue,{ref:lt,flex:1,overflow:"auto",position:"relative",children:Mt&&!yt?u.jsx(Sr,{h:"100%",align:"center",justify:"center",children:u.jsxs(ft,{spacing:4,children:[u.jsx(Nn,{size:"xl",color:"blue.500",thickness:"4px"}),u.jsx(ie,{color:"gray.500",children:"Executing query..."})]})}):yt?u.jsxs(u.Fragment,{children:[u.jsxs(mI,{size:"sm",variant:"simple",children:[u.jsx(T7,{position:"sticky",top:0,bg:m,zIndex:1,children:u.jsxs(v2,{children:[u.jsx($g,{w:"50px",textAlign:"center",borderBottomWidth:"2px",borderBottomColor:d,children:"#"}),yt.columns.map((W,H)=>u.jsx($g,{borderBottomWidth:"2px",borderBottomColor:d,whiteSpace:"nowrap",children:u.jsxs(ft,{align:"start",spacing:0,children:[u.jsx(ie,{children:W.name}),u.jsx(ie,{fontSize:"2xs",color:"gray.400",fontWeight:"normal",children:W.type})]})},H))]})}),u.jsx(C7,{children:u.jsx(pc,{children:yt.rows.map((W,H)=>u.jsxs(dg,{as:v2,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:H*.01},_hover:{bg:b},children:[u.jsx(Bg,{textAlign:"center",color:"gray.400",fontSize:"xs",fontFamily:"mono",children:H+1}),yt.columns.map((ee,de)=>{const ve=W[ee.name],Se=ve===null,Fe=Se?"NULL":typeof ve=="object"?JSON.stringify(ve):String(ve);return u.jsx(Bg,{maxW:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:Se?"gray.400":void 0,fontStyle:Se?"italic":void 0,fontSize:"sm",title:Fe,children:Fe.length>100?Fe.substring(0,100)+"...":Fe},de)})]},H))})})]}),st&&u.jsx(Sr,{py:4,justify:"center",children:u.jsxs(Ce,{children:[u.jsx(Nn,{size:"sm"}),u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"Loading more..."})]})}),!yt.has_more&&yt.rows.length>0&&u.jsx(Sr,{py:4,justify:"center",children:u.jsxs(ie,{fontSize:"sm",color:"gray.400",children:["End of results (",yt.rows.length," rows)"]})})]}):u.jsx(Sr,{h:"100%",align:"center",justify:"center",children:u.jsxs(ft,{spacing:4,color:"gray.400",children:[u.jsx(He,{as:jb,boxSize:12}),u.jsx(ie,{children:"Execute a query to see results"})]})})})]})]})]})};function bPe(){const t=bt(s=>s.activeDialog),e=bt(s=>s.dialogData),r=bt(s=>s.closeDialog),n=t==="query",i=e==null?void 0:e.data;return i!=null&&i.serviceName?u.jsxs(es,{isOpen:n,onClose:r,size:"full",motionPreset:"slideInBottom",children:[u.jsx(rs,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsx(ts,{m:4,borderRadius:"2xl",overflow:"hidden",h:"calc(100vh - 32px)",maxH:"calc(100vh - 32px)",children:u.jsx(vPe,{serviceName:i.serviceName,initialSchema:i.schemaName,initialTable:i.tableName,initialSQL:i.initialSQL,onClose:r})})]}):null}class _Pe extends Mi.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){var n,i;console.error("DataViewerDialog Error:",e,r),(i=(n=this.props).onError)==null||i.call(n,e)}render(){var e;return this.state.hasError?u.jsxs(to,{status:"error",children:[u.jsx(ro,{}),u.jsxs(ue,{children:[u.jsx(g1,{children:"Dialog Error"}),u.jsx($y,{children:((e=this.state.error)==null?void 0:e.message)||"An unknown error occurred"})]})]}):this.props.children}}function wPe(){console.log("[DataViewerContent] Rendering");const t=bt(s=>s.dialogData);console.log("[DataViewerContent] dialogData:",t);const e=t==null?void 0:t.data,r=String((e==null?void 0:e.serviceName)??"unknown"),n=String((e==null?void 0:e.schemaName)??"unknown"),i=String((e==null?void 0:e.tableName)??"unknown");return console.log("[DataViewerContent] Extracted:",{serviceName:r,schemaName:n,tableName:i}),u.jsxs(ue,{children:[u.jsxs(ie,{children:["Service: ",r]}),u.jsxs(ie,{children:["Schema: ",n]}),u.jsxs(ie,{children:["Table: ",i]}),u.jsx(ie,{mt:4,color:"green.500",children:"If you see this, the dialog is working!"})]})}function SPe(){console.log("[DataViewerDialog] Component rendering");const t=bt(n=>n.activeDialog),e=bt(n=>n.closeDialog),r=t==="dataviewer";return console.log("[DataViewerDialog] isOpen:",r,"activeDialog:",t),r?u.jsxs(es,{isOpen:r,onClose:e,size:"xl",children:[u.jsx(rs,{}),u.jsxs(ts,{children:[u.jsx(f0,{children:"Data Viewer"}),u.jsx(Fs,{}),u.jsx(gs,{pb:6,children:u.jsx(_Pe,{children:u.jsx(wPe,{})})})]})]}):null}const x6=So`
  0% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(2);
    opacity: 0.5;
  }
  100% {
    transform: scale(3);
    opacity: 0;
  }
`;function Mo({label:t,value:e,helpText:r,icon:n,colorScheme:i="blue"}){const s=dr("white","gray.700"),a=dr("gray.200","gray.600");return u.jsxs(ue,{bg:s,p:4,borderRadius:"xl",borderWidth:1,borderColor:a,shadow:"sm",transition:"all 0.2s",_hover:{shadow:"md",borderColor:`${i}.300`},children:[u.jsxs(Ce,{spacing:3,mb:2,children:[u.jsx(ue,{p:2,borderRadius:"lg",bg:`${i}.50`,color:`${i}.500`,children:u.jsx(He,{as:n,boxSize:5})}),u.jsx(ie,{fontSize:"sm",fontWeight:"medium",color:"gray.500",children:t})]}),u.jsx(ie,{fontSize:"2xl",fontWeight:"bold",children:e}),r&&u.jsx(ie,{fontSize:"xs",color:"gray.400",mt:1,children:r})]})}const kPe=`
  M 115 95 Q 120 80 140 75 Q 160 70 180 78 Q 200 85 210 95 Q 220 105 215 120
  Q 210 135 195 145 Q 180 155 160 160 Q 140 165 125 155 Q 110 145 105 130
  Q 100 115 115 95 Z
  M 125 170 Q 135 165 145 170 Q 155 175 160 190 Q 165 205 158 225
  Q 150 245 140 255 Q 130 265 120 260 Q 110 255 108 240 Q 105 225 110 205
  Q 115 185 125 170 Z
  M 440 70 Q 460 65 480 72 Q 500 80 510 95 Q 520 110 515 125
  Q 510 140 495 145 Q 480 150 460 145 Q 440 140 430 125 Q 420 110 425 90 Q 430 75 440 70 Z
  M 455 155 Q 475 150 495 158 Q 515 165 525 185 Q 535 205 530 230
  Q 525 255 510 270 Q 495 285 475 282 Q 455 280 445 265 Q 435 250 438 225
  Q 440 200 445 180 Q 450 160 455 155 Z
  M 550 60 Q 590 50 640 55 Q 690 60 730 80 Q 770 100 790 130
  Q 810 160 800 195 Q 790 230 760 250 Q 730 270 690 275 Q 650 280 610 270
  Q 570 260 545 235 Q 520 210 520 175 Q 520 140 530 110 Q 540 80 550 60 Z
  M 770 280 Q 790 275 810 285 Q 830 295 835 315 Q 840 335 830 350
  Q 820 365 800 368 Q 780 370 765 360 Q 750 350 752 330 Q 755 310 760 295 Q 765 285 770 280 Z
`;function CPe(t){return!t||t==="localhost"||t==="127.0.0.1"?"Local development server on this machine":t.startsWith("192.168.")||t.startsWith("10.")||t.startsWith("172.")?"Server on local network (private IP address)":t.includes("kartoza.com")?"Kartoza cloud infrastructure, Cape Town, South Africa":t.includes("digitalocean.com")||t.includes(".do.")?"DigitalOcean cloud infrastructure":t.includes("aws.")||t.includes("amazonaws.com")?"Amazon Web Services (AWS) cloud":t.includes("azure.")||t.includes("microsoft.com")?"Microsoft Azure cloud":t.includes("gcp.")||t.includes("google")?"Google Cloud Platform":t.split(".").length>=2?`Remote server at ${t}`:`Server: ${t}`}function TPe(t){return!t||t==="localhost"||t==="127.0.0.1"||t.startsWith("192.168.")||t.startsWith("10.")||t.startsWith("172.")?{x:"48%",y:"35%"}:t.includes("kartoza.com")?{x:"53%",y:"72%"}:{x:"50%",y:"45%"}}function OPe({host:t}){const e=dr("blue.50","blue.900"),r=dr("#94a3b8","#475569"),n=dr("red.500","red.400"),i=dr("red.300","red.600"),s=dr("gray.100","gray.700"),a=dr("gray.700","gray.200"),o=TPe(t),d=CPe(t);return u.jsxs(ft,{spacing:3,align:"stretch",children:[u.jsxs(ue,{position:"relative",bg:e,borderRadius:"xl",overflow:"hidden",h:"180px",w:"100%",children:[u.jsxs("svg",{viewBox:"0 0 900 400",style:{width:"100%",height:"100%"},preserveAspectRatio:"xMidYMid meet",children:[u.jsx("defs",{children:u.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:u.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"currentColor",strokeWidth:"0.5",opacity:"0.1"})})}),u.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),u.jsx("path",{d:kPe,fill:r,stroke:r,strokeWidth:"2",opacity:"0.6"})]}),u.jsxs(ue,{position:"absolute",left:o.x,top:o.y,transform:"translate(-50%, -50%)",children:[u.jsx(ue,{position:"absolute",w:"24px",h:"24px",borderRadius:"full",bg:i,animation:`${x6} 2s ease-out infinite`,transform:"translate(-50%, -50%)",left:"50%",top:"50%"}),u.jsx(ue,{position:"absolute",w:"24px",h:"24px",borderRadius:"full",bg:i,animation:`${x6} 2s ease-out infinite 0.6s`,transform:"translate(-50%, -50%)",left:"50%",top:"50%"}),u.jsx(ue,{w:"14px",h:"14px",borderRadius:"full",bg:n,shadow:"lg",position:"relative",zIndex:1,border:"2px solid white"})]}),u.jsx(ue,{position:"absolute",bottom:3,left:3,bg:"blackAlpha.700",px:3,py:1.5,borderRadius:"lg",children:u.jsxs(Ce,{spacing:2,children:[u.jsx(He,{as:BA,color:"red.300",boxSize:4}),u.jsx(ie,{fontSize:"sm",color:"white",fontWeight:"semibold",children:t||"localhost"})]})})]}),u.jsx(ue,{bg:s,px:4,py:2,borderRadius:"lg",children:u.jsxs(Ce,{spacing:2,children:[u.jsx(He,{as:gu,color:"blue.500",boxSize:4}),u.jsx(ie,{fontSize:"sm",color:a,children:d})]})})]})}function PPe(){var A;const t=bt(E=>E.activeDialog),e=bt(E=>E.dialogData),r=bt(E=>E.closeDialog),n=t==="pgdashboard",i=e==null?void 0:e.data,[s,a]=I.useState(null),[o,d]=I.useState(!1),[m,y]=I.useState(null),b=dr("linear-gradient(135deg, #336791 0%, #1a4e6d 100%)","linear-gradient(135deg, #1a4e6d 0%, #0d2b3d 100%)"),w=dr("gray.50","gray.900");I.useEffect(()=>{n&&(i!=null&&i.serviceName)&&(d(!0),y(null),$be(i.serviceName).then(a).catch(E=>y(E.message)).finally(()=>d(!1)))},[n,i==null?void 0:i.serviceName]);const O=I.useMemo(()=>{if(!(s!=null&&s.version))return"Unknown";const E=s.version.match(/PostgreSQL (\d+\.\d+)/);return E?`PostgreSQL ${E[1]}`:"PostgreSQL"},[s==null?void 0:s.version]);return i!=null&&i.serviceName?u.jsxs(es,{isOpen:n,onClose:r,size:"5xl",motionPreset:"slideInBottom",children:[u.jsx(rs,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(ts,{m:4,borderRadius:"2xl",overflow:"hidden",maxH:"90vh",bg:w,children:[u.jsx(f0,{bgGradient:b,color:"white",py:6,px:6,children:u.jsxs(Ce,{spacing:4,children:[u.jsx(ue,{p:3,bg:"whiteAlpha.200",borderRadius:"xl",children:u.jsx(He,{as:Ky,boxSize:8})}),u.jsxs(ft,{align:"start",spacing:0,children:[u.jsxs(Ce,{spacing:3,children:[u.jsx(ie,{fontSize:"xl",fontWeight:"bold",children:i.serviceName}),s&&u.jsx(er,{colorScheme:"green",variant:"solid",fontSize:"xs",px:2,py:1,borderRadius:"full",children:u.jsxs(Ce,{spacing:1,children:[u.jsx(He,{as:em,boxSize:3}),u.jsx(ie,{children:"Connected"})]})})]}),s&&u.jsxs(Ce,{spacing:3,opacity:.9,mt:1,children:[u.jsx(ie,{fontSize:"sm",children:s.database_name}),u.jsx(ie,{fontSize:"sm",children:"|"}),u.jsx(ie,{fontSize:"sm",children:O}),s.has_postgis&&u.jsxs(u.Fragment,{children:[u.jsx(ie,{fontSize:"sm",children:"|"}),u.jsxs(Ce,{spacing:1,children:[u.jsx(He,{as:Rl,boxSize:4}),u.jsx(ie,{fontSize:"sm",children:"PostGIS"})]})]})]})]})]})}),u.jsx(Fs,{color:"white"}),u.jsx(gs,{p:6,overflowY:"auto",maxH:"calc(90vh - 100px)",children:o?u.jsx(uA,{h:"300px",children:u.jsxs(ft,{spacing:4,children:[u.jsx(Nn,{size:"xl",color:"blue.500",thickness:"4px"}),u.jsx(ie,{color:"gray.500",children:"Loading server statistics..."})]})}):m?u.jsx(uA,{h:"300px",children:u.jsxs(ft,{spacing:4,children:[u.jsx(He,{as:Z4,boxSize:12,color:"red.500"}),u.jsx(ie,{color:"red.500",fontWeight:"medium",children:m})]})}):s&&u.jsxs(ft,{spacing:6,align:"stretch",children:[u.jsx(OPe,{host:s.host}),u.jsxs(ue,{children:[u.jsxs(Ce,{mb:4,children:[u.jsx(He,{as:rF,color:"purple.500"}),u.jsx(ie,{fontWeight:"semibold",fontSize:"lg",children:"Connections"})]}),u.jsxs(nn,{columns:{base:2,md:4},spacing:4,children:[u.jsx(Mo,{label:"Current",value:s.current_connections,helpText:`of ${s.max_connections} max`,icon:rF,colorScheme:"purple"}),u.jsx(Mo,{label:"Active",value:s.active_connections,helpText:"executing queries",icon:_I,colorScheme:"green"}),u.jsx(Mo,{label:"Idle",value:s.idle_connections,helpText:"waiting for work",icon:kI,colorScheme:"blue"}),u.jsx(Mo,{label:"Waiting",value:s.waiting_connections,helpText:"blocked on locks",icon:_S,colorScheme:"orange"})]}),u.jsxs(ue,{mt:4,children:[u.jsxs(Ce,{justify:"space-between",mb:2,children:[u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"Connection Pool Usage"}),u.jsxs(ie,{fontSize:"sm",fontWeight:"bold",children:[s.connection_percent,"%"]})]}),u.jsx(um,{value:s.connection_percent,colorScheme:s.connection_percent>80?"red":s.connection_percent>60?"orange":"green",borderRadius:"full",size:"lg"})]})]}),u.jsx(Fr,{}),u.jsxs(ue,{children:[u.jsxs(Ce,{mb:4,children:[u.jsx(He,{as:Kn,color:"blue.500"}),u.jsx(ie,{fontWeight:"semibold",fontSize:"lg",children:"Database"})]}),u.jsxs(nn,{columns:{base:2,md:4},spacing:4,children:[u.jsx(Mo,{label:"Size",value:s.database_size,icon:X7,colorScheme:"blue"}),u.jsx(Mo,{label:"Cache Hit Ratio",value:s.cache_hit_ratio,helpText:"higher is better",icon:_S,colorScheme:"green"}),u.jsx(Mo,{label:"Live Tuples",value:s.live_tuples.toLocaleString(),icon:tm,colorScheme:"purple"}),u.jsx(Mo,{label:"Dead Tuples",value:s.dead_tuples.toLocaleString(),helpText:"needs vacuum",icon:Z4,colorScheme:s.dead_tuples>1e4?"red":"gray"})]})]}),u.jsx(Fr,{}),u.jsxs(ue,{children:[u.jsxs(Ce,{mb:4,children:[u.jsx(He,{as:Yi,color:"teal.500"}),u.jsx(ie,{fontWeight:"semibold",fontSize:"lg",children:"Objects"})]}),u.jsxs(nn,{columns:{base:3,md:5},spacing:4,children:[u.jsx(Mo,{label:"Schemas",value:s.schema_count,icon:Yi,colorScheme:"teal"}),u.jsx(Mo,{label:"Tables",value:s.table_count,icon:tm,colorScheme:"blue"}),u.jsx(Mo,{label:"Views",value:s.view_count,icon:wo,colorScheme:"purple"}),u.jsx(Mo,{label:"Indexes",value:s.index_count,icon:_S,colorScheme:"orange"}),u.jsx(Mo,{label:"Functions",value:s.function_count,icon:Pb,colorScheme:"pink"})]})]}),s.has_postgis&&u.jsxs(u.Fragment,{children:[u.jsx(Fr,{}),u.jsxs(ue,{children:[u.jsxs(Ce,{mb:4,children:[u.jsx(He,{as:Rl,color:"green.500"}),u.jsx(ie,{fontWeight:"semibold",fontSize:"lg",children:"PostGIS"})]}),u.jsxs(nn,{columns:{base:2,md:3},spacing:4,children:[u.jsx(Mo,{label:"Geometry Columns",value:s.geometry_columns||0,icon:Rl,colorScheme:"green"}),u.jsx(Mo,{label:"Raster Columns",value:s.raster_columns||0,icon:Yi,colorScheme:"blue"})]}),s.postgis_version&&u.jsx(ue,{mt:4,p:3,bg:"green.50",borderRadius:"lg",children:u.jsx(ie,{fontSize:"xs",color:"green.700",fontFamily:"mono",noOfLines:2,children:s.postgis_version})})]})]}),u.jsx(Fr,{}),u.jsxs(ue,{children:[u.jsxs(Ce,{mb:4,children:[u.jsx(He,{as:gu,color:"gray.500"}),u.jsx(ie,{fontWeight:"semibold",fontSize:"lg",children:"Server Info"})]}),u.jsxs(nn,{columns:{base:1,md:2},spacing:4,children:[u.jsxs(Ds,{children:[u.jsx(Rs,{children:"Uptime"}),u.jsx(Ls,{fontSize:"lg",children:s.uptime||"N/A"}),u.jsxs(ay,{children:["Since ",(A=s.server_start_time)==null?void 0:A.split(" ")[0]]})]}),u.jsxs(Ds,{children:[u.jsx(Rs,{children:"Transactions"}),u.jsx(Ls,{fontSize:"lg",children:s.xact_commit.toLocaleString()}),u.jsxs(ay,{children:[s.xact_rollback.toLocaleString()," rollbacks"]})]})]}),u.jsx(ue,{mt:4,p:3,bg:"gray.100",borderRadius:"lg",_dark:{bg:"gray.700"},children:u.jsx(ie,{fontSize:"xs",color:"gray.600",fontFamily:"mono",noOfLines:2,_dark:{color:"gray.300"},children:s.version})})]}),s.installed_extensions&&s.installed_extensions.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Fr,{}),u.jsxs(ue,{children:[u.jsxs(Ce,{mb:4,children:[u.jsx(He,{as:Pb,color:"indigo.500"}),u.jsx(ie,{fontWeight:"semibold",fontSize:"lg",children:"Extensions"})]}),u.jsx(Tb,{spacing:2,children:s.installed_extensions.map(E=>u.jsx(Hy,{children:u.jsx($r,{label:E,fontSize:"xs",children:u.jsx(Qy,{size:"md",colorScheme:E==="postgis"?"green":E==="plpgsql"?"blue":"gray",borderRadius:"full",children:E})})},E))})]})]})]})})]})]}):null}function jPe(){var Kt,vt;const t=bt(st=>st.activeDialog),e=bt(st=>st.dialogData),r=bt(st=>st.closeDialog),n=Pa(),i=Go(),[s,a]=I.useState([]),[o,d]=I.useState(!1),[m,y]=I.useState(!1),[b,w]=I.useState([]),[O,A]=I.useState(!1),[E,$]=I.useState(!1),[R,F]=I.useState(!1),[L,U]=I.useState("public"),[Q,Y]=I.useState(!1),[Z,J]=I.useState(void 0),[re,he]=I.useState(null),le=I.useRef(null),Ze=dr("gray.50","gray.700"),Ee=dr("gray.300","gray.600"),qe=t==="pgupload",et=(Kt=e==null?void 0:e.data)==null?void 0:Kt.serviceName,at=(vt=e==null?void 0:e.data)==null?void 0:vt.schemaName;I.useEffect(()=>{qe&&(Nbe().then(he).catch(console.error),a([]),y(!1),w([]),F(!1),U(at||"public"),Y(!1),J(void 0))},[qe,at]);const Be=st=>{const Te=st.toLowerCase().split(".").pop()||"";return[".tif",".tiff",".img",".jp2",".ecw",".sid",".asc",".dem",".hgt",".nc",".vrt"].some(lt=>lt.slice(1)===Te)},Me=I.useCallback(st=>{st.preventDefault();const Te=Array.from(st.dataTransfer.files);Le(Te)},[]),Ge=st=>{if(st.target.files){const Te=Array.from(st.target.files);Le(Te)}},Le=st=>{if(!re){i({title:"Import tools not available",description:"Please ensure ogr2ogr and raster2pgsql are installed",status:"warning",duration:3e3});return}const Te=Object.keys(re.supported_extensions),lt=st.filter(Nt=>{const Tt="."+Nt.name.toLowerCase().split(".").pop();return Te.includes(Tt)});lt.length<st.length&&i({title:"Some files skipped",description:"Only supported geospatial formats are accepted",status:"warning",duration:3e3}),a(Nt=>[...Nt,...lt.map(Tt=>({file:Tt,progress:0,status:"pending",isRaster:Be(Tt.name)}))]),y(!1),w([])},Ie=st=>{a(Te=>Te.filter((lt,Nt)=>Nt!==st))},Oe=async()=>{if(!et){i({title:"No service selected",description:"Please select a PostgreSQL service first",status:"warning",duration:3e3});return}if(s.length===0){i({title:"No files selected",description:"Please select files to upload",status:"warning",duration:3e3});return}d(!0);for(let Te=0;Te<s.length;Te++)if(s[Te].status==="pending"){a(lt=>lt.map((Nt,Tt)=>Tt===Te?{...Nt,status:"uploading"}:Nt));try{const lt=await Vbe(s[Te].file,Nt=>{a(Tt=>Tt.map((Vt,tn)=>tn===Te?{...Vt,progress:Nt}:Vt))});if(a(Nt=>Nt.map((Tt,Vt)=>Vt===Te?{...Tt,status:"uploaded",progress:100,filePath:lt.file_path}:Tt)),!s[Te].isRaster){A(!0);try{const Nt=await Wbe(lt.file_path);a(Vt=>Vt.map((tn,hn)=>hn===Te?{...tn,layers:Nt}:tn));const Tt=Nt.map(Vt=>({name:Vt.name,selected:!0,tableName:Vt.name.toLowerCase().replace(/[^a-z0-9_]/g,"_")}));w(Vt=>[...Vt,...Tt])}catch(Nt){console.error("Failed to detect layers:",Nt)}finally{A(!1)}}}catch(lt){a(Nt=>Nt.map((Tt,Vt)=>Vt===Te?{...Tt,status:"error",error:lt.message}:Tt))}}d(!1),y(!0);const st=s.filter(Te=>Te.status==="uploaded").length;st>0&&i({title:"Files uploaded",description:`${st} file(s) ready for import`,status:"success",duration:3e3})},Re=async()=>{if(!et)return;$(!0);const st=[];for(const lt of s)if(!(lt.status!=="uploaded"||!lt.filePath)){a(Nt=>Nt.map(Tt=>Tt.filePath===lt.filePath?{...Tt,status:"importing"}:Tt));try{if(lt.isRaster){const Nt=await qbe({source_file:lt.filePath,target_service:et,target_schema:L,overwrite:Q,create_index:!0});st.push(Nt.job_id),a(Tt=>Tt.map(Vt=>Vt.filePath===lt.filePath?{...Vt,jobId:Nt.job_id}:Vt))}else{const Nt=b.filter(Tt=>{var Vt;return Tt.selected&&((Vt=lt.layers)==null?void 0:Vt.some(tn=>tn.name===Tt.name))});for(const Tt of Nt){const Vt=await Ube({source_file:lt.filePath,target_service:et,target_schema:L,table_name:Tt.tableName,source_layer:Tt.name,overwrite:Q,target_srid:Z});st.push(Vt.job_id)}}a(Nt=>Nt.map(Tt=>Tt.filePath===lt.filePath?{...Tt,status:"success"}:Tt))}catch(Nt){a(Tt=>Tt.map(Vt=>Vt.filePath===lt.filePath?{...Vt,status:"error",error:Nt.message}:Vt))}}$(!1),st.length>0&&nt(st),n.invalidateQueries({queryKey:["pgschema",et]});const Te=s.filter(lt=>lt.status==="success").length;Te>0&&i({title:"Import started",description:`${Te} file(s) queued for import`,status:"success",duration:3e3})},nt=async st=>{const Te=new Set(st);for(;Te.size>0;){await new Promise(lt=>setTimeout(lt,2e3));for(const lt of Array.from(Te))try{const Nt=await Qbe(lt);(Nt.status==="completed"||Nt.status==="failed")&&(Te.delete(lt),Nt.status==="completed"?i({title:"Import completed",description:`Table ${Nt.target_table} created successfully`,status:"success",duration:3e3}):i({title:"Import failed",description:Nt.error||"Unknown error",status:"error",duration:5e3}))}catch{Te.delete(lt)}}n.invalidateQueries({queryKey:["pgschema",et]})},ze=st=>{w(Te=>Te.map(lt=>lt.name===st?{...lt,selected:!lt.selected}:lt))},rt=(st,Te)=>{w(lt=>lt.map(Nt=>Nt.name===st?{...Nt,tableName:Te}:Nt))},Xe=()=>{a([]),y(!1),w([]),r()},_t=st=>{if(st.isRaster)return mu;switch(st.status){case"success":return SI;case"error":return tf;default:return G7}},Mt=st=>{switch(st){case"success":return"green.500";case"error":return"red.500";case"importing":return"blue.500";default:return"gray.500"}},Et=s.some(st=>st.status==="pending"),yt=s.some(st=>st.status==="uploaded"),Je=b.filter(st=>st.selected).length;return re!=null&&re.available?u.jsxs(es,{isOpen:qe,onClose:Xe,size:"xl",isCentered:!0,children:[u.jsx(rs,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(ts,{borderRadius:"xl",overflow:"hidden",maxH:"85vh",children:[u.jsx(ue,{bg:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",px:6,py:4,children:u.jsxs(Ce,{spacing:3,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(He,{as:Kn,boxSize:5,color:"white"})}),u.jsxs(ue,{flex:"1",children:[u.jsx(ie,{color:"white",fontWeight:"600",fontSize:"lg",children:"Import Data to PostgreSQL"}),u.jsxs(Ce,{spacing:2,children:[u.jsx(ie,{color:"whiteAlpha.800",fontSize:"sm",children:"Target:"}),et?u.jsx(er,{bg:"whiteAlpha.200",color:"white",fontSize:"xs",children:et}):u.jsx(ie,{color:"whiteAlpha.600",fontSize:"sm",fontStyle:"italic",children:"No service selected"})]})]})]})}),u.jsx(Fs,{color:"white"}),u.jsx(gs,{py:6,overflowY:"auto",children:u.jsxs(ft,{spacing:4,children:[!m&&u.jsxs(ue,{w:"100%",p:8,bg:Ze,border:"2px dashed",borderColor:Ee,borderRadius:"xl",textAlign:"center",cursor:"pointer",onClick:()=>{var st;return(st=le.current)==null?void 0:st.click()},onDrop:Me,onDragOver:st=>st.preventDefault(),_hover:{borderColor:"purple.500",bg:"purple.50"},transition:"all 0.2s",children:[u.jsxs(ft,{spacing:3,children:[u.jsx(ue,{bg:"purple.50",p:4,borderRadius:"full",children:u.jsx(He,{as:Dv,boxSize:10,color:"purple.500"})}),u.jsxs(ft,{spacing:1,children:[u.jsx(ie,{fontWeight:"600",color:"gray.700",children:"Drop files here or click to browse"}),u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"GeoPackage, Shapefile, GeoJSON, GeoTIFF, and more"})]})]}),u.jsx("input",{ref:le,type:"file",multiple:!0,accept:".gpkg,.shp,.zip,.geojson,.json,.kml,.tif,.tiff,.gml",style:{display:"none"},onChange:Ge})]}),s.length>0&&u.jsx(v1,{spacing:2,w:"100%",children:s.map((st,Te)=>u.jsx(iI,{p:3,bg:Ze,borderRadius:"lg",border:"1px solid",borderColor:st.status==="success"?"green.200":st.status==="error"?"red.200":"gray.200",children:u.jsxs(ft,{align:"stretch",spacing:2,children:[u.jsxs(ue,{display:"flex",alignItems:"center",gap:2,children:[u.jsx(sI,{as:_t(st),color:Mt(st.status),boxSize:5}),u.jsx(ie,{flex:"1",fontSize:"sm",noOfLines:1,fontWeight:"500",children:st.file.name}),st.isRaster&&u.jsx(er,{colorScheme:"purple",size:"sm",children:"Raster"}),st.status==="pending"&&u.jsx(St,{size:"xs",variant:"ghost",colorScheme:"red",onClick:()=>Ie(Te),borderRadius:"md",children:"Remove"}),st.status==="success"&&u.jsx(er,{colorScheme:"green",borderRadius:"md",children:"Imported"}),st.status==="importing"&&u.jsxs(Ce,{children:[u.jsx(Nn,{size:"xs"}),u.jsx(er,{colorScheme:"blue",borderRadius:"md",children:"Importing"})]})]}),(st.status==="uploading"||st.status==="importing")&&u.jsx(um,{value:st.status==="importing"?void 0:st.progress,isIndeterminate:st.status==="importing",size:"sm",colorScheme:"purple",borderRadius:"full"}),st.status==="error"&&u.jsx(ie,{fontSize:"xs",color:"red.500",children:st.error})]})},Te))}),m&&b.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Fr,{}),u.jsxs(ue,{w:"100%",children:[u.jsxs(Ce,{justify:"space-between",mb:3,children:[u.jsxs(Ce,{children:[u.jsx(He,{as:Yi,color:"purple.500"}),u.jsx(ie,{fontWeight:"600",children:"Layers to Import"})]}),u.jsxs(er,{colorScheme:"purple",children:[Je," selected"]})]}),u.jsx(ie,{fontSize:"sm",color:"gray.500",mb:3,children:"Select which layers to import and set target table names:"}),u.jsx(ft,{align:"stretch",spacing:2,maxH:"200px",overflowY:"auto",children:b.map(st=>u.jsx(ue,{p:2,bg:Ze,borderRadius:"md",border:"1px solid",borderColor:st.selected?"purple.200":"gray.200",children:u.jsxs(Ce,{spacing:3,children:[u.jsx(Ua,{isChecked:st.selected,onChange:()=>ze(st.name),colorScheme:"purple"}),u.jsxs(ft,{align:"stretch",flex:"1",spacing:1,children:[u.jsx(ie,{fontSize:"sm",fontWeight:"500",children:st.name}),u.jsx(Ar,{size:"xs",value:st.tableName,onChange:Te=>rt(st.name,Te.target.value),placeholder:"Table name",isDisabled:!st.selected})]})]})},st.name))})]})]}),m&&yt&&u.jsxs(u.Fragment,{children:[u.jsx(Fr,{}),u.jsxs(ue,{w:"100%",children:[u.jsx(St,{variant:"ghost",size:"sm",leftIcon:R?u.jsx(Gy,{}):u.jsx(Nl,{}),rightIcon:u.jsx(P1,{}),onClick:()=>F(!R),w:"100%",justifyContent:"space-between",children:"Advanced Options"}),u.jsx(mc,{in:R,children:u.jsxs(ft,{spacing:4,mt:3,align:"stretch",p:3,bg:Ze,borderRadius:"md",children:[u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",children:"Target Schema"}),u.jsx(Ar,{size:"sm",value:L,onChange:st=>U(st.target.value),placeholder:"public"})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",children:"Target SRID (leave empty to keep source)"}),u.jsx(Ar,{size:"sm",type:"number",value:Z||"",onChange:st=>J(st.target.value?parseInt(st.target.value):void 0),placeholder:"e.g. 4326"})]}),u.jsxs(Ot,{display:"flex",alignItems:"center",children:[u.jsx(Pt,{fontSize:"sm",mb:"0",children:"Overwrite existing tables"}),u.jsx(la,{colorScheme:"purple",isChecked:Q,onChange:st=>Y(st.target.checked)})]})]})})]})]}),O&&u.jsxs(Ce,{spacing:2,color:"gray.500",children:[u.jsx(Nn,{size:"sm"}),u.jsx(ie,{fontSize:"sm",children:"Detecting layers..."})]})]})}),u.jsxs(qo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.100",bg:"gray.50",children:[u.jsx(St,{variant:"ghost",onClick:Xe,borderRadius:"lg",children:m?"Close":"Cancel"}),m&&yt&&u.jsx(St,{colorScheme:"green",onClick:Re,isLoading:E,loadingText:"Importing...",isDisabled:Je===0&&!s.some(st=>st.isRaster&&st.status==="uploaded"),leftIcon:u.jsx(Kn,{}),borderRadius:"lg",px:6,children:"Import to PostgreSQL"}),(!m||Et)&&u.jsxs(St,{colorScheme:"purple",onClick:Oe,isLoading:o,loadingText:"Uploading...",isDisabled:s.length===0||!et||!Et,leftIcon:u.jsx(Dv,{}),borderRadius:"lg",px:6,children:["Upload ",s.filter(st=>st.status==="pending").length>0&&`(${s.filter(st=>st.status==="pending").length})`]})]})]})]}):u.jsxs(es,{isOpen:qe,onClose:Xe,size:"lg",isCentered:!0,children:[u.jsx(rs,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(ts,{borderRadius:"xl",overflow:"hidden",children:[u.jsx(ue,{bg:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",px:6,py:4,children:u.jsxs(Ce,{spacing:3,children:[u.jsx(ue,{bg:"whiteAlpha.200",p:2,borderRadius:"lg",children:u.jsx(He,{as:Kn,boxSize:5,color:"white"})}),u.jsx(ie,{color:"white",fontWeight:"600",fontSize:"lg",children:"Import Data to PostgreSQL"})]})}),u.jsx(Fs,{color:"white"}),u.jsx(gs,{py:6,children:u.jsxs(ft,{spacing:4,align:"center",children:[u.jsx(He,{as:tf,boxSize:12,color:"red.500"}),u.jsx(ie,{fontWeight:"600",fontSize:"lg",children:"Import Tools Not Available"}),u.jsx(ie,{color:"gray.500",textAlign:"center",children:"ogr2ogr and raster2pgsql are required for data import. Please install GDAL and PostGIS on the server."})]})}),u.jsx(qo,{children:u.jsx(St,{onClick:Xe,children:"Close"})})]})]})}const v6=So`
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.3); opacity: 0.6; }
  100% { transform: scale(1.6); opacity: 0; }
`,APe=So`
  0% { transform: scale(1.6); opacity: 0; }
  50% { transform: scale(1.3); opacity: 0.6; }
  100% { transform: scale(1); opacity: 1; }
`,AP=So`
  0% { transform: translateX(-10px); opacity: 0; }
  50% { opacity: 1; }
  100% { transform: translateX(10px); opacity: 0; }
`,EPe=So`
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
`,zPe=So`
  0%, 100% { box-shadow: 0 0 5px rgba(56, 178, 172, 0.3); }
  50% { box-shadow: 0 0 20px rgba(56, 178, 172, 0.6); }
`;function MPe({connection:t,isSelected:e,onSelect:r,isHovered:n,onHover:i}){return u.jsxs(ue,{position:"relative",p:4,bg:e?"green.50":"gray.50",borderRadius:"lg",border:"2px solid",borderColor:e?"green.400":n?"green.300":"gray.200",cursor:"pointer",transition:"all 0.3s ease",onClick:r,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),_hover:{borderColor:"green.300",bg:"green.50"},children:[(n||e)&&u.jsxs(u.Fragment,{children:[u.jsx(ue,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",w:"60px",h:"60px",borderRadius:"full",border:"2px solid",borderColor:"green.300",css:dc`animation: ${v6} 1.5s ease-out infinite;`}),u.jsx(ue,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",w:"60px",h:"60px",borderRadius:"full",border:"2px solid",borderColor:"green.300",css:dc`animation: ${v6} 1.5s ease-out infinite 0.5s;`})]}),u.jsxs(ft,{spacing:2,position:"relative",zIndex:1,children:[u.jsxs(ue,{position:"relative",children:[u.jsx(He,{as:gu,w:10,h:10,color:e?"green.500":"gray.400"}),e&&u.jsx(He,{as:em,position:"absolute",bottom:-1,right:-1,w:4,h:4,color:"green.500",bg:"white",borderRadius:"full"})]}),u.jsx(ie,{fontWeight:"bold",fontSize:"sm",textAlign:"center",noOfLines:1,children:(t==null?void 0:t.name)||"No server"}),u.jsx(er,{colorScheme:"green",fontSize:"xs",children:"SOURCE"})]})]})}function IPe({connection:t,isRunning:e,task:r,onRemove:n,onStop:i}){const s=(r==null?void 0:r.progress)||0;return u.jsxs(ue,{position:"relative",p:4,bg:e?"blue.50":(r==null?void 0:r.status)==="completed"?"green.50":(r==null?void 0:r.status)==="failed"?"red.50":"gray.50",borderRadius:"lg",border:"2px solid",borderColor:e?"blue.400":(r==null?void 0:r.status)==="completed"?"green.400":(r==null?void 0:r.status)==="failed"?"red.400":"gray.200",transition:"all 0.3s ease",css:e?dc`animation: ${zPe} 2s ease-in-out infinite;`:void 0,children:[e&&u.jsx(ue,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",w:"60px",h:"60px",borderRadius:"full",border:"2px solid",borderColor:"blue.300",css:dc`animation: ${APe} 1.5s ease-in infinite;`}),u.jsxs(ft,{spacing:2,position:"relative",zIndex:1,children:[u.jsxs(ue,{position:"relative",children:[u.jsx(He,{as:Kn,w:10,h:10,color:e?"blue.500":(r==null?void 0:r.status)==="completed"?"green.500":(r==null?void 0:r.status)==="failed"?"red.500":"gray.400",css:e?dc`animation: ${EPe} 2s linear infinite;`:void 0}),(r==null?void 0:r.status)==="completed"&&u.jsx(He,{as:em,position:"absolute",bottom:-1,right:-1,w:4,h:4,color:"green.500",bg:"white",borderRadius:"full"}),(r==null?void 0:r.status)==="failed"&&u.jsx(He,{as:tC,position:"absolute",bottom:-1,right:-1,w:4,h:4,color:"red.500",bg:"white",borderRadius:"full"})]}),u.jsx(ie,{fontWeight:"bold",fontSize:"sm",textAlign:"center",noOfLines:1,children:t.name}),u.jsx(er,{colorScheme:"blue",fontSize:"xs",children:"DESTINATION"}),(e||r)&&u.jsxs(ue,{w:"100%",mt:2,children:[u.jsx(um,{value:s,size:"sm",colorScheme:(r==null?void 0:r.status)==="failed"?"red":(r==null?void 0:r.status)==="completed"?"green":"blue",borderRadius:"full",hasStripe:e,isAnimated:e}),u.jsx(ie,{fontSize:"xs",color:"gray.500",textAlign:"center",mt:1,children:(r==null?void 0:r.currentItem)||`${s}%`})]}),u.jsx(Ce,{spacing:1,mt:2,children:e?u.jsx($r,{label:"Stop sync",children:u.jsx(br,{"aria-label":"Stop sync",icon:u.jsx(Y7,{}),size:"xs",colorScheme:"red",variant:"ghost",onClick:a=>{a.stopPropagation(),i()}})}):u.jsx($r,{label:"Remove",children:u.jsx(br,{"aria-label":"Remove destination",icon:u.jsx(Nd,{}),size:"xs",colorScheme:"red",variant:"ghost",onClick:a=>{a.stopPropagation(),n()}})})})]})]})}function DPe({isActive:t}){return u.jsxs(ue,{position:"relative",minW:"80px",display:"flex",alignItems:"center",justifyContent:"center",children:[u.jsx(ue,{h:"2px",flex:1,bg:t?"blue.400":"gray.300",transition:"background 0.3s ease"}),t&&u.jsxs(u.Fragment,{children:[u.jsx(He,{as:ov,position:"absolute",color:"blue.500",css:dc`animation: ${AP} 1s ease-in-out infinite;`}),u.jsx(He,{as:ov,position:"absolute",color:"blue.500",css:dc`animation: ${AP} 1s ease-in-out infinite 0.33s;`}),u.jsx(He,{as:ov,position:"absolute",color:"blue.500",css:dc`animation: ${AP} 1s ease-in-out infinite 0.66s;`})]}),!t&&u.jsx(He,{as:ov,position:"absolute",color:"gray.400"})]})}function RPe({options:t,onChange:e}){const{isOpen:r,onToggle:n}=Qp({defaultIsOpen:!0}),i=s=>{e({...t,[s]:!t[s]})};return u.jsxs(ue,{bg:"gray.50",borderRadius:"md",p:3,children:[u.jsxs(Sr,{justify:"space-between",align:"center",cursor:"pointer",onClick:n,children:[u.jsxs(Ce,{children:[u.jsx(He,{as:fve,color:"kartoza.500"}),u.jsx(ie,{fontWeight:"bold",fontSize:"sm",children:"Sync Options"})]}),u.jsx(He,{as:r?Gy:Nl})]}),u.jsx(mc,{in:r,children:u.jsxs(nn,{columns:3,gap:3,mt:3,children:[u.jsx(Ua,{isChecked:t.workspaces,onChange:()=>i("workspaces"),colorScheme:"kartoza",children:u.jsxs(Ce,{spacing:1,children:[u.jsx(He,{as:uh,color:"yellow.500",boxSize:3}),u.jsx(ie,{fontSize:"sm",children:"Workspaces"})]})}),u.jsx(Ua,{isChecked:t.datastores,onChange:()=>i("datastores"),colorScheme:"kartoza",children:u.jsxs(Ce,{spacing:1,children:[u.jsx(He,{as:Kn,color:"blue.500",boxSize:3}),u.jsx(ie,{fontSize:"sm",children:"Data Stores"})]})}),u.jsx(Ua,{isChecked:t.coveragestores,onChange:()=>i("coveragestores"),colorScheme:"kartoza",children:u.jsxs(Ce,{spacing:1,children:[u.jsx(He,{as:mu,color:"green.500",boxSize:3}),u.jsx(ie,{fontSize:"sm",children:"Coverage Stores"})]})}),u.jsx(Ua,{isChecked:t.layers,onChange:()=>i("layers"),colorScheme:"kartoza",children:u.jsxs(Ce,{spacing:1,children:[u.jsx(He,{as:Yi,color:"purple.500",boxSize:3}),u.jsx(ie,{fontSize:"sm",children:"Layers"})]})}),u.jsx(Ua,{isChecked:t.styles,onChange:()=>i("styles"),colorScheme:"kartoza",children:u.jsxs(Ce,{spacing:1,children:[u.jsx(He,{as:gc,color:"pink.500",boxSize:3}),u.jsx(ie,{fontSize:"sm",children:"Styles"})]})}),u.jsx(Ua,{isChecked:t.layergroups,onChange:()=>i("layergroups"),colorScheme:"kartoza",children:u.jsxs(Ce,{spacing:1,children:[u.jsx(He,{as:ef,color:"orange.500",boxSize:3}),u.jsx(ie,{fontSize:"sm",children:"Layer Groups"})]})})]})})]})}function LPe({tasks:t}){const e=I.useRef(null),{isOpen:r,onToggle:n}=Qp({defaultIsOpen:!1}),i=t.flatMap(a=>a.log||[]);I.useEffect(()=>{e.current&&(e.current.scrollTop=e.current.scrollHeight)},[i.length]);const s=a=>{a.stopPropagation(),t.forEach(o=>{o.id&&Dbe(o.id)})};return t.length===0?null:u.jsxs(ue,{bg:"gray.900",borderRadius:"md",overflow:"hidden",children:[u.jsxs(Sr,{justify:"space-between",align:"center",p:2,bg:"gray.800",cursor:"pointer",onClick:n,children:[u.jsxs(Ce,{children:[u.jsx(He,{as:_I,color:"green.400"}),u.jsx(ie,{fontWeight:"bold",fontSize:"sm",color:"white",children:"Activity Log"}),u.jsxs(er,{colorScheme:"green",fontSize:"xs",children:[i.length," entries"]})]}),u.jsxs(Ce,{children:[i.length>0&&u.jsx($r,{label:"Download Logs",fontSize:"xs",children:u.jsx(br,{"aria-label":"Download logs",icon:u.jsx(Iv,{size:14}),size:"xs",variant:"ghost",colorScheme:"green",onClick:s})}),u.jsx(He,{as:r?Gy:Nl,color:"white"})]})]}),u.jsx(mc,{in:r,children:u.jsxs(ue,{ref:e,maxH:"150px",overflowY:"auto",p:2,fontFamily:"mono",fontSize:"xs",css:{"&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{background:"gray.600",borderRadius:"3px"}},children:[i.map((a,o)=>u.jsx(ie,{color:"green.300",mb:.5,children:a},o)),i.length===0&&u.jsx(ie,{color:"gray.500",children:"Waiting for activity..."})]})})]})}function FPe(){const t=Go(),e=bt(Le=>Le.activeDialog),r=bt(Le=>Le.closeDialog),n=Ks(Le=>Le.connections),i=e==="sync",[s,a]=I.useState(null),[o,d]=I.useState([]),[m,y]=I.useState({workspaces:!0,datastores:!0,coveragestores:!0,layers:!0,styles:!0,layergroups:!0}),[b,w]=I.useState(!1),[O,A]=I.useState(""),[E,$]=I.useState(null),{data:R=[],refetch:F}=Qr({queryKey:["syncConfigs"],queryFn:Cbe,enabled:i}),{data:L=[],refetch:U}=Qr({queryKey:["syncStatus"],queryFn:jbe,enabled:i,refetchInterval:1e3}),Q=L.some(Le=>Le.status==="running"),Y=Jc({mutationFn:Le=>Pbe(Le),onSuccess:()=>{t({title:"Sync started",description:"Synchronization has been initiated.",status:"success",duration:3e3}),U()},onError:Le=>{t({title:"Failed to start sync",description:Le.message,status:"error",duration:5e3})}}),Z=Jc({mutationFn:Le=>Abe(Le),onSuccess:()=>{t({title:"Sync stopped",status:"info",duration:2e3}),U()}}),J=Jc({mutationFn:Ebe,onSuccess:()=>{t({title:"All syncs stopped",status:"info",duration:2e3}),U()}}),re=Jc({mutationFn:Le=>Tbe(Le),onSuccess:()=>{t({title:"Configuration saved",status:"success",duration:2e3}),F(),A("")},onError:Le=>{t({title:"Failed to save configuration",description:Le.message,status:"error",duration:5e3})}}),he=Jc({mutationFn:Le=>Obe(Le),onSuccess:()=>{t({title:"Configuration deleted",status:"info",duration:2e3}),F(),$(null)}}),le=()=>{if(!s||o.length===0){t({title:"Configuration incomplete",description:"Please select a source and at least one destination.",status:"warning",duration:3e3});return}Y.mutate({sourceId:s,destinationIds:o,options:m})},Ze=()=>{if(!O||!s||o.length===0){t({title:"Cannot save",description:"Please provide a name and complete the sync configuration.",status:"warning",duration:3e3});return}re.mutate({name:O,source_id:s,destination_ids:o,options:m})},Ee=Le=>{console.log("Loading sync config:",Le),console.log("Available connections:",n.map(rt=>({id:rt.id,name:rt.name})));const Ie=Le.source_id&&Le.source_id.trim()!==""?Le.source_id:null;a(Ie);const Oe=(Le.destination_ids||[]).filter(rt=>rt&&rt.trim()!=="");d(Oe),y({...{workspaces:!0,datastores:!0,coveragestores:!0,layers:!0,styles:!0,layergroups:!0},...Le.options||{}}),$(Le.id),A(Le.name);const nt=Ie?n.find(rt=>rt.id===Ie):null,ze=Oe.filter(rt=>!n.find(Xe=>Xe.id===rt));Ie&&!nt&&t({title:"Source connection not found",description:`The saved source connection (${Ie}) may have been deleted.`,status:"warning",duration:5e3}),ze.length>0&&t({title:"Some destination connections not found",description:`${ze.length} destination(s) may have been deleted.`,status:"warning",duration:5e3})},qe=Le=>{if(Le===s){t({title:"Invalid selection",description:"Cannot sync to the same server.",status:"warning",duration:2e3});return}o.includes(Le)||d([...o,Le])},et=Le=>{d(o.filter(Ie=>Ie!==Le))},at=Le=>n.find(Ie=>Ie.id===Le),Be=s?at(s):null,Me=n.filter(Le=>Le.id!==s&&!o.includes(Le.id)),Ge=Le=>L.find(Ie=>Ie.destId===Le&&Ie.sourceId===s);return u.jsxs(es,{isOpen:i,onClose:r,size:"6xl",scrollBehavior:"inside",children:[u.jsx(rs,{backdropFilter:"blur(4px)"}),u.jsxs(ts,{maxH:"90vh",children:[u.jsxs(f0,{bg:"linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 100%)",color:"white",borderTopRadius:"md",children:[u.jsxs(Ce,{children:[u.jsx(He,{as:pf}),u.jsx(ie,{children:"Sync Servers"})]}),u.jsx(ie,{fontSize:"sm",fontWeight:"normal",opacity:.9,children:"Replicate resources between GeoServer instances"})]}),u.jsx(Fs,{color:"white"}),u.jsx(gs,{py:6,children:u.jsxs(ft,{spacing:6,align:"stretch",children:[R.length>0&&u.jsx(ue,{children:u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",fontWeight:"bold",children:u.jsxs(Ce,{children:[u.jsx(He,{as:bS}),u.jsx(ie,{children:"Saved Configurations"})]})}),u.jsxs(Ce,{children:[u.jsx(Rn,{placeholder:"Select a saved configuration...",value:E||"",onChange:Le=>{const Ie=R.find(Oe=>Oe.id===Le.target.value);Ie&&Ee(Ie)},size:"sm",children:R.map(Le=>u.jsxs("option",{value:Le.id,children:[Le.name," (Last sync: ",Le.last_synced_at||"Never",")"]},Le.id))}),E&&u.jsx($r,{label:"Delete configuration",children:u.jsx(br,{"aria-label":"Delete configuration",icon:u.jsx(Nd,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>he.mutate(E)})})]})]})}),u.jsxs(Sr,{gap:4,align:"stretch",wrap:"wrap",justify:"center",children:[u.jsxs(ue,{flex:"1",minW:"250px",children:[u.jsx(ie,{fontWeight:"bold",fontSize:"sm",mb:2,color:"green.600",children:u.jsxs(Ce,{children:[u.jsx(He,{as:ov}),u.jsx(ie,{children:"Source (Read Only)"})]})}),u.jsxs(ft,{spacing:3,children:[u.jsx(Rn,{placeholder:"Select source server...",value:s||"",onChange:Le=>a(Le.target.value||null),size:"sm",children:n.map(Le=>u.jsx("option",{value:Le.id,children:Le.name},Le.id))}),Be&&u.jsx(MPe,{connection:Be,isSelected:!0,onSelect:()=>{},isHovered:b,onHover:w})]})]}),u.jsx(Sr,{align:"center",minW:"100px",justify:"center",children:u.jsx(DPe,{isActive:Q})}),u.jsxs(ue,{flex:"2",minW:"350px",children:[u.jsx(ie,{fontWeight:"bold",fontSize:"sm",mb:2,color:"blue.600",children:u.jsxs(Ce,{children:[u.jsx(He,{as:eve}),u.jsx(ie,{children:"Destinations (Receivers)"})]})}),u.jsx(Ce,{mb:3,children:u.jsx(Rn,{placeholder:"Add destination server...",onChange:Le=>{Le.target.value&&(qe(Le.target.value),Le.target.value="")},size:"sm",isDisabled:!s||Me.length===0,children:Me.map(Le=>u.jsx("option",{value:Le.id,children:Le.name},Le.id))})}),o.length>0?u.jsx(nn,{columns:{base:1,md:2,lg:3},spacing:3,children:o.map(Le=>{const Ie=at(Le);if(!Ie)return null;const Oe=Ge(Le),Re=(Oe==null?void 0:Oe.status)==="running";return u.jsx(IPe,{connection:Ie,isRunning:Re,task:Oe,onRemove:()=>et(Le),onStop:()=>Oe&&Z.mutate(Oe.id)},Le)})}):u.jsxs(ue,{p:8,border:"2px dashed",borderColor:"gray.300",borderRadius:"lg",textAlign:"center",children:[u.jsx(He,{as:pve,w:10,h:10,color:"gray.300",mb:2}),u.jsx(ie,{color:"gray.500",fontSize:"sm",children:"Select destination servers from the dropdown above"})]})]})]}),u.jsx(Fr,{}),u.jsx(RPe,{options:m,onChange:y}),u.jsx(LPe,{tasks:L}),u.jsx(ue,{bg:"gray.50",borderRadius:"md",p:3,children:u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",fontWeight:"bold",children:u.jsxs(Ce,{children:[u.jsx(He,{as:bS,color:"kartoza.500"}),u.jsx(ie,{children:"Save Configuration"})]})}),u.jsxs(Ce,{children:[u.jsx(Ar,{placeholder:"Configuration name...",value:O,onChange:Le=>A(Le.target.value),size:"sm"}),u.jsx(St,{leftIcon:u.jsx(bS,{}),colorScheme:"kartoza",size:"sm",onClick:Ze,isDisabled:!O||!s||o.length===0,isLoading:re.isPending,children:"Save"})]})]})})]})}),u.jsx(qo,{borderTop:"1px",borderColor:"gray.200",bg:"gray.50",children:u.jsxs(Ce,{spacing:3,w:"100%",justify:"space-between",children:[Q&&u.jsx(St,{leftIcon:u.jsx(tf,{}),colorScheme:"red",variant:"outline",onClick:()=>J.mutate(),isLoading:J.isPending,children:"Stop All"}),u.jsxs(Ce,{spacing:3,ml:"auto",children:[u.jsx(St,{variant:"ghost",onClick:r,children:"Close"}),u.jsx(St,{leftIcon:Q?u.jsx(Nn,{size:"sm"}):u.jsx(CI,{}),colorScheme:"kartoza",size:"lg",onClick:le,isDisabled:!s||o.length===0||Q,isLoading:Y.isPending,px:8,_hover:{transform:"scale(1.02)",boxShadow:"lg"},transition:"all 0.2s ease",children:Q?"Syncing...":"Start Sync"})]})]})})]})]})}const BE=1,BPe=2,$Pe=3,NPe=4,VPe=5,WPe=36,UPe=37,qPe=38,QPe=11,HPe=13;function GPe(t){return t==45||t==46||t==58||t>=65&&t<=90||t==95||t>=97&&t<=122||t>=161}function XPe(t){return t==9||t==10||t==13||t==32}let b6=null,_6=null,w6=0;function $E(t,e){let r=t.pos+e;if(_6==t&&w6==r)return b6;for(;XPe(t.peek(e));)e++;let n="";for(;;){let i=t.peek(e);if(!GPe(i))break;n+=String.fromCharCode(i),e++}return _6=t,w6=r,b6=n||null}function S6(t,e){this.name=t,this.parent=e}const KPe=new SOe({start:null,shift(t,e,r,n){return e==BE?new S6($E(n,1)||"",t):t},reduce(t,e){return e==QPe&&t?t.parent:t},reuse(t,e,r,n){let i=e.type.id;return i==BE||i==HPe?new S6($E(n,1)||"",t):t},strict:!1}),ZPe=new dm((t,e)=>{if(t.next==60){if(t.advance(),t.next==47){t.advance();let r=$E(t,0);if(!r)return t.acceptToken(VPe);if(e.context&&r==e.context.name)return t.acceptToken(BPe);for(let n=e.context;n;n=n.parent)if(n.name==r)return t.acceptToken($Pe,-2);t.acceptToken(NPe)}else if(t.next!=33&&t.next!=63)return t.acceptToken(BE)}},{contextual:!0});function y5(t,e){return new dm(r=>{let n=0,i=e.charCodeAt(0);e:for(;!(r.next<0);r.advance(),n++)if(r.next==i){for(let s=1;s<e.length;s++)if(r.peek(s)!=e.charCodeAt(s))continue e;break}n&&r.acceptToken(t)})}const YPe=y5(WPe,"-->"),JPe=y5(UPe,"?>"),eje=y5(qPe,"]]>"),tje=hC({Text:Ne.content,"StartTag StartCloseTag EndTag SelfCloseEndTag":Ne.angleBracket,TagName:Ne.tagName,"MismatchedCloseTag/TagName":[Ne.tagName,Ne.invalid],AttributeName:Ne.attributeName,AttributeValue:Ne.attributeValue,Is:Ne.definitionOperator,"EntityReference CharacterReference":Ne.character,Comment:Ne.blockComment,ProcessingInst:Ne.processingInstruction,DoctypeDecl:Ne.documentMeta,Cdata:Ne.special(Ne.string)}),rje=o0.deserialize({version:14,states:",lOQOaOOOrOxO'#CfOzOpO'#CiO!tOaO'#CgOOOP'#Cg'#CgO!{OrO'#CrO#TOtO'#CsO#]OpO'#CtOOOP'#DT'#DTOOOP'#Cv'#CvQQOaOOOOOW'#Cw'#CwO#eOxO,59QOOOP,59Q,59QOOOO'#Cx'#CxO#mOpO,59TO#uO!bO,59TOOOP'#C|'#C|O$TOaO,59RO$[OpO'#CoOOOP,59R,59ROOOQ'#C}'#C}O$dOrO,59^OOOP,59^,59^OOOS'#DO'#DOO$lOtO,59_OOOP,59_,59_O$tOpO,59`O$|OpO,59`OOOP-E6t-E6tOOOW-E6u-E6uOOOP1G.l1G.lOOOO-E6v-E6vO%UO!bO1G.oO%UO!bO1G.oO%dOpO'#CkO%lO!bO'#CyO%zO!bO1G.oOOOP1G.o1G.oOOOP1G.w1G.wOOOP-E6z-E6zOOOP1G.m1G.mO&VOpO,59ZO&_OpO,59ZOOOQ-E6{-E6{OOOP1G.x1G.xOOOS-E6|-E6|OOOP1G.y1G.yO&gOpO1G.zO&gOpO1G.zOOOP1G.z1G.zO&oO!bO7+$ZO&}O!bO7+$ZOOOP7+$Z7+$ZOOOP7+$c7+$cO'YOpO,59VO'bOpO,59VO'mO!bO,59eOOOO-E6w-E6wO'{OpO1G.uO'{OpO1G.uOOOP1G.u1G.uO(TOpO7+$fOOOP7+$f7+$fO(]O!bO<<GuOOOP<<Gu<<GuOOOP<<G}<<G}O'bOpO1G.qO'bOpO1G.qO(hO#tO'#CnO(vO&jO'#CnOOOO1G.q1G.qO)UOpO7+$aOOOP7+$a7+$aOOOP<<HQ<<HQOOOPAN=aAN=aOOOPAN=iAN=iO'bOpO7+$]OOOO7+$]7+$]OOOO'#Cz'#CzO)^O#tO,59YOOOO,59Y,59YOOOO'#C{'#C{O)lO&jO,59YOOOP<<G{<<G{OOOO<<Gw<<GwOOOO-E6x-E6xOOOO1G.t1G.tOOOO-E6y-E6y",stateData:")z~OPQOSVOTWOVWOWWOXWOiXOyPO!QTO!SUO~OvZOx]O~O^`Oz^O~OPQOQcOSVOTWOVWOWWOXWOyPO!QTO!SUO~ORdO~P!SOteO!PgO~OuhO!RjO~O^lOz^O~OvZOxoO~O^qOz^O~O[vO`sOdwOz^O~ORyO~P!SO^{Oz^O~OteO!P}O~OuhO!R!PO~O^!QOz^O~O[!SOz^O~O[!VO`sOd!WOz^O~Oa!YOz^O~Oz^O[mX`mXdmX~O[!VO`sOd!WO~O^!]Oz^O~O[!_Oz^O~O[!aOz^O~O[!cO`sOd!dOz^O~O[!cO`sOd!dO~Oa!eOz^O~Oz^O{!gO}!hO~Oz^O[ma`madma~O[!kOz^O~O[!lOz^O~O[!mO`sOd!nO~OW!qOX!qO{!sO|!qO~OW!tOX!tO}!sO!O!tO~O[!vOz^O~OW!qOX!qO{!yO|!qO~OW!tOX!tO}!yO!O!tO~O",goto:"%cxPPPPPPPPPPyyP!PP!VPP!`!jP!pyyyP!v!|#S$[$k$q$w$}%TPPPP%ZXWORYbXRORYb_t`qru!T!U!bQ!i!YS!p!e!fR!w!oQdRRybXSORYbQYORmYQ[PRn[Q_QQkVjp_krz!R!T!X!Z!^!`!f!j!oQr`QzcQ!RlQ!TqQ!XsQ!ZtQ!^{Q!`!QQ!f!YQ!j!]R!o!eQu`S!UqrU![u!U!bR!b!TQ!r!gR!x!rQ!u!hR!z!uQbRRxbQfTR|fQiUR!OiSXOYTaRb",nodeNames:" StartTag StartCloseTag MissingCloseTag StartCloseTag StartCloseTag Document Text EntityReference CharacterReference Cdata Element EndTag OpenTag TagName Attribute AttributeName Is AttributeValue CloseTag SelfCloseEndTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag DoctypeDecl",maxTerm:50,context:KPe,nodeProps:[["closedBy",1,"SelfCloseEndTag EndTag",13,"CloseTag MissingCloseTag"],["openedBy",12,"StartTag StartCloseTag",19,"OpenTag",20,"StartTag"],["isolate",-6,13,18,19,21,22,24,""]],propSources:[tje],skippedNodes:[0],repeatNodeCount:9,tokenData:"!)v~R!YOX$qXY)iYZ)iZ]$q]^)i^p$qpq)iqr$qrs*vsv$qvw+fwx/ix}$q}!O0[!O!P$q!P!Q2z!Q![$q![!]4n!]!^$q!^!_8U!_!`!#t!`!a!$l!a!b!%d!b!c$q!c!}4n!}#P$q#P#Q!'W#Q#R$q#R#S4n#S#T$q#T#o4n#o%W$q%W%o4n%o%p$q%p&a4n&a&b$q&b1p4n1p4U$q4U4d4n4d4e$q4e$IS4n$IS$I`$q$I`$Ib4n$Ib$Kh$q$Kh%#t4n%#t&/x$q&/x&Et4n&Et&FV$q&FV;'S4n;'S;:j8O;:j;=`)c<%l?&r$q?&r?Ah4n?Ah?BY$q?BY?Mn4n?MnO$qi$zXVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qa%nVVP!O`Ov%gwx&Tx!^%g!^!_&o!_;'S%g;'S;=`'W<%lO%gP&YTVPOv&Tw!^&T!_;'S&T;'S;=`&i<%lO&TP&lP;=`<%l&T`&tS!O`Ov&ox;'S&o;'S;=`'Q<%lO&o`'TP;=`<%l&oa'ZP;=`<%l%gX'eWVP|WOr'^rs&Tsv'^w!^'^!^!_'}!_;'S'^;'S;=`(i<%lO'^W(ST|WOr'}sv'}w;'S'};'S;=`(c<%lO'}W(fP;=`<%l'}X(lP;=`<%l'^h(vV|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oh)`P;=`<%l(oi)fP;=`<%l$qo)t`VP|W!O`zUOX$qXY)iYZ)iZ]$q]^)i^p$qpq)iqr$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk+PV{YVP!O`Ov%gwx&Tx!^%g!^!_&o!_;'S%g;'S;=`'W<%lO%g~+iast,n![!]-r!c!}-r#R#S-r#T#o-r%W%o-r%p&a-r&b1p-r4U4d-r4e$IS-r$I`$Ib-r$Kh%#t-r&/x&Et-r&FV;'S-r;'S;:j/c?&r?Ah-r?BY?Mn-r~,qQ!Q![,w#l#m-V~,zQ!Q![,w!]!^-Q~-VOX~~-YR!Q![-c!c!i-c#T#Z-c~-fS!Q![-c!]!^-Q!c!i-c#T#Z-c~-ug}!O-r!O!P-r!Q![-r![!]-r!]!^/^!c!}-r#R#S-r#T#o-r$}%O-r%W%o-r%p&a-r&b1p-r1p4U-r4U4d-r4e$IS-r$I`$Ib-r$Je$Jg-r$Kh%#t-r&/x&Et-r&FV;'S-r;'S;:j/c?&r?Ah-r?BY?Mn-r~/cOW~~/fP;=`<%l-rk/rW}bVP|WOr'^rs&Tsv'^w!^'^!^!_'}!_;'S'^;'S;=`(i<%lO'^k0eZVP|W!O`Or$qrs%gsv$qwx'^x}$q}!O1W!O!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk1aZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a2S!a;'S$q;'S;=`)c<%lO$qk2_X!PQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qm3TZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a3v!a;'S$q;'S;=`)c<%lO$qm4RXdSVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qo4{!P`S^QVP|W!O`Or$qrs%gsv$qwx'^x}$q}!O4n!O!P4n!P!Q$q!Q![4n![!]4n!]!^$q!^!_(o!_!c$q!c!}4n!}#R$q#R#S4n#S#T$q#T#o4n#o$}$q$}%O4n%O%W$q%W%o4n%o%p$q%p&a4n&a&b$q&b1p4n1p4U4n4U4d4n4d4e$q4e$IS4n$IS$I`$q$I`$Ib4n$Ib$Je$q$Je$Jg4n$Jg$Kh$q$Kh%#t4n%#t&/x$q&/x&Et4n&Et&FV$q&FV;'S4n;'S;:j8O;:j;=`)c<%l?&r$q?&r?Ah4n?Ah?BY$q?BY?Mn4n?MnO$qo8RP;=`<%l4ni8]Y|W!O`Oq(oqr8{rs&osv(owx'}x!a(o!a!b!#U!b;'S(o;'S;=`)]<%lO(oi9S_|W!O`Or(ors&osv(owx'}x}(o}!O:R!O!f(o!f!g;e!g!}(o!}#ODh#O#W(o#W#XLp#X;'S(o;'S;=`)]<%lO(oi:YX|W!O`Or(ors&osv(owx'}x}(o}!O:u!O;'S(o;'S;=`)]<%lO(oi;OV!QP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oi;lX|W!O`Or(ors&osv(owx'}x!q(o!q!r<X!r;'S(o;'S;=`)]<%lO(oi<`X|W!O`Or(ors&osv(owx'}x!e(o!e!f<{!f;'S(o;'S;=`)]<%lO(oi=SX|W!O`Or(ors&osv(owx'}x!v(o!v!w=o!w;'S(o;'S;=`)]<%lO(oi=vX|W!O`Or(ors&osv(owx'}x!{(o!{!|>c!|;'S(o;'S;=`)]<%lO(oi>jX|W!O`Or(ors&osv(owx'}x!r(o!r!s?V!s;'S(o;'S;=`)]<%lO(oi?^X|W!O`Or(ors&osv(owx'}x!g(o!g!h?y!h;'S(o;'S;=`)]<%lO(oi@QY|W!O`Or?yrs@psv?yvwA[wxBdx!`?y!`!aCr!a;'S?y;'S;=`Db<%lO?ya@uV!O`Ov@pvxA[x!`@p!`!aAy!a;'S@p;'S;=`B^<%lO@pPA_TO!`A[!`!aAn!a;'SA[;'S;=`As<%lOA[PAsOiPPAvP;=`<%lA[aBQSiP!O`Ov&ox;'S&o;'S;=`'Q<%lO&oaBaP;=`<%l@pXBiX|WOrBdrsA[svBdvwA[w!`Bd!`!aCU!a;'SBd;'S;=`Cl<%lOBdXC]TiP|WOr'}sv'}w;'S'};'S;=`(c<%lO'}XCoP;=`<%lBdiC{ViP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oiDeP;=`<%l?yiDoZ|W!O`Or(ors&osv(owx'}x!e(o!e!fEb!f#V(o#V#WIr#W;'S(o;'S;=`)]<%lO(oiEiX|W!O`Or(ors&osv(owx'}x!f(o!f!gFU!g;'S(o;'S;=`)]<%lO(oiF]X|W!O`Or(ors&osv(owx'}x!c(o!c!dFx!d;'S(o;'S;=`)]<%lO(oiGPX|W!O`Or(ors&osv(owx'}x!v(o!v!wGl!w;'S(o;'S;=`)]<%lO(oiGsX|W!O`Or(ors&osv(owx'}x!c(o!c!dH`!d;'S(o;'S;=`)]<%lO(oiHgX|W!O`Or(ors&osv(owx'}x!}(o!}#OIS#O;'S(o;'S;=`)]<%lO(oiI]V|W!O`yPOr(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oiIyX|W!O`Or(ors&osv(owx'}x#W(o#W#XJf#X;'S(o;'S;=`)]<%lO(oiJmX|W!O`Or(ors&osv(owx'}x#T(o#T#UKY#U;'S(o;'S;=`)]<%lO(oiKaX|W!O`Or(ors&osv(owx'}x#h(o#h#iK|#i;'S(o;'S;=`)]<%lO(oiLTX|W!O`Or(ors&osv(owx'}x#T(o#T#UH`#U;'S(o;'S;=`)]<%lO(oiLwX|W!O`Or(ors&osv(owx'}x#c(o#c#dMd#d;'S(o;'S;=`)]<%lO(oiMkX|W!O`Or(ors&osv(owx'}x#V(o#V#WNW#W;'S(o;'S;=`)]<%lO(oiN_X|W!O`Or(ors&osv(owx'}x#h(o#h#iNz#i;'S(o;'S;=`)]<%lO(oi! RX|W!O`Or(ors&osv(owx'}x#m(o#m#n! n#n;'S(o;'S;=`)]<%lO(oi! uX|W!O`Or(ors&osv(owx'}x#d(o#d#e!!b#e;'S(o;'S;=`)]<%lO(oi!!iX|W!O`Or(ors&osv(owx'}x#X(o#X#Y?y#Y;'S(o;'S;=`)]<%lO(oi!#_V!SP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(ok!$PXaQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qo!$wX[UVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk!%mZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a!&`!a;'S$q;'S;=`)c<%lO$qk!&kX!RQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk!'aZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_#P$q#P#Q!(S#Q;'S$q;'S;=`)c<%lO$qk!(]ZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a!)O!a;'S$q;'S;=`)c<%lO$qk!)ZXxQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$q",tokenizers:[ZPe,YPe,JPe,eje,0,1,2,3,4],topRules:{Document:[0,6]},tokenPrec:0});function zS(t,e){let r=e&&e.getChild("TagName");return r?t.sliceString(r.from,r.to):""}function EP(t,e){let r=e&&e.firstChild;return!r||r.name!="OpenTag"?"":zS(t,r)}function nje(t,e,r){let n=e&&e.getChildren("Attribute").find(s=>s.from<=r&&s.to>=r),i=n&&n.getChild("AttributeName");return i?t.sliceString(i.from,i.to):""}function zP(t){for(let e=t&&t.parent;e;e=e.parent)if(e.name=="Element")return e;return null}function ije(t,e){var r;let n=Ui(t).resolveInner(e,-1),i=null;for(let s=n;!i&&s.parent;s=s.parent)(s.name=="OpenTag"||s.name=="CloseTag"||s.name=="SelfClosingTag"||s.name=="MismatchedCloseTag")&&(i=s);if(i&&(i.to>e||i.lastChild.type.isError)){let s=i.parent;if(n.name=="TagName")return i.name=="CloseTag"||i.name=="MismatchedCloseTag"?{type:"closeTag",from:n.from,context:s}:{type:"openTag",from:n.from,context:zP(s)};if(n.name=="AttributeName")return{type:"attrName",from:n.from,context:i};if(n.name=="AttributeValue")return{type:"attrValue",from:n.from,context:i};let a=n==i||n.name=="Attribute"?n.childBefore(e):n;return(a==null?void 0:a.name)=="StartTag"?{type:"openTag",from:e,context:zP(s)}:(a==null?void 0:a.name)=="StartCloseTag"&&a.to<=e?{type:"closeTag",from:e,context:s}:(a==null?void 0:a.name)=="Is"?{type:"attrValue",from:e,context:i}:a?{type:"attrName",from:e,context:i}:null}else if(n.name=="StartCloseTag")return{type:"closeTag",from:e,context:n.parent};for(;n.parent&&n.to==e&&!(!((r=n.lastChild)===null||r===void 0)&&r.type.isError);)n=n.parent;return n.name=="Element"||n.name=="Text"||n.name=="Document"?{type:"tag",from:e,context:n.name=="Element"?n:zP(n)}:null}let sje=class{constructor(e,r,n){this.attrs=r,this.attrValues=n,this.children=[],this.name=e.name,this.completion=Object.assign(Object.assign({type:"type"},e.completion||{}),{label:this.name}),this.openCompletion=Object.assign(Object.assign({},this.completion),{label:"<"+this.name}),this.closeCompletion=Object.assign(Object.assign({},this.completion),{label:"</"+this.name+">",boost:2}),this.closeNameCompletion=Object.assign(Object.assign({},this.completion),{label:this.name+">"}),this.text=e.textContent?e.textContent.map(i=>({label:i,type:"text"})):[]}};const MP=/^[:\-\.\w\u00b7-\uffff]*$/;function k6(t){return Object.assign(Object.assign({type:"property"},t.completion||{}),{label:t.name})}function C6(t){return typeof t=="string"?{label:`"${t}"`,type:"constant"}:/^"/.test(t.label)?t:Object.assign(Object.assign({},t),{label:`"${t.label}"`})}function oje(t,e){let r=[],n=[],i=Object.create(null);for(let d of e){let m=k6(d);r.push(m),d.global&&n.push(m),d.values&&(i[d.name]=d.values.map(C6))}let s=[],a=[],o=Object.create(null);for(let d of t){let m=n,y=i;d.attributes&&(m=m.concat(d.attributes.map(w=>typeof w=="string"?r.find(O=>O.label==w)||{label:w,type:"property"}:(w.values&&(y==i&&(y=Object.create(y)),y[w.name]=w.values.map(C6)),k6(w)))));let b=new sje(d,m,y);o[b.name]=b,s.push(b),d.top&&a.push(b)}a.length||(a=s);for(let d=0;d<s.length;d++){let m=t[d],y=s[d];if(m.children)for(let b of m.children)o[b]&&y.children.push(o[b]);else y.children=s}return d=>{var m;let{doc:y}=d.state,b=ije(d.state,d.pos);if(!b||b.type=="tag"&&!d.explicit)return null;let{type:w,from:O,context:A}=b;if(w=="openTag"){let E=a,$=EP(y,A);if($){let R=o[$];E=(R==null?void 0:R.children)||s}return{from:O,options:E.map(R=>R.completion),validFor:MP}}else if(w=="closeTag"){let E=EP(y,A);return E?{from:O,to:d.pos+(y.sliceString(d.pos,d.pos+1)==">"?1:0),options:[((m=o[E])===null||m===void 0?void 0:m.closeNameCompletion)||{label:E+">",type:"type"}],validFor:MP}:null}else if(w=="attrName"){let E=o[zS(y,A)];return{from:O,options:(E==null?void 0:E.attrs)||n,validFor:MP}}else if(w=="attrValue"){let E=nje(y,A,O);if(!E)return null;let $=o[zS(y,A)],R=(($==null?void 0:$.attrValues)||i)[E];return!R||!R.length?null:{from:O,to:d.pos+(y.sliceString(d.pos,d.pos+1)=='"'?1:0),options:R,validFor:/^"[^"]*"?$/}}else if(w=="tag"){let E=EP(y,A),$=o[E],R=[],F=A&&A.lastChild;E&&(!F||F.name!="CloseTag"||zS(y,F)!=E)&&R.push($?$.closeCompletion:{label:"</"+E+">",type:"type",boost:2});let L=R.concat((($==null?void 0:$.children)||(A?s:a)).map(U=>U.openCompletion));if(A&&($!=null&&$.text.length)){let U=A.firstChild;U.to>d.pos-20&&!/\S/.test(d.state.sliceDoc(U.to,d.pos))&&(L=L.concat($.text))}return{from:O,options:L,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}else return null}}const NE=r0.define({name:"xml",parser:rje.configure({props:[pC.add({Element(t){let e=/^\s*<\//.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},"OpenTag CloseTag SelfClosingTag"(t){return t.column(t.node.from)+t.unit}}),mC.add({Element(t){let e=t.firstChild,r=t.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:r.name=="CloseTag"?r.from:t.to}}}),mQ.add({"OpenTag CloseTag":t=>t.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/$/}});function aje(t={}){let e=[NE.data.of({autocomplete:oje(t.elements||[],t.attributes||[])})];return t.autoCloseTags!==!1&&e.push(lje),new e5(NE,e)}function T6(t,e,r=t.length){if(!e)return"";let n=e.firstChild,i=n&&n.getChild("TagName");return i?t.sliceString(i.from,Math.min(i.to,r)):""}const lje=Gt.inputHandler.of((t,e,r,n,i)=>{if(t.composing||t.state.readOnly||e!=r||n!=">"&&n!="/"||!NE.isActiveAt(t.state,e,-1))return!1;let s=i(),{state:a}=s,o=a.changeByRange(d=>{var m,y,b;let{head:w}=d,O=a.doc.sliceString(w-1,w)==n,A=Ui(a).resolveInner(w,-1),E;if(O&&n==">"&&A.name=="EndTag"){let $=A.parent;if(((y=(m=$.parent)===null||m===void 0?void 0:m.lastChild)===null||y===void 0?void 0:y.name)!="CloseTag"&&(E=T6(a.doc,$.parent,w))){let R=w+(a.doc.sliceString(w,w+1)===">"?1:0),F=`</${E}>`;return{range:d,changes:{from:w,to:R,insert:F}}}}else if(O&&n=="/"&&A.name=="StartCloseTag"){let $=A.parent;if(A.from==w-2&&((b=$.lastChild)===null||b===void 0?void 0:b.name)!="CloseTag"&&(E=T6(a.doc,$,w))){let R=w+(a.doc.sliceString(w,w+1)===">"?1:0),F=`${E}>`;return{range:pt.cursor(w+F.length,-1),changes:{from:w,to:R,insert:F}}}}return{range:d}});return o.changes.empty?!1:(t.dispatch([s,a.update(o,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),cje=122,O6=1,uje=123,hje=124,AH=2,dje=125,fje=3,pje=4,EH=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],mje=58,gje=40,zH=95,yje=91,MS=45,xje=46,vje=35,bje=37,_je=38,wje=92,Sje=10,kje=42;function Gb(t){return t>=65&&t<=90||t>=97&&t<=122||t>=161}function x5(t){return t>=48&&t<=57}function P6(t){return x5(t)||t>=97&&t<=102||t>=65&&t<=70}const MH=(t,e,r)=>(n,i)=>{for(let s=!1,a=0,o=0;;o++){let{next:d}=n;if(Gb(d)||d==MS||d==zH||s&&x5(d))!s&&(d!=MS||o>0)&&(s=!0),a===o&&d==MS&&a++,n.advance();else if(d==wje&&n.peek(1)!=Sje){if(n.advance(),P6(n.next)){do n.advance();while(P6(n.next));n.next==32&&n.advance()}else n.next>-1&&n.advance();s=!0}else{s&&n.acceptToken(a==2&&i.canShift(AH)?e:d==gje?r:t);break}}},Cje=new dm(MH(uje,AH,hje)),Tje=new dm(MH(dje,fje,pje)),Oje=new dm(t=>{if(EH.includes(t.peek(-1))){let{next:e}=t;(Gb(e)||e==zH||e==vje||e==xje||e==kje||e==yje||e==mje&&Gb(t.peek(1))||e==MS||e==_je)&&t.acceptToken(cje)}}),Pje=new dm(t=>{if(!EH.includes(t.peek(-1))){let{next:e}=t;if(e==bje&&(t.advance(),t.acceptToken(O6)),Gb(e)){do t.advance();while(Gb(t.next)||x5(t.next));t.acceptToken(O6)}}}),jje=hC({"AtKeyword import charset namespace keyframes media supports":Ne.definitionKeyword,"from to selector":Ne.keyword,NamespaceName:Ne.namespace,KeyframeName:Ne.labelName,KeyframeRangeName:Ne.operatorKeyword,TagName:Ne.tagName,ClassName:Ne.className,PseudoClassName:Ne.constant(Ne.className),IdName:Ne.labelName,"FeatureName PropertyName":Ne.propertyName,AttributeName:Ne.attributeName,NumberLiteral:Ne.number,KeywordQuery:Ne.keyword,UnaryQueryOp:Ne.operatorKeyword,"CallTag ValueName":Ne.atom,VariableName:Ne.variableName,Callee:Ne.operatorKeyword,Unit:Ne.unit,"UniversalSelector NestingSelector":Ne.definitionOperator,"MatchOp CompareOp":Ne.compareOperator,"ChildOp SiblingOp, LogicOp":Ne.logicOperator,BinOp:Ne.arithmeticOperator,Important:Ne.modifier,Comment:Ne.blockComment,ColorLiteral:Ne.color,"ParenthesizedContent StringLiteral":Ne.string,":":Ne.punctuation,"PseudoOp #":Ne.derefOperator,"; ,":Ne.separator,"( )":Ne.paren,"[ ]":Ne.squareBracket,"{ }":Ne.brace}),Aje={__proto__:null,lang:38,"nth-child":38,"nth-last-child":38,"nth-of-type":38,"nth-last-of-type":38,dir:38,"host-context":38,if:84,url:124,"url-prefix":124,domain:124,regexp:124},Eje={__proto__:null,or:98,and:98,not:106,only:106,layer:170},zje={__proto__:null,selector:112,layer:166},Mje={__proto__:null,"@import":162,"@media":174,"@charset":178,"@namespace":182,"@keyframes":188,"@supports":200,"@scope":204},Ije={__proto__:null,to:207},Dje=o0.deserialize({version:14,states:"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",stateData:"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",goto:"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",nodeNames:" Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",maxTerm:143,nodeProps:[["isolate",-2,5,36,""],["openedBy",20,"(",28,"[",31,"{"],["closedBy",21,")",29,"]",32,"}"]],propSources:[jje],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",tokenizers:[Oje,Pje,Cje,Tje,1,2,3,4,new bH("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},specialized:[{term:124,get:t=>Aje[t]||-1},{term:125,get:t=>Eje[t]||-1},{term:4,get:t=>zje[t]||-1},{term:25,get:t=>Mje[t]||-1},{term:123,get:t=>Ije[t]||-1}],tokenPrec:1963});let IP=null;function DP(){if(!IP&&typeof document=="object"&&document.body){let{style:t}=document.body,e=[],r=new Set;for(let n in t)n!="cssText"&&n!="cssFloat"&&typeof t[n]=="string"&&(/[A-Z]/.test(n)&&(n=n.replace(/[A-Z]/g,i=>"-"+i.toLowerCase())),r.has(n)||(e.push(n),r.add(n)));IP=e.sort().map(n=>({type:"property",label:n,apply:n+": "}))}return IP||[]}const j6=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(t=>({type:"class",label:t})),A6=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(t=>({type:"keyword",label:t})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(t=>({type:"constant",label:t}))),Rje=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(t=>({type:"type",label:t})),Lje=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(t=>({type:"keyword",label:t})),$u=/^(\w[\w-]*|-\w[\w-]*|)$/,Fje=/^-(-[\w-]*)?$/;function Bje(t,e){var r;if((t.name=="("||t.type.isError)&&(t=t.parent||t),t.name!="ArgList")return!1;let n=(r=t.parent)===null||r===void 0?void 0:r.firstChild;return(n==null?void 0:n.name)!="Callee"?!1:e.sliceString(n.from,n.to)=="var"}const E6=new c2e,$je=["Declaration"];function Nje(t){for(let e=t;;){if(e.type.isTop)return e;if(!(e=e.parent))return t}}function IH(t,e,r){if(e.to-e.from>4096){let n=E6.get(e);if(n)return n;let i=[],s=new Set,a=e.cursor(Si.IncludeAnonymous);if(a.firstChild())do for(let o of IH(t,a.node,r))s.has(o.label)||(s.add(o.label),i.push(o));while(a.nextSibling());return E6.set(e,i),i}else{let n=[],i=new Set;return e.cursor().iterate(s=>{var a;if(r(s)&&s.matchContext($je)&&((a=s.node.nextSibling)===null||a===void 0?void 0:a.name)==":"){let o=t.sliceString(s.from,s.to);i.has(o)||(i.add(o),n.push({label:o,type:"variable"}))}}),n}}const Vje=t=>e=>{let{state:r,pos:n}=e,i=Ui(r).resolveInner(n,-1),s=i.type.isError&&i.from==i.to-1&&r.doc.sliceString(i.from,i.to)=="-";if(i.name=="PropertyName"||(s||i.name=="TagName")&&/^(Block|Styles)$/.test(i.resolve(i.to).name))return{from:i.from,options:DP(),validFor:$u};if(i.name=="ValueName")return{from:i.from,options:A6,validFor:$u};if(i.name=="PseudoClassName")return{from:i.from,options:j6,validFor:$u};if(t(i)||(e.explicit||s)&&Bje(i,r.doc))return{from:t(i)||s?i.from:n,options:IH(r.doc,Nje(i),t),validFor:Fje};if(i.name=="TagName"){for(let{parent:d}=i;d;d=d.parent)if(d.name=="Block")return{from:i.from,options:DP(),validFor:$u};return{from:i.from,options:Rje,validFor:$u}}if(i.name=="AtKeyword")return{from:i.from,options:Lje,validFor:$u};if(!e.explicit)return null;let a=i.resolve(n),o=a.childBefore(n);return o&&o.name==":"&&a.name=="PseudoClassSelector"?{from:n,options:j6,validFor:$u}:o&&o.name==":"&&a.name=="Declaration"||a.name=="ArgList"?{from:n,options:A6,validFor:$u}:a.name=="Block"||a.name=="Styles"?{from:n,options:DP(),validFor:$u}:null},Wje=Vje(t=>t.name=="VariableName"),z6=r0.define({name:"css",parser:Dje.configure({props:[pC.add({Declaration:rQ()}),mC.add({"Block KeyframeList":I2e})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function Uje(){return new e5(z6,z6.data.of({autocomplete:Wje}))}const Bw=`<?xml version="1.0" encoding="UTF-8"?>
<StyledLayerDescriptor version="1.0.0"
  xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"
  xmlns="http://www.opengis.net/sld"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NamedLayer>
    <Name>NewStyle</Name>
    <UserStyle>
      <Title>New Style</Title>
      <FeatureTypeStyle>
        <Rule>
          <Name>Default</Name>
          <PolygonSymbolizer>
            <Fill>
              <CssParameter name="fill">#3388ff</CssParameter>
              <CssParameter name="fill-opacity">0.6</CssParameter>
            </Fill>
            <Stroke>
              <CssParameter name="stroke">#2266cc</CssParameter>
              <CssParameter name="stroke-width">1</CssParameter>
            </Stroke>
          </PolygonSymbolizer>
        </Rule>
      </FeatureTypeStyle>
    </UserStyle>
  </NamedLayer>
</StyledLayerDescriptor>`,qje=`/* GeoServer CSS Style */
* {
  fill: #3388ff;
  fill-opacity: 0.6;
  stroke: #2266cc;
  stroke-width: 1;
}`,RP={"blue-to-red":["#2166ac","#67a9cf","#d1e5f0","#fddbc7","#ef8a62","#b2182b"],"green-to-red":["#1a9850","#91cf60","#d9ef8b","#fee08b","#fc8d59","#d73027"],viridis:["#440154","#443983","#31688e","#21918c","#35b779","#fde725"],spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"]},fg={rainbow:{name:"Rainbow",description:"Classic rainbow spectrum",colors:["#9400D3","#4B0082","#0000FF","#00FF00","#FFFF00","#FF7F00","#FF0000"]},terrain:{name:"Terrain",description:"Natural terrain colors (blue-green-brown)",colors:["#0000FF","#00FFFF","#00FF00","#FFFF00","#FF8C00","#8B4513","#FFFFFF"]},elevation:{name:"Elevation",description:"DEM/elevation visualization",colors:["#006400","#228B22","#90EE90","#FFFF00","#FFA500","#8B4513","#FFFFFF"]},temperature:{name:"Temperature",description:"Cold to hot temperature scale",colors:["#0000FF","#00BFFF","#00FFFF","#FFFF00","#FFA500","#FF0000","#8B0000"]},ndvi:{name:"NDVI",description:"Vegetation index (brown-yellow-green)",colors:["#8B4513","#D2691E","#FFD700","#ADFF2F","#32CD32","#006400"]},bathymetry:{name:"Bathymetry",description:"Ocean depth visualization",colors:["#000033","#000066","#0000CC","#0066FF","#00CCFF","#99FFFF"]},grayscale:{name:"Grayscale",description:"Black to white gradient",colors:["#000000","#333333","#666666","#999999","#CCCCCC","#FFFFFF"]},magma:{name:"Magma",description:"Dark purple to bright yellow",colors:["#000004","#3B0F70","#8C2981","#DE4968","#FE9F6D","#FCFDBF"]},plasma:{name:"Plasma",description:"Blue-purple to yellow",colors:["#0D0887","#6A00A8","#B12A90","#E16462","#FCA636","#F0F921"]},inferno:{name:"Inferno",description:"Black through red to bright yellow",colors:["#000004","#420A68","#932667","#DD513A","#FCA50A","#FCFFA4"]}},M6=[{name:"Default",azimuth:315,altitude:45,zFactor:1},{name:"Morning Light",azimuth:90,altitude:30,zFactor:1},{name:"Evening Light",azimuth:270,altitude:30,zFactor:1},{name:"High Contrast",azimuth:315,altitude:60,zFactor:2},{name:"Subtle",azimuth:315,altitude:45,zFactor:.5}];function I6(t,e,r,n,i="ramp",s=1){const a=n-r,o=e.map((d,m)=>{const y=r+a*m/(e.length-1);return`          <ColorMapEntry color="${d}" quantity="${y.toFixed(2)}" opacity="${s}" />`}).join(`
`);return`<?xml version="1.0" encoding="UTF-8"?>
<StyledLayerDescriptor version="1.0.0"
  xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"
  xmlns="http://www.opengis.net/sld"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NamedLayer>
    <Name>${t}</Name>
    <UserStyle>
      <Title>${t} - Raster Color Map</Title>
      <FeatureTypeStyle>
        <Rule>
          <RasterSymbolizer>
            <Opacity>${s}</Opacity>
            <ColorMap type="${i}">
${o}
            </ColorMap>
          </RasterSymbolizer>
        </Rule>
      </FeatureTypeStyle>
    </UserStyle>
  </NamedLayer>
</StyledLayerDescriptor>`}function Qje(t,e=315,r=45,n=1,i=1){return`<?xml version="1.0" encoding="UTF-8"?>
<StyledLayerDescriptor version="1.0.0"
  xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"
  xmlns="http://www.opengis.net/sld"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NamedLayer>
    <Name>${t}</Name>
    <UserStyle>
      <Title>${t} - Hillshade</Title>
      <FeatureTypeStyle>
        <Rule>
          <RasterSymbolizer>
            <Opacity>${i}</Opacity>
            <ShadedRelief>
              <BrightnessOnly>false</BrightnessOnly>
              <ReliefFactor>${n}</ReliefFactor>
            </ShadedRelief>
            <VendorOption name="algorithm">zevenbergenThorne</VendorOption>
            <VendorOption name="azimuth">${e}</VendorOption>
            <VendorOption name="altitude">${r}</VendorOption>
          </RasterSymbolizer>
        </Rule>
      </FeatureTypeStyle>
    </UserStyle>
  </NamedLayer>
</StyledLayerDescriptor>`}function Hje(t,e,r,n,i=315,s=45,a=1,o=1){const d=n-r,m=e.map((y,b)=>{const w=r+d*b/(e.length-1);return`          <ColorMapEntry color="${y}" quantity="${w.toFixed(2)}" />`}).join(`
`);return`<?xml version="1.0" encoding="UTF-8"?>
<StyledLayerDescriptor version="1.0.0"
  xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"
  xmlns="http://www.opengis.net/sld"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NamedLayer>
    <Name>${t}</Name>
    <UserStyle>
      <Title>${t} - Hillshade with Color</Title>
      <FeatureTypeStyle>
        <Rule>
          <RasterSymbolizer>
            <Opacity>${o}</Opacity>
            <ColorMap type="ramp">
${m}
            </ColorMap>
            <ShadedRelief>
              <BrightnessOnly>false</BrightnessOnly>
              <ReliefFactor>${a}</ReliefFactor>
            </ShadedRelief>
            <VendorOption name="algorithm">zevenbergenThorne</VendorOption>
            <VendorOption name="azimuth">${i}</VendorOption>
            <VendorOption name="altitude">${s}</VendorOption>
          </RasterSymbolizer>
        </Rule>
      </FeatureTypeStyle>
    </UserStyle>
  </NamedLayer>
</StyledLayerDescriptor>`}function Gje(t,e="normalize",r=1,n=1){const i=e==="none"?"":`
            <ContrastEnhancement>
              <${e==="normalize"?"Normalize":"Histogram"} />
              <GammaValue>${r}</GammaValue>
            </ContrastEnhancement>`;return`<?xml version="1.0" encoding="UTF-8"?>
<StyledLayerDescriptor version="1.0.0"
  xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"
  xmlns="http://www.opengis.net/sld"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NamedLayer>
    <Name>${t}</Name>
    <UserStyle>
      <Title>${t} - Enhanced</Title>
      <FeatureTypeStyle>
        <Rule>
          <RasterSymbolizer>
            <Opacity>${n}</Opacity>${i}
          </RasterSymbolizer>
        </Rule>
      </FeatureTypeStyle>
    </UserStyle>
  </NamedLayer>
</StyledLayerDescriptor>`}function VE(t,e){const r=Math.min(...t),i=(Math.max(...t)-r)/e,s=[];for(let a=0;a<=e;a++)s.push(r+a*i);return s}function Xje(t,e){const r=[...t].sort((i,s)=>i-s),n=[];for(let i=0;i<=e;i++){const s=Math.floor(i/e*(r.length-1));n.push(r[s])}return n}function Kje(t,e){const r=[...t].sort((s,a)=>s-a);if(r.length<=e)return r;const i=VE(t,e);for(let s=0;s<10;s++){const a=[];for(let o=0;o<e;o++){const d=i[o],m=i[o+1],y=r.filter(b=>b>=d&&(o===e-1?b<=m:b<m));y.length>0?a.push(y.reduce((b,w)=>b+w,0)/y.length):a.push((d+m)/2)}for(let o=1;o<e;o++)i[o]=(a[o-1]+a[o])/2}return i}function Zje(t,e){const r=Math.min(...t),s=(Math.max(...t)-r)/e,a=Math.pow(10,Math.floor(Math.log10(s))),o=s/a;let d;o<=1?d=1*a:o<=2?d=2*a:o<=5?d=5*a:d=10*a;const m=Math.floor(r/d)*d,y=[];for(let b=0;b<=e;b++)y.push(m+b*d);return y}function Yje(t,e,r){switch(r){case"equal-interval":return VE(t,e);case"quantile":return Xje(t,e);case"jenks":return Kje(t,e);case"pretty":return Zje(t,e);default:return VE(t,e)}}function D6(t,e){if(e<=t.length){const r=[];for(let n=0;n<e;n++){const i=Math.floor(n/(e-1)*(t.length-1));r.push(t[i])}return r}return t.slice(0,e)}function Jje(t,e,r,n,i){const s=r.slice(0,-1).map((a,o)=>{const d=r[o+1],m=n[o]||n[n.length-1],y=`${a.toFixed(2)} - ${d.toFixed(2)}`;let b="";return i==="polygon"?b=`
            <PolygonSymbolizer>
              <Fill>
                <CssParameter name="fill">${m}</CssParameter>
                <CssParameter name="fill-opacity">0.8</CssParameter>
              </Fill>
              <Stroke>
                <CssParameter name="stroke">#333333</CssParameter>
                <CssParameter name="stroke-width">0.5</CssParameter>
              </Stroke>
            </PolygonSymbolizer>`:i==="line"?b=`
            <LineSymbolizer>
              <Stroke>
                <CssParameter name="stroke">${m}</CssParameter>
                <CssParameter name="stroke-width">2</CssParameter>
              </Stroke>
            </LineSymbolizer>`:b=`
            <PointSymbolizer>
              <Graphic>
                <Mark>
                  <WellKnownName>circle</WellKnownName>
                  <Fill>
                    <CssParameter name="fill">${m}</CssParameter>
                  </Fill>
                  <Stroke>
                    <CssParameter name="stroke">#333333</CssParameter>
                    <CssParameter name="stroke-width">1</CssParameter>
                  </Stroke>
                </Mark>
                <Size>8</Size>
              </Graphic>
            </PointSymbolizer>`,`
          <Rule>
            <Name>${y}</Name>
            <Title>${y}</Title>
            <ogc:Filter>
              <ogc:And>
                <ogc:PropertyIsGreaterThanOrEqualTo>
                  <ogc:PropertyName>${e}</ogc:PropertyName>
                  <ogc:Literal>${a}</ogc:Literal>
                </ogc:PropertyIsGreaterThanOrEqualTo>
                <ogc:PropertyIsLessThan>
                  <ogc:PropertyName>${e}</ogc:PropertyName>
                  <ogc:Literal>${d}</ogc:Literal>
                </ogc:PropertyIsLessThan>
              </ogc:And>
            </ogc:Filter>${b}
          </Rule>`}).join("");return`<?xml version="1.0" encoding="UTF-8"?>
<StyledLayerDescriptor version="1.0.0"
  xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"
  xmlns="http://www.opengis.net/sld"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NamedLayer>
    <Name>${t}</Name>
    <UserStyle>
      <Title>${t} - Classified</Title>
      <FeatureTypeStyle>${s}
      </FeatureTypeStyle>
    </UserStyle>
  </NamedLayer>
</StyledLayerDescriptor>`}const LP=[{name:"Ocean Drop",description:"Deep blue with soft glow",icon:"",shape:"circle",fill:"#0077be",fillOpacity:.9,stroke:"#004d80",strokeWidth:2,size:12,haloColor:"#87ceeb",haloRadius:3},{name:"Sunset Glow",description:"Warm orange with golden halo",icon:"",shape:"circle",fill:"#ff6b35",fillOpacity:.95,stroke:"#cc4400",strokeWidth:2,size:14,haloColor:"#ffd700",haloRadius:4},{name:"Forest Emerald",description:"Rich green nature marker",icon:"",shape:"circle",fill:"#228b22",fillOpacity:.9,stroke:"#145214",strokeWidth:2,size:12,haloColor:"#90ee90",haloRadius:3},{name:"Royal Purple",description:"Elegant purple with silver edge",icon:"",shape:"circle",fill:"#8b008b",fillOpacity:.9,stroke:"#c0c0c0",strokeWidth:2,size:12,haloColor:"#dda0dd",haloRadius:3},{name:"Cherry Blossom",description:"Soft pink with delicate outline",icon:"",shape:"circle",fill:"#ffb7c5",fillOpacity:.95,stroke:"#ff69b4",strokeWidth:1.5,size:11,haloColor:"#fff0f5",haloRadius:2},{name:"Diamond Marker",description:"Classic diamond shape",icon:"",shape:"square",fill:"#00bfff",fillOpacity:.85,stroke:"#0080ff",strokeWidth:2,size:14,rotation:45},{name:"Golden Star",description:"Bright star for highlights",icon:"",shape:"star",fill:"#ffd700",fillOpacity:1,stroke:"#b8860b",strokeWidth:1.5,size:16},{name:"Ruby Triangle",description:"Bold triangular marker",icon:"",shape:"triangle",fill:"#dc143c",fillOpacity:.9,stroke:"#8b0000",strokeWidth:2,size:14},{name:"Navy Square",description:"Professional square marker",icon:"",shape:"square",fill:"#1e3a5f",fillOpacity:.95,stroke:"#0d1b2a",strokeWidth:2,size:12},{name:"Neon Pulse",description:"Bright neon with glow effect",icon:"",shape:"circle",fill:"#00ff88",fillOpacity:1,stroke:"#00cc6a",strokeWidth:1,size:10,haloColor:"#00ff88",haloRadius:6},{name:"Fire Ember",description:"Hot red with orange glow",icon:"",shape:"circle",fill:"#ff4500",fillOpacity:.95,stroke:"#8b0000",strokeWidth:2,size:12,haloColor:"#ff8c00",haloRadius:4},{name:"Ice Crystal",description:"Cool blue with frost effect",icon:"",shape:"star",fill:"#e0ffff",fillOpacity:.9,stroke:"#00ced1",strokeWidth:1.5,size:14,haloColor:"#b0e0e6",haloRadius:3},{name:"Midnight Shadow",description:"Dark with subtle shadow",icon:"",shape:"circle",fill:"#2c3e50",fillOpacity:.95,stroke:"#1a252f",strokeWidth:2,size:12,haloColor:"#34495e",haloRadius:4},{name:"Coral Reef",description:"Vibrant coral with aqua edge",icon:"",shape:"circle",fill:"#ff7f50",fillOpacity:.9,stroke:"#20b2aa",strokeWidth:2,size:12,haloColor:"#40e0d0",haloRadius:3},{name:"Map Pin Red",description:"Classic red location pin",icon:"",shape:"circle",fill:"#e74c3c",fillOpacity:1,stroke:"#c0392b",strokeWidth:2,size:14,haloColor:"#ffffff",haloRadius:2},{name:"Corporate Blue",description:"Clean professional blue",icon:"",shape:"circle",fill:"#3498db",fillOpacity:.95,stroke:"#2980b9",strokeWidth:2,size:12},{name:"Success Green",description:"Positive indicator marker",icon:"",shape:"circle",fill:"#27ae60",fillOpacity:.95,stroke:"#1e8449",strokeWidth:2,size:12},{name:"Warning Amber",description:"Attention-grabbing yellow",icon:"",shape:"triangle",fill:"#f39c12",fillOpacity:1,stroke:"#d68910",strokeWidth:2,size:14},{name:"Cross Mark",description:"X marker for exclusions",icon:"",shape:"cross",fill:"#e74c3c",fillOpacity:1,stroke:"#c0392b",strokeWidth:2,size:14},{name:"Target Bullseye",description:"Precision crosshair marker",icon:"",shape:"cross",fill:"#2c3e50",fillOpacity:1,stroke:"#e74c3c",strokeWidth:3,size:16}];function Ux(t){const e=[];try{new DOMParser().parseFromString(t,"text/xml").querySelectorAll("Rule").forEach((s,a)=>{const o=s.querySelector("Name"),d={name:(o==null?void 0:o.textContent)||`Rule ${a+1}`,symbolizer:{type:"polygon"}},m=s.querySelector("PolygonSymbolizer");m&&(d.symbolizer.type="polygon",m.querySelectorAll("Fill CssParameter").forEach(A=>{const E=A.getAttribute("name");E==="fill"&&(d.symbolizer.fill=A.textContent||"#3388ff"),E==="fill-opacity"&&(d.symbolizer.fillOpacity=parseFloat(A.textContent||"1"))}),m.querySelectorAll("Stroke CssParameter").forEach(A=>{const E=A.getAttribute("name");E==="stroke"&&(d.symbolizer.stroke=A.textContent||"#2266cc"),E==="stroke-width"&&(d.symbolizer.strokeWidth=parseFloat(A.textContent||"1")),E==="stroke-opacity"&&(d.symbolizer.strokeOpacity=parseFloat(A.textContent||"1"))}));const y=s.querySelector("LineSymbolizer");y&&(d.symbolizer.type="line",y.querySelectorAll("Stroke CssParameter").forEach(O=>{const A=O.getAttribute("name");A==="stroke"&&(d.symbolizer.stroke=O.textContent||"#3388ff"),A==="stroke-width"&&(d.symbolizer.strokeWidth=parseFloat(O.textContent||"2")),A==="stroke-opacity"&&(d.symbolizer.strokeOpacity=parseFloat(O.textContent||"1"))}));const b=s.querySelector("PointSymbolizer");if(b){d.symbolizer.type="point",d.symbolizer.pointShape="circle",d.symbolizer.pointSize=8,b.querySelectorAll("Fill CssParameter").forEach(E=>{const $=E.getAttribute("name");$==="fill"&&(d.symbolizer.fill=E.textContent||"#3388ff"),$==="fill-opacity"&&(d.symbolizer.fillOpacity=parseFloat(E.textContent||"1"))}),b.querySelectorAll("Stroke CssParameter").forEach(E=>{const $=E.getAttribute("name");$==="stroke"&&(d.symbolizer.stroke=E.textContent||"#2266cc"),$==="stroke-width"&&(d.symbolizer.strokeWidth=parseFloat(E.textContent||"1"))});const A=b.querySelector("Size");A&&(d.symbolizer.pointSize=parseFloat(A.textContent||"8"))}e.push(d)})}catch(r){console.error("Failed to parse SLD:",r)}return e.length>0?e:[{name:"Default",symbolizer:{type:"polygon",fill:"#3388ff",fillOpacity:.6,stroke:"#2266cc",strokeWidth:1}}]}function eAe(t,e){let r="";return e.forEach(n=>{let i="";if(n.symbolizer.type==="polygon")i=`
          <PolygonSymbolizer>
            <Fill>
              <CssParameter name="fill">${n.symbolizer.fill||"#3388ff"}</CssParameter>
              <CssParameter name="fill-opacity">${n.symbolizer.fillOpacity??.6}</CssParameter>
            </Fill>
            <Stroke>
              <CssParameter name="stroke">${n.symbolizer.stroke||"#2266cc"}</CssParameter>
              <CssParameter name="stroke-width">${n.symbolizer.strokeWidth||1}</CssParameter>
            </Stroke>
          </PolygonSymbolizer>`;else if(n.symbolizer.type==="line")i=`
          <LineSymbolizer>
            <Stroke>
              <CssParameter name="stroke">${n.symbolizer.stroke||"#3388ff"}</CssParameter>
              <CssParameter name="stroke-width">${n.symbolizer.strokeWidth||2}</CssParameter>
              <CssParameter name="stroke-opacity">${n.symbolizer.strokeOpacity??1}</CssParameter>
            </Stroke>
          </LineSymbolizer>`;else if(n.symbolizer.type==="point"){const s=n.symbolizer.rotation?`
              <Rotation>${n.symbolizer.rotation}</Rotation>`:"";let a=`
          <PointSymbolizer>
            <Graphic>
              <Mark>
                <WellKnownName>${n.symbolizer.pointShape||"circle"}</WellKnownName>
                <Fill>
                  <CssParameter name="fill">${n.symbolizer.fill||"#3388ff"}</CssParameter>
                  <CssParameter name="fill-opacity">${n.symbolizer.fillOpacity??1}</CssParameter>
                </Fill>
                <Stroke>
                  <CssParameter name="stroke">${n.symbolizer.stroke||"#2266cc"}</CssParameter>
                  <CssParameter name="stroke-width">${n.symbolizer.strokeWidth||1}</CssParameter>
                </Stroke>
              </Mark>
              <Size>${n.symbolizer.pointSize||8}</Size>${s}
            </Graphic>
          </PointSymbolizer>`;if(n.symbolizer.haloColor&&n.symbolizer.haloRadius){const o=(n.symbolizer.pointSize||8)+n.symbolizer.haloRadius*2;i=`
          <PointSymbolizer>
            <Graphic>
              <Mark>
                <WellKnownName>${n.symbolizer.pointShape||"circle"}</WellKnownName>
                <Fill>
                  <CssParameter name="fill">${n.symbolizer.haloColor}</CssParameter>
                  <CssParameter name="fill-opacity">0.4</CssParameter>
                </Fill>
              </Mark>
              <Size>${o}</Size>${s}
            </Graphic>
          </PointSymbolizer>`+a}else i=a}r+=`
        <Rule>
          <Name>${n.name}</Name>${i}
        </Rule>`}),`<?xml version="1.0" encoding="UTF-8"?>
<StyledLayerDescriptor version="1.0.0"
  xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"
  xmlns="http://www.opengis.net/sld"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NamedLayer>
    <Name>${t}</Name>
    <UserStyle>
      <Title>${t}</Title>
      <FeatureTypeStyle>${r}
      </FeatureTypeStyle>
    </UserStyle>
  </NamedLayer>
</StyledLayerDescriptor>`}function FP({value:t,onChange:e,label:r}){const n=dr("gray.200","gray.600");return u.jsxs(Ot,{children:[u.jsx(Pt,{fontSize:"sm",children:r}),u.jsxs(Ce,{children:[u.jsxs(ue,{position:"relative",children:[u.jsx(ue,{w:"40px",h:"40px",borderRadius:"full",bg:t,border:"2px solid",borderColor:n,cursor:"pointer",_hover:{borderColor:"kartoza.400"},transition:"border-color 0.2s"}),u.jsx(Ar,{type:"color",value:t,onChange:i=>e(i.target.value),position:"absolute",top:0,left:0,w:"40px",h:"40px",opacity:0,cursor:"pointer"})]}),u.jsx(Ar,{value:t,onChange:i=>e(i.target.value),size:"sm",w:"100px",fontFamily:"mono",borderColor:n})]})]})}function tAe({rule:t,onChange:e,onDelete:r}){const n=dr("white","gray.800"),i=dr("gray.200","gray.600"),[s,a]=I.useState(!1),o=d=>{e({...t,symbolizer:{...t.symbolizer,...d}})};return u.jsx(ue,{p:4,bg:n,borderRadius:"lg",border:"1px solid",borderColor:i,children:u.jsxs(ft,{spacing:4,align:"stretch",children:[u.jsxs(Ce,{justify:"space-between",children:[u.jsxs(Ot,{maxW:"200px",children:[u.jsx(Pt,{fontSize:"sm",children:"Rule Name"}),u.jsx(Ar,{size:"sm",value:t.name,onChange:d=>e({...t,name:d.target.value})})]}),u.jsxs(Ot,{maxW:"150px",children:[u.jsx(Pt,{fontSize:"sm",children:"Geometry Type"}),u.jsxs(Rn,{size:"sm",value:t.symbolizer.type,onChange:d=>o({type:d.target.value}),children:[u.jsx("option",{value:"polygon",children:"Polygon"}),u.jsx("option",{value:"line",children:"Line"}),u.jsx("option",{value:"point",children:"Point"})]})]}),u.jsx(br,{"aria-label":"Delete rule",icon:u.jsx(Z7,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:r})]}),u.jsx(Fr,{}),(t.symbolizer.type==="polygon"||t.symbolizer.type==="point")&&u.jsxs(ue,{children:[u.jsx(ie,{fontWeight:"600",fontSize:"sm",mb:2,children:"Fill"}),u.jsxs(Ce,{spacing:4,wrap:"wrap",children:[u.jsx(FP,{label:"Color",value:t.symbolizer.fill||"#3388ff",onChange:d=>o({fill:d})}),u.jsxs(Ot,{maxW:"150px",children:[u.jsx(Pt,{fontSize:"sm",children:"Opacity"}),u.jsxs(Ce,{children:[u.jsxs(Sl,{value:t.symbolizer.fillOpacity??1,min:0,max:1,step:.1,onChange:d=>o({fillOpacity:d}),children:[u.jsx(Cl,{children:u.jsx(Tl,{bg:"kartoza.500"})}),u.jsx(kl,{})]}),u.jsxs(ie,{fontSize:"sm",w:"40px",children:[((t.symbolizer.fillOpacity??1)*100).toFixed(0),"%"]})]})]})]})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontWeight:"600",fontSize:"sm",mb:2,children:"Stroke"}),u.jsxs(Ce,{spacing:4,wrap:"wrap",children:[u.jsx(FP,{label:"Color",value:t.symbolizer.stroke||"#2266cc",onChange:d=>o({stroke:d})}),u.jsxs(Ot,{maxW:"100px",children:[u.jsx(Pt,{fontSize:"sm",children:"Width"}),u.jsxs(Ip,{size:"sm",value:t.symbolizer.strokeWidth||1,min:0,max:20,step:.5,onChange:(d,m)=>o({strokeWidth:m}),children:[u.jsx(Rp,{}),u.jsxs(Dp,{children:[u.jsx(Fp,{}),u.jsx(Lp,{})]})]})]}),t.symbolizer.type==="line"&&u.jsxs(Ot,{maxW:"150px",children:[u.jsx(Pt,{fontSize:"sm",children:"Opacity"}),u.jsxs(Ce,{children:[u.jsxs(Sl,{value:t.symbolizer.strokeOpacity??1,min:0,max:1,step:.1,onChange:d=>o({strokeOpacity:d}),children:[u.jsx(Cl,{children:u.jsx(Tl,{bg:"kartoza.500"})}),u.jsx(kl,{})]}),u.jsxs(ie,{fontSize:"sm",w:"40px",children:[((t.symbolizer.strokeOpacity??1)*100).toFixed(0),"%"]})]})]})]})]}),t.symbolizer.type==="point"&&u.jsxs(ue,{children:[u.jsx(ie,{fontWeight:"600",fontSize:"sm",mb:2,children:"Point Symbol"}),u.jsxs(ue,{mb:4,children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",mb:2,children:"Quick Presets"}),u.jsx(Sr,{flexWrap:"wrap",gap:2,children:LP.slice(0,10).map(d=>u.jsx(ue,{title:`${d.name}: ${d.description}`,cursor:"pointer",p:1,borderRadius:"md",border:"2px solid",borderColor:t.symbolizer.fill===d.fill&&t.symbolizer.pointShape===d.shape?"kartoza.500":"transparent",_hover:{borderColor:"kartoza.300",bg:"gray.50"},onClick:()=>{o({pointShape:d.shape,fill:d.fill,fillOpacity:d.fillOpacity,stroke:d.stroke,strokeWidth:d.strokeWidth,pointSize:d.size,haloColor:d.haloColor,haloRadius:d.haloRadius,rotation:d.rotation})},children:u.jsxs(ue,{w:"28px",h:"28px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",children:[d.haloColor&&u.jsx(ue,{position:"absolute",w:`${d.size+(d.haloRadius||0)*2}px`,h:`${d.size+(d.haloRadius||0)*2}px`,borderRadius:d.shape==="circle"?"50%":d.shape==="triangle"?"0":"sm",bg:d.haloColor,opacity:.4,transform:d.rotation?`rotate(${d.rotation}deg)`:void 0,style:{clipPath:d.shape==="triangle"?"polygon(50% 0%, 0% 100%, 100% 100%)":void 0}}),u.jsx(ue,{position:"relative",w:`${d.size}px`,h:`${d.size}px`,borderRadius:d.shape==="circle"?"50%":d.shape==="triangle"?"0":"sm",bg:d.fill,opacity:d.fillOpacity,border:`${d.strokeWidth}px solid ${d.stroke}`,transform:d.rotation?`rotate(${d.rotation}deg)`:void 0,style:{clipPath:d.shape==="triangle"?"polygon(50% 0%, 0% 100%, 100% 100%)":d.shape==="star"?"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)":d.shape==="cross"?"polygon(35% 0%, 65% 0%, 65% 35%, 100% 35%, 100% 65%, 65% 65%, 65% 100%, 35% 100%, 35% 65%, 0% 65%, 0% 35%, 35% 35%)":void 0}})]})},d.name))}),u.jsx(mc,{in:s,animateOpacity:!0,children:u.jsx(Sr,{flexWrap:"wrap",gap:2,mt:2,children:LP.slice(10).map(d=>u.jsx(ue,{title:`${d.name}: ${d.description}`,cursor:"pointer",p:1,borderRadius:"md",border:"2px solid",borderColor:t.symbolizer.fill===d.fill&&t.symbolizer.pointShape===d.shape?"kartoza.500":"transparent",_hover:{borderColor:"kartoza.300",bg:"gray.50"},onClick:()=>{o({pointShape:d.shape,fill:d.fill,fillOpacity:d.fillOpacity,stroke:d.stroke,strokeWidth:d.strokeWidth,pointSize:d.size,haloColor:d.haloColor,haloRadius:d.haloRadius,rotation:d.rotation})},children:u.jsxs(ue,{w:"28px",h:"28px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",children:[d.haloColor&&u.jsx(ue,{position:"absolute",w:`${d.size+(d.haloRadius||0)*2}px`,h:`${d.size+(d.haloRadius||0)*2}px`,borderRadius:d.shape==="circle"?"50%":d.shape==="triangle"?"0":"sm",bg:d.haloColor,opacity:.4,transform:d.rotation?`rotate(${d.rotation}deg)`:void 0,style:{clipPath:d.shape==="triangle"?"polygon(50% 0%, 0% 100%, 100% 100%)":void 0}}),u.jsx(ue,{position:"relative",w:`${d.size}px`,h:`${d.size}px`,borderRadius:d.shape==="circle"?"50%":d.shape==="triangle"?"0":"sm",bg:d.fill,opacity:d.fillOpacity,border:`${d.strokeWidth}px solid ${d.stroke}`,transform:d.rotation?`rotate(${d.rotation}deg)`:void 0,style:{clipPath:d.shape==="triangle"?"polygon(50% 0%, 0% 100%, 100% 100%)":d.shape==="star"?"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)":d.shape==="cross"?"polygon(35% 0%, 65% 0%, 65% 35%, 100% 35%, 100% 65%, 65% 65%, 65% 100%, 35% 100%, 35% 65%, 0% 65%, 0% 35%, 35% 35%)":void 0}})]})},d.name))})}),u.jsx(St,{size:"xs",variant:"ghost",mt:2,onClick:()=>a(!s),rightIcon:u.jsx(He,{as:s?Gy:Nl}),children:s?"Show Less":`Show ${LP.length-10} More`})]}),u.jsx(Fr,{my:3}),u.jsxs(Ce,{spacing:4,wrap:"wrap",children:[u.jsxs(Ot,{maxW:"150px",children:[u.jsx(Pt,{fontSize:"sm",children:"Shape"}),u.jsxs(Rn,{size:"sm",value:t.symbolizer.pointShape||"circle",onChange:d=>o({pointShape:d.target.value}),children:[u.jsx("option",{value:"circle",children:"Circle"}),u.jsx("option",{value:"square",children:"Square"}),u.jsx("option",{value:"triangle",children:"Triangle"}),u.jsx("option",{value:"star",children:"Star"}),u.jsx("option",{value:"cross",children:"Cross"}),u.jsx("option",{value:"x",children:"X"})]})]}),u.jsxs(Ot,{maxW:"100px",children:[u.jsx(Pt,{fontSize:"sm",children:"Size"}),u.jsxs(Ip,{size:"sm",value:t.symbolizer.pointSize||8,min:1,max:50,onChange:(d,m)=>o({pointSize:m}),children:[u.jsx(Rp,{}),u.jsxs(Dp,{children:[u.jsx(Fp,{}),u.jsx(Lp,{})]})]})]}),u.jsxs(Ot,{maxW:"100px",children:[u.jsx(Pt,{fontSize:"sm",children:"Rotation"}),u.jsxs(Ip,{size:"sm",value:t.symbolizer.rotation||0,min:0,max:360,step:15,onChange:(d,m)=>o({rotation:m}),children:[u.jsx(Rp,{}),u.jsxs(Dp,{children:[u.jsx(Fp,{}),u.jsx(Lp,{})]})]})]})]}),u.jsxs(ue,{mt:4,children:[u.jsx(ie,{fontWeight:"600",fontSize:"sm",mb:2,children:"Halo / Glow Effect"}),u.jsxs(Ce,{spacing:4,wrap:"wrap",children:[u.jsx(FP,{label:"Halo Color",value:t.symbolizer.haloColor||"#ffffff",onChange:d=>o({haloColor:d})}),u.jsxs(Ot,{maxW:"120px",children:[u.jsx(Pt,{fontSize:"sm",children:"Halo Radius"}),u.jsxs(Ce,{children:[u.jsxs(Sl,{value:t.symbolizer.haloRadius||0,min:0,max:10,step:1,onChange:d=>o({haloRadius:d}),children:[u.jsx(Cl,{children:u.jsx(Tl,{bg:"kartoza.500"})}),u.jsx(kl,{})]}),u.jsxs(ie,{fontSize:"sm",w:"30px",children:[t.symbolizer.haloRadius||0,"px"]})]})]}),t.symbolizer.haloRadius&&t.symbolizer.haloRadius>0&&u.jsx(St,{size:"xs",variant:"ghost",colorScheme:"red",onClick:()=>o({haloRadius:0,haloColor:void 0}),children:"Remove Halo"})]})]})]}),u.jsxs(ue,{children:[u.jsx(ie,{fontWeight:"600",fontSize:"sm",mb:2,children:"Preview"}),u.jsxs(ue,{w:"100px",h:"60px",borderRadius:"md",border:"1px solid",borderColor:i,display:"flex",alignItems:"center",justifyContent:"center",bg:"gray.100",children:[t.symbolizer.type==="polygon"&&u.jsx(ue,{w:"60px",h:"40px",borderRadius:"sm",bg:t.symbolizer.fill,opacity:t.symbolizer.fillOpacity,border:`${t.symbolizer.strokeWidth}px solid ${t.symbolizer.stroke}`}),t.symbolizer.type==="line"&&u.jsx(ue,{w:"60px",h:`${Math.max(2,t.symbolizer.strokeWidth||2)}px`,bg:t.symbolizer.stroke,opacity:t.symbolizer.strokeOpacity}),t.symbolizer.type==="point"&&u.jsxs(ue,{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",children:[t.symbolizer.haloColor&&t.symbolizer.haloRadius&&t.symbolizer.haloRadius>0&&u.jsx(ue,{position:"absolute",w:`${(t.symbolizer.pointSize||8)+t.symbolizer.haloRadius*2}px`,h:`${(t.symbolizer.pointSize||8)+t.symbolizer.haloRadius*2}px`,borderRadius:t.symbolizer.pointShape==="circle"?"50%":t.symbolizer.pointShape==="triangle"?"0":"sm",bg:t.symbolizer.haloColor,opacity:.4,transform:t.symbolizer.rotation?`rotate(${t.symbolizer.rotation}deg)`:void 0,style:{clipPath:t.symbolizer.pointShape==="triangle"?"polygon(50% 0%, 0% 100%, 100% 100%)":t.symbolizer.pointShape==="star"?"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)":t.symbolizer.pointShape==="cross"?"polygon(35% 0%, 65% 0%, 65% 35%, 100% 35%, 100% 65%, 65% 65%, 65% 100%, 35% 100%, 35% 65%, 0% 65%, 0% 35%, 35% 35%)":t.symbolizer.pointShape==="x"?"polygon(10% 0%, 50% 40%, 90% 0%, 100% 10%, 60% 50%, 100% 90%, 90% 100%, 50% 60%, 10% 100%, 0% 90%, 40% 50%, 0% 10%)":void 0}}),u.jsx(ue,{position:"relative",w:`${t.symbolizer.pointSize||8}px`,h:`${t.symbolizer.pointSize||8}px`,borderRadius:t.symbolizer.pointShape==="circle"?"50%":t.symbolizer.pointShape==="triangle"?"0":"sm",bg:t.symbolizer.fill,opacity:t.symbolizer.fillOpacity,border:`${t.symbolizer.strokeWidth}px solid ${t.symbolizer.stroke}`,transform:t.symbolizer.rotation?`rotate(${t.symbolizer.rotation}deg)`:void 0,style:{clipPath:t.symbolizer.pointShape==="triangle"?"polygon(50% 0%, 0% 100%, 100% 100%)":t.symbolizer.pointShape==="star"?"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)":t.symbolizer.pointShape==="cross"?"polygon(35% 0%, 65% 0%, 65% 35%, 100% 35%, 100% 65%, 65% 65%, 65% 100%, 35% 100%, 35% 65%, 0% 65%, 0% 35%, 35% 35%)":t.symbolizer.pointShape==="x"?"polygon(10% 0%, 50% 40%, 90% 0%, 100% 10%, 60% 50%, 100% 90%, 90% 100%, 50% 60%, 10% 100%, 0% 90%, 40% 50%, 0% 10%)":void 0}})]})]})]})]})})}function rAe(){var ve,Se,Fe,be,tt,ht;const t=bt(xe=>xe.activeDialog),e=bt(xe=>xe.dialogData),r=bt(xe=>xe.closeDialog),n=Go(),i=Pa(),s=t==="style",a=(e==null?void 0:e.mode)==="edit",o=(ve=e==null?void 0:e.data)==null?void 0:ve.connectionId,d=(Se=e==null?void 0:e.data)==null?void 0:Se.workspace,m=(Fe=e==null?void 0:e.data)==null?void 0:Fe.name,y=(be=e==null?void 0:e.data)==null?void 0:be.previewLayer,[b,w]=I.useState(""),[O,A]=I.useState("sld"),[E,$]=I.useState(""),[R,F]=I.useState([]),[L,U]=I.useState(0),[Q,Y]=I.useState(!1),[Z,J]=I.useState(null),[re,he]=I.useState(null),{isOpen:le,onToggle:Ze}=Qp(),[Ee,qe]=I.useState(""),[et,at]=I.useState("equal-interval"),[Be,Me]=I.useState(5),[Ge,Le]=I.useState("blue-to-red"),[Ie,Oe]=I.useState("polygon"),[Re,nt]=I.useState(""),{isOpen:ze,onToggle:rt}=Qp(),[Xe,_t]=I.useState("colormap"),[Mt,Et]=I.useState("rainbow"),[yt,Je]=I.useState(0),[Kt,vt]=I.useState(1e3),[st,Te]=I.useState(1),[lt,Nt]=I.useState("ramp"),[Tt,Vt]=I.useState(315),[tn,hn]=I.useState(45),[on,kn]=I.useState(1),[yn,ui]=I.useState("normalize"),[Oi,Qe]=I.useState(1),Br=dr("gray.50","gray.900"),kt=dr("linear-gradient(135deg, #3d9970 0%, #2d7a5a 100%)","linear-gradient(135deg, #2d7a5a 0%, #1d5a40 100%)"),{data:Wt,isLoading:wn}=Qr({queryKey:["style",o,d,m],queryFn:()=>dU(o,d,m),enabled:s&&a&&!!m});I.useEffect(()=>{s&&(a&&Wt?(w(Wt.name),A(Wt.format),$(Wt.content),Wt.format==="sld"&&F(Ux(Wt.content))):a||(w(""),A("sld"),$(Bw),F(Ux(Bw))),Y(!1),J(null))},[s,a,Wt]),I.useEffect(()=>{if(O==="sld"&&L===0&&R.length>0){const xe=eAe(b||"NewStyle",R);xe!==E&&($(xe),Y(!0))}},[R,b]);const xt=I.useCallback(()=>{var xe;if(O==="sld")try{const rr=new DOMParser().parseFromString(E,"text/xml").querySelector("parsererror");return rr?(J("Invalid XML: "+((xe=rr.textContent)==null?void 0:xe.slice(0,100))),!1):(J(null),!0)}catch{return J("Failed to parse SLD"),!1}return J(null),!0},[E,O]),yr=Jc({mutationFn:()=>cbe(o,d,m,E,O),onSuccess:()=>{i.invalidateQueries({queryKey:["styles",o,d]}),i.invalidateQueries({queryKey:["style",o,d,m]}),n({title:"Style updated",status:"success",duration:3e3}),Y(!1)},onError:xe=>{n({title:"Failed to update style",description:xe.message,status:"error",duration:5e3})}}),Jt=Jc({mutationFn:()=>ube(o,d,b,E,O),onSuccess:()=>{i.invalidateQueries({queryKey:["styles",o,d]}),n({title:"Style created",status:"success",duration:3e3}),r()},onError:xe=>{n({title:"Failed to create style",description:xe.message,status:"error",duration:5e3})}}),Zn=()=>{if(!xt()){n({title:"Please fix validation errors",status:"warning",duration:3e3});return}if(!a&&!b.trim()){n({title:"Style name is required",status:"warning",duration:3e3});return}a?yr.mutate():Jt.mutate()},vi=xe=>{$(xe),Y(!0),O==="sld"&&F(Ux(xe))},pr=xe=>{xe!==O&&(xe==="sld"?($(Bw),F(Ux(Bw))):($(qje),F([])),A(xe),Y(!0))},Ii=()=>{F([...R,{name:`Rule ${R.length+1}`,symbolizer:{type:"polygon",fill:"#3388ff",fillOpacity:.6,stroke:"#2266cc",strokeWidth:1}}])},xs=(xe,ct)=>{const Rt=[...R];Rt[xe]=ct,F(Rt),Y(!0)},Di=xe=>{if(R.length<=1){n({title:"Cannot delete the last rule",status:"warning",duration:3e3});return}F(R.filter((ct,Rt)=>Rt!==xe)),Y(!0)},is=async()=>{if(!y){n({title:"No preview layer specified",status:"info",duration:3e3});return}try{const{url:xe}=await el({connId:o,workspace:d,layerName:y,storeName:"",storeType:"datastore",layerType:"vector"});he(xe)}catch{n({title:"Failed to start preview",status:"error",duration:3e3})}},me=()=>{const xe=Re.split(",").map(Nr=>parseFloat(Nr.trim())).filter(Nr=>!isNaN(Nr));if(xe.length<2){n({title:"Need more sample values",description:"Please enter at least 2 numeric values separated by commas",status:"warning",duration:3e3});return}const ct=Yje(xe,Be,et),Rt=D6(RP[Ge],Be),rr=Jje(b||"ClassifiedStyle",Ee,ct,Rt,Ie);$(rr),A("sld"),F(Ux(rr)),Y(!0),U(1),n({title:"Classified style generated",description:`Created ${Be} classes using ${et.replace("-"," ")}`,status:"success",duration:3e3})},W=()=>{var rr;const xe=b||"RasterStyle",ct=((rr=fg[Mt])==null?void 0:rr.colors)||fg.rainbow.colors;let Rt;switch(Xe){case"colormap":Rt=I6(xe,ct,yt,Kt,lt,st);break;case"hillshade":Rt=Qje(xe,Tt,tn,on,st);break;case"hillshade-color":Rt=Hje(xe,ct,yt,Kt,Tt,tn,on,st);break;case"contrast":Rt=Gje(xe,yn,Oi,st);break;default:Rt=I6(xe,ct,yt,Kt,"ramp",st)}$(Rt),A("sld"),F([]),Y(!0),U(1),n({title:"Raster style generated",description:`Created ${Xe==="hillshade"?"hillshade":Xe==="hillshade-color"?"hillshade with colors":Xe==="contrast"?"contrast enhanced":"color map"} style`,status:"success",duration:3e3})},H=xe=>{Vt(xe.azimuth),hn(xe.altitude),kn(xe.zFactor)},ee=I.useMemo(()=>O==="sld"?[aje()]:[Uje()],[O]),de=wn||yr.isPending||Jt.isPending;return u.jsxs(es,{isOpen:s,onClose:r,size:"6xl",scrollBehavior:"inside",children:[u.jsx(rs,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsxs(ts,{maxH:"90vh",borderRadius:"xl",overflow:"hidden",children:[u.jsx(ue,{bg:kt,color:"white",px:6,py:4,children:u.jsxs(Sr,{align:"center",justify:"space-between",children:[u.jsxs(Ce,{spacing:3,children:[u.jsx(He,{as:Bo,boxSize:6}),u.jsxs(ue,{children:[u.jsx(ie,{fontSize:"lg",fontWeight:"600",children:a?"Edit Style":"Create Style"}),u.jsx(ie,{fontSize:"sm",opacity:.9,children:a?`Editing ${m}`:"Create a new map style"})]})]}),u.jsxs(Ce,{children:[Q&&u.jsx(er,{colorScheme:"yellow",variant:"solid",children:"Unsaved Changes"}),u.jsx(er,{colorScheme:O==="sld"?"blue":"purple",variant:"solid",children:O.toUpperCase()})]})]})}),u.jsx(Fs,{color:"white"}),u.jsx(gs,{p:0,bg:Br,children:wn?u.jsx(Sr,{h:"400px",align:"center",justify:"center",children:u.jsx(Nn,{size:"xl",color:"kartoza.500"})}):u.jsxs(Sr,{h:"70vh",children:[u.jsx(ue,{w:"250px",borderRight:"1px solid",borderColor:"gray.200",p:4,overflowY:"auto",children:u.jsxs(ft,{spacing:4,align:"stretch",children:[!a&&u.jsxs(Ot,{isRequired:!0,children:[u.jsx(Pt,{children:"Style Name"}),u.jsx(Ar,{value:b,onChange:xe=>{w(xe.target.value),Y(!0)},placeholder:"my-style"})]}),u.jsxs(Ot,{children:[u.jsx(Pt,{children:"Format"}),u.jsxs(Rn,{value:O,onChange:xe=>pr(xe.target.value),children:[u.jsx("option",{value:"sld",children:"SLD (Styled Layer Descriptor)"}),u.jsx("option",{value:"css",children:"CSS (GeoServer CSS)"})]})]}),u.jsx(Fr,{}),O==="sld"&&u.jsxs(u.Fragment,{children:[u.jsx(ie,{fontWeight:"600",children:"Quick Actions"}),u.jsx(St,{size:"sm",leftIcon:u.jsx(He,{as:Y7}),variant:"outline",onClick:()=>F([{name:"Polygon",symbolizer:{type:"polygon",fill:"#3388ff",fillOpacity:.6,stroke:"#2266cc",strokeWidth:1}}]),children:"Polygon Style"}),u.jsx(St,{size:"sm",leftIcon:u.jsx(He,{as:Z7}),variant:"outline",onClick:()=>F([{name:"Line",symbolizer:{type:"line",stroke:"#3388ff",strokeWidth:2,strokeOpacity:1}}]),children:"Line Style"}),u.jsx(St,{size:"sm",leftIcon:u.jsx(He,{as:nve}),variant:"outline",onClick:()=>F([{name:"Point",symbolizer:{type:"point",fill:"#3388ff",fillOpacity:1,stroke:"#2266cc",strokeWidth:1,pointShape:"circle",pointSize:8}}]),children:"Point Style"}),u.jsx(Fr,{}),u.jsx(ie,{fontWeight:"600",children:"Classified Style"}),u.jsx(St,{size:"sm",leftIcon:u.jsx(He,{as:ef}),rightIcon:u.jsx(He,{as:le?Gy:Nl}),variant:"outline",colorScheme:"kartoza",onClick:Ze,children:"Choropleth Wizard"}),u.jsx(mc,{in:le,animateOpacity:!0,children:u.jsxs(ft,{spacing:3,p:3,bg:"gray.50",borderRadius:"md",align:"stretch",children:[u.jsxs(Ot,{size:"sm",children:[u.jsx(Pt,{fontSize:"xs",children:"Attribute"}),u.jsx(Ar,{size:"sm",value:Ee,onChange:xe=>qe(xe.target.value),placeholder:"population"})]}),u.jsxs(Ot,{size:"sm",children:[u.jsx(Pt,{fontSize:"xs",children:"Method"}),u.jsxs(Rn,{size:"sm",value:et,onChange:xe=>at(xe.target.value),children:[u.jsx("option",{value:"equal-interval",children:"Equal Interval"}),u.jsx("option",{value:"quantile",children:"Quantile"}),u.jsx("option",{value:"jenks",children:"Jenks Natural Breaks"}),u.jsx("option",{value:"pretty",children:"Pretty Breaks"})]})]}),u.jsxs(Ot,{size:"sm",children:[u.jsxs(Pt,{fontSize:"xs",children:["Classes: ",Be]}),u.jsxs(Sl,{value:Be,onChange:xe=>Me(xe),min:3,max:10,step:1,children:[u.jsx(Cl,{children:u.jsx(Tl,{bg:"kartoza.500"})}),u.jsx(kl,{})]})]}),u.jsxs(Ot,{size:"sm",children:[u.jsx(Pt,{fontSize:"xs",children:"Color Ramp"}),u.jsx(Rn,{size:"sm",value:Ge,onChange:xe=>Le(xe.target.value),children:Object.keys(RP).map(xe=>u.jsx("option",{value:xe,children:xe.replace(/-/g," ")},xe))}),u.jsx(Ce,{mt:1,spacing:1,children:D6(RP[Ge],Be).map((xe,ct)=>u.jsx(ue,{w:"16px",h:"12px",bg:xe,borderRadius:"sm"},ct))})]}),u.jsxs(Ot,{size:"sm",children:[u.jsx(Pt,{fontSize:"xs",children:"Geometry Type"}),u.jsxs(Rn,{size:"sm",value:Ie,onChange:xe=>Oe(xe.target.value),children:[u.jsx("option",{value:"polygon",children:"Polygon"}),u.jsx("option",{value:"line",children:"Line"}),u.jsx("option",{value:"point",children:"Point"})]})]}),u.jsxs(Ot,{size:"sm",children:[u.jsx(Pt,{fontSize:"xs",children:"Sample Values (comma separated)"}),u.jsx(Ar,{size:"sm",value:Re,onChange:xe=>nt(xe.target.value),placeholder:"10, 25, 50, 100, 200"})]}),u.jsx(St,{size:"sm",colorScheme:"kartoza",onClick:me,isDisabled:!Ee||!Re,children:"Generate Style"})]})}),u.jsx(Fr,{}),u.jsx(ie,{fontWeight:"600",children:"Raster Style"}),u.jsx(St,{size:"sm",leftIcon:u.jsx(He,{as:mu}),rightIcon:u.jsx(He,{as:ze?Gy:Nl}),variant:"outline",colorScheme:"purple",onClick:rt,children:"Raster Wizard"}),u.jsx(mc,{in:ze,animateOpacity:!0,children:u.jsxs(ft,{spacing:3,p:3,bg:"purple.50",borderRadius:"md",align:"stretch",children:[u.jsxs(Ot,{size:"sm",children:[u.jsx(Pt,{fontSize:"xs",children:"Style Type"}),u.jsxs(Rn,{size:"sm",value:Xe,onChange:xe=>_t(xe.target.value),children:[u.jsx("option",{value:"colormap",children:"Color Map (Graduated)"}),u.jsx("option",{value:"hillshade",children:"Hillshade Only"}),u.jsx("option",{value:"hillshade-color",children:"Hillshade + Colors"}),u.jsx("option",{value:"contrast",children:"Contrast Enhancement"})]})]}),(Xe==="colormap"||Xe==="hillshade-color")&&u.jsxs(u.Fragment,{children:[u.jsxs(Ot,{size:"sm",children:[u.jsx(Pt,{fontSize:"xs",children:"Color Ramp"}),u.jsx(Rn,{size:"sm",value:Mt,onChange:xe=>Et(xe.target.value),children:Object.entries(fg).map(([xe,ct])=>u.jsx("option",{value:xe,children:ct.name},xe))}),u.jsx(Ce,{mt:1,spacing:0,children:(tt=fg[Mt])==null?void 0:tt.colors.map((xe,ct)=>u.jsx(ue,{flex:"1",h:"8px",bg:xe,borderRadius:ct===0?"sm 0 0 sm":ct===fg[Mt].colors.length-1?"0 sm sm 0":"0"},ct))}),u.jsx(ie,{fontSize:"xs",color:"gray.500",mt:1,children:(ht=fg[Mt])==null?void 0:ht.description})]}),u.jsxs(Ot,{size:"sm",children:[u.jsx(Pt,{fontSize:"xs",children:"Min Value"}),u.jsx(Ar,{size:"sm",type:"number",value:yt,onChange:xe=>Je(parseFloat(xe.target.value)||0)})]}),u.jsxs(Ot,{size:"sm",children:[u.jsx(Pt,{fontSize:"xs",children:"Max Value"}),u.jsx(Ar,{size:"sm",type:"number",value:Kt,onChange:xe=>vt(parseFloat(xe.target.value)||1e3)})]}),Xe==="colormap"&&u.jsxs(Ot,{size:"sm",children:[u.jsx(Pt,{fontSize:"xs",children:"Color Map Type"}),u.jsxs(Rn,{size:"sm",value:lt,onChange:xe=>Nt(xe.target.value),children:[u.jsx("option",{value:"ramp",children:"Ramp (Smooth gradient)"}),u.jsx("option",{value:"intervals",children:"Intervals (Discrete)"}),u.jsx("option",{value:"values",children:"Values (Exact match)"})]})]})]}),(Xe==="hillshade"||Xe==="hillshade-color")&&u.jsxs(u.Fragment,{children:[u.jsxs(Ot,{size:"sm",children:[u.jsx(Pt,{fontSize:"xs",children:"Hillshade Preset"}),u.jsx(Rn,{size:"sm",placeholder:"Select preset...",onChange:xe=>{const ct=M6.find(Rt=>Rt.name===xe.target.value);ct&&H(ct)},children:M6.map(xe=>u.jsx("option",{value:xe.name,children:xe.name},xe.name))})]}),u.jsxs(Ot,{size:"sm",children:[u.jsxs(Pt,{fontSize:"xs",children:["Sun Azimuth: ",Tt,""]}),u.jsxs(Sl,{value:Tt,onChange:xe=>Vt(xe),min:0,max:360,step:15,children:[u.jsx(Cl,{children:u.jsx(Tl,{bg:"purple.500"})}),u.jsx(kl,{})]})]}),u.jsxs(Ot,{size:"sm",children:[u.jsxs(Pt,{fontSize:"xs",children:["Sun Altitude: ",tn,""]}),u.jsxs(Sl,{value:tn,onChange:xe=>hn(xe),min:0,max:90,step:5,children:[u.jsx(Cl,{children:u.jsx(Tl,{bg:"purple.500"})}),u.jsx(kl,{})]})]}),u.jsxs(Ot,{size:"sm",children:[u.jsxs(Pt,{fontSize:"xs",children:["Z Factor: ",on]}),u.jsxs(Sl,{value:on,onChange:xe=>kn(xe),min:.1,max:5,step:.1,children:[u.jsx(Cl,{children:u.jsx(Tl,{bg:"purple.500"})}),u.jsx(kl,{})]})]})]}),Xe==="contrast"&&u.jsxs(u.Fragment,{children:[u.jsxs(Ot,{size:"sm",children:[u.jsx(Pt,{fontSize:"xs",children:"Enhancement Method"}),u.jsxs(Rn,{size:"sm",value:yn,onChange:xe=>ui(xe.target.value),children:[u.jsx("option",{value:"normalize",children:"Normalize (Stretch to min/max)"}),u.jsx("option",{value:"histogram",children:"Histogram Equalization"}),u.jsx("option",{value:"none",children:"None"})]})]}),u.jsxs(Ot,{size:"sm",children:[u.jsxs(Pt,{fontSize:"xs",children:["Gamma: ",Oi.toFixed(1)]}),u.jsxs(Sl,{value:Oi,onChange:xe=>Qe(xe),min:.1,max:3,step:.1,children:[u.jsx(Cl,{children:u.jsx(Tl,{bg:"purple.500"})}),u.jsx(kl,{})]})]})]}),u.jsxs(Ot,{size:"sm",children:[u.jsxs(Pt,{fontSize:"xs",children:["Opacity: ",(st*100).toFixed(0),"%"]}),u.jsxs(Sl,{value:st,onChange:xe=>Te(xe),min:0,max:1,step:.05,children:[u.jsx(Cl,{children:u.jsx(Tl,{bg:"purple.500"})}),u.jsx(kl,{})]})]}),u.jsx(St,{size:"sm",colorScheme:"purple",onClick:W,children:"Generate Raster Style"})]})})]}),y&&u.jsxs(u.Fragment,{children:[u.jsx(Fr,{}),u.jsx(ie,{fontWeight:"600",children:"Preview"}),u.jsxs(ie,{fontSize:"sm",color:"gray.600",children:["Layer: ",y]}),u.jsx(St,{size:"sm",leftIcon:u.jsx(He,{as:wo}),colorScheme:"kartoza",onClick:is,children:"Preview on Map"})]})]})}),u.jsx(ue,{flex:"1",display:"flex",flexDirection:"column",children:u.jsxs(p0,{index:L,onChange:U,flex:"1",display:"flex",flexDirection:"column",children:[u.jsxs(m0,{px:4,pt:2,children:[O==="sld"&&u.jsxs(Ys,{children:[u.jsx(He,{as:Bo,mr:2}),"Visual Editor"]}),u.jsxs(Ys,{children:[u.jsx(He,{as:Pb,mr:2}),"Code Editor"]}),re&&u.jsxs(Ys,{children:[u.jsx(He,{as:wo,mr:2}),"Map Preview"]})]}),u.jsxs(T1,{flex:"1",overflow:"hidden",children:[O==="sld"&&u.jsx(ga,{h:"100%",overflowY:"auto",p:4,children:u.jsxs(ft,{spacing:4,align:"stretch",children:[Z&&u.jsxs(to,{status:"warning",borderRadius:"md",children:[u.jsx(ro,{}),Z]}),R.map((xe,ct)=>u.jsx(tAe,{rule:xe,onChange:Rt=>xs(ct,Rt),onDelete:()=>Di(ct)},ct)),u.jsx(St,{leftIcon:u.jsx(He,{as:Bo}),onClick:Ii,variant:"outline",colorScheme:"kartoza",children:"Add Rule"})]})}),u.jsx(ga,{h:"100%",p:0,children:u.jsxs(ue,{h:"100%",position:"relative",children:[Z&&u.jsxs(to,{status:"warning",position:"absolute",top:0,left:0,right:0,zIndex:1,children:[u.jsx(ro,{}),Z]}),u.jsx(p5,{value:E,height:"100%",extensions:ee,onChange:vi,onBlur:xt,theme:"light",style:{height:"100%"}})]})}),re&&u.jsx(ga,{h:"100%",p:0,children:u.jsx("iframe",{src:re,style:{width:"100%",height:"100%",border:"none"},title:"Style Preview"})})]})]})})]})}),u.jsxs(qo,{gap:3,borderTop:"1px solid",borderTopColor:"gray.200",bg:"gray.50",children:[u.jsx(St,{variant:"ghost",onClick:r,children:"Cancel"}),u.jsx(St,{colorScheme:"kartoza",leftIcon:u.jsx(He,{as:bS}),onClick:Zn,isLoading:de,isDisabled:!Q&&a,children:a?"Save Changes":"Create Style"})]})]})]})}Cesium.Ion.defaultAccessToken="";function nAe(){var Be,Me,Ge,Le;const{activeDialog:t,dialogData:e,closeDialog:r}=bt(),n=I.useRef(null),i=I.useRef(null),[s,a]=I.useState(!0),[o,d]=I.useState("3d"),[m,y]=I.useState([]),[b,w]=I.useState(null),[O,A]=I.useState(!1),[E,$]=I.useState(0),[R,F]=I.useState(!1),L=t==="globe3d";I.useEffect(()=>{L&&$(Ie=>Ie+1)},[L]);const U="linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 100%)",Q=dr("white","gray.800"),Y=dr("gray.50","gray.700"),Z=dr("gray.200","gray.600"),J=(Be=e==null?void 0:e.data)==null?void 0:Be.connectionId,re=(Me=e==null?void 0:e.data)==null?void 0:Me.workspace,he=(Ge=e==null?void 0:e.data)==null?void 0:Ge.name,le=(Le=e==null?void 0:e.data)==null?void 0:Le.type,Ze=I.useCallback(()=>!J||!re?null:le==="layergroup"?`/api/terria/story/${J}/${re}/${he}`:`/api/terria/layer/${J}/${re}/${he}`,[J,re,he,le]);I.useEffect(()=>{if(!L||!n.current)return;if(i.current){try{i.current.destroy()}catch(Re){console.warn("[Globe3D] Error destroying previous viewer:",Re)}i.current=null}a(!0),w(null);let Ie=!0;const Oe=setTimeout(async()=>{if(!(!Ie||!n.current))try{console.log("[Globe3D] Initializing Cesium viewer...");const Re=new Cesium.Viewer(n.current,{baseLayerPicker:!1,geocoder:!1,homeButton:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,animation:!1,navigationHelpButton:!1,fullscreenButton:!1,vrButton:!1,infoBox:!1,creditContainer:document.createElement("div")});Re.imageryLayers.removeAll(),Re.terrainProvider=new Cesium.EllipsoidTerrainProvider,console.log("[Globe3D] Viewer created, adding base layer..."),Re.imageryLayers.addImageryProvider(new Cesium.UrlTemplateImageryProvider({url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",subdomains:["a","b","c","d"],credit:new Cesium.Credit("Map tiles by CartoDB, under CC BY 3.0. Data by OpenStreetMap, under ODbL.")})),console.log("[Globe3D] CartoDB base layer added"),i.current=Re;const nt=Ze();if(nt){const ze=await fetch(nt);if(!ze.ok)throw new Error(`Failed to fetch catalog: ${ze.status}`);const rt=await ze.json(),Xe=[],_t=Mt=>{if(Mt.type==="wms")try{const Et=new Cesium.WebMapServiceImageryProvider({url:Mt.url,layers:Mt.layers||Mt.name,parameters:{transparent:!0,format:"image/png"}}),yt=Re.imageryLayers.addImageryProvider(Et);if(yt.alpha=Mt.opacity||1,Xe.push({name:Mt.name,layer:yt,visible:!0,opacity:yt.alpha}),Mt.rectangle){const Je=Mt.rectangle;Re.camera.flyTo({destination:Cesium.Rectangle.fromDegrees(Je.west,Je.south,Je.east,Je.north),duration:1.5})}}catch(Et){console.error("Failed to add WMS layer:",Mt.name,Et)}else Mt.type==="group"&&Array.isArray(Mt.members)&&Mt.members.forEach(Et=>_t(Et))};rt.catalog?rt.catalog.forEach(Mt=>_t(Mt)):(rt.type==="wms"||rt.type==="group")&&_t(rt),Ie&&y(Xe)}Ie&&a(!1)}catch(Re){console.error("Failed to initialize Cesium viewer:",Re),Ie&&(w(Re instanceof Error?Re.message:"Failed to initialize viewer"),a(!1))}},200);return()=>{if(Ie=!1,clearTimeout(Oe),i.current){try{i.current.destroy()}catch(Re){console.warn("[Globe3D] Error destroying viewer:",Re)}i.current=null}y([])}},[L,Ze,E]),I.useEffect(()=>{if(i.current)switch(o){case"3d":i.current.scene.mode=Cesium.SceneMode.SCENE3D;break;case"2d":i.current.scene.mode=Cesium.SceneMode.SCENE2D;break;case"columbus":i.current.scene.mode=Cesium.SceneMode.COLUMBUS_VIEW;break}},[o]);const Ee=(Ie,Oe)=>{m[Ie]&&(m[Ie].layer.show=Oe,y(Re=>Re.map((nt,ze)=>ze===Ie?{...nt,visible:Oe}:nt)))},qe=(Ie,Oe)=>{m[Ie]&&(m[Ie].layer.alpha=Oe,y(Re=>Re.map((nt,ze)=>ze===Ie?{...nt,opacity:Oe}:nt)))},et=()=>{if(!i.current)return;const Oe=i.current.imageryLayers;for(let Re=0;Re<Oe.length;Re++){const nt=Oe.get(Re),ze=nt.show;nt.show=!1,setTimeout(()=>{nt.show=ze},100)}},at=()=>{A(Ie=>!Ie)};return L?u.jsxs(es,{isOpen:L,onClose:r,size:O?"full":"6xl",isCentered:!O,children:[u.jsx(rs,{bg:"blackAlpha.700"}),u.jsxs(ts,{bg:Q,maxH:O?"100vh":"90vh",h:O?"100vh":"85vh",overflow:"hidden",children:[u.jsx(f0,{bg:U,color:"white",py:3,borderTopRadius:O?0:"md",children:u.jsxs(Ce,{justify:"space-between",children:[u.jsxs(ft,{align:"start",spacing:0,children:[u.jsxs(Ce,{children:[u.jsx(He,{as:Rl}),u.jsx(ie,{fontWeight:"bold",children:"3D Globe Viewer"}),u.jsx(er,{colorScheme:"whiteAlpha",variant:"solid",fontSize:"xs",children:le==="layergroup"?"Layer Group":"Layer"})]}),u.jsxs(ie,{fontSize:"xs",color:"whiteAlpha.800",children:[re,":",he]})]}),u.jsxs(Ce,{spacing:2,children:[m.length>0&&u.jsxs(Kd,{children:[u.jsx(Zd,{as:St,size:"sm",variant:"solid",bg:"whiteAlpha.200",color:"white",_hover:{bg:"whiteAlpha.300"},_active:{bg:"whiteAlpha.400"},rightIcon:u.jsx(Nl,{}),leftIcon:u.jsx(Yi,{}),maxW:"180px",children:u.jsxs(ie,{isTruncated:!0,fontSize:"xs",children:[m.length," Layer",m.length!==1?"s":""]})}),u.jsx(Yd,{color:"gray.800",zIndex:1e3,maxH:"300px",overflowY:"auto",children:m.map((Ie,Oe)=>u.jsx(fa,{onClick:()=>Ee(Oe,!Ie.visible),closeOnSelect:!1,children:u.jsxs(Ce,{justify:"space-between",w:"100%",children:[u.jsxs(Ce,{children:[u.jsx(He,{as:Ie.visible?wo:Jd,color:Ie.visible?"green.500":"gray.400"}),u.jsx(ie,{fontSize:"sm",children:Ie.name})]}),u.jsxs(er,{colorScheme:Ie.visible?"green":"gray",size:"sm",children:[Math.round(Ie.opacity*100),"%"]})]})},Oe))})]}),u.jsxs(qk,{size:"sm",isAttached:!0,variant:"ghost",children:[u.jsx($r,{label:"3D Globe",children:u.jsx(br,{"aria-label":"3D Globe",icon:u.jsx(Rl,{}),color:"white",bg:o==="3d"?"whiteAlpha.300":void 0,_hover:{bg:"whiteAlpha.200"},onClick:()=>d("3d")})}),u.jsx($r,{label:"2D Map",children:u.jsx(br,{"aria-label":"2D Map",icon:u.jsx(yc,{}),color:"white",bg:o==="2d"?"whiteAlpha.300":void 0,_hover:{bg:"whiteAlpha.200"},onClick:()=>d("2d")})}),u.jsx($r,{label:"Columbus View",children:u.jsx(br,{"aria-label":"Columbus View",icon:u.jsx(wI,{}),color:"white",bg:o==="columbus"?"whiteAlpha.300":void 0,_hover:{bg:"whiteAlpha.200"},onClick:()=>d("columbus")})})]}),u.jsx(Fr,{orientation:"vertical",h:"24px",borderColor:"whiteAlpha.400"}),u.jsx($r,{label:"Refresh",children:u.jsx(br,{"aria-label":"Refresh",icon:u.jsx(pf,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:et})}),u.jsx($r,{label:"Layer Controls",children:u.jsx(br,{"aria-label":"Layer Controls",icon:u.jsx(O1,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:()=>F(!R),bg:R?"whiteAlpha.200":void 0})}),u.jsx($r,{label:O?"Exit Fullscreen":"Fullscreen",children:u.jsx(br,{"aria-label":"Fullscreen",icon:u.jsx(dve,{}),size:"sm",variant:"ghost",color:"white",_hover:{bg:"whiteAlpha.200"},onClick:at})})]})]})}),u.jsx(Fs,{color:"white"}),u.jsxs(gs,{p:0,display:"flex",flexDirection:"column",h:"calc(100% - 60px)",children:[u.jsx(mc,{in:R,animateOpacity:!0,children:u.jsx(ue,{bg:Y,p:4,borderBottom:"1px solid",borderColor:Z,children:s?u.jsxs(Ce,{justify:"center",py:4,children:[u.jsx(Nn,{size:"sm",color:"kartoza.500"}),u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"Loading layers..."})]}):m.length>0?u.jsx(nn,{columns:{base:1,md:2,lg:3},spacing:4,children:m.map((Ie,Oe)=>u.jsxs(ue,{bg:Q,p:3,borderRadius:"md",border:"1px solid",borderColor:Z,children:[u.jsx(Ce,{justify:"space-between",mb:2,children:u.jsxs(Ce,{children:[u.jsx(br,{"aria-label":"Toggle visibility",icon:Ie.visible?u.jsx(wo,{}):u.jsx(Jd,{}),size:"xs",variant:"ghost",colorScheme:Ie.visible?"green":"gray",onClick:()=>Ee(Oe,!Ie.visible)}),u.jsx(ie,{fontSize:"sm",fontWeight:"500",noOfLines:1,children:Ie.name})]})}),u.jsxs(Ce,{spacing:2,children:[u.jsx(ie,{fontSize:"xs",color:"gray.500",minW:"50px",children:"Opacity"}),u.jsxs(Sl,{value:Ie.opacity*100,onChange:Re=>qe(Oe,Re/100),min:0,max:100,size:"sm",children:[u.jsx(Cl,{bg:"gray.200",children:u.jsx(Tl,{bg:"kartoza.500"})}),u.jsx(kl,{boxSize:3})]}),u.jsxs(ie,{fontSize:"xs",color:"gray.500",minW:"30px",children:[Math.round(Ie.opacity*100),"%"]})]})]},Oe))}):u.jsx(ie,{fontSize:"sm",color:"gray.500",children:"No layers loaded"})})}),u.jsxs(ue,{flex:"1",position:"relative",bg:"gray.900",children:[u.jsx(ue,{ref:n,position:"absolute",top:0,left:0,right:0,bottom:0},`cesium-container-${E}`),s&&u.jsxs(ue,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",bg:"blackAlpha.700",p:6,borderRadius:"lg",children:[u.jsx(Nn,{size:"xl",color:"kartoza.400",thickness:"4px"}),u.jsx(ie,{mt:3,color:"white",children:"Loading 3D viewer..."})]}),b&&u.jsxs(ue,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",bg:"red.600",color:"white",p:6,borderRadius:"lg",maxW:"400px",children:[u.jsx(ie,{fontWeight:"bold",mb:2,children:"Error"}),u.jsx(ie,{fontSize:"sm",children:b})]})]})]}),u.jsx(ue,{px:4,py:2,bg:Y,borderTop:"1px solid",borderColor:Z,children:u.jsxs(Ce,{justify:"space-between",fontSize:"xs",color:"gray.500",children:[u.jsxs(ie,{children:["Connection: ",J==null?void 0:J.slice(0,8),"..."]}),u.jsxs(Ce,{spacing:4,children:[u.jsx(er,{colorScheme:o==="3d"?"green":o==="2d"?"blue":"purple",children:o==="3d"?"3D Globe":o==="2d"?"2D Map":"Columbus View"}),u.jsx(ie,{children:"Scroll to zoom, drag to pan, right-drag to rotate"})]})]})})]})]}):null}function iAe(){return u.jsxs(u.Fragment,{children:[u.jsx(L1e,{}),u.jsx(F1e,{}),u.jsx(B1e,{}),u.jsx($1e,{}),u.jsx(N1e,{}),u.jsx(V1e,{}),u.jsx(W1e,{}),u.jsx(U1e,{}),u.jsx(FPe,{}),u.jsx(rAe,{}),u.jsx(nAe,{}),u.jsx(q1e,{}),u.jsx(bPe,{}),u.jsx(SPe,{}),u.jsx(PPe,{}),u.jsx(jPe,{})]})}const sAe={workspace:uh,datastore:Kn,coveragestore:mu,layer:Yi,style:gc,layergroup:tve},oAe={workspace:"blue",datastore:"green",coveragestore:"orange",layer:"teal",style:"purple",layergroup:"cyan"};function aAe({isOpen:t,onClose:e,onSelect:r}){const[n,i]=I.useState(""),[s,a]=I.useState(0),o=I.useRef(null),d=I.useRef(null),m=Er(J=>J.selectNode),y=Er(J=>J.expandNode),b=dr("white","gray.800"),w=dr("gray.200","gray.600"),O=dr("gray.50","gray.700"),A=dr("kartoza.50","kartoza.900"),E=dr("gray.500","gray.400"),{data:$}=Qr({queryKey:["searchSuggestions"],queryFn:Lbe,staleTime:5*60*1e3}),{data:R,isLoading:F}=Qr({queryKey:["search",n],queryFn:()=>Rbe(n),enabled:n.length>=2,staleTime:30*1e3}),L=(R==null?void 0:R.results)||[],U=($==null?void 0:$.suggestions)||[];I.useEffect(()=>{a(0)},[L]),I.useEffect(()=>{t&&o.current&&setTimeout(()=>{var J;return(J=o.current)==null?void 0:J.focus()},100),t||(i(""),a(0))},[t]),I.useEffect(()=>{if(d.current&&L.length>0){const J=d.current.querySelector(`[data-index="${s}"]`);J&&J.scrollIntoView({block:"nearest"})}},[s,L.length]);const Q=I.useCallback(J=>{y(`connection:${J.connectionId}`),J.workspace&&(y(`workspace:${J.connectionId}:${J.workspace}`),J.type==="layer"?y(`layers:${J.connectionId}:${J.workspace}`):J.type==="style"?y(`styles:${J.connectionId}:${J.workspace}`):J.type==="datastore"?y(`datastores:${J.connectionId}:${J.workspace}`):J.type==="coveragestore"?y(`coveragestores:${J.connectionId}:${J.workspace}`):J.type==="layergroup"&&y(`layergroups:${J.connectionId}:${J.workspace}`)),m({id:`${J.type}:${J.connectionId}:${J.workspace||""}:${J.name}`,name:J.name,type:J.type,connectionId:J.connectionId,workspace:J.workspace}),r&&r(J),e()},[r,e,m,y]),Y=I.useCallback(J=>{J.key==="ArrowDown"?(J.preventDefault(),a(re=>Math.min(re+1,L.length-1))):J.key==="ArrowUp"?(J.preventDefault(),a(re=>Math.max(re-1,0))):J.key==="Enter"&&L.length>0?(J.preventDefault(),Q(L[s])):J.key==="Escape"&&e()},[L,s,Q,e]),Z=J=>{var re;i(J),(re=o.current)==null||re.focus()};return u.jsxs(es,{isOpen:t,onClose:e,size:"xl",motionPreset:"slideInBottom",children:[u.jsx(rs,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),u.jsx(ts,{bg:b,borderRadius:"xl",overflow:"hidden",mx:4,my:20,maxH:"70vh",children:u.jsxs(gs,{p:0,children:[u.jsxs(ue,{p:4,borderBottomWidth:"1px",borderColor:w,children:[u.jsxs(aa,{size:"lg",children:[u.jsx(vl,{pointerEvents:"none",children:F?u.jsx(Nn,{size:"sm",color:"kartoza.500"}):u.jsx(He,{as:jb,color:E})}),u.jsx(Ar,{ref:o,placeholder:"Search workspaces, layers, styles...",value:n,onChange:J=>i(J.target.value),onKeyDown:Y,border:"none",_focus:{boxShadow:"none"},fontSize:"md"}),n&&u.jsx(wb,{children:u.jsx(He,{as:tf,color:E,cursor:"pointer",onClick:()=>i(""),_hover:{color:"kartoza.500"}})})]}),!n&&U.length>0&&u.jsxs(Ce,{mt:3,spacing:2,flexWrap:"wrap",children:[u.jsx(ie,{fontSize:"sm",color:E,children:"Try searching for:"}),U.slice(0,6).map(J=>u.jsx(Qy,{size:"sm",variant:"subtle",colorScheme:"gray",cursor:"pointer",onClick:()=>Z(J),_hover:{bg:"gray.200"},borderRadius:"full",children:u.jsx(Cb,{children:J})},J))]})]}),u.jsxs(ue,{ref:d,maxH:"50vh",overflowY:"auto",py:2,children:[n.length>=2&&L.length===0&&!F&&u.jsx(ue,{p:8,textAlign:"center",children:u.jsxs(ie,{color:E,children:['No results found for "',n,'"']})}),n.length>=2&&n.length<2&&u.jsx(ue,{p:8,textAlign:"center",children:u.jsx(ie,{color:E,children:"Type at least 2 characters to search"})}),L.map((J,re)=>u.jsx(lAe,{result:J,isSelected:re===s,onClick:()=>Q(J),onMouseEnter:()=>a(re),dataIndex:re,hoverBg:O,selectedBg:A},`${J.connectionId}-${J.type}-${J.name}-${re}`)),!n&&u.jsx(ue,{p:8,textAlign:"center",children:u.jsxs(ft,{spacing:3,children:[u.jsx(He,{as:jb,boxSize:8,color:E}),u.jsx(ie,{color:E,children:"Search across all your GeoServer resources"}),u.jsxs(Ce,{spacing:1,fontSize:"sm",color:E,children:[u.jsx(ie,{children:"Press"}),u.jsx(Xc,{children:""}),u.jsx(Xc,{children:""}),u.jsx(ie,{children:"to navigate,"}),u.jsx(Xc,{children:"Enter"}),u.jsx(ie,{children:"to select"})]})]})})]}),u.jsx(ue,{px:4,py:2,borderTopWidth:"1px",borderColor:w,bg:dr("gray.50","gray.900"),children:u.jsxs(Ce,{justify:"space-between",fontSize:"xs",color:E,children:[u.jsxs(Ce,{spacing:4,children:[u.jsxs(Ce,{spacing:1,children:[u.jsx(Xc,{size:"xs",children:""}),u.jsx(ie,{children:"Navigate"})]}),u.jsxs(Ce,{spacing:1,children:[u.jsx(Xc,{size:"xs",children:"Enter"}),u.jsx(ie,{children:"Select"})]}),u.jsxs(Ce,{spacing:1,children:[u.jsx(Xc,{size:"xs",children:"Esc"}),u.jsx(ie,{children:"Close"})]})]}),R&&u.jsxs(ie,{children:[R.total," results"]})]})})]})})]})}function lAe({result:t,isSelected:e,onClick:r,onMouseEnter:n,dataIndex:i,hoverBg:s,selectedBg:a}){const o=sAe[t.type]||uh,d=oAe[t.type]||"gray",m=dr("gray.500","gray.400");return u.jsx(ue,{"data-index":i,px:4,py:3,cursor:"pointer",bg:e?a:"transparent",_hover:{bg:e?a:s},onClick:r,onMouseEnter:n,transition:"background 0.1s",children:u.jsxs(Sr,{align:"start",gap:3,children:[u.jsx(ue,{p:2,bg:`${d}.100`,borderRadius:"lg",color:`${d}.600`,children:u.jsx(He,{as:o,boxSize:5})}),u.jsxs(ue,{flex:1,minW:0,children:[u.jsxs(Ce,{spacing:2,mb:1,children:[u.jsx(ie,{fontWeight:"semibold",fontSize:"sm",noOfLines:1,children:t.name}),t.tags.map(y=>u.jsx(er,{colorScheme:d,fontSize:"xs",borderRadius:"full",px:2,children:y},y))]}),u.jsxs(Ce,{spacing:2,fontSize:"xs",color:m,children:[u.jsx(ie,{children:t.serverName}),t.workspace&&u.jsxs(u.Fragment,{children:[u.jsx(ie,{children:""}),u.jsx(ie,{children:t.workspace})]})]})]}),e&&u.jsx(Xc,{size:"xs",alignSelf:"center",children:"Enter"})]})})}function cAe(t){I.useEffect(()=>{const e=r=>{(r.ctrlKey||r.metaKey)&&r.key==="k"&&(r.preventDefault(),t())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t])}function uAe(){const[t,e]=I.useState(!1);return cAe(()=>e(!0)),u.jsxs(u.Fragment,{children:[u.jsx(c1e,{onSearchClick:()=>e(!0),children:u.jsx(S1e,{})}),u.jsx(iAe,{}),u.jsx(aAe,{isOpen:t,onClose:()=>e(!1)})]})}const hAe={kartoza:{50:"#e6f3fa",100:"#b3daf0",200:"#80c1e6",300:"#5BB5E8",400:"#4da8de",500:"#3B9DD9",600:"#2d8ac6",700:"#1B6B9B",800:"#155a84",900:"#0f4a6d"},accent:{50:"#fef5e7",100:"#fce5c3",200:"#f9d59f",300:"#F0B84D",400:"#E8A331",500:"#D4922A",600:"#c08526",700:"#a67121",800:"#8c5d1c",900:"#724917"},gray:{50:"#f7f9fb",100:"#e8ecf0",200:"#d4dbe2",300:"#C8C8C8",400:"#9E9E9E",500:"#6B7B8D",600:"#4D6370",700:"#3d4f5f",800:"#2a3a4a",900:"#1a2a3a"}},dAe={sm:"0 2px 8px rgba(27, 107, 155, 0.08)",md:"0 4px 16px rgba(27, 107, 155, 0.12)",lg:"0 8px 32px rgba(27, 107, 155, 0.16)",xl:"0 16px 48px rgba(27, 107, 155, 0.20)",kartoza:"0 4px 16px rgba(27, 107, 155, 0.10), 0 1px 4px rgba(0, 0, 0, 0.06)",kartozaHover:"0 8px 28px rgba(27, 107, 155, 0.16), 0 2px 8px rgba(0, 0, 0, 0.08)",accent:"0 4px 20px rgba(232, 163, 49, 0.4)",accentHover:"0 6px 28px rgba(232, 163, 49, 0.5)"},fAe={sm:"8px",md:"12px",lg:"20px",xl:"32px"},pAe={initialColorMode:"light",useSystemColorMode:!1},mAe=Qfe({config:pAe,colors:hAe,shadows:dAe,radii:fAe,fonts:{heading:"'Roboto', -apple-system, BlinkMacSystemFont, sans-serif",body:"'Roboto', -apple-system, BlinkMacSystemFont, sans-serif"},styles:{global:{body:{bg:"gray.50",color:"gray.900"},".kartoza-gradient":{background:"linear-gradient(135deg, #1B6B9B 0%, #3B9DD9 50%, #5BB5E8 100%)"},".kartoza-card":{borderRadius:"12px",boxShadow:"0 4px 16px rgba(27, 107, 155, 0.10), 0 1px 4px rgba(0, 0, 0, 0.06)",transition:"box-shadow 0.3s ease, transform 0.3s ease",_hover:{boxShadow:"0 8px 28px rgba(27, 107, 155, 0.16), 0 2px 8px rgba(0, 0, 0, 0.08)",transform:"translateY(-3px)"}}}},components:{Button:{baseStyle:{borderRadius:"10px",fontWeight:"600",transition:"all 0.25s ease"},defaultProps:{colorScheme:"kartoza"},variants:{solid:{bg:"kartoza.500",color:"white",boxShadow:"0 2px 8px rgba(27, 107, 155, 0.12)",_hover:{bg:"kartoza.600",boxShadow:"0 4px 14px rgba(27, 107, 155, 0.20)",transform:"translateY(-1px)"}},outline:{borderColor:"kartoza.500",borderWidth:"2px",color:"kartoza.500",_hover:{bg:"kartoza.50",transform:"translateY(-1px)"}},ghost:{color:"kartoza.500",_hover:{bg:"kartoza.50"}},accent:{bg:"accent.400",color:"white",boxShadow:"0 4px 20px rgba(232, 163, 49, 0.4)",_hover:{bg:"accent.500",boxShadow:"0 6px 28px rgba(232, 163, 49, 0.5)",transform:"translateY(-2px)"}},"accent-outline":{borderColor:"accent.400",borderWidth:"2px",color:"accent.400",_hover:{bg:"accent.50"}}},sizes:{lg:{fontSize:"md",px:8,py:6},xl:{fontSize:"lg",px:10,py:7,minW:"200px"}}},Link:{baseStyle:{color:"kartoza.500",_hover:{textDecoration:"underline",color:"kartoza.600"}}},Heading:{baseStyle:{color:"gray.900",fontWeight:"600"},variants:{brand:{color:"kartoza.700"},accent:{color:"accent.400"}}},Card:{baseStyle:{container:{borderRadius:"12px",boxShadow:"0 4px 16px rgba(27, 107, 155, 0.10), 0 1px 4px rgba(0, 0, 0, 0.06)",transition:"box-shadow 0.3s ease, transform 0.3s ease",overflow:"hidden",_hover:{boxShadow:"0 8px 28px rgba(27, 107, 155, 0.16), 0 2px 8px rgba(0, 0, 0, 0.08)"}}},variants:{elevated:{container:{_hover:{transform:"translateY(-3px)"}}},feature:{container:{borderLeft:"4px solid",borderLeftColor:"kartoza.500"}},accent:{container:{borderTop:"4px solid",borderTopColor:"accent.400"}}}},Modal:{baseStyle:{dialog:{borderRadius:"12px",boxShadow:"0 16px 48px rgba(27, 107, 155, 0.20)"},header:{borderBottom:"1px solid",borderBottomColor:"gray.100"},footer:{borderTop:"1px solid",borderTopColor:"gray.100"}}},Input:{defaultProps:{focusBorderColor:"kartoza.500"},baseStyle:{field:{borderRadius:"8px"}}},Select:{defaultProps:{focusBorderColor:"kartoza.500"}},Checkbox:{defaultProps:{colorScheme:"kartoza"}},Switch:{defaultProps:{colorScheme:"kartoza"}},Progress:{defaultProps:{colorScheme:"kartoza"}},Tabs:{defaultProps:{colorScheme:"kartoza"}},Badge:{baseStyle:{borderRadius:"6px",fontWeight:"600"},variants:{subtle:{bg:"kartoza.50",color:"kartoza.700"},solid:{bg:"kartoza.500",color:"white"},accent:{bg:"accent.400",color:"white"}}},Stat:{baseStyle:{container:{p:4},label:{color:"gray.600",fontSize:"sm",fontWeight:"500"},number:{color:"kartoza.700",fontWeight:"700"},helpText:{color:"gray.500"}}},Divider:{baseStyle:{borderColor:"gray.200"}}},semanticTokens:{colors:{primary:"kartoza.500","primary.dark":"kartoza.700","primary.light":"kartoza.300",secondary:"accent.400",success:"#4CAF50",error:"#E55B3C",warning:"accent.400",info:"kartoza.300"}}}),gAe=new Mxe({defaultOptions:{queries:{staleTime:1e3*60,refetchOnWindowFocus:!1}}});BP.createRoot(document.getElementById("root")).render(u.jsx(Mi.StrictMode,{children:u.jsx(Ixe,{client:gAe,children:u.jsx(Gde,{theme:mAe,children:u.jsx(uAe,{})})})}));
